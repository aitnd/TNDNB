function QN(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in n)){const o=Object.getOwnPropertyDescriptor(s,a);o&&Object.defineProperty(n,a,o.get?o:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();function Ly(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function WN(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var a=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:function(){return n[s]}})}),t}var l0={exports:{}},zu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j2;function YN(){if(j2)return zu;j2=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:n,type:s,key:c,ref:a!==void 0?a:null,props:o}}return zu.Fragment=e,zu.jsx=t,zu.jsxs=t,zu}var O2;function XN(){return O2||(O2=1,l0.exports=YN()),l0.exports}var d=XN(),c0={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D2;function JN(){if(D2)return qe;D2=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),E=Symbol.iterator;function T(V){return V===null||typeof V!="object"?null:(V=E&&V[E]||V["@@iterator"],typeof V=="function"?V:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,I={};function O(V,Z,K){this.props=V,this.context=Z,this.refs=I,this.updater=K||k}O.prototype.isReactComponent={},O.prototype.setState=function(V,Z){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,Z,"setState")},O.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function q(){}q.prototype=O.prototype;function G(V,Z,K){this.props=V,this.context=Z,this.refs=I,this.updater=K||k}var te=G.prototype=new q;te.constructor=G,L(te,O.prototype),te.isPureReactComponent=!0;var me=Array.isArray;function he(){}var N={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function R(V,Z,K){var ne=K.ref;return{$$typeof:n,type:V,key:Z,ref:ne!==void 0?ne:null,props:K}}function B(V,Z){return R(V.type,Z,V.props)}function M(V){return typeof V=="object"&&V!==null&&V.$$typeof===n}function z(V){var Z={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(K){return Z[K]})}var D=/\/+/g;function Ue(V,Z){return typeof V=="object"&&V!==null&&V.key!=null?z(""+V.key):Z.toString(36)}function re(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(he,he):(V.status="pending",V.then(function(Z){V.status==="pending"&&(V.status="fulfilled",V.value=Z)},function(Z){V.status==="pending"&&(V.status="rejected",V.reason=Z)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function P(V,Z,K,ne,ce){var _e=typeof V;(_e==="undefined"||_e==="boolean")&&(V=null);var Ae=!1;if(V===null)Ae=!0;else switch(_e){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(V.$$typeof){case n:case e:Ae=!0;break;case v:return Ae=V._init,P(Ae(V._payload),Z,K,ne,ce)}}if(Ae)return ce=ce(V),Ae=ne===""?"."+Ue(V,0):ne,me(ce)?(K="",Ae!=null&&(K=Ae.replace(D,"$&/")+"/"),P(ce,Z,K,"",function(ze){return ze})):ce!=null&&(M(ce)&&(ce=B(ce,K+(ce.key==null||V&&V.key===ce.key?"":(""+ce.key).replace(D,"$&/")+"/")+Ae)),Z.push(ce)),1;Ae=0;var We=ne===""?".":ne+":";if(me(V))for(var ot=0;ot<V.length;ot++)ne=V[ot],_e=We+Ue(ne,ot),Ae+=P(ne,Z,K,_e,ce);else if(ot=T(V),typeof ot=="function")for(V=ot.call(V),ot=0;!(ne=V.next()).done;)ne=ne.value,_e=We+Ue(ne,ot++),Ae+=P(ne,Z,K,_e,ce);else if(_e==="object"){if(typeof V.then=="function")return P(re(V),Z,K,ne,ce);throw Z=String(V),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function ie(V,Z,K){if(V==null)return V;var ne=[],ce=0;return P(V,ne,"","",function(_e){return Z.call(K,_e,ce++)}),ne}function ve(V){if(V._status===-1){var Z=V._result;Z=Z(),Z.then(function(K){(V._status===0||V._status===-1)&&(V._status=1,V._result=K)},function(K){(V._status===0||V._status===-1)&&(V._status=2,V._result=K)}),V._status===-1&&(V._status=0,V._result=Z)}if(V._status===1)return V._result.default;throw V._result}var Ne=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},we={map:ie,forEach:function(V,Z,K){ie(V,function(){Z.apply(this,arguments)},K)},count:function(V){var Z=0;return ie(V,function(){Z++}),Z},toArray:function(V){return ie(V,function(Z){return Z})||[]},only:function(V){if(!M(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return qe.Activity=w,qe.Children=we,qe.Component=O,qe.Fragment=t,qe.Profiler=a,qe.PureComponent=G,qe.StrictMode=s,qe.Suspense=g,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,qe.__COMPILER_RUNTIME={__proto__:null,c:function(V){return N.H.useMemoCache(V)}},qe.cache=function(V){return function(){return V.apply(null,arguments)}},qe.cacheSignal=function(){return null},qe.cloneElement=function(V,Z,K){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var ne=L({},V.props),ce=V.key;if(Z!=null)for(_e in Z.key!==void 0&&(ce=""+Z.key),Z)!C.call(Z,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&Z.ref===void 0||(ne[_e]=Z[_e]);var _e=arguments.length-2;if(_e===1)ne.children=K;else if(1<_e){for(var Ae=Array(_e),We=0;We<_e;We++)Ae[We]=arguments[We+2];ne.children=Ae}return R(V.type,ce,ne)},qe.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:o,_context:V},V},qe.createElement=function(V,Z,K){var ne,ce={},_e=null;if(Z!=null)for(ne in Z.key!==void 0&&(_e=""+Z.key),Z)C.call(Z,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(ce[ne]=Z[ne]);var Ae=arguments.length-2;if(Ae===1)ce.children=K;else if(1<Ae){for(var We=Array(Ae),ot=0;ot<Ae;ot++)We[ot]=arguments[ot+2];ce.children=We}if(V&&V.defaultProps)for(ne in Ae=V.defaultProps,Ae)ce[ne]===void 0&&(ce[ne]=Ae[ne]);return R(V,_e,ce)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(V){return{$$typeof:h,render:V}},qe.isValidElement=M,qe.lazy=function(V){return{$$typeof:v,_payload:{_status:-1,_result:V},_init:ve}},qe.memo=function(V,Z){return{$$typeof:p,type:V,compare:Z===void 0?null:Z}},qe.startTransition=function(V){var Z=N.T,K={};N.T=K;try{var ne=V(),ce=N.S;ce!==null&&ce(K,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(he,Ne)}catch(_e){Ne(_e)}finally{Z!==null&&K.types!==null&&(Z.types=K.types),N.T=Z}},qe.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},qe.use=function(V){return N.H.use(V)},qe.useActionState=function(V,Z,K){return N.H.useActionState(V,Z,K)},qe.useCallback=function(V,Z){return N.H.useCallback(V,Z)},qe.useContext=function(V){return N.H.useContext(V)},qe.useDebugValue=function(){},qe.useDeferredValue=function(V,Z){return N.H.useDeferredValue(V,Z)},qe.useEffect=function(V,Z){return N.H.useEffect(V,Z)},qe.useEffectEvent=function(V){return N.H.useEffectEvent(V)},qe.useId=function(){return N.H.useId()},qe.useImperativeHandle=function(V,Z,K){return N.H.useImperativeHandle(V,Z,K)},qe.useInsertionEffect=function(V,Z){return N.H.useInsertionEffect(V,Z)},qe.useLayoutEffect=function(V,Z){return N.H.useLayoutEffect(V,Z)},qe.useMemo=function(V,Z){return N.H.useMemo(V,Z)},qe.useOptimistic=function(V,Z){return N.H.useOptimistic(V,Z)},qe.useReducer=function(V,Z,K){return N.H.useReducer(V,Z,K)},qe.useRef=function(V){return N.H.useRef(V)},qe.useState=function(V){return N.H.useState(V)},qe.useSyncExternalStore=function(V,Z,K){return N.H.useSyncExternalStore(V,Z,K)},qe.useTransition=function(){return N.H.useTransition()},qe.version="19.2.0",qe}var P2;function My(){return P2||(P2=1,c0.exports=JN()),c0.exports}var F=My();const Js=Ly(F);var u0={exports:{}},Hu={},d0={exports:{}},h0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L2;function ZN(){return L2||(L2=1,(function(n){function e(P,ie){var ve=P.length;P.push(ie);e:for(;0<ve;){var Ne=ve-1>>>1,we=P[Ne];if(0<a(we,ie))P[Ne]=ie,P[ve]=we,ve=Ne;else break e}}function t(P){return P.length===0?null:P[0]}function s(P){if(P.length===0)return null;var ie=P[0],ve=P.pop();if(ve!==ie){P[0]=ve;e:for(var Ne=0,we=P.length,V=we>>>1;Ne<V;){var Z=2*(Ne+1)-1,K=P[Z],ne=Z+1,ce=P[ne];if(0>a(K,ve))ne<we&&0>a(ce,K)?(P[Ne]=ce,P[ne]=ve,Ne=ne):(P[Ne]=K,P[Z]=ve,Ne=Z);else if(ne<we&&0>a(ce,ve))P[Ne]=ce,P[ne]=ve,Ne=ne;else break e}}return ie}function a(P,ie){var ve=P.sortIndex-ie.sortIndex;return ve!==0?ve:P.id-ie.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var g=[],p=[],v=1,w=null,E=3,T=!1,k=!1,L=!1,I=!1,O=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function te(P){for(var ie=t(p);ie!==null;){if(ie.callback===null)s(p);else if(ie.startTime<=P)s(p),ie.sortIndex=ie.expirationTime,e(g,ie);else break;ie=t(p)}}function me(P){if(L=!1,te(P),!k)if(t(g)!==null)k=!0,he||(he=!0,z());else{var ie=t(p);ie!==null&&re(me,ie.startTime-P)}}var he=!1,N=-1,C=5,R=-1;function B(){return I?!0:!(n.unstable_now()-R<C)}function M(){if(I=!1,he){var P=n.unstable_now();R=P;var ie=!0;try{e:{k=!1,L&&(L=!1,q(N),N=-1),T=!0;var ve=E;try{t:{for(te(P),w=t(g);w!==null&&!(w.expirationTime>P&&B());){var Ne=w.callback;if(typeof Ne=="function"){w.callback=null,E=w.priorityLevel;var we=Ne(w.expirationTime<=P);if(P=n.unstable_now(),typeof we=="function"){w.callback=we,te(P),ie=!0;break t}w===t(g)&&s(g),te(P)}else s(g);w=t(g)}if(w!==null)ie=!0;else{var V=t(p);V!==null&&re(me,V.startTime-P),ie=!1}}break e}finally{w=null,E=ve,T=!1}ie=void 0}}finally{ie?z():he=!1}}}var z;if(typeof G=="function")z=function(){G(M)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Ue=D.port2;D.port1.onmessage=M,z=function(){Ue.postMessage(null)}}else z=function(){O(M,0)};function re(P,ie){N=O(function(){P(n.unstable_now())},ie)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(P){P.callback=null},n.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<P?Math.floor(1e3/P):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_next=function(P){switch(E){case 1:case 2:case 3:var ie=3;break;default:ie=E}var ve=E;E=ie;try{return P()}finally{E=ve}},n.unstable_requestPaint=function(){I=!0},n.unstable_runWithPriority=function(P,ie){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var ve=E;E=P;try{return ie()}finally{E=ve}},n.unstable_scheduleCallback=function(P,ie,ve){var Ne=n.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Ne+ve:Ne):ve=Ne,P){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=ve+we,P={id:v++,callback:ie,priorityLevel:P,startTime:ve,expirationTime:we,sortIndex:-1},ve>Ne?(P.sortIndex=ve,e(p,P),t(g)===null&&P===t(p)&&(L?(q(N),N=-1):L=!0,re(me,ve-Ne))):(P.sortIndex=we,e(g,P),k||T||(k=!0,he||(he=!0,z()))),P},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(P){var ie=E;return function(){var ve=E;E=ie;try{return P.apply(this,arguments)}finally{E=ve}}}})(h0)),h0}var M2;function e3(){return M2||(M2=1,d0.exports=ZN()),d0.exports}var f0={exports:{}},Mn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V2;function t3(){if(V2)return Mn;V2=1;var n=My();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(g,p,v){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:w==null?null:""+w,children:g,containerInfo:p,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Mn.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(g,p,null,v)},Mn.flushSync=function(g){var p=c.T,v=s.p;try{if(c.T=null,s.p=2,g)return g()}finally{c.T=p,s.p=v,s.d.f()}},Mn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},Mn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Mn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,w=h(v,p.crossOrigin),E=typeof p.integrity=="string"?p.integrity:void 0,T=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:w,integrity:E,fetchPriority:T}):v==="script"&&s.d.X(g,{crossOrigin:w,integrity:E,fetchPriority:T,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Mn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=h(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},Mn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,w=h(v,p.crossOrigin);s.d.L(g,v,{crossOrigin:w,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Mn.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=h(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},Mn.requestFormReset=function(g){s.d.r(g)},Mn.unstable_batchedUpdates=function(g,p){return g(p)},Mn.useFormState=function(g,p,v){return c.H.useFormState(g,p,v)},Mn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Mn.version="19.2.0",Mn}var U2;function SE(){if(U2)return f0.exports;U2=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),f0.exports=t3(),f0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B2;function n3(){if(B2)return Hu;B2=1;var n=e3(),e=My(),t=SE();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var i=r,l=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(l=i.return),r=i.return;while(r)}return i.tag===3?l:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function h(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function g(r){if(o(r)!==r)throw Error(s(188))}function p(r){var i=r.alternate;if(!i){if(i=o(r),i===null)throw Error(s(188));return i!==r?null:r}for(var l=r,u=i;;){var m=l.return;if(m===null)break;var y=m.alternate;if(y===null){if(u=m.return,u!==null){l=u;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===l)return g(m),r;if(y===u)return g(m),i;y=y.sibling}throw Error(s(188))}if(l.return!==u.return)l=m,u=y;else{for(var _=!1,S=m.child;S;){if(S===l){_=!0,l=m,u=y;break}if(S===u){_=!0,u=m,l=y;break}S=S.sibling}if(!_){for(S=y.child;S;){if(S===l){_=!0,l=y,u=m;break}if(S===u){_=!0,u=y,l=m;break}S=S.sibling}if(!_)throw Error(s(189))}}if(l.alternate!==u)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?r:i}function v(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=v(r),i!==null)return i;r=r.sibling}return null}var w=Object.assign,E=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),G=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),me=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function z(r){return r===null||typeof r!="object"?null:(r=M&&r[M]||r["@@iterator"],typeof r=="function"?r:null)}var D=Symbol.for("react.client.reference");function Ue(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===D?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case L:return"Fragment";case O:return"Profiler";case I:return"StrictMode";case me:return"Suspense";case he:return"SuspenseList";case R:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case k:return"Portal";case G:return r.displayName||"Context";case q:return(r._context.displayName||"Context")+".Consumer";case te:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case N:return i=r.displayName||null,i!==null?i:Ue(r.type)||"Memo";case C:i=r._payload,r=r._init;try{return Ue(r(i))}catch{}}return null}var re=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},Ne=[],we=-1;function V(r){return{current:r}}function Z(r){0>we||(r.current=Ne[we],Ne[we]=null,we--)}function K(r,i){we++,Ne[we]=r.current,r.current=i}var ne=V(null),ce=V(null),_e=V(null),Ae=V(null);function We(r,i){switch(K(_e,i),K(ce,r),K(ne,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?t2(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=t2(i),r=n2(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}Z(ne),K(ne,r)}function ot(){Z(ne),Z(ce),Z(_e)}function ze(r){r.memoizedState!==null&&K(Ae,r);var i=ne.current,l=n2(i,r.type);i!==l&&(K(ce,r),K(ne,l))}function wt(r){ce.current===r&&(Z(ne),Z(ce)),Ae.current===r&&(Z(Ae),Mu._currentValue=ve)}var Rn,ms;function rt(r){if(Rn===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);Rn=i&&i[1]||"",ms=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rn+r+ms}var jn=!1;function er(r,i){if(!r||jn)return"";jn=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(ee){var X=ee}Reflect.construct(r,[],ue)}else{try{ue.call()}catch(ee){X=ee}r.call(ue.prototype)}}else{try{throw Error()}catch(ee){X=ee}(ue=r())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(ee){if(ee&&X&&typeof ee.stack=="string")return[ee.stack,X.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),_=y[0],S=y[1];if(_&&S){var U=_.split(`
`),Y=S.split(`
`);for(m=u=0;u<U.length&&!U[u].includes("DetermineComponentFrameRoot");)u++;for(;m<Y.length&&!Y[m].includes("DetermineComponentFrameRoot");)m++;if(u===U.length||m===Y.length)for(u=U.length-1,m=Y.length-1;1<=u&&0<=m&&U[u]!==Y[m];)m--;for(;1<=u&&0<=m;u--,m--)if(U[u]!==Y[m]){if(u!==1||m!==1)do if(u--,m--,0>m||U[u]!==Y[m]){var ae=`
`+U[u].replace(" at new "," at ");return r.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",r.displayName)),ae}while(1<=u&&0<=m);break}}}finally{jn=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?rt(l):""}function Sr(r,i){switch(r.tag){case 26:case 27:case 5:return rt(r.type);case 16:return rt("Lazy");case 13:return r.child!==i&&i!==null?rt("Suspense Fallback"):rt("Suspense");case 19:return rt("SuspenseList");case 0:case 15:return er(r.type,!1);case 11:return er(r.type.render,!1);case 1:return er(r.type,!0);case 31:return rt("Activity");default:return""}}function Ri(r){try{var i="",l=null;do i+=Sr(r,l),l=r,r=r.return;while(r);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Mt=Object.prototype.hasOwnProperty,Ht=n.unstable_scheduleCallback,tr=n.unstable_cancelCallback,Ga=n.unstable_shouldYield,sl=n.unstable_requestPaint,En=n.unstable_now,Os=n.unstable_getCurrentPriorityLevel,nr=n.unstable_ImmediatePriority,Ka=n.unstable_UserBlockingPriority,sr=n.unstable_NormalPriority,rl=n.unstable_LowPriority,Qa=n.unstable_IdlePriority,Wa=n.log,rr=n.unstable_setDisableYieldValue,gs=null,Qt=null;function es(r){if(typeof Wa=="function"&&rr(r),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(gs,r)}catch{}}var Dt=Math.clz32?Math.clz32:Xa,Ya=Math.log,Ar=Math.LN2;function Xa(r){return r>>>=0,r===0?32:31-(Ya(r)/Ar|0)|0}var On=256,ei=262144,pt=4194304;function Ds(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ps(r,i,l){var u=r.pendingLanes;if(u===0)return 0;var m=0,y=r.suspendedLanes,_=r.pingedLanes;r=r.warmLanes;var S=u&134217727;return S!==0?(u=S&~y,u!==0?m=Ds(u):(_&=S,_!==0?m=Ds(_):l||(l=S&~r,l!==0&&(m=Ds(l))))):(S=u&~y,S!==0?m=Ds(S):_!==0?m=Ds(_):l||(l=u&~r,l!==0&&(m=Ds(l)))),m===0?0:i!==0&&i!==m&&(i&y)===0&&(y=m&-m,l=i&-i,y>=l||y===32&&(l&4194048)!==0)?i:m}function Gn(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function ir(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function il(){var r=pt;return pt<<=1,(pt&62914560)===0&&(pt=4194304),r}function Kn(r){for(var i=[],l=0;31>l;l++)i.push(r);return i}function Nr(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function ji(r,i,l,u,m,y){var _=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var S=r.entanglements,U=r.expirationTimes,Y=r.hiddenUpdates;for(l=_&~l;0<l;){var ae=31-Dt(l),ue=1<<ae;S[ae]=0,U[ae]=-1;var X=Y[ae];if(X!==null)for(Y[ae]=null,ae=0;ae<X.length;ae++){var ee=X[ae];ee!==null&&(ee.lane&=-536870913)}l&=~ue}u!==0&&Cr(r,u,0),y!==0&&m===0&&r.tag!==0&&(r.suspendedLanes|=y&~(_&~i))}function Cr(r,i,l){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-Dt(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|l&261930}function Ls(r,i){var l=r.entangledLanes|=i;for(r=r.entanglements;l;){var u=31-Dt(l),m=1<<u;m&i|r[u]&i&&(r[u]|=i),l&=~m}}function Oi(r,i){var l=i&-i;return l=(l&42)!==0?1:kr(l),(l&(r.suspendedLanes|i))!==0?0:l}function kr(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ms(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Ja(){var r=ie.p;return r!==0?r:(r=window.event,r===void 0?32:S2(r.type))}function Qn(r,i){var l=ie.p;try{return ie.p=r,i()}finally{ie.p=l}}var ps=Math.random().toString(36).slice(2),qt="__reactFiber$"+ps,nn="__reactProps$"+ps,Vs="__reactContainer$"+ps,Di="__reactEvents$"+ps,Wc="__reactListeners$"+ps,al="__reactHandles$"+ps,ol="__reactResources$"+ps,Us="__reactMarker$"+ps;function Pi(r){delete r[qt],delete r[nn],delete r[Di],delete r[Wc],delete r[al]}function Bs(r){var i=r[qt];if(i)return i;for(var l=r.parentNode;l;){if(i=l[Vs]||l[qt]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(r=c2(r);r!==null;){if(l=r[qt])return l;r=c2(r)}return i}r=l,l=r.parentNode}return null}function ts(r){if(r=r[qt]||r[Vs]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function Dn(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function ns(r){var i=r[ol];return i||(i=r[ol]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function $t(r){r[Us]=!0}var Za=new Set,Li={};function Pn(r,i){Ln(r,i),Ln(r+"Capture",i)}function Ln(r,i){for(Li[r]=i,r=0;r<i.length;r++)Za.add(i[r])}var Mi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vi={},j={};function fe(r){return Mt.call(j,r)?!0:Mt.call(Vi,r)?!1:Mi.test(r)?j[r]=!0:(Vi[r]=!0,!1)}function Ie(r,i,l){if(fe(i))if(l===null)r.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+l)}}function Re(r,i,l){if(l===null)r.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+l)}}function pe(r,i,l,u){if(u===null)r.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(i,l,""+u)}}function Be(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function _t(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ft(r,i,l){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,y=u.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return m.call(this)},set:function(_){l=""+_,y.call(this,_)}}),Object.defineProperty(r,i,{enumerable:u.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Ye(r){if(!r._valueTracker){var i=_t(r)?"checked":"value";r._valueTracker=Ft(r,i,""+r[i])}}function eo(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var l=i.getValue(),u="";return r&&(u=_t(r)?r.checked?"true":"false":r.value),r=u,r!==l?(i.setValue(r),!0):!1}function Ir(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var to=/[\n"\\]/g;function ss(r){return r.replace(to,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ll(r,i,l,u,m,y,_,S){r.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?r.type=_:r.removeAttribute("type"),i!=null?_==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+Be(i)):r.value!==""+Be(i)&&(r.value=""+Be(i)):_!=="submit"&&_!=="reset"||r.removeAttribute("value"),i!=null?Yc(r,_,Be(i)):l!=null?Yc(r,_,Be(l)):u!=null&&r.removeAttribute("value"),m==null&&y!=null&&(r.defaultChecked=!!y),m!=null&&(r.checked=m&&typeof m!="function"&&typeof m!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?r.name=""+Be(S):r.removeAttribute("name")}function $d(r,i,l,u,m,y,_,S){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(r.type=y),i!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||i!=null)){Ye(r);return}l=l!=null?""+Be(l):"",i=i!=null?""+Be(i):l,S||i===r.value||(r.value=i),r.defaultValue=i}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=S?r.checked:!!u,r.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.name=_),Ye(r)}function Yc(r,i,l){i==="number"&&Ir(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function Ui(r,i,l,u){if(r=r.options,i){i={};for(var m=0;m<l.length;m++)i["$"+l[m]]=!0;for(l=0;l<r.length;l++)m=i.hasOwnProperty("$"+r[l].value),r[l].selected!==m&&(r[l].selected=m),m&&u&&(r[l].defaultSelected=!0)}else{for(l=""+Be(l),i=null,m=0;m<r.length;m++){if(r[m].value===l){r[m].selected=!0,u&&(r[m].defaultSelected=!0);return}i!==null||r[m].disabled||(i=r[m])}i!==null&&(i.selected=!0)}}function Fd(r,i,l){if(i!=null&&(i=""+Be(i),i!==r.value&&(r.value=i),l==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=l!=null?""+Be(l):""}function Bi(r,i,l,u){if(i==null){if(u!=null){if(l!=null)throw Error(s(92));if(re(u)){if(1<u.length)throw Error(s(93));u=u[0]}l=u}l==null&&(l=""),i=l}l=Be(i),r.defaultValue=l,u=r.textContent,u===l&&u!==""&&u!==null&&(r.value=u),Ye(r)}function rs(r,i){if(i){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=i;return}}r.textContent=i}var Gd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xc(r,i,l){var u=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,l):typeof l!="number"||l===0||Gd.has(i)?i==="float"?r.cssFloat=l:r[i]=(""+l).trim():r[i]=l+"px"}function Jc(r,i,l){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var m in i)u=i[m],i.hasOwnProperty(m)&&l[m]!==u&&Xc(r,m,u)}else for(var y in i)i.hasOwnProperty(y)&&Xc(r,y,i[y])}function cl(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ul(r){return zi.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function ar(){}var Zc=null;function zs(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Hi=null,Rr=null;function no(r){var i=ts(r);if(i&&(r=i.stateNode)){var l=r[nn]||null;e:switch(r=i.stateNode,i.type){case"input":if(ll(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+ss(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var u=l[i];if(u!==r&&u.form===r.form){var m=u[nn]||null;if(!m)throw Error(s(90));ll(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(i=0;i<l.length;i++)u=l[i],u.form===r.form&&eo(u)}break e;case"textarea":Fd(r,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&Ui(r,!!l.multiple,i,!1)}}}var dl=!1;function qi(r,i,l){if(dl)return r(i,l);dl=!0;try{var u=r(i);return u}finally{if(dl=!1,(Hi!==null||Rr!==null)&&(Bh(),Hi&&(i=Hi,r=Rr,Rr=Hi=null,no(i),r)))for(i=0;i<r.length;i++)no(r[i])}}function or(r,i){var l=r.stateNode;if(l===null)return null;var u=l[nn]||null;if(u===null)return null;l=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(s(231,i,typeof l));return l}var Hs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),so=!1;if(Hs)try{var xt={};Object.defineProperty(xt,"passive",{get:function(){so=!0}}),window.addEventListener("test",xt,xt),window.removeEventListener("test",xt,xt)}catch{so=!1}var jr=null,eu=null,ro=null;function tu(){if(ro)return ro;var r,i=eu,l=i.length,u,m="value"in jr?jr.value:jr.textContent,y=m.length;for(r=0;r<l&&i[r]===m[r];r++);var _=l-r;for(u=1;u<=_&&i[l-u]===m[y-u];u++);return ro=m.slice(r,1<u?1-u:void 0)}function io(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function ti(){return!0}function lr(){return!1}function Tn(r){function i(l,u,m,y,_){this._reactName=l,this._targetInst=m,this.type=u,this.nativeEvent=y,this.target=_,this.currentTarget=null;for(var S in r)r.hasOwnProperty(S)&&(l=r[S],this[S]=l?l(y):y[S]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ti:lr,this.isPropagationStopped=lr,this}return w(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ti)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ti)},persist:function(){},isPersistent:ti}),i}var ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Or=Tn(ni),$i=w({},ni,{view:0,detail:0}),nu=Tn($i),Fi,hl,Dr,fl=w({},$i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gi,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Dr&&(Dr&&r.type==="mousemove"?(Fi=r.screenX-Dr.screenX,hl=r.screenY-Dr.screenY):hl=Fi=0,Dr=r),Fi)},movementY:function(r){return"movementY"in r?r.movementY:hl}}),su=Tn(fl),ao=w({},fl,{dataTransfer:0}),Qd=Tn(ao),Wd=w({},$i,{relatedTarget:0}),oo=Tn(Wd),ru=w({},ni,{animationName:0,elapsedTime:0,pseudoElement:0}),Yd=Tn(ru),ml=w({},ni,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Xd=Tn(ml),Jd=w({},ni,{data:0}),Pr=Tn(Jd),Zd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},th={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nh(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=th[r])?!!i[r]:!1}function Gi(){return nh}var Wn=w({},$i,{key:function(r){if(r.key){var i=Zd[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=io(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?eh[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gi,charCode:function(r){return r.type==="keypress"?io(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?io(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),sh=Tn(Wn),rh=w({},fl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),si=Tn(rh),f=w({},$i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gi}),b=Tn(f),x=w({},ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Tn(x),Q=w({},fl,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),J=Tn(Q),ge=w({},ni,{newState:0,oldState:0}),Ge=Tn(ge),Wt=[9,13,27,32],ht=Hs&&"CompositionEvent"in window,Pt=null;Hs&&"documentMode"in document&&(Pt=document.documentMode);var qs=Hs&&"TextEvent"in window&&!Pt,Lr=Hs&&(!ht||Pt&&8<Pt&&11>=Pt),cr=" ",ur=!1;function lo(r,i){switch(r){case"keyup":return Wt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gl(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var pl=!1;function vA(r,i){switch(r){case"compositionend":return gl(i);case"keypress":return i.which!==32?null:(ur=!0,cr);case"textInput":return r=i.data,r===cr&&ur?null:r;default:return null}}function bA(r,i){if(pl)return r==="compositionend"||!ht&&lo(r,i)?(r=tu(),ro=eu=jr=null,pl=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Lr&&i.locale!=="ko"?null:i.data;default:return null}}var wA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hb(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!wA[r.type]:i==="textarea"}function fb(r,i,l,u){Hi?Rr?Rr.push(u):Rr=[u]:Hi=u,i=Kh(i,"onChange"),0<i.length&&(l=new Or("onChange","change",null,l,u),r.push({event:l,listeners:i}))}var iu=null,au=null;function _A(r){W1(r,0)}function ih(r){var i=Dn(r);if(eo(i))return r}function mb(r,i){if(r==="change")return i}var gb=!1;if(Hs){var gg;if(Hs){var pg="oninput"in document;if(!pg){var pb=document.createElement("div");pb.setAttribute("oninput","return;"),pg=typeof pb.oninput=="function"}gg=pg}else gg=!1;gb=gg&&(!document.documentMode||9<document.documentMode)}function yb(){iu&&(iu.detachEvent("onpropertychange",vb),au=iu=null)}function vb(r){if(r.propertyName==="value"&&ih(au)){var i=[];fb(i,au,r,zs(r)),qi(_A,i)}}function xA(r,i,l){r==="focusin"?(yb(),iu=i,au=l,iu.attachEvent("onpropertychange",vb)):r==="focusout"&&yb()}function EA(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ih(au)}function TA(r,i){if(r==="click")return ih(i)}function SA(r,i){if(r==="input"||r==="change")return ih(i)}function AA(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var ys=typeof Object.is=="function"?Object.is:AA;function ou(r,i){if(ys(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var l=Object.keys(r),u=Object.keys(i);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var m=l[u];if(!Mt.call(i,m)||!ys(r[m],i[m]))return!1}return!0}function bb(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function wb(r,i){var l=bb(r);r=0;for(var u;l;){if(l.nodeType===3){if(u=r+l.textContent.length,r<=i&&u>=i)return{node:l,offset:i-r};r=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=bb(l)}}function _b(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?_b(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function xb(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=Ir(r.document);i instanceof r.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)r=i.contentWindow;else break;i=Ir(r.document)}return i}function yg(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var NA=Hs&&"documentMode"in document&&11>=document.documentMode,yl=null,vg=null,lu=null,bg=!1;function Eb(r,i,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;bg||yl==null||yl!==Ir(u)||(u=yl,"selectionStart"in u&&yg(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),lu&&ou(lu,u)||(lu=u,u=Kh(vg,"onSelect"),0<u.length&&(i=new Or("onSelect","select",null,i,l),r.push({event:i,listeners:u}),i.target=yl)))}function co(r,i){var l={};return l[r.toLowerCase()]=i.toLowerCase(),l["Webkit"+r]="webkit"+i,l["Moz"+r]="moz"+i,l}var vl={animationend:co("Animation","AnimationEnd"),animationiteration:co("Animation","AnimationIteration"),animationstart:co("Animation","AnimationStart"),transitionrun:co("Transition","TransitionRun"),transitionstart:co("Transition","TransitionStart"),transitioncancel:co("Transition","TransitionCancel"),transitionend:co("Transition","TransitionEnd")},wg={},Tb={};Hs&&(Tb=document.createElement("div").style,"AnimationEvent"in window||(delete vl.animationend.animation,delete vl.animationiteration.animation,delete vl.animationstart.animation),"TransitionEvent"in window||delete vl.transitionend.transition);function uo(r){if(wg[r])return wg[r];if(!vl[r])return r;var i=vl[r],l;for(l in i)if(i.hasOwnProperty(l)&&l in Tb)return wg[r]=i[l];return r}var Sb=uo("animationend"),Ab=uo("animationiteration"),Nb=uo("animationstart"),CA=uo("transitionrun"),kA=uo("transitionstart"),IA=uo("transitioncancel"),Cb=uo("transitionend"),kb=new Map,_g="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_g.push("scrollEnd");function dr(r,i){kb.set(r,i),Pn(i,[r])}var ah=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},$s=[],bl=0,xg=0;function oh(){for(var r=bl,i=xg=bl=0;i<r;){var l=$s[i];$s[i++]=null;var u=$s[i];$s[i++]=null;var m=$s[i];$s[i++]=null;var y=$s[i];if($s[i++]=null,u!==null&&m!==null){var _=u.pending;_===null?m.next=m:(m.next=_.next,_.next=m),u.pending=m}y!==0&&Ib(l,m,y)}}function lh(r,i,l,u){$s[bl++]=r,$s[bl++]=i,$s[bl++]=l,$s[bl++]=u,xg|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Eg(r,i,l,u){return lh(r,i,l,u),ch(r)}function ho(r,i){return lh(r,null,null,i),ch(r)}function Ib(r,i,l){r.lanes|=l;var u=r.alternate;u!==null&&(u.lanes|=l);for(var m=!1,y=r.return;y!==null;)y.childLanes|=l,u=y.alternate,u!==null&&(u.childLanes|=l),y.tag===22&&(r=y.stateNode,r===null||r._visibility&1||(m=!0)),r=y,y=y.return;return r.tag===3?(y=r.stateNode,m&&i!==null&&(m=31-Dt(l),r=y.hiddenUpdates,u=r[m],u===null?r[m]=[i]:u.push(i),i.lane=l|536870912),y):null}function ch(r){if(50<Iu)throw Iu=0,jp=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var wl={};function RA(r,i,l,u){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vs(r,i,l,u){return new RA(r,i,l,u)}function Tg(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ri(r,i){var l=r.alternate;return l===null?(l=vs(r.tag,i,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=i,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,i=r.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function Rb(r,i){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,i=l.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function uh(r,i,l,u,m,y){var _=0;if(u=r,typeof r=="function")Tg(r)&&(_=1);else if(typeof r=="string")_=LN(r,l,ne.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case R:return r=vs(31,l,i,m),r.elementType=R,r.lanes=y,r;case L:return fo(l.children,m,y,i);case I:_=8,m|=24;break;case O:return r=vs(12,l,i,m|2),r.elementType=O,r.lanes=y,r;case me:return r=vs(13,l,i,m),r.elementType=me,r.lanes=y,r;case he:return r=vs(19,l,i,m),r.elementType=he,r.lanes=y,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case G:_=10;break e;case q:_=9;break e;case te:_=11;break e;case N:_=14;break e;case C:_=16,u=null;break e}_=29,l=Error(s(130,r===null?"null":typeof r,"")),u=null}return i=vs(_,l,i,m),i.elementType=r,i.type=u,i.lanes=y,i}function fo(r,i,l,u){return r=vs(7,r,u,i),r.lanes=l,r}function Sg(r,i,l){return r=vs(6,r,null,i),r.lanes=l,r}function jb(r){var i=vs(18,null,null,0);return i.stateNode=r,i}function Ag(r,i,l){return i=vs(4,r.children!==null?r.children:[],r.key,i),i.lanes=l,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var Ob=new WeakMap;function Fs(r,i){if(typeof r=="object"&&r!==null){var l=Ob.get(r);return l!==void 0?l:(i={value:r,source:i,stack:Ri(i)},Ob.set(r,i),i)}return{value:r,source:i,stack:Ri(i)}}var _l=[],xl=0,dh=null,cu=0,Gs=[],Ks=0,Ki=null,Mr=1,Vr="";function ii(r,i){_l[xl++]=cu,_l[xl++]=dh,dh=r,cu=i}function Db(r,i,l){Gs[Ks++]=Mr,Gs[Ks++]=Vr,Gs[Ks++]=Ki,Ki=r;var u=Mr;r=Vr;var m=32-Dt(u)-1;u&=~(1<<m),l+=1;var y=32-Dt(i)+m;if(30<y){var _=m-m%5;y=(u&(1<<_)-1).toString(32),u>>=_,m-=_,Mr=1<<32-Dt(i)+m|l<<m|u,Vr=y+r}else Mr=1<<y|l<<m|u,Vr=r}function Ng(r){r.return!==null&&(ii(r,1),Db(r,1,0))}function Cg(r){for(;r===dh;)dh=_l[--xl],_l[xl]=null,cu=_l[--xl],_l[xl]=null;for(;r===Ki;)Ki=Gs[--Ks],Gs[Ks]=null,Vr=Gs[--Ks],Gs[Ks]=null,Mr=Gs[--Ks],Gs[Ks]=null}function Pb(r,i){Gs[Ks++]=Mr,Gs[Ks++]=Vr,Gs[Ks++]=Ki,Mr=i.id,Vr=i.overflow,Ki=r}var Sn=null,jt=null,it=!1,Qi=null,Qs=!1,kg=Error(s(519));function Wi(r){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw uu(Fs(i,r)),kg}function Lb(r){var i=r.stateNode,l=r.type,u=r.memoizedProps;switch(i[qt]=r,i[nn]=u,l){case"dialog":Je("cancel",i),Je("close",i);break;case"iframe":case"object":case"embed":Je("load",i);break;case"video":case"audio":for(l=0;l<ju.length;l++)Je(ju[l],i);break;case"source":Je("error",i);break;case"img":case"image":case"link":Je("error",i),Je("load",i);break;case"details":Je("toggle",i);break;case"input":Je("invalid",i),$d(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Je("invalid",i);break;case"textarea":Je("invalid",i),Bi(i,u.value,u.defaultValue,u.children)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||u.suppressHydrationWarning===!0||Z1(i.textContent,l)?(u.popover!=null&&(Je("beforetoggle",i),Je("toggle",i)),u.onScroll!=null&&Je("scroll",i),u.onScrollEnd!=null&&Je("scrollend",i),u.onClick!=null&&(i.onclick=ar),i=!0):i=!1,i||Wi(r,!0)}function Mb(r){for(Sn=r.return;Sn;)switch(Sn.tag){case 5:case 31:case 13:Qs=!1;return;case 27:case 3:Qs=!0;return;default:Sn=Sn.return}}function El(r){if(r!==Sn)return!1;if(!it)return Mb(r),it=!0,!1;var i=r.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||Kp(r.type,r.memoizedProps)),l=!l),l&&jt&&Wi(r),Mb(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));jt=l2(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));jt=l2(r)}else i===27?(i=jt,ca(r.type)?(r=Jp,Jp=null,jt=r):jt=i):jt=Sn?Ys(r.stateNode.nextSibling):null;return!0}function mo(){jt=Sn=null,it=!1}function Ig(){var r=Qi;return r!==null&&(ls===null?ls=r:ls.push.apply(ls,r),Qi=null),r}function uu(r){Qi===null?Qi=[r]:Qi.push(r)}var Rg=V(null),go=null,ai=null;function Yi(r,i,l){K(Rg,i._currentValue),i._currentValue=l}function oi(r){r._currentValue=Rg.current,Z(Rg)}function jg(r,i,l){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===l)break;r=r.return}}function Og(r,i,l,u){var m=r.child;for(m!==null&&(m.return=r);m!==null;){var y=m.dependencies;if(y!==null){var _=m.child;y=y.firstContext;e:for(;y!==null;){var S=y;y=m;for(var U=0;U<i.length;U++)if(S.context===i[U]){y.lanes|=l,S=y.alternate,S!==null&&(S.lanes|=l),jg(y.return,l,r),u||(_=null);break e}y=S.next}}else if(m.tag===18){if(_=m.return,_===null)throw Error(s(341));_.lanes|=l,y=_.alternate,y!==null&&(y.lanes|=l),jg(_,l,r),_=null}else _=m.child;if(_!==null)_.return=m;else for(_=m;_!==null;){if(_===r){_=null;break}if(m=_.sibling,m!==null){m.return=_.return,_=m;break}_=_.return}m=_}}function Tl(r,i,l,u){r=null;for(var m=i,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var _=m.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var S=m.type;ys(m.pendingProps.value,_.value)||(r!==null?r.push(S):r=[S])}}else if(m===Ae.current){if(_=m.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(r!==null?r.push(Mu):r=[Mu])}m=m.return}r!==null&&Og(i,r,l,u),i.flags|=262144}function hh(r){for(r=r.firstContext;r!==null;){if(!ys(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function po(r){go=r,ai=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function An(r){return Vb(go,r)}function fh(r,i){return go===null&&po(r),Vb(r,i)}function Vb(r,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},ai===null){if(r===null)throw Error(s(308));ai=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else ai=ai.next=i;return l}var jA=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(l,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(l){return l()})}},OA=n.unstable_scheduleCallback,DA=n.unstable_NormalPriority,sn={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dg(){return{controller:new jA,data:new Map,refCount:0}}function du(r){r.refCount--,r.refCount===0&&OA(DA,function(){r.controller.abort()})}var hu=null,Pg=0,Sl=0,Al=null;function PA(r,i){if(hu===null){var l=hu=[];Pg=0,Sl=Vp(),Al={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Pg++,i.then(Ub,Ub),i}function Ub(){if(--Pg===0&&hu!==null){Al!==null&&(Al.status="fulfilled");var r=hu;hu=null,Sl=0,Al=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function LA(r,i){var l=[],u={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var m=0;m<l.length;m++)(0,l[m])(i)},function(m){for(u.status="rejected",u.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),u}var Bb=P.S;P.S=function(r,i){E1=En(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&PA(r,i),Bb!==null&&Bb(r,i)};var yo=V(null);function Lg(){var r=yo.current;return r!==null?r:Ct.pooledCache}function mh(r,i){i===null?K(yo,yo.current):K(yo,i.pool)}function zb(){var r=Lg();return r===null?null:{parent:sn._currentValue,pool:r}}var Nl=Error(s(460)),Mg=Error(s(474)),gh=Error(s(542)),ph={then:function(){}};function Hb(r){return r=r.status,r==="fulfilled"||r==="rejected"}function qb(r,i,l){switch(l=r[l],l===void 0?r.push(i):l!==i&&(i.then(ar,ar),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Fb(r),r;default:if(typeof i.status=="string")i.then(ar,ar);else{if(r=Ct,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var m=i;m.status="fulfilled",m.value=u}},function(u){if(i.status==="pending"){var m=i;m.status="rejected",m.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Fb(r),r}throw bo=i,Nl}}function vo(r){try{var i=r._init;return i(r._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(bo=l,Nl):l}}var bo=null;function $b(){if(bo===null)throw Error(s(459));var r=bo;return bo=null,r}function Fb(r){if(r===Nl||r===gh)throw Error(s(483))}var Cl=null,fu=0;function yh(r){var i=fu;return fu+=1,Cl===null&&(Cl=[]),qb(Cl,r,i)}function mu(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function vh(r,i){throw i.$$typeof===E?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function Gb(r){function i($,H){if(r){var W=$.deletions;W===null?($.deletions=[H],$.flags|=16):W.push(H)}}function l($,H){if(!r)return null;for(;H!==null;)i($,H),H=H.sibling;return null}function u($){for(var H=new Map;$!==null;)$.key!==null?H.set($.key,$):H.set($.index,$),$=$.sibling;return H}function m($,H){return $=ri($,H),$.index=0,$.sibling=null,$}function y($,H,W){return $.index=W,r?(W=$.alternate,W!==null?(W=W.index,W<H?($.flags|=67108866,H):W):($.flags|=67108866,H)):($.flags|=1048576,H)}function _($){return r&&$.alternate===null&&($.flags|=67108866),$}function S($,H,W,oe){return H===null||H.tag!==6?(H=Sg(W,$.mode,oe),H.return=$,H):(H=m(H,W),H.return=$,H)}function U($,H,W,oe){var Oe=W.type;return Oe===L?ae($,H,W.props.children,oe,W.key):H!==null&&(H.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===C&&vo(Oe)===H.type)?(H=m(H,W.props),mu(H,W),H.return=$,H):(H=uh(W.type,W.key,W.props,null,$.mode,oe),mu(H,W),H.return=$,H)}function Y($,H,W,oe){return H===null||H.tag!==4||H.stateNode.containerInfo!==W.containerInfo||H.stateNode.implementation!==W.implementation?(H=Ag(W,$.mode,oe),H.return=$,H):(H=m(H,W.children||[]),H.return=$,H)}function ae($,H,W,oe,Oe){return H===null||H.tag!==7?(H=fo(W,$.mode,oe,Oe),H.return=$,H):(H=m(H,W),H.return=$,H)}function ue($,H,W){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Sg(""+H,$.mode,W),H.return=$,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case T:return W=uh(H.type,H.key,H.props,null,$.mode,W),mu(W,H),W.return=$,W;case k:return H=Ag(H,$.mode,W),H.return=$,H;case C:return H=vo(H),ue($,H,W)}if(re(H)||z(H))return H=fo(H,$.mode,W,null),H.return=$,H;if(typeof H.then=="function")return ue($,yh(H),W);if(H.$$typeof===G)return ue($,fh($,H),W);vh($,H)}return null}function X($,H,W,oe){var Oe=H!==null?H.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Oe!==null?null:S($,H,""+W,oe);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case T:return W.key===Oe?U($,H,W,oe):null;case k:return W.key===Oe?Y($,H,W,oe):null;case C:return W=vo(W),X($,H,W,oe)}if(re(W)||z(W))return Oe!==null?null:ae($,H,W,oe,null);if(typeof W.then=="function")return X($,H,yh(W),oe);if(W.$$typeof===G)return X($,H,fh($,W),oe);vh($,W)}return null}function ee($,H,W,oe,Oe){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return $=$.get(W)||null,S(H,$,""+oe,Oe);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case T:return $=$.get(oe.key===null?W:oe.key)||null,U(H,$,oe,Oe);case k:return $=$.get(oe.key===null?W:oe.key)||null,Y(H,$,oe,Oe);case C:return oe=vo(oe),ee($,H,W,oe,Oe)}if(re(oe)||z(oe))return $=$.get(W)||null,ae(H,$,oe,Oe,null);if(typeof oe.then=="function")return ee($,H,W,yh(oe),Oe);if(oe.$$typeof===G)return ee($,H,W,fh(H,oe),Oe);vh(H,oe)}return null}function Ee($,H,W,oe){for(var Oe=null,lt=null,Se=H,Qe=H=0,et=null;Se!==null&&Qe<W.length;Qe++){Se.index>Qe?(et=Se,Se=null):et=Se.sibling;var ct=X($,Se,W[Qe],oe);if(ct===null){Se===null&&(Se=et);break}r&&Se&&ct.alternate===null&&i($,Se),H=y(ct,H,Qe),lt===null?Oe=ct:lt.sibling=ct,lt=ct,Se=et}if(Qe===W.length)return l($,Se),it&&ii($,Qe),Oe;if(Se===null){for(;Qe<W.length;Qe++)Se=ue($,W[Qe],oe),Se!==null&&(H=y(Se,H,Qe),lt===null?Oe=Se:lt.sibling=Se,lt=Se);return it&&ii($,Qe),Oe}for(Se=u(Se);Qe<W.length;Qe++)et=ee(Se,$,Qe,W[Qe],oe),et!==null&&(r&&et.alternate!==null&&Se.delete(et.key===null?Qe:et.key),H=y(et,H,Qe),lt===null?Oe=et:lt.sibling=et,lt=et);return r&&Se.forEach(function(ma){return i($,ma)}),it&&ii($,Qe),Oe}function Pe($,H,W,oe){if(W==null)throw Error(s(151));for(var Oe=null,lt=null,Se=H,Qe=H=0,et=null,ct=W.next();Se!==null&&!ct.done;Qe++,ct=W.next()){Se.index>Qe?(et=Se,Se=null):et=Se.sibling;var ma=X($,Se,ct.value,oe);if(ma===null){Se===null&&(Se=et);break}r&&Se&&ma.alternate===null&&i($,Se),H=y(ma,H,Qe),lt===null?Oe=ma:lt.sibling=ma,lt=ma,Se=et}if(ct.done)return l($,Se),it&&ii($,Qe),Oe;if(Se===null){for(;!ct.done;Qe++,ct=W.next())ct=ue($,ct.value,oe),ct!==null&&(H=y(ct,H,Qe),lt===null?Oe=ct:lt.sibling=ct,lt=ct);return it&&ii($,Qe),Oe}for(Se=u(Se);!ct.done;Qe++,ct=W.next())ct=ee(Se,$,Qe,ct.value,oe),ct!==null&&(r&&ct.alternate!==null&&Se.delete(ct.key===null?Qe:ct.key),H=y(ct,H,Qe),lt===null?Oe=ct:lt.sibling=ct,lt=ct);return r&&Se.forEach(function(KN){return i($,KN)}),it&&ii($,Qe),Oe}function St($,H,W,oe){if(typeof W=="object"&&W!==null&&W.type===L&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case T:e:{for(var Oe=W.key;H!==null;){if(H.key===Oe){if(Oe=W.type,Oe===L){if(H.tag===7){l($,H.sibling),oe=m(H,W.props.children),oe.return=$,$=oe;break e}}else if(H.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===C&&vo(Oe)===H.type){l($,H.sibling),oe=m(H,W.props),mu(oe,W),oe.return=$,$=oe;break e}l($,H);break}else i($,H);H=H.sibling}W.type===L?(oe=fo(W.props.children,$.mode,oe,W.key),oe.return=$,$=oe):(oe=uh(W.type,W.key,W.props,null,$.mode,oe),mu(oe,W),oe.return=$,$=oe)}return _($);case k:e:{for(Oe=W.key;H!==null;){if(H.key===Oe)if(H.tag===4&&H.stateNode.containerInfo===W.containerInfo&&H.stateNode.implementation===W.implementation){l($,H.sibling),oe=m(H,W.children||[]),oe.return=$,$=oe;break e}else{l($,H);break}else i($,H);H=H.sibling}oe=Ag(W,$.mode,oe),oe.return=$,$=oe}return _($);case C:return W=vo(W),St($,H,W,oe)}if(re(W))return Ee($,H,W,oe);if(z(W)){if(Oe=z(W),typeof Oe!="function")throw Error(s(150));return W=Oe.call(W),Pe($,H,W,oe)}if(typeof W.then=="function")return St($,H,yh(W),oe);if(W.$$typeof===G)return St($,H,fh($,W),oe);vh($,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,H!==null&&H.tag===6?(l($,H.sibling),oe=m(H,W),oe.return=$,$=oe):(l($,H),oe=Sg(W,$.mode,oe),oe.return=$,$=oe),_($)):l($,H)}return function($,H,W,oe){try{fu=0;var Oe=St($,H,W,oe);return Cl=null,Oe}catch(Se){if(Se===Nl||Se===gh)throw Se;var lt=vs(29,Se,null,$.mode);return lt.lanes=oe,lt.return=$,lt}finally{}}}var wo=Gb(!0),Kb=Gb(!1),Xi=!1;function Vg(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ug(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ji(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Zi(r,i,l){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(ft&2)!==0){var m=u.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),u.pending=i,i=ch(r),Ib(r,null,l),i}return lh(r,u,i,l),ch(r)}function gu(r,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,l|=u,i.lanes=l,Ls(r,l)}}function Bg(r,i){var l=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var m=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var _={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?m=y=_:y=y.next=_,l=l.next}while(l!==null);y===null?m=y=i:y=y.next=i}else m=y=i;l={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=i:r.next=i,l.lastBaseUpdate=i}var zg=!1;function pu(){if(zg){var r=Al;if(r!==null)throw r}}function yu(r,i,l,u){zg=!1;var m=r.updateQueue;Xi=!1;var y=m.firstBaseUpdate,_=m.lastBaseUpdate,S=m.shared.pending;if(S!==null){m.shared.pending=null;var U=S,Y=U.next;U.next=null,_===null?y=Y:_.next=Y,_=U;var ae=r.alternate;ae!==null&&(ae=ae.updateQueue,S=ae.lastBaseUpdate,S!==_&&(S===null?ae.firstBaseUpdate=Y:S.next=Y,ae.lastBaseUpdate=U))}if(y!==null){var ue=m.baseState;_=0,ae=Y=U=null,S=y;do{var X=S.lane&-536870913,ee=X!==S.lane;if(ee?(Ze&X)===X:(u&X)===X){X!==0&&X===Sl&&(zg=!0),ae!==null&&(ae=ae.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Ee=r,Pe=S;X=i;var St=l;switch(Pe.tag){case 1:if(Ee=Pe.payload,typeof Ee=="function"){ue=Ee.call(St,ue,X);break e}ue=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Pe.payload,X=typeof Ee=="function"?Ee.call(St,ue,X):Ee,X==null)break e;ue=w({},ue,X);break e;case 2:Xi=!0}}X=S.callback,X!==null&&(r.flags|=64,ee&&(r.flags|=8192),ee=m.callbacks,ee===null?m.callbacks=[X]:ee.push(X))}else ee={lane:X,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ae===null?(Y=ae=ee,U=ue):ae=ae.next=ee,_|=X;if(S=S.next,S===null){if(S=m.shared.pending,S===null)break;ee=S,S=ee.next,ee.next=null,m.lastBaseUpdate=ee,m.shared.pending=null}}while(!0);ae===null&&(U=ue),m.baseState=U,m.firstBaseUpdate=Y,m.lastBaseUpdate=ae,y===null&&(m.shared.lanes=0),ra|=_,r.lanes=_,r.memoizedState=ue}}function Qb(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function Wb(r,i){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)Qb(l[r],i)}var kl=V(null),bh=V(0);function Yb(r,i){r=pi,K(bh,r),K(kl,i),pi=r|i.baseLanes}function Hg(){K(bh,pi),K(kl,kl.current)}function qg(){pi=bh.current,Z(kl),Z(bh)}var bs=V(null),Ws=null;function ea(r){var i=r.alternate;K(Yt,Yt.current&1),K(bs,r),Ws===null&&(i===null||kl.current!==null||i.memoizedState!==null)&&(Ws=r)}function $g(r){K(Yt,Yt.current),K(bs,r),Ws===null&&(Ws=r)}function Xb(r){r.tag===22?(K(Yt,Yt.current),K(bs,r),Ws===null&&(Ws=r)):ta()}function ta(){K(Yt,Yt.current),K(bs,bs.current)}function ws(r){Z(bs),Ws===r&&(Ws=null),Z(Yt)}var Yt=V(0);function wh(r){for(var i=r;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Yp(l)||Xp(l)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var li=0,Ke=null,Et=null,rn=null,_h=!1,Il=!1,_o=!1,xh=0,vu=0,Rl=null,MA=0;function Gt(){throw Error(s(321))}function Fg(r,i){if(i===null)return!1;for(var l=0;l<i.length&&l<r.length;l++)if(!ys(r[l],i[l]))return!1;return!0}function Gg(r,i,l,u,m,y){return li=y,Ke=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,P.H=r===null||r.memoizedState===null?Dw:op,_o=!1,y=l(u,m),_o=!1,Il&&(y=Zb(i,l,u,m)),Jb(r),y}function Jb(r){P.H=_u;var i=Et!==null&&Et.next!==null;if(li=0,rn=Et=Ke=null,_h=!1,vu=0,Rl=null,i)throw Error(s(300));r===null||an||(r=r.dependencies,r!==null&&hh(r)&&(an=!0))}function Zb(r,i,l,u){Ke=r;var m=0;do{if(Il&&(Rl=null),vu=0,Il=!1,25<=m)throw Error(s(301));if(m+=1,rn=Et=null,r.updateQueue!=null){var y=r.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}P.H=Pw,y=i(l,u)}while(Il);return y}function VA(){var r=P.H,i=r.useState()[0];return i=typeof i.then=="function"?bu(i):i,r=r.useState()[0],(Et!==null?Et.memoizedState:null)!==r&&(Ke.flags|=1024),i}function Kg(){var r=xh!==0;return xh=0,r}function Qg(r,i,l){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~l}function Wg(r){if(_h){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}_h=!1}li=0,rn=Et=Ke=null,Il=!1,vu=xh=0,Rl=null}function Yn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?Ke.memoizedState=rn=r:rn=rn.next=r,rn}function Xt(){if(Et===null){var r=Ke.alternate;r=r!==null?r.memoizedState:null}else r=Et.next;var i=rn===null?Ke.memoizedState:rn.next;if(i!==null)rn=i,Et=r;else{if(r===null)throw Ke.alternate===null?Error(s(467)):Error(s(310));Et=r,r={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},rn===null?Ke.memoizedState=rn=r:rn=rn.next=r}return rn}function Eh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bu(r){var i=vu;return vu+=1,Rl===null&&(Rl=[]),r=qb(Rl,r,i),i=Ke,(rn===null?i.memoizedState:rn.next)===null&&(i=i.alternate,P.H=i===null||i.memoizedState===null?Dw:op),r}function Th(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return bu(r);if(r.$$typeof===G)return An(r)}throw Error(s(438,String(r)))}function Yg(r){var i=null,l=Ke.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var u=Ke.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(m){return m.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=Eh(),Ke.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(r),u=0;u<r;u++)l[u]=B;return i.index++,l}function ci(r,i){return typeof i=="function"?i(r):i}function Sh(r){var i=Xt();return Xg(i,Et,r)}function Xg(r,i,l){var u=r.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=l;var m=r.baseQueue,y=u.pending;if(y!==null){if(m!==null){var _=m.next;m.next=y.next,y.next=_}i.baseQueue=m=y,u.pending=null}if(y=r.baseState,m===null)r.memoizedState=y;else{i=m.next;var S=_=null,U=null,Y=i,ae=!1;do{var ue=Y.lane&-536870913;if(ue!==Y.lane?(Ze&ue)===ue:(li&ue)===ue){var X=Y.revertLane;if(X===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ue===Sl&&(ae=!0);else if((li&X)===X){Y=Y.next,X===Sl&&(ae=!0);continue}else ue={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},U===null?(S=U=ue,_=y):U=U.next=ue,Ke.lanes|=X,ra|=X;ue=Y.action,_o&&l(y,ue),y=Y.hasEagerState?Y.eagerState:l(y,ue)}else X={lane:ue,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},U===null?(S=U=X,_=y):U=U.next=X,Ke.lanes|=ue,ra|=ue;Y=Y.next}while(Y!==null&&Y!==i);if(U===null?_=y:U.next=S,!ys(y,r.memoizedState)&&(an=!0,ae&&(l=Al,l!==null)))throw l;r.memoizedState=y,r.baseState=_,r.baseQueue=U,u.lastRenderedState=y}return m===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Jg(r){var i=Xt(),l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=r;var u=l.dispatch,m=l.pending,y=i.memoizedState;if(m!==null){l.pending=null;var _=m=m.next;do y=r(y,_.action),_=_.next;while(_!==m);ys(y,i.memoizedState)||(an=!0),i.memoizedState=y,i.baseQueue===null&&(i.baseState=y),l.lastRenderedState=y}return[y,u]}function ew(r,i,l){var u=Ke,m=Xt(),y=it;if(y){if(l===void 0)throw Error(s(407));l=l()}else l=i();var _=!ys((Et||m).memoizedState,l);if(_&&(m.memoizedState=l,an=!0),m=m.queue,tp(sw.bind(null,u,m,r),[r]),m.getSnapshot!==i||_||rn!==null&&rn.memoizedState.tag&1){if(u.flags|=2048,jl(9,{destroy:void 0},nw.bind(null,u,m,l,i),null),Ct===null)throw Error(s(349));y||(li&127)!==0||tw(u,i,l)}return l}function tw(r,i,l){r.flags|=16384,r={getSnapshot:i,value:l},i=Ke.updateQueue,i===null?(i=Eh(),Ke.updateQueue=i,i.stores=[r]):(l=i.stores,l===null?i.stores=[r]:l.push(r))}function nw(r,i,l,u){i.value=l,i.getSnapshot=u,rw(i)&&iw(r)}function sw(r,i,l){return l(function(){rw(i)&&iw(r)})}function rw(r){var i=r.getSnapshot;r=r.value;try{var l=i();return!ys(r,l)}catch{return!0}}function iw(r){var i=ho(r,2);i!==null&&cs(i,r,2)}function Zg(r){var i=Yn();if(typeof r=="function"){var l=r;if(r=l(),_o){es(!0);try{l()}finally{es(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:r},i}function aw(r,i,l,u){return r.baseState=l,Xg(r,Et,typeof u=="function"?u:ci)}function UA(r,i,l,u,m){if(Ch(r))throw Error(s(485));if(r=i.action,r!==null){var y={payload:m,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){y.listeners.push(_)}};P.T!==null?l(!0):y.isTransition=!1,u(y),l=i.pending,l===null?(y.next=i.pending=y,ow(i,y)):(y.next=l.next,i.pending=l.next=y)}}function ow(r,i){var l=i.action,u=i.payload,m=r.state;if(i.isTransition){var y=P.T,_={};P.T=_;try{var S=l(m,u),U=P.S;U!==null&&U(_,S),lw(r,i,S)}catch(Y){ep(r,i,Y)}finally{y!==null&&_.types!==null&&(y.types=_.types),P.T=y}}else try{y=l(m,u),lw(r,i,y)}catch(Y){ep(r,i,Y)}}function lw(r,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){cw(r,i,u)},function(u){return ep(r,i,u)}):cw(r,i,l)}function cw(r,i,l){i.status="fulfilled",i.value=l,uw(i),r.state=l,i=r.pending,i!==null&&(l=i.next,l===i?r.pending=null:(l=l.next,i.next=l,ow(r,l)))}function ep(r,i,l){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=l,uw(i),i=i.next;while(i!==u)}r.action=null}function uw(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function dw(r,i){return i}function hw(r,i){if(it){var l=Ct.formState;if(l!==null){e:{var u=Ke;if(it){if(jt){t:{for(var m=jt,y=Qs;m.nodeType!==8;){if(!y){m=null;break t}if(m=Ys(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){jt=Ys(m.nextSibling),u=m.data==="F!";break e}}Wi(u)}u=!1}u&&(i=l[0])}}return l=Yn(),l.memoizedState=l.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dw,lastRenderedState:i},l.queue=u,l=Rw.bind(null,Ke,u),u.dispatch=l,u=Zg(!1),y=ap.bind(null,Ke,!1,u.queue),u=Yn(),m={state:i,dispatch:null,action:r,pending:null},u.queue=m,l=UA.bind(null,Ke,m,y,l),m.dispatch=l,u.memoizedState=r,[i,l,!1]}function fw(r){var i=Xt();return mw(i,Et,r)}function mw(r,i,l){if(i=Xg(r,i,dw)[0],r=Sh(ci)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=bu(i)}catch(_){throw _===Nl?gh:_}else u=i;i=Xt();var m=i.queue,y=m.dispatch;return l!==i.memoizedState&&(Ke.flags|=2048,jl(9,{destroy:void 0},BA.bind(null,m,l),null)),[u,y,r]}function BA(r,i){r.action=i}function gw(r){var i=Xt(),l=Et;if(l!==null)return mw(i,l,r);Xt(),i=i.memoizedState,l=Xt();var u=l.queue.dispatch;return l.memoizedState=r,[i,u,!1]}function jl(r,i,l,u){return r={tag:r,create:l,deps:u,inst:i,next:null},i=Ke.updateQueue,i===null&&(i=Eh(),Ke.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=r.next=r:(u=l.next,l.next=r,r.next=u,i.lastEffect=r),r}function pw(){return Xt().memoizedState}function Ah(r,i,l,u){var m=Yn();Ke.flags|=r,m.memoizedState=jl(1|i,{destroy:void 0},l,u===void 0?null:u)}function Nh(r,i,l,u){var m=Xt();u=u===void 0?null:u;var y=m.memoizedState.inst;Et!==null&&u!==null&&Fg(u,Et.memoizedState.deps)?m.memoizedState=jl(i,y,l,u):(Ke.flags|=r,m.memoizedState=jl(1|i,y,l,u))}function yw(r,i){Ah(8390656,8,r,i)}function tp(r,i){Nh(2048,8,r,i)}function zA(r){Ke.flags|=4;var i=Ke.updateQueue;if(i===null)i=Eh(),Ke.updateQueue=i,i.events=[r];else{var l=i.events;l===null?i.events=[r]:l.push(r)}}function vw(r){var i=Xt().memoizedState;return zA({ref:i,nextImpl:r}),function(){if((ft&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function bw(r,i){return Nh(4,2,r,i)}function ww(r,i){return Nh(4,4,r,i)}function _w(r,i){if(typeof i=="function"){r=r();var l=i(r);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function xw(r,i,l){l=l!=null?l.concat([r]):null,Nh(4,4,_w.bind(null,i,r),l)}function np(){}function Ew(r,i){var l=Xt();i=i===void 0?null:i;var u=l.memoizedState;return i!==null&&Fg(i,u[1])?u[0]:(l.memoizedState=[r,i],r)}function Tw(r,i){var l=Xt();i=i===void 0?null:i;var u=l.memoizedState;if(i!==null&&Fg(i,u[1]))return u[0];if(u=r(),_o){es(!0);try{r()}finally{es(!1)}}return l.memoizedState=[u,i],u}function sp(r,i,l){return l===void 0||(li&1073741824)!==0&&(Ze&261930)===0?r.memoizedState=i:(r.memoizedState=l,r=S1(),Ke.lanes|=r,ra|=r,l)}function Sw(r,i,l,u){return ys(l,i)?l:kl.current!==null?(r=sp(r,l,u),ys(r,i)||(an=!0),r):(li&42)===0||(li&1073741824)!==0&&(Ze&261930)===0?(an=!0,r.memoizedState=l):(r=S1(),Ke.lanes|=r,ra|=r,i)}function Aw(r,i,l,u,m){var y=ie.p;ie.p=y!==0&&8>y?y:8;var _=P.T,S={};P.T=S,ap(r,!1,i,l);try{var U=m(),Y=P.S;if(Y!==null&&Y(S,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ae=LA(U,u);wu(r,i,ae,Es(r))}else wu(r,i,u,Es(r))}catch(ue){wu(r,i,{then:function(){},status:"rejected",reason:ue},Es())}finally{ie.p=y,_!==null&&S.types!==null&&(_.types=S.types),P.T=_}}function HA(){}function rp(r,i,l,u){if(r.tag!==5)throw Error(s(476));var m=Nw(r).queue;Aw(r,m,i,ve,l===null?HA:function(){return Cw(r),l(u)})}function Nw(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:ve},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:l},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function Cw(r){var i=Nw(r);i.next===null&&(i=r.alternate.memoizedState),wu(r,i.next.queue,{},Es())}function ip(){return An(Mu)}function kw(){return Xt().memoizedState}function Iw(){return Xt().memoizedState}function qA(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var l=Es();r=Ji(l);var u=Zi(i,r,l);u!==null&&(cs(u,i,l),gu(u,i,l)),i={cache:Dg()},r.payload=i;return}i=i.return}}function $A(r,i,l){var u=Es();l={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ch(r)?jw(i,l):(l=Eg(r,i,l,u),l!==null&&(cs(l,r,u),Ow(l,i,u)))}function Rw(r,i,l){var u=Es();wu(r,i,l,u)}function wu(r,i,l,u){var m={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ch(r))jw(i,m);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=i.lastRenderedReducer,y!==null))try{var _=i.lastRenderedState,S=y(_,l);if(m.hasEagerState=!0,m.eagerState=S,ys(S,_))return lh(r,i,m,0),Ct===null&&oh(),!1}catch{}finally{}if(l=Eg(r,i,m,u),l!==null)return cs(l,r,u),Ow(l,i,u),!0}return!1}function ap(r,i,l,u){if(u={lane:2,revertLane:Vp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ch(r)){if(i)throw Error(s(479))}else i=Eg(r,l,u,2),i!==null&&cs(i,r,2)}function Ch(r){var i=r.alternate;return r===Ke||i!==null&&i===Ke}function jw(r,i){Il=_h=!0;var l=r.pending;l===null?i.next=i:(i.next=l.next,l.next=i),r.pending=i}function Ow(r,i,l){if((l&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,l|=u,i.lanes=l,Ls(r,l)}}var _u={readContext:An,use:Th,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useLayoutEffect:Gt,useInsertionEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useSyncExternalStore:Gt,useId:Gt,useHostTransitionStatus:Gt,useFormState:Gt,useActionState:Gt,useOptimistic:Gt,useMemoCache:Gt,useCacheRefresh:Gt};_u.useEffectEvent=Gt;var Dw={readContext:An,use:Th,useCallback:function(r,i){return Yn().memoizedState=[r,i===void 0?null:i],r},useContext:An,useEffect:yw,useImperativeHandle:function(r,i,l){l=l!=null?l.concat([r]):null,Ah(4194308,4,_w.bind(null,i,r),l)},useLayoutEffect:function(r,i){return Ah(4194308,4,r,i)},useInsertionEffect:function(r,i){Ah(4,2,r,i)},useMemo:function(r,i){var l=Yn();i=i===void 0?null:i;var u=r();if(_o){es(!0);try{r()}finally{es(!1)}}return l.memoizedState=[u,i],u},useReducer:function(r,i,l){var u=Yn();if(l!==void 0){var m=l(i);if(_o){es(!0);try{l(i)}finally{es(!1)}}}else m=i;return u.memoizedState=u.baseState=m,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:m},u.queue=r,r=r.dispatch=$A.bind(null,Ke,r),[u.memoizedState,r]},useRef:function(r){var i=Yn();return r={current:r},i.memoizedState=r},useState:function(r){r=Zg(r);var i=r.queue,l=Rw.bind(null,Ke,i);return i.dispatch=l,[r.memoizedState,l]},useDebugValue:np,useDeferredValue:function(r,i){var l=Yn();return sp(l,r,i)},useTransition:function(){var r=Zg(!1);return r=Aw.bind(null,Ke,r.queue,!0,!1),Yn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,l){var u=Ke,m=Yn();if(it){if(l===void 0)throw Error(s(407));l=l()}else{if(l=i(),Ct===null)throw Error(s(349));(Ze&127)!==0||tw(u,i,l)}m.memoizedState=l;var y={value:l,getSnapshot:i};return m.queue=y,yw(sw.bind(null,u,y,r),[r]),u.flags|=2048,jl(9,{destroy:void 0},nw.bind(null,u,y,l,i),null),l},useId:function(){var r=Yn(),i=Ct.identifierPrefix;if(it){var l=Vr,u=Mr;l=(u&~(1<<32-Dt(u)-1)).toString(32)+l,i="_"+i+"R_"+l,l=xh++,0<l&&(i+="H"+l.toString(32)),i+="_"}else l=MA++,i="_"+i+"r_"+l.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:ip,useFormState:hw,useActionState:hw,useOptimistic:function(r){var i=Yn();i.memoizedState=i.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=ap.bind(null,Ke,!0,l),l.dispatch=i,[r,i]},useMemoCache:Yg,useCacheRefresh:function(){return Yn().memoizedState=qA.bind(null,Ke)},useEffectEvent:function(r){var i=Yn(),l={impl:r};return i.memoizedState=l,function(){if((ft&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},op={readContext:An,use:Th,useCallback:Ew,useContext:An,useEffect:tp,useImperativeHandle:xw,useInsertionEffect:bw,useLayoutEffect:ww,useMemo:Tw,useReducer:Sh,useRef:pw,useState:function(){return Sh(ci)},useDebugValue:np,useDeferredValue:function(r,i){var l=Xt();return Sw(l,Et.memoizedState,r,i)},useTransition:function(){var r=Sh(ci)[0],i=Xt().memoizedState;return[typeof r=="boolean"?r:bu(r),i]},useSyncExternalStore:ew,useId:kw,useHostTransitionStatus:ip,useFormState:fw,useActionState:fw,useOptimistic:function(r,i){var l=Xt();return aw(l,Et,r,i)},useMemoCache:Yg,useCacheRefresh:Iw};op.useEffectEvent=vw;var Pw={readContext:An,use:Th,useCallback:Ew,useContext:An,useEffect:tp,useImperativeHandle:xw,useInsertionEffect:bw,useLayoutEffect:ww,useMemo:Tw,useReducer:Jg,useRef:pw,useState:function(){return Jg(ci)},useDebugValue:np,useDeferredValue:function(r,i){var l=Xt();return Et===null?sp(l,r,i):Sw(l,Et.memoizedState,r,i)},useTransition:function(){var r=Jg(ci)[0],i=Xt().memoizedState;return[typeof r=="boolean"?r:bu(r),i]},useSyncExternalStore:ew,useId:kw,useHostTransitionStatus:ip,useFormState:gw,useActionState:gw,useOptimistic:function(r,i){var l=Xt();return Et!==null?aw(l,Et,r,i):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:Yg,useCacheRefresh:Iw};Pw.useEffectEvent=vw;function lp(r,i,l,u){i=r.memoizedState,l=l(u,i),l=l==null?i:w({},i,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var cp={enqueueSetState:function(r,i,l){r=r._reactInternals;var u=Es(),m=Ji(u);m.payload=i,l!=null&&(m.callback=l),i=Zi(r,m,u),i!==null&&(cs(i,r,u),gu(i,r,u))},enqueueReplaceState:function(r,i,l){r=r._reactInternals;var u=Es(),m=Ji(u);m.tag=1,m.payload=i,l!=null&&(m.callback=l),i=Zi(r,m,u),i!==null&&(cs(i,r,u),gu(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var l=Es(),u=Ji(l);u.tag=2,i!=null&&(u.callback=i),i=Zi(r,u,l),i!==null&&(cs(i,r,l),gu(i,r,l))}};function Lw(r,i,l,u,m,y,_){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,y,_):i.prototype&&i.prototype.isPureReactComponent?!ou(l,u)||!ou(m,y):!0}function Mw(r,i,l,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,u),i.state!==r&&cp.enqueueReplaceState(i,i.state,null)}function xo(r,i){var l=i;if("ref"in i){l={};for(var u in i)u!=="ref"&&(l[u]=i[u])}if(r=r.defaultProps){l===i&&(l=w({},l));for(var m in r)l[m]===void 0&&(l[m]=r[m])}return l}function Vw(r){ah(r)}function Uw(r){console.error(r)}function Bw(r){ah(r)}function kh(r,i){try{var l=r.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function zw(r,i,l){try{var u=r.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function up(r,i,l){return l=Ji(l),l.tag=3,l.payload={element:null},l.callback=function(){kh(r,i)},l}function Hw(r){return r=Ji(r),r.tag=3,r}function qw(r,i,l,u){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var y=u.value;r.payload=function(){return m(y)},r.callback=function(){zw(i,l,u)}}var _=l.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(r.callback=function(){zw(i,l,u),typeof m!="function"&&(ia===null?ia=new Set([this]):ia.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function FA(r,i,l,u,m){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=l.alternate,i!==null&&Tl(i,l,m,!0),l=bs.current,l!==null){switch(l.tag){case 31:case 13:return Ws===null?zh():l.alternate===null&&Kt===0&&(Kt=3),l.flags&=-257,l.flags|=65536,l.lanes=m,u===ph?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([u]):i.add(u),Pp(r,u,m)),!1;case 22:return l.flags|=65536,u===ph?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([u]):l.add(u)),Pp(r,u,m)),!1}throw Error(s(435,l.tag))}return Pp(r,u,m),zh(),!1}if(it)return i=bs.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=m,u!==kg&&(r=Error(s(422),{cause:u}),uu(Fs(r,l)))):(u!==kg&&(i=Error(s(423),{cause:u}),uu(Fs(i,l))),r=r.current.alternate,r.flags|=65536,m&=-m,r.lanes|=m,u=Fs(u,l),m=up(r.stateNode,u,m),Bg(r,m),Kt!==4&&(Kt=2)),!1;var y=Error(s(520),{cause:u});if(y=Fs(y,l),ku===null?ku=[y]:ku.push(y),Kt!==4&&(Kt=2),i===null)return!0;u=Fs(u,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,r=m&-m,l.lanes|=r,r=up(l.stateNode,u,r),Bg(l,r),!1;case 1:if(i=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ia===null||!ia.has(y))))return l.flags|=65536,m&=-m,l.lanes|=m,m=Hw(m),qw(m,r,l,u),Bg(l,m),!1}l=l.return}while(l!==null);return!1}var dp=Error(s(461)),an=!1;function Nn(r,i,l,u){i.child=r===null?Kb(i,null,l,u):wo(i,r.child,l,u)}function $w(r,i,l,u,m){l=l.render;var y=i.ref;if("ref"in u){var _={};for(var S in u)S!=="ref"&&(_[S]=u[S])}else _=u;return po(i),u=Gg(r,i,l,_,y,m),S=Kg(),r!==null&&!an?(Qg(r,i,m),ui(r,i,m)):(it&&S&&Ng(i),i.flags|=1,Nn(r,i,u,m),i.child)}function Fw(r,i,l,u,m){if(r===null){var y=l.type;return typeof y=="function"&&!Tg(y)&&y.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=y,Gw(r,i,y,u,m)):(r=uh(l.type,null,u,i,i.mode,m),r.ref=i.ref,r.return=i,i.child=r)}if(y=r.child,!bp(r,m)){var _=y.memoizedProps;if(l=l.compare,l=l!==null?l:ou,l(_,u)&&r.ref===i.ref)return ui(r,i,m)}return i.flags|=1,r=ri(y,u),r.ref=i.ref,r.return=i,i.child=r}function Gw(r,i,l,u,m){if(r!==null){var y=r.memoizedProps;if(ou(y,u)&&r.ref===i.ref)if(an=!1,i.pendingProps=u=y,bp(r,m))(r.flags&131072)!==0&&(an=!0);else return i.lanes=r.lanes,ui(r,i,m)}return hp(r,i,l,u,m)}function Kw(r,i,l,u){var m=u.children,y=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(y=y!==null?y.baseLanes|l:l,r!==null){for(u=i.child=r.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~y}else u=0,i.child=null;return Qw(r,i,y,l,u)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&mh(i,y!==null?y.cachePool:null),y!==null?Yb(i,y):Hg(),Xb(i);else return u=i.lanes=536870912,Qw(r,i,y!==null?y.baseLanes|l:l,l,u)}else y!==null?(mh(i,y.cachePool),Yb(i,y),ta(),i.memoizedState=null):(r!==null&&mh(i,null),Hg(),ta());return Nn(r,i,m,l),i.child}function xu(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Qw(r,i,l,u,m){var y=Lg();return y=y===null?null:{parent:sn._currentValue,pool:y},i.memoizedState={baseLanes:l,cachePool:y},r!==null&&mh(i,null),Hg(),Xb(i),r!==null&&Tl(r,i,u,!0),i.childLanes=m,null}function Ih(r,i){return i=jh({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function Ww(r,i,l){return wo(i,r.child,null,l),r=Ih(i,i.pendingProps),r.flags|=2,ws(i),i.memoizedState=null,r}function GA(r,i,l){var u=i.pendingProps,m=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(it){if(u.mode==="hidden")return r=Ih(i,u),i.lanes=536870912,xu(null,r);if($g(i),(r=jt)?(r=o2(r,Qs),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Ki!==null?{id:Mr,overflow:Vr}:null,retryLane:536870912,hydrationErrors:null},l=jb(r),l.return=i,i.child=l,Sn=i,jt=null)):r=null,r===null)throw Wi(i);return i.lanes=536870912,null}return Ih(i,u)}var y=r.memoizedState;if(y!==null){var _=y.dehydrated;if($g(i),m)if(i.flags&256)i.flags&=-257,i=Ww(r,i,l);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(s(558));else if(an||Tl(r,i,l,!1),m=(l&r.childLanes)!==0,an||m){if(u=Ct,u!==null&&(_=Oi(u,l),_!==0&&_!==y.retryLane))throw y.retryLane=_,ho(r,_),cs(u,r,_),dp;zh(),i=Ww(r,i,l)}else r=y.treeContext,jt=Ys(_.nextSibling),Sn=i,it=!0,Qi=null,Qs=!1,r!==null&&Pb(i,r),i=Ih(i,u),i.flags|=4096;return i}return r=ri(r.child,{mode:u.mode,children:u.children}),r.ref=i.ref,i.child=r,r.return=i,r}function Rh(r,i){var l=i.ref;if(l===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(r===null||r.ref!==l)&&(i.flags|=4194816)}}function hp(r,i,l,u,m){return po(i),l=Gg(r,i,l,u,void 0,m),u=Kg(),r!==null&&!an?(Qg(r,i,m),ui(r,i,m)):(it&&u&&Ng(i),i.flags|=1,Nn(r,i,l,m),i.child)}function Yw(r,i,l,u,m,y){return po(i),i.updateQueue=null,l=Zb(i,u,l,m),Jb(r),u=Kg(),r!==null&&!an?(Qg(r,i,y),ui(r,i,y)):(it&&u&&Ng(i),i.flags|=1,Nn(r,i,l,y),i.child)}function Xw(r,i,l,u,m){if(po(i),i.stateNode===null){var y=wl,_=l.contextType;typeof _=="object"&&_!==null&&(y=An(_)),y=new l(u,y),i.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=cp,i.stateNode=y,y._reactInternals=i,y=i.stateNode,y.props=u,y.state=i.memoizedState,y.refs={},Vg(i),_=l.contextType,y.context=typeof _=="object"&&_!==null?An(_):wl,y.state=i.memoizedState,_=l.getDerivedStateFromProps,typeof _=="function"&&(lp(i,l,_,u),y.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(_=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),_!==y.state&&cp.enqueueReplaceState(y,y.state,null),yu(i,u,y,m),pu(),y.state=i.memoizedState),typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){y=i.stateNode;var S=i.memoizedProps,U=xo(l,S);y.props=U;var Y=y.context,ae=l.contextType;_=wl,typeof ae=="object"&&ae!==null&&(_=An(ae));var ue=l.getDerivedStateFromProps;ae=typeof ue=="function"||typeof y.getSnapshotBeforeUpdate=="function",S=i.pendingProps!==S,ae||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S||Y!==_)&&Mw(i,y,u,_),Xi=!1;var X=i.memoizedState;y.state=X,yu(i,u,y,m),pu(),Y=i.memoizedState,S||X!==Y||Xi?(typeof ue=="function"&&(lp(i,l,ue,u),Y=i.memoizedState),(U=Xi||Lw(i,l,U,u,X,Y,_))?(ae||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(i.flags|=4194308)):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=Y),y.props=u,y.state=Y,y.context=_,u=U):(typeof y.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{y=i.stateNode,Ug(r,i),_=i.memoizedProps,ae=xo(l,_),y.props=ae,ue=i.pendingProps,X=y.context,Y=l.contextType,U=wl,typeof Y=="object"&&Y!==null&&(U=An(Y)),S=l.getDerivedStateFromProps,(Y=typeof S=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(_!==ue||X!==U)&&Mw(i,y,u,U),Xi=!1,X=i.memoizedState,y.state=X,yu(i,u,y,m),pu();var ee=i.memoizedState;_!==ue||X!==ee||Xi||r!==null&&r.dependencies!==null&&hh(r.dependencies)?(typeof S=="function"&&(lp(i,l,S,u),ee=i.memoizedState),(ae=Xi||Lw(i,l,ae,u,X,ee,U)||r!==null&&r.dependencies!==null&&hh(r.dependencies))?(Y||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,ee,U),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,ee,U)),typeof y.componentDidUpdate=="function"&&(i.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof y.componentDidUpdate!="function"||_===r.memoizedProps&&X===r.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===r.memoizedProps&&X===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=ee),y.props=u,y.state=ee,y.context=U,u=ae):(typeof y.componentDidUpdate!="function"||_===r.memoizedProps&&X===r.memoizedState||(i.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===r.memoizedProps&&X===r.memoizedState||(i.flags|=1024),u=!1)}return y=u,Rh(r,i),u=(i.flags&128)!==0,y||u?(y=i.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:y.render(),i.flags|=1,r!==null&&u?(i.child=wo(i,r.child,null,m),i.child=wo(i,null,l,m)):Nn(r,i,l,m),i.memoizedState=y.state,r=i.child):r=ui(r,i,m),r}function Jw(r,i,l,u){return mo(),i.flags|=256,Nn(r,i,l,u),i.child}var fp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mp(r){return{baseLanes:r,cachePool:zb()}}function gp(r,i,l){return r=r!==null?r.childLanes&~l:0,i&&(r|=xs),r}function Zw(r,i,l){var u=i.pendingProps,m=!1,y=(i.flags&128)!==0,_;if((_=y)||(_=r!==null&&r.memoizedState===null?!1:(Yt.current&2)!==0),_&&(m=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,r===null){if(it){if(m?ea(i):ta(),(r=jt)?(r=o2(r,Qs),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Ki!==null?{id:Mr,overflow:Vr}:null,retryLane:536870912,hydrationErrors:null},l=jb(r),l.return=i,i.child=l,Sn=i,jt=null)):r=null,r===null)throw Wi(i);return Xp(r)?i.lanes=32:i.lanes=536870912,null}var S=u.children;return u=u.fallback,m?(ta(),m=i.mode,S=jh({mode:"hidden",children:S},m),u=fo(u,m,l,null),S.return=i,u.return=i,S.sibling=u,i.child=S,u=i.child,u.memoizedState=mp(l),u.childLanes=gp(r,_,l),i.memoizedState=fp,xu(null,u)):(ea(i),pp(i,S))}var U=r.memoizedState;if(U!==null&&(S=U.dehydrated,S!==null)){if(y)i.flags&256?(ea(i),i.flags&=-257,i=yp(r,i,l)):i.memoizedState!==null?(ta(),i.child=r.child,i.flags|=128,i=null):(ta(),S=u.fallback,m=i.mode,u=jh({mode:"visible",children:u.children},m),S=fo(S,m,l,null),S.flags|=2,u.return=i,S.return=i,u.sibling=S,i.child=u,wo(i,r.child,null,l),u=i.child,u.memoizedState=mp(l),u.childLanes=gp(r,_,l),i.memoizedState=fp,i=xu(null,u));else if(ea(i),Xp(S)){if(_=S.nextSibling&&S.nextSibling.dataset,_)var Y=_.dgst;_=Y,u=Error(s(419)),u.stack="",u.digest=_,uu({value:u,source:null,stack:null}),i=yp(r,i,l)}else if(an||Tl(r,i,l,!1),_=(l&r.childLanes)!==0,an||_){if(_=Ct,_!==null&&(u=Oi(_,l),u!==0&&u!==U.retryLane))throw U.retryLane=u,ho(r,u),cs(_,r,u),dp;Yp(S)||zh(),i=yp(r,i,l)}else Yp(S)?(i.flags|=192,i.child=r.child,i=null):(r=U.treeContext,jt=Ys(S.nextSibling),Sn=i,it=!0,Qi=null,Qs=!1,r!==null&&Pb(i,r),i=pp(i,u.children),i.flags|=4096);return i}return m?(ta(),S=u.fallback,m=i.mode,U=r.child,Y=U.sibling,u=ri(U,{mode:"hidden",children:u.children}),u.subtreeFlags=U.subtreeFlags&65011712,Y!==null?S=ri(Y,S):(S=fo(S,m,l,null),S.flags|=2),S.return=i,u.return=i,u.sibling=S,i.child=u,xu(null,u),u=i.child,S=r.child.memoizedState,S===null?S=mp(l):(m=S.cachePool,m!==null?(U=sn._currentValue,m=m.parent!==U?{parent:U,pool:U}:m):m=zb(),S={baseLanes:S.baseLanes|l,cachePool:m}),u.memoizedState=S,u.childLanes=gp(r,_,l),i.memoizedState=fp,xu(r.child,u)):(ea(i),l=r.child,r=l.sibling,l=ri(l,{mode:"visible",children:u.children}),l.return=i,l.sibling=null,r!==null&&(_=i.deletions,_===null?(i.deletions=[r],i.flags|=16):_.push(r)),i.child=l,i.memoizedState=null,l)}function pp(r,i){return i=jh({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function jh(r,i){return r=vs(22,r,null,i),r.lanes=0,r}function yp(r,i,l){return wo(i,r.child,null,l),r=pp(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function e1(r,i,l){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),jg(r.return,i,l)}function vp(r,i,l,u,m,y){var _=r.memoizedState;_===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:m,treeForkCount:y}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=l,_.tailMode=m,_.treeForkCount=y)}function t1(r,i,l){var u=i.pendingProps,m=u.revealOrder,y=u.tail;u=u.children;var _=Yt.current,S=(_&2)!==0;if(S?(_=_&1|2,i.flags|=128):_&=1,K(Yt,_),Nn(r,i,u,l),u=it?cu:0,!S&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&e1(r,l,i);else if(r.tag===19)e1(r,l,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(m){case"forwards":for(l=i.child,m=null;l!==null;)r=l.alternate,r!==null&&wh(r)===null&&(m=l),l=l.sibling;l=m,l===null?(m=i.child,i.child=null):(m=l.sibling,l.sibling=null),vp(i,!1,m,l,y,u);break;case"backwards":case"unstable_legacy-backwards":for(l=null,m=i.child,i.child=null;m!==null;){if(r=m.alternate,r!==null&&wh(r)===null){i.child=m;break}r=m.sibling,m.sibling=l,l=m,m=r}vp(i,!0,l,null,y,u);break;case"together":vp(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function ui(r,i,l){if(r!==null&&(i.dependencies=r.dependencies),ra|=i.lanes,(l&i.childLanes)===0)if(r!==null){if(Tl(r,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,l=ri(r,r.pendingProps),i.child=l,l.return=i;r.sibling!==null;)r=r.sibling,l=l.sibling=ri(r,r.pendingProps),l.return=i;l.sibling=null}return i.child}function bp(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&hh(r)))}function KA(r,i,l){switch(i.tag){case 3:We(i,i.stateNode.containerInfo),Yi(i,sn,r.memoizedState.cache),mo();break;case 27:case 5:ze(i);break;case 4:We(i,i.stateNode.containerInfo);break;case 10:Yi(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,$g(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(ea(i),i.flags|=128,null):(l&i.child.childLanes)!==0?Zw(r,i,l):(ea(i),r=ui(r,i,l),r!==null?r.sibling:null);ea(i);break;case 19:var m=(r.flags&128)!==0;if(u=(l&i.childLanes)!==0,u||(Tl(r,i,l,!1),u=(l&i.childLanes)!==0),m){if(u)return t1(r,i,l);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),K(Yt,Yt.current),u)break;return null;case 22:return i.lanes=0,Kw(r,i,l,i.pendingProps);case 24:Yi(i,sn,r.memoizedState.cache)}return ui(r,i,l)}function n1(r,i,l){if(r!==null)if(r.memoizedProps!==i.pendingProps)an=!0;else{if(!bp(r,l)&&(i.flags&128)===0)return an=!1,KA(r,i,l);an=(r.flags&131072)!==0}else an=!1,it&&(i.flags&1048576)!==0&&Db(i,cu,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(r=vo(i.elementType),i.type=r,typeof r=="function")Tg(r)?(u=xo(r,u),i.tag=1,i=Xw(null,i,r,u,l)):(i.tag=0,i=hp(null,i,r,u,l));else{if(r!=null){var m=r.$$typeof;if(m===te){i.tag=11,i=$w(null,i,r,u,l);break e}else if(m===N){i.tag=14,i=Fw(null,i,r,u,l);break e}}throw i=Ue(r)||r,Error(s(306,i,""))}}return i;case 0:return hp(r,i,i.type,i.pendingProps,l);case 1:return u=i.type,m=xo(u,i.pendingProps),Xw(r,i,u,m,l);case 3:e:{if(We(i,i.stateNode.containerInfo),r===null)throw Error(s(387));u=i.pendingProps;var y=i.memoizedState;m=y.element,Ug(r,i),yu(i,u,null,l);var _=i.memoizedState;if(u=_.cache,Yi(i,sn,u),u!==y.cache&&Og(i,[sn],l,!0),pu(),u=_.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=y,i.memoizedState=y,i.flags&256){i=Jw(r,i,u,l);break e}else if(u!==m){m=Fs(Error(s(424)),i),uu(m),i=Jw(r,i,u,l);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(jt=Ys(r.firstChild),Sn=i,it=!0,Qi=null,Qs=!0,l=Kb(i,null,u,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(mo(),u===m){i=ui(r,i,l);break e}Nn(r,i,u,l)}i=i.child}return i;case 26:return Rh(r,i),r===null?(l=f2(i.type,null,i.pendingProps,null))?i.memoizedState=l:it||(l=i.type,r=i.pendingProps,u=Qh(_e.current).createElement(l),u[qt]=i,u[nn]=r,Cn(u,l,r),$t(u),i.stateNode=u):i.memoizedState=f2(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return ze(i),r===null&&it&&(u=i.stateNode=u2(i.type,i.pendingProps,_e.current),Sn=i,Qs=!0,m=jt,ca(i.type)?(Jp=m,jt=Ys(u.firstChild)):jt=m),Nn(r,i,i.pendingProps.children,l),Rh(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&it&&((m=u=jt)&&(u=EN(u,i.type,i.pendingProps,Qs),u!==null?(i.stateNode=u,Sn=i,jt=Ys(u.firstChild),Qs=!1,m=!0):m=!1),m||Wi(i)),ze(i),m=i.type,y=i.pendingProps,_=r!==null?r.memoizedProps:null,u=y.children,Kp(m,y)?u=null:_!==null&&Kp(m,_)&&(i.flags|=32),i.memoizedState!==null&&(m=Gg(r,i,VA,null,null,l),Mu._currentValue=m),Rh(r,i),Nn(r,i,u,l),i.child;case 6:return r===null&&it&&((r=l=jt)&&(l=TN(l,i.pendingProps,Qs),l!==null?(i.stateNode=l,Sn=i,jt=null,r=!0):r=!1),r||Wi(i)),null;case 13:return Zw(r,i,l);case 4:return We(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=wo(i,null,u,l):Nn(r,i,u,l),i.child;case 11:return $w(r,i,i.type,i.pendingProps,l);case 7:return Nn(r,i,i.pendingProps,l),i.child;case 8:return Nn(r,i,i.pendingProps.children,l),i.child;case 12:return Nn(r,i,i.pendingProps.children,l),i.child;case 10:return u=i.pendingProps,Yi(i,i.type,u.value),Nn(r,i,u.children,l),i.child;case 9:return m=i.type._context,u=i.pendingProps.children,po(i),m=An(m),u=u(m),i.flags|=1,Nn(r,i,u,l),i.child;case 14:return Fw(r,i,i.type,i.pendingProps,l);case 15:return Gw(r,i,i.type,i.pendingProps,l);case 19:return t1(r,i,l);case 31:return GA(r,i,l);case 22:return Kw(r,i,l,i.pendingProps);case 24:return po(i),u=An(sn),r===null?(m=Lg(),m===null&&(m=Ct,y=Dg(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=l),m=y),i.memoizedState={parent:u,cache:m},Vg(i),Yi(i,sn,m)):((r.lanes&l)!==0&&(Ug(r,i),yu(i,null,null,l),pu()),m=r.memoizedState,y=i.memoizedState,m.parent!==u?(m={parent:u,cache:u},i.memoizedState=m,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=m),Yi(i,sn,u)):(u=y.cache,Yi(i,sn,u),u!==m.cache&&Og(i,[sn],l,!0))),Nn(r,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function di(r){r.flags|=4}function wp(r,i,l,u,m){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(m&335544128)===m)if(r.stateNode.complete)r.flags|=8192;else if(k1())r.flags|=8192;else throw bo=ph,Mg}else r.flags&=-16777217}function s1(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!v2(i))if(k1())r.flags|=8192;else throw bo=ph,Mg}function Oh(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?il():536870912,r.lanes|=i,Ll|=i)}function Eu(r,i){if(!it)switch(r.tailMode){case"hidden":i=r.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Ot(r){var i=r.alternate!==null&&r.alternate.child===r.child,l=0,u=0;if(i)for(var m=r.child;m!==null;)l|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)l|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=u,r.childLanes=l,i}function QA(r,i,l){var u=i.pendingProps;switch(Cg(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(i),null;case 1:return Ot(i),null;case 3:return l=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),oi(sn),ot(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(El(i)?di(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ig())),Ot(i),null;case 26:var m=i.type,y=i.memoizedState;return r===null?(di(i),y!==null?(Ot(i),s1(i,y)):(Ot(i),wp(i,m,null,u,l))):y?y!==r.memoizedState?(di(i),Ot(i),s1(i,y)):(Ot(i),i.flags&=-16777217):(r=r.memoizedProps,r!==u&&di(i),Ot(i),wp(i,m,r,u,l)),null;case 27:if(wt(i),l=_e.current,m=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&di(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return Ot(i),null}r=ne.current,El(i)?Lb(i):(r=u2(m,u,l),i.stateNode=r,di(i))}return Ot(i),null;case 5:if(wt(i),m=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&di(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return Ot(i),null}if(y=ne.current,El(i))Lb(i);else{var _=Qh(_e.current);switch(y){case 1:y=_.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=_.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=_.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=_.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=_.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?_.createElement(m,{is:u.is}):_.createElement(m)}}y[qt]=i,y[nn]=u;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)y.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=y;e:switch(Cn(y,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&di(i)}}return Ot(i),wp(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,l),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&di(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(r=_e.current,El(i)){if(r=i.stateNode,l=i.memoizedProps,u=null,m=Sn,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}r[qt]=i,r=!!(r.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||Z1(r.nodeValue,l)),r||Wi(i,!0)}else r=Qh(r).createTextNode(u),r[qt]=i,i.stateNode=r}return Ot(i),null;case 31:if(l=i.memoizedState,r===null||r.memoizedState!==null){if(u=El(i),l!==null){if(r===null){if(!u)throw Error(s(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[qt]=i}else mo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ot(i),r=!1}else l=Ig(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=l),r=!0;if(!r)return i.flags&256?(ws(i),i):(ws(i),null);if((i.flags&128)!==0)throw Error(s(558))}return Ot(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(m=El(i),u!==null&&u.dehydrated!==null){if(r===null){if(!m)throw Error(s(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[qt]=i}else mo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ot(i),m=!1}else m=Ig(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=m),m=!0;if(!m)return i.flags&256?(ws(i),i):(ws(i),null)}return ws(i),(i.flags&128)!==0?(i.lanes=l,i):(l=u!==null,r=r!==null&&r.memoizedState!==null,l&&(u=i.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==m&&(u.flags|=2048)),l!==r&&l&&(i.child.flags|=8192),Oh(i,i.updateQueue),Ot(i),null);case 4:return ot(),r===null&&Hp(i.stateNode.containerInfo),Ot(i),null;case 10:return oi(i.type),Ot(i),null;case 19:if(Z(Yt),u=i.memoizedState,u===null)return Ot(i),null;if(m=(i.flags&128)!==0,y=u.rendering,y===null)if(m)Eu(u,!1);else{if(Kt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(y=wh(r),y!==null){for(i.flags|=128,Eu(u,!1),r=y.updateQueue,i.updateQueue=r,Oh(i,r),i.subtreeFlags=0,r=l,l=i.child;l!==null;)Rb(l,r),l=l.sibling;return K(Yt,Yt.current&1|2),it&&ii(i,u.treeForkCount),i.child}r=r.sibling}u.tail!==null&&En()>Vh&&(i.flags|=128,m=!0,Eu(u,!1),i.lanes=4194304)}else{if(!m)if(r=wh(y),r!==null){if(i.flags|=128,m=!0,r=r.updateQueue,i.updateQueue=r,Oh(i,r),Eu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!it)return Ot(i),null}else 2*En()-u.renderingStartTime>Vh&&l!==536870912&&(i.flags|=128,m=!0,Eu(u,!1),i.lanes=4194304);u.isBackwards?(y.sibling=i.child,i.child=y):(r=u.last,r!==null?r.sibling=y:i.child=y,u.last=y)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=En(),r.sibling=null,l=Yt.current,K(Yt,m?l&1|2:l&1),it&&ii(i,u.treeForkCount),r):(Ot(i),null);case 22:case 23:return ws(i),qg(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(l&536870912)!==0&&(i.flags&128)===0&&(Ot(i),i.subtreeFlags&6&&(i.flags|=8192)):Ot(i),l=i.updateQueue,l!==null&&Oh(i,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==l&&(i.flags|=2048),r!==null&&Z(yo),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),oi(sn),Ot(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function WA(r,i){switch(Cg(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return oi(sn),ot(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return wt(i),null;case 31:if(i.memoizedState!==null){if(ws(i),i.alternate===null)throw Error(s(340));mo()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(ws(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));mo()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return Z(Yt),null;case 4:return ot(),null;case 10:return oi(i.type),null;case 22:case 23:return ws(i),qg(),r!==null&&Z(yo),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return oi(sn),null;case 25:return null;default:return null}}function r1(r,i){switch(Cg(i),i.tag){case 3:oi(sn),ot();break;case 26:case 27:case 5:wt(i);break;case 4:ot();break;case 31:i.memoizedState!==null&&ws(i);break;case 13:ws(i);break;case 19:Z(Yt);break;case 10:oi(i.type);break;case 22:case 23:ws(i),qg(),r!==null&&Z(yo);break;case 24:oi(sn)}}function Tu(r,i){try{var l=i.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var m=u.next;l=m;do{if((l.tag&r)===r){u=void 0;var y=l.create,_=l.inst;u=y(),_.destroy=u}l=l.next}while(l!==m)}}catch(S){vt(i,i.return,S)}}function na(r,i,l){try{var u=i.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var y=m.next;u=y;do{if((u.tag&r)===r){var _=u.inst,S=_.destroy;if(S!==void 0){_.destroy=void 0,m=i;var U=l,Y=S;try{Y()}catch(ae){vt(m,U,ae)}}}u=u.next}while(u!==y)}}catch(ae){vt(i,i.return,ae)}}function i1(r){var i=r.updateQueue;if(i!==null){var l=r.stateNode;try{Wb(i,l)}catch(u){vt(r,r.return,u)}}}function a1(r,i,l){l.props=xo(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(u){vt(r,i,u)}}function Su(r,i){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof l=="function"?r.refCleanup=l(u):l.current=u}}catch(m){vt(r,i,m)}}function Ur(r,i){var l=r.ref,u=r.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(m){vt(r,i,m)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){vt(r,i,m)}else l.current=null}function o1(r){var i=r.type,l=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(m){vt(r,r.return,m)}}function _p(r,i,l){try{var u=r.stateNode;yN(u,r.type,l,i),u[nn]=i}catch(m){vt(r,r.return,m)}}function l1(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ca(r.type)||r.tag===4}function xp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||l1(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ca(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Ep(r,i,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(r),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=ar));else if(u!==4&&(u===27&&ca(r.type)&&(l=r.stateNode,i=null),r=r.child,r!==null))for(Ep(r,i,l),r=r.sibling;r!==null;)Ep(r,i,l),r=r.sibling}function Dh(r,i,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?l.insertBefore(r,i):l.appendChild(r);else if(u!==4&&(u===27&&ca(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(Dh(r,i,l),r=r.sibling;r!==null;)Dh(r,i,l),r=r.sibling}function c1(r){var i=r.stateNode,l=r.memoizedProps;try{for(var u=r.type,m=i.attributes;m.length;)i.removeAttributeNode(m[0]);Cn(i,u,l),i[qt]=r,i[nn]=l}catch(y){vt(r,r.return,y)}}var hi=!1,on=!1,Tp=!1,u1=typeof WeakSet=="function"?WeakSet:Set,vn=null;function YA(r,i){if(r=r.containerInfo,Fp=tf,r=xb(r),yg(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var m=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var _=0,S=-1,U=-1,Y=0,ae=0,ue=r,X=null;t:for(;;){for(var ee;ue!==l||m!==0&&ue.nodeType!==3||(S=_+m),ue!==y||u!==0&&ue.nodeType!==3||(U=_+u),ue.nodeType===3&&(_+=ue.nodeValue.length),(ee=ue.firstChild)!==null;)X=ue,ue=ee;for(;;){if(ue===r)break t;if(X===l&&++Y===m&&(S=_),X===y&&++ae===u&&(U=_),(ee=ue.nextSibling)!==null)break;ue=X,X=ue.parentNode}ue=ee}l=S===-1||U===-1?null:{start:S,end:U}}else l=null}l=l||{start:0,end:0}}else l=null;for(Gp={focusedElem:r,selectionRange:l},tf=!1,vn=i;vn!==null;)if(i=vn,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,vn=r;else for(;vn!==null;){switch(i=vn,y=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(l=0;l<r.length;l++)m=r[l],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&y!==null){r=void 0,l=i,m=y.memoizedProps,y=y.memoizedState,u=l.stateNode;try{var Ee=xo(l.type,m);r=u.getSnapshotBeforeUpdate(Ee,y),u.__reactInternalSnapshotBeforeUpdate=r}catch(Pe){vt(l,l.return,Pe)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,l=r.nodeType,l===9)Wp(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Wp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,vn=r;break}vn=i.return}}function d1(r,i,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:mi(r,l),u&4&&Tu(5,l);break;case 1:if(mi(r,l),u&4)if(r=l.stateNode,i===null)try{r.componentDidMount()}catch(_){vt(l,l.return,_)}else{var m=xo(l.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(m,i,r.__reactInternalSnapshotBeforeUpdate)}catch(_){vt(l,l.return,_)}}u&64&&i1(l),u&512&&Su(l,l.return);break;case 3:if(mi(r,l),u&64&&(r=l.updateQueue,r!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{Wb(r,i)}catch(_){vt(l,l.return,_)}}break;case 27:i===null&&u&4&&c1(l);case 26:case 5:mi(r,l),i===null&&u&4&&o1(l),u&512&&Su(l,l.return);break;case 12:mi(r,l);break;case 31:mi(r,l),u&4&&m1(r,l);break;case 13:mi(r,l),u&4&&g1(r,l),u&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=iN.bind(null,l),SN(r,l))));break;case 22:if(u=l.memoizedState!==null||hi,!u){i=i!==null&&i.memoizedState!==null||on,m=hi;var y=on;hi=u,(on=i)&&!y?gi(r,l,(l.subtreeFlags&8772)!==0):mi(r,l),hi=m,on=y}break;case 30:break;default:mi(r,l)}}function h1(r){var i=r.alternate;i!==null&&(r.alternate=null,h1(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&Pi(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Lt=null,is=!1;function fi(r,i,l){for(l=l.child;l!==null;)f1(r,i,l),l=l.sibling}function f1(r,i,l){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(gs,l)}catch{}switch(l.tag){case 26:on||Ur(l,i),fi(r,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:on||Ur(l,i);var u=Lt,m=is;ca(l.type)&&(Lt=l.stateNode,is=!1),fi(r,i,l),Du(l.stateNode),Lt=u,is=m;break;case 5:on||Ur(l,i);case 6:if(u=Lt,m=is,Lt=null,fi(r,i,l),Lt=u,is=m,Lt!==null)if(is)try{(Lt.nodeType===9?Lt.body:Lt.nodeName==="HTML"?Lt.ownerDocument.body:Lt).removeChild(l.stateNode)}catch(y){vt(l,i,y)}else try{Lt.removeChild(l.stateNode)}catch(y){vt(l,i,y)}break;case 18:Lt!==null&&(is?(r=Lt,i2(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),$l(r)):i2(Lt,l.stateNode));break;case 4:u=Lt,m=is,Lt=l.stateNode.containerInfo,is=!0,fi(r,i,l),Lt=u,is=m;break;case 0:case 11:case 14:case 15:na(2,l,i),on||na(4,l,i),fi(r,i,l);break;case 1:on||(Ur(l,i),u=l.stateNode,typeof u.componentWillUnmount=="function"&&a1(l,i,u)),fi(r,i,l);break;case 21:fi(r,i,l);break;case 22:on=(u=on)||l.memoizedState!==null,fi(r,i,l),on=u;break;default:fi(r,i,l)}}function m1(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{$l(r)}catch(l){vt(i,i.return,l)}}}function g1(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{$l(r)}catch(l){vt(i,i.return,l)}}function XA(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new u1),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new u1),i;default:throw Error(s(435,r.tag))}}function Ph(r,i){var l=XA(r);i.forEach(function(u){if(!l.has(u)){l.add(u);var m=aN.bind(null,r,u);u.then(m,m)}})}function as(r,i){var l=i.deletions;if(l!==null)for(var u=0;u<l.length;u++){var m=l[u],y=r,_=i,S=_;e:for(;S!==null;){switch(S.tag){case 27:if(ca(S.type)){Lt=S.stateNode,is=!1;break e}break;case 5:Lt=S.stateNode,is=!1;break e;case 3:case 4:Lt=S.stateNode.containerInfo,is=!0;break e}S=S.return}if(Lt===null)throw Error(s(160));f1(y,_,m),Lt=null,is=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)p1(i,r),i=i.sibling}var hr=null;function p1(r,i){var l=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:as(i,r),os(r),u&4&&(na(3,r,r.return),Tu(3,r),na(5,r,r.return));break;case 1:as(i,r),os(r),u&512&&(on||l===null||Ur(l,l.return)),u&64&&hi&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var m=hr;if(as(i,r),os(r),u&512&&(on||l===null||Ur(l,l.return)),u&4){var y=l!==null?l.memoizedState:null;if(u=r.memoizedState,l===null)if(u===null)if(r.stateNode===null){e:{u=r.type,l=r.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":y=m.getElementsByTagName("title")[0],(!y||y[Us]||y[qt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(u),m.head.insertBefore(y,m.querySelector("head > title"))),Cn(y,u,l),y[qt]=r,$t(y),u=y;break e;case"link":var _=p2("link","href",m).get(u+(l.href||""));if(_){for(var S=0;S<_.length;S++)if(y=_[S],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){_.splice(S,1);break t}}y=m.createElement(u),Cn(y,u,l),m.head.appendChild(y);break;case"meta":if(_=p2("meta","content",m).get(u+(l.content||""))){for(S=0;S<_.length;S++)if(y=_[S],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){_.splice(S,1);break t}}y=m.createElement(u),Cn(y,u,l),m.head.appendChild(y);break;default:throw Error(s(468,u))}y[qt]=r,$t(y),u=y}r.stateNode=u}else y2(m,r.type,r.stateNode);else r.stateNode=g2(m,u,r.memoizedProps);else y!==u?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,u===null?y2(m,r.type,r.stateNode):g2(m,u,r.memoizedProps)):u===null&&r.stateNode!==null&&_p(r,r.memoizedProps,l.memoizedProps)}break;case 27:as(i,r),os(r),u&512&&(on||l===null||Ur(l,l.return)),l!==null&&u&4&&_p(r,r.memoizedProps,l.memoizedProps);break;case 5:if(as(i,r),os(r),u&512&&(on||l===null||Ur(l,l.return)),r.flags&32){m=r.stateNode;try{rs(m,"")}catch(Ee){vt(r,r.return,Ee)}}u&4&&r.stateNode!=null&&(m=r.memoizedProps,_p(r,m,l!==null?l.memoizedProps:m)),u&1024&&(Tp=!0);break;case 6:if(as(i,r),os(r),u&4){if(r.stateNode===null)throw Error(s(162));u=r.memoizedProps,l=r.stateNode;try{l.nodeValue=u}catch(Ee){vt(r,r.return,Ee)}}break;case 3:if(Xh=null,m=hr,hr=Wh(i.containerInfo),as(i,r),hr=m,os(r),u&4&&l!==null&&l.memoizedState.isDehydrated)try{$l(i.containerInfo)}catch(Ee){vt(r,r.return,Ee)}Tp&&(Tp=!1,y1(r));break;case 4:u=hr,hr=Wh(r.stateNode.containerInfo),as(i,r),os(r),hr=u;break;case 12:as(i,r),os(r);break;case 31:as(i,r),os(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Ph(r,u)));break;case 13:as(i,r),os(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Mh=En()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Ph(r,u)));break;case 22:m=r.memoizedState!==null;var U=l!==null&&l.memoizedState!==null,Y=hi,ae=on;if(hi=Y||m,on=ae||U,as(i,r),on=ae,hi=Y,os(r),u&8192)e:for(i=r.stateNode,i._visibility=m?i._visibility&-2:i._visibility|1,m&&(l===null||U||hi||on||Eo(r)),l=null,i=r;;){if(i.tag===5||i.tag===26){if(l===null){U=l=i;try{if(y=U.stateNode,m)_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{S=U.stateNode;var ue=U.memoizedProps.style,X=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;S.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(Ee){vt(U,U.return,Ee)}}}else if(i.tag===6){if(l===null){U=i;try{U.stateNode.nodeValue=m?"":U.memoizedProps}catch(Ee){vt(U,U.return,Ee)}}}else if(i.tag===18){if(l===null){U=i;try{var ee=U.stateNode;m?a2(ee,!0):a2(U.stateNode,!1)}catch(Ee){vt(U,U.return,Ee)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,Ph(r,l))));break;case 19:as(i,r),os(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Ph(r,u)));break;case 30:break;case 21:break;default:as(i,r),os(r)}}function os(r){var i=r.flags;if(i&2){try{for(var l,u=r.return;u!==null;){if(l1(u)){l=u;break}u=u.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var m=l.stateNode,y=xp(r);Dh(r,y,m);break;case 5:var _=l.stateNode;l.flags&32&&(rs(_,""),l.flags&=-33);var S=xp(r);Dh(r,S,_);break;case 3:case 4:var U=l.stateNode.containerInfo,Y=xp(r);Ep(r,Y,U);break;default:throw Error(s(161))}}catch(ae){vt(r,r.return,ae)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function y1(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;y1(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function mi(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)d1(r,i.alternate,i),i=i.sibling}function Eo(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:na(4,i,i.return),Eo(i);break;case 1:Ur(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&a1(i,i.return,l),Eo(i);break;case 27:Du(i.stateNode);case 26:case 5:Ur(i,i.return),Eo(i);break;case 22:i.memoizedState===null&&Eo(i);break;case 30:Eo(i);break;default:Eo(i)}r=r.sibling}}function gi(r,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,m=r,y=i,_=y.flags;switch(y.tag){case 0:case 11:case 15:gi(m,y,l),Tu(4,y);break;case 1:if(gi(m,y,l),u=y,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(Y){vt(u,u.return,Y)}if(u=y,m=u.updateQueue,m!==null){var S=u.stateNode;try{var U=m.shared.hiddenCallbacks;if(U!==null)for(m.shared.hiddenCallbacks=null,m=0;m<U.length;m++)Qb(U[m],S)}catch(Y){vt(u,u.return,Y)}}l&&_&64&&i1(y),Su(y,y.return);break;case 27:c1(y);case 26:case 5:gi(m,y,l),l&&u===null&&_&4&&o1(y),Su(y,y.return);break;case 12:gi(m,y,l);break;case 31:gi(m,y,l),l&&_&4&&m1(m,y);break;case 13:gi(m,y,l),l&&_&4&&g1(m,y);break;case 22:y.memoizedState===null&&gi(m,y,l),Su(y,y.return);break;case 30:break;default:gi(m,y,l)}i=i.sibling}}function Sp(r,i){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&du(l))}function Ap(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&du(r))}function fr(r,i,l,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)v1(r,i,l,u),i=i.sibling}function v1(r,i,l,u){var m=i.flags;switch(i.tag){case 0:case 11:case 15:fr(r,i,l,u),m&2048&&Tu(9,i);break;case 1:fr(r,i,l,u);break;case 3:fr(r,i,l,u),m&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&du(r)));break;case 12:if(m&2048){fr(r,i,l,u),r=i.stateNode;try{var y=i.memoizedProps,_=y.id,S=y.onPostCommit;typeof S=="function"&&S(_,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(U){vt(i,i.return,U)}}else fr(r,i,l,u);break;case 31:fr(r,i,l,u);break;case 13:fr(r,i,l,u);break;case 23:break;case 22:y=i.stateNode,_=i.alternate,i.memoizedState!==null?y._visibility&2?fr(r,i,l,u):Au(r,i):y._visibility&2?fr(r,i,l,u):(y._visibility|=2,Ol(r,i,l,u,(i.subtreeFlags&10256)!==0||!1)),m&2048&&Sp(_,i);break;case 24:fr(r,i,l,u),m&2048&&Ap(i.alternate,i);break;default:fr(r,i,l,u)}}function Ol(r,i,l,u,m){for(m=m&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var y=r,_=i,S=l,U=u,Y=_.flags;switch(_.tag){case 0:case 11:case 15:Ol(y,_,S,U,m),Tu(8,_);break;case 23:break;case 22:var ae=_.stateNode;_.memoizedState!==null?ae._visibility&2?Ol(y,_,S,U,m):Au(y,_):(ae._visibility|=2,Ol(y,_,S,U,m)),m&&Y&2048&&Sp(_.alternate,_);break;case 24:Ol(y,_,S,U,m),m&&Y&2048&&Ap(_.alternate,_);break;default:Ol(y,_,S,U,m)}i=i.sibling}}function Au(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=r,u=i,m=u.flags;switch(u.tag){case 22:Au(l,u),m&2048&&Sp(u.alternate,u);break;case 24:Au(l,u),m&2048&&Ap(u.alternate,u);break;default:Au(l,u)}i=i.sibling}}var Nu=8192;function Dl(r,i,l){if(r.subtreeFlags&Nu)for(r=r.child;r!==null;)b1(r,i,l),r=r.sibling}function b1(r,i,l){switch(r.tag){case 26:Dl(r,i,l),r.flags&Nu&&r.memoizedState!==null&&MN(l,hr,r.memoizedState,r.memoizedProps);break;case 5:Dl(r,i,l);break;case 3:case 4:var u=hr;hr=Wh(r.stateNode.containerInfo),Dl(r,i,l),hr=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=Nu,Nu=16777216,Dl(r,i,l),Nu=u):Dl(r,i,l));break;default:Dl(r,i,l)}}function w1(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function Cu(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];vn=u,x1(u,r)}w1(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)_1(r),r=r.sibling}function _1(r){switch(r.tag){case 0:case 11:case 15:Cu(r),r.flags&2048&&na(9,r,r.return);break;case 3:Cu(r);break;case 12:Cu(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,Lh(r)):Cu(r);break;default:Cu(r)}}function Lh(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var u=i[l];vn=u,x1(u,r)}w1(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:na(8,i,i.return),Lh(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,Lh(i));break;default:Lh(i)}r=r.sibling}}function x1(r,i){for(;vn!==null;){var l=vn;switch(l.tag){case 0:case 11:case 15:na(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:du(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,vn=u;else e:for(l=r;vn!==null;){u=vn;var m=u.sibling,y=u.return;if(h1(u),u===l){vn=null;break e}if(m!==null){m.return=y,vn=m;break e}vn=y}}}var JA={getCacheForType:function(r){var i=An(sn),l=i.data.get(r);return l===void 0&&(l=r(),i.data.set(r,l)),l},cacheSignal:function(){return An(sn).controller.signal}},ZA=typeof WeakMap=="function"?WeakMap:Map,ft=0,Ct=null,Xe=null,Ze=0,yt=0,_s=null,sa=!1,Pl=!1,Np=!1,pi=0,Kt=0,ra=0,To=0,Cp=0,xs=0,Ll=0,ku=null,ls=null,kp=!1,Mh=0,E1=0,Vh=1/0,Uh=null,ia=null,fn=0,aa=null,Ml=null,yi=0,Ip=0,Rp=null,T1=null,Iu=0,jp=null;function Es(){return(ft&2)!==0&&Ze!==0?Ze&-Ze:P.T!==null?Vp():Ja()}function S1(){if(xs===0)if((Ze&536870912)===0||it){var r=ei;ei<<=1,(ei&3932160)===0&&(ei=262144),xs=r}else xs=536870912;return r=bs.current,r!==null&&(r.flags|=32),xs}function cs(r,i,l){(r===Ct&&(yt===2||yt===9)||r.cancelPendingCommit!==null)&&(Vl(r,0),oa(r,Ze,xs,!1)),Nr(r,l),((ft&2)===0||r!==Ct)&&(r===Ct&&((ft&2)===0&&(To|=l),Kt===4&&oa(r,Ze,xs,!1)),Br(r))}function A1(r,i,l){if((ft&6)!==0)throw Error(s(327));var u=!l&&(i&127)===0&&(i&r.expiredLanes)===0||Gn(r,i),m=u?nN(r,i):Dp(r,i,!0),y=u;do{if(m===0){Pl&&!u&&oa(r,i,0,!1);break}else{if(l=r.current.alternate,y&&!eN(l)){m=Dp(r,i,!1),y=!1;continue}if(m===2){if(y=i,r.errorRecoveryDisabledLanes&y)var _=0;else _=r.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var S=r;m=ku;var U=S.current.memoizedState.isDehydrated;if(U&&(Vl(S,_).flags|=256),_=Dp(S,_,!1),_!==2){if(Np&&!U){S.errorRecoveryDisabledLanes|=y,To|=y,m=4;break e}y=ls,ls=m,y!==null&&(ls===null?ls=y:ls.push.apply(ls,y))}m=_}if(y=!1,m!==2)continue}}if(m===1){Vl(r,0),oa(r,i,0,!0);break}e:{switch(u=r,y=m,y){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:oa(u,i,xs,!sa);break e;case 2:ls=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(m=Mh+300-En(),10<m)){if(oa(u,i,xs,!sa),Ps(u,0,!0)!==0)break e;yi=i,u.timeoutHandle=s2(N1.bind(null,u,l,ls,Uh,kp,i,xs,To,Ll,sa,y,"Throttled",-0,0),m);break e}N1(u,l,ls,Uh,kp,i,xs,To,Ll,sa,y,null,-0,0)}}break}while(!0);Br(r)}function N1(r,i,l,u,m,y,_,S,U,Y,ae,ue,X,ee){if(r.timeoutHandle=-1,ue=i.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ar},b1(i,y,ue);var Ee=(y&62914560)===y?Mh-En():(y&4194048)===y?E1-En():0;if(Ee=VN(ue,Ee),Ee!==null){yi=y,r.cancelPendingCommit=Ee(P1.bind(null,r,i,y,l,u,m,_,S,U,ae,ue,null,X,ee)),oa(r,y,_,!Y);return}}P1(r,i,y,l,u,m,_,S,U)}function eN(r){for(var i=r;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var m=l[u],y=m.getSnapshot;m=m.value;try{if(!ys(y(),m))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function oa(r,i,l,u){i&=~Cp,i&=~To,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var m=i;0<m;){var y=31-Dt(m),_=1<<y;u[y]=-1,m&=~_}l!==0&&Cr(r,l,i)}function Bh(){return(ft&6)===0?(Ru(0),!1):!0}function Op(){if(Xe!==null){if(yt===0)var r=Xe.return;else r=Xe,ai=go=null,Wg(r),Cl=null,fu=0,r=Xe;for(;r!==null;)r1(r.alternate,r),r=r.return;Xe=null}}function Vl(r,i){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,wN(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),yi=0,Op(),Ct=r,Xe=l=ri(r.current,null),Ze=i,yt=0,_s=null,sa=!1,Pl=Gn(r,i),Np=!1,Ll=xs=Cp=To=ra=Kt=0,ls=ku=null,kp=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var m=31-Dt(u),y=1<<m;i|=r[m],u&=~y}return pi=i,oh(),l}function C1(r,i){Ke=null,P.H=_u,i===Nl||i===gh?(i=$b(),yt=3):i===Mg?(i=$b(),yt=4):yt=i===dp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,_s=i,Xe===null&&(Kt=1,kh(r,Fs(i,r.current)))}function k1(){var r=bs.current;return r===null?!0:(Ze&4194048)===Ze?Ws===null:(Ze&62914560)===Ze||(Ze&536870912)!==0?r===Ws:!1}function I1(){var r=P.H;return P.H=_u,r===null?_u:r}function R1(){var r=P.A;return P.A=JA,r}function zh(){Kt=4,sa||(Ze&4194048)!==Ze&&bs.current!==null||(Pl=!0),(ra&134217727)===0&&(To&134217727)===0||Ct===null||oa(Ct,Ze,xs,!1)}function Dp(r,i,l){var u=ft;ft|=2;var m=I1(),y=R1();(Ct!==r||Ze!==i)&&(Uh=null,Vl(r,i)),i=!1;var _=Kt;e:do try{if(yt!==0&&Xe!==null){var S=Xe,U=_s;switch(yt){case 8:Op(),_=6;break e;case 3:case 2:case 9:case 6:bs.current===null&&(i=!0);var Y=yt;if(yt=0,_s=null,Ul(r,S,U,Y),l&&Pl){_=0;break e}break;default:Y=yt,yt=0,_s=null,Ul(r,S,U,Y)}}tN(),_=Kt;break}catch(ae){C1(r,ae)}while(!0);return i&&r.shellSuspendCounter++,ai=go=null,ft=u,P.H=m,P.A=y,Xe===null&&(Ct=null,Ze=0,oh()),_}function tN(){for(;Xe!==null;)j1(Xe)}function nN(r,i){var l=ft;ft|=2;var u=I1(),m=R1();Ct!==r||Ze!==i?(Uh=null,Vh=En()+500,Vl(r,i)):Pl=Gn(r,i);e:do try{if(yt!==0&&Xe!==null){i=Xe;var y=_s;t:switch(yt){case 1:yt=0,_s=null,Ul(r,i,y,1);break;case 2:case 9:if(Hb(y)){yt=0,_s=null,O1(i);break}i=function(){yt!==2&&yt!==9||Ct!==r||(yt=7),Br(r)},y.then(i,i);break e;case 3:yt=7;break e;case 4:yt=5;break e;case 7:Hb(y)?(yt=0,_s=null,O1(i)):(yt=0,_s=null,Ul(r,i,y,7));break;case 5:var _=null;switch(Xe.tag){case 26:_=Xe.memoizedState;case 5:case 27:var S=Xe;if(_?v2(_):S.stateNode.complete){yt=0,_s=null;var U=S.sibling;if(U!==null)Xe=U;else{var Y=S.return;Y!==null?(Xe=Y,Hh(Y)):Xe=null}break t}}yt=0,_s=null,Ul(r,i,y,5);break;case 6:yt=0,_s=null,Ul(r,i,y,6);break;case 8:Op(),Kt=6;break e;default:throw Error(s(462))}}sN();break}catch(ae){C1(r,ae)}while(!0);return ai=go=null,P.H=u,P.A=m,ft=l,Xe!==null?0:(Ct=null,Ze=0,oh(),Kt)}function sN(){for(;Xe!==null&&!Ga();)j1(Xe)}function j1(r){var i=n1(r.alternate,r,pi);r.memoizedProps=r.pendingProps,i===null?Hh(r):Xe=i}function O1(r){var i=r,l=i.alternate;switch(i.tag){case 15:case 0:i=Yw(l,i,i.pendingProps,i.type,void 0,Ze);break;case 11:i=Yw(l,i,i.pendingProps,i.type.render,i.ref,Ze);break;case 5:Wg(i);default:r1(l,i),i=Xe=Rb(i,pi),i=n1(l,i,pi)}r.memoizedProps=r.pendingProps,i===null?Hh(r):Xe=i}function Ul(r,i,l,u){ai=go=null,Wg(i),Cl=null,fu=0;var m=i.return;try{if(FA(r,m,i,l,Ze)){Kt=1,kh(r,Fs(l,r.current)),Xe=null;return}}catch(y){if(m!==null)throw Xe=m,y;Kt=1,kh(r,Fs(l,r.current)),Xe=null;return}i.flags&32768?(it||u===1?r=!0:Pl||(Ze&536870912)!==0?r=!1:(sa=r=!0,(u===2||u===9||u===3||u===6)&&(u=bs.current,u!==null&&u.tag===13&&(u.flags|=16384))),D1(i,r)):Hh(i)}function Hh(r){var i=r;do{if((i.flags&32768)!==0){D1(i,sa);return}r=i.return;var l=QA(i.alternate,i,pi);if(l!==null){Xe=l;return}if(i=i.sibling,i!==null){Xe=i;return}Xe=i=r}while(i!==null);Kt===0&&(Kt=5)}function D1(r,i){do{var l=WA(r.alternate,r);if(l!==null){l.flags&=32767,Xe=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(r=r.sibling,r!==null)){Xe=r;return}Xe=r=l}while(r!==null);Kt=6,Xe=null}function P1(r,i,l,u,m,y,_,S,U){r.cancelPendingCommit=null;do qh();while(fn!==0);if((ft&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(y=i.lanes|i.childLanes,y|=xg,ji(r,l,y,_,S,U),r===Ct&&(Xe=Ct=null,Ze=0),Ml=i,aa=r,yi=l,Ip=y,Rp=m,T1=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,oN(sr,function(){return B1(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=P.T,P.T=null,m=ie.p,ie.p=2,_=ft,ft|=4;try{YA(r,i,l)}finally{ft=_,ie.p=m,P.T=u}}fn=1,L1(),M1(),V1()}}function L1(){if(fn===1){fn=0;var r=aa,i=Ml,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=P.T,P.T=null;var u=ie.p;ie.p=2;var m=ft;ft|=4;try{p1(i,r);var y=Gp,_=xb(r.containerInfo),S=y.focusedElem,U=y.selectionRange;if(_!==S&&S&&S.ownerDocument&&_b(S.ownerDocument.documentElement,S)){if(U!==null&&yg(S)){var Y=U.start,ae=U.end;if(ae===void 0&&(ae=Y),"selectionStart"in S)S.selectionStart=Y,S.selectionEnd=Math.min(ae,S.value.length);else{var ue=S.ownerDocument||document,X=ue&&ue.defaultView||window;if(X.getSelection){var ee=X.getSelection(),Ee=S.textContent.length,Pe=Math.min(U.start,Ee),St=U.end===void 0?Pe:Math.min(U.end,Ee);!ee.extend&&Pe>St&&(_=St,St=Pe,Pe=_);var $=wb(S,Pe),H=wb(S,St);if($&&H&&(ee.rangeCount!==1||ee.anchorNode!==$.node||ee.anchorOffset!==$.offset||ee.focusNode!==H.node||ee.focusOffset!==H.offset)){var W=ue.createRange();W.setStart($.node,$.offset),ee.removeAllRanges(),Pe>St?(ee.addRange(W),ee.extend(H.node,H.offset)):(W.setEnd(H.node,H.offset),ee.addRange(W))}}}}for(ue=[],ee=S;ee=ee.parentNode;)ee.nodeType===1&&ue.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ue.length;S++){var oe=ue[S];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}tf=!!Fp,Gp=Fp=null}finally{ft=m,ie.p=u,P.T=l}}r.current=i,fn=2}}function M1(){if(fn===2){fn=0;var r=aa,i=Ml,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=P.T,P.T=null;var u=ie.p;ie.p=2;var m=ft;ft|=4;try{d1(r,i.alternate,i)}finally{ft=m,ie.p=u,P.T=l}}fn=3}}function V1(){if(fn===4||fn===3){fn=0,sl();var r=aa,i=Ml,l=yi,u=T1;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?fn=5:(fn=0,Ml=aa=null,U1(r,r.pendingLanes));var m=r.pendingLanes;if(m===0&&(ia=null),Ms(l),i=i.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(gs,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=P.T,m=ie.p,ie.p=2,P.T=null;try{for(var y=r.onRecoverableError,_=0;_<u.length;_++){var S=u[_];y(S.value,{componentStack:S.stack})}}finally{P.T=i,ie.p=m}}(yi&3)!==0&&qh(),Br(r),m=r.pendingLanes,(l&261930)!==0&&(m&42)!==0?r===jp?Iu++:(Iu=0,jp=r):Iu=0,Ru(0)}}function U1(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,du(i)))}function qh(){return L1(),M1(),V1(),B1()}function B1(){if(fn!==5)return!1;var r=aa,i=Ip;Ip=0;var l=Ms(yi),u=P.T,m=ie.p;try{ie.p=32>l?32:l,P.T=null,l=Rp,Rp=null;var y=aa,_=yi;if(fn=0,Ml=aa=null,yi=0,(ft&6)!==0)throw Error(s(331));var S=ft;if(ft|=4,_1(y.current),v1(y,y.current,_,l),ft=S,Ru(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(gs,y)}catch{}return!0}finally{ie.p=m,P.T=u,U1(r,i)}}function z1(r,i,l){i=Fs(l,i),i=up(r.stateNode,i,2),r=Zi(r,i,2),r!==null&&(Nr(r,2),Br(r))}function vt(r,i,l){if(r.tag===3)z1(r,r,l);else for(;i!==null;){if(i.tag===3){z1(i,r,l);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ia===null||!ia.has(u))){r=Fs(l,r),l=Hw(2),u=Zi(i,l,2),u!==null&&(qw(l,u,i,r),Nr(u,2),Br(u));break}}i=i.return}}function Pp(r,i,l){var u=r.pingCache;if(u===null){u=r.pingCache=new ZA;var m=new Set;u.set(i,m)}else m=u.get(i),m===void 0&&(m=new Set,u.set(i,m));m.has(l)||(Np=!0,m.add(l),r=rN.bind(null,r,i,l),i.then(r,r))}function rN(r,i,l){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,Ct===r&&(Ze&l)===l&&(Kt===4||Kt===3&&(Ze&62914560)===Ze&&300>En()-Mh?(ft&2)===0&&Vl(r,0):Cp|=l,Ll===Ze&&(Ll=0)),Br(r)}function H1(r,i){i===0&&(i=il()),r=ho(r,i),r!==null&&(Nr(r,i),Br(r))}function iN(r){var i=r.memoizedState,l=0;i!==null&&(l=i.retryLane),H1(r,l)}function aN(r,i){var l=0;switch(r.tag){case 31:case 13:var u=r.stateNode,m=r.memoizedState;m!==null&&(l=m.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),H1(r,l)}function oN(r,i){return Ht(r,i)}var $h=null,Bl=null,Lp=!1,Fh=!1,Mp=!1,la=0;function Br(r){r!==Bl&&r.next===null&&(Bl===null?$h=Bl=r:Bl=Bl.next=r),Fh=!0,Lp||(Lp=!0,cN())}function Ru(r,i){if(!Mp&&Fh){Mp=!0;do for(var l=!1,u=$h;u!==null;){if(r!==0){var m=u.pendingLanes;if(m===0)var y=0;else{var _=u.suspendedLanes,S=u.pingedLanes;y=(1<<31-Dt(42|r)+1)-1,y&=m&~(_&~S),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,G1(u,y))}else y=Ze,y=Ps(u,u===Ct?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Gn(u,y)||(l=!0,G1(u,y));u=u.next}while(l);Mp=!1}}function lN(){q1()}function q1(){Fh=Lp=!1;var r=0;la!==0&&bN()&&(r=la);for(var i=En(),l=null,u=$h;u!==null;){var m=u.next,y=$1(u,i);y===0?(u.next=null,l===null?$h=m:l.next=m,m===null&&(Bl=l)):(l=u,(r!==0||(y&3)!==0)&&(Fh=!0)),u=m}fn!==0&&fn!==5||Ru(r),la!==0&&(la=0)}function $1(r,i){for(var l=r.suspendedLanes,u=r.pingedLanes,m=r.expirationTimes,y=r.pendingLanes&-62914561;0<y;){var _=31-Dt(y),S=1<<_,U=m[_];U===-1?((S&l)===0||(S&u)!==0)&&(m[_]=ir(S,i)):U<=i&&(r.expiredLanes|=S),y&=~S}if(i=Ct,l=Ze,l=Ps(r,r===i?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,l===0||r===i&&(yt===2||yt===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&tr(u),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||Gn(r,l)){if(i=l&-l,i===r.callbackPriority)return i;switch(u!==null&&tr(u),Ms(l)){case 2:case 8:l=Ka;break;case 32:l=sr;break;case 268435456:l=Qa;break;default:l=sr}return u=F1.bind(null,r),l=Ht(l,u),r.callbackPriority=i,r.callbackNode=l,i}return u!==null&&u!==null&&tr(u),r.callbackPriority=2,r.callbackNode=null,2}function F1(r,i){if(fn!==0&&fn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(qh()&&r.callbackNode!==l)return null;var u=Ze;return u=Ps(r,r===Ct?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(A1(r,u,i),$1(r,En()),r.callbackNode!=null&&r.callbackNode===l?F1.bind(null,r):null)}function G1(r,i){if(qh())return null;A1(r,i,!0)}function cN(){_N(function(){(ft&6)!==0?Ht(nr,lN):q1()})}function Vp(){if(la===0){var r=Sl;r===0&&(r=On,On<<=1,(On&261888)===0&&(On=256)),la=r}return la}function K1(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ul(""+r)}function Q1(r,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,r.id&&l.setAttribute("form",r.id),i.parentNode.insertBefore(l,i),r=new FormData(r),l.parentNode.removeChild(l),r}function uN(r,i,l,u,m){if(i==="submit"&&l&&l.stateNode===m){var y=K1((m[nn]||null).action),_=u.submitter;_&&(i=(i=_[nn]||null)?K1(i.formAction):_.getAttribute("formAction"),i!==null&&(y=i,_=null));var S=new Or("action","action",null,u,m);r.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(la!==0){var U=_?Q1(m,_):new FormData(m);rp(l,{pending:!0,data:U,method:m.method,action:y},null,U)}}else typeof y=="function"&&(S.preventDefault(),U=_?Q1(m,_):new FormData(m),rp(l,{pending:!0,data:U,method:m.method,action:y},y,U))},currentTarget:m}]})}}for(var Up=0;Up<_g.length;Up++){var Bp=_g[Up],dN=Bp.toLowerCase(),hN=Bp[0].toUpperCase()+Bp.slice(1);dr(dN,"on"+hN)}dr(Sb,"onAnimationEnd"),dr(Ab,"onAnimationIteration"),dr(Nb,"onAnimationStart"),dr("dblclick","onDoubleClick"),dr("focusin","onFocus"),dr("focusout","onBlur"),dr(CA,"onTransitionRun"),dr(kA,"onTransitionStart"),dr(IA,"onTransitionCancel"),dr(Cb,"onTransitionEnd"),Ln("onMouseEnter",["mouseout","mouseover"]),Ln("onMouseLeave",["mouseout","mouseover"]),Ln("onPointerEnter",["pointerout","pointerover"]),Ln("onPointerLeave",["pointerout","pointerover"]),Pn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ju));function W1(r,i){i=(i&4)!==0;for(var l=0;l<r.length;l++){var u=r[l],m=u.event;u=u.listeners;e:{var y=void 0;if(i)for(var _=u.length-1;0<=_;_--){var S=u[_],U=S.instance,Y=S.currentTarget;if(S=S.listener,U!==y&&m.isPropagationStopped())break e;y=S,m.currentTarget=Y;try{y(m)}catch(ae){ah(ae)}m.currentTarget=null,y=U}else for(_=0;_<u.length;_++){if(S=u[_],U=S.instance,Y=S.currentTarget,S=S.listener,U!==y&&m.isPropagationStopped())break e;y=S,m.currentTarget=Y;try{y(m)}catch(ae){ah(ae)}m.currentTarget=null,y=U}}}}function Je(r,i){var l=i[Di];l===void 0&&(l=i[Di]=new Set);var u=r+"__bubble";l.has(u)||(Y1(i,r,2,!1),l.add(u))}function zp(r,i,l){var u=0;i&&(u|=4),Y1(l,r,u,i)}var Gh="_reactListening"+Math.random().toString(36).slice(2);function Hp(r){if(!r[Gh]){r[Gh]=!0,Za.forEach(function(l){l!=="selectionchange"&&(fN.has(l)||zp(l,!1,r),zp(l,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Gh]||(i[Gh]=!0,zp("selectionchange",!1,i))}}function Y1(r,i,l,u){switch(S2(i)){case 2:var m=zN;break;case 8:m=HN;break;default:m=s0}l=m.bind(null,i,l,r),m=void 0,!so||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),u?m!==void 0?r.addEventListener(i,l,{capture:!0,passive:m}):r.addEventListener(i,l,!0):m!==void 0?r.addEventListener(i,l,{passive:m}):r.addEventListener(i,l,!1)}function qp(r,i,l,u,m){var y=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var S=u.stateNode.containerInfo;if(S===m)break;if(_===4)for(_=u.return;_!==null;){var U=_.tag;if((U===3||U===4)&&_.stateNode.containerInfo===m)return;_=_.return}for(;S!==null;){if(_=Bs(S),_===null)return;if(U=_.tag,U===5||U===6||U===26||U===27){u=y=_;continue e}S=S.parentNode}}u=u.return}qi(function(){var Y=y,ae=zs(l),ue=[];e:{var X=kb.get(r);if(X!==void 0){var ee=Or,Ee=r;switch(r){case"keypress":if(io(l)===0)break e;case"keydown":case"keyup":ee=sh;break;case"focusin":Ee="focus",ee=oo;break;case"focusout":Ee="blur",ee=oo;break;case"beforeblur":case"afterblur":ee=oo;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=su;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Qd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=b;break;case Sb:case Ab:case Nb:ee=Yd;break;case Cb:ee=A;break;case"scroll":case"scrollend":ee=nu;break;case"wheel":ee=J;break;case"copy":case"cut":case"paste":ee=Xd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=si;break;case"toggle":case"beforetoggle":ee=Ge}var Pe=(i&4)!==0,St=!Pe&&(r==="scroll"||r==="scrollend"),$=Pe?X!==null?X+"Capture":null:X;Pe=[];for(var H=Y,W;H!==null;){var oe=H;if(W=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||W===null||$===null||(oe=or(H,$),oe!=null&&Pe.push(Ou(H,oe,W))),St)break;H=H.return}0<Pe.length&&(X=new ee(X,Ee,null,l,ae),ue.push({event:X,listeners:Pe}))}}if((i&7)===0){e:{if(X=r==="mouseover"||r==="pointerover",ee=r==="mouseout"||r==="pointerout",X&&l!==Zc&&(Ee=l.relatedTarget||l.fromElement)&&(Bs(Ee)||Ee[Vs]))break e;if((ee||X)&&(X=ae.window===ae?ae:(X=ae.ownerDocument)?X.defaultView||X.parentWindow:window,ee?(Ee=l.relatedTarget||l.toElement,ee=Y,Ee=Ee?Bs(Ee):null,Ee!==null&&(St=o(Ee),Pe=Ee.tag,Ee!==St||Pe!==5&&Pe!==27&&Pe!==6)&&(Ee=null)):(ee=null,Ee=Y),ee!==Ee)){if(Pe=su,oe="onMouseLeave",$="onMouseEnter",H="mouse",(r==="pointerout"||r==="pointerover")&&(Pe=si,oe="onPointerLeave",$="onPointerEnter",H="pointer"),St=ee==null?X:Dn(ee),W=Ee==null?X:Dn(Ee),X=new Pe(oe,H+"leave",ee,l,ae),X.target=St,X.relatedTarget=W,oe=null,Bs(ae)===Y&&(Pe=new Pe($,H+"enter",Ee,l,ae),Pe.target=W,Pe.relatedTarget=St,oe=Pe),St=oe,ee&&Ee)t:{for(Pe=mN,$=ee,H=Ee,W=0,oe=$;oe;oe=Pe(oe))W++;oe=0;for(var Oe=H;Oe;Oe=Pe(Oe))oe++;for(;0<W-oe;)$=Pe($),W--;for(;0<oe-W;)H=Pe(H),oe--;for(;W--;){if($===H||H!==null&&$===H.alternate){Pe=$;break t}$=Pe($),H=Pe(H)}Pe=null}else Pe=null;ee!==null&&X1(ue,X,ee,Pe,!1),Ee!==null&&St!==null&&X1(ue,St,Ee,Pe,!0)}}e:{if(X=Y?Dn(Y):window,ee=X.nodeName&&X.nodeName.toLowerCase(),ee==="select"||ee==="input"&&X.type==="file")var lt=mb;else if(hb(X))if(gb)lt=SA;else{lt=EA;var Se=xA}else ee=X.nodeName,!ee||ee.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?Y&&cl(Y.elementType)&&(lt=mb):lt=TA;if(lt&&(lt=lt(r,Y))){fb(ue,lt,l,ae);break e}Se&&Se(r,X,Y),r==="focusout"&&Y&&X.type==="number"&&Y.memoizedProps.value!=null&&Yc(X,"number",X.value)}switch(Se=Y?Dn(Y):window,r){case"focusin":(hb(Se)||Se.contentEditable==="true")&&(yl=Se,vg=Y,lu=null);break;case"focusout":lu=vg=yl=null;break;case"mousedown":bg=!0;break;case"contextmenu":case"mouseup":case"dragend":bg=!1,Eb(ue,l,ae);break;case"selectionchange":if(NA)break;case"keydown":case"keyup":Eb(ue,l,ae)}var Qe;if(ht)e:{switch(r){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else pl?lo(r,l)&&(et="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(et="onCompositionStart");et&&(Lr&&l.locale!=="ko"&&(pl||et!=="onCompositionStart"?et==="onCompositionEnd"&&pl&&(Qe=tu()):(jr=ae,eu="value"in jr?jr.value:jr.textContent,pl=!0)),Se=Kh(Y,et),0<Se.length&&(et=new Pr(et,r,null,l,ae),ue.push({event:et,listeners:Se}),Qe?et.data=Qe:(Qe=gl(l),Qe!==null&&(et.data=Qe)))),(Qe=qs?vA(r,l):bA(r,l))&&(et=Kh(Y,"onBeforeInput"),0<et.length&&(Se=new Pr("onBeforeInput","beforeinput",null,l,ae),ue.push({event:Se,listeners:et}),Se.data=Qe)),uN(ue,r,Y,l,ae)}W1(ue,i)})}function Ou(r,i,l){return{instance:r,listener:i,currentTarget:l}}function Kh(r,i){for(var l=i+"Capture",u=[];r!==null;){var m=r,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=or(r,l),m!=null&&u.unshift(Ou(r,m,y)),m=or(r,i),m!=null&&u.push(Ou(r,m,y))),r.tag===3)return u;r=r.return}return[]}function mN(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function X1(r,i,l,u,m){for(var y=i._reactName,_=[];l!==null&&l!==u;){var S=l,U=S.alternate,Y=S.stateNode;if(S=S.tag,U!==null&&U===u)break;S!==5&&S!==26&&S!==27||Y===null||(U=Y,m?(Y=or(l,y),Y!=null&&_.unshift(Ou(l,Y,U))):m||(Y=or(l,y),Y!=null&&_.push(Ou(l,Y,U)))),l=l.return}_.length!==0&&r.push({event:i,listeners:_})}var gN=/\r\n?/g,pN=/\u0000|\uFFFD/g;function J1(r){return(typeof r=="string"?r:""+r).replace(gN,`
`).replace(pN,"")}function Z1(r,i){return i=J1(i),J1(r)===i}function Tt(r,i,l,u,m,y){switch(l){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||rs(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&rs(r,""+u);break;case"className":Re(r,"class",u);break;case"tabIndex":Re(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Re(r,l,u);break;case"style":Jc(r,u,y);break;case"data":if(i!=="object"){Re(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||l!=="href")){r.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(l);break}u=ul(""+u),r.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(i!=="input"&&Tt(r,i,"name",m.name,m,null),Tt(r,i,"formEncType",m.formEncType,m,null),Tt(r,i,"formMethod",m.formMethod,m,null),Tt(r,i,"formTarget",m.formTarget,m,null)):(Tt(r,i,"encType",m.encType,m,null),Tt(r,i,"method",m.method,m,null),Tt(r,i,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(l);break}u=ul(""+u),r.setAttribute(l,u);break;case"onClick":u!=null&&(r.onclick=ar);break;case"onScroll":u!=null&&Je("scroll",r);break;case"onScrollEnd":u!=null&&Je("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(l=u.__html,l!=null){if(m.children!=null)throw Error(s(60));r.innerHTML=l}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}l=ul(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,""+u):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":u===!0?r.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,u):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(l,u):r.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(l):r.setAttribute(l,u);break;case"popover":Je("beforetoggle",r),Je("toggle",r),Ie(r,"popover",u);break;case"xlinkActuate":pe(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":pe(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":pe(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":pe(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":pe(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":pe(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":pe(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":pe(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":pe(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ie(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Kd.get(l)||l,Ie(r,l,u))}}function $p(r,i,l,u,m,y){switch(l){case"style":Jc(r,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(l=u.__html,l!=null){if(m.children!=null)throw Error(s(60));r.innerHTML=l}}break;case"children":typeof u=="string"?rs(r,u):(typeof u=="number"||typeof u=="bigint")&&rs(r,""+u);break;case"onScroll":u!=null&&Je("scroll",r);break;case"onScrollEnd":u!=null&&Je("scrollend",r);break;case"onClick":u!=null&&(r.onclick=ar);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Li.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),i=l.slice(2,m?l.length-7:void 0),y=r[nn]||null,y=y!=null?y[l]:null,typeof y=="function"&&r.removeEventListener(i,y,m),typeof u=="function")){typeof y!="function"&&y!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(i,u,m);break e}l in r?r[l]=u:u===!0?r.setAttribute(l,""):Ie(r,l,u)}}}function Cn(r,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",r),Je("load",r);var u=!1,m=!1,y;for(y in l)if(l.hasOwnProperty(y)){var _=l[y];if(_!=null)switch(y){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Tt(r,i,y,_,l,null)}}m&&Tt(r,i,"srcSet",l.srcSet,l,null),u&&Tt(r,i,"src",l.src,l,null);return;case"input":Je("invalid",r);var S=y=_=m=null,U=null,Y=null;for(u in l)if(l.hasOwnProperty(u)){var ae=l[u];if(ae!=null)switch(u){case"name":m=ae;break;case"type":_=ae;break;case"checked":U=ae;break;case"defaultChecked":Y=ae;break;case"value":y=ae;break;case"defaultValue":S=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,i));break;default:Tt(r,i,u,ae,l,null)}}$d(r,y,S,U,Y,_,m,!1);return;case"select":Je("invalid",r),u=_=y=null;for(m in l)if(l.hasOwnProperty(m)&&(S=l[m],S!=null))switch(m){case"value":y=S;break;case"defaultValue":_=S;break;case"multiple":u=S;default:Tt(r,i,m,S,l,null)}i=y,l=_,r.multiple=!!u,i!=null?Ui(r,!!u,i,!1):l!=null&&Ui(r,!!u,l,!0);return;case"textarea":Je("invalid",r),y=m=u=null;for(_ in l)if(l.hasOwnProperty(_)&&(S=l[_],S!=null))switch(_){case"value":u=S;break;case"defaultValue":m=S;break;case"children":y=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:Tt(r,i,_,S,l,null)}Bi(r,u,m,y);return;case"option":for(U in l)if(l.hasOwnProperty(U)&&(u=l[U],u!=null))switch(U){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Tt(r,i,U,u,l,null)}return;case"dialog":Je("beforetoggle",r),Je("toggle",r),Je("cancel",r),Je("close",r);break;case"iframe":case"object":Je("load",r);break;case"video":case"audio":for(u=0;u<ju.length;u++)Je(ju[u],r);break;case"image":Je("error",r),Je("load",r);break;case"details":Je("toggle",r);break;case"embed":case"source":case"link":Je("error",r),Je("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in l)if(l.hasOwnProperty(Y)&&(u=l[Y],u!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Tt(r,i,Y,u,l,null)}return;default:if(cl(i)){for(ae in l)l.hasOwnProperty(ae)&&(u=l[ae],u!==void 0&&$p(r,i,ae,u,l,void 0));return}}for(S in l)l.hasOwnProperty(S)&&(u=l[S],u!=null&&Tt(r,i,S,u,l,null))}function yN(r,i,l,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,_=null,S=null,U=null,Y=null,ae=null;for(ee in l){var ue=l[ee];if(l.hasOwnProperty(ee)&&ue!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":U=ue;default:u.hasOwnProperty(ee)||Tt(r,i,ee,null,u,ue)}}for(var X in u){var ee=u[X];if(ue=l[X],u.hasOwnProperty(X)&&(ee!=null||ue!=null))switch(X){case"type":y=ee;break;case"name":m=ee;break;case"checked":Y=ee;break;case"defaultChecked":ae=ee;break;case"value":_=ee;break;case"defaultValue":S=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,i));break;default:ee!==ue&&Tt(r,i,X,ee,u,ue)}}ll(r,_,S,U,Y,ae,y,m);return;case"select":ee=_=S=X=null;for(y in l)if(U=l[y],l.hasOwnProperty(y)&&U!=null)switch(y){case"value":break;case"multiple":ee=U;default:u.hasOwnProperty(y)||Tt(r,i,y,null,u,U)}for(m in u)if(y=u[m],U=l[m],u.hasOwnProperty(m)&&(y!=null||U!=null))switch(m){case"value":X=y;break;case"defaultValue":S=y;break;case"multiple":_=y;default:y!==U&&Tt(r,i,m,y,u,U)}i=S,l=_,u=ee,X!=null?Ui(r,!!l,X,!1):!!u!=!!l&&(i!=null?Ui(r,!!l,i,!0):Ui(r,!!l,l?[]:"",!1));return;case"textarea":ee=X=null;for(S in l)if(m=l[S],l.hasOwnProperty(S)&&m!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Tt(r,i,S,null,u,m)}for(_ in u)if(m=u[_],y=l[_],u.hasOwnProperty(_)&&(m!=null||y!=null))switch(_){case"value":X=m;break;case"defaultValue":ee=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==y&&Tt(r,i,_,m,u,y)}Fd(r,X,ee);return;case"option":for(var Ee in l)if(X=l[Ee],l.hasOwnProperty(Ee)&&X!=null&&!u.hasOwnProperty(Ee))switch(Ee){case"selected":r.selected=!1;break;default:Tt(r,i,Ee,null,u,X)}for(U in u)if(X=u[U],ee=l[U],u.hasOwnProperty(U)&&X!==ee&&(X!=null||ee!=null))switch(U){case"selected":r.selected=X&&typeof X!="function"&&typeof X!="symbol";break;default:Tt(r,i,U,X,u,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in l)X=l[Pe],l.hasOwnProperty(Pe)&&X!=null&&!u.hasOwnProperty(Pe)&&Tt(r,i,Pe,null,u,X);for(Y in u)if(X=u[Y],ee=l[Y],u.hasOwnProperty(Y)&&X!==ee&&(X!=null||ee!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,i));break;default:Tt(r,i,Y,X,u,ee)}return;default:if(cl(i)){for(var St in l)X=l[St],l.hasOwnProperty(St)&&X!==void 0&&!u.hasOwnProperty(St)&&$p(r,i,St,void 0,u,X);for(ae in u)X=u[ae],ee=l[ae],!u.hasOwnProperty(ae)||X===ee||X===void 0&&ee===void 0||$p(r,i,ae,X,u,ee);return}}for(var $ in l)X=l[$],l.hasOwnProperty($)&&X!=null&&!u.hasOwnProperty($)&&Tt(r,i,$,null,u,X);for(ue in u)X=u[ue],ee=l[ue],!u.hasOwnProperty(ue)||X===ee||X==null&&ee==null||Tt(r,i,ue,X,u,ee)}function e2(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vN(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,l=performance.getEntriesByType("resource"),u=0;u<l.length;u++){var m=l[u],y=m.transferSize,_=m.initiatorType,S=m.duration;if(y&&S&&e2(_)){for(_=0,S=m.responseEnd,u+=1;u<l.length;u++){var U=l[u],Y=U.startTime;if(Y>S)break;var ae=U.transferSize,ue=U.initiatorType;ae&&e2(ue)&&(U=U.responseEnd,_+=ae*(U<S?1:(S-Y)/(U-Y)))}if(--u,i+=8*(y+_)/(m.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Fp=null,Gp=null;function Qh(r){return r.nodeType===9?r:r.ownerDocument}function t2(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function n2(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function Kp(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Qp=null;function bN(){var r=window.event;return r&&r.type==="popstate"?r===Qp?!1:(Qp=r,!0):(Qp=null,!1)}var s2=typeof setTimeout=="function"?setTimeout:void 0,wN=typeof clearTimeout=="function"?clearTimeout:void 0,r2=typeof Promise=="function"?Promise:void 0,_N=typeof queueMicrotask=="function"?queueMicrotask:typeof r2<"u"?function(r){return r2.resolve(null).then(r).catch(xN)}:s2;function xN(r){setTimeout(function(){throw r})}function ca(r){return r==="head"}function i2(r,i){var l=i,u=0;do{var m=l.nextSibling;if(r.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"||l==="/&"){if(u===0){r.removeChild(m),$l(i);return}u--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")u++;else if(l==="html")Du(r.ownerDocument.documentElement);else if(l==="head"){l=r.ownerDocument.head,Du(l);for(var y=l.firstChild;y;){var _=y.nextSibling,S=y.nodeName;y[Us]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&y.rel.toLowerCase()==="stylesheet"||l.removeChild(y),y=_}}else l==="body"&&Du(r.ownerDocument.body);l=m}while(l);$l(i)}function a2(r,i){var l=r;r=0;do{var u=l.nextSibling;if(l.nodeType===1?i?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(i?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),u&&u.nodeType===8)if(l=u.data,l==="/$"){if(r===0)break;r--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||r++;l=u}while(l)}function Wp(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Wp(l),Pi(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function EN(r,i,l,u){for(;r.nodeType===1;){var m=l;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Us])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(y=r.getAttribute("rel"),y==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(y!==m.rel||r.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||r.getAttribute("title")!==(m.title==null?null:m.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(y=r.getAttribute("src"),(y!==(m.src==null?null:m.src)||r.getAttribute("type")!==(m.type==null?null:m.type)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&r.getAttribute("name")===y)return r}else return r;if(r=Ys(r.nextSibling),r===null)break}return null}function TN(r,i,l){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=Ys(r.nextSibling),r===null))return null;return r}function o2(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=Ys(r.nextSibling),r===null))return null;return r}function Yp(r){return r.data==="$?"||r.data==="$~"}function Xp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function SN(r,i){var l=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||l.readyState!=="loading")i();else{var u=function(){i(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Ys(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var Jp=null;function l2(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"||l==="/&"){if(i===0)return Ys(r.nextSibling);i--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||i++}r=r.nextSibling}return null}function c2(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(i===0)return r;i--}else l!=="/$"&&l!=="/&"||i++}r=r.previousSibling}return null}function u2(r,i,l){switch(i=Qh(l),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Du(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);Pi(r)}var Xs=new Map,d2=new Set;function Wh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var vi=ie.d;ie.d={f:AN,r:NN,D:CN,C:kN,L:IN,m:RN,X:ON,S:jN,M:DN};function AN(){var r=vi.f(),i=Bh();return r||i}function NN(r){var i=ts(r);i!==null&&i.tag===5&&i.type==="form"?Cw(i):vi.r(r)}var zl=typeof document>"u"?null:document;function h2(r,i,l){var u=zl;if(u&&typeof i=="string"&&i){var m=ss(i);m='link[rel="'+r+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),d2.has(m)||(d2.add(m),r={rel:r,crossOrigin:l,href:i},u.querySelector(m)===null&&(i=u.createElement("link"),Cn(i,"link",r),$t(i),u.head.appendChild(i)))}}function CN(r){vi.D(r),h2("dns-prefetch",r,null)}function kN(r,i){vi.C(r,i),h2("preconnect",r,i)}function IN(r,i,l){vi.L(r,i,l);var u=zl;if(u&&r&&i){var m='link[rel="preload"][as="'+ss(i)+'"]';i==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+ss(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+ss(l.imageSizes)+'"]')):m+='[href="'+ss(r)+'"]';var y=m;switch(i){case"style":y=Hl(r);break;case"script":y=ql(r)}Xs.has(y)||(r=w({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:r,as:i},l),Xs.set(y,r),u.querySelector(m)!==null||i==="style"&&u.querySelector(Pu(y))||i==="script"&&u.querySelector(Lu(y))||(i=u.createElement("link"),Cn(i,"link",r),$t(i),u.head.appendChild(i)))}}function RN(r,i){vi.m(r,i);var l=zl;if(l&&r){var u=i&&typeof i.as=="string"?i.as:"script",m='link[rel="modulepreload"][as="'+ss(u)+'"][href="'+ss(r)+'"]',y=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=ql(r)}if(!Xs.has(y)&&(r=w({rel:"modulepreload",href:r},i),Xs.set(y,r),l.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Lu(y)))return}u=l.createElement("link"),Cn(u,"link",r),$t(u),l.head.appendChild(u)}}}function jN(r,i,l){vi.S(r,i,l);var u=zl;if(u&&r){var m=ns(u).hoistableStyles,y=Hl(r);i=i||"default";var _=m.get(y);if(!_){var S={loading:0,preload:null};if(_=u.querySelector(Pu(y)))S.loading=5;else{r=w({rel:"stylesheet",href:r,"data-precedence":i},l),(l=Xs.get(y))&&Zp(r,l);var U=_=u.createElement("link");$t(U),Cn(U,"link",r),U._p=new Promise(function(Y,ae){U.onload=Y,U.onerror=ae}),U.addEventListener("load",function(){S.loading|=1}),U.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Yh(_,i,u)}_={type:"stylesheet",instance:_,count:1,state:S},m.set(y,_)}}}function ON(r,i){vi.X(r,i);var l=zl;if(l&&r){var u=ns(l).hoistableScripts,m=ql(r),y=u.get(m);y||(y=l.querySelector(Lu(m)),y||(r=w({src:r,async:!0},i),(i=Xs.get(m))&&e0(r,i),y=l.createElement("script"),$t(y),Cn(y,"link",r),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function DN(r,i){vi.M(r,i);var l=zl;if(l&&r){var u=ns(l).hoistableScripts,m=ql(r),y=u.get(m);y||(y=l.querySelector(Lu(m)),y||(r=w({src:r,async:!0,type:"module"},i),(i=Xs.get(m))&&e0(r,i),y=l.createElement("script"),$t(y),Cn(y,"link",r),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(m,y))}}function f2(r,i,l,u){var m=(m=_e.current)?Wh(m):null;if(!m)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=Hl(l.href),l=ns(m).hoistableStyles,u=l.get(i),u||(u={type:"style",instance:null,count:0,state:null},l.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=Hl(l.href);var y=ns(m).hoistableStyles,_=y.get(r);if(_||(m=m.ownerDocument||m,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(r,_),(y=m.querySelector(Pu(r)))&&!y._p&&(_.instance=y,_.state.loading=5),Xs.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Xs.set(r,l),y||PN(m,r,l,_.state))),i&&u===null)throw Error(s(528,""));return _}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ql(l),l=ns(m).hoistableScripts,u=l.get(i),u||(u={type:"script",instance:null,count:0,state:null},l.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function Hl(r){return'href="'+ss(r)+'"'}function Pu(r){return'link[rel="stylesheet"]['+r+"]"}function m2(r){return w({},r,{"data-precedence":r.precedence,precedence:null})}function PN(r,i,l,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Cn(i,"link",l),$t(i),r.head.appendChild(i))}function ql(r){return'[src="'+ss(r)+'"]'}function Lu(r){return"script[async]"+r}function g2(r,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+ss(l.href)+'"]');if(u)return i.instance=u,$t(u),u;var m=w({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),$t(u),Cn(u,"style",m),Yh(u,l.precedence,r),i.instance=u;case"stylesheet":m=Hl(l.href);var y=r.querySelector(Pu(m));if(y)return i.state.loading|=4,i.instance=y,$t(y),y;u=m2(l),(m=Xs.get(m))&&Zp(u,m),y=(r.ownerDocument||r).createElement("link"),$t(y);var _=y;return _._p=new Promise(function(S,U){_.onload=S,_.onerror=U}),Cn(y,"link",u),i.state.loading|=4,Yh(y,l.precedence,r),i.instance=y;case"script":return y=ql(l.src),(m=r.querySelector(Lu(y)))?(i.instance=m,$t(m),m):(u=l,(m=Xs.get(y))&&(u=w({},l),e0(u,m)),r=r.ownerDocument||r,m=r.createElement("script"),$t(m),Cn(m,"link",u),r.head.appendChild(m),i.instance=m);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Yh(u,l.precedence,r));return i.instance}function Yh(r,i,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,y=m,_=0;_<u.length;_++){var S=u[_];if(S.dataset.precedence===i)y=S;else if(y!==m)break}y?y.parentNode.insertBefore(r,y.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(r,i.firstChild))}function Zp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function e0(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var Xh=null;function p2(r,i,l){if(Xh===null){var u=new Map,m=Xh=new Map;m.set(l,u)}else m=Xh,u=m.get(l),u||(u=new Map,m.set(l,u));if(u.has(r))return u;for(u.set(r,null),l=l.getElementsByTagName(r),m=0;m<l.length;m++){var y=l[m];if(!(y[Us]||y[qt]||r==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var _=y.getAttribute(i)||"";_=r+_;var S=u.get(_);S?S.push(y):u.set(_,[y])}}return u}function y2(r,i,l){r=r.ownerDocument||r,r.head.insertBefore(l,i==="title"?r.querySelector("head > title"):null)}function LN(r,i,l){if(l===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function v2(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function MN(r,i,l,u){if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var m=Hl(u.href),y=i.querySelector(Pu(m));if(y){i=y._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=Jh.bind(r),i.then(r,r)),l.state.loading|=4,l.instance=y,$t(y);return}y=i.ownerDocument||i,u=m2(u),(m=Xs.get(m))&&Zp(u,m),y=y.createElement("link"),$t(y);var _=y;_._p=new Promise(function(S,U){_.onload=S,_.onerror=U}),Cn(y,"link",u),l.instance=y}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(r.count++,l=Jh.bind(r),i.addEventListener("load",l),i.addEventListener("error",l))}}var t0=0;function VN(r,i){return r.stylesheets&&r.count===0&&ef(r,r.stylesheets),0<r.count||0<r.imgCount?function(l){var u=setTimeout(function(){if(r.stylesheets&&ef(r,r.stylesheets),r.unsuspend){var y=r.unsuspend;r.unsuspend=null,y()}},6e4+i);0<r.imgBytes&&t0===0&&(t0=62500*vN());var m=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&ef(r,r.stylesheets),r.unsuspend)){var y=r.unsuspend;r.unsuspend=null,y()}},(r.imgBytes>t0?50:800)+i);return r.unsuspend=l,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function Jh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ef(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Zh=null;function ef(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Zh=new Map,i.forEach(UN,r),Zh=null,Jh.call(r))}function UN(r,i){if(!(i.state.loading&4)){var l=Zh.get(r);if(l)var u=l.get(null);else{l=new Map,Zh.set(r,l);for(var m=r.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var _=m[y];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(l.set(_.dataset.precedence,_),u=_)}u&&l.set(null,u)}m=i.instance,_=m.getAttribute("data-precedence"),y=l.get(_)||u,y===u&&l.set(null,m),l.set(_,m),this.count++,u=Jh.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),y?y.parentNode.insertBefore(m,y.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(m,r.firstChild)),i.state.loading|=4}}var Mu={$$typeof:G,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function BN(r,i,l,u,m,y,_,S,U){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kn(0),this.hiddenUpdates=Kn(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function b2(r,i,l,u,m,y,_,S,U,Y,ae,ue){return r=new BN(r,i,l,_,U,Y,ae,ue,S),i=1,y===!0&&(i|=24),y=vs(3,null,null,i),r.current=y,y.stateNode=r,i=Dg(),i.refCount++,r.pooledCache=i,i.refCount++,y.memoizedState={element:u,isDehydrated:l,cache:i},Vg(y),r}function w2(r){return r?(r=wl,r):wl}function _2(r,i,l,u,m,y){m=w2(m),u.context===null?u.context=m:u.pendingContext=m,u=Ji(i),u.payload={element:l},y=y===void 0?null:y,y!==null&&(u.callback=y),l=Zi(r,u,i),l!==null&&(cs(l,r,i),gu(l,r,i))}function x2(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<i?l:i}}function n0(r,i){x2(r,i),(r=r.alternate)&&x2(r,i)}function E2(r){if(r.tag===13||r.tag===31){var i=ho(r,67108864);i!==null&&cs(i,r,67108864),n0(r,67108864)}}function T2(r){if(r.tag===13||r.tag===31){var i=Es();i=kr(i);var l=ho(r,i);l!==null&&cs(l,r,i),n0(r,i)}}var tf=!0;function zN(r,i,l,u){var m=P.T;P.T=null;var y=ie.p;try{ie.p=2,s0(r,i,l,u)}finally{ie.p=y,P.T=m}}function HN(r,i,l,u){var m=P.T;P.T=null;var y=ie.p;try{ie.p=8,s0(r,i,l,u)}finally{ie.p=y,P.T=m}}function s0(r,i,l,u){if(tf){var m=r0(u);if(m===null)qp(r,i,u,nf,l),A2(r,u);else if($N(m,r,i,l,u))u.stopPropagation();else if(A2(r,u),i&4&&-1<qN.indexOf(r)){for(;m!==null;){var y=ts(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var _=Ds(y.pendingLanes);if(_!==0){var S=y;for(S.pendingLanes|=2,S.entangledLanes|=2;_;){var U=1<<31-Dt(_);S.entanglements[1]|=U,_&=~U}Br(y),(ft&6)===0&&(Vh=En()+500,Ru(0))}}break;case 31:case 13:S=ho(y,2),S!==null&&cs(S,y,2),Bh(),n0(y,2)}if(y=r0(u),y===null&&qp(r,i,u,nf,l),y===m)break;m=y}m!==null&&u.stopPropagation()}else qp(r,i,u,null,l)}}function r0(r){return r=zs(r),i0(r)}var nf=null;function i0(r){if(nf=null,r=Bs(r),r!==null){var i=o(r);if(i===null)r=null;else{var l=i.tag;if(l===13){if(r=c(i),r!==null)return r;r=null}else if(l===31){if(r=h(i),r!==null)return r;r=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return nf=r,null}function S2(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Os()){case nr:return 2;case Ka:return 8;case sr:case rl:return 32;case Qa:return 268435456;default:return 32}default:return 32}}var a0=!1,ua=null,da=null,ha=null,Vu=new Map,Uu=new Map,fa=[],qN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function A2(r,i){switch(r){case"focusin":case"focusout":ua=null;break;case"dragenter":case"dragleave":da=null;break;case"mouseover":case"mouseout":ha=null;break;case"pointerover":case"pointerout":Vu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uu.delete(i.pointerId)}}function Bu(r,i,l,u,m,y){return r===null||r.nativeEvent!==y?(r={blockedOn:i,domEventName:l,eventSystemFlags:u,nativeEvent:y,targetContainers:[m]},i!==null&&(i=ts(i),i!==null&&E2(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),r)}function $N(r,i,l,u,m){switch(i){case"focusin":return ua=Bu(ua,r,i,l,u,m),!0;case"dragenter":return da=Bu(da,r,i,l,u,m),!0;case"mouseover":return ha=Bu(ha,r,i,l,u,m),!0;case"pointerover":var y=m.pointerId;return Vu.set(y,Bu(Vu.get(y)||null,r,i,l,u,m)),!0;case"gotpointercapture":return y=m.pointerId,Uu.set(y,Bu(Uu.get(y)||null,r,i,l,u,m)),!0}return!1}function N2(r){var i=Bs(r.target);if(i!==null){var l=o(i);if(l!==null){if(i=l.tag,i===13){if(i=c(l),i!==null){r.blockedOn=i,Qn(r.priority,function(){T2(l)});return}}else if(i===31){if(i=h(l),i!==null){r.blockedOn=i,Qn(r.priority,function(){T2(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function sf(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var l=r0(r.nativeEvent);if(l===null){l=r.nativeEvent;var u=new l.constructor(l.type,l);Zc=u,l.target.dispatchEvent(u),Zc=null}else return i=ts(l),i!==null&&E2(i),r.blockedOn=l,!1;i.shift()}return!0}function C2(r,i,l){sf(r)&&l.delete(i)}function FN(){a0=!1,ua!==null&&sf(ua)&&(ua=null),da!==null&&sf(da)&&(da=null),ha!==null&&sf(ha)&&(ha=null),Vu.forEach(C2),Uu.forEach(C2)}function rf(r,i){r.blockedOn===i&&(r.blockedOn=null,a0||(a0=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,FN)))}var af=null;function k2(r){af!==r&&(af=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){af===r&&(af=null);for(var i=0;i<r.length;i+=3){var l=r[i],u=r[i+1],m=r[i+2];if(typeof u!="function"){if(i0(u||l)===null)continue;break}var y=ts(l);y!==null&&(r.splice(i,3),i-=3,rp(y,{pending:!0,data:m,method:l.method,action:u},u,m))}}))}function $l(r){function i(U){return rf(U,r)}ua!==null&&rf(ua,r),da!==null&&rf(da,r),ha!==null&&rf(ha,r),Vu.forEach(i),Uu.forEach(i);for(var l=0;l<fa.length;l++){var u=fa[l];u.blockedOn===r&&(u.blockedOn=null)}for(;0<fa.length&&(l=fa[0],l.blockedOn===null);)N2(l),l.blockedOn===null&&fa.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var m=l[u],y=l[u+1],_=m[nn]||null;if(typeof y=="function")_||k2(l);else if(_){var S=null;if(y&&y.hasAttribute("formAction")){if(m=y,_=y[nn]||null)S=_.formAction;else if(i0(m)!==null)continue}else S=_.action;typeof S=="function"?l[u+1]=S:(l.splice(u,3),u-=3),k2(l)}}}function I2(){function r(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(_){return m=_})},focusReset:"manual",scroll:"manual"})}function i(){m!==null&&(m(),m=null),u||setTimeout(l,20)}function l(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(l,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),m!==null&&(m(),m=null)}}}function o0(r){this._internalRoot=r}of.prototype.render=o0.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var l=i.current,u=Es();_2(l,u,r,i,null,null)},of.prototype.unmount=o0.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;_2(r.current,2,null,r,null,null),Bh(),i[Vs]=null}};function of(r){this._internalRoot=r}of.prototype.unstable_scheduleHydration=function(r){if(r){var i=Ja();r={blockedOn:null,target:r,priority:i};for(var l=0;l<fa.length&&i!==0&&i<fa[l].priority;l++);fa.splice(l,0,r),l===0&&N2(r)}};var R2=e.version;if(R2!=="19.2.0")throw Error(s(527,R2,"19.2.0"));ie.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=p(i),r=r!==null?v(r):null,r=r===null?null:r.stateNode,r};var GN={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lf.isDisabled&&lf.supportsFiber)try{gs=lf.inject(GN),Qt=lf}catch{}}return Hu.createRoot=function(r,i){if(!a(r))throw Error(s(299));var l=!1,u="",m=Vw,y=Uw,_=Bw;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=b2(r,1,!1,null,null,l,u,null,m,y,_,I2),r[Vs]=i.current,Hp(r),new o0(i)},Hu.hydrateRoot=function(r,i,l){if(!a(r))throw Error(s(299));var u=!1,m="",y=Vw,_=Uw,S=Bw,U=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(_=l.onCaughtError),l.onRecoverableError!==void 0&&(S=l.onRecoverableError),l.formState!==void 0&&(U=l.formState)),i=b2(r,1,!0,i,l??null,u,m,U,y,_,S,I2),i.context=w2(null),l=i.current,u=Es(),u=kr(u),m=Ji(u),m.callback=null,Zi(l,m,u),l=u,i.current.lanes=l,Nr(i,l),Br(i),r[Vs]=i.current,Hp(r),new of(i)},Hu.version="19.2.0",Hu}var z2;function s3(){if(z2)return u0.exports;z2=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),u0.exports=n3(),u0.exports}var r3=s3();const i3=Ly(r3),a3="modulepreload",o3=function(n){return"/ontap/"+n},H2={},gn=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){let c=function(p){return Promise.all(p.map(v=>Promise.resolve(v).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),g=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));a=c(t.map(p=>{if(p=o3(p),p in H2)return;H2[p]=!0;const v=p.endsWith(".css"),w=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${w}`))return;const E=document.createElement("link");if(E.rel=v?"stylesheet":a3,v||(E.as="script"),E.crossOrigin="",E.href=p,g&&E.setAttribute("nonce",g),document.head.appendChild(E),v)return new Promise((T,k)=>{E.addEventListener("load",T),E.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(c){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=c,window.dispatchEvent(h),!h.defaultPrevented)throw c}return a.then(c=>{for(const h of c||[])h.status==="rejected"&&o(h.reason);return e().catch(o)})},AE=F.createContext(void 0),NE=({children:n})=>{const[e,t]=F.useState("light");F.useEffect(()=>{let o=localStorage.getItem("theme");(!o||o==="noel")&&(o="light",localStorage.setItem("theme","light")),t(o),document.documentElement.setAttribute("data-theme",o)},[]);const s=a=>{t(a),document.documentElement.setAttribute("data-theme",a),localStorage.setItem("theme",a)};return d.jsx(AE.Provider,{value:{theme:e,setTheme:s},children:n})},Fn=()=>{const n=F.useContext(AE);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},l3=n=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:[d.jsx("path",{d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm.25 4.5a.75.75 0 00-1.5 0v5.337a2.25 2.25 0 00-1.5 2.063v.75a.75.75 0 001.5 0v-.75a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 001.5 0v-.75a2.25 2.25 0 00-1.5-2.063V6.75z"}),d.jsx("path",{d:"M6.163 15.25a.75.75 0 011.06-1.06l1.25 1.25a.75.75 0 01-1.06 1.06l-1.25-1.25zm10.617 0a.75.75 0 011.06 1.06l-1.25 1.25a.75.75 0 01-1.06 1.06l1.25-1.25z"})]}),Vy=n=>{const{theme:e}=Fn();return e==="noel"?d.jsx("img",{src:"/assets/img/ball.png",alt:"Check",...n,className:`${n.className} object-contain`}):d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:d.jsx("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z",clipRule:"evenodd"})})},Uy=n=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:d.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z",clipRule:"evenodd"})}),Dc=n=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:d.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-4.28 9.22a.75.75 0 000 1.06l3 3a.75.75 0 101.06-1.06L10.81 12l1.47-1.47a.75.75 0 10-1.06-1.06l-3 3z",clipRule:"evenodd"})}),c3=n=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:d.jsx("path",{fillRule:"evenodd",d:"M16.28 11.47a.75.75 0 010 1.06l-3 3a.75.75 0 01-1.06-1.06L14.44 12l-2.22-2.22a.75.75 0 011.06-1.06l3 3z",clipRule:"evenodd"})}),u3=n=>{const{theme:e}=Fn();return e==="tri-an"?d.jsx("img",{src:"https://i.postimg.cc/J0JwWn5p/Mattahan-Buuf-One-of-those-ugly-pens-you-just-find-lying-around-128.png",alt:"Pen Icon",...n}):e==="noel"?d.jsx("img",{src:"/assets/img/celebrate.png",alt:"Santa",...n,className:`${n.className} object-contain`}):d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:[d.jsx("path",{d:"M12.75 12.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"}),d.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM9 12a3 3 0 116 0 3 3 0 01-6 0zm-2.121 4.212a.75.75 0 01.688-1.228 5.253 5.253 0 018.866 0 .75.75 0 11-.688 1.228 3.753 3.753 0 00-7.49 0z",clipRule:"evenodd"})]})},d3=n=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:d.jsx("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-4.5a.75.75 0 000 1.5h6a.75.75 0 00.75-.75V4.5a.75.75 0 00-1.5 0v2.253a9 9 0 00-15.06 4.042.75.75 0 00.75.75h1.5a.75.75 0 00.75-.75zM19.245 13.941a7.5 7.5 0 01-12.548 3.364l-1.903-1.903h4.5a.75.75 0 000-1.5h-6a.75.75 0 00-.75.75v6a.75.75 0 001.5 0v-2.253a9 9 0 0015.06-4.042.75.75 0 00-.75-.75h-1.5a.75.75 0 00-.75.75z",clipRule:"evenodd"})}),yc=n=>{const{theme:e}=Fn();return e==="tri-an"?d.jsx("img",{src:"https://i.postimg.cc/xjbVmxDW/Oxygen-Icons-org-Oxygen-Categories-applications-education-university-256.png",alt:"Graduation Cap Icon",...n}):e==="noel"?d.jsx("img",{src:"/assets/img/home.png",alt:"Home Icon",...n,className:`${n.className} object-contain`}):d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:[d.jsx("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm0 2a8 8 0 100 16 8 8 0 000-16zm0 3a5 5 0 110 10 5 5 0 010-10zm0 2a3 3 0 100 6 3 3 0 000-6z"}),d.jsx("path",{d:"M12 3v2m0 14v2M3 12h2m14 0h-2m-8-8L6.414 5.414m11.172 11.172L16.243 15.12m0-9.706l-1.121 1.121M5.414 17.586L6.536 16.464"})]})},q0=n=>{const{theme:e}=Fn();return e==="tri-an"?d.jsx("img",{src:"https://i.postimg.cc/66GxZjxN/school-114359.png",alt:"School Bag Icon",...n}):e==="noel"?d.jsx("img",{src:"/assets/img/bell.png",alt:"Bell Icon",...n,className:`${n.className} object-contain`}):d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:[d.jsx("path",{d:"M12 2a1 1 0 011 1v7.683a4.502 4.502 0 012.722 2.054 3 3 0 01-1.33 3.963 3.003 3.003 0 01-4.783-3.963A4.502 4.502 0 0111 10.683V3a1 1 0 011-1zm-3.5 10a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm7 0a1.5 1.5 0 100 3 1.5 1.5 0 000-3z"}),d.jsx("path",{d:"M12 22a8.956 8.956 0 01-6-2.583V18h12v1.417A8.956 8.956 0 0112 22z"})]})},h3=n=>{const{theme:e}=Fn();return e==="tri-an"?d.jsx("img",{src:"https://i.postimg.cc/h47RmyWN/Mattahan-Buuf-They-reply-technosorcery-128.png",alt:"Wrench Icon",...n}):e==="noel"?d.jsx("img",{src:"/assets/img/gift4.png",alt:"Gift Icon",...n,className:`${n.className} object-contain`}):d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:[d.jsx("path",{fillRule:"evenodd",d:"M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.981A10.503 10.503 0 0112 21a10.5 10.5 0 01-10.5-10.5c0-4.368 2.667-8.162 6.43-9.742a.75.75 0 01.819.162z",clipRule:"evenodd"}),d.jsx("path",{d:"M12.75 9a.75.75 0 00-1.5 0v2.25H9a.75.75 0 000 1.5h2.25V15a.75.75 0 001.5 0v-2.25H15a.75.75 0 000-1.5h-2.25V9z"})]})},f3=n=>{const{theme:e}=Fn();return e==="tri-an"?d.jsx("img",{src:"https://i.postimg.cc/zvWm1BFk/book-512x512-35977.png",alt:"Book Icon",...n}):e==="noel"?d.jsx("img",{src:"/assets/img/hat.png",alt:"Hat Icon",...n,className:`${n.className} object-contain`}):d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:[d.jsx("path",{d:"M12 2L3 8v2h18V8l-9-6zm-1.5 10a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm3 0a1.5 1.5 0 100 3 1.5 1.5 0 000-3z"}),d.jsx("path",{d:"M4 14v6h16v-6H4zm6 2h4v2h-4v-2z"})]})},q2=n=>{const{theme:e}=Fn();return e==="tri-an"?d.jsx("img",{src:"https://i.postimg.cc/2yvpf67d/Mattahan-Buuf-A-Proper-Journal-Icon-128.png",alt:"Journal Icon",...n}):e==="noel"?d.jsx("img",{src:"/assets/img/gift5.png",alt:"Gift Icon",...n,className:`${n.className} object-contain`}):d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:[d.jsx("path",{fillRule:"evenodd",d:"M12 2a10 10 0 100 20 10 10 0 000-20zM4 12a8 8 0 1116 0 8 8 0 01-16 0z",clipRule:"evenodd"}),d.jsx("path",{d:"M16.95 7.05l-1.414 1.414-2.122-2.122 1.414-1.414 2.122 2.122zm-9.9 9.9l1.414-1.414 2.122 2.122-1.414 1.414-2.122-2.122zm9.9 0l-1.414-1.414-2.122 2.122 1.414 1.414 2.122-2.122zm-9.9-9.9l1.414 1.414-2.122 2.122L5.636 9.172l2.122-2.122z"})]})},$2=n=>{const{theme:e}=Fn();return e==="tri-an"?d.jsx("img",{src:"https://i.postimg.cc/2yvpf67d/Mattahan-Buuf-A-Proper-Journal-Icon-128.png",alt:"Journal Icon",...n}):e==="noel"?d.jsx("img",{src:"/assets/img/star-gold.png",alt:"Star Icon",...n,className:`${n.className} object-contain`}):d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:[d.jsx("path",{fillRule:"evenodd",d:"M8.25 2.25A.75.75 0 019 3v.257a3.75 3.75 0 013 0V3a.75.75 0 011.5 0v.257a3.75 3.75 0 013 0V3a.75.75 0 01.75.75h-.008v.016c.361.32.622.754.74 1.232A23.953 23.953 0 0112 6c-2.305 0-4.52-.42-6.502-1.195a2.5 2.5 0 01.74-1.232H6a.75.75 0 01.75-.75h1.5zm-2.784 4.542a25.474 25.474 0 0013.068 0 .75.75 0 01.443.923 23.92 23.92 0 01-13.954 0 .75.75 0 01.443-.923zM8.25 10.5a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5a.75.75 0 01.75-.75zm3.75 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5a.75.75 0 01.75-.75zm3.75 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5a.75.75 0 01.75-.75z",clipRule:"evenodd"}),d.jsx("path",{d:"M4.145 9.421a.75.75 0 01.558-.923 25.483 25.483 0 0114.594 0 .75.75 0 01.558.923l-.36.99a25.01 25.01 0 01-14.832 0l-.36-.99z"}),d.jsx("path",{fillRule:"evenodd",d:"M3 15.75A2.25 2.25 0 015.25 13.5h13.5A2.25 2.25 0 0121 15.75v3A2.25 2.25 0 0118.75 21H5.25A2.25 2.25 0 013 18.75v-3z",clipRule:"evenodd"})]})},CE=n=>{const{theme:e}=Fn();return e==="tri-an"?d.jsx("img",{src:"https://i.postimg.cc/xjbVmxDW/Oxygen-Icons-org-Oxygen-Categories-applications-education-university-256.png",alt:"Graduation Cap Icon",...n}):e==="noel"?d.jsx("img",{src:"/assets/img/star-gold.png",alt:"Gold Star Icon",...n,className:`${n.className} object-contain`}):d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:[d.jsx("path",{fillRule:"evenodd",d:"M11.25 4.5A.75.75 0 0112 5.25v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0111.25 4.5zM12.75 6a.75.75 0 00-1.5 0v1.5a.75.75 0 001.5 0V6zM11.25 7.5A.75.75 0 0112 8.25v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0111.25 7.5zM12.75 9a.75.75 0 00-1.5 0v1.5a.75.75 0 001.5 0V9z",clipRule:"evenodd"}),d.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM6.262 6.072a8.25 8.25 0 1011.476 11.476A8.25 8.25 0 006.262 6.072zM12 18.75a.75.75 0 01-.75-.75V15a.75.75 0 011.5 0v3a.75.75 0 01-.75.75z",clipRule:"evenodd"}),d.jsx("path",{d:"M14.25 12a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})]})},By=n=>{const{theme:e}=Fn();return e==="tri-an"?d.jsx("img",{src:"https://i.postimg.cc/FFJXSWXv/study-learning-knowledge-education-book-notebook-icon-256768.png",alt:"Book and Glasses Icon",...n}):e==="noel"?d.jsx("img",{src:"/assets/img/gift1.png",alt:"Gift Icon",...n,className:`${n.className} object-contain`}):d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:[d.jsx("path",{d:"M11.25 4.533A9.708 9.708 0 006 3.75c-1.052 0-2.062.18-3 .512V17.25a8.987 8.987 0 013.75-.82V9.75a.75.75 0 011.5 0v7.5a.75.75 0 01-1.5 0V15a6.726 6.726 0 00-3-.585V18.75C3.393 18.932 3.69 19.1 4 19.29c2.023.784 4.18 1.093 6.364 1.294a.75.75 0 00.872-.725V4.534z"}),d.jsx("path",{d:"M12.75 4.533V19.86a.75.75 0 00.872.725 49.33 49.33 0 006.364-1.294c.31-.19.607-.358.914-.54V5.25c-1.084-.308-2.18-.46-3.25-.46-1.637 0-3.235.32-4.75.922V4.534z"})]})},m3=n=>{const{theme:e}=Fn();return e==="tri-an"?d.jsx("img",{src:"https://i.postimg.cc/kG8rd4vv/Limpa-Curriculum-Vitae-Education-256.png",alt:"Blackboard Icon",...n}):e==="noel"?d.jsx("img",{src:"/assets/img/gift2.png",alt:"Gift Icon",...n,className:`${n.className} object-contain`}):d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:d.jsx("path",{fillRule:"evenodd",d:"M2.25 6a3 3 0 013-3h13.5a3 3 0 013 3v12a3 3 0 01-3-3H5.25a3 3 0 01-3-3V6zm3.75 3a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H7.5a.75.75 0 01-.75-.75zM7.5 12a.75.75 0 000 1.5h6a.75.75 0 000-1.5h-6z",clipRule:"evenodd"})})},g3=[{name:"light",label:"Sng",color:"bg-white"},{name:"dark",label:"Ti",color:"bg-slate-900"},{name:"noel",label:"Ging Sinh",color:"bg-[#8B0000]"},{name:"modern",label:"Hin i",color:"bg-indigo-600"},{name:"classic",label:"C in",color:"bg-[#6F6049]"},{name:"sunrise",label:"Bnh Minh",color:"bg-orange-500"},{name:"tri-an",label:"Tri n",color:"bg-red-400"}],p3=()=>{const[n,e]=F.useState(!1),{theme:t,setTheme:s}=Fn(),a=o=>{s(o),e(!1)};return d.jsxs("div",{className:"relative",children:[n&&d.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-40 rounded-lg border border-border bg-card p-2 shadow-2xl flex flex-col gap-1 animate-slide-in-right",children:g3.map(o=>d.jsxs("button",{onClick:()=>a(o.name),className:`w-full text-left px-3 py-2 text-sm font-semibold rounded-md flex items-center gap-3 transition-colors ${t===o.name?"bg-primary/20 text-primary":"text-card-foreground hover:bg-secondary"}`,children:[d.jsx("span",{className:`w-4 h-4 rounded-full ${o.color} border border-white/20`}),o.label]},o.name))}),d.jsx("button",{onClick:()=>e(!n),className:"flex h-10 w-10 items-center justify-center rounded-lg bg-secondary text-secondary-foreground shadow-sm transition-colors hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring","aria-label":"Change theme",children:d.jsx(l3,{className:"h-6 w-6"})})]})},y3=()=>{const n=["gift1.png","bell.png","star-gold.png","ball.png","gift2.png","gift3.png","gift4.png","gift5.png"],{theme:e}=Fn();return e!=="noel"?null:d.jsxs(d.Fragment,{children:[d.jsx("style",{dangerouslySetInnerHTML:{__html:`
        /* === PHN 5: HIU NG TUYT & QU RI === */
        .snowflakes {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 9999;
        }
        
        .snowflake {
            color: #fff;
            font-size: 1.2em;
            font-family: Arial, sans-serif;
            text-shadow: 0 0 3px rgba(255,255,255,0.8); /* Tuyt pht sng nh */
            position: fixed;
            top: -10%;
            z-index: 9999;
            user-select: none;
            cursor: default;
            animation-name: snowflakes-fall, snowflakes-shake;
            animation-timing-function: linear, ease-in-out;
            animation-iteration-count: infinite, infinite;
            animation-play-state: running, running;
        }

        .snowflake-img img {
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.3));
            width: 30px; 
            height: auto;
            opacity: 0.9;
        }

        @keyframes snowflakes-fall {
            0% { top: -10%; }
            100% { top: 100%; }
        }
        @keyframes snowflakes-shake {
            0% { transform: translateX(0px) rotate(0deg); }
            50% { transform: translateX(80px) rotate(180deg); }
            100% { transform: translateX(0px) rotate(360deg); }
        }

        /* Cu hnh ri ngu nhin */
        .snowflake:nth-of-type(1) { left: 1%; animation-duration: 12s, 4s; animation-delay: 0s, 0s; }
        .snowflake:nth-of-type(2) { left: 5%; animation-duration: 15s, 6s; animation-delay: 1s, 1s; }
        .snowflake:nth-of-type(3) { left: 10%; animation-duration: 10s, 3s; animation-delay: 2s, 0.5s; }
        .snowflake:nth-of-type(4) { left: 15%; animation-duration: 18s, 5s; animation-delay: 4s, 2s; }
        .snowflake:nth-of-type(5) { left: 20%; animation-duration: 11s, 4s; animation-delay: 2s, 2s; }
        .snowflake:nth-of-type(6) { left: 25%; animation-duration: 14s, 7s; animation-delay: 6s, 3s; }
        .snowflake:nth-of-type(7) { left: 30%; animation-duration: 16s, 5s; animation-delay: 3s, 2s; }
        .snowflake:nth-of-type(8) { left: 35%; animation-duration: 13s, 4s; animation-delay: 1s, 1s; }
        .snowflake:nth-of-type(9) { left: 40%; animation-duration: 17s, 6s; animation-delay: 0s, 0s; }
        .snowflake:nth-of-type(10) { left: 45%; animation-duration: 9s, 3s; animation-delay: 5s, 1.5s; }
        .snowflake:nth-of-type(11) { left: 50%; animation-duration: 14s, 5s; animation-delay: 2s, 3s; }
        .snowflake:nth-of-type(12) { left: 55%; animation-duration: 11s, 4s; animation-delay: 4s, 1s; }
        .snowflake:nth-of-type(13) { left: 60%; animation-duration: 19s, 7s; animation-delay: 1s, 2s; }
        .snowflake:nth-of-type(14) { left: 65%; animation-duration: 12s, 3s; animation-delay: 3s, 0s; }
        .snowflake:nth-of-type(15) { left: 70%; animation-duration: 15s, 6s; animation-delay: 5s, 4s; }
        .snowflake:nth-of-type(16) { left: 75%; animation-duration: 10s, 4s; animation-delay: 0s, 2s; }
        .snowflake:nth-of-type(17) { left: 80%; animation-duration: 16s, 5s; animation-delay: 2s, 1s; }
        .snowflake:nth-of-type(18) { left: 85%; animation-duration: 13s, 4s; animation-delay: 4s, 3s; }
        .snowflake:nth-of-type(19) { left: 90%; animation-duration: 18s, 6s; animation-delay: 1s, 2s; }
        .snowflake:nth-of-type(20) { left: 95%; animation-duration: 11s, 3s; animation-delay: 3s, 0s; }
        
        .snowflake:nth-of-type(21) { left: 2%; animation-duration: 13s, 5s; animation-delay: 5s, 1s; }
        .snowflake:nth-of-type(22) { left: 8%; animation-duration: 10s, 3s; animation-delay: 2s, 4s; }
        .snowflake:nth-of-type(23) { left: 12%; animation-duration: 16s, 6s; animation-delay: 1s, 2s; }
        .snowflake:nth-of-type(24) { left: 18%; animation-duration: 12s, 4s; animation-delay: 6s, 0s; }
        .snowflake:nth-of-type(25) { left: 22%; animation-duration: 14s, 5s; animation-delay: 0s, 3s; }
        .snowflake:nth-of-type(26) { left: 28%; animation-duration: 11s, 3s; animation-delay: 4s, 2s; }
        .snowflake:nth-of-type(27) { left: 32%; animation-duration: 19s, 7s; animation-delay: 2s, 1s; }
        .snowflake:nth-of-type(28) { left: 38%; animation-duration: 15s, 6s; animation-delay: 5s, 5s; }
        .snowflake:nth-of-type(29) { left: 42%; animation-duration: 12s, 4s; animation-delay: 1s, 0s; }
        .snowflake:nth-of-type(30) { left: 48%; animation-duration: 17s, 5s; animation-delay: 3s, 2s; }
        .snowflake:nth-of-type(31) { left: 52%; animation-duration: 9s, 3s; animation-delay: 0s, 3s; }
        .snowflake:nth-of-type(32) { left: 58%; animation-duration: 14s, 6s; animation-delay: 4s, 1s; }
        .snowflake:nth-of-type(33) { left: 62%; animation-duration: 11s, 4s; animation-delay: 2s, 4s; }
        .snowflake:nth-of-type(34) { left: 68%; animation-duration: 16s, 5s; animation-delay: 6s, 0s; }
        .snowflake:nth-of-type(35) { left: 72%; animation-duration: 13s, 3s; animation-delay: 1s, 2s; }
        .snowflake:nth-of-type(36) { left: 78%; animation-duration: 18s, 7s; animation-delay: 5s, 1s; }
        .snowflake:nth-of-type(37) { left: 82%; animation-duration: 10s, 4s; animation-delay: 2s, 3s; }
        .snowflake:nth-of-type(38) { left: 88%; animation-duration: 15s, 6s; animation-delay: 4s, 0s; }
        .snowflake:nth-of-type(39) { left: 92%; animation-duration: 12s, 5s; animation-delay: 0s, 2s; }
        .snowflake:nth-of-type(40) { left: 98%; animation-duration: 17s, 4s; animation-delay: 3s, 5s; }

        .snowflake:nth-child(odd) { animation-direction: normal; }
        .snowflake:nth-child(even) { animation-direction: alternate; }

        @media (max-width: 768px) {
            .snowflake { font-size: 1em; }
            .snowflake-img img { width: 20px; }
        }
      `}}),d.jsxs("div",{className:"snowflakes","aria-hidden":"true",children:[Array.from({length:100}).map((t,s)=>d.jsxs("div",{className:"snowflake",children:[["","",""][s%3]," "]},`snow-${s}`)),Array.from({length:8}).map((t,s)=>{const a=n[s%n.length];return d.jsx("div",{className:"snowflake snowflake-img",children:d.jsx("img",{src:`/assets/img/${a}`,alt:"",style:{width:"25px",height:"auto"}})},`img-${s}`)})]})]})},v3=()=>{};var F2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let a=n.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},b3=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const a=n[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const o=n[t++];e[s++]=String.fromCharCode((a&31)<<6|o&63)}else if(a>239&&a<365){const o=n[t++],c=n[t++],h=n[t++],g=((a&7)<<18|(o&63)<<12|(c&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const o=n[t++],c=n[t++];e[s++]=String.fromCharCode((a&15)<<12|(o&63)<<6|c&63)}}return e.join("")},IE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<n.length;a+=3){const o=n[a],c=a+1<n.length,h=c?n[a+1]:0,g=a+2<n.length,p=g?n[a+2]:0,v=o>>2,w=(o&3)<<4|h>>4;let E=(h&15)<<2|p>>6,T=p&63;g||(T=64,c||(E=64)),s.push(t[v],t[w],t[E],t[T])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(kE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):b3(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<n.length;){const o=t[n.charAt(a++)],h=a<n.length?t[n.charAt(a)]:0;++a;const p=a<n.length?t[n.charAt(a)]:64;++a;const w=a<n.length?t[n.charAt(a)]:64;if(++a,o==null||h==null||p==null||w==null)throw new w3;const E=o<<2|h>>4;if(s.push(E),p!==64){const T=h<<4&240|p>>2;if(s.push(T),w!==64){const k=p<<6&192|w;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class w3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _3=function(n){const e=kE(n);return IE.encodeByteArray(e,!0)},Vf=function(n){return _3(n).replace(/\./g,"")},RE=function(n){try{return IE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3=()=>x3().__FIREBASE_DEFAULTS__,T3=()=>{if(typeof process>"u"||typeof F2>"u")return;const n=F2.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},S3=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&RE(n[1]);return e&&JSON.parse(e)},Nm=()=>{try{return v3()||E3()||T3()||S3()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},jE=n=>{var e,t;return(t=(e=Nm())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},OE=n=>{const e=jE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},DE=()=>{var n;return(n=Nm())==null?void 0:n.config},PE=n=>{var e;return(e=Nm())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let A3=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zy(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Vf(JSON.stringify(t)),Vf(JSON.stringify(c)),""].join(".")}const Wu={};function N3(){const n={prod:[],emulator:[]};for(const e of Object.keys(Wu))Wu[e]?n.emulator.push(e):n.prod.push(e);return n}function C3(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let G2=!1;function Hy(n,e){if(typeof window>"u"||typeof document>"u"||!Ko(window.location.host)||Wu[n]===e||Wu[n]||G2)return;Wu[n]=e;function t(E){return`__firebase__banner__${E}`}const s="__firebase__banner",o=N3().prod.length>0;function c(){const E=document.getElementById(s);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function g(E,T){E.setAttribute("width","24"),E.setAttribute("id",T),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{G2=!0,c()},E}function v(E,T){E.setAttribute("id",T),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function w(){const E=C3(s),T=t("text"),k=document.getElementById(T)||document.createElement("span"),L=t("learnmore"),I=document.getElementById(L)||document.createElement("a"),O=t("preprendIcon"),q=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const G=E.element;h(G),v(I,L);const te=p();g(q,O),G.append(q,k,I,te),document.body.appendChild(G)}o?(k.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function k3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qn())}function I3(){var e;const n=(e=Nm())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function R3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function j3(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function O3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function D3(){const n=qn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function P3(){return!I3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function L3(){try{return typeof indexedDB=="object"}catch{return!1}}function M3(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var o;e(((o=a.error)==null?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3="FirebaseError";class Jr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=V3,Object.setPrototypeOf(this,Jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xd.prototype.create)}}class xd{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,o=this.errors[e],c=o?U3(o,s):"Error",h=`${this.serviceName}: ${c} (${a}).`;return new Jr(a,h,s)}}function U3(n,e){return n.replace(B3,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const B3=/\{\$([^}]+)}/g;function z3(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ai(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const o=n[a],c=e[a];if(K2(o)&&K2(c)){if(!Ai(o,c))return!1}else if(o!==c)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function K2(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function qu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,o]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(o)}}),e}function $u(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function H3(n,e){const t=new q3(n,e);return t.subscribe.bind(t)}class q3{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");$3(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=m0),a.error===void 0&&(a.error=m0),a.complete===void 0&&(a.complete=m0);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $3(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function m0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(n){return n&&n._delegate?n._delegate:n}class Ra{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new A3;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(K3(e))try{this.getOrInitializeService({instanceIdentifier:ko})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:a});s.resolve(o)}catch{}}}}clearInstance(e=ko){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ko){return this.instances.has(e)}getOptions(e=ko){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[o,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);s===h&&c.resolve(a)}return a}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const o=this.instances.get(s);return o&&e(o,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:G3(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ko){return this.component?this.component.multipleInstances?e:ko:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function G3(n){return n===ko?void 0:n}function K3(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new F3(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(tt||(tt={}));const W3={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},Y3=tt.INFO,X3={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},J3=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),a=X3[e];if(a)console[a](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qy{constructor(e){this.name=e,this._logLevel=Y3,this._logHandler=J3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?W3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...e),this._logHandler(this,tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...e),this._logHandler(this,tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...e),this._logHandler(this,tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...e),this._logHandler(this,tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...e),this._logHandler(this,tt.ERROR,...e)}}const Z3=(n,e)=>e.some(t=>n instanceof t);let Q2,W2;function e6(){return Q2||(Q2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function t6(){return W2||(W2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ME=new WeakMap,$0=new WeakMap,VE=new WeakMap,g0=new WeakMap,$y=new WeakMap;function n6(n){const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t(Aa(n.result)),a()},c=()=>{s(n.error),a()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&ME.set(t,n)}).catch(()=>{}),$y.set(e,n),e}function s6(n){if($0.has(n))return;const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),a()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});$0.set(n,e)}let F0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return $0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||VE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Aa(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function r6(n){F0=n(F0)}function i6(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(p0(this),e,...t);return VE.set(s,e.sort?e.sort():[e]),Aa(s)}:t6().includes(n)?function(...e){return n.apply(p0(this),e),Aa(ME.get(this))}:function(...e){return Aa(n.apply(p0(this),e))}}function a6(n){return typeof n=="function"?i6(n):(n instanceof IDBTransaction&&s6(n),Z3(n,e6())?new Proxy(n,F0):n)}function Aa(n){if(n instanceof IDBRequest)return n6(n);if(g0.has(n))return g0.get(n);const e=a6(n);return e!==n&&(g0.set(n,e),$y.set(e,n)),e}const p0=n=>$y.get(n);function o6(n,e,{blocked:t,upgrade:s,blocking:a,terminated:o}={}){const c=indexedDB.open(n,e),h=Aa(c);return s&&c.addEventListener("upgradeneeded",g=>{s(Aa(c.result),g.oldVersion,g.newVersion,Aa(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),h.then(g=>{o&&g.addEventListener("close",()=>o()),a&&g.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const l6=["get","getKey","getAll","getAllKeys","count"],c6=["put","add","delete","clear"],y0=new Map;function Y2(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(y0.get(e))return y0.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=c6.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||l6.includes(t)))return;const o=async function(c,...h){const g=this.transaction(c,a?"readwrite":"readonly");let p=g.store;return s&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),a&&g.done]))[0]};return y0.set(e,o),o}r6(n=>({...n,get:(e,t,s)=>Y2(e,t)||n.get(e,t,s),has:(e,t)=>!!Y2(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(d6(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function d6(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const G0="@firebase/app",X2="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=new qy("@firebase/app"),h6="@firebase/app-compat",f6="@firebase/analytics-compat",m6="@firebase/analytics",g6="@firebase/app-check-compat",p6="@firebase/app-check",y6="@firebase/auth",v6="@firebase/auth-compat",b6="@firebase/database",w6="@firebase/data-connect",_6="@firebase/database-compat",x6="@firebase/functions",E6="@firebase/functions-compat",T6="@firebase/installations",S6="@firebase/installations-compat",A6="@firebase/messaging",N6="@firebase/messaging-compat",C6="@firebase/performance",k6="@firebase/performance-compat",I6="@firebase/remote-config",R6="@firebase/remote-config-compat",j6="@firebase/storage",O6="@firebase/storage-compat",D6="@firebase/firestore",P6="@firebase/ai",L6="@firebase/firestore-compat",M6="firebase",V6="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="[DEFAULT]",U6={[G0]:"fire-core",[h6]:"fire-core-compat",[m6]:"fire-analytics",[f6]:"fire-analytics-compat",[p6]:"fire-app-check",[g6]:"fire-app-check-compat",[y6]:"fire-auth",[v6]:"fire-auth-compat",[b6]:"fire-rtdb",[w6]:"fire-data-connect",[_6]:"fire-rtdb-compat",[x6]:"fire-fn",[E6]:"fire-fn-compat",[T6]:"fire-iid",[S6]:"fire-iid-compat",[A6]:"fire-fcm",[N6]:"fire-fcm-compat",[C6]:"fire-perf",[k6]:"fire-perf-compat",[I6]:"fire-rc",[R6]:"fire-rc-compat",[j6]:"fire-gcs",[O6]:"fire-gcs-compat",[D6]:"fire-fst",[L6]:"fire-fst-compat",[P6]:"fire-vertex","fire-js":"fire-js",[M6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id=new Map,B6=new Map,Q0=new Map;function J2(n,e){try{n.container.addComponent(e)}catch(t){Ni.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Bo(n){const e=n.name;if(Q0.has(e))return Ni.debug(`There were multiple attempts to register component ${e}.`),!1;Q0.set(e,n);for(const t of id.values())J2(t,n);for(const t of B6.values())J2(t,n);return!0}function Cm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ss(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Na=new xd("app","Firebase",z6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ra("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Na.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=V6;function UE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:K0,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw Na.create("bad-app-name",{appName:String(a)});if(t||(t=DE()),!t)throw Na.create("no-options");const o=id.get(a);if(o){if(Ai(t,o.options)&&Ai(s,o.config))return o;throw Na.create("duplicate-app",{appName:a})}const c=new Q3(a);for(const g of Q0.values())c.addComponent(g);const h=new H6(t,s,c);return id.set(a,h),h}function km(n=K0){const e=id.get(n);if(!e&&n===K0&&DE())return UE();if(!e)throw Na.create("no-app",{appName:n});return e}function q6(){return Array.from(id.values())}function $r(n,e,t){let s=U6[n]??n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const c=[`Unable to register library "${s}" with version "${e}":`];a&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ni.warn(c.join(" "));return}Bo(new Ra(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6="firebase-heartbeat-database",F6=1,ad="firebase-heartbeat-store";let v0=null;function BE(){return v0||(v0=o6($6,F6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ad)}catch(t){console.warn(t)}}}}).catch(n=>{throw Na.create("idb-open",{originalErrorMessage:n.message})})),v0}async function G6(n){try{const t=(await BE()).transaction(ad),s=await t.objectStore(ad).get(zE(n));return await t.done,s}catch(e){if(e instanceof Jr)Ni.warn(e.message);else{const t=Na.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ni.warn(t.message)}}}async function Z2(n,e){try{const s=(await BE()).transaction(ad,"readwrite");await s.objectStore(ad).put(e,zE(n)),await s.done}catch(t){if(t instanceof Jr)Ni.warn(t.message);else{const s=Na.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ni.warn(s.message)}}}function zE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6=1024,Q6=30;class W6{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new X6(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=e_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:a}),this._heartbeatsCache.heartbeats.length>Q6){const c=J6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ni.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=e_(),{heartbeatsToSend:s,unsentEntries:a}=Y6(this._heartbeatsCache.heartbeats),o=Vf(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Ni.warn(t),""}}}function e_(){return new Date().toISOString().substring(0,10)}function Y6(n,e=K6){const t=[];let s=n.slice();for(const a of n){const o=t.find(c=>c.agent===a.agent);if(o){if(o.dates.push(a.date),t_(t)>e){o.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),t_(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class X6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return L3()?M3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await G6(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Z2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Z2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function t_(n){return Vf(JSON.stringify({version:2,heartbeats:n})).length}function J6(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z6(n){Bo(new Ra("platform-logger",e=>new u6(e),"PRIVATE")),Bo(new Ra("heartbeat",e=>new W6(e),"PRIVATE")),$r(G0,X2,n),$r(G0,X2,"esm2020"),$r("fire-js","")}Z6("");var n_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ca,HE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,C){function R(){}R.prototype=C.prototype,N.F=C.prototype,N.prototype=new R,N.prototype.constructor=N,N.D=function(B,M,z){for(var D=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)D[Ue-2]=arguments[Ue];return C.prototype[M].apply(B,D)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(N,C,R){R||(R=0);const B=Array(16);if(typeof C=="string")for(var M=0;M<16;++M)B[M]=C.charCodeAt(R++)|C.charCodeAt(R++)<<8|C.charCodeAt(R++)<<16|C.charCodeAt(R++)<<24;else for(M=0;M<16;++M)B[M]=C[R++]|C[R++]<<8|C[R++]<<16|C[R++]<<24;C=N.g[0],R=N.g[1],M=N.g[2];let z=N.g[3],D;D=C+(z^R&(M^z))+B[0]+3614090360&4294967295,C=R+(D<<7&4294967295|D>>>25),D=z+(M^C&(R^M))+B[1]+3905402710&4294967295,z=C+(D<<12&4294967295|D>>>20),D=M+(R^z&(C^R))+B[2]+606105819&4294967295,M=z+(D<<17&4294967295|D>>>15),D=R+(C^M&(z^C))+B[3]+3250441966&4294967295,R=M+(D<<22&4294967295|D>>>10),D=C+(z^R&(M^z))+B[4]+4118548399&4294967295,C=R+(D<<7&4294967295|D>>>25),D=z+(M^C&(R^M))+B[5]+1200080426&4294967295,z=C+(D<<12&4294967295|D>>>20),D=M+(R^z&(C^R))+B[6]+2821735955&4294967295,M=z+(D<<17&4294967295|D>>>15),D=R+(C^M&(z^C))+B[7]+4249261313&4294967295,R=M+(D<<22&4294967295|D>>>10),D=C+(z^R&(M^z))+B[8]+1770035416&4294967295,C=R+(D<<7&4294967295|D>>>25),D=z+(M^C&(R^M))+B[9]+2336552879&4294967295,z=C+(D<<12&4294967295|D>>>20),D=M+(R^z&(C^R))+B[10]+4294925233&4294967295,M=z+(D<<17&4294967295|D>>>15),D=R+(C^M&(z^C))+B[11]+2304563134&4294967295,R=M+(D<<22&4294967295|D>>>10),D=C+(z^R&(M^z))+B[12]+1804603682&4294967295,C=R+(D<<7&4294967295|D>>>25),D=z+(M^C&(R^M))+B[13]+4254626195&4294967295,z=C+(D<<12&4294967295|D>>>20),D=M+(R^z&(C^R))+B[14]+2792965006&4294967295,M=z+(D<<17&4294967295|D>>>15),D=R+(C^M&(z^C))+B[15]+1236535329&4294967295,R=M+(D<<22&4294967295|D>>>10),D=C+(M^z&(R^M))+B[1]+4129170786&4294967295,C=R+(D<<5&4294967295|D>>>27),D=z+(R^M&(C^R))+B[6]+3225465664&4294967295,z=C+(D<<9&4294967295|D>>>23),D=M+(C^R&(z^C))+B[11]+643717713&4294967295,M=z+(D<<14&4294967295|D>>>18),D=R+(z^C&(M^z))+B[0]+3921069994&4294967295,R=M+(D<<20&4294967295|D>>>12),D=C+(M^z&(R^M))+B[5]+3593408605&4294967295,C=R+(D<<5&4294967295|D>>>27),D=z+(R^M&(C^R))+B[10]+38016083&4294967295,z=C+(D<<9&4294967295|D>>>23),D=M+(C^R&(z^C))+B[15]+3634488961&4294967295,M=z+(D<<14&4294967295|D>>>18),D=R+(z^C&(M^z))+B[4]+3889429448&4294967295,R=M+(D<<20&4294967295|D>>>12),D=C+(M^z&(R^M))+B[9]+568446438&4294967295,C=R+(D<<5&4294967295|D>>>27),D=z+(R^M&(C^R))+B[14]+3275163606&4294967295,z=C+(D<<9&4294967295|D>>>23),D=M+(C^R&(z^C))+B[3]+4107603335&4294967295,M=z+(D<<14&4294967295|D>>>18),D=R+(z^C&(M^z))+B[8]+1163531501&4294967295,R=M+(D<<20&4294967295|D>>>12),D=C+(M^z&(R^M))+B[13]+2850285829&4294967295,C=R+(D<<5&4294967295|D>>>27),D=z+(R^M&(C^R))+B[2]+4243563512&4294967295,z=C+(D<<9&4294967295|D>>>23),D=M+(C^R&(z^C))+B[7]+1735328473&4294967295,M=z+(D<<14&4294967295|D>>>18),D=R+(z^C&(M^z))+B[12]+2368359562&4294967295,R=M+(D<<20&4294967295|D>>>12),D=C+(R^M^z)+B[5]+4294588738&4294967295,C=R+(D<<4&4294967295|D>>>28),D=z+(C^R^M)+B[8]+2272392833&4294967295,z=C+(D<<11&4294967295|D>>>21),D=M+(z^C^R)+B[11]+1839030562&4294967295,M=z+(D<<16&4294967295|D>>>16),D=R+(M^z^C)+B[14]+4259657740&4294967295,R=M+(D<<23&4294967295|D>>>9),D=C+(R^M^z)+B[1]+2763975236&4294967295,C=R+(D<<4&4294967295|D>>>28),D=z+(C^R^M)+B[4]+1272893353&4294967295,z=C+(D<<11&4294967295|D>>>21),D=M+(z^C^R)+B[7]+4139469664&4294967295,M=z+(D<<16&4294967295|D>>>16),D=R+(M^z^C)+B[10]+3200236656&4294967295,R=M+(D<<23&4294967295|D>>>9),D=C+(R^M^z)+B[13]+681279174&4294967295,C=R+(D<<4&4294967295|D>>>28),D=z+(C^R^M)+B[0]+3936430074&4294967295,z=C+(D<<11&4294967295|D>>>21),D=M+(z^C^R)+B[3]+3572445317&4294967295,M=z+(D<<16&4294967295|D>>>16),D=R+(M^z^C)+B[6]+76029189&4294967295,R=M+(D<<23&4294967295|D>>>9),D=C+(R^M^z)+B[9]+3654602809&4294967295,C=R+(D<<4&4294967295|D>>>28),D=z+(C^R^M)+B[12]+3873151461&4294967295,z=C+(D<<11&4294967295|D>>>21),D=M+(z^C^R)+B[15]+530742520&4294967295,M=z+(D<<16&4294967295|D>>>16),D=R+(M^z^C)+B[2]+3299628645&4294967295,R=M+(D<<23&4294967295|D>>>9),D=C+(M^(R|~z))+B[0]+4096336452&4294967295,C=R+(D<<6&4294967295|D>>>26),D=z+(R^(C|~M))+B[7]+1126891415&4294967295,z=C+(D<<10&4294967295|D>>>22),D=M+(C^(z|~R))+B[14]+2878612391&4294967295,M=z+(D<<15&4294967295|D>>>17),D=R+(z^(M|~C))+B[5]+4237533241&4294967295,R=M+(D<<21&4294967295|D>>>11),D=C+(M^(R|~z))+B[12]+1700485571&4294967295,C=R+(D<<6&4294967295|D>>>26),D=z+(R^(C|~M))+B[3]+2399980690&4294967295,z=C+(D<<10&4294967295|D>>>22),D=M+(C^(z|~R))+B[10]+4293915773&4294967295,M=z+(D<<15&4294967295|D>>>17),D=R+(z^(M|~C))+B[1]+2240044497&4294967295,R=M+(D<<21&4294967295|D>>>11),D=C+(M^(R|~z))+B[8]+1873313359&4294967295,C=R+(D<<6&4294967295|D>>>26),D=z+(R^(C|~M))+B[15]+4264355552&4294967295,z=C+(D<<10&4294967295|D>>>22),D=M+(C^(z|~R))+B[6]+2734768916&4294967295,M=z+(D<<15&4294967295|D>>>17),D=R+(z^(M|~C))+B[13]+1309151649&4294967295,R=M+(D<<21&4294967295|D>>>11),D=C+(M^(R|~z))+B[4]+4149444226&4294967295,C=R+(D<<6&4294967295|D>>>26),D=z+(R^(C|~M))+B[11]+3174756917&4294967295,z=C+(D<<10&4294967295|D>>>22),D=M+(C^(z|~R))+B[2]+718787259&4294967295,M=z+(D<<15&4294967295|D>>>17),D=R+(z^(M|~C))+B[9]+3951481745&4294967295,N.g[0]=N.g[0]+C&4294967295,N.g[1]=N.g[1]+(M+(D<<21&4294967295|D>>>11))&4294967295,N.g[2]=N.g[2]+M&4294967295,N.g[3]=N.g[3]+z&4294967295}s.prototype.v=function(N,C){C===void 0&&(C=N.length);const R=C-this.blockSize,B=this.C;let M=this.h,z=0;for(;z<C;){if(M==0)for(;z<=R;)a(this,N,z),z+=this.blockSize;if(typeof N=="string"){for(;z<C;)if(B[M++]=N.charCodeAt(z++),M==this.blockSize){a(this,B),M=0;break}}else for(;z<C;)if(B[M++]=N[z++],M==this.blockSize){a(this,B),M=0;break}}this.h=M,this.o+=C},s.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var C=1;C<N.length-8;++C)N[C]=0;C=this.o*8;for(var R=N.length-8;R<N.length;++R)N[R]=C&255,C/=256;for(this.v(N),N=Array(16),C=0,R=0;R<4;++R)for(let B=0;B<32;B+=8)N[C++]=this.g[R]>>>B&255;return N};function o(N,C){var R=h;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=C(N)}function c(N,C){this.h=C;const R=[];let B=!0;for(let M=N.length-1;M>=0;M--){const z=N[M]|0;B&&z==C||(R[M]=z,B=!1)}this.g=R}var h={};function g(N){return-128<=N&&N<128?o(N,function(C){return new c([C|0],C<0?-1:0)}):new c([N|0],N<0?-1:0)}function p(N){if(isNaN(N)||!isFinite(N))return w;if(N<0)return I(p(-N));const C=[];let R=1;for(let B=0;N>=R;B++)C[B]=N/R|0,R*=4294967296;return new c(C,0)}function v(N,C){if(N.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(N.charAt(0)=="-")return I(v(N.substring(1),C));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=p(Math.pow(C,8));let B=w;for(let z=0;z<N.length;z+=8){var M=Math.min(8,N.length-z);const D=parseInt(N.substring(z,z+M),C);M<8?(M=p(Math.pow(C,M)),B=B.j(M).add(p(D))):(B=B.j(R),B=B.add(p(D)))}return B}var w=g(0),E=g(1),T=g(16777216);n=c.prototype,n.m=function(){if(L(this))return-I(this).m();let N=0,C=1;for(let R=0;R<this.g.length;R++){const B=this.i(R);N+=(B>=0?B:4294967296+B)*C,C*=4294967296}return N},n.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(k(this))return"0";if(L(this))return"-"+I(this).toString(N);const C=p(Math.pow(N,6));var R=this;let B="";for(;;){const M=te(R,C).g;R=O(R,M.j(C));let z=((R.g.length>0?R.g[0]:R.h)>>>0).toString(N);if(R=M,k(R))return z+B;for(;z.length<6;)z="0"+z;B=z+B}},n.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function k(N){if(N.h!=0)return!1;for(let C=0;C<N.g.length;C++)if(N.g[C]!=0)return!1;return!0}function L(N){return N.h==-1}n.l=function(N){return N=O(this,N),L(N)?-1:k(N)?0:1};function I(N){const C=N.g.length,R=[];for(let B=0;B<C;B++)R[B]=~N.g[B];return new c(R,~N.h).add(E)}n.abs=function(){return L(this)?I(this):this},n.add=function(N){const C=Math.max(this.g.length,N.g.length),R=[];let B=0;for(let M=0;M<=C;M++){let z=B+(this.i(M)&65535)+(N.i(M)&65535),D=(z>>>16)+(this.i(M)>>>16)+(N.i(M)>>>16);B=D>>>16,z&=65535,D&=65535,R[M]=D<<16|z}return new c(R,R[R.length-1]&-2147483648?-1:0)};function O(N,C){return N.add(I(C))}n.j=function(N){if(k(this)||k(N))return w;if(L(this))return L(N)?I(this).j(I(N)):I(I(this).j(N));if(L(N))return I(this.j(I(N)));if(this.l(T)<0&&N.l(T)<0)return p(this.m()*N.m());const C=this.g.length+N.g.length,R=[];for(var B=0;B<2*C;B++)R[B]=0;for(B=0;B<this.g.length;B++)for(let M=0;M<N.g.length;M++){const z=this.i(B)>>>16,D=this.i(B)&65535,Ue=N.i(M)>>>16,re=N.i(M)&65535;R[2*B+2*M]+=D*re,q(R,2*B+2*M),R[2*B+2*M+1]+=z*re,q(R,2*B+2*M+1),R[2*B+2*M+1]+=D*Ue,q(R,2*B+2*M+1),R[2*B+2*M+2]+=z*Ue,q(R,2*B+2*M+2)}for(N=0;N<C;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=C;N<2*C;N++)R[N]=0;return new c(R,0)};function q(N,C){for(;(N[C]&65535)!=N[C];)N[C+1]+=N[C]>>>16,N[C]&=65535,C++}function G(N,C){this.g=N,this.h=C}function te(N,C){if(k(C))throw Error("division by zero");if(k(N))return new G(w,w);if(L(N))return C=te(I(N),C),new G(I(C.g),I(C.h));if(L(C))return C=te(N,I(C)),new G(I(C.g),C.h);if(N.g.length>30){if(L(N)||L(C))throw Error("slowDivide_ only works with positive integers.");for(var R=E,B=C;B.l(N)<=0;)R=me(R),B=me(B);var M=he(R,1),z=he(B,1);for(B=he(B,2),R=he(R,2);!k(B);){var D=z.add(B);D.l(N)<=0&&(M=M.add(R),z=D),B=he(B,1),R=he(R,1)}return C=O(N,M.j(C)),new G(M,C)}for(M=w;N.l(C)>=0;){for(R=Math.max(1,Math.floor(N.m()/C.m())),B=Math.ceil(Math.log(R)/Math.LN2),B=B<=48?1:Math.pow(2,B-48),z=p(R),D=z.j(C);L(D)||D.l(N)>0;)R-=B,z=p(R),D=z.j(C);k(z)&&(z=E),M=M.add(z),N=O(N,D)}return new G(M,N)}n.B=function(N){return te(this,N).h},n.and=function(N){const C=Math.max(this.g.length,N.g.length),R=[];for(let B=0;B<C;B++)R[B]=this.i(B)&N.i(B);return new c(R,this.h&N.h)},n.or=function(N){const C=Math.max(this.g.length,N.g.length),R=[];for(let B=0;B<C;B++)R[B]=this.i(B)|N.i(B);return new c(R,this.h|N.h)},n.xor=function(N){const C=Math.max(this.g.length,N.g.length),R=[];for(let B=0;B<C;B++)R[B]=this.i(B)^N.i(B);return new c(R,this.h^N.h)};function me(N){const C=N.g.length+1,R=[];for(let B=0;B<C;B++)R[B]=N.i(B)<<1|N.i(B-1)>>>31;return new c(R,N.h)}function he(N,C){const R=C>>5;C%=32;const B=N.g.length-R,M=[];for(let z=0;z<B;z++)M[z]=C>0?N.i(z+R)>>>C|N.i(z+R+1)<<32-C:N.i(z+R);return new c(M,N.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,HE=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=v,Ca=c}).apply(typeof n_<"u"?n_:typeof self<"u"?self:typeof window<"u"?window:{});var cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qE,Fu,$E,kf,W0,FE,GE,KE;(function(){var n,e=Object.defineProperty;function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof cf=="object"&&cf];for(var b=0;b<f.length;++b){var x=f[b];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var s=t(this);function a(f,b){if(b)e:{var x=s;f=f.split(".");for(var A=0;A<f.length-1;A++){var Q=f[A];if(!(Q in x))break e;x=x[Q]}f=f[f.length-1],A=x[f],b=b(A),b!=A&&b!=null&&e(x,f,{configurable:!0,writable:!0,value:b})}}a("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(f){return f||function(b){var x=[],A;for(A in b)Object.prototype.hasOwnProperty.call(b,A)&&x.push([A,b[A]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function h(f){var b=typeof f;return b=="object"&&f!=null||b=="function"}function g(f,b,x){return f.call.apply(f.bind,arguments)}function p(f,b,x){return p=g,p.apply(null,arguments)}function v(f,b){var x=Array.prototype.slice.call(arguments,1);return function(){var A=x.slice();return A.push.apply(A,arguments),f.apply(this,A)}}function w(f,b){function x(){}x.prototype=b.prototype,f.Z=b.prototype,f.prototype=new x,f.prototype.constructor=f,f.Ob=function(A,Q,J){for(var ge=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)ge[Ge-2]=arguments[Ge];return b.prototype[Q].apply(A,ge)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function T(f){const b=f.length;if(b>0){const x=Array(b);for(let A=0;A<b;A++)x[A]=f[A];return x}return[]}function k(f,b){for(let A=1;A<arguments.length;A++){const Q=arguments[A];var x=typeof Q;if(x=x!="object"?x:Q?Array.isArray(Q)?"array":x:"null",x=="array"||x=="object"&&typeof Q.length=="number"){x=f.length||0;const J=Q.length||0;f.length=x+J;for(let ge=0;ge<J;ge++)f[x+ge]=Q[ge]}else f.push(Q)}}class L{constructor(b,x){this.i=b,this.j=x,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function I(f){c.setTimeout(()=>{throw f},0)}function O(){var f=N;let b=null;return f.g&&(b=f.g,f.g=f.g.next,f.g||(f.h=null),b.next=null),b}class q{constructor(){this.h=this.g=null}add(b,x){const A=G.get();A.set(b,x),this.h?this.h.next=A:this.g=A,this.h=A}}var G=new L(()=>new te,f=>f.reset());class te{constructor(){this.next=this.g=this.h=null}set(b,x){this.h=b,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let me,he=!1,N=new q,C=()=>{const f=Promise.resolve(void 0);me=()=>{f.then(R)}};function R(){for(var f;f=O();){try{f.h.call(f.g)}catch(x){I(x)}var b=G;b.j(f),b.h<100&&(b.h++,f.next=b.g,b.g=f)}he=!1}function B(){this.u=this.u,this.C=this.C}B.prototype.u=!1,B.prototype.dispose=function(){this.u||(this.u=!0,this.N())},B.prototype[Symbol.dispose]=function(){this.dispose()},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(f,b){this.type=f,this.g=this.target=b,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,b=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const x=()=>{};c.addEventListener("test",x,b),c.removeEventListener("test",x,b)}catch{}return f})();function D(f){return/^[\s\xa0]*$/.test(f)}function Ue(f,b){M.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,b)}w(Ue,M),Ue.prototype.init=function(f,b){const x=this.type=f.type,A=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=b,b=f.relatedTarget,b||(x=="mouseover"?b=f.fromElement:x=="mouseout"&&(b=f.toElement)),this.relatedTarget=b,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&Ue.Z.h.call(this)},Ue.prototype.h=function(){Ue.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var re="closure_listenable_"+(Math.random()*1e6|0),P=0;function ie(f,b,x,A,Q){this.listener=f,this.proxy=null,this.src=b,this.type=x,this.capture=!!A,this.ha=Q,this.key=++P,this.da=this.fa=!1}function ve(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Ne(f,b,x){for(const A in f)b.call(x,f[A],A,f)}function we(f,b){for(const x in f)b.call(void 0,f[x],x,f)}function V(f){const b={};for(const x in f)b[x]=f[x];return b}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function K(f,b){let x,A;for(let Q=1;Q<arguments.length;Q++){A=arguments[Q];for(x in A)f[x]=A[x];for(let J=0;J<Z.length;J++)x=Z[J],Object.prototype.hasOwnProperty.call(A,x)&&(f[x]=A[x])}}function ne(f){this.src=f,this.g={},this.h=0}ne.prototype.add=function(f,b,x,A,Q){const J=f.toString();f=this.g[J],f||(f=this.g[J]=[],this.h++);const ge=_e(f,b,A,Q);return ge>-1?(b=f[ge],x||(b.fa=!1)):(b=new ie(b,this.src,J,!!A,Q),b.fa=x,f.push(b)),b};function ce(f,b){const x=b.type;if(x in f.g){var A=f.g[x],Q=Array.prototype.indexOf.call(A,b,void 0),J;(J=Q>=0)&&Array.prototype.splice.call(A,Q,1),J&&(ve(b),f.g[x].length==0&&(delete f.g[x],f.h--))}}function _e(f,b,x,A){for(let Q=0;Q<f.length;++Q){const J=f[Q];if(!J.da&&J.listener==b&&J.capture==!!x&&J.ha==A)return Q}return-1}var Ae="closure_lm_"+(Math.random()*1e6|0),We={};function ot(f,b,x,A,Q){if(Array.isArray(b)){for(let J=0;J<b.length;J++)ot(f,b[J],x,A,Q);return null}return x=Ri(x),f&&f[re]?f.J(b,x,h(A)?!!A.capture:!1,Q):ze(f,b,x,!1,A,Q)}function ze(f,b,x,A,Q,J){if(!b)throw Error("Invalid event type");const ge=h(Q)?!!Q.capture:!!Q;let Ge=er(f);if(Ge||(f[Ae]=Ge=new ne(f)),x=Ge.add(b,x,A,ge,J),x.proxy)return x;if(A=wt(),x.proxy=A,A.src=f,A.listener=x,f.addEventListener)z||(Q=ge),Q===void 0&&(Q=!1),f.addEventListener(b.toString(),A,Q);else if(f.attachEvent)f.attachEvent(rt(b.toString()),A);else if(f.addListener&&f.removeListener)f.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return x}function wt(){function f(x){return b.call(f.src,f.listener,x)}const b=jn;return f}function Rn(f,b,x,A,Q){if(Array.isArray(b))for(var J=0;J<b.length;J++)Rn(f,b[J],x,A,Q);else A=h(A)?!!A.capture:!!A,x=Ri(x),f&&f[re]?(f=f.i,J=String(b).toString(),J in f.g&&(b=f.g[J],x=_e(b,x,A,Q),x>-1&&(ve(b[x]),Array.prototype.splice.call(b,x,1),b.length==0&&(delete f.g[J],f.h--)))):f&&(f=er(f))&&(b=f.g[b.toString()],f=-1,b&&(f=_e(b,x,A,Q)),(x=f>-1?b[f]:null)&&ms(x))}function ms(f){if(typeof f!="number"&&f&&!f.da){var b=f.src;if(b&&b[re])ce(b.i,f);else{var x=f.type,A=f.proxy;b.removeEventListener?b.removeEventListener(x,A,f.capture):b.detachEvent?b.detachEvent(rt(x),A):b.addListener&&b.removeListener&&b.removeListener(A),(x=er(b))?(ce(x,f),x.h==0&&(x.src=null,b[Ae]=null)):ve(f)}}}function rt(f){return f in We?We[f]:We[f]="on"+f}function jn(f,b){if(f.da)f=!0;else{b=new Ue(b,this);const x=f.listener,A=f.ha||f.src;f.fa&&ms(f),f=x.call(A,b)}return f}function er(f){return f=f[Ae],f instanceof ne?f:null}var Sr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ri(f){return typeof f=="function"?f:(f[Sr]||(f[Sr]=function(b){return f.handleEvent(b)}),f[Sr])}function Mt(){B.call(this),this.i=new ne(this),this.M=this,this.G=null}w(Mt,B),Mt.prototype[re]=!0,Mt.prototype.removeEventListener=function(f,b,x,A){Rn(this,f,b,x,A)};function Ht(f,b){var x,A=f.G;if(A)for(x=[];A;A=A.G)x.push(A);if(f=f.M,A=b.type||b,typeof b=="string")b=new M(b,f);else if(b instanceof M)b.target=b.target||f;else{var Q=b;b=new M(A,f),K(b,Q)}Q=!0;let J,ge;if(x)for(ge=x.length-1;ge>=0;ge--)J=b.g=x[ge],Q=tr(J,A,!0,b)&&Q;if(J=b.g=f,Q=tr(J,A,!0,b)&&Q,Q=tr(J,A,!1,b)&&Q,x)for(ge=0;ge<x.length;ge++)J=b.g=x[ge],Q=tr(J,A,!1,b)&&Q}Mt.prototype.N=function(){if(Mt.Z.N.call(this),this.i){var f=this.i;for(const b in f.g){const x=f.g[b];for(let A=0;A<x.length;A++)ve(x[A]);delete f.g[b],f.h--}}this.G=null},Mt.prototype.J=function(f,b,x,A){return this.i.add(String(f),b,!1,x,A)},Mt.prototype.K=function(f,b,x,A){return this.i.add(String(f),b,!0,x,A)};function tr(f,b,x,A){if(b=f.i.g[String(b)],!b)return!0;b=b.concat();let Q=!0;for(let J=0;J<b.length;++J){const ge=b[J];if(ge&&!ge.da&&ge.capture==x){const Ge=ge.listener,Wt=ge.ha||ge.src;ge.fa&&ce(f.i,ge),Q=Ge.call(Wt,A)!==!1&&Q}}return Q&&!A.defaultPrevented}function Ga(f,b){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=p(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:c.setTimeout(f,b||0)}function sl(f){f.g=Ga(()=>{f.g=null,f.i&&(f.i=!1,sl(f))},f.l);const b=f.h;f.h=null,f.m.apply(null,b)}class En extends B{constructor(b,x){super(),this.m=b,this.l=x,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:sl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Os(f){B.call(this),this.h=f,this.g={}}w(Os,B);var nr=[];function Ka(f){Ne(f.g,function(b,x){this.g.hasOwnProperty(x)&&ms(b)},f),f.g={}}Os.prototype.N=function(){Os.Z.N.call(this),Ka(this)},Os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sr=c.JSON.stringify,rl=c.JSON.parse,Qa=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function Wa(){}function rr(){}var gs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Qt(){M.call(this,"d")}w(Qt,M);function es(){M.call(this,"c")}w(es,M);var Dt={},Ya=null;function Ar(){return Ya=Ya||new Mt}Dt.Ia="serverreachability";function Xa(f){M.call(this,Dt.Ia,f)}w(Xa,M);function On(f){const b=Ar();Ht(b,new Xa(b))}Dt.STAT_EVENT="statevent";function ei(f,b){M.call(this,Dt.STAT_EVENT,f),this.stat=b}w(ei,M);function pt(f){const b=Ar();Ht(b,new ei(b,f))}Dt.Ja="timingevent";function Ds(f,b){M.call(this,Dt.Ja,f),this.size=b}w(Ds,M);function Ps(f,b){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},b)}function Gn(){this.g=!0}Gn.prototype.ua=function(){this.g=!1};function ir(f,b,x,A,Q,J){f.info(function(){if(f.g)if(J){var ge="",Ge=J.split("&");for(let ht=0;ht<Ge.length;ht++){var Wt=Ge[ht].split("=");if(Wt.length>1){const Pt=Wt[0];Wt=Wt[1];const qs=Pt.split("_");ge=qs.length>=2&&qs[1]=="type"?ge+(Pt+"="+Wt+"&"):ge+(Pt+"=redacted&")}}}else ge=null;else ge=J;return"XMLHTTP REQ ("+A+") [attempt "+Q+"]: "+b+`
`+x+`
`+ge})}function il(f,b,x,A,Q,J,ge){f.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+Q+"]: "+b+`
`+x+`
`+J+" "+ge})}function Kn(f,b,x,A){f.info(function(){return"XMLHTTP TEXT ("+b+"): "+ji(f,x)+(A?" "+A:"")})}function Nr(f,b){f.info(function(){return"TIMEOUT: "+b})}Gn.prototype.info=function(){};function ji(f,b){if(!f.g)return b;if(!b)return null;try{const J=JSON.parse(b);if(J){for(f=0;f<J.length;f++)if(Array.isArray(J[f])){var x=J[f];if(!(x.length<2)){var A=x[1];if(Array.isArray(A)&&!(A.length<1)){var Q=A[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let ge=1;ge<A.length;ge++)A[ge]=""}}}}return sr(J)}catch{return b}}var Cr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ls={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Oi;function kr(){}w(kr,Wa),kr.prototype.g=function(){return new XMLHttpRequest},Oi=new kr;function Ms(f){return encodeURIComponent(String(f))}function Ja(f){var b=1;f=f.split(":");const x=[];for(;b>0&&f.length;)x.push(f.shift()),b--;return f.length&&x.push(f.join(":")),x}function Qn(f,b,x,A){this.j=f,this.i=b,this.l=x,this.S=A||1,this.V=new Os(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ps}function ps(){this.i=null,this.g="",this.h=!1}var qt={},nn={};function Vs(f,b,x){f.M=1,f.A=eo(pe(b)),f.u=x,f.R=!0,Di(f,null)}function Di(f,b){f.F=Date.now(),Us(f),f.B=pe(f.A);var x=f.B,A=f.S;Array.isArray(A)||(A=[String(A)]),cl(x.i,"t",A),f.C=0,x=f.j.L,f.h=new ps,f.g=th(f.j,x?b:null,!f.u),f.P>0&&(f.O=new En(p(f.Y,f,f.g),f.P)),b=f.V,x=f.g,A=f.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(nr[0]=Q.toString()),Q=nr);for(let J=0;J<Q.length;J++){const ge=ot(x,Q[J],A||b.handleEvent,!1,b.h||b);if(!ge)break;b.g[ge.key]=ge}b=f.J?V(f.J):{},f.u?(f.v||(f.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,b)):(f.v="GET",f.g.ea(f.B,f.v,null,b)),On(),ir(f.i,f.v,f.B,f.l,f.S,f.u)}Qn.prototype.ba=function(f){f=f.target;const b=this.O;b&&lr(f)==3?b.j():this.Y(f)},Qn.prototype.Y=function(f){try{if(f==this.g)e:{const Ge=lr(this.g),Wt=this.g.ya(),ht=this.g.ca();if(!(Ge<3)&&(Ge!=3||this.g&&(this.h.h||this.g.la()||Tn(this.g)))){this.K||Ge!=4||Wt==7||(Wt==8||ht<=0?On(3):On(2)),Bs(this);var b=this.g.ca();this.X=b;var x=Wc(this);if(this.o=b==200,il(this.i,this.v,this.B,this.l,this.S,Ge,b),this.o){if(this.U&&!this.L){t:{if(this.g){var A,Q=this.g;if((A=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(A)){var J=A;break t}}J=null}if(f=J)Kn(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ns(this,f);else{this.o=!1,this.m=3,pt(12),Dn(this),ts(this);break e}}if(this.R){f=!0;let Pt;for(;!this.K&&this.C<x.length;)if(Pt=ol(this,x),Pt==nn){Ge==4&&(this.m=4,pt(14),f=!1),Kn(this.i,this.l,null,"[Incomplete Response]");break}else if(Pt==qt){this.m=4,pt(15),Kn(this.i,this.l,x,"[Invalid Chunk]"),f=!1;break}else Kn(this.i,this.l,Pt,null),ns(this,Pt);if(al(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ge!=4||x.length!=0||this.h.h||(this.m=1,pt(16),f=!1),this.o=this.o&&f,!f)Kn(this.i,this.l,x,"[Invalid Chunked Response]"),Dn(this),ts(this);else if(x.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),ru(ge),ge.P=!0,pt(11))}}else Kn(this.i,this.l,x,null),ns(this,x);Ge==4&&Dn(this),this.o&&!this.K&&(Ge==4?Xd(this.j,this):(this.o=!1,Us(this)))}else ni(this.g),b==400&&x.indexOf("Unknown SID")>0?(this.m=3,pt(12)):(this.m=0,pt(13)),Dn(this),ts(this)}}}catch{}finally{}};function Wc(f){if(!al(f))return f.g.la();const b=Tn(f.g);if(b==="")return"";let x="";const A=b.length,Q=lr(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Dn(f),ts(f),"";f.h.i=new c.TextDecoder}for(let J=0;J<A;J++)f.h.h=!0,x+=f.h.i.decode(b[J],{stream:!(Q&&J==A-1)});return b.length=0,f.h.g+=x,f.C=0,f.h.g}function al(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function ol(f,b){var x=f.C,A=b.indexOf(`
`,x);return A==-1?nn:(x=Number(b.substring(x,A)),isNaN(x)?qt:(A+=1,A+x>b.length?nn:(b=b.slice(A,A+x),f.C=A+x,b)))}Qn.prototype.cancel=function(){this.K=!0,Dn(this)};function Us(f){f.T=Date.now()+f.H,Pi(f,f.H)}function Pi(f,b){if(f.D!=null)throw Error("WatchDog timer not null");f.D=Ps(p(f.aa,f),b)}function Bs(f){f.D&&(c.clearTimeout(f.D),f.D=null)}Qn.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(Nr(this.i,this.B),this.M!=2&&(On(),pt(17)),Dn(this),this.m=2,ts(this)):Pi(this,this.T-f)};function ts(f){f.j.I==0||f.K||Xd(f.j,f)}function Dn(f){Bs(f);var b=f.O;b&&typeof b.dispose=="function"&&b.dispose(),f.O=null,Ka(f.V),f.g&&(b=f.g,f.g=null,b.abort(),b.dispose())}function ns(f,b){try{var x=f.j;if(x.I!=0&&(x.g==f||Ln(x.h,f))){if(!f.L&&Ln(x.h,f)&&x.I==3){try{var A=x.Ba.g.parse(b)}catch{A=null}if(Array.isArray(A)&&A.length==3){var Q=A;if(Q[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<f.F)ml(x),Fi(x);else break e;oo(x),pt(18)}}else x.xa=Q[1],0<x.xa-x.K&&Q[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Ps(p(x.Va,x),6e3));Pn(x.h)<=1&&x.ta&&(x.ta=void 0)}else Pr(x,11)}else if((f.L||x.g==f)&&ml(x),!D(b))for(Q=x.Ba.g.parse(b),b=0;b<Q.length;b++){let ht=Q[b];const Pt=ht[0];if(!(Pt<=x.K))if(x.K=Pt,ht=ht[1],x.I==2)if(ht[0]=="c"){x.M=ht[1],x.ba=ht[2];const qs=ht[3];qs!=null&&(x.ka=qs,x.j.info("VER="+x.ka));const Lr=ht[4];Lr!=null&&(x.za=Lr,x.j.info("SVER="+x.za));const cr=ht[5];cr!=null&&typeof cr=="number"&&cr>0&&(A=1.5*cr,x.O=A,x.j.info("backChannelRequestTimeoutMs_="+A)),A=x;const ur=f.g;if(ur){const lo=ur.g?ur.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(lo){var J=A.h;J.g||lo.indexOf("spdy")==-1&&lo.indexOf("quic")==-1&&lo.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Mi(J,J.h),J.h=null))}if(A.G){const gl=ur.g?ur.g.getResponseHeader("X-HTTP-Session-Id"):null;gl&&(A.wa=gl,Ye(A.J,A.G,gl))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-f.F,x.j.info("Handshake RTT: "+x.T+"ms")),A=x;var ge=f;if(A.na=eh(A,A.L?A.ba:null,A.W),ge.L){Vi(A.h,ge);var Ge=ge,Wt=A.O;Wt&&(Ge.H=Wt),Ge.D&&(Bs(Ge),Us(Ge)),A.g=ge}else Wd(A);x.i.length>0&&Dr(x)}else ht[0]!="stop"&&ht[0]!="close"||Pr(x,7);else x.I==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?Pr(x,7):nu(x):ht[0]!="noop"&&x.l&&x.l.qa(ht),x.A=0)}}On(4)}catch{}}var $t=class{constructor(f,b){this.g=f,this.map=b}};function Za(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Li(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Pn(f){return f.h?1:f.g?f.g.size:0}function Ln(f,b){return f.h?f.h==b:f.g?f.g.has(b):!1}function Mi(f,b){f.g?f.g.add(b):f.h=b}function Vi(f,b){f.h&&f.h==b?f.h=null:f.g&&f.g.has(b)&&f.g.delete(b)}Za.prototype.cancel=function(){if(this.i=j(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function j(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let b=f.i;for(const x of f.g.values())b=b.concat(x.G);return b}return T(f.i)}var fe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ie(f,b){if(f){f=f.split("&");for(let x=0;x<f.length;x++){const A=f[x].indexOf("=");let Q,J=null;A>=0?(Q=f[x].substring(0,A),J=f[x].substring(A+1)):Q=f[x],b(Q,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Re(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;f instanceof Re?(this.l=f.l,Be(this,f.j),this.o=f.o,this.g=f.g,_t(this,f.u),this.h=f.h,Ft(this,Kd(f.i)),this.m=f.m):f&&(b=String(f).match(fe))?(this.l=!1,Be(this,b[1]||"",!0),this.o=Ir(b[2]||""),this.g=Ir(b[3]||"",!0),_t(this,b[4]),this.h=Ir(b[5]||"",!0),Ft(this,b[6]||"",!0),this.m=Ir(b[7]||"")):(this.l=!1,this.i=new Bi(null,this.l))}Re.prototype.toString=function(){const f=[];var b=this.j;b&&f.push(to(b,ll,!0),":");var x=this.g;return(x||b=="file")&&(f.push("//"),(b=this.o)&&f.push(to(b,ll,!0),"@"),f.push(Ms(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&f.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&f.push("/"),f.push(to(x,x.charAt(0)=="/"?Yc:$d,!0))),(x=this.i.toString())&&f.push("?",x),(x=this.m)&&f.push("#",to(x,Fd)),f.join("")},Re.prototype.resolve=function(f){const b=pe(this);let x=!!f.j;x?Be(b,f.j):x=!!f.o,x?b.o=f.o:x=!!f.g,x?b.g=f.g:x=f.u!=null;var A=f.h;if(x)_t(b,f.u);else if(x=!!f.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var Q=b.h.lastIndexOf("/");Q!=-1&&(A=b.h.slice(0,Q+1)+A)}if(Q=A,Q==".."||Q==".")A="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){A=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const J=[];for(let ge=0;ge<Q.length;){const Ge=Q[ge++];Ge=="."?A&&ge==Q.length&&J.push(""):Ge==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),A&&ge==Q.length&&J.push("")):(J.push(Ge),A=!0)}A=J.join("/")}else A=Q}return x?b.h=A:x=f.i.toString()!=="",x?Ft(b,Kd(f.i)):x=!!f.m,x&&(b.m=f.m),b};function pe(f){return new Re(f)}function Be(f,b,x){f.j=x?Ir(b,!0):b,f.j&&(f.j=f.j.replace(/:$/,""))}function _t(f,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);f.u=b}else f.u=null}function Ft(f,b,x){b instanceof Bi?(f.i=b,ul(f.i,f.l)):(x||(b=to(b,Ui)),f.i=new Bi(b,f.l))}function Ye(f,b,x){f.i.set(b,x)}function eo(f){return Ye(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function Ir(f,b){return f?b?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function to(f,b,x){return typeof f=="string"?(f=encodeURI(f).replace(b,ss),x&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function ss(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var ll=/[#\/\?@]/g,$d=/[#\?:]/g,Yc=/[#\?]/g,Ui=/[#\?@]/g,Fd=/#/g;function Bi(f,b){this.h=this.g=null,this.i=f||null,this.j=!!b}function rs(f){f.g||(f.g=new Map,f.h=0,f.i&&Ie(f.i,function(b,x){f.add(decodeURIComponent(b.replace(/\+/g," ")),x)}))}n=Bi.prototype,n.add=function(f,b){rs(this),this.i=null,f=zi(this,f);let x=this.g.get(f);return x||this.g.set(f,x=[]),x.push(b),this.h+=1,this};function Gd(f,b){rs(f),b=zi(f,b),f.g.has(b)&&(f.i=null,f.h-=f.g.get(b).length,f.g.delete(b))}function Xc(f,b){return rs(f),b=zi(f,b),f.g.has(b)}n.forEach=function(f,b){rs(this),this.g.forEach(function(x,A){x.forEach(function(Q){f.call(b,Q,A,this)},this)},this)};function Jc(f,b){rs(f);let x=[];if(typeof b=="string")Xc(f,b)&&(x=x.concat(f.g.get(zi(f,b))));else for(f=Array.from(f.g.values()),b=0;b<f.length;b++)x=x.concat(f[b]);return x}n.set=function(f,b){return rs(this),this.i=null,f=zi(this,f),Xc(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[b]),this.h+=1,this},n.get=function(f,b){return f?(f=Jc(this,f),f.length>0?String(f[0]):b):b};function cl(f,b,x){Gd(f,b),x.length>0&&(f.i=null,f.g.set(zi(f,b),T(x)),f.h+=x.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],b=Array.from(this.g.keys());for(let A=0;A<b.length;A++){var x=b[A];const Q=Ms(x);x=Jc(this,x);for(let J=0;J<x.length;J++){let ge=Q;x[J]!==""&&(ge+="="+Ms(x[J])),f.push(ge)}}return this.i=f.join("&")};function Kd(f){const b=new Bi;return b.i=f.i,f.g&&(b.g=new Map(f.g),b.h=f.h),b}function zi(f,b){return b=String(b),f.j&&(b=b.toLowerCase()),b}function ul(f,b){b&&!f.j&&(rs(f),f.i=null,f.g.forEach(function(x,A){const Q=A.toLowerCase();A!=Q&&(Gd(this,A),cl(this,Q,x))},f)),f.j=b}function ar(f,b){const x=new Gn;if(c.Image){const A=new Image;A.onload=v(zs,x,"TestLoadImage: loaded",!0,b,A),A.onerror=v(zs,x,"TestLoadImage: error",!1,b,A),A.onabort=v(zs,x,"TestLoadImage: abort",!1,b,A),A.ontimeout=v(zs,x,"TestLoadImage: timeout",!1,b,A),c.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=f}else b(!1)}function Zc(f,b){const x=new Gn,A=new AbortController,Q=setTimeout(()=>{A.abort(),zs(x,"TestPingServer: timeout",!1,b)},1e4);fetch(f,{signal:A.signal}).then(J=>{clearTimeout(Q),J.ok?zs(x,"TestPingServer: ok",!0,b):zs(x,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(Q),zs(x,"TestPingServer: error",!1,b)})}function zs(f,b,x,A,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),A(x)}catch{}}function Hi(){this.g=new Qa}function Rr(f){this.i=f.Sb||null,this.h=f.ab||!1}w(Rr,Wa),Rr.prototype.g=function(){return new no(this.i,this.h)};function no(f,b){Mt.call(this),this.H=f,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(no,Mt),n=no.prototype,n.open=function(f,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=b,this.readyState=1,or(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(b.body=f),(this.H||c).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,qi(this)),this.readyState=0},n.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,or(this)),this.g&&(this.readyState=3,or(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;dl(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function dl(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}n.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var b=f.value?f.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!f.done}))&&(this.response=this.responseText+=b)}f.done?qi(this):or(this),this.readyState==3&&dl(this)}},n.Oa=function(f){this.g&&(this.response=this.responseText=f,qi(this))},n.Na=function(f){this.g&&(this.response=f,qi(this))},n.ga=function(){this.g&&qi(this)};function qi(f){f.readyState=4,f.l=null,f.j=null,f.B=null,or(f)}n.setRequestHeader=function(f,b){this.A.append(f,b)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],b=this.h.entries();for(var x=b.next();!x.done;)x=x.value,f.push(x[0]+": "+x[1]),x=b.next();return f.join(`\r
`)};function or(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(no.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Hs(f){let b="";return Ne(f,function(x,A){b+=A,b+=":",b+=x,b+=`\r
`}),b}function so(f,b,x){e:{for(A in x){var A=!1;break e}A=!0}A||(x=Hs(x),typeof f=="string"?x!=null&&Ms(x):Ye(f,b,x))}function xt(f){Mt.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(xt,Mt);var jr=/^https?$/i,eu=["POST","PUT"];n=xt.prototype,n.Fa=function(f){this.H=f},n.ea=function(f,b,x,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);b=b?b.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Oi.g(),this.g.onreadystatechange=E(p(this.Ca,this));try{this.B=!0,this.g.open(b,String(f),!0),this.B=!1}catch(J){ro(this,J);return}if(f=x||"",x=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var Q in A)x.set(Q,A[Q]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const J of A.keys())x.set(J,A.get(J));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(x.keys()).find(J=>J.toLowerCase()=="content-type"),Q=c.FormData&&f instanceof c.FormData,!(Array.prototype.indexOf.call(eu,b,void 0)>=0)||A||Q||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ge]of x)this.g.setRequestHeader(J,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(J){ro(this,J)}};function ro(f,b){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=b,f.o=5,tu(f),ti(f)}function tu(f){f.A||(f.A=!0,Ht(f,"complete"),Ht(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,Ht(this,"complete"),Ht(this,"abort"),ti(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ti(this,!0)),xt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?io(this):this.Xa())},n.Xa=function(){io(this)};function io(f){if(f.h&&typeof o<"u"){if(f.v&&lr(f)==4)setTimeout(f.Ca.bind(f),0);else if(Ht(f,"readystatechange"),lr(f)==4){f.h=!1;try{const J=f.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var x;if(!(x=b)){var A;if(A=J===0){let ge=String(f.D).match(fe)[1]||null;!ge&&c.self&&c.self.location&&(ge=c.self.location.protocol.slice(0,-1)),A=!jr.test(ge?ge.toLowerCase():"")}x=A}if(x)Ht(f,"complete"),Ht(f,"success");else{f.o=6;try{var Q=lr(f)>2?f.g.statusText:""}catch{Q=""}f.l=Q+" ["+f.ca()+"]",tu(f)}}finally{ti(f)}}}}function ti(f,b){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const x=f.g;f.g=null,b||Ht(f,"ready");try{x.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function lr(f){return f.g?f.g.readyState:0}n.ca=function(){try{return lr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(f){if(this.g){var b=this.g.responseText;return f&&b.indexOf(f)==0&&(b=b.substring(f.length)),rl(b)}};function Tn(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function ni(f){const b={};f=(f.g&&lr(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<f.length;A++){if(D(f[A]))continue;var x=Ja(f[A]);const Q=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const J=b[Q]||[];b[Q]=J,J.push(x)}we(b,function(A){return A.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Or(f,b,x){return x&&x.internalChannelParams&&x.internalChannelParams[f]||b}function $i(f){this.za=0,this.i=[],this.j=new Gn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Or("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Or("baseRetryDelayMs",5e3,f),this.Za=Or("retryDelaySeedMs",1e4,f),this.Ta=Or("forwardChannelMaxRetries",2,f),this.va=Or("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new Za(f&&f.concurrentRequestLimit),this.Ba=new Hi,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=$i.prototype,n.ka=8,n.I=1,n.connect=function(f,b,x,A){pt(0),this.W=f,this.H=b||{},x&&A!==void 0&&(this.H.OSID=x,this.H.OAID=A),this.F=this.X,this.J=eh(this,null,this.W),Dr(this)};function nu(f){if(hl(f),f.I==3){var b=f.V++,x=pe(f.J);if(Ye(x,"SID",f.M),Ye(x,"RID",b),Ye(x,"TYPE","terminate"),ao(f,x),b=new Qn(f,f.j,b),b.M=2,b.A=eo(pe(x)),x=!1,c.navigator&&c.navigator.sendBeacon)try{x=c.navigator.sendBeacon(b.A.toString(),"")}catch{}!x&&c.Image&&(new Image().src=b.A,x=!0),x||(b.g=th(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Us(b)}Zd(f)}function Fi(f){f.g&&(ru(f),f.g.cancel(),f.g=null)}function hl(f){Fi(f),f.v&&(c.clearTimeout(f.v),f.v=null),ml(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&c.clearTimeout(f.m),f.m=null)}function Dr(f){if(!Li(f.h)&&!f.m){f.m=!0;var b=f.Ea;me||C(),he||(me(),he=!0),N.add(b,f),f.D=0}}function fl(f,b){return Pn(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=b.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=Ps(p(f.Ea,f,b),Jd(f,f.D)),f.D++,!0)}n.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const Q=new Qn(this,this.j,f);let J=this.o;if(this.U&&(J?(J=V(J),K(J,this.U)):J=this.U),this.u!==null||this.R||(Q.J=J,J=null),this.S)e:{for(var b=0,x=0;x<this.i.length;x++){t:{var A=this.i[x];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(b+=A,b>4096){b=x;break e}if(b===4096||x===this.i.length-1){b=x+1;break e}}b=1e3}else b=1e3;b=Qd(this,Q,b),x=pe(this.J),Ye(x,"RID",f),Ye(x,"CVER",22),this.G&&Ye(x,"X-HTTP-Session-Id",this.G),ao(this,x),J&&(this.R?b="headers="+Ms(Hs(J))+"&"+b:this.u&&so(x,this.u,J)),Mi(this.h,Q),this.Ra&&Ye(x,"TYPE","init"),this.S?(Ye(x,"$req",b),Ye(x,"SID","null"),Q.U=!0,Vs(Q,x,null)):Vs(Q,x,b),this.I=2}}else this.I==3&&(f?su(this,f):this.i.length==0||Li(this.h)||su(this))};function su(f,b){var x;b?x=b.l:x=f.V++;const A=pe(f.J);Ye(A,"SID",f.M),Ye(A,"RID",x),Ye(A,"AID",f.K),ao(f,A),f.u&&f.o&&so(A,f.u,f.o),x=new Qn(f,f.j,x,f.D+1),f.u===null&&(x.J=f.o),b&&(f.i=b.G.concat(f.i)),b=Qd(f,x,1e3),x.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),Mi(f.h,x),Vs(x,A,b)}function ao(f,b){f.H&&Ne(f.H,function(x,A){Ye(b,A,x)}),f.l&&Ne({},function(x,A){Ye(b,A,x)})}function Qd(f,b,x){x=Math.min(f.i.length,x);const A=f.l?p(f.l.Ka,f.l,f):null;e:{var Q=f.i;let Ge=-1;for(;;){const Wt=["count="+x];Ge==-1?x>0?(Ge=Q[0].g,Wt.push("ofs="+Ge)):Ge=0:Wt.push("ofs="+Ge);let ht=!0;for(let Pt=0;Pt<x;Pt++){var J=Q[Pt].g;const qs=Q[Pt].map;if(J-=Ge,J<0)Ge=Math.max(0,Q[Pt].g-100),ht=!1;else try{J="req"+J+"_"||"";try{var ge=qs instanceof Map?qs:Object.entries(qs);for(const[Lr,cr]of ge){let ur=cr;h(cr)&&(ur=sr(cr)),Wt.push(J+Lr+"="+encodeURIComponent(ur))}}catch(Lr){throw Wt.push(J+"type="+encodeURIComponent("_badmap")),Lr}}catch{A&&A(qs)}}if(ht){ge=Wt.join("&");break e}}ge=void 0}return f=f.i.splice(0,x),b.G=f,ge}function Wd(f){if(!f.g&&!f.v){f.Y=1;var b=f.Da;me||C(),he||(me(),he=!0),N.add(b,f),f.A=0}}function oo(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=Ps(p(f.Da,f),Jd(f,f.A)),f.A++,!0)}n.Da=function(){if(this.v=null,Yd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=Ps(p(this.Wa,this),f)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,pt(10),Fi(this),Yd(this))};function ru(f){f.B!=null&&(c.clearTimeout(f.B),f.B=null)}function Yd(f){f.g=new Qn(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var b=pe(f.na);Ye(b,"RID","rpc"),Ye(b,"SID",f.M),Ye(b,"AID",f.K),Ye(b,"CI",f.F?"0":"1"),!f.F&&f.ia&&Ye(b,"TO",f.ia),Ye(b,"TYPE","xmlhttp"),ao(f,b),f.u&&f.o&&so(b,f.u,f.o),f.O&&(f.g.H=f.O);var x=f.g;f=f.ba,x.M=1,x.A=eo(pe(b)),x.u=null,x.R=!0,Di(x,f)}n.Va=function(){this.C!=null&&(this.C=null,Fi(this),oo(this),pt(19))};function ml(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function Xd(f,b){var x=null;if(f.g==b){ml(f),ru(f),f.g=null;var A=2}else if(Ln(f.h,b))x=b.G,Vi(f.h,b),A=1;else return;if(f.I!=0){if(b.o)if(A==1){x=b.u?b.u.length:0,b=Date.now()-b.F;var Q=f.D;A=Ar(),Ht(A,new Ds(A,x)),Dr(f)}else Wd(f);else if(Q=b.m,Q==3||Q==0&&b.X>0||!(A==1&&fl(f,b)||A==2&&oo(f)))switch(x&&x.length>0&&(b=f.h,b.i=b.i.concat(x)),Q){case 1:Pr(f,5);break;case 4:Pr(f,10);break;case 3:Pr(f,6);break;default:Pr(f,2)}}}function Jd(f,b){let x=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(x*=2),x*b}function Pr(f,b){if(f.j.info("Error code "+b),b==2){var x=p(f.bb,f),A=f.Ua;const Q=!A;A=new Re(A||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Be(A,"https"),eo(A),Q?ar(A.toString(),x):Zc(A.toString(),x)}else pt(2);f.I=0,f.l&&f.l.pa(b),Zd(f),hl(f)}n.bb=function(f){f?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function Zd(f){if(f.I=0,f.ja=[],f.l){const b=j(f.h);(b.length!=0||f.i.length!=0)&&(k(f.ja,b),k(f.ja,f.i),f.h.i.length=0,T(f.i),f.i.length=0),f.l.oa()}}function eh(f,b,x){var A=x instanceof Re?pe(x):new Re(x);if(A.g!="")b&&(A.g=b+"."+A.g),_t(A,A.u);else{var Q=c.location;A=Q.protocol,b=b?b+"."+Q.hostname:Q.hostname,Q=+Q.port;const J=new Re(null);A&&Be(J,A),b&&(J.g=b),Q&&_t(J,Q),x&&(J.h=x),A=J}return x=f.G,b=f.wa,x&&b&&Ye(A,x,b),Ye(A,"VER",f.ka),ao(f,A),A}function th(f,b,x){if(b&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=f.Aa&&!f.ma?new xt(new Rr({ab:x})):new xt(f.ma),b.Fa(f.L),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function nh(){}n=nh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Gi(){}Gi.prototype.g=function(f,b){return new Wn(f,b)};function Wn(f,b){Mt.call(this),this.g=new $i(b),this.l=f,this.h=b&&b.messageUrlParams||null,f=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(f?f["X-WebChannel-Content-Type"]=b.messageContentType:f={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(f?f["X-WebChannel-Client-Profile"]=b.sa:f={"X-WebChannel-Client-Profile":b.sa}),this.g.U=f,(f=b&&b.Qb)&&!D(f)&&(this.g.u=f),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!D(b)&&(this.g.G=b,f=this.h,f!==null&&b in f&&(f=this.h,b in f&&delete f[b])),this.j=new si(this)}w(Wn,Mt),Wn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Wn.prototype.close=function(){nu(this.g)},Wn.prototype.o=function(f){var b=this.g;if(typeof f=="string"){var x={};x.__data__=f,f=x}else this.v&&(x={},x.__data__=sr(f),f=x);b.i.push(new $t(b.Ya++,f)),b.I==3&&Dr(b)},Wn.prototype.N=function(){this.g.l=null,delete this.j,nu(this.g),delete this.g,Wn.Z.N.call(this)};function sh(f){Qt.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var b=f.__sm__;if(b){e:{for(const x in b){f=x;break e}f=void 0}(this.i=f)&&(f=this.i,b=b!==null&&f in b?b[f]:void 0),this.data=b}else this.data=f}w(sh,Qt);function rh(){es.call(this),this.status=1}w(rh,es);function si(f){this.g=f}w(si,nh),si.prototype.ra=function(){Ht(this.g,"a")},si.prototype.qa=function(f){Ht(this.g,new sh(f))},si.prototype.pa=function(f){Ht(this.g,new rh)},si.prototype.oa=function(){Ht(this.g,"b")},Gi.prototype.createWebChannel=Gi.prototype.g,Wn.prototype.send=Wn.prototype.o,Wn.prototype.open=Wn.prototype.m,Wn.prototype.close=Wn.prototype.close,KE=function(){return new Gi},GE=function(){return Ar()},FE=Dt,W0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Cr.NO_ERROR=0,Cr.TIMEOUT=8,Cr.HTTP_ERROR=6,kf=Cr,Ls.COMPLETE="complete",$E=Ls,rr.EventType=gs,gs.OPEN="a",gs.CLOSE="b",gs.ERROR="c",gs.MESSAGE="d",Mt.prototype.listen=Mt.prototype.J,Fu=rr,xt.prototype.listenOnce=xt.prototype.K,xt.prototype.getLastError=xt.prototype.Ha,xt.prototype.getLastErrorCode=xt.prototype.ya,xt.prototype.getStatus=xt.prototype.ca,xt.prototype.getResponseJson=xt.prototype.La,xt.prototype.getResponseText=xt.prototype.la,xt.prototype.send=xt.prototype.ea,xt.prototype.setWithCredentials=xt.prototype.Fa,qE=xt}).apply(typeof cf<"u"?cf:typeof self<"u"?self:typeof window<"u"?window:{});const s_="@firebase/firestore",r_="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bn.UNAUTHENTICATED=new Bn(null),Bn.GOOGLE_CREDENTIALS=new Bn("google-credentials-uid"),Bn.FIRST_PARTY=new Bn("first-party-uid"),Bn.MOCK_USER=new Bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=new qy("@firebase/firestore");function Xl(){return zo.logLevel}function xe(n,...e){if(zo.logLevel<=tt.DEBUG){const t=e.map(Fy);zo.debug(`Firestore (${Pc}): ${n}`,...t)}}function Ci(n,...e){if(zo.logLevel<=tt.ERROR){const t=e.map(Fy);zo.error(`Firestore (${Pc}): ${n}`,...t)}}function Ho(n,...e){if(zo.logLevel<=tt.WARN){const t=e.map(Fy);zo.warn(`Firestore (${Pc}): ${n}`,...t)}}function Fy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,QE(n,s,t)}function QE(n,e,t){let s=`FIRESTORE (${Pc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Ci(s),new Error(s)}function gt(n,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,n||QE(e,a,s)}function $e(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Jr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Bn.UNAUTHENTICATED)))}shutdown(){}}class eC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class tC{constructor(e){this.t=e,this.currentUser=Bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){gt(this.o===void 0,42304);let s=this.i;const a=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let o=new xi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new xi,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const g=o;e.enqueueRetryable((async()=>{await g.promise,await a(this.currentUser)}))},h=g=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>h(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?h(g):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new xi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(gt(typeof s.accessToken=="string",31837,{l:s}),new WE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return gt(e===null||typeof e=="string",2055,{h:e}),new Bn(e)}}class nC{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class sC{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new nC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class i_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rC{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ss(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){gt(this.o===void 0,3512);const s=o=>{o.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,xe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>s(o)))};const a=o=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>a(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?a(o):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new i_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(gt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new i_(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=iC(40);for(let o=0;o<a.length;++o)s.length<20&&a[o]<t&&(s+=e.charAt(a[o]%62))}return s}}function nt(n,e){return n<e?-1:n>e?1:0}function Y0(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const a=n.charAt(s),o=e.charAt(s);if(a!==o)return b0(a)===b0(o)?nt(a,o):b0(a)?1:-1}return nt(n.length,e.length)}const aC=55296,oC=57343;function b0(n){const e=n.charCodeAt(0);return e>=aC&&e<=oC}function vc(n,e,t){return n.length===e.length&&n.every(((s,a)=>t(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="__name__";class Hr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ve(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ve(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Hr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Hr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const o=Hr.compareSegments(e.get(a),t.get(a));if(o!==0)return o}return nt(e.length,t.length)}static compareSegments(e,t){const s=Hr.isNumericId(e),a=Hr.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?Hr.extractNumericId(e).compare(Hr.extractNumericId(t)):Y0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ca.fromString(e.substring(4,e.length-2))}}class It extends Hr{construct(e,t,s){return new It(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ye(le.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new It(t)}static emptyPath(){return new It([])}}const lC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wn extends Hr{construct(e,t,s){return new wn(e,t,s)}static isValidIdentifier(e){return lC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===X0}static keyField(){return new wn([X0])}static fromServerFormat(e){const t=[];let s="",a=0;const o=()=>{if(s.length===0)throw new ye(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new ye(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ye(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,a+=2}else h==="`"?(c=!c,a++):h!=="."||c?(s+=h,a++):(o(),a++)}if(o(),c)throw new ye(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wn(t)}static emptyPath(){return new wn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.path=e}static fromPath(e){return new je(It.fromString(e))}static fromName(e){return new je(It.fromString(e).popFirst(5))}static empty(){return new je(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&It.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return It.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new It(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(n,e,t){if(!t)throw new ye(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function JE(n,e,t,s){if(e===!0&&s===!0)throw new ye(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function a_(n){if(!je.isDocumentKey(n))throw new ye(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function o_(n){if(je.isDocumentKey(n))throw new ye(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ZE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Rm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ve(12329,{type:typeof n})}function Hn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Rm(n);throw new ye(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Td(n,e){if(!ZE(n))throw new ye(le.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,o="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(a&&typeof c!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(o!==void 0&&c!==o.value){t=`Expected '${s}' field to equal '${o.value}'`;break}}if(t)throw new ye(le.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_=-62135596800,c_=1e6;class Nt{static now(){return Nt.fromMillis(Date.now())}static fromDate(e){return Nt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*c_);return new Nt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<l_)throw new ye(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/c_}_compareTo(e){return this.seconds===e.seconds?nt(this.nanoseconds,e.nanoseconds):nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Td(e,Nt._jsonSchema))return new Nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-l_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Nt._jsonSchemaVersion="firestore/timestamp/1.0",Nt._jsonSchema={type:hn("string",Nt._jsonSchemaVersion),seconds:hn("number"),nanoseconds:hn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{static fromTimestamp(e){return new He(e)}static min(){return new He(new Nt(0,0))}static max(){return new He(new Nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od=-1;function cC(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=He.fromTimestamp(s===1e9?new Nt(t+1,0):new Nt(t,s));return new ja(a,je.empty(),e)}function uC(n){return new ja(n.readTime,n.key,od)}class ja{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ja(He.min(),je.empty(),od)}static max(){return new ja(He.max(),je.empty(),od)}}function dC(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=je.comparator(n.documentKey,e.documentKey),t!==0?t:nt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lc(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==hC)throw n;xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de(((s,a)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(s,a)},this.catchCallback=o=>{this.wrapFailure(t,o).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):de.reject(t)}static resolve(e){return new de(((t,s)=>{t(e)}))}static reject(e){return new de(((t,s)=>{s(e)}))}static waitFor(e){return new de(((t,s)=>{let a=0,o=0,c=!1;e.forEach((h=>{++a,h.next((()=>{++o,c&&o===a&&t()}),(g=>s(g)))})),c=!0,o===a&&t()}))}static or(e){let t=de.resolve(!1);for(const s of e)t=t.next((a=>a?de.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,o)=>{s.push(t.call(this,a,o))})),this.waitFor(s)}static mapArray(e,t){return new de(((s,a)=>{const o=e.length,c=new Array(o);let h=0;for(let g=0;g<o;g++){const p=g;t(e[p]).next((v=>{c[p]=v,++h,h===o&&s(c)}),(v=>a(v)))}}))}static doWhile(e,t){return new de(((s,a)=>{const o=()=>{e()===!0?t().next((()=>{o()}),a):s()};o()}))}}function mC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Mc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}jm.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy=-1;function Om(n){return n==null}function Uf(n){return n===0&&1/n==-1/0}function gC(n){return typeof n=="number"&&Number.isInteger(n)&&!Uf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="";function pC(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=u_(e)),e=yC(n.get(t),e);return u_(e)}function yC(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const o=n.charAt(a);switch(o){case"\0":t+="";break;case eT:t+="";break;default:t+=o}}return t}function u_(n){return n+eT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ba(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function tT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,t){this.comparator=e,this.root=t||In.EMPTY}insert(e,t){return new zt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,In.BLACK,null,null))}remove(e){return new zt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,In.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uf(this.root,e,this.comparator,!1)}getReverseIterator(){return new uf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uf(this.root,e,this.comparator,!0)}}class uf{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?s(e.key,t):1,t&&a&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class In{constructor(e,t,s,a,o){this.key=e,this.value=t,this.color=s??In.RED,this.left=a??In.EMPTY,this.right=o??In.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,o){return new In(e??this.key,t??this.value,s??this.color,a??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const o=s(e,a.key);return a=o<0?a.copy(null,null,null,a.left.insert(e,t,s),null):o===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return In.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return In.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,In.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,In.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ve(27949);return e+(this.isRed()?0:1)}}In.EMPTY=null,In.RED=!0,In.BLACK=!1;In.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve(57766)}get value(){throw Ve(16141)}get color(){throw Ve(16727)}get left(){throw Ve(29726)}get right(){throw Ve(36894)}copy(e,t,s,a,o){return this}insert(e,t,s){return new In(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.comparator=e,this.data=new zt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new h_(this.data.getIterator())}getIteratorFrom(e){return new h_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof yn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,o=s.getNext().key;if(this.comparator(a,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new yn(this.comparator);return t.data=e,t}}class h_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this.fields=e,e.sort(wn.comparator)}static empty(){return new ks([])}unionWith(e){let t=new yn(wn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ks(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return vc(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new nT("Invalid base64 string: "+o):o}})(e);return new _n(t)}static fromUint8Array(e){const t=(function(a){let o="";for(let c=0;c<a.length;++c)o+=String.fromCharCode(a[c]);return o})(e);return new _n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_n.EMPTY_BYTE_STRING=new _n("");const vC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oa(n){if(gt(!!n,39018),typeof n=="string"){let e=0;const t=vC.exec(n);if(gt(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Zt(n.seconds),nanos:Zt(n.nanos)}}function Zt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Da(n){return typeof n=="string"?_n.fromBase64String(n):_n.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="server_timestamp",rT="__type__",iT="__previous_value__",aT="__local_write_time__";function Ky(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[rT])==null?void 0:s.stringValue)===sT}function Dm(n){const e=n.mapValue.fields[iT];return Ky(e)?Dm(e):e}function ld(n){const e=Oa(n.mapValue.fields[aT].timestampValue);return new Nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,t,s,a,o,c,h,g,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=v}}const Bf="(default)";class bc{constructor(e,t){this.projectId=e,this.database=t||Bf}static empty(){return new bc("","")}get isDefaultDatabase(){return this.database===Bf}isEqual(e){return e instanceof bc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="__type__",wC="__max__",df={mapValue:{}},lT="__vector__",zf="value";function Pa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ky(n)?4:xC(n)?9007199254740991:_C(n)?10:11:Ve(28295,{value:n})}function Wr(n,e){if(n===e)return!0;const t=Pa(n);if(t!==Pa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ld(n).isEqual(ld(e));case 3:return(function(a,o){if(typeof a.timestampValue=="string"&&typeof o.timestampValue=="string"&&a.timestampValue.length===o.timestampValue.length)return a.timestampValue===o.timestampValue;const c=Oa(a.timestampValue),h=Oa(o.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,o){return Da(a.bytesValue).isEqual(Da(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,o){return Zt(a.geoPointValue.latitude)===Zt(o.geoPointValue.latitude)&&Zt(a.geoPointValue.longitude)===Zt(o.geoPointValue.longitude)})(n,e);case 2:return(function(a,o){if("integerValue"in a&&"integerValue"in o)return Zt(a.integerValue)===Zt(o.integerValue);if("doubleValue"in a&&"doubleValue"in o){const c=Zt(a.doubleValue),h=Zt(o.doubleValue);return c===h?Uf(c)===Uf(h):isNaN(c)&&isNaN(h)}return!1})(n,e);case 9:return vc(n.arrayValue.values||[],e.arrayValue.values||[],Wr);case 10:case 11:return(function(a,o){const c=a.mapValue.fields||{},h=o.mapValue.fields||{};if(d_(c)!==d_(h))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(h[g]===void 0||!Wr(c[g],h[g])))return!1;return!0})(n,e);default:return Ve(52216,{left:n})}}function cd(n,e){return(n.values||[]).find((t=>Wr(t,e)))!==void 0}function wc(n,e){if(n===e)return 0;const t=Pa(n),s=Pa(e);if(t!==s)return nt(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return nt(n.booleanValue,e.booleanValue);case 2:return(function(o,c){const h=Zt(o.integerValue||o.doubleValue),g=Zt(c.integerValue||c.doubleValue);return h<g?-1:h>g?1:h===g?0:isNaN(h)?isNaN(g)?0:-1:1})(n,e);case 3:return f_(n.timestampValue,e.timestampValue);case 4:return f_(ld(n),ld(e));case 5:return Y0(n.stringValue,e.stringValue);case 6:return(function(o,c){const h=Da(o),g=Da(c);return h.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(o,c){const h=o.split("/"),g=c.split("/");for(let p=0;p<h.length&&p<g.length;p++){const v=nt(h[p],g[p]);if(v!==0)return v}return nt(h.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,c){const h=nt(Zt(o.latitude),Zt(c.latitude));return h!==0?h:nt(Zt(o.longitude),Zt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return m_(n.arrayValue,e.arrayValue);case 10:return(function(o,c){var E,T,k,L;const h=o.fields||{},g=c.fields||{},p=(E=h[zf])==null?void 0:E.arrayValue,v=(T=g[zf])==null?void 0:T.arrayValue,w=nt(((k=p==null?void 0:p.values)==null?void 0:k.length)||0,((L=v==null?void 0:v.values)==null?void 0:L.length)||0);return w!==0?w:m_(p,v)})(n.mapValue,e.mapValue);case 11:return(function(o,c){if(o===df.mapValue&&c===df.mapValue)return 0;if(o===df.mapValue)return 1;if(c===df.mapValue)return-1;const h=o.fields||{},g=Object.keys(h),p=c.fields||{},v=Object.keys(p);g.sort(),v.sort();for(let w=0;w<g.length&&w<v.length;++w){const E=Y0(g[w],v[w]);if(E!==0)return E;const T=wc(h[g[w]],p[v[w]]);if(T!==0)return T}return nt(g.length,v.length)})(n.mapValue,e.mapValue);default:throw Ve(23264,{he:t})}}function f_(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return nt(n,e);const t=Oa(n),s=Oa(e),a=nt(t.seconds,s.seconds);return a!==0?a:nt(t.nanos,s.nanos)}function m_(n,e){const t=n.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const o=wc(t[a],s[a]);if(o)return o}return nt(t.length,s.length)}function _c(n){return J0(n)}function J0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Oa(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Da(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return je.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",a=!0;for(const o of t.values||[])a?a=!1:s+=",",s+=J0(o);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",o=!0;for(const c of s)o?o=!1:a+=",",a+=`${c}:${J0(t.fields[c])}`;return a+"}"})(n.mapValue):Ve(61005,{value:n})}function If(n){switch(Pa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Dm(n);return e?16+If(e):16;case 5:return 2*n.stringValue.length;case 6:return Da(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,o)=>a+If(o)),0)})(n.arrayValue);case 10:case 11:return(function(s){let a=0;return Ba(s.fields,((o,c)=>{a+=o.length+If(c)})),a})(n.mapValue);default:throw Ve(13486,{value:n})}}function g_(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Z0(n){return!!n&&"integerValue"in n}function Qy(n){return!!n&&"arrayValue"in n}function p_(n){return!!n&&"nullValue"in n}function y_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Rf(n){return!!n&&"mapValue"in n}function _C(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[oT])==null?void 0:s.stringValue)===lT}function Yu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ba(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Yu(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yu(n.arrayValue.values[t]);return e}return{...n}}function xC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===wC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this.value=e}static empty(){return new hs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Rf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yu(t)}setAll(e){let t=wn.emptyPath(),s={},a=[];e.forEach(((c,h)=>{if(!t.isImmediateParentOf(h)){const g=this.getFieldsMap(t);this.applyChanges(g,s,a),s={},a=[],t=h.popLast()}c?s[h.lastSegment()]=Yu(c):a.push(h.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,s,a)}delete(e){const t=this.field(e.popLast());Rf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];Rf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Ba(t,((a,o)=>e[a]=o));for(const a of s)delete e[a]}clone(){return new hs(Yu(this.value))}}function cT(n){const e=[];return Ba(n.fields,((t,s)=>{const a=new wn([t]);if(Rf(s)){const o=cT(s.mapValue).fields;if(o.length===0)e.push(a);else for(const c of o)e.push(a.child(c))}else e.push(a)})),new ks(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,t,s,a,o,c,h){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=o,this.data=c,this.documentState=h}static newInvalidDocument(e){return new zn(e,0,He.min(),He.min(),He.min(),hs.empty(),0)}static newFoundDocument(e,t,s,a){return new zn(e,1,t,He.min(),s,a,0)}static newNoDocument(e,t){return new zn(e,2,t,He.min(),He.min(),hs.empty(),0)}static newUnknownDocument(e,t){return new zn(e,3,t,He.min(),He.min(),hs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(He.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=He.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,t){this.position=e,this.inclusive=t}}function v_(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const o=e[a],c=n.position[a];if(o.field.isKeyField()?s=je.comparator(je.fromName(c.referenceValue),t.key):s=wc(c,t.data.field(o.field)),o.dir==="desc"&&(s*=-1),s!==0)break}return s}function b_(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t="asc"){this.field=e,this.dir=t}}function EC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{}class dn extends uT{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new SC(e,t,s):t==="array-contains"?new CC(e,s):t==="in"?new kC(e,s):t==="not-in"?new IC(e,s):t==="array-contains-any"?new RC(e,s):new dn(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new AC(e,s):new NC(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(wc(t,this.value)):t!==null&&Pa(this.value)===Pa(t)&&this.matchesComparison(wc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xr extends uT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new xr(e,t)}matches(e){return dT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dT(n){return n.op==="and"}function hT(n){return TC(n)&&dT(n)}function TC(n){for(const e of n.filters)if(e instanceof xr)return!1;return!0}function ey(n){if(n instanceof dn)return n.field.canonicalString()+n.op.toString()+_c(n.value);if(hT(n))return n.filters.map((e=>ey(e))).join(",");{const e=n.filters.map((t=>ey(t))).join(",");return`${n.op}(${e})`}}function fT(n,e){return n instanceof dn?(function(s,a){return a instanceof dn&&s.op===a.op&&s.field.isEqual(a.field)&&Wr(s.value,a.value)})(n,e):n instanceof xr?(function(s,a){return a instanceof xr&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((o,c,h)=>o&&fT(c,a.filters[h])),!0):!1})(n,e):void Ve(19439)}function mT(n){return n instanceof dn?(function(t){return`${t.field.canonicalString()} ${t.op} ${_c(t.value)}`})(n):n instanceof xr?(function(t){return t.op.toString()+" {"+t.getFilters().map(mT).join(" ,")+"}"})(n):"Filter"}class SC extends dn{constructor(e,t,s){super(e,t,s),this.key=je.fromName(s.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.matchesComparison(t)}}class AC extends dn{constructor(e,t){super(e,"in",t),this.keys=gT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class NC extends dn{constructor(e,t){super(e,"not-in",t),this.keys=gT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function gT(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>je.fromName(s.referenceValue)))}class CC extends dn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qy(t)&&cd(t.arrayValue,this.value)}}class kC extends dn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&cd(this.value.arrayValue,t)}}class IC extends dn{constructor(e,t){super(e,"not-in",t)}matches(e){if(cd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!cd(this.value.arrayValue,t)}}class RC extends dn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>cd(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,t=null,s=[],a=[],o=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=o,this.startAt=c,this.endAt=h,this.Te=null}}function w_(n,e=null,t=[],s=[],a=null,o=null,c=null){return new jC(n,e,t,s,a,o,c)}function Wy(n){const e=$e(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>ey(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(o){return o.field.canonicalString()+o.dir})(s))).join(","),Om(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>_c(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>_c(s))).join(",")),e.Te=t}return e.Te}function Yy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!EC(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!fT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!b_(n.startAt,e.startAt)&&b_(n.endAt,e.endAt)}function ty(n){return je.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t=null,s=[],a=[],o=null,c="F",h=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function OC(n,e,t,s,a,o,c,h){return new Vc(n,e,t,s,a,o,c,h)}function Pm(n){return new Vc(n)}function __(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function pT(n){return n.collectionGroup!==null}function Xu(n){const e=$e(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new yn(wn.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(h=h.add(p.field))}))})),h})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new ud(o,s))})),t.has(wn.keyField().canonicalString())||e.Ie.push(new ud(wn.keyField(),s))}return e.Ie}function Fr(n){const e=$e(n);return e.Ee||(e.Ee=DC(e,Xu(n))),e.Ee}function DC(n,e){if(n.limitType==="F")return w_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const o=a.dir==="desc"?"asc":"desc";return new ud(a.field,o)}));const t=n.endAt?new Hf(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Hf(n.startAt.position,n.startAt.inclusive):null;return w_(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function ny(n,e){const t=n.filters.concat([e]);return new Vc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function qf(n,e,t){return new Vc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Lm(n,e){return Yy(Fr(n),Fr(e))&&n.limitType===e.limitType}function yT(n){return`${Wy(Fr(n))}|lt:${n.limitType}`}function Jl(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>mT(a))).join(", ")}]`),Om(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>_c(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>_c(a))).join(",")),`Target(${s})`})(Fr(n))}; limitType=${n.limitType})`}function Mm(n,e){return e.isFoundDocument()&&(function(s,a){const o=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(o):je.isDocumentKey(s.path)?s.path.isEqual(o):s.path.isImmediateParentOf(o)})(n,e)&&(function(s,a){for(const o of Xu(s))if(!o.field.isKeyField()&&a.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(s,a){for(const o of s.filters)if(!o.matches(a))return!1;return!0})(n,e)&&(function(s,a){return!(s.startAt&&!(function(c,h,g){const p=v_(c,h,g);return c.inclusive?p<=0:p<0})(s.startAt,Xu(s),a)||s.endAt&&!(function(c,h,g){const p=v_(c,h,g);return c.inclusive?p>=0:p>0})(s.endAt,Xu(s),a))})(n,e)}function PC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vT(n){return(e,t)=>{let s=!1;for(const a of Xu(n)){const o=LC(a,e,t);if(o!==0)return o;s=s||a.field.isKeyField()}return 0}}function LC(n,e,t){const s=n.field.isKeyField()?je.comparator(e.key,t.key):(function(o,c,h){const g=c.data.field(o),p=h.data.field(o);return g!==null&&p!==null?wc(g,p):Ve(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ve(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,o]of s)if(this.equalsFn(a,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return void(a[o]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ba(this.inner,((t,s)=>{for(const[a,o]of s)e(a,o)}))}isEmpty(){return tT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=new zt(je.comparator);function ki(){return MC}const bT=new zt(je.comparator);function Gu(...n){let e=bT;for(const t of n)e=e.insert(t.key,t);return e}function wT(n){let e=bT;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Do(){return Ju()}function _T(){return Ju()}function Ju(){return new Wo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const VC=new zt(je.comparator),UC=new yn(je.comparator);function st(...n){let e=UC;for(const t of n)e=e.add(t);return e}const BC=new yn(nt);function zC(){return BC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uf(e)?"-0":e}}function xT(n){return{integerValue:""+n}}function HC(n,e){return gC(e)?xT(e):Xy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(){this._=void 0}}function qC(n,e,t){return n instanceof dd?(function(a,o){const c={fields:{[rT]:{stringValue:sT},[aT]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return o&&Ky(o)&&(o=Dm(o)),o&&(c.fields[iT]=o),{mapValue:c}})(t,e):n instanceof xc?TT(n,e):n instanceof Ec?ST(n,e):(function(a,o){const c=ET(a,o),h=x_(c)+x_(a.Ae);return Z0(c)&&Z0(a.Ae)?xT(h):Xy(a.serializer,h)})(n,e)}function $C(n,e,t){return n instanceof xc?TT(n,e):n instanceof Ec?ST(n,e):t}function ET(n,e){return n instanceof $f?(function(s){return Z0(s)||(function(o){return!!o&&"doubleValue"in o})(s)})(e)?e:{integerValue:0}:null}class dd extends Vm{}class xc extends Vm{constructor(e){super(),this.elements=e}}function TT(n,e){const t=AT(e);for(const s of n.elements)t.some((a=>Wr(a,s)))||t.push(s);return{arrayValue:{values:t}}}class Ec extends Vm{constructor(e){super(),this.elements=e}}function ST(n,e){let t=AT(e);for(const s of n.elements)t=t.filter((a=>!Wr(a,s)));return{arrayValue:{values:t}}}class $f extends Vm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function x_(n){return Zt(n.integerValue||n.doubleValue)}function AT(n){return Qy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e,t){this.field=e,this.transform=t}}function FC(n,e){return n.field.isEqual(e.field)&&(function(s,a){return s instanceof xc&&a instanceof xc||s instanceof Ec&&a instanceof Ec?vc(s.elements,a.elements,Wr):s instanceof $f&&a instanceof $f?Wr(s.Ae,a.Ae):s instanceof dd&&a instanceof dd})(n.transform,e.transform)}class GC{constructor(e,t){this.version=e,this.transformResults=t}}class Xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xn}static exists(e){return new Xn(void 0,e)}static updateTime(e){return new Xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Um{}function NT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Bm(n.key,Xn.none()):new Sd(n.key,n.data,Xn.none());{const t=n.data,s=hs.empty();let a=new yn(wn.comparator);for(let o of e.fields)if(!a.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?s.delete(o):s.set(o,c),a=a.add(o)}return new za(n.key,s,new ks(a.toArray()),Xn.none())}}function KC(n,e,t){n instanceof Sd?(function(a,o,c){const h=a.value.clone(),g=T_(a.fieldTransforms,o,c.transformResults);h.setAll(g),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):n instanceof za?(function(a,o,c){if(!jf(a.precondition,o))return void o.convertToUnknownDocument(c.version);const h=T_(a.fieldTransforms,o,c.transformResults),g=o.data;g.setAll(CT(a)),g.setAll(h),o.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(n,e,t):(function(a,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Zu(n,e,t,s){return n instanceof Sd?(function(o,c,h,g){if(!jf(o.precondition,c))return h;const p=o.value.clone(),v=S_(o.fieldTransforms,g,c);return p.setAll(v),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(n,e,t,s):n instanceof za?(function(o,c,h,g){if(!jf(o.precondition,c))return h;const p=S_(o.fieldTransforms,g,c),v=c.data;return v.setAll(CT(o)),v.setAll(p),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((w=>w.field)))})(n,e,t,s):(function(o,c,h){return jf(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(n,e,t)}function QC(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),o=ET(s.transform,a||null);o!=null&&(t===null&&(t=hs.empty()),t.set(s.field,o))}return t||null}function E_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&vc(s,a,((o,c)=>FC(o,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Sd extends Um{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class za extends Um{constructor(e,t,s,a,o=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function CT(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function T_(n,e,t){const s=new Map;gt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const o=n[a],c=o.transform,h=e.data.field(o.field);s.set(o.field,$C(c,h,t[a]))}return s}function S_(n,e,t){const s=new Map;for(const a of n){const o=a.transform,c=t.data.field(a.field);s.set(a.field,qC(o,c,e))}return s}class Bm extends Um{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WC extends Um{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const o=this.mutations[a];o.key.isEqual(e.key)&&KC(o,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Zu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Zu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=_T();return this.mutations.forEach((a=>{const o=e.get(a.key),c=o.overlayedDocument;let h=this.applyToLocalView(c,o.mutatedFields);h=t.has(a.key)?null:h;const g=NT(c,h);g!==null&&s.set(a.key,g),c.isValidDocument()||c.convertToNoDocument(He.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),st())}isEqual(e){return this.batchId===e.batchId&&vc(this.mutations,e.mutations,((t,s)=>E_(t,s)))&&vc(this.baseMutations,e.baseMutations,((t,s)=>E_(t,s)))}}class Zy{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){gt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return VC})();const o=e.mutations;for(let c=0;c<o.length;c++)a=a.insert(o[c].key,s[c].version);return new Zy(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ln,at;function ZC(n){switch(n){case le.OK:return Ve(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return Ve(15467,{code:n})}}function kT(n){if(n===void 0)return Ci("GRPC error has no .code"),le.UNKNOWN;switch(n){case ln.OK:return le.OK;case ln.CANCELLED:return le.CANCELLED;case ln.UNKNOWN:return le.UNKNOWN;case ln.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case ln.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case ln.INTERNAL:return le.INTERNAL;case ln.UNAVAILABLE:return le.UNAVAILABLE;case ln.UNAUTHENTICATED:return le.UNAUTHENTICATED;case ln.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case ln.NOT_FOUND:return le.NOT_FOUND;case ln.ALREADY_EXISTS:return le.ALREADY_EXISTS;case ln.PERMISSION_DENIED:return le.PERMISSION_DENIED;case ln.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case ln.ABORTED:return le.ABORTED;case ln.OUT_OF_RANGE:return le.OUT_OF_RANGE;case ln.UNIMPLEMENTED:return le.UNIMPLEMENTED;case ln.DATA_LOSS:return le.DATA_LOSS;default:return Ve(39323,{code:n})}}(at=ln||(ln={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=new Ca([4294967295,4294967295],0);function A_(n){const e=ek().encode(n),t=new HE;return t.update(e),new Uint8Array(t.digest())}function N_(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ca([t,s],0),new Ca([a,o],0)]}class ev{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ku(`Invalid padding: ${t}`);if(s<0)throw new Ku(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ku(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ku(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ca.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(Ca.fromNumber(s)));return a.compare(tk)===1&&(a=new Ca([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=A_(e),[s,a]=N_(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(s,a,o);if(!this.we(c))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new ev(o,a,t);return s.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const t=A_(e),[s,a]=N_(t);for(let o=0;o<this.hashCount;o++){const c=this.ye(s,a,o);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ku extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,t,s,a,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,Ad.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new zm(He.min(),a,new zt(nt),ki(),st())}}class Ad{constructor(e,t,s,a,o){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ad(s,t,st(),st(),st())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t,s,a){this.be=e,this.removedTargetIds=t,this.key=s,this.De=a}}class IT{constructor(e,t){this.targetId=e,this.Ce=t}}class RT{constructor(e,t,s=_n.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class C_{constructor(){this.ve=0,this.Fe=k_(),this.Me=_n.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=st(),t=st(),s=st();return this.Fe.forEach(((a,o)=>{switch(o){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Ve(38017,{changeType:o})}})),new Ad(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=k_()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,gt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class nk{constructor(e){this.Ge=e,this.ze=new Map,this.je=ki(),this.Je=hf(),this.He=hf(),this.Ye=new zt(nt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ve(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const o=a.target;if(ty(o))if(s===0){const c=new je(o.path);this.et(t,c,zn.newNoDocument(c,He.min()))}else gt(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const h=this.ut(e),g=h?this.ct(h,e,c):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:o=0}=t;let c,h;try{c=Da(s).toUint8Array()}catch(g){if(g instanceof nT)return Ho("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{h=new ev(c,a,o)}catch(g){return Ho(g instanceof Ku?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return h.ge===0?null:h}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach((o=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.et(t,o,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((o,c)=>{const h=this.ot(c);if(h){if(o.current&&ty(h.target)){const g=new je(h.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,zn.newNoDocument(g,e))}o.Be&&(t.set(c,o.ke()),o.qe())}}));let s=st();this.He.forEach(((o,c)=>{let h=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(s=s.add(o))})),this.je.forEach(((o,c)=>c.setReadTime(e)));const a=new zm(e,t,this.Ye,this.je,s);return this.je=ki(),this.Je=hf(),this.He=hf(),this.Ye=new zt(nt),a}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new C_,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new yn(nt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new yn(nt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||xe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new C_),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function hf(){return new zt(je.comparator)}function k_(){return new zt(je.comparator)}const sk={asc:"ASCENDING",desc:"DESCENDING"},rk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ik={and:"AND",or:"OR"};class ak{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function sy(n,e){return n.useProto3Json||Om(e)?e:{value:e}}function Ff(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ok(n,e){return Ff(n,e.toTimestamp())}function Gr(n){return gt(!!n,49232),He.fromTimestamp((function(t){const s=Oa(t);return new Nt(s.seconds,s.nanos)})(n))}function tv(n,e){return ry(n,e).canonicalString()}function ry(n,e){const t=(function(a){return new It(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function OT(n){const e=It.fromString(n);return gt(VT(e),10190,{key:e.toString()}),e}function iy(n,e){return tv(n.databaseId,e.path)}function w0(n,e){const t=OT(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(PT(t))}function DT(n,e){return tv(n.databaseId,e)}function lk(n){const e=OT(n);return e.length===4?It.emptyPath():PT(e)}function ay(n){return new It(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function PT(n){return gt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function I_(n,e,t){return{name:iy(n,e),fields:t.value.mapValue.fields}}function ck(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ve(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],o=(function(p,v){return p.useProto3Json?(gt(v===void 0||typeof v=="string",58123),_n.fromBase64String(v||"")):(gt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),_n.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(p){const v=p.code===void 0?le.UNKNOWN:kT(p.code);return new ye(v,p.message||"")})(c);t=new RT(s,a,o,h||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=w0(n,s.document.name),o=Gr(s.document.updateTime),c=s.document.createTime?Gr(s.document.createTime):He.min(),h=new hs({mapValue:{fields:s.document.fields}}),g=zn.newFoundDocument(a,o,c,h),p=s.targetIds||[],v=s.removedTargetIds||[];t=new Of(p,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=w0(n,s.document),o=s.readTime?Gr(s.readTime):He.min(),c=zn.newNoDocument(a,o),h=s.removedTargetIds||[];t=new Of([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=w0(n,s.document),o=s.removedTargetIds||[];t=new Of([],o,a,null)}else{if(!("filter"in e))return Ve(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:o}=s,c=new JC(a,o),h=s.targetId;t=new IT(h,c)}}return t}function uk(n,e){let t;if(e instanceof Sd)t={update:I_(n,e.key,e.value)};else if(e instanceof Bm)t={delete:iy(n,e.key)};else if(e instanceof za)t={update:I_(n,e.key,e.data),updateMask:bk(e.fieldMask)};else{if(!(e instanceof WC))return Ve(16599,{Vt:e.type});t={verify:iy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(o,c){const h=c.transform;if(h instanceof dd)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof xc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Ec)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof $f)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw Ve(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,o){return o.updateTime!==void 0?{updateTime:ok(a,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ve(27497)})(n,e.precondition)),t}function dk(n,e){return n&&n.length>0?(gt(e!==void 0,14353),n.map((t=>(function(a,o){let c=a.updateTime?Gr(a.updateTime):Gr(o);return c.isEqual(He.min())&&(c=Gr(o)),new GC(c,a.transformResults||[])})(t,e)))):[]}function hk(n,e){return{documents:[DT(n,e.path)]}}function fk(n,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=DT(n,a);const o=(function(p){if(p.length!==0)return MT(xr.create(p,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const c=(function(p){if(p.length!==0)return p.map((v=>(function(E){return{field:Zl(E.field),direction:pk(E.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=sy(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:a}}function mk(n){let e=lk(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){gt(s===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let o=[];t.where&&(o=(function(w){const E=LT(w);return E instanceof xr&&hT(E)?E.getFilters():[E]})(t.where));let c=[];t.orderBy&&(c=(function(w){return w.map((E=>(function(k){return new ud(ec(k.field),(function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(E)))})(t.orderBy));let h=null;t.limit&&(h=(function(w){let E;return E=typeof w=="object"?w.value:w,Om(E)?null:E})(t.limit));let g=null;t.startAt&&(g=(function(w){const E=!!w.before,T=w.values||[];return new Hf(T,E)})(t.startAt));let p=null;return t.endAt&&(p=(function(w){const E=!w.before,T=w.values||[];return new Hf(T,E)})(t.endAt)),OC(e,a,c,o,h,"F",g,p)}function gk(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function LT(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=ec(t.unaryFilter.field);return dn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=ec(t.unaryFilter.field);return dn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ec(t.unaryFilter.field);return dn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ec(t.unaryFilter.field);return dn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ve(61313);default:return Ve(60726)}})(n):n.fieldFilter!==void 0?(function(t){return dn.create(ec(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ve(58110);default:return Ve(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return xr.create(t.compositeFilter.filters.map((s=>LT(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ve(1026)}})(t.compositeFilter.op))})(n):Ve(30097,{filter:n})}function pk(n){return sk[n]}function yk(n){return rk[n]}function vk(n){return ik[n]}function Zl(n){return{fieldPath:n.canonicalString()}}function ec(n){return wn.fromServerFormat(n.fieldPath)}function MT(n){return n instanceof dn?(function(t){if(t.op==="=="){if(y_(t.value))return{unaryFilter:{field:Zl(t.field),op:"IS_NAN"}};if(p_(t.value))return{unaryFilter:{field:Zl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(y_(t.value))return{unaryFilter:{field:Zl(t.field),op:"IS_NOT_NAN"}};if(p_(t.value))return{unaryFilter:{field:Zl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zl(t.field),op:yk(t.op),value:t.value}}})(n):n instanceof xr?(function(t){const s=t.getFilters().map((a=>MT(a)));return s.length===1?s[0]:{compositeFilter:{op:vk(t.op),filters:s}}})(n):Ve(54877,{filter:n})}function bk(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function VT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,t,s,a,o=He.min(),c=He.min(),h=_n.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=g}withSequenceNumber(e){return new xa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.yt=e}}function _k(n){const e=mk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?qf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(){this.Cn=new Ek}addToCollectionParentIndex(e,t){return this.Cn.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(ja.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(ja.min())}updateCollectionGroup(e,t,s){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class Ek{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new yn(It.comparator),o=!a.has(s);return this.index[t]=a.add(s),o}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new yn(It.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UT=41943040;class us{static withCacheSize(e){return new us(e,us.DEFAULT_COLLECTION_PERCENTILE,us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */us.DEFAULT_COLLECTION_PERCENTILE=10,us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,us.DEFAULT=new us(UT,us.DEFAULT_COLLECTION_PERCENTILE,us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),us.DISABLED=new us(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Tc(0)}static cr(){return new Tc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="LruGarbageCollector",Tk=1048576;function O_([n,e],[t,s]){const a=nt(n,t);return a===0?nt(e,s):a}class Sk{constructor(e){this.Ir=e,this.buffer=new yn(O_),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();O_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ak{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){xe(j_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Mc(t)?xe(j_,"Ignoring IndexedDB error during garbage collection: ",t):await Lc(t)}await this.Vr(3e5)}))}}class Nk{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return de.resolve(jm.ce);const s=new Sk(t);return this.mr.forEachTarget(e,(a=>s.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>s.Ar(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(R_)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),R_):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,a,o,c,h,g,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),a=this.params.maximumSequenceNumbersToCollect):a=w,c=Date.now(),this.nthSequenceNumber(e,a)))).next((w=>(s=w,h=Date.now(),this.removeTargets(e,s,t)))).next((w=>(o=w,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((w=>(p=Date.now(),Xl()<=tt.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(h-c)+`ms
	Removed ${o} targets in `+(g-h)+`ms
	Removed ${w} documents in `+(p-g)+`ms
Total Duration: ${p-v}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:o,documentsRemoved:w}))))}}function Ck(n,e){return new Nk(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(){this.changes=new Wo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?de.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&Zu(s.mutation,a,ks.empty(),Nt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,st()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=st()){const a=Do();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((o=>{let c=Gu();return o.forEach(((h,g)=>{c=c.insert(h,g.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=Do();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,st())))}populateOverlays(e,t,s){const a=[];return s.forEach((o=>{t.has(o)||a.push(o)})),this.documentOverlayCache.getOverlays(e,a).next((o=>{o.forEach(((c,h)=>{t.set(c,h)}))}))}computeViews(e,t,s,a){let o=ki();const c=Ju(),h=(function(){return Ju()})();return t.forEach(((g,p)=>{const v=s.get(p.key);a.has(p.key)&&(v===void 0||v.mutation instanceof za)?o=o.insert(p.key,p):v!==void 0?(c.set(p.key,v.mutation.getFieldMask()),Zu(v.mutation,p,v.mutation.getFieldMask(),Nt.now())):c.set(p.key,ks.empty())})),this.recalculateAndSaveOverlays(e,o).next((g=>(g.forEach(((p,v)=>c.set(p,v))),t.forEach(((p,v)=>h.set(p,new Ik(v,c.get(p)??null)))),h)))}recalculateAndSaveOverlays(e,t){const s=Ju();let a=new zt(((c,h)=>c-h)),o=st();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const h of c)h.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let v=s.get(g)||ks.empty();v=h.applyToLocalView(p,v),s.set(g,v);const w=(a.get(h.batchId)||st()).add(g);a=a.insert(h.batchId,w)}))})).next((()=>{const c=[],h=a.getReverseIterator();for(;h.hasNext();){const g=h.getNext(),p=g.key,v=g.value,w=_T();v.forEach((E=>{if(!o.has(E)){const T=NT(t.get(E),s.get(E));T!==null&&w.set(E,T),o=o.add(E)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,w))}return de.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return(function(c){return je.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((o=>{const c=a-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-o.size):de.resolve(Do());let h=od,g=o;return c.next((p=>de.forEach(p,((v,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),o.get(v)?de.resolve():this.remoteDocumentCache.getEntry(e,v).next((E=>{g=g.insert(v,E)}))))).next((()=>this.populateOverlays(e,p,o))).next((()=>this.computeViews(e,g,p,st()))).next((v=>({batchId:h,changes:wT(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new je(t)).next((s=>{let a=Gu();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const o=t.collectionGroup;let c=Gu();return this.indexManager.getCollectionParents(e,o).next((h=>de.forEach(h,(g=>{const p=(function(w,E){return new Vc(E,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,g.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,s,a).next((v=>{v.forEach(((w,E)=>{c=c.insert(w,E)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,o,a)))).next((c=>{o.forEach(((g,p)=>{const v=p.getKey();c.get(v)===null&&(c=c.insert(v,zn.newInvalidDocument(v)))}));let h=Gu();return c.forEach(((g,p)=>{const v=o.get(g);v!==void 0&&Zu(v.mutation,p,ks.empty(),Nt.now()),Mm(t,p)&&(h=h.insert(g,p))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return de.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Gr(a.createTime)}})(t)),de.resolve()}getNamedQuery(e,t){return de.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:_k(a.bundledQuery),readTime:Gr(a.readTime)}})(t)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(){this.overlays=new zt(je.comparator),this.qr=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Do();return de.forEach(t,(a=>this.getOverlay(e,a).next((o=>{o!==null&&s.set(a,o)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,o)=>{this.St(e,t,o)})),de.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(s)),de.resolve()}getOverlaysForCollection(e,t,s){const a=Do(),o=t.length+1,c=new je(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const g=h.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&g.largestBatchId>s&&a.set(g.getKey(),g)}return de.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let o=new zt(((p,v)=>p-v));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>s){let v=o.get(p.largestBatchId);v===null&&(v=Do(),o=o.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const h=Do(),g=o.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,v)=>h.set(p,v))),!(h.size()>=a)););return de.resolve(h)}St(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new XC(t,s));let o=this.qr.get(t);o===void 0&&(o=st(),this.qr.set(t,o)),this.qr.set(t,o.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(){this.sessionToken=_n.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(){this.Qr=new yn(bn.$r),this.Ur=new yn(bn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new bn(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new bn(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new je(new It([])),s=new bn(t,e),a=new bn(t,e+1),o=[];return this.Ur.forEachInRange([s,a],(c=>{this.Gr(c),o.push(c.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new je(new It([])),s=new bn(t,e),a=new bn(t,e+1);let o=st();return this.Ur.forEachInRange([s,a],(c=>{o=o.add(c.key)})),o}containsKey(e){const t=new bn(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class bn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return je.comparator(e.key,t.key)||nt(e.Yr,t.Yr)}static Kr(e,t){return nt(e.Yr,t.Yr)||je.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new yn(bn.$r)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new YC(o,t,s,a);this.mutationQueue.push(c);for(const h of a)this.Zr=this.Zr.add(new bn(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return de.resolve(c)}lookupMutationBatch(e,t){return de.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.ei(s),o=a<0?0:a;return de.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?Gy:this.tr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new bn(t,0),a=new bn(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([s,a],(c=>{const h=this.Xr(c.Yr);o.push(h)})),de.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new yn(nt);return t.forEach((a=>{const o=new bn(a,0),c=new bn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,c],(h=>{s=s.add(h.Yr)}))})),de.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let o=s;je.isDocumentKey(o)||(o=o.child(""));const c=new bn(new je(o),0);let h=new yn(nt);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!s.isPrefixOf(p)&&(p.length===a&&(h=h.add(g.Yr)),!0)}),c),de.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((s=>{const a=this.Xr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){gt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return de.forEach(t.mutations,(a=>{const o=new bn(a.key,t.batchId);return s=s.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new bn(t,0),a=this.Zr.firstAfterOrEqual(s);return de.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e){this.ri=e,this.docs=(function(){return new zt(je.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),o=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return de.resolve(s?s.document.mutableCopy():zn.newInvalidDocument(t))}getEntries(e,t){let s=ki();return t.forEach((a=>{const o=this.docs.get(a);s=s.insert(a,o?o.document.mutableCopy():zn.newInvalidDocument(a))})),de.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let o=ki();const c=t.path,h=new je(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(h);for(;g.hasNext();){const{key:p,value:{document:v}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||dC(uC(v),s)<=0||(a.has(v.key)||Mm(t,v))&&(o=o.insert(v.key,v.mutableCopy()))}return de.resolve(o)}getAllFromCollectionGroup(e,t,s,a){Ve(9500)}ii(e,t){return de.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new Mk(this)}getSize(e){return de.resolve(this.size)}}class Mk extends kk{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)})),de.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e){this.persistence=e,this.si=new Wo((t=>Wy(t)),Yy),this.lastRemoteSnapshotVersion=He.min(),this.highestTargetId=0,this.oi=0,this._i=new nv,this.targetCount=0,this.ai=Tc.ur()}forEachTarget(e,t){return this.si.forEach(((s,a)=>t(a))),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),de.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Tc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Pr(t),de.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,s){let a=0;const o=[];return this.si.forEach(((c,h)=>{h.sequenceNumber<=t&&s.get(h.targetId)===null&&(this.si.delete(c),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)})),de.waitFor(o).next((()=>a))}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return de.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),de.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const a=this.persistence.referenceDelegate,o=[];return a&&t.forEach((c=>{o.push(a.markPotentiallyOrphaned(e,c))})),de.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),de.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return de.resolve(s)}containsKey(e,t){return de.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,t){this.ui={},this.overlays={},this.ci=new jm(0),this.li=!1,this.li=!0,this.hi=new Dk,this.referenceDelegate=e(this),this.Pi=new Vk(this),this.indexManager=new xk,this.remoteDocumentCache=(function(a){return new Lk(a)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new wk(t),this.Ii=new jk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ok,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new Pk(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){xe("MemoryPersistence","Starting transaction:",e);const a=new Uk(this.ci.next());return this.referenceDelegate.Ei(),s(a).next((o=>this.referenceDelegate.di(a).next((()=>o)))).toPromise().then((o=>(a.raiseOnCommittedEvent(),o)))}Ai(e,t){return de.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class Uk extends fC{constructor(e){super(),this.currentSequenceNumber=e}}class sv{constructor(e){this.persistence=e,this.Ri=new nv,this.Vi=null}static mi(e){return new sv(e)}get fi(){if(this.Vi)return this.Vi;throw Ve(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),de.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),de.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((o=>this.fi.add(o.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.fi,(s=>{const a=je.fromPath(s);return this.gi(e,a).next((o=>{o||t.removeEntry(a,He.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return de.or([()=>de.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Gf{constructor(e,t){this.persistence=e,this.pi=new Wo((s=>pC(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=Ck(this,t)}static mi(e,t){return new Gf(e,t)}Ei(){}di(e){return de.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return de.forEach(this.pi,((s,a)=>this.br(e,s,a).next((o=>o?de.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),o=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((h=>{h||(s++,o.removeEntry(c,He.min()))})))).next((()=>o.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),de.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),de.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),de.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=If(e.data.value)),t}br(e,t,s){return de.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return de.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=a}static As(e,t){let s=st(),a=st();for(const o of t.docChanges)switch(o.type){case 0:s=s.add(o.doc.key);break;case 1:a=a.add(o.doc.key)}return new rv(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return P3()?8:mC(qn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const o={result:null};return this.ys(e,t).next((c=>{o.result=c})).next((()=>{if(!o.result)return this.ws(e,t,a,s).next((c=>{o.result=c}))})).next((()=>{if(o.result)return;const c=new Bk;return this.Ss(e,t,c).next((h=>{if(o.result=h,this.Vs)return this.bs(e,t,c,h.size)}))})).next((()=>o.result))}bs(e,t,s,a){return s.documentReadCount<this.fs?(Xl()<=tt.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",Jl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),de.resolve()):(Xl()<=tt.DEBUG&&xe("QueryEngine","Query:",Jl(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(Xl()<=tt.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",Jl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fr(t))):de.resolve())}ys(e,t){if(__(t))return de.resolve(null);let s=Fr(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=qf(t,null,"F"),s=Fr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((o=>{const c=st(...o);return this.ps.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,s).next((g=>{const p=this.Ds(t,h);return this.Cs(t,p,c,g.readTime)?this.ys(e,qf(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,s,a){return __(t)||a.isEqual(He.min())?de.resolve(null):this.ps.getDocuments(e,s).next((o=>{const c=this.Ds(t,o);return this.Cs(t,c,s,a)?de.resolve(null):(Xl()<=tt.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Jl(t)),this.vs(e,c,t,cC(a,od)).next((h=>h)))}))}Ds(e,t){let s=new yn(vT(e));return t.forEach(((a,o)=>{Mm(e,o)&&(s=s.add(o))})),s}Cs(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(a)>0)}Ss(e,t,s){return Xl()<=tt.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",Jl(t)),this.ps.getDocumentsMatchingQuery(e,t,ja.min(),s)}vs(e,t,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next((o=>(t.forEach((c=>{o=o.insert(c.key,c)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv="LocalStore",Hk=3e8;class qk{constructor(e,t,s,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new zt(nt),this.xs=new Wo((o=>Wy(o)),Yy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Rk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function $k(n,e,t,s){return new qk(n,e,t,s)}async function zT(n,e){const t=$e(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((o=>(a=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((o=>{const c=[],h=[];let g=st();for(const p of a){c.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}for(const p of o){h.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(s,g).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:h})))}))}))}function Fk(n,e){const t=$e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,g,p,v){const w=p.batch,E=w.keys();let T=de.resolve();return E.forEach((k=>{T=T.next((()=>v.getEntry(g,k))).next((L=>{const I=p.docVersions.get(k);gt(I!==null,48541),L.version.compareTo(I)<0&&(w.applyToRemoteDocument(L,p),L.isValidDocument()&&(L.setReadTime(p.commitVersion),v.addEntry(L)))}))})),T.next((()=>h.mutationQueue.removeMutationBatch(g,w)))})(t,s,e,o).next((()=>o.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(h){let g=st();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(g=g.add(h.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function HT(n){const e=$e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Gk(n,e){const t=$e(n),s=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const h=[];e.targetChanges.forEach(((v,w)=>{const E=a.get(w);if(!E)return;h.push(t.Pi.removeMatchingKeys(o,v.removedDocuments,w).next((()=>t.Pi.addMatchingKeys(o,v.addedDocuments,w))));let T=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(w)!==null?T=T.withResumeToken(_n.EMPTY_BYTE_STRING,He.min()).withLastLimboFreeSnapshotVersion(He.min()):v.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(v.resumeToken,s)),a=a.insert(w,T),(function(L,I,O){return L.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=Hk?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(E,T,v)&&h.push(t.Pi.updateTargetData(o,T))}));let g=ki(),p=st();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,v))})),h.push(Kk(o,c,e.documentUpdates).next((v=>{g=v.ks,p=v.qs}))),!s.isEqual(He.min())){const v=t.Pi.getLastRemoteSnapshotVersion(o).next((w=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,s)));h.push(v)}return de.waitFor(h).next((()=>c.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,g,p))).next((()=>g))})).then((o=>(t.Ms=a,o)))}function Kk(n,e,t){let s=st(),a=st();return t.forEach((o=>s=s.add(o))),e.getEntries(n,s).next((o=>{let c=ki();return t.forEach(((h,g)=>{const p=o.get(h);g.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(h)),g.isNoDocument()&&g.version.isEqual(He.min())?(e.removeEntry(h,g.readTime),c=c.insert(h,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),c=c.insert(h,g)):xe(iv,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",g.version)})),{ks:c,qs:a}}))}function Qk(n,e){const t=$e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Gy),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function Wk(n,e){const t=$e(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.Pi.getTargetData(s,e).next((o=>o?(a=o,de.resolve(a)):t.Pi.allocateTargetId(s).next((c=>(a=new xa(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function oy(n,e,t){const s=$e(n),a=s.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",o,(c=>s.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Mc(c))throw c;xe(iv,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function D_(n,e,t){const s=$e(n);let a=He.min(),o=st();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,v){const w=$e(g),E=w.xs.get(v);return E!==void 0?de.resolve(w.Ms.get(E)):w.Pi.getTargetData(p,v)})(s,c,Fr(e)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,h.targetId).next((g=>{o=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?a:He.min(),t?o:st()))).next((h=>(Yk(s,PC(e),h),{documents:h,Qs:o})))))}function Yk(n,e,t){let s=n.Os.get(e)||He.min();t.forEach(((a,o)=>{o.readTime.compareTo(s)>0&&(s=o.readTime)})),n.Os.set(e,s)}class P_{constructor(){this.activeTargetIds=zC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Xk{constructor(){this.Mo=new P_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new P_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="ConnectivityMonitor";class M_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){xe(L_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){xe(L_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ff=null;function ly(){return ff===null?ff=(function(){return 268435456+Math.round(2147483648*Math.random())})():ff++,"0x"+ff.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="RestConnection",Zk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===Bf?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,t,s,a,o){const c=ly(),h=this.zo(e,t.toUriEncodedString());xe(_0,`Sending RPC '${e}' ${c}:`,h,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,a,o);const{host:p}=new URL(h),v=Ko(p);return this.Jo(e,h,g,s,v).then((w=>(xe(_0,`Received RPC '${e}' ${c}: `,w),w)),(w=>{throw Ho(_0,`RPC '${e}' ${c} failed with error: `,w,"url: ",h,"request:",s),w}))}Ho(e,t,s,a,o,c){return this.Go(e,t,s,a,o)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Pc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,o)=>e[o]=a)),s&&s.headers.forEach(((a,o)=>e[o]=a))}zo(e,t){const s=Zk[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vn="WebChannelConnection";class nI extends eI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,a,o){const c=ly();return new Promise(((h,g)=>{const p=new qE;p.setWithCredentials(!0),p.listenOnce($E.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case kf.NO_ERROR:const w=p.getResponseJson();xe(Vn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(w)),h(w);break;case kf.TIMEOUT:xe(Vn,`RPC '${e}' ${c} timed out`),g(new ye(le.DEADLINE_EXCEEDED,"Request time out"));break;case kf.HTTP_ERROR:const E=p.getStatus();if(xe(Vn,`RPC '${e}' ${c} failed with status:`,E,"response text:",p.getResponseText()),E>0){let T=p.getResponseJson();Array.isArray(T)&&(T=T[0]);const k=T==null?void 0:T.error;if(k&&k.status&&k.message){const L=(function(O){const q=O.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(q)>=0?q:le.UNKNOWN})(k.status);g(new ye(L,k.message))}else g(new ye(le.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new ye(le.UNAVAILABLE,"Connection failed."));break;default:Ve(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{xe(Vn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(a);xe(Vn,`RPC '${e}' ${c} sending request:`,a),p.send(t,"POST",v,s,15)}))}T_(e,t,s){const a=ly(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=KE(),h=GE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const v=o.join("");xe(Vn,`Creating RPC '${e}' stream ${a}: ${v}`,g);const w=c.createWebChannel(v,g);this.I_(w);let E=!1,T=!1;const k=new tI({Yo:I=>{T?xe(Vn,`Not sending because RPC '${e}' stream ${a} is closed:`,I):(E||(xe(Vn,`Opening RPC '${e}' stream ${a} transport.`),w.open(),E=!0),xe(Vn,`RPC '${e}' stream ${a} sending:`,I),w.send(I))},Zo:()=>w.close()}),L=(I,O,q)=>{I.listen(O,(G=>{try{q(G)}catch(te){setTimeout((()=>{throw te}),0)}}))};return L(w,Fu.EventType.OPEN,(()=>{T||(xe(Vn,`RPC '${e}' stream ${a} transport opened.`),k.o_())})),L(w,Fu.EventType.CLOSE,(()=>{T||(T=!0,xe(Vn,`RPC '${e}' stream ${a} transport closed`),k.a_(),this.E_(w))})),L(w,Fu.EventType.ERROR,(I=>{T||(T=!0,Ho(Vn,`RPC '${e}' stream ${a} transport errored. Name:`,I.name,"Message:",I.message),k.a_(new ye(le.UNAVAILABLE,"The operation could not be completed")))})),L(w,Fu.EventType.MESSAGE,(I=>{var O;if(!T){const q=I.data[0];gt(!!q,16349);const G=q,te=(G==null?void 0:G.error)||((O=G[0])==null?void 0:O.error);if(te){xe(Vn,`RPC '${e}' stream ${a} received error:`,te);const me=te.status;let he=(function(R){const B=ln[R];if(B!==void 0)return kT(B)})(me),N=te.message;he===void 0&&(he=le.INTERNAL,N="Unknown error status: "+me+" with message "+te.message),T=!0,k.a_(new ye(he,N)),w.close()}else xe(Vn,`RPC '${e}' stream ${a} received:`,q),k.u_(q)}})),L(h,FE.STAT_EVENT,(I=>{I.stat===W0.PROXY?xe(Vn,`RPC '${e}' stream ${a} detected buffering proxy`):I.stat===W0.NOPROXY&&xe(Vn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function x0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(n){return new ak(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,t,s=1e3,a=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=a,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&xe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="PersistentStream";class $T{constructor(e,t,s,a,o,c,h,g){this.Mi=e,this.S_=s,this.b_=a,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(Ci(t.toString()),Ci("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===t&&this.G_(s,a)}),(s=>{e((()=>{const a=new ye(le.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return xe(V_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(xe(V_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class sI extends $T{constructor(e,t,s,a,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,c),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=ck(this.serializer,e),s=(function(o){if(!("targetChange"in o))return He.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?He.min():c.readTime?Gr(c.readTime):He.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=ay(this.serializer),t.addTarget=(function(o,c){let h;const g=c.target;if(h=ty(g)?{documents:hk(o,g)}:{query:fk(o,g).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=jT(o,c.resumeToken);const p=sy(o,c.expectedCount);p!==null&&(h.expectedCount=p)}else if(c.snapshotVersion.compareTo(He.min())>0){h.readTime=Ff(o,c.snapshotVersion.toTimestamp());const p=sy(o,c.expectedCount);p!==null&&(h.expectedCount=p)}return h})(this.serializer,e);const s=gk(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=ay(this.serializer),t.removeTarget=e,this.q_(t)}}class rI extends $T{constructor(e,t,s,a,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,c),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return gt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,gt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){gt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=dk(e.writeResults,e.commitTime),s=Gr(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=ay(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>uk(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{}class aI extends iI{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ye(le.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Go(e,ry(t,s),a,o,c))).catch((o=>{throw o.name==="FirebaseError"?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ye(le.UNKNOWN,o.toString())}))}Ho(e,t,s,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Ho(e,ry(t,s),a,c,h,o))).catch((c=>{throw c.name==="FirebaseError"?(c.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ye(le.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class oI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ci(t),this.aa=!1):xe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qo="RemoteStore";class lI{constructor(e,t,s,a,o){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{Yo(this)&&(xe(qo,"Restarting streams for network reachability change."),await(async function(g){const p=$e(g);p.Ea.add(4),await Nd(p),p.Ra.set("Unknown"),p.Ea.delete(4),await qm(p)})(this))}))})),this.Ra=new oI(s,a)}}async function qm(n){if(Yo(n))for(const e of n.da)await e(!0)}async function Nd(n){for(const e of n.da)await e(!1)}function FT(n,e){const t=$e(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),cv(t)?lv(t):Uc(t).O_()&&ov(t,e))}function av(n,e){const t=$e(n),s=Uc(t);t.Ia.delete(e),s.O_()&&GT(t,e),t.Ia.size===0&&(s.O_()?s.L_():Yo(t)&&t.Ra.set("Unknown"))}function ov(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(He.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Uc(n).Y_(e)}function GT(n,e){n.Va.Ue(e),Uc(n).Z_(e)}function lv(n){n.Va=new nk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Uc(n).start(),n.Ra.ua()}function cv(n){return Yo(n)&&!Uc(n).x_()&&n.Ia.size>0}function Yo(n){return $e(n).Ea.size===0}function KT(n){n.Va=void 0}async function cI(n){n.Ra.set("Online")}async function uI(n){n.Ia.forEach(((e,t)=>{ov(n,e)}))}async function dI(n,e){KT(n),cv(n)?(n.Ra.ha(e),lv(n)):n.Ra.set("Unknown")}async function hI(n,e,t){if(n.Ra.set("Online"),e instanceof RT&&e.state===2&&e.cause)try{await(async function(a,o){const c=o.cause;for(const h of o.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,c),a.Ia.delete(h),a.Va.removeTarget(h))})(n,e)}catch(s){xe(qo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Kf(n,s)}else if(e instanceof Of?n.Va.Ze(e):e instanceof IT?n.Va.st(e):n.Va.tt(e),!t.isEqual(He.min()))try{const s=await HT(n.localStore);t.compareTo(s)>=0&&await(function(o,c){const h=o.Va.Tt(c);return h.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const v=o.Ia.get(p);v&&o.Ia.set(p,v.withResumeToken(g.resumeToken,c))}})),h.targetMismatches.forEach(((g,p)=>{const v=o.Ia.get(g);if(!v)return;o.Ia.set(g,v.withResumeToken(_n.EMPTY_BYTE_STRING,v.snapshotVersion)),GT(o,g);const w=new xa(v.target,g,p,v.sequenceNumber);ov(o,w)})),o.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(s){xe(qo,"Failed to raise snapshot:",s),await Kf(n,s)}}async function Kf(n,e,t){if(!Mc(e))throw e;n.Ea.add(1),await Nd(n),n.Ra.set("Offline"),t||(t=()=>HT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{xe(qo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await qm(n)}))}function QT(n,e){return e().catch((t=>Kf(n,t,e)))}async function $m(n){const e=$e(n),t=La(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Gy;for(;fI(e);)try{const a=await Qk(e.localStore,s);if(a===null){e.Ta.length===0&&t.L_();break}s=a.batchId,mI(e,a)}catch(a){await Kf(e,a)}WT(e)&&YT(e)}function fI(n){return Yo(n)&&n.Ta.length<10}function mI(n,e){n.Ta.push(e);const t=La(n);t.O_()&&t.X_&&t.ea(e.mutations)}function WT(n){return Yo(n)&&!La(n).x_()&&n.Ta.length>0}function YT(n){La(n).start()}async function gI(n){La(n).ra()}async function pI(n){const e=La(n);for(const t of n.Ta)e.ea(t.mutations)}async function yI(n,e,t){const s=n.Ta.shift(),a=Zy.from(s,e,t);await QT(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await $m(n)}async function vI(n,e){e&&La(n).X_&&await(async function(s,a){if((function(c){return ZC(c)&&c!==le.ABORTED})(a.code)){const o=s.Ta.shift();La(s).B_(),await QT(s,(()=>s.remoteSyncer.rejectFailedWrite(o.batchId,a))),await $m(s)}})(n,e),WT(n)&&YT(n)}async function U_(n,e){const t=$e(n);t.asyncQueue.verifyOperationInProgress(),xe(qo,"RemoteStore received new credentials");const s=Yo(t);t.Ea.add(3),await Nd(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await qm(t)}async function bI(n,e){const t=$e(n);e?(t.Ea.delete(2),await qm(t)):e||(t.Ea.add(2),await Nd(t),t.Ra.set("Unknown"))}function Uc(n){return n.ma||(n.ma=(function(t,s,a){const o=$e(t);return o.sa(),new sI(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)})(n.datastore,n.asyncQueue,{Xo:cI.bind(null,n),t_:uI.bind(null,n),r_:dI.bind(null,n),H_:hI.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),cv(n)?lv(n):n.Ra.set("Unknown")):(await n.ma.stop(),KT(n))}))),n.ma}function La(n){return n.fa||(n.fa=(function(t,s,a){const o=$e(t);return o.sa(),new rI(s,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:gI.bind(null,n),r_:vI.bind(null,n),ta:pI.bind(null,n),na:yI.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await $m(n)):(await n.fa.stop(),n.Ta.length>0&&(xe(qo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,t,s,a,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=o,this.deferred=new xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,o){const c=Date.now()+s,h=new uv(e,t,c,a,o);return h.start(s),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dv(n,e){if(Ci("AsyncQueue",`${e}: ${n}`),Mc(n))return new ye(le.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{static emptySet(e){return new oc(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||je.comparator(t.key,s.key):(t,s)=>je.comparator(t.key,s.key),this.keyedMap=Gu(),this.sortedSet=new zt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof oc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,o=s.getNext().key;if(!a.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new oc;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(){this.ga=new zt(je.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ve(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Sc{constructor(e,t,s,a,o,c,h,g,p){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,s,a,o){const c=[];return t.forEach((h=>{c.push({type:0,doc:h})})),new Sc(e,t,oc.emptySet(t),c,s,a,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class _I{constructor(){this.queries=z_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=$e(t),o=a.queries;a.queries=z_(),o.forEach(((c,h)=>{for(const g of h.Sa)g.onError(s)}))})(this,new ye(le.ABORTED,"Firestore shutting down"))}}function z_(){return new Wo((n=>yT(n)),Lm)}async function hv(n,e){const t=$e(n);let s=3;const a=e.query;let o=t.queries.get(a);o?!o.ba()&&e.Da()&&(s=2):(o=new wI,s=e.Da()?0:1);try{switch(s){case 0:o.wa=await t.onListen(a,!0);break;case 1:o.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const h=dv(c,`Initialization of query '${Jl(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&mv(t)}async function fv(n,e){const t=$e(n),s=e.query;let a=3;const o=t.queries.get(s);if(o){const c=o.Sa.indexOf(e);c>=0&&(o.Sa.splice(c,1),o.Sa.length===0?a=e.Da()?0:1:!o.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function xI(n,e){const t=$e(n);let s=!1;for(const a of e){const o=a.query,c=t.queries.get(o);if(c){for(const h of c.Sa)h.Fa(a)&&(s=!0);c.wa=a}}s&&mv(t)}function EI(n,e,t){const s=$e(n),a=s.queries.get(e);if(a)for(const o of a.Sa)o.onError(t);s.queries.delete(e)}function mv(n){n.Ca.forEach((e=>{e.next()}))}var cy,H_;(H_=cy||(cy={})).Ma="default",H_.Cache="cache";class gv{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Sc(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Sc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==cy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e){this.key=e}}class JT{constructor(e){this.key=e}}class TI{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=st(),this.mutatedKeys=st(),this.eu=vT(e),this.tu=new oc(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new B_,a=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,c=a,h=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,w)=>{const E=a.get(v),T=Mm(this.query,w)?w:null,k=!!E&&this.mutatedKeys.has(E.key),L=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let I=!1;E&&T?E.data.isEqual(T.data)?k!==L&&(s.track({type:3,doc:T}),I=!0):this.su(E,T)||(s.track({type:2,doc:T}),I=!0,(g&&this.eu(T,g)>0||p&&this.eu(T,p)<0)&&(h=!0)):!E&&T?(s.track({type:0,doc:T}),I=!0):E&&!T&&(s.track({type:1,doc:E}),I=!0,(g||p)&&(h=!0)),I&&(T?(c=c.add(T),o=L?o.add(v):o.delete(v)):(c=c.delete(v),o=o.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),o=o.delete(v.key),s.track({type:1,doc:v})}return{tu:c,iu:s,Cs:h,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,w)=>(function(T,k){const L=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve(20277,{Rt:I})}};return L(T)-L(k)})(v.type,w.type)||this.eu(v.doc,w.doc))),this.ou(s),a=a??!1;const h=t&&!a?this._u():[],g=this.Xa.size===0&&this.current&&!a?1:0,p=g!==this.Za;return this.Za=g,c.length!==0||p?{snapshot:new Sc(this.query,e.tu,o,c,e.mutatedKeys,g===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new B_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=st(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new JT(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new XT(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=st();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Sc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const pv="SyncEngine";class SI{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class AI{constructor(e){this.key=e,this.hu=!1}}class NI{constructor(e,t,s,a,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Wo((h=>yT(h)),Lm),this.Iu=new Map,this.Eu=new Set,this.du=new zt(je.comparator),this.Au=new Map,this.Ru=new nv,this.Vu={},this.mu=new Map,this.fu=Tc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function CI(n,e,t=!0){const s=r4(n);let a;const o=s.Tu.get(e);return o?(s.sharedClientState.addLocalQueryTarget(o.targetId),a=o.view.lu()):a=await ZT(s,e,t,!0),a}async function kI(n,e){const t=r4(n);await ZT(t,e,!0,!1)}async function ZT(n,e,t,s){const a=await Wk(n.localStore,Fr(e)),o=a.targetId,c=n.sharedClientState.addLocalQueryTarget(o,t);let h;return s&&(h=await II(n,e,o,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&FT(n.remoteStore,a),h}async function II(n,e,t,s,a){n.pu=(w,E,T)=>(async function(L,I,O,q){let G=I.view.ru(O);G.Cs&&(G=await D_(L.localStore,I.query,!1).then((({documents:N})=>I.view.ru(N,G))));const te=q&&q.targetChanges.get(I.targetId),me=q&&q.targetMismatches.get(I.targetId)!=null,he=I.view.applyChanges(G,L.isPrimaryClient,te,me);return $_(L,I.targetId,he.au),he.snapshot})(n,w,E,T);const o=await D_(n.localStore,e,!0),c=new TI(e,o.Qs),h=c.ru(o.documents),g=Ad.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",a),p=c.applyChanges(h,n.isPrimaryClient,g);$_(n,t,p.au);const v=new SI(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function RI(n,e,t){const s=$e(n),a=s.Tu.get(e),o=s.Iu.get(a.targetId);if(o.length>1)return s.Iu.set(a.targetId,o.filter((c=>!Lm(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await oy(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&av(s.remoteStore,a.targetId),uy(s,a.targetId)})).catch(Lc)):(uy(s,a.targetId),await oy(s.localStore,a.targetId,!0))}async function jI(n,e){const t=$e(n),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),av(t.remoteStore,s.targetId))}async function OI(n,e,t){const s=BI(n);try{const a=await(function(c,h){const g=$e(c),p=Nt.now(),v=h.reduce(((T,k)=>T.add(k.key)),st());let w,E;return g.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let k=ki(),L=st();return g.Ns.getEntries(T,v).next((I=>{k=I,k.forEach(((O,q)=>{q.isValidDocument()||(L=L.add(O))}))})).next((()=>g.localDocuments.getOverlayedDocuments(T,k))).next((I=>{w=I;const O=[];for(const q of h){const G=QC(q,w.get(q.key).overlayedDocument);G!=null&&O.push(new za(q.key,G,cT(G.value.mapValue),Xn.exists(!0)))}return g.mutationQueue.addMutationBatch(T,p,O,h)})).next((I=>{E=I;const O=I.applyToLocalDocumentSet(w,L);return g.documentOverlayCache.saveOverlays(T,I.batchId,O)}))})).then((()=>({batchId:E.batchId,changes:wT(w)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(c,h,g){let p=c.Vu[c.currentUser.toKey()];p||(p=new zt(nt)),p=p.insert(h,g),c.Vu[c.currentUser.toKey()]=p})(s,a.batchId,t),await Cd(s,a.changes),await $m(s.remoteStore)}catch(a){const o=dv(a,"Failed to persist write");t.reject(o)}}async function e4(n,e){const t=$e(n);try{const s=await Gk(t.localStore,e);e.targetChanges.forEach(((a,o)=>{const c=t.Au.get(o);c&&(gt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?gt(c.hu,14607):a.removedDocuments.size>0&&(gt(c.hu,42227),c.hu=!1))})),await Cd(t,s,e)}catch(s){await Lc(s)}}function q_(n,e,t){const s=$e(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach(((o,c)=>{const h=c.view.va(e);h.snapshot&&a.push(h.snapshot)})),(function(c,h){const g=$e(c);g.onlineState=h;let p=!1;g.queries.forEach(((v,w)=>{for(const E of w.Sa)E.va(h)&&(p=!0)})),p&&mv(g)})(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function DI(n,e,t){const s=$e(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),o=a&&a.key;if(o){let c=new zt(je.comparator);c=c.insert(o,zn.newNoDocument(o,He.min()));const h=st().add(o),g=new zm(He.min(),new Map,new zt(nt),c,h);await e4(s,g),s.du=s.du.remove(o),s.Au.delete(e),yv(s)}else await oy(s.localStore,e,!1).then((()=>uy(s,e,t))).catch(Lc)}async function PI(n,e){const t=$e(n),s=e.batch.batchId;try{const a=await Fk(t.localStore,e);n4(t,s,null),t4(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Cd(t,a)}catch(a){await Lc(a)}}async function LI(n,e,t){const s=$e(n);try{const a=await(function(c,h){const g=$e(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return g.mutationQueue.lookupMutationBatch(p,h).next((w=>(gt(w!==null,37113),v=w.keys(),g.mutationQueue.removeMutationBatch(p,w)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,v,h))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>g.localDocuments.getDocuments(p,v)))}))})(s.localStore,e);n4(s,e,t),t4(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Cd(s,a)}catch(a){await Lc(a)}}function t4(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function n4(n,e,t){const s=$e(n);let a=s.Vu[s.currentUser.toKey()];if(a){const o=a.get(e);o&&(t?o.reject(t):o.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function uy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||s4(n,s)}))}function s4(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(av(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),yv(n))}function $_(n,e,t){for(const s of t)s instanceof XT?(n.Ru.addReference(s.key,e),MI(n,s)):s instanceof JT?(xe(pv,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||s4(n,s.key)):Ve(19791,{wu:s})}function MI(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(xe(pv,"New document in limbo: "+t),n.Eu.add(s),yv(n))}function yv(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new je(It.fromString(e)),s=n.fu.next();n.Au.set(s,new AI(t)),n.du=n.du.insert(t,s),FT(n.remoteStore,new xa(Fr(Pm(t.path)),s,"TargetPurposeLimboResolution",jm.ce))}}async function Cd(n,e,t){const s=$e(n),a=[],o=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((h,g)=>{c.push(s.pu(g,e,t).then((p=>{var v;if((p||t)&&s.isPrimaryClient){const w=p?!p.fromCache:(v=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(g.targetId,w?"current":"not-current")}if(p){a.push(p);const w=rv.As(g.targetId,p);o.push(w)}})))})),await Promise.all(c),s.Pu.H_(a),await(async function(g,p){const v=$e(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>de.forEach(p,(E=>de.forEach(E.Es,(T=>v.persistence.referenceDelegate.addReference(w,E.targetId,T))).next((()=>de.forEach(E.ds,(T=>v.persistence.referenceDelegate.removeReference(w,E.targetId,T)))))))))}catch(w){if(!Mc(w))throw w;xe(iv,"Failed to update sequence numbers: "+w)}for(const w of p){const E=w.targetId;if(!w.fromCache){const T=v.Ms.get(E),k=T.snapshotVersion,L=T.withLastLimboFreeSnapshotVersion(k);v.Ms=v.Ms.insert(E,L)}}})(s.localStore,o))}async function VI(n,e){const t=$e(n);if(!t.currentUser.isEqual(e)){xe(pv,"User change. New user:",e.toKey());const s=await zT(t.localStore,e);t.currentUser=e,(function(o,c){o.mu.forEach((h=>{h.forEach((g=>{g.reject(new ye(le.CANCELLED,c))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Cd(t,s.Ls)}}function UI(n,e){const t=$e(n),s=t.Au.get(e);if(s&&s.hu)return st().add(s.key);{let a=st();const o=t.Iu.get(e);if(!o)return a;for(const c of o){const h=t.Tu.get(c);a=a.unionWith(h.view.nu)}return a}}function r4(n){const e=$e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=e4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=DI.bind(null,e),e.Pu.H_=xI.bind(null,e.eventManager),e.Pu.yu=EI.bind(null,e.eventManager),e}function BI(n){const e=$e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LI.bind(null,e),e}class Qf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return $k(this.persistence,new zk,e.initialUser,this.serializer)}Cu(e){return new BT(sv.mi,this.serializer)}Du(e){return new Xk}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qf.provider={build:()=>new Qf};class zI extends Qf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){gt(this.persistence.referenceDelegate instanceof Gf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new Ak(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?us.withCacheSize(this.cacheSizeBytes):us.DEFAULT;return new BT((s=>Gf.mi(s,t)),this.serializer)}}class dy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>q_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=VI.bind(null,this.syncEngine),await bI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new _I})()}createDatastore(e){const t=Hm(e.databaseInfo.databaseId),s=(function(o){return new nI(o)})(e.databaseInfo);return(function(o,c,h,g){return new aI(o,c,h,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,o,c,h){return new lI(s,a,o,c,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>q_(this.syncEngine,t,0)),(function(){return M_.v()?new M_:new Jk})())}createSyncEngine(e,t){return(function(a,o,c,h,g,p,v){const w=new NI(a,o,c,h,g,p);return v&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const o=$e(a);xe(qo,"RemoteStore shutting down."),o.Ea.add(5),await Nd(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}dy.provider={build:()=>new dy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ci("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma="FirestoreClient";class HI{constructor(e,t,s,a,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=Bn.UNAUTHENTICATED,this.clientId=Im.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(s,(async c=>{xe(Ma,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(xe(Ma,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=dv(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function E0(n,e){n.asyncQueue.verifyOperationInProgress(),xe(Ma,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async a=>{s.isEqual(a)||(await zT(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function F_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await qI(n);xe(Ma,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>U_(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,a)=>U_(e.remoteStore,a))),n._onlineComponents=e}async function qI(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){xe(Ma,"Using user provided OfflineComponentProvider");try{await E0(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===le.FAILED_PRECONDITION||a.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Ho("Error using user provided cache. Falling back to memory cache: "+t),await E0(n,new Qf)}}else xe(Ma,"Using default OfflineComponentProvider"),await E0(n,new zI(void 0));return n._offlineComponents}async function i4(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(xe(Ma,"Using user provided OnlineComponentProvider"),await F_(n,n._uninitializedComponentsProvider._online)):(xe(Ma,"Using default OnlineComponentProvider"),await F_(n,new dy))),n._onlineComponents}function $I(n){return i4(n).then((e=>e.syncEngine))}async function Wf(n){const e=await i4(n),t=e.eventManager;return t.onListen=CI.bind(null,e.syncEngine),t.onUnlisten=RI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=kI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=jI.bind(null,e.syncEngine),t}function FI(n,e,t={}){const s=new xi;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,h,g,p){const v=new vv({next:E=>{v.Nu(),c.enqueueAndForget((()=>fv(o,w)));const T=E.docs.has(h);!T&&E.fromCache?p.reject(new ye(le.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&E.fromCache&&g&&g.source==="server"?p.reject(new ye(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),w=new gv(Pm(h.path),v,{includeMetadataChanges:!0,qa:!0});return hv(o,w)})(await Wf(n),n.asyncQueue,e,t,s))),s.promise}function GI(n,e,t={}){const s=new xi;return n.asyncQueue.enqueueAndForget((async()=>(function(o,c,h,g,p){const v=new vv({next:E=>{v.Nu(),c.enqueueAndForget((()=>fv(o,w))),E.fromCache&&g.source==="server"?p.reject(new ye(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),w=new gv(h,v,{includeMetadataChanges:!0,qa:!0});return hv(o,w)})(await Wf(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4="firestore.googleapis.com",K_=!0;class Q_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=o4,this.ssl=K_}else this.host=e.host,this.ssl=e.ssl??K_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=UT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Tk)throw new ye(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=a4(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ye(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ye(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ye(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fm{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Q_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Q_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new YE;switch(s.type){case"firstParty":return new sC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ye(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=G_.get(t);s&&(xe("ComponentProvider","Removing Datastore"),G_.delete(t),s.terminate())})(this),Promise.resolve()}}function l4(n,e,t,s={}){var p;n=Hn(n,Fm);const a=Ko(e),o=n._getSettings(),c={...o,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;a&&(zy(`https://${h}`),Hy("Firestore",!0)),o.host!==o4&&o.host!==h&&Ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...o,host:h,ssl:a,emulatorOptions:s};if(!Ai(g,c)&&(n._setSettings(g),s.mockUserToken)){let v,w;if(typeof s.mockUserToken=="string")v=s.mockUserToken,w=Bn.MOCK_USER;else{v=LE(s.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new ye(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Bn(E)}n._authCredentials=new eC(new WE(v,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Zr(this.firestore,e,this._query)}}class Bt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}toJSON(){return{type:Bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Td(t,Bt._jsonSchema))return new Bt(e,s||null,new je(It.fromString(t.referencePath)))}}Bt._jsonSchemaVersion="firestore/documentReference/1.0",Bt._jsonSchema={type:hn("string",Bt._jsonSchemaVersion),referencePath:hn("string")};class Ei extends Zr{constructor(e,t,s){super(e,t,Pm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new je(e))}withConverter(e){return new Ei(this.firestore,e,this._path)}}function At(n,e,...t){if(n=en(n),XE("collection","path",e),n instanceof Fm){const s=It.fromString(e,...t);return o_(s),new Ei(n,null,s)}{if(!(n instanceof Bt||n instanceof Ei))throw new ye(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(It.fromString(e,...t));return o_(s),new Ei(n.firestore,null,s)}}function ut(n,e,...t){if(n=en(n),arguments.length===1&&(e=Im.newId()),XE("doc","path",e),n instanceof Fm){const s=It.fromString(e,...t);return a_(s),new Bt(n,null,new je(s))}{if(!(n instanceof Bt||n instanceof Ei))throw new ye(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(It.fromString(e,...t));return a_(s),new Bt(n.firestore,n instanceof Ei?n.converter:null,new je(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="AsyncQueue";class Y_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qT(this,"async_queue_retry"),this._c=()=>{const s=x0();s&&xe(W_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=x0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=x0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new xi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Mc(e))throw e;xe(W_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Ci("INTERNAL UNHANDLED ERROR: ",X_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=uv.createAndSchedule(this,e,t,s,(o=>this.hc(o)));return this.tc.push(a),a}uc(){this.nc&&Ve(47125,{Pc:X_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function X_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const a=t;for(const o of s)if(o in a&&typeof a[o]=="function")return!0;return!1})(n,["next","error","complete"])}class Er extends Fm{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new Y_,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Y_(e),this._firestoreClient=void 0,await e}}}function c4(n,e){const t=typeof n=="object"?n:km(),s=typeof n=="string"?n:Bf,a=Cm(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const o=OE("firestore");o&&l4(a,...o)}return a}function Bc(n){if(n._terminated)throw new ye(le.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||KI(n),n._firestoreClient}function KI(n){var s,a,o;const e=n._freezeSettings(),t=(function(h,g,p,v){return new bC(h,g,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,a4(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new HI(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const g=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e){this._byteString=e}static fromBase64String(e){try{return new As(_n.fromBase64String(e))}catch(t){throw new ye(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new As(_n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:As._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Td(e,As._jsonSchema))return As.fromBase64String(e.bytes)}}As._jsonSchemaVersion="firestore/bytes/1.0",As._jsonSchema={type:hn("string",As._jsonSchemaVersion),bytes:hn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function Gm(){return new Xo(X0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return nt(this._lat,e._lat)||nt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wr._jsonSchemaVersion}}static fromJSON(e){if(Td(e,wr._jsonSchema))return new wr(e.latitude,e.longitude)}}wr._jsonSchemaVersion="firestore/geoPoint/1.0",wr._jsonSchema={type:hn("string",wr._jsonSchemaVersion),latitude:hn("number"),longitude:hn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let o=0;o<s.length;++o)if(s[o]!==a[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:_r._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Td(e,_r._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new _r(e.vectorValues);throw new ye(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_r._jsonSchemaVersion="firestore/vectorValue/1.0",_r._jsonSchema={type:hn("string",_r._jsonSchemaVersion),vectorValues:hn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=/^__.*__$/;class WI{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new za(e,this.data,this.fieldMask,t,this.fieldTransforms):new Sd(e,this.data,t,this.fieldTransforms)}}class u4{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new za(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function d4(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve(40011,{Ac:n})}}class Km{constructor(e,t,s,a,o,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Km({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Yf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(d4(this.Ac)&&QI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class YI{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Hm(e)}Cc(e,t,s,a=!1){return new Km({Ac:e,methodName:t,Dc:s,path:wn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kd(n){const e=n._freezeSettings(),t=Hm(n._databaseId);return new YI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function bv(n,e,t,s,a,o={}){const c=n.Cc(o.merge||o.mergeFields?2:0,e,t,a);Ev("Data must be an object, but it was:",c,s);const h=g4(s,c);let g,p;if(o.merge)g=new ks(c.fieldMask),p=c.fieldTransforms;else if(o.mergeFields){const v=[];for(const w of o.mergeFields){const E=hy(e,w,t);if(!c.contains(E))throw new ye(le.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);y4(v,E)||v.push(E)}g=new ks(v),p=c.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,p=c.fieldTransforms;return new WI(new hs(h),g,p)}class Qm extends Jo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qm}}function h4(n,e,t){return new Km({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class wv extends Jo{_toFieldTransform(e){return new Jy(e.path,new dd)}isEqual(e){return e instanceof wv}}class _v extends Jo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=h4(this,e,!0),s=this.vc.map((o=>Zo(o,t))),a=new xc(s);return new Jy(e.path,a)}isEqual(e){return e instanceof _v&&Ai(this.vc,e.vc)}}class xv extends Jo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=h4(this,e,!0),s=this.vc.map((o=>Zo(o,t))),a=new Ec(s);return new Jy(e.path,a)}isEqual(e){return e instanceof xv&&Ai(this.vc,e.vc)}}function f4(n,e,t,s){const a=n.Cc(1,e,t);Ev("Data must be an object, but it was:",a,s);const o=[],c=hs.empty();Ba(s,((g,p)=>{const v=Tv(e,g,t);p=en(p);const w=a.yc(v);if(p instanceof Qm)o.push(v);else{const E=Zo(p,w);E!=null&&(o.push(v),c.set(v,E))}}));const h=new ks(o);return new u4(c,h,a.fieldTransforms)}function m4(n,e,t,s,a,o){const c=n.Cc(1,e,t),h=[hy(e,s,t)],g=[a];if(o.length%2!=0)throw new ye(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)h.push(hy(e,o[E])),g.push(o[E+1]);const p=[],v=hs.empty();for(let E=h.length-1;E>=0;--E)if(!y4(p,h[E])){const T=h[E];let k=g[E];k=en(k);const L=c.yc(T);if(k instanceof Qm)p.push(T);else{const I=Zo(k,L);I!=null&&(p.push(T),v.set(T,I))}}const w=new ks(p);return new u4(v,w,c.fieldTransforms)}function XI(n,e,t,s=!1){return Zo(t,n.Cc(s?4:3,e))}function Zo(n,e){if(p4(n=en(n)))return Ev("Unsupported field value:",e,n),g4(n,e);if(n instanceof Jo)return(function(s,a){if(!d4(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const o=s._toFieldTransform(a);o&&a.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,a){const o=[];let c=0;for(const h of s){let g=Zo(h,a.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),o.push(g),c++}return{arrayValue:{values:o}}})(n,e)}return(function(s,a){if((s=en(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return HC(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const o=Nt.fromDate(s);return{timestampValue:Ff(a.serializer,o)}}if(s instanceof Nt){const o=new Nt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ff(a.serializer,o)}}if(s instanceof wr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof As)return{bytesValue:jT(a.serializer,s._byteString)};if(s instanceof Bt){const o=a.databaseId,c=s.firestore._databaseId;if(!c.isEqual(o))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:tv(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof _r)return(function(c,h){return{mapValue:{fields:{[oT]:{stringValue:lT},[zf]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw h.Sc("VectorValues must only contain numeric values.");return Xy(h.serializer,p)}))}}}}}})(s,a);throw a.Sc(`Unsupported field value: ${Rm(s)}`)})(n,e)}function g4(n,e){const t={};return tT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ba(n,((s,a)=>{const o=Zo(a,e.mc(s));o!=null&&(t[s]=o)})),{mapValue:{fields:t}}}function p4(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Nt||n instanceof wr||n instanceof As||n instanceof Bt||n instanceof Jo||n instanceof _r)}function Ev(n,e,t){if(!p4(t)||!ZE(t)){const s=Rm(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function hy(n,e,t){if((e=en(e))instanceof Xo)return e._internalPath;if(typeof e=="string")return Tv(n,e);throw Yf("Field path arguments must be of type string or ",n,!1,void 0,t)}const JI=new RegExp("[~\\*/\\[\\]]");function Tv(n,e,t){if(e.search(JI)>=0)throw Yf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Xo(...e.split("."))._internalPath}catch{throw Yf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Yf(n,e,t,s,a){const o=s&&!s.isEmpty(),c=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let g="";return(o||c)&&(g+=" (found",o&&(g+=` in field ${s}`),c&&(g+=` in document ${a}`),g+=")"),new ye(le.INVALID_ARGUMENT,h+n+g)}function y4(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e,t,s,a,o){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Wm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ZI extends v4{data(){return super.data()}}function Wm(n,e){return typeof e=="string"?Tv(n,e):e instanceof Xo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b4(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ye(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sv{}class Ym extends Sv{}function Ut(n,e,...t){let s=[];e instanceof Sv&&s.push(e),s=s.concat(t),(function(o){const c=o.filter((g=>g instanceof Xm)).length,h=o.filter((g=>g instanceof Id)).length;if(c>1||c>0&&h>0)throw new ye(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)n=a._apply(n);return n}class Id extends Ym{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Id(e,t,s)}_apply(e){const t=this._parse(e);return w4(e._query,t),new Zr(e.firestore,e.converter,ny(e._query,t))}_parse(e){const t=kd(e.firestore);return(function(o,c,h,g,p,v,w){let E;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ye(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){ex(w,v);const k=[];for(const L of w)k.push(Z_(g,o,L));E={arrayValue:{values:k}}}else E=Z_(g,o,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||ex(w,v),E=XI(h,c,w,v==="in"||v==="not-in");return dn.create(p,v,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function un(n,e,t){const s=e,a=Wm("where",n);return Id._create(a,s,t)}class Xm extends Sv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Xm(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:xr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,o){let c=a;const h=o.getFlattenedFilters();for(const g of h)w4(c,g),c=ny(c,g)})(e._query,t),new Zr(e.firestore,e.converter,ny(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Jm extends Ym{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Jm(e,t)}_apply(e){const t=(function(a,o,c){if(a.startAt!==null)throw new ye(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ye(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ud(o,c)})(e._query,this._field,this._direction);return new Zr(e.firestore,e.converter,(function(a,o){const c=a.explicitOrderBy.concat([o]);return new Vc(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function Zm(n,e="asc"){const t=e,s=Wm("orderBy",n);return Jm._create(s,t)}class eg extends Ym{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new eg(e,t,s)}_apply(e){return new Zr(e.firestore,e.converter,qf(e._query,this._limit,this._limitType))}}function Xf(n){return eg._create("limit",n,"F")}function Z_(n,e,t){if(typeof(t=en(t))=="string"){if(t==="")throw new ye(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pT(e)&&t.indexOf("/")!==-1)throw new ye(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(It.fromString(t));if(!je.isDocumentKey(s))throw new ye(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return g_(n,new je(s))}if(t instanceof Bt)return g_(n,t._key);throw new ye(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rm(t)}.`)}function ex(n,e){if(!Array.isArray(n)||n.length===0)throw new ye(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function w4(n,e){const t=(function(a,o){for(const c of a)for(const h of c.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ye(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class _4{convertValue(e,t="none"){switch(Pa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Da(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ba(e,((a,o)=>{s[a]=this.convertValue(o,t)})),s}convertVectorValue(e){var s,a,o;const t=(o=(a=(s=e.fields)==null?void 0:s[zf].arrayValue)==null?void 0:a.values)==null?void 0:o.map((c=>Zt(c.doubleValue)));return new _r(t)}convertGeoPoint(e){return new wr(Zt(e.latitude),Zt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Dm(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(ld(e));default:return null}}convertTimestamp(e){const t=Oa(e);return new Nt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=It.fromString(e);gt(VT(s),9688,{name:e});const a=new bc(s.get(1),s.get(3)),o=new je(s.popFirst(5));return a.isEqual(t)||Ci(`Document ${o} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class rc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ka extends v4{constructor(e,t,s,a,o,c){super(e,t,s,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ed(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Wm("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ka._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ka._jsonSchemaVersion="firestore/documentSnapshot/1.0",ka._jsonSchema={type:hn("string",ka._jsonSchemaVersion),bundleSource:hn("string","DocumentSnapshot"),bundleName:hn("string"),bundle:hn("string")};class ed extends ka{data(e={}){return super.data(e)}}class Ia{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new rc(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new ed(this._firestore,this._userDataWriter,s.key,s,new rc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,o){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((h=>{const g=new ed(a._firestore,a._userDataWriter,h.doc.key,h.doc,new rc(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>o||h.type!==3)).map((h=>{const g=new ed(a._firestore,a._userDataWriter,h.doc.key,h.doc,new rc(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,v=-1;return h.type!==0&&(p=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),v=c.indexOf(h.doc.key)),{type:eR(h.type),doc:g,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ia._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Im.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),s.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),a.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function eR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(n){n=Hn(n,Bt);const e=Hn(n.firestore,Er);return FI(Bc(e),n._key).then((t=>x4(e,n,t)))}Ia._jsonSchemaVersion="firestore/querySnapshot/1.0",Ia._jsonSchema={type:hn("string",Ia._jsonSchemaVersion),bundleSource:hn("string","QuerySnapshot"),bundleName:hn("string"),bundle:hn("string")};class Nv extends _4{constructor(e){super(),this.firestore=e}convertBytes(e){return new As(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,t)}}function pn(n){n=Hn(n,Zr);const e=Hn(n.firestore,Er),t=Bc(e),s=new Nv(e);return b4(n._query),GI(t,n._query).then((a=>new Ia(e,s,n,a)))}function tg(n,e,t){n=Hn(n,Bt);const s=Hn(n.firestore,Er),a=Av(n.converter,e,t);return zc(s,[bv(kd(s),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Xn.none())])}function ds(n,e,t,...s){n=Hn(n,Bt);const a=Hn(n.firestore,Er),o=kd(a);let c;return c=typeof(e=en(e))=="string"||e instanceof Xo?m4(o,"updateDoc",n._key,e,t,s):f4(o,"updateDoc",n._key,e),zc(a,[c.toMutation(n._key,Xn.exists(!0))])}function Cv(n){return zc(Hn(n.firestore,Er),[new Bm(n._key,Xn.none())])}function hd(n,e){const t=Hn(n.firestore,Er),s=ut(n),a=Av(n.converter,e);return zc(t,[bv(kd(n.firestore),"addDoc",s._key,a,n.converter!==null,{}).toMutation(s._key,Xn.exists(!1))]).then((()=>s))}function lc(n,...e){var g,p,v;n=en(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||J_(e[s])||(t=e[s++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(J_(e[s])){const w=e[s];e[s]=(g=w.next)==null?void 0:g.bind(w),e[s+1]=(p=w.error)==null?void 0:p.bind(w),e[s+2]=(v=w.complete)==null?void 0:v.bind(w)}let o,c,h;if(n instanceof Bt)c=Hn(n.firestore,Er),h=Pm(n._key.path),o={next:w=>{e[s]&&e[s](x4(c,n,w))},error:e[s+1],complete:e[s+2]};else{const w=Hn(n,Zr);c=Hn(w.firestore,Er),h=w._query;const E=new Nv(c);o={next:T=>{e[s]&&e[s](new Ia(c,E,w,T))},error:e[s+1],complete:e[s+2]},b4(n._query)}return(function(E,T,k,L){const I=new vv(L),O=new gv(T,I,k);return E.asyncQueue.enqueueAndForget((async()=>hv(await Wf(E),O))),()=>{I.Nu(),E.asyncQueue.enqueueAndForget((async()=>fv(await Wf(E),O)))}})(Bc(c),h,a,o)}function zc(n,e){return(function(s,a){const o=new xi;return s.asyncQueue.enqueueAndForget((async()=>OI(await $I(s),a,o))),o.promise})(Bc(n),e)}function x4(n,e,t){const s=t.docs.get(e._key),a=new Nv(n);return new ka(n,a,e._key,s,new rc(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=kd(e)}set(e,t,s){this._verifyNotCommitted();const a=T0(e,this._firestore),o=Av(a.converter,t,s),c=bv(this._dataReader,"WriteBatch.set",a._key,o,a.converter!==null,s);return this._mutations.push(c.toMutation(a._key,Xn.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const o=T0(e,this._firestore);let c;return c=typeof(t=en(t))=="string"||t instanceof Xo?m4(this._dataReader,"WriteBatch.update",o._key,t,s,a):f4(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(c.toMutation(o._key,Xn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=T0(e,this._firestore);return this._mutations=this._mutations.concat(new Bm(t._key,Xn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ye(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function T0(n,e){if((n=en(n)).firestore!==e)throw new ye(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function Rd(){return new wv("serverTimestamp")}function T4(...n){return new _v("arrayUnion",n)}function S4(...n){return new xv("arrayRemove",n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(n){return Bc(n=Hn(n,Er)),new E4(n,(e=>zc(n,e)))}(function(e,t=!0){(function(a){Pc=a})(Qo),Bo(new Ra("firestore",((s,{instanceIdentifier:a,options:o})=>{const c=s.getProvider("app").getImmediate(),h=new Er(new tC(s.getProvider("auth-internal")),new rC(c,s.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ye(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bc(p.options.projectId,v)})(c,a),c);return o={useFetchStreams:t,...o},h._setSettings(o),h}),"PUBLIC").setMultipleInstances(!0)),$r(s_,r_,e),$r(s_,r_,"esm2020")})();const fd=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:_4,Bytes:As,CollectionReference:Ei,DocumentReference:Bt,DocumentSnapshot:ka,FieldPath:Xo,FieldValue:Jo,Firestore:Er,FirestoreError:ye,GeoPoint:wr,Query:Zr,QueryCompositeFilterConstraint:Xm,QueryConstraint:Ym,QueryDocumentSnapshot:ed,QueryFieldFilterConstraint:Id,QueryLimitConstraint:eg,QueryOrderByConstraint:Jm,QuerySnapshot:Ia,SnapshotMetadata:rc,Timestamp:Nt,VectorValue:_r,WriteBatch:E4,_AutoId:Im,_ByteString:_n,_DatabaseId:bc,_DocumentKey:je,_EmptyAuthCredentialsProvider:YE,_FieldPath:wn,_cast:Hn,_logWarn:Ho,_validateIsNotUsedTogether:JE,addDoc:hd,arrayRemove:S4,arrayUnion:T4,collection:At,connectFirestoreEmulator:l4,deleteDoc:Cv,doc:ut,documentId:Gm,ensureFirestoreConfigured:Bc,executeWrite:zc,getDoc:Va,getDocs:pn,getFirestore:c4,limit:Xf,onSnapshot:lc,orderBy:Zm,query:Ut,serverTimestamp:Rd,setDoc:tg,updateDoc:ds,where:un,writeBatch:A4},Symbol.toStringTag,{value:"Module"}));var tR="firebase",nR="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$r(tR,nR,"app");function N4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sR=N4,C4=new xd("auth","Firebase",N4());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf=new qy("@firebase/auth");function rR(n,...e){Jf.logLevel<=tt.WARN&&Jf.warn(`Auth (${Qo}): ${n}`,...e)}function Df(n,...e){Jf.logLevel<=tt.ERROR&&Jf.error(`Auth (${Qo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(n,...e){throw kv(n,...e)}function Kr(n,...e){return kv(n,...e)}function k4(n,e,t){const s={...sR(),[e]:t};return new xd("auth","Firebase",s).create(e,{appName:n.name})}function Ti(n){return k4(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kv(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return C4.create(n,...e)}function Me(n,e,...t){if(!n)throw kv(e,...t)}function wi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Df(e),new Error(e)}function Ii(n,e){n||wi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function iR(){return tx()==="http:"||tx()==="https:"}function tx(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iR()||j3()||"connection"in navigator)?navigator.onLine:!0}function oR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ii(t>e,"Short delay should be less than long delay!"),this.isMobile=k3()||O3()}get(){return aR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(n,e){Ii(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],uR=new jd(3e4,6e4);function Ha(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function qa(n,e,t,s,a={}){return R4(n,a,async()=>{let o={},c={};s&&(e==="GET"?c=s:o={body:JSON.stringify(s)});const h=Ed({key:n.config.apiKey,...c}).slice(1),g=await n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:g,...o};return R3()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Ko(n.emulatorConfig.host)&&(p.credentials="include"),I4.fetch()(await j4(n,n.config.apiHost,t,h),p)})}async function R4(n,e,t){n._canInitEmulator=!1;const s={...lR,...e};try{const a=new hR(n),o=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw mf(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const h=o.ok?c.errorMessage:c.error.message,[g,p]=h.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw mf(n,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw mf(n,"email-already-in-use",c);if(g==="USER_DISABLED")throw mf(n,"user-disabled",c);const v=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw k4(n,v,p);Tr(n,v)}}catch(a){if(a instanceof Jr)throw a;Tr(n,"network-request-failed",{message:String(a)})}}async function Od(n,e,t,s,a={}){const o=await qa(n,e,t,s,a);return"mfaPendingCredential"in o&&Tr(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function j4(n,e,t,s){const a=`${e}${t}?${s}`,o=n,c=o.config.emulator?Iv(n.config,a):`${n.config.apiScheme}://${a}`;return cR.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function dR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Kr(this.auth,"network-request-failed")),uR.get())})}}function mf(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=Kr(n,e,s);return a.customData._tokenResponse=t,a}function nx(n){return n!==void 0&&n.enterprise!==void 0}class fR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return dR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function mR(n,e){return qa(n,"GET","/v2/recaptchaConfig",Ha(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gR(n,e){return qa(n,"POST","/v1/accounts:delete",e)}async function Zf(n,e){return qa(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pR(n,e=!1){const t=en(n),s=await t.getIdToken(e),a=Rv(s);Me(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const o=typeof a.firebase=="object"?a.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:a,token:s,authTime:td(S0(a.auth_time)),issuedAtTime:td(S0(a.iat)),expirationTime:td(S0(a.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function S0(n){return Number(n)*1e3}function Rv(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Df("JWT malformed, contained fewer than 3 sections"),null;try{const a=RE(t);return a?JSON.parse(a):(Df("Failed to decode base64 JWT payload"),null)}catch(a){return Df("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function sx(n){const e=Rv(n);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function md(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Jr&&yR(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function yR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=td(this.lastLoginAt),this.creationTime=td(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function em(n){var w;const e=n.auth,t=await n.getIdToken(),s=await md(n,Zf(e,{idToken:t}));Me(s==null?void 0:s.users.length,e,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const o=(w=a.providerUserInfo)!=null&&w.length?O4(a.providerUserInfo):[],c=wR(n.providerData,o),h=n.isAnonymous,g=!(n.email&&a.passwordHash)&&!(c!=null&&c.length),p=h?g:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new my(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(n,v)}async function bR(n){const e=en(n);await em(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wR(n,e){return[...n.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function O4(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _R(n,e){const t=await R4(n,{},async()=>{const s=Ed({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:o}=n.config,c=await j4(n,a,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:h,body:s};return n.emulatorConfig&&Ko(n.emulatorConfig.host)&&(g.credentials="include"),I4.fetch()(c,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function xR(n,e){return qa(n,"POST","/v2/accounts:revokeToken",Ha(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const t=sx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:o}=await _R(e,t);this.updateTokensAndExpiration(s,a,Number(o))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:o}=t,c=new cc;return s&&(Me(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),a&&(Me(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),o&&(Me(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cc,this.toJSON())}_performRefresh(){return wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ga(n,e){Me(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class vr{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new vR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new my(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await md(this,this.stsTokenManager.getToken(this.auth,e));return Me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return pR(this,e)}reload(){return bR(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new vr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await em(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ss(this.auth.app))return Promise.reject(Ti(this.auth));const e=await this.getIdToken();return await md(this,gR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,h=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:w,emailVerified:E,isAnonymous:T,providerData:k,stsTokenManager:L}=t;Me(w&&L,e,"internal-error");const I=cc.fromJSON(this.name,L);Me(typeof w=="string",e,"internal-error"),ga(s,e.name),ga(a,e.name),Me(typeof E=="boolean",e,"internal-error"),Me(typeof T=="boolean",e,"internal-error"),ga(o,e.name),ga(c,e.name),ga(h,e.name),ga(g,e.name),ga(p,e.name),ga(v,e.name);const O=new vr({uid:w,auth:e,email:a,emailVerified:E,displayName:s,isAnonymous:T,photoURL:c,phoneNumber:o,tenantId:h,stsTokenManager:I,createdAt:p,lastLoginAt:v});return k&&Array.isArray(k)&&(O.providerData=k.map(q=>({...q}))),g&&(O._redirectEventId=g),O}static async _fromIdTokenResponse(e,t,s=!1){const a=new cc;a.updateFromServerResponse(t);const o=new vr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await em(o),o}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];Me(a.localId!==void 0,"internal-error");const o=a.providerUserInfo!==void 0?O4(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(o!=null&&o.length),h=new cc;h.updateFromIdToken(s);const g=new vr({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new my(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(o!=null&&o.length)};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=new Map;function _i(n){Ii(n instanceof Function,"Expected a class definition");let e=rx.get(n);return e?(Ii(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,rx.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}D4.type="NONE";const ix=D4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(n,e,t){return`firebase:${n}:${e}:${t}`}class uc{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:o}=this.auth;this.fullUserKey=Pf(this.userKey,a.apiKey,o),this.fullPersistenceKey=Pf("persistence",a.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Zf(this.auth,{idToken:e}).catch(()=>{});return t?vr._fromGetAccountInfoResponse(this.auth,t,e):null}return vr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new uc(_i(ix),e,s);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=a[0]||_i(ix);const c=Pf(s,e.config.apiKey,e.name);let h=null;for(const p of t)try{const v=await p._get(c);if(v){let w;if(typeof v=="string"){const E=await Zf(e,{idToken:v}).catch(()=>{});if(!E)break;w=await vr._fromGetAccountInfoResponse(e,E,v)}else w=vr._fromJSON(e,v);p!==o&&(h=w),o=p;break}}catch{}const g=a.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!g.length?new uc(o,e,s):(o=g[0],h&&await o._set(c,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(c)}catch{}})),new uc(o,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(V4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(P4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(B4(e))return"Blackberry";if(z4(e))return"Webos";if(L4(e))return"Safari";if((e.includes("chrome/")||M4(e))&&!e.includes("edge/"))return"Chrome";if(U4(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function P4(n=qn()){return/firefox\//i.test(n)}function L4(n=qn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function M4(n=qn()){return/crios\//i.test(n)}function V4(n=qn()){return/iemobile/i.test(n)}function U4(n=qn()){return/android/i.test(n)}function B4(n=qn()){return/blackberry/i.test(n)}function z4(n=qn()){return/webos/i.test(n)}function jv(n=qn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function ER(n=qn()){var e;return jv(n)&&!!((e=window.navigator)!=null&&e.standalone)}function TR(){return D3()&&document.documentMode===10}function H4(n=qn()){return jv(n)||U4(n)||z4(n)||B4(n)||/windows phone/i.test(n)||V4(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4(n,e=[]){let t;switch(n){case"Browser":t=ax(qn());break;case"Worker":t=`${ax(qn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Qo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=o=>new Promise((c,h)=>{try{const g=e(o);c(g)}catch(g){h(g)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AR(n,e={}){return qa(n,"GET","/v2/passwordPolicy",Ha(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=6;class CR{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??NR,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ox(this),this.idTokenSubscription=new ox(this),this.beforeStateQueue=new SR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=C4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_i(t)),this._initializationPromise=this.queue(async()=>{var s,a,o;if(!this._deleted&&(this.persistenceManager=await uc.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Zf(this,{idToken:e}),s=await vr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Ss(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(o=this.redirectUser)==null?void 0:o._redirectEventId,h=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!c||c===h)&&(g!=null&&g.user)&&(s=g.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await em(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ss(this.app))return Promise.reject(Ti(this));const t=e?en(e):null;return t&&Me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ss(this.app)?Promise.reject(Ti(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ss(this.app)?Promise.reject(Ti(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_i(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await AR(this),t=new CR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xd("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await xR(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_i(e)||this._popupRedirectResolver;Me(t,this,"argument-error"),this.redirectPersistenceManager=await uc.create(this,[_i(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(h,this,"internal-error"),h.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,a);return()=>{c=!0,g()}}else{const g=e.addObserver(t);return()=>{c=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=q4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(Ss(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&rR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function el(n){return en(n)}class ox{constructor(e){this.auth=e,this.observer=null,this.addObserver=H3(t=>this.observer=t)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ng={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function IR(n){ng=n}function $4(n){return ng.loadJS(n)}function RR(){return ng.recaptchaEnterpriseScript}function jR(){return ng.gapiScript}function OR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class DR{constructor(){this.enterprise=new PR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class PR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const LR="recaptcha-enterprise",F4="NO_RECAPTCHA";class MR{constructor(e){this.type=LR,this.auth=el(e)}async verify(e="verify",t=!1){async function s(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,h)=>{mR(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new fR(g);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,c(p.siteKey)}}).catch(g=>{h(g)})})}function a(o,c,h){const g=window.grecaptcha;nx(g)?g.enterprise.ready(()=>{g.enterprise.execute(o,{action:e}).then(p=>{c(p)}).catch(()=>{c(F4)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new DR().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{s(this.auth).then(h=>{if(!t&&nx(window.grecaptcha))a(h,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let g=RR();g.length!==0&&(g+=h),$4(g).then(()=>{a(h,o,c)}).catch(p=>{c(p)})}}).catch(h=>{c(h)})})}}async function lx(n,e,t,s=!1,a=!1){const o=new MR(n);let c;if(a)c=F4;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const g=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const g=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return s?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function gy(n,e,t,s,a){var o;if((o=n._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await lx(n,e,t,t==="getOobCode");return s(n,c)}else return s(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await lx(n,e,t,t==="getOobCode");return s(n,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(n,e){const t=Cm(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),o=t.getOptions();if(Ai(o,e??{}))return a;Tr(a,"already-initialized")}return t.initialize({options:e})}function UR(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(_i);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function BR(n,e,t){const s=el(n);Me(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,o=G4(e),{host:c,port:h}=zR(e),g=h===null?"":`:${h}`,p={url:`${o}//${c}${g}/`},v=Object.freeze({host:c,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){Me(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Me(Ai(p,s.config.emulator)&&Ai(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,Ko(c)?(zy(`${o}//${c}${g}`),Hy("Auth",!0)):HR()}function G4(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function zR(n){const e=G4(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const o=a[1];return{host:o,port:cx(s.substr(o.length+1))}}else{const[o,c]=s.split(":");return{host:o,port:cx(c)}}}function cx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function HR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return wi("not implemented")}_getIdTokenResponse(e){return wi("not implemented")}_linkToIdToken(e,t){return wi("not implemented")}_getReauthenticationResolver(e){return wi("not implemented")}}async function qR(n,e){return qa(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $R(n,e){return Od(n,"POST","/v1/accounts:signInWithPassword",Ha(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FR(n,e){return Od(n,"POST","/v1/accounts:signInWithEmailLink",Ha(n,e))}async function GR(n,e){return Od(n,"POST","/v1/accounts:signInWithEmailLink",Ha(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd extends Ov{constructor(e,t,s,a=null){super("password",s),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new gd(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new gd(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gy(e,t,"signInWithPassword",$R);case"emailLink":return FR(e,{email:this._email,oobCode:this._password});default:Tr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return gy(e,s,"signUpPassword",qR);case"emailLink":return GR(e,{idToken:t,email:this._email,oobCode:this._password});default:Tr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dc(n,e){return Od(n,"POST","/v1/accounts:signInWithIdp",Ha(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR="http://localhost";class $o extends Ov{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new $o(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Tr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...o}=t;if(!s||!a)return null;const c=new $o(s,a);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return dc(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,dc(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,dc(e,t)}buildRequest(){const e={requestUri:KR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ed(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function WR(n){const e=qu($u(n)).link,t=e?qu($u(e)).deep_link_id:null,s=qu($u(n)).deep_link_id;return(s?qu($u(s)).link:null)||s||t||e||n}class Dv{constructor(e){const t=qu($u(e)),s=t.apiKey??null,a=t.oobCode??null,o=QR(t.mode??null);Me(s&&a&&o,"argument-error"),this.apiKey=s,this.operation=o,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=WR(e);try{return new Dv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(){this.providerId=Hc.PROVIDER_ID}static credential(e,t){return gd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Dv.parseLink(t);return Me(s,"argument-error"),gd._fromEmailAndCode(e,s.code,s.tenantId)}}Hc.PROVIDER_ID="password";Hc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Hc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd extends K4{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya extends Dd{constructor(){super("facebook.com")}static credential(e){return $o._fromParams({providerId:ya.PROVIDER_ID,signInMethod:ya.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ya.credentialFromTaggedObject(e)}static credentialFromError(e){return ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ya.credential(e.oauthAccessToken)}catch{return null}}}ya.FACEBOOK_SIGN_IN_METHOD="facebook.com";ya.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va extends Dd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return $o._fromParams({providerId:va.PROVIDER_ID,signInMethod:va.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return va.credentialFromTaggedObject(e)}static credentialFromError(e){return va.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return va.credential(t,s)}catch{return null}}}va.GOOGLE_SIGN_IN_METHOD="google.com";va.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba extends Dd{constructor(){super("github.com")}static credential(e){return $o._fromParams({providerId:ba.PROVIDER_ID,signInMethod:ba.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ba.credentialFromTaggedObject(e)}static credentialFromError(e){return ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ba.credential(e.oauthAccessToken)}catch{return null}}}ba.GITHUB_SIGN_IN_METHOD="github.com";ba.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa extends Dd{constructor(){super("twitter.com")}static credential(e,t){return $o._fromParams({providerId:wa.PROVIDER_ID,signInMethod:wa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return wa.credentialFromTaggedObject(e)}static credentialFromError(e){return wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return wa.credential(t,s)}catch{return null}}}wa.TWITTER_SIGN_IN_METHOD="twitter.com";wa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YR(n,e){return Od(n,"POST","/v1/accounts:signUp",Ha(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const o=await vr._fromIdTokenResponse(e,s,a),c=ux(s);return new Fo({user:o,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=ux(s);return new Fo({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function ux(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm extends Jr{constructor(e,t,s,a){super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,tm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new tm(e,t,s,a)}}function Q4(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?tm._fromErrorAndOperation(n,o,e,s):o})}async function XR(n,e,t=!1){const s=await md(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Fo._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JR(n,e,t=!1){const{auth:s}=n;if(Ss(s.app))return Promise.reject(Ti(s));const a="reauthenticate";try{const o=await md(n,Q4(s,a,e,n),t);Me(o.idToken,s,"internal-error");const c=Rv(o.idToken);Me(c,s,"internal-error");const{sub:h}=c;return Me(n.uid===h,s,"user-mismatch"),Fo._forOperation(n,a,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Tr(s,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W4(n,e,t=!1){if(Ss(n.app))return Promise.reject(Ti(n));const s="signIn",a=await Q4(n,s,e),o=await Fo._fromIdTokenResponse(n,s,a);return t||await n._updateCurrentUser(o.user),o}async function ZR(n,e){return W4(el(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y4(n){const e=el(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ej(n,e,t){if(Ss(n.app))return Promise.reject(Ti(n));const s=el(n),c=await gy(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",YR).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&Y4(n),g}),h=await Fo._fromIdTokenResponse(s,"signIn",c);return await s._updateCurrentUser(h.user),h}function dx(n,e,t){return Ss(n.app)?Promise.reject(Ti(n)):ZR(en(n),Hc.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Y4(n),s})}function tj(n,e,t,s){return en(n).onIdTokenChanged(e,t,s)}function nj(n,e,t){return en(n).beforeAuthStateChanged(e,t)}function sj(n,e,t,s){return en(n).onAuthStateChanged(e,t,s)}const nm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(nm,"1"),this.storage.removeItem(nm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj=1e3,ij=10;class J4 extends X4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=H4(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,g)=>{this.notifyListeners(c,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},o=this.storage.getItem(s);TR()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,ij):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},rj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}J4.type="LOCAL";const aj=J4;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4 extends X4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Z4.type="SESSION";const eS=Z4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oj(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new sg(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:o}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const h=Array.from(c).map(async p=>p(t.origin,o)),g=await oj(h);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let o,c;return new Promise((h,g)=>{const p=Pv("",20);a.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},s);c={messageChannel:a,onMessage(w){const E=w;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(E.data.response);break;default:clearTimeout(v),clearTimeout(o),g(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(){return window}function cj(n){Qr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(){return typeof Qr().WorkerGlobalScope<"u"&&typeof Qr().importScripts=="function"}async function uj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dj(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function hj(){return tS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="firebaseLocalStorageDb",fj=1,sm="firebaseLocalStorage",sS="fbase_key";class Pd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function rg(n,e){return n.transaction([sm],e?"readwrite":"readonly").objectStore(sm)}function mj(){const n=indexedDB.deleteDatabase(nS);return new Pd(n).toPromise()}function py(){const n=indexedDB.open(nS,fj);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(sm,{keyPath:sS})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(sm)?e(s):(s.close(),await mj(),e(await py()))})})}async function hx(n,e,t){const s=rg(n,!0).put({[sS]:e,value:t});return new Pd(s).toPromise()}async function gj(n,e){const t=rg(n,!1).get(e),s=await new Pd(t).toPromise();return s===void 0?null:s.value}function fx(n,e){const t=rg(n,!0).delete(e);return new Pd(t).toPromise()}const pj=800,yj=3;class rS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await py(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>yj)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sg._getInstance(hj()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await uj(),!this.activeServiceWorker)return;this.sender=new lj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await py();return await hx(e,nm,"1"),await fx(e,nm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>hx(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>gj(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>fx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const o=rg(a,!1).getAll();return new Pd(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:o}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(o)&&(this.notifyListeners(a,o),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rS.type="LOCAL";const vj=rS;new jd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bj(n,e){return e?_i(e):(Me(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv extends Ov{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return dc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return dc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return dc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function wj(n){return W4(n.auth,new Lv(n),n.bypassAuthState)}function _j(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),JR(t,new Lv(n),n.bypassAuthState)}async function xj(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),XR(t,new Lv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,t,s,a,o=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:o,error:c,type:h}=e;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:o||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wj;case"linkViaPopup":case"linkViaRedirect":return xj;case"reauthViaPopup":case"reauthViaRedirect":return _j;default:Tr(this.auth,"internal-error")}}resolve(e){Ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej=new jd(2e3,1e4);class ic extends iS{constructor(e,t,s,a,o){super(e,t,a,o),this.provider=s,this.authWindow=null,this.pollId=null,ic.currentPopupAction&&ic.currentPopupAction.cancel(),ic.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){Ii(this.filter.length===1,"Popup operations only handle one event");const e=Pv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Kr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Kr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ic.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ej.get())};e()}}ic.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj="pendingRedirect",Lf=new Map;class Sj extends iS{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Lf.get(this.auth._key());if(!e){try{const s=await Aj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Lf.set(this.auth._key(),e)}return this.bypassAuthState||Lf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Aj(n,e){const t=kj(e),s=Cj(n);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function Nj(n,e){Lf.set(n._key(),e)}function Cj(n){return _i(n._redirectPersistence)}function kj(n){return Pf(Tj,n.config.apiKey,n.name)}async function Ij(n,e,t=!1){if(Ss(n.app))return Promise.reject(Ti(n));const s=el(n),a=bj(s,e),c=await new Sj(s,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rj=600*1e3;class jj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Oj(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!aS(e)){const a=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Kr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Rj&&this.cachedEventUids.clear(),this.cachedEventUids.has(mx(e))}saveEventToCache(e){this.cachedEventUids.add(mx(e)),this.lastProcessedEventTime=Date.now()}}function mx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function aS({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Oj(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dj(n,e={}){return qa(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Lj=/^https?/;async function Mj(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Dj(n);for(const t of e)try{if(Vj(t))return}catch{}Tr(n,"unauthorized-domain")}function Vj(n){const e=fy(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!Lj.test(t))return!1;if(Pj.test(n))return s===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj=new jd(3e4,6e4);function gx(){const n=Qr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Bj(n){return new Promise((e,t)=>{var a,o,c;function s(){gx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gx(),t(Kr(n,"network-request-failed"))},timeout:Uj.get()})}if((o=(a=Qr().gapi)==null?void 0:a.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((c=Qr().gapi)!=null&&c.load)s();else{const h=OR("iframefcb");return Qr()[h]=()=>{gapi.load?s():t(Kr(n,"network-request-failed"))},$4(`${jR()}?onload=${h}`).catch(g=>t(g))}}).catch(e=>{throw Mf=null,e})}let Mf=null;function zj(n){return Mf=Mf||Bj(n),Mf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj=new jd(5e3,15e3),qj="__/auth/iframe",$j="emulator/auth/iframe",Fj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Gj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Kj(n){const e=n.config;Me(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Iv(e,$j):`https://${n.config.authDomain}/${qj}`,s={apiKey:e.apiKey,appName:n.name,v:Qo},a=Gj.get(n.config.apiHost);a&&(s.eid=a);const o=n._getFrameworks();return o.length&&(s.fw=o.join(",")),`${t}?${Ed(s).slice(1)}`}async function Qj(n){const e=await zj(n),t=Qr().gapi;return Me(t,n,"internal-error"),e.open({where:document.body,url:Kj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fj,dontclear:!0},s=>new Promise(async(a,o)=>{await s.restyle({setHideOnLeave:!1});const c=Kr(n,"network-request-failed"),h=Qr().setTimeout(()=>{o(c)},Hj.get());function g(){Qr().clearTimeout(h),a(s)}s.ping(g).then(g,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Yj=500,Xj=600,Jj="_blank",Zj="http://localhost";class px{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function e8(n,e,t,s=Yj,a=Xj){const o=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let h="";const g={...Wj,width:s.toString(),height:a.toString(),top:o,left:c},p=qn().toLowerCase();t&&(h=M4(p)?Jj:t),P4(p)&&(e=e||Zj,g.scrollbars="yes");const v=Object.entries(g).reduce((E,[T,k])=>`${E}${T}=${k},`,"");if(ER(p)&&h!=="_self")return t8(e||"",h),new px(null);const w=window.open(e||"",h,v);Me(w,n,"popup-blocked");try{w.focus()}catch{}return new px(w)}function t8(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n8="__/auth/handler",s8="emulator/auth/handler",r8=encodeURIComponent("fac");async function yx(n,e,t,s,a,o){Me(n.config.authDomain,n,"auth-domain-config-required"),Me(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Qo,eventId:a};if(e instanceof K4){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",z3(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))c[v]=w}if(e instanceof Dd){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const g=await n._getAppCheckToken(),p=g?`#${r8}=${encodeURIComponent(g)}`:"";return`${i8(n)}?${Ed(h).slice(1)}${p}`}function i8({config:n}){return n.emulator?Iv(n,s8):`https://${n.authDomain}/${n8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="webStorageSupport";class a8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eS,this._completeRedirectFn=Ij,this._overrideRedirectResult=Nj}async _openPopup(e,t,s,a){var c;Ii((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const o=await yx(e,t,s,fy(),a);return e8(e,o,Pv())}async _openRedirect(e,t,s,a){await this._originValidation(e);const o=await yx(e,t,s,fy(),a);return cj(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:o}=this.eventManagers[t];return a?Promise.resolve(a):(Ii(o,"If manager is not set, promise should be"),o)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await Qj(e),s=new jj(e);return t.register("authEvent",a=>(Me(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(A0,{type:A0},a=>{var c;const o=(c=a==null?void 0:a[0])==null?void 0:c[A0];o!==void 0&&t(!!o),Tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Mj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return H4()||L4()||jv()}}const o8=a8;var vx="@firebase/auth",bx="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c8(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function u8(n){Bo(new Ra("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=s.options;Me(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:q4(n)},p=new kR(s,a,o,g);return UR(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Bo(new Ra("auth-internal",e=>{const t=el(e.getProvider("auth").getImmediate());return(s=>new l8(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),$r(vx,bx,c8(n)),$r(vx,bx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d8=300,h8=PE("authIdTokenMaxAge")||d8;let wx=null;const f8=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>h8)return;const a=t==null?void 0:t.token;wx!==a&&(wx=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function m8(n=km()){const e=Cm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=VR(n,{popupRedirectResolver:o8,persistence:[vj,aj,eS]}),s=PE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(s,location.origin);if(location.origin===o.origin){const c=f8(o.toString());nj(t,c,()=>c(t.currentUser)),tj(t,h=>c(h))}}const a=jE("auth");return a&&BR(t,`http://${a}`),t}function g8(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}IR({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=a=>{const o=Kr("internal-error");o.customData=a,t(o)},s.type="text/javascript",s.charset="UTF-8",g8().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});u8("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="firebasestorage.googleapis.com",p8="storageBucket",y8=120*1e3,v8=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $a=class lS extends Jr{constructor(e,t,s=0){super(N0(e),`Firebase Storage: ${t} (${N0(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,lS.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return N0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var Yr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Yr||(Yr={}));function N0(n){return"storage/"+n}function b8(){const n="An unknown error occurred, please check the error payload for server response.";return new $a(Yr.UNKNOWN,n)}function w8(){return new $a(Yr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _8(){return new $a(Yr.CANCELED,"User canceled the upload/download.")}function x8(n){return new $a(Yr.INVALID_URL,"Invalid URL '"+n+"'.")}function E8(n){return new $a(Yr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function _x(n){return new $a(Yr.INVALID_ARGUMENT,n)}function cS(){return new $a(Yr.APP_DELETED,"The Firebase app was deleted.")}function T8(n){return new $a(Yr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=br.makeFromUrl(e,t)}catch{return new br(e,"")}if(s.path==="")return s;throw E8(e)}static makeFromUrl(e,t){let s=null;const a="([A-Za-z0-9.\\-_]+)";function o(te){te.path.charAt(te.path.length-1)==="/"&&(te.path_=te.path_.slice(0,-1))}const c="(/(.*))?$",h=new RegExp("^gs://"+a+c,"i"),g={bucket:1,path:3};function p(te){te.path_=decodeURIComponent(te.path)}const v="v[A-Za-z0-9_]+",w=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",T=new RegExp(`^https?://${w}/${v}/b/${a}/o${E}`,"i"),k={bucket:1,path:3},L=t===oS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,I="([^?#]*)",O=new RegExp(`^https?://${L}/${a}/${I}`,"i"),G=[{regex:h,indices:g,postModify:o},{regex:T,indices:k,postModify:p},{regex:O,indices:{bucket:1,path:2},postModify:p}];for(let te=0;te<G.length;te++){const me=G[te],he=me.regex.exec(e);if(he){const N=he[me.indices.bucket];let C=he[me.indices.path];C||(C=""),s=new br(N,C),me.postModify(s);break}}if(s==null)throw x8(e);return s}}class S8{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A8(n,e,t){let s=1,a=null,o=null,c=!1,h=0;function g(){return h===2}let p=!1;function v(...I){p||(p=!0,e.apply(null,I))}function w(I){a=setTimeout(()=>{a=null,n(T,g())},I)}function E(){o&&clearTimeout(o)}function T(I,...O){if(p){E();return}if(I){E(),v.call(null,I,...O);return}if(g()||c){E(),v.call(null,I,...O);return}s<64&&(s*=2);let G;h===1?(h=2,G=0):G=(s+Math.random())*1e3,w(G)}let k=!1;function L(I){k||(k=!0,E(),!p&&(a!==null?(I||(h=2),clearTimeout(a),w(0)):I||(h=1)))}return w(0),o=setTimeout(()=>{c=!0,L(!0)},t),L}function N8(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C8(n){return n!==void 0}function xx(n,e,t,s){if(s<e)throw _x(`Invalid value for '${n}'. Expected ${e} or greater.`);if(s>t)throw _x(`Invalid value for '${n}'. Expected ${t} or less.`)}function k8(n){const e=encodeURIComponent;let t="?";for(const s in n)if(n.hasOwnProperty(s)){const a=e(s)+"="+e(n[s]);t=t+a+"&"}return t=t.slice(0,-1),t}var rm;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(rm||(rm={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I8(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||a||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(e,t,s,a,o,c,h,g,p,v,w,E=!0,T=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=a,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=g,this.timeout_=p,this.progressCallback_=v,this.connectionFactory_=w,this.retry=E,this.isUsingEmulator=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,L)=>{this.resolve_=k,this.reject_=L,this.start_()})}start_(){const e=(s,a)=>{if(a){s(!1,new gf(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=h=>{const g=h.loaded,p=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,p)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const h=o.getErrorCode()===rm.NO_ERROR,g=o.getStatus();if(!h||I8(g,this.additionalRetryCodes_)&&this.retry){const v=o.getErrorCode()===rm.ABORT;s(!1,new gf(!1,null,v));return}const p=this.successCodes_.indexOf(g)!==-1;s(!0,new gf(p,o))})},t=(s,a)=>{const o=this.resolve_,c=this.reject_,h=a.connection;if(a.wasSuccessCode)try{const g=this.callback_(h,h.getResponse());C8(g)?o(g):o()}catch(g){c(g)}else if(h!==null){const g=b8();g.serverResponse=h.getErrorText(),this.errorCallback_?c(this.errorCallback_(h,g)):c(g)}else if(a.canceled){const g=this.appDelete_?cS():_8();c(g)}else{const g=w8();c(g)}};this.canceled_?t(!1,new gf(!1,null,!0)):this.backoffId_=A8(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&N8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class gf{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function j8(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function O8(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function D8(n,e){e&&(n["X-Firebase-GMPID"]=e)}function P8(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function L8(n,e,t,s,a,o,c=!0,h=!1){const g=k8(n.urlParams),p=n.url+g,v=Object.assign({},n.headers);return D8(v,e),j8(v,t),O8(v,o),P8(v,s),new R8(p,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,c,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M8(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function V8(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,t){this._service=e,t instanceof br?this._location=t:this._location=br.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new im(e,t)}get root(){const e=new br(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return V8(this._location.path)}get storage(){return this._service}get parent(){const e=M8(this._location.path);if(e===null)return null;const t=new br(this._location.bucket,e);return new im(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw T8(e)}}function Ex(n,e){const t=e==null?void 0:e[p8];return t==null?null:br.makeFromBucketSpec(t,n)}function U8(n,e,t,s={}){n.host=`${e}:${t}`;const a=Ko(e);a&&(zy(`https://${n.host}/b`),Hy("Storage",!0)),n._isUsingEmulator=!0,n._protocol=a?"https":"http";const{mockUserToken:o}=s;o&&(n._overrideAuthToken=typeof o=="string"?o:LE(o,n.app.options.projectId))}class B8{constructor(e,t,s,a,o,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=a,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=oS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=y8,this._maxUploadRetryTime=v8,this._requests=new Set,a!=null?this._bucket=br.makeFromBucketSpec(a,this._host):this._bucket=Ex(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=br.makeFromBucketSpec(this._url,e):this._bucket=Ex(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Ss(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new im(this,e)}_makeRequest(e,t,s,a,o=!0){if(this._deleted)return new S8(cS());{const c=L8(e,this._appId,s,a,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[s,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,a).getPromise()}}const Tx="@firebase/storage",Sx="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="storage";function z8(n=km(),e){n=en(n);const s=Cm(n,uS).getImmediate({identifier:e}),a=OE("storage");return a&&H8(s,...a),s}function H8(n,e,t,s={}){U8(n,e,t,s)}function q8(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),s=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new B8(t,s,a,e,Qo)}function $8(){Bo(new Ra(uS,q8,"PUBLIC").setMultipleInstances(!0)),$r(Tx,Sx,""),$r(Tx,Sx,"esm2020")}$8();const F8={apiKey:"AIzaSyDll7h-FpzCVml2vy8KeMPA6xExGUda_NE",authDomain:"thi-tnd.firebaseapp.com",projectId:"thi-tnd",storageBucket:"thi-tnd.firebasestorage.app",messagingSenderId:"107125875663",appId:"1:107125875663:web:0e1a632779f51340c828ba",databaseURL:"https://thi-tnd-default-rtdb.asia-southeast1.firebasedatabase.app"},ig=q6().length?km():UE(F8),Vo=m8(ig),ke=c4(ig);z8(ig);const G8=Object.freeze(Object.defineProperty({__proto__:null,app:ig,auth:Vo,db:ke},Symbol.toStringTag,{value:"Module"})),dS=async(n,e,t,s,a,o,c,h)=>{try{const g={title:n,message:e,type:t,targetType:s,targetId:a,senderId:o,senderName:c||"H thng",createdAt:Rd(),expiryDate:h?Nt.fromDate(h):null,read:!1,readBy:[],deletedBy:[]};if(s==="user"&&a)await hd(At(ke,"users",a,"notifications"),g),console.log(`Notification sent to user ${a}`);else if(s==="class"&&a){let p=new Map;const v=Ut(At(ke,"courses"),un("name","==",a)),w=await pn(v);let E=null,T=a;if(!w.empty)E=w.docs[0].id;else{const I=ut(ke,"courses",a),O=await pn(Ut(At(ke,"courses"),un(Gm(),"==",a)));O.empty||(E=a,T=O.docs[0].data().name)}console.log(`Resolved Class Target: ID=${E}, Name=${T}`);const k=[];if(T&&(k.push(pn(Ut(At(ke,"users"),un("courseName","==",T)))),k.push(pn(Ut(At(ke,"users"),un("class","==",T))))),E&&k.push(pn(Ut(At(ke,"users"),un("courseId","==",E)))),(await Promise.all(k)).forEach(I=>{I.docs.forEach(O=>{p.set(O.id,O.id)})}),p.size===0)console.log("No students found for this class.");else{const I=A4(ke);let O=0;p.forEach(q=>{const G=ut(At(ke,"users",q,"notifications"));I.set(G,g),O++}),await I.commit(),console.log(`Notification sent to ${p.size} students in class ${T}`)}}await hd(At(ke,"notifications"),g),console.log("Master notification record created.")}catch(g){throw console.error("Error sending notification:",g),g}},K8=async(n,e)=>{try{const t=[],s=Ut(At(ke,"notifications"),un("targetType","==","all"),Xf(20)),a=Ut(At(ke,"users",n,"notifications"),Zm("createdAt","desc"),Xf(20));try{(await pn(s)).docs.forEach(h=>{var v;const g=h.data(),p=((v=g.readBy)==null?void 0:v.includes(n))||!1;t.push({id:h.id,...g,read:p})})}catch(c){console.warn("Retrying global fetch without constraints due to error:",c)}try{(await pn(a)).docs.forEach(h=>{t.push({id:h.id,...h.data()})})}catch(c){console.error("Error fetching personal notifications:",c)}return t.sort((c,h)=>{var v,w;const g=((v=c.createdAt)==null?void 0:v.seconds)||0;return(((w=h.createdAt)==null?void 0:w.seconds)||0)-g}).filter(c=>{var h;return!((h=c.deletedBy)!=null&&h.includes(n))})}catch(t){return console.error("Error fetching notifications:",t),[]}},Q8=async(n,e)=>{try{const t=ut(ke,"notifications",n),{arrayUnion:s}=await gn(async()=>{const{arrayUnion:o}=await Promise.resolve().then(()=>fd);return{arrayUnion:o}},void 0);try{await ds(t,{deletedBy:s(e)});return}catch{}const a=ut(ke,"users",e,"notifications",n);await ds(a,{deletedBy:s(e)})}catch{}},hS=async()=>{try{const n=Nt.now(),e=Ut(At(ke,"notifications"),un("targetType","==","all"),Xf(20)),t=await pn(e),s=[];return t.forEach(a=>{const o=a.data();(o.type==="special"||o.type==="attention")&&(o.expiryDate&&o.expiryDate.seconds?o.expiryDate.seconds>n.seconds&&s.push({id:a.id,...o}):s.push({id:a.id,...o}))}),s}catch(n){return console.error("Error fetching marquee:",n),[]}},W8=async()=>{try{const n=Ut(At(ke,"notifications"),Zm("createdAt","desc"));return(await pn(n)).docs.map(t=>({id:t.id,...t.data()}))}catch(n){return console.error("Error fetching all notifications:",n),[]}},Y8=async n=>{try{return await Cv(ut(ke,"notifications",n)),!0}catch(e){return console.error("Error deleting notification:",e),!1}};var fS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ax=Js.createContext&&Js.createContext(fS),X8=["attr","size","title"];function J8(n,e){if(n==null)return{};var t=Z8(n,e),s,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(a=0;a<o.length;a++)s=o[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(t[s]=n[s])}return t}function Z8(n,e){if(n==null)return{};var t={};for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)){if(e.indexOf(s)>=0)continue;t[s]=n[s]}return t}function am(){return am=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},am.apply(this,arguments)}function Nx(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,s)}return t}function om(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Nx(Object(t),!0).forEach(function(s){eO(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Nx(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function eO(n,e,t){return e=tO(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function tO(n){var e=nO(n,"string");return typeof e=="symbol"?e:e+""}function nO(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var s=t.call(n,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function mS(n){return n&&n.map((e,t)=>Js.createElement(e.tag,om({key:t},e.attr),mS(e.child)))}function Fe(n){return e=>Js.createElement(sO,am({attr:om({},n.attr)},e),mS(n.child))}function sO(n){var e=t=>{var{attr:s,size:a,title:o}=n,c=J8(n,X8),h=a||t.size||"1em",g;return t.className&&(g=t.className),n.className&&(g=(g?g+" ":"")+n.className),Js.createElement("svg",am({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,c,{className:g,style:om(om({color:n.color||t.color},t.style),n.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),o&&Js.createElement("title",null,o),n.children)};return Ax!==void 0?Js.createElement(Ax.Consumer,null,t=>e(t)):e(fS)}function nd(n){return Fe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(n)}function rO(n){return Fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.034 8 8 119.033 8 256s111.034 248 248 248 248-111.034 248-248S392.967 8 256 8zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676zM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676z"},child:[]}]})(n)}function iO(n){return Fe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(n)}function pd(n){return Fe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(n)}function gS(n){return Fe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M542.22 32.05c-54.8 3.11-163.72 14.43-230.96 55.59-4.64 2.84-7.27 7.89-7.27 13.17v363.87c0 11.55 12.63 18.85 23.28 13.49 69.18-34.82 169.23-44.32 218.7-46.92 16.89-.89 30.02-14.43 30.02-30.66V62.75c.01-17.71-15.35-31.74-33.77-30.7zM264.73 87.64C197.5 46.48 88.58 35.17 33.78 32.05 15.36 31.01 0 45.04 0 62.75V400.6c0 16.24 13.13 29.78 30.02 30.66 49.49 2.6 149.59 12.11 218.77 46.95 10.62 5.35 23.21-1.94 23.21-13.46V100.63c0-5.29-2.62-10.14-7.27-12.99z"},child:[]}]})(n)}function aO(n){return Fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"},child:[]}]})(n)}function yy(n){return Fe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M208 352c-2.39 0-4.78.35-7.06 1.09C187.98 357.3 174.35 360 160 360c-14.35 0-27.98-2.7-40.95-6.91-2.28-.74-4.66-1.09-7.05-1.09C49.94 352-.33 402.48 0 464.62.14 490.88 21.73 512 48 512h224c26.27 0 47.86-21.12 48-47.38.33-62.14-49.94-112.62-112-112.62zm-48-32c53.02 0 96-42.98 96-96s-42.98-96-96-96-96 42.98-96 96 42.98 96 96 96zM592 0H208c-26.47 0-48 22.25-48 49.59V96c23.42 0 45.1 6.78 64 17.8V64h352v288h-64v-64H384v64h-76.24c19.1 16.69 33.12 38.73 39.69 64H592c26.47 0 48-22.25 48-49.59V49.59C640 22.25 618.47 0 592 0z"},child:[]}]})(n)}function Ac(n){return Fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(n)}function oO(n){return Fe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 480H48c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h352c26.51 0 48 21.49 48 48v352c0 26.51-21.49 48-48 48zm-204.686-98.059l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.248-16.379-6.249-22.628 0L184 302.745l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.25 16.379 6.25 22.628.001z"},child:[]}]})(n)}function lO(n){return Fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(n)}function cO(n){return Fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(n)}function uO(n){return Fe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M512.1 191l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0L552 6.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zm-10.5-58.8c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.7-82.4 14.3-52.8 52.8zM386.3 286.1l33.7 16.8c10.1 5.8 14.5 18.1 10.5 29.1-8.9 24.2-26.4 46.4-42.6 65.8-7.4 8.9-20.2 11.1-30.3 5.3l-29.1-16.8c-16 13.7-34.6 24.6-54.9 31.7v33.6c0 11.6-8.3 21.6-19.7 23.6-24.6 4.2-50.4 4.4-75.9 0-11.5-2-20-11.9-20-23.6V418c-20.3-7.2-38.9-18-54.9-31.7L74 403c-10 5.8-22.9 3.6-30.3-5.3-16.2-19.4-33.3-41.6-42.2-65.7-4-10.9.4-23.2 10.5-29.1l33.3-16.8c-3.9-20.9-3.9-42.4 0-63.4L12 205.8c-10.1-5.8-14.6-18.1-10.5-29 8.9-24.2 26-46.4 42.2-65.8 7.4-8.9 20.2-11.1 30.3-5.3l29.1 16.8c16-13.7 34.6-24.6 54.9-31.7V57.1c0-11.5 8.2-21.5 19.6-23.5 24.6-4.2 50.5-4.4 76-.1 11.5 2 20 11.9 20 23.6v33.6c20.3 7.2 38.9 18 54.9 31.7l29.1-16.8c10-5.8 22.9-3.6 30.3 5.3 16.2 19.4 33.2 41.6 42.1 65.8 4 10.9.1 23.2-10 29.1l-33.7 16.8c3.9 21 3.9 42.5 0 63.5zm-117.6 21.1c59.2-77-28.7-164.9-105.7-105.7-59.2 77 28.7 164.9 105.7 105.7zm243.4 182.7l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0l8.2-14.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zM501.6 431c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.6-82.4 14.3-52.8 52.8z"},child:[]}]})(n)}function tc(n){return Fe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(n)}function dO(n){return Fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 464c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V200.724a48 48 0 0 1 18.387-37.776c24.913-19.529 45.501-35.365 164.2-121.511C199.412 29.17 232.797-.347 256 .003c23.198-.354 56.596 29.172 73.413 41.433 118.687 86.137 139.303 101.995 164.2 121.512A48 48 0 0 1 512 200.724V464zm-65.666-196.605c-2.563-3.728-7.7-4.595-11.339-1.907-22.845 16.873-55.462 40.705-105.582 77.079-16.825 12.266-50.21 41.781-73.413 41.43-23.211.344-56.559-29.143-73.413-41.43-50.114-36.37-82.734-60.204-105.582-77.079-3.639-2.688-8.776-1.821-11.339 1.907l-9.072 13.196a7.998 7.998 0 0 0 1.839 10.967c22.887 16.899 55.454 40.69 105.303 76.868 20.274 14.781 56.524 47.813 92.264 47.573 35.724.242 71.961-32.771 92.263-47.573 49.85-36.179 82.418-59.97 105.303-76.868a7.998 7.998 0 0 0 1.839-10.967l-9.071-13.196z"},child:[]}]})(n)}function Ld(n){return Fe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(n)}function hO(n){return Fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256.12 245.96c-13.25 0-24 10.74-24 24 1.14 72.25-8.14 141.9-27.7 211.55-2.73 9.72 2.15 30.49 23.12 30.49 10.48 0 20.11-6.92 23.09-17.52 13.53-47.91 31.04-125.41 29.48-224.52.01-13.25-10.73-24-23.99-24zm-.86-81.73C194 164.16 151.25 211.3 152.1 265.32c.75 47.94-3.75 95.91-13.37 142.55-2.69 12.98 5.67 25.69 18.64 28.36 13.05 2.67 25.67-5.66 28.36-18.64 10.34-50.09 15.17-101.58 14.37-153.02-.41-25.95 19.92-52.49 54.45-52.34 31.31.47 57.15 25.34 57.62 55.47.77 48.05-2.81 96.33-10.61 143.55-2.17 13.06 6.69 25.42 19.76 27.58 19.97 3.33 26.81-15.1 27.58-19.77 8.28-50.03 12.06-101.21 11.27-152.11-.88-55.8-47.94-101.88-104.91-102.72zm-110.69-19.78c-10.3-8.34-25.37-6.8-33.76 3.48-25.62 31.5-39.39 71.28-38.75 112 .59 37.58-2.47 75.27-9.11 112.05-2.34 13.05 6.31 25.53 19.36 27.89 20.11 3.5 27.07-14.81 27.89-19.36 7.19-39.84 10.5-80.66 9.86-121.33-.47-29.88 9.2-57.88 28-80.97 8.35-10.28 6.79-25.39-3.49-33.76zm109.47-62.33c-15.41-.41-30.87 1.44-45.78 4.97-12.89 3.06-20.87 15.98-17.83 28.89 3.06 12.89 16 20.83 28.89 17.83 11.05-2.61 22.47-3.77 34-3.69 75.43 1.13 137.73 61.5 138.88 134.58.59 37.88-1.28 76.11-5.58 113.63-1.5 13.17 7.95 25.08 21.11 26.58 16.72 1.95 25.51-11.88 26.58-21.11a929.06 929.06 0 0 0 5.89-119.85c-1.56-98.75-85.07-180.33-186.16-181.83zm252.07 121.45c-2.86-12.92-15.51-21.2-28.61-18.27-12.94 2.86-21.12 15.66-18.26 28.61 4.71 21.41 4.91 37.41 4.7 61.6-.11 13.27 10.55 24.09 23.8 24.2h.2c13.17 0 23.89-10.61 24-23.8.18-22.18.4-44.11-5.83-72.34zm-40.12-90.72C417.29 43.46 337.6 1.29 252.81.02 183.02-.82 118.47 24.91 70.46 72.94 24.09 119.37-.9 181.04.14 246.65l-.12 21.47c-.39 13.25 10.03 24.31 23.28 24.69.23.02.48.02.72.02 12.92 0 23.59-10.3 23.97-23.3l.16-23.64c-.83-52.5 19.16-101.86 56.28-139 38.76-38.8 91.34-59.67 147.68-58.86 69.45 1.03 134.73 35.56 174.62 92.39 7.61 10.86 22.56 13.45 33.42 5.86 10.84-7.62 13.46-22.59 5.84-33.43z"},child:[]}]})(n)}function Cx(n){return Fe({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"},child:[]}]})(n)}function lm(n){return Fe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.34 153.2L343.4 67.5c-15.2-4.67-31.6-4.67-46.79 0L17.66 153.2c-23.54 7.23-23.54 38.36 0 45.59l48.63 14.94c-10.67 13.19-17.23 29.28-17.88 46.9C38.78 266.15 32 276.11 32 288c0 10.78 5.68 19.85 13.86 25.65L20.33 428.53C18.11 438.52 25.71 448 35.94 448h56.11c10.24 0 17.84-9.48 15.62-19.47L82.14 313.65C90.32 307.85 96 298.78 96 288c0-11.57-6.47-21.25-15.66-26.87.76-15.02 8.44-28.3 20.69-36.72L296.6 284.5c9.06 2.78 26.44 6.25 46.79 0l278.95-85.7c23.55-7.24 23.55-38.36 0-45.6zM352.79 315.09c-28.53 8.76-52.84 3.92-65.59 0l-145.02-44.55L128 384c0 35.35 85.96 64 192 64s192-28.65 192-64l-14.18-113.47-145.03 44.56z"},child:[]}]})(n)}function hc(n){return Fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"},child:[]}]})(n)}function pS(n){return Fe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(n)}function yS(n){return Fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(n)}function pf(n){return Fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"},child:[]}]})(n)}function ac(n){return Fe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(n)}function Mv(n){return Fe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(n)}function Ea(n){return Fe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M0 224v272c0 8.84 7.16 16 16 16h80V192H32c-17.67 0-32 14.33-32 32zm360-48h-24v-40c0-4.42-3.58-8-8-8h-16c-4.42 0-8 3.58-8 8v64c0 4.42 3.58 8 8 8h48c4.42 0 8-3.58 8-8v-16c0-4.42-3.58-8-8-8zm137.75-63.96l-160-106.67a32.02 32.02 0 0 0-35.5 0l-160 106.67A32.002 32.002 0 0 0 128 138.66V512h128V368c0-8.84 7.16-16 16-16h96c8.84 0 16 7.16 16 16v144h128V138.67c0-10.7-5.35-20.7-14.25-26.63zM320 256c-44.18 0-80-35.82-80-80s35.82-80 80-80 80 35.82 80 80-35.82 80-80 80zm288-64h-64v320h80c8.84 0 16-7.16 16-16V224c0-17.67-14.33-32-32-32z"},child:[]}]})(n)}function vy(n){return Fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(n)}function vS(n){return Fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(n)}function fO(n){return Fe({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41z"},child:[]}]})(n)}function mO(n){return Fe({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M279 224H41c-21.4 0-32.1-25.9-17-41L143 64c9.4-9.4 24.6-9.4 33.9 0l119 119c15.2 15.1 4.5 41-16.9 41z"},child:[]}]})(n)}function gO(n){return Fe({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41zm255-105L177 64c-9.4-9.4-24.6-9.4-33.9 0L24 183c-15.1 15.1-4.4 41 17 41h238c21.4 0 32.1-25.9 17-41z"},child:[]}]})(n)}function pO(n){return Fe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"},child:[]}]})(n)}function bS(n){return Fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 32h192c13.255 0 24 10.745 24 24v160c0 13.255-10.745 24-24 24H296c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24zm-80 0H24C10.745 32 0 42.745 0 56v160c0 13.255 10.745 24 24 24h192c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24zM0 296v160c0 13.255 10.745 24 24 24h192c13.255 0 24-10.745 24-24V296c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm296 184h192c13.255 0 24-10.745 24-24V296c0-13.255-10.745-24-24-24H296c-13.255 0-24 10.745-24 24v160c0 13.255 10.745 24 24 24z"},child:[]}]})(n)}function Po(n){return Fe({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(n)}function Lo(n){return Fe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(n)}function yO(n){return Fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 128v16a8 8 0 0 1-8 8h-24v12c0 6.627-5.373 12-12 12H60c-6.627 0-12-5.373-12-12v-12H24a8 8 0 0 1-8-8v-16a8 8 0 0 1 4.941-7.392l232-88a7.996 7.996 0 0 1 6.118 0l232 88A8 8 0 0 1 496 128zm-24 304H40c-13.255 0-24 10.745-24 24v16a8 8 0 0 0 8 8h464a8 8 0 0 0 8-8v-16c0-13.255-10.745-24-24-24zM96 192v192H60c-6.627 0-12 5.373-12 12v20h416v-20c0-6.627-5.373-12-12-12h-36V192h-64v192h-64V192h-64v192h-64V192H96z"},child:[]}]})(n)}function vO(n){return Fe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M64 224h13.5c24.7 56.5 80.9 96 146.5 96s121.8-39.5 146.5-96H384c8.8 0 16-7.2 16-16v-96c0-8.8-7.2-16-16-16h-13.5C345.8 39.5 289.6 0 224 0S102.2 39.5 77.5 96H64c-8.8 0-16 7.2-16 16v96c0 8.8 7.2 16 16 16zm40-88c0-22.1 21.5-40 48-40h144c26.5 0 48 17.9 48 40v24c0 53-43 96-96 96h-48c-53 0-96-43-96-96v-24zm72 72l12-36 36-12-36-12-12-36-12 36-36 12 36 12 12 36zm151.6 113.4C297.7 340.7 262.2 352 224 352s-73.7-11.3-103.6-30.6C52.9 328.5 0 385 0 454.4v9.6c0 26.5 21.5 48 48 48h80v-64c0-17.7 14.3-32 32-32h128c17.7 0 32 14.3 32 32v64h80c26.5 0 48-21.5 48-48v-9.6c0-69.4-52.9-125.9-120.4-133zM272 448c-8.8 0-16 7.2-16 16s7.2 16 16 16 16-7.2 16-16-7.2-16-16-16zm-96 0c-8.8 0-16 7.2-16 16v48h32v-48c0-8.8-7.2-16-16-16z"},child:[]}]})(n)}function wS(n){return Fe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M610.5 373.3c2.6-14.1 2.6-28.5 0-42.6l25.8-14.9c3-1.7 4.3-5.2 3.3-8.5-6.7-21.6-18.2-41.2-33.2-57.4-2.3-2.5-6-3.1-9-1.4l-25.8 14.9c-10.9-9.3-23.4-16.5-36.9-21.3v-29.8c0-3.4-2.4-6.4-5.7-7.1-22.3-5-45-4.8-66.2 0-3.3.7-5.7 3.7-5.7 7.1v29.8c-13.5 4.8-26 12-36.9 21.3l-25.8-14.9c-2.9-1.7-6.7-1.1-9 1.4-15 16.2-26.5 35.8-33.2 57.4-1 3.3.4 6.8 3.3 8.5l25.8 14.9c-2.6 14.1-2.6 28.5 0 42.6l-25.8 14.9c-3 1.7-4.3 5.2-3.3 8.5 6.7 21.6 18.2 41.1 33.2 57.4 2.3 2.5 6 3.1 9 1.4l25.8-14.9c10.9 9.3 23.4 16.5 36.9 21.3v29.8c0 3.4 2.4 6.4 5.7 7.1 22.3 5 45 4.8 66.2 0 3.3-.7 5.7-3.7 5.7-7.1v-29.8c13.5-4.8 26-12 36.9-21.3l25.8 14.9c2.9 1.7 6.7 1.1 9-1.4 15-16.2 26.5-35.8 33.2-57.4 1-3.3-.4-6.8-3.3-8.5l-25.8-14.9zM496 400.5c-26.8 0-48.5-21.8-48.5-48.5s21.8-48.5 48.5-48.5 48.5 21.8 48.5 48.5-21.7 48.5-48.5 48.5zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm201.2 226.5c-2.3-1.2-4.6-2.6-6.8-3.9l-7.9 4.6c-6 3.4-12.8 5.3-19.6 5.3-10.9 0-21.4-4.6-28.9-12.6-18.3-19.8-32.3-43.9-40.2-69.6-5.5-17.7 1.9-36.4 17.9-45.7l7.9-4.6c-.1-2.6-.1-5.2 0-7.8l-7.9-4.6c-16-9.2-23.4-28-17.9-45.7.9-2.9 2.2-5.8 3.2-8.7-3.8-.3-7.5-1.2-11.4-1.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c10.1 0 19.5-3.2 27.2-8.5-1.2-3.8-2-7.7-2-11.8v-9.2z"},child:[]}]})(n)}function cm(n){return Fe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M319.4 320.6L224 416l-95.4-95.4C57.1 323.7 0 382.2 0 454.4v9.6c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-9.6c0-72.2-57.1-130.7-128.6-133.8zM13.6 79.8l6.4 1.5v58.4c-7 4.2-12 11.5-12 20.3 0 8.4 4.6 15.4 11.1 19.7L3.5 242c-1.7 6.9 2.1 14 7.6 14h41.8c5.5 0 9.3-7.1 7.6-14l-15.6-62.3C51.4 175.4 56 168.4 56 160c0-8.8-5-16.1-12-20.3V87.1l66 15.9c-8.6 17.2-14 36.4-14 57 0 70.7 57.3 128 128 128s128-57.3 128-128c0-20.6-5.3-39.8-14-57l96.3-23.2c18.2-4.4 18.2-27.1 0-31.5l-190.4-46c-13-3.1-26.7-3.1-39.7 0L13.6 48.2c-18.1 4.4-18.1 27.2 0 31.6z"},child:[]}]})(n)}function bO(n){return Fe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M383.9 308.3l23.9-62.6c4-10.5-3.7-21.7-15-21.7h-58.5c11-18.9 17.8-40.6 17.8-64v-.3c39.2-7.8 64-19.1 64-31.7 0-13.3-27.3-25.1-70.1-33-9.2-32.8-27-65.8-40.6-82.8-9.5-11.9-25.9-15.6-39.5-8.8l-27.6 13.8c-9 4.5-19.6 4.5-28.6 0L182.1 3.4c-13.6-6.8-30-3.1-39.5 8.8-13.5 17-31.4 50-40.6 82.8-42.7 7.9-70 19.7-70 33 0 12.6 24.8 23.9 64 31.7v.3c0 23.4 6.8 45.1 17.8 64H56.3c-11.5 0-19.2 11.7-14.7 22.3l25.8 60.2C27.3 329.8 0 372.7 0 422.4v44.8C0 491.9 20.1 512 44.8 512h358.4c24.7 0 44.8-20.1 44.8-44.8v-44.8c0-48.4-25.8-90.4-64.1-114.1zM176 480l-41.6-192 49.6 32 24 40-32 120zm96 0l-32-120 24-40 49.6-32L272 480zm41.7-298.5c-3.9 11.9-7 24.6-16.5 33.4-10.1 9.3-48 22.4-64-25-2.8-8.4-15.4-8.4-18.3 0-17 50.2-56 32.4-64 25-9.5-8.8-12.7-21.5-16.5-33.4-.8-2.5-6.3-5.7-6.3-5.8v-10.8c28.3 3.6 61 5.8 96 5.8s67.7-2.1 96-5.8v10.8c-.1.1-5.6 3.2-6.4 5.8z"},child:[]}]})(n)}function wO(n){return Fe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.3 271.1l-115.2-45c-4.1-1.6-12.6-3.7-22.2 0l-115.2 45c-10.7 4.2-17.7 14-17.7 24.9 0 111.6 68.7 188.8 132.9 213.9 9.6 3.7 18 1.6 22.2 0C558.4 489.9 640 420.5 640 296c0-10.9-7-20.7-17.7-24.9zM496 462.4V273.3l95.5 37.3c-5.6 87.1-60.9 135.4-95.5 151.8zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm96 40c0-2.5.8-4.8 1.1-7.2-2.5-.1-4.9-.8-7.5-.8h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c6.8 0 13.3-1.5 19.2-4-54-42.9-99.2-116.7-99.2-212z"},child:[]}]})(n)}function fc(n){return Fe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm95.8 32.6L272 480l-32-136 32-56h-96l32 56-32 136-47.8-191.4C56.9 292 0 350.3 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-72.1-56.9-130.4-128.2-133.8z"},child:[]}]})(n)}function um(n){return Fe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(n)}function yd(n){return Fe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(n)}const _O=()=>{const[n,e]=F.useState([]);return F.useEffect(()=>{const t=async()=>{const a=await hS();a.sort((o,c)=>{var p,v;const h=((p=o.createdAt)==null?void 0:p.seconds)||0;return(((v=c.createdAt)==null?void 0:v.seconds)||0)-h}),e(a)};t();const s=setInterval(t,3e4);return()=>clearInterval(s)},[]),n.length===0?null:d.jsx("div",{className:"fixed top-16 left-0 right-0 z-[30] pointer-events-none",children:n.map(t=>{const s=t.type==="special",a=s?"bg-gradient-to-r from-red-600 to-red-700 text-white border-b border-red-800 shadow-red-500/50":"bg-gradient-to-r from-amber-500 to-orange-600 text-white border-b border-orange-700 shadow-orange-500/50";return d.jsx("div",{className:`${a} shadow-lg py-3 relative`,children:d.jsx("marquee",{behavior:"scroll",direction:"left",scrollamount:"5",width:"100%",children:d.jsxs("div",{className:"inline-flex items-center gap-4 mx-8 font-bold text-sm md:text-base uppercase tracking-wider",children:[s?d.jsx(Ld,{className:"animate-pulse"}):d.jsx(pd,{className:"animate-bounce"}),d.jsxs("span",{children:[t.title,":"]}),d.jsx("span",{className:"font-medium normal-case",children:t.message})]})})},t.id)})})},xO=()=>{const[n,e]=F.useState(null);F.useEffect(()=>{(async()=>{const o=await hS();if(o.length>0){const c=o.find(p=>p.type==="special"),h=o.find(p=>p.type==="attention"),g=c||h;g&&(sessionStorage.getItem(`seen_alert_${g.id}`)||e(g))}})()},[]);const t=()=>{n&&(sessionStorage.setItem(`seen_alert_${n.id}`,"true"),e(null))};if(!n)return null;const s=n.type==="special";return d.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm animate-fade-in p-4",children:d.jsx("div",{className:`bg-white dark:bg-slate-800 rounded-3xl shadow-2xl max-w-md w-full overflow-hidden transform transition-all scale-100 animate-bounce-in border-t-8 ${s?"border-red-500":"border-orange-500"}`,children:d.jsxs("div",{className:"p-8 flex flex-col items-center text-center",children:[d.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mb-6 ${s?"bg-red-100 text-red-500":"bg-orange-100 text-orange-500"}`,children:d.jsx(Ld,{className:"text-4xl animate-pulse"})}),d.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:s?"THNG BO C BIT":"CH "}),d.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200 mb-4",children:n.title}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8 leading-relaxed",children:n.message}),d.jsx("button",{onClick:t,className:`px-8 py-3 rounded-xl font-bold text-white shadow-lg hover:shadow-xl hover:scale-105 transition-all ${s?"bg-gradient-to-r from-red-500 to-pink-600":"bg-gradient-to-r from-orange-400 to-yellow-500"}`,children:" Hiu"})]})})})};var by=function(n,e){return by=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])},by(n,e)};function _S(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");by(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var dm=function(){return dm=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++){t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},dm.apply(this,arguments)};function qc(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t}function xS(n,e,t,s){var a=arguments.length,o=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(n,e,t,s);else for(var h=n.length-1;h>=0;h--)(c=n[h])&&(o=(a<3?c(o):a>3?c(e,t,o):c(e,t))||o);return a>3&&o&&Object.defineProperty(e,t,o),o}function ES(n,e){return function(t,s){e(t,s,n)}}function TS(n,e,t,s,a,o){function c(O){if(O!==void 0&&typeof O!="function")throw new TypeError("Function expected");return O}for(var h=s.kind,g=h==="getter"?"get":h==="setter"?"set":"value",p=!e&&n?s.static?n:n.prototype:null,v=e||(p?Object.getOwnPropertyDescriptor(p,s.name):{}),w,E=!1,T=t.length-1;T>=0;T--){var k={};for(var L in s)k[L]=L==="access"?{}:s[L];for(var L in s.access)k.access[L]=s.access[L];k.addInitializer=function(O){if(E)throw new TypeError("Cannot add initializers after decoration has completed");o.push(c(O||null))};var I=(0,t[T])(h==="accessor"?{get:v.get,set:v.set}:v[g],k);if(h==="accessor"){if(I===void 0)continue;if(I===null||typeof I!="object")throw new TypeError("Object expected");(w=c(I.get))&&(v.get=w),(w=c(I.set))&&(v.set=w),(w=c(I.init))&&a.unshift(w)}else(w=c(I))&&(h==="field"?a.unshift(w):v[g]=w)}p&&Object.defineProperty(p,s.name,v),E=!0}function SS(n,e,t){for(var s=arguments.length>2,a=0;a<e.length;a++)t=s?e[a].call(n,t):e[a].call(n);return s?t:void 0}function AS(n){return typeof n=="symbol"?n:"".concat(n)}function NS(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function CS(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function Te(n,e,t,s){function a(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(v){try{p(s.next(v))}catch(w){c(w)}}function g(v){try{p(s.throw(v))}catch(w){c(w)}}function p(v){v.done?o(v.value):a(v.value).then(h,g)}p((s=s.apply(n,e||[])).next())})}function kS(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},s,a,o,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=h(0),c.throw=h(1),c.return=h(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(p){return function(v){return g([p,v])}}function g(p){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(t=0)),t;)try{if(s=1,a&&(o=p[0]&2?a.return:p[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,p[1])).done)return o;switch(a=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,a=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){t.label=p[1];break}if(p[0]===6&&t.label<o[1]){t.label=o[1],o=p;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(p);break}o[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(v){p=[6,v],a=0}finally{s=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var ag=Object.create?(function(n,e,t,s){s===void 0&&(s=t);var a=Object.getOwnPropertyDescriptor(e,t);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,s,a)}):(function(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]});function IS(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&ag(e,n,t)}function hm(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vv(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var s=t.call(n),a,o=[],c;try{for(;(e===void 0||e-- >0)&&!(a=s.next()).done;)o.push(a.value)}catch(h){c={error:h}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(c)throw c.error}}return o}function RS(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Vv(arguments[e]));return n}function jS(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var s=Array(n),a=0,e=0;e<t;e++)for(var o=arguments[e],c=0,h=o.length;c<h;c++,a++)s[a]=o[c];return s}function OS(n,e,t){if(t||arguments.length===2)for(var s=0,a=e.length,o;s<a;s++)(o||!(s in e))&&(o||(o=Array.prototype.slice.call(e,0,s)),o[s]=e[s]);return n.concat(o||Array.prototype.slice.call(e))}function Nc(n){return this instanceof Nc?(this.v=n,this):new Nc(n)}function DS(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),a,o=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(T){return function(k){return Promise.resolve(k).then(T,w)}}function h(T,k){s[T]&&(a[T]=function(L){return new Promise(function(I,O){o.push([T,L,I,O])>1||g(T,L)})},k&&(a[T]=k(a[T])))}function g(T,k){try{p(s[T](k))}catch(L){E(o[0][3],L)}}function p(T){T.value instanceof Nc?Promise.resolve(T.value.v).then(v,w):E(o[0][2],T)}function v(T){g("next",T)}function w(T){g("throw",T)}function E(T,k){T(k),o.shift(),o.length&&g(o[0][0],o[0][1])}}function PS(n){var e,t;return e={},s("next"),s("throw",function(a){throw a}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(a,o){e[a]=n[a]?function(c){return(t=!t)?{value:Nc(n[a](c)),done:!1}:o?o(c):c}:o}}function LS(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof hm=="function"?hm(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(o){t[o]=n[o]&&function(c){return new Promise(function(h,g){c=n[o](c),a(h,g,c.done,c.value)})}}function a(o,c,h,g){Promise.resolve(g).then(function(p){o({value:p,done:h})},c)}}function MS(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var EO=Object.create?(function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}):function(n,e){n.default=e},wy=function(n){return wy=Object.getOwnPropertyNames||function(e){var t=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[t.length]=s);return t},wy(n)};function VS(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t=wy(n),s=0;s<t.length;s++)t[s]!=="default"&&ag(e,n,t[s]);return EO(e,n),e}function US(n){return n&&n.__esModule?n:{default:n}}function BS(n,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(n):s?s.value:e.get(n)}function zS(n,e,t,s,a){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?a.call(n,t):a?a.value=t:e.set(n,t),t}function HS(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function qS(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,a;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose],t&&(a=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");a&&(s=function(){try{a.call(this)}catch(o){return Promise.reject(o)}}),n.stack.push({value:e,dispose:s,async:t})}else t&&n.stack.push({async:!0});return e}var TO=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var s=new Error(t);return s.name="SuppressedError",s.error=n,s.suppressed=e,s};function $S(n){function e(o){n.error=n.hasError?new TO(o,n.error,"An error was suppressed during disposal."):o,n.hasError=!0}var t,s=0;function a(){for(;t=n.stack.pop();)try{if(!t.async&&s===1)return s=0,n.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return a()}function FS(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,s,a,o,c){return s?e?".jsx":".js":a&&(!o||!c)?t:a+o+"."+c.toLowerCase()+"js"}):n}const SO={__extends:_S,__assign:dm,__rest:qc,__decorate:xS,__param:ES,__esDecorate:TS,__runInitializers:SS,__propKey:AS,__setFunctionName:NS,__metadata:CS,__awaiter:Te,__generator:kS,__createBinding:ag,__exportStar:IS,__values:hm,__read:Vv,__spread:RS,__spreadArrays:jS,__spreadArray:OS,__await:Nc,__asyncGenerator:DS,__asyncDelegator:PS,__asyncValues:LS,__makeTemplateObject:MS,__importStar:VS,__importDefault:US,__classPrivateFieldGet:BS,__classPrivateFieldSet:zS,__classPrivateFieldIn:HS,__addDisposableResource:qS,__disposeResources:$S,__rewriteRelativeImportExtension:FS},AO=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:qS,get __assign(){return dm},__asyncDelegator:PS,__asyncGenerator:DS,__asyncValues:LS,__await:Nc,__awaiter:Te,__classPrivateFieldGet:BS,__classPrivateFieldIn:HS,__classPrivateFieldSet:zS,__createBinding:ag,__decorate:xS,__disposeResources:$S,__esDecorate:TS,__exportStar:IS,__extends:_S,__generator:kS,__importDefault:US,__importStar:VS,__makeTemplateObject:MS,__metadata:CS,__param:ES,__propKey:AS,__read:Vv,__rest:qc,__rewriteRelativeImportExtension:FS,__runInitializers:SS,__setFunctionName:NS,__spread:RS,__spreadArray:OS,__spreadArrays:jS,__values:hm,default:SO},Symbol.toStringTag,{value:"Module"})),NO=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);class Uv extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class CO extends Uv{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class kx extends Uv{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ix extends Uv{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var _y;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(_y||(_y={}));class kO{constructor(e,{headers:t={},customFetch:s,region:a=_y.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=NO(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Te(this,arguments,void 0,function*(t,s={}){var a;let o,c;try{const{headers:h,method:g,body:p,signal:v,timeout:w}=s;let E={},{region:T}=s;T||(T=this.region);const k=new URL(`${this.url}/${t}`);T&&T!=="any"&&(E["x-region"]=T,k.searchParams.set("forceFunctionRegion",T));let L;p&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(E["Content-Type"]="application/octet-stream",L=p):typeof p=="string"?(E["Content-Type"]="text/plain",L=p):typeof FormData<"u"&&p instanceof FormData?L=p:(E["Content-Type"]="application/json",L=JSON.stringify(p)):L=p;let I=v;w&&(c=new AbortController,o=setTimeout(()=>c.abort(),w),v?(I=c.signal,v.addEventListener("abort",()=>c.abort())):I=c.signal);const O=yield this.fetch(k.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},E),this.headers),h),body:L,signal:I}).catch(me=>{throw new CO(me)}),q=O.headers.get("x-relay-error");if(q&&q==="true")throw new kx(O);if(!O.ok)throw new Ix(O);let G=((a=O.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),te;return G==="application/json"?te=yield O.json():G==="application/octet-stream"||G==="application/pdf"?te=yield O.blob():G==="text/event-stream"?te=O:G==="multipart/form-data"?te=yield O.formData():te=yield O.text(),{data:te,error:null,response:O}}catch(h){return{data:null,error:h,response:h instanceof Ix||h instanceof kx?h.context:void 0}}finally{o&&clearTimeout(o)}})}}var Un={};const $c=WN(AO);var yf={},vf={},bf={},wf={},_f={},xf={},Rx;function GS(){if(Rx)return xf;Rx=1,Object.defineProperty(xf,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return xf.default=n,xf}var jx;function KS(){if(jx)return _f;jx=1,Object.defineProperty(_f,"__esModule",{value:!0});const e=$c.__importDefault(GS());class t{constructor(a){var o,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(o=a.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=a.signal,this.isMaybeSingle=(c=a.isMaybeSingle)!==null&&c!==void 0?c:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,o){return this.headers=new Headers(this.headers),this.headers.set(a,o),this}then(a,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let h=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var p,v,w,E;let T=null,k=null,L=null,I=g.status,O=g.statusText;if(g.ok){if(this.method!=="HEAD"){const me=await g.text();me===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?k=me:k=JSON.parse(me))}const G=(v=this.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),te=(w=g.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");G&&te&&te.length>1&&(L=parseInt(te[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(T={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,L=null,I=406,O="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const G=await g.text();try{T=JSON.parse(G),Array.isArray(T)&&g.status===404&&(k=[],T=null,I=200,O="OK")}catch{g.status===404&&G===""?(I=204,O="No Content"):T={message:G}}if(T&&this.isMaybeSingle&&(!((E=T==null?void 0:T.details)===null||E===void 0)&&E.includes("0 rows"))&&(T=null,I=200,O="OK"),T&&this.shouldThrowOnError)throw new e.default(T)}return{error:T,data:k,count:L,status:I,statusText:O}});return this.shouldThrowOnError||(h=h.catch(g=>{var p,v,w,E,T,k;let L="";const I=g==null?void 0:g.cause;if(I){const O=(p=I==null?void 0:I.message)!==null&&p!==void 0?p:"",q=(v=I==null?void 0:I.code)!==null&&v!==void 0?v:"";L=`${(w=g==null?void 0:g.name)!==null&&w!==void 0?w:"FetchError"}: ${g==null?void 0:g.message}`,L+=`

Caused by: ${(E=I==null?void 0:I.name)!==null&&E!==void 0?E:"Error"}: ${O}`,q&&(L+=` (${q})`),I!=null&&I.stack&&(L+=`
${I.stack}`)}else L=(T=g==null?void 0:g.stack)!==null&&T!==void 0?T:"";return{error:{message:`${(k=g==null?void 0:g.name)!==null&&k!==void 0?k:"FetchError"}: ${g==null?void 0:g.message}`,details:L,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),h.then(a,o)}returns(){return this}overrideTypes(){return this}}return _f.default=t,_f}var Ox;function QS(){if(Ox)return wf;Ox=1,Object.defineProperty(wf,"__esModule",{value:!0});const e=$c.__importDefault(KS());class t extends e.default{select(a){let o=!1;const c=(a??"*").split("").map(h=>/\s/.test(h)&&!o?"":(h==='"'&&(o=!o),h)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:o=!0,nullsFirst:c,foreignTable:h,referencedTable:g=h}={}){const p=g?`${g}.order`:"order",v=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${v?`${v},`:""}${a}.${o?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:o,referencedTable:c=o}={}){const h=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(h,`${a}`),this}range(a,o,{foreignTable:c,referencedTable:h=c}={}){const g=typeof h>"u"?"offset":`${h}.offset`,p=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(g,`${a}`),this.url.searchParams.set(p,`${o-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:o=!1,settings:c=!1,buffers:h=!1,wal:g=!1,format:p="text"}={}){var v;const w=[a?"analyze":null,o?"verbose":null,c?"settings":null,h?"buffers":null,g?"wal":null].filter(Boolean).join("|"),E=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${E}"; options=${w};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return wf.default=t,wf}var Dx;function Bv(){if(Dx)return bf;Dx=1,Object.defineProperty(bf,"__esModule",{value:!0});const e=$c.__importDefault(QS()),t=new RegExp("[,()]");class s extends e.default{eq(o,c){return this.url.searchParams.append(o,`eq.${c}`),this}neq(o,c){return this.url.searchParams.append(o,`neq.${c}`),this}gt(o,c){return this.url.searchParams.append(o,`gt.${c}`),this}gte(o,c){return this.url.searchParams.append(o,`gte.${c}`),this}lt(o,c){return this.url.searchParams.append(o,`lt.${c}`),this}lte(o,c){return this.url.searchParams.append(o,`lte.${c}`),this}like(o,c){return this.url.searchParams.append(o,`like.${c}`),this}likeAllOf(o,c){return this.url.searchParams.append(o,`like(all).{${c.join(",")}}`),this}likeAnyOf(o,c){return this.url.searchParams.append(o,`like(any).{${c.join(",")}}`),this}ilike(o,c){return this.url.searchParams.append(o,`ilike.${c}`),this}ilikeAllOf(o,c){return this.url.searchParams.append(o,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(o,c){return this.url.searchParams.append(o,`ilike(any).{${c.join(",")}}`),this}regexMatch(o,c){return this.url.searchParams.append(o,`match.${c}`),this}regexIMatch(o,c){return this.url.searchParams.append(o,`imatch.${c}`),this}is(o,c){return this.url.searchParams.append(o,`is.${c}`),this}isDistinct(o,c){return this.url.searchParams.append(o,`isdistinct.${c}`),this}in(o,c){const h=Array.from(new Set(c)).map(g=>typeof g=="string"&&t.test(g)?`"${g}"`:`${g}`).join(",");return this.url.searchParams.append(o,`in.(${h})`),this}contains(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cs.{${c.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(c)}`),this}containedBy(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cd.{${c.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(c)}`),this}rangeGt(o,c){return this.url.searchParams.append(o,`sr.${c}`),this}rangeGte(o,c){return this.url.searchParams.append(o,`nxl.${c}`),this}rangeLt(o,c){return this.url.searchParams.append(o,`sl.${c}`),this}rangeLte(o,c){return this.url.searchParams.append(o,`nxr.${c}`),this}rangeAdjacent(o,c){return this.url.searchParams.append(o,`adj.${c}`),this}overlaps(o,c){return typeof c=="string"?this.url.searchParams.append(o,`ov.${c}`):this.url.searchParams.append(o,`ov.{${c.join(",")}}`),this}textSearch(o,c,{config:h,type:g}={}){let p="";g==="plain"?p="pl":g==="phrase"?p="ph":g==="websearch"&&(p="w");const v=h===void 0?"":`(${h})`;return this.url.searchParams.append(o,`${p}fts${v}.${c}`),this}match(o){return Object.entries(o).forEach(([c,h])=>{this.url.searchParams.append(c,`eq.${h}`)}),this}not(o,c,h){return this.url.searchParams.append(o,`not.${c}.${h}`),this}or(o,{foreignTable:c,referencedTable:h=c}={}){const g=h?`${h}.or`:"or";return this.url.searchParams.append(g,`(${o})`),this}filter(o,c,h){return this.url.searchParams.append(o,`${c}.${h}`),this}}return bf.default=s,bf}var Px;function WS(){if(Px)return vf;Px=1,Object.defineProperty(vf,"__esModule",{value:!0});const e=$c.__importDefault(Bv());class t{constructor(a,{headers:o={},schema:c,fetch:h}){this.url=a,this.headers=new Headers(o),this.schema=c,this.fetch=h}select(a,o){const{head:c=!1,count:h}=o??{},g=c?"HEAD":"GET";let p=!1;const v=(a??"*").split("").map(w=>/\s/.test(w)&&!p?"":(w==='"'&&(p=!p),w)).join("");return this.url.searchParams.set("select",v),h&&this.headers.append("Prefer",`count=${h}`),new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:o,defaultToNull:c=!0}={}){var h;const g="POST";if(o&&this.headers.append("Prefer",`count=${o}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const p=a.reduce((v,w)=>v.concat(Object.keys(w)),[]);if(p.length>0){const v=[...new Set(p)].map(w=>`"${w}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}upsert(a,{onConflict:o,ignoreDuplicates:c=!1,count:h,defaultToNull:g=!0}={}){var p;const v="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),h&&this.headers.append("Prefer",`count=${h}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const w=a.reduce((E,T)=>E.concat(Object.keys(T)),[]);if(w.length>0){const E=[...new Set(w)].map(T=>`"${T}"`);this.url.searchParams.set("columns",E.join(","))}}return new e.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(a,{count:o}={}){var c;const h="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:a}={}){var o;const c="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return vf.default=t,vf}var Lx;function IO(){if(Lx)return yf;Lx=1,Object.defineProperty(yf,"__esModule",{value:!0});const n=$c,e=n.__importDefault(WS()),t=n.__importDefault(Bv());class s{constructor(o,{headers:c={},schema:h,fetch:g}={}){this.url=o,this.headers=new Headers(c),this.schemaName=h,this.fetch=g}from(o){if(!o||typeof o!="string"||o.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const c=new URL(`${this.url}/${o}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new s(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,c={},{head:h=!1,get:g=!1,count:p}={}){var v;let w;const E=new URL(`${this.url}/rpc/${o}`);let T;h||g?(w=h?"HEAD":"GET",Object.entries(c).filter(([L,I])=>I!==void 0).map(([L,I])=>[L,Array.isArray(I)?`{${I.join(",")}}`:`${I}`]).forEach(([L,I])=>{E.searchParams.append(L,I)})):(w="POST",T=c);const k=new Headers(this.headers);return p&&k.set("Prefer",`count=${p}`),new t.default({method:w,url:E,headers:k,schema:this.schemaName,body:T,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return yf.default=s,yf}var Mx;function RO(){if(Mx)return Un;Mx=1,Object.defineProperty(Un,"__esModule",{value:!0}),Un.PostgrestError=Un.PostgrestBuilder=Un.PostgrestTransformBuilder=Un.PostgrestFilterBuilder=Un.PostgrestQueryBuilder=Un.PostgrestClient=void 0;const n=$c,e=n.__importDefault(IO());Un.PostgrestClient=e.default;const t=n.__importDefault(WS());Un.PostgrestQueryBuilder=t.default;const s=n.__importDefault(Bv());Un.PostgrestFilterBuilder=s.default;const a=n.__importDefault(QS());Un.PostgrestTransformBuilder=a.default;const o=n.__importDefault(KS());Un.PostgrestBuilder=o.default;const c=n.__importDefault(GS());return Un.PostgrestError=c.default,Un.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:o.default,PostgrestError:c.default},Un}var YS=RO();const XS=Ly(YS),jO=QN({__proto__:null,default:XS},[YS]),{PostgrestClient:OO,PostgrestQueryBuilder:mV,PostgrestFilterBuilder:gV,PostgrestTransformBuilder:pV,PostgrestBuilder:yV,PostgrestError:vV}=XS||jO;class DO{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const s=t.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const PO="2.86.0",LO=`realtime-js/${PO}`,JS="1.0.0",MO="2.0.0",Vx=JS,xy=1e4,VO=1e3,UO=100;var Ro;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Ro||(Ro={}));var mn;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(mn||(mn={}));var yr;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(yr||(yr={}));var Ey;(function(n){n.websocket="websocket"})(Ey||(Ey={}));var jo;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(jo||(jo={}));class BO{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,s;const a=(s=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var t,s;const a=(s=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&s!==void 0?s:{},c=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,t,s){var a,o;const c=e.topic,h=(a=e.ref)!==null&&a!==void 0?a:"",g=(o=e.join_ref)!==null&&o!==void 0?o:"",p=e.payload.event,v=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},w=Object.keys(v).length===0?"":JSON.stringify(v);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`ref length ${h.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`metadata length ${w.length} exceeds maximum of 255`);const E=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+h.length+c.length+p.length+w.length,T=new ArrayBuffer(this.HEADER_LENGTH+E);let k=new DataView(T),L=0;k.setUint8(L++,this.KINDS.userBroadcastPush),k.setUint8(L++,g.length),k.setUint8(L++,h.length),k.setUint8(L++,c.length),k.setUint8(L++,p.length),k.setUint8(L++,w.length),k.setUint8(L++,t),Array.from(g,O=>k.setUint8(L++,O.charCodeAt(0))),Array.from(h,O=>k.setUint8(L++,O.charCodeAt(0))),Array.from(c,O=>k.setUint8(L++,O.charCodeAt(0))),Array.from(p,O=>k.setUint8(L++,O.charCodeAt(0))),Array.from(w,O=>k.setUint8(L++,O.charCodeAt(0)));var I=new Uint8Array(T.byteLength+s.byteLength);return I.set(new Uint8Array(T),0),I.set(new Uint8Array(s),T.byteLength),I.buffer}decode(e,t){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return t(s)}if(typeof e=="string"){const s=JSON.parse(e),[a,o,c,h,g]=s;return t({join_ref:a,ref:o,topic:c,event:h,payload:g})}return t({})}_binaryDecode(e){const t=new DataView(e),s=t.getUint8(0),a=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,a)}}_decodeUserBroadcast(e,t,s){const a=t.getUint8(1),o=t.getUint8(2),c=t.getUint8(3),h=t.getUint8(4);let g=this.HEADER_LENGTH+4;const p=s.decode(e.slice(g,g+a));g=g+a;const v=s.decode(e.slice(g,g+o));g=g+o;const w=s.decode(e.slice(g,g+c));g=g+c;const E=e.slice(g,e.byteLength),T=h===this.JSON_ENCODING?JSON.parse(s.decode(E)):E,k={type:this.BROADCAST_EVENT,event:v,payload:T};return c>0&&(k.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:k}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>t.includes(s)))}}let ZS=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var kt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(kt||(kt={}));const Ux=(n,e,t={})=>{var s;const a=(s=t.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((o,c)=>(o[c]=zO(c,n,e,a),o),{}):{}},zO=(n,e,t,s)=>{const a=e.find(h=>h.name===n),o=a==null?void 0:a.type,c=t[n];return o&&!s.includes(o)?e5(o,c):Ty(c)},e5=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return FO(e,t)}switch(n){case kt.bool:return HO(e);case kt.float4:case kt.float8:case kt.int2:case kt.int4:case kt.int8:case kt.numeric:case kt.oid:return qO(e);case kt.json:case kt.jsonb:return $O(e);case kt.timestamp:return GO(e);case kt.abstime:case kt.date:case kt.daterange:case kt.int4range:case kt.int8range:case kt.money:case kt.reltime:case kt.text:case kt.time:case kt.timestamptz:case kt.timetz:case kt.tsrange:case kt.tstzrange:return Ty(e);default:return Ty(e)}},Ty=n=>n,HO=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},qO=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},$O=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},FO=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,s=n[t];if(n[0]==="{"&&s==="}"){let o;const c=n.slice(1,t);try{o=JSON.parse("["+c+"]")}catch{o=c?c.split(","):[]}return o.map(h=>e5(e,h))}return n},GO=n=>typeof n=="string"?n.replace(" ","T"):n,t5=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class C0{constructor(e,t,s={},a=xy){this.channel=e,this.event=t,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Bx;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Bx||(Bx={}));class sd{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:o,onLeave:c,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=sd.syncState(this.state,a,o,c),this.pendingDiffs.forEach(g=>{this.state=sd.syncDiff(this.state,g,o,c)}),this.pendingDiffs=[],h()}),this.channel._on(s.diff,{},a=>{const{onJoin:o,onLeave:c,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=sd.syncDiff(this.state,a,o,c),h())}),this.onJoin((a,o,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:c})}),this.onLeave((a,o,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,a){const o=this.cloneDeep(e),c=this.transformState(t),h={},g={};return this.map(o,(p,v)=>{c[p]||(g[p]=v)}),this.map(c,(p,v)=>{const w=o[p];if(w){const E=v.map(I=>I.presence_ref),T=w.map(I=>I.presence_ref),k=v.filter(I=>T.indexOf(I.presence_ref)<0),L=w.filter(I=>E.indexOf(I.presence_ref)<0);k.length>0&&(h[p]=k),L.length>0&&(g[p]=L)}else h[p]=v}),this.syncDiff(o,{joins:h,leaves:g},s,a)}static syncDiff(e,t,s,a){const{joins:o,leaves:c}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(o,(h,g)=>{var p;const v=(p=e[h])!==null&&p!==void 0?p:[];if(e[h]=this.cloneDeep(g),v.length>0){const w=e[h].map(T=>T.presence_ref),E=v.filter(T=>w.indexOf(T.presence_ref)<0);e[h].unshift(...E)}s(h,v,g)}),this.map(c,(h,g)=>{let p=e[h];if(!p)return;const v=g.map(w=>w.presence_ref);p=p.filter(w=>v.indexOf(w.presence_ref)<0),e[h]=p,a(h,p,g),p.length===0&&delete e[h]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const a=e[s];return"metas"in a?t[s]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[s]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var zx;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(zx||(zx={}));var rd;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(rd||(rd={}));var bi;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(bi||(bi={}));class zv{constructor(e,t={config:{}},s){var a,o;if(this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=mn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new C0(this,yr.join,this.params,this.timeout),this.rejoinTimer=new ZS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=mn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=mn.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=mn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=mn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=mn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(yr.reply,{},(c,h)=>{this._trigger(this._replyEventName(h),c)}),this.presence=new sd(this),this.broadcastEndpointURL=t5(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var s,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==mn.closed){const{config:{broadcast:c,presence:h,private:g}}=this.params,p=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(T=>T.filter))!==null&&a!==void 0?a:[],v=!!this.bindings[rd.PRESENCE]&&this.bindings[rd.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,w={},E={broadcast:c,presence:Object.assign(Object.assign({},h),{enabled:v}),postgres_changes:p,private:g};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(T=>e==null?void 0:e(bi.CHANNEL_ERROR,T)),this._onClose(()=>e==null?void 0:e(bi.CLOSED)),this.updateJoinPayload(Object.assign({config:E},w)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:T})=>{var k;if(this.socket.setAuth(),T===void 0){e==null||e(bi.SUBSCRIBED);return}else{const L=this.bindings.postgres_changes,I=(k=L==null?void 0:L.length)!==null&&k!==void 0?k:0,O=[];for(let q=0;q<I;q++){const G=L[q],{filter:{event:te,schema:me,table:he,filter:N}}=G,C=T&&T[q];if(C&&C.event===te&&C.schema===me&&C.table===he&&C.filter===N)O.push(Object.assign(Object.assign({},G),{id:C.id}));else{this.unsubscribe(),this.state=mn.errored,e==null||e(bi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=O,e&&e(bi.SUBSCRIBED);return}}).receive("error",T=>{this.state=mn.errored,e==null||e(bi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(T).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(bi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===mn.joined&&e===rd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async httpSend(e,t,s={}){var a;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(h.status===202)return{success:!0};let g=h.statusText;try{const p=await h.json();g=p.error||p.message||g}catch{}return Promise.reject(new Error(g))}async send(e,t={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:c}=e,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:c,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=p.body)===null||a===void 0?void 0:a.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var c,h,g;const p=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(h=(c=this.params)===null||c===void 0?void 0:c.config)===null||h===void 0?void 0:h.broadcast)===null||g===void 0)&&g.ack)&&o("ok"),p.receive("ok",()=>o("ok")),p.receive("error",()=>o("error")),p.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=mn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(yr.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new C0(this,yr.leave,{},e),s.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=mn.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const a=new AbortController,o=setTimeout(()=>a.abort(),s),c=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(o),c}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new C0(this,e,t,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>UO){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var a,o;const c=e.toLocaleLowerCase(),{close:h,error:g,leave:p,join:v}=yr;if(s&&[h,g,p,v].indexOf(c)>=0&&s!==this._joinRef())return;let E=this._onMessage(c,t,s);if(t&&!E)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(T=>{var k,L,I;return((k=T.filter)===null||k===void 0?void 0:k.event)==="*"||((I=(L=T.filter)===null||L===void 0?void 0:L.event)===null||I===void 0?void 0:I.toLocaleLowerCase())===c}).map(T=>T.callback(E,s)):(o=this.bindings[c])===null||o===void 0||o.filter(T=>{var k,L,I,O,q,G;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in T){const te=T.id,me=(k=T.filter)===null||k===void 0?void 0:k.event;return te&&((L=t.ids)===null||L===void 0?void 0:L.includes(te))&&(me==="*"||(me==null?void 0:me.toLocaleLowerCase())===((I=t.data)===null||I===void 0?void 0:I.type.toLocaleLowerCase()))}else{const te=(q=(O=T==null?void 0:T.filter)===null||O===void 0?void 0:O.event)===null||q===void 0?void 0:q.toLocaleLowerCase();return te==="*"||te===((G=t==null?void 0:t.event)===null||G===void 0?void 0:G.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===c}).map(T=>{if(typeof E=="object"&&"ids"in E){const k=E.data,{schema:L,table:I,commit_timestamp:O,type:q,errors:G}=k;E=Object.assign(Object.assign({},{schema:L,table:I,commit_timestamp:O,eventType:q,new:{},old:{},errors:G}),this._getPayloadRecords(k))}T.callback(E,s)})}_isClosed(){return this.state===mn.closed}_isJoined(){return this.state===mn.joined}_isJoining(){return this.state===mn.joining}_isLeaving(){return this.state===mn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const a=e.toLocaleLowerCase(),o={type:a,filter:t,callback:s};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&zv.isEqual(a.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(yr.close,{},e)}_onError(e){this._on(yr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=mn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Ux(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Ux(e.columns,e.old_record)),t}}const k0=()=>{},Ef={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},KO=[1e3,2e3,5e3,1e4],QO=1e4,WO=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class YO{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=xy,this.transport=null,this.heartbeatIntervalMs=Ef.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=k0,this.ref=0,this.reconnectTimer=null,this.vsn=Vx,this.logger=k0,this.conn=null,this.sendBuffer=[],this.serializer=new BO,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...o)=>a(...o):(...o)=>fetch(...o),!(!((s=t==null?void 0:t.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Ey.websocket}`,this.httpEndpoint=t5(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=DO.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Ro.connecting:return jo.Connecting;case Ro.open:return jo.Open;case Ro.closing:return jo.Closing;default:return jo.Closed}}isConnected(){return this.connectionState()===jo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(o=>o.topic===s);if(a)return a;{const o=new zv(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){const{topic:t,event:s,payload:a,ref:o}=e,c=()=>{this.encode(e,h=>{var g;(g=this.conn)===null||g===void 0||g.send(h)})};this.log("push",`${t} ${s} (${o})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(VO,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Ef.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:o,ref:c}=t,h=c?`(${c})`:"",g=o.status||"";this.log("receive",`${g} ${s} ${a} ${h}`.trim(),o),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(a,o,c)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ro.open||this.conn.readyState===Ro.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(yr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${s}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([WO],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const a={access_token:t,version:LO};t&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(yr.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new ZS(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ef.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,a,o,c,h,g,p,v,w,E,T;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:xy,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:Ef.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(h=e==null?void 0:e.heartbeatCallback)!==null&&h!==void 0?h:k0,this.vsn=(g=e==null?void 0:e.vsn)!==null&&g!==void 0?g:Vx,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:(k=>KO[k-1]||QO),this.vsn){case JS:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:((k,L)=>L(JSON.stringify(k))),this.decode=(w=e==null?void 0:e.decode)!==null&&w!==void 0?w:((k,L)=>L(JSON.parse(k)));break;case MO:this.encode=(E=e==null?void 0:e.encode)!==null&&E!==void 0?E:this.serializer.encode.bind(this.serializer),this.decode=(T=e==null?void 0:e.decode)!==null&&T!==void 0?T:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class og extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Vt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class XO extends og{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Sy extends og{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const Hv=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),JO=()=>Response,Ay=n=>{if(Array.isArray(n))return n.map(t=>Ay(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,s])=>{const a=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[a]=Ay(s)}),e},ZO=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},e7=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n),I0=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},t7=(n,e,t)=>Te(void 0,void 0,void 0,function*(){const s=yield JO();n instanceof s&&!(t!=null&&t.noResolveJson)?n.json().then(a=>{const o=n.status||500,c=(a==null?void 0:a.statusCode)||o+"";e(new XO(I0(a),o,c))}).catch(a=>{e(new Sy(I0(a),a))}):e(new Sy(I0(n),n))}),n7=(n,e,t,s)=>{const a={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!s?a:(ZO(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),t))};function Md(n,e,t,s,a,o){return Te(this,void 0,void 0,function*(){return new Promise((c,h)=>{n(t,n7(e,s,a,o)).then(g=>{if(!g.ok)throw g;return s!=null&&s.noResolveJson?g:g.json()}).then(g=>c(g)).catch(g=>t7(g,h,s))})})}function vd(n,e,t,s){return Te(this,void 0,void 0,function*(){return Md(n,"GET",e,t,s)})}function pr(n,e,t,s,a){return Te(this,void 0,void 0,function*(){return Md(n,"POST",e,s,a,t)})}function Ny(n,e,t,s,a){return Te(this,void 0,void 0,function*(){return Md(n,"PUT",e,s,a,t)})}function s7(n,e,t,s){return Te(this,void 0,void 0,function*(){return Md(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function qv(n,e,t,s,a){return Te(this,void 0,void 0,function*(){return Md(n,"DELETE",e,s,a,t)})}class r7{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return Te(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Vt(e))return{data:null,error:e};throw e}})}}var n5;class i7{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[n5]="BlobDownloadBuilder",this.promise=null}asStream(){return new r7(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Te(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Vt(e))return{data:null,error:e};throw e}})}}n5=Symbol.toStringTag;const a7={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Hx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class o7{constructor(e,t={},s,a){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=Hv(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,s,a){return Te(this,void 0,void 0,function*(){try{let o;const c=Object.assign(Object.assign({},Hx),a);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const g=c.metadata;typeof Blob<"u"&&s instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),g&&o.append("metadata",this.encodeMetadata(g)),o.append("",s)):typeof FormData<"u"&&s instanceof FormData?(o=s,o.has("cacheControl")||o.append("cacheControl",c.cacheControl),g&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(g))):(o=s,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType,g&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(g))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!c.duplex&&(c.duplex="half")),a!=null&&a.headers&&(h=Object.assign(Object.assign({},h),a.headers));const p=this._removeEmptyFolders(t),v=this._getFinalPath(p),w=yield(e=="PUT"?Ny:pr)(this.fetch,`${this.url}/object/${v}`,o,Object.assign({headers:h},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:p,id:w.Id,fullPath:w.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Vt(o))return{data:null,error:o};throw o}})}upload(e,t,s){return Te(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,a){return Te(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),c=this._getFinalPath(o),h=new URL(this.url+`/object/upload/sign/${c}`);h.searchParams.set("token",t);try{let g;const p=Object.assign({upsert:Hx.upsert},a),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&s instanceof Blob?(g=new FormData,g.append("cacheControl",p.cacheControl),g.append("",s)):typeof FormData<"u"&&s instanceof FormData?(g=s,g.append("cacheControl",p.cacheControl)):(g=s,v["cache-control"]=`max-age=${p.cacheControl}`,v["content-type"]=p.contentType);const w=yield Ny(this.fetch,h.toString(),g,{headers:v});return{data:{path:o,fullPath:w.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(Vt(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(e,t){return Te(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const o=yield pr(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),c=new URL(this.url+o.url),h=c.searchParams.get("token");if(!h)throw new og("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:h},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}update(e,t,s){return Te(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return Te(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vt(a))return{data:null,error:a};throw a}})}copy(e,t,s){return Te(this,void 0,void 0,function*(){try{return{data:{path:(yield pr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vt(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,s){return Te(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),o=yield pr(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const c=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${c}`)},{data:o,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vt(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,s){return Te(this,void 0,void 0,function*(){try{const a=yield pr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${o}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vt(a))return{data:null,error:a};throw a}})}download(e,t){const a=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),c=o?`?${o}`:"",h=this._getFinalPath(e),g=()=>vd(this.fetch,`${this.url}/${a}/${h}${c}`,{headers:this.headers,noResolveJson:!0});return new i7(g,this.shouldThrowOnError)}info(e){return Te(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield vd(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Ay(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}exists(e){return Te(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield s7(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s)&&s instanceof Sy){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),a=[],o=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&a.push(o);const h=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",g=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});g!==""&&a.push(g);let p=a.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${s}${p}`)}}}remove(e){return Te(this,void 0,void 0,function*(){try{return{data:yield qv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}list(e,t,s){return Te(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},a7),t),{prefix:e||""});return{data:yield pr(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vt(a))return{data:null,error:a};throw a}})}listV2(e,t){return Te(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield pr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const s5="2.86.0",r5={"X-Client-Info":`storage-js/${s5}`};class l7{constructor(e,t={},s,a){this.shouldThrowOnError=!1;const o=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},r5),t),this.fetch=Hv(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Te(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield vd(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}getBucket(e){return Te(this,void 0,void 0,function*(){try{return{data:yield vd(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}createBucket(e){return Te(this,arguments,void 0,function*(t,s={public:!1}){try{return{data:yield pr(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vt(a))return{data:null,error:a};throw a}})}updateBucket(e,t){return Te(this,void 0,void 0,function*(){try{return{data:yield Ny(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Te(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Te(this,void 0,void 0,function*(){try{return{data:yield qv(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}var bd=class extends Error{constructor(n,e){var t;super(n),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function c7(n,e,t){const s=new URL(e,n);if(t)for(const[a,o]of Object.entries(t))o!==void 0&&s.searchParams.set(a,o);return s.toString()}async function u7(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function d7(n){const e=n.fetchImpl??globalThis.fetch;return{async request({method:t,path:s,query:a,body:o,headers:c}){const h=c7(n.baseUrl,s,a),g=await u7(n.auth),p=await e(h,{method:t,headers:{...o?{"Content-Type":"application/json"}:{},...g,...c},body:o?JSON.stringify(o):void 0}),v=await p.text(),w=(p.headers.get("content-type")||"").includes("application/json"),E=w&&v?JSON.parse(v):v;if(!p.ok){const T=w?E:void 0,k=T==null?void 0:T.error;throw new bd((k==null?void 0:k.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:k==null?void 0:k.type,icebergCode:k==null?void 0:k.code,details:T})}return{status:p.status,headers:p.headers,data:E}}}}function Tf(n){return n.join("")}var h7=class{constructor(n,e=""){this.client=n,this.prefix=e}async listNamespaces(n){const e=n?{parent:Tf(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(n,e){const t={namespace:n.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Tf(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Tf(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Tf(n.namespace)}`}),!0}catch(e){if(e instanceof bd&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(n,e){try{return await this.createNamespace(n,e)}catch(t){if(t instanceof bd&&t.status===409)return;throw t}}};function Fl(n){return n.join("")}var f7=class{constructor(n,e="",t){this.client=n,this.prefix=e,this.accessDelegation=t}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fl(n.namespace)}/tables`})).data.identifiers}async createTable(n,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Fl(n.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(n,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Fl(n.namespace)}/tables/${n.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(n,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Fl(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(n){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fl(n.namespace)}/tables/${n.name}`,headers:e})).data.metadata}async tableExists(n){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Fl(n.namespace)}/tables/${n.name}`,headers:e}),!0}catch(t){if(t instanceof bd&&t.status===404)return!1;throw t}}async createTableIfNotExists(n,e){try{return await this.createTable(n,e)}catch(t){if(t instanceof bd&&t.status===409)return await this.loadTable({namespace:n.namespace,name:e.name});throw t}}},m7=class{constructor(n){var s;let e="v1";n.catalogName&&(e+=`/${n.catalogName}`);const t=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=d7({baseUrl:t,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(s=n.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new h7(this.client,e),this.tableOps=new f7(this.client,e,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,e){return this.namespaceOps.createNamespace(n,e)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,e){return this.tableOps.createTable(n,e)}async updateTable(n,e){return this.tableOps.updateTable(n,e)}async dropTable(n,e){await this.tableOps.dropTable(n,e)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,e){return this.namespaceOps.createNamespaceIfNotExists(n,e)}async createTableIfNotExists(n,e){return this.tableOps.createTableIfNotExists(n,e)}};class g7{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},r5),t),this.fetch=Hv(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Te(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}listBuckets(e){return Te(this,void 0,void 0,function*(){try{const t=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&t.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&t.set("sortOrder",e.sortOrder),e!=null&&e.search&&t.set("search",e.search);const s=t.toString(),a=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield vd(this.fetch,a,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Te(this,void 0,void 0,function*(){try{return{data:yield qv(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}from(e){if(!e7(e))throw new og("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new m7({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>Te(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const $v={"X-Client-Info":`storage-js/${s5}`,"Content-Type":"application/json"};class i5 extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Ns(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}class R0 extends i5{constructor(e,t,s){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class p7 extends i5{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var qx;(function(n){n.InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(qx||(qx={}));const Fv=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),y7=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},$x=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),v7=(n,e,t)=>Te(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(t!=null&&t.noResolveJson)){const a=n.status||500,o=n;if(typeof o.json=="function")o.json().then(c=>{const h=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||a+"";e(new R0($x(c),a,h))}).catch(()=>{const c=a+"",h=o.statusText||`HTTP ${a} error`;e(new R0(h,a,c))});else{const c=a+"",h=o.statusText||`HTTP ${a} error`;e(new R0(h,a,c))}}else e(new p7($x(n),n))}),b7=(n,e,t,s)=>{const a={method:n,headers:(e==null?void 0:e.headers)||{}};return s?(y7(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,Object.assign(Object.assign({},a),t)):a};function w7(n,e,t,s,a,o){return Te(this,void 0,void 0,function*(){return new Promise((c,h)=>{n(t,b7(e,s,a,o)).then(g=>{if(!g.ok)throw g;if(s!=null&&s.noResolveJson)return g;const p=g.headers.get("content-type");return!p||!p.includes("application/json")?{}:g.json()}).then(g=>c(g)).catch(g=>v7(g,h,s))})})}function Cs(n,e,t,s,a){return Te(this,void 0,void 0,function*(){return w7(n,"POST",e,s,a,t)})}class _7{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$v),t),this.fetch=Fv(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Te(this,void 0,void 0,function*(){try{return{data:(yield Cs(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ns(t))return{data:null,error:t};throw t}})}getIndex(e,t){return Te(this,void 0,void 0,function*(){try{return{data:yield Cs(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ns(s))return{data:null,error:s};throw s}})}listIndexes(e){return Te(this,void 0,void 0,function*(){try{return{data:yield Cs(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ns(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return Te(this,void 0,void 0,function*(){try{return{data:(yield Cs(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ns(s))return{data:null,error:s};throw s}})}}class x7{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$v),t),this.fetch=Fv(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Te(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Cs(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ns(t))return{data:null,error:t};throw t}})}getVectors(e){return Te(this,void 0,void 0,function*(){try{return{data:yield Cs(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ns(t))return{data:null,error:t};throw t}})}listVectors(e){return Te(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Cs(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ns(t))return{data:null,error:t};throw t}})}queryVectors(e){return Te(this,void 0,void 0,function*(){try{return{data:yield Cs(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ns(t))return{data:null,error:t};throw t}})}deleteVectors(e){return Te(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Cs(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ns(t))return{data:null,error:t};throw t}})}}class E7{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$v),t),this.fetch=Fv(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Te(this,void 0,void 0,function*(){try{return{data:(yield Cs(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ns(t))return{data:null,error:t};throw t}})}getBucket(e){return Te(this,void 0,void 0,function*(){try{return{data:yield Cs(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ns(t))return{data:null,error:t};throw t}})}listBuckets(){return Te(this,arguments,void 0,function*(e={}){try{return{data:yield Cs(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ns(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Te(this,void 0,void 0,function*(){try{return{data:(yield Cs(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ns(t))return{data:null,error:t};throw t}})}}class T7 extends E7{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new S7(this.url,this.headers,e,this.fetch)}createBucket(e){const t=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Te(this,void 0,void 0,function*(){return t.createBucket.call(this,e)})}getBucket(e){const t=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Te(this,void 0,void 0,function*(){return t.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Te(this,arguments,void 0,function*(t={}){return e.listBuckets.call(this,t)})}deleteBucket(e){const t=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Te(this,void 0,void 0,function*(){return t.deleteBucket.call(this,e)})}}class S7 extends _7{constructor(e,t,s,a){super(e,t,a),this.vectorBucketName=s}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Te(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Te(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Te(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Te(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new A7(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class A7 extends x7{constructor(e,t,s,a,o){super(e,t,o),this.vectorBucketName=s,this.indexName=a}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Te(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Te(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Te(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Te(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Te(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class N7 extends l7{constructor(e,t={},s,a){super(e,t,s,a)}from(e){return new o7(this.url,this.headers,e,this.fetch)}get vectors(){return new T7(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new g7(this.url+"/iceberg",this.headers,this.fetch)}}const C7="2.86.0";let Qu="";typeof Deno<"u"?Qu="deno":typeof document<"u"?Qu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Qu="react-native":Qu="node";const k7={"X-Client-Info":`supabase-js-${Qu}/${C7}`},I7={headers:k7},R7={schema:"public"},j7={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},O7={},D7=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),P7=()=>Headers,L7=(n,e,t)=>{const s=D7(t),a=P7();return async(o,c)=>{var h;const g=(h=await e())!==null&&h!==void 0?h:n;let p=new a(c==null?void 0:c.headers);return p.has("apikey")||p.set("apikey",n),p.has("Authorization")||p.set("Authorization",`Bearer ${g}`),s(o,Object.assign(Object.assign({},c),{headers:p}))}};function M7(n){return n.endsWith("/")?n:n+"/"}function V7(n,e){var t,s;const{db:a,auth:o,realtime:c,global:h}=n,{db:g,auth:p,realtime:v,global:w}=e,E={db:Object.assign(Object.assign({},g),a),auth:Object.assign(Object.assign({},p),o),realtime:Object.assign(Object.assign({},v),c),storage:{},global:Object.assign(Object.assign(Object.assign({},w),h),{headers:Object.assign(Object.assign({},(t=w==null?void 0:w.headers)!==null&&t!==void 0?t:{}),(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return n.accessToken?E.accessToken=n.accessToken:delete E.accessToken,E}function U7(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(M7(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const a5="2.86.0",nc=30*1e3,Cy=3,j0=Cy*nc,B7="http://localhost:9999",z7="supabase.auth.token",H7={"X-Client-Info":`gotrue-js/${a5}`},ky="X-Supabase-Api-Version",o5={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},q7=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,$7=600*1e3;class wd extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function Ce(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class F7 extends wd{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function G7(n){return Ce(n)&&n.name==="AuthApiError"}class Oo extends wd{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Fa extends wd{constructor(e,t,s,a){super(e,s,a),this.name=t,this.status=s}}class Ts extends Fa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function K7(n){return Ce(n)&&n.name==="AuthSessionMissingError"}class Gl extends Fa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Sf extends Fa{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Af extends Fa{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Q7(n){return Ce(n)&&n.name==="AuthImplicitGrantRedirectError"}class Fx extends Fa{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Iy extends Fa{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function O0(n){return Ce(n)&&n.name==="AuthRetryableFetchError"}class Gx extends Fa{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Ry extends Fa{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const fm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Kx=` 	
\r=`.split(""),W7=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Kx.length;e+=1)n[Kx[e].charCodeAt(0)]=-2;for(let e=0;e<fm.length;e+=1)n[fm[e].charCodeAt(0)]=e;return n})();function Qx(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(fm[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(fm[s]),e.queuedBits-=6}}function l5(n,e,t){const s=W7[n];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Wx(n){const e=[],t=c=>{e.push(String.fromCodePoint(c))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=c=>{J7(c,s,t)};for(let c=0;c<n.length;c+=1)l5(n.charCodeAt(c),a,o);return e.join("")}function Y7(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function X7(n,e){for(let t=0;t<n.length;t+=1){let s=n.charCodeAt(t);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(n.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}Y7(s,e)}}function J7(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let s=1;s<6;s+=1)if((n>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function mc(n){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<n.length;a+=1)l5(n.charCodeAt(a),t,s);return new Uint8Array(e)}function Z7(n){const e=[];return X7(n,t=>e.push(t)),new Uint8Array(e)}function Mo(n){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};return n.forEach(a=>Qx(a,t,s)),Qx(null,t,s),e.join("")}function e9(n){return Math.round(Date.now()/1e3)+n}function t9(){return Symbol("auth-callback")}const kn=()=>typeof window<"u"&&typeof document<"u",So={tested:!1,writable:!1},c5=()=>{if(!kn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(So.tested)return So.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),So.tested=!0,So.writable=!0}catch{So.tested=!0,So.writable=!1}return So.writable};function n9(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,o)=>{e[o]=a})}catch{}return t.searchParams.forEach((s,a)=>{e[a]=s}),e}const u5=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),s9=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",sc=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Ao=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},pa=async(n,e)=>{await n.removeItem(e)};class lg{constructor(){this.promise=new lg.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}lg.promiseConstructor=Promise;function D0(n){const e=n.split(".");if(e.length!==3)throw new Ry("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!q7.test(e[s]))throw new Ry("JWT not in base64url format");return{header:JSON.parse(Wx(e[0])),payload:JSON.parse(Wx(e[1])),signature:mc(e[2]),raw:{header:e[0],payload:e[1]}}}async function r9(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function i9(n,e){return new Promise((s,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const c=await n(o);if(!e(o,null,c)){s(c);return}}catch(c){if(!e(o,c)){a(c);return}}})()})}function a9(n){return("0"+n.toString(16)).substr(-2)}function o9(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let a="";for(let o=0;o<56;o++)a+=t.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,a9).join("")}async function l9(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(s);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function c9(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await l9(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Kl(n,e,t=!1){const s=o9();let a=s;t&&(a+="/PASSWORD_RECOVERY"),await sc(n,`${e}-code-verifier`,a);const o=await c9(s);return[o,s===o?"plain":"s256"]}const u9=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function d9(n){const e=n.headers.get(ky);if(!e||!e.match(u9))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function h9(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function f9(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const m9=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ql(n){if(!m9.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function P0(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function g9(n,e){return new Proxy(n,{get:(t,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const o=s.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,s,a)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,s,a)}})}function Yx(n){return JSON.parse(JSON.stringify(n))}const Io=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),p9=[502,503,504];async function Xx(n){var e;if(!s9(n))throw new Iy(Io(n),0);if(p9.includes(n.status))throw new Iy(Io(n),n.status);let t;try{t=await n.json()}catch(o){throw new Oo(Io(o),o)}let s;const a=d9(n);if(a&&a.getTime()>=o5["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new Gx(Io(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Ts}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,c)=>o&&typeof c=="string",!0))throw new Gx(Io(t),n.status,t.weak_password.reasons);throw new F7(Io(t),n.status||500,s)}const y9=(n,e,t,s)=>{const a={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),t))};async function Le(n,e,t,s){var a;const o=Object.assign({},s==null?void 0:s.headers);o[ky]||(o[ky]=o5["2024-01-01"].name),s!=null&&s.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const c=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(c.redirect_to=s.redirectTo);const h=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",g=await v9(n,e,t+h,{headers:o,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(g):{data:Object.assign({},g),error:null}}async function v9(n,e,t,s,a,o){const c=y9(e,s,a,o);let h;try{h=await n(t,Object.assign({},c))}catch(g){throw console.error(g),new Iy(Io(g),0)}if(h.ok||await Xx(h),s!=null&&s.noResolveJson)return h;try{return await h.json()}catch(g){await Xx(g)}}function gr(n){var e;let t=null;_9(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=e9(n.expires_in)));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:s},error:null}}function Jx(n){const e=gr(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=n.weak_password),e}function _a(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function b9(n){return{data:n,error:null}}function w9(n){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:o}=n,c=qc(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:o},g=Object.assign({},c);return{data:{properties:h,user:g},error:null}}function Zx(n){return n}function _9(n){return n.access_token&&n.refresh_token&&n.expires_in}const L0=["global","local","others"];class x9{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=u5(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=L0[0]){if(L0.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${L0.join(", ")}`);try{return await Le(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await Le(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:_a})}catch(s){if(Ce(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=qc(e,["options"]),a=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await Le(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:w9,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Ce(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Le(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:_a})}catch(t){if(Ce(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,a,o,c,h,g;try{const p={nextPage:null,lastPage:0,total:0},v=await Le(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:Zx});if(v.error)throw v.error;const w=await v.json(),E=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,T=(g=(h=v.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return T.length>0&&(T.forEach(k=>{const L=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(k.split(";")[1].split("=")[1]);p[`${I}Page`]=L}),p.total=parseInt(E)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(Ce(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Ql(e);try{return await Le(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:_a})}catch(t){if(Ce(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Ql(e);try{return await Le(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:_a})}catch(s){if(Ce(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){Ql(e);try{return await Le(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:_a})}catch(s){if(Ce(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){Ql(e.userId);try{const{data:t,error:s}=await Le(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:s}}catch(t){if(Ce(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Ql(e.userId),Ql(e.id);try{return{data:await Le(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Ce(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,s,a,o,c,h,g;try{const p={nextPage:null,lastPage:0,total:0},v=await Le(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:Zx});if(v.error)throw v.error;const w=await v.json(),E=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,T=(g=(h=v.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return T.length>0&&(T.forEach(k=>{const L=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),I=JSON.parse(k.split(";")[1].split("=")[1]);p[`${I}Page`]=L}),p.total=parseInt(E)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(Ce(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await Le(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Ce(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Le(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Ce(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Le(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await Le(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(Ce(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Le(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Ce(t))return{data:null,error:t};throw t}}}function eE(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const Wl={debug:!!(globalThis&&c5()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class d5 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class E9 extends d5{}async function T9(n,e,t){Wl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Wl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){Wl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,a.name);try{return await t()}finally{Wl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,a.name)}}else{if(e===0)throw Wl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new E9(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Wl.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function S9(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function h5(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function A9(n){return parseInt(n,16)}function N9(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function C9(n){var e;const{chainId:t,domain:s,expirationTime:a,issuedAt:o=new Date,nonce:c,notBefore:h,requestId:g,resources:p,scheme:v,uri:w,version:E}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(E!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${E}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const T=h5(n.address),k=v?`${v}://${s}`:s,L=n.statement?`${n.statement}
`:"",I=`${k} wants you to sign in with your Ethereum account:
${T}

${L}`;let O=`URI: ${w}
Version: ${E}
Chain ID: ${t}${c?`
Nonce: ${c}`:""}
Issued At: ${o.toISOString()}`;if(a&&(O+=`
Expiration Time: ${a.toISOString()}`),h&&(O+=`
Not Before: ${h.toISOString()}`),g&&(O+=`
Request ID: ${g}`),p){let q=`
Resources:`;for(const G of p){if(!G||typeof G!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${G}`);q+=`
- ${G}`}O+=q}return`${I}
${O}`}class cn extends Error{constructor({message:e,code:t,cause:s,name:a}){var o;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(o=a??(s instanceof Error?s.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=t}}class mm extends cn{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function k9({error:n,options:e}){var t,s,a;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new cn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=o.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new cn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new cn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((a=o.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new cn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new cn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new cn({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return o.pubKeyCredParams.filter(h=>h.type==="public-key").length===0?new cn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new cn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const c=window.location.hostname;if(f5(c)){if(o.rp.id!==c)return new cn({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new cn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new cn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new cn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new cn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function I9({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new cn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new cn({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const s=window.location.hostname;if(f5(s)){if(t.rpId!==s)return new cn({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new cn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new cn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new cn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class R9{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const j9=new R9;function O9(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:s}=n,a=qc(n,["challenge","user","excludeCredentials"]),o=mc(e).buffer,c=Object.assign(Object.assign({},t),{id:mc(t.id).buffer}),h=Object.assign(Object.assign({},a),{challenge:o,user:c});if(s&&s.length>0){h.excludeCredentials=new Array(s.length);for(let g=0;g<s.length;g++){const p=s[g];h.excludeCredentials[g]=Object.assign(Object.assign({},p),{id:mc(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return h}function D9(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,s=qc(n,["challenge","allowCredentials"]),a=mc(e).buffer,o=Object.assign(Object.assign({},s),{challenge:a});if(t&&t.length>0){o.allowCredentials=new Array(t.length);for(let c=0;c<t.length;c++){const h=t[c];o.allowCredentials[c]=Object.assign(Object.assign({},h),{id:mc(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return o}function P9(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:Mo(new Uint8Array(n.response.attestationObject)),clientDataJSON:Mo(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function L9(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,s=n.getClientExtensionResults(),a=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Mo(new Uint8Array(a.authenticatorData)),clientDataJSON:Mo(new Uint8Array(a.clientDataJSON)),signature:Mo(new Uint8Array(a.signature)),userHandle:a.userHandle?Mo(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function f5(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function tE(){var n,e;return!!(kn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function M9(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new mm("Browser returned unexpected credential type",e)}:{data:null,error:new mm("Empty credential response",e)}}catch(e){return{data:null,error:k9({error:e,options:n})}}}async function V9(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new mm("Browser returned unexpected credential type",e)}:{data:null,error:new mm("Empty credential response",e)}}catch(e){return{data:null,error:I9({error:e,options:n})}}}const U9={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},B9={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function gm(...n){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),t=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of n)if(a)for(const o in a){const c=a[o];if(c!==void 0)if(Array.isArray(c))s[o]=c;else if(t(c))s[o]=c;else if(e(c)){const h=s[o];e(h)?s[o]=gm(h,c):s[o]=gm(c)}else s[o]=c}return s}function z9(n,e){return gm(U9,n,e||{})}function H9(n,e){return gm(B9,n,e||{})}class q9{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:s,signal:a},o){try{const{data:c,error:h}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!c)return{data:null,error:h};const g=a??j9.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:p}=c.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${s}`),p.displayName||(p.displayName=p.name)}switch(c.webauthn.type){case"create":{const p=z9(c.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:v,error:w}=await M9({publicKey:p,signal:g});return v?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:w}}case"request":{const p=H9(c.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:v,error:w}=await V9(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:p,signal:g}));return v?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:w}}}}catch(c){return Ce(c)?{data:null,error:c}:{data:null,error:new Oo("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:t,webauthn:s}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!t)return{data:null,error:new wd("rpId is required for WebAuthn authentication")};try{if(!tE())return{data:null,error:new Oo("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:s},signal:a},{request:o});if(!c)return{data:null,error:h};const{webauthn:g}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:g.type,rpId:t,rpOrigins:s,credential_response:g.credential_response}})}catch(c){return Ce(c)?{data:null,error:c}:{data:null,error:new Oo("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!t)return{data:null,error:new wd("rpId is required for WebAuthn registration")};try{if(!tE())return{data:null,error:new Oo("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(v=>{var w;return(w=v.data)===null||w===void 0?void 0:w.all.find(E=>E.factor_type==="webauthn"&&E.friendly_name===e&&E.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:h};const{data:g,error:p}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:t,rpOrigins:s},signal:a},{create:o});return g?this._verify({factorId:c.id,challengeId:g.challengeId,webauthn:{rpId:t,rpOrigins:s,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:p}}catch(c){return Ce(c)?{data:null,error:c}:{data:null,error:new Oo("Unexpected error in register",c)}}}}S9();const $9={url:B7,storageKey:z7,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:H7,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function nE(n,e,t){return await t()}const Yl={};class _d{get jwks(){var e,t;return(t=(e=Yl[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Yl[this.storageKey]=Object.assign(Object.assign({},Yl[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Yl[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Yl[this.storageKey]=Object.assign(Object.assign({},Yl[this.storageKey]),{cachedAt:e})}constructor(e){var t,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},$9),e);if(this.storageKey=o.storageKey,this.instanceID=(t=_d.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,_d.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&kn()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new x9({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=u5(o.fetch),this.lock=o.lock||nE,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:kn()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=T9:this.lock=nE,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new q9(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:c5()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=eE(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=eE(this.memoryStorage)),kn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${a5}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},s="none";if(kn()&&(t=n9(window.location.href),this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce")),kn()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:o}=await this._getSessionFromURL(t,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Q7(o)){const g=(e=o.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:c,redirectType:h}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",h),await this._saveSession(c),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Ce(t)?this._returnResult({error:t}):this._returnResult({error:new Oo("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,a;try{const o=await Le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:gr}),{data:c,error:h}=o;if(h||!c)return this._returnResult({data:{user:null,session:null},error:h});const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(o){if(Ce(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var t,s,a;try{let o;if("email"in e){const{email:v,password:w,options:E}=e;let T=null,k=null;this.flowType==="pkce"&&([T,k]=await Kl(this.storage,this.storageKey)),o=await Le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:E==null?void 0:E.emailRedirectTo,body:{email:v,password:w,data:(t=E==null?void 0:E.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken},code_challenge:T,code_challenge_method:k},xform:gr})}else if("phone"in e){const{phone:v,password:w,options:E}=e;o=await Le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:w,data:(s=E==null?void 0:E.data)!==null&&s!==void 0?s:{},channel:(a=E==null?void 0:E.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken}},xform:gr})}else throw new Sf("You must provide either an email or phone number and a password");const{data:c,error:h}=o;if(h||!c)return this._returnResult({data:{user:null,session:null},error:h});const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(o){if(Ce(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:c,options:h}=e;t=await Le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Jx})}else if("phone"in e){const{phone:o,password:c,options:h}=e;t=await Le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Jx})}else throw new Sf("You must provide either an email or phone number and a password");const{data:s,error:a}=t;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const o=new Gl;return this._returnResult({data:{user:null,session:null},error:o})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(t){if(Ce(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,s,a,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,s,a,o,c,h,g,p,v,w,E;let T,k;if("message"in e)T=e.message,k=e.signature;else{const{chain:L,wallet:I,statement:O,options:q}=e;let G;if(kn())if(typeof I=="object")G=I;else{const R=window;if("ethereum"in R&&typeof R.ethereum=="object"&&"request"in R.ethereum&&typeof R.ethereum.request=="function")G=R.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof I!="object"||!(q!=null&&q.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");G=I}const te=new URL((t=q==null?void 0:q.url)!==null&&t!==void 0?t:window.location.href),me=await G.request({method:"eth_requestAccounts"}).then(R=>R).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!me||me.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const he=h5(me[0]);let N=(s=q==null?void 0:q.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!N){const R=await G.request({method:"eth_chainId"});N=A9(R)}const C={domain:te.host,address:he,statement:O,uri:te.href,version:"1",chainId:N,nonce:(a=q==null?void 0:q.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(o=q==null?void 0:q.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(h=q==null?void 0:q.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(g=q==null?void 0:q.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(p=q==null?void 0:q.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(v=q==null?void 0:q.signInWithEthereum)===null||v===void 0?void 0:v.resources};T=C9(C),k=await G.request({method:"personal_sign",params:[N9(T),he]})}try{const{data:L,error:I}=await Le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:T,signature:k},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(E=e.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:gr});if(I)throw I;if(!L||!L.session||!L.user){const O=new Gl;return this._returnResult({data:{user:null,session:null},error:O})}return L.session&&(await this._saveSession(L.session),await this._notifyAllSubscribers("SIGNED_IN",L.session)),this._returnResult({data:Object.assign({},L),error:I})}catch(L){if(Ce(L))return this._returnResult({data:{user:null,session:null},error:L});throw L}}async signInWithSolana(e){var t,s,a,o,c,h,g,p,v,w,E,T;let k,L;if("message"in e)k=e.message,L=e.signature;else{const{chain:I,wallet:O,statement:q,options:G}=e;let te;if(kn())if(typeof O=="object")te=O;else{const he=window;if("solana"in he&&typeof he.solana=="object"&&("signIn"in he.solana&&typeof he.solana.signIn=="function"||"signMessage"in he.solana&&typeof he.solana.signMessage=="function"))te=he.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof O!="object"||!(G!=null&&G.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");te=O}const me=new URL((t=G==null?void 0:G.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in te&&te.signIn){const he=await te.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},G==null?void 0:G.signInWithSolana),{version:"1",domain:me.host,uri:me.href}),q?{statement:q}:null));let N;if(Array.isArray(he)&&he[0]&&typeof he[0]=="object")N=he[0];else if(he&&typeof he=="object"&&"signedMessage"in he&&"signature"in he)N=he;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)k=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),L=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in te)||typeof te.signMessage!="function"||!("publicKey"in te)||typeof te!="object"||!te.publicKey||!("toBase58"in te.publicKey)||typeof te.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${me.host} wants you to sign in with your Solana account:`,te.publicKey.toBase58(),...q?["",q,""]:[""],"Version: 1",`URI: ${me.href}`,`Issued At: ${(a=(s=G==null?void 0:G.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=G==null?void 0:G.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${G.signInWithSolana.notBefore}`]:[],...!((c=G==null?void 0:G.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${G.signInWithSolana.expirationTime}`]:[],...!((h=G==null?void 0:G.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${G.signInWithSolana.chainId}`]:[],...!((g=G==null?void 0:G.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${G.signInWithSolana.nonce}`]:[],...!((p=G==null?void 0:G.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${G.signInWithSolana.requestId}`]:[],...!((w=(v=G==null?void 0:G.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||w===void 0)&&w.length?["Resources",...G.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const he=await te.signMessage(new TextEncoder().encode(k),"utf8");if(!he||!(he instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");L=he}}try{const{data:I,error:O}=await Le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:Mo(L)},!((E=e.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:gr});if(O)throw O;if(!I||!I.session||!I.user){const q=new Gl;return this._returnResult({data:{user:null,session:null},error:q})}return I.session&&(await this._saveSession(I.session),await this._notifyAllSubscribers("SIGNED_IN",I.session)),this._returnResult({data:Object.assign({},I),error:O})}catch(I){if(Ce(I))return this._returnResult({data:{user:null,session:null},error:I});throw I}}async _exchangeCodeForSession(e){const t=await Ao(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(t??"").split("/");try{const{data:o,error:c}=await Le(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:gr});if(await pa(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!o||!o.session||!o.user){const h=new Gl;return this._returnResult({data:{user:null,session:null,redirectType:null},error:h})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:c})}catch(o){if(Ce(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:t,provider:s,token:a,access_token:o,nonce:c}=e,h=await Le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:o,nonce:c,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:gr}),{data:g,error:p}=h;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!g||!g.session||!g.user){const v=new Gl;return this._returnResult({data:{user:null,session:null},error:v})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:p})}catch(t){if(Ce(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,s,a,o,c;try{if("email"in e){const{email:h,options:g}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await Kl(this.storage,this.storageKey));const{error:w}=await Le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(t=g==null?void 0:g.data)!==null&&t!==void 0?t:{},create_user:(s=g==null?void 0:g.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:p,code_challenge_method:v},redirectTo:g==null?void 0:g.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in e){const{phone:h,options:g}=e,{data:p,error:v}=await Le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(a=g==null?void 0:g.data)!==null&&a!==void 0?a:{},create_user:(o=g==null?void 0:g.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(c=g==null?void 0:g.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:v})}throw new Sf("You must provide either an email or phone number.")}catch(h){if(Ce(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async verifyOtp(e){var t,s;try{let a,o;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:c,error:h}=await Le(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:gr});if(h)throw h;if(!c)throw new Error("An error occurred on token verification.");const g=c.session,p=c.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(a){if(Ce(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var t,s,a,o,c;try{let h=null,g=null;this.flowType==="pkce"&&([h,g]=await Kl(this.storage,this.storageKey));const p=await Le(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:g}),headers:this.headers,xform:b9});return!((o=p.data)===null||o===void 0)&&o.url&&kn()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(h){if(Ce(h))return this._returnResult({data:null,error:h});throw h}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Ts;const{error:a}=await Le(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(Ce(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:o}=e,{error:c}=await Le(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:s,type:a,options:o}=e,{data:c,error:h}=await Le(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h})}throw new Sf("You must provide either an email or phone number and a type")}catch(t){if(Ce(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Ao(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<j0:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const c=await Ao(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=P0()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=g9(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:_a}):await this._useSession(async t=>{var s,a,o;const{data:c,error:h}=t;if(h)throw h;return!(!((s=c.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ts}:await Le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:_a})})}catch(t){if(Ce(t))return K7(t)&&(await this._removeSession(),await pa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:a,error:o}=s;if(o)throw o;if(!a.session)throw new Ts;const c=a.session;let h=null,g=null;this.flowType==="pkce"&&e.email!=null&&([h,g]=await Kl(this.storage,this.storageKey));const{data:p,error:v}=await Le(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:g}),jwt:c.access_token,xform:_a});if(v)throw v;return c.user=p.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(s){if(Ce(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ts;const t=Date.now()/1e3;let s=t,a=!0,o=null;const{payload:c}=D0(e.access_token);if(c.exp&&(s=c.exp,a=s<=t),a){const{data:h,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!h)return{data:{user:null,session:null},error:null};o=h}else{const{data:h,error:g}=await this._getUser(e.access_token);if(g)throw g;o={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(t){if(Ce(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:c,error:h}=t;if(h)throw h;e=(s=c.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Ts;const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(Ce(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!kn())throw new Af("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Af(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Fx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Af("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Fx("No code detected.");const{data:q,error:G}=await this._exchangeCodeForSession(e.code);if(G)throw G;const te=new URL(window.location.href);return te.searchParams.delete("code"),window.history.replaceState(window.history.state,"",te.toString()),{data:{session:q.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:o,refresh_token:c,expires_in:h,expires_at:g,token_type:p}=e;if(!o||!h||!c||!p)throw new Af("No session defined in URL");const v=Math.round(Date.now()/1e3),w=parseInt(h);let E=v+w;g&&(E=parseInt(g));const T=E-v;T*1e3<=nc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${w}s`);const k=E-w;v-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,E,v):v-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,E,v);const{data:L,error:I}=await this._getUser(o);if(I)throw I;const O={provider_token:s,provider_refresh_token:a,access_token:o,expires_in:w,expires_at:E,refresh_token:c,token_type:p,user:L.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:O,redirectType:e.type},error:null})}catch(s){if(Ce(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Ao(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:a,error:o}=t;if(o)return this._returnResult({error:o});const c=(s=a.session)===null||s===void 0?void 0:s.access_token;if(c){const{error:h}=await this.admin.signOut(c,e);if(h&&!(G7(h)&&(h.status===404||h.status===401||h.status===403)))return this._returnResult({error:h})}return e!=="others"&&(await this._removeSession(),await pa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=t9(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,a;try{const{data:{session:o},error:c}=t;if(c)throw c;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await Kl(this.storage,this.storageKey,!0));try{return await Le(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(Ce(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(Ce(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:s,error:a}=await this._useSession(async o=>{var c,h,g,p,v;const{data:w,error:E}=o;if(E)throw E;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await Le(this.fetch,"GET",T,{headers:this.headers,jwt:(v=(p=w.session)===null||p===void 0?void 0:p.access_token)!==null&&v!==void 0?v:void 0})});if(a)throw a;return kn()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(Ce(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var s;try{const{error:a,data:{session:o}}=t;if(a)throw a;const{options:c,provider:h,token:g,access_token:p,nonce:v}=e,w=await Le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=o==null?void 0:o.access_token)!==null&&s!==void 0?s:void 0,body:{provider:h,id_token:g,access_token:p,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:gr}),{data:E,error:T}=w;return T?this._returnResult({data:{user:null,session:null},error:T}):!E||!E.session||!E.user?this._returnResult({data:{user:null,session:null},error:new Gl}):(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("USER_UPDATED",E.session)),this._returnResult({data:E,error:T}))}catch(a){if(Ce(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,a;const{data:o,error:c}=t;if(c)throw c;return await Le(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(Ce(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await i9(async a=>(a>0&&await r9(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await Le(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:gr})),(a,o)=>{const c=200*Math.pow(2,a);return o&&O0(o)&&Date.now()+c-s<nc})}catch(s){if(this._debug(t,"error",s),Ce(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),kn()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await Ao(this.storage,this.storageKey);if(a&&this.userStorage){let c=await Ao(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await sc(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:P0()}else if(a&&!a.user&&!a.user){const c=await Ao(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(a.user=c.user,await pa(this.storage,this.storageKey+"-user"),await sc(this.storage,this.storageKey,a)):a.user=P0()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const o=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<j0;if(this._debug(s,`session has${o?"":" not"} expired with margin of ${j0}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),O0(c)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:h}=await this._getUser(a.access_token);!h&&(c!=null&&c.user)?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(s,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Ts;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new lg;const{data:o,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!o.session)throw new Ts;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const h={data:o.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(o){if(this._debug(a,"error",o),Ce(o)){const c={data:null,error:o};return O0(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(c),c}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],c=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,t)}catch(g){o.push(g)}});if(await Promise.all(c),o.length>0){for(let h=0;h<o.length;h+=1)console.error(o[h]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await sc(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const o=Yx(a);await sc(this.storage,this.storageKey,o)}else{const a=Yx(t);await sc(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await pa(this.storage,this.storageKey),await pa(this.storage,this.storageKey+"-code-verifier"),await pa(this.storage,this.storageKey+"-user"),this.userStorage&&await pa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&kn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),nc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/nc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${nc}ms, refresh threshold is ${Cy} ticks`),a<=Cy&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof d5)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!kn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const a=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,c]=await Kl(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(h.toString())}if(s!=null&&s.queryParams){const o=new URLSearchParams(s.queryParams);a.push(o.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:a,error:o}=t;return o?this._returnResult({data:null,error:o}):await Le(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Ce(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,a;const{data:o,error:c}=t;if(c)return this._returnResult({data:null,error:c});const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:g,error:p}=await Le(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(s=o==null?void 0:o.session)===null||s===void 0?void 0:s.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&g.type==="totp"&&(!((a=g==null?void 0:g.totp)===null||a===void 0)&&a.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(t){if(Ce(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:o}=t;if(o)return this._returnResult({data:null,error:o});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?P9(e.webauthn.credential_response):L9(e.webauthn.credential_response)})}:{code:e.code}),{data:h,error:g}=await Le(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),this._returnResult({data:h,error:g}))})}catch(t){if(Ce(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:o}=t;if(o)return this._returnResult({data:null,error:o});const c=await Le(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(c.error)return c;const{data:h}=c;if(h.type!=="webauthn")return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:O9(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:D9(h.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(Ce(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])a.all.push(o),o.status==="verified"&&a[o.factor_type].push(o);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=D0(s.access_token);let c=null;o.aal&&(c=o.aal);let h=c;((t=(e=s.user.factors)===null||e===void 0?void 0:e.filter(v=>v.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(h="aal2");const p=o.amr||[];return{data:{currentLevel:c,nextLevel:h,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:s},error:a}=t;return a?this._returnResult({data:null,error:a}):s?await Le(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Ts})})}catch(t){if(Ce(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:a},error:o}=s;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new Ts});const c=await Le(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:h=>({data:h,error:null})});return c.data&&c.data.redirect_url&&kn()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(s){if(Ce(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:a},error:o}=s;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new Ts});const c=await Le(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:h=>({data:h,error:null})});return c.data&&c.data.redirect_url&&kn()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(s){if(Ce(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;return s?this._returnResult({data:null,error:s}):t?await Le(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Ts})})}catch(e){if(Ce(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:s},error:a}=t;return a?this._returnResult({data:null,error:a}):s?(await Le(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ts})})}catch(t){if(Ce(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(h=>h.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(h=>h.kid===e),s&&this.jwks_cached_at+$7>a)return s;const{data:o,error:c}=await Le(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,s=o.keys.find(h=>h.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:T,error:k}=await this.getSession();if(k||!T.session)return this._returnResult({data:null,error:k});s=T.session.access_token}const{header:a,payload:o,signature:c,raw:{header:h,payload:g}}=D0(s);t!=null&&t.allowExpired||h9(o.exp);const p=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!p){const{error:T}=await this.getUser(s);if(T)throw T;return{data:{claims:o,header:a,signature:c},error:null}}const v=f9(a.alg),w=await crypto.subtle.importKey("jwk",p,v,!0,["verify"]);if(!await crypto.subtle.verify(v,w,c,Z7(`${h}.${g}`)))throw new Ry("Invalid JWT signature");return{data:{claims:o,header:a,signature:c},error:null}}catch(s){if(Ce(s))return this._returnResult({data:null,error:s});throw s}}}_d.nextInstanceID={};const F9=_d;class G9 extends F9{constructor(e){super(e)}}class K9{constructor(e,t,s){var a,o,c;this.supabaseUrl=e,this.supabaseKey=t;const h=U7(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const g=`sb-${h.hostname.split(".")[0]}-auth-token`,p={db:R7,realtime:O7,auth:Object.assign(Object.assign({},j7),{storageKey:g}),global:I7},v=V7(s??{},p);this.storageKey=(a=v.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=v.global.headers)!==null&&o!==void 0?o:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(w,E)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(E)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=v.auth)!==null&&c!==void 0?c:{},this.headers,v.global.fetch),this.fetch=L7(t,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.accessToken&&this.accessToken().then(w=>this.realtime.setAuth(w)).catch(w=>console.warn("Failed to set initial Realtime auth token:",w)),this.rest=new OO(new URL("rest/v1",h).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new N7(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new kO(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:s}=await this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,userStorage:o,storageKey:c,flowType:h,lock:g,debug:p,throwOnError:v},w,E){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new G9({url:this.authUrl.href,headers:Object.assign(Object.assign({},T),w),storageKey:c,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,userStorage:o,flowType:h,lock:g,debug:p,throwOnError:v,fetch:E,hasCustomAuthorizationHeader:Object.keys(this.headers).some(k=>k.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new YO(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Q9=(n,e,t)=>new K9(n,e,t);function W9(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}W9()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Y9="https://hykypgxaegmufdothwbv.supabase.co",X9="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh5a3lwZ3hhZWdtdWZkb3Rod2J2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1NTE3NzMsImV4cCI6MjA3NzEyNzc3M30.Euzl2vfhHrxhgN-tfg2XftMaX9hEiJOorSJq16n2CRY",jy=Q9(Y9,X9),Ua=n=>{const e=(n||"").toLowerCase();return e==="hoc_vien"||e==="student"||e==="hoc-vien"?"/assets/img/avatar.webp1.webp":"/assets/img/avatar.webp.webp"},J9=n=>new Promise((e,t)=>{const s=new FileReader;s.readAsDataURL(n),s.onload=a=>{var c;const o=new Image;o.src=(c=a.target)==null?void 0:c.result,o.onload=()=>{let p=o.width,v=o.height;p>v?p>350&&(v*=350/p,p=350):v>350&&(p*=350/v,v=350);const w=document.createElement("canvas");w.width=p,w.height=v;const E=w.getContext("2d");if(!E){t(new Error("Canvas context not available"));return}E.drawImage(o,0,0,p,v),w.toBlob(T=>{T?e(T):t(new Error("WebP conversion failed"))},"image/webp",.6)},o.onerror=h=>t(h)},s.onerror=a=>t(a)}),Z9=async(n,e)=>{try{const t=await J9(n),a=`avatars/${`${e}_${Date.now()}.webp`}`,{error:o}=await jy.storage.from("avatars").upload(a,t,{cacheControl:"3600",upsert:!0});if(o)throw console.error("Supabase upload error:",o),o;const{data:c}=jy.storage.from("avatars").getPublicUrl(a);return c.publicUrl}catch(t){throw console.error("Error uploading avatar:",t),t}},eD=async n=>{try{const e=ut(ke,"users",n),t=await Va(e);if(t.exists()){const s=t.data();return{id:n,email:s.email,full_name:s.fullName||s.full_name||"Ngi dng",role:(()=>{const a=s.role;return a==="teacher"||a==="giao-vien"||a==="giao_vien"?"giao_vien":a==="student"||a==="hoc-vien"||a==="hoc_vien"?"hoc_vien":a==="manager"||a==="quan-ly"||a==="quan_ly"?"quan_ly":a==="leader"||a==="lanh-dao"||a==="lanh_dao"?"lanh_dao":a==="admin"?"admin":"hoc_vien"})(),photoURL:s.photoURL||Ua(s.role),birthDate:s.birthDate||"",address:s.address||"",class:s.class||"",phoneNumber:s.phoneNumber||"",courseName:s.courseName||"",courseId:s.courseId||""}}return null}catch(e){return console.error("Error fetching user profile from Firestore:",e),null}},sE=async(n,e,t,s,a,o,c,h)=>{try{let g=t;a==="n tp"&&s?g=`${t} / ${s}`:a==="Thi th"&&(g=`${t} (Thi th)`),await hd(At(ke,"exam_results"),{studentId:n,licenseId:e,score:o,totalQuestions:c,timeTaken:h,completedAt:Rd(),type:a,quizTitle:g})}catch(g){console.error("Error saving exam result to Firestore:",g)}},tD=async()=>{try{const n=Ut(At(ke,"courses")),e=await pn(n),t=[];return e.forEach(s=>{const a=s.data();a.name&&t.push({id:s.id,name:a.name})}),t.sort((s,a)=>s.name.localeCompare(a.name))}catch(n){return console.error("Error fetching courses:",n),[]}},nD=async n=>{try{if(!n||n.length<3)return[];const e=Ut(At(ke,"users"),un("email",">=",n),un("email","<=",n+""));return(await pn(e)).docs.map(s=>{const a=s.data();return{id:s.id,email:a.email,full_name:a.fullName||a.full_name||"Ngi dng",role:(()=>{const o=a.role;return o==="teacher"||o==="giao-vien"?"giao_vien":o==="student"||o==="hoc-vien"?"hoc_vien":o==="manager"||o==="quan-ly"?"quan_ly":o==="leader"||o==="lanh-dao"?"lanh_dao":o||"hoc_vien"})(),photoURL:a.photoURL||Ua(a.role),birthDate:a.birthDate||"",address:a.address||"",class:a.class||"",phoneNumber:a.phoneNumber||"",courseName:a.courseName||"",courseId:a.courseId||""}})}catch(e){return console.error("Error searching users:",e),[]}},sD=({userProfile:n})=>{const[e,t]=F.useState([]),[s,a]=F.useState(!0);F.useEffect(()=>{o()},[]);const o=async()=>{a(!0);const P=await W8();t(P),a(!1)},c=P=>!(n.role==="giao_vien"&&(P.type==="special"||P.type==="attention")),h=async P=>{confirm("Bn c chc chn mun XA VNH VIN thng bo ny? Hnh ng ny s g thng bo khi mn hnh ca tt c ngi dng.")&&(await Y8(P)?(alert(" xa thng bo!"),o()):alert("C li xy ra khi xa."))},g=P=>P?new Date(P*1e3).toLocaleString("vi-VN"):"--",[p,v]=F.useState(!1),[w,E]=F.useState(""),[T,k]=F.useState(""),[L,I]=F.useState("system"),[O,q]=F.useState("all"),[G,te]=F.useState([]),[me,he]=F.useState(""),[N,C]=F.useState(""),[R,B]=F.useState([]),[M,z]=F.useState(null),[D,Ue]=F.useState("");F.useEffect(()=>{p&&O==="class"&&tD().then(te)},[p,O]),F.useEffect(()=>{if(N.length>2&&O==="user"){const P=setTimeout(async()=>{const ie=await nD(N);B(ie)},500);return()=>clearTimeout(P)}},[N,O]);const re=async P=>{if(P.preventDefault(),!w||!T)return alert("Vui lng nhp tiu  v ni dung");if(O==="class"&&!me)return alert("Vui lng chn lp");if(O==="user"&&!M)return alert("Vui lng chn ngi nhn");try{let ie=null;O==="class"&&(ie=me),O==="user"&&(ie=M.id),await dS(w,T,L,O,ie,n.id,n.full_name,D?new Date(D):null),alert(" gi thng bo thnh cng!"),v(!1),E(""),k(""),I("system"),o()}catch(ie){console.error(ie),alert("Li khi gi thng bo")}};return d.jsxs("div",{className:"p-4 md:p-8 animate-fade-in pb-20 max-w-7xl mx-auto",children:[d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl overflow-hidden min-h-[500px] flex flex-col",children:[d.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-slate-700 bg-gradient-to-r from-teal-500 to-emerald-600 text-white flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3",children:[d.jsx(Ld,{})," Qun L Thng Bo H Thng"]}),d.jsx("p",{className:"text-teal-100 mt-1 opacity-90",children:n.role==="giao_vien"?"Bn c th xem tt c v qun l thng bo thng.":"Bn c ton quyn qun l thng bo."})]}),d.jsxs("button",{onClick:()=>v(!0),className:"bg-white text-teal-600 px-4 py-2 rounded-lg font-bold shadow hover:bg-teal-50 transition flex items-center gap-2",children:[d.jsx(ac,{})," To mi"]})]}),d.jsx("div",{className:"flex-1 p-6 bg-gray-50 dark:bg-slate-900/50 overflow-x-auto",children:s?d.jsx("div",{className:"text-center py-20 text-gray-500",children:"ang ti d liu..."}):d.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow border border-gray-200 dark:border-slate-700 overflow-hidden min-w-[800px]",children:d.jsxs("table",{className:"w-full text-left text-sm",children:[d.jsx("thead",{className:"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-200 font-bold uppercase",children:d.jsxs("tr",{children:[d.jsx("th",{className:"p-4 w-32",children:"i tng"}),d.jsx("th",{className:"p-4 w-32",children:"Loi"}),d.jsx("th",{className:"p-4",children:"Tiu  & Ni dung"}),d.jsx("th",{className:"p-4 w-40",children:"Ngi to"}),d.jsx("th",{className:"p-4 w-48",children:"Ht hn (Marquee)"}),d.jsx("th",{className:"p-4 w-40",children:"Ngy to"}),d.jsx("th",{className:"p-4 w-32 text-center",children:"Hnh ng"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-700",children:e.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:7,className:"p-10 text-center text-gray-500 text-base",children:"H thng cha c thng bo no."})}):e.map(P=>{var ve,Ne;const ie=c(P);return d.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors",children:[d.jsxs("td",{className:"p-4 align-top",children:[d.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-bold whitespace-nowrap border
                                                            ${P.targetType==="all"?"bg-purple-100 text-purple-700 border-purple-200":P.targetType==="class"?"bg-indigo-100 text-indigo-700 border-indigo-200":"bg-pink-100 text-pink-700 border-pink-200"}
                                                        `,children:[P.targetType==="all"&&d.jsxs(d.Fragment,{children:[d.jsx(Cx,{})," Tt c"]}),P.targetType==="class"&&d.jsxs(d.Fragment,{children:[d.jsx(yd,{})," Lp"]}),P.targetType==="user"&&d.jsxs(d.Fragment,{children:[d.jsx(um,{})," C nhn"]})]}),P.targetId&&P.targetType!=="all"&&d.jsx("div",{className:"text-xs text-gray-500 mt-1 font-mono",children:P.targetId})]}),d.jsx("td",{className:"p-4 align-top",children:d.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold whitespace-nowrap
                                                            ${P.type==="special"?"bg-red-100 text-red-600":P.type==="attention"?"bg-orange-100 text-orange-600":"bg-blue-100 text-blue-600"}
                                                        `,children:P.type==="special"?"C BIT":P.type==="attention"?"CH ":"Thng"})}),d.jsxs("td",{className:"p-4 align-top",children:[d.jsx("div",{className:"font-bold text-gray-900 dark:text-white mb-1 text-base",children:P.title}),d.jsx("div",{className:"text-gray-600 dark:text-gray-400 line-clamp-2",children:P.message})]}),d.jsxs("td",{className:"p-4 align-top text-gray-700 dark:text-gray-300 font-medium",children:[P.senderName,d.jsx("div",{className:"text-xs text-gray-400 font-normal",children:P.senderId===n.id?"(Bn)":""})]}),d.jsx("td",{className:"p-4 align-top",children:P.type==="special"||P.type==="attention"?d.jsxs("div",{className:"flex items-center gap-1 text-xs font-mono bg-gray-100 dark:bg-slate-900 px-2 py-1 rounded border whitespace-nowrap",children:[d.jsx(lO,{className:"text-gray-400"}),g((ve=P.expiryDate)==null?void 0:ve.seconds)]}):d.jsx("span",{className:"text-gray-400 text-xs",children:"--"})}),d.jsx("td",{className:"p-4 align-top text-gray-500 text-xs whitespace-nowrap",children:g((Ne=P.createdAt)==null?void 0:Ne.seconds)}),d.jsx("td",{className:"p-4 align-top text-center",children:ie?d.jsxs("button",{onClick:()=>h(P.id),className:"text-red-500 hover:text-red-700 p-2 bg-red-50 hover:bg-red-100 rounded-lg transition-colors flex items-center gap-1 mx-auto",title:"Xa vnh vin",children:[d.jsx(Lo,{size:14})," ",d.jsx("span",{className:"text-xs font-bold",children:"Xa"})]}):d.jsx("div",{className:"text-gray-300 flex justify-center p-2 cursor-not-allowed",title:"Bn khng c quyn xa thng bo cp cao ny",children:d.jsx(rO,{})})})]},P.id)})})]})})})]}),p&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm",onClick:()=>v(!1),children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden animate-scale-in",onClick:P=>P.stopPropagation(),children:[d.jsxs("div",{className:"p-6 border-b dark:border-slate-700 bg-gray-50 dark:bg-slate-900 flex justify-between items-center",children:[d.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-gray-800 dark:text-white",children:[d.jsx(ac,{className:"text-teal-600"})," To thng bo mi"]}),d.jsx("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),d.jsxs("form",{onSubmit:re,className:"p-6 space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300",children:"Gi ti:"}),d.jsxs("div",{className:"flex gap-4",children:[d.jsxs("label",{className:`flex items-center gap-2 p-3 rounded-lg border cursor-pointer flex-1 justify-center transition-all ${O==="all"?"bg-purple-50 border-purple-500 text-purple-700 ring-1 ring-purple-500":"border-gray-200 hover:bg-gray-50"}`,children:[d.jsx("input",{type:"radio",name:"target",value:"all",checked:O==="all",onChange:()=>q("all"),className:"hidden"}),d.jsx(Cx,{})," Tt c"]}),d.jsxs("label",{className:`flex items-center gap-2 p-3 rounded-lg border cursor-pointer flex-1 justify-center transition-all ${O==="class"?"bg-indigo-50 border-indigo-500 text-indigo-700 ring-1 ring-indigo-500":"border-gray-200 hover:bg-gray-50"}`,children:[d.jsx("input",{type:"radio",name:"target",value:"class",checked:O==="class",onChange:()=>q("class"),className:"hidden"}),d.jsx(yd,{})," Lp hc"]}),d.jsxs("label",{className:`flex items-center gap-2 p-3 rounded-lg border cursor-pointer flex-1 justify-center transition-all ${O==="user"?"bg-pink-50 border-pink-500 text-pink-700 ring-1 ring-pink-500":"border-gray-200 hover:bg-gray-50"}`,children:[d.jsx("input",{type:"radio",name:"target",value:"user",checked:O==="user",onChange:()=>q("user"),className:"hidden"}),d.jsx(um,{})," C nhn"]})]})]}),O==="class"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1",children:"Chn lp:"}),d.jsxs("select",{className:"w-full p-2 border rounded-lg dark:bg-slate-700",value:me,onChange:P=>he(P.target.value),required:!0,children:[d.jsx("option",{value:"",children:"-- Chn lp --"}),G.map(P=>d.jsxs("option",{value:P.name,children:[P.name," -- (",P.id,")"]},P.id))]})]}),O==="user"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1",children:"Tm ngi nhn (Email):"}),d.jsx("input",{className:"w-full p-2 border rounded-lg dark:bg-slate-700",placeholder:"Nhp email...",value:N,onChange:P=>C(P.target.value)}),R.length>0&&d.jsx("div",{className:"mt-2 border rounded max-h-40 overflow-y-auto bg-gray-50 dark:bg-slate-900",children:R.map(P=>d.jsxs("div",{onClick:()=>{z(P),B([]),C(P.email)},className:"p-2 hover:bg-teal-50 cursor-pointer flex justify-between items-center border-b last:border-0",children:[d.jsx("span",{className:"font-medium",children:P.full_name}),d.jsx("span",{className:"text-xs text-gray-500",children:P.email})]},P.id))}),M&&d.jsxs("div",{className:"mt-2 p-2 bg-green-50 text-green-700 text-sm rounded flex items-center gap-2",children:[d.jsx(Ac,{}),"  chn: ",d.jsx("b",{children:M.full_name})," (",M.email,")"]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1",children:"Tiu :"}),d.jsx("input",{className:"w-full p-2 border rounded-lg dark:bg-slate-700",value:w,onChange:P=>E(P.target.value),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1",children:"Ni dung:"}),d.jsx("textarea",{className:"w-full p-2 border rounded-lg dark:bg-slate-700 h-24",value:T,onChange:P=>k(P.target.value),required:!0})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1",children:"Loi thng bo:"}),d.jsxs("select",{className:"w-full p-2 border rounded-lg dark:bg-slate-700",value:L,onChange:P=>I(P.target.value),children:[d.jsx("option",{value:"system",children:"Thng (Xanh)"}),d.jsx("option",{value:"attention",children:"Ch  (Cam)"}),d.jsx("option",{value:"special",children:"c bit ( - Marquee)"})]})]}),(L==="attention"||L==="special")&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1",children:"Ht hn chy ch (Marquee):"}),d.jsx("input",{type:"datetime-local",className:"w-full p-2 border rounded-lg dark:bg-slate-700",value:D,onChange:P=>Ue(P.target.value),required:!0})]})]}),d.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t dark:border-slate-700 mt-6",children:[d.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-5 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition",children:"Hy"}),d.jsx("button",{type:"submit",className:"px-5 py-2 bg-teal-600 hover:bg-teal-700 text-white rounded-lg font-bold shadow-lg shadow-teal-500/30 transition transform hover:-translate-y-0.5",children:"Gi thng bo"})]})]})]})})]})},rE=({onStart:n,onLoginClick:e,onRegisterClick:t})=>{const{theme:s}=Fn();return d.jsx("div",{className:"text-center p-4 animate-slide-in-right",children:d.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8 md:p-12 max-w-2xl mx-auto relative",children:[s==="tri-an"?d.jsx("img",{src:"https://i.postimg.cc/MH9hVp8S/happy-techers-day.jpg",alt:"Icon Chc mng Ngy Nh gio",className:"h-24 w-24 mx-auto mb-4 rounded-full object-cover"}):s==="noel"?d.jsx(yc,{className:"h-24 w-24 mx-auto text-primary mb-4"}):d.jsx(yc,{className:"h-24 w-24 mx-auto text-primary mb-4"}),d.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-foreground mb-2",children:"ng Dng n tp"}),s==="tri-an"&&d.jsx("p",{className:"text-xl font-semibold text-primary mb-4",children:"Phin bn c bit Tri n Thy C"}),s==="noel"&&d.jsx("p",{className:"text-xl font-semibold text-primary mb-4",children:"Cho n Ging Sinh An Lnh"}),d.jsx("p",{className:"text-lg text-muted-foreground mb-4",children:"Cho mng anh/ch  n vi ng dng n tp, n thi chng ch chuyn mn phng tin thy ni a."}),s==="tri-an"&&d.jsx("p",{className:"text-lg text-muted-foreground mb-8 italic",children:'"Nhn ngy Nh gio Vit Nam 20-11, knh chc qu thy c lun mnh khe, hnh phc v thnh cng trong s nghip trng ngi."'}),d.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[d.jsx("button",{onClick:n,className:"w-full sm:w-auto bg-primary text-primary-foreground font-bold text-lg py-4 px-10 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105",children:"Bt u"}),d.jsx("button",{onClick:e,className:"w-full sm:w-auto bg-secondary text-secondary-foreground font-bold text-lg py-4 px-10 rounded-lg hover:bg-secondary/80 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300",children:"ng nhp"})]}),d.jsx("div",{className:"mt-4",children:d.jsx("button",{onClick:t,className:"text-primary hover:underline font-medium",children:"Cha c ti khon? ng k ngay"})})]})})};/*! Capacitor: https://capacitorjs.com/ - MIT License */const rD=n=>{const e=new Map;e.set("web",{name:"web"});const t=n.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},s=(o,c)=>{t.platforms.set(o,c)},a=o=>{t.platforms.has(o)&&(t.currentPlatform=t.platforms.get(o))};return t.addPlatform=s,t.setPlatform=a,t},iD=n=>n.CapacitorPlatforms=rD(n),m5=iD(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});m5.addPlatform;m5.setPlatform;var Cc;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(Cc||(Cc={}));let M0=class extends Error{constructor(e,t){super(e),this.message=e,this.code=t}};const aD=n=>{var e,t;return n!=null&&n.androidBridge?"android":!((t=(e=n==null?void 0:n.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},oD=n=>{var e,t,s,a,o;const c=n.CapacitorCustomPlatform||null,h=n.Capacitor||{},g=h.Plugins=h.Plugins||{},p=n.CapacitorPlatforms,v=()=>c!==null?c.name:aD(n),w=((e=p==null?void 0:p.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||v,E=()=>w()!=="web",T=((t=p==null?void 0:p.currentPlatform)===null||t===void 0?void 0:t.isNativePlatform)||E,k=N=>{const C=te.get(N);return!!(C!=null&&C.platforms.has(w())||O(N))},L=((s=p==null?void 0:p.currentPlatform)===null||s===void 0?void 0:s.isPluginAvailable)||k,I=N=>{var C;return(C=h.PluginHeaders)===null||C===void 0?void 0:C.find(R=>R.name===N)},O=((a=p==null?void 0:p.currentPlatform)===null||a===void 0?void 0:a.getPluginHeader)||I,q=N=>n.console.error(N),G=(N,C,R)=>Promise.reject(`${R} does not have an implementation of "${C}".`),te=new Map,me=(N,C={})=>{const R=te.get(N);if(R)return console.warn(`Capacitor plugin "${N}" already registered. Cannot register plugins twice.`),R.proxy;const B=w(),M=O(N);let z;const D=async()=>(!z&&B in C?z=typeof C[B]=="function"?z=await C[B]():z=C[B]:c!==null&&!z&&"web"in C&&(z=typeof C.web=="function"?z=await C.web():z=C.web),z),Ue=(we,V)=>{var Z,K;if(M){const ne=M==null?void 0:M.methods.find(ce=>V===ce.name);if(ne)return ne.rtype==="promise"?ce=>h.nativePromise(N,V.toString(),ce):(ce,_e)=>h.nativeCallback(N,V.toString(),ce,_e);if(we)return(Z=we[V])===null||Z===void 0?void 0:Z.bind(we)}else{if(we)return(K=we[V])===null||K===void 0?void 0:K.bind(we);throw new M0(`"${N}" plugin is not implemented on ${B}`,Cc.Unimplemented)}},re=we=>{let V;const Z=(...K)=>{const ne=D().then(ce=>{const _e=Ue(ce,we);if(_e){const Ae=_e(...K);return V=Ae==null?void 0:Ae.remove,Ae}else throw new M0(`"${N}.${we}()" is not implemented on ${B}`,Cc.Unimplemented)});return we==="addListener"&&(ne.remove=async()=>V()),ne};return Z.toString=()=>`${we.toString()}() { [capacitor code] }`,Object.defineProperty(Z,"name",{value:we,writable:!1,configurable:!1}),Z},P=re("addListener"),ie=re("removeListener"),ve=(we,V)=>{const Z=P({eventName:we},V),K=async()=>{const ce=await Z;ie({eventName:we,callbackId:ce},V)},ne=new Promise(ce=>Z.then(()=>ce({remove:K})));return ne.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await K()},ne},Ne=new Proxy({},{get(we,V){switch(V){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return M?ve:P;case"removeListener":return ie;default:return re(V)}}});return g[N]=Ne,te.set(N,{name:N,proxy:Ne,platforms:new Set([...Object.keys(C),...M?[B]:[]])}),Ne},he=((o=p==null?void 0:p.currentPlatform)===null||o===void 0?void 0:o.registerPlugin)||me;return h.convertFileSrc||(h.convertFileSrc=N=>N),h.getPlatform=w,h.handleError=q,h.isNativePlatform=T,h.isPluginAvailable=L,h.pluginMethodNoop=G,h.registerPlugin=he,h.Exception=M0,h.DEBUG=!!h.DEBUG,h.isLoggingEnabled=!!h.isLoggingEnabled,h.platform=h.getPlatform(),h.isNative=h.isNativePlatform(),h},lD=n=>n.Capacitor=oD(n),pm=lD(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),cD=pm.registerPlugin;pm.Plugins;let _V=class{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);const a=this.windowListeners[e];a&&!a.registered&&this.addWindowListener(a);const o=async()=>this.removeListener(e,t),c=Promise.resolve({remove:o});return Object.defineProperty(c,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await o()}}),c}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t){const s=this.listeners[e];s&&s.forEach(a=>a(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:s=>{this.notifyListeners(t,s)}}}unimplemented(e="not implemented"){return new pm.Exception(e,Cc.Unimplemented)}unavailable(e="not available"){return new pm.Exception(e,Cc.Unavailable)}async removeListener(e,t){const s=this.listeners[e];if(!s)return;const a=s.indexOf(t);this.listeners[e].splice(a,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}};var iE;(function(n){n[n.NONE=0]="NONE",n[n.TOUCH_ID=1]="TOUCH_ID",n[n.FACE_ID=2]="FACE_ID",n[n.FINGERPRINT=3]="FINGERPRINT",n[n.FACE_AUTHENTICATION=4]="FACE_AUTHENTICATION",n[n.IRIS_AUTHENTICATION=5]="IRIS_AUTHENTICATION",n[n.MULTIPLE=6]="MULTIPLE"})(iE||(iE={}));var aE;(function(n){n[n.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",n[n.BIOMETRICS_UNAVAILABLE=1]="BIOMETRICS_UNAVAILABLE",n[n.USER_LOCKOUT=2]="USER_LOCKOUT",n[n.BIOMETRICS_NOT_ENROLLED=3]="BIOMETRICS_NOT_ENROLLED",n[n.USER_TEMPORARY_LOCKOUT=4]="USER_TEMPORARY_LOCKOUT",n[n.AUTHENTICATION_FAILED=10]="AUTHENTICATION_FAILED",n[n.APP_CANCEL=11]="APP_CANCEL",n[n.INVALID_CONTEXT=12]="INVALID_CONTEXT",n[n.NOT_INTERACTIVE=13]="NOT_INTERACTIVE",n[n.PASSCODE_NOT_SET=14]="PASSCODE_NOT_SET",n[n.SYSTEM_CANCEL=15]="SYSTEM_CANCEL",n[n.USER_CANCEL=16]="USER_CANCEL",n[n.USER_FALLBACK=17]="USER_FALLBACK"})(aE||(aE={}));const g5=cD("NativeBiometric",{web:()=>gn(()=>import("./web-Jp4W6fMb.js"),[]).then(n=>new n.NativeBiometricWeb)});/*! Capacitor: https://capacitorjs.com/ - MIT License */const uD=n=>{const e=new Map;e.set("web",{name:"web"});const t=n.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},s=(o,c)=>{t.platforms.set(o,c)},a=o=>{t.platforms.has(o)&&(t.currentPlatform=t.platforms.get(o))};return t.addPlatform=s,t.setPlatform=a,t},dD=n=>n.CapacitorPlatforms=uD(n),p5=dD(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});p5.addPlatform;p5.setPlatform;var kc;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(kc||(kc={}));class V0 extends Error{constructor(e,t,s){super(e),this.message=e,this.code=t,this.data=s}}const hD=n=>{var e,t;return n!=null&&n.androidBridge?"android":!((t=(e=n==null?void 0:n.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},fD=n=>{var e,t,s,a,o;const c=n.CapacitorCustomPlatform||null,h=n.Capacitor||{},g=h.Plugins=h.Plugins||{},p=n.CapacitorPlatforms,v=()=>c!==null?c.name:hD(n),w=((e=p==null?void 0:p.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||v,E=()=>w()!=="web",T=((t=p==null?void 0:p.currentPlatform)===null||t===void 0?void 0:t.isNativePlatform)||E,k=N=>{const C=te.get(N);return!!(C!=null&&C.platforms.has(w())||O(N))},L=((s=p==null?void 0:p.currentPlatform)===null||s===void 0?void 0:s.isPluginAvailable)||k,I=N=>{var C;return(C=h.PluginHeaders)===null||C===void 0?void 0:C.find(R=>R.name===N)},O=((a=p==null?void 0:p.currentPlatform)===null||a===void 0?void 0:a.getPluginHeader)||I,q=N=>n.console.error(N),G=(N,C,R)=>Promise.reject(`${R} does not have an implementation of "${C}".`),te=new Map,me=(N,C={})=>{const R=te.get(N);if(R)return console.warn(`Capacitor plugin "${N}" already registered. Cannot register plugins twice.`),R.proxy;const B=w(),M=O(N);let z;const D=async()=>(!z&&B in C?z=typeof C[B]=="function"?z=await C[B]():z=C[B]:c!==null&&!z&&"web"in C&&(z=typeof C.web=="function"?z=await C.web():z=C.web),z),Ue=(we,V)=>{var Z,K;if(M){const ne=M==null?void 0:M.methods.find(ce=>V===ce.name);if(ne)return ne.rtype==="promise"?ce=>h.nativePromise(N,V.toString(),ce):(ce,_e)=>h.nativeCallback(N,V.toString(),ce,_e);if(we)return(Z=we[V])===null||Z===void 0?void 0:Z.bind(we)}else{if(we)return(K=we[V])===null||K===void 0?void 0:K.bind(we);throw new V0(`"${N}" plugin is not implemented on ${B}`,kc.Unimplemented)}},re=we=>{let V;const Z=(...K)=>{const ne=D().then(ce=>{const _e=Ue(ce,we);if(_e){const Ae=_e(...K);return V=Ae==null?void 0:Ae.remove,Ae}else throw new V0(`"${N}.${we}()" is not implemented on ${B}`,kc.Unimplemented)});return we==="addListener"&&(ne.remove=async()=>V()),ne};return Z.toString=()=>`${we.toString()}() { [capacitor code] }`,Object.defineProperty(Z,"name",{value:we,writable:!1,configurable:!1}),Z},P=re("addListener"),ie=re("removeListener"),ve=(we,V)=>{const Z=P({eventName:we},V),K=async()=>{const ce=await Z;ie({eventName:we,callbackId:ce},V)},ne=new Promise(ce=>Z.then(()=>ce({remove:K})));return ne.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await K()},ne},Ne=new Proxy({},{get(we,V){switch(V){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return M?ve:P;case"removeListener":return ie;default:return re(V)}}});return g[N]=Ne,te.set(N,{name:N,proxy:Ne,platforms:new Set([...Object.keys(C),...M?[B]:[]])}),Ne},he=((o=p==null?void 0:p.currentPlatform)===null||o===void 0?void 0:o.registerPlugin)||me;return h.convertFileSrc||(h.convertFileSrc=N=>N),h.getPlatform=w,h.handleError=q,h.isNativePlatform=T,h.isPluginAvailable=L,h.pluginMethodNoop=G,h.registerPlugin=he,h.Exception=V0,h.DEBUG=!!h.DEBUG,h.isLoggingEnabled=!!h.isLoggingEnabled,h.platform=h.getPlatform(),h.isNative=h.isNativePlatform(),h},mD=n=>n.Capacitor=fD(n),Ic=mD(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Gv=Ic.registerPlugin;Ic.Plugins;class y5{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){let s=!1;this.listeners[e]||(this.listeners[e]=[],s=!0),this.listeners[e].push(t);const o=this.windowListeners[e];o&&!o.registered&&this.addWindowListener(o),s&&this.sendRetainedArgumentsForEvent(e);const c=async()=>this.removeListener(e,t);return Promise.resolve({remove:c})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,s){const a=this.listeners[e];if(!a){if(s){let o=this.retainedEventArguments[e];o||(o=[]),o.push(t),this.retainedEventArguments[e]=o}return}a.forEach(o=>o(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:s=>{this.notifyListeners(t,s)}}}unimplemented(e="not implemented"){return new Ic.Exception(e,kc.Unimplemented)}unavailable(e="not available"){return new Ic.Exception(e,kc.Unavailable)}async removeListener(e,t){const s=this.listeners[e];if(!s)return;const a=s.indexOf(t);this.listeners[e].splice(a,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(s=>{this.notifyListeners(e,s)}))}}const oE=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),lE=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class gD extends y5{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(s=>{if(s.length<=0)return;let[a,o]=s.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=lE(a).trim(),o=lE(o).trim(),t[a]=o}),t}async setCookie(e){try{const t=oE(e.key),s=oE(e.value),a=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),c=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${s||""}${a}; path=${o}; ${c};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Gv("CapacitorCookies",{web:()=>new gD});const pD=async n=>new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{const a=s.result;e(a.indexOf(",")>=0?a.split(",")[1]:a)},s.onerror=a=>t(a),s.readAsDataURL(n)}),yD=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(a=>a.toLocaleLowerCase()).reduce((a,o,c)=>(a[o]=n[e[c]],a),{})},vD=(n,e=!0)=>n?Object.entries(n).reduce((s,a)=>{const[o,c]=a;let h,g;return Array.isArray(c)?(g="",c.forEach(p=>{h=e?encodeURIComponent(p):p,g+=`${o}=${h}&`}),g.slice(0,-1)):(h=e?encodeURIComponent(c):c,g=`${o}=${h}`),`${s}&${g}`},"").substr(1):null,bD=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),a=yD(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(a.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[c,h]of Object.entries(n.data||{}))o.set(c,h);t.body=o.toString()}else if(a.includes("multipart/form-data")||n.data instanceof FormData){const o=new FormData;if(n.data instanceof FormData)n.data.forEach((h,g)=>{o.append(g,h)});else for(const h of Object.keys(n.data))o.append(h,n.data[h]);t.body=o;const c=new Headers(t.headers);c.delete("content-type"),t.headers=c}else(a.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class wD extends y5{async request(e){const t=bD(e,e.webFetchExtra),s=vD(e.params,e.shouldEncodeUrlParams),a=s?`${e.url}?${s}`:e.url,o=await fetch(a,t),c=o.headers.get("content-type")||"";let{responseType:h="text"}=o.ok?e:{};c.includes("application/json")&&(h="json");let g,p;switch(h){case"arraybuffer":case"blob":p=await o.blob(),g=await pD(p);break;case"json":g=await o.json();break;case"document":case"text":default:g=await o.text()}const v={};return o.headers.forEach((w,E)=>{v[E]=w}),{data:g,headers:v,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Gv("CapacitorHttp",{web:()=>new wD});const Kv=Gv("Preferences",{web:()=>gn(()=>import("./web-PsbNOb4N.js"),[]).then(n=>new n.PreferencesWeb)}),Qv="biometric_credentials",_D=async()=>{if(!Ic.isNativePlatform())return!1;try{return(await g5.isAvailable()).isAvailable}catch{return!1}},xD=async(n,e)=>{try{await Kv.set({key:Qv,value:JSON.stringify({email:n,pass:e})}),console.log("Credentials saved for biometric login.")}catch(t){console.error("Error saving credentials:",t)}},ED=async()=>{const{value:n}=await Kv.get({key:Qv});return!!n},TD=async()=>{try{if(!await _D())throw new Error("Biometric not available");await g5.verifyIdentity({reason:"Chm vn tay  ng nhp",title:"ng nhp",subtitle:"S dng vn tay ca bn",description:"Xc thc  truy cp ti khon  lu"});const{value:t}=await Kv.get({key:Qv});return t?JSON.parse(t):null}catch(n){return console.error("Biometric verification failed:",n),null}},SD=async n=>{const e=n.trim();return e.includes("@")?e:`${e}@gmail.com`},AD=({onBack:n})=>{const[e,t]=F.useState(""),[s,a]=F.useState(""),[o,c]=F.useState(!1),[h,g]=F.useState(null),[p,v]=F.useState(!1),[w,E]=F.useState(!1);F.useEffect(()=>{T()},[]);const T=async()=>{const I=await ED();E(I)},k=async()=>{c(!0),g(null);const I=await TD();if(I)try{await dx(Vo,I.email,I.pass)}catch(O){c(!1),console.error("Bio login failed:",O),g("ng nhp vn tay tht bi (phin ht hn hoc i mt khu).")}else c(!1)},L=async I=>{I.preventDefault(),c(!0),g(null);try{const O=await SD(e);await dx(Vo,O,s),p&&await xD(O,s)}catch(O){console.error("Login failed:",O),O.code==="auth/invalid-email"?g("Tn ng nhp hoc email khng hp l."):O.code==="auth/user-not-found"||O.code==="auth/wrong-password"||O.code==="auth/invalid-credential"?g("Ti khon hoc mt khu khng chnh xc."):g("ng nhp tht bi. Vui lng th li.")}finally{Vo.currentUser||c(!1)}};return d.jsxs("div",{className:"w-full max-w-md mx-auto p-4 animate-slide-in-right",children:[d.jsxs("div",{className:"relative text-center mb-10",children:[d.jsx("button",{onClick:n,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:d.jsx(Dc,{className:"h-10 w-10 text-primary"})}),d.jsx(yc,{className:"h-20 w-20 mx-auto text-primary mb-4"}),d.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"ng nhp"}),d.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Truy cp vo h thng qun l hc tp."})]}),d.jsx("div",{className:"bg-card p-8 rounded-2xl shadow-lg",children:d.jsxs("form",{onSubmit:L,children:[h&&d.jsx("p",{className:"bg-destructive/10 text-destructive p-3 rounded-md mb-4 text-center",children:h}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"account",className:"block text-sm font-medium text-card-foreground mb-2",children:"Ti khon"}),d.jsx("input",{id:"account",type:"text",value:e,onChange:I=>t(I.target.value),placeholder:"Nhp ti khon hoc email",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-colors duration-300",required:!0,autoFocus:!0})]}),d.jsxs("div",{className:"mb-2",children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-card-foreground mb-2",children:"Mt khu"}),d.jsx("input",{id:"password",type:"password",value:s,onChange:I=>a(I.target.value),placeholder:"",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-colors duration-300",required:!0})]}),d.jsxs("div",{className:"mb-6 flex items-center gap-2 cursor-pointer",onClick:()=>v(!p),children:[p?d.jsx(oO,{className:"text-primary text-xl"}):d.jsx(pO,{className:"text-gray-400 text-xl"}),d.jsx("span",{className:"text-sm text-muted-foreground select-none",children:"Ghi nh ng nhp (Vn tay)"})]}),d.jsx("button",{type:"submit",disabled:o,className:"w-full bg-primary text-primary-foreground font-bold py-3 px-6 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 disabled:opacity-50 disabled:cursor-wait mb-4",children:o?"ang x l...":"ng nhp"}),w&&d.jsx("div",{className:"flex justify-center mt-4",children:d.jsxs("button",{type:"button",onClick:k,disabled:o,className:"flex flex-col items-center gap-2 text-primary hover:text-primary/80 transition-colors",children:[d.jsx("div",{className:"p-3 bg-primary/10 rounded-full",children:d.jsx(hO,{className:"text-3xl"})}),d.jsx("span",{className:"text-sm font-medium",children:"ng nhp bng vn tay"})]})})]})})]})},ND=({onBack:n,onSuccess:e})=>{const[t,s]=F.useState(""),[a,o]=F.useState(""),[c,h]=F.useState(""),[g,p]=F.useState(""),[v,w]=F.useState(""),[E,T]=F.useState(""),[k,L]=F.useState(!1),[I,O]=F.useState(null),q=async G=>{if(G.preventDefault(),L(!0),O(null),a.length<6){O("Mt khu phi c t nht 6 k t."),L(!1);return}try{const me=(await ej(Vo,t.trim(),a)).user,he=t.split("@")[0].toLowerCase();await tg(ut(ke,"users",me.uid),{email:me.email,fullName:c.trim(),phoneNumber:v.trim(),birthDate:E,role:"hoc_vien",class:g.trim(),username:he,createdAt:Rd()}),console.log("Registration successful"),e()}catch(te){console.error("Registration failed:",te),te.code==="auth/email-already-in-use"?O("Email ny  c s dng."):te.code==="auth/invalid-email"?O("Email khng hp l."):te.code==="auth/weak-password"?O("Mt khu qu yu."):O("ng k tht bi. Vui lng th li.")}finally{L(!1)}};return d.jsxs("div",{className:"w-full max-w-md mx-auto p-4 animate-slide-in-right",children:[d.jsxs("div",{className:"relative text-center mb-6",children:[d.jsx("button",{onClick:n,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-card/50 p-2 rounded-full shadow-md hover:bg-muted transition-all duration-300",children:d.jsx(Dc,{className:"h-8 w-8 text-primary"})}),d.jsx(yc,{className:"h-16 w-16 mx-auto text-primary mb-2"}),d.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"ng K"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"To ti khon hc vin mi"})]}),d.jsx("div",{className:"bg-card p-6 rounded-2xl shadow-lg",children:d.jsxs("form",{onSubmit:q,className:"space-y-4",children:[I&&d.jsx("p",{className:"bg-destructive/10 text-destructive p-3 rounded-md text-sm text-center",children:I}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"H v Tn *"}),d.jsx("input",{type:"text",value:c,onChange:G=>h(G.target.value),required:!0,className:"w-full px-4 py-2 bg-background border border-border rounded-lg focus:ring-2 focus:ring-primary outline-none",placeholder:"Nguyn Vn A"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"Lp Hc *"}),d.jsx("input",{type:"text",value:g,onChange:G=>p(G.target.value),required:!0,className:"w-full px-4 py-2 bg-background border border-border rounded-lg focus:ring-2 focus:ring-primary outline-none",placeholder:"Nhp tn lp (GV s duyt)"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"Ngy sinh"}),d.jsx("input",{type:"date",value:E,onChange:G=>T(G.target.value),className:"w-full px-4 py-2 bg-background border border-border rounded-lg focus:ring-2 focus:ring-primary outline-none"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"ST"}),d.jsx("input",{type:"tel",value:v,onChange:G=>w(G.target.value),className:"w-full px-4 py-2 bg-background border border-border rounded-lg focus:ring-2 focus:ring-primary outline-none",placeholder:"09..."})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"Email *"}),d.jsx("input",{type:"email",value:t,onChange:G=>s(G.target.value),required:!0,className:"w-full px-4 py-2 bg-background border border-border rounded-lg focus:ring-2 focus:ring-primary outline-none",placeholder:"email@example.com"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"Mt khu *"}),d.jsx("input",{type:"password",value:a,onChange:G=>o(G.target.value),required:!0,className:"w-full px-4 py-2 bg-background border border-border rounded-lg focus:ring-2 focus:ring-primary outline-none",placeholder:"t nht 6 k t"})]}),d.jsx("button",{type:"submit",disabled:k,className:"w-full bg-primary text-primary-foreground font-bold py-3 px-6 rounded-lg hover:bg-primary/90 transition-all duration-300 mt-4 disabled:opacity-50",children:k?"ang to ti khon...":"ng K"})]})})]})},CD=(n,e)=>{const t="h-14 w-14 mx-auto text-primary mb-3 object-contain",s="h-14 w-14 mx-auto mb-3 object-cover rounded-full border-2 border-border/20 shadow-sm",a="h-14 w-14 mx-auto mb-3 object-contain drop-shadow-lg",o=n.name.toLowerCase();if(e==="noel")return o.includes("thuyn trng")?d.jsx("img",{src:"/assets/img/hat.png",alt:"Captain Hat",className:a}):o.includes("my trng")?d.jsx("img",{src:"/assets/img/gift4.png",alt:"Chief Engineer",className:a}):o.includes("thy th")?d.jsx("img",{src:"/assets/img/bell.png",alt:"Sailor",className:a}):o.includes("li phng tin")?d.jsx("img",{src:"/assets/img/tree.png",alt:"Helm",className:a}):o.includes("chng ch")?d.jsx("img",{src:"/assets/img/star-gold.png",alt:"Certificate",className:a}):d.jsx("img",{src:"/assets/img/gift5.png",alt:"Default",className:a});if(e==="tri-an")switch(n.id){case"thuyentruong-h1":return d.jsx("img",{src:"https://i.postimg.cc/Vs76y54F/8.jpg",alt:n.name,className:s});case"thuyentruong-h2":return d.jsx("img",{src:"https://i.postimg.cc/Pf6xGNK4/9.jpg",alt:n.name,className:s});case"thuyentruong-h3":return d.jsx("img",{src:"https://i.postimg.cc/Vs76y54W/7.jpg",alt:n.name,className:s});case"thuythu":return d.jsx(q0,{className:t});case"lai-phuong-tien":return d.jsx(yc,{className:t});case"maytruong-h1":return d.jsx("img",{src:"https://i.postimg.cc/zDpm90H6/undefined.jpg",alt:n.name,className:s});case"maytruong-h2":return d.jsx("img",{src:"https://i.postimg.cc/wMwSLjdc/Teachers-day-background-design-art-illustration.jpg",alt:n.name,className:s});case"maytruong-h3":return d.jsx("img",{src:"https://i.postimg.cc/NFdWmjwH/Hinh-thiep.jpg",alt:n.name,className:s});case"thomay":return d.jsx("img",{src:"https://i.postimg.cc/cJYy2WQN/hinh-nen-3.jpg",alt:n.name,className:s});case"caotoc":return d.jsx("img",{src:"https://i.postimg.cc/dQWMQybn/5.jpg",alt:n.name,className:s});case"ven-bien":return d.jsx("img",{src:"https://i.postimg.cc/zDdmDgs0/6.jpg",alt:n.name,className:s});case"antoan-ven-bien":return d.jsx("img",{src:"https://i.postimg.cc/ZYFWdtv0/BOARD.webp",alt:n.name,className:s});case"antoan-xang-dau":return d.jsx("img",{src:"https://i.postimg.cc/T2k82Dzc/4.jpg",alt:n.name,className:s});case"antoan-hoa-chat":return d.jsx("img",{src:"https://i.postimg.cc/mZVx08Ff/World-Teacher-s-Day-Flowers-Border-Pink.jpg",alt:n.name,className:s});default:return o.includes("chng ch")?d.jsx($2,{className:t}):d.jsx(q2,{className:t})}return o.includes("thuyn trng")?d.jsx(f3,{className:t}):o.includes("my trng")?d.jsx(h3,{className:t}):o.includes("thy th")?d.jsx(q0,{className:t}):o.includes("li phng tin")?d.jsx(yc,{className:t}):o.includes("chng ch")?d.jsx($2,{className:t}):d.jsx(q2,{className:t})},kD=({licenses:n,onSelect:e,onBack:t})=>{const{theme:s}=Fn();return d.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right",children:[d.jsxs("div",{className:"relative text-center mb-10",children:[d.jsx("button",{onClick:t,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:d.jsx(Dc,{className:"h-10 w-10 text-primary"})}),s==="noel"?d.jsx("img",{src:"/assets/img/tree.png",alt:"Tree",className:"h-20 w-20 mx-auto mb-4 object-contain drop-shadow-lg"}):d.jsx(q0,{className:"h-20 w-20 mx-auto text-primary mb-4"}),d.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Chn Hng Bng"}),d.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Anh/ch vui lng chn hng bng mun n tp v thi th."})]}),d.jsx("div",{className:"bg-card p-6 rounded-2xl shadow-lg",children:d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:n.map(a=>{const o=a.subjects.reduce((c,h)=>c+h.questions.length,0);return d.jsxs("button",{onClick:()=>e(a),className:"group w-full p-4 bg-background rounded-lg text-center hover:bg-primary/10 transition-all duration-300 transform hover:scale-105 focus:ring-4 focus:ring-ring focus:outline-none",children:[CD(a,s),d.jsx("h3",{className:"text-md font-bold text-primary",children:a.name}),d.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[a.subjects.length," mn - ",o," cu"]})]},a.id)})})})]})},ID=({onNameSubmit:n,onBack:e})=>{const[t,s]=F.useState(""),a=o=>{o.preventDefault();const c=t.trim();n(c||"Hc vin")};return d.jsxs("div",{className:"w-full max-w-md mx-auto p-4 animate-slide-in-right",children:[d.jsxs("div",{className:"text-center mb-10",children:[d.jsx(u3,{className:"h-20 w-20 mx-auto text-primary mb-4"}),d.jsxs("div",{className:"relative flex justify-center items-center",children:[d.jsx("div",{className:"absolute left-0",children:d.jsx("button",{onClick:e,className:"bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:d.jsx(Dc,{className:"h-10 w-10 text-primary"})})}),d.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Thng tin ca anh/ch"})]}),d.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Nhp tn  ti c th lu li tin  hc tp cho anh/ch."})]}),d.jsx("div",{className:"bg-card p-8 rounded-2xl shadow-lg",children:d.jsxs("form",{onSubmit:a,children:[d.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-card-foreground mb-2",children:"Tn ca anh/ch"}),d.jsx("input",{id:"name",type:"text",value:t,onChange:o=>s(o.target.value),placeholder:"V d: Nguyn Vn A (c th b trng)",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-colors duration-300",autoFocus:!0}),d.jsx("button",{type:"submit",className:"mt-6 w-full bg-primary text-primary-foreground font-bold py-3 px-6 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300",children:"Xc nhn"})]})})]})},RD=({onModeSelect:n,licenseName:e,userName:t,onSwitchLicense:s})=>d.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right",children:[d.jsxs("div",{className:"relative text-center mb-10",children:[d.jsx("div",{className:"absolute right-0 top-0",children:d.jsxs("button",{onClick:s,className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground hover:text-primary transition-all duration-300 py-1 px-2 rounded-md hover:bg-secondary",title:"Chn li hng bng",children:[d.jsx(d3,{className:"h-4 w-4"}),d.jsx("span",{children:"Chn li hng bng"})]})}),d.jsxs("h1",{className:"text-4xl font-bold text-foreground",children:["Cho anh/ch ",t,"!"]}),d.jsxs("p",{className:"text-lg text-muted-foreground mt-2",children:["Anh/ch ang hc hng bng ",d.jsx("span",{className:"font-semibold text-primary",children:e}),"."]}),d.jsx("p",{className:"text-lg text-muted-foreground mt-1",children:"Hy chn mt ch   bt u."})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("button",{onClick:()=>n("practice"),className:"group bg-card text-card-foreground p-8 rounded-2xl shadow-lg text-center hover:bg-primary/10 transition-all duration-300 transform hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-ring",children:[d.jsx(By,{className:"h-16 w-16 mx-auto text-primary mb-4 transition-transform group-hover:scale-110"}),d.jsx("h2",{className:"text-2xl font-bold text-card-foreground",children:"n tp"}),d.jsx("p",{className:"text-muted-foreground mt-2",children:"Luyn tp tng mn  nm vng kin thc."})]}),d.jsxs("button",{onClick:()=>n("online_exam"),className:"group bg-card text-card-foreground p-8 rounded-2xl shadow-lg text-center hover:bg-destructive/10 transition-all duration-300 transform hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-ring",children:[d.jsx(m3,{className:"h-16 w-16 mx-auto text-destructive mb-4 transition-transform group-hover:scale-110"}),d.jsx("h2",{className:"text-2xl font-bold text-card-foreground",children:"Thi th"}),d.jsx("p",{className:"text-muted-foreground mt-2",children:"Lm bi thi 30 cu ngu nhin trong 45 pht."})]})]})]}),cE=n=>{if(!n)return"";const e=new Date(n),t=e.getDate().toString().padStart(2,"0"),s=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getHours().toString().padStart(2,"0"),o=e.getMinutes().toString().padStart(2,"0");return`(${t}/${s} ${a}:${o})`},jD=({subjects:n,progress:e,onSelect:t,onBack:s})=>d.jsxs("div",{className:"w-full max-w-2xl mx-auto p-4 animate-slide-in-right",children:[d.jsxs("div",{className:"relative text-center mb-10",children:[d.jsx("button",{onClick:s,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:d.jsx(Dc,{className:"h-10 w-10 text-primary"})}),d.jsx(By,{className:"h-20 w-20 mx-auto text-primary mb-4"}),d.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Chn Mn hc"}),d.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Chn mt mn  bt u n tp."})]}),d.jsx("div",{className:"bg-card p-6 rounded-2xl shadow-lg",children:d.jsx("div",{className:"space-y-3",children:n.map(a=>{const o=e[a.id],c=o&&o.lastScore!==null;return d.jsxs("button",{onClick:()=>t(a),className:"w-full flex items-center justify-between p-5 bg-background rounded-lg text-left hover:bg-primary/10 transition-all duration-300 transform hover:scale-[1.02] focus:ring-4 focus:ring-ring focus:outline-none",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-bold text-primary",children:a.name}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.questions.length," cu hi"]})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[c&&d.jsxs("div",{className:"text-right text-sm",children:[d.jsxs("p",{className:"text-muted-foreground flex items-center justify-end",children:[d.jsx("span",{children:"Ln cui:"}),d.jsxs("span",{className:"font-semibold text-primary ml-1",children:[o.lastScore,"/",a.questions.length]}),o.lastScoreTimestamp&&d.jsx("span",{className:"ml-1.5 text-xs text-muted-foreground/80",children:cE(o.lastScoreTimestamp)})]}),d.jsxs("p",{className:"text-muted-foreground flex items-center justify-end mt-0.5",children:[d.jsx("span",{children:"Cao nht:"}),d.jsxs("span",{className:"font-semibold text-success ml-1",children:[o.highScore,"/",a.questions.length]}),o.highScoreTimestamp&&d.jsx("span",{className:"ml-1.5 text-xs text-muted-foreground/80",children:cE(o.highScoreTimestamp)})]})]}),d.jsx(c3,{className:"h-6 w-6 text-muted-foreground"})]})]},a.id)})})})]}),OD=({quiz:n,onFinish:e,onBack:t,initialIndex:s=0,initialAnswers:a={},onProgressUpdate:o})=>{const[c,h]=F.useState(s),[g,p]=F.useState(a);if(!n.questions||n.questions.length===0)return d.jsxs("div",{className:"w-full max-w-3xl mx-auto p-4 text-center",children:[d.jsx("h2",{className:"text-xl font-bold mb-4",children:"Cha c cu hi no trong ch  ny."}),d.jsx("button",{onClick:t,className:"bg-primary text-primary-foreground hover:bg-primary/90 py-2 px-4 rounded-lg",children:"Quay li"})]});const v=F.useMemo(()=>n.questions[c],[n.questions,c]);if(!v)return d.jsxs("div",{className:"w-full max-w-3xl mx-auto p-4 text-center",children:[d.jsx("h2",{className:"text-xl font-bold mb-4",children:"C li xy ra khi ti cu hi."}),d.jsx("button",{onClick:t,className:"bg-primary text-primary-foreground py-2 px-4 rounded-lg",children:"Quay li"})]});const w=F.useMemo(()=>g[v.id]!==void 0,[g,v.id]),E=F.useMemo(()=>g[v.id]||null,[g,v.id]);F.useEffect(()=>{o==null||o(c,0,g)},[c,g]);const T=()=>{e(g)},k=O=>{w||p(q=>({...q,[v.id]:O}))},L=()=>{c===n.questions.length-1?T():h(q=>q+1)},I=c/n.questions.length*100;return d.jsx("div",{className:"w-full max-w-3xl mx-auto p-4 md:p-6 animate-slide-in-right font-quiz-default",children:d.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-6 md:p-8",children:[d.jsxs("div",{className:"mb-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4 relative",children:[d.jsx("button",{onClick:t,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-background/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-card transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:d.jsx(Dc,{className:"h-10 w-10"})}),d.jsx("h1",{className:"text-xl font-bold text-foreground text-center flex-grow",children:n.title}),d.jsx("button",{onClick:T,className:"bg-secondary text-secondary-foreground hover:bg-secondary/80 text-sm font-bold py-2 px-4 rounded-lg transition-colors duration-300",children:"Kt thc"})]}),d.jsx("div",{className:"w-full bg-secondary rounded-full h-2.5 mb-2",children:d.jsx("div",{className:"bg-primary h-2.5 rounded-full transition-all duration-500",style:{width:`${I}%`}})}),d.jsx("div",{className:"flex justify-between items-center text-sm text-muted-foreground",children:d.jsxs("span",{children:["Cu ",c+1," / ",n.questions.length]})})]}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-5 text-foreground",children:v.text}),v.image&&d.jsx("div",{className:"mb-6 rounded-lg overflow-hidden",children:d.jsx("img",{src:v.image,alt:"Cu hi",className:"w-full h-auto object-cover max-h-80"})}),d.jsx("div",{className:"space-y-3",children:v.answers.map(O=>{const q=E===O.id;let G="w-full text-left p-4 rounded-lg border-2 transition-all duration-300 flex items-center justify-between text-lg";const te=O.id===v.correctAnswerId;return w?te?G+=" bg-success/10 border-success text-success":q&&!te?G+=" bg-destructive/10 border-destructive text-destructive":G+=" border-border text-muted-foreground":q?G+=" bg-primary/10 border-primary ring-2 ring-primary text-primary-foreground":G+=" bg-background hover:bg-muted border-border text-foreground",d.jsxs("button",{onClick:()=>k(O.id),disabled:w,className:G,children:[d.jsx("span",{className:"flex-grow",children:O.text}),w&&d.jsxs(d.Fragment,{children:[te&&d.jsx(Vy,{className:"h-6 w-6 text-success ml-3"}),q&&!te&&d.jsx(Uy,{className:"h-6 w-6 text-destructive ml-3"})]})]},O.id)})}),d.jsx("div",{className:"mt-8",children:d.jsx("div",{className:"text-right",children:w?d.jsx("button",{onClick:L,className:"bg-success text-success-foreground font-bold py-3 px-8 rounded-lg hover:bg-success/90 transition-all duration-300 animate-slide-in-right",children:c===n.questions.length-1?"Hon thnh":"Cu tip theo"}):d.jsx("div",{className:"h-[48px]"})})})]})]})})},DD=n=>{const e=Math.floor(n/60),t=n%60;return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},PD=({checked:n,onChange:e})=>d.jsx("div",{onClick:e,className:`w-[14px] h-[14px] border border-[#999] inline-block cursor-pointer bg-white relative ${n?"bg-[#333]":""}`,children:n&&d.jsx("div",{className:"absolute top-[2px] left-[2px] w-[8px] h-[8px] bg-[#333]"})}),LD=({quiz:n,onFinish:e,onBack:t,userName:s,selectedLicense:a,initialIndex:o=0,initialAnswers:c={},initialTime:h,onProgressUpdate:g})=>{const[p,v]=F.useState(o),[w,E]=F.useState(c),[T,k]=F.useState(h!==void 0?h:n.timeLimit??3600),L=F.useMemo(()=>n.questions[p],[n.questions,p]),I=F.useRef(w);F.useEffect(()=>{I.current=w,g==null||g(p,T,w)},[w]),F.useEffect(()=>{g==null||g(p,T,w)},[p]),F.useEffect(()=>{T%5===0&&(g==null||g(p,T,w))},[T]);const O=()=>{window.confirm("Anh/ch c chc chn mun thot khi bi thi khng? Mi tin trnh s b mt.")&&t()},q=F.useCallback(()=>{const me=I.current,he=n.questions.length-Object.keys(me).length,N=he>0?`Anh/ch vn cn ${he} cu cha tr li. Anh/ch c chc chn mun np bi khng?`:"Anh/ch  hon thnh tt c cc cu hi. Anh/ch c mun np bi khng?";window.confirm(N)&&e(me)},[n.questions.length,e]),G=F.useRef(e);F.useEffect(()=>{G.current=e},[e]),F.useEffect(()=>{const me=setInterval(()=>{k(he=>he>0?he-1:0)},1e3);return()=>clearInterval(me)},[]),F.useEffect(()=>{T===0&&(alert(" ht gi lm bi! H thng s t ng np bi ca anh/ch."),G.current(I.current))},[T]);const te=(me,he)=>{E(N=>({...N,[me]:he}))};return d.jsxs("div",{className:"w-full max-w-7xl mx-auto font-sans text-black shadow-lg animate-slide-in-right rounded-md",children:[d.jsx("div",{className:"h-3 bg-yellow-700 rounded-t-md border-b-2 border-yellow-900"}),d.jsxs("div",{className:"bg-white p-4",children:[d.jsxs("div",{className:"flex justify-between items-start pb-4 border-b border-gray-300",children:[d.jsxs("div",{className:"flex gap-4 items-center",children:[d.jsx("img",{src:"https://i.postimg.cc/8PDn1wfM/favicon.png",alt:"Avatar",className:"w-20 h-[100px] border border-gray-300 object-contain p-1"}),d.jsxs("div",{className:"text-sm",children:[d.jsx("p",{children:"S bo danh:"}),d.jsx("p",{children:"Ngy sinh:"}),d.jsxs("p",{className:"mt-2",children:["H tn: ",d.jsx("span",{className:"font-bold text-blue-700",children:s||"Hc vin"})]}),d.jsxs("p",{children:["Hng bng: ",d.jsx("span",{className:"font-bold text-blue-700",children:(a==null?void 0:a.name)||"Thuyn trng hng ba - T3"})]})]})]}),d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsxs("div",{className:"bg-[#f0ad4e] text-black p-2 rounded-md text-sm w-48",children:[d.jsx("p",{className:"font-bold",children:"ang thi"}),d.jsx("p",{children:"Thi gian: 45 pht"}),d.jsx("p",{children:"B gi: 0 pht"}),d.jsxs("p",{children:["Cn li: ",d.jsx("span",{className:"font-bold",children:DD(T)})]})]}),d.jsx("button",{onClick:O,className:"text-sm text-gray-600 hover:text-red-500 font-semibold",children:"Thot"})]})]}),d.jsxs("div",{className:"flex mt-4 gap-4",children:[d.jsxs("div",{className:"flex-1 border border-gray-400 rounded-md p-4 flex flex-col justify-between min-h-[500px]",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-bold mb-4 border-b border-dashed border-gray-400 pb-2",children:"Ni dung cu hi"}),d.jsxs("p",{className:"font-bold text-red-600 mb-2",children:["Cu :",p+1]}),d.jsx("p",{className:"mb-4 font-semibold",children:L.text}),L.image&&d.jsx("div",{className:"mb-4 flex justify-start",children:d.jsx("img",{src:L.image,alt:"Hnh nh cu hi",className:"max-w-full h-auto max-h-60 object-contain border border-gray-300 rounded-md"})}),d.jsx("div",{className:"space-y-4",children:L.answers.map((me,he)=>d.jsxs("div",{className:"flex items-start",children:[d.jsxs("span",{className:"font-bold mr-2 text-gray-700 min-w-[20px]",children:[String.fromCharCode(65+he),"."]}),d.jsx("p",{children:me.text})]},me.id))})]}),d.jsxs("div",{className:"flex justify-center gap-4 mt-8",children:[d.jsxs("button",{onClick:()=>v(me=>Math.max(0,me-1)),disabled:p===0,className:"bg-[#f0ad4e] text-black px-4 py-2 rounded-md border border-gray-400 flex items-center font-semibold hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-5 h-5",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),"Tr li"]}),p<n.questions.length-1&&d.jsxs("button",{onClick:()=>v(me=>Math.min(n.questions.length-1,me+1)),className:"bg-[#f0ad4e] text-black px-4 py-2 rounded-md border border-gray-400 flex items-center font-semibold hover:bg-yellow-500 transition-colors",children:["Tip tc",d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-5 h-5",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})]})]})]}),d.jsxs("div",{className:"w-[200px] flex-none flex flex-col",children:[d.jsx("div",{className:"border border-gray-300 rounded-md",children:d.jsxs("table",{className:"w-full border-collapse text-xs",children:[d.jsx("thead",{className:"sticky top-0 bg-[#f0ad4e] z-10",children:d.jsxs("tr",{children:[d.jsx("th",{className:"border border-gray-400 p-2",children:"Cu"}),d.jsx("th",{className:"border border-gray-400 p-2",children:"a"}),d.jsx("th",{className:"border border-gray-400 p-2",children:"b"}),d.jsx("th",{className:"border border-gray-400 p-2",children:"c"}),d.jsx("th",{className:"border border-gray-400 p-2",children:"d"})]})}),d.jsx("tbody",{children:n.questions.map((me,he)=>d.jsxs("tr",{className:p===he?"bg-cyan-200":"hover:bg-gray-50",children:[d.jsxs("td",{className:`border border-gray-400 p-2 font-bold text-center cursor-pointer whitespace-nowrap ${p===he?"text-black":"text-gray-500"}`,onClick:()=>v(he),children:["Cu ",he+1]}),me.answers.slice(0,4).map(N=>d.jsx("td",{className:"border border-gray-400 p-2 text-center",children:d.jsx(PD,{checked:w[me.id]===N.id,onChange:()=>te(me.id,N.id)})},N.id))]},me.id))})]})}),d.jsx("div",{className:"text-center mt-4 pt-2 border-t border-gray-200",children:d.jsx("button",{onClick:q,className:"bg-[#337ab7] text-white px-8 py-2 rounded-md font-semibold hover:bg-blue-700 transition-colors w-full",children:"Np bi"})})]})]}),d.jsxs("div",{className:"mt-4 bg-[#005a9c] text-white p-4 rounded-b-md flex items-center gap-4 text-xs",children:[d.jsx("img",{src:"https://i.postimg.cc/8PDn1wfM/favicon.png",alt:"Logo",className:"h-16 w-16 object-contain"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-bold",children:"CNG TY C PHN T VN V GIO DC NINH BNH"}),d.jsx("p",{children:"a ch: ng Triu Vit Vng, phng Hoa L, tnh Ninh Bnh "})]})]})]})]})},MD=({quiz:n,userAnswers:e,score:t,onRetry:s,onBack:a,userName:o})=>{const[c,h]=F.useState("all"),[g]=F.useState(()=>new Date),p=n.questions.length,v=t>=25,w=F.useMemo(()=>new Intl.DateTimeFormat("vi-VN",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit",year:"numeric"}).format(g),[g]),E=F.useMemo(()=>c==="incorrect"?n.questions.filter(T=>e[T.id]!==T.correctAnswerId):n.questions,[c,n.questions,e]);return d.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right font-quiz-default",children:[d.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8 text-center mb-8",children:[d.jsx(CE,{className:"h-24 w-24 mx-auto text-yellow-400 mb-4"}),d.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Kt qu Thi th"}),d.jsxs("div",{className:"my-4 text-muted-foreground",children:[d.jsxs("p",{className:"text-lg",children:["Th sinh: ",d.jsx("span",{className:"font-bold text-primary",children:o})]}),d.jsxs("p",{className:"text-sm",children:["Hon thnh lc: ",w]})]}),d.jsx("p",{className:`text-2xl font-bold mb-6 ${v?"text-success":"text-destructive"}`,children:v?"Chc mng, anh/ch  T!":"Rt tic, anh/ch KHNG T."}),d.jsxs("div",{className:`inline-block p-6 rounded-xl border ${v?"bg-success/10 border-success/20":"bg-destructive/10 border-destructive/20"}`,children:[d.jsxs("p",{className:`text-5xl font-extrabold ${v?"text-success":"text-destructive"}`,children:[t," / ",p]}),d.jsx("p",{className:"text-lg text-muted-foreground mt-1",children:"S cu ng"})]})]}),d.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Xem li bi lm"}),d.jsxs("div",{className:"flex items-center gap-2 mt-4 sm:mt-0",children:[d.jsx("button",{onClick:()=>h("all"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${c==="all"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:"Tt c"}),d.jsxs("button",{onClick:()=>h("incorrect"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${c==="incorrect"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:["Ch cu sai (",n.questions.length-t,")"]})]})]}),d.jsx("div",{className:"space-y-6 max-h-[50vh] overflow-y-auto pr-2",children:E.length>0?E.map((T,k)=>{const L=e[T.id],I=T.correctAnswerId;return d.jsxs("div",{className:"p-4 border-b border-border last:border-b-0",children:[d.jsxs("p",{className:"font-semibold text-lg mb-3 text-foreground",children:[d.jsxs("span",{className:"mr-2",children:["Cu ",n.questions.findIndex(O=>O.id===T.id)+1,":"]}),T.text]}),d.jsx("div",{className:"space-y-2",children:T.answers.map(O=>{const q=O.id===L,G=O.id===I;let te="flex items-center p-3 rounded-md text-sm ";return G?te+="bg-success/10 text-success":q?te+="bg-destructive/10 text-destructive":te+="bg-muted/50 text-muted-foreground",d.jsxs("div",{className:te,children:[G?d.jsx(Vy,{className:"h-5 w-5 mr-3 text-success"}):q?d.jsx(Uy,{className:"h-5 w-5 mr-3 text-destructive"}):d.jsx("div",{className:"w-5 h-5 mr-3"}),d.jsx("span",{children:O.text})]},O.id)})})]},T.id)}):d.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Tuyt vi! Anh/ch  tr li ng tt c cc cu hi."})})]}),d.jsxs("div",{className:"text-center mt-8 flex flex-col sm:flex-row justify-center items-center gap-4",children:[d.jsx("button",{onClick:a,className:"w-full sm:w-auto bg-primary text-primary-foreground font-bold py-3 px-8 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105",children:"Quay li"}),d.jsx("button",{onClick:s,className:"w-full sm:w-auto bg-secondary text-secondary-foreground font-bold py-3 px-8 rounded-lg hover:bg-muted focus:outline-none focus:ring-4 focus:ring-ring transition-colors duration-300",children:"Lm li bi thi"})]})]})},VD=({quiz:n,userAnswers:e,score:t,onRetry:s,onBack:a,userName:o})=>{const[c,h]=F.useState("all"),[g]=F.useState(()=>new Date),p=n.questions.length,v=p>0?Math.round(t/p*100):0,w=F.useMemo(()=>new Intl.DateTimeFormat("vi-VN",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit",year:"numeric"}).format(g),[g]),E=F.useMemo(()=>c==="incorrect"?n.questions.filter(T=>e[T.id]!==T.correctAnswerId):n.questions,[c,n.questions,e]);return d.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right font-quiz-default",children:[d.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8 text-center mb-8",children:[d.jsx(CE,{className:"h-24 w-24 mx-auto text-yellow-400 mb-4"}),d.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Kt qu n tp"}),d.jsxs("div",{className:"my-4 text-muted-foreground",children:[d.jsxs("p",{className:"text-lg",children:["Hc vin: ",d.jsx("span",{className:"font-bold text-primary",children:o})]}),d.jsxs("p",{className:"text-sm",children:["Hon thnh lc: ",w]})]}),d.jsxs("div",{className:"bg-primary/10 inline-block p-6 rounded-xl border border-primary/20 mt-4",children:[d.jsxs("p",{className:"text-5xl font-extrabold text-primary",children:[t," / ",p]}),d.jsxs("p",{className:"text-2xl font-semibold text-primary/80 mt-1",children:["(",v,"%)"]})]})]}),d.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Xem li bi lm"}),d.jsxs("div",{className:"flex items-center gap-2 mt-4 sm:mt-0",children:[d.jsx("button",{onClick:()=>h("all"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${c==="all"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:"Tt c"}),d.jsxs("button",{onClick:()=>h("incorrect"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${c==="incorrect"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:["Ch cu sai (",n.questions.length-t,")"]})]})]}),d.jsx("div",{className:"space-y-6 max-h-[50vh] overflow-y-auto pr-2",children:E.length>0?E.map((T,k)=>{const L=e[T.id],I=T.correctAnswerId;return d.jsxs("div",{className:"p-4 border-b border-border last:border-b-0",children:[d.jsxs("p",{className:"font-semibold text-lg mb-3 text-foreground",children:[d.jsxs("span",{className:"mr-2",children:["Cu ",n.questions.findIndex(O=>O.id===T.id)+1,":"]}),T.text]}),d.jsx("div",{className:"space-y-2",children:T.answers.map(O=>{const q=O.id===L,G=O.id===I;let te="flex items-center p-3 rounded-md text-sm ";return G?te+="bg-success/10 text-success":q?te+="bg-destructive/10 text-destructive":te+="bg-muted/50 text-muted-foreground",d.jsxs("div",{className:te,children:[G?d.jsx(Vy,{className:"h-5 w-5 mr-3 text-success"}):q?d.jsx(Uy,{className:"h-5 w-5 mr-3 text-destructive"}):d.jsx("div",{className:"w-5 h-5 mr-3"}),d.jsx("span",{children:O.text})]},O.id)})})]},T.id)}):d.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Tuyt vi! Anh/ch  tr li ng tt c cc cu hi."})})]}),d.jsxs("div",{className:"text-center mt-8 flex flex-col sm:flex-row justify-center items-center gap-4",children:[d.jsx("button",{onClick:a,className:"w-full sm:w-auto bg-primary text-primary-foreground font-bold py-3 px-8 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105",children:"Cc mn khc"}),d.jsx("button",{onClick:s,className:"w-full sm:w-auto bg-secondary text-secondary-foreground font-bold py-3 px-8 rounded-lg hover:bg-muted focus:outline-none focus:ring-4 focus:ring-ring transition-colors duration-300",children:"Lm li"})]})]})},UD="_card_ns310_3",BD="_header_ns310_45",zD="_logoPlaceholder_ns310_69",HD="_schoolName_ns310_97",qD="_body_ns310_113",$D="_cardTitle_ns310_135",FD="_contentRow_ns310_157",GD="_photoSection_ns310_169",KD="_photoWrapper_ns310_179",QD="_avatar_ns310_195",WD="_infoSection_ns310_209",YD="_infoRow_ns310_229",XD="_label_ns310_239",JD="_value_ns310_255",ZD="_valueHighlight_ns310_265",eP="_footer_ns310_281",tP="_barcode_ns310_299",bt={card:UD,header:BD,logoPlaceholder:zD,schoolName:HD,body:qD,cardTitle:$D,contentRow:FD,photoSection:GD,photoWrapper:KD,avatar:QD,infoSection:WD,infoRow:YD,label:XD,value:JD,valueHighlight:ZD,footer:eP,barcode:tP},nP=({user:n})=>{const e=n.role!=="hoc_vien",t=e?"TH GIO VIN":"TH HC VIN",s=e?{background:"linear-gradient(135deg, #b91c1c 0%, #c2410c 100%)",borderBottom:"4px solid #fcd34d"}:{},a=e?{color:"#b91c1c",textShadow:"0px 1px 2px rgba(0,0,0,0.1)"}:{};return d.jsxs("div",{className:bt.card,style:e?{borderColor:"#fcd34d",boxShadow:"0 10px 25px -5px rgba(234, 88, 12, 0.3)"}:{},children:[d.jsxs("div",{className:bt.header,style:s,children:[d.jsx("div",{className:bt.logoPlaceholder,style:e?{color:"#fbbf24",background:"rgba(255,255,255,0.2)"}:{},children:d.jsx(yO,{size:20})}),d.jsxs("div",{className:bt.schoolName,style:e?{color:"#fff",fontWeight:"800"}:{},children:["Cng ty C phn",d.jsx("br",{}),"T VN V GIO DC NINH BNH"]})]}),d.jsxs("div",{className:bt.body,children:[d.jsx("h2",{className:bt.cardTitle,style:a,children:t}),d.jsxs("div",{className:bt.contentRow,children:[d.jsx("div",{className:bt.photoSection,children:d.jsx("div",{className:bt.photoWrapper,style:e?{borderColor:"#fcd34d"}:{},children:d.jsx("img",{src:n.photoURL||"https://via.placeholder.com/150",alt:"Avatar",className:bt.avatar})})}),d.jsxs("div",{className:bt.infoSection,children:[d.jsxs("div",{className:bt.infoRow,children:[d.jsx("span",{className:bt.label,children:"H tn:"}),d.jsxs("span",{className:`${bt.value} ${bt.valueHighlight}`,style:e?{color:"#b91c1c"}:{},children:[n.full_name||"---",n.isVerified&&d.jsx("span",{style:{marginLeft:"4px",color:"#22c55e",display:"inline-flex",alignItems:"center"},children:d.jsx(Ac,{size:14})})]})]}),d.jsxs("div",{className:bt.infoRow,children:[d.jsx("span",{className:bt.label,children:"Ngy sinh: "}),d.jsxs("span",{className:bt.value,children:[" ",n.birthDate||" --/--/----"]})]}),e?d.jsxs("div",{className:bt.infoRow,children:[d.jsx("span",{className:bt.label,children:"Phng: "}),d.jsx("span",{className:bt.value,style:{fontWeight:"bold"},children:" Phng o to - T vn hnh my tu thy"})]}):d.jsxs("div",{className:bt.infoRow,children:[d.jsx("span",{className:bt.label,children:"Lp hc: "}),d.jsx("span",{className:bt.value,children:n.courseName||"Cha vo kha"})]}),d.jsxs("div",{className:bt.infoRow,children:[d.jsx("span",{className:bt.label,children:"a ch:"}),d.jsx("span",{className:bt.value,style:{fontSize:"0.9rem"},children:n.address||"---"})]})]})]})]}),d.jsxs("div",{className:bt.footer,style:e?{background:"#fef2f2",borderTop:"1px dashed #fca5a5"}:{},children:[d.jsx("div",{className:bt.barcode,style:e?{opacity:.8}:{}}),d.jsxs("div",{style:{position:"absolute",bottom:"5px",fontSize:"0.6rem",color:e?"#991b1b":"#718096"},children:["ID: ",n.id?n.id.substring(0,10).toUpperCase():"---"]})]})]})},sP=({isOpen:n,onClose:e,notifications:t,userId:s,onMarkRead:a})=>{if(!n)return null;const o=async(c,h)=>{c.stopPropagation(),confirm("Bn c mun xa thng bo ny?")&&await Q8(h.id,s)};return d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 animate-fade-in",onClick:e,children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[80vh]",onClick:c=>c.stopPropagation(),children:[d.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-slate-700 flex justify-between items-center bg-gradient-to-r from-blue-500 to-indigo-600 text-white",children:[d.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[d.jsx(pd,{})," Hp th thng bo"]}),d.jsx("button",{onClick:e,className:"hover:bg-white/20 p-2 rounded-full transition-colors",children:d.jsx(Po,{})})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50 dark:bg-slate-900/50",children:t.length===0?d.jsxs("div",{className:"text-center py-10 text-gray-400",children:[d.jsx(dO,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),d.jsx("p",{children:"Cha c thng bo no."})]}):t.map(c=>{var g,p;const h=((g=c.readBy)==null?void 0:g.includes(s))||c.read;return d.jsxs("div",{onClick:()=>a(c.id),className:`p-4 rounded-xl border transition-all cursor-pointer relative overflow-hidden group
                                        ${h?"bg-white dark:bg-slate-800 border-gray-200 dark:border-slate-700 opacity-60":"bg-white dark:bg-slate-800 border-blue-200 dark:border-blue-500/50 shadow-md transform hover:-translate-y-1"}
                                    `,children:[!h&&d.jsx("div",{className:"absolute top-0 right-0 w-3 h-3 bg-red-500 rounded-full m-2 animate-pulse"}),d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("div",{className:`p-2 rounded-full flex-shrink-0 
                                            ${c.type==="special"?"bg-red-100 text-red-600 animate-pulse":c.type==="attention"?"bg-orange-100 text-orange-600":c.type==="system"?"bg-blue-100 text-blue-600":c.type==="class"?"bg-indigo-100 text-indigo-600":c.type==="reminder"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}
                                        `,children:d.jsx(pd,{size:14})}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("h3",{className:`font-bold text-sm mb-1 ${h?"text-gray-600 dark:text-gray-400":"text-gray-900 dark:text-white"}`,children:[c.title,(c.type==="special"||c.type==="attention")&&d.jsx("span",{className:"ml-2 text-[10px] uppercase border px-1 rounded bg-red-50 text-red-500 border-red-200",children:"Quan trng"})]}),d.jsx("p",{className:"text-xs text-gray-500 mb-2 line-clamp-3",children:c.message}),d.jsxs("div",{className:"flex justify-between items-center text-[10px] text-gray-400",children:[d.jsx("span",{children:c.senderName}),d.jsx("span",{children:(p=c.createdAt)!=null&&p.seconds?new Date(c.createdAt.seconds*1e3).toLocaleDateString("vi-VN"):"Va xong"})]})]}),d.jsx("button",{onClick:v=>o(v,c),className:"p-2 text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"Xa thng bo",children:d.jsx(Lo,{size:12})})]})]},c.id)})})]})})},rP=({notification:n,userId:e,onDismiss:t,onOpenInbox:s})=>{const[a,o]=F.useState(!1);return F.useEffect(()=>{if(n&&!n.readBy.includes(e)&&(o(!0),n.type!=="system")){const c=setTimeout(()=>o(!1),8e3);return()=>clearTimeout(c)}},[n,e]),!n||!a?null:d.jsx("div",{className:"fixed top-20 right-4 z-40 max-w-sm w-full animate-slide-in-right cursor-pointer",onClick:s,children:d.jsxs("div",{className:`rounded-xl shadow-2xl border-l-4 p-4 flex items-start gap-3 relative overflow-hidden backdrop-blur-md bg-white/90 dark:bg-slate-800/90
                ${n.type==="system"?"border-red-500":"border-blue-500"}
            `,children:[d.jsx("button",{onClick:c=>{c.stopPropagation(),o(!1),t()},className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600 p-1",children:d.jsx(Po,{size:12})}),d.jsx("div",{className:`p-2 rounded-full ${n.type==="system"?"bg-red-100 text-red-600":"bg-blue-100 text-blue-600"}`,children:d.jsx(pd,{})}),d.jsxs("div",{className:"flex-1 pr-6",children:[d.jsx("h4",{className:"font-bold text-sm text-gray-900 dark:text-white mb-1",children:n.title}),d.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 line-clamp-2",children:n.message}),d.jsx("p",{className:"text-[10px] text-gray-400 mt-2",children:"Nhn  xem chi tit"})]})]})})},iP=({userProfile:n,onStart:e,onHistoryClick:t,onClassClick:s})=>{const{theme:a}=Fn(),[o,c]=F.useState([]),[h,g]=F.useState(!1),[p,v]=F.useState(0),[w,E]=F.useState(null);F.useEffect(()=>{(async()=>{if(n!=null&&n.id){const L=await K8(n.id,n.class);c(L);const I=L.filter(O=>!O.read);v(I.length),I.length>0&&E(I[0])}})()},[n]);const T=k=>{c(L=>L.map(I=>I.id===k?{...I,read:!0,readBy:[...I.readBy||[],n.id]}:I)),v(L=>Math.max(0,L-1)),(w==null?void 0:w.id)===k&&E(null)};return d.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-slide-in-right",children:d.jsxs("div",{className:"w-full max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("div",{className:"w-full flex justify-end mb-4 md:mb-0 relative md:absolute md:top-4 md:right-4 gap-2",children:d.jsxs("button",{onClick:()=>g(!0),className:"bg-white/80 dark:bg-slate-800/80 p-3 rounded-full shadow-lg hover:scale-110 transition-transform relative",children:[d.jsx(pd,{className:"text-xl text-yellow-500"}),p>0&&d.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center animate-bounce",children:p})]})}),d.jsx(nP,{user:n})]}),d.jsx(sP,{isOpen:h,onClose:()=>g(!1),notifications:o,userId:n.id,onMarkRead:T}),d.jsx(rP,{notification:w,userId:n.id,onDismiss:()=>E(null),onOpenInbox:()=>g(!0)}),d.jsxs("div",{className:"bg-card/90 backdrop-blur-sm p-8 rounded-2xl shadow-xl border border-border",children:[d.jsxs("h1",{className:"text-3xl font-bold text-primary mb-6 text-center",children:["Xin cho, ",n.full_name||"Hc vin","!"]}),d.jsx("p",{className:"text-muted-foreground text-center mb-8",children:"Chc bn c mt bui n tp hiu qu v t kt qu cao."}),d.jsx("div",{className:"space-y-4",children:d.jsxs("button",{onClick:e,className:"w-full bg-primary text-primary-foreground font-bold text-lg py-4 px-6 rounded-xl hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-3 shadow-lg",children:[d.jsx(By,{className:"w-8 h-8"}),d.jsx("span",{children:"Vo n Tp / Thi Th"})]})})]})]})})},ym=async n=>{try{const e=Ut(At(ke,"exam_results"),un("studentId","==",n));return(await pn(e)).docs.map(a=>{const o=a.data(),c=o.submitted_at||o.completedAt,h=c?c.toDate():new Date;return{id:a.id,...o,userId:o.studentId,completedAt:h}}).sort((a,o)=>o.completedAt.getTime()-a.completedAt.getTime())}catch(e){return console.error("Error fetching exam history:",e),[]}},aP=({userProfile:n,onBack:e})=>{const[t,s]=F.useState([]),[a,o]=F.useState(!0),[c,h]=F.useState({});F.useEffect(()=>{(async()=>{const E=await ym(n.id);E.sort((k,L)=>L.completedAt.getTime()-k.completedAt.getTime()),s(E),o(!1);const T=Array.from(new Set(E.filter(k=>k.roomId).map(k=>k.roomId)));if(T.length>0){const k={};await Promise.all(T.map(async L=>{try{const{doc:I,getDoc:O}=await gn(async()=>{const{doc:te,getDoc:me}=await Promise.resolve().then(()=>fd);return{doc:te,getDoc:me}},void 0),{db:q}=await gn(async()=>{const{db:te}=await Promise.resolve().then(()=>G8);return{db:te}},void 0),G=await O(I(q,"exam_rooms",L));G.exists()&&(k[L]=G.data())}catch(I){console.error(`Error fetching room ${L}`,I)}})),h(k)}})()},[n.id]);const g=w=>w.roomId?"Thi Trc Tuyn":w.quizId==="exam-quiz"||w.quizId==="thithu2"||w.type==="Thi th"?"Thi th":"n tp",p=w=>{switch(w){case"Thi Trc Tuyn":return"bg-red-100 text-red-800 border-red-200";case"Thi th":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}},v=w=>{if(w.roomId&&c[w.roomId]){const E=c[w.roomId];return`Phng thi ${E.name} / ${E.course_name||"T do"} / ${E.license_name||""}`}return w.quizTitle||(w.roomId?`Phng thi ${w.roomId}`:w.type)};return d.jsxs("div",{className:"w-full max-w-5xl mx-auto p-4 animate-slide-in-right",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("h1",{className:"text-2xl font-bold text-foreground flex items-center gap-2",children:[d.jsx(hc,{className:"text-primary"}),"Lch s n tp & Thi"]}),d.jsx("button",{onClick:e,className:"bg-secondary text-secondary-foreground px-4 py-2 rounded-lg hover:bg-secondary/80 transition-colors shadow-sm",children:"Quay li"})]}),a?d.jsx("div",{className:"text-center p-8",children:d.jsx("p",{className:"text-muted-foreground",children:"ang ti d liu..."})}):t.length===0?d.jsx("div",{className:"text-center p-8 bg-card rounded-xl shadow-sm border border-border",children:d.jsx("p",{className:"text-muted-foreground",children:"Cha c lch s lm bi no."})}):d.jsx("div",{className:"bg-white dark:bg-card rounded-xl shadow-sm border border-border overflow-hidden",children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-left border-collapse",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"bg-muted/50 border-b border-border text-xs uppercase text-muted-foreground",children:[d.jsx("th",{className:"p-4 font-semibold",children:"Loi"}),d.jsx("th",{className:"p-4 font-semibold",children:"Bi thi"}),d.jsx("th",{className:"p-4 font-semibold text-center",children:"im s"}),d.jsx("th",{className:"p-4 font-semibold",children:"Gi np"})," ",d.jsx("th",{className:"p-4 font-semibold",children:"Ngy np"})]})}),d.jsx("tbody",{className:"divide-y divide-border",children:t.map(w=>{const E=g(w);return d.jsxs("tr",{className:"hover:bg-muted/30 transition-colors",children:[d.jsx("td",{className:"p-4 align-middle",children:d.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium border ${p(E)}`,children:E})}),d.jsx("td",{className:"p-4 align-middle font-medium text-foreground",children:v(w)}),d.jsxs("td",{className:"p-4 align-middle text-center",children:[d.jsx("span",{className:"font-bold text-primary",children:w.score}),d.jsxs("span",{className:"text-muted-foreground text-sm",children:[" / ",w.totalQuestions]})]}),d.jsx("td",{className:"p-4 align-middle text-sm",children:new Date(w.completedAt).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})}),d.jsx("td",{className:"p-4 align-middle text-sm text-muted-foreground",children:new Date(w.completedAt).toLocaleDateString("vi-VN")})]},w.id)})})]})})})]})},oP=n=>{if(!n)return"Thnh vin";const e=n.toLowerCase().trim();return{admin:"Qun tr vin",quan_ly:"Qun l",lanh_dao:"Lnh o",giao_vien:"Gio vin",hoc_vien:"Hc vin",phu_huynh:"Ph huynh"}[e]||n},lP=({userProfile:n,onBack:e})=>{const[t,s]=F.useState(null),[a,o]=F.useState([]),[c,h]=F.useState([]),[g,p]=F.useState(!0),[v,w]=F.useState("grid"),[E,T]=F.useState({}),[k,L]=F.useState("");return F.useEffect(()=>{let I,O,q;return(async()=>{if(!n.id)return;const te=ut(ke,"users",n.id),me=await Va(te);if(!me.exists()){p(!1);return}const N=me.data().courseId;if(!N){p(!1);return}const C=ut(ke,"courses",N);I=lc(C,R=>{if(R.exists()){const B={id:R.id,...R.data()};if(s(B),B.licenseId&&gn(async()=>{const{fetchLicenses:M}=await Promise.resolve().then(()=>pA);return{fetchLicenses:M}},void 0).then(({fetchLicenses:M})=>{M().then(z=>{const D=z.find(Ue=>Ue.id===B.licenseId);D&&L(D.name)})}),O&&O(),B.teacherIds&&B.teacherIds.length>0)try{const M=[...new Set(B.teacherIds.filter(z=>z&&z.trim()!==""))].slice(0,10);if(M.length>0){const z=Ut(At(ke,"users"),un(Gm(),"in",M));O=lc(z,D=>{o(D.docs.map(Ue=>{const re=Ue.data();return{uid:Ue.id,...re,photoURL:re.photoURL||Ua(re.role)}}))})}else o([])}catch(M){console.error("Error creating teacher query:",M),o([])}else o([]);if(q)p(!1);else{const M=Ut(At(ke,"users"),un("courseId","==",N),un("role","==","hoc_vien"));q=lc(M,async z=>{const D=z.docs.map(re=>{const P=re.data();return{uid:re.id,...P,photoURL:P.photoURL||Ua(P.role)}});h(D);const Ue={};await Promise.all(D.map(async re=>{try{const P=await ym(re.uid);if(P&&P.length>0){const ie=P[0];Ue[re.uid]={type:ie.quizTitle||ie.type||"Bi thi",time:ie.completedAt?ie.completedAt.toLocaleString("vi-VN"):"--",score:`${ie.score}/${ie.totalQuestions} cu`}}else Ue[re.uid]={type:"--",time:"--",score:"--"}}catch(P){console.error(`Error fetching history for ${re.uid}`,P),Ue[re.uid]={type:"Li",time:"--",score:"--"}}})),T(Ue),p(!1)})}}else s(null),p(!1)})})(),()=>{I&&I(),O&&O(),q&&q()}},[n.id]),g?d.jsx("div",{className:"flex justify-center items-center h-screen",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600"})}):t?d.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 animate-slide-in-right",children:[d.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[d.jsxs("div",{children:[d.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-sm text-gray-500 hover:text-blue-600 mb-2 transition-colors font-medium",children:[d.jsx(nd,{})," Quay li Dashboard"]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-2 rounded-lg",children:d.jsx(Ea,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-cyan-500",children:t.name}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-0.5",children:t.description||"Cha c m t"}),k&&d.jsxs("div",{className:"mt-2 inline-flex items-center gap-1.5 bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-xs font-bold border border-yellow-200",children:[d.jsx(lm,{}),d.jsxs("span",{children:["Chng ch: ",k]})]})]})]})]}),d.jsxs("div",{className:"flex gap-4",children:[d.jsxs("div",{className:"bg-white dark:bg-slate-800 px-4 py-2 rounded-xl shadow-sm border border-gray-100 dark:border-slate-700 flex items-center gap-3",children:[d.jsx("div",{className:"bg-green-100 p-2 rounded-full text-green-600",children:d.jsx(fc,{})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-gray-500",children:"Gio vin"}),d.jsx("p",{className:"font-bold text-lg",children:a.length})]})]}),d.jsxs("div",{className:"bg-white dark:bg-slate-800 px-4 py-2 rounded-xl shadow-sm border border-gray-100 dark:border-slate-700 flex items-center gap-3",children:[d.jsx("div",{className:"bg-blue-100 p-2 rounded-full text-blue-600",children:d.jsx(yd,{})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-gray-500",children:"Hc vin"}),d.jsx("p",{className:"font-bold text-lg",children:c.length})]})]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[d.jsx("div",{className:"lg:col-span-1 space-y-6",children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-slate-700 p-5 sticky top-20",children:[d.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2 text-gray-800 dark:text-white border-b pb-3 border-gray-100 dark:border-slate-700",children:[d.jsx(fc,{className:"text-green-500"})," i ng Gio vin"]}),d.jsxs("div",{className:"space-y-3",children:[a.map(I=>d.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 dark:hover:bg-slate-700/50 rounded-lg transition-colors group cursor-pointer",children:[d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:I.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(I.fullName)}&background=random`,alt:I.fullName,className:"w-10 h-10 rounded-full object-cover border border-gray-200 dark:border-slate-600 group-hover:scale-105 transition-transform"}),t.headTeacherId===I.uid&&d.jsx("div",{className:"absolute -top-1 -right-1 bg-yellow-400 text-white rounded-full p-0.5 border-2 border-white",children:d.jsx(lm,{size:10})})]}),d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-gray-100 truncate",children:I.fullName}),d.jsx("p",{className:"text-[11px] text-gray-400",children:oP(I.role)}),t.headTeacherId===I.uid&&d.jsx("span",{className:"inline-flex items-center text-[10px] font-bold text-yellow-600",children:" GV Ch Nhim"})]})]},I.uid)),a.length===0&&d.jsx("p",{className:"text-sm text-gray-500 italic text-center py-4",children:"Cha c thng tin gio vin."})]})]})}),d.jsx("div",{className:"lg:col-span-3",children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-slate-700 p-6 min-h-[500px]",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[d.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-700 rounded-lg p-1",children:[d.jsx("button",{onClick:()=>w("grid"),className:`p-1.5 rounded ${v==="grid"?"bg-white dark:bg-slate-600 shadow text-blue-600":"text-gray-500 hover:text-blue-500"}`,title:"Dng li",children:d.jsx(bS,{})}),d.jsx("button",{onClick:()=>w("list"),className:`p-1.5 rounded ${v==="list"?"bg-white dark:bg-slate-600 shadow text-blue-600":"text-gray-500 hover:text-blue-500"}`,title:"Dng danh sch",children:d.jsx(yS,{})})]}),d.jsxs("span",{className:"text-sm px-2 py-0.5 bg-blue-100 text-blue-700 rounded-full font-medium",children:[c.length," thnh vin"]})]}),c.length===0?d.jsxs("div",{className:"text-center py-20 flex flex-col items-center",children:[d.jsx("div",{className:"bg-gray-100 dark:bg-slate-700 p-6 rounded-full mb-4",children:d.jsx(yd,{className:"text-gray-300 w-12 h-12"})}),d.jsx("p",{className:"text-gray-500 font-medium",children:"Lp cha c hc vin no khc."})]}):v==="grid"?d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-5",children:c.map(I=>d.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/30 rounded-xl p-4 border border-gray-100 dark:border-slate-700 hover:shadow-md hover:border-blue-200 dark:hover:border-blue-500/30 transition-all duration-300 group relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-bl from-blue-100 to-transparent -mr-8 -mt-8 rounded-full opacity-50 group-hover:scale-150 transition-transform"}),d.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:I.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(I.fullName)}&background=random`,alt:I.fullName,className:"w-14 h-14 rounded-full object-cover border-2 border-white dark:border-slate-600 shadow-sm group-hover:border-blue-500 transition-colors"}),d.jsx("div",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 bg-green-500 border-2 border-white rounded-full"})]}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h4",{className:"font-bold text-gray-900 dark:text-gray-100 truncate group-hover:text-blue-600 transition-colors text-base",children:I.fullName}),d.jsxs("div",{className:"space-y-1.5 mt-2",children:[d.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1.5 bg-white dark:bg-slate-800 px-2 py-1 rounded border border-gray-100 dark:border-slate-600 w-fit",children:[d.jsx("span",{children:""})," ",I.birthDate||"--/--"]}),d.jsxs("p",{className:"text-xs text-gray-500 truncate flex items-center gap-1.5",title:I.address,children:[d.jsx("span",{children:""})," ",I.address||"Cha cp nht"]})]}),I.uid===n.id&&d.jsx("div",{className:"mt-2",children:d.jsx("span",{className:"text-[10px] font-bold text-teal-600 bg-teal-50 border border-teal-100 px-2 py-0.5 rounded-full",children:"L ti"})})]})]})]},I.uid))}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-sm text-left",children:[d.jsx("thead",{className:"text-xs text-gray-500 uppercase bg-gray-50 dark:bg-slate-700 dark:text-gray-300",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 rounded-l-lg",children:"Hc vin"}),d.jsx("th",{className:"px-4 py-3",children:"Ngy sinh"}),d.jsx("th",{className:"px-4 py-3",children:"Bi lm gn nht"}),d.jsx("th",{className:"px-4 py-3",children:"Thi gian"}),d.jsx("th",{className:"px-4 py-3 rounded-r-lg",children:"im"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-700",children:c.map(I=>{const O=E[I.uid]||{type:"--",time:"--",score:"--"};return d.jsxs("tr",{className:"bg-white dark:bg-slate-800 hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors",children:[d.jsxs("td",{className:"px-4 py-3 font-medium text-gray-900 dark:text-white flex items-center gap-3",children:[d.jsx("img",{src:I.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(I.fullName)}`,className:"w-8 h-8 rounded-full border border-gray-200"}),d.jsxs("div",{children:[d.jsx("p",{children:I.fullName}),I.uid===n.id&&d.jsx("span",{className:"text-[10px] font-bold text-teal-600 border border-teal-100 bg-teal-50 px-1 rounded",children:"Ti"})]})]}),d.jsx("td",{className:"px-4 py-3 text-gray-500",children:I.birthDate||"--"}),d.jsx("td",{className:"px-4 py-3",children:d.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold
                                                        ${O.type.includes("n")?"bg-blue-100 text-blue-700":O.type.includes("Th")?"bg-purple-100 text-purple-700":O.type==="--"?"bg-gray-100 text-gray-500":"bg-red-100 text-red-700"}`,children:O.type})}),d.jsx("td",{className:"px-4 py-3 text-gray-500",children:O.time}),d.jsx("td",{className:"px-4 py-3 font-bold text-teal-600",children:O.score})]},I.uid)})})]})})]})})]})]}):d.jsxs("div",{className:"w-full max-w-5xl mx-auto p-4 animate-slide-in-right",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3 bg-clip-text text-transparent bg-gradient-to-r from-teal-600 to-emerald-600",children:[d.jsx(Ea,{className:"text-teal-600"})," Lp Ca Ti"]}),d.jsx("button",{onClick:e,className:"bg-gray-200 dark:bg-slate-700 text-gray-800 dark:text-gray-200 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-slate-600 transition-colors",children:"Quay li"})]}),d.jsx("div",{className:"text-center p-12 bg-white dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 shadow-sm",children:d.jsx("p",{className:"text-gray-500",children:"Bn cha c phn lp."})})]})};var No=SE();const cP=n=>{switch(n){case"admin":return"Qun tr vin";case"lanh_dao":return"Lnh o";case"quan_ly":return"Qun l";case"giao_vien":return"Gio vin";case"hoc_vien":return"Hc vin";default:return n}},U0=n=>n==="admin"?10:n==="lanh_dao"?5:n==="quan_ly"?2:n==="giao_vien"?1:0,zr=n=>(n||"").toLowerCase(),uP=({userProfile:n,onBack:e})=>{var Mi,Vi;const[t,s]=F.useState([]),[a,o]=F.useState(null),[c,h]=F.useState(!0),[g,p]=F.useState({}),[v,w]=F.useState(!0),[E,T]=F.useState([]),[k,L]=F.useState([]),[I,O]=F.useState([]),[q,G]=F.useState([]),[te,me]=F.useState({}),[he,N]=F.useState(!1),[C,R]=F.useState(!1),[B,M]=F.useState(""),[z,D]=F.useState(""),[Ue,re]=F.useState(!1),[P,ie]=F.useState(!1),[ve,Ne]=F.useState(!1),[we,V]=F.useState(null),[Z,K]=F.useState([]),[ne,ce]=F.useState(!1),[_e,Ae]=F.useState({}),[We,ot]=F.useState(!1),[ze,wt]=F.useState(null),[Rn,ms]=F.useState(!1),[rt,jn]=F.useState(!1),[er,Sr]=F.useState(!1),[Ri,Mt]=F.useState(""),[Ht,tr]=F.useState(""),[Ga,sl]=F.useState(!1),[En,Os]=F.useState(!1),[nr,Ka]=F.useState(null),[sr,rl]=F.useState(""),[Qa,Wa]=F.useState(""),[rr,gs]=F.useState("system"),[Qt,es]=F.useState(""),[Dt,Ya]=F.useState(!1),[Ar,Xa]=F.useState("list"),[On,ei]=F.useState([]),[pt,Ds]=F.useState(null),[Ps,Gn]=F.useState(!1),[ir,il]=F.useState(null),[Kn,Nr]=F.useState(""),[ji,Cr]=F.useState(""),[Ls,Oi]=F.useState(""),[kr,Ms]=F.useState(""),Ja=U0(n.role)>=2,Qn=["admin","quan_ly","lanh_dao","giao_vien"].includes(n.role),ps=U0(n.role)>=2,qt=U0(n.role)>=2,nn=j=>j.roomId?"Thi Trc Tuyn":j.quizId==="exam-quiz"||j.quizId==="thithu2"||j.type==="Thi th"||j.quizTitle&&j.quizTitle.includes("Thi th")?"Thi th":"n tp",Vs=j=>{switch(j){case"Thi Trc Tuyn":return"bg-red-100 text-red-800 border-red-200";case"Thi th":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}},Di=j=>{if(j.roomId&&_e[j.roomId]){const fe=_e[j.roomId];return`Phng thi ${fe.name} / ${fe.course_name||"T do"} / ${fe.license_name||""}`}return j.quizTitle||(j.roomId?`Phng thi ${j.roomId}`:j.type)};F.useEffect(()=>{(async()=>{try{const fe=Ut(At(ke,"courses")),Re=(await pn(fe)).docs.map(_t=>({id:_t.id,..._t.data()}));s(Re);const pe=new Set(Re.map(_t=>_t.headTeacherId).filter(Boolean)),Be={};for(const _t of Array.from(pe))if(_t)try{const Ft=await Va(ut(ke,"users",_t));Ft.exists()&&(Be[_t]=Ft.data().fullName)}catch{}p(Be)}catch(fe){console.error(fe)}finally{h(!1)}})(),gn(async()=>{const{fetchLicenses:fe}=await Promise.resolve().then(()=>pA);return{fetchLicenses:fe}},void 0).then(({fetchLicenses:fe})=>{fe().then(ei).catch(console.error)})},[n]),F.useEffect(()=>{if(!a)return;let j,fe;if(a.teacherIds&&a.teacherIds.length>0)try{const Re=[...new Set(a.teacherIds.filter(pe=>pe&&pe.trim()!==""))].slice(0,10);if(Re.length>0){const pe=Ut(At(ke,"users"),un(Gm(),"in",Re));j=lc(pe,Be=>{L(Be.docs.map(_t=>{const Ft=_t.data();return{uid:_t.id,...Ft,photoURL:Ft.photoURL||Ua(Ft.role)}}))})}else L([])}catch(Re){console.error("Teacher fetch error:",Re),L([])}else L([]);const Ie=Ut(At(ke,"users"),un("courseId","==",a.id));return fe=lc(Ie,async Re=>{const pe=Re.docs.map(_t=>{const Ft=_t.data();return{uid:_t.id,...Ft,photoURL:Ft.photoURL||Ua(Ft.role)}});T(pe);const Be={};await Promise.all(pe.map(async _t=>{try{const Ft=await ym(_t.uid);if(Ft&&Ft.length>0){const Ye=Ft[0];Be[_t.uid]={type:Ye.quizTitle||Ye.type||"Bi thi",time:Ye.completedAt?Ye.completedAt.toLocaleString("vi-VN"):"--",score:`${Ye.score}/${Ye.totalQuestions} cu`,rawDate:Ye.completedAt}}else Be[_t.uid]={type:"--",time:"--",score:"--"}}catch{Be[_t.uid]={type:"Li",time:"--",score:"--"}}})),me(Be)}),()=>{j&&j(),fe&&fe()}},[a]),F.useEffect(()=>{he&&(async()=>{const fe=Ut(At(ke,"users"),un("role","in",["hoc_vien"])),Re=(await pn(fe)).docs.map(pe=>({uid:pe.id,...pe.data()}));O(Re.filter(pe=>pe.courseId!==(a==null?void 0:a.id)||!pe.courseId))})()},[he,a]),F.useEffect(()=>{C&&(async()=>{const fe=Ut(At(ke,"users"),un("role","in",["giao_vien","admin","quan_ly","lanh_dao"])),Re=(await pn(fe)).docs.map(pe=>({uid:pe.id,...pe.data()}));G(Re.filter(pe=>!((a==null?void 0:a.teacherIds)||[]).includes(pe.uid)))})()},[C,a]),F.useEffect(()=>{ve&&we&&(ce(!0),(async()=>{const fe=await ym(we.uid);fe.sort((Re,pe)=>pe.completedAt.getTime()-Re.completedAt.getTime()),K(fe);const Ie=Array.from(new Set(fe.filter(Re=>Re.roomId).map(Re=>Re.roomId)));if(Ie.length>0){const Re={};await Promise.all(Ie.map(async pe=>{try{const Be=await Va(ut(ke,"exam_rooms",pe));Be.exists()&&(Re[pe]=Be.data())}catch{}})),Ae(Re)}ce(!1)})())},[ve,we]);const Wc=async j=>{j.preventDefault();try{await hd(At(ke,"courses"),{name:Ri,description:Ht,teacherIds:[],createdAt:Rd(),createdBy:n.id,licenseId:kr}),Sr(!1),Mt(""),tr(""),Ms(""),window.location.reload()}catch(fe){console.error(fe)}},al=async j=>{if(j.preventDefault(),!!ir)try{if(await ds(ut(ke,"courses",ir.id),{name:Kn,description:ji,licenseId:Ls}),ir.licenseId!==Ls){const fe=Ut(At(ke,"users"),un("courseId","==",ir.id)),Re=(await pn(fe)).docs.map(pe=>ds(ut(ke,"users",pe.id),{defaultLicenseId:Ls||null}));await Promise.all(Re)}alert("Cp nht lp hc thnh cng!"),s(fe=>fe.map(Ie=>Ie.id===ir.id?{...Ie,name:Kn,description:ji,licenseId:Ls}:Ie)),(a==null?void 0:a.id)===ir.id&&o(fe=>fe?{...fe,name:Kn,description:ji,licenseId:Ls}:null),Gn(!1)}catch(fe){console.error(fe),alert("Li khi cp nht lp.")}},ol=async j=>{if(confirm("Bn c chc chn mun xa lp ny? Hnh ng ny khng th hon tc!"))try{const fe=Ut(At(ke,"users"),un("courseId","==",j)),Re=(await pn(fe)).docs.map(pe=>ds(ut(ke,"users",pe.id),{courseId:null,courseName:null,class:null,isVerified:!1}));await Promise.all(Re),await gn(async()=>{const{deleteDoc:pe}=await Promise.resolve().then(()=>fd);return{deleteDoc:pe}},void 0).then(({deleteDoc:pe})=>pe(ut(ke,"courses",j))),s(pe=>pe.filter(Be=>Be.id!==j)),alert(" xa lp hc!"),(a==null?void 0:a.id)===j&&o(null)}catch(fe){console.error(fe),alert("Li khi xa lp.")}},Us=(j,fe)=>{fe.stopPropagation(),il(j),Nr(j.name),Cr(j.description||""),Oi(j.licenseId||""),Gn(!0)},Pi=async j=>{if(!a)return;const fe=I.find(Ie=>Ie.uid===j);if(fe&&fe.courseId){alert(`Hc vin ny ang hc lp ${fe.courseName||fe.courseId}. Vui lng xa khi lp c trc khi thm vo lp mi.`);return}re(!0);try{await ds(ut(ke,"users",j),{courseId:a.id,courseName:a.name,defaultLicenseId:a.licenseId||null}),O(Ie=>Ie.filter(Re=>Re.uid!==j)),alert(` thm hc vin vo lp ${a.name}`)}catch(Ie){console.error(Ie),alert("Li khi thm hc vin.")}finally{re(!1)}},Bs=async j=>{if(a){ie(!0);try{const fe=ut(ke,"courses",a.id);await ds(fe,{teacherIds:T4(j),...Ga?{headTeacherId:j}:{}}),G(Ie=>Ie.filter(Re=>Re.uid!==j)),Ga&&o(Ie=>Ie?{...Ie,headTeacherId:j}:null),o(Ie=>Ie?{...Ie,teacherIds:[...Ie.teacherIds||[],j]}:null)}catch(fe){console.error(fe)}finally{ie(!1)}}},ts=async j=>{if(a&&confirm("Bn c chc chn xo gio vin ny khi lp?"))try{const fe=ut(ke,"courses",a.id);await ds(fe,{teacherIds:S4(j),...a.headTeacherId===j?{headTeacherId:null}:{}}),o(Ie=>Ie?{...Ie,teacherIds:(Ie.teacherIds||[]).filter(Re=>Re!==j),headTeacherId:Ie.headTeacherId===j?void 0:Ie.headTeacherId}:null)}catch(fe){console.error("Error removing teacher:",fe)}},Dn=async j=>{if(confirm("Bn c chc chn mun xa hc vin ny khi lp?"))try{await ds(ut(ke,"users",j),{courseId:null,courseName:null,class:null,isVerified:!1})}catch(fe){console.error(fe)}},ns=(j,fe,Ie)=>{Ka({type:j,id:fe,name:Ie}),rl(""),Wa(""),Os(!0)},$t=async j=>{if(j.preventDefault(),!(!nr||!n.id)){Ya(!0);try{const fe=Qt?new Date(Qt):null,Ie=rr==="special"||rr==="attention",Re=Ie?"all":nr.type,pe=Ie?null:nr.id;await dS(sr,Qa,rr,Re,pe,n.id,n.full_name,fe),alert("Gi thng bo thnh cng!"),Os(!1)}catch(fe){console.error(fe),alert("Li khi gi thng bo. C th thiu Index Firestore.")}finally{Ya(!1)}}},Za=async()=>{if(ze){ms(!0);try{const j=fe=>fe===void 0?null:fe;await ds(ut(ke,"users",ze.uid),{fullName:j(ze.fullName),birthDate:j(ze.birthDate),email:j(ze.email),phoneNumber:j(ze.phoneNumber),address:j(ze.address),cccd:j(ze.cccd),cccdDate:j(ze.cccdDate),cccdPlace:j(ze.cccdPlace),class:j(ze.class),courseCode:j(ze.courseCode),role:j(ze.role)}),alert(" cp nht thng tin hc vin!"),ot(!1),jn(!1)}catch(j){console.error("Error updating user:",j),alert("Li khi cp nht thng tin.")}finally{ms(!1)}}},Li=Js.useMemo(()=>pt?[...E].sort((j,fe)=>{const Ie=te[j.uid]||{type:"",time:"",score:""},Re=te[fe.uid]||{type:"",time:"",score:""};let pe="",Be="";switch(pt.key){case"fullName":pe=j.fullName||"",Be=fe.fullName||"";break;case"birthDate":pe=j.birthDate?new Date(j.birthDate.split("/").reverse().join("-")).getTime():0,isNaN(pe)&&(pe=j.birthDate||""),Be=fe.birthDate?new Date(fe.birthDate.split("/").reverse().join("-")).getTime():0,isNaN(Be)&&(Be=fe.birthDate||"");break;case"recentExam":pe=Ie.type||"",Be=Re.type||"";break;case"time":pe=Ie.time||"",Be=Re.time||"";break;case"score":pe=Ie.score?parseInt(Ie.score.toString().split("/")[0]):-1,Be=Re.score?parseInt(Re.score.toString().split("/")[0]):-1,isNaN(pe)&&(pe=-1),isNaN(Be)&&(Be=-1);break;default:return 0}return pe<Be?pt.direction==="asc"?-1:1:pe>Be?pt.direction==="asc"?1:-1:0}):E,[E,pt,te]),Pn=j=>{Ds(fe=>fe&&fe.key===j?{key:j,direction:fe.direction==="asc"?"desc":"asc"}:{key:j,direction:"asc"})},Ln=j=>!pt||pt.key!==j?d.jsx(gO,{className:"ml-1 text-gray-300 inline"}):pt.direction==="asc"?d.jsx(mO,{className:"ml-1 text-blue-600 inline"}):d.jsx(fO,{className:"ml-1 text-blue-600 inline"});return a?d.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 animate-slide-in-right relative",children:[d.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 rounded-2xl p-6 mb-8 text-white shadow-lg relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20",children:d.jsx(Ea,{className:"w-32 h-32 transform rotate-12"})}),d.jsxs("div",{className:"relative z-10",children:[d.jsxs("button",{onClick:e,className:"absolute top-0 left-0 bg-white/20 hover:bg-white/30 text-white px-3 py-1 rounded text-sm transition flex items-center gap-1 backdrop-blur-sm",children:[d.jsx(nd,{})," Quay li Dashboard"]}),d.jsxs("div",{className:"mt-8",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[d.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-md",children:d.jsx(yy,{className:"w-8 h-8"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold",children:a.name}),d.jsx("p",{className:"opacity-90",children:a.description||"Cha c m t"})]})]}),a.licenseId&&d.jsxs("div",{className:"inline-flex items-center gap-2 bg-yellow-400 text-black px-3 py-1 rounded-full text-sm font-bold shadow-sm mt-2",children:[d.jsx(lm,{}),((Mi=On.find(j=>j.id===a.licenseId))==null?void 0:Mi.name)||a.licenseId]})]})]})]}),he&&No.createPortal(d.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 p-4",onClick:()=>N(!1),children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl p-6 h-[80vh] flex flex-col relative",onClick:j=>j.stopPropagation(),children:[d.jsx("button",{onClick:()=>N(!1),className:"absolute top-4 right-4 bg-gray-100 dark:bg-slate-700 p-2 rounded-full border border-gray-200 dark:border-slate-600",children:d.jsx(Po,{})}),d.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[d.jsxs("span",{className:"text-gray-800 dark:text-white",children:["Thm Hc Vin vo ",a.name]}),a.licenseId&&d.jsxs("span",{className:"text-xs px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full border border-yellow-200",children:["Hng: ",((Vi=On.find(j=>j.id===a.licenseId))==null?void 0:Vi.name)||a.licenseId]})]}),d.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[d.jsxs("div",{className:"relative flex-1",children:[d.jsx(vy,{className:"absolute left-3 top-3 text-gray-400"}),d.jsx("input",{className:"w-full pl-10 pr-4 py-2 border rounded-lg dark:bg-slate-700 focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Tm kim tn, email, st...",value:B,onChange:j=>M(j.target.value)})]}),d.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 dark:bg-blue-900/30 rounded-lg border border-blue-100 dark:border-blue-800 px-4 cursor-pointer",onClick:()=>w(!v),children:[d.jsx("input",{type:"checkbox",checked:v,onChange:j=>w(j.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),d.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-200 cursor-pointer select-none",children:"Ch hin hc vin cha c lp"})]})]}),d.jsxs("div",{className:"grid grid-cols-12 gap-2 text-xs font-bold text-gray-500 uppercase px-3 pb-2 border-b border-gray-100 dark:border-slate-700",children:[d.jsx("div",{className:"col-span-4",children:"Hc vin"}),d.jsx("div",{className:"col-span-2",children:"Ngy sinh/ST"}),d.jsx("div",{className:"col-span-3",children:"a ch/Qu qun"}),d.jsx("div",{className:"col-span-2",children:"Lp hin ti"}),d.jsx("div",{className:"col-span-1 text-center",children:"Thao tc"})]}),d.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2 mt-2",children:I.filter(j=>{const fe=zr(j.fullName).includes(zr(B))||zr(j.email).includes(zr(B))||zr(j.phoneNumber).includes(zr(B)),Ie=v?!j.courseId:!0;return fe&&Ie}).map(j=>d.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center p-3 bg-gray-50 dark:bg-slate-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-700 transition border border-transparent hover:border-gray-200 dark:hover:border-slate-600",children:[d.jsxs("div",{className:"col-span-4 flex items-center gap-3 overflow-hidden",children:[d.jsx("img",{src:j.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(j.fullName)}`,className:"w-10 h-10 rounded-full border border-gray-200 flex-shrink-0"}),d.jsxs("div",{className:"min-w-0",children:[d.jsx("p",{className:"font-bold text-sm truncate text-gray-900 dark:text-white",title:j.fullName,children:j.fullName}),d.jsx("p",{className:"text-xs text-gray-500 truncate",title:j.email,children:j.email})]})]}),d.jsxs("div",{className:"col-span-2 text-sm text-gray-700 dark:text-gray-300",children:[d.jsx("div",{className:"text-xs text-gray-500",children:j.birthDate||"--/--/----"}),d.jsx("div",{className:"font-medium",children:j.phoneNumber||"---"})]}),d.jsx("div",{className:"col-span-3 text-sm text-gray-700 dark:text-gray-300",children:d.jsx("p",{className:"line-clamp-2 text-xs",title:j.address||j.cccdPlace,children:j.address||j.cccdPlace||"---"})}),d.jsx("div",{className:"col-span-2 text-sm",children:j.courseName?d.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-md text-xs font-semibold border border-yellow-200 truncate block text-center",title:j.courseName,children:j.courseName}):d.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-md text-xs font-semibold border border-green-200 block text-center",children:"Cha c"})}),d.jsx("div",{className:"col-span-1 flex justify-center",children:d.jsx("button",{onClick:()=>Pi(j.uid),disabled:Ue,className:"bg-blue-600 text-white p-2 rounded hover:bg-blue-700 disabled:opacity-50 shadow-sm transition-transform active:scale-95",title:"Thm vo lp",children:d.jsx(ac,{})})})]},j.uid))})]})}),document.body),C&&No.createPortal(d.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 p-4",onClick:()=>R(!1),children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl p-6 h-[80vh] flex flex-col relative",onClick:j=>j.stopPropagation(),children:[d.jsx("button",{onClick:()=>R(!1),className:"absolute top-4 right-4 bg-gray-100 p-2 rounded-full",children:d.jsx(Po,{})}),d.jsx("h2",{className:"text-xl font-bold mb-4",children:"Thm Gio Vin"}),d.jsxs("div",{className:"flex items-center gap-2 p-2 bg-yellow-50 rounded mb-4",children:[d.jsx("input",{type:"checkbox",checked:Ga,onChange:j=>sl(j.target.checked),className:"w-5 h-5 text-yellow-600"}),d.jsx("label",{className:"text-sm font-medium",children:"t lm GVCN"})]}),d.jsxs("div",{className:"relative mb-4",children:[d.jsx(vy,{className:"absolute left-3 top-3 text-gray-400"}),d.jsx("input",{className:"w-full pl-10 pr-4 py-2 border rounded dark:bg-slate-700",placeholder:"Tm kim gio vin...",value:z,onChange:j=>D(j.target.value)})]}),d.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2",children:q.filter(j=>zr(j.fullName).includes(zr(z))||zr(j.email).includes(zr(z))).map(j=>d.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-slate-700/50 rounded-lg hover:bg-gray-100 transition",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("img",{src:j.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(j.fullName)}`,className:"w-10 h-10 rounded-full"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-bold text-sm",children:j.fullName}),d.jsx("p",{className:"text-xs text-gray-500",children:j.email})]})]}),d.jsx("button",{onClick:()=>Bs(j.uid),disabled:P,className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 disabled:opacity-50 text-sm",children:"Thm"})]},j.uid))})]})}),document.body),ve&&we&&No.createPortal(d.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 p-4",onClick:()=>Ne(!1),children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-5xl p-6 h-[80vh] flex flex-col relative",onClick:j=>j.stopPropagation(),children:[d.jsx("button",{onClick:()=>Ne(!1),className:"absolute top-4 right-4 bg-gray-100 dark:bg-slate-700 p-2 rounded-full",children:d.jsx(Po,{})}),d.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[d.jsx(hc,{className:"text-blue-500"})," Lch s lm bi: ",d.jsx("span",{className:"text-blue-600",children:we.fullName})]}),d.jsx("div",{className:"flex-1 overflow-y-auto",children:ne?d.jsx("div",{className:"p-10 text-center text-gray-500",children:"ang ti lch s..."}):Z.length===0?d.jsx("div",{className:"p-10 text-center text-gray-500 italic",children:"Hc vin ny cha lm bi thi no."}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[d.jsx("thead",{className:"bg-gray-50 dark:bg-slate-700 sticky top-0 text-gray-500 uppercase text-xs",children:d.jsxs("tr",{children:[d.jsx("th",{className:"p-4 font-semibold",children:"Loi"}),d.jsx("th",{className:"p-4 font-semibold",children:"Bi thi"}),d.jsx("th",{className:"p-4 font-semibold text-center",children:"im s"}),d.jsx("th",{className:"p-4 font-semibold",children:"Gi np"}),d.jsx("th",{className:"p-4 font-semibold",children:"Ngy np"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-700",children:Z.map(j=>{const fe=nn(j);return d.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors",children:[d.jsx("td",{className:"p-4 align-middle",children:d.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-bold border ${Vs(fe)}`,children:fe})}),d.jsx("td",{className:"p-4 align-middle font-medium text-gray-900 dark:text-gray-100",children:Di(j)}),d.jsxs("td",{className:"p-4 align-middle text-center",children:[d.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:j.score}),d.jsxs("span",{className:"text-gray-400 text-xs",children:[" / ",j.totalQuestions]})]}),d.jsx("td",{className:"p-4 align-middle text-gray-500",children:new Date(j.completedAt).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})}),d.jsx("td",{className:"p-4 align-middle text-gray-500",children:new Date(j.completedAt).toLocaleDateString("vi-VN")})]},j.id)})})]})})})]})}),document.body),We&&ze&&No.createPortal(d.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 p-4",onClick:()=>ot(!1),children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl p-6 relative animate-scale-up max-h-[90vh] overflow-y-auto",onClick:j=>j.stopPropagation(),children:[d.jsx("button",{onClick:()=>{ot(!1),jn(!1)},className:"absolute top-4 right-4 bg-gray-100 dark:bg-slate-700 p-2 rounded-full hover:bg-gray-200 transition",children:d.jsx(Po,{})}),d.jsx("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2 text-blue-700 dark:text-blue-400",children:rt?d.jsxs(d.Fragment,{children:[d.jsx(tc,{className:"text-yellow-500"})," Cp Nht Thng Tin"]}):d.jsxs(d.Fragment,{children:[d.jsx(fc,{className:"text-blue-500"})," H S Hc Vin"]})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"H v Tn"}),d.jsx("input",{className:`w-full p-2.5 border rounded-lg dark:bg-slate-700 ${rt?"focus:ring-2 focus:ring-blue-500":"bg-gray-50 border-transparent cursor-default"}`,value:ze.fullName,readOnly:!rt,onChange:j=>wt({...ze,fullName:j.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"Ngy sinh"}),d.jsx("input",{type:"date",className:`w-full p-2.5 border rounded-lg dark:bg-slate-700 ${rt?"focus:ring-2 focus:ring-blue-500":"bg-gray-50 border-transparent cursor-default"}`,value:ze.birthDate||"",readOnly:!rt,onChange:j=>wt({...ze,birthDate:j.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"Lp hc (Kha hc)"}),d.jsx("input",{className:"w-full p-2.5 border rounded-lg dark:bg-slate-700 bg-gray-50 border-transparent cursor-default",value:ze.courseName||ze.courseCode||"--",readOnly:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"Ngy cp CCCD"}),d.jsx("input",{type:rt?"date":"text",className:`w-full p-2.5 border rounded-lg dark:bg-slate-700 ${rt?"focus:ring-2 focus:ring-blue-500":"bg-gray-50 border-transparent cursor-default"}`,value:ze.cccdDate||"",readOnly:!rt,onChange:j=>wt({...ze,cccdDate:j.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"a ch"}),d.jsx("input",{className:`w-full p-2.5 border rounded-lg dark:bg-slate-700 ${rt?"focus:ring-2 focus:ring-blue-500":"bg-gray-50 border-transparent cursor-default"}`,value:ze.address||"",readOnly:!rt,onChange:j=>wt({...ze,address:j.target.value})})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"S in thoi"}),d.jsx("input",{className:`w-full p-2.5 border rounded-lg dark:bg-slate-700 ${rt?"focus:ring-2 focus:ring-blue-500":"bg-gray-50 border-transparent cursor-default"}`,value:ze.phoneNumber||"",readOnly:!rt,onChange:j=>wt({...ze,phoneNumber:j.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"Lp hc (t in)"}),d.jsx("input",{className:`w-full p-2.5 border rounded-lg dark:bg-slate-700 ${rt?"focus:ring-2 focus:ring-blue-500":"bg-gray-50 border-transparent cursor-default"}`,value:ze.class||"",placeholder:"V d: Th my k2",readOnly:!rt,onChange:j=>wt({...ze,class:j.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"S CCCD"}),d.jsx("input",{className:`w-full p-2.5 border rounded-lg dark:bg-slate-700 ${rt?"focus:ring-2 focus:ring-blue-500":"bg-gray-50 border-transparent cursor-default"}`,value:ze.cccd||"",readOnly:!rt,onChange:j=>wt({...ze,cccd:j.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"Ni cp"}),d.jsx("input",{className:`w-full p-2.5 border rounded-lg dark:bg-slate-700 ${rt?"focus:ring-2 focus:ring-blue-500":"bg-gray-50 border-transparent cursor-default"}`,value:ze.cccdPlace||"",readOnly:!rt,onChange:j=>wt({...ze,cccdPlace:j.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"Vai tr"}),d.jsxs("select",{className:`w-full p-2.5 border rounded-lg dark:bg-slate-700 ${rt?"focus:ring-2 focus:ring-blue-500":"bg-gray-50 border-transparent cursor-default appearance-none pointer-events-none"}`,value:ze.role,disabled:!rt,onChange:j=>wt({...ze,role:j.target.value}),children:[d.jsx("option",{value:"hoc_vien",children:"Hc vin"}),d.jsx("option",{value:"student",children:"Hc sinh"}),d.jsx("option",{value:"teacher",children:"Gio vin"})]})]})]})]}),d.jsx("div",{className:"flex justify-end gap-3 mt-8 pt-4 border-t border-gray-100 dark:border-slate-700",children:rt?d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:()=>jn(!1),className:"px-4 py-2 bg-gray-100 rounded-lg hover:bg-gray-200 text-gray-700 font-medium",children:"Hy b"}),d.jsxs("button",{onClick:Za,disabled:Rn,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 shadow-lg font-medium transition-transform active:scale-95",children:[d.jsx(Mv,{})," ",Rn?"ang lu...":"Lu Thay i"]})]}):d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:()=>ot(!1),className:"px-4 py-2 bg-gray-100 rounded-lg hover:bg-gray-200 text-gray-700 font-medium",children:"ng"}),d.jsxs("button",{onClick:()=>jn(!0),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 shadow-lg font-medium transition-transform active:scale-95",children:[d.jsx(tc,{})," Chnh sa"]})]})})]})}),document.body),En&&nr&&No.createPortal(d.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] p-4",onClick:()=>Os(!1),children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-6 w-full max-w-md animate-scale-up",onClick:j=>j.stopPropagation(),children:[d.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[d.jsx(pf,{className:"text-yellow-500"})," Gi Thng Bo"]}),d.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["To: ",d.jsx("span",{className:"font-bold text-blue-600",children:nr.name})]}),d.jsxs("form",{onSubmit:$t,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Loi thng bo"}),d.jsxs("select",{className:"w-full px-4 py-2 border rounded-lg dark:bg-slate-700 outline-none focus:ring-2 focus:ring-blue-500",value:rr,onChange:j=>gs(j.target.value),children:[d.jsx("option",{value:"system",children:"Bnh thng"}),["admin","lanh_dao","quan_ly"].includes(n.role)&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"attention",children:" Ch  (Chy ch vng)"}),d.jsx("option",{value:"special",children:" C BIT (Chy ch )"})]})]})]}),(rr==="special"||rr==="attention")&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Hiu lc chy ch n"}),d.jsx("input",{type:"datetime-local",className:"w-full px-4 py-2 border rounded-lg dark:bg-slate-700 outline-none focus:ring-2 focus:ring-blue-500",value:Qt,onChange:j=>es(j.target.value),required:!0}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sau thi gian ny, thng bo s ngng chy ngang mn hnh."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tiu "}),d.jsx("input",{className:"w-full px-4 py-2 border rounded-lg dark:bg-slate-700 focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Tiu ...",value:sr,onChange:j=>rl(j.target.value),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tin nhn"}),d.jsx("textarea",{className:"w-full px-4 py-2 border rounded-lg dark:bg-slate-700 h-24 focus:ring-2 focus:ring-blue-500 outline-none resize-none",placeholder:"Ni dung...",value:Qa,onChange:j=>Wa(j.target.value),required:!0})]}),d.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[d.jsx("button",{type:"button",onClick:()=>Os(!1),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Hy"}),d.jsx("button",{type:"submit",disabled:Dt,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 shadow-lg font-medium",children:Dt?"ang gi...":"Gi Ngay"})]})]})]})}),document.body),d.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[d.jsxs("div",{children:[d.jsxs("button",{onClick:()=>o(null),className:"flex items-center gap-2 text-sm text-gray-500 hover:text-blue-600 mb-2 transition-colors font-medium",children:[d.jsx(nd,{})," Quay li danh sch"]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-2 rounded-lg",children:d.jsx(Ea,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-cyan-500",children:a.name}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-0.5",children:a.description})]})]})]}),d.jsx("div",{className:"flex gap-4",children:d.jsxs("button",{onClick:()=>ns("class",a.name,a.name),className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition flex items-center gap-2 font-medium",children:[d.jsx(pf,{})," Thng bo c lp"]})})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[d.jsx("div",{className:"lg:col-span-1 space-y-6",children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-slate-700 p-5 sticky top-20",children:[d.jsxs("div",{className:"flex justify-between items-center border-b pb-3 border-gray-100 dark:border-slate-700 mb-4",children:[d.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2 text-gray-800 dark:text-white",children:[d.jsx(fc,{className:"text-green-500"})," Gio vin"]}),ps&&d.jsx("button",{onClick:()=>R(!0),className:"text-green-600 hover:bg-green-50 p-1.5 rounded-full transition-colors",children:d.jsx(ac,{size:14})})]}),d.jsxs("div",{className:"space-y-3",children:[k.map(j=>d.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 dark:hover:bg-slate-700/50 rounded-lg transition-colors group relative cursor-pointer",children:[d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:j.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(j.fullName)}`,className:"w-10 h-10 rounded-full border border-gray-200"}),a.headTeacherId===j.uid&&d.jsx("div",{className:"absolute -top-1 -right-1 bg-yellow-400 text-white rounded-full p-0.5 border-2 border-white",children:d.jsx(lm,{size:10})})]}),d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("p",{className:"font-medium text-sm truncate text-gray-900 dark:text-gray-100",children:j.fullName}),d.jsx("p",{className:"text-[11px] text-gray-400 truncate",children:cP(j.role)}),a.headTeacherId===j.uid&&d.jsx("span",{className:"text-[10px] font-bold text-yellow-600 bg-yellow-50 px-1.5 py-0.5 rounded border border-yellow-200 mt-1 inline-block",children:"GVCN"})]}),qt&&d.jsx("button",{onClick:fe=>{fe.stopPropagation(),ts(j.uid)},className:"text-gray-400 hover:text-red-500 hover:bg-red-50 p-1.5 rounded opacity-0 group-hover:opacity-100 transition-all absolute right-2",title:"Xa gio vin",children:d.jsx(Lo,{size:12})})]},j.uid)),k.length===0&&d.jsx("p",{className:"text-sm text-gray-500 italic text-center py-4",children:"Cha c gio vin."})]})]})}),d.jsx("div",{className:"lg:col-span-3",children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-slate-700 p-6 min-h-[500px]",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-100 dark:border-slate-700",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("h3",{className:"font-bold text-xl flex items-center gap-2 text-gray-800 dark:text-white",children:[d.jsx(yd,{className:"text-blue-500"})," Hc vin (",E.length,")"]}),d.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-700 rounded-lg p-1 ml-4",children:[d.jsx("button",{onClick:()=>Xa("grid"),className:`p-1.5 rounded ${Ar==="grid"?"bg-white dark:bg-slate-600 shadow text-blue-600":"text-gray-500 hover:text-blue-500"}`,title:"Dng li",children:d.jsx(bS,{})}),d.jsx("button",{onClick:()=>Xa("list"),className:`p-1.5 rounded ${Ar==="list"?"bg-white dark:bg-slate-600 shadow text-blue-600":"text-gray-500 hover:text-blue-500"}`,title:"Dng danh sch",children:d.jsx(yS,{})})]})]}),Qn&&d.jsxs("button",{onClick:()=>N(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg shadow hover:bg-blue-700 hover:shadow-lg transition flex items-center gap-2 text-sm font-medium",children:[d.jsx(ac,{})," Thm Hc Vin"]})]}),Ar==="grid"?d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:Li.map(j=>{const fe=te[j.uid]||{score:"--"};return d.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/30 rounded-xl p-4 border border-gray-100 dark:border-slate-700 hover:shadow-md hover:border-blue-200 dark:hover:border-blue-500/30 transition-all duration-300 group relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-bl from-blue-100 to-transparent -mr-8 -mt-8 rounded-full opacity-50 group-hover:scale-150 transition-transform"}),d.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[d.jsx("div",{className:"relative",children:d.jsx("img",{src:j.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(j.fullName)}&background=random`,alt:j.fullName,className:"w-14 h-14 rounded-full object-cover border-2 border-white dark:border-slate-600 shadow-sm group-hover:border-blue-500 transition-colors"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("h4",{className:"font-bold text-gray-900 dark:text-gray-100 truncate group-hover:text-blue-600 transition-colors text-base flex items-center gap-1",children:[j.fullName,j.isVerified&&d.jsx(Ac,{className:"text-green-500 text-xs shrink-0"})]}),d.jsx("p",{className:"text-xs text-gray-500 truncate",children:j.email}),d.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100 dark:border-slate-600 text-xs",children:d.jsxs("div",{className:"flex justify-between text-gray-500",children:[d.jsx("span",{children:"Kt qu mi:"}),d.jsx("span",{className:"font-bold text-teal-600",children:fe.score})]})}),d.jsxs("div",{className:"flex gap-2 mt-3 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[d.jsx("button",{onClick:()=>ns("user",j.uid,j.fullName),className:"text-yellow-600 bg-yellow-50 hover:bg-yellow-100 p-1.5 rounded text-xs flex items-center gap-1",title:"Nhn tin",children:d.jsx(pf,{})}),d.jsx("button",{onClick:()=>{wt(j),ot(!0)},className:"text-blue-600 bg-blue-50 hover:bg-blue-100 p-1.5 rounded text-xs flex items-center gap-1",title:"Sa thng tin",children:d.jsx(tc,{})}),d.jsx("button",{onClick:()=>{V(j),Ne(!0)},className:"text-purple-600 bg-purple-50 hover:bg-purple-100 p-1.5 rounded text-xs flex items-center gap-1",title:"Xem lch s",children:d.jsx(hc,{})}),Qn&&d.jsx("button",{onClick:()=>Dn(j.uid),className:"text-red-600 bg-red-50 hover:bg-red-100 p-1.5 rounded text-xs flex items-center gap-1",title:"Xa",children:d.jsx(Lo,{})})]})]})]})]},j.uid)})}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-left text-sm",children:[d.jsx("thead",{className:"text-xs text-gray-500 uppercase bg-gray-50 dark:bg-slate-700 dark:text-gray-300 select-none",children:d.jsxs("tr",{children:[d.jsx("th",{onClick:()=>Pn("fullName"),className:"px-4 py-3 rounded-l-lg cursor-pointer hover:bg-gray-200 transition",children:d.jsxs("div",{className:"flex items-center",children:["Hc vin ",Ln("fullName")]})}),d.jsx("th",{onClick:()=>Pn("birthDate"),className:"px-4 py-3 cursor-pointer hover:bg-gray-200 transition",children:d.jsxs("div",{className:"flex items-center",children:["Ngy sinh ",Ln("birthDate")]})}),d.jsx("th",{onClick:()=>Pn("recentExam"),className:"px-4 py-3 cursor-pointer hover:bg-gray-200 transition",children:d.jsxs("div",{className:"flex items-center",children:["Bi lm gn nht ",Ln("recentExam")]})}),d.jsx("th",{onClick:()=>Pn("time"),className:"px-4 py-3 cursor-pointer hover:bg-gray-200 transition",children:d.jsxs("div",{className:"flex items-center",children:["Thi gian ",Ln("time")]})}),d.jsx("th",{onClick:()=>Pn("score"),className:"px-4 py-3 cursor-pointer hover:bg-gray-200 transition",children:d.jsxs("div",{className:"flex items-center",children:["im ",Ln("score")]})}),d.jsx("th",{className:"px-4 py-3 text-center rounded-r-lg",children:"Hnh ng"})]})}),d.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-700",children:[Li.map(j=>{const fe=te[j.uid]||{type:"--",time:"--",score:"--"};return d.jsxs("tr",{className:"group hover:bg-gray-50 dark:hover:bg-slate-700/30 transition-colors",children:[d.jsxs("td",{className:"px-4 py-3 font-medium text-gray-900 dark:text-white flex items-center gap-3",children:[d.jsx("img",{src:j.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(j.fullName)}`,className:"w-8 h-8 rounded-full border border-gray-200"}),d.jsxs("div",{children:[d.jsxs("p",{className:"flex items-center gap-1",children:[j.fullName,j.isVerified&&d.jsx(Ac,{className:"text-green-500 text-xs"})]}),d.jsx("p",{className:"text-xs text-gray-500 font-normal",children:j.email})]})]}),d.jsx("td",{className:"px-4 py-3 text-gray-500",children:j.birthDate||"--"}),d.jsx("td",{className:"px-4 py-3",children:d.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold
                                                        ${fe.type.includes("n")?"bg-blue-100 text-blue-700":fe.type.includes("Th")?"bg-purple-100 text-purple-700":fe.type==="--"?"bg-gray-100 text-gray-500":"bg-red-100 text-red-700"}`,children:fe.type})}),d.jsx("td",{className:"px-4 py-3 text-gray-500",children:fe.time}),d.jsx("td",{className:"px-4 py-3 font-bold text-teal-600",children:fe.score}),d.jsx("td",{className:"px-4 py-3 text-center",children:d.jsxs("div",{className:"flex items-center justify-center gap-2 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[d.jsx("button",{onClick:()=>ns("user",j.uid,j.fullName),className:"text-yellow-500 hover:bg-yellow-50 p-2 rounded-lg transition",title:"Gi tin nhn",children:d.jsx(pf,{})}),d.jsx("button",{onClick:()=>{wt(j),ot(!0)},className:"text-blue-500 hover:bg-blue-50 p-2 rounded-lg transition",title:"Sa thng tin",children:d.jsx(tc,{})}),d.jsx("button",{onClick:()=>{V(j),Ne(!0)},className:"text-purple-500 hover:bg-purple-50 p-2 rounded-lg transition",title:"Xem lch s thi",children:d.jsx(hc,{})}),Qn&&d.jsx("button",{onClick:()=>Dn(j.uid),className:"text-red-400 hover:text-red-600 hover:bg-red-50 p-2 rounded-lg transition",title:"Xa khi lp",children:d.jsx(Lo,{})})]})})]},j.uid)}),E.length===0&&d.jsx("tr",{children:d.jsx("td",{colSpan:6,className:"text-center py-10 text-gray-400 italic",children:"Lp cha c hc vin no."})})]})]})})]})})]})]}):d.jsxs("div",{className:"w-full max-w-6xl mx-auto p-4 animate-slide-in-right relative",children:[er&&No.createPortal(d.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 p-4",children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md p-6",children:[d.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800 dark:text-white",children:"To Lp Hc Mi"}),d.jsxs("form",{onSubmit:Wc,className:"space-y-4",children:[d.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",placeholder:"Tn lp",value:Ri,onChange:j=>Mt(j.target.value),required:!0}),d.jsxs("div",{className:"mb-2",children:[d.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Hng bng (Mc nh)"}),d.jsxs("select",{className:"w-full p-2 border rounded dark:bg-slate-700",value:kr,onChange:j=>Ms(j.target.value),children:[d.jsx("option",{value:"",children:"-- Chn hng bng --"}),On.map(j=>d.jsx("option",{value:j.id,children:j.name},j.id))]}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hc vin s t ng c gn hng bng ny khi n tp."})]}),d.jsx("textarea",{className:"w-full p-2 border rounded dark:bg-slate-700",placeholder:"M t",value:Ht,onChange:j=>tr(j.target.value)}),d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx("button",{type:"button",onClick:()=>Sr(!1),className:"px-4 py-2 bg-gray-200 rounded",children:"Hy"}),d.jsx("button",{type:"submit",className:"px-4 py-2 bg-teal-600 text-white rounded",children:"To"})]})]})]})}),document.body),Ps&&ir&&No.createPortal(d.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 p-4",children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md p-6",children:[d.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800 dark:text-white",children:"Chnh Sa Lp Hc"}),d.jsxs("form",{onSubmit:al,className:"space-y-4",children:[d.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",placeholder:"Tn lp",value:Kn,onChange:j=>Nr(j.target.value),required:!0}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Hng bng mc nh"}),d.jsxs("select",{className:"w-full p-2 border rounded dark:bg-slate-700",value:Ls,onChange:j=>Oi(j.target.value),children:[d.jsx("option",{value:"",children:"-- Khng chn --"}),On.map(j=>d.jsx("option",{value:j.id,children:j.name},j.id))]})]}),d.jsx("textarea",{className:"w-full p-2 border rounded dark:bg-slate-700",placeholder:"M t",value:ji,onChange:j=>Cr(j.target.value)}),d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx("button",{type:"button",onClick:()=>Gn(!1),className:"px-4 py-2 bg-gray-200 rounded",children:"Hy"}),d.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Lu Thay i"})]})]})]})}),document.body),d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3 bg-clip-text text-transparent bg-gradient-to-r from-teal-600 to-emerald-600",children:[d.jsx(Ea,{className:"text-teal-600"})," Qun l Lp hc"]}),d.jsx("button",{onClick:e,className:"bg-gray-200 dark:bg-slate-700 text-gray-800 dark:text-gray-200 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-slate-600 transition-colors",children:"Back Dashboard"})]}),c?d.jsx("div",{className:"p-20 text-center",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600 mx-auto"})}):t.length===0?d.jsxs("div",{className:"text-center p-12 bg-white dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 shadow-sm",children:[d.jsx(Ea,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),d.jsx("h3",{className:"text-xl font-bold text-gray-700 dark:text-gray-200 mb-2",children:"Cha c lp hc no"}),Ja&&d.jsx("button",{onClick:()=>Sr(!0),className:"bg-teal-600 text-white px-6 py-2 rounded-lg hover:bg-teal-700 transition",children:"To Lp Ngay"})]}):d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[Ja&&d.jsxs("div",{onClick:()=>Sr(!0),className:"bg-gradient-to-br from-teal-500 to-emerald-500 rounded-xl shadow-lg p-6 flex flex-col justify-center items-center text-white cursor-pointer hover:shadow-xl hover:scale-[1.02] transition-all duration-300 group",children:[d.jsx("div",{className:"bg-white/20 p-4 rounded-full mb-3 group-hover:bg-white/30 transition-colors",children:d.jsx(ac,{className:"w-8 h-8"})}),d.jsx("h3",{className:"font-bold text-lg",children:"Thm Lp Mi"})]}),t.map(j=>{var Re;const fe=["admin","quan_ly","lanh_dao"].includes(n.role)||n.role==="giao_vien"&&(j.headTeacherId===n.id||(j.teacherIds||[]).includes(n.id)),Ie=["admin","quan_ly","lanh_dao"].includes(n.role);return d.jsxs("div",{onClick:()=>o(j),className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-slate-700 overflow-hidden cursor-pointer hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group flex flex-col relative",children:[(fe||Ie)&&d.jsxs("div",{className:"absolute top-2 right-2 z-10 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[fe&&d.jsx("button",{onClick:pe=>Us(j,pe),className:"p-2 bg-white/90 text-blue-600 rounded-full shadow-sm hover:bg-blue-50",title:"Sa lp",children:d.jsx(tc,{})}),Ie&&d.jsx("button",{onClick:pe=>{pe.stopPropagation(),ol(j.id)},className:"p-2 bg-white/90 text-red-600 rounded-full shadow-sm hover:bg-red-50",title:"Xa lp",children:d.jsx(Lo,{})})]}),d.jsxs("div",{className:"h-32 bg-gradient-to-r from-blue-600 to-cyan-500 relative flex items-center justify-center overflow-hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-transparent transition-colors"}),d.jsx(yy,{className:"text-white/30 w-20 h-20 transform -rotate-12 group-hover:scale-110 transition-transform duration-500"}),d.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/60 to-transparent",children:[d.jsx("h3",{className:"font-bold text-xl text-white truncate",children:j.name}),j.licenseId&&d.jsx("span",{className:"text-xs text-yellow-300 font-mono bg-black/30 px-1 rounded ml-2",children:((Re=On.find(pe=>pe.id===j.licenseId))==null?void 0:Re.name)||j.licenseId})]})]}),d.jsxs("div",{className:"p-5 flex-1 flex flex-col",children:[d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-2 mb-4 flex-1",children:j.description||"Cha c m t kha hc."}),d.jsxs("div",{className:"flex justify-between items-center text-sm font-medium pt-4 border-t border-gray-100 dark:border-slate-700",children:[d.jsxs("span",{className:`flex items-center gap-1 ${j.headTeacherId?"text-blue-600 font-bold":"text-gray-500"}`,children:[d.jsx(fc,{})," GVCN: ",j.headTeacherId?g[j.headTeacherId]||"...":"Cha c"]}),d.jsxs("span",{className:"text-blue-600 group-hover:underline flex items-center gap-1",children:["Chi tit ",d.jsx(nd,{className:"rotate-180"})]})]})]})]},j.id)})]})]})},uE=[{id:"admin",name:"Qun tr vin"},{id:"lanh_dao",name:"Lnh o"},{id:"quan_ly",name:"Qun l"},{id:"giao_vien",name:"Gio vin"},{id:"hoc_vien",name:"Hc vin"}],dP=["giao_vien","lanh_dao","quan_ly"],hP=({userProfile:n,onBack:e})=>{const[t,s]=F.useState(n),[a,o]=F.useState(!1),c=n.role!=="hoc_vien",[h,g]=F.useState([]),[p,v]=F.useState(!1),[w,E]=F.useState([]),[T,k]=F.useState(""),[L,I]=F.useState("all"),[O,q]=F.useState(null),[G,te]=F.useState(!1);F.useEffect(()=>{c&&me()},[c]),F.useEffect(()=>{if(c){let re=h;if(L==="staff"?re=re.filter(P=>dP.includes(P.role)):L==="hoc_vien"&&(re=re.filter(P=>P.role==="hoc_vien")),T.trim()){const P=T.toLowerCase();re=re.filter(ie=>ie.fullName.toLowerCase().includes(P)||ie.email.toLowerCase().includes(P)||ie.phoneNumber&&ie.phoneNumber.includes(P))}E(re)}},[h,L,T,c]);const me=async()=>{v(!0);try{const re=Ut(At(ke,"users"),Zm("createdAt","desc")),ie=(await pn(re)).docs.map(ve=>{const Ne=ve.data();return{id:ve.id,...Ne,photoURL:Ne.photoURL||Ua(Ne.photoURL?void 0:Ne.role)}});g(ie)}catch(re){console.error("Error fetching users:",re)}finally{v(!1)}},he=async re=>{re.preventDefault(),o(!0);try{const P=ie=>ie===void 0?null:ie;await ds(ut(ke,"users",n.id),{fullName:P(t.full_name),phoneNumber:P(t.phoneNumber),birthDate:P(t.birthDate),address:P(t.address),cccd:P(t.cccd),cccdDate:P(t.cccdDate),cccdPlace:P(t.cccdPlace),class:P(t.class)}),alert("Cp nht thng tin thnh cng!")}catch(P){console.error(P),alert("Li khi lu thng tin.")}finally{o(!1)}},N=async re=>{if(confirm("Bn c chc chn mun xa ti khon ny?"))try{await Cv(ut(ke,"users",re)),g(P=>P.filter(ie=>ie.id!==re))}catch(P){console.error(P),alert("Li khi xa.")}},C=async re=>{if(re.preventDefault(),!!O)try{const P=ie=>ie===void 0?null:ie;await ds(ut(ke,"users",O.id),{fullName:O.fullName,phoneNumber:P(O.phoneNumber),birthDate:P(O.birthDate),role:O.role,class:P(O.class),cccd:P(O.cccd),cccdDate:P(O.cccdDate),cccdPlace:P(O.cccdPlace),address:P(O.address)}),alert(" cp nht!"),te(!1),me()}catch(P){console.error(P),alert("Li khi lu.")}},R=re=>{var P;return((P=uE.find(ie=>ie.id===re))==null?void 0:P.name)||re},[B,M]=F.useState(!1),z=Js.useRef(null),D=()=>{var re;(re=z.current)==null||re.click()},Ue=async re=>{var ie;const P=(ie=re.target.files)==null?void 0:ie[0];if(P){if(!P.type.startsWith("image/")){alert("Vui lng chn file nh!");return}try{M(!0);const ve=await Z9(P,n.id);await ds(ut(ke,"users",n.id),{photoURL:ve}),s(Ne=>({...Ne,photoURL:ve})),alert("Ti nh i din thnh cng!")}catch(ve){console.error("Upload failed:",ve),alert("C li xy ra khi ti nh.")}finally{M(!1),z.current&&(z.current.value="")}}};return d.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 animate-slide-in-right pb-20",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[d.jsx("button",{onClick:e,className:"p-2 bg-gray-100 dark:bg-slate-700 rounded-full hover:bg-gray-200",children:d.jsx(nd,{})}),d.jsxs("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[d.jsx(um,{})," Ti khon ca ti"]})]}),d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md p-6 mb-8 border border-gray-100 dark:border-slate-700",children:[d.jsx("h2",{className:"text-lg font-bold mb-4 text-blue-600 border-b pb-2",children:"Thng tin c nhn"}),d.jsxs("div",{className:"flex flex-col items-center mb-6",children:[d.jsxs("div",{className:"relative group cursor-pointer",onClick:D,children:[d.jsxs("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-gray-200 dark:border-slate-600 shadow-lg relative",children:[d.jsx("img",{src:t.photoURL||Ua(t.role),alt:"Avatar",className:"w-full h-full object-cover"}),B&&d.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:d.jsx("div",{className:"w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin"})})]}),d.jsx("div",{className:"absolute bottom-1 right-1 bg-white dark:bg-slate-700 p-2 rounded-full shadow-md text-gray-600 dark:text-gray-200 group-hover:bg-blue-500 group-hover:text-white transition-colors",children:d.jsx(aO,{size:16})}),d.jsx("input",{type:"file",ref:z,className:"hidden",accept:"image/*",onChange:Ue})]}),d.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Chm  i nh i din"})]}),d.jsxs("form",{onSubmit:he,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"H v Tn"}),d.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:t.full_name,onChange:re=>s({...t,full_name:re.target.value}),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Email (Khng i)"}),d.jsx("input",{className:"w-full p-2 border rounded bg-gray-50 dark:bg-slate-900 text-gray-500",value:t.email||"",readOnly:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Ngy sinh"}),d.jsx("input",{type:"date",className:"w-full p-2 border rounded dark:bg-slate-700",value:t.birthDate||"",onChange:re=>s({...t,birthDate:re.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"S in thoi"}),d.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:t.phoneNumber||"",onChange:re=>s({...t,phoneNumber:re.target.value})})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"S CCCD"}),d.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:t.cccd||"",onChange:re=>s({...t,cccd:re.target.value})})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Ngy cp"}),d.jsx("input",{type:"date",className:"w-full p-2 border rounded dark:bg-slate-700",value:t.cccdDate||"",onChange:re=>s({...t,cccdDate:re.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Ni cp"}),d.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:t.cccdPlace||"",onChange:re=>s({...t,cccdPlace:re.target.value})})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"a ch / Qu qun"}),d.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:t.address||"",onChange:re=>s({...t,address:re.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Lp hc (t in)"}),d.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:t.class||"",onChange:re=>s({...t,class:re.target.value}),placeholder:"VD: Th my K2"})]})]}),d.jsx("div",{className:"md:col-span-2 flex justify-end mt-4",children:d.jsxs("button",{type:"submit",disabled:a,className:"flex items-center gap-2 bg-teal-600 text-white px-6 py-2 rounded-lg hover:bg-teal-700 transition shadow-md disabled:opacity-50",children:[d.jsx(Mv,{})," ",a?"ang lu...":"Cp nht thng tin"]})})]})]}),c&&d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md p-6 border border-gray-100 dark:border-slate-700 animate-fade-in-up",children:[d.jsxs("h2",{className:"text-lg font-bold mb-4 text-orange-600 border-b pb-2 flex items-center justify-between",children:[d.jsx("span",{children:"Qun l ngi dng"}),d.jsx("span",{className:"text-xs font-normal text-gray-500 bg-gray-100 rounded-full px-2 py-1",children:"Admin/Lnh o/QL/GV"})]}),d.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6 justify-between items-center",children:[d.jsxs("div",{className:"relative flex-1 max-w-md w-full",children:[d.jsx(vy,{className:"absolute left-3 top-3 text-gray-400"}),d.jsx("input",{className:"w-full pl-10 pr-4 py-2 border rounded-lg dark:bg-slate-700",placeholder:"Tm hc vin, gio vin...",value:T,onChange:re=>k(re.target.value)})]}),d.jsxs("select",{className:"p-2 border rounded-lg dark:bg-slate-700 flex-1 md:flex-none",value:L,onChange:re=>I(re.target.value),children:[d.jsx("option",{value:"all",children:"Tt c vai tr"}),d.jsx("option",{value:"staff",children:"Gio vin/Qun l"}),d.jsx("option",{value:"hoc_vien",children:"Hc vin"})]})]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-left border-collapse min-w-[800px]",children:[d.jsx("thead",{className:"bg-gray-50 dark:bg-slate-900 text-sm uppercase text-gray-500 font-bold",children:d.jsxs("tr",{children:[d.jsx("th",{className:"p-3 border-b dark:border-slate-700",children:"H v Tn"}),d.jsx("th",{className:"p-3 border-b dark:border-slate-700",children:"Lp hc (Kha/Tn)"}),d.jsx("th",{className:"p-3 border-b dark:border-slate-700",children:"Lin h"}),d.jsx("th",{className:"p-3 border-b dark:border-slate-700",children:"Vai tr"}),d.jsx("th",{className:"p-3 border-b dark:border-slate-700 text-center",children:"Thao tc"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-700",children:p?d.jsx("tr",{children:d.jsx("td",{colSpan:5,className:"p-4 text-center",children:"ang ti..."})}):w.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:5,className:"p-4 text-center italic text-gray-500",children:"Khng tm thy ngi dng."})}):w.map(re=>d.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50 transition",children:[d.jsxs("td",{className:"p-3 font-medium text-gray-900 dark:text-white",children:[re.fullName,re.role==="hoc_vien"&&re.isVerified&&d.jsx(Ac,{className:"inline ml-1 text-blue-500 text-xs"})]}),d.jsx("td",{className:"p-3 text-sm",children:re.courseName||re.courseId||"--"}),d.jsxs("td",{className:"p-3 text-sm",children:[d.jsx("div",{children:re.email}),d.jsx("div",{className:"text-xs text-gray-500",children:re.phoneNumber})]}),d.jsx("td",{className:"p-3",children:d.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${re.role==="hoc_vien"?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"}`,children:R(re.role)})}),d.jsxs("td",{className:"p-3 flex justify-center gap-2",children:[d.jsx("button",{onClick:()=>{q(re),te(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded",children:d.jsx(tc,{})}),n.role==="admin"&&d.jsx("button",{onClick:()=>N(re.id),className:"p-2 text-red-600 hover:bg-red-50 rounded",children:d.jsx(Lo,{})})]})]},re.id))})]})})]}),G&&O&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:()=>te(!1),children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl p-6 relative max-h-[90vh] overflow-y-auto",onClick:re=>re.stopPropagation(),children:[d.jsxs("h2",{className:"text-lg font-bold mb-4",children:["Sa ti khon: ",O.fullName]}),d.jsxs("form",{onSubmit:C,className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1",children:"H tn"}),d.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:O.fullName,onChange:re=>q({...O,fullName:re.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1",children:"ST"}),d.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:O.phoneNumber||"",onChange:re=>q({...O,phoneNumber:re.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1",children:"Ngy sinh"}),d.jsx("input",{type:"date",className:"w-full p-2 border rounded dark:bg-slate-700",value:O.birthDate||"",onChange:re=>q({...O,birthDate:re.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1",children:"Lp hc (t in)"}),d.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:O.class||"",onChange:re=>q({...O,class:re.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1",children:"CCCD"}),d.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:O.cccd||"",onChange:re=>q({...O,cccd:re.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1",children:"a ch"}),d.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:O.address||"",onChange:re=>q({...O,address:re.target.value})})]}),d.jsxs("div",{className:"col-span-2",children:[d.jsx("label",{className:"block text-sm font-bold mb-1",children:"Vai tr"}),d.jsx("select",{className:"w-full p-2 border rounded dark:bg-slate-700",value:O.role,onChange:re=>q({...O,role:re.target.value}),children:uE.map(re=>d.jsx("option",{value:re.id,children:re.name},re.id))})]})]}),d.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>te(!1),className:"px-4 py-2 bg-gray-200 rounded",children:"Hy"}),d.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Lu"})]})]})]})})]})};/*!
* sweetalert2 v11.26.4
* Released under the MIT License.
*/function v5(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function fP(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function dE(n,e){return n.get(v5(n,e))}function mP(n,e,t){fP(n,e),e.set(n,t)}function gP(n,e,t){return n.set(v5(n,e),t),t}const pP=100,De={},yP=()=>{De.previousActiveElement instanceof HTMLElement?(De.previousActiveElement.focus(),De.previousActiveElement=null):document.body&&document.body.focus()},vP=n=>new Promise(e=>{if(!n)return e();const t=window.scrollX,s=window.scrollY;De.restoreFocusTimeout=setTimeout(()=>{yP(),e()},pP),window.scrollTo(t,s)}),b5="swal2-",bP=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],se=bP.reduce((n,e)=>(n[e]=b5+e,n),{}),wP=["success","warning","info","question","error"],vm=wP.reduce((n,e)=>(n[e]=b5+e,n),{}),w5="SweetAlert2:",Wv=n=>n.charAt(0).toUpperCase()+n.slice(1),Jn=n=>{console.warn(`${w5} ${typeof n=="object"?n.join(" "):n}`)},tl=n=>{console.error(`${w5} ${n}`)},hE=[],_P=n=>{hE.includes(n)||(hE.push(n),Jn(n))},_5=(n,e=null)=>{_P(`"${n}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},cg=n=>typeof n=="function"?n():n,Yv=n=>n&&typeof n.toPromise=="function",Vd=n=>Yv(n)?n.toPromise():Promise.resolve(n),Xv=n=>n&&Promise.resolve(n)===n,Zn=()=>document.body.querySelector(`.${se.container}`),Ud=n=>{const e=Zn();return e?e.querySelector(n):null},Rs=n=>Ud(`.${n}`),dt=()=>Rs(se.popup),Fc=()=>Rs(se.icon),xP=()=>Rs(se["icon-content"]),x5=()=>Rs(se.title),Jv=()=>Rs(se["html-container"]),E5=()=>Rs(se.image),Zv=()=>Rs(se["progress-steps"]),ug=()=>Rs(se["validation-message"]),Xr=()=>Ud(`.${se.actions} .${se.confirm}`),Gc=()=>Ud(`.${se.actions} .${se.cancel}`),nl=()=>Ud(`.${se.actions} .${se.deny}`),EP=()=>Rs(se["input-label"]),Kc=()=>Ud(`.${se.loader}`),Bd=()=>Rs(se.actions),T5=()=>Rs(se.footer),dg=()=>Rs(se["timer-progress-bar"]),eb=()=>Rs(se.close),TP=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,tb=()=>{const n=dt();if(!n)return[];const e=n.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),t=Array.from(e).sort((o,c)=>{const h=parseInt(o.getAttribute("tabindex")||"0"),g=parseInt(c.getAttribute("tabindex")||"0");return h>g?1:h<g?-1:0}),s=n.querySelectorAll(TP),a=Array.from(s).filter(o=>o.getAttribute("tabindex")!=="-1");return[...new Set(t.concat(a))].filter(o=>fs(o))},nb=()=>Si(document.body,se.shown)&&!Si(document.body,se["toast-shown"])&&!Si(document.body,se["no-backdrop"]),hg=()=>{const n=dt();return n?Si(n,se.toast):!1},SP=()=>{const n=dt();return n?n.hasAttribute("data-loading"):!1},js=(n,e)=>{if(n.textContent="",e){const s=new DOMParser().parseFromString(e,"text/html"),a=s.querySelector("head");a&&Array.from(a.childNodes).forEach(c=>{n.appendChild(c)});const o=s.querySelector("body");o&&Array.from(o.childNodes).forEach(c=>{c instanceof HTMLVideoElement||c instanceof HTMLAudioElement?n.appendChild(c.cloneNode(!0)):n.appendChild(c)})}},Si=(n,e)=>{if(!e)return!1;const t=e.split(/\s+/);for(let s=0;s<t.length;s++)if(!n.classList.contains(t[s]))return!1;return!0},AP=(n,e)=>{Array.from(n.classList).forEach(t=>{!Object.values(se).includes(t)&&!Object.values(vm).includes(t)&&!Object.values(e.showClass||{}).includes(t)&&n.classList.remove(t)})},Is=(n,e,t)=>{if(AP(n,e),!e.customClass)return;const s=e.customClass[t];if(s){if(typeof s!="string"&&!s.forEach){Jn(`Invalid type of customClass.${t}! Expected string or iterable object, got "${typeof s}"`);return}mt(n,s)}},fg=(n,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return n.querySelector(`.${se.popup} > .${se[e]}`);case"checkbox":return n.querySelector(`.${se.popup} > .${se.checkbox} input`);case"radio":return n.querySelector(`.${se.popup} > .${se.radio} input:checked`)||n.querySelector(`.${se.popup} > .${se.radio} input:first-child`);case"range":return n.querySelector(`.${se.popup} > .${se.range} input`);default:return n.querySelector(`.${se.popup} > .${se.input}`)}},S5=n=>{if(n.focus(),n.type!=="file"){const e=n.value;n.value="",n.value=e}},A5=(n,e,t)=>{!n||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(s=>{Array.isArray(n)?n.forEach(a=>{t?a.classList.add(s):a.classList.remove(s)}):t?n.classList.add(s):n.classList.remove(s)}))},mt=(n,e)=>{A5(n,e,!0)},Zs=(n,e)=>{A5(n,e,!1)},Ta=(n,e)=>{const t=Array.from(n.children);for(let s=0;s<t.length;s++){const a=t[s];if(a instanceof HTMLElement&&Si(a,e))return a}},Uo=(n,e,t)=>{t===`${parseInt(`${t}`)}`&&(t=parseInt(t)),t||parseInt(`${t}`)===0?n.style.setProperty(e,typeof t=="number"?`${t}px`:t):n.style.removeProperty(e)},xn=(n,e="flex")=>{n&&(n.style.display=e)},$n=n=>{n&&(n.style.display="none")},sb=(n,e="block")=>{n&&new MutationObserver(()=>{zd(n,n.innerHTML,e)}).observe(n,{childList:!0,subtree:!0})},fE=(n,e,t,s)=>{const a=n.querySelector(e);a&&a.style.setProperty(t,s)},zd=(n,e,t="flex")=>{e?xn(n,t):$n(n)},fs=n=>!!(n&&(n.offsetWidth||n.offsetHeight||n.getClientRects().length)),NP=()=>!fs(Xr())&&!fs(nl())&&!fs(Gc()),Oy=n=>n.scrollHeight>n.clientHeight,CP=(n,e)=>{let t=n;for(;t&&t!==e;){if(Oy(t))return!0;t=t.parentElement}return!1},N5=n=>{const e=window.getComputedStyle(n),t=parseFloat(e.getPropertyValue("animation-duration")||"0"),s=parseFloat(e.getPropertyValue("transition-duration")||"0");return t>0||s>0},rb=(n,e=!1)=>{const t=dg();t&&fs(t)&&(e&&(t.style.transition="none",t.style.width="100%"),setTimeout(()=>{t.style.transition=`width ${n/1e3}s linear`,t.style.width="0%"},10))},kP=()=>{const n=dg();if(!n)return;const e=parseInt(window.getComputedStyle(n).width);n.style.removeProperty("transition"),n.style.width="100%";const t=parseInt(window.getComputedStyle(n).width),s=e/t*100;n.style.width=`${s}%`},IP=()=>typeof window>"u"||typeof document>"u",RP=`
 <div aria-labelledby="${se.title}" aria-describedby="${se["html-container"]}" class="${se.popup}" tabindex="-1">
   <button type="button" class="${se.close}"></button>
   <ul class="${se["progress-steps"]}"></ul>
   <div class="${se.icon}"></div>
   <img class="${se.image}" />
   <h2 class="${se.title}" id="${se.title}"></h2>
   <div class="${se["html-container"]}" id="${se["html-container"]}"></div>
   <input class="${se.input}" id="${se.input}" />
   <input type="file" class="${se.file}" />
   <div class="${se.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${se.select}" id="${se.select}"></select>
   <div class="${se.radio}"></div>
   <label class="${se.checkbox}">
     <input type="checkbox" id="${se.checkbox}" />
     <span class="${se.label}"></span>
   </label>
   <textarea class="${se.textarea}" id="${se.textarea}"></textarea>
   <div class="${se["validation-message"]}" id="${se["validation-message"]}"></div>
   <div class="${se.actions}">
     <div class="${se.loader}"></div>
     <button type="button" class="${se.confirm}"></button>
     <button type="button" class="${se.deny}"></button>
     <button type="button" class="${se.cancel}"></button>
   </div>
   <div class="${se.footer}"></div>
   <div class="${se["timer-progress-bar-container"]}">
     <div class="${se["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),jP=()=>{const n=Zn();return n?(n.remove(),Zs([document.documentElement,document.body],[se["no-backdrop"],se["toast-shown"],se["has-column"]]),!0):!1},Co=()=>{De.currentInstance.resetValidationMessage()},OP=()=>{const n=dt(),e=Ta(n,se.input),t=Ta(n,se.file),s=n.querySelector(`.${se.range} input`),a=n.querySelector(`.${se.range} output`),o=Ta(n,se.select),c=n.querySelector(`.${se.checkbox} input`),h=Ta(n,se.textarea);e.oninput=Co,t.onchange=Co,o.onchange=Co,c.onchange=Co,h.oninput=Co,s.oninput=()=>{Co(),a.value=s.value},s.onchange=()=>{Co(),a.value=s.value}},DP=n=>typeof n=="string"?document.querySelector(n):n,PP=n=>{const e=dt();e.setAttribute("role",n.toast?"alert":"dialog"),e.setAttribute("aria-live",n.toast?"polite":"assertive"),n.toast||e.setAttribute("aria-modal","true")},LP=n=>{window.getComputedStyle(n).direction==="rtl"&&(mt(Zn(),se.rtl),De.isRTL=!0)},MP=n=>{const e=jP();if(IP()){tl("SweetAlert2 requires document to initialize");return}const t=document.createElement("div");t.className=se.container,e&&mt(t,se["no-transition"]),js(t,RP),t.dataset.swal2Theme=n.theme;const s=DP(n.target);s.appendChild(t),n.topLayer&&(t.setAttribute("popover",""),t.showPopover()),PP(n),LP(s),OP()},ib=(n,e)=>{n instanceof HTMLElement?e.appendChild(n):typeof n=="object"?VP(n,e):n&&js(e,n)},VP=(n,e)=>{n.jquery?UP(e,n):js(e,n.toString())},UP=(n,e)=>{if(n.textContent="",0 in e)for(let t=0;t in e;t++)n.appendChild(e[t].cloneNode(!0));else n.appendChild(e.cloneNode(!0))},BP=(n,e)=>{const t=Bd(),s=Kc();!t||!s||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?$n(t):xn(t),Is(t,e,"actions"),zP(t,s,e),js(s,e.loaderHtml||""),Is(s,e,"loader"))};function zP(n,e,t){const s=Xr(),a=nl(),o=Gc();!s||!a||!o||(z0(s,"confirm",t),z0(a,"deny",t),z0(o,"cancel",t),HP(s,a,o,t),t.reverseButtons&&(t.toast?(n.insertBefore(o,s),n.insertBefore(a,s)):(n.insertBefore(o,e),n.insertBefore(a,e),n.insertBefore(s,e))))}function HP(n,e,t,s){if(!s.buttonsStyling){Zs([n,e,t],se.styled);return}mt([n,e,t],se.styled),s.confirmButtonColor&&n.style.setProperty("--swal2-confirm-button-background-color",s.confirmButtonColor),s.denyButtonColor&&e.style.setProperty("--swal2-deny-button-background-color",s.denyButtonColor),s.cancelButtonColor&&t.style.setProperty("--swal2-cancel-button-background-color",s.cancelButtonColor),B0(n),B0(e),B0(t)}function B0(n){const e=window.getComputedStyle(n);if(e.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const t=e.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");n.style.setProperty("--swal2-action-button-focus-box-shadow",e.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${t}`))}function z0(n,e,t){const s=Wv(e);zd(n,t[`show${s}Button`],"inline-block"),js(n,t[`${e}ButtonText`]||""),n.setAttribute("aria-label",t[`${e}ButtonAriaLabel`]||""),n.className=se[e],Is(n,t,`${e}Button`)}const qP=(n,e)=>{const t=eb();t&&(js(t,e.closeButtonHtml||""),Is(t,e,"closeButton"),zd(t,e.showCloseButton),t.setAttribute("aria-label",e.closeButtonAriaLabel||""))},$P=(n,e)=>{const t=Zn();t&&(FP(t,e.backdrop),GP(t,e.position),KP(t,e.grow),Is(t,e,"container"))};function FP(n,e){typeof e=="string"?n.style.background=e:e||mt([document.documentElement,document.body],se["no-backdrop"])}function GP(n,e){e&&(e in se?mt(n,se[e]):(Jn('The "position" parameter is not valid, defaulting to "center"'),mt(n,se.center)))}function KP(n,e){e&&mt(n,se[`grow-${e}`])}var Rt={innerParams:new WeakMap,domCache:new WeakMap};const QP=["input","file","range","select","radio","checkbox","textarea"],WP=(n,e)=>{const t=dt();if(!t)return;const s=Rt.innerParams.get(n),a=!s||e.input!==s.input;QP.forEach(o=>{const c=Ta(t,se[o]);c&&(JP(o,e.inputAttributes),c.className=se[o],a&&$n(c))}),e.input&&(a&&YP(e),ZP(e))},YP=n=>{if(!n.input)return;if(!Jt[n.input]){tl(`Unexpected type of input! Expected ${Object.keys(Jt).join(" | ")}, got "${n.input}"`);return}const e=C5(n.input);if(!e)return;const t=Jt[n.input](e,n);xn(e),n.inputAutoFocus&&setTimeout(()=>{S5(t)})},XP=n=>{for(let e=0;e<n.attributes.length;e++){const t=n.attributes[e].name;["id","type","value","style"].includes(t)||n.removeAttribute(t)}},JP=(n,e)=>{const t=dt();if(!t)return;const s=fg(t,n);if(s){XP(s);for(const a in e)s.setAttribute(a,e[a])}},ZP=n=>{if(!n.input)return;const e=C5(n.input);e&&Is(e,n,"input")},ab=(n,e)=>{!n.placeholder&&e.inputPlaceholder&&(n.placeholder=e.inputPlaceholder)},Hd=(n,e,t)=>{if(t.inputLabel){const s=document.createElement("label"),a=se["input-label"];s.setAttribute("for",n.id),s.className=a,typeof t.customClass=="object"&&mt(s,t.customClass.inputLabel),s.innerText=t.inputLabel,e.insertAdjacentElement("beforebegin",s)}},C5=n=>{const e=dt();if(e)return Ta(e,se[n]||se.input)},bm=(n,e)=>{["string","number"].includes(typeof e)?n.value=`${e}`:Xv(e)||Jn(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},Jt={};Jt.text=Jt.email=Jt.password=Jt.number=Jt.tel=Jt.url=Jt.search=Jt.date=Jt["datetime-local"]=Jt.time=Jt.week=Jt.month=(n,e)=>(bm(n,e.inputValue),Hd(n,n,e),ab(n,e),n.type=e.input,n);Jt.file=(n,e)=>(Hd(n,n,e),ab(n,e),n);Jt.range=(n,e)=>{const t=n.querySelector("input"),s=n.querySelector("output");return bm(t,e.inputValue),t.type=e.input,bm(s,e.inputValue),Hd(t,n,e),n};Jt.select=(n,e)=>{if(n.textContent="",e.inputPlaceholder){const t=document.createElement("option");js(t,e.inputPlaceholder),t.value="",t.disabled=!0,t.selected=!0,n.appendChild(t)}return Hd(n,n,e),n};Jt.radio=n=>(n.textContent="",n);Jt.checkbox=(n,e)=>{const t=fg(dt(),"checkbox");t.value="1",t.checked=!!e.inputValue;const s=n.querySelector("span");return js(s,e.inputPlaceholder||e.inputLabel),t};Jt.textarea=(n,e)=>{bm(n,e.inputValue),ab(n,e),Hd(n,n,e);const t=s=>parseInt(window.getComputedStyle(s).marginLeft)+parseInt(window.getComputedStyle(s).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const s=parseInt(window.getComputedStyle(dt()).width),a=()=>{if(!document.body.contains(n))return;const o=n.offsetWidth+t(n);o>s?dt().style.width=`${o}px`:Uo(dt(),"width",e.width)};new MutationObserver(a).observe(n,{attributes:!0,attributeFilter:["style"]})}}),n};const eL=(n,e)=>{const t=Jv();t&&(sb(t),Is(t,e,"htmlContainer"),e.html?(ib(e.html,t),xn(t,"block")):e.text?(t.textContent=e.text,xn(t,"block")):$n(t),WP(n,e))},tL=(n,e)=>{const t=T5();t&&(sb(t),zd(t,!!e.footer,"block"),e.footer&&ib(e.footer,t),Is(t,e,"footer"))},nL=(n,e)=>{const t=Rt.innerParams.get(n),s=Fc();if(!s)return;if(t&&e.icon===t.icon){gE(s,e),mE(s,e);return}if(!e.icon&&!e.iconHtml){$n(s);return}if(e.icon&&Object.keys(vm).indexOf(e.icon)===-1){tl(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),$n(s);return}xn(s),gE(s,e),mE(s,e),mt(s,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",k5)},mE=(n,e)=>{for(const[t,s]of Object.entries(vm))e.icon!==t&&Zs(n,s);mt(n,e.icon&&vm[e.icon]),iL(n,e),k5(),Is(n,e,"icon")},k5=()=>{const n=dt();if(!n)return;const e=window.getComputedStyle(n).getPropertyValue("background-color"),t=n.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let s=0;s<t.length;s++)t[s].style.backgroundColor=e},sL=n=>`
  ${n.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${n.animation?'<div class="swal2-success-fix"></div>':""}
  ${n.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,rL=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,gE=(n,e)=>{if(!e.icon&&!e.iconHtml)return;let t=n.innerHTML,s="";e.iconHtml?s=pE(e.iconHtml):e.icon==="success"?(s=sL(e),t=t.replace(/ style=".*?"/g,"")):e.icon==="error"?s=rL:e.icon&&(s=pE({question:"?",warning:"!",info:"i"}[e.icon])),t.trim()!==s.trim()&&js(n,s)},iL=(n,e)=>{if(e.iconColor){n.style.color=e.iconColor,n.style.borderColor=e.iconColor;for(const t of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])fE(n,t,"background-color",e.iconColor);fE(n,".swal2-success-ring","border-color",e.iconColor)}},pE=n=>`<div class="${se["icon-content"]}">${n}</div>`,aL=(n,e)=>{const t=E5();if(t){if(!e.imageUrl){$n(t);return}xn(t,""),t.setAttribute("src",e.imageUrl),t.setAttribute("alt",e.imageAlt||""),Uo(t,"width",e.imageWidth),Uo(t,"height",e.imageHeight),t.className=se.image,Is(t,e,"image")}};let ob=!1,I5=0,R5=0,j5=0,O5=0;const oL=n=>{n.addEventListener("mousedown",wm),document.body.addEventListener("mousemove",_m),n.addEventListener("mouseup",xm),n.addEventListener("touchstart",wm),document.body.addEventListener("touchmove",_m),n.addEventListener("touchend",xm)},lL=n=>{n.removeEventListener("mousedown",wm),document.body.removeEventListener("mousemove",_m),n.removeEventListener("mouseup",xm),n.removeEventListener("touchstart",wm),document.body.removeEventListener("touchmove",_m),n.removeEventListener("touchend",xm)},wm=n=>{const e=dt();if(n.target===e||Fc().contains(n.target)){ob=!0;const t=D5(n);I5=t.clientX,R5=t.clientY,j5=parseInt(e.style.insetInlineStart)||0,O5=parseInt(e.style.insetBlockStart)||0,mt(e,"swal2-dragging")}},_m=n=>{const e=dt();if(ob){let{clientX:t,clientY:s}=D5(n);const a=t-I5;e.style.insetInlineStart=`${j5+(De.isRTL?-a:a)}px`,e.style.insetBlockStart=`${O5+(s-R5)}px`}},xm=()=>{const n=dt();ob=!1,Zs(n,"swal2-dragging")},D5=n=>{let e=0,t=0;return n.type.startsWith("mouse")?(e=n.clientX,t=n.clientY):n.type.startsWith("touch")&&(e=n.touches[0].clientX,t=n.touches[0].clientY),{clientX:e,clientY:t}},cL=(n,e)=>{const t=Zn(),s=dt();if(!(!t||!s)){if(e.toast){Uo(t,"width",e.width),s.style.width="100%";const a=Kc();a&&s.insertBefore(a,Fc())}else Uo(s,"width",e.width);Uo(s,"padding",e.padding),e.color&&(s.style.color=e.color),e.background&&(s.style.background=e.background),$n(ug()),uL(s,e),e.draggable&&!e.toast?(mt(s,se.draggable),oL(s)):(Zs(s,se.draggable),lL(s))}},uL=(n,e)=>{const t=e.showClass||{};n.className=`${se.popup} ${fs(n)?t.popup:""}`,e.toast?(mt([document.documentElement,document.body],se["toast-shown"]),mt(n,se.toast)):mt(n,se.modal),Is(n,e,"popup"),typeof e.customClass=="string"&&mt(n,e.customClass),e.icon&&mt(n,se[`icon-${e.icon}`])},dL=(n,e)=>{const t=Zv();if(!t)return;const{progressSteps:s,currentProgressStep:a}=e;if(!s||s.length===0||a===void 0){$n(t);return}xn(t),t.textContent="",a>=s.length&&Jn("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),s.forEach((o,c)=>{const h=hL(o);if(t.appendChild(h),c===a&&mt(h,se["active-progress-step"]),c!==s.length-1){const g=fL(e);t.appendChild(g)}})},hL=n=>{const e=document.createElement("li");return mt(e,se["progress-step"]),js(e,n),e},fL=n=>{const e=document.createElement("li");return mt(e,se["progress-step-line"]),n.progressStepsDistance&&Uo(e,"width",n.progressStepsDistance),e},mL=(n,e)=>{const t=x5();t&&(sb(t),zd(t,!!(e.title||e.titleText),"block"),e.title&&ib(e.title,t),e.titleText&&(t.innerText=e.titleText),Is(t,e,"title"))},P5=(n,e)=>{cL(n,e),$P(n,e),dL(n,e),nL(n,e),aL(n,e),mL(n,e),qP(n,e),eL(n,e),BP(n,e),tL(n,e);const t=dt();typeof e.didRender=="function"&&t&&e.didRender(t),De.eventEmitter.emit("didRender",t)},gL=()=>fs(dt()),L5=()=>{var n;return(n=Xr())===null||n===void 0?void 0:n.click()},pL=()=>{var n;return(n=nl())===null||n===void 0?void 0:n.click()},yL=()=>{var n;return(n=Gc())===null||n===void 0?void 0:n.click()},Qc=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),M5=n=>{n.keydownTarget&&n.keydownHandlerAdded&&(n.keydownTarget.removeEventListener("keydown",n.keydownHandler,{capture:n.keydownListenerCapture}),n.keydownHandlerAdded=!1)},vL=(n,e,t)=>{M5(n),e.toast||(n.keydownHandler=s=>wL(e,s,t),n.keydownTarget=e.keydownListenerCapture?window:dt(),n.keydownListenerCapture=e.keydownListenerCapture,n.keydownTarget.addEventListener("keydown",n.keydownHandler,{capture:n.keydownListenerCapture}),n.keydownHandlerAdded=!0)},Dy=(n,e)=>{var t;const s=tb();if(s.length){n=n+e,n===-2&&(n=s.length-1),n===s.length?n=0:n===-1&&(n=s.length-1),s[n].focus();return}(t=dt())===null||t===void 0||t.focus()},V5=["ArrowRight","ArrowDown"],bL=["ArrowLeft","ArrowUp"],wL=(n,e,t)=>{n&&(e.isComposing||e.keyCode===229||(n.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?_L(e,n):e.key==="Tab"?xL(e):[...V5,...bL].includes(e.key)?EL(e.key):e.key==="Escape"&&TL(e,n,t)))},_L=(n,e)=>{if(!cg(e.allowEnterKey))return;const t=fg(dt(),e.input);if(n.target&&t&&n.target instanceof HTMLElement&&n.target.outerHTML===t.outerHTML){if(["textarea","file"].includes(e.input))return;L5(),n.preventDefault()}},xL=n=>{const e=n.target,t=tb();let s=-1;for(let a=0;a<t.length;a++)if(e===t[a]){s=a;break}n.shiftKey?Dy(s,-1):Dy(s,1),n.stopPropagation(),n.preventDefault()},EL=n=>{const e=Bd(),t=Xr(),s=nl(),a=Gc();if(!e||!t||!s||!a)return;const o=[t,s,a];if(document.activeElement instanceof HTMLElement&&!o.includes(document.activeElement))return;const c=V5.includes(n)?"nextElementSibling":"previousElementSibling";let h=document.activeElement;if(h){for(let g=0;g<e.children.length;g++){if(h=h[c],!h)return;if(h instanceof HTMLButtonElement&&fs(h))break}h instanceof HTMLButtonElement&&h.focus()}},TL=(n,e,t)=>{n.preventDefault(),cg(e.allowEscapeKey)&&t(Qc.esc)};var Rc={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const SL=()=>{const n=Zn();Array.from(document.body.children).forEach(t=>{t.contains(n)||(t.hasAttribute("aria-hidden")&&t.setAttribute("data-previous-aria-hidden",t.getAttribute("aria-hidden")||""),t.setAttribute("aria-hidden","true"))})},U5=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},B5=typeof window<"u"&&!!window.GestureEvent,AL=()=>{if(B5&&!Si(document.body,se.iosfix)){const n=document.body.scrollTop;document.body.style.top=`${n*-1}px`,mt(document.body,se.iosfix),NL()}},NL=()=>{const n=Zn();if(!n)return;let e;n.ontouchstart=t=>{e=CL(t)},n.ontouchmove=t=>{e&&(t.preventDefault(),t.stopPropagation())}},CL=n=>{const e=n.target,t=Zn(),s=Jv();return!t||!s||kL(n)||IL(n)?!1:e===t||!Oy(t)&&e instanceof HTMLElement&&!CP(e,s)&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(Oy(s)&&s.contains(e))},kL=n=>n.touches&&n.touches.length&&n.touches[0].touchType==="stylus",IL=n=>n.touches&&n.touches.length>1,RL=()=>{if(Si(document.body,se.iosfix)){const n=parseInt(document.body.style.top,10);Zs(document.body,se.iosfix),document.body.style.top="",document.body.scrollTop=n*-1}},jL=()=>{const n=document.createElement("div");n.className=se["scrollbar-measure"],document.body.appendChild(n);const e=n.getBoundingClientRect().width-n.clientWidth;return document.body.removeChild(n),e};let gc=null;const OL=n=>{gc===null&&(document.body.scrollHeight>window.innerHeight||n==="scroll")&&(gc=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${gc+jL()}px`)},DL=()=>{gc!==null&&(document.body.style.paddingRight=`${gc}px`,gc=null)};function z5(n,e,t,s){hg()?yE(n,s):(vP(t).then(()=>yE(n,s)),M5(De)),B5?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),nb()&&(DL(),RL(),U5()),PL()}function PL(){Zs([document.documentElement,document.body],[se.shown,se["height-auto"],se["no-backdrop"],se["toast-shown"]])}function Sa(n){n=ML(n);const e=Rc.swalPromiseResolve.get(this),t=LL(this);this.isAwaitingPromise?n.isDismissed||(qd(this),e(n)):t&&e(n)}const LL=n=>{const e=dt();if(!e)return!1;const t=Rt.innerParams.get(n);if(!t||Si(e,t.hideClass.popup))return!1;Zs(e,t.showClass.popup),mt(e,t.hideClass.popup);const s=Zn();return Zs(s,t.showClass.backdrop),mt(s,t.hideClass.backdrop),VL(n,e,t),!0};function H5(n){const e=Rc.swalPromiseReject.get(this);qd(this),e&&e(n)}const qd=n=>{n.isAwaitingPromise&&(delete n.isAwaitingPromise,Rt.innerParams.get(n)||n._destroy())},ML=n=>typeof n>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},n),VL=(n,e,t)=>{var s;const a=Zn(),o=N5(e);typeof t.willClose=="function"&&t.willClose(e),(s=De.eventEmitter)===null||s===void 0||s.emit("willClose",e),o?UL(n,e,a,t.returnFocus,t.didClose):z5(n,a,t.returnFocus,t.didClose)},UL=(n,e,t,s,a)=>{De.swalCloseEventFinishedCallback=z5.bind(null,n,t,s,a);const o=function(c){if(c.target===e){var h;(h=De.swalCloseEventFinishedCallback)===null||h===void 0||h.call(De),delete De.swalCloseEventFinishedCallback,e.removeEventListener("animationend",o),e.removeEventListener("transitionend",o)}};e.addEventListener("animationend",o),e.addEventListener("transitionend",o)},yE=(n,e)=>{setTimeout(()=>{var t;typeof e=="function"&&e.bind(n.params)(),(t=De.eventEmitter)===null||t===void 0||t.emit("didClose"),n._destroy&&n._destroy()})},jc=n=>{let e=dt();if(e||new Oc,e=dt(),!e)return;const t=Kc();hg()?$n(Fc()):BL(e,n),xn(t),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},BL=(n,e)=>{const t=Bd(),s=Kc();!t||!s||(!e&&fs(Xr())&&(e=Xr()),xn(t),e&&($n(e),s.setAttribute("data-button-to-replace",e.className),t.insertBefore(s,e)),mt([n,t],se.loading))},zL=(n,e)=>{e.input==="select"||e.input==="radio"?GL(n,e):["text","email","number","tel","textarea"].some(t=>t===e.input)&&(Yv(e.inputValue)||Xv(e.inputValue))&&(jc(Xr()),KL(n,e))},HL=(n,e)=>{const t=n.getInput();if(!t)return null;switch(e.input){case"checkbox":return qL(t);case"radio":return $L(t);case"file":return FL(t);default:return e.inputAutoTrim?t.value.trim():t.value}},qL=n=>n.checked?1:0,$L=n=>n.checked?n.value:null,FL=n=>n.files&&n.files.length?n.getAttribute("multiple")!==null?n.files:n.files[0]:null,GL=(n,e)=>{const t=dt();if(!t)return;const s=a=>{e.input==="select"?QL(t,Em(a),e):e.input==="radio"&&WL(t,Em(a),e)};Yv(e.inputOptions)||Xv(e.inputOptions)?(jc(Xr()),Vd(e.inputOptions).then(a=>{n.hideLoading(),s(a)})):typeof e.inputOptions=="object"?s(e.inputOptions):tl(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},KL=(n,e)=>{const t=n.getInput();t&&($n(t),Vd(e.inputValue).then(s=>{t.value=e.input==="number"?`${parseFloat(s)||0}`:`${s}`,xn(t),t.focus(),n.hideLoading()}).catch(s=>{tl(`Error in inputValue promise: ${s}`),t.value="",xn(t),t.focus(),n.hideLoading()}))};function QL(n,e,t){const s=Ta(n,se.select);if(!s)return;const a=(o,c,h)=>{const g=document.createElement("option");g.value=h,js(g,c),g.selected=q5(h,t.inputValue),o.appendChild(g)};e.forEach(o=>{const c=o[0],h=o[1];if(Array.isArray(h)){const g=document.createElement("optgroup");g.label=c,g.disabled=!1,s.appendChild(g),h.forEach(p=>a(g,p[1],p[0]))}else a(s,h,c)}),s.focus()}function WL(n,e,t){const s=Ta(n,se.radio);if(!s)return;e.forEach(o=>{const c=o[0],h=o[1],g=document.createElement("input"),p=document.createElement("label");g.type="radio",g.name=se.radio,g.value=c,q5(c,t.inputValue)&&(g.checked=!0);const v=document.createElement("span");js(v,h),v.className=se.label,p.appendChild(g),p.appendChild(v),s.appendChild(p)});const a=s.querySelectorAll("input");a.length&&a[0].focus()}const Em=n=>{const e=[];return n instanceof Map?n.forEach((t,s)=>{let a=t;typeof a=="object"&&(a=Em(a)),e.push([s,a])}):Object.keys(n).forEach(t=>{let s=n[t];typeof s=="object"&&(s=Em(s)),e.push([t,s])}),e},q5=(n,e)=>!!e&&e.toString()===n.toString(),YL=n=>{const e=Rt.innerParams.get(n);n.disableButtons(),e.input?$5(n,"confirm"):cb(n,!0)},XL=n=>{const e=Rt.innerParams.get(n);n.disableButtons(),e.returnInputValueOnDeny?$5(n,"deny"):lb(n,!1)},JL=(n,e)=>{n.disableButtons(),e(Qc.cancel)},$5=(n,e)=>{const t=Rt.innerParams.get(n);if(!t.input){tl(`The "input" parameter is needed to be set when using returnInputValueOn${Wv(e)}`);return}const s=n.getInput(),a=HL(n,t);t.inputValidator?ZL(n,a,e):s&&!s.checkValidity()?(n.enableButtons(),n.showValidationMessage(t.validationMessage||s.validationMessage)):e==="deny"?lb(n,a):cb(n,a)},ZL=(n,e,t)=>{const s=Rt.innerParams.get(n);n.disableInput(),Promise.resolve().then(()=>Vd(s.inputValidator(e,s.validationMessage))).then(o=>{n.enableButtons(),n.enableInput(),o?n.showValidationMessage(o):t==="deny"?lb(n,e):cb(n,e)})},lb=(n,e)=>{const t=Rt.innerParams.get(n||void 0);t.showLoaderOnDeny&&jc(nl()),t.preDeny?(n.isAwaitingPromise=!0,Promise.resolve().then(()=>Vd(t.preDeny(e,t.validationMessage))).then(a=>{a===!1?(n.hideLoading(),qd(n)):n.close({isDenied:!0,value:typeof a>"u"?e:a})}).catch(a=>F5(n||void 0,a))):n.close({isDenied:!0,value:e})},vE=(n,e)=>{n.close({isConfirmed:!0,value:e})},F5=(n,e)=>{n.rejectPromise(e)},cb=(n,e)=>{const t=Rt.innerParams.get(n||void 0);t.showLoaderOnConfirm&&jc(),t.preConfirm?(n.resetValidationMessage(),n.isAwaitingPromise=!0,Promise.resolve().then(()=>Vd(t.preConfirm(e,t.validationMessage))).then(a=>{fs(ug())||a===!1?(n.hideLoading(),qd(n)):vE(n,typeof a>"u"?e:a)}).catch(a=>F5(n||void 0,a))):vE(n,e)};function Tm(){const n=Rt.innerParams.get(this);if(!n)return;const e=Rt.domCache.get(this);$n(e.loader),hg()?n.icon&&xn(Fc()):eM(e),Zs([e.popup,e.actions],se.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const eM=n=>{const e=n.popup.getElementsByClassName(n.loader.getAttribute("data-button-to-replace"));e.length?xn(e[0],"inline-block"):NP()&&$n(n.actions)};function G5(){const n=Rt.innerParams.get(this),e=Rt.domCache.get(this);return e?fg(e.popup,n.input):null}function K5(n,e,t){const s=Rt.domCache.get(n);e.forEach(a=>{s[a].disabled=t})}function Q5(n,e){const t=dt();if(!(!t||!n))if(n.type==="radio"){const s=t.querySelectorAll(`[name="${se.radio}"]`);for(let a=0;a<s.length;a++)s[a].disabled=e}else n.disabled=e}function W5(){K5(this,["confirmButton","denyButton","cancelButton"],!1)}function Y5(){K5(this,["confirmButton","denyButton","cancelButton"],!0)}function X5(){Q5(this.getInput(),!1)}function J5(){Q5(this.getInput(),!0)}function Z5(n){const e=Rt.domCache.get(this),t=Rt.innerParams.get(this);js(e.validationMessage,n),e.validationMessage.className=se["validation-message"],t.customClass&&t.customClass.validationMessage&&mt(e.validationMessage,t.customClass.validationMessage),xn(e.validationMessage);const s=this.getInput();s&&(s.setAttribute("aria-invalid","true"),s.setAttribute("aria-describedby",se["validation-message"]),S5(s),mt(s,se.inputerror))}function eA(){const n=Rt.domCache.get(this);n.validationMessage&&$n(n.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),Zs(e,se.inputerror))}const pc={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},tM=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],nM={allowEnterKey:void 0},sM=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],tA=n=>Object.prototype.hasOwnProperty.call(pc,n),nA=n=>tM.indexOf(n)!==-1,sA=n=>nM[n],rM=n=>{tA(n)||Jn(`Unknown parameter "${n}"`)},iM=n=>{sM.includes(n)&&Jn(`The parameter "${n}" is incompatible with toasts`)},aM=n=>{const e=sA(n);e&&_5(n,e)},rA=n=>{n.backdrop===!1&&n.allowOutsideClick&&Jn('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),n.theme&&!["light","dark","auto","minimal","borderless","bootstrap-4","bootstrap-4-light","bootstrap-4-dark","bootstrap-5","bootstrap-5-light","bootstrap-5-dark","material-ui","material-ui-light","material-ui-dark","embed-iframe","bulma","bulma-light","bulma-dark"].includes(n.theme)&&Jn(`Invalid theme "${n.theme}"`);for(const e in n)rM(e),n.toast&&iM(e),aM(e)};function iA(n){const e=Zn(),t=dt(),s=Rt.innerParams.get(this);if(!t||Si(t,s.hideClass.popup)){Jn("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const a=oM(n),o=Object.assign({},s,a);rA(o),e.dataset.swal2Theme=o.theme,P5(this,o),Rt.innerParams.set(this,o),Object.defineProperties(this,{params:{value:Object.assign({},this.params,n),writable:!1,enumerable:!0}})}const oM=n=>{const e={};return Object.keys(n).forEach(t=>{nA(t)?e[t]=n[t]:Jn(`Invalid parameter to update: ${t}`)}),e};function aA(){const n=Rt.domCache.get(this),e=Rt.innerParams.get(this);if(!e){oA(this);return}n.popup&&De.swalCloseEventFinishedCallback&&(De.swalCloseEventFinishedCallback(),delete De.swalCloseEventFinishedCallback),typeof e.didDestroy=="function"&&e.didDestroy(),De.eventEmitter.emit("didDestroy"),lM(this)}const lM=n=>{oA(n),delete n.params,delete De.keydownHandler,delete De.keydownTarget,delete De.currentInstance},oA=n=>{n.isAwaitingPromise?(H0(Rt,n),n.isAwaitingPromise=!0):(H0(Rc,n),H0(Rt,n),delete n.isAwaitingPromise,delete n.disableButtons,delete n.enableButtons,delete n.getInput,delete n.disableInput,delete n.enableInput,delete n.hideLoading,delete n.disableLoading,delete n.showValidationMessage,delete n.resetValidationMessage,delete n.close,delete n.closePopup,delete n.closeModal,delete n.closeToast,delete n.rejectPromise,delete n.update,delete n._destroy)},H0=(n,e)=>{for(const t in n)n[t].delete(e)};var cM=Object.freeze({__proto__:null,_destroy:aA,close:Sa,closeModal:Sa,closePopup:Sa,closeToast:Sa,disableButtons:Y5,disableInput:J5,disableLoading:Tm,enableButtons:W5,enableInput:X5,getInput:G5,handleAwaitingPromise:qd,hideLoading:Tm,rejectPromise:H5,resetValidationMessage:eA,showValidationMessage:Z5,update:iA});const uM=(n,e,t)=>{n.toast?dM(n,e,t):(fM(e),mM(e),gM(n,e,t))},dM=(n,e,t)=>{e.popup.onclick=()=>{n&&(hM(n)||n.timer||n.input)||t(Qc.close)}},hM=n=>!!(n.showConfirmButton||n.showDenyButton||n.showCancelButton||n.showCloseButton);let Sm=!1;const fM=n=>{n.popup.onmousedown=()=>{n.container.onmouseup=function(e){n.container.onmouseup=()=>{},e.target===n.container&&(Sm=!0)}}},mM=n=>{n.container.onmousedown=e=>{e.target===n.container&&e.preventDefault(),n.popup.onmouseup=function(t){n.popup.onmouseup=()=>{},(t.target===n.popup||t.target instanceof HTMLElement&&n.popup.contains(t.target))&&(Sm=!0)}}},gM=(n,e,t)=>{e.container.onclick=s=>{if(Sm){Sm=!1;return}s.target===e.container&&cg(n.allowOutsideClick)&&t(Qc.backdrop)}},pM=n=>typeof n=="object"&&n.jquery,bE=n=>n instanceof Element||pM(n),yM=n=>{const e={};return typeof n[0]=="object"&&!bE(n[0])?Object.assign(e,n[0]):["title","html","icon"].forEach((t,s)=>{const a=n[s];typeof a=="string"||bE(a)?e[t]=a:a!==void 0&&tl(`Unexpected type of ${t}! Expected "string" or "Element", got ${typeof a}`)}),e};function vM(...n){return new this(...n)}function bM(n){class e extends this{_main(s,a){return super._main(s,Object.assign({},n,a))}}return e}const wM=()=>De.timeout&&De.timeout.getTimerLeft(),lA=()=>{if(De.timeout)return kP(),De.timeout.stop()},cA=()=>{if(De.timeout){const n=De.timeout.start();return rb(n),n}},_M=()=>{const n=De.timeout;return n&&(n.running?lA():cA())},xM=n=>{if(De.timeout){const e=De.timeout.increase(n);return rb(e,!0),e}},EM=()=>!!(De.timeout&&De.timeout.isRunning());let wE=!1;const Py={};function TM(n="data-swal-template"){Py[n]=this,wE||(document.body.addEventListener("click",SM),wE=!0)}const SM=n=>{for(let e=n.target;e&&e!==document;e=e.parentNode)for(const t in Py){const s=e.getAttribute(t);if(s){Py[t].fire({template:s});return}}};class AM{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,t){const s=this._getHandlersByEventName(e);s.includes(t)||s.push(t)}once(e,t){const s=(...a)=>{this.removeListener(e,s),t.apply(this,a)};this.on(e,s)}emit(e,...t){this._getHandlersByEventName(e).forEach(s=>{try{s.apply(this,t)}catch(a){console.error(a)}})}removeListener(e,t){const s=this._getHandlersByEventName(e),a=s.indexOf(t);a>-1&&s.splice(a,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}}De.eventEmitter=new AM;const NM=(n,e)=>{De.eventEmitter.on(n,e)},CM=(n,e)=>{De.eventEmitter.once(n,e)},kM=(n,e)=>{if(!n){De.eventEmitter.reset();return}e?De.eventEmitter.removeListener(n,e):De.eventEmitter.removeAllListeners(n)};var IM=Object.freeze({__proto__:null,argsToParams:yM,bindClickHandler:TM,clickCancel:yL,clickConfirm:L5,clickDeny:pL,enableLoading:jc,fire:vM,getActions:Bd,getCancelButton:Gc,getCloseButton:eb,getConfirmButton:Xr,getContainer:Zn,getDenyButton:nl,getFocusableElements:tb,getFooter:T5,getHtmlContainer:Jv,getIcon:Fc,getIconContent:xP,getImage:E5,getInputLabel:EP,getLoader:Kc,getPopup:dt,getProgressSteps:Zv,getTimerLeft:wM,getTimerProgressBar:dg,getTitle:x5,getValidationMessage:ug,increaseTimer:xM,isDeprecatedParameter:sA,isLoading:SP,isTimerRunning:EM,isUpdatableParameter:nA,isValidParameter:tA,isVisible:gL,mixin:bM,off:kM,on:NM,once:CM,resumeTimer:cA,showLoading:jc,stopTimer:lA,toggleTimer:_M});class RM{constructor(e,t){this.callback=e,this.remaining=t,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const t=this.running;return t&&this.stop(),this.remaining+=e,t&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const uA=["swal-title","swal-html","swal-footer"],jM=n=>{const e=typeof n.template=="string"?document.querySelector(n.template):n.template;if(!e)return{};const t=e.content;return BM(t),Object.assign(OM(t),DM(t),PM(t),LM(t),MM(t),VM(t),UM(t,uA))},OM=n=>{const e={};return Array.from(n.querySelectorAll("swal-param")).forEach(s=>{Go(s,["name","value"]);const a=s.getAttribute("name"),o=s.getAttribute("value");!a||!o||(typeof pc[a]=="boolean"?e[a]=o!=="false":typeof pc[a]=="object"?e[a]=JSON.parse(o):e[a]=o)}),e},DM=n=>{const e={};return Array.from(n.querySelectorAll("swal-function-param")).forEach(s=>{const a=s.getAttribute("name"),o=s.getAttribute("value");!a||!o||(e[a]=new Function(`return ${o}`)())}),e},PM=n=>{const e={};return Array.from(n.querySelectorAll("swal-button")).forEach(s=>{Go(s,["type","color","aria-label"]);const a=s.getAttribute("type");!a||!["confirm","cancel","deny"].includes(a)||(e[`${a}ButtonText`]=s.innerHTML,e[`show${Wv(a)}Button`]=!0,s.hasAttribute("color")&&(e[`${a}ButtonColor`]=s.getAttribute("color")),s.hasAttribute("aria-label")&&(e[`${a}ButtonAriaLabel`]=s.getAttribute("aria-label")))}),e},LM=n=>{const e={},t=n.querySelector("swal-image");return t&&(Go(t,["src","width","height","alt"]),t.hasAttribute("src")&&(e.imageUrl=t.getAttribute("src")||void 0),t.hasAttribute("width")&&(e.imageWidth=t.getAttribute("width")||void 0),t.hasAttribute("height")&&(e.imageHeight=t.getAttribute("height")||void 0),t.hasAttribute("alt")&&(e.imageAlt=t.getAttribute("alt")||void 0)),e},MM=n=>{const e={},t=n.querySelector("swal-icon");return t&&(Go(t,["type","color"]),t.hasAttribute("type")&&(e.icon=t.getAttribute("type")),t.hasAttribute("color")&&(e.iconColor=t.getAttribute("color")),e.iconHtml=t.innerHTML),e},VM=n=>{const e={},t=n.querySelector("swal-input");t&&(Go(t,["type","label","placeholder","value"]),e.input=t.getAttribute("type")||"text",t.hasAttribute("label")&&(e.inputLabel=t.getAttribute("label")),t.hasAttribute("placeholder")&&(e.inputPlaceholder=t.getAttribute("placeholder")),t.hasAttribute("value")&&(e.inputValue=t.getAttribute("value")));const s=Array.from(n.querySelectorAll("swal-input-option"));return s.length&&(e.inputOptions={},s.forEach(a=>{Go(a,["value"]);const o=a.getAttribute("value");if(!o)return;const c=a.innerHTML;e.inputOptions[o]=c})),e},UM=(n,e)=>{const t={};for(const s in e){const a=e[s],o=n.querySelector(a);o&&(Go(o,[]),t[a.replace(/^swal-/,"")]=o.innerHTML.trim())}return t},BM=n=>{const e=uA.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(n.children).forEach(t=>{const s=t.tagName.toLowerCase();e.includes(s)||Jn(`Unrecognized element <${s}>`)})},Go=(n,e)=>{Array.from(n.attributes).forEach(t=>{e.indexOf(t.name)===-1&&Jn([`Unrecognized attribute "${t.name}" on <${n.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},dA=10,zM=n=>{const e=Zn(),t=dt();typeof n.willOpen=="function"&&n.willOpen(t),De.eventEmitter.emit("willOpen",t);const a=window.getComputedStyle(document.body).overflowY;$M(e,t,n),setTimeout(()=>{HM(e,t)},dA),nb()&&(qM(e,n.scrollbarPadding,a),SL()),!hg()&&!De.previousActiveElement&&(De.previousActiveElement=document.activeElement),typeof n.didOpen=="function"&&setTimeout(()=>n.didOpen(t)),De.eventEmitter.emit("didOpen",t)},Am=n=>{const e=dt();if(n.target!==e)return;const t=Zn();e.removeEventListener("animationend",Am),e.removeEventListener("transitionend",Am),t.style.overflowY="auto",Zs(t,se["no-transition"])},HM=(n,e)=>{N5(e)?(n.style.overflowY="hidden",e.addEventListener("animationend",Am),e.addEventListener("transitionend",Am)):n.style.overflowY="auto"},qM=(n,e,t)=>{AL(),e&&t!=="hidden"&&OL(t),setTimeout(()=>{n.scrollTop=0})},$M=(n,e,t)=>{mt(n,t.showClass.backdrop),t.animation?(e.style.setProperty("opacity","0","important"),xn(e,"grid"),setTimeout(()=>{mt(e,t.showClass.popup),e.style.removeProperty("opacity")},dA)):xn(e,"grid"),mt([document.documentElement,document.body],se.shown),t.heightAuto&&t.backdrop&&!t.toast&&mt([document.documentElement,document.body],se["height-auto"])};var _E={email:(n,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(n)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(n,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(n)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function FM(n){n.inputValidator||(n.input==="email"&&(n.inputValidator=_E.email),n.input==="url"&&(n.inputValidator=_E.url))}function GM(n){(!n.target||typeof n.target=="string"&&!document.querySelector(n.target)||typeof n.target!="string"&&!n.target.appendChild)&&(Jn('Target parameter is not valid, defaulting to "body"'),n.target="body")}function KM(n){FM(n),n.showLoaderOnConfirm&&!n.preConfirm&&Jn(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),GM(n),typeof n.title=="string"&&(n.title=n.title.split(`
`).join("<br />")),MP(n)}let qr;var Nf=new WeakMap;class tn{constructor(...e){if(mP(this,Nf,void 0),typeof window>"u")return;qr=this;const t=Object.freeze(this.constructor.argsToParams(e));this.params=t,this.isAwaitingPromise=!1,gP(Nf,this,this._main(qr.params))}_main(e,t={}){if(rA(Object.assign({},t,e)),De.currentInstance){const o=Rc.swalPromiseResolve.get(De.currentInstance),{isAwaitingPromise:c}=De.currentInstance;De.currentInstance._destroy(),c||o({isDismissed:!0}),nb()&&U5()}De.currentInstance=qr;const s=WM(e,t);KM(s),Object.freeze(s),De.timeout&&(De.timeout.stop(),delete De.timeout),clearTimeout(De.restoreFocusTimeout);const a=YM(qr);return P5(qr,s),Rt.innerParams.set(qr,s),QM(qr,a,s)}then(e){return dE(Nf,this).then(e)}finally(e){return dE(Nf,this).finally(e)}}const QM=(n,e,t)=>new Promise((s,a)=>{const o=c=>{n.close({isDismissed:!0,dismiss:c,isConfirmed:!1,isDenied:!1})};Rc.swalPromiseResolve.set(n,s),Rc.swalPromiseReject.set(n,a),e.confirmButton.onclick=()=>{YL(n)},e.denyButton.onclick=()=>{XL(n)},e.cancelButton.onclick=()=>{JL(n,o)},e.closeButton.onclick=()=>{o(Qc.close)},uM(t,e,o),vL(De,t,o),zL(n,t),zM(t),XM(De,t,o),JM(e,t),setTimeout(()=>{e.container.scrollTop=0})}),WM=(n,e)=>{const t=jM(n),s=Object.assign({},pc,e,t,n);return s.showClass=Object.assign({},pc.showClass,s.showClass),s.hideClass=Object.assign({},pc.hideClass,s.hideClass),s.animation===!1&&(s.showClass={backdrop:"swal2-noanimation"},s.hideClass={}),s},YM=n=>{const e={popup:dt(),container:Zn(),actions:Bd(),confirmButton:Xr(),denyButton:nl(),cancelButton:Gc(),loader:Kc(),closeButton:eb(),validationMessage:ug(),progressSteps:Zv()};return Rt.domCache.set(n,e),e},XM=(n,e,t)=>{const s=dg();$n(s),e.timer&&(n.timeout=new RM(()=>{t("timer"),delete n.timeout},e.timer),e.timerProgressBar&&(xn(s),Is(s,e,"timerProgressBar"),setTimeout(()=>{n.timeout&&n.timeout.running&&rb(e.timer)})))},JM=(n,e)=>{if(!e.toast){if(!cg(e.allowEnterKey)){_5("allowEnterKey"),tV();return}ZM(n)||eV(n,e)||Dy(-1,1)}},ZM=n=>{const e=Array.from(n.popup.querySelectorAll("[autofocus]"));for(const t of e)if(t instanceof HTMLElement&&fs(t))return t.focus(),!0;return!1},eV=(n,e)=>e.focusDeny&&fs(n.denyButton)?(n.denyButton.focus(),!0):e.focusCancel&&fs(n.cancelButton)?(n.cancelButton.focus(),!0):e.focusConfirm&&fs(n.confirmButton)?(n.confirmButton.focus(),!0):!1,tV=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};tn.prototype.disableButtons=Y5;tn.prototype.enableButtons=W5;tn.prototype.getInput=G5;tn.prototype.disableInput=J5;tn.prototype.enableInput=X5;tn.prototype.hideLoading=Tm;tn.prototype.disableLoading=Tm;tn.prototype.showValidationMessage=Z5;tn.prototype.resetValidationMessage=eA;tn.prototype.close=Sa;tn.prototype.closePopup=Sa;tn.prototype.closeModal=Sa;tn.prototype.closeToast=Sa;tn.prototype.rejectPromise=H5;tn.prototype.update=iA;tn.prototype._destroy=aA;Object.assign(tn,IM);Object.keys(cM).forEach(n=>{tn[n]=function(...e){return qr&&qr[n]?qr[n](...e):null}});tn.DismissReason=Qc;tn.version="11.26.4";const Oc=tn;Oc.default=Oc;typeof document<"u"&&(function(n,e){var t=n.createElement("style");if(n.getElementsByTagName("head")[0].appendChild(t),t.styleSheet)t.styleSheet.disabled||(t.styleSheet.cssText=e);else try{t.innerHTML=e}catch{t.innerText=e}})(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.15s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}100%{transform:translate3d(0, 0, 0) scale(1);opacity:1}}@keyframes swal2-hide{0%{transform:translate3d(0, 0, 0) scale(1);opacity:1}100%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const hA="usage_config",fA="settings",mr={guest:{limit:5,period:"daily",isEnabled:!0,showAds:!0,message:"Bn  s dng ht {limit} lt lm th min ph trong ngy. Vui lng ng nhp  tip tc n tp! Mi chi tit lin h phng o to-Cng ty CP T vn v Gio dc Ninh Bnh. ST: 022 96 282 969"},free_user:{limit:10,period:"daily",isEnabled:!0,showAds:!0,message:"Bn  ht {limit} lt lm bi min ph hm nay. Hy ng k lp hc  m kha ton b tnh nng v n tp khng gii hn. Mi chi tit lin h phng o to-Cng ty CP T vn v Gio dc Ninh Bnh. ST: 022 96 282 969"},verified_user:{limit:50,period:"daily",isEnabled:!1,showAds:!1,message:"Ti khon lp ca bn  t gii hn {limit} lt truy cp. Vui lng lin h gio vin hoc admin  c h tr."},vip_user:{limit:100,period:"daily",isEnabled:!1,showAds:!1,message:"Ti khon VIP ca bn  ht {limit} lt s dng. Vui lng gia hn hoc lin h h tr."},teacher:{limit:9999,period:"daily",isEnabled:!1,showAds:!1,message:"Gii hn gio vin."},manager:{limit:9999,period:"daily",isEnabled:!1,showAds:!1,message:"Gii hn cn b qun l."},admin:{limit:9999,period:"daily",isEnabled:!1,showAds:!1,message:"Gii hn Admin."}},ub=async()=>{try{const n=ut(ke,fA,hA),e=await Va(n);if(e.exists()){const t=e.data();return{...mr,guest:{...mr.guest,...t.guest||{}},free_user:{...mr.free_user,...t.free_user||{}},verified_user:{...mr.verified_user,...t.verified_user||{}},vip_user:{...mr.vip_user,...t.vip_user||{}},teacher:{...mr.teacher,...t.teacher||{}},manager:{...mr.manager,...t.manager||{}},admin:{...mr.admin,...t.admin||{}}}}else return console.log("Initializing default usage config..."),await tg(n,mr),mr}catch(n){return console.error("Error fetching usage config:",n),mr}},nV=async n=>{try{const e=ut(ke,fA,hA);await tg(e,n)}catch(e){throw console.error("Error saving usage config:",e),e}},sV=({onClose:n})=>{const[e,t]=F.useState(null),[s,a]=F.useState(!0),[o,c]=F.useState(!1),[h,g]=F.useState("guest");F.useEffect(()=>{p()},[]);const p=async()=>{a(!0);const k=await ub();t(k),a(!1)},v=async()=>{if(e){c(!0);try{await nV(e),Oc.fire({title:"Thnh cng!",text:"Cu hnh  c lu.",icon:"success",timer:1500,showConfirmButton:!1})}catch{Oc.fire("Li","Khng th lu cu hnh","error")}finally{c(!1)}}},w=(k,L,I)=>{e&&t({...e,[k]:{...e[k],[L]:I}})};if(s)return d.jsx("div",{className:"p-8 text-center",children:"ang ti cu hnh..."});if(!e)return d.jsx("div",{className:"p-8 text-center text-red-500",children:"Li ti d liu"});const E=[{id:"guest",label:"Khch Vng Lai",icon:um,color:"text-gray-500"},{id:"free_user",label:"Thnh Vin T Do",icon:cm,color:"text-green-500"},{id:"verified_user",label:"Hc Vin Lp",icon:wO,color:"text-blue-500"},{id:"vip_user",label:"Thnh Vin VIP",icon:bO,color:"text-yellow-500"},{id:"teacher",label:"Gio Vin",icon:yy,color:"text-purple-500"},{id:"manager",label:"Cn B Qun L",icon:fc,color:"text-red-500"},{id:"admin",label:"Qun Tr Vin",icon:vO,color:"text-indigo-600"}],T=e[h];return d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm animate-fade-in",children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-4xl overflow-hidden flex flex-col max-h-[90vh]",children:[d.jsxs("div",{className:"p-5 bg-gradient-to-r from-purple-600 to-indigo-600 text-white flex justify-between items-center",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(cO,{className:"text-2xl animate-spin-slow"}),d.jsx("h2",{className:"text-xl font-bold",children:"Cu Hnh Gii Hn & Quyn Truy Cp"})]}),d.jsx("button",{onClick:n,className:"text-white/80 hover:text-white text-2xl",children:""})]}),d.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[d.jsx("div",{className:"w-1/3 bg-gray-50 dark:bg-slate-900 border-r dark:border-slate-700 overflow-y-auto",children:E.map(k=>d.jsxs("button",{onClick:()=>g(k.id),className:`w-full text-left p-4 border-b dark:border-slate-700 flex items-center gap-3 transition-colors ${h===k.id?"bg-white dark:bg-slate-800 border-l-4 border-l-purple-500 shadow-sm":"hover:bg-gray-100 dark:hover:bg-slate-800 text-gray-500 dark:text-gray-400"}`,children:[d.jsx(k.icon,{className:`text-xl ${h===k.id?k.color:""}`}),d.jsxs("div",{children:[d.jsx("div",{className:`font-bold ${h===k.id?"text-gray-800 dark:text-white":""}`,children:k.label}),d.jsx("div",{className:"text-xs mt-1",children:e[k.id].isEnabled?d.jsxs("span",{className:"text-green-600 font-bold",children:["Limit: ",e[k.id].limit," (",e[k.id].period==="daily"?"Ngy":"Tun",")"]}):d.jsx("span",{className:"text-gray-400",children:"Khng gii hn (Tt)"})})]})]},k.id))}),d.jsxs("div",{className:"w-2/3 p-6 overflow-y-auto bg-white dark:bg-slate-800",children:[d.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[d.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[Js.createElement(E.find(k=>k.id===h).icon,{className:E.find(k=>k.id===h).color}),E.find(k=>k.id===h).label]}),d.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:T.isEnabled,onChange:k=>w(h,"isEnabled",k.target.checked),className:"sr-only peer"}),d.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"}),d.jsx("span",{className:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-300",children:T.isEnabled?"ang bt gii hn":"Khng gii hn (Tt)"})]})]}),T.isEnabled&&d.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1 dark:text-gray-300",children:"S lt ti a"}),d.jsx("input",{type:"number",value:T.limit,onChange:k=>w(h,"limit",parseInt(k.target.value)||0),className:"w-full p-2 border rounded-lg dark:bg-slate-700 focus:ring-2 focus:ring-purple-500 outline-none"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1 dark:text-gray-300",children:"Chu k reset"}),d.jsxs("select",{value:T.period,onChange:k=>w(h,"period",k.target.value),className:"w-full p-2 border rounded-lg dark:bg-slate-700 focus:ring-2 focus:ring-purple-500 outline-none",children:[d.jsx("option",{value:"daily",children:"Hng Ngy (00:00)"}),d.jsx("option",{value:"weekly",children:"Hng Tun (Th 2)"})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1 dark:text-gray-300",children:"Tin nhn bo chn"}),d.jsx("textarea",{rows:3,value:T.message,onChange:k=>w(h,"message",k.target.value),className:"w-full p-3 border rounded-lg dark:bg-slate-700 focus:ring-2 focus:ring-purple-500 outline-none",placeholder:"Nhp tin nhn..."}),d.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[" Mo: Dng ",d.jsx("code",{children:"{limit}"}),"  hin th s lt t ng."]})]})]}),d.jsxs("div",{className:"mt-6 flex items-center justify-between bg-orange-50 dark:bg-slate-700/50 p-3 rounded-lg border border-orange-200 dark:border-slate-600",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"font-bold text-orange-700 dark:text-orange-400 text-sm",children:"Hin th Qung Co (Google Adsense)"}),d.jsx("p",{className:"text-xs text-orange-600/80 dark:text-gray-400",children:"Bt  hin qung co cho nhm ny (Khng ph thuc gii hn)."})]}),d.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:T.showAds,onChange:k=>w(h,"showAds",k.target.checked),className:"sr-only peer"}),d.jsx("div",{className:"w-9 h-5 bg-gray-300 peer-focus:outline-none rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-orange-500"})]})]}),!T.isEnabled&&d.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-700/50 rounded-xl border border-dashed border-gray-300 dark:border-slate-600 text-center text-gray-500",children:[d.jsx(rV,{className:"text-4xl mx-auto mb-2 text-green-500 opacity-50"}),d.jsx("p",{children:"Ngi dng thuc nhm ny c truy cp khng gii hn."})]})]})]}),d.jsxs("div",{className:"p-5 border-t dark:border-slate-700 bg-gray-50 dark:bg-slate-700/50 flex justify-end gap-3",children:[d.jsx("button",{onClick:n,className:"px-6 py-2 rounded-lg font-medium text-gray-600 hover:bg-gray-200 dark:text-gray-300 dark:hover:bg-slate-600 transition-colors",children:"ng"}),d.jsx("button",{onClick:v,disabled:o,className:"px-8 py-2 rounded-lg font-bold text-white bg-gradient-to-r from-purple-600 to-indigo-600 hover:shadow-lg hover:scale-105 transition-all flex items-center gap-2 disabled:opacity-50",children:o?"ang lu...":d.jsxs(d.Fragment,{children:[d.jsx(Mv,{})," Lu Cu Hnh"]})})]})]})})},rV=({className:n})=>d.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 512 512",className:n,xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628 0z"})}),iV=({userProfile:n,onNavigate:e,onLogout:t})=>{const[s,a]=Js.useState(!1);return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"fixed top-0 left-0 right-0 h-16 bg-white dark:bg-slate-900 border-b border-gray-200 dark:border-gray-800 z-40 px-4 shadow-sm flex items-center justify-between transition-colors duration-300",children:[d.jsxs("div",{className:"flex items-center gap-1 md:gap-4 overflow-x-auto no-scrollbar",children:[d.jsxs("button",{onClick:()=>e("dashboard"),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap",children:[d.jsx(gS,{className:"text-blue-600 dark:text-blue-400"}),d.jsx("span",{className:"font-semibold text-sm md:text-base",children:"n tp"})]}),d.jsxs("a",{href:"/",className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap decoration-0",children:[d.jsx(pS,{className:"text-teal-600 dark:text-teal-400"}),d.jsx("span",{className:"font-medium text-sm md:text-base",children:"Tin tc"})]}),d.jsxs("button",{onClick:()=>e("account"),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap",children:[d.jsx(wS,{className:"text-orange-600 dark:text-orange-400"}),d.jsx("span",{className:"font-medium text-sm md:text-base",children:"Ti khon"})]}),n&&d.jsxs(d.Fragment,{children:[["admin","lanh_dao","quan_ly","giao_vien"].includes(n.role)?d.jsxs("button",{onClick:()=>e("class_management"),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap",children:[d.jsx(Ea,{className:"text-indigo-600 dark:text-indigo-400"}),d.jsx("span",{className:"font-medium text-sm md:text-base",children:"Qun l lp"})]}):d.jsxs("button",{onClick:()=>e("my_class"),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap",children:[d.jsx(cm,{className:"text-green-600 dark:text-green-400"}),d.jsx("span",{className:"font-medium text-sm md:text-base",children:"Lp ca ti"})]}),["admin","lanh_dao","quan_ly","giao_vien"].includes(n.role)&&d.jsxs("button",{onClick:()=>e("notification_mgmt"),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap border-l border-gray-200 dark:border-gray-700 ml-2 pl-4",children:[d.jsx(Ld,{className:"text-red-500 animate-pulse-slow"}),d.jsx("span",{className:"font-bold text-sm md:text-base text-red-600 dark:text-red-400",children:"Qun l TB"})]}),n.role==="admin"&&d.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap border-l border-gray-200 dark:border-gray-700 ml-2 pl-4",children:[d.jsx(uO,{className:"text-purple-600 animate-spin-slow"}),d.jsx("span",{className:"font-bold text-sm md:text-base text-purple-600 dark:text-purple-400",children:"Cu hnh"})]}),d.jsxs("button",{onClick:()=>e("history"),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap",children:[d.jsx(hc,{className:"text-purple-600 dark:text-purple-400"}),d.jsx("span",{className:"font-medium text-sm md:text-base",children:"Lch s"})]})]})]}),d.jsx("div",{className:"flex items-center gap-3 md:gap-4 ml-4 flex-shrink-0",children:n?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"hidden md:flex flex-col items-end",children:[d.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Xin cho,"}),d.jsx("span",{className:"text-sm font-bold text-gray-800 dark:text-white max-w-[150px] truncate",children:n.isVerified?d.jsxs("span",{className:"flex items-center gap-1 text-blue-600",children:[n.full_name," ",d.jsx(Ac,{className:"text-green-500 text-xs"})]}):n.full_name})]}),d.jsx("div",{className:"md:hidden text-gray-700 dark:text-gray-200",children:d.jsx(cm,{})}),d.jsx("div",{className:"h-8 w-[1px] bg-gray-300 dark:bg-gray-700 mx-1"}),d.jsxs("button",{onClick:t,className:"group flex items-center gap-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 px-3 py-2 rounded-full transition-colors",title:"ng xut",children:[d.jsx(vS,{className:"group-hover:translate-x-1 transition-transform"}),d.jsx("span",{className:"hidden md:inline font-medium text-sm",children:"Thot"})]})]}):d.jsx("button",{onClick:()=>e("login"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold text-sm transition-colors shadow-md",children:"ng nhp"})})]}),s&&d.jsx(sV,{onClose:()=>a(!1)})]})};let Cf=null;const db=async()=>Cf||(Cf=await ub(),Cf),mg=(n,e)=>{if(!e)return{param:n.guest,type:"guest"};const t=e.role;return t==="admin"?{param:n.admin,type:"admin"}:["lanh_dao","quan_ly"].includes(t)?{param:n.manager,type:"manager"}:t==="giao_vien"?{param:n.teacher,type:"teacher"}:e.isVip?{param:n.vip_user,type:"vip"}:e.class&&e.class.length>0||e.isVerified?{param:n.verified_user,type:"verified"}:{param:n.free_user,type:"free"}},mA=n=>{const e=new Date;if(n==="daily")return e.toLocaleDateString("vi-VN");{const t=e.getDay()||7;return t!==1?e.setHours(-24*(t-1)):e.setHours(0,0,0,0),`W-${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`}},xE=async n=>{const e=await db(),{param:t}=mg(e,n);if(!t.isEnabled)return"ALLOWED";const a=`${n?`usage_user_${n.id}`:"usage_guest"}_${t.period}`,o=mA(t.period);let c={date:o,count:0};const h=localStorage.getItem(a);if(h)try{const g=JSON.parse(h);g.date===o&&(c=g)}catch(g){console.error("Error parsing usage data",g)}return console.log(`[Usage Check] ${a} - Used: ${c.count}/${t.limit}`),c.count>=t.limit?"BLOCKED":"ALLOWED"},EE=async n=>{const e=await db(),{param:t}=mg(e,n);if(!t.isEnabled)return;const a=`${n?`usage_user_${n.id}`:"usage_guest"}_${t.period}`,o=mA(t.period);let c={date:o,count:0};const h=localStorage.getItem(a);if(h)try{const g=JSON.parse(h);g.date===o&&(c=g)}catch{}c.count++,console.log(`[Usage] Incremented usage for ${a}: ${c.count}`),localStorage.setItem(a,JSON.stringify(c))},TE=async(n,e)=>{const t=await db(),{param:s,type:a}=mg(t,n),o=s.message.replace("{limit}",s.limit.toString()),c=a==="guest";Oc.fire({title:"Ht lt lm bi!",text:o,icon:"warning",showCancelButton:!0,confirmButtonText:c?"ng nhp ngay":"Lin h thy",cancelButtonText:"ng",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"}).then(h=>{h.isConfirmed&&(c?e():window.open("https://zalo.me/02296282969","_blank"))})},aV=({userProfile:n})=>{const[e,t]=F.useState(!1);F.useEffect(()=>{(async()=>{try{const g=await ub(),{param:p}=mg(g,n);p.showAds?(t(!0),s(),c()):(t(!1),a(),o())}catch(g){console.error("Error checking AdSense config:",g)}})()},[n]);const s=()=>{if(document.getElementById("google-adsense-script"))return;const g=document.createElement("script");g.id="google-adsense-script",g.async=!0,g.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6121118706628509",g.crossOrigin="anonymous",document.head.appendChild(g),console.log(" Google AdSense Script Loaded (Allowed for this role)")},a=()=>{const h=document.getElementById("google-adsense-script");h&&(h.remove(),console.log(" Google AdSense Script Removed (Blocked for this role)"))},o=()=>{if(document.getElementById("adsense-blocker-style"))return;const h=document.createElement("style");h.id="adsense-blocker-style",h.innerHTML=`
            .adsbygoogle, .google-auto-placed, ins.adsbygoogle {
                display: none !important;
                visibility: hidden !important;
                height: 0 !important;
                width: 0 !important;
                overflow: hidden !important;
                position: absolute !important;
                pointer-events: none !important;
                z-index: -9999 !important;
            }
        `,document.head.appendChild(h),console.log(" AdSense Blocker Style Injected")},c=()=>{const h=document.getElementById("adsense-blocker-style");h&&(h.remove(),console.log(" AdSense Blocker Style Removed"))};return null},oV=({userProfile:n,currentScreen:e,onNavigate:t,onLogout:s})=>{const[a,o]=F.useState(!1),c=F.useRef(null);F.useEffect(()=>{const E=T=>{c.current&&!c.current.contains(T.target)&&o(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]);const h=E=>!!(E==="dashboard"&&(e==="dashboard"||e.startsWith("in_"))||E==="account"&&e==="account"),g=E=>{t(E),o(!1)},p=[{name:"Tin tc",icon:pS,action:()=>window.location.href="/",active:!1,key:"news"},{name:"n tp",icon:gS,action:()=>g("dashboard"),active:h("dashboard"),key:"dashboard"},{name:"Ti khon",icon:wS,action:()=>g("account"),active:h("account"),key:"account"}],v=[];n&&(v.push({name:"Lch s thi",icon:hc,action:()=>g("history"),color:"text-purple-600"}),["admin","lanh_dao","quan_ly","giao_vien"].includes(n.role)?(v.push({name:"Qun l lp",icon:Ea,action:()=>g("class_management"),color:"text-indigo-600"}),v.push({name:"Qun l TB",icon:Ld,action:()=>g("notification_mgmt"),color:"text-red-500"})):v.push({name:"Lp ca ti",icon:cm,action:()=>g("my_class"),color:"text-green-600"}));const w=()=>o(!a);return d.jsxs(d.Fragment,{children:[d.jsx("div",{ref:c,className:`fixed bottom-24 right-4 z-[10000] md:hidden transition-all duration-300 origin-bottom-right ${a?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-90 translate-y-4 pointer-events-none"}`,children:d.jsx("div",{className:"bg-white/95 dark:bg-slate-900/95 backdrop-blur-xl border border-white/20 shadow-2xl rounded-2xl p-4 w-56 flex flex-col gap-2",children:n?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"text-xs font-semibold text-gray-400 dark:text-gray-500 mb-2 uppercase tracking-wider border-b border-gray-200 dark:border-gray-700 pb-2",children:"Menu m rng"}),v.map((E,T)=>{const k=E.icon;return d.jsxs("button",{onClick:()=>{E.action(),o(!1)},className:"flex items-center gap-3 w-full p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors group",children:[d.jsx("div",{className:`p-2 rounded-lg bg-gray-50 dark:bg-slate-800 group-hover:bg-white dark:group-hover:bg-slate-700 shadow-sm ${E.color}`,children:d.jsx(k,{})}),d.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:E.name})]},T)}),d.jsx("div",{className:"h-px bg-gray-200 dark:bg-gray-700 my-1"}),d.jsxs("button",{onClick:()=>{s(),o(!1)},className:"flex items-center gap-3 w-full p-2 rounded-xl hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 transition-colors",children:[d.jsx("div",{className:"p-2 rounded-lg bg-red-100 dark:bg-red-900/30",children:d.jsx(vS,{})}),d.jsx("span",{className:"text-sm font-medium",children:"ng xut"})]})]}):d.jsx("button",{onClick:()=>{g("login"),o(!1)},className:"w-full py-2 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition",children:"ng nhp ngay"})})}),d.jsx("div",{className:"fixed bottom-4 left-4 right-4 z-[9999] md:hidden animate-fade-in-up",children:d.jsxs("div",{className:"bg-white/90 dark:bg-slate-900/90 backdrop-blur-lg border border-white/20 shadow-2xl rounded-2xl p-2 flex justify-between items-center relative overflow-hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent skew-x-12 animate-shine pointer-events-none"}),p.map(E=>{const T=E.icon,k=E.active;return d.jsxs("button",{onClick:E.action,className:`relative flex flex-col items-center justify-center w-full py-2 transition-all duration-300 group ${k?"-translate-y-1":""}`,children:[k&&d.jsx("div",{className:"absolute top-1 w-10 h-10 bg-indigo-500/20 rounded-full blur-md"}),d.jsx(T,{className:`text-2xl mb-1 transition-all duration-300 drop-shadow-sm ${k?"text-indigo-600 dark:text-indigo-400 scale-110 filter drop-shadow-[0_2px_4px_rgba(79,70,229,0.3)]":"text-gray-400 dark:text-gray-500 group-hover:text-gray-600 dark:group-hover:text-gray-300"}`}),d.jsx("span",{className:`text-[10px] font-bold transition-all duration-300 ${k?"text-indigo-600 dark:text-indigo-400 opacity-100":"text-gray-400 dark:text-gray-500 opacity-80 group-hover:opacity-100"}`,children:E.name}),k&&d.jsx("span",{className:"absolute -bottom-1 w-1 h-1 bg-indigo-600 rounded-full"})]},E.key)}),d.jsxs("button",{onClick:w,className:`relative flex flex-col items-center justify-center w-full py-2 transition-all duration-300 group ${a?"-translate-y-1":""}`,children:[a&&d.jsx("div",{className:"absolute top-1 w-10 h-10 bg-orange-500/20 rounded-full blur-md"}),a?d.jsx(Po,{className:"text-2xl mb-1 text-orange-600 dark:text-orange-400 scale-110 transition-all duration-300"}):d.jsx(iO,{className:"text-2xl mb-1 text-gray-400 dark:text-gray-500 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-all duration-300"}),d.jsx("span",{className:`text-[10px] font-bold transition-all duration-300 ${a?"text-orange-600 dark:text-orange-400 opacity-100":"text-gray-400 dark:text-gray-500 opacity-80 group-hover:opacity-100"}`,children:"Thm"})]})]})})]})},lV=(n,e)=>{const t=s=>{const a=s.match(/(\d+)$/);return a?parseInt(a[1],10):0};return t(n.id)-t(e.id)},gA=async()=>{const{data:n,error:e}=await jy.from("licenses").select(`
      id,
      name,
      display_order,
      subjects (
        id,
        name,
        display_order,
        questions (
          *,
          answers (
            id,
            text
          )
        )
      )
    `).order("display_order",{ascending:!0}).order("display_order",{foreignTable:"subjects",ascending:!0});if(e)throw console.error("Error fetching data from Supabase:",e),e;return n.map(s=>({id:s.id,name:s.name,subjects:s.subjects.map(a=>({id:a.id,name:a.name,questions:a.questions.sort(lV).map(o=>({id:o.id,text:o.text,image:o.image,correctAnswerId:o.correct_answer_id,answers:o.answers.map(c=>({id:c.id,text:c.text}))}))}))}))},pA=Object.freeze(Object.defineProperty({__proto__:null,fetchLicenses:gA},Symbol.toStringTag,{value:"Module"})),be={WELCOME:"welcome",LOGIN:"login",DASHBOARD:"dashboard",LICENSE_SELECTION:"license_selection",NAME_INPUT:"name_input",MODE_SELECTION:"mode_selection",SUBJECT_SELECTION:"subject_selection",IN_QUIZ:"in_quiz",IN_ONLINE_EXAM:"in_online_exam",RESULT:"results",EXAM_RESULT:"exam_result",HISTORY:"history",MY_CLASS:"my_class",CLASS_MANAGEMENT:"class_management",REGISTER:"register",ACCOUNT:"account",NOTIFICATION_MGMT:"notification_mgmt"},cV=()=>{const[n,e]=F.useState(be.WELCOME),[t,s]=F.useState([]),[a,o]=F.useState(null),[c,h]=F.useState([]),[g,p]=F.useState(null),[v,w]=F.useState(null),[E,T]=F.useState({}),[k,L]=F.useState(0),[I,O]=F.useState(""),[q,G]=F.useState(null),[te,me]=F.useState(!1),[he,N]=F.useState(!1);F.useEffect(()=>{const ne=new URLSearchParams(window.location.search).get("mode")==="app",ce=Ic.isNativePlatform();console.log("DEBUG: Checking Platform Mode"),console.log("- URL Search:",window.location.search),console.log("- isTestMode:",ne),console.log("- isNative:",ce),ce||ne?(console.log("SETTING MOBILE APP MODE: TRUE"),N(!0)):(console.log("SETTING MOBILE APP MODE: FALSE"),N(!1))},[]),F.useEffect(()=>{(async()=>{try{const ne=await gA();s(ne)}catch(ne){console.error("Error loading licenses:",ne)}})()},[]),F.useEffect(()=>{const K=sj(Vo,async ne=>{if(ne){const ce=await eD(ne.uid);G(ce),O((ce==null?void 0:ce.full_name)||ne.displayName||""),gn(async()=>{const{initializeFCM:_e}=await import("./fcmClient-C6VXPsY6.js");return{initializeFCM:_e}},[]).then(({initializeFCM:_e})=>{_e(ne.uid)}),gn(async()=>{const{loadSession:_e,getLicensePreference:Ae}=await import("./sessionService-CxCtOUx6.js");return{loadSession:_e,getLicensePreference:Ae}},[]).then(({loadSession:_e,getLicensePreference:Ae})=>{const We=_e(ne.uid);if(We){console.log("Restoring session...",We),w(We.quiz),T(We.userAnswers),o(We.selectedLicense),p(We.selectedSubject),We.mode==="online_exam"?e(be.IN_ONLINE_EXAM):e(be.IN_QUIZ);return}(async()=>{if(ce!=null&&ce.defaultLicenseId){const wt=t.find(Rn=>Rn.id===ce.defaultLicenseId);if(wt){o(wt),e(be.MODE_SELECTION);return}}if(ce!=null&&ce.courseId)try{const wt=ut(ke,"courses",ce.courseId),Rn=await Va(wt);if(Rn.exists()){const ms=Rn.data();if(ms.licenseId){const rt=t.find(jn=>jn.id===ms.licenseId);if(rt){o(rt),e(be.MODE_SELECTION),gn(async()=>{const{updateDoc:jn}=await Promise.resolve().then(()=>fd);return{updateDoc:jn}},void 0).then(({updateDoc:jn})=>{jn(ut(ke,"users",ne.uid),{defaultLicenseId:ms.licenseId}).catch(er=>console.error("Self-heal error:",er))});return}}}}catch(wt){console.error("Error in auth fallback:",wt)}const ze=Ae();if(ze){const wt=t.find(Rn=>Rn.id===ze);wt&&o(wt),e(be.DASHBOARD)}else e(be.DASHBOARD)})()})}else G(null),O(""),e(be.WELCOME)});return()=>{K()}},[t]);const C=F.useCallback((K,ne,ce,_e,Ae)=>{!_e||!q||gn(async()=>{const{saveSession:We}=await import("./sessionService-CxCtOUx6.js");return{saveSession:We}},[]).then(({saveSession:We})=>{We(q.id,_e,Ae,ce,K,ne,a,g)})},[a,g,q]);F.useEffect(()=>{if(n===be.IN_QUIZ||n===be.IN_ONLINE_EXAM){me(!1);return}q&&gn(async()=>{const{loadSession:K}=await import("./sessionService-CxCtOUx6.js");return{loadSession:K}},[]).then(({loadSession:K})=>{const ne=K(q.id);me(!!ne)})},[n,q]);const R=()=>{gn(async()=>{const{loadSession:K}=await import("./sessionService-CxCtOUx6.js");return{loadSession:K}},[]).then(({loadSession:K})=>{if(!q)return;const ne=K(q.id);ne&&(w(ne.quiz),T(ne.userAnswers),o(ne.selectedLicense),p(ne.selectedSubject),ne.mode==="online_exam"?e(be.IN_ONLINE_EXAM):e(be.IN_QUIZ))})},B=async()=>{if(q){if(q.defaultLicenseId){const K=t.find(ne=>ne.id===q.defaultLicenseId);if(K){o(K),e(be.MODE_SELECTION);return}}else if(q.courseId)try{const K=ut(ke,"courses",q.courseId),ne=await Va(K);if(ne.exists()){const ce=ne.data();if(ce.licenseId){const _e=t.find(Ae=>Ae.id===ce.licenseId);if(_e){o(_e),e(be.MODE_SELECTION),gn(async()=>{const{updateDoc:Ae}=await Promise.resolve().then(()=>fd);return{updateDoc:Ae}},void 0).then(({updateDoc:Ae})=>{Ae(ut(ke,"users",q.id),{defaultLicenseId:ce.licenseId}).catch(We=>console.error("Self-heal failed:",We))});return}}}}catch(K){console.error("Error in license fallback:",K)}gn(async()=>{const{getLicensePreference:K}=await import("./sessionService-CxCtOUx6.js");return{getLicensePreference:K}},[]).then(({getLicensePreference:K})=>{const ne=K();ne&&t.find(ce=>ce.id===ne)?(o(t.find(ce=>ce.id===ne)),e(be.DASHBOARD)):e(be.LICENSE_SELECTION)})}else e(be.LICENSE_SELECTION)},M=()=>{e(be.LOGIN)},z=()=>{e(be.REGISTER)},D=async K=>{o(K),gn(async()=>{const{saveLicensePreference:ne}=await import("./sessionService-CxCtOUx6.js");return{saveLicensePreference:ne}},[]).then(({saveLicensePreference:ne})=>{ne(K.id)}),e(q?be.MODE_SELECTION:be.NAME_INPUT)},Ue=K=>{O(K),e(be.MODE_SELECTION)},re=async()=>{if(!a)return;if(await xE(q)!=="ALLOWED"){await TE(q,()=>e(be.LOGIN));return}await EE(q);const ne=[];a.subjects.forEach(We=>{ne.push(...We.questions)});const _e=[...ne].sort(()=>.5-Math.random()).slice(0,30),Ae={id:`exam_${Date.now()}`,title:`Thi Th - ${a.name}`,questions:_e,timeLimit:2700};w(Ae),T({}),L(0),localStorage.removeItem("ontap_quiz_session"),e(be.IN_ONLINE_EXAM)},P=async K=>{K==="practice"?a&&(h(a.subjects),e(be.SUBJECT_SELECTION)):K==="online_exam"&&re()},ie=async K=>{if(await xE(q)!=="ALLOWED"){await TE(q,()=>e(be.LOGIN));return}await EE(q),p(K);const ce={id:K.id,title:K.name,questions:K.questions,timeLimit:0};w(ce),T({}),localStorage.removeItem("ontap_quiz_session"),e(be.IN_QUIZ)},ve=K=>{if(v){gn(async()=>{const{clearSession:ce}=await import("./sessionService-CxCtOUx6.js");return{clearSession:ce}},[]).then(({clearSession:ce})=>ce()),me(!1);let ne=0;if(v.questions.forEach(ce=>{K[ce.id]===ce.correctAnswerId&&ne++}),L(ne),T(K),n===be.IN_ONLINE_EXAM)q&&sE(q.id,a.id,a.name,null,"Thi th",ne,30,v.timeLimit-0),e(be.EXAM_RESULT);else{if(q&&a){const ce=g?g.name:null;sE(q.id,a.id,a.name,ce,"n tp",ne,v.questions.length,0)}e(be.RESULT)}}},Ne=()=>{n===be.EXAM_RESULT?re():g&&a&&ie(g)},we=K=>{K==="dashboard"?e(q?be.DASHBOARD:be.WELCOME):K==="history"?e(be.HISTORY):K==="login"?e(be.LOGIN):K==="my_class"?e(be.MY_CLASS):K==="class_management"?e(be.CLASS_MANAGEMENT):K==="account"?e(q?be.ACCOUNT:be.LOGIN):K==="notification_mgmt"&&e(be.NOTIFICATION_MGMT)},V=async()=>{gn(async()=>{const{clearSession:K}=await import("./sessionService-CxCtOUx6.js");return{clearSession:K}},[]).then(({clearSession:K})=>K()),await Vo.signOut()},Z=()=>{switch(n){case be.WELCOME:return d.jsx(rE,{onStart:B,onLoginClick:M,onRegisterClick:z});case be.LOGIN:return d.jsx(AD,{onBack:()=>e(be.WELCOME)});case be.REGISTER:return d.jsx(ND,{onBack:()=>e(be.WELCOME),onSuccess:()=>e(be.DASHBOARD)});case be.LICENSE_SELECTION:return d.jsx(kD,{licenses:t,onSelect:D,onBack:()=>e(be.WELCOME)});case be.NAME_INPUT:return d.jsx(ID,{onNameSubmit:Ue,onBack:()=>e(be.LICENSE_SELECTION)});case be.MODE_SELECTION:return d.jsx(RD,{onModeSelect:P,licenseName:(a==null?void 0:a.name)||"",userName:I,onSwitchLicense:()=>e(be.LICENSE_SELECTION)});case be.SUBJECT_SELECTION:return d.jsx(jD,{subjects:c,progress:{},onSelect:ie,onBack:()=>e(be.MODE_SELECTION)});case be.IN_QUIZ:return v?d.jsx(OD,{quiz:v,onFinish:ve,onBack:()=>e(be.SUBJECT_SELECTION),initialAnswers:E,initialIndex:(()=>{try{const K=localStorage.getItem("ontap_quiz_session");return K?JSON.parse(K).currentQuestionIndex:0}catch{return 0}})(),onProgressUpdate:(K,ne,ce)=>C(K,ne,ce,v,"practice")}):null;case be.IN_ONLINE_EXAM:return v?d.jsx(LD,{quiz:v,onFinish:ve,onBack:()=>e(be.MODE_SELECTION),userName:I,selectedLicense:a,initialAnswers:E,initialIndex:(()=>{try{const K=localStorage.getItem("ontap_quiz_session");return K?JSON.parse(K).currentQuestionIndex:0}catch{return 0}})(),initialTime:(()=>{try{const K=localStorage.getItem("ontap_quiz_session");return K?JSON.parse(K).timeLeft:void 0}catch{return}})(),onProgressUpdate:(K,ne,ce)=>C(K,ne,ce,v,"online_exam")}):null;case be.RESULT:return v?d.jsx(VD,{quiz:v,userAnswers:E,score:k,onRetry:Ne,onBack:()=>e(be.SUBJECT_SELECTION),userName:I}):null;case be.EXAM_RESULT:return v?d.jsx(MD,{quiz:v,userAnswers:E,score:k,onRetry:Ne,onBack:()=>e(be.MODE_SELECTION),userName:I}):null;case be.DASHBOARD:return d.jsx(iP,{userProfile:q,onStart:()=>e(be.LICENSE_SELECTION),onHistoryClick:()=>e(be.HISTORY),onClassClick:()=>we(q.role==="hoc_vien"?"my_class":"class_management")});case be.HISTORY:return d.jsx(aP,{userProfile:q,onBack:()=>e(be.DASHBOARD)});case be.MY_CLASS:return d.jsx(lP,{userProfile:q,onBack:()=>e(be.DASHBOARD)});case be.CLASS_MANAGEMENT:return d.jsx(uP,{userProfile:q,onBack:()=>e(be.DASHBOARD)});case be.ACCOUNT:return d.jsx(hP,{userProfile:q,onBack:()=>e(be.DASHBOARD)});case be.NOTIFICATION_MGMT:return q?d.jsx(sD,{userProfile:q}):null;default:return d.jsx(rE,{onStart:B,onLoginClick:M,onRegisterClick:z})}};return d.jsxs("div",{className:"min-h-screen bg-background text-foreground font-sans transition-colors duration-300 pt-16",children:[d.jsx(_O,{}),d.jsx(xO,{}),te&&d.jsxs("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-yellow-400 text-black px-6 py-3 rounded-full shadow-xl z-50 animate-bounce cursor-pointer hover:bg-yellow-500 font-bold flex items-center gap-2",onClick:R,children:[d.jsx("span",{children:" Bn ang c bi thi lm d!"}),d.jsx("span",{className:"underline",children:"Lm tip ngay"})]}),d.jsx(aV,{userProfile:q}),!he&&d.jsx(iV,{userProfile:q,onNavigate:we,onLogout:V}),Z(),he&&d.jsx(oV,{userProfile:q,currentScreen:n,onNavigate:we,onLogout:V})]})},uV=()=>d.jsxs(NE,{children:[d.jsx(y3,{}),d.jsx(cV,{}),d.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:d.jsx(p3,{})})]}),yA=document.getElementById("root");if(!yA)throw new Error("Could not find root element to mount to");const dV=i3.createRoot(yA);dV.render(d.jsx(Js.StrictMode,{children:d.jsx(NE,{children:d.jsx(uV,{})})}));export{Ic as C,_V as W,y5 as a,ke as b,T4 as c,ut as d,Gv as r,ds as u};
