function cA(s,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in s)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(s,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function rd(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function hA(s){if(Object.prototype.hasOwnProperty.call(s,"__esModule"))return s;var e=s.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(s).forEach(function(r){var a=Object.getOwnPropertyDescriptor(s,r);Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:function(){return s[r]}})}),t}var Em={exports:{}},Jl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r0;function dA(){if(r0)return Jl;r0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var m in a)m!=="key"&&(l[m]=a[m])}else l=a;return a=l.ref,{$$typeof:s,type:r,key:c,ref:a!==void 0?a:null,props:l}}return Jl.Fragment=e,Jl.jsx=t,Jl.jsxs=t,Jl}var s0;function fA(){return s0||(s0=1,Em.exports=dA()),Em.exports}var b=fA(),Tm={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i0;function mA(){if(i0)return Ce;i0=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),A=Symbol.iterator;function x(S){return S===null||typeof S!="object"?null:(S=A&&S[A]||S["@@iterator"],typeof S=="function"?S:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,k={};function H(S,L,ne){this.props=S,this.context=L,this.refs=k,this.updater=ne||j}H.prototype.isReactComponent={},H.prototype.setState=function(S,L){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,L,"setState")},H.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function J(){}J.prototype=H.prototype;function Y(S,L,ne){this.props=S,this.context=L,this.refs=k,this.updater=ne||j}var ae=Y.prototype=new J;ae.constructor=Y,V(ae,H.prototype),ae.isPureReactComponent=!0;var we=Array.isArray;function ce(){}var I={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function O(S,L,ne){var se=ne.ref;return{$$typeof:s,type:S,key:L,ref:se!==void 0?se:null,props:ne}}function U(S,L){return O(S.type,L,S.props)}function M(S){return typeof S=="object"&&S!==null&&S.$$typeof===s}function B(S){var L={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(ne){return L[ne]})}var N=/\/+/g;function Qe(S,L){return typeof S=="object"&&S!==null&&S.key!=null?B(""+S.key):L.toString(36)}function ot(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(ce,ce):(S.status="pending",S.then(function(L){S.status==="pending"&&(S.status="fulfilled",S.value=L)},function(L){S.status==="pending"&&(S.status="rejected",S.reason=L)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function K(S,L,ne,se,le){var ge=typeof S;(ge==="undefined"||ge==="boolean")&&(S=null);var be=!1;if(S===null)be=!0;else switch(ge){case"bigint":case"string":case"number":be=!0;break;case"object":switch(S.$$typeof){case s:case e:be=!0;break;case v:return be=S._init,K(be(S._payload),L,ne,se,le)}}if(be)return le=le(S),be=se===""?"."+Qe(S,0):se,we(le)?(ne="",be!=null&&(ne=be.replace(N,"$&/")+"/"),K(le,L,ne,"",function(Lt){return Lt})):le!=null&&(M(le)&&(le=U(le,ne+(le.key==null||S&&S.key===le.key?"":(""+le.key).replace(N,"$&/")+"/")+be)),L.push(le)),1;be=0;var Me=se===""?".":se+":";if(we(S))for(var xe=0;xe<S.length;xe++)se=S[xe],ge=Me+Qe(se,xe),be+=K(se,L,ne,ge,le);else if(xe=x(S),typeof xe=="function")for(S=xe.call(S),xe=0;!(se=S.next()).done;)se=se.value,ge=Me+Qe(se,xe++),be+=K(se,L,ne,ge,le);else if(ge==="object"){if(typeof S.then=="function")return K(ot(S),L,ne,se,le);throw L=String(S),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.")}return be}function re(S,L,ne){if(S==null)return S;var se=[],le=0;return K(S,se,"","",function(ge){return L.call(ne,ge,le++)}),se}function ue(S){if(S._status===-1){var L=S._result;L=L(),L.then(function(ne){(S._status===0||S._status===-1)&&(S._status=1,S._result=ne)},function(ne){(S._status===0||S._status===-1)&&(S._status=2,S._result=ne)}),S._status===-1&&(S._status=0,S._result=L)}if(S._status===1)return S._result.default;throw S._result}var Re=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var L=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(L))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)},Pe={map:re,forEach:function(S,L,ne){re(S,function(){L.apply(this,arguments)},ne)},count:function(S){var L=0;return re(S,function(){L++}),L},toArray:function(S){return re(S,function(L){return L})||[]},only:function(S){if(!M(S))throw Error("React.Children.only expected to receive a single React element child.");return S}};return Ce.Activity=E,Ce.Children=Pe,Ce.Component=H,Ce.Fragment=t,Ce.Profiler=a,Ce.PureComponent=Y,Ce.StrictMode=r,Ce.Suspense=g,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(S){return I.H.useMemoCache(S)}},Ce.cache=function(S){return function(){return S.apply(null,arguments)}},Ce.cacheSignal=function(){return null},Ce.cloneElement=function(S,L,ne){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var se=V({},S.props),le=S.key;if(L!=null)for(ge in L.key!==void 0&&(le=""+L.key),L)!C.call(L,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&L.ref===void 0||(se[ge]=L[ge]);var ge=arguments.length-2;if(ge===1)se.children=ne;else if(1<ge){for(var be=Array(ge),Me=0;Me<ge;Me++)be[Me]=arguments[Me+2];se.children=be}return O(S.type,le,se)},Ce.createContext=function(S){return S={$$typeof:c,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:l,_context:S},S},Ce.createElement=function(S,L,ne){var se,le={},ge=null;if(L!=null)for(se in L.key!==void 0&&(ge=""+L.key),L)C.call(L,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(le[se]=L[se]);var be=arguments.length-2;if(be===1)le.children=ne;else if(1<be){for(var Me=Array(be),xe=0;xe<be;xe++)Me[xe]=arguments[xe+2];le.children=Me}if(S&&S.defaultProps)for(se in be=S.defaultProps,be)le[se]===void 0&&(le[se]=be[se]);return O(S,ge,le)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(S){return{$$typeof:m,render:S}},Ce.isValidElement=M,Ce.lazy=function(S){return{$$typeof:v,_payload:{_status:-1,_result:S},_init:ue}},Ce.memo=function(S,L){return{$$typeof:p,type:S,compare:L===void 0?null:L}},Ce.startTransition=function(S){var L=I.T,ne={};I.T=ne;try{var se=S(),le=I.S;le!==null&&le(ne,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(ce,Re)}catch(ge){Re(ge)}finally{L!==null&&ne.types!==null&&(L.types=ne.types),I.T=L}},Ce.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Ce.use=function(S){return I.H.use(S)},Ce.useActionState=function(S,L,ne){return I.H.useActionState(S,L,ne)},Ce.useCallback=function(S,L){return I.H.useCallback(S,L)},Ce.useContext=function(S){return I.H.useContext(S)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(S,L){return I.H.useDeferredValue(S,L)},Ce.useEffect=function(S,L){return I.H.useEffect(S,L)},Ce.useEffectEvent=function(S){return I.H.useEffectEvent(S)},Ce.useId=function(){return I.H.useId()},Ce.useImperativeHandle=function(S,L,ne){return I.H.useImperativeHandle(S,L,ne)},Ce.useInsertionEffect=function(S,L){return I.H.useInsertionEffect(S,L)},Ce.useLayoutEffect=function(S,L){return I.H.useLayoutEffect(S,L)},Ce.useMemo=function(S,L){return I.H.useMemo(S,L)},Ce.useOptimistic=function(S,L){return I.H.useOptimistic(S,L)},Ce.useReducer=function(S,L,ne){return I.H.useReducer(S,L,ne)},Ce.useRef=function(S){return I.H.useRef(S)},Ce.useState=function(S){return I.H.useState(S)},Ce.useSyncExternalStore=function(S,L,ne){return I.H.useSyncExternalStore(S,L,ne)},Ce.useTransition=function(){return I.H.useTransition()},Ce.version="19.2.0",Ce}var a0;function Lg(){return a0||(a0=1,Tm.exports=mA()),Tm.exports}var pe=Lg();const gA=rd(pe);var Sm={exports:{}},Wl={},Am={exports:{}},Rm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o0;function pA(){return o0||(o0=1,(function(s){function e(K,re){var ue=K.length;K.push(re);e:for(;0<ue;){var Re=ue-1>>>1,Pe=K[Re];if(0<a(Pe,re))K[Re]=re,K[ue]=Pe,ue=Re;else break e}}function t(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var re=K[0],ue=K.pop();if(ue!==re){K[0]=ue;e:for(var Re=0,Pe=K.length,S=Pe>>>1;Re<S;){var L=2*(Re+1)-1,ne=K[L],se=L+1,le=K[se];if(0>a(ne,ue))se<Pe&&0>a(le,ne)?(K[Re]=le,K[se]=ue,Re=se):(K[Re]=ne,K[L]=ue,Re=L);else if(se<Pe&&0>a(le,ue))K[Re]=le,K[se]=ue,Re=se;else break e}}return re}function a(K,re){var ue=K.sortIndex-re.sortIndex;return ue!==0?ue:K.id-re.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var c=Date,m=c.now();s.unstable_now=function(){return c.now()-m}}var g=[],p=[],v=1,E=null,A=3,x=!1,j=!1,V=!1,k=!1,H=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function ae(K){for(var re=t(p);re!==null;){if(re.callback===null)r(p);else if(re.startTime<=K)r(p),re.sortIndex=re.expirationTime,e(g,re);else break;re=t(p)}}function we(K){if(V=!1,ae(K),!j)if(t(g)!==null)j=!0,ce||(ce=!0,B());else{var re=t(p);re!==null&&ot(we,re.startTime-K)}}var ce=!1,I=-1,C=5,O=-1;function U(){return k?!0:!(s.unstable_now()-O<C)}function M(){if(k=!1,ce){var K=s.unstable_now();O=K;var re=!0;try{e:{j=!1,V&&(V=!1,J(I),I=-1),x=!0;var ue=A;try{t:{for(ae(K),E=t(g);E!==null&&!(E.expirationTime>K&&U());){var Re=E.callback;if(typeof Re=="function"){E.callback=null,A=E.priorityLevel;var Pe=Re(E.expirationTime<=K);if(K=s.unstable_now(),typeof Pe=="function"){E.callback=Pe,ae(K),re=!0;break t}E===t(g)&&r(g),ae(K)}else r(g);E=t(g)}if(E!==null)re=!0;else{var S=t(p);S!==null&&ot(we,S.startTime-K),re=!1}}break e}finally{E=null,A=ue,x=!1}re=void 0}}finally{re?B():ce=!1}}}var B;if(typeof Y=="function")B=function(){Y(M)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Qe=N.port2;N.port1.onmessage=M,B=function(){Qe.postMessage(null)}}else B=function(){H(M,0)};function ot(K,re){I=H(function(){K(s.unstable_now())},re)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(K){K.callback=null},s.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<K?Math.floor(1e3/K):5},s.unstable_getCurrentPriorityLevel=function(){return A},s.unstable_next=function(K){switch(A){case 1:case 2:case 3:var re=3;break;default:re=A}var ue=A;A=re;try{return K()}finally{A=ue}},s.unstable_requestPaint=function(){k=!0},s.unstable_runWithPriority=function(K,re){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ue=A;A=K;try{return re()}finally{A=ue}},s.unstable_scheduleCallback=function(K,re,ue){var Re=s.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?Re+ue:Re):ue=Re,K){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=ue+Pe,K={id:v++,callback:re,priorityLevel:K,startTime:ue,expirationTime:Pe,sortIndex:-1},ue>Re?(K.sortIndex=ue,e(p,K),t(g)===null&&K===t(p)&&(V?(J(I),I=-1):V=!0,ot(we,ue-Re))):(K.sortIndex=Pe,e(g,K),j||x||(j=!0,ce||(ce=!0,B()))),K},s.unstable_shouldYield=U,s.unstable_wrapCallback=function(K){var re=A;return function(){var ue=A;A=re;try{return K.apply(this,arguments)}finally{A=ue}}}})(Rm)),Rm}var l0;function yA(){return l0||(l0=1,Am.exports=pA()),Am.exports}var xm={exports:{}},rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u0;function _A(){if(u0)return rn;u0=1;var s=Lg();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,p,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:g,containerInfo:p,implementation:v}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,rn.createPortal=function(g,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(g,p,null,v)},rn.flushSync=function(g){var p=c.T,v=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=p,r.p=v,r.d.f()}},rn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},rn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},rn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var v=p.as,E=m(v,p.crossOrigin),A=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:x}):v==="script"&&r.d.X(g,{crossOrigin:E,integrity:A,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},rn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=m(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},rn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,E=m(v,p.crossOrigin);r.d.L(g,v,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},rn.preloadModule=function(g,p){if(typeof g=="string")if(p){var v=m(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},rn.requestFormReset=function(g){r.d.r(g)},rn.unstable_batchedUpdates=function(g,p){return g(p)},rn.useFormState=function(g,p,v){return c.H.useFormState(g,p,v)},rn.useFormStatus=function(){return c.H.useHostTransitionStatus()},rn.version="19.2.0",rn}var c0;function vA(){if(c0)return xm.exports;c0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),xm.exports=_A(),xm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0;function bA(){if(h0)return Wl;h0=1;var s=yA(),e=Lg(),t=vA();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(l(n)!==n)throw Error(r(188))}function p(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(r(188));return i!==n?null:n}for(var o=n,u=i;;){var d=o.return;if(d===null)break;var f=d.alternate;if(f===null){if(u=d.return,u!==null){o=u;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===o)return g(d),n;if(f===u)return g(d),i;f=f.sibling}throw Error(r(188))}if(o.return!==u.return)o=d,u=f;else{for(var _=!1,T=d.child;T;){if(T===o){_=!0,o=d,u=f;break}if(T===u){_=!0,u=d,o=f;break}T=T.sibling}if(!_){for(T=f.child;T;){if(T===o){_=!0,o=f,u=d;break}if(T===u){_=!0,u=f,o=d;break}T=T.sibling}if(!_)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:i}function v(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=v(n),i!==null)return i;n=n.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),J=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),we=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function B(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var N=Symbol.for("react.client.reference");function Qe(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===N?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case V:return"Fragment";case H:return"Profiler";case k:return"StrictMode";case we:return"Suspense";case ce:return"SuspenseList";case O:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case j:return"Portal";case Y:return n.displayName||"Context";case J:return(n._context.displayName||"Context")+".Consumer";case ae:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case I:return i=n.displayName||null,i!==null?i:Qe(n.type)||"Memo";case C:i=n._payload,n=n._init;try{return Qe(n(i))}catch{}}return null}var ot=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},Re=[],Pe=-1;function S(n){return{current:n}}function L(n){0>Pe||(n.current=Re[Pe],Re[Pe]=null,Pe--)}function ne(n,i){Pe++,Re[Pe]=n.current,n.current=i}var se=S(null),le=S(null),ge=S(null),be=S(null);function Me(n,i){switch(ne(ge,i),ne(le,n),ne(se,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?Rv(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=Rv(i),n=xv(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}L(se),ne(se,n)}function xe(){L(se),L(le),L(ge)}function Lt(n){n.memoizedState!==null&&ne(be,n);var i=se.current,o=xv(i,n.type);i!==o&&(ne(le,n),ne(se,o))}function da(n){le.current===n&&(L(se),L(le)),be.current===n&&(L(be),Kl._currentValue=ue)}var fa,ma;function fr(n){if(fa===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);fa=i&&i[1]||"",ma=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fa+n+ma}var Ko=!1;function yi(n,i){if(!n||Ko)return"";Ko=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(X){var G=X}Reflect.construct(n,[],ee)}else{try{ee.call()}catch(X){G=X}n.call(ee.prototype)}}else{try{throw Error()}catch(X){G=X}(ee=n())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(X){if(X&&G&&typeof X.stack=="string")return[X.stack,G.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=u.DetermineComponentFrameRoot(),_=f[0],T=f[1];if(_&&T){var D=_.split(`
`),F=T.split(`
`);for(d=u=0;u<D.length&&!D[u].includes("DetermineComponentFrameRoot");)u++;for(;d<F.length&&!F[d].includes("DetermineComponentFrameRoot");)d++;if(u===D.length||d===F.length)for(u=D.length-1,d=F.length-1;1<=u&&0<=d&&D[u]!==F[d];)d--;for(;1<=u&&0<=d;u--,d--)if(D[u]!==F[d]){if(u!==1||d!==1)do if(u--,d--,0>d||D[u]!==F[d]){var W=`
`+D[u].replace(" at new "," at ");return n.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",n.displayName)),W}while(1<=u&&0<=d);break}}}finally{Ko=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?fr(o):""}function Qo(n,i){switch(n.tag){case 26:case 27:case 5:return fr(n.type);case 16:return fr("Lazy");case 13:return n.child!==i&&i!==null?fr("Suspense Fallback"):fr("Suspense");case 19:return fr("SuspenseList");case 0:case 15:return yi(n.type,!1);case 11:return yi(n.type.render,!1);case 1:return yi(n.type,!0);case 31:return fr("Activity");default:return""}}function Yo(n){try{var i="",o=null;do i+=Qo(n,o),o=n,n=n.return;while(n);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Rt=Object.prototype.hasOwnProperty,zt=s.unstable_scheduleCallback,_s=s.unstable_cancelCallback,Td=s.unstable_shouldYield,ku=s.unstable_requestPaint,hn=s.unstable_now,_i=s.unstable_getCurrentPriorityLevel,Xo=s.unstable_ImmediatePriority,Jo=s.unstable_UserBlockingPriority,vs=s.unstable_NormalPriority,Sd=s.unstable_LowPriority,Mu=s.unstable_IdlePriority,Pu=s.log,Vu=s.unstable_setDisableYieldValue,Xn=null,Qt=null;function Pn(n){if(typeof Pu=="function"&&Vu(n),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(Xn,n)}catch{}}var bt=Math.clz32?Math.clz32:Lu,Uu=Math.log,ga=Math.LN2;function Lu(n){return n>>>=0,n===0?32:31-(Uu(n)/ga|0)|0}var mr=256,vi=262144,xt=4194304;function gr(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function pr(n,i,o){var u=n.pendingLanes;if(u===0)return 0;var d=0,f=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var T=u&134217727;return T!==0?(u=T&~f,u!==0?d=gr(u):(_&=T,_!==0?d=gr(_):o||(o=T&~n,o!==0&&(d=gr(o))))):(T=u&~f,T!==0?d=gr(T):_!==0?d=gr(_):o||(o=u&~n,o!==0&&(d=gr(o)))),d===0?0:i!==0&&i!==d&&(i&f)===0&&(f=d&-d,o=i&-i,f>=o||f===32&&(o&4194048)!==0)?i:d}function Jn(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Ad(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zu(){var n=xt;return xt<<=1,(xt&62914560)===0&&(xt=4194304),n}function yr(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function bi(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Rd(n,i,o,u,d,f){var _=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var T=n.entanglements,D=n.expirationTimes,F=n.hiddenUpdates;for(o=_&~o;0<o;){var W=31-bt(o),ee=1<<W;T[W]=0,D[W]=-1;var G=F[W];if(G!==null)for(F[W]=null,W=0;W<G.length;W++){var X=G[W];X!==null&&(X.lane&=-536870913)}o&=~ee}u!==0&&wi(n,u,0),f!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=f&~(_&~i))}function wi(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var u=31-bt(i);n.entangledLanes|=i,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function Wo(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var u=31-bt(o),d=1<<u;d&i|n[u]&i&&(n[u]|=i),o&=~d}}function Zo(n,i){var o=i&-i;return o=(o&42)!==0?1:Ei(o),(o&(n.suspendedLanes|i))!==0?0:o}function Ei(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Fr(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Bu(){var n=re.p;return n!==0?n:(n=window.event,n===void 0?32:Xv(n.type))}function Wn(n,i){var o=re.p;try{return re.p=n,i()}finally{re.p=o}}var Zn=Math.random().toString(36).slice(2),Ct="__reactFiber$"+Zn,$t="__reactProps$"+Zn,_r="__reactContainer$"+Zn,pa="__reactEvents$"+Zn,xd="__reactListeners$"+Zn,qu="__reactHandles$"+Zn,Hu="__reactResources$"+Zn,vr="__reactMarker$"+Zn;function ya(n){delete n[Ct],delete n[$t],delete n[pa],delete n[xd],delete n[qu]}function br(n){var i=n[Ct];if(i)return i;for(var o=n.parentNode;o;){if(i=o[_r]||o[Ct]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=kv(n);n!==null;){if(o=n[Ct])return o;n=kv(n)}return i}n=o,o=n.parentNode}return null}function Vn(n){if(n=n[Ct]||n[_r]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function Sn(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function wr(n){var i=n[Hu];return i||(i=n[Hu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function It(n){n[vr]=!0}var el=new Set,tl={};function Er(n,i){Tr(n,i),Tr(n+"Capture",i)}function Tr(n,i){for(tl[n]=i,n=0;n<i.length;n++)el.add(i[n])}var nl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rl={},sl={};function $u(n){return Rt.call(sl,n)?!0:Rt.call(rl,n)?!1:nl.test(n)?sl[n]=!0:(rl[n]=!0,!1)}function _a(n,i,o){if($u(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function An(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function Ot(n,i,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+u)}}function Ft(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function bs(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function il(n,i,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var d=u.get,f=u.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(_){o=""+_,f.call(this,_)}}),Object.defineProperty(n,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Ze(n){if(!n._valueTracker){var i=bs(n)?"checked":"value";n._valueTracker=il(n,i,""+n[i])}}function Ti(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return n&&(u=bs(n)?n.checked?"true":"false":n.value),n=u,n!==o?(i.setValue(n),!0):!1}function Sr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Si=/[\n"\\]/g;function pn(n){return n.replace(Si,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function va(n,i,o,u,d,f,_,T){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),i!=null?_==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Ft(i)):n.value!==""+Ft(i)&&(n.value=""+Ft(i)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),i!=null?al(n,_,Ft(i)):o!=null?al(n,_,Ft(o)):u!=null&&n.removeAttribute("value"),d==null&&f!=null&&(n.defaultChecked=!!f),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+Ft(T):n.removeAttribute("name")}function Fu(n,i,o,u,d,f,_,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(n.type=f),i!=null||o!=null){if(!(f!=="submit"&&f!=="reset"||i!=null)){Ze(n);return}o=o!=null?""+Ft(o):"",i=i!=null?""+Ft(i):o,T||i===n.value||(n.value=i),n.defaultValue=i}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=T?n.checked:!!u,n.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),Ze(n)}function al(n,i,o){i==="number"&&Sr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function ws(n,i,o,u){if(n=n.options,i){i={};for(var d=0;d<o.length;d++)i["$"+o[d]]=!0;for(o=0;o<n.length;o++)d=i.hasOwnProperty("$"+n[o].value),n[o].selected!==d&&(n[o].selected=d),d&&u&&(n[o].defaultSelected=!0)}else{for(o=""+Ft(o),i=null,d=0;d<n.length;d++){if(n[d].value===o){n[d].selected=!0,u&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function Gu(n,i,o){if(i!=null&&(i=""+Ft(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+Ft(o):""}function Es(n,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(r(92));if(ot(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=Ft(i),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),Ze(n)}function yn(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var Ku=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ol(n,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":u?n.setProperty(i,o):typeof o!="number"||o===0||Ku.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function ll(n,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var d in i)u=i[d],i.hasOwnProperty(d)&&o[d]!==u&&ol(n,d,u)}else for(var f in i)i.hasOwnProperty(f)&&ol(n,f,i[f])}function ba(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ts=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wa(n){return Ts.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function er(){}var ul=null;function Un(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ss=null,Ar=null;function Ai(n){var i=Vn(n);if(i&&(n=i.stateNode)){var o=n[$t]||null;e:switch(n=i.stateNode,i.type){case"input":if(va(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+pn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==n&&u.form===n.form){var d=u[$t]||null;if(!d)throw Error(r(90));va(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===n.form&&Ti(u)}break e;case"textarea":Gu(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&ws(n,!!o.multiple,i,!1)}}}var Ea=!1;function As(n,i,o){if(Ea)return n(i,o);Ea=!0;try{var u=n(i);return u}finally{if(Ea=!1,(Ss!==null||Ar!==null)&&(Bc(),Ss&&(i=Ss,n=Ar,Ar=Ss=null,Ai(i),n)))for(i=0;i<n.length;i++)Ai(n[i])}}function tr(n,i){var o=n.stateNode;if(o===null)return null;var u=o[$t]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ri=!1;if(Ln)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){Ri=!0}}),window.addEventListener("test",nt,nt),window.removeEventListener("test",nt,nt)}catch{Ri=!1}var Rr=null,cl=null,xi=null;function hl(){if(xi)return xi;var n,i=cl,o=i.length,u,d="value"in Rr?Rr.value:Rr.textContent,f=d.length;for(n=0;n<o&&i[n]===d[n];n++);var _=o-n;for(u=1;u<=_&&i[o-u]===d[f-u];u++);return xi=d.slice(n,1<u?1-u:void 0)}function Ci(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Gr(){return!0}function nr(){return!1}function Yt(n){function i(o,u,d,f,_){this._reactName=o,this._targetInst=d,this.type=u,this.nativeEvent=f,this.target=_,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(o=n[T],this[T]=o?o(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Gr:nr,this.isPropagationStopped=nr,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Gr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Gr)},persist:function(){},isPersistent:Gr}),i}var Kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xr=Yt(Kr),Rs=E({},Kr,{view:0,detail:0}),dl=Yt(Rs),xs,Ta,Cr,Sa=E({},Rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Cr&&(Cr&&n.type==="mousemove"?(xs=n.screenX-Cr.screenX,Ta=n.screenY-Cr.screenY):Ta=xs=0,Cr=n),xs)},movementY:function(n){return"movementY"in n?n.movementY:Ta}}),fl=Yt(Sa),Ii=E({},Sa,{dataTransfer:0}),Yu=Yt(Ii),Xu=E({},Rs,{relatedTarget:0}),Oi=Yt(Xu),ml=E({},Kr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ju=Yt(ml),Aa=E({},Kr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Wu=Yt(Aa),Zu=E({},Kr,{data:0}),Ir=Yt(Zu),ec={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rc(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=nc[n])?!!i[n]:!1}function Cs(){return rc}var dn=E({},Rs,{key:function(n){if(n.key){var i=ec[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Ci(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?tc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cs,charCode:function(n){return n.type==="keypress"?Ci(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ci(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),sc=Yt(dn),ic=E({},Sa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qr=Yt(ic),h=E({},Rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cs}),y=Yt(h),w=E({},Kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=Yt(w),q=E({},Sa,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=Yt(q),oe=E({},Kr,{newState:0,oldState:0}),Ne=Yt(oe),wt=[9,13,27,32],Je=Ln&&"CompositionEvent"in window,dt=null;Ln&&"documentMode"in document&&(dt=document.documentMode);var zn=Ln&&"TextEvent"in window&&!dt,Or=Ln&&(!Je||dt&&8<dt&&11>=dt),rr=" ",sr=!1;function Ni(n,i){switch(n){case"keyup":return wt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ra(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var xa=!1;function kS(n,i){switch(n){case"compositionend":return Ra(i);case"keypress":return i.which!==32?null:(sr=!0,rr);case"textInput":return n=i.data,n===rr&&sr?null:n;default:return null}}function MS(n,i){if(xa)return n==="compositionend"||!Je&&Ni(n,i)?(n=hl(),xi=cl=Rr=null,xa=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Or&&i.locale!=="ko"?null:i.data;default:return null}}var PS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!PS[n.type]:i==="textarea"}function Up(n,i,o,u){Ss?Ar?Ar.push(u):Ar=[u]:Ss=u,i=Qc(i,"onChange"),0<i.length&&(o=new xr("onChange","change",null,o,u),n.push({event:o,listeners:i}))}var gl=null,pl=null;function VS(n){bv(n,0)}function ac(n){var i=Sn(n);if(Ti(i))return n}function Lp(n,i){if(n==="change")return i}var zp=!1;if(Ln){var Cd;if(Ln){var Id="oninput"in document;if(!Id){var Bp=document.createElement("div");Bp.setAttribute("oninput","return;"),Id=typeof Bp.oninput=="function"}Cd=Id}else Cd=!1;zp=Cd&&(!document.documentMode||9<document.documentMode)}function qp(){gl&&(gl.detachEvent("onpropertychange",Hp),pl=gl=null)}function Hp(n){if(n.propertyName==="value"&&ac(pl)){var i=[];Up(i,pl,n,Un(n)),As(VS,i)}}function US(n,i,o){n==="focusin"?(qp(),gl=i,pl=o,gl.attachEvent("onpropertychange",Hp)):n==="focusout"&&qp()}function LS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ac(pl)}function zS(n,i){if(n==="click")return ac(i)}function BS(n,i){if(n==="input"||n==="change")return ac(i)}function qS(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Rn=typeof Object.is=="function"?Object.is:qS;function yl(n,i){if(Rn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var d=o[u];if(!Rt.call(i,d)||!Rn(n[d],i[d]))return!1}return!0}function $p(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Fp(n,i){var o=$p(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=i&&u>=i)return{node:o,offset:i-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=$p(o)}}function Gp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Gp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Kp(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Sr(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=Sr(n.document)}return i}function Od(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var HS=Ln&&"documentMode"in document&&11>=document.documentMode,Ca=null,Nd=null,_l=null,Dd=!1;function Qp(n,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Dd||Ca==null||Ca!==Sr(u)||(u=Ca,"selectionStart"in u&&Od(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),_l&&yl(_l,u)||(_l=u,u=Qc(Nd,"onSelect"),0<u.length&&(i=new xr("onSelect","select",null,i,o),n.push({event:i,listeners:u}),i.target=Ca)))}function Di(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var Ia={animationend:Di("Animation","AnimationEnd"),animationiteration:Di("Animation","AnimationIteration"),animationstart:Di("Animation","AnimationStart"),transitionrun:Di("Transition","TransitionRun"),transitionstart:Di("Transition","TransitionStart"),transitioncancel:Di("Transition","TransitionCancel"),transitionend:Di("Transition","TransitionEnd")},jd={},Yp={};Ln&&(Yp=document.createElement("div").style,"AnimationEvent"in window||(delete Ia.animationend.animation,delete Ia.animationiteration.animation,delete Ia.animationstart.animation),"TransitionEvent"in window||delete Ia.transitionend.transition);function ji(n){if(jd[n])return jd[n];if(!Ia[n])return n;var i=Ia[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in Yp)return jd[n]=i[o];return n}var Xp=ji("animationend"),Jp=ji("animationiteration"),Wp=ji("animationstart"),$S=ji("transitionrun"),FS=ji("transitionstart"),GS=ji("transitioncancel"),Zp=ji("transitionend"),ey=new Map,kd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kd.push("scrollEnd");function ir(n,i){ey.set(n,i),Er(i,[n])}var oc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Bn=[],Oa=0,Md=0;function lc(){for(var n=Oa,i=Md=Oa=0;i<n;){var o=Bn[i];Bn[i++]=null;var u=Bn[i];Bn[i++]=null;var d=Bn[i];Bn[i++]=null;var f=Bn[i];if(Bn[i++]=null,u!==null&&d!==null){var _=u.pending;_===null?d.next=d:(d.next=_.next,_.next=d),u.pending=d}f!==0&&ty(o,d,f)}}function uc(n,i,o,u){Bn[Oa++]=n,Bn[Oa++]=i,Bn[Oa++]=o,Bn[Oa++]=u,Md|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Pd(n,i,o,u){return uc(n,i,o,u),cc(n)}function ki(n,i){return uc(n,null,null,i),cc(n)}function ty(n,i,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var d=!1,f=n.return;f!==null;)f.childLanes|=o,u=f.alternate,u!==null&&(u.childLanes|=o),f.tag===22&&(n=f.stateNode,n===null||n._visibility&1||(d=!0)),n=f,f=f.return;return n.tag===3?(f=n.stateNode,d&&i!==null&&(d=31-bt(o),n=f.hiddenUpdates,u=n[d],u===null?n[d]=[i]:u.push(i),i.lane=o|536870912),f):null}function cc(n){if(50<zl)throw zl=0,Gf=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Na={};function KS(n,i,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(n,i,o,u){return new KS(n,i,o,u)}function Vd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Yr(n,i){var o=n.alternate;return o===null?(o=xn(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function ny(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function hc(n,i,o,u,d,f){var _=0;if(u=n,typeof n=="function")Vd(n)&&(_=1);else if(typeof n=="string")_=W1(n,o,se.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case O:return n=xn(31,o,i,d),n.elementType=O,n.lanes=f,n;case V:return Mi(o.children,d,f,i);case k:_=8,d|=24;break;case H:return n=xn(12,o,i,d|2),n.elementType=H,n.lanes=f,n;case we:return n=xn(13,o,i,d),n.elementType=we,n.lanes=f,n;case ce:return n=xn(19,o,i,d),n.elementType=ce,n.lanes=f,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Y:_=10;break e;case J:_=9;break e;case ae:_=11;break e;case I:_=14;break e;case C:_=16,u=null;break e}_=29,o=Error(r(130,n===null?"null":typeof n,"")),u=null}return i=xn(_,o,i,d),i.elementType=n,i.type=u,i.lanes=f,i}function Mi(n,i,o,u){return n=xn(7,n,u,i),n.lanes=o,n}function Ud(n,i,o){return n=xn(6,n,null,i),n.lanes=o,n}function ry(n){var i=xn(18,null,null,0);return i.stateNode=n,i}function Ld(n,i,o){return i=xn(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var sy=new WeakMap;function qn(n,i){if(typeof n=="object"&&n!==null){var o=sy.get(n);return o!==void 0?o:(i={value:n,source:i,stack:Yo(i)},sy.set(n,i),i)}return{value:n,source:i,stack:Yo(i)}}var Da=[],ja=0,dc=null,vl=0,Hn=[],$n=0,Is=null,Nr=1,Dr="";function Xr(n,i){Da[ja++]=vl,Da[ja++]=dc,dc=n,vl=i}function iy(n,i,o){Hn[$n++]=Nr,Hn[$n++]=Dr,Hn[$n++]=Is,Is=n;var u=Nr;n=Dr;var d=32-bt(u)-1;u&=~(1<<d),o+=1;var f=32-bt(i)+d;if(30<f){var _=d-d%5;f=(u&(1<<_)-1).toString(32),u>>=_,d-=_,Nr=1<<32-bt(i)+d|o<<d|u,Dr=f+n}else Nr=1<<f|o<<d|u,Dr=n}function zd(n){n.return!==null&&(Xr(n,1),iy(n,1,0))}function Bd(n){for(;n===dc;)dc=Da[--ja],Da[ja]=null,vl=Da[--ja],Da[ja]=null;for(;n===Is;)Is=Hn[--$n],Hn[$n]=null,Dr=Hn[--$n],Hn[$n]=null,Nr=Hn[--$n],Hn[$n]=null}function ay(n,i){Hn[$n++]=Nr,Hn[$n++]=Dr,Hn[$n++]=Is,Nr=i.id,Dr=i.overflow,Is=n}var Xt=null,ct=null,He=!1,Os=null,Fn=!1,qd=Error(r(519));function Ns(n){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw bl(qn(i,n)),qd}function oy(n){var i=n.stateNode,o=n.type,u=n.memoizedProps;switch(i[Ct]=n,i[$t]=u,o){case"dialog":Le("cancel",i),Le("close",i);break;case"iframe":case"object":case"embed":Le("load",i);break;case"video":case"audio":for(o=0;o<ql.length;o++)Le(ql[o],i);break;case"source":Le("error",i);break;case"img":case"image":case"link":Le("error",i),Le("load",i);break;case"details":Le("toggle",i);break;case"input":Le("invalid",i),Fu(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Le("invalid",i);break;case"textarea":Le("invalid",i),Es(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||Sv(i.textContent,o)?(u.popover!=null&&(Le("beforetoggle",i),Le("toggle",i)),u.onScroll!=null&&Le("scroll",i),u.onScrollEnd!=null&&Le("scrollend",i),u.onClick!=null&&(i.onclick=er),i=!0):i=!1,i||Ns(n,!0)}function ly(n){for(Xt=n.return;Xt;)switch(Xt.tag){case 5:case 31:case 13:Fn=!1;return;case 27:case 3:Fn=!0;return;default:Xt=Xt.return}}function ka(n){if(n!==Xt)return!1;if(!He)return ly(n),He=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||om(n.type,n.memoizedProps)),o=!o),o&&ct&&Ns(n),ly(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));ct=jv(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));ct=jv(n)}else i===27?(i=ct,Fs(n.type)?(n=dm,dm=null,ct=n):ct=i):ct=Xt?Kn(n.stateNode.nextSibling):null;return!0}function Pi(){ct=Xt=null,He=!1}function Hd(){var n=Os;return n!==null&&(wn===null?wn=n:wn.push.apply(wn,n),Os=null),n}function bl(n){Os===null?Os=[n]:Os.push(n)}var $d=S(null),Vi=null,Jr=null;function Ds(n,i,o){ne($d,i._currentValue),i._currentValue=o}function Wr(n){n._currentValue=$d.current,L($d)}function Fd(n,i,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===o)break;n=n.return}}function Gd(n,i,o,u){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var f=d.dependencies;if(f!==null){var _=d.child;f=f.firstContext;e:for(;f!==null;){var T=f;f=d;for(var D=0;D<i.length;D++)if(T.context===i[D]){f.lanes|=o,T=f.alternate,T!==null&&(T.lanes|=o),Fd(f.return,o,n),u||(_=null);break e}f=T.next}}else if(d.tag===18){if(_=d.return,_===null)throw Error(r(341));_.lanes|=o,f=_.alternate,f!==null&&(f.lanes|=o),Fd(_,o,n),_=null}else _=d.child;if(_!==null)_.return=d;else for(_=d;_!==null;){if(_===n){_=null;break}if(d=_.sibling,d!==null){d.return=_.return,_=d;break}_=_.return}d=_}}function Ma(n,i,o,u){n=null;for(var d=i,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var _=d.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var T=d.type;Rn(d.pendingProps.value,_.value)||(n!==null?n.push(T):n=[T])}}else if(d===be.current){if(_=d.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(Kl):n=[Kl])}d=d.return}n!==null&&Gd(i,n,o,u),i.flags|=262144}function fc(n){for(n=n.firstContext;n!==null;){if(!Rn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ui(n){Vi=n,Jr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Jt(n){return uy(Vi,n)}function mc(n,i){return Vi===null&&Ui(n),uy(n,i)}function uy(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Jr===null){if(n===null)throw Error(r(308));Jr=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Jr=Jr.next=i;return o}var QS=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},YS=s.unstable_scheduleCallback,XS=s.unstable_NormalPriority,Nt={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kd(){return{controller:new QS,data:new Map,refCount:0}}function wl(n){n.refCount--,n.refCount===0&&YS(XS,function(){n.controller.abort()})}var El=null,Qd=0,Pa=0,Va=null;function JS(n,i){if(El===null){var o=El=[];Qd=0,Pa=Wf(),Va={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Qd++,i.then(cy,cy),i}function cy(){if(--Qd===0&&El!==null){Va!==null&&(Va.status="fulfilled");var n=El;El=null,Pa=0,Va=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function WS(n,i){var o=[],u={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return n.then(function(){u.status="fulfilled",u.value=i;for(var d=0;d<o.length;d++)(0,o[d])(i)},function(d){for(u.status="rejected",u.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),u}var hy=K.S;K.S=function(n,i){Q_=hn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&JS(n,i),hy!==null&&hy(n,i)};var Li=S(null);function Yd(){var n=Li.current;return n!==null?n:at.pooledCache}function gc(n,i){i===null?ne(Li,Li.current):ne(Li,i.pool)}function dy(){var n=Yd();return n===null?null:{parent:Nt._currentValue,pool:n}}var Ua=Error(r(460)),Xd=Error(r(474)),pc=Error(r(542)),yc={then:function(){}};function fy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function my(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(er,er),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,py(n),n;default:if(typeof i.status=="string")i.then(er,er);else{if(n=at,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(u){if(i.status==="pending"){var d=i;d.status="fulfilled",d.value=u}},function(u){if(i.status==="pending"){var d=i;d.status="rejected",d.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,py(n),n}throw Bi=i,Ua}}function zi(n){try{var i=n._init;return i(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Bi=o,Ua):o}}var Bi=null;function gy(){if(Bi===null)throw Error(r(459));var n=Bi;return Bi=null,n}function py(n){if(n===Ua||n===pc)throw Error(r(483))}var La=null,Tl=0;function _c(n){var i=Tl;return Tl+=1,La===null&&(La=[]),my(La,n,i)}function Sl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function vc(n,i){throw i.$$typeof===A?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function yy(n){function i(z,P){if(n){var $=z.deletions;$===null?(z.deletions=[P],z.flags|=16):$.push(P)}}function o(z,P){if(!n)return null;for(;P!==null;)i(z,P),P=P.sibling;return null}function u(z){for(var P=new Map;z!==null;)z.key!==null?P.set(z.key,z):P.set(z.index,z),z=z.sibling;return P}function d(z,P){return z=Yr(z,P),z.index=0,z.sibling=null,z}function f(z,P,$){return z.index=$,n?($=z.alternate,$!==null?($=$.index,$<P?(z.flags|=67108866,P):$):(z.flags|=67108866,P)):(z.flags|=1048576,P)}function _(z){return n&&z.alternate===null&&(z.flags|=67108866),z}function T(z,P,$,Z){return P===null||P.tag!==6?(P=Ud($,z.mode,Z),P.return=z,P):(P=d(P,$),P.return=z,P)}function D(z,P,$,Z){var ve=$.type;return ve===V?W(z,P,$.props.children,Z,$.key):P!==null&&(P.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===C&&zi(ve)===P.type)?(P=d(P,$.props),Sl(P,$),P.return=z,P):(P=hc($.type,$.key,$.props,null,z.mode,Z),Sl(P,$),P.return=z,P)}function F(z,P,$,Z){return P===null||P.tag!==4||P.stateNode.containerInfo!==$.containerInfo||P.stateNode.implementation!==$.implementation?(P=Ld($,z.mode,Z),P.return=z,P):(P=d(P,$.children||[]),P.return=z,P)}function W(z,P,$,Z,ve){return P===null||P.tag!==7?(P=Mi($,z.mode,Z,ve),P.return=z,P):(P=d(P,$),P.return=z,P)}function ee(z,P,$){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=Ud(""+P,z.mode,$),P.return=z,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case x:return $=hc(P.type,P.key,P.props,null,z.mode,$),Sl($,P),$.return=z,$;case j:return P=Ld(P,z.mode,$),P.return=z,P;case C:return P=zi(P),ee(z,P,$)}if(ot(P)||B(P))return P=Mi(P,z.mode,$,null),P.return=z,P;if(typeof P.then=="function")return ee(z,_c(P),$);if(P.$$typeof===Y)return ee(z,mc(z,P),$);vc(z,P)}return null}function G(z,P,$,Z){var ve=P!==null?P.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return ve!==null?null:T(z,P,""+$,Z);if(typeof $=="object"&&$!==null){switch($.$$typeof){case x:return $.key===ve?D(z,P,$,Z):null;case j:return $.key===ve?F(z,P,$,Z):null;case C:return $=zi($),G(z,P,$,Z)}if(ot($)||B($))return ve!==null?null:W(z,P,$,Z,null);if(typeof $.then=="function")return G(z,P,_c($),Z);if($.$$typeof===Y)return G(z,P,mc(z,$),Z);vc(z,$)}return null}function X(z,P,$,Z,ve){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return z=z.get($)||null,T(P,z,""+Z,ve);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case x:return z=z.get(Z.key===null?$:Z.key)||null,D(P,z,Z,ve);case j:return z=z.get(Z.key===null?$:Z.key)||null,F(P,z,Z,ve);case C:return Z=zi(Z),X(z,P,$,Z,ve)}if(ot(Z)||B(Z))return z=z.get($)||null,W(P,z,Z,ve,null);if(typeof Z.then=="function")return X(z,P,$,_c(Z),ve);if(Z.$$typeof===Y)return X(z,P,$,mc(P,Z),ve);vc(P,Z)}return null}function fe(z,P,$,Z){for(var ve=null,Ye=null,ye=P,ke=P=0,Be=null;ye!==null&&ke<$.length;ke++){ye.index>ke?(Be=ye,ye=null):Be=ye.sibling;var Xe=G(z,ye,$[ke],Z);if(Xe===null){ye===null&&(ye=Be);break}n&&ye&&Xe.alternate===null&&i(z,ye),P=f(Xe,P,ke),Ye===null?ve=Xe:Ye.sibling=Xe,Ye=Xe,ye=Be}if(ke===$.length)return o(z,ye),He&&Xr(z,ke),ve;if(ye===null){for(;ke<$.length;ke++)ye=ee(z,$[ke],Z),ye!==null&&(P=f(ye,P,ke),Ye===null?ve=ye:Ye.sibling=ye,Ye=ye);return He&&Xr(z,ke),ve}for(ye=u(ye);ke<$.length;ke++)Be=X(ye,z,ke,$[ke],Z),Be!==null&&(n&&Be.alternate!==null&&ye.delete(Be.key===null?ke:Be.key),P=f(Be,P,ke),Ye===null?ve=Be:Ye.sibling=Be,Ye=Be);return n&&ye.forEach(function(Xs){return i(z,Xs)}),He&&Xr(z,ke),ve}function Ee(z,P,$,Z){if($==null)throw Error(r(151));for(var ve=null,Ye=null,ye=P,ke=P=0,Be=null,Xe=$.next();ye!==null&&!Xe.done;ke++,Xe=$.next()){ye.index>ke?(Be=ye,ye=null):Be=ye.sibling;var Xs=G(z,ye,Xe.value,Z);if(Xs===null){ye===null&&(ye=Be);break}n&&ye&&Xs.alternate===null&&i(z,ye),P=f(Xs,P,ke),Ye===null?ve=Xs:Ye.sibling=Xs,Ye=Xs,ye=Be}if(Xe.done)return o(z,ye),He&&Xr(z,ke),ve;if(ye===null){for(;!Xe.done;ke++,Xe=$.next())Xe=ee(z,Xe.value,Z),Xe!==null&&(P=f(Xe,P,ke),Ye===null?ve=Xe:Ye.sibling=Xe,Ye=Xe);return He&&Xr(z,ke),ve}for(ye=u(ye);!Xe.done;ke++,Xe=$.next())Xe=X(ye,z,ke,Xe.value,Z),Xe!==null&&(n&&Xe.alternate!==null&&ye.delete(Xe.key===null?ke:Xe.key),P=f(Xe,P,ke),Ye===null?ve=Xe:Ye.sibling=Xe,Ye=Xe);return n&&ye.forEach(function(uA){return i(z,uA)}),He&&Xr(z,ke),ve}function it(z,P,$,Z){if(typeof $=="object"&&$!==null&&$.type===V&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case x:e:{for(var ve=$.key;P!==null;){if(P.key===ve){if(ve=$.type,ve===V){if(P.tag===7){o(z,P.sibling),Z=d(P,$.props.children),Z.return=z,z=Z;break e}}else if(P.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===C&&zi(ve)===P.type){o(z,P.sibling),Z=d(P,$.props),Sl(Z,$),Z.return=z,z=Z;break e}o(z,P);break}else i(z,P);P=P.sibling}$.type===V?(Z=Mi($.props.children,z.mode,Z,$.key),Z.return=z,z=Z):(Z=hc($.type,$.key,$.props,null,z.mode,Z),Sl(Z,$),Z.return=z,z=Z)}return _(z);case j:e:{for(ve=$.key;P!==null;){if(P.key===ve)if(P.tag===4&&P.stateNode.containerInfo===$.containerInfo&&P.stateNode.implementation===$.implementation){o(z,P.sibling),Z=d(P,$.children||[]),Z.return=z,z=Z;break e}else{o(z,P);break}else i(z,P);P=P.sibling}Z=Ld($,z.mode,Z),Z.return=z,z=Z}return _(z);case C:return $=zi($),it(z,P,$,Z)}if(ot($))return fe(z,P,$,Z);if(B($)){if(ve=B($),typeof ve!="function")throw Error(r(150));return $=ve.call($),Ee(z,P,$,Z)}if(typeof $.then=="function")return it(z,P,_c($),Z);if($.$$typeof===Y)return it(z,P,mc(z,$),Z);vc(z,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,P!==null&&P.tag===6?(o(z,P.sibling),Z=d(P,$),Z.return=z,z=Z):(o(z,P),Z=Ud($,z.mode,Z),Z.return=z,z=Z),_(z)):o(z,P)}return function(z,P,$,Z){try{Tl=0;var ve=it(z,P,$,Z);return La=null,ve}catch(ye){if(ye===Ua||ye===pc)throw ye;var Ye=xn(29,ye,null,z.mode);return Ye.lanes=Z,Ye.return=z,Ye}finally{}}}var qi=yy(!0),_y=yy(!1),js=!1;function Jd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ks(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ms(n,i,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(We&2)!==0){var d=u.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),u.pending=i,i=cc(n),ty(n,null,o),i}return uc(n,u,i,o),cc(n)}function Al(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,Wo(n,o)}}function Zd(n,i){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var d=null,f=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};f===null?d=f=_:f=f.next=_,o=o.next}while(o!==null);f===null?d=f=i:f=f.next=i}else d=f=i;o={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var ef=!1;function Rl(){if(ef){var n=Va;if(n!==null)throw n}}function xl(n,i,o,u){ef=!1;var d=n.updateQueue;js=!1;var f=d.firstBaseUpdate,_=d.lastBaseUpdate,T=d.shared.pending;if(T!==null){d.shared.pending=null;var D=T,F=D.next;D.next=null,_===null?f=F:_.next=F,_=D;var W=n.alternate;W!==null&&(W=W.updateQueue,T=W.lastBaseUpdate,T!==_&&(T===null?W.firstBaseUpdate=F:T.next=F,W.lastBaseUpdate=D))}if(f!==null){var ee=d.baseState;_=0,W=F=D=null,T=f;do{var G=T.lane&-536870913,X=G!==T.lane;if(X?(ze&G)===G:(u&G)===G){G!==0&&G===Pa&&(ef=!0),W!==null&&(W=W.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var fe=n,Ee=T;G=i;var it=o;switch(Ee.tag){case 1:if(fe=Ee.payload,typeof fe=="function"){ee=fe.call(it,ee,G);break e}ee=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=Ee.payload,G=typeof fe=="function"?fe.call(it,ee,G):fe,G==null)break e;ee=E({},ee,G);break e;case 2:js=!0}}G=T.callback,G!==null&&(n.flags|=64,X&&(n.flags|=8192),X=d.callbacks,X===null?d.callbacks=[G]:X.push(G))}else X={lane:G,tag:T.tag,payload:T.payload,callback:T.callback,next:null},W===null?(F=W=X,D=ee):W=W.next=X,_|=G;if(T=T.next,T===null){if(T=d.shared.pending,T===null)break;X=T,T=X.next,X.next=null,d.lastBaseUpdate=X,d.shared.pending=null}}while(!0);W===null&&(D=ee),d.baseState=D,d.firstBaseUpdate=F,d.lastBaseUpdate=W,f===null&&(d.shared.lanes=0),zs|=_,n.lanes=_,n.memoizedState=ee}}function vy(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function by(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)vy(o[n],i)}var za=S(null),bc=S(0);function wy(n,i){n=os,ne(bc,n),ne(za,i),os=n|i.baseLanes}function tf(){ne(bc,os),ne(za,za.current)}function nf(){os=bc.current,L(za),L(bc)}var Cn=S(null),Gn=null;function Ps(n){var i=n.alternate;ne(Et,Et.current&1),ne(Cn,n),Gn===null&&(i===null||za.current!==null||i.memoizedState!==null)&&(Gn=n)}function rf(n){ne(Et,Et.current),ne(Cn,n),Gn===null&&(Gn=n)}function Ey(n){n.tag===22?(ne(Et,Et.current),ne(Cn,n),Gn===null&&(Gn=n)):Vs()}function Vs(){ne(Et,Et.current),ne(Cn,Cn.current)}function In(n){L(Cn),Gn===n&&(Gn=null),L(Et)}var Et=S(0);function wc(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||cm(o)||hm(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Zr=0,De=null,rt=null,Dt=null,Ec=!1,Ba=!1,Hi=!1,Tc=0,Cl=0,qa=null,ZS=0;function _t(){throw Error(r(321))}function sf(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!Rn(n[o],i[o]))return!1;return!0}function af(n,i,o,u,d,f){return Zr=f,De=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,K.H=n===null||n.memoizedState===null?i_:wf,Hi=!1,f=o(u,d),Hi=!1,Ba&&(f=Sy(i,o,u,d)),Ty(n),f}function Ty(n){K.H=Nl;var i=rt!==null&&rt.next!==null;if(Zr=0,Dt=rt=De=null,Ec=!1,Cl=0,qa=null,i)throw Error(r(300));n===null||jt||(n=n.dependencies,n!==null&&fc(n)&&(jt=!0))}function Sy(n,i,o,u){De=n;var d=0;do{if(Ba&&(qa=null),Cl=0,Ba=!1,25<=d)throw Error(r(301));if(d+=1,Dt=rt=null,n.updateQueue!=null){var f=n.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}K.H=a_,f=i(o,u)}while(Ba);return f}function e1(){var n=K.H,i=n.useState()[0];return i=typeof i.then=="function"?Il(i):i,n=n.useState()[0],(rt!==null?rt.memoizedState:null)!==n&&(De.flags|=1024),i}function of(){var n=Tc!==0;return Tc=0,n}function lf(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function uf(n){if(Ec){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ec=!1}Zr=0,Dt=rt=De=null,Ba=!1,Cl=Tc=0,qa=null}function fn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?De.memoizedState=Dt=n:Dt=Dt.next=n,Dt}function Tt(){if(rt===null){var n=De.alternate;n=n!==null?n.memoizedState:null}else n=rt.next;var i=Dt===null?De.memoizedState:Dt.next;if(i!==null)Dt=i,rt=n;else{if(n===null)throw De.alternate===null?Error(r(467)):Error(r(310));rt=n,n={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},Dt===null?De.memoizedState=Dt=n:Dt=Dt.next=n}return Dt}function Sc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Il(n){var i=Cl;return Cl+=1,qa===null&&(qa=[]),n=my(qa,n,i),i=De,(Dt===null?i.memoizedState:Dt.next)===null&&(i=i.alternate,K.H=i===null||i.memoizedState===null?i_:wf),n}function Ac(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Il(n);if(n.$$typeof===Y)return Jt(n)}throw Error(r(438,String(n)))}function cf(n){var i=null,o=De.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=De.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(d){return d.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Sc(),De.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),u=0;u<n;u++)o[u]=U;return i.index++,o}function es(n,i){return typeof i=="function"?i(n):i}function Rc(n){var i=Tt();return hf(i,rt,n)}function hf(n,i,o){var u=n.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var d=n.baseQueue,f=u.pending;if(f!==null){if(d!==null){var _=d.next;d.next=f.next,f.next=_}i.baseQueue=d=f,u.pending=null}if(f=n.baseState,d===null)n.memoizedState=f;else{i=d.next;var T=_=null,D=null,F=i,W=!1;do{var ee=F.lane&-536870913;if(ee!==F.lane?(ze&ee)===ee:(Zr&ee)===ee){var G=F.revertLane;if(G===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ee===Pa&&(W=!0);else if((Zr&G)===G){F=F.next,G===Pa&&(W=!0);continue}else ee={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(T=D=ee,_=f):D=D.next=ee,De.lanes|=G,zs|=G;ee=F.action,Hi&&o(f,ee),f=F.hasEagerState?F.eagerState:o(f,ee)}else G={lane:ee,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(T=D=G,_=f):D=D.next=G,De.lanes|=ee,zs|=ee;F=F.next}while(F!==null&&F!==i);if(D===null?_=f:D.next=T,!Rn(f,n.memoizedState)&&(jt=!0,W&&(o=Va,o!==null)))throw o;n.memoizedState=f,n.baseState=_,n.baseQueue=D,u.lastRenderedState=f}return d===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function df(n){var i=Tt(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var u=o.dispatch,d=o.pending,f=i.memoizedState;if(d!==null){o.pending=null;var _=d=d.next;do f=n(f,_.action),_=_.next;while(_!==d);Rn(f,i.memoizedState)||(jt=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),o.lastRenderedState=f}return[f,u]}function Ay(n,i,o){var u=De,d=Tt(),f=He;if(f){if(o===void 0)throw Error(r(407));o=o()}else o=i();var _=!Rn((rt||d).memoizedState,o);if(_&&(d.memoizedState=o,jt=!0),d=d.queue,gf(Cy.bind(null,u,d,n),[n]),d.getSnapshot!==i||_||Dt!==null&&Dt.memoizedState.tag&1){if(u.flags|=2048,Ha(9,{destroy:void 0},xy.bind(null,u,d,o,i),null),at===null)throw Error(r(349));f||(Zr&127)!==0||Ry(u,i,o)}return o}function Ry(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=De.updateQueue,i===null?(i=Sc(),De.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function xy(n,i,o,u){i.value=o,i.getSnapshot=u,Iy(i)&&Oy(n)}function Cy(n,i,o){return o(function(){Iy(i)&&Oy(n)})}function Iy(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!Rn(n,o)}catch{return!0}}function Oy(n){var i=ki(n,2);i!==null&&En(i,n,2)}function ff(n){var i=fn();if(typeof n=="function"){var o=n;if(n=o(),Hi){Pn(!0);try{o()}finally{Pn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:n},i}function Ny(n,i,o,u){return n.baseState=o,hf(n,rt,typeof u=="function"?u:es)}function t1(n,i,o,u,d){if(Ic(n))throw Error(r(485));if(n=i.action,n!==null){var f={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){f.listeners.push(_)}};K.T!==null?o(!0):f.isTransition=!1,u(f),o=i.pending,o===null?(f.next=i.pending=f,Dy(i,f)):(f.next=o.next,i.pending=o.next=f)}}function Dy(n,i){var o=i.action,u=i.payload,d=n.state;if(i.isTransition){var f=K.T,_={};K.T=_;try{var T=o(d,u),D=K.S;D!==null&&D(_,T),jy(n,i,T)}catch(F){mf(n,i,F)}finally{f!==null&&_.types!==null&&(f.types=_.types),K.T=f}}else try{f=o(d,u),jy(n,i,f)}catch(F){mf(n,i,F)}}function jy(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){ky(n,i,u)},function(u){return mf(n,i,u)}):ky(n,i,o)}function ky(n,i,o){i.status="fulfilled",i.value=o,My(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,Dy(n,o)))}function mf(n,i,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,My(i),i=i.next;while(i!==u)}n.action=null}function My(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function Py(n,i){return i}function Vy(n,i){if(He){var o=at.formState;if(o!==null){e:{var u=De;if(He){if(ct){t:{for(var d=ct,f=Fn;d.nodeType!==8;){if(!f){d=null;break t}if(d=Kn(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){ct=Kn(d.nextSibling),u=d.data==="F!";break e}}Ns(u)}u=!1}u&&(i=o[0])}}return o=fn(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Py,lastRenderedState:i},o.queue=u,o=n_.bind(null,De,u),u.dispatch=o,u=ff(!1),f=bf.bind(null,De,!1,u.queue),u=fn(),d={state:i,dispatch:null,action:n,pending:null},u.queue=d,o=t1.bind(null,De,d,f,o),d.dispatch=o,u.memoizedState=n,[i,o,!1]}function Uy(n){var i=Tt();return Ly(i,rt,n)}function Ly(n,i,o){if(i=hf(n,i,Py)[0],n=Rc(es)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Il(i)}catch(_){throw _===Ua?pc:_}else u=i;i=Tt();var d=i.queue,f=d.dispatch;return o!==i.memoizedState&&(De.flags|=2048,Ha(9,{destroy:void 0},n1.bind(null,d,o),null)),[u,f,n]}function n1(n,i){n.action=i}function zy(n){var i=Tt(),o=rt;if(o!==null)return Ly(i,o,n);Tt(),i=i.memoizedState,o=Tt();var u=o.queue.dispatch;return o.memoizedState=n,[i,u,!1]}function Ha(n,i,o,u){return n={tag:n,create:o,deps:u,inst:i,next:null},i=De.updateQueue,i===null&&(i=Sc(),De.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,i.lastEffect=n),n}function By(){return Tt().memoizedState}function xc(n,i,o,u){var d=fn();De.flags|=n,d.memoizedState=Ha(1|i,{destroy:void 0},o,u===void 0?null:u)}function Cc(n,i,o,u){var d=Tt();u=u===void 0?null:u;var f=d.memoizedState.inst;rt!==null&&u!==null&&sf(u,rt.memoizedState.deps)?d.memoizedState=Ha(i,f,o,u):(De.flags|=n,d.memoizedState=Ha(1|i,f,o,u))}function qy(n,i){xc(8390656,8,n,i)}function gf(n,i){Cc(2048,8,n,i)}function r1(n){De.flags|=4;var i=De.updateQueue;if(i===null)i=Sc(),De.updateQueue=i,i.events=[n];else{var o=i.events;o===null?i.events=[n]:o.push(n)}}function Hy(n){var i=Tt().memoizedState;return r1({ref:i,nextImpl:n}),function(){if((We&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function $y(n,i){return Cc(4,2,n,i)}function Fy(n,i){return Cc(4,4,n,i)}function Gy(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Ky(n,i,o){o=o!=null?o.concat([n]):null,Cc(4,4,Gy.bind(null,i,n),o)}function pf(){}function Qy(n,i){var o=Tt();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&sf(i,u[1])?u[0]:(o.memoizedState=[n,i],n)}function Yy(n,i){var o=Tt();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&sf(i,u[1]))return u[0];if(u=n(),Hi){Pn(!0);try{n()}finally{Pn(!1)}}return o.memoizedState=[u,i],u}function yf(n,i,o){return o===void 0||(Zr&1073741824)!==0&&(ze&261930)===0?n.memoizedState=i:(n.memoizedState=o,n=X_(),De.lanes|=n,zs|=n,o)}function Xy(n,i,o,u){return Rn(o,i)?o:za.current!==null?(n=yf(n,o,u),Rn(n,i)||(jt=!0),n):(Zr&42)===0||(Zr&1073741824)!==0&&(ze&261930)===0?(jt=!0,n.memoizedState=o):(n=X_(),De.lanes|=n,zs|=n,i)}function Jy(n,i,o,u,d){var f=re.p;re.p=f!==0&&8>f?f:8;var _=K.T,T={};K.T=T,bf(n,!1,i,o);try{var D=d(),F=K.S;if(F!==null&&F(T,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var W=WS(D,u);Ol(n,i,W,Dn(n))}else Ol(n,i,u,Dn(n))}catch(ee){Ol(n,i,{then:function(){},status:"rejected",reason:ee},Dn())}finally{re.p=f,_!==null&&T.types!==null&&(_.types=T.types),K.T=_}}function s1(){}function _f(n,i,o,u){if(n.tag!==5)throw Error(r(476));var d=Wy(n).queue;Jy(n,d,i,ue,o===null?s1:function(){return Zy(n),o(u)})}function Wy(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:ue},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:es,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Zy(n){var i=Wy(n);i.next===null&&(i=n.alternate.memoizedState),Ol(n,i.next.queue,{},Dn())}function vf(){return Jt(Kl)}function e_(){return Tt().memoizedState}function t_(){return Tt().memoizedState}function i1(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=Dn();n=ks(o);var u=Ms(i,n,o);u!==null&&(En(u,i,o),Al(u,i,o)),i={cache:Kd()},n.payload=i;return}i=i.return}}function a1(n,i,o){var u=Dn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Ic(n)?r_(i,o):(o=Pd(n,i,o,u),o!==null&&(En(o,n,u),s_(o,i,u)))}function n_(n,i,o){var u=Dn();Ol(n,i,o,u)}function Ol(n,i,o,u){var d={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Ic(n))r_(i,d);else{var f=n.alternate;if(n.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var _=i.lastRenderedState,T=f(_,o);if(d.hasEagerState=!0,d.eagerState=T,Rn(T,_))return uc(n,i,d,0),at===null&&lc(),!1}catch{}finally{}if(o=Pd(n,i,d,u),o!==null)return En(o,n,u),s_(o,i,u),!0}return!1}function bf(n,i,o,u){if(u={lane:2,revertLane:Wf(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ic(n)){if(i)throw Error(r(479))}else i=Pd(n,o,u,2),i!==null&&En(i,n,2)}function Ic(n){var i=n.alternate;return n===De||i!==null&&i===De}function r_(n,i){Ba=Ec=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function s_(n,i,o){if((o&4194048)!==0){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,Wo(n,o)}}var Nl={readContext:Jt,use:Ac,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useLayoutEffect:_t,useInsertionEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useSyncExternalStore:_t,useId:_t,useHostTransitionStatus:_t,useFormState:_t,useActionState:_t,useOptimistic:_t,useMemoCache:_t,useCacheRefresh:_t};Nl.useEffectEvent=_t;var i_={readContext:Jt,use:Ac,useCallback:function(n,i){return fn().memoizedState=[n,i===void 0?null:i],n},useContext:Jt,useEffect:qy,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,xc(4194308,4,Gy.bind(null,i,n),o)},useLayoutEffect:function(n,i){return xc(4194308,4,n,i)},useInsertionEffect:function(n,i){xc(4,2,n,i)},useMemo:function(n,i){var o=fn();i=i===void 0?null:i;var u=n();if(Hi){Pn(!0);try{n()}finally{Pn(!1)}}return o.memoizedState=[u,i],u},useReducer:function(n,i,o){var u=fn();if(o!==void 0){var d=o(i);if(Hi){Pn(!0);try{o(i)}finally{Pn(!1)}}}else d=i;return u.memoizedState=u.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},u.queue=n,n=n.dispatch=a1.bind(null,De,n),[u.memoizedState,n]},useRef:function(n){var i=fn();return n={current:n},i.memoizedState=n},useState:function(n){n=ff(n);var i=n.queue,o=n_.bind(null,De,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:pf,useDeferredValue:function(n,i){var o=fn();return yf(o,n,i)},useTransition:function(){var n=ff(!1);return n=Jy.bind(null,De,n.queue,!0,!1),fn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var u=De,d=fn();if(He){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),at===null)throw Error(r(349));(ze&127)!==0||Ry(u,i,o)}d.memoizedState=o;var f={value:o,getSnapshot:i};return d.queue=f,qy(Cy.bind(null,u,f,n),[n]),u.flags|=2048,Ha(9,{destroy:void 0},xy.bind(null,u,f,o,i),null),o},useId:function(){var n=fn(),i=at.identifierPrefix;if(He){var o=Dr,u=Nr;o=(u&~(1<<32-bt(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=Tc++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=ZS++,i="_"+i+"r_"+o.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:vf,useFormState:Vy,useActionState:Vy,useOptimistic:function(n){var i=fn();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=bf.bind(null,De,!0,o),o.dispatch=i,[n,i]},useMemoCache:cf,useCacheRefresh:function(){return fn().memoizedState=i1.bind(null,De)},useEffectEvent:function(n){var i=fn(),o={impl:n};return i.memoizedState=o,function(){if((We&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},wf={readContext:Jt,use:Ac,useCallback:Qy,useContext:Jt,useEffect:gf,useImperativeHandle:Ky,useInsertionEffect:$y,useLayoutEffect:Fy,useMemo:Yy,useReducer:Rc,useRef:By,useState:function(){return Rc(es)},useDebugValue:pf,useDeferredValue:function(n,i){var o=Tt();return Xy(o,rt.memoizedState,n,i)},useTransition:function(){var n=Rc(es)[0],i=Tt().memoizedState;return[typeof n=="boolean"?n:Il(n),i]},useSyncExternalStore:Ay,useId:e_,useHostTransitionStatus:vf,useFormState:Uy,useActionState:Uy,useOptimistic:function(n,i){var o=Tt();return Ny(o,rt,n,i)},useMemoCache:cf,useCacheRefresh:t_};wf.useEffectEvent=Hy;var a_={readContext:Jt,use:Ac,useCallback:Qy,useContext:Jt,useEffect:gf,useImperativeHandle:Ky,useInsertionEffect:$y,useLayoutEffect:Fy,useMemo:Yy,useReducer:df,useRef:By,useState:function(){return df(es)},useDebugValue:pf,useDeferredValue:function(n,i){var o=Tt();return rt===null?yf(o,n,i):Xy(o,rt.memoizedState,n,i)},useTransition:function(){var n=df(es)[0],i=Tt().memoizedState;return[typeof n=="boolean"?n:Il(n),i]},useSyncExternalStore:Ay,useId:e_,useHostTransitionStatus:vf,useFormState:zy,useActionState:zy,useOptimistic:function(n,i){var o=Tt();return rt!==null?Ny(o,rt,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:cf,useCacheRefresh:t_};a_.useEffectEvent=Hy;function Ef(n,i,o,u){i=n.memoizedState,o=o(u,i),o=o==null?i:E({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Tf={enqueueSetState:function(n,i,o){n=n._reactInternals;var u=Dn(),d=ks(u);d.payload=i,o!=null&&(d.callback=o),i=Ms(n,d,u),i!==null&&(En(i,n,u),Al(i,n,u))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var u=Dn(),d=ks(u);d.tag=1,d.payload=i,o!=null&&(d.callback=o),i=Ms(n,d,u),i!==null&&(En(i,n,u),Al(i,n,u))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=Dn(),u=ks(o);u.tag=2,i!=null&&(u.callback=i),i=Ms(n,u,o),i!==null&&(En(i,n,o),Al(i,n,o))}};function o_(n,i,o,u,d,f,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,f,_):i.prototype&&i.prototype.isPureReactComponent?!yl(o,u)||!yl(d,f):!0}function l_(n,i,o,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==n&&Tf.enqueueReplaceState(i,i.state,null)}function $i(n,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(n=n.defaultProps){o===i&&(o=E({},o));for(var d in n)o[d]===void 0&&(o[d]=n[d])}return o}function u_(n){oc(n)}function c_(n){console.error(n)}function h_(n){oc(n)}function Oc(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function d_(n,i,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Sf(n,i,o){return o=ks(o),o.tag=3,o.payload={element:null},o.callback=function(){Oc(n,i)},o}function f_(n){return n=ks(n),n.tag=3,n}function m_(n,i,o,u){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var f=u.value;n.payload=function(){return d(f)},n.callback=function(){d_(i,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){d_(i,o,u),typeof d!="function"&&(Bs===null?Bs=new Set([this]):Bs.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function o1(n,i,o,u,d){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&Ma(i,o,d,!0),o=Cn.current,o!==null){switch(o.tag){case 31:case 13:return Gn===null?qc():o.alternate===null&&vt===0&&(vt=3),o.flags&=-257,o.flags|=65536,o.lanes=d,u===yc?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),Yf(n,u,d)),!1;case 22:return o.flags|=65536,u===yc?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),Yf(n,u,d)),!1}throw Error(r(435,o.tag))}return Yf(n,u,d),qc(),!1}if(He)return i=Cn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=d,u!==qd&&(n=Error(r(422),{cause:u}),bl(qn(n,o)))):(u!==qd&&(i=Error(r(423),{cause:u}),bl(qn(i,o))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,u=qn(u,o),d=Sf(n.stateNode,u,d),Zd(n,d),vt!==4&&(vt=2)),!1;var f=Error(r(520),{cause:u});if(f=qn(f,o),Ll===null?Ll=[f]:Ll.push(f),vt!==4&&(vt=2),i===null)return!0;u=qn(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=d&-d,o.lanes|=n,n=Sf(o.stateNode,u,n),Zd(o,n),!1;case 1:if(i=o.type,f=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Bs===null||!Bs.has(f))))return o.flags|=65536,d&=-d,o.lanes|=d,d=f_(d),m_(d,n,o,u),Zd(o,d),!1}o=o.return}while(o!==null);return!1}var Af=Error(r(461)),jt=!1;function Wt(n,i,o,u){i.child=n===null?_y(i,null,o,u):qi(i,n.child,o,u)}function g_(n,i,o,u,d){o=o.render;var f=i.ref;if("ref"in u){var _={};for(var T in u)T!=="ref"&&(_[T]=u[T])}else _=u;return Ui(i),u=af(n,i,o,_,f,d),T=of(),n!==null&&!jt?(lf(n,i,d),ts(n,i,d)):(He&&T&&zd(i),i.flags|=1,Wt(n,i,u,d),i.child)}function p_(n,i,o,u,d){if(n===null){var f=o.type;return typeof f=="function"&&!Vd(f)&&f.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=f,y_(n,i,f,u,d)):(n=hc(o.type,null,u,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(f=n.child,!jf(n,d)){var _=f.memoizedProps;if(o=o.compare,o=o!==null?o:yl,o(_,u)&&n.ref===i.ref)return ts(n,i,d)}return i.flags|=1,n=Yr(f,u),n.ref=i.ref,n.return=i,i.child=n}function y_(n,i,o,u,d){if(n!==null){var f=n.memoizedProps;if(yl(f,u)&&n.ref===i.ref)if(jt=!1,i.pendingProps=u=f,jf(n,d))(n.flags&131072)!==0&&(jt=!0);else return i.lanes=n.lanes,ts(n,i,d)}return Rf(n,i,o,u,d)}function __(n,i,o,u){var d=u.children,f=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(f=f!==null?f.baseLanes|o:o,n!==null){for(u=i.child=n.child,d=0;u!==null;)d=d|u.lanes|u.childLanes,u=u.sibling;u=d&~f}else u=0,i.child=null;return v_(n,i,f,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&gc(i,f!==null?f.cachePool:null),f!==null?wy(i,f):tf(),Ey(i);else return u=i.lanes=536870912,v_(n,i,f!==null?f.baseLanes|o:o,o,u)}else f!==null?(gc(i,f.cachePool),wy(i,f),Vs(),i.memoizedState=null):(n!==null&&gc(i,null),tf(),Vs());return Wt(n,i,d,o),i.child}function Dl(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function v_(n,i,o,u,d){var f=Yd();return f=f===null?null:{parent:Nt._currentValue,pool:f},i.memoizedState={baseLanes:o,cachePool:f},n!==null&&gc(i,null),tf(),Ey(i),n!==null&&Ma(n,i,u,!0),i.childLanes=d,null}function Nc(n,i){return i=jc({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function b_(n,i,o){return qi(i,n.child,null,o),n=Nc(i,i.pendingProps),n.flags|=2,In(i),i.memoizedState=null,n}function l1(n,i,o){var u=i.pendingProps,d=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(He){if(u.mode==="hidden")return n=Nc(i,u),i.lanes=536870912,Dl(null,n);if(rf(i),(n=ct)?(n=Dv(n,Fn),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Is!==null?{id:Nr,overflow:Dr}:null,retryLane:536870912,hydrationErrors:null},o=ry(n),o.return=i,i.child=o,Xt=i,ct=null)):n=null,n===null)throw Ns(i);return i.lanes=536870912,null}return Nc(i,u)}var f=n.memoizedState;if(f!==null){var _=f.dehydrated;if(rf(i),d)if(i.flags&256)i.flags&=-257,i=b_(n,i,o);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(r(558));else if(jt||Ma(n,i,o,!1),d=(o&n.childLanes)!==0,jt||d){if(u=at,u!==null&&(_=Zo(u,o),_!==0&&_!==f.retryLane))throw f.retryLane=_,ki(n,_),En(u,n,_),Af;qc(),i=b_(n,i,o)}else n=f.treeContext,ct=Kn(_.nextSibling),Xt=i,He=!0,Os=null,Fn=!1,n!==null&&ay(i,n),i=Nc(i,u),i.flags|=4096;return i}return n=Yr(n.child,{mode:u.mode,children:u.children}),n.ref=i.ref,i.child=n,n.return=i,n}function Dc(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function Rf(n,i,o,u,d){return Ui(i),o=af(n,i,o,u,void 0,d),u=of(),n!==null&&!jt?(lf(n,i,d),ts(n,i,d)):(He&&u&&zd(i),i.flags|=1,Wt(n,i,o,d),i.child)}function w_(n,i,o,u,d,f){return Ui(i),i.updateQueue=null,o=Sy(i,u,o,d),Ty(n),u=of(),n!==null&&!jt?(lf(n,i,f),ts(n,i,f)):(He&&u&&zd(i),i.flags|=1,Wt(n,i,o,f),i.child)}function E_(n,i,o,u,d){if(Ui(i),i.stateNode===null){var f=Na,_=o.contextType;typeof _=="object"&&_!==null&&(f=Jt(_)),f=new o(u,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Tf,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=u,f.state=i.memoizedState,f.refs={},Jd(i),_=o.contextType,f.context=typeof _=="object"&&_!==null?Jt(_):Na,f.state=i.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Ef(i,o,_,u),f.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(_=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),_!==f.state&&Tf.enqueueReplaceState(f,f.state,null),xl(i,u,f,d),Rl(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(n===null){f=i.stateNode;var T=i.memoizedProps,D=$i(o,T);f.props=D;var F=f.context,W=o.contextType;_=Na,typeof W=="object"&&W!==null&&(_=Jt(W));var ee=o.getDerivedStateFromProps;W=typeof ee=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,W||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||F!==_)&&l_(i,f,u,_),js=!1;var G=i.memoizedState;f.state=G,xl(i,u,f,d),Rl(),F=i.memoizedState,T||G!==F||js?(typeof ee=="function"&&(Ef(i,o,ee,u),F=i.memoizedState),(D=js||o_(i,o,D,u,G,F,_))?(W||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=F),f.props=u,f.state=F,f.context=_,u=D):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{f=i.stateNode,Wd(n,i),_=i.memoizedProps,W=$i(o,_),f.props=W,ee=i.pendingProps,G=f.context,F=o.contextType,D=Na,typeof F=="object"&&F!==null&&(D=Jt(F)),T=o.getDerivedStateFromProps,(F=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_!==ee||G!==D)&&l_(i,f,u,D),js=!1,G=i.memoizedState,f.state=G,xl(i,u,f,d),Rl();var X=i.memoizedState;_!==ee||G!==X||js||n!==null&&n.dependencies!==null&&fc(n.dependencies)?(typeof T=="function"&&(Ef(i,o,T,u),X=i.memoizedState),(W=js||o_(i,o,W,u,G,X,D)||n!==null&&n.dependencies!==null&&fc(n.dependencies))?(F||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(u,X,D),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(u,X,D)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||_===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=X),f.props=u,f.state=X,f.context=D,u=W):(typeof f.componentDidUpdate!="function"||_===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),u=!1)}return f=u,Dc(n,i),u=(i.flags&128)!==0,f||u?(f=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,n!==null&&u?(i.child=qi(i,n.child,null,d),i.child=qi(i,null,o,d)):Wt(n,i,o,d),i.memoizedState=f.state,n=i.child):n=ts(n,i,d),n}function T_(n,i,o,u){return Pi(),i.flags|=256,Wt(n,i,o,u),i.child}var xf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cf(n){return{baseLanes:n,cachePool:dy()}}function If(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=Nn),n}function S_(n,i,o){var u=i.pendingProps,d=!1,f=(i.flags&128)!==0,_;if((_=f)||(_=n!==null&&n.memoizedState===null?!1:(Et.current&2)!==0),_&&(d=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,n===null){if(He){if(d?Ps(i):Vs(),(n=ct)?(n=Dv(n,Fn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Is!==null?{id:Nr,overflow:Dr}:null,retryLane:536870912,hydrationErrors:null},o=ry(n),o.return=i,i.child=o,Xt=i,ct=null)):n=null,n===null)throw Ns(i);return hm(n)?i.lanes=32:i.lanes=536870912,null}var T=u.children;return u=u.fallback,d?(Vs(),d=i.mode,T=jc({mode:"hidden",children:T},d),u=Mi(u,d,o,null),T.return=i,u.return=i,T.sibling=u,i.child=T,u=i.child,u.memoizedState=Cf(o),u.childLanes=If(n,_,o),i.memoizedState=xf,Dl(null,u)):(Ps(i),Of(i,T))}var D=n.memoizedState;if(D!==null&&(T=D.dehydrated,T!==null)){if(f)i.flags&256?(Ps(i),i.flags&=-257,i=Nf(n,i,o)):i.memoizedState!==null?(Vs(),i.child=n.child,i.flags|=128,i=null):(Vs(),T=u.fallback,d=i.mode,u=jc({mode:"visible",children:u.children},d),T=Mi(T,d,o,null),T.flags|=2,u.return=i,T.return=i,u.sibling=T,i.child=u,qi(i,n.child,null,o),u=i.child,u.memoizedState=Cf(o),u.childLanes=If(n,_,o),i.memoizedState=xf,i=Dl(null,u));else if(Ps(i),hm(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var F=_.dgst;_=F,u=Error(r(419)),u.stack="",u.digest=_,bl({value:u,source:null,stack:null}),i=Nf(n,i,o)}else if(jt||Ma(n,i,o,!1),_=(o&n.childLanes)!==0,jt||_){if(_=at,_!==null&&(u=Zo(_,o),u!==0&&u!==D.retryLane))throw D.retryLane=u,ki(n,u),En(_,n,u),Af;cm(T)||qc(),i=Nf(n,i,o)}else cm(T)?(i.flags|=192,i.child=n.child,i=null):(n=D.treeContext,ct=Kn(T.nextSibling),Xt=i,He=!0,Os=null,Fn=!1,n!==null&&ay(i,n),i=Of(i,u.children),i.flags|=4096);return i}return d?(Vs(),T=u.fallback,d=i.mode,D=n.child,F=D.sibling,u=Yr(D,{mode:"hidden",children:u.children}),u.subtreeFlags=D.subtreeFlags&65011712,F!==null?T=Yr(F,T):(T=Mi(T,d,o,null),T.flags|=2),T.return=i,u.return=i,u.sibling=T,i.child=u,Dl(null,u),u=i.child,T=n.child.memoizedState,T===null?T=Cf(o):(d=T.cachePool,d!==null?(D=Nt._currentValue,d=d.parent!==D?{parent:D,pool:D}:d):d=dy(),T={baseLanes:T.baseLanes|o,cachePool:d}),u.memoizedState=T,u.childLanes=If(n,_,o),i.memoizedState=xf,Dl(n.child,u)):(Ps(i),o=n.child,n=o.sibling,o=Yr(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,n!==null&&(_=i.deletions,_===null?(i.deletions=[n],i.flags|=16):_.push(n)),i.child=o,i.memoizedState=null,o)}function Of(n,i){return i=jc({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function jc(n,i){return n=xn(22,n,null,i),n.lanes=0,n}function Nf(n,i,o){return qi(i,n.child,null,o),n=Of(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function A_(n,i,o){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),Fd(n.return,i,o)}function Df(n,i,o,u,d,f){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:d,treeForkCount:f}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=d,_.treeForkCount=f)}function R_(n,i,o){var u=i.pendingProps,d=u.revealOrder,f=u.tail;u=u.children;var _=Et.current,T=(_&2)!==0;if(T?(_=_&1|2,i.flags|=128):_&=1,ne(Et,_),Wt(n,i,u,o),u=He?vl:0,!T&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&A_(n,o,i);else if(n.tag===19)A_(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(d){case"forwards":for(o=i.child,d=null;o!==null;)n=o.alternate,n!==null&&wc(n)===null&&(d=o),o=o.sibling;o=d,o===null?(d=i.child,i.child=null):(d=o.sibling,o.sibling=null),Df(i,!1,d,o,f,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&wc(n)===null){i.child=d;break}n=d.sibling,d.sibling=o,o=d,d=n}Df(i,!0,o,null,f,u);break;case"together":Df(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function ts(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),zs|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(Ma(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,o=Yr(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=Yr(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function jf(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&fc(n)))}function u1(n,i,o){switch(i.tag){case 3:Me(i,i.stateNode.containerInfo),Ds(i,Nt,n.memoizedState.cache),Pi();break;case 27:case 5:Lt(i);break;case 4:Me(i,i.stateNode.containerInfo);break;case 10:Ds(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,rf(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Ps(i),i.flags|=128,null):(o&i.child.childLanes)!==0?S_(n,i,o):(Ps(i),n=ts(n,i,o),n!==null?n.sibling:null);Ps(i);break;case 19:var d=(n.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(Ma(n,i,o,!1),u=(o&i.childLanes)!==0),d){if(u)return R_(n,i,o);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ne(Et,Et.current),u)break;return null;case 22:return i.lanes=0,__(n,i,o,i.pendingProps);case 24:Ds(i,Nt,n.memoizedState.cache)}return ts(n,i,o)}function x_(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)jt=!0;else{if(!jf(n,o)&&(i.flags&128)===0)return jt=!1,u1(n,i,o);jt=(n.flags&131072)!==0}else jt=!1,He&&(i.flags&1048576)!==0&&iy(i,vl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(n=zi(i.elementType),i.type=n,typeof n=="function")Vd(n)?(u=$i(n,u),i.tag=1,i=E_(null,i,n,u,o)):(i.tag=0,i=Rf(null,i,n,u,o));else{if(n!=null){var d=n.$$typeof;if(d===ae){i.tag=11,i=g_(null,i,n,u,o);break e}else if(d===I){i.tag=14,i=p_(null,i,n,u,o);break e}}throw i=Qe(n)||n,Error(r(306,i,""))}}return i;case 0:return Rf(n,i,i.type,i.pendingProps,o);case 1:return u=i.type,d=$i(u,i.pendingProps),E_(n,i,u,d,o);case 3:e:{if(Me(i,i.stateNode.containerInfo),n===null)throw Error(r(387));u=i.pendingProps;var f=i.memoizedState;d=f.element,Wd(n,i),xl(i,u,null,o);var _=i.memoizedState;if(u=_.cache,Ds(i,Nt,u),u!==f.cache&&Gd(i,[Nt],o,!0),Rl(),u=_.element,f.isDehydrated)if(f={element:u,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=T_(n,i,u,o);break e}else if(u!==d){d=qn(Error(r(424)),i),bl(d),i=T_(n,i,u,o);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(ct=Kn(n.firstChild),Xt=i,He=!0,Os=null,Fn=!0,o=_y(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Pi(),u===d){i=ts(n,i,o);break e}Wt(n,i,u,o)}i=i.child}return i;case 26:return Dc(n,i),n===null?(o=Uv(i.type,null,i.pendingProps,null))?i.memoizedState=o:He||(o=i.type,n=i.pendingProps,u=Yc(ge.current).createElement(o),u[Ct]=i,u[$t]=n,Zt(u,o,n),It(u),i.stateNode=u):i.memoizedState=Uv(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Lt(i),n===null&&He&&(u=i.stateNode=Mv(i.type,i.pendingProps,ge.current),Xt=i,Fn=!0,d=ct,Fs(i.type)?(dm=d,ct=Kn(u.firstChild)):ct=d),Wt(n,i,i.pendingProps.children,o),Dc(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&He&&((d=u=ct)&&(u=L1(u,i.type,i.pendingProps,Fn),u!==null?(i.stateNode=u,Xt=i,ct=Kn(u.firstChild),Fn=!1,d=!0):d=!1),d||Ns(i)),Lt(i),d=i.type,f=i.pendingProps,_=n!==null?n.memoizedProps:null,u=f.children,om(d,f)?u=null:_!==null&&om(d,_)&&(i.flags|=32),i.memoizedState!==null&&(d=af(n,i,e1,null,null,o),Kl._currentValue=d),Dc(n,i),Wt(n,i,u,o),i.child;case 6:return n===null&&He&&((n=o=ct)&&(o=z1(o,i.pendingProps,Fn),o!==null?(i.stateNode=o,Xt=i,ct=null,n=!0):n=!1),n||Ns(i)),null;case 13:return S_(n,i,o);case 4:return Me(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=qi(i,null,u,o):Wt(n,i,u,o),i.child;case 11:return g_(n,i,i.type,i.pendingProps,o);case 7:return Wt(n,i,i.pendingProps,o),i.child;case 8:return Wt(n,i,i.pendingProps.children,o),i.child;case 12:return Wt(n,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Ds(i,i.type,u.value),Wt(n,i,u.children,o),i.child;case 9:return d=i.type._context,u=i.pendingProps.children,Ui(i),d=Jt(d),u=u(d),i.flags|=1,Wt(n,i,u,o),i.child;case 14:return p_(n,i,i.type,i.pendingProps,o);case 15:return y_(n,i,i.type,i.pendingProps,o);case 19:return R_(n,i,o);case 31:return l1(n,i,o);case 22:return __(n,i,o,i.pendingProps);case 24:return Ui(i),u=Jt(Nt),n===null?(d=Yd(),d===null&&(d=at,f=Kd(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=o),d=f),i.memoizedState={parent:u,cache:d},Jd(i),Ds(i,Nt,d)):((n.lanes&o)!==0&&(Wd(n,i),xl(i,null,null,o),Rl()),d=n.memoizedState,f=i.memoizedState,d.parent!==u?(d={parent:u,cache:u},i.memoizedState=d,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=d),Ds(i,Nt,u)):(u=f.cache,Ds(i,Nt,u),u!==d.cache&&Gd(i,[Nt],o,!0))),Wt(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function ns(n){n.flags|=4}function kf(n,i,o,u,d){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(d&335544128)===d)if(n.stateNode.complete)n.flags|=8192;else if(ev())n.flags|=8192;else throw Bi=yc,Xd}else n.flags&=-16777217}function C_(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Hv(i))if(ev())n.flags|=8192;else throw Bi=yc,Xd}function kc(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?zu():536870912,n.lanes|=i,Ka|=i)}function jl(n,i){if(!He)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function ht(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(i)for(var d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=u,n.childLanes=o,i}function c1(n,i,o){var u=i.pendingProps;switch(Bd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(i),null;case 1:return ht(i),null;case 3:return o=i.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Wr(Nt),xe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(ka(i)?ns(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Hd())),ht(i),null;case 26:var d=i.type,f=i.memoizedState;return n===null?(ns(i),f!==null?(ht(i),C_(i,f)):(ht(i),kf(i,d,null,u,o))):f?f!==n.memoizedState?(ns(i),ht(i),C_(i,f)):(ht(i),i.flags&=-16777217):(n=n.memoizedProps,n!==u&&ns(i),ht(i),kf(i,d,n,u,o)),null;case 27:if(da(i),o=ge.current,d=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&ns(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return ht(i),null}n=se.current,ka(i)?oy(i):(n=Mv(d,u,o),i.stateNode=n,ns(i))}return ht(i),null;case 5:if(da(i),d=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&ns(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return ht(i),null}if(f=se.current,ka(i))oy(i);else{var _=Yc(ge.current);switch(f){case 1:f=_.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:f=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":f=_.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":f=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":f=_.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?f.multiple=!0:u.size&&(f.size=u.size);break;default:f=typeof u.is=="string"?_.createElement(d,{is:u.is}):_.createElement(d)}}f[Ct]=i,f[$t]=u;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)f.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=f;e:switch(Zt(f,d,u),d){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ns(i)}}return ht(i),kf(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,o),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==u&&ns(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(n=ge.current,ka(i)){if(n=i.stateNode,o=i.memoizedProps,u=null,d=Xt,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}n[Ct]=i,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Sv(n.nodeValue,o)),n||Ns(i,!0)}else n=Yc(n).createTextNode(u),n[Ct]=i,i.stateNode=n}return ht(i),null;case 31:if(o=i.memoizedState,n===null||n.memoizedState!==null){if(u=ka(i),o!==null){if(n===null){if(!u)throw Error(r(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Ct]=i}else Pi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ht(i),n=!1}else o=Hd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return i.flags&256?(In(i),i):(In(i),null);if((i.flags&128)!==0)throw Error(r(558))}return ht(i),null;case 13:if(u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=ka(i),u!==null&&u.dehydrated!==null){if(n===null){if(!d)throw Error(r(318));if(d=i.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[Ct]=i}else Pi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ht(i),d=!1}else d=Hd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return i.flags&256?(In(i),i):(In(i),null)}return In(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=i.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool),f=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(f=u.memoizedState.cachePool.pool),f!==d&&(u.flags|=2048)),o!==n&&o&&(i.child.flags|=8192),kc(i,i.updateQueue),ht(i),null);case 4:return xe(),n===null&&nm(i.stateNode.containerInfo),ht(i),null;case 10:return Wr(i.type),ht(i),null;case 19:if(L(Et),u=i.memoizedState,u===null)return ht(i),null;if(d=(i.flags&128)!==0,f=u.rendering,f===null)if(d)jl(u,!1);else{if(vt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(f=wc(n),f!==null){for(i.flags|=128,jl(u,!1),n=f.updateQueue,i.updateQueue=n,kc(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)ny(o,n),o=o.sibling;return ne(Et,Et.current&1|2),He&&Xr(i,u.treeForkCount),i.child}n=n.sibling}u.tail!==null&&hn()>Lc&&(i.flags|=128,d=!0,jl(u,!1),i.lanes=4194304)}else{if(!d)if(n=wc(f),n!==null){if(i.flags|=128,d=!0,n=n.updateQueue,i.updateQueue=n,kc(i,n),jl(u,!0),u.tail===null&&u.tailMode==="hidden"&&!f.alternate&&!He)return ht(i),null}else 2*hn()-u.renderingStartTime>Lc&&o!==536870912&&(i.flags|=128,d=!0,jl(u,!1),i.lanes=4194304);u.isBackwards?(f.sibling=i.child,i.child=f):(n=u.last,n!==null?n.sibling=f:i.child=f,u.last=f)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=hn(),n.sibling=null,o=Et.current,ne(Et,d?o&1|2:o&1),He&&Xr(i,u.treeForkCount),n):(ht(i),null);case 22:case 23:return In(i),nf(),u=i.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(ht(i),i.subtreeFlags&6&&(i.flags|=8192)):ht(i),o=i.updateQueue,o!==null&&kc(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),n!==null&&L(Li),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Wr(Nt),ht(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function h1(n,i){switch(Bd(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Wr(Nt),xe(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return da(i),null;case 31:if(i.memoizedState!==null){if(In(i),i.alternate===null)throw Error(r(340));Pi()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(In(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Pi()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return L(Et),null;case 4:return xe(),null;case 10:return Wr(i.type),null;case 22:case 23:return In(i),nf(),n!==null&&L(Li),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Wr(Nt),null;case 25:return null;default:return null}}function I_(n,i){switch(Bd(i),i.tag){case 3:Wr(Nt),xe();break;case 26:case 27:case 5:da(i);break;case 4:xe();break;case 31:i.memoizedState!==null&&In(i);break;case 13:In(i);break;case 19:L(Et);break;case 10:Wr(i.type);break;case 22:case 23:In(i),nf(),n!==null&&L(Li);break;case 24:Wr(Nt)}}function kl(n,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var d=u.next;o=d;do{if((o.tag&n)===n){u=void 0;var f=o.create,_=o.inst;u=f(),_.destroy=u}o=o.next}while(o!==d)}}catch(T){tt(i,i.return,T)}}function Us(n,i,o){try{var u=i.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var f=d.next;u=f;do{if((u.tag&n)===n){var _=u.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,d=i;var D=o,F=T;try{F()}catch(W){tt(d,D,W)}}}u=u.next}while(u!==f)}}catch(W){tt(i,i.return,W)}}function O_(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{by(i,o)}catch(u){tt(n,n.return,u)}}}function N_(n,i,o){o.props=$i(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){tt(n,i,u)}}function Ml(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(d){tt(n,i,d)}}function jr(n,i){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(d){tt(n,i,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){tt(n,i,d)}else o.current=null}function D_(n){var i=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(d){tt(n,n.return,d)}}function Mf(n,i,o){try{var u=n.stateNode;j1(u,n.type,o,i),u[$t]=i}catch(d){tt(n,n.return,d)}}function j_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Fs(n.type)||n.tag===4}function Pf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||j_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Fs(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Vf(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=er));else if(u!==4&&(u===27&&Fs(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(Vf(n,i,o),n=n.sibling;n!==null;)Vf(n,i,o),n=n.sibling}function Mc(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(u!==4&&(u===27&&Fs(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Mc(n,i,o),n=n.sibling;n!==null;)Mc(n,i,o),n=n.sibling}function k_(n){var i=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,d=i.attributes;d.length;)i.removeAttributeNode(d[0]);Zt(i,u,o),i[Ct]=n,i[$t]=o}catch(f){tt(n,n.return,f)}}var rs=!1,kt=!1,Uf=!1,M_=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function d1(n,i){if(n=n.containerInfo,im=nh,n=Kp(n),Od(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var d=u.anchorOffset,f=u.focusNode;u=u.focusOffset;try{o.nodeType,f.nodeType}catch{o=null;break e}var _=0,T=-1,D=-1,F=0,W=0,ee=n,G=null;t:for(;;){for(var X;ee!==o||d!==0&&ee.nodeType!==3||(T=_+d),ee!==f||u!==0&&ee.nodeType!==3||(D=_+u),ee.nodeType===3&&(_+=ee.nodeValue.length),(X=ee.firstChild)!==null;)G=ee,ee=X;for(;;){if(ee===n)break t;if(G===o&&++F===d&&(T=_),G===f&&++W===u&&(D=_),(X=ee.nextSibling)!==null)break;ee=G,G=ee.parentNode}ee=X}o=T===-1||D===-1?null:{start:T,end:D}}else o=null}o=o||{start:0,end:0}}else o=null;for(am={focusedElem:n,selectionRange:o},nh=!1,Gt=i;Gt!==null;)if(i=Gt,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Gt=n;else for(;Gt!==null;){switch(i=Gt,f=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)d=n[o],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&f!==null){n=void 0,o=i,d=f.memoizedProps,f=f.memoizedState,u=o.stateNode;try{var fe=$i(o.type,d);n=u.getSnapshotBeforeUpdate(fe,f),u.__reactInternalSnapshotBeforeUpdate=n}catch(Ee){tt(o,o.return,Ee)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)um(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":um(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,Gt=n;break}Gt=i.return}}function P_(n,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:is(n,o),u&4&&kl(5,o);break;case 1:if(is(n,o),u&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(_){tt(o,o.return,_)}else{var d=$i(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(d,i,n.__reactInternalSnapshotBeforeUpdate)}catch(_){tt(o,o.return,_)}}u&64&&O_(o),u&512&&Ml(o,o.return);break;case 3:if(is(n,o),u&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{by(n,i)}catch(_){tt(o,o.return,_)}}break;case 27:i===null&&u&4&&k_(o);case 26:case 5:is(n,o),i===null&&u&4&&D_(o),u&512&&Ml(o,o.return);break;case 12:is(n,o);break;case 31:is(n,o),u&4&&L_(n,o);break;case 13:is(n,o),u&4&&z_(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=w1.bind(null,o),B1(n,o))));break;case 22:if(u=o.memoizedState!==null||rs,!u){i=i!==null&&i.memoizedState!==null||kt,d=rs;var f=kt;rs=u,(kt=i)&&!f?as(n,o,(o.subtreeFlags&8772)!==0):is(n,o),rs=d,kt=f}break;case 30:break;default:is(n,o)}}function V_(n){var i=n.alternate;i!==null&&(n.alternate=null,V_(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&ya(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ft=null,_n=!1;function ss(n,i,o){for(o=o.child;o!==null;)U_(n,i,o),o=o.sibling}function U_(n,i,o){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(Xn,o)}catch{}switch(o.tag){case 26:kt||jr(o,i),ss(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:kt||jr(o,i);var u=ft,d=_n;Fs(o.type)&&(ft=o.stateNode,_n=!1),ss(n,i,o),$l(o.stateNode),ft=u,_n=d;break;case 5:kt||jr(o,i);case 6:if(u=ft,d=_n,ft=null,ss(n,i,o),ft=u,_n=d,ft!==null)if(_n)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(o.stateNode)}catch(f){tt(o,i,f)}else try{ft.removeChild(o.stateNode)}catch(f){tt(o,i,f)}break;case 18:ft!==null&&(_n?(n=ft,Ov(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),to(n)):Ov(ft,o.stateNode));break;case 4:u=ft,d=_n,ft=o.stateNode.containerInfo,_n=!0,ss(n,i,o),ft=u,_n=d;break;case 0:case 11:case 14:case 15:Us(2,o,i),kt||Us(4,o,i),ss(n,i,o);break;case 1:kt||(jr(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&N_(o,i,u)),ss(n,i,o);break;case 21:ss(n,i,o);break;case 22:kt=(u=kt)||o.memoizedState!==null,ss(n,i,o),kt=u;break;default:ss(n,i,o)}}function L_(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{to(n)}catch(o){tt(i,i.return,o)}}}function z_(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{to(n)}catch(o){tt(i,i.return,o)}}function f1(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new M_),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new M_),i;default:throw Error(r(435,n.tag))}}function Pc(n,i){var o=f1(n);i.forEach(function(u){if(!o.has(u)){o.add(u);var d=E1.bind(null,n,u);u.then(d,d)}})}function vn(n,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var d=o[u],f=n,_=i,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(Fs(T.type)){ft=T.stateNode,_n=!1;break e}break;case 5:ft=T.stateNode,_n=!1;break e;case 3:case 4:ft=T.stateNode.containerInfo,_n=!0;break e}T=T.return}if(ft===null)throw Error(r(160));U_(f,_,d),ft=null,_n=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)B_(i,n),i=i.sibling}var ar=null;function B_(n,i){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:vn(i,n),bn(n),u&4&&(Us(3,n,n.return),kl(3,n),Us(5,n,n.return));break;case 1:vn(i,n),bn(n),u&512&&(kt||o===null||jr(o,o.return)),u&64&&rs&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var d=ar;if(vn(i,n),bn(n),u&512&&(kt||o===null||jr(o,o.return)),u&4){var f=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,d=d.ownerDocument||d;t:switch(u){case"title":f=d.getElementsByTagName("title")[0],(!f||f[vr]||f[Ct]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(u),d.head.insertBefore(f,d.querySelector("head > title"))),Zt(f,u,o),f[Ct]=n,It(f),u=f;break e;case"link":var _=Bv("link","href",d).get(u+(o.href||""));if(_){for(var T=0;T<_.length;T++)if(f=_[T],f.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&f.getAttribute("rel")===(o.rel==null?null:o.rel)&&f.getAttribute("title")===(o.title==null?null:o.title)&&f.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(T,1);break t}}f=d.createElement(u),Zt(f,u,o),d.head.appendChild(f);break;case"meta":if(_=Bv("meta","content",d).get(u+(o.content||""))){for(T=0;T<_.length;T++)if(f=_[T],f.getAttribute("content")===(o.content==null?null:""+o.content)&&f.getAttribute("name")===(o.name==null?null:o.name)&&f.getAttribute("property")===(o.property==null?null:o.property)&&f.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&f.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(T,1);break t}}f=d.createElement(u),Zt(f,u,o),d.head.appendChild(f);break;default:throw Error(r(468,u))}f[Ct]=n,It(f),u=f}n.stateNode=u}else qv(d,n.type,n.stateNode);else n.stateNode=zv(d,u,n.memoizedProps);else f!==u?(f===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):f.count--,u===null?qv(d,n.type,n.stateNode):zv(d,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Mf(n,n.memoizedProps,o.memoizedProps)}break;case 27:vn(i,n),bn(n),u&512&&(kt||o===null||jr(o,o.return)),o!==null&&u&4&&Mf(n,n.memoizedProps,o.memoizedProps);break;case 5:if(vn(i,n),bn(n),u&512&&(kt||o===null||jr(o,o.return)),n.flags&32){d=n.stateNode;try{yn(d,"")}catch(fe){tt(n,n.return,fe)}}u&4&&n.stateNode!=null&&(d=n.memoizedProps,Mf(n,d,o!==null?o.memoizedProps:d)),u&1024&&(Uf=!0);break;case 6:if(vn(i,n),bn(n),u&4){if(n.stateNode===null)throw Error(r(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(fe){tt(n,n.return,fe)}}break;case 3:if(Wc=null,d=ar,ar=Xc(i.containerInfo),vn(i,n),ar=d,bn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{to(i.containerInfo)}catch(fe){tt(n,n.return,fe)}Uf&&(Uf=!1,q_(n));break;case 4:u=ar,ar=Xc(n.stateNode.containerInfo),vn(i,n),bn(n),ar=u;break;case 12:vn(i,n),bn(n);break;case 31:vn(i,n),bn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Pc(n,u)));break;case 13:vn(i,n),bn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Uc=hn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Pc(n,u)));break;case 22:d=n.memoizedState!==null;var D=o!==null&&o.memoizedState!==null,F=rs,W=kt;if(rs=F||d,kt=W||D,vn(i,n),kt=W,rs=F,bn(n),u&8192)e:for(i=n.stateNode,i._visibility=d?i._visibility&-2:i._visibility|1,d&&(o===null||D||rs||kt||Fi(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){D=o=i;try{if(f=D.stateNode,d)_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=D.stateNode;var ee=D.memoizedProps.style,G=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;T.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(fe){tt(D,D.return,fe)}}}else if(i.tag===6){if(o===null){D=i;try{D.stateNode.nodeValue=d?"":D.memoizedProps}catch(fe){tt(D,D.return,fe)}}}else if(i.tag===18){if(o===null){D=i;try{var X=D.stateNode;d?Nv(X,!0):Nv(D.stateNode,!1)}catch(fe){tt(D,D.return,fe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Pc(n,o))));break;case 19:vn(i,n),bn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Pc(n,u)));break;case 30:break;case 21:break;default:vn(i,n),bn(n)}}function bn(n){var i=n.flags;if(i&2){try{for(var o,u=n.return;u!==null;){if(j_(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var d=o.stateNode,f=Pf(n);Mc(n,f,d);break;case 5:var _=o.stateNode;o.flags&32&&(yn(_,""),o.flags&=-33);var T=Pf(n);Mc(n,T,_);break;case 3:case 4:var D=o.stateNode.containerInfo,F=Pf(n);Vf(n,F,D);break;default:throw Error(r(161))}}catch(W){tt(n,n.return,W)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function q_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;q_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function is(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)P_(n,i.alternate,i),i=i.sibling}function Fi(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Us(4,i,i.return),Fi(i);break;case 1:jr(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&N_(i,i.return,o),Fi(i);break;case 27:$l(i.stateNode);case 26:case 5:jr(i,i.return),Fi(i);break;case 22:i.memoizedState===null&&Fi(i);break;case 30:Fi(i);break;default:Fi(i)}n=n.sibling}}function as(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,d=n,f=i,_=f.flags;switch(f.tag){case 0:case 11:case 15:as(d,f,o),kl(4,f);break;case 1:if(as(d,f,o),u=f,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(F){tt(u,u.return,F)}if(u=f,d=u.updateQueue,d!==null){var T=u.stateNode;try{var D=d.shared.hiddenCallbacks;if(D!==null)for(d.shared.hiddenCallbacks=null,d=0;d<D.length;d++)vy(D[d],T)}catch(F){tt(u,u.return,F)}}o&&_&64&&O_(f),Ml(f,f.return);break;case 27:k_(f);case 26:case 5:as(d,f,o),o&&u===null&&_&4&&D_(f),Ml(f,f.return);break;case 12:as(d,f,o);break;case 31:as(d,f,o),o&&_&4&&L_(d,f);break;case 13:as(d,f,o),o&&_&4&&z_(d,f);break;case 22:f.memoizedState===null&&as(d,f,o),Ml(f,f.return);break;case 30:break;default:as(d,f,o)}i=i.sibling}}function Lf(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&wl(o))}function zf(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&wl(n))}function or(n,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)H_(n,i,o,u),i=i.sibling}function H_(n,i,o,u){var d=i.flags;switch(i.tag){case 0:case 11:case 15:or(n,i,o,u),d&2048&&kl(9,i);break;case 1:or(n,i,o,u);break;case 3:or(n,i,o,u),d&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&wl(n)));break;case 12:if(d&2048){or(n,i,o,u),n=i.stateNode;try{var f=i.memoizedProps,_=f.id,T=f.onPostCommit;typeof T=="function"&&T(_,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){tt(i,i.return,D)}}else or(n,i,o,u);break;case 31:or(n,i,o,u);break;case 13:or(n,i,o,u);break;case 23:break;case 22:f=i.stateNode,_=i.alternate,i.memoizedState!==null?f._visibility&2?or(n,i,o,u):Pl(n,i):f._visibility&2?or(n,i,o,u):(f._visibility|=2,$a(n,i,o,u,(i.subtreeFlags&10256)!==0||!1)),d&2048&&Lf(_,i);break;case 24:or(n,i,o,u),d&2048&&zf(i.alternate,i);break;default:or(n,i,o,u)}}function $a(n,i,o,u,d){for(d=d&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var f=n,_=i,T=o,D=u,F=_.flags;switch(_.tag){case 0:case 11:case 15:$a(f,_,T,D,d),kl(8,_);break;case 23:break;case 22:var W=_.stateNode;_.memoizedState!==null?W._visibility&2?$a(f,_,T,D,d):Pl(f,_):(W._visibility|=2,$a(f,_,T,D,d)),d&&F&2048&&Lf(_.alternate,_);break;case 24:$a(f,_,T,D,d),d&&F&2048&&zf(_.alternate,_);break;default:$a(f,_,T,D,d)}i=i.sibling}}function Pl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,u=i,d=u.flags;switch(u.tag){case 22:Pl(o,u),d&2048&&Lf(u.alternate,u);break;case 24:Pl(o,u),d&2048&&zf(u.alternate,u);break;default:Pl(o,u)}i=i.sibling}}var Vl=8192;function Fa(n,i,o){if(n.subtreeFlags&Vl)for(n=n.child;n!==null;)$_(n,i,o),n=n.sibling}function $_(n,i,o){switch(n.tag){case 26:Fa(n,i,o),n.flags&Vl&&n.memoizedState!==null&&Z1(o,ar,n.memoizedState,n.memoizedProps);break;case 5:Fa(n,i,o);break;case 3:case 4:var u=ar;ar=Xc(n.stateNode.containerInfo),Fa(n,i,o),ar=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Vl,Vl=16777216,Fa(n,i,o),Vl=u):Fa(n,i,o));break;default:Fa(n,i,o)}}function F_(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Ul(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Gt=u,K_(u,n)}F_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)G_(n),n=n.sibling}function G_(n){switch(n.tag){case 0:case 11:case 15:Ul(n),n.flags&2048&&Us(9,n,n.return);break;case 3:Ul(n);break;case 12:Ul(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Vc(n)):Ul(n);break;default:Ul(n)}}function Vc(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Gt=u,K_(u,n)}F_(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Us(8,i,i.return),Vc(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Vc(i));break;default:Vc(i)}n=n.sibling}}function K_(n,i){for(;Gt!==null;){var o=Gt;switch(o.tag){case 0:case 11:case 15:Us(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:wl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Gt=u;else e:for(o=n;Gt!==null;){u=Gt;var d=u.sibling,f=u.return;if(V_(u),u===o){Gt=null;break e}if(d!==null){d.return=f,Gt=d;break e}Gt=f}}}var m1={getCacheForType:function(n){var i=Jt(Nt),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o},cacheSignal:function(){return Jt(Nt).controller.signal}},g1=typeof WeakMap=="function"?WeakMap:Map,We=0,at=null,Ue=null,ze=0,et=0,On=null,Ls=!1,Ga=!1,Bf=!1,os=0,vt=0,zs=0,Gi=0,qf=0,Nn=0,Ka=0,Ll=null,wn=null,Hf=!1,Uc=0,Q_=0,Lc=1/0,zc=null,Bs=null,Bt=0,qs=null,Qa=null,ls=0,$f=0,Ff=null,Y_=null,zl=0,Gf=null;function Dn(){return(We&2)!==0&&ze!==0?ze&-ze:K.T!==null?Wf():Bu()}function X_(){if(Nn===0)if((ze&536870912)===0||He){var n=vi;vi<<=1,(vi&3932160)===0&&(vi=262144),Nn=n}else Nn=536870912;return n=Cn.current,n!==null&&(n.flags|=32),Nn}function En(n,i,o){(n===at&&(et===2||et===9)||n.cancelPendingCommit!==null)&&(Ya(n,0),Hs(n,ze,Nn,!1)),bi(n,o),((We&2)===0||n!==at)&&(n===at&&((We&2)===0&&(Gi|=o),vt===4&&Hs(n,ze,Nn,!1)),kr(n))}function J_(n,i,o){if((We&6)!==0)throw Error(r(327));var u=!o&&(i&127)===0&&(i&n.expiredLanes)===0||Jn(n,i),d=u?_1(n,i):Qf(n,i,!0),f=u;do{if(d===0){Ga&&!u&&Hs(n,i,0,!1);break}else{if(o=n.current.alternate,f&&!p1(o)){d=Qf(n,i,!1),f=!1;continue}if(d===2){if(f=i,n.errorRecoveryDisabledLanes&f)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var T=n;d=Ll;var D=T.current.memoizedState.isDehydrated;if(D&&(Ya(T,_).flags|=256),_=Qf(T,_,!1),_!==2){if(Bf&&!D){T.errorRecoveryDisabledLanes|=f,Gi|=f,d=4;break e}f=wn,wn=d,f!==null&&(wn===null?wn=f:wn.push.apply(wn,f))}d=_}if(f=!1,d!==2)continue}}if(d===1){Ya(n,0),Hs(n,i,0,!0);break}e:{switch(u=n,f=d,f){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Hs(u,i,Nn,!Ls);break e;case 2:wn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(d=Uc+300-hn(),10<d)){if(Hs(u,i,Nn,!Ls),pr(u,0,!0)!==0)break e;ls=i,u.timeoutHandle=Cv(W_.bind(null,u,o,wn,zc,Hf,i,Nn,Gi,Ka,Ls,f,"Throttled",-0,0),d);break e}W_(u,o,wn,zc,Hf,i,Nn,Gi,Ka,Ls,f,null,-0,0)}}break}while(!0);kr(n)}function W_(n,i,o,u,d,f,_,T,D,F,W,ee,G,X){if(n.timeoutHandle=-1,ee=i.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:er},$_(i,f,ee);var fe=(f&62914560)===f?Uc-hn():(f&4194048)===f?Q_-hn():0;if(fe=eA(ee,fe),fe!==null){ls=f,n.cancelPendingCommit=fe(av.bind(null,n,i,f,o,u,d,_,T,D,W,ee,null,G,X)),Hs(n,f,_,!F);return}}av(n,i,f,o,u,d,_,T,D)}function p1(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var d=o[u],f=d.getSnapshot;d=d.value;try{if(!Rn(f(),d))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Hs(n,i,o,u){i&=~qf,i&=~Gi,n.suspendedLanes|=i,n.pingedLanes&=~i,u&&(n.warmLanes|=i),u=n.expirationTimes;for(var d=i;0<d;){var f=31-bt(d),_=1<<f;u[f]=-1,d&=~_}o!==0&&wi(n,o,i)}function Bc(){return(We&6)===0?(Bl(0),!1):!0}function Kf(){if(Ue!==null){if(et===0)var n=Ue.return;else n=Ue,Jr=Vi=null,uf(n),La=null,Tl=0,n=Ue;for(;n!==null;)I_(n.alternate,n),n=n.return;Ue=null}}function Ya(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,P1(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),ls=0,Kf(),at=n,Ue=o=Yr(n.current,null),ze=i,et=0,On=null,Ls=!1,Ga=Jn(n,i),Bf=!1,Ka=Nn=qf=Gi=zs=vt=0,wn=Ll=null,Hf=!1,(i&8)!==0&&(i|=i&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=i;0<u;){var d=31-bt(u),f=1<<d;i|=n[d],u&=~f}return os=i,lc(),o}function Z_(n,i){De=null,K.H=Nl,i===Ua||i===pc?(i=gy(),et=3):i===Xd?(i=gy(),et=4):et=i===Af?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,On=i,Ue===null&&(vt=1,Oc(n,qn(i,n.current)))}function ev(){var n=Cn.current;return n===null?!0:(ze&4194048)===ze?Gn===null:(ze&62914560)===ze||(ze&536870912)!==0?n===Gn:!1}function tv(){var n=K.H;return K.H=Nl,n===null?Nl:n}function nv(){var n=K.A;return K.A=m1,n}function qc(){vt=4,Ls||(ze&4194048)!==ze&&Cn.current!==null||(Ga=!0),(zs&134217727)===0&&(Gi&134217727)===0||at===null||Hs(at,ze,Nn,!1)}function Qf(n,i,o){var u=We;We|=2;var d=tv(),f=nv();(at!==n||ze!==i)&&(zc=null,Ya(n,i)),i=!1;var _=vt;e:do try{if(et!==0&&Ue!==null){var T=Ue,D=On;switch(et){case 8:Kf(),_=6;break e;case 3:case 2:case 9:case 6:Cn.current===null&&(i=!0);var F=et;if(et=0,On=null,Xa(n,T,D,F),o&&Ga){_=0;break e}break;default:F=et,et=0,On=null,Xa(n,T,D,F)}}y1(),_=vt;break}catch(W){Z_(n,W)}while(!0);return i&&n.shellSuspendCounter++,Jr=Vi=null,We=u,K.H=d,K.A=f,Ue===null&&(at=null,ze=0,lc()),_}function y1(){for(;Ue!==null;)rv(Ue)}function _1(n,i){var o=We;We|=2;var u=tv(),d=nv();at!==n||ze!==i?(zc=null,Lc=hn()+500,Ya(n,i)):Ga=Jn(n,i);e:do try{if(et!==0&&Ue!==null){i=Ue;var f=On;t:switch(et){case 1:et=0,On=null,Xa(n,i,f,1);break;case 2:case 9:if(fy(f)){et=0,On=null,sv(i);break}i=function(){et!==2&&et!==9||at!==n||(et=7),kr(n)},f.then(i,i);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:fy(f)?(et=0,On=null,sv(i)):(et=0,On=null,Xa(n,i,f,7));break;case 5:var _=null;switch(Ue.tag){case 26:_=Ue.memoizedState;case 5:case 27:var T=Ue;if(_?Hv(_):T.stateNode.complete){et=0,On=null;var D=T.sibling;if(D!==null)Ue=D;else{var F=T.return;F!==null?(Ue=F,Hc(F)):Ue=null}break t}}et=0,On=null,Xa(n,i,f,5);break;case 6:et=0,On=null,Xa(n,i,f,6);break;case 8:Kf(),vt=6;break e;default:throw Error(r(462))}}v1();break}catch(W){Z_(n,W)}while(!0);return Jr=Vi=null,K.H=u,K.A=d,We=o,Ue!==null?0:(at=null,ze=0,lc(),vt)}function v1(){for(;Ue!==null&&!Td();)rv(Ue)}function rv(n){var i=x_(n.alternate,n,os);n.memoizedProps=n.pendingProps,i===null?Hc(n):Ue=i}function sv(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=w_(o,i,i.pendingProps,i.type,void 0,ze);break;case 11:i=w_(o,i,i.pendingProps,i.type.render,i.ref,ze);break;case 5:uf(i);default:I_(o,i),i=Ue=ny(i,os),i=x_(o,i,os)}n.memoizedProps=n.pendingProps,i===null?Hc(n):Ue=i}function Xa(n,i,o,u){Jr=Vi=null,uf(i),La=null,Tl=0;var d=i.return;try{if(o1(n,d,i,o,ze)){vt=1,Oc(n,qn(o,n.current)),Ue=null;return}}catch(f){if(d!==null)throw Ue=d,f;vt=1,Oc(n,qn(o,n.current)),Ue=null;return}i.flags&32768?(He||u===1?n=!0:Ga||(ze&536870912)!==0?n=!1:(Ls=n=!0,(u===2||u===9||u===3||u===6)&&(u=Cn.current,u!==null&&u.tag===13&&(u.flags|=16384))),iv(i,n)):Hc(i)}function Hc(n){var i=n;do{if((i.flags&32768)!==0){iv(i,Ls);return}n=i.return;var o=c1(i.alternate,i,os);if(o!==null){Ue=o;return}if(i=i.sibling,i!==null){Ue=i;return}Ue=i=n}while(i!==null);vt===0&&(vt=5)}function iv(n,i){do{var o=h1(n.alternate,n);if(o!==null){o.flags&=32767,Ue=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){Ue=n;return}Ue=n=o}while(n!==null);vt=6,Ue=null}function av(n,i,o,u,d,f,_,T,D){n.cancelPendingCommit=null;do $c();while(Bt!==0);if((We&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(f=i.lanes|i.childLanes,f|=Md,Rd(n,o,f,_,T,D),n===at&&(Ue=at=null,ze=0),Qa=i,qs=n,ls=o,$f=f,Ff=d,Y_=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,T1(vs,function(){return hv(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=K.T,K.T=null,d=re.p,re.p=2,_=We,We|=4;try{d1(n,i,o)}finally{We=_,re.p=d,K.T=u}}Bt=1,ov(),lv(),uv()}}function ov(){if(Bt===1){Bt=0;var n=qs,i=Qa,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=K.T,K.T=null;var u=re.p;re.p=2;var d=We;We|=4;try{B_(i,n);var f=am,_=Kp(n.containerInfo),T=f.focusedElem,D=f.selectionRange;if(_!==T&&T&&T.ownerDocument&&Gp(T.ownerDocument.documentElement,T)){if(D!==null&&Od(T)){var F=D.start,W=D.end;if(W===void 0&&(W=F),"selectionStart"in T)T.selectionStart=F,T.selectionEnd=Math.min(W,T.value.length);else{var ee=T.ownerDocument||document,G=ee&&ee.defaultView||window;if(G.getSelection){var X=G.getSelection(),fe=T.textContent.length,Ee=Math.min(D.start,fe),it=D.end===void 0?Ee:Math.min(D.end,fe);!X.extend&&Ee>it&&(_=it,it=Ee,Ee=_);var z=Fp(T,Ee),P=Fp(T,it);if(z&&P&&(X.rangeCount!==1||X.anchorNode!==z.node||X.anchorOffset!==z.offset||X.focusNode!==P.node||X.focusOffset!==P.offset)){var $=ee.createRange();$.setStart(z.node,z.offset),X.removeAllRanges(),Ee>it?(X.addRange($),X.extend(P.node,P.offset)):($.setEnd(P.node,P.offset),X.addRange($))}}}}for(ee=[],X=T;X=X.parentNode;)X.nodeType===1&&ee.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ee.length;T++){var Z=ee[T];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}nh=!!im,am=im=null}finally{We=d,re.p=u,K.T=o}}n.current=i,Bt=2}}function lv(){if(Bt===2){Bt=0;var n=qs,i=Qa,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=K.T,K.T=null;var u=re.p;re.p=2;var d=We;We|=4;try{P_(n,i.alternate,i)}finally{We=d,re.p=u,K.T=o}}Bt=3}}function uv(){if(Bt===4||Bt===3){Bt=0,ku();var n=qs,i=Qa,o=ls,u=Y_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Bt=5:(Bt=0,Qa=qs=null,cv(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(Bs=null),Fr(o),i=i.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(Xn,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=K.T,d=re.p,re.p=2,K.T=null;try{for(var f=n.onRecoverableError,_=0;_<u.length;_++){var T=u[_];f(T.value,{componentStack:T.stack})}}finally{K.T=i,re.p=d}}(ls&3)!==0&&$c(),kr(n),d=n.pendingLanes,(o&261930)!==0&&(d&42)!==0?n===Gf?zl++:(zl=0,Gf=n):zl=0,Bl(0)}}function cv(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,wl(i)))}function $c(){return ov(),lv(),uv(),hv()}function hv(){if(Bt!==5)return!1;var n=qs,i=$f;$f=0;var o=Fr(ls),u=K.T,d=re.p;try{re.p=32>o?32:o,K.T=null,o=Ff,Ff=null;var f=qs,_=ls;if(Bt=0,Qa=qs=null,ls=0,(We&6)!==0)throw Error(r(331));var T=We;if(We|=4,G_(f.current),H_(f,f.current,_,o),We=T,Bl(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(Xn,f)}catch{}return!0}finally{re.p=d,K.T=u,cv(n,i)}}function dv(n,i,o){i=qn(o,i),i=Sf(n.stateNode,i,2),n=Ms(n,i,2),n!==null&&(bi(n,2),kr(n))}function tt(n,i,o){if(n.tag===3)dv(n,n,o);else for(;i!==null;){if(i.tag===3){dv(i,n,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Bs===null||!Bs.has(u))){n=qn(o,n),o=f_(2),u=Ms(i,o,2),u!==null&&(m_(o,u,i,n),bi(u,2),kr(u));break}}i=i.return}}function Yf(n,i,o){var u=n.pingCache;if(u===null){u=n.pingCache=new g1;var d=new Set;u.set(i,d)}else d=u.get(i),d===void 0&&(d=new Set,u.set(i,d));d.has(o)||(Bf=!0,d.add(o),n=b1.bind(null,n,i,o),i.then(n,n))}function b1(n,i,o){var u=n.pingCache;u!==null&&u.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,at===n&&(ze&o)===o&&(vt===4||vt===3&&(ze&62914560)===ze&&300>hn()-Uc?(We&2)===0&&Ya(n,0):qf|=o,Ka===ze&&(Ka=0)),kr(n)}function fv(n,i){i===0&&(i=zu()),n=ki(n,i),n!==null&&(bi(n,i),kr(n))}function w1(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),fv(n,o)}function E1(n,i){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,d=n.memoizedState;d!==null&&(o=d.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(i),fv(n,o)}function T1(n,i){return zt(n,i)}var Fc=null,Ja=null,Xf=!1,Gc=!1,Jf=!1,$s=0;function kr(n){n!==Ja&&n.next===null&&(Ja===null?Fc=Ja=n:Ja=Ja.next=n),Gc=!0,Xf||(Xf=!0,A1())}function Bl(n,i){if(!Jf&&Gc){Jf=!0;do for(var o=!1,u=Fc;u!==null;){if(n!==0){var d=u.pendingLanes;if(d===0)var f=0;else{var _=u.suspendedLanes,T=u.pingedLanes;f=(1<<31-bt(42|n)+1)-1,f&=d&~(_&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(o=!0,yv(u,f))}else f=ze,f=pr(u,u===at?f:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(f&3)===0||Jn(u,f)||(o=!0,yv(u,f));u=u.next}while(o);Jf=!1}}function S1(){mv()}function mv(){Gc=Xf=!1;var n=0;$s!==0&&M1()&&(n=$s);for(var i=hn(),o=null,u=Fc;u!==null;){var d=u.next,f=gv(u,i);f===0?(u.next=null,o===null?Fc=d:o.next=d,d===null&&(Ja=o)):(o=u,(n!==0||(f&3)!==0)&&(Gc=!0)),u=d}Bt!==0&&Bt!==5||Bl(n),$s!==0&&($s=0)}function gv(n,i){for(var o=n.suspendedLanes,u=n.pingedLanes,d=n.expirationTimes,f=n.pendingLanes&-62914561;0<f;){var _=31-bt(f),T=1<<_,D=d[_];D===-1?((T&o)===0||(T&u)!==0)&&(d[_]=Ad(T,i)):D<=i&&(n.expiredLanes|=T),f&=~T}if(i=at,o=ze,o=pr(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===i&&(et===2||et===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&_s(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Jn(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(u!==null&&_s(u),Fr(o)){case 2:case 8:o=Jo;break;case 32:o=vs;break;case 268435456:o=Mu;break;default:o=vs}return u=pv.bind(null,n),o=zt(o,u),n.callbackPriority=i,n.callbackNode=o,i}return u!==null&&u!==null&&_s(u),n.callbackPriority=2,n.callbackNode=null,2}function pv(n,i){if(Bt!==0&&Bt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if($c()&&n.callbackNode!==o)return null;var u=ze;return u=pr(n,n===at?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(J_(n,u,i),gv(n,hn()),n.callbackNode!=null&&n.callbackNode===o?pv.bind(null,n):null)}function yv(n,i){if($c())return null;J_(n,i,!0)}function A1(){V1(function(){(We&6)!==0?zt(Xo,S1):mv()})}function Wf(){if($s===0){var n=Pa;n===0&&(n=mr,mr<<=1,(mr&261888)===0&&(mr=256)),$s=n}return $s}function _v(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:wa(""+n)}function vv(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function R1(n,i,o,u,d){if(i==="submit"&&o&&o.stateNode===d){var f=_v((d[$t]||null).action),_=u.submitter;_&&(i=(i=_[$t]||null)?_v(i.formAction):_.getAttribute("formAction"),i!==null&&(f=i,_=null));var T=new xr("action","action",null,u,d);n.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if($s!==0){var D=_?vv(d,_):new FormData(d);_f(o,{pending:!0,data:D,method:d.method,action:f},null,D)}}else typeof f=="function"&&(T.preventDefault(),D=_?vv(d,_):new FormData(d),_f(o,{pending:!0,data:D,method:d.method,action:f},f,D))},currentTarget:d}]})}}for(var Zf=0;Zf<kd.length;Zf++){var em=kd[Zf],x1=em.toLowerCase(),C1=em[0].toUpperCase()+em.slice(1);ir(x1,"on"+C1)}ir(Xp,"onAnimationEnd"),ir(Jp,"onAnimationIteration"),ir(Wp,"onAnimationStart"),ir("dblclick","onDoubleClick"),ir("focusin","onFocus"),ir("focusout","onBlur"),ir($S,"onTransitionRun"),ir(FS,"onTransitionStart"),ir(GS,"onTransitionCancel"),ir(Zp,"onTransitionEnd"),Tr("onMouseEnter",["mouseout","mouseover"]),Tr("onMouseLeave",["mouseout","mouseover"]),Tr("onPointerEnter",["pointerout","pointerover"]),Tr("onPointerLeave",["pointerout","pointerover"]),Er("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Er("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Er("onBeforeInput",["compositionend","keypress","textInput","paste"]),Er("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Er("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Er("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ql));function bv(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],d=u.event;u=u.listeners;e:{var f=void 0;if(i)for(var _=u.length-1;0<=_;_--){var T=u[_],D=T.instance,F=T.currentTarget;if(T=T.listener,D!==f&&d.isPropagationStopped())break e;f=T,d.currentTarget=F;try{f(d)}catch(W){oc(W)}d.currentTarget=null,f=D}else for(_=0;_<u.length;_++){if(T=u[_],D=T.instance,F=T.currentTarget,T=T.listener,D!==f&&d.isPropagationStopped())break e;f=T,d.currentTarget=F;try{f(d)}catch(W){oc(W)}d.currentTarget=null,f=D}}}}function Le(n,i){var o=i[pa];o===void 0&&(o=i[pa]=new Set);var u=n+"__bubble";o.has(u)||(wv(i,n,2,!1),o.add(u))}function tm(n,i,o){var u=0;i&&(u|=4),wv(o,n,u,i)}var Kc="_reactListening"+Math.random().toString(36).slice(2);function nm(n){if(!n[Kc]){n[Kc]=!0,el.forEach(function(o){o!=="selectionchange"&&(I1.has(o)||tm(o,!1,n),tm(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Kc]||(i[Kc]=!0,tm("selectionchange",!1,i))}}function wv(n,i,o,u){switch(Xv(i)){case 2:var d=rA;break;case 8:d=sA;break;default:d=ym}o=d.bind(null,i,o,n),d=void 0,!Ri||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),u?d!==void 0?n.addEventListener(i,o,{capture:!0,passive:d}):n.addEventListener(i,o,!0):d!==void 0?n.addEventListener(i,o,{passive:d}):n.addEventListener(i,o,!1)}function rm(n,i,o,u,d){var f=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var T=u.stateNode.containerInfo;if(T===d)break;if(_===4)for(_=u.return;_!==null;){var D=_.tag;if((D===3||D===4)&&_.stateNode.containerInfo===d)return;_=_.return}for(;T!==null;){if(_=br(T),_===null)return;if(D=_.tag,D===5||D===6||D===26||D===27){u=f=_;continue e}T=T.parentNode}}u=u.return}As(function(){var F=f,W=Un(o),ee=[];e:{var G=ey.get(n);if(G!==void 0){var X=xr,fe=n;switch(n){case"keypress":if(Ci(o)===0)break e;case"keydown":case"keyup":X=sc;break;case"focusin":fe="focus",X=Oi;break;case"focusout":fe="blur",X=Oi;break;case"beforeblur":case"afterblur":X=Oi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=fl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Yu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=y;break;case Xp:case Jp:case Wp:X=Ju;break;case Zp:X=R;break;case"scroll":case"scrollend":X=dl;break;case"wheel":X=Q;break;case"copy":case"cut":case"paste":X=Wu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Qr;break;case"toggle":case"beforetoggle":X=Ne}var Ee=(i&4)!==0,it=!Ee&&(n==="scroll"||n==="scrollend"),z=Ee?G!==null?G+"Capture":null:G;Ee=[];for(var P=F,$;P!==null;){var Z=P;if($=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||$===null||z===null||(Z=tr(P,z),Z!=null&&Ee.push(Hl(P,Z,$))),it)break;P=P.return}0<Ee.length&&(G=new X(G,fe,null,o,W),ee.push({event:G,listeners:Ee}))}}if((i&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",X=n==="mouseout"||n==="pointerout",G&&o!==ul&&(fe=o.relatedTarget||o.fromElement)&&(br(fe)||fe[_r]))break e;if((X||G)&&(G=W.window===W?W:(G=W.ownerDocument)?G.defaultView||G.parentWindow:window,X?(fe=o.relatedTarget||o.toElement,X=F,fe=fe?br(fe):null,fe!==null&&(it=l(fe),Ee=fe.tag,fe!==it||Ee!==5&&Ee!==27&&Ee!==6)&&(fe=null)):(X=null,fe=F),X!==fe)){if(Ee=fl,Z="onMouseLeave",z="onMouseEnter",P="mouse",(n==="pointerout"||n==="pointerover")&&(Ee=Qr,Z="onPointerLeave",z="onPointerEnter",P="pointer"),it=X==null?G:Sn(X),$=fe==null?G:Sn(fe),G=new Ee(Z,P+"leave",X,o,W),G.target=it,G.relatedTarget=$,Z=null,br(W)===F&&(Ee=new Ee(z,P+"enter",fe,o,W),Ee.target=$,Ee.relatedTarget=it,Z=Ee),it=Z,X&&fe)t:{for(Ee=O1,z=X,P=fe,$=0,Z=z;Z;Z=Ee(Z))$++;Z=0;for(var ve=P;ve;ve=Ee(ve))Z++;for(;0<$-Z;)z=Ee(z),$--;for(;0<Z-$;)P=Ee(P),Z--;for(;$--;){if(z===P||P!==null&&z===P.alternate){Ee=z;break t}z=Ee(z),P=Ee(P)}Ee=null}else Ee=null;X!==null&&Ev(ee,G,X,Ee,!1),fe!==null&&it!==null&&Ev(ee,it,fe,Ee,!0)}}e:{if(G=F?Sn(F):window,X=G.nodeName&&G.nodeName.toLowerCase(),X==="select"||X==="input"&&G.type==="file")var Ye=Lp;else if(Vp(G))if(zp)Ye=BS;else{Ye=LS;var ye=US}else X=G.nodeName,!X||X.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&ba(F.elementType)&&(Ye=Lp):Ye=zS;if(Ye&&(Ye=Ye(n,F))){Up(ee,Ye,o,W);break e}ye&&ye(n,G,F),n==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&al(G,"number",G.value)}switch(ye=F?Sn(F):window,n){case"focusin":(Vp(ye)||ye.contentEditable==="true")&&(Ca=ye,Nd=F,_l=null);break;case"focusout":_l=Nd=Ca=null;break;case"mousedown":Dd=!0;break;case"contextmenu":case"mouseup":case"dragend":Dd=!1,Qp(ee,o,W);break;case"selectionchange":if(HS)break;case"keydown":case"keyup":Qp(ee,o,W)}var ke;if(Je)e:{switch(n){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else xa?Ni(n,o)&&(Be="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Be="onCompositionStart");Be&&(Or&&o.locale!=="ko"&&(xa||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&xa&&(ke=hl()):(Rr=W,cl="value"in Rr?Rr.value:Rr.textContent,xa=!0)),ye=Qc(F,Be),0<ye.length&&(Be=new Ir(Be,n,null,o,W),ee.push({event:Be,listeners:ye}),ke?Be.data=ke:(ke=Ra(o),ke!==null&&(Be.data=ke)))),(ke=zn?kS(n,o):MS(n,o))&&(Be=Qc(F,"onBeforeInput"),0<Be.length&&(ye=new Ir("onBeforeInput","beforeinput",null,o,W),ee.push({event:ye,listeners:Be}),ye.data=ke)),R1(ee,n,F,o,W)}bv(ee,i)})}function Hl(n,i,o){return{instance:n,listener:i,currentTarget:o}}function Qc(n,i){for(var o=i+"Capture",u=[];n!==null;){var d=n,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=tr(n,o),d!=null&&u.unshift(Hl(n,d,f)),d=tr(n,i),d!=null&&u.push(Hl(n,d,f))),n.tag===3)return u;n=n.return}return[]}function O1(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Ev(n,i,o,u,d){for(var f=i._reactName,_=[];o!==null&&o!==u;){var T=o,D=T.alternate,F=T.stateNode;if(T=T.tag,D!==null&&D===u)break;T!==5&&T!==26&&T!==27||F===null||(D=F,d?(F=tr(o,f),F!=null&&_.unshift(Hl(o,F,D))):d||(F=tr(o,f),F!=null&&_.push(Hl(o,F,D)))),o=o.return}_.length!==0&&n.push({event:i,listeners:_})}var N1=/\r\n?/g,D1=/\u0000|\uFFFD/g;function Tv(n){return(typeof n=="string"?n:""+n).replace(N1,`
`).replace(D1,"")}function Sv(n,i){return i=Tv(i),Tv(n)===i}function st(n,i,o,u,d,f){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||yn(n,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&yn(n,""+u);break;case"className":An(n,"class",u);break;case"tabIndex":An(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":An(n,o,u);break;case"style":ll(n,u,f);break;case"data":if(i!=="object"){An(n,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=wa(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(o==="formAction"?(i!=="input"&&st(n,i,"name",d.name,d,null),st(n,i,"formEncType",d.formEncType,d,null),st(n,i,"formMethod",d.formMethod,d,null),st(n,i,"formTarget",d.formTarget,d,null)):(st(n,i,"encType",d.encType,d,null),st(n,i,"method",d.method,d,null),st(n,i,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=wa(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=er);break;case"onScroll":u!=null&&Le("scroll",n);break;case"onScrollEnd":u!=null&&Le("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=wa(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Le("beforetoggle",n),Le("toggle",n),_a(n,"popover",u);break;case"xlinkActuate":Ot(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ot(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ot(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ot(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ot(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ot(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ot(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ot(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ot(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":_a(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Qu.get(o)||o,_a(n,o,u))}}function sm(n,i,o,u,d,f){switch(o){case"style":ll(n,u,f);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof u=="string"?yn(n,u):(typeof u=="number"||typeof u=="bigint")&&yn(n,""+u);break;case"onScroll":u!=null&&Le("scroll",n);break;case"onScrollEnd":u!=null&&Le("scrollend",n);break;case"onClick":u!=null&&(n.onclick=er);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!tl.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),i=o.slice(2,d?o.length-7:void 0),f=n[$t]||null,f=f!=null?f[o]:null,typeof f=="function"&&n.removeEventListener(i,f,d),typeof u=="function")){typeof f!="function"&&f!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,u,d);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):_a(n,o,u)}}}function Zt(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",n),Le("load",n);var u=!1,d=!1,f;for(f in o)if(o.hasOwnProperty(f)){var _=o[f];if(_!=null)switch(f){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:st(n,i,f,_,o,null)}}d&&st(n,i,"srcSet",o.srcSet,o,null),u&&st(n,i,"src",o.src,o,null);return;case"input":Le("invalid",n);var T=f=_=d=null,D=null,F=null;for(u in o)if(o.hasOwnProperty(u)){var W=o[u];if(W!=null)switch(u){case"name":d=W;break;case"type":_=W;break;case"checked":D=W;break;case"defaultChecked":F=W;break;case"value":f=W;break;case"defaultValue":T=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,i));break;default:st(n,i,u,W,o,null)}}Fu(n,f,T,D,F,_,d,!1);return;case"select":Le("invalid",n),u=_=f=null;for(d in o)if(o.hasOwnProperty(d)&&(T=o[d],T!=null))switch(d){case"value":f=T;break;case"defaultValue":_=T;break;case"multiple":u=T;default:st(n,i,d,T,o,null)}i=f,o=_,n.multiple=!!u,i!=null?ws(n,!!u,i,!1):o!=null&&ws(n,!!u,o,!0);return;case"textarea":Le("invalid",n),f=d=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(T=o[_],T!=null))switch(_){case"value":u=T;break;case"defaultValue":d=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:st(n,i,_,T,o,null)}Es(n,u,d,f);return;case"option":for(D in o)if(o.hasOwnProperty(D)&&(u=o[D],u!=null))switch(D){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:st(n,i,D,u,o,null)}return;case"dialog":Le("beforetoggle",n),Le("toggle",n),Le("cancel",n),Le("close",n);break;case"iframe":case"object":Le("load",n);break;case"video":case"audio":for(u=0;u<ql.length;u++)Le(ql[u],n);break;case"image":Le("error",n),Le("load",n);break;case"details":Le("toggle",n);break;case"embed":case"source":case"link":Le("error",n),Le("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in o)if(o.hasOwnProperty(F)&&(u=o[F],u!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:st(n,i,F,u,o,null)}return;default:if(ba(i)){for(W in o)o.hasOwnProperty(W)&&(u=o[W],u!==void 0&&sm(n,i,W,u,o,void 0));return}}for(T in o)o.hasOwnProperty(T)&&(u=o[T],u!=null&&st(n,i,T,u,o,null))}function j1(n,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,_=null,T=null,D=null,F=null,W=null;for(X in o){var ee=o[X];if(o.hasOwnProperty(X)&&ee!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":D=ee;default:u.hasOwnProperty(X)||st(n,i,X,null,u,ee)}}for(var G in u){var X=u[G];if(ee=o[G],u.hasOwnProperty(G)&&(X!=null||ee!=null))switch(G){case"type":f=X;break;case"name":d=X;break;case"checked":F=X;break;case"defaultChecked":W=X;break;case"value":_=X;break;case"defaultValue":T=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,i));break;default:X!==ee&&st(n,i,G,X,u,ee)}}va(n,_,T,D,F,W,f,d);return;case"select":X=_=T=G=null;for(f in o)if(D=o[f],o.hasOwnProperty(f)&&D!=null)switch(f){case"value":break;case"multiple":X=D;default:u.hasOwnProperty(f)||st(n,i,f,null,u,D)}for(d in u)if(f=u[d],D=o[d],u.hasOwnProperty(d)&&(f!=null||D!=null))switch(d){case"value":G=f;break;case"defaultValue":T=f;break;case"multiple":_=f;default:f!==D&&st(n,i,d,f,u,D)}i=T,o=_,u=X,G!=null?ws(n,!!o,G,!1):!!u!=!!o&&(i!=null?ws(n,!!o,i,!0):ws(n,!!o,o?[]:"",!1));return;case"textarea":X=G=null;for(T in o)if(d=o[T],o.hasOwnProperty(T)&&d!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:st(n,i,T,null,u,d)}for(_ in u)if(d=u[_],f=o[_],u.hasOwnProperty(_)&&(d!=null||f!=null))switch(_){case"value":G=d;break;case"defaultValue":X=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==f&&st(n,i,_,d,u,f)}Gu(n,G,X);return;case"option":for(var fe in o)if(G=o[fe],o.hasOwnProperty(fe)&&G!=null&&!u.hasOwnProperty(fe))switch(fe){case"selected":n.selected=!1;break;default:st(n,i,fe,null,u,G)}for(D in u)if(G=u[D],X=o[D],u.hasOwnProperty(D)&&G!==X&&(G!=null||X!=null))switch(D){case"selected":n.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:st(n,i,D,G,u,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in o)G=o[Ee],o.hasOwnProperty(Ee)&&G!=null&&!u.hasOwnProperty(Ee)&&st(n,i,Ee,null,u,G);for(F in u)if(G=u[F],X=o[F],u.hasOwnProperty(F)&&G!==X&&(G!=null||X!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:st(n,i,F,G,u,X)}return;default:if(ba(i)){for(var it in o)G=o[it],o.hasOwnProperty(it)&&G!==void 0&&!u.hasOwnProperty(it)&&sm(n,i,it,void 0,u,G);for(W in u)G=u[W],X=o[W],!u.hasOwnProperty(W)||G===X||G===void 0&&X===void 0||sm(n,i,W,G,u,X);return}}for(var z in o)G=o[z],o.hasOwnProperty(z)&&G!=null&&!u.hasOwnProperty(z)&&st(n,i,z,null,u,G);for(ee in u)G=u[ee],X=o[ee],!u.hasOwnProperty(ee)||G===X||G==null&&X==null||st(n,i,ee,G,u,X)}function Av(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function k1(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var d=o[u],f=d.transferSize,_=d.initiatorType,T=d.duration;if(f&&T&&Av(_)){for(_=0,T=d.responseEnd,u+=1;u<o.length;u++){var D=o[u],F=D.startTime;if(F>T)break;var W=D.transferSize,ee=D.initiatorType;W&&Av(ee)&&(D=D.responseEnd,_+=W*(D<T?1:(T-F)/(D-F)))}if(--u,i+=8*(f+_)/(d.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var im=null,am=null;function Yc(n){return n.nodeType===9?n:n.ownerDocument}function Rv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xv(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function om(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var lm=null;function M1(){var n=window.event;return n&&n.type==="popstate"?n===lm?!1:(lm=n,!0):(lm=null,!1)}var Cv=typeof setTimeout=="function"?setTimeout:void 0,P1=typeof clearTimeout=="function"?clearTimeout:void 0,Iv=typeof Promise=="function"?Promise:void 0,V1=typeof queueMicrotask=="function"?queueMicrotask:typeof Iv<"u"?function(n){return Iv.resolve(null).then(n).catch(U1)}:Cv;function U1(n){setTimeout(function(){throw n})}function Fs(n){return n==="head"}function Ov(n,i){var o=i,u=0;do{var d=o.nextSibling;if(n.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(d),to(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")$l(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,$l(o);for(var f=o.firstChild;f;){var _=f.nextSibling,T=f.nodeName;f[vr]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&f.rel.toLowerCase()==="stylesheet"||o.removeChild(f),f=_}}else o==="body"&&$l(n.ownerDocument.body);o=d}while(o);to(i)}function Nv(n,i){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function um(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":um(o),ya(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function L1(n,i,o,u){for(;n.nodeType===1;){var d=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[vr])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(f=n.getAttribute("rel"),f==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(f!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(f=n.getAttribute("src"),(f!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===f)return n}else return n;if(n=Kn(n.nextSibling),n===null)break}return null}function z1(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Kn(n.nextSibling),n===null))return null;return n}function Dv(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Kn(n.nextSibling),n===null))return null;return n}function cm(n){return n.data==="$?"||n.data==="$~"}function hm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function B1(n,i){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Kn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var dm=null;function jv(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(i===0)return Kn(n.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}n=n.nextSibling}return null}function kv(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return n;i--}else o!=="/$"&&o!=="/&"||i++}n=n.previousSibling}return null}function Mv(n,i,o){switch(i=Yc(o),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function $l(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);ya(n)}var Qn=new Map,Pv=new Set;function Xc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var us=re.d;re.d={f:q1,r:H1,D:$1,C:F1,L:G1,m:K1,X:Y1,S:Q1,M:X1};function q1(){var n=us.f(),i=Bc();return n||i}function H1(n){var i=Vn(n);i!==null&&i.tag===5&&i.type==="form"?Zy(i):us.r(n)}var Wa=typeof document>"u"?null:document;function Vv(n,i,o){var u=Wa;if(u&&typeof i=="string"&&i){var d=pn(i);d='link[rel="'+n+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),Pv.has(d)||(Pv.add(d),n={rel:n,crossOrigin:o,href:i},u.querySelector(d)===null&&(i=u.createElement("link"),Zt(i,"link",n),It(i),u.head.appendChild(i)))}}function $1(n){us.D(n),Vv("dns-prefetch",n,null)}function F1(n,i){us.C(n,i),Vv("preconnect",n,i)}function G1(n,i,o){us.L(n,i,o);var u=Wa;if(u&&n&&i){var d='link[rel="preload"][as="'+pn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+pn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+pn(o.imageSizes)+'"]')):d+='[href="'+pn(n)+'"]';var f=d;switch(i){case"style":f=Za(n);break;case"script":f=eo(n)}Qn.has(f)||(n=E({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),Qn.set(f,n),u.querySelector(d)!==null||i==="style"&&u.querySelector(Fl(f))||i==="script"&&u.querySelector(Gl(f))||(i=u.createElement("link"),Zt(i,"link",n),It(i),u.head.appendChild(i)))}}function K1(n,i){us.m(n,i);var o=Wa;if(o&&n){var u=i&&typeof i.as=="string"?i.as:"script",d='link[rel="modulepreload"][as="'+pn(u)+'"][href="'+pn(n)+'"]',f=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=eo(n)}if(!Qn.has(f)&&(n=E({rel:"modulepreload",href:n},i),Qn.set(f,n),o.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Gl(f)))return}u=o.createElement("link"),Zt(u,"link",n),It(u),o.head.appendChild(u)}}}function Q1(n,i,o){us.S(n,i,o);var u=Wa;if(u&&n){var d=wr(u).hoistableStyles,f=Za(n);i=i||"default";var _=d.get(f);if(!_){var T={loading:0,preload:null};if(_=u.querySelector(Fl(f)))T.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":i},o),(o=Qn.get(f))&&fm(n,o);var D=_=u.createElement("link");It(D),Zt(D,"link",n),D._p=new Promise(function(F,W){D.onload=F,D.onerror=W}),D.addEventListener("load",function(){T.loading|=1}),D.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Jc(_,i,u)}_={type:"stylesheet",instance:_,count:1,state:T},d.set(f,_)}}}function Y1(n,i){us.X(n,i);var o=Wa;if(o&&n){var u=wr(o).hoistableScripts,d=eo(n),f=u.get(d);f||(f=o.querySelector(Gl(d)),f||(n=E({src:n,async:!0},i),(i=Qn.get(d))&&mm(n,i),f=o.createElement("script"),It(f),Zt(f,"link",n),o.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},u.set(d,f))}}function X1(n,i){us.M(n,i);var o=Wa;if(o&&n){var u=wr(o).hoistableScripts,d=eo(n),f=u.get(d);f||(f=o.querySelector(Gl(d)),f||(n=E({src:n,async:!0,type:"module"},i),(i=Qn.get(d))&&mm(n,i),f=o.createElement("script"),It(f),Zt(f,"link",n),o.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},u.set(d,f))}}function Uv(n,i,o,u){var d=(d=ge.current)?Xc(d):null;if(!d)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Za(o.href),o=wr(d).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Za(o.href);var f=wr(d).hoistableStyles,_=f.get(n);if(_||(d=d.ownerDocument||d,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(n,_),(f=d.querySelector(Fl(n)))&&!f._p&&(_.instance=f,_.state.loading=5),Qn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Qn.set(n,o),f||J1(d,n,o,_.state))),i&&u===null)throw Error(r(528,""));return _}if(i&&u!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=eo(o),o=wr(d).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Za(n){return'href="'+pn(n)+'"'}function Fl(n){return'link[rel="stylesheet"]['+n+"]"}function Lv(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function J1(n,i,o,u){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=n.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Zt(i,"link",o),It(i),n.head.appendChild(i))}function eo(n){return'[src="'+pn(n)+'"]'}function Gl(n){return"script[async]"+n}function zv(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=n.querySelector('style[data-href~="'+pn(o.href)+'"]');if(u)return i.instance=u,It(u),u;var d=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),It(u),Zt(u,"style",d),Jc(u,o.precedence,n),i.instance=u;case"stylesheet":d=Za(o.href);var f=n.querySelector(Fl(d));if(f)return i.state.loading|=4,i.instance=f,It(f),f;u=Lv(o),(d=Qn.get(d))&&fm(u,d),f=(n.ownerDocument||n).createElement("link"),It(f);var _=f;return _._p=new Promise(function(T,D){_.onload=T,_.onerror=D}),Zt(f,"link",u),i.state.loading|=4,Jc(f,o.precedence,n),i.instance=f;case"script":return f=eo(o.src),(d=n.querySelector(Gl(f)))?(i.instance=d,It(d),d):(u=o,(d=Qn.get(f))&&(u=E({},o),mm(u,d)),n=n.ownerDocument||n,d=n.createElement("script"),It(d),Zt(d,"link",u),n.head.appendChild(d),i.instance=d);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Jc(u,o.precedence,n));return i.instance}function Jc(n,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,f=d,_=0;_<u.length;_++){var T=u[_];if(T.dataset.precedence===i)f=T;else if(f!==d)break}f?f.parentNode.insertBefore(n,f.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function fm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function mm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Wc=null;function Bv(n,i,o){if(Wc===null){var u=new Map,d=Wc=new Map;d.set(o,u)}else d=Wc,u=d.get(o),u||(u=new Map,d.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),d=0;d<o.length;d++){var f=o[d];if(!(f[vr]||f[Ct]||n==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var _=f.getAttribute(i)||"";_=n+_;var T=u.get(_);T?T.push(f):u.set(_,[f])}}return u}function qv(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function W1(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Hv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Z1(n,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var d=Za(u.href),f=i.querySelector(Fl(d));if(f){i=f._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Zc.bind(n),i.then(n,n)),o.state.loading|=4,o.instance=f,It(f);return}f=i.ownerDocument||i,u=Lv(u),(d=Qn.get(d))&&fm(u,d),f=f.createElement("link"),It(f);var _=f;_._p=new Promise(function(T,D){_.onload=T,_.onerror=D}),Zt(f,"link",u),o.instance=f}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Zc.bind(n),i.addEventListener("load",o),i.addEventListener("error",o))}}var gm=0;function eA(n,i){return n.stylesheets&&n.count===0&&th(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&th(n,n.stylesheets),n.unsuspend){var f=n.unsuspend;n.unsuspend=null,f()}},6e4+i);0<n.imgBytes&&gm===0&&(gm=62500*k1());var d=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&th(n,n.stylesheets),n.unsuspend)){var f=n.unsuspend;n.unsuspend=null,f()}},(n.imgBytes>gm?50:800)+i);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(d)}}:null}function Zc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)th(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var eh=null;function th(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,eh=new Map,i.forEach(tA,n),eh=null,Zc.call(n))}function tA(n,i){if(!(i.state.loading&4)){var o=eh.get(n);if(o)var u=o.get(null);else{o=new Map,eh.set(n,o);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var _=d[f];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}d=i.instance,_=d.getAttribute("data-precedence"),f=o.get(_)||u,f===u&&o.set(null,d),o.set(_,d),this.count++,u=Zc.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),f?f.parentNode.insertBefore(d,f.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),i.state.loading|=4}}var Kl={$$typeof:Y,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function nA(n,i,o,u,d,f,_,T,D){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yr(0),this.hiddenUpdates=yr(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function $v(n,i,o,u,d,f,_,T,D,F,W,ee){return n=new nA(n,i,o,_,D,F,W,ee,T),i=1,f===!0&&(i|=24),f=xn(3,null,null,i),n.current=f,f.stateNode=n,i=Kd(),i.refCount++,n.pooledCache=i,i.refCount++,f.memoizedState={element:u,isDehydrated:o,cache:i},Jd(f),n}function Fv(n){return n?(n=Na,n):Na}function Gv(n,i,o,u,d,f){d=Fv(d),u.context===null?u.context=d:u.pendingContext=d,u=ks(i),u.payload={element:o},f=f===void 0?null:f,f!==null&&(u.callback=f),o=Ms(n,u,i),o!==null&&(En(o,n,i),Al(o,n,i))}function Kv(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function pm(n,i){Kv(n,i),(n=n.alternate)&&Kv(n,i)}function Qv(n){if(n.tag===13||n.tag===31){var i=ki(n,67108864);i!==null&&En(i,n,67108864),pm(n,67108864)}}function Yv(n){if(n.tag===13||n.tag===31){var i=Dn();i=Ei(i);var o=ki(n,i);o!==null&&En(o,n,i),pm(n,i)}}var nh=!0;function rA(n,i,o,u){var d=K.T;K.T=null;var f=re.p;try{re.p=2,ym(n,i,o,u)}finally{re.p=f,K.T=d}}function sA(n,i,o,u){var d=K.T;K.T=null;var f=re.p;try{re.p=8,ym(n,i,o,u)}finally{re.p=f,K.T=d}}function ym(n,i,o,u){if(nh){var d=_m(u);if(d===null)rm(n,i,u,rh,o),Jv(n,u);else if(aA(d,n,i,o,u))u.stopPropagation();else if(Jv(n,u),i&4&&-1<iA.indexOf(n)){for(;d!==null;){var f=Vn(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var _=gr(f.pendingLanes);if(_!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var D=1<<31-bt(_);T.entanglements[1]|=D,_&=~D}kr(f),(We&6)===0&&(Lc=hn()+500,Bl(0))}}break;case 31:case 13:T=ki(f,2),T!==null&&En(T,f,2),Bc(),pm(f,2)}if(f=_m(u),f===null&&rm(n,i,u,rh,o),f===d)break;d=f}d!==null&&u.stopPropagation()}else rm(n,i,u,null,o)}}function _m(n){return n=Un(n),vm(n)}var rh=null;function vm(n){if(rh=null,n=br(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=c(i),n!==null)return n;n=null}else if(o===31){if(n=m(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return rh=n,null}function Xv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_i()){case Xo:return 2;case Jo:return 8;case vs:case Sd:return 32;case Mu:return 268435456;default:return 32}default:return 32}}var bm=!1,Gs=null,Ks=null,Qs=null,Ql=new Map,Yl=new Map,Ys=[],iA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Jv(n,i){switch(n){case"focusin":case"focusout":Gs=null;break;case"dragenter":case"dragleave":Ks=null;break;case"mouseover":case"mouseout":Qs=null;break;case"pointerover":case"pointerout":Ql.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yl.delete(i.pointerId)}}function Xl(n,i,o,u,d,f){return n===null||n.nativeEvent!==f?(n={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:f,targetContainers:[d]},i!==null&&(i=Vn(i),i!==null&&Qv(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function aA(n,i,o,u,d){switch(i){case"focusin":return Gs=Xl(Gs,n,i,o,u,d),!0;case"dragenter":return Ks=Xl(Ks,n,i,o,u,d),!0;case"mouseover":return Qs=Xl(Qs,n,i,o,u,d),!0;case"pointerover":var f=d.pointerId;return Ql.set(f,Xl(Ql.get(f)||null,n,i,o,u,d)),!0;case"gotpointercapture":return f=d.pointerId,Yl.set(f,Xl(Yl.get(f)||null,n,i,o,u,d)),!0}return!1}function Wv(n){var i=br(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){n.blockedOn=i,Wn(n.priority,function(){Yv(o)});return}}else if(i===31){if(i=m(o),i!==null){n.blockedOn=i,Wn(n.priority,function(){Yv(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function sh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=_m(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);ul=u,o.target.dispatchEvent(u),ul=null}else return i=Vn(o),i!==null&&Qv(i),n.blockedOn=o,!1;i.shift()}return!0}function Zv(n,i,o){sh(n)&&o.delete(i)}function oA(){bm=!1,Gs!==null&&sh(Gs)&&(Gs=null),Ks!==null&&sh(Ks)&&(Ks=null),Qs!==null&&sh(Qs)&&(Qs=null),Ql.forEach(Zv),Yl.forEach(Zv)}function ih(n,i){n.blockedOn===i&&(n.blockedOn=null,bm||(bm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,oA)))}var ah=null;function e0(n){ah!==n&&(ah=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){ah===n&&(ah=null);for(var i=0;i<n.length;i+=3){var o=n[i],u=n[i+1],d=n[i+2];if(typeof u!="function"){if(vm(u||o)===null)continue;break}var f=Vn(o);f!==null&&(n.splice(i,3),i-=3,_f(f,{pending:!0,data:d,method:o.method,action:u},u,d))}}))}function to(n){function i(D){return ih(D,n)}Gs!==null&&ih(Gs,n),Ks!==null&&ih(Ks,n),Qs!==null&&ih(Qs,n),Ql.forEach(i),Yl.forEach(i);for(var o=0;o<Ys.length;o++){var u=Ys[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Ys.length&&(o=Ys[0],o.blockedOn===null);)Wv(o),o.blockedOn===null&&Ys.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var d=o[u],f=o[u+1],_=d[$t]||null;if(typeof f=="function")_||e0(o);else if(_){var T=null;if(f&&f.hasAttribute("formAction")){if(d=f,_=f[$t]||null)T=_.formAction;else if(vm(d)!==null)continue}else T=_.action;typeof T=="function"?o[u+1]=T:(o.splice(u,3),u-=3),e0(o)}}}function t0(){function n(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(_){return d=_})},focusReset:"manual",scroll:"manual"})}function i(){d!==null&&(d(),d=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,d=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),d!==null&&(d(),d=null)}}}function wm(n){this._internalRoot=n}oh.prototype.render=wm.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,u=Dn();Gv(o,u,n,i,null,null)},oh.prototype.unmount=wm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Gv(n.current,2,null,n,null,null),Bc(),i[_r]=null}};function oh(n){this._internalRoot=n}oh.prototype.unstable_scheduleHydration=function(n){if(n){var i=Bu();n={blockedOn:null,target:n,priority:i};for(var o=0;o<Ys.length&&i!==0&&i<Ys[o].priority;o++);Ys.splice(o,0,n),o===0&&Wv(n)}};var n0=e.version;if(n0!=="19.2.0")throw Error(r(527,n0,"19.2.0"));re.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=p(i),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var lA={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lh.isDisabled&&lh.supportsFiber)try{Xn=lh.inject(lA),Qt=lh}catch{}}return Wl.createRoot=function(n,i){if(!a(n))throw Error(r(299));var o=!1,u="",d=u_,f=c_,_=h_;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=$v(n,1,!1,null,null,o,u,null,d,f,_,t0),n[_r]=i.current,nm(n),new wm(i)},Wl.hydrateRoot=function(n,i,o){if(!a(n))throw Error(r(299));var u=!1,d="",f=u_,_=c_,T=h_,D=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(f=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.formState!==void 0&&(D=o.formState)),i=$v(n,1,!0,i,o??null,u,d,D,f,_,T,t0),i.context=Fv(null),o=i.current,u=Dn(),u=Ei(u),d=ks(u),d.callback=null,Ms(o,d,u),o=u,i.current.lanes=o,bi(i,o),kr(i),n[_r]=i.current,nm(n),new oh(i)},Wl.version="19.2.0",Wl}var d0;function wA(){if(d0)return Sm.exports;d0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Sm.exports=bA(),Sm.exports}var EA=wA();const TA=rd(EA);var Jm=function(s,e){return Jm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])},Jm(s,e)};function Tw(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Jm(s,e);function t(){this.constructor=s}s.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Mh=function(){return Mh=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Mh.apply(this,arguments)};function Po(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(s);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(s,r[a])&&(t[r[a]]=s[r[a]]);return t}function Sw(s,e,t,r){var a=arguments.length,l=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(s,e,t,r);else for(var m=s.length-1;m>=0;m--)(c=s[m])&&(l=(a<3?c(l):a>3?c(e,t,l):c(e,t))||l);return a>3&&l&&Object.defineProperty(e,t,l),l}function Aw(s,e){return function(t,r){e(t,r,s)}}function Rw(s,e,t,r,a,l){function c(H){if(H!==void 0&&typeof H!="function")throw new TypeError("Function expected");return H}for(var m=r.kind,g=m==="getter"?"get":m==="setter"?"set":"value",p=!e&&s?r.static?s:s.prototype:null,v=e||(p?Object.getOwnPropertyDescriptor(p,r.name):{}),E,A=!1,x=t.length-1;x>=0;x--){var j={};for(var V in r)j[V]=V==="access"?{}:r[V];for(var V in r.access)j.access[V]=r.access[V];j.addInitializer=function(H){if(A)throw new TypeError("Cannot add initializers after decoration has completed");l.push(c(H||null))};var k=(0,t[x])(m==="accessor"?{get:v.get,set:v.set}:v[g],j);if(m==="accessor"){if(k===void 0)continue;if(k===null||typeof k!="object")throw new TypeError("Object expected");(E=c(k.get))&&(v.get=E),(E=c(k.set))&&(v.set=E),(E=c(k.init))&&a.unshift(E)}else(E=c(k))&&(m==="field"?a.unshift(E):v[g]=E)}p&&Object.defineProperty(p,r.name,v),A=!0}function xw(s,e,t){for(var r=arguments.length>2,a=0;a<e.length;a++)t=r?e[a].call(s,t):e[a].call(s);return r?t:void 0}function Cw(s){return typeof s=="symbol"?s:"".concat(s)}function Iw(s,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(s,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function Ow(s,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(s,e)}function me(s,e,t,r){function a(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function m(v){try{p(r.next(v))}catch(E){c(E)}}function g(v){try{p(r.throw(v))}catch(E){c(E)}}function p(v){v.done?l(v.value):a(v.value).then(m,g)}p((r=r.apply(s,e||[])).next())})}function Nw(s,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=m(0),c.throw=m(1),c.return=m(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function m(p){return function(v){return g([p,v])}}function g(p){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(t=0)),t;)try{if(r=1,a&&(l=p[0]&2?a.return:p[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,p[1])).done)return l;switch(a=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,a=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){t.label=p[1];break}if(p[0]===6&&t.label<l[1]){t.label=l[1],l=p;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(p);break}l[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(s,t)}catch(v){p=[6,v],a=0}finally{r=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var sd=Object.create?(function(s,e,t,r){r===void 0&&(r=t);var a=Object.getOwnPropertyDescriptor(e,t);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(s,r,a)}):(function(s,e,t,r){r===void 0&&(r=t),s[r]=e[t]});function Dw(s,e){for(var t in s)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&sd(e,s,t)}function Ph(s){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&s[e],r=0;if(t)return t.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&r>=s.length&&(s=void 0),{value:s&&s[r++],done:!s}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function zg(s,e){var t=typeof Symbol=="function"&&s[Symbol.iterator];if(!t)return s;var r=t.call(s),a,l=[],c;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)l.push(a.value)}catch(m){c={error:m}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(c)throw c.error}}return l}function jw(){for(var s=[],e=0;e<arguments.length;e++)s=s.concat(zg(arguments[e]));return s}function kw(){for(var s=0,e=0,t=arguments.length;e<t;e++)s+=arguments[e].length;for(var r=Array(s),a=0,e=0;e<t;e++)for(var l=arguments[e],c=0,m=l.length;c<m;c++,a++)r[a]=l[c];return r}function Mw(s,e,t){if(t||arguments.length===2)for(var r=0,a=e.length,l;r<a;r++)(l||!(r in e))&&(l||(l=Array.prototype.slice.call(e,0,r)),l[r]=e[r]);return s.concat(l||Array.prototype.slice.call(e))}function Ao(s){return this instanceof Ao?(this.v=s,this):new Ao(s)}function Pw(s,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(s,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),m("next"),m("throw"),m("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(x){return function(j){return Promise.resolve(j).then(x,E)}}function m(x,j){r[x]&&(a[x]=function(V){return new Promise(function(k,H){l.push([x,V,k,H])>1||g(x,V)})},j&&(a[x]=j(a[x])))}function g(x,j){try{p(r[x](j))}catch(V){A(l[0][3],V)}}function p(x){x.value instanceof Ao?Promise.resolve(x.value.v).then(v,E):A(l[0][2],x)}function v(x){g("next",x)}function E(x){g("throw",x)}function A(x,j){x(j),l.shift(),l.length&&g(l[0][0],l[0][1])}}function Vw(s){var e,t;return e={},r("next"),r("throw",function(a){throw a}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(a,l){e[a]=s[a]?function(c){return(t=!t)?{value:Ao(s[a](c)),done:!1}:l?l(c):c}:l}}function Uw(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=s[Symbol.asyncIterator],t;return e?e.call(s):(s=typeof Ph=="function"?Ph(s):s[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(l){t[l]=s[l]&&function(c){return new Promise(function(m,g){c=s[l](c),a(m,g,c.done,c.value)})}}function a(l,c,m,g){Promise.resolve(g).then(function(p){l({value:p,done:m})},c)}}function Lw(s,e){return Object.defineProperty?Object.defineProperty(s,"raw",{value:e}):s.raw=e,s}var SA=Object.create?(function(s,e){Object.defineProperty(s,"default",{enumerable:!0,value:e})}):function(s,e){s.default=e},Wm=function(s){return Wm=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},Wm(s)};function zw(s){if(s&&s.__esModule)return s;var e={};if(s!=null)for(var t=Wm(s),r=0;r<t.length;r++)t[r]!=="default"&&sd(e,s,t[r]);return SA(e,s),e}function Bw(s){return s&&s.__esModule?s:{default:s}}function qw(s,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(s):r?r.value:e.get(s)}function Hw(s,e,t,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!a:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(s,t):a?a.value=t:e.set(s,t),t}function $w(s,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof s=="function"?e===s:s.has(e)}function Fw(s,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,a;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],t&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(l){return Promise.reject(l)}}),s.stack.push({value:e,dispose:r,async:t})}else t&&s.stack.push({async:!0});return e}var AA=typeof SuppressedError=="function"?SuppressedError:function(s,e,t){var r=new Error(t);return r.name="SuppressedError",r.error=s,r.suppressed=e,r};function Gw(s){function e(l){s.error=s.hasError?new AA(l,s.error,"An error was suppressed during disposal."):l,s.hasError=!0}var t,r=0;function a(){for(;t=s.stack.pop();)try{if(!t.async&&r===1)return r=0,s.stack.push(t),Promise.resolve().then(a);if(t.dispose){var l=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(l).then(a,function(c){return e(c),a()})}else r|=1}catch(c){e(c)}if(r===1)return s.hasError?Promise.reject(s.error):Promise.resolve();if(s.hasError)throw s.error}return a()}function Kw(s,e){return typeof s=="string"&&/^\.\.?\//.test(s)?s.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,r,a,l,c){return r?e?".jsx":".js":a&&(!l||!c)?t:a+l+"."+c.toLowerCase()+"js"}):s}const RA={__extends:Tw,__assign:Mh,__rest:Po,__decorate:Sw,__param:Aw,__esDecorate:Rw,__runInitializers:xw,__propKey:Cw,__setFunctionName:Iw,__metadata:Ow,__awaiter:me,__generator:Nw,__createBinding:sd,__exportStar:Dw,__values:Ph,__read:zg,__spread:jw,__spreadArrays:kw,__spreadArray:Mw,__await:Ao,__asyncGenerator:Pw,__asyncDelegator:Vw,__asyncValues:Uw,__makeTemplateObject:Lw,__importStar:zw,__importDefault:Bw,__classPrivateFieldGet:qw,__classPrivateFieldSet:Hw,__classPrivateFieldIn:$w,__addDisposableResource:Fw,__disposeResources:Gw,__rewriteRelativeImportExtension:Kw},xA=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Fw,get __assign(){return Mh},__asyncDelegator:Vw,__asyncGenerator:Pw,__asyncValues:Uw,__await:Ao,__awaiter:me,__classPrivateFieldGet:qw,__classPrivateFieldIn:$w,__classPrivateFieldSet:Hw,__createBinding:sd,__decorate:Sw,__disposeResources:Gw,__esDecorate:Rw,__exportStar:Dw,__extends:Tw,__generator:Nw,__importDefault:Bw,__importStar:zw,__makeTemplateObject:Lw,__metadata:Ow,__param:Aw,__propKey:Cw,__read:zg,__rest:Po,__rewriteRelativeImportExtension:Kw,__runInitializers:xw,__setFunctionName:Iw,__spread:jw,__spreadArray:Mw,__spreadArrays:kw,__values:Ph,default:RA},Symbol.toStringTag,{value:"Module"})),CA=s=>s?(...e)=>s(...e):(...e)=>fetch(...e);class Bg extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class IA extends Bg{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class f0 extends Bg{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class m0 extends Bg{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Zm;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Zm||(Zm={}));class OA{constructor(e,{headers:t={},customFetch:r,region:a=Zm.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=CA(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return me(this,arguments,void 0,function*(t,r={}){var a;let l,c;try{const{headers:m,method:g,body:p,signal:v,timeout:E}=r;let A={},{region:x}=r;x||(x=this.region);const j=new URL(`${this.url}/${t}`);x&&x!=="any"&&(A["x-region"]=x,j.searchParams.set("forceFunctionRegion",x));let V;p&&(m&&!Object.prototype.hasOwnProperty.call(m,"Content-Type")||!m)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(A["Content-Type"]="application/octet-stream",V=p):typeof p=="string"?(A["Content-Type"]="text/plain",V=p):typeof FormData<"u"&&p instanceof FormData?V=p:(A["Content-Type"]="application/json",V=JSON.stringify(p)):V=p;let k=v;E&&(c=new AbortController,l=setTimeout(()=>c.abort(),E),v?(k=c.signal,v.addEventListener("abort",()=>c.abort())):k=c.signal);const H=yield this.fetch(j.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},A),this.headers),m),body:V,signal:k}).catch(we=>{throw new IA(we)}),J=H.headers.get("x-relay-error");if(J&&J==="true")throw new f0(H);if(!H.ok)throw new m0(H);let Y=((a=H.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),ae;return Y==="application/json"?ae=yield H.json():Y==="application/octet-stream"||Y==="application/pdf"?ae=yield H.blob():Y==="text/event-stream"?ae=H:Y==="multipart/form-data"?ae=yield H.formData():ae=yield H.text(),{data:ae,error:null,response:H}}catch(m){return{data:null,error:m,response:m instanceof m0||m instanceof f0?m.context:void 0}}finally{l&&clearTimeout(l)}})}}var sn={};const Vo=hA(xA);var uh={},ch={},hh={},dh={},fh={},mh={},g0;function Qw(){if(g0)return mh;g0=1,Object.defineProperty(mh,"__esModule",{value:!0});class s extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return mh.default=s,mh}var p0;function Yw(){if(p0)return fh;p0=1,Object.defineProperty(fh,"__esModule",{value:!0});const e=Vo.__importDefault(Qw());class t{constructor(a){var l,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(c=a.isMaybeSingle)!==null&&c!==void 0?c:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let m=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var p,v,E,A;let x=null,j=null,V=null,k=g.status,H=g.statusText;if(g.ok){if(this.method!=="HEAD"){const we=await g.text();we===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?j=we:j=JSON.parse(we))}const Y=(v=this.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),ae=(E=g.headers.get("content-range"))===null||E===void 0?void 0:E.split("/");Y&&ae&&ae.length>1&&(V=parseInt(ae[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(j)&&(j.length>1?(x={code:"PGRST116",details:`Results contain ${j.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},j=null,V=null,k=406,H="Not Acceptable"):j.length===1?j=j[0]:j=null)}else{const Y=await g.text();try{x=JSON.parse(Y),Array.isArray(x)&&g.status===404&&(j=[],x=null,k=200,H="OK")}catch{g.status===404&&Y===""?(k=204,H="No Content"):x={message:Y}}if(x&&this.isMaybeSingle&&(!((A=x==null?void 0:x.details)===null||A===void 0)&&A.includes("0 rows"))&&(x=null,k=200,H="OK"),x&&this.shouldThrowOnError)throw new e.default(x)}return{error:x,data:j,count:V,status:k,statusText:H}});return this.shouldThrowOnError||(m=m.catch(g=>{var p,v,E,A,x,j;let V="";const k=g==null?void 0:g.cause;if(k){const H=(p=k==null?void 0:k.message)!==null&&p!==void 0?p:"",J=(v=k==null?void 0:k.code)!==null&&v!==void 0?v:"";V=`${(E=g==null?void 0:g.name)!==null&&E!==void 0?E:"FetchError"}: ${g==null?void 0:g.message}`,V+=`

Caused by: ${(A=k==null?void 0:k.name)!==null&&A!==void 0?A:"Error"}: ${H}`,J&&(V+=` (${J})`),k!=null&&k.stack&&(V+=`
${k.stack}`)}else V=(x=g==null?void 0:g.stack)!==null&&x!==void 0?x:"";return{error:{message:`${(j=g==null?void 0:g.name)!==null&&j!==void 0?j:"FetchError"}: ${g==null?void 0:g.message}`,details:V,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),m.then(a,l)}returns(){return this}overrideTypes(){return this}}return fh.default=t,fh}var y0;function Xw(){if(y0)return dh;y0=1,Object.defineProperty(dh,"__esModule",{value:!0});const e=Vo.__importDefault(Yw());class t extends e.default{select(a){let l=!1;const c=(a??"*").split("").map(m=>/\s/.test(m)&&!l?"":(m==='"'&&(l=!l),m)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:l=!0,nullsFirst:c,foreignTable:m,referencedTable:g=m}={}){const p=g?`${g}.order`:"order",v=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${v?`${v},`:""}${a}.${l?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:c=l}={}){const m=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(m,`${a}`),this}range(a,l,{foreignTable:c,referencedTable:m=c}={}){const g=typeof m>"u"?"offset":`${m}.offset`,p=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(g,`${a}`),this.url.searchParams.set(p,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:l=!1,settings:c=!1,buffers:m=!1,wal:g=!1,format:p="text"}={}){var v;const E=[a?"analyze":null,l?"verbose":null,c?"settings":null,m?"buffers":null,g?"wal":null].filter(Boolean).join("|"),A=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${A}"; options=${E};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return dh.default=t,dh}var _0;function qg(){if(_0)return hh;_0=1,Object.defineProperty(hh,"__esModule",{value:!0});const e=Vo.__importDefault(Xw()),t=new RegExp("[,()]");class r extends e.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}regexMatch(l,c){return this.url.searchParams.append(l,`match.${c}`),this}regexIMatch(l,c){return this.url.searchParams.append(l,`imatch.${c}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}isDistinct(l,c){return this.url.searchParams.append(l,`isdistinct.${c}`),this}in(l,c){const m=Array.from(new Set(c)).map(g=>typeof g=="string"&&t.test(g)?`"${g}"`:`${g}`).join(",");return this.url.searchParams.append(l,`in.(${m})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:m,type:g}={}){let p="";g==="plain"?p="pl":g==="phrase"?p="ph":g==="websearch"&&(p="w");const v=m===void 0?"":`(${m})`;return this.url.searchParams.append(l,`${p}fts${v}.${c}`),this}match(l){return Object.entries(l).forEach(([c,m])=>{this.url.searchParams.append(c,`eq.${m}`)}),this}not(l,c,m){return this.url.searchParams.append(l,`not.${c}.${m}`),this}or(l,{foreignTable:c,referencedTable:m=c}={}){const g=m?`${m}.or`:"or";return this.url.searchParams.append(g,`(${l})`),this}filter(l,c,m){return this.url.searchParams.append(l,`${c}.${m}`),this}}return hh.default=r,hh}var v0;function Jw(){if(v0)return ch;v0=1,Object.defineProperty(ch,"__esModule",{value:!0});const e=Vo.__importDefault(qg());class t{constructor(a,{headers:l={},schema:c,fetch:m}){this.url=a,this.headers=new Headers(l),this.schema=c,this.fetch=m}select(a,l){const{head:c=!1,count:m}=l??{},g=c?"HEAD":"GET";let p=!1;const v=(a??"*").split("").map(E=>/\s/.test(E)&&!p?"":(E==='"'&&(p=!p),E)).join("");return this.url.searchParams.set("select",v),m&&this.headers.append("Prefer",`count=${m}`),new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:l,defaultToNull:c=!0}={}){var m;const g="POST";if(l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const p=a.reduce((v,E)=>v.concat(Object.keys(E)),[]);if(p.length>0){const v=[...new Set(p)].map(E=>`"${E}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(a,{onConflict:l,ignoreDuplicates:c=!1,count:m,defaultToNull:g=!0}={}){var p;const v="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),m&&this.headers.append("Prefer",`count=${m}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const E=a.reduce((A,x)=>A.concat(Object.keys(x)),[]);if(E.length>0){const A=[...new Set(E)].map(x=>`"${x}"`);this.url.searchParams.set("columns",A.join(","))}}return new e.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(a,{count:l}={}){var c;const m="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:a}={}){var l;const c="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return ch.default=t,ch}var b0;function NA(){if(b0)return uh;b0=1,Object.defineProperty(uh,"__esModule",{value:!0});const s=Vo,e=s.__importDefault(Jw()),t=s.__importDefault(qg());class r{constructor(l,{headers:c={},schema:m,fetch:g}={}){this.url=l,this.headers=new Headers(c),this.schemaName=m,this.fetch=g}from(l){if(!l||typeof l!="string"||l.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const c=new URL(`${this.url}/${l}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new r(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,c={},{head:m=!1,get:g=!1,count:p}={}){var v;let E;const A=new URL(`${this.url}/rpc/${l}`);let x;m||g?(E=m?"HEAD":"GET",Object.entries(c).filter(([V,k])=>k!==void 0).map(([V,k])=>[V,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([V,k])=>{A.searchParams.append(V,k)})):(E="POST",x=c);const j=new Headers(this.headers);return p&&j.set("Prefer",`count=${p}`),new t.default({method:E,url:A,headers:j,schema:this.schemaName,body:x,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return uh.default=r,uh}var w0;function DA(){if(w0)return sn;w0=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.PostgrestError=sn.PostgrestBuilder=sn.PostgrestTransformBuilder=sn.PostgrestFilterBuilder=sn.PostgrestQueryBuilder=sn.PostgrestClient=void 0;const s=Vo,e=s.__importDefault(NA());sn.PostgrestClient=e.default;const t=s.__importDefault(Jw());sn.PostgrestQueryBuilder=t.default;const r=s.__importDefault(qg());sn.PostgrestFilterBuilder=r.default;const a=s.__importDefault(Xw());sn.PostgrestTransformBuilder=a.default;const l=s.__importDefault(Yw());sn.PostgrestBuilder=l.default;const c=s.__importDefault(Qw());return sn.PostgrestError=c.default,sn.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:c.default},sn}var Ww=DA();const Zw=rd(Ww),jA=cA({__proto__:null,default:Zw},[Ww]),{PostgrestClient:kA,PostgrestQueryBuilder:X5,PostgrestFilterBuilder:J5,PostgrestTransformBuilder:W5,PostgrestBuilder:Z5,PostgrestError:ek}=Zw||jA;class MA{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,a=parseInt(r.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const PA="2.86.0",VA=`realtime-js/${PA}`,eE="1.0.0",UA="2.0.0",E0=eE,eg=1e4,LA=1e3,zA=100;var Ji;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Ji||(Ji={}));var qt;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(qt||(qt={}));var cr;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(cr||(cr={}));var tg;(function(s){s.websocket="websocket"})(tg||(tg={}));var Wi;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Wi||(Wi={}));class BA{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r;const a=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var t,r;const a=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:{},c=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,t,r){var a,l;const c=e.topic,m=(a=e.ref)!==null&&a!==void 0?a:"",g=(l=e.join_ref)!==null&&l!==void 0?l:"",p=e.payload.event,v=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},E=Object.keys(v).length===0?"":JSON.stringify(v);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`ref length ${m.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(E.length>255)throw new Error(`metadata length ${E.length} exceeds maximum of 255`);const A=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+m.length+c.length+p.length+E.length,x=new ArrayBuffer(this.HEADER_LENGTH+A);let j=new DataView(x),V=0;j.setUint8(V++,this.KINDS.userBroadcastPush),j.setUint8(V++,g.length),j.setUint8(V++,m.length),j.setUint8(V++,c.length),j.setUint8(V++,p.length),j.setUint8(V++,E.length),j.setUint8(V++,t),Array.from(g,H=>j.setUint8(V++,H.charCodeAt(0))),Array.from(m,H=>j.setUint8(V++,H.charCodeAt(0))),Array.from(c,H=>j.setUint8(V++,H.charCodeAt(0))),Array.from(p,H=>j.setUint8(V++,H.charCodeAt(0))),Array.from(E,H=>j.setUint8(V++,H.charCodeAt(0)));var k=new Uint8Array(x.byteLength+r.byteLength);return k.set(new Uint8Array(x),0),k.set(new Uint8Array(r),x.byteLength),k.buffer}decode(e,t){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return t(r)}if(typeof e=="string"){const r=JSON.parse(e),[a,l,c,m,g]=r;return t({join_ref:a,ref:l,topic:c,event:m,payload:g})}return t({})}_binaryDecode(e){const t=new DataView(e),r=t.getUint8(0),a=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,a)}}_decodeUserBroadcast(e,t,r){const a=t.getUint8(1),l=t.getUint8(2),c=t.getUint8(3),m=t.getUint8(4);let g=this.HEADER_LENGTH+4;const p=r.decode(e.slice(g,g+a));g=g+a;const v=r.decode(e.slice(g,g+l));g=g+l;const E=r.decode(e.slice(g,g+c));g=g+c;const A=e.slice(g,e.byteLength),x=m===this.JSON_ENCODING?JSON.parse(r.decode(A)):A,j={type:this.BROADCAST_EVENT,event:v,payload:x};return c>0&&(j.meta=JSON.parse(E)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:j}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>t.includes(r)))}}class tE{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ut;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(ut||(ut={}));const T0=(s,e,t={})=>{var r;const a=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((l,c)=>(l[c]=qA(c,s,e,a),l),{}):{}},qA=(s,e,t,r)=>{const a=e.find(m=>m.name===s),l=a==null?void 0:a.type,c=t[s];return l&&!r.includes(l)?nE(l,c):ng(c)},nE=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return GA(e,t)}switch(s){case ut.bool:return HA(e);case ut.float4:case ut.float8:case ut.int2:case ut.int4:case ut.int8:case ut.numeric:case ut.oid:return $A(e);case ut.json:case ut.jsonb:return FA(e);case ut.timestamp:return KA(e);case ut.abstime:case ut.date:case ut.daterange:case ut.int4range:case ut.int8range:case ut.money:case ut.reltime:case ut.text:case ut.time:case ut.timestamptz:case ut.timetz:case ut.tsrange:case ut.tstzrange:return ng(e);default:return ng(e)}},ng=s=>s,HA=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},$A=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},FA=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},GA=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,r=s[t];if(s[0]==="{"&&r==="}"){let l;const c=s.slice(1,t);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(m=>nE(e,m))}return s},KA=s=>typeof s=="string"?s.replace(" ","T"):s,rE=s=>{const e=new URL(s);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Cm{constructor(e,t,r={},a=eg){this.channel=e,this.event=t,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var S0;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(S0||(S0={}));class ru{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:l,onLeave:c,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ru.syncState(this.state,a,l,c),this.pendingDiffs.forEach(g=>{this.state=ru.syncDiff(this.state,g,l,c)}),this.pendingDiffs=[],m()}),this.channel._on(r.diff,{},a=>{const{onJoin:l,onLeave:c,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=ru.syncDiff(this.state,a,l,c),m())}),this.onJoin((a,l,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:c})}),this.onLeave((a,l,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,a){const l=this.cloneDeep(e),c=this.transformState(t),m={},g={};return this.map(l,(p,v)=>{c[p]||(g[p]=v)}),this.map(c,(p,v)=>{const E=l[p];if(E){const A=v.map(k=>k.presence_ref),x=E.map(k=>k.presence_ref),j=v.filter(k=>x.indexOf(k.presence_ref)<0),V=E.filter(k=>A.indexOf(k.presence_ref)<0);j.length>0&&(m[p]=j),V.length>0&&(g[p]=V)}else m[p]=v}),this.syncDiff(l,{joins:m,leaves:g},r,a)}static syncDiff(e,t,r,a){const{joins:l,leaves:c}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(l,(m,g)=>{var p;const v=(p=e[m])!==null&&p!==void 0?p:[];if(e[m]=this.cloneDeep(g),v.length>0){const E=e[m].map(x=>x.presence_ref),A=v.filter(x=>E.indexOf(x.presence_ref)<0);e[m].unshift(...A)}r(m,v,g)}),this.map(c,(m,g)=>{let p=e[m];if(!p)return;const v=g.map(E=>E.presence_ref);p=p.filter(E=>v.indexOf(E.presence_ref)<0),e[m]=p,a(m,p,g),p.length===0&&delete e[m]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const a=e[r];return"metas"in a?t[r]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):t[r]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var A0;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(A0||(A0={}));var su;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(su||(su={}));var cs;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(cs||(cs={}));class Hg{constructor(e,t={config:{}},r){var a,l;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=qt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Cm(this,cr.join,this.params,this.timeout),this.rejoinTimer=new tE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=qt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=qt.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=qt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=qt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=qt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(cr.reply,{},(c,m)=>{this._trigger(this._replyEventName(m),c)}),this.presence=new ru(this),this.broadcastEndpointURL=rE(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==qt.closed){const{config:{broadcast:c,presence:m,private:g}}=this.params,p=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(x=>x.filter))!==null&&a!==void 0?a:[],v=!!this.bindings[su.PRESENCE]&&this.bindings[su.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,E={},A={broadcast:c,presence:Object.assign(Object.assign({},m),{enabled:v}),postgres_changes:p,private:g};this.socket.accessTokenValue&&(E.access_token=this.socket.accessTokenValue),this._onError(x=>e==null?void 0:e(cs.CHANNEL_ERROR,x)),this._onClose(()=>e==null?void 0:e(cs.CLOSED)),this.updateJoinPayload(Object.assign({config:A},E)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:x})=>{var j;if(this.socket.setAuth(),x===void 0){e==null||e(cs.SUBSCRIBED);return}else{const V=this.bindings.postgres_changes,k=(j=V==null?void 0:V.length)!==null&&j!==void 0?j:0,H=[];for(let J=0;J<k;J++){const Y=V[J],{filter:{event:ae,schema:we,table:ce,filter:I}}=Y,C=x&&x[J];if(C&&C.event===ae&&C.schema===we&&C.table===ce&&C.filter===I)H.push(Object.assign(Object.assign({},Y),{id:C.id}));else{this.unsubscribe(),this.state=qt.errored,e==null||e(cs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=H,e&&e(cs.SUBSCRIBED);return}}).receive("error",x=>{this.state=qt.errored,e==null||e(cs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(cs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===qt.joined&&e===su.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var a;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);if(m.status===202)return{success:!0};let g=m.statusText;try{const p=await m.json();g=p.error||p.message||g}catch{}return Promise.reject(new Error(g))}async send(e,t={}){var r,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=e,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=p.body)===null||a===void 0?void 0:a.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,m,g;const p=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(m=(c=this.params)===null||c===void 0?void 0:c.config)===null||m===void 0?void 0:m.broadcast)===null||g===void 0)&&g.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=qt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(cr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new Cm(this,cr.leave,{},e),r.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=qt.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const a=new AbortController,l=setTimeout(()=>a.abort(),r),c=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(l),c}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Cm(this,e,t,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>zA){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var a,l;const c=e.toLocaleLowerCase(),{close:m,error:g,leave:p,join:v}=cr;if(r&&[m,g,p,v].indexOf(c)>=0&&r!==this._joinRef())return;let A=this._onMessage(c,t,r);if(t&&!A)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(x=>{var j,V,k;return((j=x.filter)===null||j===void 0?void 0:j.event)==="*"||((k=(V=x.filter)===null||V===void 0?void 0:V.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===c}).map(x=>x.callback(A,r)):(l=this.bindings[c])===null||l===void 0||l.filter(x=>{var j,V,k,H,J,Y;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in x){const ae=x.id,we=(j=x.filter)===null||j===void 0?void 0:j.event;return ae&&((V=t.ids)===null||V===void 0?void 0:V.includes(ae))&&(we==="*"||(we==null?void 0:we.toLocaleLowerCase())===((k=t.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const ae=(J=(H=x==null?void 0:x.filter)===null||H===void 0?void 0:H.event)===null||J===void 0?void 0:J.toLocaleLowerCase();return ae==="*"||ae===((Y=t==null?void 0:t.event)===null||Y===void 0?void 0:Y.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===c}).map(x=>{if(typeof A=="object"&&"ids"in A){const j=A.data,{schema:V,table:k,commit_timestamp:H,type:J,errors:Y}=j;A=Object.assign(Object.assign({},{schema:V,table:k,commit_timestamp:H,eventType:J,new:{},old:{},errors:Y}),this._getPayloadRecords(j))}x.callback(A,r)})}_isClosed(){return this.state===qt.closed}_isJoined(){return this.state===qt.joined}_isJoining(){return this.state===qt.joining}_isLeaving(){return this.state===qt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const a=e.toLocaleLowerCase(),l={type:a,filter:t,callback:r};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===r&&Hg.isEqual(a.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(cr.close,{},e)}_onError(e){this._on(cr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=qt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=T0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=T0(e.columns,e.old_record)),t}}const Im=()=>{},gh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},QA=[1e3,2e3,5e3,1e4],YA=1e4,XA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class JA{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=eg,this.transport=null,this.heartbeatIntervalMs=gh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Im,this.ref=0,this.reconnectTimer=null,this.vsn=E0,this.logger=Im,this.conn=null,this.sendBuffer=[],this.serializer=new BA,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${tg.websocket}`,this.httpEndpoint=rE(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=MA.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ji.connecting:return Wi.Connecting;case Ji.open:return Wi.Open;case Ji.closing:return Wi.Closing;default:return Wi.Closed}}isConnected(){return this.connectionState()===Wi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===r);if(a)return a;{const l=new Hg(`realtime:${e}`,t,this);return this.channels.push(l),l}}push(e){const{topic:t,event:r,payload:a,ref:l}=e,c=()=>{this.encode(e,m=>{var g;(g=this.conn)===null||g===void 0||g.send(m)})};this.log("push",`${t} ${r} (${l})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(LA,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},gh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:l,ref:c}=t,m=c?`(${c})`:"",g=l.status||"";this.log("receive",`${g} ${r} ${a} ${m}`.trim(),l),this.channels.filter(p=>p._isMember(r)).forEach(p=>p._trigger(a,l,c)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ji.open||this.conn.readyState===Ji.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(cr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${r}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([XA],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const a={access_token:t,version:VA};t&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(cr.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new tE(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},gh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,a,l,c,m,g,p,v,E,A,x;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:eg,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:gh.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(m=e==null?void 0:e.heartbeatCallback)!==null&&m!==void 0?m:Im,this.vsn=(g=e==null?void 0:e.vsn)!==null&&g!==void 0?g:E0,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:(j=>QA[j-1]||YA),this.vsn){case eE:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:((j,V)=>V(JSON.stringify(j))),this.decode=(E=e==null?void 0:e.decode)!==null&&E!==void 0?E:((j,V)=>V(JSON.parse(j)));break;case UA:this.encode=(A=e==null?void 0:e.encode)!==null&&A!==void 0?A:this.serializer.encode.bind(this.serializer),this.decode=(x=e==null?void 0:e.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class id extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function pt(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class WA extends id{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class rg extends id{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const $g=s=>s?(...e)=>s(...e):(...e)=>fetch(...e),ZA=()=>Response,sg=s=>{if(Array.isArray(s))return s.map(t=>sg(t));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([t,r])=>{const a=t.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=sg(r)}),e},eR=s=>{if(typeof s!="object"||s===null)return!1;const e=Object.getPrototypeOf(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},tR=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s),Om=s=>{var e;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(e=s.error)===null||e===void 0?void 0:e.message)||JSON.stringify(s)},nR=(s,e,t)=>me(void 0,void 0,void 0,function*(){const r=yield ZA();s instanceof r&&!(t!=null&&t.noResolveJson)?s.json().then(a=>{const l=s.status||500,c=(a==null?void 0:a.statusCode)||l+"";e(new WA(Om(a),l,c))}).catch(a=>{e(new rg(Om(a),a))}):e(new rg(Om(s),s))}),rR=(s,e,t,r)=>{const a={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"||!r?a:(eR(r)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(r)):a.body=r,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),t))};function Su(s,e,t,r,a,l){return me(this,void 0,void 0,function*(){return new Promise((c,m)=>{s(t,rR(e,r,a,l)).then(g=>{if(!g.ok)throw g;return r!=null&&r.noResolveJson?g:g.json()}).then(g=>c(g)).catch(g=>nR(g,m,r))})})}function hu(s,e,t,r){return me(this,void 0,void 0,function*(){return Su(s,"GET",e,t,r)})}function ur(s,e,t,r,a){return me(this,void 0,void 0,function*(){return Su(s,"POST",e,r,a,t)})}function ig(s,e,t,r,a){return me(this,void 0,void 0,function*(){return Su(s,"PUT",e,r,a,t)})}function sR(s,e,t,r){return me(this,void 0,void 0,function*(){return Su(s,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function Fg(s,e,t,r,a){return me(this,void 0,void 0,function*(){return Su(s,"DELETE",e,r,a,t)})}class iR{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return me(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pt(e))return{data:null,error:e};throw e}})}}var sE;class aR{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[sE]="BlobDownloadBuilder",this.promise=null}asStream(){return new iR(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return me(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pt(e))return{data:null,error:e};throw e}})}}sE=Symbol.toStringTag;const oR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},R0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class lR{constructor(e,t={},r,a){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=$g(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,a){return me(this,void 0,void 0,function*(){try{let l;const c=Object.assign(Object.assign({},R0),a);let m=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const g=c.metadata;typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),g&&l.append("metadata",this.encodeMetadata(g)),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),g&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(g))):(l=r,m["cache-control"]=`max-age=${c.cacheControl}`,m["content-type"]=c.contentType,g&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(g))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),a!=null&&a.headers&&(m=Object.assign(Object.assign({},m),a.headers));const p=this._removeEmptyFolders(t),v=this._getFinalPath(p),E=yield(e=="PUT"?ig:ur)(this.fetch,`${this.url}/object/${v}`,l,Object.assign({headers:m},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:p,id:E.Id,fullPath:E.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(pt(l))return{data:null,error:l};throw l}})}upload(e,t,r){return me(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,a){return me(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),c=this._getFinalPath(l),m=new URL(this.url+`/object/upload/sign/${c}`);m.searchParams.set("token",t);try{let g;const p=Object.assign({upsert:R0.upsert},a),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&r instanceof Blob?(g=new FormData,g.append("cacheControl",p.cacheControl),g.append("",r)):typeof FormData<"u"&&r instanceof FormData?(g=r,g.append("cacheControl",p.cacheControl)):(g=r,v["cache-control"]=`max-age=${p.cacheControl}`,v["content-type"]=p.contentType);const E=yield ig(this.fetch,m.toString(),g,{headers:v});return{data:{path:l,fullPath:E.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(pt(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(e,t){return me(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const a=Object.assign({},this.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const l=yield ur(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),c=new URL(this.url+l.url),m=c.searchParams.get("token");if(!m)throw new id("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:m},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}})}update(e,t,r){return me(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return me(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(pt(a))return{data:null,error:a};throw a}})}copy(e,t,r){return me(this,void 0,void 0,function*(){try{return{data:{path:(yield ur(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(pt(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,r){return me(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield ur(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const c=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(pt(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,r){return me(this,void 0,void 0,function*(){try{const a=yield ur(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(pt(a))return{data:null,error:a};throw a}})}download(e,t){const a=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),c=l?`?${l}`:"",m=this._getFinalPath(e),g=()=>hu(this.fetch,`${this.url}/${a}/${m}${c}`,{headers:this.headers,noResolveJson:!0});return new aR(g,this.shouldThrowOnError)}info(e){return me(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield hu(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:sg(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}})}exists(e){return me(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield sR(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pt(r)&&r instanceof rg){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),a=[],l=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";l!==""&&a.push(l);const m=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",g=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});g!==""&&a.push(g);let p=a.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${r}${p}`)}}}remove(e){return me(this,void 0,void 0,function*(){try{return{data:yield Fg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pt(t))return{data:null,error:t};throw t}})}list(e,t,r){return me(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},oR),t),{prefix:e||""});return{data:yield ur(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(pt(a))return{data:null,error:a};throw a}})}listV2(e,t){return me(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield ur(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const iE="2.86.0",aE={"X-Client-Info":`storage-js/${iE}`};class uR{constructor(e,t={},r,a){this.shouldThrowOnError=!1;const l=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},aE),t),this.fetch=$g(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return me(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield hu(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pt(t))return{data:null,error:t};throw t}})}getBucket(e){return me(this,void 0,void 0,function*(){try{return{data:yield hu(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pt(t))return{data:null,error:t};throw t}})}createBucket(e){return me(this,arguments,void 0,function*(t,r={public:!1}){try{return{data:yield ur(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(pt(a))return{data:null,error:a};throw a}})}updateBucket(e,t){return me(this,void 0,void 0,function*(){try{return{data:yield ig(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return me(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return me(this,void 0,void 0,function*(){try{return{data:yield Fg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pt(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}var du=class extends Error{constructor(s,e){var t;super(s),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function cR(s,e,t){const r=new URL(e,s);if(t)for(const[a,l]of Object.entries(t))l!==void 0&&r.searchParams.set(a,l);return r.toString()}async function hR(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function dR(s){const e=s.fetchImpl??globalThis.fetch;return{async request({method:t,path:r,query:a,body:l,headers:c}){const m=cR(s.baseUrl,r,a),g=await hR(s.auth),p=await e(m,{method:t,headers:{...l?{"Content-Type":"application/json"}:{},...g,...c},body:l?JSON.stringify(l):void 0}),v=await p.text(),E=(p.headers.get("content-type")||"").includes("application/json"),A=E&&v?JSON.parse(v):v;if(!p.ok){const x=E?A:void 0,j=x==null?void 0:x.error;throw new du((j==null?void 0:j.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:j==null?void 0:j.type,icebergCode:j==null?void 0:j.code,details:x})}return{status:p.status,headers:p.headers,data:A}}}}function ph(s){return s.join("")}var fR=class{constructor(s,e=""){this.client=s,this.prefix=e}async listNamespaces(s){const e=s?{parent:ph(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(s,e){const t={namespace:s.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ph(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ph(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ph(s.namespace)}`}),!0}catch(e){if(e instanceof du&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(s,e){try{return await this.createNamespace(s,e)}catch(t){if(t instanceof du&&t.status===409)return;throw t}}};function no(s){return s.join("")}var mR=class{constructor(s,e="",t){this.client=s,this.prefix=e,this.accessDelegation=t}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${no(s.namespace)}/tables`})).data.identifiers}async createTable(s,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${no(s.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(s,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${no(s.namespace)}/tables/${s.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(s,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${no(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(s){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${no(s.namespace)}/tables/${s.name}`,headers:e})).data.metadata}async tableExists(s){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${no(s.namespace)}/tables/${s.name}`,headers:e}),!0}catch(t){if(t instanceof du&&t.status===404)return!1;throw t}}async createTableIfNotExists(s,e){try{return await this.createTable(s,e)}catch(t){if(t instanceof du&&t.status===409)return await this.loadTable({namespace:s.namespace,name:e.name});throw t}}},gR=class{constructor(s){var r;let e="v1";s.catalogName&&(e+=`/${s.catalogName}`);const t=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=dR({baseUrl:t,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=(r=s.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new fR(this.client,e),this.tableOps=new mR(this.client,e,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,e){return this.namespaceOps.createNamespace(s,e)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,e){return this.tableOps.createTable(s,e)}async updateTable(s,e){return this.tableOps.updateTable(s,e)}async dropTable(s,e){await this.tableOps.dropTable(s,e)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,e){return this.namespaceOps.createNamespaceIfNotExists(s,e)}async createTableIfNotExists(s,e){return this.tableOps.createTableIfNotExists(s,e)}};class pR{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},aE),t),this.fetch=$g(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return me(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pt(t))return{data:null,error:t};throw t}})}listBuckets(e){return me(this,void 0,void 0,function*(){try{const t=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&t.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&t.set("sortOrder",e.sortOrder),e!=null&&e.search&&t.set("search",e.search);const r=t.toString(),a=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield hu(this.fetch,a,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return me(this,void 0,void 0,function*(){try{return{data:yield Fg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(pt(t))return{data:null,error:t};throw t}})}from(e){if(!tR(e))throw new id("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new gR({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>me(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const Gg={"X-Client-Info":`storage-js/${iE}`,"Content-Type":"application/json"};class oE extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function kn(s){return typeof s=="object"&&s!==null&&"__isStorageVectorsError"in s}class Nm extends oE{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class yR extends oE{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var x0;(function(s){s.InternalError="InternalError",s.S3VectorConflictException="S3VectorConflictException",s.S3VectorNotFoundException="S3VectorNotFoundException",s.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",s.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",s.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(x0||(x0={}));const Kg=s=>s?(...e)=>s(...e):(...e)=>fetch(...e),_R=s=>{if(typeof s!="object"||s===null)return!1;const e=Object.getPrototypeOf(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},C0=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),vR=(s,e,t)=>me(void 0,void 0,void 0,function*(){if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!(t!=null&&t.noResolveJson)){const a=s.status||500,l=s;if(typeof l.json=="function")l.json().then(c=>{const m=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||a+"";e(new Nm(C0(c),a,m))}).catch(()=>{const c=a+"",m=l.statusText||`HTTP ${a} error`;e(new Nm(m,a,c))});else{const c=a+"",m=l.statusText||`HTTP ${a} error`;e(new Nm(m,a,c))}}else e(new yR(C0(s),s))}),bR=(s,e,t,r)=>{const a={method:s,headers:(e==null?void 0:e.headers)||{}};return r?(_R(r)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(r)):a.body=r,Object.assign(Object.assign({},a),t)):a};function wR(s,e,t,r,a,l){return me(this,void 0,void 0,function*(){return new Promise((c,m)=>{s(t,bR(e,r,a,l)).then(g=>{if(!g.ok)throw g;if(r!=null&&r.noResolveJson)return g;const p=g.headers.get("content-type");return!p||!p.includes("application/json")?{}:g.json()}).then(g=>c(g)).catch(g=>vR(g,m,r))})})}function Mn(s,e,t,r,a){return me(this,void 0,void 0,function*(){return wR(s,"POST",e,r,a,t)})}class ER{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Gg),t),this.fetch=Kg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return me(this,void 0,void 0,function*(){try{return{data:(yield Mn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(kn(t))return{data:null,error:t};throw t}})}getIndex(e,t){return me(this,void 0,void 0,function*(){try{return{data:yield Mn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}listIndexes(e){return me(this,void 0,void 0,function*(){try{return{data:yield Mn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(kn(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return me(this,void 0,void 0,function*(){try{return{data:(yield Mn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kn(r))return{data:null,error:r};throw r}})}}class TR{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Gg),t),this.fetch=Kg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return me(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Mn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(kn(t))return{data:null,error:t};throw t}})}getVectors(e){return me(this,void 0,void 0,function*(){try{return{data:yield Mn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(kn(t))return{data:null,error:t};throw t}})}listVectors(e){return me(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Mn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(kn(t))return{data:null,error:t};throw t}})}queryVectors(e){return me(this,void 0,void 0,function*(){try{return{data:yield Mn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(kn(t))return{data:null,error:t};throw t}})}deleteVectors(e){return me(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Mn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(kn(t))return{data:null,error:t};throw t}})}}class SR{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Gg),t),this.fetch=Kg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return me(this,void 0,void 0,function*(){try{return{data:(yield Mn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(kn(t))return{data:null,error:t};throw t}})}getBucket(e){return me(this,void 0,void 0,function*(){try{return{data:yield Mn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(kn(t))return{data:null,error:t};throw t}})}listBuckets(){return me(this,arguments,void 0,function*(e={}){try{return{data:yield Mn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(kn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return me(this,void 0,void 0,function*(){try{return{data:(yield Mn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(kn(t))return{data:null,error:t};throw t}})}}class AR extends SR{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new RR(this.url,this.headers,e,this.fetch)}createBucket(e){const t=Object.create(null,{createBucket:{get:()=>super.createBucket}});return me(this,void 0,void 0,function*(){return t.createBucket.call(this,e)})}getBucket(e){const t=Object.create(null,{getBucket:{get:()=>super.getBucket}});return me(this,void 0,void 0,function*(){return t.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return me(this,arguments,void 0,function*(t={}){return e.listBuckets.call(this,t)})}deleteBucket(e){const t=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return me(this,void 0,void 0,function*(){return t.deleteBucket.call(this,e)})}}class RR extends ER{constructor(e,t,r,a){super(e,t,a),this.vectorBucketName=r}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return me(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return me(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return me(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return me(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new xR(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class xR extends TR{constructor(e,t,r,a,l){super(e,t,l),this.vectorBucketName=r,this.indexName=a}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return me(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return me(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return me(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return me(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return me(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class CR extends uR{constructor(e,t={},r,a){super(e,t,r,a)}from(e){return new lR(this.url,this.headers,e,this.fetch)}get vectors(){return new AR(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new pR(this.url+"/iceberg",this.headers,this.fetch)}}const IR="2.86.0";let Zl="";typeof Deno<"u"?Zl="deno":typeof document<"u"?Zl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Zl="react-native":Zl="node";const OR={"X-Client-Info":`supabase-js-${Zl}/${IR}`},NR={headers:OR},DR={schema:"public"},jR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},kR={},MR=s=>s?(...e)=>s(...e):(...e)=>fetch(...e),PR=()=>Headers,VR=(s,e,t)=>{const r=MR(t),a=PR();return async(l,c)=>{var m;const g=(m=await e())!==null&&m!==void 0?m:s;let p=new a(c==null?void 0:c.headers);return p.has("apikey")||p.set("apikey",s),p.has("Authorization")||p.set("Authorization",`Bearer ${g}`),r(l,Object.assign(Object.assign({},c),{headers:p}))}};function UR(s){return s.endsWith("/")?s:s+"/"}function LR(s,e){var t,r;const{db:a,auth:l,realtime:c,global:m}=s,{db:g,auth:p,realtime:v,global:E}=e,A={db:Object.assign(Object.assign({},g),a),auth:Object.assign(Object.assign({},p),l),realtime:Object.assign(Object.assign({},v),c),storage:{},global:Object.assign(Object.assign(Object.assign({},E),m),{headers:Object.assign(Object.assign({},(t=E==null?void 0:E.headers)!==null&&t!==void 0?t:{}),(r=m==null?void 0:m.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return s.accessToken?A.accessToken=s.accessToken:delete A.accessToken,A}function zR(s){const e=s==null?void 0:s.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(UR(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const lE="2.86.0",lo=30*1e3,ag=3,Dm=ag*lo,BR="http://localhost:9999",qR="supabase.auth.token",HR={"X-Client-Info":`gotrue-js/${lE}`},og="X-Supabase-Api-Version",uE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},$R=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,FR=600*1e3;class fu extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function _e(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class GR extends fu{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function KR(s){return _e(s)&&s.name==="AuthApiError"}class Zi extends fu{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class pi extends fu{constructor(e,t,r,a){super(e,r,a),this.name=t,this.status=r}}class jn extends pi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function QR(s){return _e(s)&&s.name==="AuthSessionMissingError"}class ro extends pi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class yh extends pi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class _h extends pi{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function YR(s){return _e(s)&&s.name==="AuthImplicitGrantRedirectError"}class I0 extends pi{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class lg extends pi{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function jm(s){return _e(s)&&s.name==="AuthRetryableFetchError"}class O0 extends pi{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class ug extends pi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Vh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),N0=` 	
\r=`.split(""),XR=(()=>{const s=new Array(128);for(let e=0;e<s.length;e+=1)s[e]=-1;for(let e=0;e<N0.length;e+=1)s[N0[e].charCodeAt(0)]=-2;for(let e=0;e<Vh.length;e+=1)s[Vh[e].charCodeAt(0)]=e;return s})();function D0(s,e,t){if(s!==null)for(e.queue=e.queue<<8|s,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Vh[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Vh[r]),e.queuedBits-=6}}function cE(s,e,t){const r=XR[s];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function j0(s){const e=[],t=c=>{e.push(String.fromCodePoint(c))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=c=>{ZR(c,r,t)};for(let c=0;c<s.length;c+=1)cE(s.charCodeAt(c),a,l);return e.join("")}function JR(s,e){if(s<=127){e(s);return}else if(s<=2047){e(192|s>>6),e(128|s&63);return}else if(s<=65535){e(224|s>>12),e(128|s>>6&63),e(128|s&63);return}else if(s<=1114111){e(240|s>>18),e(128|s>>12&63),e(128|s>>6&63),e(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function WR(s,e){for(let t=0;t<s.length;t+=1){let r=s.charCodeAt(t);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(s.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}JR(r,e)}}function ZR(s,e,t){if(e.utf8seq===0){if(s<=127){t(s);return}for(let r=1;r<6;r+=1)if((s>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=s&31;else if(e.utf8seq===3)e.codepoint=s&15;else if(e.utf8seq===4)e.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|s&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function po(s){const e=[],t={queue:0,queuedBits:0},r=a=>{e.push(a)};for(let a=0;a<s.length;a+=1)cE(s.charCodeAt(a),t,r);return new Uint8Array(e)}function ex(s){const e=[];return WR(s,t=>e.push(t)),new Uint8Array(e)}function ea(s){const e=[],t={queue:0,queuedBits:0},r=a=>{e.push(a)};return s.forEach(a=>D0(a,t,r)),D0(null,t,r),e.join("")}function tx(s){return Math.round(Date.now()/1e3)+s}function nx(){return Symbol("auth-callback")}const en=()=>typeof window<"u"&&typeof document<"u",Ki={tested:!1,writable:!1},hE=()=>{if(!en())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ki.tested)return Ki.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Ki.tested=!0,Ki.writable=!0}catch{Ki.tested=!0,Ki.writable=!1}return Ki.writable};function rx(s){const e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return t.searchParams.forEach((r,a)=>{e[a]=r}),e}const dE=s=>s?(...e)=>s(...e):(...e)=>fetch(...e),sx=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",uo=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},Qi=async(s,e)=>{const t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Js=async(s,e)=>{await s.removeItem(e)};let fE=class mE{constructor(){this.promise=new mE.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}};fE.promiseConstructor=Promise;function km(s){const e=s.split(".");if(e.length!==3)throw new ug("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!$R.test(e[r]))throw new ug("JWT not in base64url format");return{header:JSON.parse(j0(e[0])),payload:JSON.parse(j0(e[1])),signature:po(e[2]),raw:{header:e[0],payload:e[1]}}}async function ix(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function ax(s,e){return new Promise((r,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await s(l);if(!e(l,null,c)){r(c);return}}catch(c){if(!e(l,c)){a(c);return}}})()})}function ox(s){return("0"+s.toString(16)).substr(-2)}function lx(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let a="";for(let l=0;l<56;l++)a+=t.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(e),Array.from(e,ox).join("")}async function ux(s){const t=new TextEncoder().encode(s),r=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(r);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function cx(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const t=await ux(s);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function so(s,e,t=!1){const r=lx();let a=r;t&&(a+="/PASSWORD_RECOVERY"),await uo(s,`${e}-code-verifier`,a);const l=await cx(r);return[l,r===l?"plain":"s256"]}const hx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function dx(s){const e=s.headers.get(og);if(!e||!e.match(hx))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function fx(s){if(!s)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(s<=e)throw new Error("JWT has expired")}function mx(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const gx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function io(s){if(!gx.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Mm(){const s={};return new Proxy(s,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function px(s,e){return new Proxy(s,{get:(t,r,a)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const l=r.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,r,a)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,r,a)}})}function k0(s){return JSON.parse(JSON.stringify(s))}const Yi=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),yx=[502,503,504];async function M0(s){var e;if(!sx(s))throw new lg(Yi(s),0);if(yx.includes(s.status))throw new lg(Yi(s),s.status);let t;try{t=await s.json()}catch(l){throw new Zi(Yi(l),l)}let r;const a=dx(s);if(a&&a.getTime()>=uE["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new O0(Yi(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new jn}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new O0(Yi(t),s.status,t.weak_password.reasons);throw new GR(Yi(t),s.status||500,r)}const _x=(s,e,t,r)=>{const a={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),t))};async function Se(s,e,t,r){var a;const l=Object.assign({},r==null?void 0:r.headers);l[og]||(l[og]=uE["2024-01-01"].name),r!=null&&r.jwt&&(l.Authorization=`Bearer ${r.jwt}`);const c=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(c.redirect_to=r.redirectTo);const m=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",g=await vx(s,e,t+m,{headers:l,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(g):{data:Object.assign({},g),error:null}}async function vx(s,e,t,r,a,l){const c=_x(e,r,a,l);let m;try{m=await s(t,Object.assign({},c))}catch(g){throw console.error(g),new lg(Yi(g),0)}if(m.ok||await M0(m),r!=null&&r.noResolveJson)return m;try{return await m.json()}catch(g){await M0(g)}}function lr(s){var e;let t=null;Ex(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=tx(s.expires_in)));const r=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:r},error:null}}function P0(s){const e=lr(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=s.weak_password),e}function Zs(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function bx(s){return{data:s,error:null}}function wx(s){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:a,verification_type:l}=s,c=Po(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:e,email_otp:t,hashed_token:r,redirect_to:a,verification_type:l},g=Object.assign({},c);return{data:{properties:m,user:g},error:null}}function V0(s){return s}function Ex(s){return s.access_token&&s.refresh_token&&s.expires_in}const Pm=["global","local","others"];class Tx{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=dE(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Pm[0]){if(Pm.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Pm.join(", ")}`);try{return await Se(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Se(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Zs})}catch(r){if(_e(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Po(e,["options"]),a=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await Se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:wx,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(_e(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Se(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Zs})}catch(t){if(_e(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,a,l,c,m,g;try{const p={nextPage:null,lastPage:0,total:0},v=await Se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:V0});if(v.error)throw v.error;const E=await v.json(),A=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,x=(g=(m=v.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&g!==void 0?g:[];return x.length>0&&(x.forEach(j=>{const V=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(j.split(";")[1].split("=")[1]);p[`${k}Page`]=V}),p.total=parseInt(A)),{data:Object.assign(Object.assign({},E),p),error:null}}catch(p){if(_e(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){io(e);try{return await Se(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Zs})}catch(t){if(_e(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){io(e);try{return await Se(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Zs})}catch(r){if(_e(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){io(e);try{return await Se(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Zs})}catch(r){if(_e(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){io(e.userId);try{const{data:t,error:r}=await Se(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:r}}catch(t){if(_e(t))return{data:null,error:t};throw t}}async _deleteFactor(e){io(e.userId),io(e.id);try{return{data:await Se(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(_e(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,a,l,c,m,g;try{const p={nextPage:null,lastPage:0,total:0},v=await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:V0});if(v.error)throw v.error;const E=await v.json(),A=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,x=(g=(m=v.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&g!==void 0?g:[];return x.length>0&&(x.forEach(j=>{const V=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(j.split(";")[1].split("=")[1]);p[`${k}Page`]=V}),p.total=parseInt(A)),{data:Object.assign(Object.assign({},E),p),error:null}}catch(p){if(_e(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(_e(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(_e(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Se(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(_e(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Se(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(_e(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(_e(t))return{data:null,error:t};throw t}}}function U0(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}const ao={debug:!!(globalThis&&hE()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class gE extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Sx extends gE{}async function Ax(s,e,t){ao.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ao.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){ao.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,a.name);try{return await t()}finally{ao.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,a.name)}}else{if(e===0)throw ao.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new Sx(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(ao.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function Rx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function pE(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function xx(s){return parseInt(s,16)}function Cx(s){const e=new TextEncoder().encode(s);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Ix(s){var e;const{chainId:t,domain:r,expirationTime:a,issuedAt:l=new Date,nonce:c,notBefore:m,requestId:g,resources:p,scheme:v,uri:E,version:A}=s;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!E)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(A!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${A}`);if(!((e=s.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const x=pE(s.address),j=v?`${v}://${r}`:r,V=s.statement?`${s.statement}
`:"",k=`${j} wants you to sign in with your Ethereum account:
${x}

${V}`;let H=`URI: ${E}
Version: ${A}
Chain ID: ${t}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(a&&(H+=`
Expiration Time: ${a.toISOString()}`),m&&(H+=`
Not Before: ${m.toISOString()}`),g&&(H+=`
Request ID: ${g}`),p){let J=`
Resources:`;for(const Y of p){if(!Y||typeof Y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${Y}`);J+=`
- ${Y}`}H+=J}return`${k}
${H}`}class Pt extends Error{constructor({message:e,code:t,cause:r,name:a}){var l;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(l=a??(r instanceof Error?r.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=t}}class Uh extends Pt{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function Ox({error:s,options:e}){var t,r,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Pt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((t=l.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Pt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(e.mediation==="conditional"&&((r=l.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Pt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Pt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new Pt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new Pt({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return l.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new Pt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new Pt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const c=window.location.hostname;if(yE(c)){if(l.rp.id!==c)return new Pt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new Pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Pt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new Pt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new Pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function Nx({error:s,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Pt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new Pt({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const r=window.location.hostname;if(yE(r)){if(t.rpId!==r)return new Pt({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new Pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new Pt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new Pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class Dx{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const jx=new Dx;function kx(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:e,user:t,excludeCredentials:r}=s,a=Po(s,["challenge","user","excludeCredentials"]),l=po(e).buffer,c=Object.assign(Object.assign({},t),{id:po(t.id).buffer}),m=Object.assign(Object.assign({},a),{challenge:l,user:c});if(r&&r.length>0){m.excludeCredentials=new Array(r.length);for(let g=0;g<r.length;g++){const p=r[g];m.excludeCredentials[g]=Object.assign(Object.assign({},p),{id:po(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return m}function Mx(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:e,allowCredentials:t}=s,r=Po(s,["challenge","allowCredentials"]),a=po(e).buffer,l=Object.assign(Object.assign({},r),{challenge:a});if(t&&t.length>0){l.allowCredentials=new Array(t.length);for(let c=0;c<t.length;c++){const m=t[c];l.allowCredentials[c]=Object.assign(Object.assign({},m),{id:po(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return l}function Px(s){var e;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const t=s;return{id:s.id,rawId:s.id,response:{attestationObject:ea(new Uint8Array(s.response.attestationObject)),clientDataJSON:ea(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Vx(s){var e;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const t=s,r=s.getClientExtensionResults(),a=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:ea(new Uint8Array(a.authenticatorData)),clientDataJSON:ea(new Uint8Array(a.clientDataJSON)),signature:ea(new Uint8Array(a.signature)),userHandle:a.userHandle?ea(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function yE(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function L0(){var s,e;return!!(en()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Ux(s){try{const e=await navigator.credentials.create(s);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Uh("Browser returned unexpected credential type",e)}:{data:null,error:new Uh("Empty credential response",e)}}catch(e){return{data:null,error:Ox({error:e,options:s})}}}async function Lx(s){try{const e=await navigator.credentials.get(s);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Uh("Browser returned unexpected credential type",e)}:{data:null,error:new Uh("Empty credential response",e)}}catch(e){return{data:null,error:Nx({error:e,options:s})}}}const zx={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Bx={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Lh(...s){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),t=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),r={};for(const a of s)if(a)for(const l in a){const c=a[l];if(c!==void 0)if(Array.isArray(c))r[l]=c;else if(t(c))r[l]=c;else if(e(c)){const m=r[l];e(m)?r[l]=Lh(m,c):r[l]=Lh(c)}else r[l]=c}return r}function qx(s,e){return Lh(zx,s,e||{})}function Hx(s,e){return Lh(Bx,s,e||{})}class $x{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:a},l){try{const{data:c,error:m}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!c)return{data:null,error:m};const g=a??jx.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:p}=c.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${r}`),p.displayName||(p.displayName=p.name)}switch(c.webauthn.type){case"create":{const p=qx(c.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:v,error:E}=await Ux({publicKey:p,signal:g});return v?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:E}}case"request":{const p=Hx(c.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:v,error:E}=await Lx(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:p,signal:g}));return v?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:E}}}}catch(c){return _e(c)?{data:null,error:c}:{data:null,error:new Zi("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!t)return{data:null,error:new fu("rpId is required for WebAuthn authentication")};try{if(!L0())return{data:null,error:new Zi("Browser does not support WebAuthn",null)};const{data:c,error:m}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:a},{request:l});if(!c)return{data:null,error:m};const{webauthn:g}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:g.type,rpId:t,rpOrigins:r,credential_response:g.credential_response}})}catch(c){return _e(c)?{data:null,error:c}:{data:null,error:new Zi("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!t)return{data:null,error:new fu("rpId is required for WebAuthn registration")};try{if(!L0())return{data:null,error:new Zi("Browser does not support WebAuthn",null)};const{data:c,error:m}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(v=>{var E;return(E=v.data)===null||E===void 0?void 0:E.all.find(A=>A.factor_type==="webauthn"&&A.friendly_name===e&&A.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:m};const{data:g,error:p}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:a},{create:l});return g?this._verify({factorId:c.id,challengeId:g.challengeId,webauthn:{rpId:t,rpOrigins:r,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:p}}catch(c){return _e(c)?{data:null,error:c}:{data:null,error:new Zi("Unexpected error in register",c)}}}}Rx();const Fx={url:BR,storageKey:qR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:HR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function z0(s,e,t){return await t()}const oo={};class mu{get jwks(){var e,t;return(t=(e=oo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){oo[this.storageKey]=Object.assign(Object.assign({},oo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=oo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){oo[this.storageKey]=Object.assign(Object.assign({},oo[this.storageKey]),{cachedAt:e})}constructor(e){var t,r,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},Fx),e);if(this.storageKey=l.storageKey,this.instanceID=(t=mu.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,mu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&en()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new Tx({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=dE(l.fetch),this.lock=l.lock||z0,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:en()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Ax:this.lock=z0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new $x(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:hE()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=U0(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=U0(this.memoryStorage)),en()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${lE}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},r="none";if(en()&&(t=rx(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),en()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:l}=await this._getSessionFromURL(t,r);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),YR(l)){const g=(e=l.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:m}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",m),await this._saveSession(c),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return _e(t)?this._returnResult({error:t}):this._returnResult({error:new Zi("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,a;try{const l=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:lr}),{data:c,error:m}=l;if(m||!c)return this._returnResult({data:{user:null,session:null},error:m});const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(l){if(_e(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var t,r,a;try{let l;if("email"in e){const{email:v,password:E,options:A}=e;let x=null,j=null;this.flowType==="pkce"&&([x,j]=await so(this.storage,this.storageKey)),l=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:A==null?void 0:A.emailRedirectTo,body:{email:v,password:E,data:(t=A==null?void 0:A.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},code_challenge:x,code_challenge_method:j},xform:lr})}else if("phone"in e){const{phone:v,password:E,options:A}=e;l=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:E,data:(r=A==null?void 0:A.data)!==null&&r!==void 0?r:{},channel:(a=A==null?void 0:A.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken}},xform:lr})}else throw new yh("You must provide either an email or phone number and a password");const{data:c,error:m}=l;if(m||!c)return this._returnResult({data:{user:null,session:null},error:m});const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(l){if(_e(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let t;if("email"in e){const{email:l,password:c,options:m}=e;t=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:P0})}else if("phone"in e){const{phone:l,password:c,options:m}=e;t=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:P0})}else throw new yh("You must provide either an email or phone number and a password");const{data:r,error:a}=t;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!r||!r.session||!r.user){const l=new ro;return this._returnResult({data:{user:null,session:null},error:l})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(t){if(_e(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,r,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,a,l,c,m,g,p,v,E,A;let x,j;if("message"in e)x=e.message,j=e.signature;else{const{chain:V,wallet:k,statement:H,options:J}=e;let Y;if(en())if(typeof k=="object")Y=k;else{const O=window;if("ethereum"in O&&typeof O.ethereum=="object"&&"request"in O.ethereum&&typeof O.ethereum.request=="function")Y=O.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(J!=null&&J.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Y=k}const ae=new URL((t=J==null?void 0:J.url)!==null&&t!==void 0?t:window.location.href),we=await Y.request({method:"eth_requestAccounts"}).then(O=>O).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!we||we.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const ce=pE(we[0]);let I=(r=J==null?void 0:J.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!I){const O=await Y.request({method:"eth_chainId"});I=xx(O)}const C={domain:ae.host,address:ce,statement:H,uri:ae.href,version:"1",chainId:I,nonce:(a=J==null?void 0:J.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(l=J==null?void 0:J.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(m=J==null?void 0:J.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(g=J==null?void 0:J.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(p=J==null?void 0:J.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(v=J==null?void 0:J.signInWithEthereum)===null||v===void 0?void 0:v.resources};x=Ix(C),j=await Y.request({method:"personal_sign",params:[Cx(x),ce]})}try{const{data:V,error:k}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:j},!((E=e.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(A=e.options)===null||A===void 0?void 0:A.captchaToken}}:null),xform:lr});if(k)throw k;if(!V||!V.session||!V.user){const H=new ro;return this._returnResult({data:{user:null,session:null},error:H})}return V.session&&(await this._saveSession(V.session),await this._notifyAllSubscribers("SIGNED_IN",V.session)),this._returnResult({data:Object.assign({},V),error:k})}catch(V){if(_e(V))return this._returnResult({data:{user:null,session:null},error:V});throw V}}async signInWithSolana(e){var t,r,a,l,c,m,g,p,v,E,A,x;let j,V;if("message"in e)j=e.message,V=e.signature;else{const{chain:k,wallet:H,statement:J,options:Y}=e;let ae;if(en())if(typeof H=="object")ae=H;else{const ce=window;if("solana"in ce&&typeof ce.solana=="object"&&("signIn"in ce.solana&&typeof ce.solana.signIn=="function"||"signMessage"in ce.solana&&typeof ce.solana.signMessage=="function"))ae=ce.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof H!="object"||!(Y!=null&&Y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ae=H}const we=new URL((t=Y==null?void 0:Y.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in ae&&ae.signIn){const ce=await ae.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},Y==null?void 0:Y.signInWithSolana),{version:"1",domain:we.host,uri:we.href}),J?{statement:J}:null));let I;if(Array.isArray(ce)&&ce[0]&&typeof ce[0]=="object")I=ce[0];else if(ce&&typeof ce=="object"&&"signedMessage"in ce&&"signature"in ce)I=ce;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)j=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),V=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ae)||typeof ae.signMessage!="function"||!("publicKey"in ae)||typeof ae!="object"||!ae.publicKey||!("toBase58"in ae.publicKey)||typeof ae.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${we.host} wants you to sign in with your Solana account:`,ae.publicKey.toBase58(),...J?["",J,""]:[""],"Version: 1",`URI: ${we.href}`,`Issued At: ${(a=(r=Y==null?void 0:Y.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=Y==null?void 0:Y.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${Y.signInWithSolana.notBefore}`]:[],...!((c=Y==null?void 0:Y.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${Y.signInWithSolana.expirationTime}`]:[],...!((m=Y==null?void 0:Y.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${Y.signInWithSolana.chainId}`]:[],...!((g=Y==null?void 0:Y.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${Y.signInWithSolana.nonce}`]:[],...!((p=Y==null?void 0:Y.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${Y.signInWithSolana.requestId}`]:[],...!((E=(v=Y==null?void 0:Y.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||E===void 0)&&E.length?["Resources",...Y.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const ce=await ae.signMessage(new TextEncoder().encode(j),"utf8");if(!ce||!(ce instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");V=ce}}try{const{data:k,error:H}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:ea(V)},!((A=e.options)===null||A===void 0)&&A.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:lr});if(H)throw H;if(!k||!k.session||!k.user){const J=new ro;return this._returnResult({data:{user:null,session:null},error:J})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:H})}catch(k){if(_e(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async _exchangeCodeForSession(e){const t=await Qi(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(t??"").split("/");try{const{data:l,error:c}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:lr});if(await Js(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const m=new ro;return this._returnResult({data:{user:null,session:null,redirectType:null},error:m})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:c})}catch(l){if(_e(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:t,provider:r,token:a,access_token:l,nonce:c}=e,m=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:lr}),{data:g,error:p}=m;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!g||!g.session||!g.user){const v=new ro;return this._returnResult({data:{user:null,session:null},error:v})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:p})}catch(t){if(_e(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,r,a,l,c;try{if("email"in e){const{email:m,options:g}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await so(this.storage,this.storageKey));const{error:E}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(t=g==null?void 0:g.data)!==null&&t!==void 0?t:{},create_user:(r=g==null?void 0:g.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:p,code_challenge_method:v},redirectTo:g==null?void 0:g.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:E})}if("phone"in e){const{phone:m,options:g}=e,{data:p,error:v}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(a=g==null?void 0:g.data)!==null&&a!==void 0?a:{},create_user:(l=g==null?void 0:g.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(c=g==null?void 0:g.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:v})}throw new yh("You must provide either an email or phone number.")}catch(m){if(_e(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async verifyOtp(e){var t,r;try{let a,l;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,l=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:c,error:m}=await Se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:lr});if(m)throw m;if(!c)throw new Error("An error occurred on token verification.");const g=c.session,p=c.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(a){if(_e(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var t,r,a,l,c;try{let m=null,g=null;this.flowType==="pkce"&&([m,g]=await so(this.storage,this.storageKey));const p=await Se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:m,code_challenge_method:g}),headers:this.headers,xform:bx});return!((l=p.data)===null||l===void 0)&&l.url&&en()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(m){if(_e(m))return this._returnResult({data:null,error:m});throw m}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new jn;const{error:a}=await Se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(_e(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:a,options:l}=e,{error:c}=await Se(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:r,type:a,options:l}=e,{data:c,error:m}=await Se(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:m})}throw new yh("You must provide either an email or phone number and a type")}catch(t){if(_e(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Qi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Dm:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const c=await Qi(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=Mm()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=px(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Zs}):await this._useSession(async t=>{var r,a,l;const{data:c,error:m}=t;if(m)throw m;return!(!((r=c.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new jn}:await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:Zs})})}catch(t){if(_e(t))return QR(t)&&(await this._removeSession(),await Js(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:a,error:l}=r;if(l)throw l;if(!a.session)throw new jn;const c=a.session;let m=null,g=null;this.flowType==="pkce"&&e.email!=null&&([m,g]=await so(this.storage,this.storageKey));const{data:p,error:v}=await Se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:m,code_challenge_method:g}),jwt:c.access_token,xform:Zs});if(v)throw v;return c.user=p.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(r){if(_e(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new jn;const t=Date.now()/1e3;let r=t,a=!0,l=null;const{payload:c}=km(e.access_token);if(c.exp&&(r=c.exp,a=r<=t),a){const{data:m,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!m)return{data:{user:null,session:null},error:null};l=m}else{const{data:m,error:g}=await this._getUser(e.access_token);if(g)throw g;l={access_token:e.access_token,refresh_token:e.refresh_token,user:m.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(t){if(_e(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:c,error:m}=t;if(m)throw m;e=(r=c.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new jn;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(_e(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!en())throw new _h("No browser detected.");if(e.error||e.error_description||e.error_code)throw new _h(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new I0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new _h("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new I0("No code detected.");const{data:J,error:Y}=await this._exchangeCodeForSession(e.code);if(Y)throw Y;const ae=new URL(window.location.href);return ae.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ae.toString()),{data:{session:J.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:l,refresh_token:c,expires_in:m,expires_at:g,token_type:p}=e;if(!l||!m||!c||!p)throw new _h("No session defined in URL");const v=Math.round(Date.now()/1e3),E=parseInt(m);let A=v+E;g&&(A=parseInt(g));const x=A-v;x*1e3<=lo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${E}s`);const j=A-E;v-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,A,v):v-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,A,v);const{data:V,error:k}=await this._getUser(l);if(k)throw k;const H={provider_token:r,provider_refresh_token:a,access_token:l,expires_in:E,expires_at:A,refresh_token:c,token_type:p,user:V.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:H,redirectType:e.type},error:null})}catch(r){if(_e(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Qi(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:a,error:l}=t;if(l)return this._returnResult({error:l});const c=(r=a.session)===null||r===void 0?void 0:r.access_token;if(c){const{error:m}=await this.admin.signOut(c,e);if(m&&!(KR(m)&&(m.status===404||m.status===401||m.status===403)))return this._returnResult({error:m})}return e!=="others"&&(await this._removeSession(),await Js(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=nx(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,a;try{const{data:{session:l},error:c}=t;if(c)throw c;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,t={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await so(this.storage,this.storageKey,!0));try{return await Se(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(l){if(_e(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(_e(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:a}=await this._useSession(async l=>{var c,m,g,p,v;const{data:E,error:A}=l;if(A)throw A;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(m=e.options)===null||m===void 0?void 0:m.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await Se(this.fetch,"GET",x,{headers:this.headers,jwt:(v=(p=E.session)===null||p===void 0?void 0:p.access_token)!==null&&v!==void 0?v:void 0})});if(a)throw a;return en()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(_e(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:a,data:{session:l}}=t;if(a)throw a;const{options:c,provider:m,token:g,access_token:p,nonce:v}=e,E=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=l==null?void 0:l.access_token)!==null&&r!==void 0?r:void 0,body:{provider:m,id_token:g,access_token:p,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:lr}),{data:A,error:x}=E;return x?this._returnResult({data:{user:null,session:null},error:x}):!A||!A.session||!A.user?this._returnResult({data:{user:null,session:null},error:new ro}):(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("USER_UPDATED",A.session)),this._returnResult({data:A,error:x}))}catch(a){if(_e(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,a;const{data:l,error:c}=t;if(c)throw c;return await Se(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(r=l.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(_e(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await ax(async a=>(a>0&&await ix(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await Se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:lr})),(a,l)=>{const c=200*Math.pow(2,a);return l&&jm(l)&&Date.now()+c-r<lo})}catch(r){if(this._debug(t,"error",r),_e(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),en()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await Qi(this.storage,this.storageKey);if(a&&this.userStorage){let c=await Qi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await uo(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:Mm()}else if(a&&!a.user&&!a.user){const c=await Qi(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(a.user=c.user,await Js(this.storage,this.storageKey+"-user"),await uo(this.storage,this.storageKey,a)):a.user=Mm()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const l=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Dm;if(this._debug(r,`session has${l?"":" not"} expired with margin of ${Dm}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),jm(c)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:m}=await this._getUser(a.access_token);!m&&(c!=null&&c.user)?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(r,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new jn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new fE;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new jn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const m={data:l.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(l){if(this._debug(a,"error",l),_e(l)){const c={data:null,error:l};return jm(l)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(c),c}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,r=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(e,t)}catch(g){l.push(g)}});if(await Promise.all(c),l.length>0){for(let m=0;m<l.length;m+=1)console.error(l[m]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await uo(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const l=k0(a);await uo(this.storage,this.storageKey,l)}else{const a=k0(t);await uo(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Js(this.storage,this.storageKey),await Js(this.storage,this.storageKey+"-code-verifier"),await Js(this.storage,this.storageKey+"-user"),this.userStorage&&await Js(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&en()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),lo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-e)/lo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${lo}ms, refresh threshold is ${ag} ticks`),a<=ag&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof gE)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!en()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const a=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[l,c]=await so(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(m.toString())}if(r!=null&&r.queryParams){const l=new URLSearchParams(r.queryParams);a.push(l.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:a,error:l}=t;return l?this._returnResult({data:null,error:l}):await Se(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(_e(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,a;const{data:l,error:c}=t;if(c)return this._returnResult({data:null,error:c});const m=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:g,error:p}=await Se(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&g.type==="totp"&&(!((a=g==null?void 0:g.totp)===null||a===void 0)&&a.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(t){if(_e(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:a,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Px(e.webauthn.credential_response):Vx(e.webauthn.credential_response)})}:{code:e.code}),{data:m,error:g}=await Se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),this._returnResult({data:m,error:g}))})}catch(t){if(_e(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:a,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=await Se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});if(c.error)return c;const{data:m}=c;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:kx(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:Mx(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(_e(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:r},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=km(r.access_token);let c=null;l.aal&&(c=l.aal);let m=c;((t=(e=r.user.factors)===null||e===void 0?void 0:e.filter(v=>v.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(m="aal2");const p=l.amr||[];return{data:{currentLevel:c,nextLevel:m,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:r},error:a}=t;return a?this._returnResult({data:null,error:a}):r?await Se(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new jn})})}catch(t){if(_e(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:a},error:l}=r;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new jn});const c=await Se(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return c.data&&c.data.redirect_url&&en()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(_e(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:a},error:l}=r;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new jn});const c=await Se(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return c.data&&c.data.redirect_url&&en()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(_e(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;return r?this._returnResult({data:null,error:r}):t?await Se(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new jn})})}catch(e){if(_e(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:r},error:a}=t;return a?this._returnResult({data:null,error:a}):r?(await Se(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new jn})})}catch(t){if(_e(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(m=>m.kid===e);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(m=>m.kid===e),r&&this.jwks_cached_at+FR>a)return r;const{data:l,error:c}=await Se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,r=l.keys.find(m=>m.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:x,error:j}=await this.getSession();if(j||!x.session)return this._returnResult({data:null,error:j});r=x.session.access_token}const{header:a,payload:l,signature:c,raw:{header:m,payload:g}}=km(r);t!=null&&t.allowExpired||fx(l.exp);const p=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!p){const{error:x}=await this.getUser(r);if(x)throw x;return{data:{claims:l,header:a,signature:c},error:null}}const v=mx(a.alg),E=await crypto.subtle.importKey("jwk",p,v,!0,["verify"]);if(!await crypto.subtle.verify(v,E,c,ex(`${m}.${g}`)))throw new ug("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(r){if(_e(r))return this._returnResult({data:null,error:r});throw r}}}mu.nextInstanceID={};const Gx=mu;class Kx extends Gx{constructor(e){super(e)}}class Qx{constructor(e,t,r){var a,l,c;this.supabaseUrl=e,this.supabaseKey=t;const m=zR(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const g=`sb-${m.hostname.split(".")[0]}-auth-token`,p={db:DR,realtime:kR,auth:Object.assign(Object.assign({},jR),{storageKey:g}),global:NR},v=LR(r??{},p);this.storageKey=(a=v.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=v.global.headers)!==null&&l!==void 0?l:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(E,A)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(A)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=v.auth)!==null&&c!==void 0?c:{},this.headers,v.global.fetch),this.fetch=VR(t,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.accessToken&&this.accessToken().then(E=>this.realtime.setAuth(E)).catch(E=>console.warn("Failed to set initial Realtime auth token:",E)),this.rest=new kA(new URL("rest/v1",m).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new CR(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new OA(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:a,userStorage:l,storageKey:c,flowType:m,lock:g,debug:p,throwOnError:v},E,A){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Kx({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),E),storageKey:c,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:a,userStorage:l,flowType:m,lock:g,debug:p,throwOnError:v,fetch:A,hasCustomAuthorizationHeader:Object.keys(this.headers).some(j=>j.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new JA(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Yx=(s,e,t)=>new Qx(s,e,t);function Xx(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const e=s.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Xx()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Jx="https://hykypgxaegmufdothwbv.supabase.co",Wx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh5a3lwZ3hhZWdtdWZkb3Rod2J2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1NTE3NzMsImV4cCI6MjA3NzEyNzc3M30.Euzl2vfhHrxhgN-tfg2XftMaX9hEiJOorSJq16n2CRY",Ro=Yx(Jx,Wx),_E=pe.createContext(void 0),Zx=({children:s})=>{const[e,t]=pe.useState("noel");pe.useEffect(()=>{const l=localStorage.getItem("app-theme")||"noel";t(l),document.documentElement.setAttribute("data-theme",l)},[]);const r=a=>{t(a),document.documentElement.setAttribute("data-theme",a),localStorage.setItem("app-theme",a)};return b.jsx(_E.Provider,{value:{theme:e,setTheme:r},children:s})},gn=()=>{const s=pe.useContext(_E);if(s===void 0)throw new Error("useTheme must be used within a ThemeProvider");return s},e2=s=>{const{theme:e}=gn();return e==="tri-an"?b.jsx("img",{src:"https://i.postimg.cc/8PDn1wfM/favicon.png",alt:"Online Exam Icon",...s}):e==="noel"?b.jsx("img",{src:"/assets/img/gift3.png",alt:"Gift Icon",...s,className:"h-16 w-16 object-contain"}):b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:b.jsx("path",{fillRule:"evenodd",d:"M3.75 4.5a3 3 0 00-3 3v10.5a3 3 0 003 3h16.5a3 3 0 003-3V7.5a3 3 0 00-3-3H3.75zm.75 4.5a.75.75 0 01.75-.75h13.5a.75.75 0 010 1.5H5.25a.75.75 0 01-.75-.75zm0 3.75a.75.75 0 01.75-.75h6a.75.75 0 010 1.5h-6a.75.75 0 01-.75-.75zm0 2.25a.75.75 0 01.75-.75h3a.75.75 0 010 1.5h-3a.75.75 0 01-.75-.75z",clipRule:"evenodd"})})},Qg=s=>{const{theme:e}=gn();return e==="noel"?b.jsx("img",{src:"/assets/img/ball.png",alt:"Check",...s,className:`${s.className} object-contain`}):b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:b.jsx("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z",clipRule:"evenodd"})})},Yg=s=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:b.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z",clipRule:"evenodd"})}),t2=s=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:b.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 6a.75.75 0 00-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 000-1.5h-3.75V6z",clipRule:"evenodd"})}),Uo=s=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:b.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-4.28 9.22a.75.75 0 000 1.06l3 3a.75.75 0 101.06-1.06L10.81 12l1.47-1.47a.75.75 0 10-1.06-1.06l-3 3z",clipRule:"evenodd"})}),n2=s=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:b.jsx("path",{fillRule:"evenodd",d:"M16.28 11.47a.75.75 0 010 1.06l-3 3a.75.75 0 01-1.06-1.06L14.44 12l-2.22-2.22a.75.75 0 011.06-1.06l3 3z",clipRule:"evenodd"})}),r2=s=>{const{theme:e}=gn();return e==="tri-an"?b.jsx("img",{src:"https://i.postimg.cc/J0JwWn5p/Mattahan-Buuf-One-of-those-ugly-pens-you-just-find-lying-around-128.png",alt:"Pen Icon",...s}):e==="noel"?b.jsx("img",{src:"/assets/img/celebrate.png",alt:"Santa",...s,className:`${s.className} object-contain`}):b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:[b.jsx("path",{d:"M12.75 12.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"}),b.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM9 12a3 3 0 116 0 3 3 0 01-6 0zm-2.121 4.212a.75.75 0 01.688-1.228 5.253 5.253 0 018.866 0 .75.75 0 11-.688 1.228 3.753 3.753 0 00-7.49 0z",clipRule:"evenodd"})]})},s2=s=>b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:b.jsx("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-4.5a.75.75 0 000 1.5h6a.75.75 0 00.75-.75V4.5a.75.75 0 00-1.5 0v2.253a9 9 0 00-15.06 4.042.75.75 0 00.75.75h1.5a.75.75 0 00.75-.75zM19.245 13.941a7.5 7.5 0 01-12.548 3.364l-1.903-1.903h4.5a.75.75 0 000-1.5h-6a.75.75 0 00-.75.75v6a.75.75 0 001.5 0v-2.253a9 9 0 0015.06-4.042.75.75 0 00-.75-.75h-1.5a.75.75 0 00-.75.75z",clipRule:"evenodd"})}),gu=s=>{const{theme:e}=gn();return e==="tri-an"?b.jsx("img",{src:"https://i.postimg.cc/xjbVmxDW/Oxygen-Icons-org-Oxygen-Categories-applications-education-university-256.png",alt:"Graduation Cap Icon",...s}):e==="noel"?b.jsx("img",{src:"/assets/img/home.png",alt:"Home Icon",...s,className:`${s.className} object-contain`}):b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:[b.jsx("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm0 2a8 8 0 100 16 8 8 0 000-16zm0 3a5 5 0 110 10 5 5 0 010-10zm0 2a3 3 0 100 6 3 3 0 000-6z"}),b.jsx("path",{d:"M12 3v2m0 14v2M3 12h2m14 0h-2m-8-8L6.414 5.414m11.172 11.172L16.243 15.12m0-9.706l-1.121 1.121M5.414 17.586L6.536 16.464"})]})},cg=s=>{const{theme:e}=gn();return e==="tri-an"?b.jsx("img",{src:"https://i.postimg.cc/66GxZjxN/school-114359.png",alt:"School Bag Icon",...s}):e==="noel"?b.jsx("img",{src:"/assets/img/bell.png",alt:"Bell Icon",...s,className:`${s.className} object-contain`}):b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:[b.jsx("path",{d:"M12 2a1 1 0 011 1v7.683a4.502 4.502 0 012.722 2.054 3 3 0 01-1.33 3.963 3.003 3.003 0 01-4.783-3.963A4.502 4.502 0 0111 10.683V3a1 1 0 011-1zm-3.5 10a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm7 0a1.5 1.5 0 100 3 1.5 1.5 0 000-3z"}),b.jsx("path",{d:"M12 22a8.956 8.956 0 01-6-2.583V18h12v1.417A8.956 8.956 0 0112 22z"})]})},i2=s=>{const{theme:e}=gn();return e==="tri-an"?b.jsx("img",{src:"https://i.postimg.cc/h47RmyWN/Mattahan-Buuf-They-reply-technosorcery-128.png",alt:"Wrench Icon",...s}):e==="noel"?b.jsx("img",{src:"/assets/img/gift4.png",alt:"Gift Icon",...s,className:`${s.className} object-contain`}):b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:[b.jsx("path",{fillRule:"evenodd",d:"M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.981A10.503 10.503 0 0112 21a10.5 10.5 0 01-10.5-10.5c0-4.368 2.667-8.162 6.43-9.742a.75.75 0 01.819.162z",clipRule:"evenodd"}),b.jsx("path",{d:"M12.75 9a.75.75 0 00-1.5 0v2.25H9a.75.75 0 000 1.5h2.25V15a.75.75 0 001.5 0v-2.25H15a.75.75 0 000-1.5h-2.25V9z"})]})},a2=s=>{const{theme:e}=gn();return e==="tri-an"?b.jsx("img",{src:"https://i.postimg.cc/zvWm1BFk/book-512x512-35977.png",alt:"Book Icon",...s}):e==="noel"?b.jsx("img",{src:"/assets/img/hat.png",alt:"Hat Icon",...s,className:`${s.className} object-contain`}):b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:[b.jsx("path",{d:"M12 2L3 8v2h18V8l-9-6zm-1.5 10a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm3 0a1.5 1.5 0 100 3 1.5 1.5 0 000-3z"}),b.jsx("path",{d:"M4 14v6h16v-6H4zm6 2h4v2h-4v-2z"})]})},B0=s=>{const{theme:e}=gn();return e==="tri-an"?b.jsx("img",{src:"https://i.postimg.cc/2yvpf67d/Mattahan-Buuf-A-Proper-Journal-Icon-128.png",alt:"Journal Icon",...s}):e==="noel"?b.jsx("img",{src:"/assets/img/gift5.png",alt:"Gift Icon",...s,className:`${s.className} object-contain`}):b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:[b.jsx("path",{fillRule:"evenodd",d:"M12 2a10 10 0 100 20 10 10 0 000-20zM4 12a8 8 0 1116 0 8 8 0 01-16 0z",clipRule:"evenodd"}),b.jsx("path",{d:"M16.95 7.05l-1.414 1.414-2.122-2.122 1.414-1.414 2.122 2.122zm-9.9 9.9l1.414-1.414 2.122 2.122-1.414 1.414-2.122-2.122zm9.9 0l-1.414-1.414-2.122 2.122 1.414 1.414 2.122-2.122zm-9.9-9.9l1.414 1.414-2.122 2.122L5.636 9.172l2.122-2.122z"})]})},q0=s=>{const{theme:e}=gn();return e==="tri-an"?b.jsx("img",{src:"https://i.postimg.cc/2yvpf67d/Mattahan-Buuf-A-Proper-Journal-Icon-128.png",alt:"Journal Icon",...s}):e==="noel"?b.jsx("img",{src:"/assets/img/star-gold.png",alt:"Star Icon",...s,className:`${s.className} object-contain`}):b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:[b.jsx("path",{fillRule:"evenodd",d:"M8.25 2.25A.75.75 0 019 3v.257a3.75 3.75 0 013 0V3a.75.75 0 011.5 0v.257a3.75 3.75 0 013 0V3a.75.75 0 01.75.75h-.008v.016c.361.32.622.754.74 1.232A23.953 23.953 0 0112 6c-2.305 0-4.52-.42-6.502-1.195a2.5 2.5 0 01.74-1.232H6a.75.75 0 01.75-.75h1.5zm-2.784 4.542a25.474 25.474 0 0013.068 0 .75.75 0 01.443.923 23.92 23.92 0 01-13.954 0 .75.75 0 01.443-.923zM8.25 10.5a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5a.75.75 0 01.75-.75zm3.75 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5a.75.75 0 01.75-.75zm3.75 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5a.75.75 0 01.75-.75z",clipRule:"evenodd"}),b.jsx("path",{d:"M4.145 9.421a.75.75 0 01.558-.923 25.483 25.483 0 0114.594 0 .75.75 0 01.558.923l-.36.99a25.01 25.01 0 01-14.832 0l-.36-.99z"}),b.jsx("path",{fillRule:"evenodd",d:"M3 15.75A2.25 2.25 0 015.25 13.5h13.5A2.25 2.25 0 0121 15.75v3A2.25 2.25 0 0118.75 21H5.25A2.25 2.25 0 013 18.75v-3z",clipRule:"evenodd"})]})},vE=s=>{const{theme:e}=gn();return e==="tri-an"?b.jsx("img",{src:"https://i.postimg.cc/xjbVmxDW/Oxygen-Icons-org-Oxygen-Categories-applications-education-university-256.png",alt:"Graduation Cap Icon",...s}):e==="noel"?b.jsx("img",{src:"/assets/img/star-gold.png",alt:"Gold Star Icon",...s,className:`${s.className} object-contain`}):b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:[b.jsx("path",{fillRule:"evenodd",d:"M11.25 4.5A.75.75 0 0112 5.25v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0111.25 4.5zM12.75 6a.75.75 0 00-1.5 0v1.5a.75.75 0 001.5 0V6zM11.25 7.5A.75.75 0 0112 8.25v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0111.25 7.5zM12.75 9a.75.75 0 00-1.5 0v1.5a.75.75 0 001.5 0V9z",clipRule:"evenodd"}),b.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM6.262 6.072a8.25 8.25 0 1011.476 11.476A8.25 8.25 0 006.262 6.072zM12 18.75a.75.75 0 01-.75-.75V15a.75.75 0 011.5 0v3a.75.75 0 01-.75.75z",clipRule:"evenodd"}),b.jsx("path",{d:"M14.25 12a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})]})},Xg=s=>{const{theme:e}=gn();return e==="tri-an"?b.jsx("img",{src:"https://i.postimg.cc/FFJXSWXv/study-learning-knowledge-education-book-notebook-icon-256768.png",alt:"Book and Glasses Icon",...s}):e==="noel"?b.jsx("img",{src:"/assets/img/gift1.png",alt:"Gift Icon",...s,className:`${s.className} object-contain`}):b.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:[b.jsx("path",{d:"M11.25 4.533A9.708 9.708 0 006 3.75c-1.052 0-2.062.18-3 .512V17.25a8.987 8.987 0 013.75-.82V9.75a.75.75 0 011.5 0v7.5a.75.75 0 01-1.5 0V15a6.726 6.726 0 00-3-.585V18.75C3.393 18.932 3.69 19.1 4 19.29c2.023.784 4.18 1.093 6.364 1.294a.75.75 0 00.872-.725V4.534z"}),b.jsx("path",{d:"M12.75 4.533V19.86a.75.75 0 00.872.725 49.33 49.33 0 006.364-1.294c.31-.19.607-.358.914-.54V5.25c-1.084-.308-2.18-.46-3.25-.46-1.637 0-3.235.32-4.75.922V4.534z"})]})},o2=s=>{const{theme:e}=gn();return e==="tri-an"?b.jsx("img",{src:"https://i.postimg.cc/kG8rd4vv/Limpa-Curriculum-Vitae-Education-256.png",alt:"Blackboard Icon",...s}):e==="noel"?b.jsx("img",{src:"/assets/img/gift2.png",alt:"Gift Icon",...s,className:`${s.className} object-contain`}):b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:b.jsx("path",{fillRule:"evenodd",d:"M2.25 6a3 3 0 013-3h13.5a3 3 0 013 3v12a3 3 0 01-3-3H5.25a3 3 0 01-3-3V6zm3.75 3a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H7.5a.75.75 0 01-.75-.75zM7.5 12a.75.75 0 000 1.5h6a.75.75 0 000-1.5h-6z",clipRule:"evenodd"})})},H0=({onStart:s,onLoginClick:e})=>{const{theme:t}=gn();return b.jsx("div",{className:"text-center p-4 animate-slide-in-right",children:b.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8 md:p-12 max-w-2xl mx-auto relative",children:[t==="tri-an"?b.jsx("img",{src:"https://i.postimg.cc/MH9hVp8S/happy-techers-day.jpg",alt:"Icon Chc mng Ngy Nh gio",className:"h-24 w-24 mx-auto mb-4 rounded-full object-cover"}):t==="noel"?b.jsx(gu,{className:"h-24 w-24 mx-auto text-primary mb-4"}):b.jsx(gu,{className:"h-24 w-24 mx-auto text-primary mb-4"}),b.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-foreground mb-2",children:"ng Dng n tp"}),t==="tri-an"&&b.jsx("p",{className:"text-xl font-semibold text-primary mb-4",children:"Phin bn c bit Tri n Thy C"}),t==="noel"&&b.jsx("p",{className:"text-xl font-semibold text-primary mb-4",children:"Cho n Ging Sinh An Lnh"}),b.jsx("p",{className:"text-lg text-muted-foreground mb-4",children:"Cho mng anh/ch  n vi ng dng n tp, n thi chng ch chuyn mn phng tin thy ni a."}),t==="tri-an"&&b.jsx("p",{className:"text-lg text-muted-foreground mb-8 italic",children:'"Nhn ngy Nh gio Vit Nam 20-11, knh chc qu thy c lun mnh khe, hnh phc v thnh cng trong s nghip trng ngi."'}),b.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[b.jsx("button",{onClick:s,className:"w-full sm:w-auto bg-primary text-primary-foreground font-bold text-lg py-4 px-10 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105",children:"Bt u"}),b.jsx("button",{onClick:e,className:"w-full sm:w-auto bg-secondary text-secondary-foreground font-bold text-lg py-4 px-10 rounded-lg hover:bg-secondary/80 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300",children:"ng nhp"})]})]})})},l2=({onBack:s})=>{const[e,t]=pe.useState(""),[r,a]=pe.useState(""),[l,c]=pe.useState(!1),[m,g]=pe.useState(null),p=async v=>{v.preventDefault(),c(!0),g(null);let E=e.trim();E.toLowerCase()==="admin"&&(E="admin@onthihanghai.local");const{error:A}=await Ro.auth.signInWithPassword({email:E,password:r});A&&g("Ti khon hoc mt khu khng chnh xc."),c(!1)};return b.jsxs("div",{className:"w-full max-w-md mx-auto p-4 animate-slide-in-right",children:[b.jsxs("div",{className:"relative text-center mb-10",children:[b.jsx("button",{onClick:s,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:b.jsx(Uo,{className:"h-10 w-10 text-primary"})}),b.jsx(gu,{className:"h-20 w-20 mx-auto text-primary mb-4"}),b.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"ng nhp"}),b.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Truy cp vo h thng qun l hc tp."})]}),b.jsx("div",{className:"bg-card p-8 rounded-2xl shadow-lg",children:b.jsxs("form",{onSubmit:p,children:[m&&b.jsx("p",{className:"bg-destructive/10 text-destructive p-3 rounded-md mb-4 text-center",children:m}),b.jsxs("div",{className:"mb-4",children:[b.jsx("label",{htmlFor:"account",className:"block text-sm font-medium text-card-foreground mb-2",children:"Ti khon"}),b.jsx("input",{id:"account",type:"text",value:e,onChange:v=>t(v.target.value),placeholder:"Nhp ti khon hoc email",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-colors duration-300",required:!0,autoFocus:!0})]}),b.jsxs("div",{className:"mb-6",children:[b.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-card-foreground mb-2",children:"Mt khu"}),b.jsx("input",{id:"password",type:"password",value:r,onChange:v=>a(v.target.value),placeholder:"",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-colors duration-300",required:!0})]}),b.jsx("button",{type:"submit",disabled:l,className:"w-full bg-primary text-primary-foreground font-bold py-3 px-6 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 disabled:opacity-50 disabled:cursor-wait",children:l?"ang x l...":"ng nhp"})]})})]})},u2=(s,e)=>{const t="h-14 w-14 mx-auto text-primary mb-3 object-contain",r="h-14 w-14 mx-auto mb-3 object-cover rounded-full border-2 border-border/20 shadow-sm",a="h-14 w-14 mx-auto mb-3 object-contain drop-shadow-lg",l=s.name.toLowerCase();if(e==="noel")return l.includes("thuyn trng")?b.jsx("img",{src:"/assets/img/hat.png",alt:"Captain Hat",className:a}):l.includes("my trng")?b.jsx("img",{src:"/assets/img/gift4.png",alt:"Chief Engineer",className:a}):l.includes("thy th")?b.jsx("img",{src:"/assets/img/bell.png",alt:"Sailor",className:a}):l.includes("li phng tin")?b.jsx("img",{src:"/assets/img/tree.png",alt:"Helm",className:a}):l.includes("chng ch")?b.jsx("img",{src:"/assets/img/star-gold.png",alt:"Certificate",className:a}):b.jsx("img",{src:"/assets/img/gift5.png",alt:"Default",className:a});if(e==="tri-an")switch(s.id){case"thuyentruong-h1":return b.jsx("img",{src:"https://i.postimg.cc/Vs76y54F/8.jpg",alt:s.name,className:r});case"thuyentruong-h2":return b.jsx("img",{src:"https://i.postimg.cc/Pf6xGNK4/9.jpg",alt:s.name,className:r});case"thuyentruong-h3":return b.jsx("img",{src:"https://i.postimg.cc/Vs76y54W/7.jpg",alt:s.name,className:r});case"thuythu":return b.jsx(cg,{className:t});case"lai-phuong-tien":return b.jsx(gu,{className:t});case"maytruong-h1":return b.jsx("img",{src:"https://i.postimg.cc/zDpm90H6/undefined.jpg",alt:s.name,className:r});case"maytruong-h2":return b.jsx("img",{src:"https://i.postimg.cc/wMwSLjdc/Teachers-day-background-design-art-illustration.jpg",alt:s.name,className:r});case"maytruong-h3":return b.jsx("img",{src:"https://i.postimg.cc/NFdWmjwH/Hinh-thiep.jpg",alt:s.name,className:r});case"thomay":return b.jsx("img",{src:"https://i.postimg.cc/cJYy2WQN/hinh-nen-3.jpg",alt:s.name,className:r});case"caotoc":return b.jsx("img",{src:"https://i.postimg.cc/dQWMQybn/5.jpg",alt:s.name,className:r});case"ven-bien":return b.jsx("img",{src:"https://i.postimg.cc/zDdmDgs0/6.jpg",alt:s.name,className:r});case"antoan-ven-bien":return b.jsx("img",{src:"https://i.postimg.cc/ZYFWdtv0/BOARD.webp",alt:s.name,className:r});case"antoan-xang-dau":return b.jsx("img",{src:"https://i.postimg.cc/T2k82Dzc/4.jpg",alt:s.name,className:r});case"antoan-hoa-chat":return b.jsx("img",{src:"https://i.postimg.cc/mZVx08Ff/World-Teacher-s-Day-Flowers-Border-Pink.jpg",alt:s.name,className:r});default:return l.includes("chng ch")?b.jsx(q0,{className:t}):b.jsx(B0,{className:t})}return l.includes("thuyn trng")?b.jsx(a2,{className:t}):l.includes("my trng")?b.jsx(i2,{className:t}):l.includes("thy th")?b.jsx(cg,{className:t}):l.includes("li phng tin")?b.jsx(gu,{className:t}):l.includes("chng ch")?b.jsx(q0,{className:t}):b.jsx(B0,{className:t})},c2=({licenses:s,onSelect:e,onBack:t})=>{const{theme:r}=gn();return b.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right",children:[b.jsxs("div",{className:"relative text-center mb-10",children:[b.jsx("button",{onClick:t,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:b.jsx(Uo,{className:"h-10 w-10 text-primary"})}),r==="noel"?b.jsx("img",{src:"/assets/img/tree.png",alt:"Tree",className:"h-20 w-20 mx-auto mb-4 object-contain drop-shadow-lg"}):b.jsx(cg,{className:"h-20 w-20 mx-auto text-primary mb-4"}),b.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Chn Hng Bng"}),b.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Anh/ch vui lng chn hng bng mun n tp v thi th."})]}),b.jsx("div",{className:"bg-card p-6 rounded-2xl shadow-lg",children:b.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:s.map(a=>{const l=a.subjects.reduce((c,m)=>c+m.questions.length,0);return b.jsxs("button",{onClick:()=>e(a),className:"group w-full p-4 bg-background rounded-lg text-center hover:bg-primary/10 transition-all duration-300 transform hover:scale-105 focus:ring-4 focus:ring-ring focus:outline-none",children:[u2(a,r),b.jsx("h3",{className:"text-md font-bold text-primary",children:a.name}),b.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[a.subjects.length," mn - ",l," cu"]})]},a.id)})})})]})},h2=({onNameSubmit:s,onBack:e})=>{const[t,r]=pe.useState(""),a=l=>{l.preventDefault();const c=t.trim();s(c||"Hc vin")};return b.jsxs("div",{className:"w-full max-w-md mx-auto p-4 animate-slide-in-right",children:[b.jsxs("div",{className:"text-center mb-10",children:[b.jsx(r2,{className:"h-20 w-20 mx-auto text-primary mb-4"}),b.jsxs("div",{className:"relative flex justify-center items-center",children:[b.jsx("div",{className:"absolute left-0",children:b.jsx("button",{onClick:e,className:"bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:b.jsx(Uo,{className:"h-10 w-10 text-primary"})})}),b.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Thng tin ca anh/ch"})]}),b.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Nhp tn  ti c th lu li tin  hc tp cho anh/ch."})]}),b.jsx("div",{className:"bg-card p-8 rounded-2xl shadow-lg",children:b.jsxs("form",{onSubmit:a,children:[b.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-card-foreground mb-2",children:"Tn ca anh/ch"}),b.jsx("input",{id:"name",type:"text",value:t,onChange:l=>r(l.target.value),placeholder:"V d: Nguyn Vn A (c th b trng)",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-colors duration-300",autoFocus:!0}),b.jsx("button",{type:"submit",className:"mt-6 w-full bg-primary text-primary-foreground font-bold py-3 px-6 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300",children:"Xc nhn"})]})})]})},d2=({onModeSelect:s,licenseName:e,userName:t,onSwitchLicense:r})=>b.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right",children:[b.jsxs("div",{className:"relative text-center mb-10",children:[b.jsx("div",{className:"absolute right-0 top-0",children:b.jsxs("button",{onClick:r,className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground hover:text-primary transition-all duration-300 py-1 px-2 rounded-md hover:bg-secondary",title:"Chn li hng bng",children:[b.jsx(s2,{className:"h-4 w-4"}),b.jsx("span",{children:"Chn li hng bng"})]})}),b.jsxs("h1",{className:"text-4xl font-bold text-foreground",children:["Cho anh/ch ",t,"!"]}),b.jsxs("p",{className:"text-lg text-muted-foreground mt-2",children:["Anh/ch ang hc hng bng ",b.jsx("span",{className:"font-semibold text-primary",children:e}),"."]}),b.jsx("p",{className:"text-lg text-muted-foreground mt-1",children:"Hy chn mt ch   bt u."})]}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[b.jsxs("button",{onClick:()=>s("practice"),className:"group bg-card text-card-foreground p-8 rounded-2xl shadow-lg text-center hover:bg-primary/10 transition-all duration-300 transform hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-ring",children:[b.jsx(Xg,{className:"h-16 w-16 mx-auto text-primary mb-4 transition-transform group-hover:scale-110"}),b.jsx("h2",{className:"text-2xl font-bold text-card-foreground",children:"n tp"}),b.jsx("p",{className:"text-muted-foreground mt-2",children:"Luyn tp tng mn  nm vng kin thc."})]}),b.jsxs("button",{onClick:()=>s("online_exam"),className:"group bg-card text-card-foreground p-8 rounded-2xl shadow-lg text-center hover:bg-destructive/10 transition-all duration-300 transform hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-ring",children:[b.jsx(o2,{className:"h-16 w-16 mx-auto text-destructive mb-4 transition-transform group-hover:scale-110"}),b.jsx("h2",{className:"text-2xl font-bold text-card-foreground",children:"Thi th"}),b.jsx("p",{className:"text-muted-foreground mt-2",children:"Lm bi thi 30 cu ngu nhin trong 45 pht."})]})]})]}),$0=s=>{if(!s)return"";const e=new Date(s),t=e.getDate().toString().padStart(2,"0"),r=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getHours().toString().padStart(2,"0"),l=e.getMinutes().toString().padStart(2,"0");return`(${t}/${r} ${a}:${l})`},f2=({subjects:s,progress:e,onSelect:t,onBack:r})=>b.jsxs("div",{className:"w-full max-w-2xl mx-auto p-4 animate-slide-in-right",children:[b.jsxs("div",{className:"relative text-center mb-10",children:[b.jsx("button",{onClick:r,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:b.jsx(Uo,{className:"h-10 w-10 text-primary"})}),b.jsx(Xg,{className:"h-20 w-20 mx-auto text-primary mb-4"}),b.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Chn Mn hc"}),b.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Chn mt mn  bt u n tp."})]}),b.jsx("div",{className:"bg-card p-6 rounded-2xl shadow-lg",children:b.jsx("div",{className:"space-y-3",children:s.map(a=>{const l=e[a.id],c=l&&l.lastScore!==null;return b.jsxs("button",{onClick:()=>t(a),className:"w-full flex items-center justify-between p-5 bg-background rounded-lg text-left hover:bg-primary/10 transition-all duration-300 transform hover:scale-[1.02] focus:ring-4 focus:ring-ring focus:outline-none",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-lg font-bold text-primary",children:a.name}),b.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.questions.length," cu hi"]})]}),b.jsxs("div",{className:"flex items-center gap-4",children:[c&&b.jsxs("div",{className:"text-right text-sm",children:[b.jsxs("p",{className:"text-muted-foreground flex items-center justify-end",children:[b.jsx("span",{children:"Ln cui:"}),b.jsxs("span",{className:"font-semibold text-primary ml-1",children:[l.lastScore,"/",a.questions.length]}),l.lastScoreTimestamp&&b.jsx("span",{className:"ml-1.5 text-xs text-muted-foreground/80",children:$0(l.lastScoreTimestamp)})]}),b.jsxs("p",{className:"text-muted-foreground flex items-center justify-end mt-0.5",children:[b.jsx("span",{children:"Cao nht:"}),b.jsxs("span",{className:"font-semibold text-success ml-1",children:[l.highScore,"/",a.questions.length]}),l.highScoreTimestamp&&b.jsx("span",{className:"ml-1.5 text-xs text-muted-foreground/80",children:$0(l.highScoreTimestamp)})]})]}),b.jsx(n2,{className:"h-6 w-6 text-muted-foreground"})]})]},a.id)})})})]}),m2=({quiz:s,onFinish:e,onBack:t})=>{const[r,a]=pe.useState(0),[l,c]=pe.useState({}),m=pe.useMemo(()=>s.questions[r],[s.questions,r]),g=pe.useMemo(()=>l[m.id]!==void 0,[l,m.id]),p=pe.useMemo(()=>l[m.id]||null,[l,m.id]),v=()=>{e(l)},E=j=>{g||c(V=>({...V,[m.id]:j}))},A=()=>{r===s.questions.length-1?v():a(V=>V+1)},x=r/s.questions.length*100;return b.jsx("div",{className:"w-full max-w-3xl mx-auto p-4 md:p-6 animate-slide-in-right font-quiz-default",children:b.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-6 md:p-8",children:[b.jsxs("div",{className:"mb-6",children:[b.jsxs("div",{className:"flex justify-between items-center mb-4 relative",children:[b.jsx("button",{onClick:t,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-background/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-card transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:b.jsx(Uo,{className:"h-10 w-10"})}),b.jsx("h1",{className:"text-xl font-bold text-foreground text-center flex-grow",children:s.title}),b.jsx("button",{onClick:v,className:"bg-secondary text-secondary-foreground hover:bg-secondary/80 text-sm font-bold py-2 px-4 rounded-lg transition-colors duration-300",children:"Kt thc"})]}),b.jsx("div",{className:"w-full bg-secondary rounded-full h-2.5 mb-2",children:b.jsx("div",{className:"bg-primary h-2.5 rounded-full transition-all duration-500",style:{width:`${x}%`}})}),b.jsx("div",{className:"flex justify-between items-center text-sm text-muted-foreground",children:b.jsxs("span",{children:["Cu ",r+1," / ",s.questions.length]})})]}),b.jsxs("div",{children:[b.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-5 text-foreground",children:m.text}),m.image&&b.jsx("div",{className:"mb-6 rounded-lg overflow-hidden",children:b.jsx("img",{src:m.image,alt:"Cu hi",className:"w-full h-auto object-cover max-h-80"})}),b.jsx("div",{className:"space-y-3",children:m.answers.map(j=>{const V=p===j.id;let k="w-full text-left p-4 rounded-lg border-2 transition-all duration-300 flex items-center justify-between text-lg";const H=j.id===m.correctAnswerId;return g?H?k+=" bg-success/10 border-success text-success":V&&!H?k+=" bg-destructive/10 border-destructive text-destructive":k+=" border-border text-muted-foreground":V?k+=" bg-primary/10 border-primary ring-2 ring-primary text-primary-foreground":k+=" bg-background hover:bg-muted border-border text-foreground",b.jsxs("button",{onClick:()=>E(j.id),disabled:g,className:k,children:[b.jsx("span",{className:"flex-grow",children:j.text}),g&&b.jsxs(b.Fragment,{children:[H&&b.jsx(Qg,{className:"h-6 w-6 text-success ml-3"}),V&&!H&&b.jsx(Yg,{className:"h-6 w-6 text-destructive ml-3"})]})]},j.id)})}),b.jsx("div",{className:"mt-8",children:b.jsx("div",{className:"text-right",children:g?b.jsx("button",{onClick:A,className:"bg-success text-success-foreground font-bold py-3 px-8 rounded-lg hover:bg-success/90 transition-all duration-300 animate-slide-in-right",children:r===s.questions.length-1?"Hon thnh":"Cu tip theo"}):b.jsx("div",{className:"h-[48px]"})})})]})]})})},g2=s=>{const e=Math.floor(s/60),t=s%60;return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},p2=({quiz:s,onFinish:e,onBack:t})=>{const[r,a]=pe.useState(0),[l,c]=pe.useState({}),[m,g]=pe.useState(s.timeLimit),p=pe.useMemo(()=>s.questions[r],[s.questions,r]),v=pe.useRef(l);pe.useEffect(()=>{v.current=l},[l]);const E=pe.useCallback(()=>{const V=v.current,k=s.questions.length-Object.keys(V).length,H=k>0?`Anh/ch vn cn ${k} cu cha tr li. Anh/ch c chc chn mun np bi khng?`:"Anh/ch  hon thnh tt c cc cu hi. Anh/ch c mun np bi khng?";window.confirm(H)&&e(V)},[s.questions.length,e]);pe.useEffect(()=>{if(m===void 0)return;const V=setInterval(()=>{g(k=>k?k-1:0)},1e3);return()=>clearInterval(V)},[]);const A=pe.useRef(e);pe.useEffect(()=>{A.current=e},[e]),pe.useEffect(()=>{m===0&&(alert(" ht gi lm bi! H thng s t ng np bi ca anh/ch."),A.current(v.current))},[m]);const x=V=>{c(k=>({...k,[p.id]:V}))},j=Object.keys(l).length/s.questions.length*100;return b.jsx("div",{className:"w-full max-w-3xl mx-auto p-4 md:p-6 animate-slide-in-right font-quiz-default",children:b.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-6 md:p-8",children:[b.jsxs("div",{className:"mb-6",children:[b.jsxs("div",{className:"flex justify-between items-center mb-4 relative",children:[b.jsx("button",{onClick:t,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-background/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-card transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:b.jsx(Uo,{className:"h-10 w-10"})}),b.jsx("h1",{className:"text-xl font-bold text-foreground text-center flex-grow",children:s.title}),b.jsx("button",{onClick:E,className:"bg-primary text-primary-foreground hover:bg-primary/90 text-sm font-bold py-2 px-4 rounded-lg transition-colors duration-300",children:"Np bi"})]}),b.jsx("div",{className:"w-full bg-secondary rounded-full h-2.5 mb-2",children:b.jsx("div",{className:"bg-primary h-2.5 rounded-full transition-all duration-500",style:{width:`${j}%`}})}),b.jsxs("div",{className:"flex justify-between items-center text-sm text-muted-foreground",children:[b.jsxs("span",{children:["Cu ",r+1," / ",s.questions.length]}),m!==void 0&&b.jsxs("div",{className:"flex items-center font-semibold text-destructive",children:[b.jsx(t2,{className:"h-5 w-5 mr-1"}),b.jsx("span",{children:g2(m)})]})]})]}),b.jsxs("div",{className:"mb-6 border-b border-border pb-6",children:[b.jsx("h3",{className:"text-sm font-semibold text-muted-foreground mb-3",children:"Danh sch cu hi:"}),b.jsx("div",{className:"flex flex-wrap gap-2",children:s.questions.map((V,k)=>{const H=k===r,J=l[V.id]!==void 0;let Y="w-8 h-8 rounded-md flex items-center justify-center font-bold text-xs transition-all duration-200 ";return H?Y+="bg-primary text-primary-foreground scale-110 shadow-lg ring-2 ring-ring":J?Y+="bg-success text-success-foreground hover:bg-success/80":Y+="bg-secondary text-secondary-foreground hover:bg-muted",b.jsx("button",{className:Y,onClick:()=>a(k),children:k+1},V.id)})})]}),b.jsxs("div",{children:[b.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-5 text-foreground",children:p.text}),p.image&&b.jsx("div",{className:"mb-6 rounded-lg overflow-hidden",children:b.jsx("img",{src:p.image,alt:"Cu hi",className:"w-full h-auto object-cover max-h-80"})}),b.jsx("div",{className:"space-y-3",children:p.answers.map((V,k)=>{const H=l[p.id]===V.id;let J="w-full text-left p-4 rounded-lg border-2 transition-all duration-300 flex items-center text-lg";return H?J+=" bg-primary/10 border-primary ring-2 ring-primary text-foreground":J+=" bg-background hover:bg-muted border-border text-foreground",b.jsx("button",{onClick:()=>x(V.id),className:J,children:b.jsxs("div",{className:"flex items-start w-full",children:[b.jsxs("span",{className:"font-bold mr-2 min-w-[20px]",children:[String.fromCharCode(65+k),"."]}),b.jsx("span",{children:V.text})]})},V.id)})}),b.jsx("div",{className:"mt-8",children:b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("button",{onClick:()=>a(V=>V-1),disabled:r===0,className:"bg-secondary text-secondary-foreground font-bold py-3 px-8 rounded-lg hover:bg-muted disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300",children:"Cu trc"}),r===s.questions.length-1?b.jsx("button",{onClick:E,className:"bg-destructive text-destructive-foreground font-bold py-3 px-8 rounded-lg hover:bg-destructive/90 transition-all duration-300",children:"Np bi"}):b.jsx("button",{onClick:()=>a(V=>V+1),className:"bg-primary text-primary-foreground font-bold py-3 px-8 rounded-lg hover:bg-primary/90 transition-all duration-300",children:"Cu tip"})]})})]})]})})},y2=s=>{const e=Math.floor(s/60),t=s%60;return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},_2=({checked:s,onChange:e})=>b.jsx("div",{onClick:e,className:`w-[14px] h-[14px] border border-[#999] inline-block cursor-pointer bg-white relative ${s?"bg-[#333]":""}`,children:s&&b.jsx("div",{className:"absolute top-[2px] left-[2px] w-[8px] h-[8px] bg-[#333]"})}),v2=({quiz:s,onFinish:e,onBack:t,userName:r,selectedLicense:a})=>{const[l,c]=pe.useState(0),[m,g]=pe.useState({}),[p,v]=pe.useState(s.timeLimit??3600),E=pe.useMemo(()=>s.questions[l],[s.questions,l]),A=pe.useRef(m);pe.useEffect(()=>{A.current=m},[m]);const x=()=>{window.confirm("Anh/ch c chc chn mun thot khi bi thi khng? Mi tin trnh s b mt.")&&t()},j=pe.useCallback(()=>{const H=A.current,J=s.questions.length-Object.keys(H).length,Y=J>0?`Anh/ch vn cn ${J} cu cha tr li. Anh/ch c chc chn mun np bi khng?`:"Anh/ch  hon thnh tt c cc cu hi. Anh/ch c mun np bi khng?";window.confirm(Y)&&e(H)},[s.questions.length,e]),V=pe.useRef(e);pe.useEffect(()=>{V.current=e},[e]),pe.useEffect(()=>{const H=setInterval(()=>{v(J=>J>0?J-1:0)},1e3);return()=>clearInterval(H)},[]),pe.useEffect(()=>{p===0&&(alert(" ht gi lm bi! H thng s t ng np bi ca anh/ch."),V.current(A.current))},[p]);const k=(H,J)=>{g(Y=>({...Y,[H]:J}))};return b.jsxs("div",{className:"w-full max-w-7xl mx-auto font-sans text-black shadow-lg animate-slide-in-right rounded-md",children:[b.jsx("div",{className:"h-3 bg-yellow-700 rounded-t-md border-b-2 border-yellow-900"}),b.jsxs("div",{className:"bg-white p-4",children:[b.jsxs("div",{className:"flex justify-between items-start pb-4 border-b border-gray-300",children:[b.jsxs("div",{className:"flex gap-4 items-center",children:[b.jsx("img",{src:"https://i.postimg.cc/8PDn1wfM/favicon.png",alt:"Avatar",className:"w-20 h-[100px] border border-gray-300 object-contain p-1"}),b.jsxs("div",{className:"text-sm",children:[b.jsx("p",{children:"S bo danh:"}),b.jsx("p",{children:"Ngy sinh:"}),b.jsxs("p",{className:"mt-2",children:["H tn: ",b.jsx("span",{className:"font-bold text-blue-700",children:r||"Hc vin"})]}),b.jsxs("p",{children:["Hng bng: ",b.jsx("span",{className:"font-bold text-blue-700",children:(a==null?void 0:a.name)||"Thuyn trng hng ba - T3"})]})]})]}),b.jsxs("div",{className:"flex items-start gap-4",children:[b.jsxs("div",{className:"bg-[#f0ad4e] text-black p-2 rounded-md text-sm w-48",children:[b.jsx("p",{className:"font-bold",children:"ang thi"}),b.jsx("p",{children:"Thi gian: 45 pht"}),b.jsx("p",{children:"B gi: 0 pht"}),b.jsxs("p",{children:["Cn li: ",b.jsx("span",{className:"font-bold",children:y2(p)})]})]}),b.jsx("button",{onClick:x,className:"text-sm text-gray-600 hover:text-red-500 font-semibold",children:"Thot"})]})]}),b.jsxs("div",{className:"flex mt-4 gap-4",children:[b.jsxs("div",{className:"flex-1 border border-gray-400 rounded-md p-4 flex flex-col justify-between min-h-[500px]",children:[b.jsxs("div",{children:[b.jsx("p",{className:"font-bold mb-4 border-b border-dashed border-gray-400 pb-2",children:"Ni dung cu hi"}),b.jsxs("p",{className:"font-bold text-red-600 mb-2",children:["Cu :",l+1]}),b.jsx("p",{className:"mb-4 font-semibold",children:E.text}),E.image&&b.jsx("div",{className:"mb-4 flex justify-start",children:b.jsx("img",{src:E.image,alt:"Hnh nh cu hi",className:"max-w-full h-auto max-h-60 object-contain border border-gray-300 rounded-md"})}),b.jsx("div",{className:"space-y-4",children:E.answers.map((H,J)=>b.jsxs("div",{className:"flex items-start",children:[b.jsxs("span",{className:"font-bold mr-2 text-gray-700 min-w-[20px]",children:[String.fromCharCode(65+J),"."]}),b.jsx("p",{children:H.text})]},H.id))})]}),b.jsxs("div",{className:"flex justify-center gap-4 mt-8",children:[b.jsxs("button",{onClick:()=>c(H=>Math.max(0,H-1)),disabled:l===0,className:"bg-[#f0ad4e] text-black px-4 py-2 rounded-md border border-gray-400 flex items-center font-semibold hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-5 h-5",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),"Tr li"]}),l<s.questions.length-1&&b.jsxs("button",{onClick:()=>c(H=>Math.min(s.questions.length-1,H+1)),className:"bg-[#f0ad4e] text-black px-4 py-2 rounded-md border border-gray-400 flex items-center font-semibold hover:bg-yellow-500 transition-colors",children:["Tip tc",b.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-5 h-5",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})]})]})]}),b.jsxs("div",{className:"w-[200px] flex-none flex flex-col",children:[b.jsx("div",{className:"border border-gray-300 rounded-md",children:b.jsxs("table",{className:"w-full border-collapse text-xs",children:[b.jsx("thead",{className:"sticky top-0 bg-[#f0ad4e] z-10",children:b.jsxs("tr",{children:[b.jsx("th",{className:"border border-gray-400 p-2",children:"Cu"}),b.jsx("th",{className:"border border-gray-400 p-2",children:"a"}),b.jsx("th",{className:"border border-gray-400 p-2",children:"b"}),b.jsx("th",{className:"border border-gray-400 p-2",children:"c"}),b.jsx("th",{className:"border border-gray-400 p-2",children:"d"})]})}),b.jsx("tbody",{children:s.questions.map((H,J)=>b.jsxs("tr",{className:l===J?"bg-cyan-200":"hover:bg-gray-50",children:[b.jsxs("td",{className:`border border-gray-400 p-2 font-bold text-center cursor-pointer whitespace-nowrap ${l===J?"text-black":"text-gray-500"}`,onClick:()=>c(J),children:["Cu ",J+1]}),H.answers.slice(0,4).map(Y=>b.jsx("td",{className:"border border-gray-400 p-2 text-center",children:b.jsx(_2,{checked:m[H.id]===Y.id,onChange:()=>k(H.id,Y.id)})},Y.id))]},H.id))})]})}),b.jsx("div",{className:"text-center mt-4 pt-2 border-t border-gray-200",children:b.jsx("button",{onClick:j,className:"bg-[#337ab7] text-white px-8 py-2 rounded-md font-semibold hover:bg-blue-700 transition-colors w-full",children:"Np bi"})})]})]}),b.jsxs("div",{className:"mt-4 bg-[#005a9c] text-white p-4 rounded-b-md flex items-center gap-4 text-xs",children:[b.jsx("img",{src:"https://i.postimg.cc/8PDn1wfM/favicon.png",alt:"Logo",className:"h-16 w-16 object-contain"}),b.jsxs("div",{children:[b.jsx("p",{className:"font-bold",children:"CNG TY C PHN T VN V GIO DC NINH BNH"}),b.jsx("p",{children:"a ch: ng Triu Vit Vng, phng Hoa L, tnh Ninh Bnh "})]})]})]})]})},b2=({quiz:s,userAnswers:e,score:t,onRetry:r,onBack:a,userName:l})=>{const[c,m]=pe.useState("all"),[g]=pe.useState(()=>new Date),p=s.questions.length,v=t>=25,E=pe.useMemo(()=>new Intl.DateTimeFormat("vi-VN",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit",year:"numeric"}).format(g),[g]),A=pe.useMemo(()=>c==="incorrect"?s.questions.filter(x=>e[x.id]!==x.correctAnswerId):s.questions,[c,s.questions,e]);return b.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right font-quiz-default",children:[b.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8 text-center mb-8",children:[b.jsx(vE,{className:"h-24 w-24 mx-auto text-yellow-400 mb-4"}),b.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Kt qu Thi th"}),b.jsxs("div",{className:"my-4 text-muted-foreground",children:[b.jsxs("p",{className:"text-lg",children:["Th sinh: ",b.jsx("span",{className:"font-bold text-primary",children:l})]}),b.jsxs("p",{className:"text-sm",children:["Hon thnh lc: ",E]})]}),b.jsx("p",{className:`text-2xl font-bold mb-6 ${v?"text-success":"text-destructive"}`,children:v?"Chc mng, anh/ch  T!":"Rt tic, anh/ch KHNG T."}),b.jsxs("div",{className:`inline-block p-6 rounded-xl border ${v?"bg-success/10 border-success/20":"bg-destructive/10 border-destructive/20"}`,children:[b.jsxs("p",{className:`text-5xl font-extrabold ${v?"text-success":"text-destructive"}`,children:[t," / ",p]}),b.jsx("p",{className:"text-lg text-muted-foreground mt-1",children:"S cu ng"})]})]}),b.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8",children:[b.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6",children:[b.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Xem li bi lm"}),b.jsxs("div",{className:"flex items-center gap-2 mt-4 sm:mt-0",children:[b.jsx("button",{onClick:()=>m("all"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${c==="all"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:"Tt c"}),b.jsxs("button",{onClick:()=>m("incorrect"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${c==="incorrect"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:["Ch cu sai (",s.questions.length-t,")"]})]})]}),b.jsx("div",{className:"space-y-6 max-h-[50vh] overflow-y-auto pr-2",children:A.length>0?A.map((x,j)=>{const V=e[x.id],k=x.correctAnswerId;return b.jsxs("div",{className:"p-4 border-b border-border last:border-b-0",children:[b.jsxs("p",{className:"font-semibold text-lg mb-3 text-foreground",children:[b.jsxs("span",{className:"mr-2",children:["Cu ",s.questions.findIndex(H=>H.id===x.id)+1,":"]}),x.text]}),b.jsx("div",{className:"space-y-2",children:x.answers.map(H=>{const J=H.id===V,Y=H.id===k;let ae="flex items-center p-3 rounded-md text-sm ";return Y?ae+="bg-success/10 text-success":J?ae+="bg-destructive/10 text-destructive":ae+="bg-muted/50 text-muted-foreground",b.jsxs("div",{className:ae,children:[Y?b.jsx(Qg,{className:"h-5 w-5 mr-3 text-success"}):J?b.jsx(Yg,{className:"h-5 w-5 mr-3 text-destructive"}):b.jsx("div",{className:"w-5 h-5 mr-3"}),b.jsx("span",{children:H.text})]},H.id)})})]},x.id)}):b.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Tuyt vi! Anh/ch  tr li ng tt c cc cu hi."})})]}),b.jsxs("div",{className:"text-center mt-8 flex flex-col sm:flex-row justify-center items-center gap-4",children:[b.jsx("button",{onClick:a,className:"w-full sm:w-auto bg-primary text-primary-foreground font-bold py-3 px-8 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105",children:"Quay li"}),b.jsx("button",{onClick:r,className:"w-full sm:w-auto bg-secondary text-secondary-foreground font-bold py-3 px-8 rounded-lg hover:bg-muted focus:outline-none focus:ring-4 focus:ring-ring transition-colors duration-300",children:"Lm li bi thi"})]})]})},w2=({quiz:s,userAnswers:e,score:t,onRetry:r,onBack:a,userName:l})=>{const[c,m]=pe.useState("all"),[g]=pe.useState(()=>new Date),p=s.questions.length,v=p>0?Math.round(t/p*100):0,E=pe.useMemo(()=>new Intl.DateTimeFormat("vi-VN",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit",year:"numeric"}).format(g),[g]),A=pe.useMemo(()=>c==="incorrect"?s.questions.filter(x=>e[x.id]!==x.correctAnswerId):s.questions,[c,s.questions,e]);return b.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right font-quiz-default",children:[b.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8 text-center mb-8",children:[b.jsx(vE,{className:"h-24 w-24 mx-auto text-yellow-400 mb-4"}),b.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Kt qu n tp"}),b.jsxs("div",{className:"my-4 text-muted-foreground",children:[b.jsxs("p",{className:"text-lg",children:["Hc vin: ",b.jsx("span",{className:"font-bold text-primary",children:l})]}),b.jsxs("p",{className:"text-sm",children:["Hon thnh lc: ",E]})]}),b.jsxs("div",{className:"bg-primary/10 inline-block p-6 rounded-xl border border-primary/20 mt-4",children:[b.jsxs("p",{className:"text-5xl font-extrabold text-primary",children:[t," / ",p]}),b.jsxs("p",{className:"text-2xl font-semibold text-primary/80 mt-1",children:["(",v,"%)"]})]})]}),b.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8",children:[b.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6",children:[b.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Xem li bi lm"}),b.jsxs("div",{className:"flex items-center gap-2 mt-4 sm:mt-0",children:[b.jsx("button",{onClick:()=>m("all"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${c==="all"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:"Tt c"}),b.jsxs("button",{onClick:()=>m("incorrect"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${c==="incorrect"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:["Ch cu sai (",s.questions.length-t,")"]})]})]}),b.jsx("div",{className:"space-y-6 max-h-[50vh] overflow-y-auto pr-2",children:A.length>0?A.map((x,j)=>{const V=e[x.id],k=x.correctAnswerId;return b.jsxs("div",{className:"p-4 border-b border-border last:border-b-0",children:[b.jsxs("p",{className:"font-semibold text-lg mb-3 text-foreground",children:[b.jsxs("span",{className:"mr-2",children:["Cu ",s.questions.findIndex(H=>H.id===x.id)+1,":"]}),x.text]}),b.jsx("div",{className:"space-y-2",children:x.answers.map(H=>{const J=H.id===V,Y=H.id===k;let ae="flex items-center p-3 rounded-md text-sm ";return Y?ae+="bg-success/10 text-success":J?ae+="bg-destructive/10 text-destructive":ae+="bg-muted/50 text-muted-foreground",b.jsxs("div",{className:ae,children:[Y?b.jsx(Qg,{className:"h-5 w-5 mr-3 text-success"}):J?b.jsx(Yg,{className:"h-5 w-5 mr-3 text-destructive"}):b.jsx("div",{className:"w-5 h-5 mr-3"}),b.jsx("span",{children:H.text})]},H.id)})})]},x.id)}):b.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Tuyt vi! Anh/ch  tr li ng tt c cc cu hi."})})]}),b.jsxs("div",{className:"text-center mt-8 flex flex-col sm:flex-row justify-center items-center gap-4",children:[b.jsx("button",{onClick:a,className:"w-full sm:w-auto bg-primary text-primary-foreground font-bold py-3 px-8 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105",children:"Cc mn khc"}),b.jsx("button",{onClick:r,className:"w-full sm:w-auto bg-secondary text-secondary-foreground font-bold py-3 px-8 rounded-lg hover:bg-muted focus:outline-none focus:ring-4 focus:ring-ring transition-colors duration-300",children:"Lm li"})]})]})},E2="_card_ns310_3",T2="_header_ns310_45",S2="_logoPlaceholder_ns310_69",A2="_schoolName_ns310_97",R2="_body_ns310_113",x2="_cardTitle_ns310_135",C2="_contentRow_ns310_157",I2="_photoSection_ns310_169",O2="_photoWrapper_ns310_179",N2="_avatar_ns310_195",D2="_infoSection_ns310_209",j2="_infoRow_ns310_229",k2="_label_ns310_239",M2="_value_ns310_255",P2="_valueHighlight_ns310_265",V2="_footer_ns310_281",U2="_barcode_ns310_299",lt={card:E2,header:T2,logoPlaceholder:S2,schoolName:A2,body:R2,cardTitle:x2,contentRow:C2,photoSection:I2,photoWrapper:O2,avatar:N2,infoSection:D2,infoRow:j2,label:k2,value:M2,valueHighlight:P2,footer:V2,barcode:U2};var Vm={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0;function L2(){if(F0)return Ve;F0=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function A(S){return S===null||typeof S!="object"?null:(S=E&&S[E]||S["@@iterator"],typeof S=="function"?S:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,V={};function k(S,L,ne){this.props=S,this.context=L,this.refs=V,this.updater=ne||x}k.prototype.isReactComponent={},k.prototype.setState=function(S,L){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,L,"setState")},k.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function H(){}H.prototype=k.prototype;function J(S,L,ne){this.props=S,this.context=L,this.refs=V,this.updater=ne||x}var Y=J.prototype=new H;Y.constructor=J,j(Y,k.prototype),Y.isPureReactComponent=!0;var ae=Array.isArray,we=Object.prototype.hasOwnProperty,ce={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function C(S,L,ne){var se,le={},ge=null,be=null;if(L!=null)for(se in L.ref!==void 0&&(be=L.ref),L.key!==void 0&&(ge=""+L.key),L)we.call(L,se)&&!I.hasOwnProperty(se)&&(le[se]=L[se]);var Me=arguments.length-2;if(Me===1)le.children=ne;else if(1<Me){for(var xe=Array(Me),Lt=0;Lt<Me;Lt++)xe[Lt]=arguments[Lt+2];le.children=xe}if(S&&S.defaultProps)for(se in Me=S.defaultProps,Me)le[se]===void 0&&(le[se]=Me[se]);return{$$typeof:s,type:S,key:ge,ref:be,props:le,_owner:ce.current}}function O(S,L){return{$$typeof:s,type:S.type,key:L,ref:S.ref,props:S.props,_owner:S._owner}}function U(S){return typeof S=="object"&&S!==null&&S.$$typeof===s}function M(S){var L={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(ne){return L[ne]})}var B=/\/+/g;function N(S,L){return typeof S=="object"&&S!==null&&S.key!=null?M(""+S.key):L.toString(36)}function Qe(S,L,ne,se,le){var ge=typeof S;(ge==="undefined"||ge==="boolean")&&(S=null);var be=!1;if(S===null)be=!0;else switch(ge){case"string":case"number":be=!0;break;case"object":switch(S.$$typeof){case s:case e:be=!0}}if(be)return be=S,le=le(be),S=se===""?"."+N(be,0):se,ae(le)?(ne="",S!=null&&(ne=S.replace(B,"$&/")+"/"),Qe(le,L,ne,"",function(Lt){return Lt})):le!=null&&(U(le)&&(le=O(le,ne+(!le.key||be&&be.key===le.key?"":(""+le.key).replace(B,"$&/")+"/")+S)),L.push(le)),1;if(be=0,se=se===""?".":se+":",ae(S))for(var Me=0;Me<S.length;Me++){ge=S[Me];var xe=se+N(ge,Me);be+=Qe(ge,L,ne,xe,le)}else if(xe=A(S),typeof xe=="function")for(S=xe.call(S),Me=0;!(ge=S.next()).done;)ge=ge.value,xe=se+N(ge,Me++),be+=Qe(ge,L,ne,xe,le);else if(ge==="object")throw L=String(S),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return be}function ot(S,L,ne){if(S==null)return S;var se=[],le=0;return Qe(S,se,"","",function(ge){return L.call(ne,ge,le++)}),se}function K(S){if(S._status===-1){var L=S._result;L=L(),L.then(function(ne){(S._status===0||S._status===-1)&&(S._status=1,S._result=ne)},function(ne){(S._status===0||S._status===-1)&&(S._status=2,S._result=ne)}),S._status===-1&&(S._status=0,S._result=L)}if(S._status===1)return S._result.default;throw S._result}var re={current:null},ue={transition:null},Re={ReactCurrentDispatcher:re,ReactCurrentBatchConfig:ue,ReactCurrentOwner:ce};function Pe(){throw Error("act(...) is not supported in production builds of React.")}return Ve.Children={map:ot,forEach:function(S,L,ne){ot(S,function(){L.apply(this,arguments)},ne)},count:function(S){var L=0;return ot(S,function(){L++}),L},toArray:function(S){return ot(S,function(L){return L})||[]},only:function(S){if(!U(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},Ve.Component=k,Ve.Fragment=t,Ve.Profiler=a,Ve.PureComponent=J,Ve.StrictMode=r,Ve.Suspense=g,Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Re,Ve.act=Pe,Ve.cloneElement=function(S,L,ne){if(S==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+S+".");var se=j({},S.props),le=S.key,ge=S.ref,be=S._owner;if(L!=null){if(L.ref!==void 0&&(ge=L.ref,be=ce.current),L.key!==void 0&&(le=""+L.key),S.type&&S.type.defaultProps)var Me=S.type.defaultProps;for(xe in L)we.call(L,xe)&&!I.hasOwnProperty(xe)&&(se[xe]=L[xe]===void 0&&Me!==void 0?Me[xe]:L[xe])}var xe=arguments.length-2;if(xe===1)se.children=ne;else if(1<xe){Me=Array(xe);for(var Lt=0;Lt<xe;Lt++)Me[Lt]=arguments[Lt+2];se.children=Me}return{$$typeof:s,type:S.type,key:le,ref:ge,props:se,_owner:be}},Ve.createContext=function(S){return S={$$typeof:c,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},S.Provider={$$typeof:l,_context:S},S.Consumer=S},Ve.createElement=C,Ve.createFactory=function(S){var L=C.bind(null,S);return L.type=S,L},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(S){return{$$typeof:m,render:S}},Ve.isValidElement=U,Ve.lazy=function(S){return{$$typeof:v,_payload:{_status:-1,_result:S},_init:K}},Ve.memo=function(S,L){return{$$typeof:p,type:S,compare:L===void 0?null:L}},Ve.startTransition=function(S){var L=ue.transition;ue.transition={};try{S()}finally{ue.transition=L}},Ve.unstable_act=Pe,Ve.useCallback=function(S,L){return re.current.useCallback(S,L)},Ve.useContext=function(S){return re.current.useContext(S)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(S){return re.current.useDeferredValue(S)},Ve.useEffect=function(S,L){return re.current.useEffect(S,L)},Ve.useId=function(){return re.current.useId()},Ve.useImperativeHandle=function(S,L,ne){return re.current.useImperativeHandle(S,L,ne)},Ve.useInsertionEffect=function(S,L){return re.current.useInsertionEffect(S,L)},Ve.useLayoutEffect=function(S,L){return re.current.useLayoutEffect(S,L)},Ve.useMemo=function(S,L){return re.current.useMemo(S,L)},Ve.useReducer=function(S,L,ne){return re.current.useReducer(S,L,ne)},Ve.useRef=function(S){return re.current.useRef(S)},Ve.useState=function(S){return re.current.useState(S)},Ve.useSyncExternalStore=function(S,L,ne){return re.current.useSyncExternalStore(S,L,ne)},Ve.useTransition=function(){return re.current.useTransition()},Ve.version="18.3.1",Ve}var G0;function z2(){return G0||(G0=1,Vm.exports=L2()),Vm.exports}var B2=z2();const na=rd(B2);var bE={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},K0=na.createContext&&na.createContext(bE),q2=["attr","size","title"];function H2(s,e){if(s==null)return{};var t=$2(s,e),r,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);for(a=0;a<l.length;a++)r=l[a],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(s,r)&&(t[r]=s[r])}return t}function $2(s,e){if(s==null)return{};var t={};for(var r in s)if(Object.prototype.hasOwnProperty.call(s,r)){if(e.indexOf(r)>=0)continue;t[r]=s[r]}return t}function zh(){return zh=Object.assign?Object.assign.bind():function(s){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=t[r])}return s},zh.apply(this,arguments)}function Q0(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(s,a).enumerable})),t.push.apply(t,r)}return t}function Bh(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Q0(Object(t),!0).forEach(function(r){F2(s,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):Q0(Object(t)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(t,r))})}return s}function F2(s,e,t){return e=G2(e),e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function G2(s){var e=K2(s,"string");return typeof e=="symbol"?e:e+""}function K2(s,e){if(typeof s!="object"||!s)return s;var t=s[Symbol.toPrimitive];if(t!==void 0){var r=t.call(s,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function wE(s){return s&&s.map((e,t)=>na.createElement(e.tag,Bh({key:t},e.attr),wE(e.child)))}function Q2(s){return e=>na.createElement(Y2,zh({attr:Bh({},s.attr)},e),wE(s.child))}function Y2(s){var e=t=>{var{attr:r,size:a,title:l}=s,c=H2(s,q2),m=a||t.size||"1em",g;return t.className&&(g=t.className),s.className&&(g=(g?g+" ":"")+s.className),na.createElement("svg",zh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,c,{className:g,style:Bh(Bh({color:s.color||t.color},t.style),s.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),l&&na.createElement("title",null,l),s.children)};return K0!==void 0?na.createElement(K0.Consumer,null,t=>e(t)):e(bE)}function X2(s){return Q2({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 128v16a8 8 0 0 1-8 8h-24v12c0 6.627-5.373 12-12 12H60c-6.627 0-12-5.373-12-12v-12H24a8 8 0 0 1-8-8v-16a8 8 0 0 1 4.941-7.392l232-88a7.996 7.996 0 0 1 6.118 0l232 88A8 8 0 0 1 496 128zm-24 304H40c-13.255 0-24 10.745-24 24v16a8 8 0 0 0 8 8h464a8 8 0 0 0 8-8v-16c0-13.255-10.745-24-24-24zM96 192v192H60c-6.627 0-12 5.373-12 12v20h416v-20c0-6.627-5.373-12-12-12h-36V192h-64v192h-64V192h-64v192h-64V192H96z"},child:[]}]})(s)}const J2=({user:s})=>b.jsxs("div",{className:lt.card,children:[b.jsxs("div",{className:lt.header,children:[b.jsx("div",{className:lt.logoPlaceholder,children:b.jsx(X2,{size:20})}),b.jsxs("div",{className:lt.schoolName,children:["Cng ty C phn",b.jsx("br",{}),"T VN V GIO DC NINH BNH"]})]}),b.jsxs("div",{className:lt.body,children:[b.jsx("h2",{className:lt.cardTitle,children:"TH HC VIN"}),b.jsxs("div",{className:lt.contentRow,children:[b.jsx("div",{className:lt.photoSection,children:b.jsx("div",{className:lt.photoWrapper,children:b.jsx("img",{src:"https://via.placeholder.com/150",alt:"Avatar",className:lt.avatar})})}),b.jsxs("div",{className:lt.infoSection,children:[b.jsxs("div",{className:lt.infoRow,children:[b.jsx("span",{className:lt.label,children:"H tn:"}),b.jsx("span",{className:`${lt.value} ${lt.valueHighlight}`,children:s.fullName||"NGUYN VN A"})]}),b.jsxs("div",{className:lt.infoRow,children:[b.jsx("span",{className:lt.label,children:"Ngy sinh: "}),b.jsxs("span",{className:lt.value,children:[" ",s.birthDate||" --/--/----"]})]}),b.jsxs("div",{className:lt.infoRow,children:[b.jsx("span",{className:lt.label,children:"Lp hc: "}),b.jsx("span",{className:lt.value,children:s.courseName||"Cha vo kha"})]}),b.jsxs("div",{className:lt.infoRow,children:[b.jsx("span",{className:lt.label,children:"a ch:"}),b.jsx("span",{className:lt.value,style:{fontSize:"0.9rem"},children:s.address||"---"})]})]})]})]}),b.jsxs("div",{className:lt.footer,children:[b.jsx("div",{className:lt.barcode}),b.jsxs("div",{style:{position:"absolute",bottom:"5px",fontSize:"0.6rem",color:"#718096"},children:["ID: ",s.id?s.id.substring(0,10).toUpperCase():"---"]})]})]}),W2=({userProfile:s,onStart:e,onHistoryClick:t})=>{const{theme:r}=gn();return b.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-slide-in-right",children:b.jsxs("div",{className:"w-full max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[b.jsx("div",{className:"flex justify-center",children:b.jsx(J2,{user:s})}),b.jsxs("div",{className:"bg-card/90 backdrop-blur-sm p-8 rounded-2xl shadow-xl border border-border",children:[b.jsxs("h1",{className:"text-3xl font-bold text-primary mb-6 text-center",children:["Xin cho, ",s.full_name||"Hc vin","!"]}),b.jsx("p",{className:"text-muted-foreground text-center mb-8",children:"Chc bn c mt bui n tp hiu qu v t kt qu cao."}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("button",{onClick:e,className:"w-full bg-primary text-primary-foreground font-bold text-lg py-4 px-6 rounded-xl hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-3 shadow-lg",children:[b.jsx(Xg,{className:"w-8 h-8"}),b.jsx("span",{children:"Vo n Tp / Thi Th"})]}),b.jsxs("button",{onClick:t,className:"w-full bg-secondary text-secondary-foreground font-bold text-lg py-4 px-6 rounded-xl hover:bg-secondary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-3 shadow-lg",children:[b.jsx(e2,{className:"w-8 h-8"}),b.jsx("span",{children:"Lch S Thi"})]})]})]})]})})},Z2=()=>{};var Y0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let a=s.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},eC=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const a=s[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=s[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=s[t++],c=s[t++],m=s[t++],g=((a&7)<<18|(l&63)<<12|(c&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const l=s[t++],c=s[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},TE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<s.length;a+=3){const l=s[a],c=a+1<s.length,m=c?s[a+1]:0,g=a+2<s.length,p=g?s[a+2]:0,v=l>>2,E=(l&3)<<4|m>>4;let A=(m&15)<<2|p>>6,x=p&63;g||(x=64,c||(A=64)),r.push(t[v],t[E],t[A],t[x])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(EE(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):eC(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<s.length;){const l=t[s.charAt(a++)],m=a<s.length?t[s.charAt(a)]:0;++a;const p=a<s.length?t[s.charAt(a)]:64;++a;const E=a<s.length?t[s.charAt(a)]:64;if(++a,l==null||m==null||p==null||E==null)throw new tC;const A=l<<2|m>>4;if(r.push(A),p!==64){const x=m<<4&240|p>>2;if(r.push(x),E!==64){const j=p<<6&192|E;r.push(j)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class tC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nC=function(s){const e=EE(s);return TE.encodeByteArray(e,!0)},qh=function(s){return nC(s).replace(/\./g,"")},SE=function(s){try{return TE.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=()=>rC().__FIREBASE_DEFAULTS__,iC=()=>{if(typeof process>"u"||typeof Y0>"u")return;const s=Y0.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},aC=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&SE(s[1]);return e&&JSON.parse(e)},ad=()=>{try{return Z2()||sC()||iC()||aC()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},AE=s=>{var e,t;return(t=(e=ad())==null?void 0:e.emulatorHosts)==null?void 0:t[s]},oC=s=>{const e=AE(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},RE=()=>{var s;return(s=ad())==null?void 0:s.config},xE=s=>{var e;return(e=ad())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function CE(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...s};return[qh(JSON.stringify(t)),qh(JSON.stringify(c)),""].join(".")}const iu={};function cC(){const s={prod:[],emulator:[]};for(const e of Object.keys(iu))iu[e]?s.emulator.push(e):s.prod.push(e);return s}function hC(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let X0=!1;function IE(s,e){if(typeof window>"u"||typeof document>"u"||!Lo(window.location.host)||iu[s]===e||iu[s]||X0)return;iu[s]=e;function t(A){return`__firebase__banner__${A}`}const r="__firebase__banner",l=cC().prod.length>0;function c(){const A=document.getElementById(r);A&&A.remove()}function m(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,x){A.setAttribute("width","24"),A.setAttribute("id",x),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function p(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{X0=!0,c()},A}function v(A,x){A.setAttribute("id",x),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function E(){const A=hC(r),x=t("text"),j=document.getElementById(x)||document.createElement("span"),V=t("learnmore"),k=document.getElementById(V)||document.createElement("a"),H=t("preprendIcon"),J=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const Y=A.element;m(Y),v(k,V);const ae=p();g(J,H),Y.append(J,j,k,ae),document.body.appendChild(Y)}l?(j.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function fC(){var e;const s=(e=ad())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gC(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function pC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yC(){const s=cn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function _C(){return!fC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vC(){try{return typeof indexedDB=="object"}catch{return!1}}function bC(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC="FirebaseError";class ys extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=wC,Object.setPrototypeOf(this,ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Au.prototype.create)}}class Au{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?EC(l,r):"Error",m=`${this.serviceName}: ${c} (${a}).`;return new ys(a,m,r)}}function EC(s,e){return s.replace(TC,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const TC=/\{\$([^}]+)}/g;function SC(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function aa(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=s[a],c=e[a];if(J0(l)&&J0(c)){if(!aa(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function J0(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(s){const e=[];for(const[t,r]of Object.entries(s))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function AC(s,e){const t=new RC(s,e);return t.subscribe.bind(t)}class RC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");xC(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Um),a.error===void 0&&(a.error=Um),a.complete===void 0&&(a.complete=Um);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xC(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Um(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(s){return s&&s._delegate?s._delegate:s}class oa{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new lC;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OC(e))try{this.getOrInitializeService({instanceIdentifier:Xi})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=Xi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xi){return this.instances.has(e)}getOptions(e=Xi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);r===m&&c.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:IC(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Xi){return this.component?this.component.multipleInstances?e:Xi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IC(s){return s===Xi?void 0:s}function OC(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new CC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(qe||(qe={}));const DC={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},jC=qe.INFO,kC={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},MC=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),a=kC[e];if(a)console[a](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jg{constructor(e){this.name=e,this._logLevel=jC,this._logHandler=MC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const PC=(s,e)=>e.some(t=>s instanceof t);let W0,Z0;function VC(){return W0||(W0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UC(){return Z0||(Z0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const OE=new WeakMap,hg=new WeakMap,NE=new WeakMap,Lm=new WeakMap,Wg=new WeakMap;function LC(s){const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("success",l),s.removeEventListener("error",c)},l=()=>{t(ai(s.result)),a()},c=()=>{r(s.error),a()};s.addEventListener("success",l),s.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&OE.set(t,s)}).catch(()=>{}),Wg.set(e,s),e}function zC(s){if(hg.has(s))return;const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",c),s.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",l),s.addEventListener("error",c),s.addEventListener("abort",c)});hg.set(s,e)}let dg={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return hg.get(s);if(e==="objectStoreNames")return s.objectStoreNames||NE.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ai(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function BC(s){dg=s(dg)}function qC(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(zm(this),e,...t);return NE.set(r,e.sort?e.sort():[e]),ai(r)}:UC().includes(s)?function(...e){return s.apply(zm(this),e),ai(OE.get(this))}:function(...e){return ai(s.apply(zm(this),e))}}function HC(s){return typeof s=="function"?qC(s):(s instanceof IDBTransaction&&zC(s),PC(s,VC())?new Proxy(s,dg):s)}function ai(s){if(s instanceof IDBRequest)return LC(s);if(Lm.has(s))return Lm.get(s);const e=HC(s);return e!==s&&(Lm.set(s,e),Wg.set(e,s)),e}const zm=s=>Wg.get(s);function $C(s,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(s,e),m=ai(c);return r&&c.addEventListener("upgradeneeded",g=>{r(ai(c.result),g.oldVersion,g.newVersion,ai(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const FC=["get","getKey","getAll","getAllKeys","count"],GC=["put","add","delete","clear"],Bm=new Map;function eb(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Bm.get(e))return Bm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=GC.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||FC.includes(t)))return;const l=async function(c,...m){const g=this.transaction(c,a?"readwrite":"readonly");let p=g.store;return r&&(p=p.index(m.shift())),(await Promise.all([p[t](...m),a&&g.done]))[0]};return Bm.set(e,l),l}BC(s=>({...s,get:(e,t,r)=>eb(e,t)||s.get(e,t,r),has:(e,t)=>!!eb(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(QC(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function QC(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const fg="@firebase/app",tb="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new Jg("@firebase/app"),YC="@firebase/app-compat",XC="@firebase/analytics-compat",JC="@firebase/analytics",WC="@firebase/app-check-compat",ZC="@firebase/app-check",eI="@firebase/auth",tI="@firebase/auth-compat",nI="@firebase/database",rI="@firebase/data-connect",sI="@firebase/database-compat",iI="@firebase/functions",aI="@firebase/functions-compat",oI="@firebase/installations",lI="@firebase/installations-compat",uI="@firebase/messaging",cI="@firebase/messaging-compat",hI="@firebase/performance",dI="@firebase/performance-compat",fI="@firebase/remote-config",mI="@firebase/remote-config-compat",gI="@firebase/storage",pI="@firebase/storage-compat",yI="@firebase/firestore",_I="@firebase/ai",vI="@firebase/firestore-compat",bI="firebase",wI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="[DEFAULT]",EI={[fg]:"fire-core",[YC]:"fire-core-compat",[JC]:"fire-analytics",[XC]:"fire-analytics-compat",[ZC]:"fire-app-check",[WC]:"fire-app-check-compat",[eI]:"fire-auth",[tI]:"fire-auth-compat",[nI]:"fire-rtdb",[rI]:"fire-data-connect",[sI]:"fire-rtdb-compat",[iI]:"fire-fn",[aI]:"fire-fn-compat",[oI]:"fire-iid",[lI]:"fire-iid-compat",[uI]:"fire-fcm",[cI]:"fire-fcm-compat",[hI]:"fire-perf",[dI]:"fire-perf-compat",[fI]:"fire-rc",[mI]:"fire-rc-compat",[gI]:"fire-gcs",[pI]:"fire-gcs-compat",[yI]:"fire-fst",[vI]:"fire-fst-compat",[_I]:"fire-vertex","fire-js":"fire-js",[bI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu=new Map,TI=new Map,gg=new Map;function nb(s,e){try{s.container.addComponent(e)}catch(t){fs.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function xo(s){const e=s.name;if(gg.has(e))return fs.debug(`There were multiple attempts to register component ${e}.`),!1;gg.set(e,s);for(const t of pu.values())nb(t,s);for(const t of TI.values())nb(t,s);return!0}function Zg(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Pr(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oi=new Au("app","Firebase",SI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new oa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=wI;function DE(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r={name:mg,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw oi.create("bad-app-name",{appName:String(a)});if(t||(t=RE()),!t)throw oi.create("no-options");const l=pu.get(a);if(l){if(aa(t,l.options)&&aa(r,l.config))return l;throw oi.create("duplicate-app",{appName:a})}const c=new NC(a);for(const g of gg.values())c.addComponent(g);const m=new AI(t,r,c);return pu.set(a,m),m}function ep(s=mg){const e=pu.get(s);if(!e&&s===mg&&RE())return DE();if(!e)throw oi.create("no-app",{appName:s});return e}function RI(){return Array.from(pu.values())}function li(s,e,t){let r=EI[s]??s;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${r}" with version "${e}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fs.warn(c.join(" "));return}xo(new oa(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI="firebase-heartbeat-database",CI=1,yu="firebase-heartbeat-store";let qm=null;function jE(){return qm||(qm=$C(xI,CI,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(yu)}catch(t){console.warn(t)}}}}).catch(s=>{throw oi.create("idb-open",{originalErrorMessage:s.message})})),qm}async function II(s){try{const t=(await jE()).transaction(yu),r=await t.objectStore(yu).get(kE(s));return await t.done,r}catch(e){if(e instanceof ys)fs.warn(e.message);else{const t=oi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fs.warn(t.message)}}}async function rb(s,e){try{const r=(await jE()).transaction(yu,"readwrite");await r.objectStore(yu).put(e,kE(s)),await r.done}catch(t){if(t instanceof ys)fs.warn(t.message);else{const r=oi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});fs.warn(r.message)}}}function kE(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI=1024,NI=30;class DI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new kI(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=sb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>NI){const c=MI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){fs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=sb(),{heartbeatsToSend:r,unsentEntries:a}=jI(this._heartbeatsCache.heartbeats),l=qh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return fs.warn(t),""}}}function sb(){return new Date().toISOString().substring(0,10)}function jI(s,e=OI){const t=[];let r=s.slice();for(const a of s){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),ib(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),ib(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class kI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vC()?bC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await II(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ib(s){return qh(JSON.stringify({version:2,heartbeats:s})).length}function MI(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(s){xo(new oa("platform-logger",e=>new KC(e),"PRIVATE")),xo(new oa("heartbeat",e=>new DI(e),"PRIVATE")),li(fg,tb,s),li(fg,tb,"esm2020"),li("fire-js","")}PI("");var VI="firebase",UI="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */li(VI,UI,"app");function ME(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LI=ME,PE=new Au("auth","Firebase",ME());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh=new Jg("@firebase/auth");function zI(s,...e){Hh.logLevel<=qe.WARN&&Hh.warn(`Auth (${zo}): ${s}`,...e)}function Rh(s,...e){Hh.logLevel<=qe.ERROR&&Hh.error(`Auth (${zo}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(s,...e){throw tp(s,...e)}function Ur(s,...e){return tp(s,...e)}function VE(s,e,t){const r={...LI(),[e]:t};return new Au("auth","Firebase",r).create(e,{appName:s.name})}function ra(s){return VE(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tp(s,...e){if(typeof s!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(t,...r)}return PE.create(s,...e)}function Ae(s,e,...t){if(!s)throw tp(e,...t)}function hs(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Rh(e),new Error(e)}function gs(s,e){s||hs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function BI(){return ab()==="http:"||ab()==="https:"}function ab(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BI()||gC()||"connection"in navigator)?navigator.onLine:!0}function HI(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,t){this.shortDelay=e,this.longDelay=t,gs(t>e,"Short delay should be less than long delay!"),this.isMobile=dC()||pC()}get(){return qI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(s,e){gs(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],GI=new xu(3e4,6e4);function rp(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Bo(s,e,t,r,a={}){return LE(s,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const m=Ru({key:s.config.apiKey,...c}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const p={method:e,headers:g,...l};return mC()||(p.referrerPolicy="no-referrer"),s.emulatorConfig&&Lo(s.emulatorConfig.host)&&(p.credentials="include"),UE.fetch()(await zE(s,s.config.apiHost,t,m),p)})}async function LE(s,e,t){s._canInitEmulator=!1;const r={...$I,...e};try{const a=new QI(s),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw vh(s,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const m=l.ok?c.errorMessage:c.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw vh(s,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw vh(s,"email-already-in-use",c);if(g==="USER_DISABLED")throw vh(s,"user-disabled",c);const v=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw VE(s,v,p);ms(s,v)}}catch(a){if(a instanceof ys)throw a;ms(s,"network-request-failed",{message:String(a)})}}async function KI(s,e,t,r,a={}){const l=await Bo(s,e,t,r,a);return"mfaPendingCredential"in l&&ms(s,"multi-factor-auth-required",{_serverResponse:l}),l}async function zE(s,e,t,r){const a=`${e}${t}?${r}`,l=s,c=l.config.emulator?np(s.config,a):`${s.config.apiScheme}://${a}`;return FI.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class QI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ur(this.auth,"network-request-failed")),GI.get())})}}function vh(s,e,t){const r={appName:s.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=Ur(s,e,r);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YI(s,e){return Bo(s,"POST","/v1/accounts:delete",e)}async function $h(s,e){return Bo(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XI(s,e=!1){const t=Hr(s),r=await t.getIdToken(e),a=sp(r);Ae(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:r,authTime:au(Hm(a.auth_time)),issuedAtTime:au(Hm(a.iat)),expirationTime:au(Hm(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Hm(s){return Number(s)*1e3}function sp(s){const[e,t,r]=s.split(".");if(e===void 0||t===void 0||r===void 0)return Rh("JWT malformed, contained fewer than 3 sections"),null;try{const a=SE(t);return a?JSON.parse(a):(Rh("Failed to decode base64 JWT payload"),null)}catch(a){return Rh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function ob(s){const e=sp(s);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _u(s,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ys&&JI(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function JI({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=au(this.lastLoginAt),this.creationTime=au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fh(s){var E;const e=s.auth,t=await s.getIdToken(),r=await _u(s,$h(e,{idToken:t}));Ae(r==null?void 0:r.users.length,e,"internal-error");const a=r.users[0];s._notifyReloadListener(a);const l=(E=a.providerUserInfo)!=null&&E.length?BE(a.providerUserInfo):[],c=eO(s.providerData,l),m=s.isAnonymous,g=!(s.email&&a.passwordHash)&&!(c!=null&&c.length),p=m?g:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new yg(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(s,v)}async function ZI(s){const e=Hr(s);await Fh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eO(s,e){return[...s.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function BE(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tO(s,e){const t=await LE(s,{},async()=>{const r=Ru({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=s.config,c=await zE(s,a,"/v1/token",`key=${l}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return s.emulatorConfig&&Lo(s.emulatorConfig.host)&&(g.credentials="include"),UE.fetch()(c,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function nO(s,e){return Bo(s,"POST","/v2/accounts:revokeToken",rp(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ob(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const t=ob(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await tO(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,c=new yo;return r&&(Ae(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(Ae(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Ae(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yo,this.toJSON())}_performRefresh(){return hs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(s,e){Ae(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class hr{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new WI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new yg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await _u(this,this.stsTokenManager.getToken(this.auth,e));return Ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return XI(this,e)}reload(){return ZI(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new hr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Fh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pr(this.auth.app))return Promise.reject(ra(this.auth));const e=await this.getIdToken();return await _u(this,YI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:A,isAnonymous:x,providerData:j,stsTokenManager:V}=t;Ae(E&&V,e,"internal-error");const k=yo.fromJSON(this.name,V);Ae(typeof E=="string",e,"internal-error"),Ws(r,e.name),Ws(a,e.name),Ae(typeof A=="boolean",e,"internal-error"),Ae(typeof x=="boolean",e,"internal-error"),Ws(l,e.name),Ws(c,e.name),Ws(m,e.name),Ws(g,e.name),Ws(p,e.name),Ws(v,e.name);const H=new hr({uid:E,auth:e,email:a,emailVerified:A,displayName:r,isAnonymous:x,photoURL:c,phoneNumber:l,tenantId:m,stsTokenManager:k,createdAt:p,lastLoginAt:v});return j&&Array.isArray(j)&&(H.providerData=j.map(J=>({...J}))),g&&(H._redirectEventId=g),H}static async _fromIdTokenResponse(e,t,r=!1){const a=new yo;a.updateFromServerResponse(t);const l=new hr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await Fh(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];Ae(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?BE(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),m=new yo;m.updateFromIdToken(r);const g=new hr({uid:a.localId,auth:e,stsTokenManager:m,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new yg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb=new Map;function ds(s){gs(s instanceof Function,"Expected a class definition");let e=lb.get(s);return e?(gs(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,lb.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}qE.type="NONE";const ub=qE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(s,e,t){return`firebase:${s}:${e}:${t}`}class _o{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=xh(this.userKey,a.apiKey,l),this.fullPersistenceKey=xh("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await $h(this.auth,{idToken:e}).catch(()=>{});return t?hr._fromGetAccountInfoResponse(this.auth,t,e):null}return hr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new _o(ds(ub),e,r);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||ds(ub);const c=xh(r,e.config.apiKey,e.name);let m=null;for(const p of t)try{const v=await p._get(c);if(v){let E;if(typeof v=="string"){const A=await $h(e,{idToken:v}).catch(()=>{});if(!A)break;E=await hr._fromGetAccountInfoResponse(e,A,v)}else E=hr._fromJSON(e,v);p!==l&&(m=E),l=p;break}}catch{}const g=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new _o(l,e,r):(l=g[0],m&&await l._set(c,m.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new _o(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QE(e))return"Blackberry";if(YE(e))return"Webos";if($E(e))return"Safari";if((e.includes("chrome/")||FE(e))&&!e.includes("edge/"))return"Chrome";if(KE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function HE(s=cn()){return/firefox\//i.test(s)}function $E(s=cn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function FE(s=cn()){return/crios\//i.test(s)}function GE(s=cn()){return/iemobile/i.test(s)}function KE(s=cn()){return/android/i.test(s)}function QE(s=cn()){return/blackberry/i.test(s)}function YE(s=cn()){return/webos/i.test(s)}function ip(s=cn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function rO(s=cn()){var e;return ip(s)&&!!((e=window.navigator)!=null&&e.standalone)}function sO(){return yC()&&document.documentMode===10}function XE(s=cn()){return ip(s)||KE(s)||YE(s)||QE(s)||/windows phone/i.test(s)||GE(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(s,e=[]){let t;switch(s){case"Browser":t=cb(cn());break;case"Worker":t=`${cb(cn())}-${s}`;break;default:t=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${zo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,m)=>{try{const g=e(l);c(g)}catch(g){m(g)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aO(s,e={}){return Bo(s,"GET","/v2/passwordPolicy",rp(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO=6;class lO{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??oO,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hb(this),this.idTokenSubscription=new hb(this),this.beforeStateQueue=new iO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ds(t)),this._initializationPromise=this.queue(async()=>{var r,a,l;if(!this._deleted&&(this.persistenceManager=await _o.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await $h(this,{idToken:e}),r=await hr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Pr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(m,m))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,m=r==null?void 0:r._redirectEventId,g=await this.tryRedirectSignIn(e);(!c||c===m)&&(g!=null&&g.user)&&(r=g.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Fh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pr(this.app))return Promise.reject(ra(this));const t=e?Hr(e):null;return t&&Ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pr(this.app)?Promise.reject(ra(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pr(this.app)?Promise.reject(ra(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aO(this),t=new lO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Au("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await nO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ds(e)||this._popupRedirectResolver;Ae(t,this,"argument-error"),this.redirectPersistenceManager=await _o.create(this,[ds(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(m,this,"internal-error"),m.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,r,a);return()=>{c=!0,g()}}else{const g=e.addObserver(t);return()=>{c=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=JE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Pr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&zI(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ap(s){return Hr(s)}class hb{constructor(e){this.auth=e,this.observer=null,this.addObserver=AC(t=>this.observer=t)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let op={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cO(s){op=s}function hO(s){return op.loadJS(s)}function dO(){return op.gapiScript}function fO(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(s,e){const t=Zg(s,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(aa(l,e??{}))return a;ms(a,"already-initialized")}return t.initialize({options:e})}function gO(s,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ds);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function pO(s,e,t){const r=ap(s);Ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=WE(e),{host:c,port:m}=yO(e),g=m===null?"":`:${m}`,p={url:`${l}//${c}${g}/`},v=Object.freeze({host:c,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Ae(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ae(aa(p,r.config.emulator)&&aa(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,Lo(c)?(CE(`${l}//${c}${g}`),IE("Auth",!0)):_O()}function WE(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function yO(s){const e=WE(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:db(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:db(c)}}}function db(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function _O(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return hs("not implemented")}_getIdTokenResponse(e){return hs("not implemented")}_linkToIdToken(e,t){return hs("not implemented")}_getReauthenticationResolver(e){return hs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vo(s,e){return KI(s,"POST","/v1/accounts:signInWithIdp",rp(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO="http://localhost";class la extends ZE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new la(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ms("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const c=new la(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return vo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,vo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,vo(e,t)}buildRequest(){const e={requestUri:vO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ru(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu extends eT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei extends Cu{constructor(){super("facebook.com")}static credential(e){return la._fromParams({providerId:ei.PROVIDER_ID,signInMethod:ei.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ei.credentialFromTaggedObject(e)}static credentialFromError(e){return ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ei.credential(e.oauthAccessToken)}catch{return null}}}ei.FACEBOOK_SIGN_IN_METHOD="facebook.com";ei.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends Cu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return la._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ti.credential(t,r)}catch{return null}}}ti.GOOGLE_SIGN_IN_METHOD="google.com";ti.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends Cu{constructor(){super("github.com")}static credential(e){return la._fromParams({providerId:ni.PROVIDER_ID,signInMethod:ni.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ni.credentialFromTaggedObject(e)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ni.credential(e.oauthAccessToken)}catch{return null}}}ni.GITHUB_SIGN_IN_METHOD="github.com";ni.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri extends Cu{constructor(){super("twitter.com")}static credential(e,t){return la._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ri.credentialFromTaggedObject(e)}static credentialFromError(e){return ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ri.credential(t,r)}catch{return null}}}ri.TWITTER_SIGN_IN_METHOD="twitter.com";ri.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await hr._fromIdTokenResponse(e,r,a),c=fb(r);return new Co({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=fb(r);return new Co({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function fb(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh extends ys{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Gh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new Gh(e,t,r,a)}}function tT(s,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Gh._fromErrorAndOperation(s,l,e,r):l})}async function bO(s,e,t=!1){const r=await _u(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Co._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wO(s,e,t=!1){const{auth:r}=s;if(Pr(r.app))return Promise.reject(ra(r));const a="reauthenticate";try{const l=await _u(s,tT(r,a,e,s),t);Ae(l.idToken,r,"internal-error");const c=sp(l.idToken);Ae(c,r,"internal-error");const{sub:m}=c;return Ae(s.uid===m,r,"user-mismatch"),Co._forOperation(s,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ms(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EO(s,e,t=!1){if(Pr(s.app))return Promise.reject(ra(s));const r="signIn",a=await tT(s,r,e),l=await Co._fromIdTokenResponse(s,r,a);return t||await s._updateCurrentUser(l.user),l}function TO(s,e,t,r){return Hr(s).onIdTokenChanged(e,t,r)}function SO(s,e,t){return Hr(s).beforeAuthStateChanged(e,t)}const Kh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Kh,"1"),this.storage.removeItem(Kh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=1e3,RO=10;class rT extends nT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=XE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,m,g)=>{this.notifyListeners(c,g)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);sO()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,RO):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},AO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}rT.type="LOCAL";const xO=rT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT extends nT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}sT.type="SESSION";const iT=sT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new od(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const m=Array.from(c).map(async p=>p(t.origin,l)),g=await CO(m);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}od.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(s="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((m,g)=>{const p=lp("",20);a.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(E){const A=E;if(A.data.eventId===p)switch(A.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(A.data.response);break;default:clearTimeout(v),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(){return window}function OO(s){Lr().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(){return typeof Lr().WorkerGlobalScope<"u"&&typeof Lr().importScripts=="function"}async function NO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DO(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function jO(){return aT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="firebaseLocalStorageDb",kO=1,Qh="firebaseLocalStorage",lT="fbase_key";class Iu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ld(s,e){return s.transaction([Qh],e?"readwrite":"readonly").objectStore(Qh)}function MO(){const s=indexedDB.deleteDatabase(oT);return new Iu(s).toPromise()}function _g(){const s=indexedDB.open(oT,kO);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Qh,{keyPath:lT})}catch(a){t(a)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Qh)?e(r):(r.close(),await MO(),e(await _g()))})})}async function mb(s,e,t){const r=ld(s,!0).put({[lT]:e,value:t});return new Iu(r).toPromise()}async function PO(s,e){const t=ld(s,!1).get(e),r=await new Iu(t).toPromise();return r===void 0?null:r.value}function gb(s,e){const t=ld(s,!0).delete(e);return new Iu(t).toPromise()}const VO=800,UO=3;class uT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _g(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>UO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=od._getInstance(jO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await NO(),!this.activeServiceWorker)return;this.sender=new IO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||DO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _g();return await mb(e,Kh,"1"),await gb(e,Kh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>mb(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>PO(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>gb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=ld(a,!1).getAll();return new Iu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),VO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uT.type="LOCAL";const LO=uT;new xu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(s,e){return e?ds(e):(Ae(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up extends ZE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return vo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return vo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function BO(s){return EO(s.auth,new up(s),s.bypassAuthState)}function qO(s){const{auth:e,user:t}=s;return Ae(t,e,"internal-error"),wO(t,new up(s),s.bypassAuthState)}async function HO(s){const{auth:e,user:t}=s;return Ae(t,e,"internal-error"),bO(t,new up(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:c,type:m}=e;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BO;case"linkViaPopup":case"linkViaRedirect":return HO;case"reauthViaPopup":case"reauthViaRedirect":return qO;default:ms(this.auth,"internal-error")}}resolve(e){gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=new xu(2e3,1e4);class go extends cT{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,go.currentPopupAction&&go.currentPopupAction.cancel(),go.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){gs(this.filter.length===1,"Popup operations only handle one event");const e=lp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ur(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ur(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,go.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ur(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$O.get())};e()}}go.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO="pendingRedirect",Ch=new Map;class GO extends cT{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ch.get(this.auth._key());if(!e){try{const r=await KO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ch.set(this.auth._key(),e)}return this.bypassAuthState||Ch.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KO(s,e){const t=XO(e),r=YO(s);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function QO(s,e){Ch.set(s._key(),e)}function YO(s){return ds(s._redirectPersistence)}function XO(s){return xh(FO,s.config.apiKey,s.name)}async function JO(s,e,t=!1){if(Pr(s.app))return Promise.reject(ra(s));const r=ap(s),a=zO(r,e),c=await new GO(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO=600*1e3;class ZO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!hT(e)){const a=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ur(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=WO&&this.cachedEventUids.clear(),this.cachedEventUids.has(pb(e))}saveEventToCache(e){this.cachedEventUids.add(pb(e)),this.lastProcessedEventTime=Date.now()}}function pb(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function hT({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function eN(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hT(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(s,e={}){return Bo(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rN=/^https?/;async function sN(s){if(s.config.emulator)return;const{authorizedDomains:e}=await tN(s);for(const t of e)try{if(iN(t))return}catch{}ms(s,"unauthorized-domain")}function iN(s){const e=pg(),{protocol:t,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const c=new URL(s);return c.hostname===""&&r===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!rN.test(t))return!1;if(nN.test(s))return r===s;const a=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=new xu(3e4,6e4);function yb(){const s=Lr().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function oN(s){return new Promise((e,t)=>{var a,l,c;function r(){yb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yb(),t(Ur(s,"network-request-failed"))},timeout:aN.get()})}if((l=(a=Lr().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Lr().gapi)!=null&&c.load)r();else{const m=fO("iframefcb");return Lr()[m]=()=>{gapi.load?r():t(Ur(s,"network-request-failed"))},hO(`${dO()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw Ih=null,e})}let Ih=null;function lN(s){return Ih=Ih||oN(s),Ih}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=new xu(5e3,15e3),cN="__/auth/iframe",hN="emulator/auth/iframe",dN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mN(s){const e=s.config;Ae(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?np(e,hN):`https://${s.config.authDomain}/${cN}`,r={apiKey:e.apiKey,appName:s.name,v:zo},a=fN.get(s.config.apiHost);a&&(r.eid=a);const l=s._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${Ru(r).slice(1)}`}async function gN(s){const e=await lN(s),t=Lr().gapi;return Ae(t,s,"internal-error"),e.open({where:document.body,url:mN(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dN,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=Ur(s,"network-request-failed"),m=Lr().setTimeout(()=>{l(c)},uN.get());function g(){Lr().clearTimeout(m),a(r)}r.ping(g).then(g,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yN=500,_N=600,vN="_blank",bN="http://localhost";class _b{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wN(s,e,t,r=yN,a=_N){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g={...pN,width:r.toString(),height:a.toString(),top:l,left:c},p=cn().toLowerCase();t&&(m=FE(p)?vN:t),HE(p)&&(e=e||bN,g.scrollbars="yes");const v=Object.entries(g).reduce((A,[x,j])=>`${A}${x}=${j},`,"");if(rO(p)&&m!=="_self")return EN(e||"",m),new _b(null);const E=window.open(e||"",m,v);Ae(E,s,"popup-blocked");try{E.focus()}catch{}return new _b(E)}function EN(s,e){const t=document.createElement("a");t.href=s,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN="__/auth/handler",SN="emulator/auth/handler",AN=encodeURIComponent("fac");async function vb(s,e,t,r,a,l){Ae(s.config.authDomain,s,"auth-domain-config-required"),Ae(s.config.apiKey,s,"invalid-api-key");const c={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:r,v:zo,eventId:a};if(e instanceof eT){e.setDefaultLanguage(s.languageCode),c.providerId=e.providerId||"",SC(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof Cu){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}s.tenantId&&(c.tid=s.tenantId);const m=c;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const g=await s._getAppCheckToken(),p=g?`#${AN}=${encodeURIComponent(g)}`:"";return`${RN(s)}?${Ru(m).slice(1)}${p}`}function RN({config:s}){return s.emulator?np(s,SN):`https://${s.authDomain}/${TN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="webStorageSupport";class xN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iT,this._completeRedirectFn=JO,this._overrideRedirectResult=QO}async _openPopup(e,t,r,a){var c;gs((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await vb(e,t,r,pg(),a);return wN(e,l,lp())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await vb(e,t,r,pg(),a);return OO(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(gs(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await gN(e),r=new ZO(e);return t.register("authEvent",a=>(Ae(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($m,{type:$m},a=>{var c;const l=(c=a==null?void 0:a[0])==null?void 0:c[$m];l!==void 0&&t(!!l),ms(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=sN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return XE()||$E()||ip()}}const CN=xN;var bb="@firebase/auth",wb="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NN(s){xo(new oa("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=r.options;Ae(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:c,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JE(s)},p=new uO(r,a,l,g);return gO(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),xo(new oa("auth-internal",e=>{const t=ap(e.getProvider("auth").getImmediate());return(r=>new IN(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),li(bb,wb,ON(s)),li(bb,wb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=300,jN=xE("authIdTokenMaxAge")||DN;let Eb=null;const kN=s=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>jN)return;const a=t==null?void 0:t.token;Eb!==a&&(Eb=a,await fetch(s,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function MN(s=ep()){const e=Zg(s,"auth");if(e.isInitialized())return e.getImmediate();const t=mO(s,{popupRedirectResolver:CN,persistence:[LO,xO,iT]}),r=xE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=kN(l.toString());SO(t,c,()=>c(t.currentUser)),TO(t,m=>c(m))}}const a=AE("auth");return a&&pO(t,`http://${a}`),t}function PN(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}cO({loadJS(s){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=a=>{const l=Ur("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",PN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NN("Browser");var Tb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ui,dT;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,C){function O(){}O.prototype=C.prototype,I.F=C.prototype,I.prototype=new O,I.prototype.constructor=I,I.D=function(U,M,B){for(var N=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)N[Qe-2]=arguments[Qe];return C.prototype[M].apply(U,N)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(I,C,O){O||(O=0);const U=Array(16);if(typeof C=="string")for(var M=0;M<16;++M)U[M]=C.charCodeAt(O++)|C.charCodeAt(O++)<<8|C.charCodeAt(O++)<<16|C.charCodeAt(O++)<<24;else for(M=0;M<16;++M)U[M]=C[O++]|C[O++]<<8|C[O++]<<16|C[O++]<<24;C=I.g[0],O=I.g[1],M=I.g[2];let B=I.g[3],N;N=C+(B^O&(M^B))+U[0]+3614090360&4294967295,C=O+(N<<7&4294967295|N>>>25),N=B+(M^C&(O^M))+U[1]+3905402710&4294967295,B=C+(N<<12&4294967295|N>>>20),N=M+(O^B&(C^O))+U[2]+606105819&4294967295,M=B+(N<<17&4294967295|N>>>15),N=O+(C^M&(B^C))+U[3]+3250441966&4294967295,O=M+(N<<22&4294967295|N>>>10),N=C+(B^O&(M^B))+U[4]+4118548399&4294967295,C=O+(N<<7&4294967295|N>>>25),N=B+(M^C&(O^M))+U[5]+1200080426&4294967295,B=C+(N<<12&4294967295|N>>>20),N=M+(O^B&(C^O))+U[6]+2821735955&4294967295,M=B+(N<<17&4294967295|N>>>15),N=O+(C^M&(B^C))+U[7]+4249261313&4294967295,O=M+(N<<22&4294967295|N>>>10),N=C+(B^O&(M^B))+U[8]+1770035416&4294967295,C=O+(N<<7&4294967295|N>>>25),N=B+(M^C&(O^M))+U[9]+2336552879&4294967295,B=C+(N<<12&4294967295|N>>>20),N=M+(O^B&(C^O))+U[10]+4294925233&4294967295,M=B+(N<<17&4294967295|N>>>15),N=O+(C^M&(B^C))+U[11]+2304563134&4294967295,O=M+(N<<22&4294967295|N>>>10),N=C+(B^O&(M^B))+U[12]+1804603682&4294967295,C=O+(N<<7&4294967295|N>>>25),N=B+(M^C&(O^M))+U[13]+4254626195&4294967295,B=C+(N<<12&4294967295|N>>>20),N=M+(O^B&(C^O))+U[14]+2792965006&4294967295,M=B+(N<<17&4294967295|N>>>15),N=O+(C^M&(B^C))+U[15]+1236535329&4294967295,O=M+(N<<22&4294967295|N>>>10),N=C+(M^B&(O^M))+U[1]+4129170786&4294967295,C=O+(N<<5&4294967295|N>>>27),N=B+(O^M&(C^O))+U[6]+3225465664&4294967295,B=C+(N<<9&4294967295|N>>>23),N=M+(C^O&(B^C))+U[11]+643717713&4294967295,M=B+(N<<14&4294967295|N>>>18),N=O+(B^C&(M^B))+U[0]+3921069994&4294967295,O=M+(N<<20&4294967295|N>>>12),N=C+(M^B&(O^M))+U[5]+3593408605&4294967295,C=O+(N<<5&4294967295|N>>>27),N=B+(O^M&(C^O))+U[10]+38016083&4294967295,B=C+(N<<9&4294967295|N>>>23),N=M+(C^O&(B^C))+U[15]+3634488961&4294967295,M=B+(N<<14&4294967295|N>>>18),N=O+(B^C&(M^B))+U[4]+3889429448&4294967295,O=M+(N<<20&4294967295|N>>>12),N=C+(M^B&(O^M))+U[9]+568446438&4294967295,C=O+(N<<5&4294967295|N>>>27),N=B+(O^M&(C^O))+U[14]+3275163606&4294967295,B=C+(N<<9&4294967295|N>>>23),N=M+(C^O&(B^C))+U[3]+4107603335&4294967295,M=B+(N<<14&4294967295|N>>>18),N=O+(B^C&(M^B))+U[8]+1163531501&4294967295,O=M+(N<<20&4294967295|N>>>12),N=C+(M^B&(O^M))+U[13]+2850285829&4294967295,C=O+(N<<5&4294967295|N>>>27),N=B+(O^M&(C^O))+U[2]+4243563512&4294967295,B=C+(N<<9&4294967295|N>>>23),N=M+(C^O&(B^C))+U[7]+1735328473&4294967295,M=B+(N<<14&4294967295|N>>>18),N=O+(B^C&(M^B))+U[12]+2368359562&4294967295,O=M+(N<<20&4294967295|N>>>12),N=C+(O^M^B)+U[5]+4294588738&4294967295,C=O+(N<<4&4294967295|N>>>28),N=B+(C^O^M)+U[8]+2272392833&4294967295,B=C+(N<<11&4294967295|N>>>21),N=M+(B^C^O)+U[11]+1839030562&4294967295,M=B+(N<<16&4294967295|N>>>16),N=O+(M^B^C)+U[14]+4259657740&4294967295,O=M+(N<<23&4294967295|N>>>9),N=C+(O^M^B)+U[1]+2763975236&4294967295,C=O+(N<<4&4294967295|N>>>28),N=B+(C^O^M)+U[4]+1272893353&4294967295,B=C+(N<<11&4294967295|N>>>21),N=M+(B^C^O)+U[7]+4139469664&4294967295,M=B+(N<<16&4294967295|N>>>16),N=O+(M^B^C)+U[10]+3200236656&4294967295,O=M+(N<<23&4294967295|N>>>9),N=C+(O^M^B)+U[13]+681279174&4294967295,C=O+(N<<4&4294967295|N>>>28),N=B+(C^O^M)+U[0]+3936430074&4294967295,B=C+(N<<11&4294967295|N>>>21),N=M+(B^C^O)+U[3]+3572445317&4294967295,M=B+(N<<16&4294967295|N>>>16),N=O+(M^B^C)+U[6]+76029189&4294967295,O=M+(N<<23&4294967295|N>>>9),N=C+(O^M^B)+U[9]+3654602809&4294967295,C=O+(N<<4&4294967295|N>>>28),N=B+(C^O^M)+U[12]+3873151461&4294967295,B=C+(N<<11&4294967295|N>>>21),N=M+(B^C^O)+U[15]+530742520&4294967295,M=B+(N<<16&4294967295|N>>>16),N=O+(M^B^C)+U[2]+3299628645&4294967295,O=M+(N<<23&4294967295|N>>>9),N=C+(M^(O|~B))+U[0]+4096336452&4294967295,C=O+(N<<6&4294967295|N>>>26),N=B+(O^(C|~M))+U[7]+1126891415&4294967295,B=C+(N<<10&4294967295|N>>>22),N=M+(C^(B|~O))+U[14]+2878612391&4294967295,M=B+(N<<15&4294967295|N>>>17),N=O+(B^(M|~C))+U[5]+4237533241&4294967295,O=M+(N<<21&4294967295|N>>>11),N=C+(M^(O|~B))+U[12]+1700485571&4294967295,C=O+(N<<6&4294967295|N>>>26),N=B+(O^(C|~M))+U[3]+2399980690&4294967295,B=C+(N<<10&4294967295|N>>>22),N=M+(C^(B|~O))+U[10]+4293915773&4294967295,M=B+(N<<15&4294967295|N>>>17),N=O+(B^(M|~C))+U[1]+2240044497&4294967295,O=M+(N<<21&4294967295|N>>>11),N=C+(M^(O|~B))+U[8]+1873313359&4294967295,C=O+(N<<6&4294967295|N>>>26),N=B+(O^(C|~M))+U[15]+4264355552&4294967295,B=C+(N<<10&4294967295|N>>>22),N=M+(C^(B|~O))+U[6]+2734768916&4294967295,M=B+(N<<15&4294967295|N>>>17),N=O+(B^(M|~C))+U[13]+1309151649&4294967295,O=M+(N<<21&4294967295|N>>>11),N=C+(M^(O|~B))+U[4]+4149444226&4294967295,C=O+(N<<6&4294967295|N>>>26),N=B+(O^(C|~M))+U[11]+3174756917&4294967295,B=C+(N<<10&4294967295|N>>>22),N=M+(C^(B|~O))+U[2]+718787259&4294967295,M=B+(N<<15&4294967295|N>>>17),N=O+(B^(M|~C))+U[9]+3951481745&4294967295,I.g[0]=I.g[0]+C&4294967295,I.g[1]=I.g[1]+(M+(N<<21&4294967295|N>>>11))&4294967295,I.g[2]=I.g[2]+M&4294967295,I.g[3]=I.g[3]+B&4294967295}r.prototype.v=function(I,C){C===void 0&&(C=I.length);const O=C-this.blockSize,U=this.C;let M=this.h,B=0;for(;B<C;){if(M==0)for(;B<=O;)a(this,I,B),B+=this.blockSize;if(typeof I=="string"){for(;B<C;)if(U[M++]=I.charCodeAt(B++),M==this.blockSize){a(this,U),M=0;break}}else for(;B<C;)if(U[M++]=I[B++],M==this.blockSize){a(this,U),M=0;break}}this.h=M,this.o+=C},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var C=1;C<I.length-8;++C)I[C]=0;C=this.o*8;for(var O=I.length-8;O<I.length;++O)I[O]=C&255,C/=256;for(this.v(I),I=Array(16),C=0,O=0;O<4;++O)for(let U=0;U<32;U+=8)I[C++]=this.g[O]>>>U&255;return I};function l(I,C){var O=m;return Object.prototype.hasOwnProperty.call(O,I)?O[I]:O[I]=C(I)}function c(I,C){this.h=C;const O=[];let U=!0;for(let M=I.length-1;M>=0;M--){const B=I[M]|0;U&&B==C||(O[M]=B,U=!1)}this.g=O}var m={};function g(I){return-128<=I&&I<128?l(I,function(C){return new c([C|0],C<0?-1:0)}):new c([I|0],I<0?-1:0)}function p(I){if(isNaN(I)||!isFinite(I))return E;if(I<0)return k(p(-I));const C=[];let O=1;for(let U=0;I>=O;U++)C[U]=I/O|0,O*=4294967296;return new c(C,0)}function v(I,C){if(I.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(I.charAt(0)=="-")return k(v(I.substring(1),C));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=p(Math.pow(C,8));let U=E;for(let B=0;B<I.length;B+=8){var M=Math.min(8,I.length-B);const N=parseInt(I.substring(B,B+M),C);M<8?(M=p(Math.pow(C,M)),U=U.j(M).add(p(N))):(U=U.j(O),U=U.add(p(N)))}return U}var E=g(0),A=g(1),x=g(16777216);s=c.prototype,s.m=function(){if(V(this))return-k(this).m();let I=0,C=1;for(let O=0;O<this.g.length;O++){const U=this.i(O);I+=(U>=0?U:4294967296+U)*C,C*=4294967296}return I},s.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(j(this))return"0";if(V(this))return"-"+k(this).toString(I);const C=p(Math.pow(I,6));var O=this;let U="";for(;;){const M=ae(O,C).g;O=H(O,M.j(C));let B=((O.g.length>0?O.g[0]:O.h)>>>0).toString(I);if(O=M,j(O))return B+U;for(;B.length<6;)B="0"+B;U=B+U}},s.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function j(I){if(I.h!=0)return!1;for(let C=0;C<I.g.length;C++)if(I.g[C]!=0)return!1;return!0}function V(I){return I.h==-1}s.l=function(I){return I=H(this,I),V(I)?-1:j(I)?0:1};function k(I){const C=I.g.length,O=[];for(let U=0;U<C;U++)O[U]=~I.g[U];return new c(O,~I.h).add(A)}s.abs=function(){return V(this)?k(this):this},s.add=function(I){const C=Math.max(this.g.length,I.g.length),O=[];let U=0;for(let M=0;M<=C;M++){let B=U+(this.i(M)&65535)+(I.i(M)&65535),N=(B>>>16)+(this.i(M)>>>16)+(I.i(M)>>>16);U=N>>>16,B&=65535,N&=65535,O[M]=N<<16|B}return new c(O,O[O.length-1]&-2147483648?-1:0)};function H(I,C){return I.add(k(C))}s.j=function(I){if(j(this)||j(I))return E;if(V(this))return V(I)?k(this).j(k(I)):k(k(this).j(I));if(V(I))return k(this.j(k(I)));if(this.l(x)<0&&I.l(x)<0)return p(this.m()*I.m());const C=this.g.length+I.g.length,O=[];for(var U=0;U<2*C;U++)O[U]=0;for(U=0;U<this.g.length;U++)for(let M=0;M<I.g.length;M++){const B=this.i(U)>>>16,N=this.i(U)&65535,Qe=I.i(M)>>>16,ot=I.i(M)&65535;O[2*U+2*M]+=N*ot,J(O,2*U+2*M),O[2*U+2*M+1]+=B*ot,J(O,2*U+2*M+1),O[2*U+2*M+1]+=N*Qe,J(O,2*U+2*M+1),O[2*U+2*M+2]+=B*Qe,J(O,2*U+2*M+2)}for(I=0;I<C;I++)O[I]=O[2*I+1]<<16|O[2*I];for(I=C;I<2*C;I++)O[I]=0;return new c(O,0)};function J(I,C){for(;(I[C]&65535)!=I[C];)I[C+1]+=I[C]>>>16,I[C]&=65535,C++}function Y(I,C){this.g=I,this.h=C}function ae(I,C){if(j(C))throw Error("division by zero");if(j(I))return new Y(E,E);if(V(I))return C=ae(k(I),C),new Y(k(C.g),k(C.h));if(V(C))return C=ae(I,k(C)),new Y(k(C.g),C.h);if(I.g.length>30){if(V(I)||V(C))throw Error("slowDivide_ only works with positive integers.");for(var O=A,U=C;U.l(I)<=0;)O=we(O),U=we(U);var M=ce(O,1),B=ce(U,1);for(U=ce(U,2),O=ce(O,2);!j(U);){var N=B.add(U);N.l(I)<=0&&(M=M.add(O),B=N),U=ce(U,1),O=ce(O,1)}return C=H(I,M.j(C)),new Y(M,C)}for(M=E;I.l(C)>=0;){for(O=Math.max(1,Math.floor(I.m()/C.m())),U=Math.ceil(Math.log(O)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),B=p(O),N=B.j(C);V(N)||N.l(I)>0;)O-=U,B=p(O),N=B.j(C);j(B)&&(B=A),M=M.add(B),I=H(I,N)}return new Y(M,I)}s.B=function(I){return ae(this,I).h},s.and=function(I){const C=Math.max(this.g.length,I.g.length),O=[];for(let U=0;U<C;U++)O[U]=this.i(U)&I.i(U);return new c(O,this.h&I.h)},s.or=function(I){const C=Math.max(this.g.length,I.g.length),O=[];for(let U=0;U<C;U++)O[U]=this.i(U)|I.i(U);return new c(O,this.h|I.h)},s.xor=function(I){const C=Math.max(this.g.length,I.g.length),O=[];for(let U=0;U<C;U++)O[U]=this.i(U)^I.i(U);return new c(O,this.h^I.h)};function we(I){const C=I.g.length+1,O=[];for(let U=0;U<C;U++)O[U]=I.i(U)<<1|I.i(U-1)>>>31;return new c(O,I.h)}function ce(I,C){const O=C>>5;C%=32;const U=I.g.length-O,M=[];for(let B=0;B<U;B++)M[B]=C>0?I.i(B+O)>>>C|I.i(B+O+1)<<32-C:I.i(B+O);return new c(M,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,dT=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=v,ui=c}).apply(typeof Tb<"u"?Tb:typeof self<"u"?self:typeof window<"u"?window:{});var bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fT,eu,mT,Oh,vg,gT,pT,yT;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof bh=="object"&&bh];for(var y=0;y<h.length;++y){var w=h[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function a(h,y){if(y)e:{var w=r;h=h.split(".");for(var R=0;R<h.length-1;R++){var q=h[R];if(!(q in w))break e;w=w[q]}h=h[h.length-1],R=w[h],y=y(R),y!=R&&y!=null&&e(w,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var w=[],R;for(R in y)Object.prototype.hasOwnProperty.call(y,R)&&w.push([R,y[R]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,w){return h.call.apply(h.bind,arguments)}function p(h,y,w){return p=g,p.apply(null,arguments)}function v(h,y){var w=Array.prototype.slice.call(arguments,1);return function(){var R=w.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function E(h,y){function w(){}w.prototype=y.prototype,h.Z=y.prototype,h.prototype=new w,h.prototype.constructor=h,h.Ob=function(R,q,Q){for(var oe=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)oe[Ne-2]=arguments[Ne];return y.prototype[q].apply(R,oe)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function x(h){const y=h.length;if(y>0){const w=Array(y);for(let R=0;R<y;R++)w[R]=h[R];return w}return[]}function j(h,y){for(let R=1;R<arguments.length;R++){const q=arguments[R];var w=typeof q;if(w=w!="object"?w:q?Array.isArray(q)?"array":w:"null",w=="array"||w=="object"&&typeof q.length=="number"){w=h.length||0;const Q=q.length||0;h.length=w+Q;for(let oe=0;oe<Q;oe++)h[w+oe]=q[oe]}else h.push(q)}}class V{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function k(h){c.setTimeout(()=>{throw h},0)}function H(){var h=I;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class J{constructor(){this.h=this.g=null}add(y,w){const R=Y.get();R.set(y,w),this.h?this.h.next=R:this.g=R,this.h=R}}var Y=new V(()=>new ae,h=>h.reset());class ae{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let we,ce=!1,I=new J,C=()=>{const h=Promise.resolve(void 0);we=()=>{h.then(O)}};function O(){for(var h;h=H();){try{h.h.call(h.g)}catch(w){k(w)}var y=Y;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}ce=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};c.addEventListener("test",w,y),c.removeEventListener("test",w,y)}catch{}return h})();function N(h){return/^[\s\xa0]*$/.test(h)}function Qe(h,y){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(Qe,M),Qe.prototype.init=function(h,y){const w=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(w=="mouseover"?y=h.fromElement:w=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Qe.Z.h.call(this)},Qe.prototype.h=function(){Qe.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ot="closure_listenable_"+(Math.random()*1e6|0),K=0;function re(h,y,w,R,q){this.listener=h,this.proxy=null,this.src=y,this.type=w,this.capture=!!R,this.ha=q,this.key=++K,this.da=this.fa=!1}function ue(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Re(h,y,w){for(const R in h)y.call(w,h[R],R,h)}function Pe(h,y){for(const w in h)y.call(void 0,h[w],w,h)}function S(h){const y={};for(const w in h)y[w]=h[w];return y}const L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ne(h,y){let w,R;for(let q=1;q<arguments.length;q++){R=arguments[q];for(w in R)h[w]=R[w];for(let Q=0;Q<L.length;Q++)w=L[Q],Object.prototype.hasOwnProperty.call(R,w)&&(h[w]=R[w])}}function se(h){this.src=h,this.g={},this.h=0}se.prototype.add=function(h,y,w,R,q){const Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);const oe=ge(h,y,R,q);return oe>-1?(y=h[oe],w||(y.fa=!1)):(y=new re(y,this.src,Q,!!R,q),y.fa=w,h.push(y)),y};function le(h,y){const w=y.type;if(w in h.g){var R=h.g[w],q=Array.prototype.indexOf.call(R,y,void 0),Q;(Q=q>=0)&&Array.prototype.splice.call(R,q,1),Q&&(ue(y),h.g[w].length==0&&(delete h.g[w],h.h--))}}function ge(h,y,w,R){for(let q=0;q<h.length;++q){const Q=h[q];if(!Q.da&&Q.listener==y&&Q.capture==!!w&&Q.ha==R)return q}return-1}var be="closure_lm_"+(Math.random()*1e6|0),Me={};function xe(h,y,w,R,q){if(Array.isArray(y)){for(let Q=0;Q<y.length;Q++)xe(h,y[Q],w,R,q);return null}return w=Yo(w),h&&h[ot]?h.J(y,w,m(R)?!!R.capture:!1,q):Lt(h,y,w,!1,R,q)}function Lt(h,y,w,R,q,Q){if(!y)throw Error("Invalid event type");const oe=m(q)?!!q.capture:!!q;let Ne=yi(h);if(Ne||(h[be]=Ne=new se(h)),w=Ne.add(y,w,R,oe,Q),w.proxy)return w;if(R=da(),w.proxy=R,R.src=h,R.listener=w,h.addEventListener)B||(q=oe),q===void 0&&(q=!1),h.addEventListener(y.toString(),R,q);else if(h.attachEvent)h.attachEvent(fr(y.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return w}function da(){function h(w){return y.call(h.src,h.listener,w)}const y=Ko;return h}function fa(h,y,w,R,q){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)fa(h,y[Q],w,R,q);else R=m(R)?!!R.capture:!!R,w=Yo(w),h&&h[ot]?(h=h.i,Q=String(y).toString(),Q in h.g&&(y=h.g[Q],w=ge(y,w,R,q),w>-1&&(ue(y[w]),Array.prototype.splice.call(y,w,1),y.length==0&&(delete h.g[Q],h.h--)))):h&&(h=yi(h))&&(y=h.g[y.toString()],h=-1,y&&(h=ge(y,w,R,q)),(w=h>-1?y[h]:null)&&ma(w))}function ma(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[ot])le(y.i,h);else{var w=h.type,R=h.proxy;y.removeEventListener?y.removeEventListener(w,R,h.capture):y.detachEvent?y.detachEvent(fr(w),R):y.addListener&&y.removeListener&&y.removeListener(R),(w=yi(y))?(le(w,h),w.h==0&&(w.src=null,y[be]=null)):ue(h)}}}function fr(h){return h in Me?Me[h]:Me[h]="on"+h}function Ko(h,y){if(h.da)h=!0;else{y=new Qe(y,this);const w=h.listener,R=h.ha||h.src;h.fa&&ma(h),h=w.call(R,y)}return h}function yi(h){return h=h[be],h instanceof se?h:null}var Qo="__closure_events_fn_"+(Math.random()*1e9>>>0);function Yo(h){return typeof h=="function"?h:(h[Qo]||(h[Qo]=function(y){return h.handleEvent(y)}),h[Qo])}function Rt(){U.call(this),this.i=new se(this),this.M=this,this.G=null}E(Rt,U),Rt.prototype[ot]=!0,Rt.prototype.removeEventListener=function(h,y,w,R){fa(this,h,y,w,R)};function zt(h,y){var w,R=h.G;if(R)for(w=[];R;R=R.G)w.push(R);if(h=h.M,R=y.type||y,typeof y=="string")y=new M(y,h);else if(y instanceof M)y.target=y.target||h;else{var q=y;y=new M(R,h),ne(y,q)}q=!0;let Q,oe;if(w)for(oe=w.length-1;oe>=0;oe--)Q=y.g=w[oe],q=_s(Q,R,!0,y)&&q;if(Q=y.g=h,q=_s(Q,R,!0,y)&&q,q=_s(Q,R,!1,y)&&q,w)for(oe=0;oe<w.length;oe++)Q=y.g=w[oe],q=_s(Q,R,!1,y)&&q}Rt.prototype.N=function(){if(Rt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const w=h.g[y];for(let R=0;R<w.length;R++)ue(w[R]);delete h.g[y],h.h--}}this.G=null},Rt.prototype.J=function(h,y,w,R){return this.i.add(String(h),y,!1,w,R)},Rt.prototype.K=function(h,y,w,R){return this.i.add(String(h),y,!0,w,R)};function _s(h,y,w,R){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let q=!0;for(let Q=0;Q<y.length;++Q){const oe=y[Q];if(oe&&!oe.da&&oe.capture==w){const Ne=oe.listener,wt=oe.ha||oe.src;oe.fa&&le(h.i,oe),q=Ne.call(wt,R)!==!1&&q}}return q&&!R.defaultPrevented}function Td(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function ku(h){h.g=Td(()=>{h.g=null,h.i&&(h.i=!1,ku(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class hn extends U{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ku(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _i(h){U.call(this),this.h=h,this.g={}}E(_i,U);var Xo=[];function Jo(h){Re(h.g,function(y,w){this.g.hasOwnProperty(w)&&ma(y)},h),h.g={}}_i.prototype.N=function(){_i.Z.N.call(this),Jo(this)},_i.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vs=c.JSON.stringify,Sd=c.JSON.parse,Mu=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Pu(){}function Vu(){}var Xn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Qt(){M.call(this,"d")}E(Qt,M);function Pn(){M.call(this,"c")}E(Pn,M);var bt={},Uu=null;function ga(){return Uu=Uu||new Rt}bt.Ia="serverreachability";function Lu(h){M.call(this,bt.Ia,h)}E(Lu,M);function mr(h){const y=ga();zt(y,new Lu(y))}bt.STAT_EVENT="statevent";function vi(h,y){M.call(this,bt.STAT_EVENT,h),this.stat=y}E(vi,M);function xt(h){const y=ga();zt(y,new vi(y,h))}bt.Ja="timingevent";function gr(h,y){M.call(this,bt.Ja,h),this.size=y}E(gr,M);function pr(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function Jn(){this.g=!0}Jn.prototype.ua=function(){this.g=!1};function Ad(h,y,w,R,q,Q){h.info(function(){if(h.g)if(Q){var oe="",Ne=Q.split("&");for(let Je=0;Je<Ne.length;Je++){var wt=Ne[Je].split("=");if(wt.length>1){const dt=wt[0];wt=wt[1];const zn=dt.split("_");oe=zn.length>=2&&zn[1]=="type"?oe+(dt+"="+wt+"&"):oe+(dt+"=redacted&")}}}else oe=null;else oe=Q;return"XMLHTTP REQ ("+R+") [attempt "+q+"]: "+y+`
`+w+`
`+oe})}function zu(h,y,w,R,q,Q,oe){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+q+"]: "+y+`
`+w+`
`+Q+" "+oe})}function yr(h,y,w,R){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Rd(h,w)+(R?" "+R:"")})}function bi(h,y){h.info(function(){return"TIMEOUT: "+y})}Jn.prototype.info=function(){};function Rd(h,y){if(!h.g)return y;if(!y)return null;try{const Q=JSON.parse(y);if(Q){for(h=0;h<Q.length;h++)if(Array.isArray(Q[h])){var w=Q[h];if(!(w.length<2)){var R=w[1];if(Array.isArray(R)&&!(R.length<1)){var q=R[0];if(q!="noop"&&q!="stop"&&q!="close")for(let oe=1;oe<R.length;oe++)R[oe]=""}}}}return vs(Q)}catch{return y}}var wi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Wo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Zo;function Ei(){}E(Ei,Pu),Ei.prototype.g=function(){return new XMLHttpRequest},Zo=new Ei;function Fr(h){return encodeURIComponent(String(h))}function Bu(h){var y=1;h=h.split(":");const w=[];for(;y>0&&h.length;)w.push(h.shift()),y--;return h.length&&w.push(h.join(":")),w}function Wn(h,y,w,R){this.j=h,this.i=y,this.l=w,this.S=R||1,this.V=new _i(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zn}function Zn(){this.i=null,this.g="",this.h=!1}var Ct={},$t={};function _r(h,y,w){h.M=1,h.A=Ti(Ot(y)),h.u=w,h.R=!0,pa(h,null)}function pa(h,y){h.F=Date.now(),vr(h),h.B=Ot(h.A);var w=h.B,R=h.S;Array.isArray(R)||(R=[String(R)]),ba(w.i,"t",R),h.C=0,w=h.j.L,h.h=new Zn,h.g=nc(h.j,w?y:null,!h.u),h.P>0&&(h.O=new hn(p(h.Y,h,h.g),h.P)),y=h.V,w=h.g,R=h.ba;var q="readystatechange";Array.isArray(q)||(q&&(Xo[0]=q.toString()),q=Xo);for(let Q=0;Q<q.length;Q++){const oe=xe(w,q[Q],R||y.handleEvent,!1,y.h||y);if(!oe)break;y.g[oe.key]=oe}y=h.J?S(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),mr(),Ad(h.i,h.v,h.B,h.l,h.S,h.u)}Wn.prototype.ba=function(h){h=h.target;const y=this.O;y&&nr(h)==3?y.j():this.Y(h)},Wn.prototype.Y=function(h){try{if(h==this.g)e:{const Ne=nr(this.g),wt=this.g.ya(),Je=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||Yt(this.g)))){this.K||Ne!=4||wt==7||(wt==8||Je<=0?mr(3):mr(2)),br(this);var y=this.g.ca();this.X=y;var w=xd(this);if(this.o=y==200,zu(this.i,this.v,this.B,this.l,this.S,Ne,y),this.o){if(this.U&&!this.L){t:{if(this.g){var R,q=this.g;if((R=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(R)){var Q=R;break t}}Q=null}if(h=Q)yr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wr(this,h);else{this.o=!1,this.m=3,xt(12),Sn(this),Vn(this);break e}}if(this.R){h=!0;let dt;for(;!this.K&&this.C<w.length;)if(dt=Hu(this,w),dt==$t){Ne==4&&(this.m=4,xt(14),h=!1),yr(this.i,this.l,null,"[Incomplete Response]");break}else if(dt==Ct){this.m=4,xt(15),yr(this.i,this.l,w,"[Invalid Chunk]"),h=!1;break}else yr(this.i,this.l,dt,null),wr(this,dt);if(qu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||w.length!=0||this.h.h||(this.m=1,xt(16),h=!1),this.o=this.o&&h,!h)yr(this.i,this.l,w,"[Invalid Chunked Response]"),Sn(this),Vn(this);else if(w.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),ml(oe),oe.P=!0,xt(11))}}else yr(this.i,this.l,w,null),wr(this,w);Ne==4&&Sn(this),this.o&&!this.K&&(Ne==4?Wu(this.j,this):(this.o=!1,vr(this)))}else Kr(this.g),y==400&&w.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),Sn(this),Vn(this)}}}catch{}finally{}};function xd(h){if(!qu(h))return h.g.la();const y=Yt(h.g);if(y==="")return"";let w="";const R=y.length,q=nr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Sn(h),Vn(h),"";h.h.i=new c.TextDecoder}for(let Q=0;Q<R;Q++)h.h.h=!0,w+=h.h.i.decode(y[Q],{stream:!(q&&Q==R-1)});return y.length=0,h.h.g+=w,h.C=0,h.h.g}function qu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Hu(h,y){var w=h.C,R=y.indexOf(`
`,w);return R==-1?$t:(w=Number(y.substring(w,R)),isNaN(w)?Ct:(R+=1,R+w>y.length?$t:(y=y.slice(R,R+w),h.C=R+w,y)))}Wn.prototype.cancel=function(){this.K=!0,Sn(this)};function vr(h){h.T=Date.now()+h.H,ya(h,h.H)}function ya(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=pr(p(h.aa,h),y)}function br(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Wn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(bi(this.i,this.B),this.M!=2&&(mr(),xt(17)),Sn(this),this.m=2,Vn(this)):ya(this,this.T-h)};function Vn(h){h.j.I==0||h.K||Wu(h.j,h)}function Sn(h){br(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Jo(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function wr(h,y){try{var w=h.j;if(w.I!=0&&(w.g==h||Tr(w.h,h))){if(!h.L&&Tr(w.h,h)&&w.I==3){try{var R=w.Ba.g.parse(y)}catch{R=null}if(Array.isArray(R)&&R.length==3){var q=R;if(q[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<h.F)Aa(w),xs(w);else break e;Oi(w),xt(18)}}else w.xa=q[1],0<w.xa-w.K&&q[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=pr(p(w.Va,w),6e3));Er(w.h)<=1&&w.ta&&(w.ta=void 0)}else Ir(w,11)}else if((h.L||w.g==h)&&Aa(w),!N(y))for(q=w.Ba.g.parse(y),y=0;y<q.length;y++){let Je=q[y];const dt=Je[0];if(!(dt<=w.K))if(w.K=dt,Je=Je[1],w.I==2)if(Je[0]=="c"){w.M=Je[1],w.ba=Je[2];const zn=Je[3];zn!=null&&(w.ka=zn,w.j.info("VER="+w.ka));const Or=Je[4];Or!=null&&(w.za=Or,w.j.info("SVER="+w.za));const rr=Je[5];rr!=null&&typeof rr=="number"&&rr>0&&(R=1.5*rr,w.O=R,w.j.info("backChannelRequestTimeoutMs_="+R)),R=w;const sr=h.g;if(sr){const Ni=sr.g?sr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ni){var Q=R.h;Q.g||Ni.indexOf("spdy")==-1&&Ni.indexOf("quic")==-1&&Ni.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(nl(Q,Q.h),Q.h=null))}if(R.G){const Ra=sr.g?sr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ra&&(R.wa=Ra,Ze(R.J,R.G,Ra))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-h.F,w.j.info("Handshake RTT: "+w.T+"ms")),R=w;var oe=h;if(R.na=tc(R,R.L?R.ba:null,R.W),oe.L){rl(R.h,oe);var Ne=oe,wt=R.O;wt&&(Ne.H=wt),Ne.D&&(br(Ne),vr(Ne)),R.g=oe}else Xu(R);w.i.length>0&&Cr(w)}else Je[0]!="stop"&&Je[0]!="close"||Ir(w,7);else w.I==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?Ir(w,7):dl(w):Je[0]!="noop"&&w.l&&w.l.qa(Je),w.A=0)}}mr(4)}catch{}}var It=class{constructor(h,y){this.g=h,this.map=y}};function el(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function tl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Er(h){return h.h?1:h.g?h.g.size:0}function Tr(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function nl(h,y){h.g?h.g.add(y):h.h=y}function rl(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}el.prototype.cancel=function(){if(this.i=sl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function sl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const w of h.g.values())y=y.concat(w.G);return y}return x(h.i)}var $u=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _a(h,y){if(h){h=h.split("&");for(let w=0;w<h.length;w++){const R=h[w].indexOf("=");let q,Q=null;R>=0?(q=h[w].substring(0,R),Q=h[w].substring(R+1)):q=h[w],y(q,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function An(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof An?(this.l=h.l,Ft(this,h.j),this.o=h.o,this.g=h.g,bs(this,h.u),this.h=h.h,il(this,Qu(h.i)),this.m=h.m):h&&(y=String(h).match($u))?(this.l=!1,Ft(this,y[1]||"",!0),this.o=Sr(y[2]||""),this.g=Sr(y[3]||"",!0),bs(this,y[4]),this.h=Sr(y[5]||"",!0),il(this,y[6]||"",!0),this.m=Sr(y[7]||"")):(this.l=!1,this.i=new Es(null,this.l))}An.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Si(y,va,!0),":");var w=this.g;return(w||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Si(y,va,!0),"@"),h.push(Fr(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&h.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(Si(w,w.charAt(0)=="/"?al:Fu,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",Si(w,Gu)),h.join("")},An.prototype.resolve=function(h){const y=Ot(this);let w=!!h.j;w?Ft(y,h.j):w=!!h.o,w?y.o=h.o:w=!!h.g,w?y.g=h.g:w=h.u!=null;var R=h.h;if(w)bs(y,h.u);else if(w=!!h.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var q=y.h.lastIndexOf("/");q!=-1&&(R=y.h.slice(0,q+1)+R)}if(q=R,q==".."||q==".")R="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){R=q.lastIndexOf("/",0)==0,q=q.split("/");const Q=[];for(let oe=0;oe<q.length;){const Ne=q[oe++];Ne=="."?R&&oe==q.length&&Q.push(""):Ne==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),R&&oe==q.length&&Q.push("")):(Q.push(Ne),R=!0)}R=Q.join("/")}else R=q}return w?y.h=R:w=h.i.toString()!=="",w?il(y,Qu(h.i)):w=!!h.m,w&&(y.m=h.m),y};function Ot(h){return new An(h)}function Ft(h,y,w){h.j=w?Sr(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function bs(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function il(h,y,w){y instanceof Es?(h.i=y,wa(h.i,h.l)):(w||(y=Si(y,ws)),h.i=new Es(y,h.l))}function Ze(h,y,w){h.i.set(y,w)}function Ti(h){return Ze(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Sr(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Si(h,y,w){return typeof h=="string"?(h=encodeURI(h).replace(y,pn),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function pn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var va=/[#\/\?@]/g,Fu=/[#\?:]/g,al=/[#\?]/g,ws=/[#\?@]/g,Gu=/#/g;function Es(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function yn(h){h.g||(h.g=new Map,h.h=0,h.i&&_a(h.i,function(y,w){h.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}s=Es.prototype,s.add=function(h,y){yn(this),this.i=null,h=Ts(this,h);let w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(y),this.h+=1,this};function Ku(h,y){yn(h),y=Ts(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function ol(h,y){return yn(h),y=Ts(h,y),h.g.has(y)}s.forEach=function(h,y){yn(this),this.g.forEach(function(w,R){w.forEach(function(q){h.call(y,q,R,this)},this)},this)};function ll(h,y){yn(h);let w=[];if(typeof y=="string")ol(h,y)&&(w=w.concat(h.g.get(Ts(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)w=w.concat(h[y]);return w}s.set=function(h,y){return yn(this),this.i=null,h=Ts(this,h),ol(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=ll(this,h),h.length>0?String(h[0]):y):y};function ba(h,y,w){Ku(h,y),w.length>0&&(h.i=null,h.g.set(Ts(h,y),x(w)),h.h+=w.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let R=0;R<y.length;R++){var w=y[R];const q=Fr(w);w=ll(this,w);for(let Q=0;Q<w.length;Q++){let oe=q;w[Q]!==""&&(oe+="="+Fr(w[Q])),h.push(oe)}}return this.i=h.join("&")};function Qu(h){const y=new Es;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Ts(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function wa(h,y){y&&!h.j&&(yn(h),h.i=null,h.g.forEach(function(w,R){const q=R.toLowerCase();R!=q&&(Ku(this,R),ba(this,q,w))},h)),h.j=y}function er(h,y){const w=new Jn;if(c.Image){const R=new Image;R.onload=v(Un,w,"TestLoadImage: loaded",!0,y,R),R.onerror=v(Un,w,"TestLoadImage: error",!1,y,R),R.onabort=v(Un,w,"TestLoadImage: abort",!1,y,R),R.ontimeout=v(Un,w,"TestLoadImage: timeout",!1,y,R),c.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else y(!1)}function ul(h,y){const w=new Jn,R=new AbortController,q=setTimeout(()=>{R.abort(),Un(w,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:R.signal}).then(Q=>{clearTimeout(q),Q.ok?Un(w,"TestPingServer: ok",!0,y):Un(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),Un(w,"TestPingServer: error",!1,y)})}function Un(h,y,w,R,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),R(w)}catch{}}function Ss(){this.g=new Mu}function Ar(h){this.i=h.Sb||null,this.h=h.ab||!1}E(Ar,Pu),Ar.prototype.g=function(){return new Ai(this.i,this.h)};function Ai(h,y){Rt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Ai,Rt),s=Ai.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,tr(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,As(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,tr(this)),this.g&&(this.readyState=3,tr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ea(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ea(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?As(this):tr(this),this.readyState==3&&Ea(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,As(this))},s.Na=function(h){this.g&&(this.response=h,As(this))},s.ga=function(){this.g&&As(this)};function As(h){h.readyState=4,h.l=null,h.j=null,h.B=null,tr(h)}s.setRequestHeader=function(h,y){this.A.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=y.next();return h.join(`\r
`)};function tr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ai.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ln(h){let y="";return Re(h,function(w,R){y+=R,y+=":",y+=w,y+=`\r
`}),y}function Ri(h,y,w){e:{for(R in w){var R=!1;break e}R=!0}R||(w=Ln(w),typeof h=="string"?w!=null&&Fr(w):Ze(h,y,w))}function nt(h){Rt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(nt,Rt);var Rr=/^https?$/i,cl=["POST","PUT"];s=nt.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,y,w,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Zo.g(),this.g.onreadystatechange=A(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Q){xi(this,Q);return}if(h=w||"",w=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var q in R)w.set(q,R[q]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const Q of R.keys())w.set(Q,R.get(Q));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(w.keys()).find(Q=>Q.toLowerCase()=="content-type"),q=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(cl,y,void 0)>=0)||R||q||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,oe]of w)this.g.setRequestHeader(Q,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Q){xi(this,Q)}};function xi(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,hl(h),Gr(h)}function hl(h){h.A||(h.A=!0,zt(h,"complete"),zt(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,zt(this,"complete"),zt(this,"abort"),Gr(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gr(this,!0)),nt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Ci(this):this.Xa())},s.Xa=function(){Ci(this)};function Ci(h){if(h.h&&typeof l<"u"){if(h.v&&nr(h)==4)setTimeout(h.Ca.bind(h),0);else if(zt(h,"readystatechange"),nr(h)==4){h.h=!1;try{const Q=h.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var R;if(R=Q===0){let oe=String(h.D).match($u)[1]||null;!oe&&c.self&&c.self.location&&(oe=c.self.location.protocol.slice(0,-1)),R=!Rr.test(oe?oe.toLowerCase():"")}w=R}if(w)zt(h,"complete"),zt(h,"success");else{h.o=6;try{var q=nr(h)>2?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.ca()+"]",hl(h)}}finally{Gr(h)}}}}function Gr(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const w=h.g;h.g=null,y||zt(h,"ready");try{w.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function nr(h){return h.g?h.g.readyState:0}s.ca=function(){try{return nr(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Sd(y)}};function Yt(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Kr(h){const y={};h=(h.g&&nr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(N(h[R]))continue;var w=Bu(h[R]);const q=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const Q=y[q]||[];y[q]=Q,Q.push(w)}Pe(y,function(R){return R.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xr(h,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||y}function Rs(h){this.za=0,this.i=[],this.j=new Jn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xr("baseRetryDelayMs",5e3,h),this.Za=xr("retryDelaySeedMs",1e4,h),this.Ta=xr("forwardChannelMaxRetries",2,h),this.va=xr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new el(h&&h.concurrentRequestLimit),this.Ba=new Ss,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Rs.prototype,s.ka=8,s.I=1,s.connect=function(h,y,w,R){xt(0),this.W=h,this.H=y||{},w&&R!==void 0&&(this.H.OSID=w,this.H.OAID=R),this.F=this.X,this.J=tc(this,null,this.W),Cr(this)};function dl(h){if(Ta(h),h.I==3){var y=h.V++,w=Ot(h.J);if(Ze(w,"SID",h.M),Ze(w,"RID",y),Ze(w,"TYPE","terminate"),Ii(h,w),y=new Wn(h,h.j,y),y.M=2,y.A=Ti(Ot(w)),w=!1,c.navigator&&c.navigator.sendBeacon)try{w=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!w&&c.Image&&(new Image().src=y.A,w=!0),w||(y.g=nc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),vr(y)}ec(h)}function xs(h){h.g&&(ml(h),h.g.cancel(),h.g=null)}function Ta(h){xs(h),h.v&&(c.clearTimeout(h.v),h.v=null),Aa(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Cr(h){if(!tl(h.h)&&!h.m){h.m=!0;var y=h.Ea;we||C(),ce||(we(),ce=!0),I.add(y,h),h.D=0}}function Sa(h,y){return Er(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=pr(p(h.Ea,h,y),Zu(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const q=new Wn(this,this.j,h);let Q=this.o;if(this.U&&(Q?(Q=S(Q),ne(Q,this.U)):Q=this.U),this.u!==null||this.R||(q.J=Q,Q=null),this.S)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var R=this.i[w];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(y+=R,y>4096){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=Yu(this,q,y),w=Ot(this.J),Ze(w,"RID",h),Ze(w,"CVER",22),this.G&&Ze(w,"X-HTTP-Session-Id",this.G),Ii(this,w),Q&&(this.R?y="headers="+Fr(Ln(Q))+"&"+y:this.u&&Ri(w,this.u,Q)),nl(this.h,q),this.Ra&&Ze(w,"TYPE","init"),this.S?(Ze(w,"$req",y),Ze(w,"SID","null"),q.U=!0,_r(q,w,null)):_r(q,w,y),this.I=2}}else this.I==3&&(h?fl(this,h):this.i.length==0||tl(this.h)||fl(this))};function fl(h,y){var w;y?w=y.l:w=h.V++;const R=Ot(h.J);Ze(R,"SID",h.M),Ze(R,"RID",w),Ze(R,"AID",h.K),Ii(h,R),h.u&&h.o&&Ri(R,h.u,h.o),w=new Wn(h,h.j,w,h.D+1),h.u===null&&(w.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Yu(h,w,1e3),w.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),nl(h.h,w),_r(w,R,y)}function Ii(h,y){h.H&&Re(h.H,function(w,R){Ze(y,R,w)}),h.l&&Re({},function(w,R){Ze(y,R,w)})}function Yu(h,y,w){w=Math.min(h.i.length,w);const R=h.l?p(h.l.Ka,h.l,h):null;e:{var q=h.i;let Ne=-1;for(;;){const wt=["count="+w];Ne==-1?w>0?(Ne=q[0].g,wt.push("ofs="+Ne)):Ne=0:wt.push("ofs="+Ne);let Je=!0;for(let dt=0;dt<w;dt++){var Q=q[dt].g;const zn=q[dt].map;if(Q-=Ne,Q<0)Ne=Math.max(0,q[dt].g-100),Je=!1;else try{Q="req"+Q+"_"||"";try{var oe=zn instanceof Map?zn:Object.entries(zn);for(const[Or,rr]of oe){let sr=rr;m(rr)&&(sr=vs(rr)),wt.push(Q+Or+"="+encodeURIComponent(sr))}}catch(Or){throw wt.push(Q+"type="+encodeURIComponent("_badmap")),Or}}catch{R&&R(zn)}}if(Je){oe=wt.join("&");break e}}oe=void 0}return h=h.i.splice(0,w),y.G=h,oe}function Xu(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;we||C(),ce||(we(),ce=!0),I.add(y,h),h.A=0}}function Oi(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=pr(p(h.Da,h),Zu(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Ju(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=pr(p(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),xs(this),Ju(this))};function ml(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Ju(h){h.g=new Wn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Ot(h.na);Ze(y,"RID","rpc"),Ze(y,"SID",h.M),Ze(y,"AID",h.K),Ze(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ze(y,"TO",h.ia),Ze(y,"TYPE","xmlhttp"),Ii(h,y),h.u&&h.o&&Ri(y,h.u,h.o),h.O&&(h.g.H=h.O);var w=h.g;h=h.ba,w.M=1,w.A=Ti(Ot(y)),w.u=null,w.R=!0,pa(w,h)}s.Va=function(){this.C!=null&&(this.C=null,xs(this),Oi(this),xt(19))};function Aa(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Wu(h,y){var w=null;if(h.g==y){Aa(h),ml(h),h.g=null;var R=2}else if(Tr(h.h,y))w=y.G,rl(h.h,y),R=1;else return;if(h.I!=0){if(y.o)if(R==1){w=y.u?y.u.length:0,y=Date.now()-y.F;var q=h.D;R=ga(),zt(R,new gr(R,w)),Cr(h)}else Xu(h);else if(q=y.m,q==3||q==0&&y.X>0||!(R==1&&Sa(h,y)||R==2&&Oi(h)))switch(w&&w.length>0&&(y=h.h,y.i=y.i.concat(w)),q){case 1:Ir(h,5);break;case 4:Ir(h,10);break;case 3:Ir(h,6);break;default:Ir(h,2)}}}function Zu(h,y){let w=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(w*=2),w*y}function Ir(h,y){if(h.j.info("Error code "+y),y==2){var w=p(h.bb,h),R=h.Ua;const q=!R;R=new An(R||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ft(R,"https"),Ti(R),q?er(R.toString(),w):ul(R.toString(),w)}else xt(2);h.I=0,h.l&&h.l.pa(y),ec(h),Ta(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function ec(h){if(h.I=0,h.ja=[],h.l){const y=sl(h.h);(y.length!=0||h.i.length!=0)&&(j(h.ja,y),j(h.ja,h.i),h.h.i.length=0,x(h.i),h.i.length=0),h.l.oa()}}function tc(h,y,w){var R=w instanceof An?Ot(w):new An(w);if(R.g!="")y&&(R.g=y+"."+R.g),bs(R,R.u);else{var q=c.location;R=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;const Q=new An(null);R&&Ft(Q,R),y&&(Q.g=y),q&&bs(Q,q),w&&(Q.h=w),R=Q}return w=h.G,y=h.wa,w&&y&&Ze(R,w,y),Ze(R,"VER",h.ka),Ii(h,R),R}function nc(h,y,w){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new nt(new Ar({ab:w})):new nt(h.ma),y.Fa(h.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function rc(){}s=rc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Cs(){}Cs.prototype.g=function(h,y){return new dn(h,y)};function dn(h,y){Rt.call(this),this.g=new Rs(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!N(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!N(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Qr(this)}E(dn,Rt),dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){dl(this.g)},dn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.v&&(w={},w.__data__=vs(h),h=w);y.i.push(new It(y.Ya++,h)),y.I==3&&Cr(y)},dn.prototype.N=function(){this.g.l=null,delete this.j,dl(this.g),delete this.g,dn.Z.N.call(this)};function sc(h){Qt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const w in y){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(sc,Qt);function ic(){Pn.call(this),this.status=1}E(ic,Pn);function Qr(h){this.g=h}E(Qr,rc),Qr.prototype.ra=function(){zt(this.g,"a")},Qr.prototype.qa=function(h){zt(this.g,new sc(h))},Qr.prototype.pa=function(h){zt(this.g,new ic)},Qr.prototype.oa=function(){zt(this.g,"b")},Cs.prototype.createWebChannel=Cs.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,yT=function(){return new Cs},pT=function(){return ga()},gT=bt,vg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},wi.NO_ERROR=0,wi.TIMEOUT=8,wi.HTTP_ERROR=6,Oh=wi,Wo.COMPLETE="complete",mT=Wo,Vu.EventType=Xn,Xn.OPEN="a",Xn.CLOSE="b",Xn.ERROR="c",Xn.MESSAGE="d",Rt.prototype.listen=Rt.prototype.J,eu=Vu,nt.prototype.listenOnce=nt.prototype.K,nt.prototype.getLastError=nt.prototype.Ha,nt.prototype.getLastErrorCode=nt.prototype.ya,nt.prototype.getStatus=nt.prototype.ca,nt.prototype.getResponseJson=nt.prototype.La,nt.prototype.getResponseText=nt.prototype.la,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Fa,fT=nt}).apply(typeof bh<"u"?bh:typeof self<"u"?self:typeof window<"u"?window:{});const Sb="@firebase/firestore",Ab="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=new Jg("@firebase/firestore");function co(){return ua.logLevel}function he(s,...e){if(ua.logLevel<=qe.DEBUG){const t=e.map(cp);ua.debug(`Firestore (${qo}): ${s}`,...t)}}function ps(s,...e){if(ua.logLevel<=qe.ERROR){const t=e.map(cp);ua.error(`Firestore (${qo}): ${s}`,...t)}}function Io(s,...e){if(ua.logLevel<=qe.WARN){const t=e.map(cp);ua.warn(`Firestore (${qo}): ${s}`,...t)}}function cp(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(s,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,_T(s,r,t)}function _T(s,e,t){let r=`FIRESTORE (${qo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ps(r),new Error(r)}function yt(s,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,s||_T(e,a,r)}function Ge(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends ys{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(on.UNAUTHENTICATED)))}shutdown(){}}class UN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class LN{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){yt(this.o===void 0,42304);let r=this.i;const a=g=>this.i!==r?(r=this.i,t(g)):Promise.resolve();let l=new sa;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new sa,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await a(this.currentUser)}))},m=g=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new sa)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yt(typeof r.accessToken=="string",31837,{l:r}),new vT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return yt(e===null||typeof e=="string",2055,{h:e}),new on(e)}}class zN{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class BN{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new zN(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Rb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){yt(this.o===void 0,3512);const r=l=>{l.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,he("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Rb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(yt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Rb(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=HN(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function $e(s,e){return s<e?-1:s>e?1:0}function bg(s,e){const t=Math.min(s.length,e.length);for(let r=0;r<t;r++){const a=s.charAt(r),l=e.charAt(r);if(a!==l)return Fm(a)===Fm(l)?$e(a,l):Fm(a)?1:-1}return $e(s.length,e.length)}const $N=55296,FN=57343;function Fm(s){const e=s.charCodeAt(0);return e>=$N&&e<=FN}function Oo(s,e,t){return s.length===e.length&&s.every(((r,a)=>t(r,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="__name__";class Mr{constructor(e,t,r){t===void 0?t=0:t>e.length&&Oe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Oe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Mr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=Mr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return $e(e.length,t.length)}static compareSegments(e,t){const r=Mr.isNumericId(e),a=Mr.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?Mr.extractNumericId(e).compare(Mr.extractNumericId(t)):bg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ui.fromString(e.substring(4,e.length-2))}}class mt extends Mr{construct(e,t,r){return new mt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new mt(t)}static emptyPath(){return new mt([])}}const GN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class un extends Mr{construct(e,t,r){return new un(e,t,r)}static isValidIdentifier(e){return GN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),un.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xb}static keyField(){return new un([xb])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new de(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new de(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new de(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,a+=2}else m==="`"?(c=!c,a++):m!=="."||c?(r+=m,a++):(l(),a++)}if(l(),c)throw new de(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new un(t)}static emptyPath(){return new un([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(mt.fromString(e))}static fromName(e){return new Te(mt.fromString(e).popFirst(5))}static empty(){return new Te(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new mt(e.slice()))}}function KN(s,e,t,r){if(e===!0&&r===!0)throw new de(ie.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function Cb(s){if(Te.isDocumentKey(s))throw new de(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function wT(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function ud(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Oe(12329,{type:typeof s})}function wg(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new de(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ud(s);throw new de(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(s,e){const t={typeString:s};return e&&(t.value=e),t}function Ou(s,e){if(!wT(s))throw new de(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){t=`JSON missing required field: '${r}'`;break}const c=s[r];if(a&&typeof c!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new de(ie.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib=-62135596800,Ob=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Ob);return new gt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ib)throw new de(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ob}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ou(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ib;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:Ut("string",gt._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new gt(0,0))}static max(){return new Ie(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu=-1;function QN(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,a=Ie.fromTimestamp(r===1e9?new gt(t+1,0):new gt(t,r));return new ci(a,Te.empty(),e)}function YN(s){return new ci(s.readTime,s.key,vu)}class ci{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ci(Ie.min(),Te.empty(),vu)}static max(){return new ci(Ie.max(),Te.empty(),vu)}}function XN(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(s.documentKey,e.documentKey),t!==0?t:$e(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cd(s){if(s.code!==ie.FAILED_PRECONDITION||s.message!==JN)throw s;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):te.reject(t)}static resolve(e){return new te(((t,r)=>{t(e)}))}static reject(e){return new te(((t,r)=>{r(e)}))}static waitFor(e){return new te(((t,r)=>{let a=0,l=0,c=!1;e.forEach((m=>{++a,m.next((()=>{++l,c&&l===a&&t()}),(g=>r(g)))})),c=!0,l===a&&t()}))}static or(e){let t=te.resolve(!1);for(const r of e)t=t.next((a=>a?te.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new te(((r,a)=>{const l=e.length,c=new Array(l);let m=0;for(let g=0;g<l;g++){const p=g;t(e[p]).next((v=>{c[p]=v,++m,m===l&&r(c)}),(v=>a(v)))}}))}static doWhile(e,t){return new te(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}function ZN(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ho(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}hd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=-1;function dd(s){return s==null}function Yh(s){return s===0&&1/s==-1/0}function tD(s){return typeof s=="number"&&Number.isInteger(s)&&!Yh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="";function nD(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=Nb(e)),e=rD(s.get(t),e);return Nb(e)}function rD(s,e){let t=e;const r=s.length;for(let a=0;a<r;a++){const l=s.charAt(a);switch(l){case"\0":t+="";break;case ET:t+="";break;default:t+=l}}return t}function Nb(s){return s+ET+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function $o(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function TT(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,t){this.comparator=e,this.root=t||tn.EMPTY}insert(e,t){return new At(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wh(this.root,e,this.comparator,!1)}getReverseIterator(){return new wh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wh(this.root,e,this.comparator,!0)}}class wh{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??tn.RED,this.left=a??tn.EMPTY,this.right=l??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new tn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return tn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Oe(27949);return e+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe(57766)}get value(){throw Oe(16141)}get color(){throw Oe(16727)}get left(){throw Oe(29726)}get right(){throw Oe(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new tn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jb(this.data.getIterator())}getIteratorFrom(e){return new jb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Ht)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ht(this.comparator);return t.data=e,t}}class jb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this.fields=e,e.sort(un.comparator)}static empty(){return new si([])}unionWith(e){let t=new Ht(un.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new si(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Oo(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new ST("Invalid base64 string: "+l):l}})(e);return new nn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const sD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hi(s){if(yt(!!s,39018),typeof s=="string"){let e=0;const t=sD.exec(s);if(yt(!!t,46558,{timestamp:s}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:St(s.seconds),nanos:St(s.nanos)}}function St(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function di(s){return typeof s=="string"?nn.fromBase64String(s):nn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="server_timestamp",RT="__type__",xT="__previous_value__",CT="__local_write_time__";function hp(s){var t,r;return((r=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[RT])==null?void 0:r.stringValue)===AT}function fd(s){const e=s.mapValue.fields[xT];return hp(e)?fd(e):e}function bu(s){const e=hi(s.mapValue.fields[CT].timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,t,r,a,l,c,m,g,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=v}}const Xh="(default)";class wu{constructor(e,t){this.projectId=e,this.database=t||Xh}static empty(){return new wu("","")}get isDefaultDatabase(){return this.database===Xh}isEqual(e){return e instanceof wu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="__type__",aD="__max__",Eh={mapValue:{}},OT="__vector__",Jh="value";function fi(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?hp(s)?4:lD(s)?9007199254740991:oD(s)?10:11:Oe(28295,{value:s})}function $r(s,e){if(s===e)return!0;const t=fi(s);if(t!==fi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return bu(s).isEqual(bu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=hi(a.timestampValue),m=hi(l.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(a,l){return di(a.bytesValue).isEqual(di(l.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(a,l){return St(a.geoPointValue.latitude)===St(l.geoPointValue.latitude)&&St(a.geoPointValue.longitude)===St(l.geoPointValue.longitude)})(s,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return St(a.integerValue)===St(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=St(a.doubleValue),m=St(l.doubleValue);return c===m?Yh(c)===Yh(m):isNaN(c)&&isNaN(m)}return!1})(s,e);case 9:return Oo(s.arrayValue.values||[],e.arrayValue.values||[],$r);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},m=l.mapValue.fields||{};if(Db(c)!==Db(m))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(m[g]===void 0||!$r(c[g],m[g])))return!1;return!0})(s,e);default:return Oe(52216,{left:s})}}function Eu(s,e){return(s.values||[]).find((t=>$r(t,e)))!==void 0}function No(s,e){if(s===e)return 0;const t=fi(s),r=fi(e);if(t!==r)return $e(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return $e(s.booleanValue,e.booleanValue);case 2:return(function(l,c){const m=St(l.integerValue||l.doubleValue),g=St(c.integerValue||c.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,e);case 3:return kb(s.timestampValue,e.timestampValue);case 4:return kb(bu(s),bu(e));case 5:return bg(s.stringValue,e.stringValue);case 6:return(function(l,c){const m=di(l),g=di(c);return m.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(l,c){const m=l.split("/"),g=c.split("/");for(let p=0;p<m.length&&p<g.length;p++){const v=$e(m[p],g[p]);if(v!==0)return v}return $e(m.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(l,c){const m=$e(St(l.latitude),St(c.latitude));return m!==0?m:$e(St(l.longitude),St(c.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Mb(s.arrayValue,e.arrayValue);case 10:return(function(l,c){var A,x,j,V;const m=l.fields||{},g=c.fields||{},p=(A=m[Jh])==null?void 0:A.arrayValue,v=(x=g[Jh])==null?void 0:x.arrayValue,E=$e(((j=p==null?void 0:p.values)==null?void 0:j.length)||0,((V=v==null?void 0:v.values)==null?void 0:V.length)||0);return E!==0?E:Mb(p,v)})(s.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Eh.mapValue&&c===Eh.mapValue)return 0;if(l===Eh.mapValue)return 1;if(c===Eh.mapValue)return-1;const m=l.fields||{},g=Object.keys(m),p=c.fields||{},v=Object.keys(p);g.sort(),v.sort();for(let E=0;E<g.length&&E<v.length;++E){const A=bg(g[E],v[E]);if(A!==0)return A;const x=No(m[g[E]],p[v[E]]);if(x!==0)return x}return $e(g.length,v.length)})(s.mapValue,e.mapValue);default:throw Oe(23264,{he:t})}}function kb(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return $e(s,e);const t=hi(s),r=hi(e),a=$e(t.seconds,r.seconds);return a!==0?a:$e(t.nanos,r.nanos)}function Mb(s,e){const t=s.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=No(t[a],r[a]);if(l)return l}return $e(t.length,r.length)}function Do(s){return Eg(s)}function Eg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const r=hi(t);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return di(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return Te.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=Eg(l);return r+"]"})(s.arrayValue):"mapValue"in s?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${Eg(t.fields[c])}`;return a+"}"})(s.mapValue):Oe(61005,{value:s})}function Nh(s){switch(fi(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=fd(s);return e?16+Nh(e):16;case 5:return 2*s.stringValue.length;case 6:return di(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+Nh(l)),0)})(s.arrayValue);case 10:case 11:return(function(r){let a=0;return $o(r.fields,((l,c)=>{a+=l.length+Nh(c)})),a})(s.mapValue);default:throw Oe(13486,{value:s})}}function Pb(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Tg(s){return!!s&&"integerValue"in s}function dp(s){return!!s&&"arrayValue"in s}function Vb(s){return!!s&&"nullValue"in s}function Ub(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Gm(s){return!!s&&"mapValue"in s}function oD(s){var t,r;return((r=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[IT])==null?void 0:r.stringValue)===OT}function ou(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return $o(s.mapValue.fields,((t,r)=>e.mapValue.fields[t]=ou(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ou(s.arrayValue.values[t]);return e}return{...s}}function lD(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===aD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this.value=e}static empty(){return new Vr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Gm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ou(t)}setAll(e){let t=un.emptyPath(),r={},a=[];e.forEach(((c,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,r,a),r={},a=[],t=m.popLast()}c?r[m.lastSegment()]=ou(c):a.push(m.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());Gm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $r(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Gm(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){$o(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new Vr(ou(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,t,r,a,l,c,m){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=m}static newInvalidDocument(e){return new ln(e,0,Ie.min(),Ie.min(),Ie.min(),Vr.empty(),0)}static newFoundDocument(e,t,r,a){return new ln(e,1,t,Ie.min(),r,a,0)}static newNoDocument(e,t){return new ln(e,2,t,Ie.min(),Ie.min(),Vr.empty(),0)}static newUnknownDocument(e,t){return new ln(e,3,t,Ie.min(),Ie.min(),Vr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,t){this.position=e,this.inclusive=t}}function Lb(s,e,t){let r=0;for(let a=0;a<s.position.length;a++){const l=e[a],c=s.position[a];if(l.field.isKeyField()?r=Te.comparator(Te.fromName(c.referenceValue),t.key):r=No(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function zb(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!$r(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,t="asc"){this.field=e,this.dir=t}}function uD(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{}class Vt extends NT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new hD(e,t,r):t==="array-contains"?new mD(e,r):t==="in"?new gD(e,r):t==="not-in"?new pD(e,r):t==="array-contains-any"?new yD(e,r):new Vt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new dD(e,r):new fD(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(No(t,this.value)):t!==null&&fi(this.value)===fi(t)&&this.matchesComparison(No(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dr extends NT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new dr(e,t)}matches(e){return DT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function DT(s){return s.op==="and"}function jT(s){return cD(s)&&DT(s)}function cD(s){for(const e of s.filters)if(e instanceof dr)return!1;return!0}function Sg(s){if(s instanceof Vt)return s.field.canonicalString()+s.op.toString()+Do(s.value);if(jT(s))return s.filters.map((e=>Sg(e))).join(",");{const e=s.filters.map((t=>Sg(t))).join(",");return`${s.op}(${e})`}}function kT(s,e){return s instanceof Vt?(function(r,a){return a instanceof Vt&&r.op===a.op&&r.field.isEqual(a.field)&&$r(r.value,a.value)})(s,e):s instanceof dr?(function(r,a){return a instanceof dr&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,c,m)=>l&&kT(c,a.filters[m])),!0):!1})(s,e):void Oe(19439)}function MT(s){return s instanceof Vt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Do(t.value)}`})(s):s instanceof dr?(function(t){return t.op.toString()+" {"+t.getFilters().map(MT).join(" ,")+"}"})(s):"Filter"}class hD extends Vt{constructor(e,t,r){super(e,t,r),this.key=Te.fromName(r.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class dD extends Vt{constructor(e,t){super(e,"in",t),this.keys=PT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class fD extends Vt{constructor(e,t){super(e,"not-in",t),this.keys=PT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function PT(s,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>Te.fromName(r.referenceValue)))}class mD extends Vt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dp(t)&&Eu(t.arrayValue,this.value)}}class gD extends Vt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Eu(this.value.arrayValue,t)}}class pD extends Vt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Eu(this.value.arrayValue,t)}}class yD extends Vt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Eu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e,t=null,r=[],a=[],l=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=m,this.Te=null}}function Bb(s,e=null,t=[],r=[],a=null,l=null,c=null){return new _D(s,e,t,r,a,l,c)}function fp(s){const e=Ge(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Sg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),dd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Do(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Do(r))).join(",")),e.Te=t}return e.Te}function mp(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!uD(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!kT(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!zb(s.startAt,e.startAt)&&zb(s.endAt,e.endAt)}function Ag(s){return Te.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,t=null,r=[],a=[],l=null,c="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function vD(s,e,t,r,a,l,c,m){return new Fo(s,e,t,r,a,l,c,m)}function VT(s){return new Fo(s)}function qb(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function UT(s){return s.collectionGroup!==null}function lu(s){const e=Ge(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new Ht(un.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Tu(l,r))})),t.has(un.keyField().canonicalString())||e.Ie.push(new Tu(un.keyField(),r))}return e.Ie}function zr(s){const e=Ge(s);return e.Ee||(e.Ee=bD(e,lu(s))),e.Ee}function bD(s,e){if(s.limitType==="F")return Bb(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Tu(a.field,l)}));const t=s.endAt?new Wh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Wh(s.startAt.position,s.startAt.inclusive):null;return Bb(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function Rg(s,e){const t=s.filters.concat([e]);return new Fo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function xg(s,e,t){return new Fo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function md(s,e){return mp(zr(s),zr(e))&&s.limitType===e.limitType}function LT(s){return`${fp(zr(s))}|lt:${s.limitType}`}function ho(s){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>MT(a))).join(", ")}]`),dd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>Do(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>Do(a))).join(",")),`Target(${r})`})(zr(s))}; limitType=${s.limitType})`}function gd(s,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Te.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(s,e)&&(function(r,a){for(const l of lu(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(s,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(s,e)&&(function(r,a){return!(r.startAt&&!(function(c,m,g){const p=Lb(c,m,g);return c.inclusive?p<=0:p<0})(r.startAt,lu(r),a)||r.endAt&&!(function(c,m,g){const p=Lb(c,m,g);return c.inclusive?p>=0:p>0})(r.endAt,lu(r),a))})(s,e)}function wD(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function zT(s){return(e,t)=>{let r=!1;for(const a of lu(s)){const l=ED(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function ED(s,e,t){const r=s.field.isKeyField()?Te.comparator(e.key,t.key):(function(l,c,m){const g=c.data.field(l),p=m.data.field(l);return g!==null&&p!==null?No(g,p):Oe(42886)})(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return Oe(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){$o(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return TT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD=new At(Te.comparator);function mi(){return TD}const BT=new At(Te.comparator);function tu(...s){let e=BT;for(const t of s)e=e.insert(t.key,t);return e}function SD(s){let e=BT;return s.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function ta(){return uu()}function qT(){return uu()}function uu(){return new ca((s=>s.toString()),((s,e)=>s.isEqual(e)))}const AD=new Ht(Te.comparator);function Ke(...s){let e=AD;for(const t of s)e=e.add(t);return e}const RD=new Ht($e);function xD(){return RD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yh(e)?"-0":e}}function HT(s){return{integerValue:""+s}}function CD(s,e){return tD(e)?HT(e):gp(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(){this._=void 0}}function ID(s,e,t){return s instanceof Cg?(function(a,l){const c={fields:{[RT]:{stringValue:AT},[CT]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&hp(l)&&(l=fd(l)),l&&(c.fields[xT]=l),{mapValue:c}})(t,e):s instanceof Zh?$T(s,e):s instanceof ed?FT(s,e):(function(a,l){const c=ND(a,l),m=Hb(c)+Hb(a.Ae);return Tg(c)&&Tg(a.Ae)?HT(m):gp(a.serializer,m)})(s,e)}function OD(s,e,t){return s instanceof Zh?$T(s,e):s instanceof ed?FT(s,e):t}function ND(s,e){return s instanceof Ig?(function(r){return Tg(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class Cg extends pd{}class Zh extends pd{constructor(e){super(),this.elements=e}}function $T(s,e){const t=GT(e);for(const r of s.elements)t.some((a=>$r(a,r)))||t.push(r);return{arrayValue:{values:t}}}class ed extends pd{constructor(e){super(),this.elements=e}}function FT(s,e){let t=GT(e);for(const r of s.elements)t=t.filter((a=>!$r(a,r)));return{arrayValue:{values:t}}}class Ig extends pd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Hb(s){return St(s.integerValue||s.doubleValue)}function GT(s){return dp(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function DD(s,e){return s.field.isEqual(e.field)&&(function(r,a){return r instanceof Zh&&a instanceof Zh||r instanceof ed&&a instanceof ed?Oo(r.elements,a.elements,$r):r instanceof Ig&&a instanceof Ig?$r(r.Ae,a.Ae):r instanceof Cg&&a instanceof Cg})(s.transform,e.transform)}class ia{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ia}static exists(e){return new ia(void 0,e)}static updateTime(e){return new ia(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class pp{}function KT(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new kD(s.key,ia.none()):new yp(s.key,s.data,ia.none());{const t=s.data,r=Vr.empty();let a=new Ht(un.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new yd(s.key,r,new si(a.toArray()),ia.none())}}function jD(s,e,t){s instanceof yp?(function(a,l,c){const m=a.value.clone(),g=Fb(a.fieldTransforms,l,c.transformResults);m.setAll(g),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(s,e,t):s instanceof yd?(function(a,l,c){if(!Dh(a.precondition,l))return void l.convertToUnknownDocument(c.version);const m=Fb(a.fieldTransforms,l,c.transformResults),g=l.data;g.setAll(QT(a)),g.setAll(m),l.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(s,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function cu(s,e,t,r){return s instanceof yp?(function(l,c,m,g){if(!Dh(l.precondition,c))return m;const p=l.value.clone(),v=Gb(l.fieldTransforms,g,c);return p.setAll(v),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(s,e,t,r):s instanceof yd?(function(l,c,m,g){if(!Dh(l.precondition,c))return m;const p=Gb(l.fieldTransforms,g,c),v=c.data;return v.setAll(QT(l)),v.setAll(p),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(s,e,t,r):(function(l,c,m){return Dh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(s,e,t)}function $b(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Oo(r,a,((l,c)=>DD(l,c)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class yp extends pp{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class yd extends pp{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function QT(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}})),e}function Fb(s,e,t){const r=new Map;yt(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let a=0;a<t.length;a++){const l=s[a],c=l.transform,m=e.data.field(l.field);r.set(l.field,OD(c,m,t[a]))}return r}function Gb(s,e,t){const r=new Map;for(const a of s){const l=a.transform,c=t.data.field(a.field);r.set(a.field,ID(l,c,e))}return r}class kD extends pp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&jD(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=cu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=cu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=qT();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let m=this.applyToLocalView(c,l.mutatedFields);m=t.has(a.key)?null:m;const g=KT(c,m);g!==null&&r.set(a.key,g),c.isValidDocument()||c.convertToNoDocument(Ie.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ke())}isEqual(e){return this.batchId===e.batchId&&Oo(this.mutations,e.mutations,((t,r)=>$b(t,r)))&&Oo(this.baseMutations,e.baseMutations,((t,r)=>$b(t,r)))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt,Fe;function YT(s){if(s===void 0)return ps("GRPC error has no .code"),ie.UNKNOWN;switch(s){case Mt.OK:return ie.OK;case Mt.CANCELLED:return ie.CANCELLED;case Mt.UNKNOWN:return ie.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return ie.INTERNAL;case Mt.UNAVAILABLE:return ie.UNAVAILABLE;case Mt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Mt.NOT_FOUND:return ie.NOT_FOUND;case Mt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Mt.ABORTED:return ie.ABORTED;case Mt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Mt.DATA_LOSS:return ie.DATA_LOSS;default:return Oe(39323,{code:s})}}(Fe=Mt||(Mt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD=new ui([4294967295,4294967295],0);function Kb(s){const e=UD().encode(s),t=new dT;return t.update(e),new Uint8Array(t.digest())}function Qb(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ui([t,r],0),new ui([a,l],0)]}class _p{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new nu(`Invalid padding: ${t}`);if(r<0)throw new nu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new nu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new nu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ui.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(ui.fromNumber(r)));return a.compare(LD)===1&&(a=new ui([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Kb(e),[r,a]=Qb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);if(!this.we(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new _p(l,a,t);return r.forEach((m=>c.insert(m))),c}insert(e){if(this.ge===0)return;const t=Kb(e),[r,a]=Qb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class nu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Nu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new _d(Ie.min(),a,new At($e),mi(),Ke())}}class Nu{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Nu(r,t,Ke(),Ke(),Ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,t,r,a){this.be=e,this.removedTargetIds=t,this.key=r,this.De=a}}class XT{constructor(e,t){this.targetId=e,this.Ce=t}}class JT{constructor(e,t,r=nn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class Yb{constructor(){this.ve=0,this.Fe=Xb(),this.Me=nn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ke(),t=Ke(),r=Ke();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:Oe(38017,{changeType:l})}})),new Nu(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Xb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,yt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class zD{constructor(e){this.Ge=e,this.ze=new Map,this.je=mi(),this.Je=Th(),this.He=Th(),this.Ye=new At($e)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Oe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Ag(l))if(r===0){const c=new Te(l.path);this.et(t,c,ln.newNoDocument(c,Ie.min()))}else yt(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const m=this.ut(e),g=m?this.ct(m,e,c):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,m;try{c=di(r).toUint8Array()}catch(g){if(g instanceof ST)return Io("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new _p(c,a,l)}catch(g){return Io(g instanceof nu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const m=this.ot(c);if(m){if(l.current&&Ag(m.target)){const g=new Te(m.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,ln.newNoDocument(g,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let r=Ke();this.He.forEach(((l,c)=>{let m=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new _d(e,t,this.Ye,this.je,r);return this.je=mi(),this.Je=Th(),this.He=Th(),this.Ye=new At($e),a}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Yb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ht($e),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ht($e),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Yb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Th(){return new At(Te.comparator)}function Xb(){return new At(Te.comparator)}const BD={asc:"ASCENDING",desc:"DESCENDING"},qD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HD={and:"AND",or:"OR"};class $D{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Og(s,e){return s.useProto3Json||dd(e)?e:{value:e}}function Ng(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WT(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function bo(s){return yt(!!s,49232),Ie.fromTimestamp((function(t){const r=hi(t);return new gt(r.seconds,r.nanos)})(s))}function ZT(s,e){return Dg(s,e).canonicalString()}function Dg(s,e){const t=(function(a){return new mt(["projects",a.projectId,"databases",a.database])})(s).child("documents");return e===void 0?t:t.child(e)}function eS(s){const e=mt.fromString(s);return yt(iS(e),10190,{key:e.toString()}),e}function Km(s,e){const t=eS(e);if(t.get(1)!==s.databaseId.projectId)throw new de(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new de(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Te(nS(t))}function tS(s,e){return ZT(s.databaseId,e)}function FD(s){const e=eS(s);return e.length===4?mt.emptyPath():nS(e)}function Jb(s){return new mt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function nS(s){return yt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function GD(s,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Oe(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,v){return p.useProto3Json?(yt(v===void 0||typeof v=="string",58123),nn.fromBase64String(v||"")):(yt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),nn.fromUint8Array(v||new Uint8Array))})(s,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&(function(p){const v=p.code===void 0?ie.UNKNOWN:YT(p.code);return new de(v,p.message||"")})(c);t=new JT(r,a,l,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=Km(s,r.document.name),l=bo(r.document.updateTime),c=r.document.createTime?bo(r.document.createTime):Ie.min(),m=new Vr({mapValue:{fields:r.document.fields}}),g=ln.newFoundDocument(a,l,c,m),p=r.targetIds||[],v=r.removedTargetIds||[];t=new jh(p,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=Km(s,r.document),l=r.readTime?bo(r.readTime):Ie.min(),c=ln.newNoDocument(a,l),m=r.removedTargetIds||[];t=new jh([],m,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=Km(s,r.document),l=r.removedTargetIds||[];t=new jh([],l,a,null)}else{if(!("filter"in e))return Oe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new VD(a,l),m=r.targetId;t=new XT(m,c)}}return t}function KD(s,e){return{documents:[tS(s,e.path)]}}function QD(s,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=tS(s,a);const l=(function(p){if(p.length!==0)return sS(dr.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((v=>(function(A){return{field:fo(A.field),direction:JD(A.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const m=Og(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:a}}function YD(s){let e=FD(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){yt(r===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const A=rS(E);return A instanceof dr&&jT(A)?A.getFilters():[A]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((A=>(function(j){return new Tu(mo(j.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(A)))})(t.orderBy));let m=null;t.limit&&(m=(function(E){let A;return A=typeof E=="object"?E.value:E,dd(A)?null:A})(t.limit));let g=null;t.startAt&&(g=(function(E){const A=!!E.before,x=E.values||[];return new Wh(x,A)})(t.startAt));let p=null;return t.endAt&&(p=(function(E){const A=!E.before,x=E.values||[];return new Wh(x,A)})(t.endAt)),vD(e,a,c,l,m,"F",g,p)}function XD(s,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function rS(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=mo(t.unaryFilter.field);return Vt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=mo(t.unaryFilter.field);return Vt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=mo(t.unaryFilter.field);return Vt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=mo(t.unaryFilter.field);return Vt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Oe(61313);default:return Oe(60726)}})(s):s.fieldFilter!==void 0?(function(t){return Vt.create(mo(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Oe(58110);default:return Oe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return dr.create(t.compositeFilter.filters.map((r=>rS(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Oe(1026)}})(t.compositeFilter.op))})(s):Oe(30097,{filter:s})}function JD(s){return BD[s]}function WD(s){return qD[s]}function ZD(s){return HD[s]}function fo(s){return{fieldPath:s.canonicalString()}}function mo(s){return un.fromServerFormat(s.fieldPath)}function sS(s){return s instanceof Vt?(function(t){if(t.op==="=="){if(Ub(t.value))return{unaryFilter:{field:fo(t.field),op:"IS_NAN"}};if(Vb(t.value))return{unaryFilter:{field:fo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ub(t.value))return{unaryFilter:{field:fo(t.field),op:"IS_NOT_NAN"}};if(Vb(t.value))return{unaryFilter:{field:fo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fo(t.field),op:WD(t.op),value:t.value}}})(s):s instanceof dr?(function(t){const r=t.getFilters().map((a=>sS(a)));return r.length===1?r[0]:{compositeFilter:{op:ZD(t.op),filters:r}}})(s):Oe(54877,{filter:s})}function iS(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,t,r,a,l=Ie.min(),c=Ie.min(),m=nn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new ii(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e){this.yt=e}}function tj(s){const e=YD({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?xg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(){this.Cn=new rj}addToCollectionParentIndex(e,t){return this.Cn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(ci.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(ci.min())}updateCollectionGroup(e,t,r){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class rj{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new Ht(mt.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Ht(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},aS=41943040;class Tn{static withCacheSize(e){return new Tn(e,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tn.DEFAULT_COLLECTION_PERCENTILE=10,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tn.DEFAULT=new Tn(aS,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tn.DISABLED=new Tn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new jo(0)}static cr(){return new jo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="LruGarbageCollector",sj=1048576;function ew([s,e],[t,r]){const a=$e(s,t);return a===0?$e(e,r):a}class ij{constructor(e){this.Ir=e,this.buffer=new Ht(ew),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ew(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class aj{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(Zb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ho(t)?he(Zb,"Ignoring IndexedDB error during garbage collection: ",t):await cd(t)}await this.Vr(3e5)}))}}class oj{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return te.resolve(hd.ce);const r=new ij(t);return this.mr.forEachTarget(e,(a=>r.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>r.Ar(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(Wb)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wb):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,a,l,c,m,g,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,c=Date.now(),this.nthSequenceNumber(e,a)))).next((E=>(r=E,m=Date.now(),this.removeTargets(e,r,t)))).next((E=>(l=E,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(p=Date.now(),co()<=qe.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(m-c)+`ms
	Removed ${l} targets in `+(g-m)+`ms
	Removed ${E} documents in `+(p-g)+`ms
Total Duration: ${p-v}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E}))))}}function lj(s,e){return new oj(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(){this.changes=new ca((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&cu(r.mutation,a,si.empty(),gt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ke()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ke()){const a=ta();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let c=tu();return l.forEach(((m,g)=>{c=c.insert(m,g.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=ta();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ke())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,m)=>{t.set(c,m)}))}))}computeViews(e,t,r,a){let l=mi();const c=uu(),m=(function(){return uu()})();return t.forEach(((g,p)=>{const v=r.get(p.key);a.has(p.key)&&(v===void 0||v.mutation instanceof yd)?l=l.insert(p.key,p):v!==void 0?(c.set(p.key,v.mutation.getFieldMask()),cu(v.mutation,p,v.mutation.getFieldMask(),gt.now())):c.set(p.key,si.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((p,v)=>c.set(p,v))),t.forEach(((p,v)=>m.set(p,new cj(v,c.get(p)??null)))),m)))}recalculateAndSaveOverlays(e,t){const r=uu();let a=new At(((c,m)=>c-m)),l=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const m of c)m.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let v=r.get(g)||si.empty();v=m.applyToLocalView(p,v),r.set(g,v);const E=(a.get(m.batchId)||Ke()).add(g);a=a.insert(m.batchId,E)}))})).next((()=>{const c=[],m=a.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,v=g.value,E=qT();v.forEach((A=>{if(!l.has(A)){const x=KT(t.get(A),r.get(A));x!==null&&E.set(A,x),l=l.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,E))}return te.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return(function(c){return Te.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):UT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):te.resolve(ta());let m=vu,g=l;return c.next((p=>te.forEach(p,((v,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),l.get(v)?te.resolve():this.remoteDocumentCache.getEntry(e,v).next((A=>{g=g.insert(v,A)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,g,p,Ke()))).next((v=>({batchId:m,changes:SD(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next((r=>{let a=tu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=tu();return this.indexManager.getCollectionParents(e,l).next((m=>te.forEach(m,(g=>{const p=(function(E,A){return new Fo(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,r,a).next((v=>{v.forEach(((E,A)=>{c=c.insert(E,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((c=>{l.forEach(((g,p)=>{const v=p.getKey();c.get(v)===null&&(c=c.insert(v,ln.newInvalidDocument(v)))}));let m=tu();return c.forEach(((g,p)=>{const v=l.get(g);v!==void 0&&cu(v.mutation,p,si.empty(),gt.now()),gd(t,p)&&(m=m.insert(g,p))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return te.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:bo(a.createTime)}})(t)),te.resolve()}getNamedQuery(e,t){return te.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:tj(a.bundledQuery),readTime:bo(a.readTime)}})(t)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(){this.overlays=new At(Te.comparator),this.qr=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ta();return te.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.St(e,t,l)})),te.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(r)),te.resolve()}getOverlaysForCollection(e,t,r){const a=ta(),l=t.length+1,c=new Te(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&g.largestBatchId>r&&a.set(g.getKey(),g)}return te.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new At(((p,v)=>p-v));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let v=l.get(p.largestBatchId);v===null&&(v=ta(),l=l.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const m=ta(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,v)=>m.set(p,v))),!(m.size()>=a)););return te.resolve(m)}St(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new PD(t,r));let l=this.qr.get(t);l===void 0&&(l=Ke(),this.qr.set(t,l)),this.qr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(){this.Qr=new Ht(Kt.$r),this.Ur=new Ht(Kt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Kt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Kt(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Te(new mt([])),r=new Kt(t,e),a=new Kt(t,e+1),l=[];return this.Ur.forEachInRange([r,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Te(new mt([])),r=new Kt(t,e),a=new Kt(t,e+1);let l=Ke();return this.Ur.forEachInRange([r,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Kt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Kt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Te.comparator(e.key,t.key)||$e(e.Yr,t.Yr)}static Kr(e,t){return $e(e.Yr,t.Yr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ht(Kt.$r)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new MD(l,t,r,a);this.mutationQueue.push(c);for(const m of a)this.Zr=this.Zr.add(new Kt(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return te.resolve(c)}lookupMutationBatch(e,t){return te.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.ei(r),l=a<0?0:a;return te.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?eD:this.tr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Kt(t,0),a=new Kt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([r,a],(c=>{const m=this.Xr(c.Yr);l.push(m)})),te.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ht($e);return t.forEach((a=>{const l=new Kt(a,0),c=new Kt(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(m=>{r=r.add(m.Yr)}))})),te.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;Te.isDocumentKey(l)||(l=l.child(""));const c=new Kt(new Te(l),0);let m=new Ht($e);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!r.isPrefixOf(p)&&(p.length===a&&(m=m.add(g.Yr)),!0)}),c),te.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((r=>{const a=this.Xr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){yt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return te.forEach(t.mutations,(a=>{const l=new Kt(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Kt(t,0),a=this.Zr.firstAfterOrEqual(r);return te.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e){this.ri=e,this.docs=(function(){return new At(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return te.resolve(r?r.document.mutableCopy():ln.newInvalidDocument(t))}getEntries(e,t){let r=mi();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():ln.newInvalidDocument(a))})),te.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=mi();const c=t.path,m=new Te(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:v}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||XN(YN(v),r)<=0||(a.has(v.key)||gd(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return te.resolve(l)}getAllFromCollectionGroup(e,t,r,a){Oe(9500)}ii(e,t){return te.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new yj(this)}getSize(e){return te.resolve(this.size)}}class yj extends uj{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(r)})),te.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e){this.persistence=e,this.si=new ca((t=>fp(t)),mp),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.oi=0,this._i=new vp,this.targetCount=0,this.ai=jo.ur()}forEachTarget(e,t){return this.si.forEach(((r,a)=>t(a))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),te.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new jo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.Pr(t),te.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)})),te.waitFor(l).next((()=>a))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return te.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),te.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),te.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),te.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return te.resolve(r)}containsKey(e,t){return te.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,t){this.ui={},this.overlays={},this.ci=new hd(0),this.li=!1,this.li=!0,this.hi=new mj,this.referenceDelegate=e(this),this.Pi=new _j(this),this.indexManager=new nj,this.remoteDocumentCache=(function(a){return new pj(a)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new ej(t),this.Ii=new dj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new fj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new gj(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){he("MemoryPersistence","Starting transaction:",e);const a=new vj(this.ci.next());return this.referenceDelegate.Ei(),r(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return te.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class vj extends WN{constructor(e){super(),this.currentSequenceNumber=e}}class bp{constructor(e){this.persistence=e,this.Ri=new vp,this.Vi=null}static mi(e){return new bp(e)}get fi(){if(this.Vi)return this.Vi;throw Oe(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),te.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),te.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.fi,(r=>{const a=Te.fromPath(r);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Ie.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return te.or([()=>te.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class td{constructor(e,t){this.persistence=e,this.pi=new ca((r=>nD(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=lj(this,t)}static mi(e,t){return new td(e,t)}Ei(){}di(e){return te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return te.forEach(this.pi,((r,a)=>this.br(e,r,a).next((l=>l?te.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((m=>{m||(r++,l.removeEntry(c,Ie.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),te.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nh(e.data.value)),t}br(e,t,r){return te.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return te.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=a}static As(e,t){let r=Ke(),a=Ke();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new wp(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return _C()?8:ZN(cn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new bj;return this.Ss(e,t,c).next((m=>{if(l.result=m,this.Vs)return this.bs(e,t,c,m.size)}))})).next((()=>l.result))}bs(e,t,r,a){return r.documentReadCount<this.fs?(co()<=qe.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",ho(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),te.resolve()):(co()<=qe.DEBUG&&he("QueryEngine","Query:",ho(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(co()<=qe.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",ho(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(t))):te.resolve())}ys(e,t){if(qb(t))return te.resolve(null);let r=zr(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=xg(t,null,"F"),r=zr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=Ke(...l);return this.ps.getDocuments(e,c).next((m=>this.indexManager.getMinOffset(e,r).next((g=>{const p=this.Ds(t,m);return this.Cs(t,p,c,g.readTime)?this.ys(e,xg(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,r,a){return qb(t)||a.isEqual(Ie.min())?te.resolve(null):this.ps.getDocuments(e,r).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,r,a)?te.resolve(null):(co()<=qe.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),ho(t)),this.vs(e,c,t,QN(a,vu)).next((m=>m)))}))}Ds(e,t){let r=new Ht(zT(e));return t.forEach(((a,l)=>{gd(e,l)&&(r=r.add(l))})),r}Cs(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,r){return co()<=qe.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",ho(t)),this.ps.getDocumentsMatchingQuery(e,t,ci.min(),r)}vs(e,t,r,a){return this.ps.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep="LocalStore",Ej=3e8;class Tj{constructor(e,t,r,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new At($e),this.xs=new ca((l=>fp(l)),mp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function Sj(s,e,t,r){return new Tj(s,e,t,r)}async function lS(s,e){const t=Ge(s);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],m=[];let g=Ke();for(const p of a){c.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}for(const p of l){m.push(p.batchId);for(const v of p.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(r,g).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:m})))}))}))}function uS(s){const e=Ge(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Aj(s,e){const t=Ge(s),r=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const m=[];e.targetChanges.forEach(((v,E)=>{const A=a.get(E);if(!A)return;m.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,E))));let x=A.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?x=x.withResumeToken(nn.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):v.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(v.resumeToken,r)),a=a.insert(E,x),(function(V,k,H){return V.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=Ej?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(A,x,v)&&m.push(t.Pi.updateTargetData(l,x))}));let g=mi(),p=Ke();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),m.push(Rj(l,c,e.documentUpdates).next((v=>{g=v.ks,p=v.qs}))),!r.isEqual(Ie.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,r)));m.push(v)}return te.waitFor(m).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,p))).next((()=>g))})).then((l=>(t.Ms=a,l)))}function Rj(s,e,t){let r=Ke(),a=Ke();return t.forEach((l=>r=r.add(l))),e.getEntries(s,r).next((l=>{let c=mi();return t.forEach(((m,g)=>{const p=l.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(m)),g.isNoDocument()&&g.version.isEqual(Ie.min())?(e.removeEntry(m,g.readTime),c=c.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),c=c.insert(m,g)):he(Ep,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:c,qs:a}}))}function xj(s,e){const t=Ge(s);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.Pi.getTargetData(r,e).next((l=>l?(a=l,te.resolve(a)):t.Pi.allocateTargetId(r).next((c=>(a=new ii(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function jg(s,e,t){const r=Ge(s),a=r.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Ho(c))throw c;he(Ep,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(a.target)}function tw(s,e,t){const r=Ge(s);let a=Ie.min(),l=Ke();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,v){const E=Ge(g),A=E.xs.get(v);return A!==void 0?te.resolve(E.Ms.get(A)):E.Pi.getTargetData(p,v)})(r,c,zr(e)).next((m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,m.targetId).next((g=>{l=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?a:Ie.min(),t?l:Ke()))).next((m=>(Cj(r,wD(e),m),{documents:m,Qs:l})))))}function Cj(s,e,t){let r=s.Os.get(e)||Ie.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),s.Os.set(e,r)}class nw{constructor(){this.activeTargetIds=xD()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ij{constructor(){this.Mo=new nw,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new nw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="ConnectivityMonitor";class sw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(rw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(rw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sh=null;function kg(){return Sh===null?Sh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Sh++,"0x"+Sh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm="RestConnection",Nj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Dj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===Xh?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(e,t,r,a,l){const c=kg(),m=this.zo(e,t.toUriEncodedString());he(Qm,`Sending RPC '${e}' ${c}:`,m,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,a,l);const{host:p}=new URL(m),v=Lo(p);return this.Jo(e,m,g,r,v).then((E=>(he(Qm,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Io(Qm,`RPC '${e}' ${c} failed with error: `,E,"url: ",m,"request:",r),E}))}Ho(e,t,r,a,l,c){return this.Go(e,t,r,a,l)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+qo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const r=Nj[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection";class kj extends Dj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,a,l){const c=kg();return new Promise(((m,g)=>{const p=new fT;p.setWithCredentials(!0),p.listenOnce(mT.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Oh.NO_ERROR:const E=p.getResponseJson();he(an,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),m(E);break;case Oh.TIMEOUT:he(an,`RPC '${e}' ${c} timed out`),g(new de(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Oh.HTTP_ERROR:const A=p.getStatus();if(he(an,`RPC '${e}' ${c} failed with status:`,A,"response text:",p.getResponseText()),A>0){let x=p.getResponseJson();Array.isArray(x)&&(x=x[0]);const j=x==null?void 0:x.error;if(j&&j.status&&j.message){const V=(function(H){const J=H.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(J)>=0?J:ie.UNKNOWN})(j.status);g(new de(V,j.message))}else g(new de(ie.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new de(ie.UNAVAILABLE,"Connection failed."));break;default:Oe(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{he(an,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(a);he(an,`RPC '${e}' ${c} sending request:`,a),p.send(t,"POST",v,r,15)}))}T_(e,t,r){const a=kg(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=yT(),m=pT(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const v=l.join("");he(an,`Creating RPC '${e}' stream ${a}: ${v}`,g);const E=c.createWebChannel(v,g);this.I_(E);let A=!1,x=!1;const j=new jj({Yo:k=>{x?he(an,`Not sending because RPC '${e}' stream ${a} is closed:`,k):(A||(he(an,`Opening RPC '${e}' stream ${a} transport.`),E.open(),A=!0),he(an,`RPC '${e}' stream ${a} sending:`,k),E.send(k))},Zo:()=>E.close()}),V=(k,H,J)=>{k.listen(H,(Y=>{try{J(Y)}catch(ae){setTimeout((()=>{throw ae}),0)}}))};return V(E,eu.EventType.OPEN,(()=>{x||(he(an,`RPC '${e}' stream ${a} transport opened.`),j.o_())})),V(E,eu.EventType.CLOSE,(()=>{x||(x=!0,he(an,`RPC '${e}' stream ${a} transport closed`),j.a_(),this.E_(E))})),V(E,eu.EventType.ERROR,(k=>{x||(x=!0,Io(an,`RPC '${e}' stream ${a} transport errored. Name:`,k.name,"Message:",k.message),j.a_(new de(ie.UNAVAILABLE,"The operation could not be completed")))})),V(E,eu.EventType.MESSAGE,(k=>{var H;if(!x){const J=k.data[0];yt(!!J,16349);const Y=J,ae=(Y==null?void 0:Y.error)||((H=Y[0])==null?void 0:H.error);if(ae){he(an,`RPC '${e}' stream ${a} received error:`,ae);const we=ae.status;let ce=(function(O){const U=Mt[O];if(U!==void 0)return YT(U)})(we),I=ae.message;ce===void 0&&(ce=ie.INTERNAL,I="Unknown error status: "+we+" with message "+ae.message),x=!0,j.a_(new de(ce,I)),E.close()}else he(an,`RPC '${e}' stream ${a} received:`,J),j.u_(J)}})),V(m,gT.STAT_EVENT,(k=>{k.stat===vg.PROXY?he(an,`RPC '${e}' stream ${a} detected buffering proxy`):k.stat===vg.NOPROXY&&he(an,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{j.__()}),0),j}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Ym(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(s){return new $D(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&he("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="PersistentStream";class Mj{constructor(e,t,r,a,l,c,m,g){this.Mi=e,this.S_=r,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new cS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(ps(t.toString()),ps("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new de(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(iw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(he(iw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Pj extends Mj{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=GD(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Ie.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ie.min():c.readTime?bo(c.readTime):Ie.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Jb(this.serializer),t.addTarget=(function(l,c){let m;const g=c.target;if(m=Ag(g)?{documents:KD(l,g)}:{query:QD(l,g).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=WT(l,c.resumeToken);const p=Og(l,c.expectedCount);p!==null&&(m.expectedCount=p)}else if(c.snapshotVersion.compareTo(Ie.min())>0){m.readTime=Ng(l,c.snapshotVersion.toTimestamp());const p=Og(l,c.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,e);const r=XD(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Jb(this.serializer),t.removeTarget=e,this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{}class Uj extends Vj{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new de(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Dg(t,r),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(ie.UNKNOWN,l.toString())}))}Ho(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(e,Dg(t,r),a,c,m,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new de(ie.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Lj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ps(t),this.aa=!1):he("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko="RemoteStore";class zj{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{ju(this)&&(he(ko,"Restarting streams for network reachability change."),await(async function(g){const p=Ge(g);p.Ea.add(4),await Du(p),p.Ra.set("Unknown"),p.Ea.delete(4),await bd(p)})(this))}))})),this.Ra=new Lj(r,a)}}async function bd(s){if(ju(s))for(const e of s.da)await e(!0)}async function Du(s){for(const e of s.da)await e(!1)}function hS(s,e){const t=Ge(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Rp(t)?Ap(t):Go(t).O_()&&Sp(t,e))}function Tp(s,e){const t=Ge(s),r=Go(t);t.Ia.delete(e),r.O_()&&dS(t,e),t.Ia.size===0&&(r.O_()?r.L_():ju(t)&&t.Ra.set("Unknown"))}function Sp(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Go(s).Y_(e)}function dS(s,e){s.Va.Ue(e),Go(s).Z_(e)}function Ap(s){s.Va=new zD({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Go(s).start(),s.Ra.ua()}function Rp(s){return ju(s)&&!Go(s).x_()&&s.Ia.size>0}function ju(s){return Ge(s).Ea.size===0}function fS(s){s.Va=void 0}async function Bj(s){s.Ra.set("Online")}async function qj(s){s.Ia.forEach(((e,t)=>{Sp(s,e)}))}async function Hj(s,e){fS(s),Rp(s)?(s.Ra.ha(e),Ap(s)):s.Ra.set("Unknown")}async function $j(s,e,t){if(s.Ra.set("Online"),e instanceof JT&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const m of l.targetIds)a.Ia.has(m)&&(await a.remoteSyncer.rejectListen(m,c),a.Ia.delete(m),a.Va.removeTarget(m))})(s,e)}catch(r){he(ko,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await aw(s,r)}else if(e instanceof jh?s.Va.Ze(e):e instanceof XT?s.Va.st(e):s.Va.tt(e),!t.isEqual(Ie.min()))try{const r=await uS(s.localStore);t.compareTo(r)>=0&&await(function(l,c){const m=l.Va.Tt(c);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.Ia.get(p);v&&l.Ia.set(p,v.withResumeToken(g.resumeToken,c))}})),m.targetMismatches.forEach(((g,p)=>{const v=l.Ia.get(g);if(!v)return;l.Ia.set(g,v.withResumeToken(nn.EMPTY_BYTE_STRING,v.snapshotVersion)),dS(l,g);const E=new ii(v.target,g,p,v.sequenceNumber);Sp(l,E)})),l.remoteSyncer.applyRemoteEvent(m)})(s,t)}catch(r){he(ko,"Failed to raise snapshot:",r),await aw(s,r)}}async function aw(s,e,t){if(!Ho(e))throw e;s.Ea.add(1),await Du(s),s.Ra.set("Offline"),t||(t=()=>uS(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{he(ko,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await bd(s)}))}async function ow(s,e){const t=Ge(s);t.asyncQueue.verifyOperationInProgress(),he(ko,"RemoteStore received new credentials");const r=ju(t);t.Ea.add(3),await Du(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await bd(t)}async function Fj(s,e){const t=Ge(s);e?(t.Ea.delete(2),await bd(t)):e||(t.Ea.add(2),await Du(t),t.Ra.set("Unknown"))}function Go(s){return s.ma||(s.ma=(function(t,r,a){const l=Ge(t);return l.sa(),new Pj(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Xo:Bj.bind(null,s),t_:qj.bind(null,s),r_:Hj.bind(null,s),H_:$j.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Rp(s)?Ap(s):s.Ra.set("Unknown")):(await s.ma.stop(),fS(s))}))),s.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new sa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,m=new xp(e,t,c,a,l);return m.start(r),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mS(s,e){if(ps("AsyncQueue",`${e}: ${s}`),Ho(s))return new de(ie.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{static emptySet(e){return new wo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Te.comparator(t.key,r.key):(t,r)=>Te.comparator(t.key,r.key),this.keyedMap=tu(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new wo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this.ga=new At(Te.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Oe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Mo{constructor(e,t,r,a,l,c,m,g,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach((m=>{c.push({type:0,doc:m})})),new Mo(e,t,wo.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&md(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Kj{constructor(){this.queries=uw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=Ge(t),l=a.queries;a.queries=uw(),l.forEach(((c,m)=>{for(const g of m.Sa)g.onError(r)}))})(this,new de(ie.ABORTED,"Firestore shutting down"))}}function uw(){return new ca((s=>LT(s)),md)}async function Qj(s,e){const t=Ge(s);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(r=2):(l=new Gj,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const m=mS(c,`Initialization of query '${ho(e.query)}' failed`);return void e.onError(m)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Cp(t)}async function Yj(s,e){const t=Ge(s),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Xj(s,e){const t=Ge(s);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const m of c.Sa)m.Fa(a)&&(r=!0);c.wa=a}}r&&Cp(t)}function Jj(s,e,t){const r=Ge(s),a=r.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);r.queries.delete(e)}function Cp(s){s.Ca.forEach((e=>{e.next()}))}var Mg,cw;(cw=Mg||(Mg={})).Ma="default",cw.Cache="cache";class Wj{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new Mo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Mg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e){this.key=e}}class pS{constructor(e){this.key=e}}class Zj{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ke(),this.mutatedKeys=Ke(),this.eu=zT(e),this.tu=new wo(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new lw,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,m=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,E)=>{const A=a.get(v),x=gd(this.query,E)?E:null,j=!!A&&this.mutatedKeys.has(A.key),V=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let k=!1;A&&x?A.data.isEqual(x.data)?j!==V&&(r.track({type:3,doc:x}),k=!0):this.su(A,x)||(r.track({type:2,doc:x}),k=!0,(g&&this.eu(x,g)>0||p&&this.eu(x,p)<0)&&(m=!0)):!A&&x?(r.track({type:0,doc:x}),k=!0):A&&!x&&(r.track({type:1,doc:A}),k=!0,(g||p)&&(m=!0)),k&&(x?(c=c.add(x),l=V?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),r.track({type:1,doc:v})}return{tu:c,iu:r,Cs:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,E)=>(function(x,j){const V=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe(20277,{Rt:k})}};return V(x)-V(j)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(r),a=a??!1;const m=t&&!a?this._u():[],g=this.Xa.size===0&&this.current&&!a?1:0,p=g!==this.Za;return this.Za=g,c.length!==0||p?{snapshot:new Mo(this.query,e.tu,l,c,e.mutatedKeys,g===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new lw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ke(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new pS(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new gS(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ke();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Mo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ip="SyncEngine";class e5{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class t5{constructor(e){this.key=e,this.hu=!1}}class n5{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ca((m=>LT(m)),md),this.Iu=new Map,this.Eu=new Set,this.du=new At(Te.comparator),this.Au=new Map,this.Ru=new vp,this.Vu={},this.mu=new Map,this.fu=jo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function r5(s,e,t=!0){const r=wS(s);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await yS(r,e,t,!0),a}async function s5(s,e){const t=wS(s);await yS(t,e,!0,!1)}async function yS(s,e,t,r){const a=await xj(s.localStore,zr(e)),l=a.targetId,c=s.sharedClientState.addLocalQueryTarget(l,t);let m;return r&&(m=await i5(s,e,l,c==="current",a.resumeToken)),s.isPrimaryClient&&t&&hS(s.remoteStore,a),m}async function i5(s,e,t,r,a){s.pu=(E,A,x)=>(async function(V,k,H,J){let Y=k.view.ru(H);Y.Cs&&(Y=await tw(V.localStore,k.query,!1).then((({documents:I})=>k.view.ru(I,Y))));const ae=J&&J.targetChanges.get(k.targetId),we=J&&J.targetMismatches.get(k.targetId)!=null,ce=k.view.applyChanges(Y,V.isPrimaryClient,ae,we);return dw(V,k.targetId,ce.au),ce.snapshot})(s,E,A,x);const l=await tw(s.localStore,e,!0),c=new Zj(e,l.Qs),m=c.ru(l.documents),g=Nu.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",a),p=c.applyChanges(m,s.isPrimaryClient,g);dw(s,t,p.au);const v=new e5(e,t,c);return s.Tu.set(e,v),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),p.snapshot}async function a5(s,e,t){const r=Ge(s),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((c=>!md(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await jg(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&Tp(r.remoteStore,a.targetId),Pg(r,a.targetId)})).catch(cd)):(Pg(r,a.targetId),await jg(r.localStore,a.targetId,!0))}async function o5(s,e){const t=Ge(s),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Tp(t.remoteStore,r.targetId))}async function _S(s,e){const t=Ge(s);try{const r=await Aj(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(yt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?yt(c.hu,14607):a.removedDocuments.size>0&&(yt(c.hu,42227),c.hu=!1))})),await bS(t,r,e)}catch(r){await cd(r)}}function hw(s,e,t){const r=Ge(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,c)=>{const m=c.view.va(e);m.snapshot&&a.push(m.snapshot)})),(function(c,m){const g=Ge(c);g.onlineState=m;let p=!1;g.queries.forEach(((v,E)=>{for(const A of E.Sa)A.va(m)&&(p=!0)})),p&&Cp(g)})(r.eventManager,e),a.length&&r.Pu.H_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function l5(s,e,t){const r=Ge(s);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let c=new At(Te.comparator);c=c.insert(l,ln.newNoDocument(l,Ie.min()));const m=Ke().add(l),g=new _d(Ie.min(),new Map,new At($e),c,m);await _S(r,g),r.du=r.du.remove(l),r.Au.delete(e),Op(r)}else await jg(r.localStore,e,!1).then((()=>Pg(r,e,t))).catch(cd)}function Pg(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),t&&s.Pu.yu(r,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||vS(s,r)}))}function vS(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&(Tp(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),Op(s))}function dw(s,e,t){for(const r of t)r instanceof gS?(s.Ru.addReference(r.key,e),u5(s,r)):r instanceof pS?(he(Ip,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||vS(s,r.key)):Oe(19791,{wu:r})}function u5(s,e){const t=e.key,r=t.path.canonicalString();s.du.get(t)||s.Eu.has(r)||(he(Ip,"New document in limbo: "+t),s.Eu.add(r),Op(s))}function Op(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new Te(mt.fromString(e)),r=s.fu.next();s.Au.set(r,new t5(t)),s.du=s.du.insert(t,r),hS(s.remoteStore,new ii(zr(VT(t.path)),r,"TargetPurposeLimboResolution",hd.ce))}}async function bS(s,e,t){const r=Ge(s),a=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{c.push(r.pu(g,e,t).then((p=>{var v;if((p||t)&&r.isPrimaryClient){const E=p?!p.fromCache:(v=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:v.current;r.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(p){a.push(p);const E=wp.As(g.targetId,p);l.push(E)}})))})),await Promise.all(c),r.Pu.H_(a),await(async function(g,p){const v=Ge(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>te.forEach(p,(A=>te.forEach(A.Es,(x=>v.persistence.referenceDelegate.addReference(E,A.targetId,x))).next((()=>te.forEach(A.ds,(x=>v.persistence.referenceDelegate.removeReference(E,A.targetId,x)))))))))}catch(E){if(!Ho(E))throw E;he(Ep,"Failed to update sequence numbers: "+E)}for(const E of p){const A=E.targetId;if(!E.fromCache){const x=v.Ms.get(A),j=x.snapshotVersion,V=x.withLastLimboFreeSnapshotVersion(j);v.Ms=v.Ms.insert(A,V)}}})(r.localStore,l))}async function c5(s,e){const t=Ge(s);if(!t.currentUser.isEqual(e)){he(Ip,"User change. New user:",e.toKey());const r=await lS(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((m=>{m.forEach((g=>{g.reject(new de(ie.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await bS(t,r.Ls)}}function h5(s,e){const t=Ge(s),r=t.Au.get(e);if(r&&r.hu)return Ke().add(r.key);{let a=Ke();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const m=t.Tu.get(c);a=a.unionWith(m.view.nu)}return a}}function wS(s){const e=Ge(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=_S.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=h5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=l5.bind(null,e),e.Pu.H_=Xj.bind(null,e.eventManager),e.Pu.yu=Jj.bind(null,e.eventManager),e}class nd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Sj(this.persistence,new wj,e.initialUser,this.serializer)}Cu(e){return new oS(bp.mi,this.serializer)}Du(e){return new Ij}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nd.provider={build:()=>new nd};class d5 extends nd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){yt(this.persistence.referenceDelegate instanceof td,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new aj(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Tn.withCacheSize(this.cacheSizeBytes):Tn.DEFAULT;return new oS((r=>td.mi(r,t)),this.serializer)}}class Vg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=c5.bind(null,this.syncEngine),await Fj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Kj})()}createDatastore(e){const t=vd(e.databaseInfo.databaseId),r=(function(l){return new kj(l)})(e.databaseInfo);return(function(l,c,m,g){return new Uj(l,c,m,g)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,c,m){return new zj(r,a,l,c,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>hw(this.syncEngine,t,0)),(function(){return sw.v()?new sw:new Oj})())}createSyncEngine(e,t){return(function(a,l,c,m,g,p,v){const E=new n5(a,l,c,m,g,p);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=Ge(a);he(ko,"RemoteStore shutting down."),l.Ea.add(5),await Du(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Vg.provider={build:()=>new Vg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ps("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi="FirestoreClient";class m5{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=on.UNAUTHENTICATED,this.clientId=bT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{he(gi,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(he(gi,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=mS(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Xm(s,e){s.asyncQueue.verifyOperationInProgress(),he(gi,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener((async a=>{r.isEqual(a)||(await lS(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function fw(s,e){s.asyncQueue.verifyOperationInProgress();const t=await g5(s);he(gi,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((r=>ow(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,a)=>ow(e.remoteStore,a))),s._onlineComponents=e}async function g5(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){he(gi,"Using user provided OfflineComponentProvider");try{await Xm(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ie.FAILED_PRECONDITION||a.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Io("Error using user provided cache. Falling back to memory cache: "+t),await Xm(s,new nd)}}else he(gi,"Using default OfflineComponentProvider"),await Xm(s,new d5(void 0));return s._offlineComponents}async function p5(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(he(gi,"Using user provided OnlineComponentProvider"),await fw(s,s._uninitializedComponentsProvider._online)):(he(gi,"Using default OnlineComponentProvider"),await fw(s,new Vg))),s._onlineComponents}async function y5(s){const e=await p5(s),t=e.eventManager;return t.onListen=r5.bind(null,e.syncEngine),t.onUnlisten=a5.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=s5.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=o5.bind(null,e.syncEngine),t}function _5(s,e,t={}){const r=new sa;return s.asyncQueue.enqueueAndForget((async()=>(function(l,c,m,g,p){const v=new f5({next:A=>{v.Nu(),c.enqueueAndForget((()=>Yj(l,E))),A.fromCache&&g.source==="server"?p.reject(new de(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(A)},error:A=>p.reject(A)}),E=new Wj(m,v,{includeMetadataChanges:!0,qa:!0});return Qj(l,E)})(await y5(s),s.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="firestore.googleapis.com",gw=!0;class pw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TS,this.ssl=gw}else this.host=e.host,this.ssl=e.ssl??gw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=aS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sj)throw new de(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ES(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new de(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new de(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new de(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Np{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new VN;switch(r.type){case"firstParty":return new BN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=mw.get(t);r&&(he("ComponentProvider","Removing Datastore"),mw.delete(t),r.terminate())})(this),Promise.resolve()}}function v5(s,e,t,r={}){var p;s=wg(s,Np);const a=Lo(e),l=s._getSettings(),c={...l,emulatorOptions:s._getEmulatorOptions()},m=`${e}:${t}`;a&&(CE(`https://${m}`),IE("Firestore",!0)),l.host!==TS&&l.host!==m&&Io("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:m,ssl:a,emulatorOptions:r};if(!aa(g,c)&&(s._setSettings(g),r.mockUserToken)){let v,E;if(typeof r.mockUserToken=="string")v=r.mockUserToken,E=on.MOCK_USER;else{v=uC(r.mockUserToken,(p=s._app)==null?void 0:p.options.projectId);const A=r.mockUserToken.sub||r.mockUserToken.user_id;if(!A)throw new de(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new on(A)}s._authCredentials=new UN(new vT(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ha(this.firestore,e,this._query)}}class mn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}toJSON(){return{type:mn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Ou(t,mn._jsonSchema))return new mn(e,r||null,new Te(mt.fromString(t.referencePath)))}}mn._jsonSchemaVersion="firestore/documentReference/1.0",mn._jsonSchema={type:Ut("string",mn._jsonSchemaVersion),referencePath:Ut("string")};class Eo extends ha{constructor(e,t,r){super(e,t,VT(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new Te(e))}withConverter(e){return new Eo(this.firestore,e,this._path)}}function b5(s,e,...t){if(s=Hr(s),s instanceof Np){const r=mt.fromString(e,...t);return Cb(r),new Eo(s,null,r)}{if(!(s instanceof mn||s instanceof Eo))throw new de(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(mt.fromString(e,...t));return Cb(r),new Eo(s.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="AsyncQueue";class _w{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new cS(this,"async_queue_retry"),this._c=()=>{const r=Ym();r&&he(yw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Ym();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ym();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new sa;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ho(e))throw e;he(yw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ps("INTERNAL UNHANDLED ERROR: ",vw(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=xp.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Oe(47125,{Pc:vw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function vw(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class SS extends Np{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new _w,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _w(e),this._firestoreClient=void 0,await e}}}function w5(s,e){const t=typeof s=="object"?s:ep(),r=typeof s=="string"?s:Xh,a=Zg(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=oC("firestore");l&&v5(a,...l)}return a}function E5(s){if(s._terminated)throw new de(ie.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||T5(s),s._firestoreClient}function T5(s){var r,a,l;const e=s._freezeSettings(),t=(function(m,g,p,v){return new iD(m,g,p,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,ES(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(s._databaseId,((r=s._app)==null?void 0:r.options.appId)||"",s._persistenceKey,e);s._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new m5(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yn(nn.fromBase64String(e))}catch(t){throw new de(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yn(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ou(e,Yn._jsonSchema))return Yn.fromBase64String(e.bytes)}}Yn._jsonSchemaVersion="firestore/bytes/1.0",Yn._jsonSchema={type:Ut("string",Yn._jsonSchemaVersion),bytes:Ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Br._jsonSchemaVersion}}static fromJSON(e){if(Ou(e,Br._jsonSchema))return new Br(e.latitude,e.longitude)}}Br._jsonSchemaVersion="firestore/geoPoint/1.0",Br._jsonSchema={type:Ut("string",Br._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:qr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ou(e,qr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new qr(e.vectorValues);throw new de(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qr._jsonSchemaVersion="firestore/vectorValue/1.0",qr._jsonSchema={type:Ut("string",qr._jsonSchemaVersion),vectorValues:Ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S5=/^__.*__$/;function xS(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe(40011,{Ac:s})}}class Dp{constructor(e,t,r,a,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Dp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ug(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(xS(this.Ac)&&S5.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class A5{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||vd(e)}Cc(e,t,r,a=!1){return new Dp({Ac:e,methodName:t,Dc:r,path:un.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function R5(s){const e=s._freezeSettings(),t=vd(s._databaseId);return new A5(s._databaseId,!!e.ignoreUndefinedProperties,t)}function x5(s,e,t,r=!1){return jp(t,s.Cc(r?4:3,e))}function jp(s,e){if(CS(s=Hr(s)))return I5("Unsupported field value:",e,s),C5(s,e);if(s instanceof RS)return(function(r,a){if(!xS(a.Ac))throw a.Sc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,a){const l=[];let c=0;for(const m of r){let g=jp(m,a.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),c++}return{arrayValue:{values:l}}})(s,e)}return(function(r,a){if((r=Hr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return CD(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=gt.fromDate(r);return{timestampValue:Ng(a.serializer,l)}}if(r instanceof gt){const l=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ng(a.serializer,l)}}if(r instanceof Br)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yn)return{bytesValue:WT(a.serializer,r._byteString)};if(r instanceof mn){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:ZT(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof qr)return(function(c,m){return{mapValue:{fields:{[IT]:{stringValue:OT},[Jh]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return gp(m.serializer,p)}))}}}}}})(r,a);throw a.Sc(`Unsupported field value: ${ud(r)}`)})(s,e)}function C5(s,e){const t={};return TT(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$o(s,((r,a)=>{const l=jp(a,e.mc(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function CS(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof gt||s instanceof Br||s instanceof Yn||s instanceof mn||s instanceof RS||s instanceof qr)}function I5(s,e,t){if(!CS(t)||!wT(t)){const r=ud(t);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}const O5=new RegExp("[~\\*/\\[\\]]");function N5(s,e,t){if(e.search(O5)>=0)throw Ug(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new AS(...e.split("."))._internalPath}catch{throw Ug(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Ug(s,e,t,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(l||c)&&(g+=" (found",l&&(g+=` in field ${r}`),c&&(g+=` in document ${a}`),g+=")"),new de(ie.INVALID_ARGUMENT,m+s+g)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new D5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class D5 extends IS{data(){return super.data()}}function wd(s,e){return typeof e=="string"?N5(s,e):e instanceof AS?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j5(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new de(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kp{}class OS extends kp{}function k5(s,e,...t){let r=[];e instanceof kp&&r.push(e),r=r.concat(t),(function(l){const c=l.filter((g=>g instanceof Mp)).length,m=l.filter((g=>g instanceof Ed)).length;if(c>1||c>0&&m>0)throw new de(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)s=a._apply(s);return s}class Ed extends OS{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Ed(e,t,r)}_apply(e){const t=this._parse(e);return NS(e._query,t),new ha(e.firestore,e.converter,Rg(e._query,t))}_parse(e){const t=R5(e.firestore);return(function(l,c,m,g,p,v,E){let A;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new de(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){ww(E,v);const j=[];for(const V of E)j.push(bw(g,l,V));A={arrayValue:{values:j}}}else A=bw(g,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||ww(E,v),A=x5(m,c,E,v==="in"||v==="not-in");return Vt.create(p,v,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function M5(s,e,t){const r=e,a=wd("where",s);return Ed._create(a,r,t)}class Mp extends kp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Mp(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:dr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const m=l.getFlattenedFilters();for(const g of m)NS(c,g),c=Rg(c,g)})(e._query,t),new ha(e.firestore,e.converter,Rg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Pp extends OS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Pp(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new de(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new de(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Tu(l,c)})(e._query,this._field,this._direction);return new ha(e.firestore,e.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new Fo(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function P5(s,e="asc"){const t=e,r=wd("orderBy",s);return Pp._create(r,t)}function bw(s,e,t){if(typeof(t=Hr(t))=="string"){if(t==="")throw new de(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!UT(e)&&t.indexOf("/")!==-1)throw new de(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(mt.fromString(t));if(!Te.isDocumentKey(r))throw new de(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Pb(s,new Te(r))}if(t instanceof mn)return Pb(s,t._key);throw new de(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ud(t)}.`)}function ww(s,e){if(!Array.isArray(s)||s.length===0)throw new de(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function NS(s,e){const t=(function(a,l){for(const c of a)for(const m of c.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class V5{convertValue(e,t="none"){switch(fi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(di(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return $o(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){var r,a,l;const t=(l=(a=(r=e.fields)==null?void 0:r[Jh].arrayValue)==null?void 0:a.values)==null?void 0:l.map((c=>St(c.doubleValue)));return new qr(t)}convertGeoPoint(e){return new Br(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=fd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(bu(e));default:return null}}convertTimestamp(e){const t=hi(e);return new gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=mt.fromString(e);yt(iS(r),9688,{name:e});const a=new wu(r.get(1),r.get(3)),l=new Te(r.popFirst(5));return a.isEqual(t)||ps(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class Ah{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class To extends IS{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new kh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(wd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=To._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}To._jsonSchemaVersion="firestore/documentSnapshot/1.0",To._jsonSchema={type:Ut("string",To._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class kh extends To{data(e={}){return super.data(e)}}class So{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Ah(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new kh(this._firestore,this._userDataWriter,r.key,r,new Ah(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((m=>{const g=new kh(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Ah(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const g=new kh(a._firestore,a._userDataWriter,m.doc.key,m.doc,new Ah(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,v=-1;return m.type!==0&&(p=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),v=c.indexOf(m.doc.key)),{type:U5(m.type),doc:g,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=So._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bT.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function U5(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe(61501,{type:s})}}So._jsonSchemaVersion="firestore/querySnapshot/1.0",So._jsonSchema={type:Ut("string",So._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class L5 extends V5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,t)}}function z5(s){s=wg(s,ha);const e=wg(s.firestore,SS),t=E5(e),r=new L5(e);return j5(s._query),_5(t,s._query).then((a=>new So(e,r,s,a)))}(function(e,t=!0){(function(a){qo=a})(zo),xo(new oa("firestore",((r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),m=new SS(new LN(r.getProvider("auth-internal")),new qN(c,r.getProvider("app-check-internal")),(function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new de(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wu(p.options.projectId,v)})(c,a),c);return l={useFetchStreams:t,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),li(Sb,Ab,e),li(Sb,Ab,"esm2020")})();const B5={apiKey:"AIzaSyDll7h-FpzCVml2vy8KeMPA6xExGUda_NE",authDomain:"thi-tnd.firebaseapp.com",projectId:"thi-tnd",storageBucket:"thi-tnd.firebasestorage.app",messagingSenderId:"107125875663",appId:"1:107125875663:web:0e1a632779f51340c828ba",databaseURL:"https://thi-tnd-default-rtdb.asia-southeast1.firebasedatabase.app"},DS=RI().length?ep():DE(B5);MN(DS);const q5=w5(DS),H5=async s=>{try{const e=k5(b5(q5,"exam_results"),M5("userId","==",s),P5("completedAt","desc"));return(await z5(e)).docs.map(r=>{const a=r.data();return{id:r.id,...a,completedAt:a.completedAt.toDate()}})}catch(e){return console.error("Error fetching exam history:",e),[]}},$5=({userProfile:s,onBack:e})=>{const[t,r]=pe.useState([]),[a,l]=pe.useState(!0);pe.useEffect(()=>{(async()=>{const p=await H5(s.id);r(p),l(!1)})()},[s.id]);const c=g=>new Intl.DateTimeFormat("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(g),m=g=>{const p=Math.floor(g/60),v=g%60;return`${p} pht ${v} giy`};return b.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right",children:[b.jsxs("div",{className:"flex justify-between items-center mb-6",children:[b.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Lch s lm bi"}),b.jsx("button",{onClick:e,className:"bg-secondary text-secondary-foreground px-4 py-2 rounded-lg hover:bg-secondary/80 transition-colors",children:"Quay li"})]}),a?b.jsx("div",{className:"text-center p-8",children:b.jsx("p",{className:"text-muted-foreground",children:"ang ti d liu..."})}):t.length===0?b.jsx("div",{className:"text-center p-8 bg-card rounded-xl shadow-sm",children:b.jsx("p",{className:"text-muted-foreground",children:"Cha c lch s lm bi no."})}):b.jsx("div",{className:"space-y-4",children:t.map(g=>b.jsx("div",{className:"bg-card text-card-foreground p-6 rounded-xl shadow-md border border-border",children:b.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4",children:[b.jsxs("div",{children:[b.jsx("h3",{className:"text-xl font-bold text-primary mb-1",children:g.quizTitle}),b.jsxs("p",{className:"text-sm text-muted-foreground",children:["Thi gian: ",c(g.completedAt)]})]}),b.jsxs("div",{className:"flex items-center gap-6",children:[b.jsxs("div",{className:"text-center",children:[b.jsx("p",{className:"text-xs text-muted-foreground uppercase font-bold",children:"im s"}),b.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[g.score,"/",g.totalQuestions]})]}),b.jsxs("div",{className:"text-center",children:[b.jsx("p",{className:"text-xs text-muted-foreground uppercase font-bold",children:"Thi gian lm"}),b.jsx("p",{className:"text-lg font-semibold",children:m(g.timeTaken)})]})]})]})},g.id))})]})},F5=(s,e)=>{const t=r=>{const a=r.match(/(\d+)$/);return a?parseInt(a[1],10):0};return t(s.id)-t(e.id)},G5=async()=>{const{data:s,error:e}=await Ro.from("licenses").select(`
      id,
      name,
      display_order,
      subjects (
        id,
        name,
        display_order,
        questions (
          *,
          answers (
            id,
            text
          )
        )
      )
    `).order("display_order",{ascending:!0}).order("display_order",{foreignTable:"subjects",ascending:!0});if(e)throw console.error("Error fetching data from Supabase:",e),e;return s.map(r=>({id:r.id,name:r.name,subjects:r.subjects.map(a=>({id:a.id,name:a.name,questions:a.questions.sort(F5).map(l=>({id:l.id,text:l.text,image:l.image,correctAnswerId:l.correct_answer_id,answers:l.answers.map(c=>({id:c.id,text:c.text}))}))}))}))},Ew=async s=>{const{data:e,error:t}=await Ro.from("profiles").select("*").eq("id",s).single();return t?(console.error("Error fetching user profile:",t),null):e},K5=async(s,e,t,r,a)=>{const{error:l}=await Ro.from("exam_results").insert([{user_id:s,license_id:e,score:t,total_questions:r,time_taken:a,completed_at:new Date().toISOString()}]);l&&console.error("Error saving exam result:",l)},je={WELCOME:"welcome",LOGIN:"login",DASHBOARD:"dashboard",LICENSE_SELECTION:"license_selection",NAME_INPUT:"name_input",MODE_SELECTION:"mode_selection",SUBJECT_SELECTION:"subject_selection",IN_QUIZ:"in_quiz",IN_ONLINE_EXAM:"in_online_exam",RESULT:"results",EXAM_RESULT:"exam_result",HISTORY:"history"},Q5=()=>{const[s,e]=pe.useState(je.WELCOME),[t,r]=pe.useState([]),[a,l]=pe.useState(null),[c,m]=pe.useState([]),[g,p]=pe.useState(null),[v,E]=pe.useState(null),[A,x]=pe.useState({}),[j,V]=pe.useState(0),[k,H]=pe.useState(""),[J,Y]=pe.useState(null),[ae,we]=pe.useState(window.innerWidth<768);pe.useEffect(()=>{const K=()=>{we(window.innerWidth<768)};return window.addEventListener("resize",K),()=>window.removeEventListener("resize",K)},[]),pe.useEffect(()=>{(async()=>{try{const re=await G5();r(re)}catch(re){console.error("Error loading licenses:",re)}})()},[]),pe.useEffect(()=>{(async()=>{const{data:{user:ue}}=await Ro.auth.getUser();if(ue){const Re=await Ew(ue.id);Re&&(Y(Re),H(Re.full_name),e(je.DASHBOARD))}})();const{data:re}=Ro.auth.onAuthStateChange(async(ue,Re)=>{if(ue==="SIGNED_IN"&&(Re!=null&&Re.user)){const Pe=await Ew(Re.user.id);Pe&&(Y(Pe),H(Pe.full_name),e(je.DASHBOARD))}else ue==="SIGNED_OUT"&&(Y(null),H(""),e(je.WELCOME))});return()=>{re.subscription.unsubscribe()}},[]);const ce=()=>{e(J?je.DASHBOARD:je.LICENSE_SELECTION)},I=()=>{e(je.LOGIN)},C=async K=>{l(K),e(J?je.MODE_SELECTION:je.NAME_INPUT)},O=K=>{H(K),e(je.MODE_SELECTION)},U=async K=>{K==="practice"?a&&(m(a.subjects),e(je.SUBJECT_SELECTION)):K==="online_exam"&&M()},M=async()=>{if(a){const ue=[...a.subjects.flatMap(Pe=>Pe.questions)].sort(()=>.5-Math.random()).slice(0,30),Re={id:"exam-"+Date.now(),title:` thi th ${a.name}`,questions:ue,timeLimit:1800};E(Re),x({}),e(je.IN_ONLINE_EXAM)}},B=async K=>{p(K);const re={id:K.id,title:K.name,questions:K.questions,timeLimit:0};E(re),x({}),e(je.IN_QUIZ)},N=K=>{if(v){let re=0;v.questions.forEach(ue=>{K[ue.id]===ue.correctAnswerId&&re++}),V(re),x(K),s===je.IN_ONLINE_EXAM?(J&&K5(J.id,a.id,re,30,v.timeLimit-0),e(je.EXAM_RESULT)):e(je.RESULT)}},Qe=()=>{s===je.EXAM_RESULT?M():g&&a&&B(g)},ot=()=>{switch(s){case je.WELCOME:return b.jsx(H0,{onStart:ce,onLoginClick:I});case je.LOGIN:return b.jsx(l2,{onBack:()=>e(je.WELCOME)});case je.LICENSE_SELECTION:return b.jsx(c2,{licenses:t,onSelect:C,onBack:()=>e(je.WELCOME)});case je.NAME_INPUT:return b.jsx(h2,{onNameSubmit:O,onBack:()=>e(je.LICENSE_SELECTION)});case je.MODE_SELECTION:return b.jsx(d2,{onModeSelect:U,licenseName:(a==null?void 0:a.name)||"",userName:k,onSwitchLicense:()=>e(je.LICENSE_SELECTION)});case je.SUBJECT_SELECTION:return b.jsx(f2,{subjects:c,progress:{},onSelect:B,onBack:()=>e(je.MODE_SELECTION)});case je.IN_QUIZ:return v?b.jsx(m2,{quiz:v,onFinish:N,onBack:()=>e(je.SUBJECT_SELECTION)}):null;case je.IN_ONLINE_EXAM:return v?ae?b.jsx(p2,{quiz:v,onFinish:N,onBack:()=>e(je.MODE_SELECTION)}):b.jsx(v2,{quiz:v,onFinish:N,onBack:()=>e(je.MODE_SELECTION),userName:k,selectedLicense:a}):null;case je.RESULT:return v?b.jsx(w2,{quiz:v,userAnswers:A,score:j,onRetry:Qe,onBack:()=>e(je.SUBJECT_SELECTION),userName:k}):null;case je.EXAM_RESULT:return v?b.jsx(b2,{quiz:v,userAnswers:A,score:j,onRetry:Qe,onBack:()=>e(je.MODE_SELECTION),userName:k}):null;case je.DASHBOARD:return b.jsx(W2,{userProfile:J,onStart:()=>e(je.LICENSE_SELECTION),onHistoryClick:()=>e(je.HISTORY)});case je.HISTORY:return b.jsx($5,{userProfile:J,onBack:()=>e(je.DASHBOARD)});default:return b.jsx(H0,{onStart:ce,onLoginClick:I})}};return b.jsx("div",{className:"min-h-screen bg-background text-foreground font-sans transition-colors duration-300",children:ot()})},jS=document.getElementById("root");if(!jS)throw new Error("Could not find root element to mount to");const Y5=TA.createRoot(jS);Y5.render(b.jsx(gA.StrictMode,{children:b.jsx(Zx,{children:b.jsx(Q5,{})})}));
