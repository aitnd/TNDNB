function VA(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in r)){const l=Object.getOwnPropertyDescriptor(s,a);l&&Object.defineProperty(r,a,l.get?l:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function tp(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function UA(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(s){var a=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:function(){return r[s]}})}),t}var Um={exports:{}},ru={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bv;function LA(){if(bv)return ru;bv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:r,type:s,key:c,ref:a!==void 0?a:null,props:l}}return ru.Fragment=e,ru.jsx=t,ru.jsxs=t,ru}var wv;function zA(){return wv||(wv=1,Um.exports=LA()),Um.exports}var _=zA(),Lm={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ev;function BA(){if(Ev)return Re;Ev=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function R(P){return P===null||typeof P!="object"?null:(P=S&&P[S]||P["@@iterator"],typeof P=="function"?P:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,D={};function q(P,W,oe){this.props=P,this.context=W,this.refs=D,this.updater=oe||k}q.prototype.isReactComponent={},q.prototype.setState=function(P,W){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,W,"setState")},q.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function Y(){}Y.prototype=q.prototype;function G(P,W,oe){this.props=P,this.context=W,this.refs=D,this.updater=oe||k}var ne=G.prototype=new Y;ne.constructor=G,j(ne,q.prototype),ne.isPureReactComponent=!0;var _e=Array.isArray;function le(){}var C={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function I(P,W,oe){var ue=oe.ref;return{$$typeof:r,type:P,key:W,ref:ue!==void 0?ue:null,props:oe}}function U(P,W){return I(P.type,W,P.props)}function M(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function z(P){var W={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(oe){return W[oe]})}var N=/\/+/g;function nt(P,W){return typeof P=="object"&&P!==null&&P.key!=null?z(""+P.key):W.toString(36)}function yt(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(le,le):(P.status="pending",P.then(function(W){P.status==="pending"&&(P.status="fulfilled",P.value=W)},function(W){P.status==="pending"&&(P.status="rejected",P.reason=W)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function X(P,W,oe,ue,Se){var Oe=typeof P;(Oe==="undefined"||Oe==="boolean")&&(P=null);var Be=!1;if(P===null)Be=!0;else switch(Oe){case"bigint":case"string":case"number":Be=!0;break;case"object":switch(P.$$typeof){case r:case e:Be=!0;break;case b:return Be=P._init,X(Be(P._payload),W,oe,ue,Se)}}if(Be)return Se=Se(P),Be=ue===""?"."+nt(P,0):ue,_e(Se)?(oe="",Be!=null&&(oe=Be.replace(N,"$&/")+"/"),X(Se,W,oe,"",function(Ei){return Ei})):Se!=null&&(M(Se)&&(Se=U(Se,oe+(Se.key==null||P&&P.key===Se.key?"":(""+Se.key).replace(N,"$&/")+"/")+Be)),W.push(Se)),1;Be=0;var Vt=ue===""?".":ue+":";if(_e(P))for(var lt=0;lt<P.length;lt++)ue=P[lt],Oe=Vt+nt(ue,lt),Be+=X(ue,W,oe,Oe,Se);else if(lt=R(P),typeof lt=="function")for(P=lt.call(P),lt=0;!(ue=P.next()).done;)ue=ue.value,Oe=Vt+nt(ue,lt++),Be+=X(ue,W,oe,Oe,Se);else if(Oe==="object"){if(typeof P.then=="function")return X(yt(P),W,oe,ue,Se);throw W=String(P),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Be}function ae(P,W,oe){if(P==null)return P;var ue=[],Se=0;return X(P,ue,"","",function(Oe){return W.call(oe,Oe,Se++)}),ue}function ie(P){if(P._status===-1){var W=P._result;W=W(),W.then(function(oe){(P._status===0||P._status===-1)&&(P._status=1,P._result=oe)},function(oe){(P._status===0||P._status===-1)&&(P._status=2,P._result=oe)}),P._status===-1&&(P._status=0,P._result=W)}if(P._status===1)return P._result.default;throw P._result}var Ee=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},De={map:ae,forEach:function(P,W,oe){ae(P,function(){W.apply(this,arguments)},oe)},count:function(P){var W=0;return ae(P,function(){W++}),W},toArray:function(P){return ae(P,function(W){return W})||[]},only:function(P){if(!M(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Re.Activity=E,Re.Children=De,Re.Component=q,Re.Fragment=t,Re.Profiler=a,Re.PureComponent=G,Re.StrictMode=s,Re.Suspense=g,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Re.__COMPILER_RUNTIME={__proto__:null,c:function(P){return C.H.useMemoCache(P)}},Re.cache=function(P){return function(){return P.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(P,W,oe){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ue=j({},P.props),Se=P.key;if(W!=null)for(Oe in W.key!==void 0&&(Se=""+W.key),W)!x.call(W,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&W.ref===void 0||(ue[Oe]=W[Oe]);var Oe=arguments.length-2;if(Oe===1)ue.children=oe;else if(1<Oe){for(var Be=Array(Oe),Vt=0;Vt<Oe;Vt++)Be[Vt]=arguments[Vt+2];ue.children=Be}return I(P.type,Se,ue)},Re.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:l,_context:P},P},Re.createElement=function(P,W,oe){var ue,Se={},Oe=null;if(W!=null)for(ue in W.key!==void 0&&(Oe=""+W.key),W)x.call(W,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(Se[ue]=W[ue]);var Be=arguments.length-2;if(Be===1)Se.children=oe;else if(1<Be){for(var Vt=Array(Be),lt=0;lt<Be;lt++)Vt[lt]=arguments[lt+2];Se.children=Vt}if(P&&P.defaultProps)for(ue in Be=P.defaultProps,Be)Se[ue]===void 0&&(Se[ue]=Be[ue]);return I(P,Oe,Se)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(P){return{$$typeof:f,render:P}},Re.isValidElement=M,Re.lazy=function(P){return{$$typeof:b,_payload:{_status:-1,_result:P},_init:ie}},Re.memo=function(P,W){return{$$typeof:p,type:P,compare:W===void 0?null:W}},Re.startTransition=function(P){var W=C.T,oe={};C.T=oe;try{var ue=P(),Se=C.S;Se!==null&&Se(oe,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(le,Ee)}catch(Oe){Ee(Oe)}finally{W!==null&&oe.types!==null&&(W.types=oe.types),C.T=W}},Re.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Re.use=function(P){return C.H.use(P)},Re.useActionState=function(P,W,oe){return C.H.useActionState(P,W,oe)},Re.useCallback=function(P,W){return C.H.useCallback(P,W)},Re.useContext=function(P){return C.H.useContext(P)},Re.useDebugValue=function(){},Re.useDeferredValue=function(P,W){return C.H.useDeferredValue(P,W)},Re.useEffect=function(P,W){return C.H.useEffect(P,W)},Re.useEffectEvent=function(P){return C.H.useEffectEvent(P)},Re.useId=function(){return C.H.useId()},Re.useImperativeHandle=function(P,W,oe){return C.H.useImperativeHandle(P,W,oe)},Re.useInsertionEffect=function(P,W){return C.H.useInsertionEffect(P,W)},Re.useLayoutEffect=function(P,W){return C.H.useLayoutEffect(P,W)},Re.useMemo=function(P,W){return C.H.useMemo(P,W)},Re.useOptimistic=function(P,W){return C.H.useOptimistic(P,W)},Re.useReducer=function(P,W,oe){return C.H.useReducer(P,W,oe)},Re.useRef=function(P){return C.H.useRef(P)},Re.useState=function(P){return C.H.useState(P)},Re.useSyncExternalStore=function(P,W,oe){return C.H.useSyncExternalStore(P,W,oe)},Re.useTransition=function(){return C.H.useTransition()},Re.version="19.2.0",Re}var Tv;function np(){return Tv||(Tv=1,Lm.exports=BA()),Lm.exports}var me=np();const oi=tp(me);var zm={exports:{}},su={},Bm={exports:{}},qm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sv;function qA(){return Sv||(Sv=1,(function(r){function e(X,ae){var ie=X.length;X.push(ae);e:for(;0<ie;){var Ee=ie-1>>>1,De=X[Ee];if(0<a(De,ae))X[Ee]=ae,X[ie]=De,ie=Ee;else break e}}function t(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var ae=X[0],ie=X.pop();if(ie!==ae){X[0]=ie;e:for(var Ee=0,De=X.length,P=De>>>1;Ee<P;){var W=2*(Ee+1)-1,oe=X[W],ue=W+1,Se=X[ue];if(0>a(oe,ie))ue<De&&0>a(Se,oe)?(X[Ee]=Se,X[ue]=ie,Ee=ue):(X[Ee]=oe,X[W]=ie,Ee=W);else if(ue<De&&0>a(Se,ie))X[Ee]=Se,X[ue]=ie,Ee=ue;else break e}}return ae}function a(X,ae){var ie=X.sortIndex-ae.sortIndex;return ie!==0?ie:X.id-ae.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();r.unstable_now=function(){return c.now()-f}}var g=[],p=[],b=1,E=null,S=3,R=!1,k=!1,j=!1,D=!1,q=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function ne(X){for(var ae=t(p);ae!==null;){if(ae.callback===null)s(p);else if(ae.startTime<=X)s(p),ae.sortIndex=ae.expirationTime,e(g,ae);else break;ae=t(p)}}function _e(X){if(j=!1,ne(X),!k)if(t(g)!==null)k=!0,le||(le=!0,z());else{var ae=t(p);ae!==null&&yt(_e,ae.startTime-X)}}var le=!1,C=-1,x=5,I=-1;function U(){return D?!0:!(r.unstable_now()-I<x)}function M(){if(D=!1,le){var X=r.unstable_now();I=X;var ae=!0;try{e:{k=!1,j&&(j=!1,Y(C),C=-1),R=!0;var ie=S;try{t:{for(ne(X),E=t(g);E!==null&&!(E.expirationTime>X&&U());){var Ee=E.callback;if(typeof Ee=="function"){E.callback=null,S=E.priorityLevel;var De=Ee(E.expirationTime<=X);if(X=r.unstable_now(),typeof De=="function"){E.callback=De,ne(X),ae=!0;break t}E===t(g)&&s(g),ne(X)}else s(g);E=t(g)}if(E!==null)ae=!0;else{var P=t(p);P!==null&&yt(_e,P.startTime-X),ae=!1}}break e}finally{E=null,S=ie,R=!1}ae=void 0}}finally{ae?z():le=!1}}}var z;if(typeof G=="function")z=function(){G(M)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,nt=N.port2;N.port1.onmessage=M,z=function(){nt.postMessage(null)}}else z=function(){q(M,0)};function yt(X,ae){C=q(function(){X(r.unstable_now())},ae)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(X){X.callback=null},r.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<X?Math.floor(1e3/X):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(X){switch(S){case 1:case 2:case 3:var ae=3;break;default:ae=S}var ie=S;S=ae;try{return X()}finally{S=ie}},r.unstable_requestPaint=function(){D=!0},r.unstable_runWithPriority=function(X,ae){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ie=S;S=X;try{return ae()}finally{S=ie}},r.unstable_scheduleCallback=function(X,ae,ie){var Ee=r.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?Ee+ie:Ee):ie=Ee,X){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=ie+De,X={id:b++,callback:ae,priorityLevel:X,startTime:ie,expirationTime:De,sortIndex:-1},ie>Ee?(X.sortIndex=ie,e(p,X),t(g)===null&&X===t(p)&&(j?(Y(C),C=-1):j=!0,yt(_e,ie-Ee))):(X.sortIndex=De,e(g,X),k||R||(k=!0,le||(le=!0,z()))),X},r.unstable_shouldYield=U,r.unstable_wrapCallback=function(X){var ae=S;return function(){var ie=S;S=ae;try{return X.apply(this,arguments)}finally{S=ie}}}})(qm)),qm}var Av;function HA(){return Av||(Av=1,Bm.exports=qA()),Bm.exports}var Hm={exports:{}},nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rv;function $A(){if(Rv)return nn;Rv=1;var r=np();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,p,b){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:g,containerInfo:p,implementation:b}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,nn.createPortal=function(g,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(g,p,null,b)},nn.flushSync=function(g){var p=c.T,b=s.p;try{if(c.T=null,s.p=2,g)return g()}finally{c.T=p,s.p=b,s.d.f()}},nn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},nn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},nn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var b=p.as,E=f(b,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,R=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:R}):b==="script"&&s.d.X(g,{crossOrigin:E,integrity:S,fetchPriority:R,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},nn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=f(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},nn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,E=f(b,p.crossOrigin);s.d.L(g,b,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},nn.preloadModule=function(g,p){if(typeof g=="string")if(p){var b=f(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},nn.requestFormReset=function(g){s.d.r(g)},nn.unstable_batchedUpdates=function(g,p){return g(p)},nn.useFormState=function(g,p,b){return c.H.useFormState(g,p,b)},nn.useFormStatus=function(){return c.H.useHostTransitionStatus()},nn.version="19.2.0",nn}var xv;function FA(){if(xv)return Hm.exports;xv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Hm.exports=$A(),Hm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cv;function GA(){if(Cv)return su;Cv=1;var r=HA(),e=np(),t=FA();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function f(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(l(n)!==n)throw Error(s(188))}function p(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(s(188));return i!==n?null:n}for(var o=n,u=i;;){var d=o.return;if(d===null)break;var m=d.alternate;if(m===null){if(u=d.return,u!==null){o=u;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===o)return g(d),n;if(m===u)return g(d),i;m=m.sibling}throw Error(s(188))}if(o.return!==u.return)o=d,u=m;else{for(var v=!1,T=d.child;T;){if(T===o){v=!0,o=d,u=m;break}if(T===u){v=!0,u=d,o=m;break}T=T.sibling}if(!v){for(T=m.child;T;){if(T===o){v=!0,o=m,u=d;break}if(T===u){v=!0,u=m,o=d;break}T=T.sibling}if(!v)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?n:i}function b(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=b(n),i!==null)return i;n=n.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),Y=Symbol.for("react.consumer"),G=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),_e=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function z(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var N=Symbol.for("react.client.reference");function nt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===N?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case j:return"Fragment";case q:return"Profiler";case D:return"StrictMode";case _e:return"Suspense";case le:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case k:return"Portal";case G:return n.displayName||"Context";case Y:return(n._context.displayName||"Context")+".Consumer";case ne:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case C:return i=n.displayName||null,i!==null?i:nt(n.type)||"Memo";case x:i=n._payload,n=n._init;try{return nt(n(i))}catch{}}return null}var yt=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},Ee=[],De=-1;function P(n){return{current:n}}function W(n){0>De||(n.current=Ee[De],Ee[De]=null,De--)}function oe(n,i){De++,Ee[De]=n.current,n.current=i}var ue=P(null),Se=P(null),Oe=P(null),Be=P(null);function Vt(n,i){switch(oe(Oe,i),oe(Se,n),oe(ue,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?H0(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=H0(i),n=$0(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}W(ue),oe(ue,n)}function lt(){W(ue),W(Se),W(Oe)}function Ei(n){n.memoizedState!==null&&oe(Be,n);var i=ue.current,o=$0(i,n.type);i!==o&&(oe(Se,n),oe(ue,o))}function ba(n){Se.current===n&&(W(ue),W(Se)),Be.current===n&&(W(Be),Zl._currentValue=ie)}var wa,Ea;function gr(n){if(wa===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);wa=i&&i[1]||"",Ea=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wa+n+Ea}var Zo=!1;function Ti(n,i){if(!n||Zo)return"";Zo=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(Q){var F=Q}Reflect.construct(n,[],ee)}else{try{ee.call()}catch(Q){F=Q}n.call(ee.prototype)}}else{try{throw Error()}catch(Q){F=Q}(ee=n())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(Q){if(Q&&F&&typeof Q.stack=="string")return[Q.stack,F.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),v=m[0],T=m[1];if(v&&T){var O=v.split(`
`),$=T.split(`
`);for(d=u=0;u<O.length&&!O[u].includes("DetermineComponentFrameRoot");)u++;for(;d<$.length&&!$[d].includes("DetermineComponentFrameRoot");)d++;if(u===O.length||d===$.length)for(u=O.length-1,d=$.length-1;1<=u&&0<=d&&O[u]!==$[d];)d--;for(;1<=u&&0<=d;u--,d--)if(O[u]!==$[d]){if(u!==1||d!==1)do if(u--,d--,0>d||O[u]!==$[d]){var J=`
`+O[u].replace(" at new "," at ");return n.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",n.displayName)),J}while(1<=u&&0<=d);break}}}finally{Zo=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?gr(o):""}function el(n,i){switch(n.tag){case 26:case 27:case 5:return gr(n.type);case 16:return gr("Lazy");case 13:return n.child!==i&&i!==null?gr("Suspense Fallback"):gr("Suspense");case 19:return gr("SuspenseList");case 0:case 15:return Ti(n.type,!1);case 11:return Ti(n.type.render,!1);case 1:return Ti(n.type,!0);case 31:return gr("Activity");default:return""}}function tl(n){try{var i="",o=null;do i+=el(n,o),o=n,n=n.return;while(n);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var St=Object.prototype.hasOwnProperty,Ut=r.unstable_scheduleCallback,vs=r.unstable_cancelCallback,Ld=r.unstable_shouldYield,Hu=r.unstable_requestPaint,cn=r.unstable_now,Si=r.unstable_getCurrentPriorityLevel,nl=r.unstable_ImmediatePriority,rl=r.unstable_UserBlockingPriority,bs=r.unstable_NormalPriority,zd=r.unstable_LowPriority,$u=r.unstable_IdlePriority,Fu=r.log,Gu=r.unstable_setDisableYieldValue,Xn=null,Gt=null;function Pn(n){if(typeof Fu=="function"&&Gu(n),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(Xn,n)}catch{}}var _t=Math.clz32?Math.clz32:Qu,Ku=Math.log,Ta=Math.LN2;function Qu(n){return n>>>=0,n===0?32:31-(Ku(n)/Ta|0)|0}var pr=256,Ai=262144,At=4194304;function yr(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function _r(n,i,o){var u=n.pendingLanes;if(u===0)return 0;var d=0,m=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var T=u&134217727;return T!==0?(u=T&~m,u!==0?d=yr(u):(v&=T,v!==0?d=yr(v):o||(o=T&~n,o!==0&&(d=yr(o))))):(T=u&~m,T!==0?d=yr(T):v!==0?d=yr(v):o||(o=u&~n,o!==0&&(d=yr(o)))),d===0?0:i!==0&&i!==d&&(i&m)===0&&(m=d&-d,o=i&-i,m>=o||m===32&&(o&4194048)!==0)?i:d}function Jn(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Bd(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yu(){var n=At;return At<<=1,(At&62914560)===0&&(At=4194304),n}function vr(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function Ri(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function qd(n,i,o,u,d,m){var v=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var T=n.entanglements,O=n.expirationTimes,$=n.hiddenUpdates;for(o=v&~o;0<o;){var J=31-_t(o),ee=1<<J;T[J]=0,O[J]=-1;var F=$[J];if(F!==null)for($[J]=null,J=0;J<F.length;J++){var Q=F[J];Q!==null&&(Q.lane&=-536870913)}o&=~ee}u!==0&&xi(n,u,0),m!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=m&~(v&~i))}function xi(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var u=31-_t(i);n.entangledLanes|=i,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function sl(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var u=31-_t(o),d=1<<u;d&i|n[u]&i&&(n[u]|=i),o&=~d}}function il(n,i){var o=i&-i;return o=(o&42)!==0?1:Ci(o),(o&(n.suspendedLanes|i))!==0?0:o}function Ci(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Qr(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Xu(){var n=ae.p;return n!==0?n:(n=window.event,n===void 0?32:fv(n.type))}function Wn(n,i){var o=ae.p;try{return ae.p=n,i()}finally{ae.p=o}}var Zn=Math.random().toString(36).slice(2),Rt="__reactFiber$"+Zn,qt="__reactProps$"+Zn,br="__reactContainer$"+Zn,Sa="__reactEvents$"+Zn,Hd="__reactListeners$"+Zn,Ju="__reactHandles$"+Zn,Wu="__reactResources$"+Zn,wr="__reactMarker$"+Zn;function Aa(n){delete n[Rt],delete n[qt],delete n[Sa],delete n[Hd],delete n[Ju]}function Er(n){var i=n[Rt];if(i)return i;for(var o=n.parentNode;o;){if(i=o[br]||o[Rt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=J0(n);n!==null;){if(o=n[Rt])return o;n=J0(n)}return i}n=o,o=n.parentNode}return null}function Mn(n){if(n=n[Rt]||n[br]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function En(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function Tr(n){var i=n[Wu];return i||(i=n[Wu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function xt(n){n[wr]=!0}var al=new Set,ol={};function Sr(n,i){Ar(n,i),Ar(n+"Capture",i)}function Ar(n,i){for(ol[n]=i,n=0;n<i.length;n++)al.add(i[n])}var ll=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ul={},cl={};function Zu(n){return St.call(cl,n)?!0:St.call(ul,n)?!1:ll.test(n)?cl[n]=!0:(ul[n]=!0,!1)}function Ra(n,i,o){if(Zu(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function Tn(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function Ct(n,i,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+u)}}function Ht(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ws(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function hl(n,i,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var d=u.get,m=u.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(v){o=""+v,m.call(this,v)}}),Object.defineProperty(n,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Ye(n){if(!n._valueTracker){var i=ws(n)?"checked":"value";n._valueTracker=hl(n,i,""+n[i])}}function Ii(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return n&&(u=ws(n)?n.checked?"true":"false":n.value),n=u,n!==o?(i.setValue(n),!0):!1}function Rr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Ni=/[\n"\\]/g;function mn(n){return n.replace(Ni,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function xa(n,i,o,u,d,m,v,T){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),i!=null?v==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Ht(i)):n.value!==""+Ht(i)&&(n.value=""+Ht(i)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),i!=null?dl(n,v,Ht(i)):o!=null?dl(n,v,Ht(o)):u!=null&&n.removeAttribute("value"),d==null&&m!=null&&(n.defaultChecked=!!m),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+Ht(T):n.removeAttribute("name")}function ec(n,i,o,u,d,m,v,T){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),i!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){Ye(n);return}o=o!=null?""+Ht(o):"",i=i!=null?""+Ht(i):o,T||i===n.value||(n.value=i),n.defaultValue=i}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=T?n.checked:!!u,n.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),Ye(n)}function dl(n,i,o){i==="number"&&Rr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Es(n,i,o,u){if(n=n.options,i){i={};for(var d=0;d<o.length;d++)i["$"+o[d]]=!0;for(o=0;o<n.length;o++)d=i.hasOwnProperty("$"+n[o].value),n[o].selected!==d&&(n[o].selected=d),d&&u&&(n[o].defaultSelected=!0)}else{for(o=""+Ht(o),i=null,d=0;d<n.length;d++){if(n[d].value===o){n[d].selected=!0,u&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function tc(n,i,o){if(i!=null&&(i=""+Ht(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+Ht(o):""}function Ts(n,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(s(92));if(yt(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=Ht(i),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),Ye(n)}function gn(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var nc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fl(n,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":u?n.setProperty(i,o):typeof o!="number"||o===0||nc.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function ml(n,i,o){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var d in i)u=i[d],i.hasOwnProperty(d)&&o[d]!==u&&fl(n,d,u)}else for(var m in i)i.hasOwnProperty(m)&&fl(n,m,i[m])}function Ca(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ss=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ia(n){return Ss.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function er(){}var gl=null;function Vn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var As=null,xr=null;function Oi(n){var i=Mn(n);if(i&&(n=i.stateNode)){var o=n[qt]||null;e:switch(n=i.stateNode,i.type){case"input":if(xa(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+mn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==n&&u.form===n.form){var d=u[qt]||null;if(!d)throw Error(s(90));xa(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===n.form&&Ii(u)}break e;case"textarea":tc(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Es(n,!!o.multiple,i,!1)}}}var Na=!1;function Rs(n,i,o){if(Na)return n(i,o);Na=!0;try{var u=n(i);return u}finally{if(Na=!1,(As!==null||xr!==null)&&(Xc(),As&&(i=As,n=xr,xr=As=null,Oi(i),n)))for(i=0;i<n.length;i++)Oi(n[i])}}function tr(n,i){var o=n.stateNode;if(o===null)return null;var u=o[qt]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(s(231,i,typeof o));return o}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ki=!1;if(Un)try{var We={};Object.defineProperty(We,"passive",{get:function(){ki=!0}}),window.addEventListener("test",We,We),window.removeEventListener("test",We,We)}catch{ki=!1}var Cr=null,pl=null,Di=null;function yl(){if(Di)return Di;var n,i=pl,o=i.length,u,d="value"in Cr?Cr.value:Cr.textContent,m=d.length;for(n=0;n<o&&i[n]===d[n];n++);var v=o-n;for(u=1;u<=v&&i[o-u]===d[m-u];u++);return Di=d.slice(n,1<u?1-u:void 0)}function ji(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Yr(){return!0}function nr(){return!1}function Kt(n){function i(o,u,d,m,v){this._reactName=o,this._targetInst=d,this.type=u,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(o=n[T],this[T]=o?o(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Yr:nr,this.isPropagationStopped=nr,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Yr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Yr)},persist:function(){},isPersistent:Yr}),i}var Xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ir=Kt(Xr),xs=E({},Xr,{view:0,detail:0}),_l=Kt(xs),Cs,Oa,Nr,ka=E({},xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Is,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Nr&&(Nr&&n.type==="mousemove"?(Cs=n.screenX-Nr.screenX,Oa=n.screenY-Nr.screenY):Oa=Cs=0,Nr=n),Cs)},movementY:function(n){return"movementY"in n?n.movementY:Oa}}),vl=Kt(ka),Pi=E({},ka,{dataTransfer:0}),sc=Kt(Pi),ic=E({},xs,{relatedTarget:0}),Mi=Kt(ic),bl=E({},Xr,{animationName:0,elapsedTime:0,pseudoElement:0}),ac=Kt(bl),Da=E({},Xr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),oc=Kt(Da),lc=E({},Xr,{data:0}),Or=Kt(lc),uc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dc(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=hc[n])?!!i[n]:!1}function Is(){return dc}var hn=E({},xs,{key:function(n){if(n.key){var i=uc[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=ji(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?cc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Is,charCode:function(n){return n.type==="keypress"?ji(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ji(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),fc=Kt(hn),mc=E({},ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jr=Kt(mc),h=E({},xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Is}),y=Kt(h),w=E({},Xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Kt(w),B=E({},ka,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),K=Kt(B),se=E({},Xr,{newState:0,oldState:0}),Ie=Kt(se),vt=[9,13,27,32],Ke=Un&&"CompositionEvent"in window,ut=null;Un&&"documentMode"in document&&(ut=document.documentMode);var Ln=Un&&"TextEvent"in window&&!ut,kr=Un&&(!Ke||ut&&8<ut&&11>=ut),rr=" ",sr=!1;function Vi(n,i){switch(n){case"keyup":return vt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ja(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Pa=!1;function oS(n,i){switch(n){case"compositionend":return ja(i);case"keypress":return i.which!==32?null:(sr=!0,rr);case"textInput":return n=i.data,n===rr&&sr?null:n;default:return null}}function lS(n,i){if(Pa)return n==="compositionend"||!Ke&&Vi(n,i)?(n=yl(),Di=pl=Cr=null,Pa=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return kr&&i.locale!=="ko"?null:i.data;default:return null}}var uS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ey(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!uS[n.type]:i==="textarea"}function ty(n,i,o,u){As?xr?xr.push(u):xr=[u]:As=u,i=rh(i,"onChange"),0<i.length&&(o=new Ir("onChange","change",null,o,u),n.push({event:o,listeners:i}))}var wl=null,El=null;function cS(n){V0(n,0)}function gc(n){var i=En(n);if(Ii(i))return n}function ny(n,i){if(n==="change")return i}var ry=!1;if(Un){var $d;if(Un){var Fd="oninput"in document;if(!Fd){var sy=document.createElement("div");sy.setAttribute("oninput","return;"),Fd=typeof sy.oninput=="function"}$d=Fd}else $d=!1;ry=$d&&(!document.documentMode||9<document.documentMode)}function iy(){wl&&(wl.detachEvent("onpropertychange",ay),El=wl=null)}function ay(n){if(n.propertyName==="value"&&gc(El)){var i=[];ty(i,El,n,Vn(n)),Rs(cS,i)}}function hS(n,i,o){n==="focusin"?(iy(),wl=i,El=o,wl.attachEvent("onpropertychange",ay)):n==="focusout"&&iy()}function dS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return gc(El)}function fS(n,i){if(n==="click")return gc(i)}function mS(n,i){if(n==="input"||n==="change")return gc(i)}function gS(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Sn=typeof Object.is=="function"?Object.is:gS;function Tl(n,i){if(Sn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var d=o[u];if(!St.call(i,d)||!Sn(n[d],i[d]))return!1}return!0}function oy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ly(n,i){var o=oy(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=i&&u>=i)return{node:o,offset:i-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=oy(o)}}function uy(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?uy(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function cy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Rr(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=Rr(n.document)}return i}function Gd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var pS=Un&&"documentMode"in document&&11>=document.documentMode,Ma=null,Kd=null,Sl=null,Qd=!1;function hy(n,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Qd||Ma==null||Ma!==Rr(u)||(u=Ma,"selectionStart"in u&&Gd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Sl&&Tl(Sl,u)||(Sl=u,u=rh(Kd,"onSelect"),0<u.length&&(i=new Ir("onSelect","select",null,i,o),n.push({event:i,listeners:u}),i.target=Ma)))}function Ui(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var Va={animationend:Ui("Animation","AnimationEnd"),animationiteration:Ui("Animation","AnimationIteration"),animationstart:Ui("Animation","AnimationStart"),transitionrun:Ui("Transition","TransitionRun"),transitionstart:Ui("Transition","TransitionStart"),transitioncancel:Ui("Transition","TransitionCancel"),transitionend:Ui("Transition","TransitionEnd")},Yd={},dy={};Un&&(dy=document.createElement("div").style,"AnimationEvent"in window||(delete Va.animationend.animation,delete Va.animationiteration.animation,delete Va.animationstart.animation),"TransitionEvent"in window||delete Va.transitionend.transition);function Li(n){if(Yd[n])return Yd[n];if(!Va[n])return n;var i=Va[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in dy)return Yd[n]=i[o];return n}var fy=Li("animationend"),my=Li("animationiteration"),gy=Li("animationstart"),yS=Li("transitionrun"),_S=Li("transitionstart"),vS=Li("transitioncancel"),py=Li("transitionend"),yy=new Map,Xd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xd.push("scrollEnd");function ir(n,i){yy.set(n,i),Sr(i,[n])}var pc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},zn=[],Ua=0,Jd=0;function yc(){for(var n=Ua,i=Jd=Ua=0;i<n;){var o=zn[i];zn[i++]=null;var u=zn[i];zn[i++]=null;var d=zn[i];zn[i++]=null;var m=zn[i];if(zn[i++]=null,u!==null&&d!==null){var v=u.pending;v===null?d.next=d:(d.next=v.next,v.next=d),u.pending=d}m!==0&&_y(o,d,m)}}function _c(n,i,o,u){zn[Ua++]=n,zn[Ua++]=i,zn[Ua++]=o,zn[Ua++]=u,Jd|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Wd(n,i,o,u){return _c(n,i,o,u),vc(n)}function zi(n,i){return _c(n,null,null,i),vc(n)}function _y(n,i,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var d=!1,m=n.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(d=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,d&&i!==null&&(d=31-_t(o),n=m.hiddenUpdates,u=n[d],u===null?n[d]=[i]:u.push(i),i.lane=o|536870912),m):null}function vc(n){if(50<Gl)throw Gl=0,lm=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var La={};function bS(n,i,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(n,i,o,u){return new bS(n,i,o,u)}function Zd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Wr(n,i){var o=n.alternate;return o===null?(o=An(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function vy(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function bc(n,i,o,u,d,m){var v=0;if(u=n,typeof n=="function")Zd(n)&&(v=1);else if(typeof n=="string")v=AA(n,o,ue.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=An(31,o,i,d),n.elementType=I,n.lanes=m,n;case j:return Bi(o.children,d,m,i);case D:v=8,d|=24;break;case q:return n=An(12,o,i,d|2),n.elementType=q,n.lanes=m,n;case _e:return n=An(13,o,i,d),n.elementType=_e,n.lanes=m,n;case le:return n=An(19,o,i,d),n.elementType=le,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case G:v=10;break e;case Y:v=9;break e;case ne:v=11;break e;case C:v=14;break e;case x:v=16,u=null;break e}v=29,o=Error(s(130,n===null?"null":typeof n,"")),u=null}return i=An(v,o,i,d),i.elementType=n,i.type=u,i.lanes=m,i}function Bi(n,i,o,u){return n=An(7,n,u,i),n.lanes=o,n}function ef(n,i,o){return n=An(6,n,null,i),n.lanes=o,n}function by(n){var i=An(18,null,null,0);return i.stateNode=n,i}function tf(n,i,o){return i=An(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var wy=new WeakMap;function Bn(n,i){if(typeof n=="object"&&n!==null){var o=wy.get(n);return o!==void 0?o:(i={value:n,source:i,stack:tl(i)},wy.set(n,i),i)}return{value:n,source:i,stack:tl(i)}}var za=[],Ba=0,wc=null,Al=0,qn=[],Hn=0,Ns=null,Dr=1,jr="";function Zr(n,i){za[Ba++]=Al,za[Ba++]=wc,wc=n,Al=i}function Ey(n,i,o){qn[Hn++]=Dr,qn[Hn++]=jr,qn[Hn++]=Ns,Ns=n;var u=Dr;n=jr;var d=32-_t(u)-1;u&=~(1<<d),o+=1;var m=32-_t(i)+d;if(30<m){var v=d-d%5;m=(u&(1<<v)-1).toString(32),u>>=v,d-=v,Dr=1<<32-_t(i)+d|o<<d|u,jr=m+n}else Dr=1<<m|o<<d|u,jr=n}function nf(n){n.return!==null&&(Zr(n,1),Ey(n,1,0))}function rf(n){for(;n===wc;)wc=za[--Ba],za[Ba]=null,Al=za[--Ba],za[Ba]=null;for(;n===Ns;)Ns=qn[--Hn],qn[Hn]=null,jr=qn[--Hn],qn[Hn]=null,Dr=qn[--Hn],qn[Hn]=null}function Ty(n,i){qn[Hn++]=Dr,qn[Hn++]=jr,qn[Hn++]=Ns,Dr=i.id,jr=i.overflow,Ns=n}var Qt=null,at=null,Le=!1,Os=null,$n=!1,sf=Error(s(519));function ks(n){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Rl(Bn(i,n)),sf}function Sy(n){var i=n.stateNode,o=n.type,u=n.memoizedProps;switch(i[Rt]=n,i[qt]=u,o){case"dialog":Pe("cancel",i),Pe("close",i);break;case"iframe":case"object":case"embed":Pe("load",i);break;case"video":case"audio":for(o=0;o<Ql.length;o++)Pe(Ql[o],i);break;case"source":Pe("error",i);break;case"img":case"image":case"link":Pe("error",i),Pe("load",i);break;case"details":Pe("toggle",i);break;case"input":Pe("invalid",i),ec(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Pe("invalid",i);break;case"textarea":Pe("invalid",i),Ts(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||B0(i.textContent,o)?(u.popover!=null&&(Pe("beforetoggle",i),Pe("toggle",i)),u.onScroll!=null&&Pe("scroll",i),u.onScrollEnd!=null&&Pe("scrollend",i),u.onClick!=null&&(i.onclick=er),i=!0):i=!1,i||ks(n,!0)}function Ay(n){for(Qt=n.return;Qt;)switch(Qt.tag){case 5:case 31:case 13:$n=!1;return;case 27:case 3:$n=!0;return;default:Qt=Qt.return}}function qa(n){if(n!==Qt)return!1;if(!Le)return Ay(n),Le=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Tm(n.type,n.memoizedProps)),o=!o),o&&at&&ks(n),Ay(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));at=X0(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));at=X0(n)}else i===27?(i=at,Gs(n.type)?(n=Cm,Cm=null,at=n):at=i):at=Qt?Gn(n.stateNode.nextSibling):null;return!0}function qi(){at=Qt=null,Le=!1}function af(){var n=Os;return n!==null&&(vn===null?vn=n:vn.push.apply(vn,n),Os=null),n}function Rl(n){Os===null?Os=[n]:Os.push(n)}var of=P(null),Hi=null,es=null;function Ds(n,i,o){oe(of,i._currentValue),i._currentValue=o}function ts(n){n._currentValue=of.current,W(of)}function lf(n,i,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===o)break;n=n.return}}function uf(n,i,o,u){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var m=d.dependencies;if(m!==null){var v=d.child;m=m.firstContext;e:for(;m!==null;){var T=m;m=d;for(var O=0;O<i.length;O++)if(T.context===i[O]){m.lanes|=o,T=m.alternate,T!==null&&(T.lanes|=o),lf(m.return,o,n),u||(v=null);break e}m=T.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(s(341));v.lanes|=o,m=v.alternate,m!==null&&(m.lanes|=o),lf(v,o,n),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===n){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function Ha(n,i,o,u){n=null;for(var d=i,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var T=d.type;Sn(d.pendingProps.value,v.value)||(n!==null?n.push(T):n=[T])}}else if(d===Be.current){if(v=d.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(Zl):n=[Zl])}d=d.return}n!==null&&uf(i,n,o,u),i.flags|=262144}function Ec(n){for(n=n.firstContext;n!==null;){if(!Sn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function $i(n){Hi=n,es=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Yt(n){return Ry(Hi,n)}function Tc(n,i){return Hi===null&&$i(n),Ry(n,i)}function Ry(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},es===null){if(n===null)throw Error(s(308));es=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else es=es.next=i;return o}var wS=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},ES=r.unstable_scheduleCallback,TS=r.unstable_NormalPriority,It={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cf(){return{controller:new wS,data:new Map,refCount:0}}function xl(n){n.refCount--,n.refCount===0&&ES(TS,function(){n.controller.abort()})}var Cl=null,hf=0,$a=0,Fa=null;function SS(n,i){if(Cl===null){var o=Cl=[];hf=0,$a=mm(),Fa={status:"pending",value:void 0,then:function(u){o.push(u)}}}return hf++,i.then(xy,xy),i}function xy(){if(--hf===0&&Cl!==null){Fa!==null&&(Fa.status="fulfilled");var n=Cl;Cl=null,$a=0,Fa=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function AS(n,i){var o=[],u={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return n.then(function(){u.status="fulfilled",u.value=i;for(var d=0;d<o.length;d++)(0,o[d])(i)},function(d){for(u.status="rejected",u.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),u}var Cy=X.S;X.S=function(n,i){h0=cn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&SS(n,i),Cy!==null&&Cy(n,i)};var Fi=P(null);function df(){var n=Fi.current;return n!==null?n:rt.pooledCache}function Sc(n,i){i===null?oe(Fi,Fi.current):oe(Fi,i.pool)}function Iy(){var n=df();return n===null?null:{parent:It._currentValue,pool:n}}var Ga=Error(s(460)),ff=Error(s(474)),Ac=Error(s(542)),Rc={then:function(){}};function Ny(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Oy(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(er,er),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Dy(n),n;default:if(typeof i.status=="string")i.then(er,er);else{if(n=rt,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(u){if(i.status==="pending"){var d=i;d.status="fulfilled",d.value=u}},function(u){if(i.status==="pending"){var d=i;d.status="rejected",d.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Dy(n),n}throw Ki=i,Ga}}function Gi(n){try{var i=n._init;return i(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Ki=o,Ga):o}}var Ki=null;function ky(){if(Ki===null)throw Error(s(459));var n=Ki;return Ki=null,n}function Dy(n){if(n===Ga||n===Ac)throw Error(s(483))}var Ka=null,Il=0;function xc(n){var i=Il;return Il+=1,Ka===null&&(Ka=[]),Oy(Ka,n,i)}function Nl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Cc(n,i){throw i.$$typeof===S?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function jy(n){function i(L,V){if(n){var H=L.deletions;H===null?(L.deletions=[V],L.flags|=16):H.push(V)}}function o(L,V){if(!n)return null;for(;V!==null;)i(L,V),V=V.sibling;return null}function u(L){for(var V=new Map;L!==null;)L.key!==null?V.set(L.key,L):V.set(L.index,L),L=L.sibling;return V}function d(L,V){return L=Wr(L,V),L.index=0,L.sibling=null,L}function m(L,V,H){return L.index=H,n?(H=L.alternate,H!==null?(H=H.index,H<V?(L.flags|=67108866,V):H):(L.flags|=67108866,V)):(L.flags|=1048576,V)}function v(L){return n&&L.alternate===null&&(L.flags|=67108866),L}function T(L,V,H,Z){return V===null||V.tag!==6?(V=ef(H,L.mode,Z),V.return=L,V):(V=d(V,H),V.return=L,V)}function O(L,V,H,Z){var ye=H.type;return ye===j?J(L,V,H.props.children,Z,H.key):V!==null&&(V.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===x&&Gi(ye)===V.type)?(V=d(V,H.props),Nl(V,H),V.return=L,V):(V=bc(H.type,H.key,H.props,null,L.mode,Z),Nl(V,H),V.return=L,V)}function $(L,V,H,Z){return V===null||V.tag!==4||V.stateNode.containerInfo!==H.containerInfo||V.stateNode.implementation!==H.implementation?(V=tf(H,L.mode,Z),V.return=L,V):(V=d(V,H.children||[]),V.return=L,V)}function J(L,V,H,Z,ye){return V===null||V.tag!==7?(V=Bi(H,L.mode,Z,ye),V.return=L,V):(V=d(V,H),V.return=L,V)}function ee(L,V,H){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=ef(""+V,L.mode,H),V.return=L,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case R:return H=bc(V.type,V.key,V.props,null,L.mode,H),Nl(H,V),H.return=L,H;case k:return V=tf(V,L.mode,H),V.return=L,V;case x:return V=Gi(V),ee(L,V,H)}if(yt(V)||z(V))return V=Bi(V,L.mode,H,null),V.return=L,V;if(typeof V.then=="function")return ee(L,xc(V),H);if(V.$$typeof===G)return ee(L,Tc(L,V),H);Cc(L,V)}return null}function F(L,V,H,Z){var ye=V!==null?V.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ye!==null?null:T(L,V,""+H,Z);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case R:return H.key===ye?O(L,V,H,Z):null;case k:return H.key===ye?$(L,V,H,Z):null;case x:return H=Gi(H),F(L,V,H,Z)}if(yt(H)||z(H))return ye!==null?null:J(L,V,H,Z,null);if(typeof H.then=="function")return F(L,V,xc(H),Z);if(H.$$typeof===G)return F(L,V,Tc(L,H),Z);Cc(L,H)}return null}function Q(L,V,H,Z,ye){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return L=L.get(H)||null,T(V,L,""+Z,ye);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case R:return L=L.get(Z.key===null?H:Z.key)||null,O(V,L,Z,ye);case k:return L=L.get(Z.key===null?H:Z.key)||null,$(V,L,Z,ye);case x:return Z=Gi(Z),Q(L,V,H,Z,ye)}if(yt(Z)||z(Z))return L=L.get(H)||null,J(V,L,Z,ye,null);if(typeof Z.then=="function")return Q(L,V,H,xc(Z),ye);if(Z.$$typeof===G)return Q(L,V,H,Tc(V,Z),ye);Cc(V,Z)}return null}function de(L,V,H,Z){for(var ye=null,Fe=null,ge=V,ke=V=0,Ve=null;ge!==null&&ke<H.length;ke++){ge.index>ke?(Ve=ge,ge=null):Ve=ge.sibling;var Ge=F(L,ge,H[ke],Z);if(Ge===null){ge===null&&(ge=Ve);break}n&&ge&&Ge.alternate===null&&i(L,ge),V=m(Ge,V,ke),Fe===null?ye=Ge:Fe.sibling=Ge,Fe=Ge,ge=Ve}if(ke===H.length)return o(L,ge),Le&&Zr(L,ke),ye;if(ge===null){for(;ke<H.length;ke++)ge=ee(L,H[ke],Z),ge!==null&&(V=m(ge,V,ke),Fe===null?ye=ge:Fe.sibling=ge,Fe=ge);return Le&&Zr(L,ke),ye}for(ge=u(ge);ke<H.length;ke++)Ve=Q(ge,L,ke,H[ke],Z),Ve!==null&&(n&&Ve.alternate!==null&&ge.delete(Ve.key===null?ke:Ve.key),V=m(Ve,V,ke),Fe===null?ye=Ve:Fe.sibling=Ve,Fe=Ve);return n&&ge.forEach(function(Js){return i(L,Js)}),Le&&Zr(L,ke),ye}function ve(L,V,H,Z){if(H==null)throw Error(s(151));for(var ye=null,Fe=null,ge=V,ke=V=0,Ve=null,Ge=H.next();ge!==null&&!Ge.done;ke++,Ge=H.next()){ge.index>ke?(Ve=ge,ge=null):Ve=ge.sibling;var Js=F(L,ge,Ge.value,Z);if(Js===null){ge===null&&(ge=Ve);break}n&&ge&&Js.alternate===null&&i(L,ge),V=m(Js,V,ke),Fe===null?ye=Js:Fe.sibling=Js,Fe=Js,ge=Ve}if(Ge.done)return o(L,ge),Le&&Zr(L,ke),ye;if(ge===null){for(;!Ge.done;ke++,Ge=H.next())Ge=ee(L,Ge.value,Z),Ge!==null&&(V=m(Ge,V,ke),Fe===null?ye=Ge:Fe.sibling=Ge,Fe=Ge);return Le&&Zr(L,ke),ye}for(ge=u(ge);!Ge.done;ke++,Ge=H.next())Ge=Q(ge,L,ke,Ge.value,Z),Ge!==null&&(n&&Ge.alternate!==null&&ge.delete(Ge.key===null?ke:Ge.key),V=m(Ge,V,ke),Fe===null?ye=Ge:Fe.sibling=Ge,Fe=Ge);return n&&ge.forEach(function(MA){return i(L,MA)}),Le&&Zr(L,ke),ye}function tt(L,V,H,Z){if(typeof H=="object"&&H!==null&&H.type===j&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case R:e:{for(var ye=H.key;V!==null;){if(V.key===ye){if(ye=H.type,ye===j){if(V.tag===7){o(L,V.sibling),Z=d(V,H.props.children),Z.return=L,L=Z;break e}}else if(V.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===x&&Gi(ye)===V.type){o(L,V.sibling),Z=d(V,H.props),Nl(Z,H),Z.return=L,L=Z;break e}o(L,V);break}else i(L,V);V=V.sibling}H.type===j?(Z=Bi(H.props.children,L.mode,Z,H.key),Z.return=L,L=Z):(Z=bc(H.type,H.key,H.props,null,L.mode,Z),Nl(Z,H),Z.return=L,L=Z)}return v(L);case k:e:{for(ye=H.key;V!==null;){if(V.key===ye)if(V.tag===4&&V.stateNode.containerInfo===H.containerInfo&&V.stateNode.implementation===H.implementation){o(L,V.sibling),Z=d(V,H.children||[]),Z.return=L,L=Z;break e}else{o(L,V);break}else i(L,V);V=V.sibling}Z=tf(H,L.mode,Z),Z.return=L,L=Z}return v(L);case x:return H=Gi(H),tt(L,V,H,Z)}if(yt(H))return de(L,V,H,Z);if(z(H)){if(ye=z(H),typeof ye!="function")throw Error(s(150));return H=ye.call(H),ve(L,V,H,Z)}if(typeof H.then=="function")return tt(L,V,xc(H),Z);if(H.$$typeof===G)return tt(L,V,Tc(L,H),Z);Cc(L,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,V!==null&&V.tag===6?(o(L,V.sibling),Z=d(V,H),Z.return=L,L=Z):(o(L,V),Z=ef(H,L.mode,Z),Z.return=L,L=Z),v(L)):o(L,V)}return function(L,V,H,Z){try{Il=0;var ye=tt(L,V,H,Z);return Ka=null,ye}catch(ge){if(ge===Ga||ge===Ac)throw ge;var Fe=An(29,ge,null,L.mode);return Fe.lanes=Z,Fe.return=L,Fe}finally{}}}var Qi=jy(!0),Py=jy(!1),js=!1;function mf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gf(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ps(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ms(n,i,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Qe&2)!==0){var d=u.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),u.pending=i,i=vc(n),_y(n,null,o),i}return _c(n,u,i,o),vc(n)}function Ol(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,sl(n,o)}}function pf(n,i){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var d=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?d=m=v:m=m.next=v,o=o.next}while(o!==null);m===null?d=m=i:m=m.next=i}else d=m=i;o={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var yf=!1;function kl(){if(yf){var n=Fa;if(n!==null)throw n}}function Dl(n,i,o,u){yf=!1;var d=n.updateQueue;js=!1;var m=d.firstBaseUpdate,v=d.lastBaseUpdate,T=d.shared.pending;if(T!==null){d.shared.pending=null;var O=T,$=O.next;O.next=null,v===null?m=$:v.next=$,v=O;var J=n.alternate;J!==null&&(J=J.updateQueue,T=J.lastBaseUpdate,T!==v&&(T===null?J.firstBaseUpdate=$:T.next=$,J.lastBaseUpdate=O))}if(m!==null){var ee=d.baseState;v=0,J=$=O=null,T=m;do{var F=T.lane&-536870913,Q=F!==T.lane;if(Q?(Me&F)===F:(u&F)===F){F!==0&&F===$a&&(yf=!0),J!==null&&(J=J.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var de=n,ve=T;F=i;var tt=o;switch(ve.tag){case 1:if(de=ve.payload,typeof de=="function"){ee=de.call(tt,ee,F);break e}ee=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=ve.payload,F=typeof de=="function"?de.call(tt,ee,F):de,F==null)break e;ee=E({},ee,F);break e;case 2:js=!0}}F=T.callback,F!==null&&(n.flags|=64,Q&&(n.flags|=8192),Q=d.callbacks,Q===null?d.callbacks=[F]:Q.push(F))}else Q={lane:F,tag:T.tag,payload:T.payload,callback:T.callback,next:null},J===null?($=J=Q,O=ee):J=J.next=Q,v|=F;if(T=T.next,T===null){if(T=d.shared.pending,T===null)break;Q=T,T=Q.next,Q.next=null,d.lastBaseUpdate=Q,d.shared.pending=null}}while(!0);J===null&&(O=ee),d.baseState=O,d.firstBaseUpdate=$,d.lastBaseUpdate=J,m===null&&(d.shared.lanes=0),Bs|=v,n.lanes=v,n.memoizedState=ee}}function My(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function Vy(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)My(o[n],i)}var Qa=P(null),Ic=P(0);function Uy(n,i){n=cs,oe(Ic,n),oe(Qa,i),cs=n|i.baseLanes}function _f(){oe(Ic,cs),oe(Qa,Qa.current)}function vf(){cs=Ic.current,W(Qa),W(Ic)}var Rn=P(null),Fn=null;function Vs(n){var i=n.alternate;oe(bt,bt.current&1),oe(Rn,n),Fn===null&&(i===null||Qa.current!==null||i.memoizedState!==null)&&(Fn=n)}function bf(n){oe(bt,bt.current),oe(Rn,n),Fn===null&&(Fn=n)}function Ly(n){n.tag===22?(oe(bt,bt.current),oe(Rn,n),Fn===null&&(Fn=n)):Us()}function Us(){oe(bt,bt.current),oe(Rn,Rn.current)}function xn(n){W(Rn),Fn===n&&(Fn=null),W(bt)}var bt=P(0);function Nc(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Rm(o)||xm(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ns=0,Ne=null,Ze=null,Nt=null,Oc=!1,Ya=!1,Yi=!1,kc=0,jl=0,Xa=null,RS=0;function gt(){throw Error(s(321))}function wf(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!Sn(n[o],i[o]))return!1;return!0}function Ef(n,i,o,u,d,m){return ns=m,Ne=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,X.H=n===null||n.memoizedState===null?E_:Vf,Yi=!1,m=o(u,d),Yi=!1,Ya&&(m=By(i,o,u,d)),zy(n),m}function zy(n){X.H=Vl;var i=Ze!==null&&Ze.next!==null;if(ns=0,Nt=Ze=Ne=null,Oc=!1,jl=0,Xa=null,i)throw Error(s(300));n===null||Ot||(n=n.dependencies,n!==null&&Ec(n)&&(Ot=!0))}function By(n,i,o,u){Ne=n;var d=0;do{if(Ya&&(Xa=null),jl=0,Ya=!1,25<=d)throw Error(s(301));if(d+=1,Nt=Ze=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}X.H=T_,m=i(o,u)}while(Ya);return m}function xS(){var n=X.H,i=n.useState()[0];return i=typeof i.then=="function"?Pl(i):i,n=n.useState()[0],(Ze!==null?Ze.memoizedState:null)!==n&&(Ne.flags|=1024),i}function Tf(){var n=kc!==0;return kc=0,n}function Sf(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function Af(n){if(Oc){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Oc=!1}ns=0,Nt=Ze=Ne=null,Ya=!1,jl=kc=0,Xa=null}function dn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Ne.memoizedState=Nt=n:Nt=Nt.next=n,Nt}function wt(){if(Ze===null){var n=Ne.alternate;n=n!==null?n.memoizedState:null}else n=Ze.next;var i=Nt===null?Ne.memoizedState:Nt.next;if(i!==null)Nt=i,Ze=n;else{if(n===null)throw Ne.alternate===null?Error(s(467)):Error(s(310));Ze=n,n={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},Nt===null?Ne.memoizedState=Nt=n:Nt=Nt.next=n}return Nt}function Dc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pl(n){var i=jl;return jl+=1,Xa===null&&(Xa=[]),n=Oy(Xa,n,i),i=Ne,(Nt===null?i.memoizedState:Nt.next)===null&&(i=i.alternate,X.H=i===null||i.memoizedState===null?E_:Vf),n}function jc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Pl(n);if(n.$$typeof===G)return Yt(n)}throw Error(s(438,String(n)))}function Rf(n){var i=null,o=Ne.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=Ne.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(d){return d.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Dc(),Ne.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),u=0;u<n;u++)o[u]=U;return i.index++,o}function rs(n,i){return typeof i=="function"?i(n):i}function Pc(n){var i=wt();return xf(i,Ze,n)}function xf(n,i,o){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var d=n.baseQueue,m=u.pending;if(m!==null){if(d!==null){var v=d.next;d.next=m.next,m.next=v}i.baseQueue=d=m,u.pending=null}if(m=n.baseState,d===null)n.memoizedState=m;else{i=d.next;var T=v=null,O=null,$=i,J=!1;do{var ee=$.lane&-536870913;if(ee!==$.lane?(Me&ee)===ee:(ns&ee)===ee){var F=$.revertLane;if(F===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ee===$a&&(J=!0);else if((ns&F)===F){$=$.next,F===$a&&(J=!0);continue}else ee={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},O===null?(T=O=ee,v=m):O=O.next=ee,Ne.lanes|=F,Bs|=F;ee=$.action,Yi&&o(m,ee),m=$.hasEagerState?$.eagerState:o(m,ee)}else F={lane:ee,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},O===null?(T=O=F,v=m):O=O.next=F,Ne.lanes|=ee,Bs|=ee;$=$.next}while($!==null&&$!==i);if(O===null?v=m:O.next=T,!Sn(m,n.memoizedState)&&(Ot=!0,J&&(o=Fa,o!==null)))throw o;n.memoizedState=m,n.baseState=v,n.baseQueue=O,u.lastRenderedState=m}return d===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Cf(n){var i=wt(),o=i.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=n;var u=o.dispatch,d=o.pending,m=i.memoizedState;if(d!==null){o.pending=null;var v=d=d.next;do m=n(m,v.action),v=v.next;while(v!==d);Sn(m,i.memoizedState)||(Ot=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),o.lastRenderedState=m}return[m,u]}function qy(n,i,o){var u=Ne,d=wt(),m=Le;if(m){if(o===void 0)throw Error(s(407));o=o()}else o=i();var v=!Sn((Ze||d).memoizedState,o);if(v&&(d.memoizedState=o,Ot=!0),d=d.queue,Of(Fy.bind(null,u,d,n),[n]),d.getSnapshot!==i||v||Nt!==null&&Nt.memoizedState.tag&1){if(u.flags|=2048,Ja(9,{destroy:void 0},$y.bind(null,u,d,o,i),null),rt===null)throw Error(s(349));m||(ns&127)!==0||Hy(u,i,o)}return o}function Hy(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=Ne.updateQueue,i===null?(i=Dc(),Ne.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function $y(n,i,o,u){i.value=o,i.getSnapshot=u,Gy(i)&&Ky(n)}function Fy(n,i,o){return o(function(){Gy(i)&&Ky(n)})}function Gy(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!Sn(n,o)}catch{return!0}}function Ky(n){var i=zi(n,2);i!==null&&bn(i,n,2)}function If(n){var i=dn();if(typeof n=="function"){var o=n;if(n=o(),Yi){Pn(!0);try{o()}finally{Pn(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:n},i}function Qy(n,i,o,u){return n.baseState=o,xf(n,Ze,typeof u=="function"?u:rs)}function CS(n,i,o,u,d){if(Uc(n))throw Error(s(485));if(n=i.action,n!==null){var m={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};X.T!==null?o(!0):m.isTransition=!1,u(m),o=i.pending,o===null?(m.next=i.pending=m,Yy(i,m)):(m.next=o.next,i.pending=o.next=m)}}function Yy(n,i){var o=i.action,u=i.payload,d=n.state;if(i.isTransition){var m=X.T,v={};X.T=v;try{var T=o(d,u),O=X.S;O!==null&&O(v,T),Xy(n,i,T)}catch($){Nf(n,i,$)}finally{m!==null&&v.types!==null&&(m.types=v.types),X.T=m}}else try{m=o(d,u),Xy(n,i,m)}catch($){Nf(n,i,$)}}function Xy(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Jy(n,i,u)},function(u){return Nf(n,i,u)}):Jy(n,i,o)}function Jy(n,i,o){i.status="fulfilled",i.value=o,Wy(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,Yy(n,o)))}function Nf(n,i,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,Wy(i),i=i.next;while(i!==u)}n.action=null}function Wy(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function Zy(n,i){return i}function e_(n,i){if(Le){var o=rt.formState;if(o!==null){e:{var u=Ne;if(Le){if(at){t:{for(var d=at,m=$n;d.nodeType!==8;){if(!m){d=null;break t}if(d=Gn(d.nextSibling),d===null){d=null;break t}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){at=Gn(d.nextSibling),u=d.data==="F!";break e}}ks(u)}u=!1}u&&(i=o[0])}}return o=dn(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zy,lastRenderedState:i},o.queue=u,o=v_.bind(null,Ne,u),u.dispatch=o,u=If(!1),m=Mf.bind(null,Ne,!1,u.queue),u=dn(),d={state:i,dispatch:null,action:n,pending:null},u.queue=d,o=CS.bind(null,Ne,d,m,o),d.dispatch=o,u.memoizedState=n,[i,o,!1]}function t_(n){var i=wt();return n_(i,Ze,n)}function n_(n,i,o){if(i=xf(n,i,Zy)[0],n=Pc(rs)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Pl(i)}catch(v){throw v===Ga?Ac:v}else u=i;i=wt();var d=i.queue,m=d.dispatch;return o!==i.memoizedState&&(Ne.flags|=2048,Ja(9,{destroy:void 0},IS.bind(null,d,o),null)),[u,m,n]}function IS(n,i){n.action=i}function r_(n){var i=wt(),o=Ze;if(o!==null)return n_(i,o,n);wt(),i=i.memoizedState,o=wt();var u=o.queue.dispatch;return o.memoizedState=n,[i,u,!1]}function Ja(n,i,o,u){return n={tag:n,create:o,deps:u,inst:i,next:null},i=Ne.updateQueue,i===null&&(i=Dc(),Ne.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,i.lastEffect=n),n}function s_(){return wt().memoizedState}function Mc(n,i,o,u){var d=dn();Ne.flags|=n,d.memoizedState=Ja(1|i,{destroy:void 0},o,u===void 0?null:u)}function Vc(n,i,o,u){var d=wt();u=u===void 0?null:u;var m=d.memoizedState.inst;Ze!==null&&u!==null&&wf(u,Ze.memoizedState.deps)?d.memoizedState=Ja(i,m,o,u):(Ne.flags|=n,d.memoizedState=Ja(1|i,m,o,u))}function i_(n,i){Mc(8390656,8,n,i)}function Of(n,i){Vc(2048,8,n,i)}function NS(n){Ne.flags|=4;var i=Ne.updateQueue;if(i===null)i=Dc(),Ne.updateQueue=i,i.events=[n];else{var o=i.events;o===null?i.events=[n]:o.push(n)}}function a_(n){var i=wt().memoizedState;return NS({ref:i,nextImpl:n}),function(){if((Qe&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function o_(n,i){return Vc(4,2,n,i)}function l_(n,i){return Vc(4,4,n,i)}function u_(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function c_(n,i,o){o=o!=null?o.concat([n]):null,Vc(4,4,u_.bind(null,i,n),o)}function kf(){}function h_(n,i){var o=wt();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&wf(i,u[1])?u[0]:(o.memoizedState=[n,i],n)}function d_(n,i){var o=wt();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&wf(i,u[1]))return u[0];if(u=n(),Yi){Pn(!0);try{n()}finally{Pn(!1)}}return o.memoizedState=[u,i],u}function Df(n,i,o){return o===void 0||(ns&1073741824)!==0&&(Me&261930)===0?n.memoizedState=i:(n.memoizedState=o,n=f0(),Ne.lanes|=n,Bs|=n,o)}function f_(n,i,o,u){return Sn(o,i)?o:Qa.current!==null?(n=Df(n,o,u),Sn(n,i)||(Ot=!0),n):(ns&42)===0||(ns&1073741824)!==0&&(Me&261930)===0?(Ot=!0,n.memoizedState=o):(n=f0(),Ne.lanes|=n,Bs|=n,i)}function m_(n,i,o,u,d){var m=ae.p;ae.p=m!==0&&8>m?m:8;var v=X.T,T={};X.T=T,Mf(n,!1,i,o);try{var O=d(),$=X.S;if($!==null&&$(T,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var J=AS(O,u);Ml(n,i,J,Nn(n))}else Ml(n,i,u,Nn(n))}catch(ee){Ml(n,i,{then:function(){},status:"rejected",reason:ee},Nn())}finally{ae.p=m,v!==null&&T.types!==null&&(v.types=T.types),X.T=v}}function OS(){}function jf(n,i,o,u){if(n.tag!==5)throw Error(s(476));var d=g_(n).queue;m_(n,d,i,ie,o===null?OS:function(){return p_(n),o(u)})}function g_(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:ie},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function p_(n){var i=g_(n);i.next===null&&(i=n.alternate.memoizedState),Ml(n,i.next.queue,{},Nn())}function Pf(){return Yt(Zl)}function y_(){return wt().memoizedState}function __(){return wt().memoizedState}function kS(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=Nn();n=Ps(o);var u=Ms(i,n,o);u!==null&&(bn(u,i,o),Ol(u,i,o)),i={cache:cf()},n.payload=i;return}i=i.return}}function DS(n,i,o){var u=Nn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Uc(n)?b_(i,o):(o=Wd(n,i,o,u),o!==null&&(bn(o,n,u),w_(o,i,u)))}function v_(n,i,o){var u=Nn();Ml(n,i,o,u)}function Ml(n,i,o,u){var d={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Uc(n))b_(i,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var v=i.lastRenderedState,T=m(v,o);if(d.hasEagerState=!0,d.eagerState=T,Sn(T,v))return _c(n,i,d,0),rt===null&&yc(),!1}catch{}finally{}if(o=Wd(n,i,d,u),o!==null)return bn(o,n,u),w_(o,i,u),!0}return!1}function Mf(n,i,o,u){if(u={lane:2,revertLane:mm(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Uc(n)){if(i)throw Error(s(479))}else i=Wd(n,o,u,2),i!==null&&bn(i,n,2)}function Uc(n){var i=n.alternate;return n===Ne||i!==null&&i===Ne}function b_(n,i){Ya=Oc=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function w_(n,i,o){if((o&4194048)!==0){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,sl(n,o)}}var Vl={readContext:Yt,use:jc,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};Vl.useEffectEvent=gt;var E_={readContext:Yt,use:jc,useCallback:function(n,i){return dn().memoizedState=[n,i===void 0?null:i],n},useContext:Yt,useEffect:i_,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,Mc(4194308,4,u_.bind(null,i,n),o)},useLayoutEffect:function(n,i){return Mc(4194308,4,n,i)},useInsertionEffect:function(n,i){Mc(4,2,n,i)},useMemo:function(n,i){var o=dn();i=i===void 0?null:i;var u=n();if(Yi){Pn(!0);try{n()}finally{Pn(!1)}}return o.memoizedState=[u,i],u},useReducer:function(n,i,o){var u=dn();if(o!==void 0){var d=o(i);if(Yi){Pn(!0);try{o(i)}finally{Pn(!1)}}}else d=i;return u.memoizedState=u.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},u.queue=n,n=n.dispatch=DS.bind(null,Ne,n),[u.memoizedState,n]},useRef:function(n){var i=dn();return n={current:n},i.memoizedState=n},useState:function(n){n=If(n);var i=n.queue,o=v_.bind(null,Ne,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:kf,useDeferredValue:function(n,i){var o=dn();return Df(o,n,i)},useTransition:function(){var n=If(!1);return n=m_.bind(null,Ne,n.queue,!0,!1),dn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var u=Ne,d=dn();if(Le){if(o===void 0)throw Error(s(407));o=o()}else{if(o=i(),rt===null)throw Error(s(349));(Me&127)!==0||Hy(u,i,o)}d.memoizedState=o;var m={value:o,getSnapshot:i};return d.queue=m,i_(Fy.bind(null,u,m,n),[n]),u.flags|=2048,Ja(9,{destroy:void 0},$y.bind(null,u,m,o,i),null),o},useId:function(){var n=dn(),i=rt.identifierPrefix;if(Le){var o=jr,u=Dr;o=(u&~(1<<32-_t(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=kc++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=RS++,i="_"+i+"r_"+o.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:Pf,useFormState:e_,useActionState:e_,useOptimistic:function(n){var i=dn();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Mf.bind(null,Ne,!0,o),o.dispatch=i,[n,i]},useMemoCache:Rf,useCacheRefresh:function(){return dn().memoizedState=kS.bind(null,Ne)},useEffectEvent:function(n){var i=dn(),o={impl:n};return i.memoizedState=o,function(){if((Qe&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},Vf={readContext:Yt,use:jc,useCallback:h_,useContext:Yt,useEffect:Of,useImperativeHandle:c_,useInsertionEffect:o_,useLayoutEffect:l_,useMemo:d_,useReducer:Pc,useRef:s_,useState:function(){return Pc(rs)},useDebugValue:kf,useDeferredValue:function(n,i){var o=wt();return f_(o,Ze.memoizedState,n,i)},useTransition:function(){var n=Pc(rs)[0],i=wt().memoizedState;return[typeof n=="boolean"?n:Pl(n),i]},useSyncExternalStore:qy,useId:y_,useHostTransitionStatus:Pf,useFormState:t_,useActionState:t_,useOptimistic:function(n,i){var o=wt();return Qy(o,Ze,n,i)},useMemoCache:Rf,useCacheRefresh:__};Vf.useEffectEvent=a_;var T_={readContext:Yt,use:jc,useCallback:h_,useContext:Yt,useEffect:Of,useImperativeHandle:c_,useInsertionEffect:o_,useLayoutEffect:l_,useMemo:d_,useReducer:Cf,useRef:s_,useState:function(){return Cf(rs)},useDebugValue:kf,useDeferredValue:function(n,i){var o=wt();return Ze===null?Df(o,n,i):f_(o,Ze.memoizedState,n,i)},useTransition:function(){var n=Cf(rs)[0],i=wt().memoizedState;return[typeof n=="boolean"?n:Pl(n),i]},useSyncExternalStore:qy,useId:y_,useHostTransitionStatus:Pf,useFormState:r_,useActionState:r_,useOptimistic:function(n,i){var o=wt();return Ze!==null?Qy(o,Ze,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Rf,useCacheRefresh:__};T_.useEffectEvent=a_;function Uf(n,i,o,u){i=n.memoizedState,o=o(u,i),o=o==null?i:E({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Lf={enqueueSetState:function(n,i,o){n=n._reactInternals;var u=Nn(),d=Ps(u);d.payload=i,o!=null&&(d.callback=o),i=Ms(n,d,u),i!==null&&(bn(i,n,u),Ol(i,n,u))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var u=Nn(),d=Ps(u);d.tag=1,d.payload=i,o!=null&&(d.callback=o),i=Ms(n,d,u),i!==null&&(bn(i,n,u),Ol(i,n,u))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=Nn(),u=Ps(o);u.tag=2,i!=null&&(u.callback=i),i=Ms(n,u,o),i!==null&&(bn(i,n,o),Ol(i,n,o))}};function S_(n,i,o,u,d,m,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,v):i.prototype&&i.prototype.isPureReactComponent?!Tl(o,u)||!Tl(d,m):!0}function A_(n,i,o,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==n&&Lf.enqueueReplaceState(i,i.state,null)}function Xi(n,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(n=n.defaultProps){o===i&&(o=E({},o));for(var d in n)o[d]===void 0&&(o[d]=n[d])}return o}function R_(n){pc(n)}function x_(n){console.error(n)}function C_(n){pc(n)}function Lc(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function I_(n,i,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function zf(n,i,o){return o=Ps(o),o.tag=3,o.payload={element:null},o.callback=function(){Lc(n,i)},o}function N_(n){return n=Ps(n),n.tag=3,n}function O_(n,i,o,u){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var m=u.value;n.payload=function(){return d(m)},n.callback=function(){I_(i,o,u)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){I_(i,o,u),typeof d!="function"&&(qs===null?qs=new Set([this]):qs.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function jS(n,i,o,u,d){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&Ha(i,o,d,!0),o=Rn.current,o!==null){switch(o.tag){case 31:case 13:return Fn===null?Jc():o.alternate===null&&pt===0&&(pt=3),o.flags&=-257,o.flags|=65536,o.lanes=d,u===Rc?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),hm(n,u,d)),!1;case 22:return o.flags|=65536,u===Rc?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),hm(n,u,d)),!1}throw Error(s(435,o.tag))}return hm(n,u,d),Jc(),!1}if(Le)return i=Rn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=d,u!==sf&&(n=Error(s(422),{cause:u}),Rl(Bn(n,o)))):(u!==sf&&(i=Error(s(423),{cause:u}),Rl(Bn(i,o))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,u=Bn(u,o),d=zf(n.stateNode,u,d),pf(n,d),pt!==4&&(pt=2)),!1;var m=Error(s(520),{cause:u});if(m=Bn(m,o),Fl===null?Fl=[m]:Fl.push(m),pt!==4&&(pt=2),i===null)return!0;u=Bn(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=d&-d,o.lanes|=n,n=zf(o.stateNode,u,n),pf(o,n),!1;case 1:if(i=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(qs===null||!qs.has(m))))return o.flags|=65536,d&=-d,o.lanes|=d,d=N_(d),O_(d,n,o,u),pf(o,d),!1}o=o.return}while(o!==null);return!1}var Bf=Error(s(461)),Ot=!1;function Xt(n,i,o,u){i.child=n===null?Py(i,null,o,u):Qi(i,n.child,o,u)}function k_(n,i,o,u,d){o=o.render;var m=i.ref;if("ref"in u){var v={};for(var T in u)T!=="ref"&&(v[T]=u[T])}else v=u;return $i(i),u=Ef(n,i,o,v,m,d),T=Tf(),n!==null&&!Ot?(Sf(n,i,d),ss(n,i,d)):(Le&&T&&nf(i),i.flags|=1,Xt(n,i,u,d),i.child)}function D_(n,i,o,u,d){if(n===null){var m=o.type;return typeof m=="function"&&!Zd(m)&&m.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=m,j_(n,i,m,u,d)):(n=bc(o.type,null,u,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(m=n.child,!Yf(n,d)){var v=m.memoizedProps;if(o=o.compare,o=o!==null?o:Tl,o(v,u)&&n.ref===i.ref)return ss(n,i,d)}return i.flags|=1,n=Wr(m,u),n.ref=i.ref,n.return=i,i.child=n}function j_(n,i,o,u,d){if(n!==null){var m=n.memoizedProps;if(Tl(m,u)&&n.ref===i.ref)if(Ot=!1,i.pendingProps=u=m,Yf(n,d))(n.flags&131072)!==0&&(Ot=!0);else return i.lanes=n.lanes,ss(n,i,d)}return qf(n,i,o,u,d)}function P_(n,i,o,u){var d=u.children,m=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,n!==null){for(u=i.child=n.child,d=0;u!==null;)d=d|u.lanes|u.childLanes,u=u.sibling;u=d&~m}else u=0,i.child=null;return M_(n,i,m,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Sc(i,m!==null?m.cachePool:null),m!==null?Uy(i,m):_f(),Ly(i);else return u=i.lanes=536870912,M_(n,i,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(Sc(i,m.cachePool),Uy(i,m),Us(),i.memoizedState=null):(n!==null&&Sc(i,null),_f(),Us());return Xt(n,i,d,o),i.child}function Ul(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function M_(n,i,o,u,d){var m=df();return m=m===null?null:{parent:It._currentValue,pool:m},i.memoizedState={baseLanes:o,cachePool:m},n!==null&&Sc(i,null),_f(),Ly(i),n!==null&&Ha(n,i,u,!0),i.childLanes=d,null}function zc(n,i){return i=qc({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function V_(n,i,o){return Qi(i,n.child,null,o),n=zc(i,i.pendingProps),n.flags|=2,xn(i),i.memoizedState=null,n}function PS(n,i,o){var u=i.pendingProps,d=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(Le){if(u.mode==="hidden")return n=zc(i,u),i.lanes=536870912,Ul(null,n);if(bf(i),(n=at)?(n=Y0(n,$n),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Ns!==null?{id:Dr,overflow:jr}:null,retryLane:536870912,hydrationErrors:null},o=by(n),o.return=i,i.child=o,Qt=i,at=null)):n=null,n===null)throw ks(i);return i.lanes=536870912,null}return zc(i,u)}var m=n.memoizedState;if(m!==null){var v=m.dehydrated;if(bf(i),d)if(i.flags&256)i.flags&=-257,i=V_(n,i,o);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(s(558));else if(Ot||Ha(n,i,o,!1),d=(o&n.childLanes)!==0,Ot||d){if(u=rt,u!==null&&(v=il(u,o),v!==0&&v!==m.retryLane))throw m.retryLane=v,zi(n,v),bn(u,n,v),Bf;Jc(),i=V_(n,i,o)}else n=m.treeContext,at=Gn(v.nextSibling),Qt=i,Le=!0,Os=null,$n=!1,n!==null&&Ty(i,n),i=zc(i,u),i.flags|=4096;return i}return n=Wr(n.child,{mode:u.mode,children:u.children}),n.ref=i.ref,i.child=n,n.return=i,n}function Bc(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function qf(n,i,o,u,d){return $i(i),o=Ef(n,i,o,u,void 0,d),u=Tf(),n!==null&&!Ot?(Sf(n,i,d),ss(n,i,d)):(Le&&u&&nf(i),i.flags|=1,Xt(n,i,o,d),i.child)}function U_(n,i,o,u,d,m){return $i(i),i.updateQueue=null,o=By(i,u,o,d),zy(n),u=Tf(),n!==null&&!Ot?(Sf(n,i,m),ss(n,i,m)):(Le&&u&&nf(i),i.flags|=1,Xt(n,i,o,m),i.child)}function L_(n,i,o,u,d){if($i(i),i.stateNode===null){var m=La,v=o.contextType;typeof v=="object"&&v!==null&&(m=Yt(v)),m=new o(u,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Lf,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=u,m.state=i.memoizedState,m.refs={},mf(i),v=o.contextType,m.context=typeof v=="object"&&v!==null?Yt(v):La,m.state=i.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(Uf(i,o,v,u),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&Lf.enqueueReplaceState(m,m.state,null),Dl(i,u,m,d),kl(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(n===null){m=i.stateNode;var T=i.memoizedProps,O=Xi(o,T);m.props=O;var $=m.context,J=o.contextType;v=La,typeof J=="object"&&J!==null&&(v=Yt(J));var ee=o.getDerivedStateFromProps;J=typeof ee=="function"||typeof m.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,J||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T||$!==v)&&A_(i,m,u,v),js=!1;var F=i.memoizedState;m.state=F,Dl(i,u,m,d),kl(),$=i.memoizedState,T||F!==$||js?(typeof ee=="function"&&(Uf(i,o,ee,u),$=i.memoizedState),(O=js||S_(i,o,O,u,F,$,v))?(J||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=$),m.props=u,m.state=$,m.context=v,u=O):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{m=i.stateNode,gf(n,i),v=i.memoizedProps,J=Xi(o,v),m.props=J,ee=i.pendingProps,F=m.context,$=o.contextType,O=La,typeof $=="object"&&$!==null&&(O=Yt($)),T=o.getDerivedStateFromProps,($=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==ee||F!==O)&&A_(i,m,u,O),js=!1,F=i.memoizedState,m.state=F,Dl(i,u,m,d),kl();var Q=i.memoizedState;v!==ee||F!==Q||js||n!==null&&n.dependencies!==null&&Ec(n.dependencies)?(typeof T=="function"&&(Uf(i,o,T,u),Q=i.memoizedState),(J=js||S_(i,o,J,u,F,Q,O)||n!==null&&n.dependencies!==null&&Ec(n.dependencies))?($||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,Q,O),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,Q,O)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&F===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&F===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=Q),m.props=u,m.state=Q,m.context=O,u=J):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&F===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&F===n.memoizedState||(i.flags|=1024),u=!1)}return m=u,Bc(n,i),u=(i.flags&128)!==0,m||u?(m=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,n!==null&&u?(i.child=Qi(i,n.child,null,d),i.child=Qi(i,null,o,d)):Xt(n,i,o,d),i.memoizedState=m.state,n=i.child):n=ss(n,i,d),n}function z_(n,i,o,u){return qi(),i.flags|=256,Xt(n,i,o,u),i.child}var Hf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $f(n){return{baseLanes:n,cachePool:Iy()}}function Ff(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=In),n}function B_(n,i,o){var u=i.pendingProps,d=!1,m=(i.flags&128)!==0,v;if((v=m)||(v=n!==null&&n.memoizedState===null?!1:(bt.current&2)!==0),v&&(d=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,n===null){if(Le){if(d?Vs(i):Us(),(n=at)?(n=Y0(n,$n),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Ns!==null?{id:Dr,overflow:jr}:null,retryLane:536870912,hydrationErrors:null},o=by(n),o.return=i,i.child=o,Qt=i,at=null)):n=null,n===null)throw ks(i);return xm(n)?i.lanes=32:i.lanes=536870912,null}var T=u.children;return u=u.fallback,d?(Us(),d=i.mode,T=qc({mode:"hidden",children:T},d),u=Bi(u,d,o,null),T.return=i,u.return=i,T.sibling=u,i.child=T,u=i.child,u.memoizedState=$f(o),u.childLanes=Ff(n,v,o),i.memoizedState=Hf,Ul(null,u)):(Vs(i),Gf(i,T))}var O=n.memoizedState;if(O!==null&&(T=O.dehydrated,T!==null)){if(m)i.flags&256?(Vs(i),i.flags&=-257,i=Kf(n,i,o)):i.memoizedState!==null?(Us(),i.child=n.child,i.flags|=128,i=null):(Us(),T=u.fallback,d=i.mode,u=qc({mode:"visible",children:u.children},d),T=Bi(T,d,o,null),T.flags|=2,u.return=i,T.return=i,u.sibling=T,i.child=u,Qi(i,n.child,null,o),u=i.child,u.memoizedState=$f(o),u.childLanes=Ff(n,v,o),i.memoizedState=Hf,i=Ul(null,u));else if(Vs(i),xm(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var $=v.dgst;v=$,u=Error(s(419)),u.stack="",u.digest=v,Rl({value:u,source:null,stack:null}),i=Kf(n,i,o)}else if(Ot||Ha(n,i,o,!1),v=(o&n.childLanes)!==0,Ot||v){if(v=rt,v!==null&&(u=il(v,o),u!==0&&u!==O.retryLane))throw O.retryLane=u,zi(n,u),bn(v,n,u),Bf;Rm(T)||Jc(),i=Kf(n,i,o)}else Rm(T)?(i.flags|=192,i.child=n.child,i=null):(n=O.treeContext,at=Gn(T.nextSibling),Qt=i,Le=!0,Os=null,$n=!1,n!==null&&Ty(i,n),i=Gf(i,u.children),i.flags|=4096);return i}return d?(Us(),T=u.fallback,d=i.mode,O=n.child,$=O.sibling,u=Wr(O,{mode:"hidden",children:u.children}),u.subtreeFlags=O.subtreeFlags&65011712,$!==null?T=Wr($,T):(T=Bi(T,d,o,null),T.flags|=2),T.return=i,u.return=i,u.sibling=T,i.child=u,Ul(null,u),u=i.child,T=n.child.memoizedState,T===null?T=$f(o):(d=T.cachePool,d!==null?(O=It._currentValue,d=d.parent!==O?{parent:O,pool:O}:d):d=Iy(),T={baseLanes:T.baseLanes|o,cachePool:d}),u.memoizedState=T,u.childLanes=Ff(n,v,o),i.memoizedState=Hf,Ul(n.child,u)):(Vs(i),o=n.child,n=o.sibling,o=Wr(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,n!==null&&(v=i.deletions,v===null?(i.deletions=[n],i.flags|=16):v.push(n)),i.child=o,i.memoizedState=null,o)}function Gf(n,i){return i=qc({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function qc(n,i){return n=An(22,n,null,i),n.lanes=0,n}function Kf(n,i,o){return Qi(i,n.child,null,o),n=Gf(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function q_(n,i,o){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),lf(n.return,i,o)}function Qf(n,i,o,u,d,m){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:d,treeForkCount:m}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=o,v.tailMode=d,v.treeForkCount=m)}function H_(n,i,o){var u=i.pendingProps,d=u.revealOrder,m=u.tail;u=u.children;var v=bt.current,T=(v&2)!==0;if(T?(v=v&1|2,i.flags|=128):v&=1,oe(bt,v),Xt(n,i,u,o),u=Le?Al:0,!T&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&q_(n,o,i);else if(n.tag===19)q_(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(d){case"forwards":for(o=i.child,d=null;o!==null;)n=o.alternate,n!==null&&Nc(n)===null&&(d=o),o=o.sibling;o=d,o===null?(d=i.child,i.child=null):(d=o.sibling,o.sibling=null),Qf(i,!1,d,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&Nc(n)===null){i.child=d;break}n=d.sibling,d.sibling=o,o=d,d=n}Qf(i,!0,o,null,m,u);break;case"together":Qf(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function ss(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),Bs|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(Ha(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,o=Wr(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=Wr(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function Yf(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Ec(n)))}function MS(n,i,o){switch(i.tag){case 3:Vt(i,i.stateNode.containerInfo),Ds(i,It,n.memoizedState.cache),qi();break;case 27:case 5:Ei(i);break;case 4:Vt(i,i.stateNode.containerInfo);break;case 10:Ds(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,bf(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Vs(i),i.flags|=128,null):(o&i.child.childLanes)!==0?B_(n,i,o):(Vs(i),n=ss(n,i,o),n!==null?n.sibling:null);Vs(i);break;case 19:var d=(n.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(Ha(n,i,o,!1),u=(o&i.childLanes)!==0),d){if(u)return H_(n,i,o);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),oe(bt,bt.current),u)break;return null;case 22:return i.lanes=0,P_(n,i,o,i.pendingProps);case 24:Ds(i,It,n.memoizedState.cache)}return ss(n,i,o)}function $_(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)Ot=!0;else{if(!Yf(n,o)&&(i.flags&128)===0)return Ot=!1,MS(n,i,o);Ot=(n.flags&131072)!==0}else Ot=!1,Le&&(i.flags&1048576)!==0&&Ey(i,Al,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(n=Gi(i.elementType),i.type=n,typeof n=="function")Zd(n)?(u=Xi(n,u),i.tag=1,i=L_(null,i,n,u,o)):(i.tag=0,i=qf(null,i,n,u,o));else{if(n!=null){var d=n.$$typeof;if(d===ne){i.tag=11,i=k_(null,i,n,u,o);break e}else if(d===C){i.tag=14,i=D_(null,i,n,u,o);break e}}throw i=nt(n)||n,Error(s(306,i,""))}}return i;case 0:return qf(n,i,i.type,i.pendingProps,o);case 1:return u=i.type,d=Xi(u,i.pendingProps),L_(n,i,u,d,o);case 3:e:{if(Vt(i,i.stateNode.containerInfo),n===null)throw Error(s(387));u=i.pendingProps;var m=i.memoizedState;d=m.element,gf(n,i),Dl(i,u,null,o);var v=i.memoizedState;if(u=v.cache,Ds(i,It,u),u!==m.cache&&uf(i,[It],o,!0),kl(),u=v.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=z_(n,i,u,o);break e}else if(u!==d){d=Bn(Error(s(424)),i),Rl(d),i=z_(n,i,u,o);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(at=Gn(n.firstChild),Qt=i,Le=!0,Os=null,$n=!0,o=Py(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(qi(),u===d){i=ss(n,i,o);break e}Xt(n,i,u,o)}i=i.child}return i;case 26:return Bc(n,i),n===null?(o=tv(i.type,null,i.pendingProps,null))?i.memoizedState=o:Le||(o=i.type,n=i.pendingProps,u=sh(Oe.current).createElement(o),u[Rt]=i,u[qt]=n,Jt(u,o,n),xt(u),i.stateNode=u):i.memoizedState=tv(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Ei(i),n===null&&Le&&(u=i.stateNode=W0(i.type,i.pendingProps,Oe.current),Qt=i,$n=!0,d=at,Gs(i.type)?(Cm=d,at=Gn(u.firstChild)):at=d),Xt(n,i,i.pendingProps.children,o),Bc(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Le&&((d=u=at)&&(u=dA(u,i.type,i.pendingProps,$n),u!==null?(i.stateNode=u,Qt=i,at=Gn(u.firstChild),$n=!1,d=!0):d=!1),d||ks(i)),Ei(i),d=i.type,m=i.pendingProps,v=n!==null?n.memoizedProps:null,u=m.children,Tm(d,m)?u=null:v!==null&&Tm(d,v)&&(i.flags|=32),i.memoizedState!==null&&(d=Ef(n,i,xS,null,null,o),Zl._currentValue=d),Bc(n,i),Xt(n,i,u,o),i.child;case 6:return n===null&&Le&&((n=o=at)&&(o=fA(o,i.pendingProps,$n),o!==null?(i.stateNode=o,Qt=i,at=null,n=!0):n=!1),n||ks(i)),null;case 13:return B_(n,i,o);case 4:return Vt(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=Qi(i,null,u,o):Xt(n,i,u,o),i.child;case 11:return k_(n,i,i.type,i.pendingProps,o);case 7:return Xt(n,i,i.pendingProps,o),i.child;case 8:return Xt(n,i,i.pendingProps.children,o),i.child;case 12:return Xt(n,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Ds(i,i.type,u.value),Xt(n,i,u.children,o),i.child;case 9:return d=i.type._context,u=i.pendingProps.children,$i(i),d=Yt(d),u=u(d),i.flags|=1,Xt(n,i,u,o),i.child;case 14:return D_(n,i,i.type,i.pendingProps,o);case 15:return j_(n,i,i.type,i.pendingProps,o);case 19:return H_(n,i,o);case 31:return PS(n,i,o);case 22:return P_(n,i,o,i.pendingProps);case 24:return $i(i),u=Yt(It),n===null?(d=df(),d===null&&(d=rt,m=cf(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=o),d=m),i.memoizedState={parent:u,cache:d},mf(i),Ds(i,It,d)):((n.lanes&o)!==0&&(gf(n,i),Dl(i,null,null,o),kl()),d=n.memoizedState,m=i.memoizedState,d.parent!==u?(d={parent:u,cache:u},i.memoizedState=d,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=d),Ds(i,It,u)):(u=m.cache,Ds(i,It,u),u!==d.cache&&uf(i,[It],o,!0))),Xt(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function is(n){n.flags|=4}function Xf(n,i,o,u,d){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(d&335544128)===d)if(n.stateNode.complete)n.flags|=8192;else if(y0())n.flags|=8192;else throw Ki=Rc,ff}else n.flags&=-16777217}function F_(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!av(i))if(y0())n.flags|=8192;else throw Ki=Rc,ff}function Hc(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Yu():536870912,n.lanes|=i,to|=i)}function Ll(n,i){if(!Le)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function ot(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(i)for(var d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=u,n.childLanes=o,i}function VS(n,i,o){var u=i.pendingProps;switch(rf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(i),null;case 1:return ot(i),null;case 3:return o=i.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),ts(It),lt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(qa(i)?is(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,af())),ot(i),null;case 26:var d=i.type,m=i.memoizedState;return n===null?(is(i),m!==null?(ot(i),F_(i,m)):(ot(i),Xf(i,d,null,u,o))):m?m!==n.memoizedState?(is(i),ot(i),F_(i,m)):(ot(i),i.flags&=-16777217):(n=n.memoizedProps,n!==u&&is(i),ot(i),Xf(i,d,n,u,o)),null;case 27:if(ba(i),o=Oe.current,d=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&is(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return ot(i),null}n=ue.current,qa(i)?Sy(i):(n=W0(d,u,o),i.stateNode=n,is(i))}return ot(i),null;case 5:if(ba(i),d=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&is(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return ot(i),null}if(m=ue.current,qa(i))Sy(i);else{var v=sh(Oe.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?v.createElement("select",{is:u.is}):v.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?v.createElement(d,{is:u.is}):v.createElement(d)}}m[Rt]=i,m[qt]=u;e:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break e;for(;v.sibling===null;){if(v.return===null||v.return===i)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=m;e:switch(Jt(m,d,u),d){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&is(i)}}return ot(i),Xf(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,o),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==u&&is(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(n=Oe.current,qa(i)){if(n=i.stateNode,o=i.memoizedProps,u=null,d=Qt,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}n[Rt]=i,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||B0(n.nodeValue,o)),n||ks(i,!0)}else n=sh(n).createTextNode(u),n[Rt]=i,i.stateNode=n}return ot(i),null;case 31:if(o=i.memoizedState,n===null||n.memoizedState!==null){if(u=qa(i),o!==null){if(n===null){if(!u)throw Error(s(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[Rt]=i}else qi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ot(i),n=!1}else o=af(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return i.flags&256?(xn(i),i):(xn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return ot(i),null;case 13:if(u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=qa(i),u!==null&&u.dehydrated!==null){if(n===null){if(!d)throw Error(s(318));if(d=i.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[Rt]=i}else qi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ot(i),d=!1}else d=af(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return i.flags&256?(xn(i),i):(xn(i),null)}return xn(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=i.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==d&&(u.flags|=2048)),o!==n&&o&&(i.child.flags|=8192),Hc(i,i.updateQueue),ot(i),null);case 4:return lt(),n===null&&_m(i.stateNode.containerInfo),ot(i),null;case 10:return ts(i.type),ot(i),null;case 19:if(W(bt),u=i.memoizedState,u===null)return ot(i),null;if(d=(i.flags&128)!==0,m=u.rendering,m===null)if(d)Ll(u,!1);else{if(pt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(m=Nc(n),m!==null){for(i.flags|=128,Ll(u,!1),n=m.updateQueue,i.updateQueue=n,Hc(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)vy(o,n),o=o.sibling;return oe(bt,bt.current&1|2),Le&&Zr(i,u.treeForkCount),i.child}n=n.sibling}u.tail!==null&&cn()>Qc&&(i.flags|=128,d=!0,Ll(u,!1),i.lanes=4194304)}else{if(!d)if(n=Nc(m),n!==null){if(i.flags|=128,d=!0,n=n.updateQueue,i.updateQueue=n,Hc(i,n),Ll(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!Le)return ot(i),null}else 2*cn()-u.renderingStartTime>Qc&&o!==536870912&&(i.flags|=128,d=!0,Ll(u,!1),i.lanes=4194304);u.isBackwards?(m.sibling=i.child,i.child=m):(n=u.last,n!==null?n.sibling=m:i.child=m,u.last=m)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=cn(),n.sibling=null,o=bt.current,oe(bt,d?o&1|2:o&1),Le&&Zr(i,u.treeForkCount),n):(ot(i),null);case 22:case 23:return xn(i),vf(),u=i.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(ot(i),i.subtreeFlags&6&&(i.flags|=8192)):ot(i),o=i.updateQueue,o!==null&&Hc(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),n!==null&&W(Fi),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),ts(It),ot(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function US(n,i){switch(rf(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return ts(It),lt(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return ba(i),null;case 31:if(i.memoizedState!==null){if(xn(i),i.alternate===null)throw Error(s(340));qi()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(xn(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));qi()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return W(bt),null;case 4:return lt(),null;case 10:return ts(i.type),null;case 22:case 23:return xn(i),vf(),n!==null&&W(Fi),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return ts(It),null;case 25:return null;default:return null}}function G_(n,i){switch(rf(i),i.tag){case 3:ts(It),lt();break;case 26:case 27:case 5:ba(i);break;case 4:lt();break;case 31:i.memoizedState!==null&&xn(i);break;case 13:xn(i);break;case 19:W(bt);break;case 10:ts(i.type);break;case 22:case 23:xn(i),vf(),n!==null&&W(Fi);break;case 24:ts(It)}}function zl(n,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var d=u.next;o=d;do{if((o.tag&n)===n){u=void 0;var m=o.create,v=o.inst;u=m(),v.destroy=u}o=o.next}while(o!==d)}}catch(T){Je(i,i.return,T)}}function Ls(n,i,o){try{var u=i.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var m=d.next;u=m;do{if((u.tag&n)===n){var v=u.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,d=i;var O=o,$=T;try{$()}catch(J){Je(d,O,J)}}}u=u.next}while(u!==m)}}catch(J){Je(i,i.return,J)}}function K_(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{Vy(i,o)}catch(u){Je(n,n.return,u)}}}function Q_(n,i,o){o.props=Xi(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){Je(n,i,u)}}function Bl(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(d){Je(n,i,d)}}function Pr(n,i){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(d){Je(n,i,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){Je(n,i,d)}else o.current=null}function Y_(n){var i=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(d){Je(n,n.return,d)}}function Jf(n,i,o){try{var u=n.stateNode;aA(u,n.type,o,i),u[qt]=i}catch(d){Je(n,n.return,d)}}function X_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Gs(n.type)||n.tag===4}function Wf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||X_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Gs(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Zf(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=er));else if(u!==4&&(u===27&&Gs(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(Zf(n,i,o),n=n.sibling;n!==null;)Zf(n,i,o),n=n.sibling}function $c(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(u!==4&&(u===27&&Gs(n.type)&&(o=n.stateNode),n=n.child,n!==null))for($c(n,i,o),n=n.sibling;n!==null;)$c(n,i,o),n=n.sibling}function J_(n){var i=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,d=i.attributes;d.length;)i.removeAttributeNode(d[0]);Jt(i,u,o),i[Rt]=n,i[qt]=o}catch(m){Je(n,n.return,m)}}var as=!1,kt=!1,em=!1,W_=typeof WeakSet=="function"?WeakSet:Set,$t=null;function LS(n,i){if(n=n.containerInfo,wm=hh,n=cy(n),Gd(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var d=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var v=0,T=-1,O=-1,$=0,J=0,ee=n,F=null;t:for(;;){for(var Q;ee!==o||d!==0&&ee.nodeType!==3||(T=v+d),ee!==m||u!==0&&ee.nodeType!==3||(O=v+u),ee.nodeType===3&&(v+=ee.nodeValue.length),(Q=ee.firstChild)!==null;)F=ee,ee=Q;for(;;){if(ee===n)break t;if(F===o&&++$===d&&(T=v),F===m&&++J===u&&(O=v),(Q=ee.nextSibling)!==null)break;ee=F,F=ee.parentNode}ee=Q}o=T===-1||O===-1?null:{start:T,end:O}}else o=null}o=o||{start:0,end:0}}else o=null;for(Em={focusedElem:n,selectionRange:o},hh=!1,$t=i;$t!==null;)if(i=$t,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,$t=n;else for(;$t!==null;){switch(i=$t,m=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)d=n[o],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=i,d=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var de=Xi(o.type,d);n=u.getSnapshotBeforeUpdate(de,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(ve){Je(o,o.return,ve)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)Am(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Am(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,$t=n;break}$t=i.return}}function Z_(n,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ls(n,o),u&4&&zl(5,o);break;case 1:if(ls(n,o),u&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(v){Je(o,o.return,v)}else{var d=Xi(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(d,i,n.__reactInternalSnapshotBeforeUpdate)}catch(v){Je(o,o.return,v)}}u&64&&K_(o),u&512&&Bl(o,o.return);break;case 3:if(ls(n,o),u&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{Vy(n,i)}catch(v){Je(o,o.return,v)}}break;case 27:i===null&&u&4&&J_(o);case 26:case 5:ls(n,o),i===null&&u&4&&Y_(o),u&512&&Bl(o,o.return);break;case 12:ls(n,o);break;case 31:ls(n,o),u&4&&n0(n,o);break;case 13:ls(n,o),u&4&&r0(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=QS.bind(null,o),mA(n,o))));break;case 22:if(u=o.memoizedState!==null||as,!u){i=i!==null&&i.memoizedState!==null||kt,d=as;var m=kt;as=u,(kt=i)&&!m?us(n,o,(o.subtreeFlags&8772)!==0):ls(n,o),as=d,kt=m}break;case 30:break;default:ls(n,o)}}function e0(n){var i=n.alternate;i!==null&&(n.alternate=null,e0(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Aa(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ct=null,pn=!1;function os(n,i,o){for(o=o.child;o!==null;)t0(n,i,o),o=o.sibling}function t0(n,i,o){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(Xn,o)}catch{}switch(o.tag){case 26:kt||Pr(o,i),os(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:kt||Pr(o,i);var u=ct,d=pn;Gs(o.type)&&(ct=o.stateNode,pn=!1),os(n,i,o),Xl(o.stateNode),ct=u,pn=d;break;case 5:kt||Pr(o,i);case 6:if(u=ct,d=pn,ct=null,os(n,i,o),ct=u,pn=d,ct!==null)if(pn)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(o.stateNode)}catch(m){Je(o,i,m)}else try{ct.removeChild(o.stateNode)}catch(m){Je(o,i,m)}break;case 18:ct!==null&&(pn?(n=ct,K0(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),uo(n)):K0(ct,o.stateNode));break;case 4:u=ct,d=pn,ct=o.stateNode.containerInfo,pn=!0,os(n,i,o),ct=u,pn=d;break;case 0:case 11:case 14:case 15:Ls(2,o,i),kt||Ls(4,o,i),os(n,i,o);break;case 1:kt||(Pr(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Q_(o,i,u)),os(n,i,o);break;case 21:os(n,i,o);break;case 22:kt=(u=kt)||o.memoizedState!==null,os(n,i,o),kt=u;break;default:os(n,i,o)}}function n0(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{uo(n)}catch(o){Je(i,i.return,o)}}}function r0(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{uo(n)}catch(o){Je(i,i.return,o)}}function zS(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new W_),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new W_),i;default:throw Error(s(435,n.tag))}}function Fc(n,i){var o=zS(n);i.forEach(function(u){if(!o.has(u)){o.add(u);var d=YS.bind(null,n,u);u.then(d,d)}})}function yn(n,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var d=o[u],m=n,v=i,T=v;e:for(;T!==null;){switch(T.tag){case 27:if(Gs(T.type)){ct=T.stateNode,pn=!1;break e}break;case 5:ct=T.stateNode,pn=!1;break e;case 3:case 4:ct=T.stateNode.containerInfo,pn=!0;break e}T=T.return}if(ct===null)throw Error(s(160));t0(m,v,d),ct=null,pn=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)s0(i,n),i=i.sibling}var ar=null;function s0(n,i){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:yn(i,n),_n(n),u&4&&(Ls(3,n,n.return),zl(3,n),Ls(5,n,n.return));break;case 1:yn(i,n),_n(n),u&512&&(kt||o===null||Pr(o,o.return)),u&64&&as&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var d=ar;if(yn(i,n),_n(n),u&512&&(kt||o===null||Pr(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,d=d.ownerDocument||d;t:switch(u){case"title":m=d.getElementsByTagName("title")[0],(!m||m[wr]||m[Rt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(u),d.head.insertBefore(m,d.querySelector("head > title"))),Jt(m,u,o),m[Rt]=n,xt(m),u=m;break e;case"link":var v=sv("link","href",d).get(u+(o.href||""));if(v){for(var T=0;T<v.length;T++)if(m=v[T],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(T,1);break t}}m=d.createElement(u),Jt(m,u,o),d.head.appendChild(m);break;case"meta":if(v=sv("meta","content",d).get(u+(o.content||""))){for(T=0;T<v.length;T++)if(m=v[T],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(T,1);break t}}m=d.createElement(u),Jt(m,u,o),d.head.appendChild(m);break;default:throw Error(s(468,u))}m[Rt]=n,xt(m),u=m}n.stateNode=u}else iv(d,n.type,n.stateNode);else n.stateNode=rv(d,u,n.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?iv(d,n.type,n.stateNode):rv(d,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Jf(n,n.memoizedProps,o.memoizedProps)}break;case 27:yn(i,n),_n(n),u&512&&(kt||o===null||Pr(o,o.return)),o!==null&&u&4&&Jf(n,n.memoizedProps,o.memoizedProps);break;case 5:if(yn(i,n),_n(n),u&512&&(kt||o===null||Pr(o,o.return)),n.flags&32){d=n.stateNode;try{gn(d,"")}catch(de){Je(n,n.return,de)}}u&4&&n.stateNode!=null&&(d=n.memoizedProps,Jf(n,d,o!==null?o.memoizedProps:d)),u&1024&&(em=!0);break;case 6:if(yn(i,n),_n(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(de){Je(n,n.return,de)}}break;case 3:if(oh=null,d=ar,ar=ih(i.containerInfo),yn(i,n),ar=d,_n(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{uo(i.containerInfo)}catch(de){Je(n,n.return,de)}em&&(em=!1,i0(n));break;case 4:u=ar,ar=ih(n.stateNode.containerInfo),yn(i,n),_n(n),ar=u;break;case 12:yn(i,n),_n(n);break;case 31:yn(i,n),_n(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Fc(n,u)));break;case 13:yn(i,n),_n(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Kc=cn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Fc(n,u)));break;case 22:d=n.memoizedState!==null;var O=o!==null&&o.memoizedState!==null,$=as,J=kt;if(as=$||d,kt=J||O,yn(i,n),kt=J,as=$,_n(n),u&8192)e:for(i=n.stateNode,i._visibility=d?i._visibility&-2:i._visibility|1,d&&(o===null||O||as||kt||Ji(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){O=o=i;try{if(m=O.stateNode,d)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=O.stateNode;var ee=O.memoizedProps.style,F=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;T.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(de){Je(O,O.return,de)}}}else if(i.tag===6){if(o===null){O=i;try{O.stateNode.nodeValue=d?"":O.memoizedProps}catch(de){Je(O,O.return,de)}}}else if(i.tag===18){if(o===null){O=i;try{var Q=O.stateNode;d?Q0(Q,!0):Q0(O.stateNode,!1)}catch(de){Je(O,O.return,de)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Fc(n,o))));break;case 19:yn(i,n),_n(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Fc(n,u)));break;case 30:break;case 21:break;default:yn(i,n),_n(n)}}function _n(n){var i=n.flags;if(i&2){try{for(var o,u=n.return;u!==null;){if(X_(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var d=o.stateNode,m=Wf(n);$c(n,m,d);break;case 5:var v=o.stateNode;o.flags&32&&(gn(v,""),o.flags&=-33);var T=Wf(n);$c(n,T,v);break;case 3:case 4:var O=o.stateNode.containerInfo,$=Wf(n);Zf(n,$,O);break;default:throw Error(s(161))}}catch(J){Je(n,n.return,J)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function i0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;i0(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function ls(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Z_(n,i.alternate,i),i=i.sibling}function Ji(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Ls(4,i,i.return),Ji(i);break;case 1:Pr(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Q_(i,i.return,o),Ji(i);break;case 27:Xl(i.stateNode);case 26:case 5:Pr(i,i.return),Ji(i);break;case 22:i.memoizedState===null&&Ji(i);break;case 30:Ji(i);break;default:Ji(i)}n=n.sibling}}function us(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,d=n,m=i,v=m.flags;switch(m.tag){case 0:case 11:case 15:us(d,m,o),zl(4,m);break;case 1:if(us(d,m,o),u=m,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch($){Je(u,u.return,$)}if(u=m,d=u.updateQueue,d!==null){var T=u.stateNode;try{var O=d.shared.hiddenCallbacks;if(O!==null)for(d.shared.hiddenCallbacks=null,d=0;d<O.length;d++)My(O[d],T)}catch($){Je(u,u.return,$)}}o&&v&64&&K_(m),Bl(m,m.return);break;case 27:J_(m);case 26:case 5:us(d,m,o),o&&u===null&&v&4&&Y_(m),Bl(m,m.return);break;case 12:us(d,m,o);break;case 31:us(d,m,o),o&&v&4&&n0(d,m);break;case 13:us(d,m,o),o&&v&4&&r0(d,m);break;case 22:m.memoizedState===null&&us(d,m,o),Bl(m,m.return);break;case 30:break;default:us(d,m,o)}i=i.sibling}}function tm(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&xl(o))}function nm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&xl(n))}function or(n,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)a0(n,i,o,u),i=i.sibling}function a0(n,i,o,u){var d=i.flags;switch(i.tag){case 0:case 11:case 15:or(n,i,o,u),d&2048&&zl(9,i);break;case 1:or(n,i,o,u);break;case 3:or(n,i,o,u),d&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&xl(n)));break;case 12:if(d&2048){or(n,i,o,u),n=i.stateNode;try{var m=i.memoizedProps,v=m.id,T=m.onPostCommit;typeof T=="function"&&T(v,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(O){Je(i,i.return,O)}}else or(n,i,o,u);break;case 31:or(n,i,o,u);break;case 13:or(n,i,o,u);break;case 23:break;case 22:m=i.stateNode,v=i.alternate,i.memoizedState!==null?m._visibility&2?or(n,i,o,u):ql(n,i):m._visibility&2?or(n,i,o,u):(m._visibility|=2,Wa(n,i,o,u,(i.subtreeFlags&10256)!==0||!1)),d&2048&&tm(v,i);break;case 24:or(n,i,o,u),d&2048&&nm(i.alternate,i);break;default:or(n,i,o,u)}}function Wa(n,i,o,u,d){for(d=d&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=n,v=i,T=o,O=u,$=v.flags;switch(v.tag){case 0:case 11:case 15:Wa(m,v,T,O,d),zl(8,v);break;case 23:break;case 22:var J=v.stateNode;v.memoizedState!==null?J._visibility&2?Wa(m,v,T,O,d):ql(m,v):(J._visibility|=2,Wa(m,v,T,O,d)),d&&$&2048&&tm(v.alternate,v);break;case 24:Wa(m,v,T,O,d),d&&$&2048&&nm(v.alternate,v);break;default:Wa(m,v,T,O,d)}i=i.sibling}}function ql(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,u=i,d=u.flags;switch(u.tag){case 22:ql(o,u),d&2048&&tm(u.alternate,u);break;case 24:ql(o,u),d&2048&&nm(u.alternate,u);break;default:ql(o,u)}i=i.sibling}}var Hl=8192;function Za(n,i,o){if(n.subtreeFlags&Hl)for(n=n.child;n!==null;)o0(n,i,o),n=n.sibling}function o0(n,i,o){switch(n.tag){case 26:Za(n,i,o),n.flags&Hl&&n.memoizedState!==null&&RA(o,ar,n.memoizedState,n.memoizedProps);break;case 5:Za(n,i,o);break;case 3:case 4:var u=ar;ar=ih(n.stateNode.containerInfo),Za(n,i,o),ar=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Hl,Hl=16777216,Za(n,i,o),Hl=u):Za(n,i,o));break;default:Za(n,i,o)}}function l0(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function $l(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];$t=u,c0(u,n)}l0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)u0(n),n=n.sibling}function u0(n){switch(n.tag){case 0:case 11:case 15:$l(n),n.flags&2048&&Ls(9,n,n.return);break;case 3:$l(n);break;case 12:$l(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Gc(n)):$l(n);break;default:$l(n)}}function Gc(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];$t=u,c0(u,n)}l0(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Ls(8,i,i.return),Gc(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Gc(i));break;default:Gc(i)}n=n.sibling}}function c0(n,i){for(;$t!==null;){var o=$t;switch(o.tag){case 0:case 11:case 15:Ls(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:xl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,$t=u;else e:for(o=n;$t!==null;){u=$t;var d=u.sibling,m=u.return;if(e0(u),u===o){$t=null;break e}if(d!==null){d.return=m,$t=d;break e}$t=m}}}var BS={getCacheForType:function(n){var i=Yt(It),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o},cacheSignal:function(){return Yt(It).controller.signal}},qS=typeof WeakMap=="function"?WeakMap:Map,Qe=0,rt=null,je=null,Me=0,Xe=0,Cn=null,zs=!1,eo=!1,rm=!1,cs=0,pt=0,Bs=0,Wi=0,sm=0,In=0,to=0,Fl=null,vn=null,im=!1,Kc=0,h0=0,Qc=1/0,Yc=null,qs=null,Lt=0,Hs=null,no=null,hs=0,am=0,om=null,d0=null,Gl=0,lm=null;function Nn(){return(Qe&2)!==0&&Me!==0?Me&-Me:X.T!==null?mm():Xu()}function f0(){if(In===0)if((Me&536870912)===0||Le){var n=Ai;Ai<<=1,(Ai&3932160)===0&&(Ai=262144),In=n}else In=536870912;return n=Rn.current,n!==null&&(n.flags|=32),In}function bn(n,i,o){(n===rt&&(Xe===2||Xe===9)||n.cancelPendingCommit!==null)&&(ro(n,0),$s(n,Me,In,!1)),Ri(n,o),((Qe&2)===0||n!==rt)&&(n===rt&&((Qe&2)===0&&(Wi|=o),pt===4&&$s(n,Me,In,!1)),Mr(n))}function m0(n,i,o){if((Qe&6)!==0)throw Error(s(327));var u=!o&&(i&127)===0&&(i&n.expiredLanes)===0||Jn(n,i),d=u?FS(n,i):cm(n,i,!0),m=u;do{if(d===0){eo&&!u&&$s(n,i,0,!1);break}else{if(o=n.current.alternate,m&&!HS(o)){d=cm(n,i,!1),m=!1;continue}if(d===2){if(m=i,n.errorRecoveryDisabledLanes&m)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var T=n;d=Fl;var O=T.current.memoizedState.isDehydrated;if(O&&(ro(T,v).flags|=256),v=cm(T,v,!1),v!==2){if(rm&&!O){T.errorRecoveryDisabledLanes|=m,Wi|=m,d=4;break e}m=vn,vn=d,m!==null&&(vn===null?vn=m:vn.push.apply(vn,m))}d=v}if(m=!1,d!==2)continue}}if(d===1){ro(n,0),$s(n,i,0,!0);break}e:{switch(u=n,m=d,m){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:$s(u,i,In,!zs);break e;case 2:vn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(d=Kc+300-cn(),10<d)){if($s(u,i,In,!zs),_r(u,0,!0)!==0)break e;hs=i,u.timeoutHandle=F0(g0.bind(null,u,o,vn,Yc,im,i,In,Wi,to,zs,m,"Throttled",-0,0),d);break e}g0(u,o,vn,Yc,im,i,In,Wi,to,zs,m,null,-0,0)}}break}while(!0);Mr(n)}function g0(n,i,o,u,d,m,v,T,O,$,J,ee,F,Q){if(n.timeoutHandle=-1,ee=i.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:er},o0(i,m,ee);var de=(m&62914560)===m?Kc-cn():(m&4194048)===m?h0-cn():0;if(de=xA(ee,de),de!==null){hs=m,n.cancelPendingCommit=de(T0.bind(null,n,i,m,o,u,d,v,T,O,J,ee,null,F,Q)),$s(n,m,v,!$);return}}T0(n,i,m,o,u,d,v,T,O)}function HS(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var d=o[u],m=d.getSnapshot;d=d.value;try{if(!Sn(m(),d))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function $s(n,i,o,u){i&=~sm,i&=~Wi,n.suspendedLanes|=i,n.pingedLanes&=~i,u&&(n.warmLanes|=i),u=n.expirationTimes;for(var d=i;0<d;){var m=31-_t(d),v=1<<m;u[m]=-1,d&=~v}o!==0&&xi(n,o,i)}function Xc(){return(Qe&6)===0?(Kl(0),!1):!0}function um(){if(je!==null){if(Xe===0)var n=je.return;else n=je,es=Hi=null,Af(n),Ka=null,Il=0,n=je;for(;n!==null;)G_(n.alternate,n),n=n.return;je=null}}function ro(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,uA(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),hs=0,um(),rt=n,je=o=Wr(n.current,null),Me=i,Xe=0,Cn=null,zs=!1,eo=Jn(n,i),rm=!1,to=In=sm=Wi=Bs=pt=0,vn=Fl=null,im=!1,(i&8)!==0&&(i|=i&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=i;0<u;){var d=31-_t(u),m=1<<d;i|=n[d],u&=~m}return cs=i,yc(),o}function p0(n,i){Ne=null,X.H=Vl,i===Ga||i===Ac?(i=ky(),Xe=3):i===ff?(i=ky(),Xe=4):Xe=i===Bf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Cn=i,je===null&&(pt=1,Lc(n,Bn(i,n.current)))}function y0(){var n=Rn.current;return n===null?!0:(Me&4194048)===Me?Fn===null:(Me&62914560)===Me||(Me&536870912)!==0?n===Fn:!1}function _0(){var n=X.H;return X.H=Vl,n===null?Vl:n}function v0(){var n=X.A;return X.A=BS,n}function Jc(){pt=4,zs||(Me&4194048)!==Me&&Rn.current!==null||(eo=!0),(Bs&134217727)===0&&(Wi&134217727)===0||rt===null||$s(rt,Me,In,!1)}function cm(n,i,o){var u=Qe;Qe|=2;var d=_0(),m=v0();(rt!==n||Me!==i)&&(Yc=null,ro(n,i)),i=!1;var v=pt;e:do try{if(Xe!==0&&je!==null){var T=je,O=Cn;switch(Xe){case 8:um(),v=6;break e;case 3:case 2:case 9:case 6:Rn.current===null&&(i=!0);var $=Xe;if(Xe=0,Cn=null,so(n,T,O,$),o&&eo){v=0;break e}break;default:$=Xe,Xe=0,Cn=null,so(n,T,O,$)}}$S(),v=pt;break}catch(J){p0(n,J)}while(!0);return i&&n.shellSuspendCounter++,es=Hi=null,Qe=u,X.H=d,X.A=m,je===null&&(rt=null,Me=0,yc()),v}function $S(){for(;je!==null;)b0(je)}function FS(n,i){var o=Qe;Qe|=2;var u=_0(),d=v0();rt!==n||Me!==i?(Yc=null,Qc=cn()+500,ro(n,i)):eo=Jn(n,i);e:do try{if(Xe!==0&&je!==null){i=je;var m=Cn;t:switch(Xe){case 1:Xe=0,Cn=null,so(n,i,m,1);break;case 2:case 9:if(Ny(m)){Xe=0,Cn=null,w0(i);break}i=function(){Xe!==2&&Xe!==9||rt!==n||(Xe=7),Mr(n)},m.then(i,i);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:Ny(m)?(Xe=0,Cn=null,w0(i)):(Xe=0,Cn=null,so(n,i,m,7));break;case 5:var v=null;switch(je.tag){case 26:v=je.memoizedState;case 5:case 27:var T=je;if(v?av(v):T.stateNode.complete){Xe=0,Cn=null;var O=T.sibling;if(O!==null)je=O;else{var $=T.return;$!==null?(je=$,Wc($)):je=null}break t}}Xe=0,Cn=null,so(n,i,m,5);break;case 6:Xe=0,Cn=null,so(n,i,m,6);break;case 8:um(),pt=6;break e;default:throw Error(s(462))}}GS();break}catch(J){p0(n,J)}while(!0);return es=Hi=null,X.H=u,X.A=d,Qe=o,je!==null?0:(rt=null,Me=0,yc(),pt)}function GS(){for(;je!==null&&!Ld();)b0(je)}function b0(n){var i=$_(n.alternate,n,cs);n.memoizedProps=n.pendingProps,i===null?Wc(n):je=i}function w0(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=U_(o,i,i.pendingProps,i.type,void 0,Me);break;case 11:i=U_(o,i,i.pendingProps,i.type.render,i.ref,Me);break;case 5:Af(i);default:G_(o,i),i=je=vy(i,cs),i=$_(o,i,cs)}n.memoizedProps=n.pendingProps,i===null?Wc(n):je=i}function so(n,i,o,u){es=Hi=null,Af(i),Ka=null,Il=0;var d=i.return;try{if(jS(n,d,i,o,Me)){pt=1,Lc(n,Bn(o,n.current)),je=null;return}}catch(m){if(d!==null)throw je=d,m;pt=1,Lc(n,Bn(o,n.current)),je=null;return}i.flags&32768?(Le||u===1?n=!0:eo||(Me&536870912)!==0?n=!1:(zs=n=!0,(u===2||u===9||u===3||u===6)&&(u=Rn.current,u!==null&&u.tag===13&&(u.flags|=16384))),E0(i,n)):Wc(i)}function Wc(n){var i=n;do{if((i.flags&32768)!==0){E0(i,zs);return}n=i.return;var o=VS(i.alternate,i,cs);if(o!==null){je=o;return}if(i=i.sibling,i!==null){je=i;return}je=i=n}while(i!==null);pt===0&&(pt=5)}function E0(n,i){do{var o=US(n.alternate,n);if(o!==null){o.flags&=32767,je=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){je=n;return}je=n=o}while(n!==null);pt=6,je=null}function T0(n,i,o,u,d,m,v,T,O){n.cancelPendingCommit=null;do Zc();while(Lt!==0);if((Qe&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(m=i.lanes|i.childLanes,m|=Jd,qd(n,o,m,v,T,O),n===rt&&(je=rt=null,Me=0),no=i,Hs=n,hs=o,am=m,om=d,d0=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,XS(bs,function(){return C0(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=X.T,X.T=null,d=ae.p,ae.p=2,v=Qe,Qe|=4;try{LS(n,i,o)}finally{Qe=v,ae.p=d,X.T=u}}Lt=1,S0(),A0(),R0()}}function S0(){if(Lt===1){Lt=0;var n=Hs,i=no,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=X.T,X.T=null;var u=ae.p;ae.p=2;var d=Qe;Qe|=4;try{s0(i,n);var m=Em,v=cy(n.containerInfo),T=m.focusedElem,O=m.selectionRange;if(v!==T&&T&&T.ownerDocument&&uy(T.ownerDocument.documentElement,T)){if(O!==null&&Gd(T)){var $=O.start,J=O.end;if(J===void 0&&(J=$),"selectionStart"in T)T.selectionStart=$,T.selectionEnd=Math.min(J,T.value.length);else{var ee=T.ownerDocument||document,F=ee&&ee.defaultView||window;if(F.getSelection){var Q=F.getSelection(),de=T.textContent.length,ve=Math.min(O.start,de),tt=O.end===void 0?ve:Math.min(O.end,de);!Q.extend&&ve>tt&&(v=tt,tt=ve,ve=v);var L=ly(T,ve),V=ly(T,tt);if(L&&V&&(Q.rangeCount!==1||Q.anchorNode!==L.node||Q.anchorOffset!==L.offset||Q.focusNode!==V.node||Q.focusOffset!==V.offset)){var H=ee.createRange();H.setStart(L.node,L.offset),Q.removeAllRanges(),ve>tt?(Q.addRange(H),Q.extend(V.node,V.offset)):(H.setEnd(V.node,V.offset),Q.addRange(H))}}}}for(ee=[],Q=T;Q=Q.parentNode;)Q.nodeType===1&&ee.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ee.length;T++){var Z=ee[T];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}hh=!!wm,Em=wm=null}finally{Qe=d,ae.p=u,X.T=o}}n.current=i,Lt=2}}function A0(){if(Lt===2){Lt=0;var n=Hs,i=no,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=X.T,X.T=null;var u=ae.p;ae.p=2;var d=Qe;Qe|=4;try{Z_(n,i.alternate,i)}finally{Qe=d,ae.p=u,X.T=o}}Lt=3}}function R0(){if(Lt===4||Lt===3){Lt=0,Hu();var n=Hs,i=no,o=hs,u=d0;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Lt=5:(Lt=0,no=Hs=null,x0(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(qs=null),Qr(o),i=i.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(Xn,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=X.T,d=ae.p,ae.p=2,X.T=null;try{for(var m=n.onRecoverableError,v=0;v<u.length;v++){var T=u[v];m(T.value,{componentStack:T.stack})}}finally{X.T=i,ae.p=d}}(hs&3)!==0&&Zc(),Mr(n),d=n.pendingLanes,(o&261930)!==0&&(d&42)!==0?n===lm?Gl++:(Gl=0,lm=n):Gl=0,Kl(0)}}function x0(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,xl(i)))}function Zc(){return S0(),A0(),R0(),C0()}function C0(){if(Lt!==5)return!1;var n=Hs,i=am;am=0;var o=Qr(hs),u=X.T,d=ae.p;try{ae.p=32>o?32:o,X.T=null,o=om,om=null;var m=Hs,v=hs;if(Lt=0,no=Hs=null,hs=0,(Qe&6)!==0)throw Error(s(331));var T=Qe;if(Qe|=4,u0(m.current),a0(m,m.current,v,o),Qe=T,Kl(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(Xn,m)}catch{}return!0}finally{ae.p=d,X.T=u,x0(n,i)}}function I0(n,i,o){i=Bn(o,i),i=zf(n.stateNode,i,2),n=Ms(n,i,2),n!==null&&(Ri(n,2),Mr(n))}function Je(n,i,o){if(n.tag===3)I0(n,n,o);else for(;i!==null;){if(i.tag===3){I0(i,n,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(qs===null||!qs.has(u))){n=Bn(o,n),o=N_(2),u=Ms(i,o,2),u!==null&&(O_(o,u,i,n),Ri(u,2),Mr(u));break}}i=i.return}}function hm(n,i,o){var u=n.pingCache;if(u===null){u=n.pingCache=new qS;var d=new Set;u.set(i,d)}else d=u.get(i),d===void 0&&(d=new Set,u.set(i,d));d.has(o)||(rm=!0,d.add(o),n=KS.bind(null,n,i,o),i.then(n,n))}function KS(n,i,o){var u=n.pingCache;u!==null&&u.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,rt===n&&(Me&o)===o&&(pt===4||pt===3&&(Me&62914560)===Me&&300>cn()-Kc?(Qe&2)===0&&ro(n,0):sm|=o,to===Me&&(to=0)),Mr(n)}function N0(n,i){i===0&&(i=Yu()),n=zi(n,i),n!==null&&(Ri(n,i),Mr(n))}function QS(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),N0(n,o)}function YS(n,i){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,d=n.memoizedState;d!==null&&(o=d.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),N0(n,o)}function XS(n,i){return Ut(n,i)}var eh=null,io=null,dm=!1,th=!1,fm=!1,Fs=0;function Mr(n){n!==io&&n.next===null&&(io===null?eh=io=n:io=io.next=n),th=!0,dm||(dm=!0,WS())}function Kl(n,i){if(!fm&&th){fm=!0;do for(var o=!1,u=eh;u!==null;){if(n!==0){var d=u.pendingLanes;if(d===0)var m=0;else{var v=u.suspendedLanes,T=u.pingedLanes;m=(1<<31-_t(42|n)+1)-1,m&=d&~(v&~T),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,j0(u,m))}else m=Me,m=_r(u,u===rt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||Jn(u,m)||(o=!0,j0(u,m));u=u.next}while(o);fm=!1}}function JS(){O0()}function O0(){th=dm=!1;var n=0;Fs!==0&&lA()&&(n=Fs);for(var i=cn(),o=null,u=eh;u!==null;){var d=u.next,m=k0(u,i);m===0?(u.next=null,o===null?eh=d:o.next=d,d===null&&(io=o)):(o=u,(n!==0||(m&3)!==0)&&(th=!0)),u=d}Lt!==0&&Lt!==5||Kl(n),Fs!==0&&(Fs=0)}function k0(n,i){for(var o=n.suspendedLanes,u=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var v=31-_t(m),T=1<<v,O=d[v];O===-1?((T&o)===0||(T&u)!==0)&&(d[v]=Bd(T,i)):O<=i&&(n.expiredLanes|=T),m&=~T}if(i=rt,o=Me,o=_r(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===i&&(Xe===2||Xe===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&vs(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Jn(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(u!==null&&vs(u),Qr(o)){case 2:case 8:o=rl;break;case 32:o=bs;break;case 268435456:o=$u;break;default:o=bs}return u=D0.bind(null,n),o=Ut(o,u),n.callbackPriority=i,n.callbackNode=o,i}return u!==null&&u!==null&&vs(u),n.callbackPriority=2,n.callbackNode=null,2}function D0(n,i){if(Lt!==0&&Lt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Zc()&&n.callbackNode!==o)return null;var u=Me;return u=_r(n,n===rt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(m0(n,u,i),k0(n,cn()),n.callbackNode!=null&&n.callbackNode===o?D0.bind(null,n):null)}function j0(n,i){if(Zc())return null;m0(n,i,!0)}function WS(){cA(function(){(Qe&6)!==0?Ut(nl,JS):O0()})}function mm(){if(Fs===0){var n=$a;n===0&&(n=pr,pr<<=1,(pr&261888)===0&&(pr=256)),Fs=n}return Fs}function P0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ia(""+n)}function M0(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function ZS(n,i,o,u,d){if(i==="submit"&&o&&o.stateNode===d){var m=P0((d[qt]||null).action),v=u.submitter;v&&(i=(i=v[qt]||null)?P0(i.formAction):v.getAttribute("formAction"),i!==null&&(m=i,v=null));var T=new Ir("action","action",null,u,d);n.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Fs!==0){var O=v?M0(d,v):new FormData(d);jf(o,{pending:!0,data:O,method:d.method,action:m},null,O)}}else typeof m=="function"&&(T.preventDefault(),O=v?M0(d,v):new FormData(d),jf(o,{pending:!0,data:O,method:d.method,action:m},m,O))},currentTarget:d}]})}}for(var gm=0;gm<Xd.length;gm++){var pm=Xd[gm],eA=pm.toLowerCase(),tA=pm[0].toUpperCase()+pm.slice(1);ir(eA,"on"+tA)}ir(fy,"onAnimationEnd"),ir(my,"onAnimationIteration"),ir(gy,"onAnimationStart"),ir("dblclick","onDoubleClick"),ir("focusin","onFocus"),ir("focusout","onBlur"),ir(yS,"onTransitionRun"),ir(_S,"onTransitionStart"),ir(vS,"onTransitionCancel"),ir(py,"onTransitionEnd"),Ar("onMouseEnter",["mouseout","mouseover"]),Ar("onMouseLeave",["mouseout","mouseover"]),Ar("onPointerEnter",["pointerout","pointerover"]),Ar("onPointerLeave",["pointerout","pointerover"]),Sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Sr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ql));function V0(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],d=u.event;u=u.listeners;e:{var m=void 0;if(i)for(var v=u.length-1;0<=v;v--){var T=u[v],O=T.instance,$=T.currentTarget;if(T=T.listener,O!==m&&d.isPropagationStopped())break e;m=T,d.currentTarget=$;try{m(d)}catch(J){pc(J)}d.currentTarget=null,m=O}else for(v=0;v<u.length;v++){if(T=u[v],O=T.instance,$=T.currentTarget,T=T.listener,O!==m&&d.isPropagationStopped())break e;m=T,d.currentTarget=$;try{m(d)}catch(J){pc(J)}d.currentTarget=null,m=O}}}}function Pe(n,i){var o=i[Sa];o===void 0&&(o=i[Sa]=new Set);var u=n+"__bubble";o.has(u)||(U0(i,n,2,!1),o.add(u))}function ym(n,i,o){var u=0;i&&(u|=4),U0(o,n,u,i)}var nh="_reactListening"+Math.random().toString(36).slice(2);function _m(n){if(!n[nh]){n[nh]=!0,al.forEach(function(o){o!=="selectionchange"&&(nA.has(o)||ym(o,!1,n),ym(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[nh]||(i[nh]=!0,ym("selectionchange",!1,i))}}function U0(n,i,o,u){switch(fv(i)){case 2:var d=NA;break;case 8:d=OA;break;default:d=Dm}o=d.bind(null,i,o,n),d=void 0,!ki||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),u?d!==void 0?n.addEventListener(i,o,{capture:!0,passive:d}):n.addEventListener(i,o,!0):d!==void 0?n.addEventListener(i,o,{passive:d}):n.addEventListener(i,o,!1)}function vm(n,i,o,u,d){var m=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var T=u.stateNode.containerInfo;if(T===d)break;if(v===4)for(v=u.return;v!==null;){var O=v.tag;if((O===3||O===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;T!==null;){if(v=Er(T),v===null)return;if(O=v.tag,O===5||O===6||O===26||O===27){u=m=v;continue e}T=T.parentNode}}u=u.return}Rs(function(){var $=m,J=Vn(o),ee=[];e:{var F=yy.get(n);if(F!==void 0){var Q=Ir,de=n;switch(n){case"keypress":if(ji(o)===0)break e;case"keydown":case"keyup":Q=fc;break;case"focusin":de="focus",Q=Mi;break;case"focusout":de="blur",Q=Mi;break;case"beforeblur":case"afterblur":Q=Mi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=vl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=sc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=y;break;case fy:case my:case gy:Q=ac;break;case py:Q=A;break;case"scroll":case"scrollend":Q=_l;break;case"wheel":Q=K;break;case"copy":case"cut":case"paste":Q=oc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Jr;break;case"toggle":case"beforetoggle":Q=Ie}var ve=(i&4)!==0,tt=!ve&&(n==="scroll"||n==="scrollend"),L=ve?F!==null?F+"Capture":null:F;ve=[];for(var V=$,H;V!==null;){var Z=V;if(H=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||H===null||L===null||(Z=tr(V,L),Z!=null&&ve.push(Yl(V,Z,H))),tt)break;V=V.return}0<ve.length&&(F=new Q(F,de,null,o,J),ee.push({event:F,listeners:ve}))}}if((i&7)===0){e:{if(F=n==="mouseover"||n==="pointerover",Q=n==="mouseout"||n==="pointerout",F&&o!==gl&&(de=o.relatedTarget||o.fromElement)&&(Er(de)||de[br]))break e;if((Q||F)&&(F=J.window===J?J:(F=J.ownerDocument)?F.defaultView||F.parentWindow:window,Q?(de=o.relatedTarget||o.toElement,Q=$,de=de?Er(de):null,de!==null&&(tt=l(de),ve=de.tag,de!==tt||ve!==5&&ve!==27&&ve!==6)&&(de=null)):(Q=null,de=$),Q!==de)){if(ve=vl,Z="onMouseLeave",L="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(ve=Jr,Z="onPointerLeave",L="onPointerEnter",V="pointer"),tt=Q==null?F:En(Q),H=de==null?F:En(de),F=new ve(Z,V+"leave",Q,o,J),F.target=tt,F.relatedTarget=H,Z=null,Er(J)===$&&(ve=new ve(L,V+"enter",de,o,J),ve.target=H,ve.relatedTarget=tt,Z=ve),tt=Z,Q&&de)t:{for(ve=rA,L=Q,V=de,H=0,Z=L;Z;Z=ve(Z))H++;Z=0;for(var ye=V;ye;ye=ve(ye))Z++;for(;0<H-Z;)L=ve(L),H--;for(;0<Z-H;)V=ve(V),Z--;for(;H--;){if(L===V||V!==null&&L===V.alternate){ve=L;break t}L=ve(L),V=ve(V)}ve=null}else ve=null;Q!==null&&L0(ee,F,Q,ve,!1),de!==null&&tt!==null&&L0(ee,tt,de,ve,!0)}}e:{if(F=$?En($):window,Q=F.nodeName&&F.nodeName.toLowerCase(),Q==="select"||Q==="input"&&F.type==="file")var Fe=ny;else if(ey(F))if(ry)Fe=mS;else{Fe=dS;var ge=hS}else Q=F.nodeName,!Q||Q.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?$&&Ca($.elementType)&&(Fe=ny):Fe=fS;if(Fe&&(Fe=Fe(n,$))){ty(ee,Fe,o,J);break e}ge&&ge(n,F,$),n==="focusout"&&$&&F.type==="number"&&$.memoizedProps.value!=null&&dl(F,"number",F.value)}switch(ge=$?En($):window,n){case"focusin":(ey(ge)||ge.contentEditable==="true")&&(Ma=ge,Kd=$,Sl=null);break;case"focusout":Sl=Kd=Ma=null;break;case"mousedown":Qd=!0;break;case"contextmenu":case"mouseup":case"dragend":Qd=!1,hy(ee,o,J);break;case"selectionchange":if(pS)break;case"keydown":case"keyup":hy(ee,o,J)}var ke;if(Ke)e:{switch(n){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else Pa?Vi(n,o)&&(Ve="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Ve="onCompositionStart");Ve&&(kr&&o.locale!=="ko"&&(Pa||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&Pa&&(ke=yl()):(Cr=J,pl="value"in Cr?Cr.value:Cr.textContent,Pa=!0)),ge=rh($,Ve),0<ge.length&&(Ve=new Or(Ve,n,null,o,J),ee.push({event:Ve,listeners:ge}),ke?Ve.data=ke:(ke=ja(o),ke!==null&&(Ve.data=ke)))),(ke=Ln?oS(n,o):lS(n,o))&&(Ve=rh($,"onBeforeInput"),0<Ve.length&&(ge=new Or("onBeforeInput","beforeinput",null,o,J),ee.push({event:ge,listeners:Ve}),ge.data=ke)),ZS(ee,n,$,o,J)}V0(ee,i)})}function Yl(n,i,o){return{instance:n,listener:i,currentTarget:o}}function rh(n,i){for(var o=i+"Capture",u=[];n!==null;){var d=n,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=tr(n,o),d!=null&&u.unshift(Yl(n,d,m)),d=tr(n,i),d!=null&&u.push(Yl(n,d,m))),n.tag===3)return u;n=n.return}return[]}function rA(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function L0(n,i,o,u,d){for(var m=i._reactName,v=[];o!==null&&o!==u;){var T=o,O=T.alternate,$=T.stateNode;if(T=T.tag,O!==null&&O===u)break;T!==5&&T!==26&&T!==27||$===null||(O=$,d?($=tr(o,m),$!=null&&v.unshift(Yl(o,$,O))):d||($=tr(o,m),$!=null&&v.push(Yl(o,$,O)))),o=o.return}v.length!==0&&n.push({event:i,listeners:v})}var sA=/\r\n?/g,iA=/\u0000|\uFFFD/g;function z0(n){return(typeof n=="string"?n:""+n).replace(sA,`
`).replace(iA,"")}function B0(n,i){return i=z0(i),z0(n)===i}function et(n,i,o,u,d,m){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||gn(n,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&gn(n,""+u);break;case"className":Tn(n,"class",u);break;case"tabIndex":Tn(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Tn(n,o,u);break;case"style":ml(n,u,m);break;case"data":if(i!=="object"){Tn(n,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ia(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(i!=="input"&&et(n,i,"name",d.name,d,null),et(n,i,"formEncType",d.formEncType,d,null),et(n,i,"formMethod",d.formMethod,d,null),et(n,i,"formTarget",d.formTarget,d,null)):(et(n,i,"encType",d.encType,d,null),et(n,i,"method",d.method,d,null),et(n,i,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ia(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=er);break;case"onScroll":u!=null&&Pe("scroll",n);break;case"onScrollEnd":u!=null&&Pe("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Ia(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Pe("beforetoggle",n),Pe("toggle",n),Ra(n,"popover",u);break;case"xlinkActuate":Ct(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ct(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ct(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ct(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ct(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ct(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ct(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ct(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ct(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ra(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=rc.get(o)||o,Ra(n,o,u))}}function bm(n,i,o,u,d,m){switch(o){case"style":ml(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"children":typeof u=="string"?gn(n,u):(typeof u=="number"||typeof u=="bigint")&&gn(n,""+u);break;case"onScroll":u!=null&&Pe("scroll",n);break;case"onScrollEnd":u!=null&&Pe("scrollend",n);break;case"onClick":u!=null&&(n.onclick=er);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ol.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),i=o.slice(2,d?o.length-7:void 0),m=n[qt]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(i,m,d),typeof u=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,u,d);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Ra(n,o,u)}}}function Jt(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",n),Pe("load",n);var u=!1,d=!1,m;for(m in o)if(o.hasOwnProperty(m)){var v=o[m];if(v!=null)switch(m){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:et(n,i,m,v,o,null)}}d&&et(n,i,"srcSet",o.srcSet,o,null),u&&et(n,i,"src",o.src,o,null);return;case"input":Pe("invalid",n);var T=m=v=d=null,O=null,$=null;for(u in o)if(o.hasOwnProperty(u)){var J=o[u];if(J!=null)switch(u){case"name":d=J;break;case"type":v=J;break;case"checked":O=J;break;case"defaultChecked":$=J;break;case"value":m=J;break;case"defaultValue":T=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,i));break;default:et(n,i,u,J,o,null)}}ec(n,m,T,O,$,v,d,!1);return;case"select":Pe("invalid",n),u=v=m=null;for(d in o)if(o.hasOwnProperty(d)&&(T=o[d],T!=null))switch(d){case"value":m=T;break;case"defaultValue":v=T;break;case"multiple":u=T;default:et(n,i,d,T,o,null)}i=m,o=v,n.multiple=!!u,i!=null?Es(n,!!u,i,!1):o!=null&&Es(n,!!u,o,!0);return;case"textarea":Pe("invalid",n),m=d=u=null;for(v in o)if(o.hasOwnProperty(v)&&(T=o[v],T!=null))switch(v){case"value":u=T;break;case"defaultValue":d=T;break;case"children":m=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:et(n,i,v,T,o,null)}Ts(n,u,d,m);return;case"option":for(O in o)if(o.hasOwnProperty(O)&&(u=o[O],u!=null))switch(O){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:et(n,i,O,u,o,null)}return;case"dialog":Pe("beforetoggle",n),Pe("toggle",n),Pe("cancel",n),Pe("close",n);break;case"iframe":case"object":Pe("load",n);break;case"video":case"audio":for(u=0;u<Ql.length;u++)Pe(Ql[u],n);break;case"image":Pe("error",n),Pe("load",n);break;case"details":Pe("toggle",n);break;case"embed":case"source":case"link":Pe("error",n),Pe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in o)if(o.hasOwnProperty($)&&(u=o[$],u!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:et(n,i,$,u,o,null)}return;default:if(Ca(i)){for(J in o)o.hasOwnProperty(J)&&(u=o[J],u!==void 0&&bm(n,i,J,u,o,void 0));return}}for(T in o)o.hasOwnProperty(T)&&(u=o[T],u!=null&&et(n,i,T,u,o,null))}function aA(n,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,v=null,T=null,O=null,$=null,J=null;for(Q in o){var ee=o[Q];if(o.hasOwnProperty(Q)&&ee!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":O=ee;default:u.hasOwnProperty(Q)||et(n,i,Q,null,u,ee)}}for(var F in u){var Q=u[F];if(ee=o[F],u.hasOwnProperty(F)&&(Q!=null||ee!=null))switch(F){case"type":m=Q;break;case"name":d=Q;break;case"checked":$=Q;break;case"defaultChecked":J=Q;break;case"value":v=Q;break;case"defaultValue":T=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:Q!==ee&&et(n,i,F,Q,u,ee)}}xa(n,v,T,O,$,J,m,d);return;case"select":Q=v=T=F=null;for(m in o)if(O=o[m],o.hasOwnProperty(m)&&O!=null)switch(m){case"value":break;case"multiple":Q=O;default:u.hasOwnProperty(m)||et(n,i,m,null,u,O)}for(d in u)if(m=u[d],O=o[d],u.hasOwnProperty(d)&&(m!=null||O!=null))switch(d){case"value":F=m;break;case"defaultValue":T=m;break;case"multiple":v=m;default:m!==O&&et(n,i,d,m,u,O)}i=T,o=v,u=Q,F!=null?Es(n,!!o,F,!1):!!u!=!!o&&(i!=null?Es(n,!!o,i,!0):Es(n,!!o,o?[]:"",!1));return;case"textarea":Q=F=null;for(T in o)if(d=o[T],o.hasOwnProperty(T)&&d!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:et(n,i,T,null,u,d)}for(v in u)if(d=u[v],m=o[v],u.hasOwnProperty(v)&&(d!=null||m!=null))switch(v){case"value":F=d;break;case"defaultValue":Q=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==m&&et(n,i,v,d,u,m)}tc(n,F,Q);return;case"option":for(var de in o)if(F=o[de],o.hasOwnProperty(de)&&F!=null&&!u.hasOwnProperty(de))switch(de){case"selected":n.selected=!1;break;default:et(n,i,de,null,u,F)}for(O in u)if(F=u[O],Q=o[O],u.hasOwnProperty(O)&&F!==Q&&(F!=null||Q!=null))switch(O){case"selected":n.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:et(n,i,O,F,u,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in o)F=o[ve],o.hasOwnProperty(ve)&&F!=null&&!u.hasOwnProperty(ve)&&et(n,i,ve,null,u,F);for($ in u)if(F=u[$],Q=o[$],u.hasOwnProperty($)&&F!==Q&&(F!=null||Q!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,i));break;default:et(n,i,$,F,u,Q)}return;default:if(Ca(i)){for(var tt in o)F=o[tt],o.hasOwnProperty(tt)&&F!==void 0&&!u.hasOwnProperty(tt)&&bm(n,i,tt,void 0,u,F);for(J in u)F=u[J],Q=o[J],!u.hasOwnProperty(J)||F===Q||F===void 0&&Q===void 0||bm(n,i,J,F,u,Q);return}}for(var L in o)F=o[L],o.hasOwnProperty(L)&&F!=null&&!u.hasOwnProperty(L)&&et(n,i,L,null,u,F);for(ee in u)F=u[ee],Q=o[ee],!u.hasOwnProperty(ee)||F===Q||F==null&&Q==null||et(n,i,ee,F,u,Q)}function q0(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function oA(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var d=o[u],m=d.transferSize,v=d.initiatorType,T=d.duration;if(m&&T&&q0(v)){for(v=0,T=d.responseEnd,u+=1;u<o.length;u++){var O=o[u],$=O.startTime;if($>T)break;var J=O.transferSize,ee=O.initiatorType;J&&q0(ee)&&(O=O.responseEnd,v+=J*(O<T?1:(T-$)/(O-$)))}if(--u,i+=8*(m+v)/(d.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var wm=null,Em=null;function sh(n){return n.nodeType===9?n:n.ownerDocument}function H0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $0(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Tm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Sm=null;function lA(){var n=window.event;return n&&n.type==="popstate"?n===Sm?!1:(Sm=n,!0):(Sm=null,!1)}var F0=typeof setTimeout=="function"?setTimeout:void 0,uA=typeof clearTimeout=="function"?clearTimeout:void 0,G0=typeof Promise=="function"?Promise:void 0,cA=typeof queueMicrotask=="function"?queueMicrotask:typeof G0<"u"?function(n){return G0.resolve(null).then(n).catch(hA)}:F0;function hA(n){setTimeout(function(){throw n})}function Gs(n){return n==="head"}function K0(n,i){var o=i,u=0;do{var d=o.nextSibling;if(n.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(d),uo(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Xl(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Xl(o);for(var m=o.firstChild;m;){var v=m.nextSibling,T=m.nodeName;m[wr]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=v}}else o==="body"&&Xl(n.ownerDocument.body);o=d}while(o);uo(i)}function Q0(n,i){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function Am(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Am(o),Aa(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function dA(n,i,o,u){for(;n.nodeType===1;){var d=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[wr])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Gn(n.nextSibling),n===null)break}return null}function fA(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Gn(n.nextSibling),n===null))return null;return n}function Y0(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Gn(n.nextSibling),n===null))return null;return n}function Rm(n){return n.data==="$?"||n.data==="$~"}function xm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function mA(n,i){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Gn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var Cm=null;function X0(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(i===0)return Gn(n.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}n=n.nextSibling}return null}function J0(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return n;i--}else o!=="/$"&&o!=="/&"||i++}n=n.previousSibling}return null}function W0(n,i,o){switch(i=sh(o),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Xl(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Aa(n)}var Kn=new Map,Z0=new Set;function ih(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ds=ae.d;ae.d={f:gA,r:pA,D:yA,C:_A,L:vA,m:bA,X:EA,S:wA,M:TA};function gA(){var n=ds.f(),i=Xc();return n||i}function pA(n){var i=Mn(n);i!==null&&i.tag===5&&i.type==="form"?p_(i):ds.r(n)}var ao=typeof document>"u"?null:document;function ev(n,i,o){var u=ao;if(u&&typeof i=="string"&&i){var d=mn(i);d='link[rel="'+n+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),Z0.has(d)||(Z0.add(d),n={rel:n,crossOrigin:o,href:i},u.querySelector(d)===null&&(i=u.createElement("link"),Jt(i,"link",n),xt(i),u.head.appendChild(i)))}}function yA(n){ds.D(n),ev("dns-prefetch",n,null)}function _A(n,i){ds.C(n,i),ev("preconnect",n,i)}function vA(n,i,o){ds.L(n,i,o);var u=ao;if(u&&n&&i){var d='link[rel="preload"][as="'+mn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+mn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+mn(o.imageSizes)+'"]')):d+='[href="'+mn(n)+'"]';var m=d;switch(i){case"style":m=oo(n);break;case"script":m=lo(n)}Kn.has(m)||(n=E({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),Kn.set(m,n),u.querySelector(d)!==null||i==="style"&&u.querySelector(Jl(m))||i==="script"&&u.querySelector(Wl(m))||(i=u.createElement("link"),Jt(i,"link",n),xt(i),u.head.appendChild(i)))}}function bA(n,i){ds.m(n,i);var o=ao;if(o&&n){var u=i&&typeof i.as=="string"?i.as:"script",d='link[rel="modulepreload"][as="'+mn(u)+'"][href="'+mn(n)+'"]',m=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=lo(n)}if(!Kn.has(m)&&(n=E({rel:"modulepreload",href:n},i),Kn.set(m,n),o.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Wl(m)))return}u=o.createElement("link"),Jt(u,"link",n),xt(u),o.head.appendChild(u)}}}function wA(n,i,o){ds.S(n,i,o);var u=ao;if(u&&n){var d=Tr(u).hoistableStyles,m=oo(n);i=i||"default";var v=d.get(m);if(!v){var T={loading:0,preload:null};if(v=u.querySelector(Jl(m)))T.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":i},o),(o=Kn.get(m))&&Im(n,o);var O=v=u.createElement("link");xt(O),Jt(O,"link",n),O._p=new Promise(function($,J){O.onload=$,O.onerror=J}),O.addEventListener("load",function(){T.loading|=1}),O.addEventListener("error",function(){T.loading|=2}),T.loading|=4,ah(v,i,u)}v={type:"stylesheet",instance:v,count:1,state:T},d.set(m,v)}}}function EA(n,i){ds.X(n,i);var o=ao;if(o&&n){var u=Tr(o).hoistableScripts,d=lo(n),m=u.get(d);m||(m=o.querySelector(Wl(d)),m||(n=E({src:n,async:!0},i),(i=Kn.get(d))&&Nm(n,i),m=o.createElement("script"),xt(m),Jt(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(d,m))}}function TA(n,i){ds.M(n,i);var o=ao;if(o&&n){var u=Tr(o).hoistableScripts,d=lo(n),m=u.get(d);m||(m=o.querySelector(Wl(d)),m||(n=E({src:n,async:!0,type:"module"},i),(i=Kn.get(d))&&Nm(n,i),m=o.createElement("script"),xt(m),Jt(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(d,m))}}function tv(n,i,o,u){var d=(d=Oe.current)?ih(d):null;if(!d)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=oo(o.href),o=Tr(d).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=oo(o.href);var m=Tr(d).hoistableStyles,v=m.get(n);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,v),(m=d.querySelector(Jl(n)))&&!m._p&&(v.instance=m,v.state.loading=5),Kn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Kn.set(n,o),m||SA(d,n,o,v.state))),i&&u===null)throw Error(s(528,""));return v}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=lo(o),o=Tr(d).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function oo(n){return'href="'+mn(n)+'"'}function Jl(n){return'link[rel="stylesheet"]['+n+"]"}function nv(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function SA(n,i,o,u){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=n.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Jt(i,"link",o),xt(i),n.head.appendChild(i))}function lo(n){return'[src="'+mn(n)+'"]'}function Wl(n){return"script[async]"+n}function rv(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=n.querySelector('style[data-href~="'+mn(o.href)+'"]');if(u)return i.instance=u,xt(u),u;var d=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),xt(u),Jt(u,"style",d),ah(u,o.precedence,n),i.instance=u;case"stylesheet":d=oo(o.href);var m=n.querySelector(Jl(d));if(m)return i.state.loading|=4,i.instance=m,xt(m),m;u=nv(o),(d=Kn.get(d))&&Im(u,d),m=(n.ownerDocument||n).createElement("link"),xt(m);var v=m;return v._p=new Promise(function(T,O){v.onload=T,v.onerror=O}),Jt(m,"link",u),i.state.loading|=4,ah(m,o.precedence,n),i.instance=m;case"script":return m=lo(o.src),(d=n.querySelector(Wl(m)))?(i.instance=d,xt(d),d):(u=o,(d=Kn.get(m))&&(u=E({},o),Nm(u,d)),n=n.ownerDocument||n,d=n.createElement("script"),xt(d),Jt(d,"link",u),n.head.appendChild(d),i.instance=d);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,ah(u,o.precedence,n));return i.instance}function ah(n,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,m=d,v=0;v<u.length;v++){var T=u[v];if(T.dataset.precedence===i)m=T;else if(m!==d)break}m?m.parentNode.insertBefore(n,m.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function Im(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Nm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var oh=null;function sv(n,i,o){if(oh===null){var u=new Map,d=oh=new Map;d.set(o,u)}else d=oh,u=d.get(o),u||(u=new Map,d.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),d=0;d<o.length;d++){var m=o[d];if(!(m[wr]||m[Rt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(i)||"";v=n+v;var T=u.get(v);T?T.push(m):u.set(v,[m])}}return u}function iv(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function AA(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function av(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function RA(n,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var d=oo(u.href),m=i.querySelector(Jl(d));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=lh.bind(n),i.then(n,n)),o.state.loading|=4,o.instance=m,xt(m);return}m=i.ownerDocument||i,u=nv(u),(d=Kn.get(d))&&Im(u,d),m=m.createElement("link"),xt(m);var v=m;v._p=new Promise(function(T,O){v.onload=T,v.onerror=O}),Jt(m,"link",u),o.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=lh.bind(n),i.addEventListener("load",o),i.addEventListener("error",o))}}var Om=0;function xA(n,i){return n.stylesheets&&n.count===0&&ch(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&ch(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+i);0<n.imgBytes&&Om===0&&(Om=62500*oA());var d=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&ch(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>Om?50:800)+i);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(d)}}:null}function lh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ch(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var uh=null;function ch(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,uh=new Map,i.forEach(CA,n),uh=null,lh.call(n))}function CA(n,i){if(!(i.state.loading&4)){var o=uh.get(n);if(o)var u=o.get(null);else{o=new Map,uh.set(n,o);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var v=d[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),u=v)}u&&o.set(null,u)}d=i.instance,v=d.getAttribute("data-precedence"),m=o.get(v)||u,m===u&&o.set(null,d),o.set(v,d),this.count++,u=lh.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),m?m.parentNode.insertBefore(d,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),i.state.loading|=4}}var Zl={$$typeof:G,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function IA(n,i,o,u,d,m,v,T,O){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vr(0),this.hiddenUpdates=vr(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function ov(n,i,o,u,d,m,v,T,O,$,J,ee){return n=new IA(n,i,o,v,O,$,J,ee,T),i=1,m===!0&&(i|=24),m=An(3,null,null,i),n.current=m,m.stateNode=n,i=cf(),i.refCount++,n.pooledCache=i,i.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:i},mf(m),n}function lv(n){return n?(n=La,n):La}function uv(n,i,o,u,d,m){d=lv(d),u.context===null?u.context=d:u.pendingContext=d,u=Ps(i),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=Ms(n,u,i),o!==null&&(bn(o,n,i),Ol(o,n,i))}function cv(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function km(n,i){cv(n,i),(n=n.alternate)&&cv(n,i)}function hv(n){if(n.tag===13||n.tag===31){var i=zi(n,67108864);i!==null&&bn(i,n,67108864),km(n,67108864)}}function dv(n){if(n.tag===13||n.tag===31){var i=Nn();i=Ci(i);var o=zi(n,i);o!==null&&bn(o,n,i),km(n,i)}}var hh=!0;function NA(n,i,o,u){var d=X.T;X.T=null;var m=ae.p;try{ae.p=2,Dm(n,i,o,u)}finally{ae.p=m,X.T=d}}function OA(n,i,o,u){var d=X.T;X.T=null;var m=ae.p;try{ae.p=8,Dm(n,i,o,u)}finally{ae.p=m,X.T=d}}function Dm(n,i,o,u){if(hh){var d=jm(u);if(d===null)vm(n,i,u,dh,o),mv(n,u);else if(DA(d,n,i,o,u))u.stopPropagation();else if(mv(n,u),i&4&&-1<kA.indexOf(n)){for(;d!==null;){var m=Mn(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=yr(m.pendingLanes);if(v!==0){var T=m;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var O=1<<31-_t(v);T.entanglements[1]|=O,v&=~O}Mr(m),(Qe&6)===0&&(Qc=cn()+500,Kl(0))}}break;case 31:case 13:T=zi(m,2),T!==null&&bn(T,m,2),Xc(),km(m,2)}if(m=jm(u),m===null&&vm(n,i,u,dh,o),m===d)break;d=m}d!==null&&u.stopPropagation()}else vm(n,i,u,null,o)}}function jm(n){return n=Vn(n),Pm(n)}var dh=null;function Pm(n){if(dh=null,n=Er(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=c(i),n!==null)return n;n=null}else if(o===31){if(n=f(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return dh=n,null}function fv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Si()){case nl:return 2;case rl:return 8;case bs:case zd:return 32;case $u:return 268435456;default:return 32}default:return 32}}var Mm=!1,Ks=null,Qs=null,Ys=null,eu=new Map,tu=new Map,Xs=[],kA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mv(n,i){switch(n){case"focusin":case"focusout":Ks=null;break;case"dragenter":case"dragleave":Qs=null;break;case"mouseover":case"mouseout":Ys=null;break;case"pointerover":case"pointerout":eu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":tu.delete(i.pointerId)}}function nu(n,i,o,u,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[d]},i!==null&&(i=Mn(i),i!==null&&hv(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function DA(n,i,o,u,d){switch(i){case"focusin":return Ks=nu(Ks,n,i,o,u,d),!0;case"dragenter":return Qs=nu(Qs,n,i,o,u,d),!0;case"mouseover":return Ys=nu(Ys,n,i,o,u,d),!0;case"pointerover":var m=d.pointerId;return eu.set(m,nu(eu.get(m)||null,n,i,o,u,d)),!0;case"gotpointercapture":return m=d.pointerId,tu.set(m,nu(tu.get(m)||null,n,i,o,u,d)),!0}return!1}function gv(n){var i=Er(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){n.blockedOn=i,Wn(n.priority,function(){dv(o)});return}}else if(i===31){if(i=f(o),i!==null){n.blockedOn=i,Wn(n.priority,function(){dv(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function fh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=jm(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);gl=u,o.target.dispatchEvent(u),gl=null}else return i=Mn(o),i!==null&&hv(i),n.blockedOn=o,!1;i.shift()}return!0}function pv(n,i,o){fh(n)&&o.delete(i)}function jA(){Mm=!1,Ks!==null&&fh(Ks)&&(Ks=null),Qs!==null&&fh(Qs)&&(Qs=null),Ys!==null&&fh(Ys)&&(Ys=null),eu.forEach(pv),tu.forEach(pv)}function mh(n,i){n.blockedOn===i&&(n.blockedOn=null,Mm||(Mm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,jA)))}var gh=null;function yv(n){gh!==n&&(gh=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){gh===n&&(gh=null);for(var i=0;i<n.length;i+=3){var o=n[i],u=n[i+1],d=n[i+2];if(typeof u!="function"){if(Pm(u||o)===null)continue;break}var m=Mn(o);m!==null&&(n.splice(i,3),i-=3,jf(m,{pending:!0,data:d,method:o.method,action:u},u,d))}}))}function uo(n){function i(O){return mh(O,n)}Ks!==null&&mh(Ks,n),Qs!==null&&mh(Qs,n),Ys!==null&&mh(Ys,n),eu.forEach(i),tu.forEach(i);for(var o=0;o<Xs.length;o++){var u=Xs[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Xs.length&&(o=Xs[0],o.blockedOn===null);)gv(o),o.blockedOn===null&&Xs.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var d=o[u],m=o[u+1],v=d[qt]||null;if(typeof m=="function")v||yv(o);else if(v){var T=null;if(m&&m.hasAttribute("formAction")){if(d=m,v=m[qt]||null)T=v.formAction;else if(Pm(d)!==null)continue}else T=v.action;typeof T=="function"?o[u+1]=T:(o.splice(u,3),u-=3),yv(o)}}}function _v(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return d=v})},focusReset:"manual",scroll:"manual"})}function i(){d!==null&&(d(),d=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,d=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),d!==null&&(d(),d=null)}}}function Vm(n){this._internalRoot=n}ph.prototype.render=Vm.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var o=i.current,u=Nn();uv(o,u,n,i,null,null)},ph.prototype.unmount=Vm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;uv(n.current,2,null,n,null,null),Xc(),i[br]=null}};function ph(n){this._internalRoot=n}ph.prototype.unstable_scheduleHydration=function(n){if(n){var i=Xu();n={blockedOn:null,target:n,priority:i};for(var o=0;o<Xs.length&&i!==0&&i<Xs[o].priority;o++);Xs.splice(o,0,n),o===0&&gv(n)}};var vv=e.version;if(vv!=="19.2.0")throw Error(s(527,vv,"19.2.0"));ae.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=p(i),n=n!==null?b(n):null,n=n===null?null:n.stateNode,n};var PA={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yh.isDisabled&&yh.supportsFiber)try{Xn=yh.inject(PA),Gt=yh}catch{}}return su.createRoot=function(n,i){if(!a(n))throw Error(s(299));var o=!1,u="",d=R_,m=x_,v=C_;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=ov(n,1,!1,null,null,o,u,null,d,m,v,_v),n[br]=i.current,_m(n),new Vm(i)},su.hydrateRoot=function(n,i,o){if(!a(n))throw Error(s(299));var u=!1,d="",m=R_,v=x_,T=C_,O=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.formState!==void 0&&(O=o.formState)),i=ov(n,1,!0,i,o??null,u,d,O,m,v,T,_v),i.context=lv(null),o=i.current,u=Nn(),u=Ci(u),d=Ps(u),d.callback=null,Ms(o,d,u),o=u,i.current.lanes=o,Ri(i,o),Mr(i),n[br]=i.current,_m(n),new ph(i)},su.version="19.2.0",su}var Iv;function KA(){if(Iv)return zm.exports;Iv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),zm.exports=GA(),zm.exports}var QA=KA();const YA=tp(QA),Fw=me.createContext(void 0),Gw=({children:r})=>{const[e,t]=me.useState("noel");me.useEffect(()=>{const l=localStorage.getItem("theme")||"noel";t(l),document.documentElement.setAttribute("data-theme",l)},[]);const s=a=>{t(a),document.documentElement.setAttribute("data-theme",a),localStorage.setItem("theme",a)};return _.jsx(Fw.Provider,{value:{theme:e,setTheme:s},children:r})},tn=()=>{const r=me.useContext(Fw);if(r===void 0)throw new Error("useTheme must be used within a ThemeProvider");return r},XA=r=>{const{theme:e}=tn();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/8PDn1wfM/favicon.png",alt:"Online Exam Icon",...r}):e==="noel"?_.jsx("img",{src:"/assets/img/gift3.png",alt:"Gift Icon",...r,className:"h-16 w-16 object-contain"}):_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:_.jsx("path",{fillRule:"evenodd",d:"M3.75 4.5a3 3 0 00-3 3v10.5a3 3 0 003 3h16.5a3 3 0 003-3V7.5a3 3 0 00-3-3H3.75zm.75 4.5a.75.75 0 01.75-.75h13.5a.75.75 0 010 1.5H5.25a.75.75 0 01-.75-.75zm0 3.75a.75.75 0 01.75-.75h6a.75.75 0 010 1.5h-6a.75.75 0 01-.75-.75zm0 2.25a.75.75 0 01.75-.75h3a.75.75 0 010 1.5h-3a.75.75 0 01-.75-.75z",clipRule:"evenodd"})})},JA=r=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:[_.jsx("path",{d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm.25 4.5a.75.75 0 00-1.5 0v5.337a2.25 2.25 0 00-1.5 2.063v.75a.75.75 0 001.5 0v-.75a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 001.5 0v-.75a2.25 2.25 0 00-1.5-2.063V6.75z"}),_.jsx("path",{d:"M6.163 15.25a.75.75 0 011.06-1.06l1.25 1.25a.75.75 0 01-1.06 1.06l-1.25-1.25zm10.617 0a.75.75 0 011.06 1.06l-1.25 1.25a.75.75 0 01-1.06 1.06l1.25-1.25z"})]}),rp=r=>{const{theme:e}=tn();return e==="noel"?_.jsx("img",{src:"/assets/img/ball.png",alt:"Check",...r,className:`${r.className} object-contain`}):_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:_.jsx("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z",clipRule:"evenodd"})})},sp=r=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:_.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z",clipRule:"evenodd"})}),WA=r=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:_.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 6a.75.75 0 00-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 000-1.5h-3.75V6z",clipRule:"evenodd"})}),Ho=r=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:_.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-4.28 9.22a.75.75 0 000 1.06l3 3a.75.75 0 101.06-1.06L10.81 12l1.47-1.47a.75.75 0 10-1.06-1.06l-3 3z",clipRule:"evenodd"})}),ZA=r=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:_.jsx("path",{fillRule:"evenodd",d:"M16.28 11.47a.75.75 0 010 1.06l-3 3a.75.75 0 01-1.06-1.06L14.44 12l-2.22-2.22a.75.75 0 011.06-1.06l3 3z",clipRule:"evenodd"})}),e2=r=>{const{theme:e}=tn();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/J0JwWn5p/Mattahan-Buuf-One-of-those-ugly-pens-you-just-find-lying-around-128.png",alt:"Pen Icon",...r}):e==="noel"?_.jsx("img",{src:"/assets/img/celebrate.png",alt:"Santa",...r,className:`${r.className} object-contain`}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:[_.jsx("path",{d:"M12.75 12.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"}),_.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM9 12a3 3 0 116 0 3 3 0 01-6 0zm-2.121 4.212a.75.75 0 01.688-1.228 5.253 5.253 0 018.866 0 .75.75 0 11-.688 1.228 3.753 3.753 0 00-7.49 0z",clipRule:"evenodd"})]})},t2=r=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:_.jsx("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-4.5a.75.75 0 000 1.5h6a.75.75 0 00.75-.75V4.5a.75.75 0 00-1.5 0v2.253a9 9 0 00-15.06 4.042.75.75 0 00.75.75h1.5a.75.75 0 00.75-.75zM19.245 13.941a7.5 7.5 0 01-12.548 3.364l-1.903-1.903h4.5a.75.75 0 000-1.5h-6a.75.75 0 00-.75.75v6a.75.75 0 001.5 0v-2.253a9 9 0 0015.06-4.042.75.75 0 00-.75-.75h-1.5a.75.75 0 00-.75.75z",clipRule:"evenodd"})}),vu=r=>{const{theme:e}=tn();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/xjbVmxDW/Oxygen-Icons-org-Oxygen-Categories-applications-education-university-256.png",alt:"Graduation Cap Icon",...r}):e==="noel"?_.jsx("img",{src:"/assets/img/home.png",alt:"Home Icon",...r,className:`${r.className} object-contain`}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:[_.jsx("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm0 2a8 8 0 100 16 8 8 0 000-16zm0 3a5 5 0 110 10 5 5 0 010-10zm0 2a3 3 0 100 6 3 3 0 000-6z"}),_.jsx("path",{d:"M12 3v2m0 14v2M3 12h2m14 0h-2m-8-8L6.414 5.414m11.172 11.172L16.243 15.12m0-9.706l-1.121 1.121M5.414 17.586L6.536 16.464"})]})},fg=r=>{const{theme:e}=tn();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/66GxZjxN/school-114359.png",alt:"School Bag Icon",...r}):e==="noel"?_.jsx("img",{src:"/assets/img/bell.png",alt:"Bell Icon",...r,className:`${r.className} object-contain`}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:[_.jsx("path",{d:"M12 2a1 1 0 011 1v7.683a4.502 4.502 0 012.722 2.054 3 3 0 01-1.33 3.963 3.003 3.003 0 01-4.783-3.963A4.502 4.502 0 0111 10.683V3a1 1 0 011-1zm-3.5 10a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm7 0a1.5 1.5 0 100 3 1.5 1.5 0 000-3z"}),_.jsx("path",{d:"M12 22a8.956 8.956 0 01-6-2.583V18h12v1.417A8.956 8.956 0 0112 22z"})]})},n2=r=>{const{theme:e}=tn();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/h47RmyWN/Mattahan-Buuf-They-reply-technosorcery-128.png",alt:"Wrench Icon",...r}):e==="noel"?_.jsx("img",{src:"/assets/img/gift4.png",alt:"Gift Icon",...r,className:`${r.className} object-contain`}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:[_.jsx("path",{fillRule:"evenodd",d:"M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.981A10.503 10.503 0 0112 21a10.5 10.5 0 01-10.5-10.5c0-4.368 2.667-8.162 6.43-9.742a.75.75 0 01.819.162z",clipRule:"evenodd"}),_.jsx("path",{d:"M12.75 9a.75.75 0 00-1.5 0v2.25H9a.75.75 0 000 1.5h2.25V15a.75.75 0 001.5 0v-2.25H15a.75.75 0 000-1.5h-2.25V9z"})]})},r2=r=>{const{theme:e}=tn();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/zvWm1BFk/book-512x512-35977.png",alt:"Book Icon",...r}):e==="noel"?_.jsx("img",{src:"/assets/img/hat.png",alt:"Hat Icon",...r,className:`${r.className} object-contain`}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:[_.jsx("path",{d:"M12 2L3 8v2h18V8l-9-6zm-1.5 10a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm3 0a1.5 1.5 0 100 3 1.5 1.5 0 000-3z"}),_.jsx("path",{d:"M4 14v6h16v-6H4zm6 2h4v2h-4v-2z"})]})},Nv=r=>{const{theme:e}=tn();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/2yvpf67d/Mattahan-Buuf-A-Proper-Journal-Icon-128.png",alt:"Journal Icon",...r}):e==="noel"?_.jsx("img",{src:"/assets/img/gift5.png",alt:"Gift Icon",...r,className:`${r.className} object-contain`}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:[_.jsx("path",{fillRule:"evenodd",d:"M12 2a10 10 0 100 20 10 10 0 000-20zM4 12a8 8 0 1116 0 8 8 0 01-16 0z",clipRule:"evenodd"}),_.jsx("path",{d:"M16.95 7.05l-1.414 1.414-2.122-2.122 1.414-1.414 2.122 2.122zm-9.9 9.9l1.414-1.414 2.122 2.122-1.414 1.414-2.122-2.122zm9.9 0l-1.414-1.414-2.122 2.122 1.414 1.414 2.122-2.122zm-9.9-9.9l1.414 1.414-2.122 2.122L5.636 9.172l2.122-2.122z"})]})},Ov=r=>{const{theme:e}=tn();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/2yvpf67d/Mattahan-Buuf-A-Proper-Journal-Icon-128.png",alt:"Journal Icon",...r}):e==="noel"?_.jsx("img",{src:"/assets/img/star-gold.png",alt:"Star Icon",...r,className:`${r.className} object-contain`}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:[_.jsx("path",{fillRule:"evenodd",d:"M8.25 2.25A.75.75 0 019 3v.257a3.75 3.75 0 013 0V3a.75.75 0 011.5 0v.257a3.75 3.75 0 013 0V3a.75.75 0 01.75.75h-.008v.016c.361.32.622.754.74 1.232A23.953 23.953 0 0112 6c-2.305 0-4.52-.42-6.502-1.195a2.5 2.5 0 01.74-1.232H6a.75.75 0 01.75-.75h1.5zm-2.784 4.542a25.474 25.474 0 0013.068 0 .75.75 0 01.443.923 23.92 23.92 0 01-13.954 0 .75.75 0 01.443-.923zM8.25 10.5a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5a.75.75 0 01.75-.75zm3.75 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5a.75.75 0 01.75-.75zm3.75 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5a.75.75 0 01.75-.75z",clipRule:"evenodd"}),_.jsx("path",{d:"M4.145 9.421a.75.75 0 01.558-.923 25.483 25.483 0 0114.594 0 .75.75 0 01.558.923l-.36.99a25.01 25.01 0 01-14.832 0l-.36-.99z"}),_.jsx("path",{fillRule:"evenodd",d:"M3 15.75A2.25 2.25 0 015.25 13.5h13.5A2.25 2.25 0 0121 15.75v3A2.25 2.25 0 0118.75 21H5.25A2.25 2.25 0 013 18.75v-3z",clipRule:"evenodd"})]})},Kw=r=>{const{theme:e}=tn();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/xjbVmxDW/Oxygen-Icons-org-Oxygen-Categories-applications-education-university-256.png",alt:"Graduation Cap Icon",...r}):e==="noel"?_.jsx("img",{src:"/assets/img/star-gold.png",alt:"Gold Star Icon",...r,className:`${r.className} object-contain`}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:[_.jsx("path",{fillRule:"evenodd",d:"M11.25 4.5A.75.75 0 0112 5.25v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0111.25 4.5zM12.75 6a.75.75 0 00-1.5 0v1.5a.75.75 0 001.5 0V6zM11.25 7.5A.75.75 0 0112 8.25v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0111.25 7.5zM12.75 9a.75.75 0 00-1.5 0v1.5a.75.75 0 001.5 0V9z",clipRule:"evenodd"}),_.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM6.262 6.072a8.25 8.25 0 1011.476 11.476A8.25 8.25 0 006.262 6.072zM12 18.75a.75.75 0 01-.75-.75V15a.75.75 0 011.5 0v3a.75.75 0 01-.75.75z",clipRule:"evenodd"}),_.jsx("path",{d:"M14.25 12a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})]})},ip=r=>{const{theme:e}=tn();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/FFJXSWXv/study-learning-knowledge-education-book-notebook-icon-256768.png",alt:"Book and Glasses Icon",...r}):e==="noel"?_.jsx("img",{src:"/assets/img/gift1.png",alt:"Gift Icon",...r,className:`${r.className} object-contain`}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:[_.jsx("path",{d:"M11.25 4.533A9.708 9.708 0 006 3.75c-1.052 0-2.062.18-3 .512V17.25a8.987 8.987 0 013.75-.82V9.75a.75.75 0 011.5 0v7.5a.75.75 0 01-1.5 0V15a6.726 6.726 0 00-3-.585V18.75C3.393 18.932 3.69 19.1 4 19.29c2.023.784 4.18 1.093 6.364 1.294a.75.75 0 00.872-.725V4.534z"}),_.jsx("path",{d:"M12.75 4.533V19.86a.75.75 0 00.872.725 49.33 49.33 0 006.364-1.294c.31-.19.607-.358.914-.54V5.25c-1.084-.308-2.18-.46-3.25-.46-1.637 0-3.235.32-4.75.922V4.534z"})]})},s2=r=>{const{theme:e}=tn();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/kG8rd4vv/Limpa-Curriculum-Vitae-Education-256.png",alt:"Blackboard Icon",...r}):e==="noel"?_.jsx("img",{src:"/assets/img/gift2.png",alt:"Gift Icon",...r,className:`${r.className} object-contain`}):_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:_.jsx("path",{fillRule:"evenodd",d:"M2.25 6a3 3 0 013-3h13.5a3 3 0 013 3v12a3 3 0 01-3-3H5.25a3 3 0 01-3-3V6zm3.75 3a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H7.5a.75.75 0 01-.75-.75zM7.5 12a.75.75 0 000 1.5h6a.75.75 0 000-1.5h-6z",clipRule:"evenodd"})})},i2=[{name:"light",label:"Sng",color:"bg-white"},{name:"dark",label:"Ti",color:"bg-slate-900"},{name:"noel",label:"Ging Sinh",color:"bg-[#8B0000]"},{name:"modern",label:"Hin i",color:"bg-indigo-600"},{name:"classic",label:"C in",color:"bg-[#6F6049]"},{name:"sunrise",label:"Bnh Minh",color:"bg-orange-500"},{name:"tri-an",label:"Tri n",color:"bg-red-400"}],a2=()=>{const[r,e]=me.useState(!1),{theme:t,setTheme:s}=tn(),a=l=>{s(l),e(!1)};return _.jsxs("div",{className:"relative",children:[r&&_.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-40 rounded-lg border border-border bg-card p-2 shadow-2xl flex flex-col gap-1 animate-slide-in-right",children:i2.map(l=>_.jsxs("button",{onClick:()=>a(l.name),className:`w-full text-left px-3 py-2 text-sm font-semibold rounded-md flex items-center gap-3 transition-colors ${t===l.name?"bg-primary/20 text-primary":"text-card-foreground hover:bg-secondary"}`,children:[_.jsx("span",{className:`w-4 h-4 rounded-full ${l.color} border border-white/20`}),l.label]},l.name))}),_.jsx("button",{onClick:()=>e(!r),className:"flex h-10 w-10 items-center justify-center rounded-lg bg-secondary text-secondary-foreground shadow-sm transition-colors hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring","aria-label":"Change theme",children:_.jsx(JA,{className:"h-6 w-6"})})]})},o2=()=>{const r=["gift1.png","bell.png","star-gold.png","ball.png","gift2.png","gift3.png","gift4.png","gift5.png"],{theme:e}=tn();return e!=="noel"?null:_.jsxs(_.Fragment,{children:[_.jsx("style",{dangerouslySetInnerHTML:{__html:`
        /* === PHN 5: HIU NG TUYT & QU RI === */
        .snowflakes {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 9999;
        }
        
        .snowflake {
            color: #fff;
            font-size: 1.2em;
            font-family: Arial, sans-serif;
            text-shadow: 0 0 3px rgba(255,255,255,0.8); /* Tuyt pht sng nh */
            position: fixed;
            top: -10%;
            z-index: 9999;
            user-select: none;
            cursor: default;
            animation-name: snowflakes-fall, snowflakes-shake;
            animation-timing-function: linear, ease-in-out;
            animation-iteration-count: infinite, infinite;
            animation-play-state: running, running;
        }

        .snowflake-img img {
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.3));
            width: 30px; 
            height: auto;
            opacity: 0.9;
        }

        @keyframes snowflakes-fall {
            0% { top: -10%; }
            100% { top: 100%; }
        }
        @keyframes snowflakes-shake {
            0% { transform: translateX(0px) rotate(0deg); }
            50% { transform: translateX(80px) rotate(180deg); }
            100% { transform: translateX(0px) rotate(360deg); }
        }

        /* Cu hnh ri ngu nhin */
        .snowflake:nth-of-type(1) { left: 1%; animation-duration: 12s, 4s; animation-delay: 0s, 0s; }
        .snowflake:nth-of-type(2) { left: 5%; animation-duration: 15s, 6s; animation-delay: 1s, 1s; }
        .snowflake:nth-of-type(3) { left: 10%; animation-duration: 10s, 3s; animation-delay: 2s, 0.5s; }
        .snowflake:nth-of-type(4) { left: 15%; animation-duration: 18s, 5s; animation-delay: 4s, 2s; }
        .snowflake:nth-of-type(5) { left: 20%; animation-duration: 11s, 4s; animation-delay: 2s, 2s; }
        .snowflake:nth-of-type(6) { left: 25%; animation-duration: 14s, 7s; animation-delay: 6s, 3s; }
        .snowflake:nth-of-type(7) { left: 30%; animation-duration: 16s, 5s; animation-delay: 3s, 2s; }
        .snowflake:nth-of-type(8) { left: 35%; animation-duration: 13s, 4s; animation-delay: 1s, 1s; }
        .snowflake:nth-of-type(9) { left: 40%; animation-duration: 17s, 6s; animation-delay: 0s, 0s; }
        .snowflake:nth-of-type(10) { left: 45%; animation-duration: 9s, 3s; animation-delay: 5s, 1.5s; }
        .snowflake:nth-of-type(11) { left: 50%; animation-duration: 14s, 5s; animation-delay: 2s, 3s; }
        .snowflake:nth-of-type(12) { left: 55%; animation-duration: 11s, 4s; animation-delay: 4s, 1s; }
        .snowflake:nth-of-type(13) { left: 60%; animation-duration: 19s, 7s; animation-delay: 1s, 2s; }
        .snowflake:nth-of-type(14) { left: 65%; animation-duration: 12s, 3s; animation-delay: 3s, 0s; }
        .snowflake:nth-of-type(15) { left: 70%; animation-duration: 15s, 6s; animation-delay: 5s, 4s; }
        .snowflake:nth-of-type(16) { left: 75%; animation-duration: 10s, 4s; animation-delay: 0s, 2s; }
        .snowflake:nth-of-type(17) { left: 80%; animation-duration: 16s, 5s; animation-delay: 2s, 1s; }
        .snowflake:nth-of-type(18) { left: 85%; animation-duration: 13s, 4s; animation-delay: 4s, 3s; }
        .snowflake:nth-of-type(19) { left: 90%; animation-duration: 18s, 6s; animation-delay: 1s, 2s; }
        .snowflake:nth-of-type(20) { left: 95%; animation-duration: 11s, 3s; animation-delay: 3s, 0s; }
        
        .snowflake:nth-of-type(21) { left: 2%; animation-duration: 13s, 5s; animation-delay: 5s, 1s; }
        .snowflake:nth-of-type(22) { left: 8%; animation-duration: 10s, 3s; animation-delay: 2s, 4s; }
        .snowflake:nth-of-type(23) { left: 12%; animation-duration: 16s, 6s; animation-delay: 1s, 2s; }
        .snowflake:nth-of-type(24) { left: 18%; animation-duration: 12s, 4s; animation-delay: 6s, 0s; }
        .snowflake:nth-of-type(25) { left: 22%; animation-duration: 14s, 5s; animation-delay: 0s, 3s; }
        .snowflake:nth-of-type(26) { left: 28%; animation-duration: 11s, 3s; animation-delay: 4s, 2s; }
        .snowflake:nth-of-type(27) { left: 32%; animation-duration: 19s, 7s; animation-delay: 2s, 1s; }
        .snowflake:nth-of-type(28) { left: 38%; animation-duration: 15s, 6s; animation-delay: 5s, 5s; }
        .snowflake:nth-of-type(29) { left: 42%; animation-duration: 12s, 4s; animation-delay: 1s, 0s; }
        .snowflake:nth-of-type(30) { left: 48%; animation-duration: 17s, 5s; animation-delay: 3s, 2s; }
        .snowflake:nth-of-type(31) { left: 52%; animation-duration: 9s, 3s; animation-delay: 0s, 3s; }
        .snowflake:nth-of-type(32) { left: 58%; animation-duration: 14s, 6s; animation-delay: 4s, 1s; }
        .snowflake:nth-of-type(33) { left: 62%; animation-duration: 11s, 4s; animation-delay: 2s, 4s; }
        .snowflake:nth-of-type(34) { left: 68%; animation-duration: 16s, 5s; animation-delay: 6s, 0s; }
        .snowflake:nth-of-type(35) { left: 72%; animation-duration: 13s, 3s; animation-delay: 1s, 2s; }
        .snowflake:nth-of-type(36) { left: 78%; animation-duration: 18s, 7s; animation-delay: 5s, 1s; }
        .snowflake:nth-of-type(37) { left: 82%; animation-duration: 10s, 4s; animation-delay: 2s, 3s; }
        .snowflake:nth-of-type(38) { left: 88%; animation-duration: 15s, 6s; animation-delay: 4s, 0s; }
        .snowflake:nth-of-type(39) { left: 92%; animation-duration: 12s, 5s; animation-delay: 0s, 2s; }
        .snowflake:nth-of-type(40) { left: 98%; animation-duration: 17s, 4s; animation-delay: 3s, 5s; }

        .snowflake:nth-child(odd) { animation-direction: normal; }
        .snowflake:nth-child(even) { animation-direction: alternate; }

        @media (max-width: 768px) {
            .snowflake { font-size: 1em; }
            .snowflake-img img { width: 20px; }
        }
      `}}),_.jsxs("div",{className:"snowflakes","aria-hidden":"true",children:[Array.from({length:100}).map((t,s)=>_.jsxs("div",{className:"snowflake",children:[["","",""][s%3]," "]},`snow-${s}`)),Array.from({length:8}).map((t,s)=>{const a=r[s%r.length];return _.jsx("div",{className:"snowflake snowflake-img",children:_.jsx("img",{src:`/assets/img/${a}`,alt:"",style:{width:"25px",height:"auto"}})},`img-${s}`)})]})]})},l2=()=>{};var kv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let a=r.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},u2=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const a=r[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[t++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[t++],c=r[t++],f=r[t++],g=((a&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],c=r[t++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},Yw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<r.length;a+=3){const l=r[a],c=a+1<r.length,f=c?r[a+1]:0,g=a+2<r.length,p=g?r[a+2]:0,b=l>>2,E=(l&3)<<4|f>>4;let S=(f&15)<<2|p>>6,R=p&63;g||(R=64,c||(S=64)),s.push(t[b],t[E],t[S],t[R])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Qw(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):u2(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<r.length;){const l=t[r.charAt(a++)],f=a<r.length?t[r.charAt(a)]:0;++a;const p=a<r.length?t[r.charAt(a)]:64;++a;const E=a<r.length?t[r.charAt(a)]:64;if(++a,l==null||f==null||p==null||E==null)throw new c2;const S=l<<2|f>>4;if(s.push(S),p!==64){const R=f<<4&240|p>>2;if(s.push(R),E!==64){const k=p<<6&192|E;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class c2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const h2=function(r){const e=Qw(r);return Yw.encodeByteArray(e,!0)},Fh=function(r){return h2(r).replace(/\./g,"")},Xw=function(r){try{return Yw.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=()=>d2().__FIREBASE_DEFAULTS__,m2=()=>{if(typeof process>"u"||typeof kv>"u")return;const r=kv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},g2=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Xw(r[1]);return e&&JSON.parse(e)},gd=()=>{try{return l2()||f2()||m2()||g2()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Jw=r=>{var e,t;return(t=(e=gd())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},Ww=r=>{const e=Jw(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Zw=()=>{var r;return(r=gd())==null?void 0:r.config},eE=r=>{var e;return(e=gd())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let p2=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ap(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Fh(JSON.stringify(t)),Fh(JSON.stringify(c)),""].join(".")}const hu={};function y2(){const r={prod:[],emulator:[]};for(const e of Object.keys(hu))hu[e]?r.emulator.push(e):r.prod.push(e);return r}function _2(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Dv=!1;function op(r,e){if(typeof window>"u"||typeof document>"u"||!ma(window.location.host)||hu[r]===e||hu[r]||Dv)return;hu[r]=e;function t(S){return`__firebase__banner__${S}`}const s="__firebase__banner",l=y2().prod.length>0;function c(){const S=document.getElementById(s);S&&S.remove()}function f(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,R){S.setAttribute("width","24"),S.setAttribute("id",R),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Dv=!0,c()},S}function b(S,R){S.setAttribute("id",R),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=_2(s),R=t("text"),k=document.getElementById(R)||document.createElement("span"),j=t("learnmore"),D=document.getElementById(j)||document.createElement("a"),q=t("preprendIcon"),Y=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const G=S.element;f(G),b(D,j);const ne=p();g(Y,q),G.append(Y,k,D,ne),document.body.appendChild(G)}l?(k.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function v2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function b2(){var e;const r=(e=gd())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function w2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function E2(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function T2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function S2(){const r=un();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function A2(){return!b2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function R2(){try{return typeof indexedDB=="object"}catch{return!1}}function x2(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2="FirebaseError";class Kr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=C2,Object.setPrototypeOf(this,Kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Du.prototype.create)}}class Du{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?I2(l,s):"Error",f=`${this.serviceName}: ${c} (${a}).`;return new Kr(a,f,s)}}function I2(r,e){return r.replace(N2,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const N2=/\{\$([^}]+)}/g;function O2(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ca(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const l=r[a],c=e[a];if(jv(l)&&jv(c)){if(!ca(l,c))return!1}else if(l!==c)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function jv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function iu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,l]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function au(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function k2(r,e){const t=new D2(r,e);return t.subscribe.bind(t)}class D2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");j2(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=$m),a.error===void 0&&(a.error=$m),a.complete===void 0&&(a.complete=$m);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function j2(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function $m(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(r){return r&&r._delegate?r._delegate:r}class di{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new p2;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(V2(e))try{this.getOrInitializeService({instanceIdentifier:ta})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=ta){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ta){return this.instances.has(e)}getOptions(e=ta){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&c.resolve(a)}return a}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:M2(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ta){return this.component?this.component.multipleInstances?e:ta:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function M2(r){return r===ta?void 0:r}function V2(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new P2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ue||(Ue={}));const L2={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},z2=Ue.INFO,B2={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},q2=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),a=B2[e];if(a)console[a](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lp{constructor(e){this.name=e,this._logLevel=z2,this._logHandler=q2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?L2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const H2=(r,e)=>e.some(t=>r instanceof t);let Pv,Mv;function $2(){return Pv||(Pv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function F2(){return Mv||(Mv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nE=new WeakMap,mg=new WeakMap,rE=new WeakMap,Fm=new WeakMap,up=new WeakMap;function G2(r){const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",c)},l=()=>{t(li(r.result)),a()},c=()=>{s(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&nE.set(t,r)}).catch(()=>{}),up.set(e,r),e}function K2(r){if(mg.has(r))return;const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",c),r.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{s(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",c),r.addEventListener("abort",c)});mg.set(r,e)}let gg={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return mg.get(r);if(e==="objectStoreNames")return r.objectStoreNames||rE.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return li(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Q2(r){gg=r(gg)}function Y2(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Gm(this),e,...t);return rE.set(s,e.sort?e.sort():[e]),li(s)}:F2().includes(r)?function(...e){return r.apply(Gm(this),e),li(nE.get(this))}:function(...e){return li(r.apply(Gm(this),e))}}function X2(r){return typeof r=="function"?Y2(r):(r instanceof IDBTransaction&&K2(r),H2(r,$2())?new Proxy(r,gg):r)}function li(r){if(r instanceof IDBRequest)return G2(r);if(Fm.has(r))return Fm.get(r);const e=X2(r);return e!==r&&(Fm.set(r,e),up.set(e,r)),e}const Gm=r=>up.get(r);function J2(r,e,{blocked:t,upgrade:s,blocking:a,terminated:l}={}){const c=indexedDB.open(r,e),f=li(c);return s&&c.addEventListener("upgradeneeded",g=>{s(li(c.result),g.oldVersion,g.newVersion,li(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const W2=["get","getKey","getAll","getAllKeys","count"],Z2=["put","add","delete","clear"],Km=new Map;function Vv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Km.get(e))return Km.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=Z2.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||W2.includes(t)))return;const l=async function(c,...f){const g=this.transaction(c,a?"readwrite":"readonly");let p=g.store;return s&&(p=p.index(f.shift())),(await Promise.all([p[t](...f),a&&g.done]))[0]};return Km.set(e,l),l}Q2(r=>({...r,get:(e,t,s)=>Vv(e,t)||r.get(e,t,s),has:(e,t)=>!!Vv(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(tR(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function tR(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pg="@firebase/app",Uv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=new lp("@firebase/app"),nR="@firebase/app-compat",rR="@firebase/analytics-compat",sR="@firebase/analytics",iR="@firebase/app-check-compat",aR="@firebase/app-check",oR="@firebase/auth",lR="@firebase/auth-compat",uR="@firebase/database",cR="@firebase/data-connect",hR="@firebase/database-compat",dR="@firebase/functions",fR="@firebase/functions-compat",mR="@firebase/installations",gR="@firebase/installations-compat",pR="@firebase/messaging",yR="@firebase/messaging-compat",_R="@firebase/performance",vR="@firebase/performance-compat",bR="@firebase/remote-config",wR="@firebase/remote-config-compat",ER="@firebase/storage",TR="@firebase/storage-compat",SR="@firebase/firestore",AR="@firebase/ai",RR="@firebase/firestore-compat",xR="firebase",CR="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="[DEFAULT]",IR={[pg]:"fire-core",[nR]:"fire-core-compat",[sR]:"fire-analytics",[rR]:"fire-analytics-compat",[aR]:"fire-app-check",[iR]:"fire-app-check-compat",[oR]:"fire-auth",[lR]:"fire-auth-compat",[uR]:"fire-rtdb",[cR]:"fire-data-connect",[hR]:"fire-rtdb-compat",[dR]:"fire-fn",[fR]:"fire-fn-compat",[mR]:"fire-iid",[gR]:"fire-iid-compat",[pR]:"fire-fcm",[yR]:"fire-fcm-compat",[_R]:"fire-perf",[vR]:"fire-perf-compat",[bR]:"fire-rc",[wR]:"fire-rc-compat",[ER]:"fire-gcs",[TR]:"fire-gcs-compat",[SR]:"fire-fst",[RR]:"fire-fst-compat",[AR]:"fire-vertex","fire-js":"fire-js",[xR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu=new Map,NR=new Map,_g=new Map;function Lv(r,e){try{r.container.addComponent(e)}catch(t){ps.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function ha(r){const e=r.name;if(_g.has(e))return ps.debug(`There were multiple attempts to register component ${e}.`),!1;_g.set(e,r);for(const t of bu.values())Lv(t,r);for(const t of NR.values())Lv(t,r);return!0}function pd(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Qn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ui=new Du("app","Firebase",OR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new di("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ui.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=CR;function sE(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:yg,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw ui.create("bad-app-name",{appName:String(a)});if(t||(t=Zw()),!t)throw ui.create("no-options");const l=bu.get(a);if(l){if(ca(t,l.options)&&ca(s,l.config))return l;throw ui.create("duplicate-app",{appName:a})}const c=new U2(a);for(const g of _g.values())c.addComponent(g);const f=new kR(t,s,c);return bu.set(a,f),f}function yd(r=yg){const e=bu.get(r);if(!e&&r===yg&&Zw())return sE();if(!e)throw ui.create("no-app",{appName:r});return e}function DR(){return Array.from(bu.values())}function Lr(r,e,t){let s=IR[r]??r;t&&(s+=`-${t}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${s}" with version "${e}":`];a&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ps.warn(c.join(" "));return}ha(new di(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR="firebase-heartbeat-database",PR=1,wu="firebase-heartbeat-store";let Qm=null;function iE(){return Qm||(Qm=J2(jR,PR,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(wu)}catch(t){console.warn(t)}}}}).catch(r=>{throw ui.create("idb-open",{originalErrorMessage:r.message})})),Qm}async function MR(r){try{const t=(await iE()).transaction(wu),s=await t.objectStore(wu).get(aE(r));return await t.done,s}catch(e){if(e instanceof Kr)ps.warn(e.message);else{const t=ui.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ps.warn(t.message)}}}async function zv(r,e){try{const s=(await iE()).transaction(wu,"readwrite");await s.objectStore(wu).put(e,aE(r)),await s.done}catch(t){if(t instanceof Kr)ps.warn(t.message);else{const s=ui.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ps.warn(s.message)}}}function aE(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=1024,UR=30;class LR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new BR(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Bv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>UR){const c=qR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ps.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Bv(),{heartbeatsToSend:s,unsentEntries:a}=zR(this._heartbeatsCache.heartbeats),l=Fh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ps.warn(t),""}}}function Bv(){return new Date().toISOString().substring(0,10)}function zR(r,e=VR){const t=[];let s=r.slice();for(const a of r){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),qv(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),qv(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class BR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return R2()?x2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await MR(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return zv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return zv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function qv(r){return Fh(JSON.stringify({version:2,heartbeats:r})).length}function qR(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(r){ha(new di("platform-logger",e=>new eR(e),"PRIVATE")),ha(new di("heartbeat",e=>new LR(e),"PRIVATE")),Lr(pg,Uv,r),Lr(pg,Uv,"esm2020"),Lr("fire-js","")}HR("");var $R="firebase",FR="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lr($R,FR,"app");function oE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GR=oE,lE=new Du("auth","Firebase",oE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh=new lp("@firebase/auth");function KR(r,...e){Gh.logLevel<=Ue.WARN&&Gh.warn(`Auth (${ga}): ${r}`,...e)}function Mh(r,...e){Gh.logLevel<=Ue.ERROR&&Gh.error(`Auth (${ga}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(r,...e){throw cp(r,...e)}function zr(r,...e){return cp(r,...e)}function uE(r,e,t){const s={...GR(),[e]:t};return new Du("auth","Firebase",s).create(e,{appName:r.name})}function ci(r){return uE(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cp(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return lE.create(r,...e)}function Te(r,e,...t){if(!r)throw cp(e,...t)}function ms(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Mh(e),new Error(e)}function ys(r,e){r||ms(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function QR(){return Hv()==="http:"||Hv()==="https:"}function Hv(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QR()||E2()||"connection"in navigator)?navigator.onLine:!0}function XR(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,t){this.shortDelay=e,this.longDelay=t,ys(t>e,"Short delay should be less than long delay!"),this.isMobile=v2()||T2()}get(){return YR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(r,e){ys(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ZR=new Pu(3e4,6e4);function pa(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function vi(r,e,t,s,a={}){return hE(r,a,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const f=ju({key:r.config.apiKey,...c}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const p={method:e,headers:g,...l};return w2()||(p.referrerPolicy="no-referrer"),r.emulatorConfig&&ma(r.emulatorConfig.host)&&(p.credentials="include"),cE.fetch()(await dE(r,r.config.apiHost,t,f),p)})}async function hE(r,e,t){r._canInitEmulator=!1;const s={...JR,...e};try{const a=new tx(r),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw _h(r,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[g,p]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw _h(r,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw _h(r,"email-already-in-use",c);if(g==="USER_DISABLED")throw _h(r,"user-disabled",c);const b=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw uE(r,b,p);fr(r,b)}}catch(a){if(a instanceof Kr)throw a;fr(r,"network-request-failed",{message:String(a)})}}async function _d(r,e,t,s,a={}){const l=await vi(r,e,t,s,a);return"mfaPendingCredential"in l&&fr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function dE(r,e,t,s){const a=`${e}${t}?${s}`,l=r,c=l.config.emulator?hp(r.config,a):`${r.config.apiScheme}://${a}`;return WR.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function ex(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(zr(this.auth,"network-request-failed")),ZR.get())})}}function _h(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=zr(r,e,s);return a.customData._tokenResponse=t,a}function $v(r){return r!==void 0&&r.enterprise!==void 0}class nx{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ex(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function rx(r,e){return vi(r,"GET","/v2/recaptchaConfig",pa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sx(r,e){return vi(r,"POST","/v1/accounts:delete",e)}async function Kh(r,e){return vi(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ix(r,e=!1){const t=jn(r),s=await t.getIdToken(e),a=dp(s);Te(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:s,authTime:du(Ym(a.auth_time)),issuedAtTime:du(Ym(a.iat)),expirationTime:du(Ym(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Ym(r){return Number(r)*1e3}function dp(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Mh("JWT malformed, contained fewer than 3 sections"),null;try{const a=Xw(t);return a?JSON.parse(a):(Mh("Failed to decode base64 JWT payload"),null)}catch(a){return Mh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function Fv(r){const e=dp(r);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eu(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Kr&&ax(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function ax({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=du(this.lastLoginAt),this.creationTime=du(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qh(r){var E;const e=r.auth,t=await r.getIdToken(),s=await Eu(r,Kh(e,{idToken:t}));Te(s==null?void 0:s.users.length,e,"internal-error");const a=s.users[0];r._notifyReloadListener(a);const l=(E=a.providerUserInfo)!=null&&E.length?fE(a.providerUserInfo):[],c=ux(r.providerData,l),f=r.isAnonymous,g=!(r.email&&a.passwordHash)&&!(c!=null&&c.length),p=f?g:!1,b={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new bg(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(r,b)}async function lx(r){const e=jn(r);await Qh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ux(r,e){return[...r.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function fE(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cx(r,e){const t=await hE(r,{},async()=>{const s=ju({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=r.config,c=await dE(r,a,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:s};return r.emulatorConfig&&ma(r.emulatorConfig.host)&&(g.credentials="include"),cE.fetch()(c,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function hx(r,e){return vi(r,"POST","/v2/accounts:revokeToken",pa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Fv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const t=Fv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:l}=await cx(e,t);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:l}=t,c=new So;return s&&(Te(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),a&&(Te(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Te(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new So,this.toJSON())}_performRefresh(){return ms("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(r,e){Te(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class hr{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new ox(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new bg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Eu(this,this.stsTokenManager.getToken(this.auth,e));return Te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ix(this,e)}reload(){return lx(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new hr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Qh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qn(this.auth.app))return Promise.reject(ci(this.auth));const e=await this.getIdToken();return await Eu(this,sx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:R,providerData:k,stsTokenManager:j}=t;Te(E&&j,e,"internal-error");const D=So.fromJSON(this.name,j);Te(typeof E=="string",e,"internal-error"),Ws(s,e.name),Ws(a,e.name),Te(typeof S=="boolean",e,"internal-error"),Te(typeof R=="boolean",e,"internal-error"),Ws(l,e.name),Ws(c,e.name),Ws(f,e.name),Ws(g,e.name),Ws(p,e.name),Ws(b,e.name);const q=new hr({uid:E,auth:e,email:a,emailVerified:S,displayName:s,isAnonymous:R,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:D,createdAt:p,lastLoginAt:b});return k&&Array.isArray(k)&&(q.providerData=k.map(Y=>({...Y}))),g&&(q._redirectEventId=g),q}static async _fromIdTokenResponse(e,t,s=!1){const a=new So;a.updateFromServerResponse(t);const l=new hr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await Qh(l),l}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];Te(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?fE(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),f=new So;f.updateFromIdToken(s);const g=new hr({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new bg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=new Map;function gs(r){ys(r instanceof Function,"Expected a class definition");let e=Gv.get(r);return e?(ys(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Gv.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}mE.type="NONE";const Kv=mE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(r,e,t){return`firebase:${r}:${e}:${t}`}class Ao{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=Vh(this.userKey,a.apiKey,l),this.fullPersistenceKey=Vh("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Kh(this.auth,{idToken:e}).catch(()=>{});return t?hr._fromGetAccountInfoResponse(this.auth,t,e):null}return hr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Ao(gs(Kv),e,s);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||gs(Kv);const c=Vh(s,e.config.apiKey,e.name);let f=null;for(const p of t)try{const b=await p._get(c);if(b){let E;if(typeof b=="string"){const S=await Kh(e,{idToken:b}).catch(()=>{});if(!S)break;E=await hr._fromGetAccountInfoResponse(e,S,b)}else E=hr._fromJSON(e,b);p!==l&&(f=E),l=p;break}}catch{}const g=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Ao(l,e,s):(l=g[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new Ao(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_E(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bE(e))return"Blackberry";if(wE(e))return"Webos";if(pE(e))return"Safari";if((e.includes("chrome/")||yE(e))&&!e.includes("edge/"))return"Chrome";if(vE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function gE(r=un()){return/firefox\//i.test(r)}function pE(r=un()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yE(r=un()){return/crios\//i.test(r)}function _E(r=un()){return/iemobile/i.test(r)}function vE(r=un()){return/android/i.test(r)}function bE(r=un()){return/blackberry/i.test(r)}function wE(r=un()){return/webos/i.test(r)}function fp(r=un()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function dx(r=un()){var e;return fp(r)&&!!((e=window.navigator)!=null&&e.standalone)}function fx(){return S2()&&document.documentMode===10}function EE(r=un()){return fp(r)||vE(r)||wE(r)||bE(r)||/windows phone/i.test(r)||_E(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(r,e=[]){let t;switch(r){case"Browser":t=Qv(un());break;case"Worker":t=`${Qv(un())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ga}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,f)=>{try{const g=e(l);c(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gx(r,e={}){return vi(r,"GET","/v2/passwordPolicy",pa(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=6;class yx{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??px,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yv(this),this.idTokenSubscription=new Yv(this),this.beforeStateQueue=new mx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=gs(t)),this._initializationPromise=this.queue(async()=>{var s,a,l;if(!this._deleted&&(this.persistenceManager=await Ao.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Kh(this,{idToken:e}),s=await hr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Qn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!c||c===f)&&(g!=null&&g.user)&&(s=g.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Qh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qn(this.app))return Promise.reject(ci(this));const t=e?jn(e):null;return t&&Te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qn(this.app)?Promise.reject(ci(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qn(this.app)?Promise.reject(ci(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gx(this),t=new yx(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Du("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await hx(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&gs(e)||this._popupRedirectResolver;Te(t,this,"argument-error"),this.redirectPersistenceManager=await Ao.create(this,[gs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,a);return()=>{c=!0,g()}}else{const g=e.addObserver(t);return()=>{c=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(Qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&KR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function $o(r){return jn(r)}class Yv{constructor(e){this.auth=e,this.observer=null,this.addObserver=k2(t=>this.observer=t)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vx(r){vd=r}function SE(r){return vd.loadJS(r)}function bx(){return vd.recaptchaEnterpriseScript}function wx(){return vd.gapiScript}function Ex(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Tx{constructor(){this.enterprise=new Sx}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Sx{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Ax="recaptcha-enterprise",AE="NO_RECAPTCHA";class Rx{constructor(e){this.type=Ax,this.auth=$o(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,f)=>{rx(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const p=new nx(g);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,c(p.siteKey)}}).catch(g=>{f(g)})})}function a(l,c,f){const g=window.grecaptcha;$v(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(p=>{c(p)}).catch(()=>{c(AE)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Tx().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{s(this.auth).then(f=>{if(!t&&$v(window.grecaptcha))a(f,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let g=bx();g.length!==0&&(g+=f),SE(g).then(()=>{a(f,l,c)}).catch(p=>{c(p)})}}).catch(f=>{c(f)})})}}async function Xv(r,e,t,s=!1,a=!1){const l=new Rx(r);let c;if(a)c=AE;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const g=f.phoneEnrollmentInfo.phoneNumber,p=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const g=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Jv(r,e,t,s,a){var l;if((l=r._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Xv(r,e,t,t==="getOobCode");return s(r,c)}else return s(r,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Xv(r,e,t,t==="getOobCode");return s(r,f)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(r,e){const t=pd(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(ca(l,e??{}))return a;fr(a,"already-initialized")}return t.initialize({options:e})}function Cx(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(gs);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function Ix(r,e,t){const s=$o(r);Te(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=RE(e),{host:c,port:f}=Nx(e),g=f===null?"":`:${f}`,p={url:`${l}//${c}${g}/`},b=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){Te(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Te(ca(p,s.config.emulator)&&ca(b,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=b,s.settings.appVerificationDisabledForTesting=!0,ma(c)?(ap(`${l}//${c}${g}`),op("Auth",!0)):Ox()}function RE(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function Nx(r){const e=RE(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:Wv(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:Wv(c)}}}function Wv(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function Ox(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ms("not implemented")}_getIdTokenResponse(e){return ms("not implemented")}_linkToIdToken(e,t){return ms("not implemented")}_getReauthenticationResolver(e){return ms("not implemented")}}async function kx(r,e){return vi(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dx(r,e){return _d(r,"POST","/v1/accounts:signInWithPassword",pa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jx(r,e){return _d(r,"POST","/v1/accounts:signInWithEmailLink",pa(r,e))}async function Px(r,e){return _d(r,"POST","/v1/accounts:signInWithEmailLink",pa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu extends mp{constructor(e,t,s,a=null){super("password",s),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Tu(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Tu(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jv(e,t,"signInWithPassword",Dx);case"emailLink":return jx(e,{email:this._email,oobCode:this._password});default:fr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jv(e,s,"signUpPassword",kx);case"emailLink":return Px(e,{idToken:t,email:this._email,oobCode:this._password});default:fr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ro(r,e){return _d(r,"POST","/v1/accounts:signInWithIdp",pa(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx="http://localhost";class da extends mp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new da(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):fr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...l}=t;if(!s||!a)return null;const c=new da(s,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Ro(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Ro(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ro(e,t)}buildRequest(){const e={requestUri:Mx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ju(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ux(r){const e=iu(au(r)).link,t=e?iu(au(e)).deep_link_id:null,s=iu(au(r)).deep_link_id;return(s?iu(au(s)).link:null)||s||t||e||r}class gp{constructor(e){const t=iu(au(e)),s=t.apiKey??null,a=t.oobCode??null,l=Vx(t.mode??null);Te(s&&a&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Ux(e);try{return new gp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(){this.providerId=Fo.PROVIDER_ID}static credential(e,t){return Tu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=gp.parseLink(t);return Te(s,"argument-error"),Tu._fromEmailAndCode(e,s.code,s.tenantId)}}Fo.PROVIDER_ID="password";Fo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu extends xE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei extends Mu{constructor(){super("facebook.com")}static credential(e){return da._fromParams({providerId:ei.PROVIDER_ID,signInMethod:ei.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ei.credentialFromTaggedObject(e)}static credentialFromError(e){return ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ei.credential(e.oauthAccessToken)}catch{return null}}}ei.FACEBOOK_SIGN_IN_METHOD="facebook.com";ei.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends Mu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return da._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return ti.credential(t,s)}catch{return null}}}ti.GOOGLE_SIGN_IN_METHOD="google.com";ti.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends Mu{constructor(){super("github.com")}static credential(e){return da._fromParams({providerId:ni.PROVIDER_ID,signInMethod:ni.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ni.credentialFromTaggedObject(e)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ni.credential(e.oauthAccessToken)}catch{return null}}}ni.GITHUB_SIGN_IN_METHOD="github.com";ni.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri extends Mu{constructor(){super("twitter.com")}static credential(e,t){return da._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ri.credentialFromTaggedObject(e)}static credentialFromError(e){return ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return ri.credential(t,s)}catch{return null}}}ri.TWITTER_SIGN_IN_METHOD="twitter.com";ri.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const l=await hr._fromIdTokenResponse(e,s,a),c=Zv(s);return new jo({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=Zv(s);return new jo({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function Zv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh extends Kr{constructor(e,t,s,a){super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Yh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new Yh(e,t,s,a)}}function CE(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Yh._fromErrorAndOperation(r,l,e,s):l})}async function Lx(r,e,t=!1){const s=await Eu(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return jo._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zx(r,e,t=!1){const{auth:s}=r;if(Qn(s.app))return Promise.reject(ci(s));const a="reauthenticate";try{const l=await Eu(r,CE(s,a,e,r),t);Te(l.idToken,s,"internal-error");const c=dp(l.idToken);Te(c,s,"internal-error");const{sub:f}=c;return Te(r.uid===f,s,"user-mismatch"),jo._forOperation(r,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&fr(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IE(r,e,t=!1){if(Qn(r.app))return Promise.reject(ci(r));const s="signIn",a=await CE(r,s,e),l=await jo._fromIdTokenResponse(r,s,a);return t||await r._updateCurrentUser(l.user),l}async function Bx(r,e){return IE($o(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qx(r){const e=$o(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function Hx(r,e,t){return Qn(r.app)?Promise.reject(ci(r)):Bx(jn(r),Fo.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&qx(r),s})}function $x(r,e,t,s){return jn(r).onIdTokenChanged(e,t,s)}function Fx(r,e,t){return jn(r).beforeAuthStateChanged(e,t)}function Gx(r,e,t,s){return jn(r).onAuthStateChanged(e,t,s)}const Xh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Xh,"1"),this.storage.removeItem(Xh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx=1e3,Qx=10;class OE extends NE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=EE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,g)=>{this.notifyListeners(c,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);fx()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Qx):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},Kx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}OE.type="LOCAL";const Yx=OE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE extends NE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}kE.type="SESSION";const DE=kE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new bd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const f=Array.from(c).map(async p=>p(t.origin,l)),g=await Xx(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((f,g)=>{const p=pp("",20);a.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},s);c={messageChannel:a,onMessage(E){const S=E;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(b),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(S.data.response);break;default:clearTimeout(b),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(){return window}function Wx(r){Br().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(){return typeof Br().WorkerGlobalScope<"u"&&typeof Br().importScripts=="function"}async function Zx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eC(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function tC(){return jE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="firebaseLocalStorageDb",nC=1,Jh="firebaseLocalStorage",ME="fbase_key";class Vu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function wd(r,e){return r.transaction([Jh],e?"readwrite":"readonly").objectStore(Jh)}function rC(){const r=indexedDB.deleteDatabase(PE);return new Vu(r).toPromise()}function wg(){const r=indexedDB.open(PE,nC);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Jh,{keyPath:ME})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Jh)?e(s):(s.close(),await rC(),e(await wg()))})})}async function eb(r,e,t){const s=wd(r,!0).put({[ME]:e,value:t});return new Vu(s).toPromise()}async function sC(r,e){const t=wd(r,!1).get(e),s=await new Vu(t).toPromise();return s===void 0?null:s.value}function tb(r,e){const t=wd(r,!0).delete(e);return new Vu(t).toPromise()}const iC=800,aC=3;class VE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>aC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bd._getInstance(tC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await Zx(),!this.activeServiceWorker)return;this.sender=new Jx(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wg();return await eb(e,Xh,"1"),await tb(e,Xh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>eb(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>sC(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>tb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=wd(a,!1).getAll();return new Vu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}VE.type="LOCAL";const oC=VE;new Pu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(r,e){return e?gs(e):(Te(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp extends mp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ro(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ro(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ro(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function uC(r){return IE(r.auth,new yp(r),r.bypassAuthState)}function cC(r){const{auth:e,user:t}=r;return Te(t,e,"internal-error"),zx(t,new yp(r),r.bypassAuthState)}async function hC(r){const{auth:e,user:t}=r;return Te(t,e,"internal-error"),Lx(t,new yp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,t,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uC;case"linkViaPopup":case"linkViaRedirect":return hC;case"reauthViaPopup":case"reauthViaRedirect":return cC;default:fr(this.auth,"internal-error")}}resolve(e){ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=new Pu(2e3,1e4);class To extends UE{constructor(e,t,s,a,l){super(e,t,a,l),this.provider=s,this.authWindow=null,this.pollId=null,To.currentPopupAction&&To.currentPopupAction.cancel(),To.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){ys(this.filter.length===1,"Popup operations only handle one event");const e=pp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(zr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,To.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dC.get())};e()}}To.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="pendingRedirect",Uh=new Map;class mC extends UE{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Uh.get(this.auth._key());if(!e){try{const s=await gC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Uh.set(this.auth._key(),e)}return this.bypassAuthState||Uh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gC(r,e){const t=_C(e),s=yC(r);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function pC(r,e){Uh.set(r._key(),e)}function yC(r){return gs(r._redirectPersistence)}function _C(r){return Vh(fC,r.config.apiKey,r.name)}async function vC(r,e,t=!1){if(Qn(r.app))return Promise.reject(ci(r));const s=$o(r),a=lC(s,e),c=await new mC(s,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=600*1e3;class wC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!EC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!LE(e)){const a=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(zr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bC&&this.cachedEventUids.clear(),this.cachedEventUids.has(nb(e))}saveEventToCache(e){this.cachedEventUids.add(nb(e)),this.lastProcessedEventTime=Date.now()}}function nb(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function LE({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function EC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TC(r,e={}){return vi(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AC=/^https?/;async function RC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await TC(r);for(const t of e)try{if(xC(t))return}catch{}fr(r,"unauthorized-domain")}function xC(r){const e=vg(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!AC.test(t))return!1;if(SC.test(r))return s===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=new Pu(3e4,6e4);function rb(){const r=Br().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function IC(r){return new Promise((e,t)=>{var a,l,c;function s(){rb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{rb(),t(zr(r,"network-request-failed"))},timeout:CC.get()})}if((l=(a=Br().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Br().gapi)!=null&&c.load)s();else{const f=Ex("iframefcb");return Br()[f]=()=>{gapi.load?s():t(zr(r,"network-request-failed"))},SE(`${wx()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw Lh=null,e})}let Lh=null;function NC(r){return Lh=Lh||IC(r),Lh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=new Pu(5e3,15e3),kC="__/auth/iframe",DC="emulator/auth/iframe",jC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MC(r){const e=r.config;Te(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?hp(e,DC):`https://${r.config.authDomain}/${kC}`,s={apiKey:e.apiKey,appName:r.name,v:ga},a=PC.get(r.config.apiHost);a&&(s.eid=a);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${ju(s).slice(1)}`}async function VC(r){const e=await NC(r),t=Br().gapi;return Te(t,r,"internal-error"),e.open({where:document.body,url:MC(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jC,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const c=zr(r,"network-request-failed"),f=Br().setTimeout(()=>{l(c)},OC.get());function g(){Br().clearTimeout(f),a(s)}s.ping(g).then(g,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LC=500,zC=600,BC="_blank",qC="http://localhost";class sb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function HC(r,e,t,s=LC,a=zC){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g={...UC,width:s.toString(),height:a.toString(),top:l,left:c},p=un().toLowerCase();t&&(f=yE(p)?BC:t),gE(p)&&(e=e||qC,g.scrollbars="yes");const b=Object.entries(g).reduce((S,[R,k])=>`${S}${R}=${k},`,"");if(dx(p)&&f!=="_self")return $C(e||"",f),new sb(null);const E=window.open(e||"",f,b);Te(E,r,"popup-blocked");try{E.focus()}catch{}return new sb(E)}function $C(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC="__/auth/handler",GC="emulator/auth/handler",KC=encodeURIComponent("fac");async function ib(r,e,t,s,a,l){Te(r.config.authDomain,r,"auth-domain-config-required"),Te(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:ga,eventId:a};if(e instanceof xE){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",O2(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,E]of Object.entries({}))c[b]=E}if(e instanceof Mu){const b=e.getScopes().filter(E=>E!=="");b.length>0&&(c.scopes=b.join(","))}r.tenantId&&(c.tid=r.tenantId);const f=c;for(const b of Object.keys(f))f[b]===void 0&&delete f[b];const g=await r._getAppCheckToken(),p=g?`#${KC}=${encodeURIComponent(g)}`:"";return`${QC(r)}?${ju(f).slice(1)}${p}`}function QC({config:r}){return r.emulator?hp(r,GC):`https://${r.authDomain}/${FC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm="webStorageSupport";class YC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DE,this._completeRedirectFn=vC,this._overrideRedirectResult=pC}async _openPopup(e,t,s,a){var c;ys((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await ib(e,t,s,vg(),a);return HC(e,l,pp())}async _openRedirect(e,t,s,a){await this._originValidation(e);const l=await ib(e,t,s,vg(),a);return Wx(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(ys(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await VC(e),s=new wC(e);return t.register("authEvent",a=>(Te(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Xm,{type:Xm},a=>{var c;const l=(c=a==null?void 0:a[0])==null?void 0:c[Xm];l!==void 0&&t(!!l),fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=RC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return EE()||pE()||fp()}}const XC=YC;var ab="@firebase/auth",ob="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZC(r){ha(new di("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=s.options;Te(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:c,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TE(r)},p=new _x(s,a,l,g);return Cx(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),ha(new di("auth-internal",e=>{const t=$o(e.getProvider("auth").getImmediate());return(s=>new JC(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Lr(ab,ob,WC(r)),Lr(ab,ob,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=300,tI=eE("authIdTokenMaxAge")||eI;let lb=null;const nI=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>tI)return;const a=t==null?void 0:t.token;lb!==a&&(lb=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function rI(r=yd()){const e=pd(r,"auth");if(e.isInitialized())return e.getImmediate();const t=xx(r,{popupRedirectResolver:XC,persistence:[oC,Yx,DE]}),s=eE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=nI(l.toString());Fx(t,c,()=>c(t.currentUser)),$x(t,f=>c(f))}}const a=Jw("auth");return a&&Ix(t,`http://${a}`),t}function sI(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}vx({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=a=>{const l=zr("internal-error");l.customData=a,t(l)},s.type="text/javascript",s.charset="UTF-8",sI().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZC("Browser");var ub=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hi,zE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,x){function I(){}I.prototype=x.prototype,C.F=x.prototype,C.prototype=new I,C.prototype.constructor=C,C.D=function(U,M,z){for(var N=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)N[nt-2]=arguments[nt];return x.prototype[M].apply(U,N)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,x,I){I||(I=0);const U=Array(16);if(typeof x=="string")for(var M=0;M<16;++M)U[M]=x.charCodeAt(I++)|x.charCodeAt(I++)<<8|x.charCodeAt(I++)<<16|x.charCodeAt(I++)<<24;else for(M=0;M<16;++M)U[M]=x[I++]|x[I++]<<8|x[I++]<<16|x[I++]<<24;x=C.g[0],I=C.g[1],M=C.g[2];let z=C.g[3],N;N=x+(z^I&(M^z))+U[0]+3614090360&4294967295,x=I+(N<<7&4294967295|N>>>25),N=z+(M^x&(I^M))+U[1]+3905402710&4294967295,z=x+(N<<12&4294967295|N>>>20),N=M+(I^z&(x^I))+U[2]+606105819&4294967295,M=z+(N<<17&4294967295|N>>>15),N=I+(x^M&(z^x))+U[3]+3250441966&4294967295,I=M+(N<<22&4294967295|N>>>10),N=x+(z^I&(M^z))+U[4]+4118548399&4294967295,x=I+(N<<7&4294967295|N>>>25),N=z+(M^x&(I^M))+U[5]+1200080426&4294967295,z=x+(N<<12&4294967295|N>>>20),N=M+(I^z&(x^I))+U[6]+2821735955&4294967295,M=z+(N<<17&4294967295|N>>>15),N=I+(x^M&(z^x))+U[7]+4249261313&4294967295,I=M+(N<<22&4294967295|N>>>10),N=x+(z^I&(M^z))+U[8]+1770035416&4294967295,x=I+(N<<7&4294967295|N>>>25),N=z+(M^x&(I^M))+U[9]+2336552879&4294967295,z=x+(N<<12&4294967295|N>>>20),N=M+(I^z&(x^I))+U[10]+4294925233&4294967295,M=z+(N<<17&4294967295|N>>>15),N=I+(x^M&(z^x))+U[11]+2304563134&4294967295,I=M+(N<<22&4294967295|N>>>10),N=x+(z^I&(M^z))+U[12]+1804603682&4294967295,x=I+(N<<7&4294967295|N>>>25),N=z+(M^x&(I^M))+U[13]+4254626195&4294967295,z=x+(N<<12&4294967295|N>>>20),N=M+(I^z&(x^I))+U[14]+2792965006&4294967295,M=z+(N<<17&4294967295|N>>>15),N=I+(x^M&(z^x))+U[15]+1236535329&4294967295,I=M+(N<<22&4294967295|N>>>10),N=x+(M^z&(I^M))+U[1]+4129170786&4294967295,x=I+(N<<5&4294967295|N>>>27),N=z+(I^M&(x^I))+U[6]+3225465664&4294967295,z=x+(N<<9&4294967295|N>>>23),N=M+(x^I&(z^x))+U[11]+643717713&4294967295,M=z+(N<<14&4294967295|N>>>18),N=I+(z^x&(M^z))+U[0]+3921069994&4294967295,I=M+(N<<20&4294967295|N>>>12),N=x+(M^z&(I^M))+U[5]+3593408605&4294967295,x=I+(N<<5&4294967295|N>>>27),N=z+(I^M&(x^I))+U[10]+38016083&4294967295,z=x+(N<<9&4294967295|N>>>23),N=M+(x^I&(z^x))+U[15]+3634488961&4294967295,M=z+(N<<14&4294967295|N>>>18),N=I+(z^x&(M^z))+U[4]+3889429448&4294967295,I=M+(N<<20&4294967295|N>>>12),N=x+(M^z&(I^M))+U[9]+568446438&4294967295,x=I+(N<<5&4294967295|N>>>27),N=z+(I^M&(x^I))+U[14]+3275163606&4294967295,z=x+(N<<9&4294967295|N>>>23),N=M+(x^I&(z^x))+U[3]+4107603335&4294967295,M=z+(N<<14&4294967295|N>>>18),N=I+(z^x&(M^z))+U[8]+1163531501&4294967295,I=M+(N<<20&4294967295|N>>>12),N=x+(M^z&(I^M))+U[13]+2850285829&4294967295,x=I+(N<<5&4294967295|N>>>27),N=z+(I^M&(x^I))+U[2]+4243563512&4294967295,z=x+(N<<9&4294967295|N>>>23),N=M+(x^I&(z^x))+U[7]+1735328473&4294967295,M=z+(N<<14&4294967295|N>>>18),N=I+(z^x&(M^z))+U[12]+2368359562&4294967295,I=M+(N<<20&4294967295|N>>>12),N=x+(I^M^z)+U[5]+4294588738&4294967295,x=I+(N<<4&4294967295|N>>>28),N=z+(x^I^M)+U[8]+2272392833&4294967295,z=x+(N<<11&4294967295|N>>>21),N=M+(z^x^I)+U[11]+1839030562&4294967295,M=z+(N<<16&4294967295|N>>>16),N=I+(M^z^x)+U[14]+4259657740&4294967295,I=M+(N<<23&4294967295|N>>>9),N=x+(I^M^z)+U[1]+2763975236&4294967295,x=I+(N<<4&4294967295|N>>>28),N=z+(x^I^M)+U[4]+1272893353&4294967295,z=x+(N<<11&4294967295|N>>>21),N=M+(z^x^I)+U[7]+4139469664&4294967295,M=z+(N<<16&4294967295|N>>>16),N=I+(M^z^x)+U[10]+3200236656&4294967295,I=M+(N<<23&4294967295|N>>>9),N=x+(I^M^z)+U[13]+681279174&4294967295,x=I+(N<<4&4294967295|N>>>28),N=z+(x^I^M)+U[0]+3936430074&4294967295,z=x+(N<<11&4294967295|N>>>21),N=M+(z^x^I)+U[3]+3572445317&4294967295,M=z+(N<<16&4294967295|N>>>16),N=I+(M^z^x)+U[6]+76029189&4294967295,I=M+(N<<23&4294967295|N>>>9),N=x+(I^M^z)+U[9]+3654602809&4294967295,x=I+(N<<4&4294967295|N>>>28),N=z+(x^I^M)+U[12]+3873151461&4294967295,z=x+(N<<11&4294967295|N>>>21),N=M+(z^x^I)+U[15]+530742520&4294967295,M=z+(N<<16&4294967295|N>>>16),N=I+(M^z^x)+U[2]+3299628645&4294967295,I=M+(N<<23&4294967295|N>>>9),N=x+(M^(I|~z))+U[0]+4096336452&4294967295,x=I+(N<<6&4294967295|N>>>26),N=z+(I^(x|~M))+U[7]+1126891415&4294967295,z=x+(N<<10&4294967295|N>>>22),N=M+(x^(z|~I))+U[14]+2878612391&4294967295,M=z+(N<<15&4294967295|N>>>17),N=I+(z^(M|~x))+U[5]+4237533241&4294967295,I=M+(N<<21&4294967295|N>>>11),N=x+(M^(I|~z))+U[12]+1700485571&4294967295,x=I+(N<<6&4294967295|N>>>26),N=z+(I^(x|~M))+U[3]+2399980690&4294967295,z=x+(N<<10&4294967295|N>>>22),N=M+(x^(z|~I))+U[10]+4293915773&4294967295,M=z+(N<<15&4294967295|N>>>17),N=I+(z^(M|~x))+U[1]+2240044497&4294967295,I=M+(N<<21&4294967295|N>>>11),N=x+(M^(I|~z))+U[8]+1873313359&4294967295,x=I+(N<<6&4294967295|N>>>26),N=z+(I^(x|~M))+U[15]+4264355552&4294967295,z=x+(N<<10&4294967295|N>>>22),N=M+(x^(z|~I))+U[6]+2734768916&4294967295,M=z+(N<<15&4294967295|N>>>17),N=I+(z^(M|~x))+U[13]+1309151649&4294967295,I=M+(N<<21&4294967295|N>>>11),N=x+(M^(I|~z))+U[4]+4149444226&4294967295,x=I+(N<<6&4294967295|N>>>26),N=z+(I^(x|~M))+U[11]+3174756917&4294967295,z=x+(N<<10&4294967295|N>>>22),N=M+(x^(z|~I))+U[2]+718787259&4294967295,M=z+(N<<15&4294967295|N>>>17),N=I+(z^(M|~x))+U[9]+3951481745&4294967295,C.g[0]=C.g[0]+x&4294967295,C.g[1]=C.g[1]+(M+(N<<21&4294967295|N>>>11))&4294967295,C.g[2]=C.g[2]+M&4294967295,C.g[3]=C.g[3]+z&4294967295}s.prototype.v=function(C,x){x===void 0&&(x=C.length);const I=x-this.blockSize,U=this.C;let M=this.h,z=0;for(;z<x;){if(M==0)for(;z<=I;)a(this,C,z),z+=this.blockSize;if(typeof C=="string"){for(;z<x;)if(U[M++]=C.charCodeAt(z++),M==this.blockSize){a(this,U),M=0;break}}else for(;z<x;)if(U[M++]=C[z++],M==this.blockSize){a(this,U),M=0;break}}this.h=M,this.o+=x},s.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var x=1;x<C.length-8;++x)C[x]=0;x=this.o*8;for(var I=C.length-8;I<C.length;++I)C[I]=x&255,x/=256;for(this.v(C),C=Array(16),x=0,I=0;I<4;++I)for(let U=0;U<32;U+=8)C[x++]=this.g[I]>>>U&255;return C};function l(C,x){var I=f;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=x(C)}function c(C,x){this.h=x;const I=[];let U=!0;for(let M=C.length-1;M>=0;M--){const z=C[M]|0;U&&z==x||(I[M]=z,U=!1)}this.g=I}var f={};function g(C){return-128<=C&&C<128?l(C,function(x){return new c([x|0],x<0?-1:0)}):new c([C|0],C<0?-1:0)}function p(C){if(isNaN(C)||!isFinite(C))return E;if(C<0)return D(p(-C));const x=[];let I=1;for(let U=0;C>=I;U++)x[U]=C/I|0,I*=4294967296;return new c(x,0)}function b(C,x){if(C.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(C.charAt(0)=="-")return D(b(C.substring(1),x));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=p(Math.pow(x,8));let U=E;for(let z=0;z<C.length;z+=8){var M=Math.min(8,C.length-z);const N=parseInt(C.substring(z,z+M),x);M<8?(M=p(Math.pow(x,M)),U=U.j(M).add(p(N))):(U=U.j(I),U=U.add(p(N)))}return U}var E=g(0),S=g(1),R=g(16777216);r=c.prototype,r.m=function(){if(j(this))return-D(this).m();let C=0,x=1;for(let I=0;I<this.g.length;I++){const U=this.i(I);C+=(U>=0?U:4294967296+U)*x,x*=4294967296}return C},r.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(k(this))return"0";if(j(this))return"-"+D(this).toString(C);const x=p(Math.pow(C,6));var I=this;let U="";for(;;){const M=ne(I,x).g;I=q(I,M.j(x));let z=((I.g.length>0?I.g[0]:I.h)>>>0).toString(C);if(I=M,k(I))return z+U;for(;z.length<6;)z="0"+z;U=z+U}},r.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function k(C){if(C.h!=0)return!1;for(let x=0;x<C.g.length;x++)if(C.g[x]!=0)return!1;return!0}function j(C){return C.h==-1}r.l=function(C){return C=q(this,C),j(C)?-1:k(C)?0:1};function D(C){const x=C.g.length,I=[];for(let U=0;U<x;U++)I[U]=~C.g[U];return new c(I,~C.h).add(S)}r.abs=function(){return j(this)?D(this):this},r.add=function(C){const x=Math.max(this.g.length,C.g.length),I=[];let U=0;for(let M=0;M<=x;M++){let z=U+(this.i(M)&65535)+(C.i(M)&65535),N=(z>>>16)+(this.i(M)>>>16)+(C.i(M)>>>16);U=N>>>16,z&=65535,N&=65535,I[M]=N<<16|z}return new c(I,I[I.length-1]&-2147483648?-1:0)};function q(C,x){return C.add(D(x))}r.j=function(C){if(k(this)||k(C))return E;if(j(this))return j(C)?D(this).j(D(C)):D(D(this).j(C));if(j(C))return D(this.j(D(C)));if(this.l(R)<0&&C.l(R)<0)return p(this.m()*C.m());const x=this.g.length+C.g.length,I=[];for(var U=0;U<2*x;U++)I[U]=0;for(U=0;U<this.g.length;U++)for(let M=0;M<C.g.length;M++){const z=this.i(U)>>>16,N=this.i(U)&65535,nt=C.i(M)>>>16,yt=C.i(M)&65535;I[2*U+2*M]+=N*yt,Y(I,2*U+2*M),I[2*U+2*M+1]+=z*yt,Y(I,2*U+2*M+1),I[2*U+2*M+1]+=N*nt,Y(I,2*U+2*M+1),I[2*U+2*M+2]+=z*nt,Y(I,2*U+2*M+2)}for(C=0;C<x;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=x;C<2*x;C++)I[C]=0;return new c(I,0)};function Y(C,x){for(;(C[x]&65535)!=C[x];)C[x+1]+=C[x]>>>16,C[x]&=65535,x++}function G(C,x){this.g=C,this.h=x}function ne(C,x){if(k(x))throw Error("division by zero");if(k(C))return new G(E,E);if(j(C))return x=ne(D(C),x),new G(D(x.g),D(x.h));if(j(x))return x=ne(C,D(x)),new G(D(x.g),x.h);if(C.g.length>30){if(j(C)||j(x))throw Error("slowDivide_ only works with positive integers.");for(var I=S,U=x;U.l(C)<=0;)I=_e(I),U=_e(U);var M=le(I,1),z=le(U,1);for(U=le(U,2),I=le(I,2);!k(U);){var N=z.add(U);N.l(C)<=0&&(M=M.add(I),z=N),U=le(U,1),I=le(I,1)}return x=q(C,M.j(x)),new G(M,x)}for(M=E;C.l(x)>=0;){for(I=Math.max(1,Math.floor(C.m()/x.m())),U=Math.ceil(Math.log(I)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),z=p(I),N=z.j(x);j(N)||N.l(C)>0;)I-=U,z=p(I),N=z.j(x);k(z)&&(z=S),M=M.add(z),C=q(C,N)}return new G(M,C)}r.B=function(C){return ne(this,C).h},r.and=function(C){const x=Math.max(this.g.length,C.g.length),I=[];for(let U=0;U<x;U++)I[U]=this.i(U)&C.i(U);return new c(I,this.h&C.h)},r.or=function(C){const x=Math.max(this.g.length,C.g.length),I=[];for(let U=0;U<x;U++)I[U]=this.i(U)|C.i(U);return new c(I,this.h|C.h)},r.xor=function(C){const x=Math.max(this.g.length,C.g.length),I=[];for(let U=0;U<x;U++)I[U]=this.i(U)^C.i(U);return new c(I,this.h^C.h)};function _e(C){const x=C.g.length+1,I=[];for(let U=0;U<x;U++)I[U]=C.i(U)<<1|C.i(U-1)>>>31;return new c(I,C.h)}function le(C,x){const I=x>>5;x%=32;const U=C.g.length-I,M=[];for(let z=0;z<U;z++)M[z]=x>0?C.i(z+I)>>>x|C.i(z+I+1)<<32-x:C.i(z+I);return new c(M,C.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,zE=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=b,hi=c}).apply(typeof ub<"u"?ub:typeof self<"u"?self:typeof window<"u"?window:{});var vh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var BE,ou,qE,zh,Eg,HE,$E,FE;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof vh=="object"&&vh];for(var y=0;y<h.length;++y){var w=h[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var s=t(this);function a(h,y){if(y)e:{var w=s;h=h.split(".");for(var A=0;A<h.length-1;A++){var B=h[A];if(!(B in w))break e;w=w[B]}h=h[h.length-1],A=w[h],y=y(A),y!=A&&y!=null&&e(w,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var w=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&w.push([A,y[A]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,w){return h.call.apply(h.bind,arguments)}function p(h,y,w){return p=g,p.apply(null,arguments)}function b(h,y){var w=Array.prototype.slice.call(arguments,1);return function(){var A=w.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function E(h,y){function w(){}w.prototype=y.prototype,h.Z=y.prototype,h.prototype=new w,h.prototype.constructor=h,h.Ob=function(A,B,K){for(var se=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)se[Ie-2]=arguments[Ie];return y.prototype[B].apply(A,se)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function R(h){const y=h.length;if(y>0){const w=Array(y);for(let A=0;A<y;A++)w[A]=h[A];return w}return[]}function k(h,y){for(let A=1;A<arguments.length;A++){const B=arguments[A];var w=typeof B;if(w=w!="object"?w:B?Array.isArray(B)?"array":w:"null",w=="array"||w=="object"&&typeof B.length=="number"){w=h.length||0;const K=B.length||0;h.length=w+K;for(let se=0;se<K;se++)h[w+se]=B[se]}else h.push(B)}}class j{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function D(h){c.setTimeout(()=>{throw h},0)}function q(){var h=C;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class Y{constructor(){this.h=this.g=null}add(y,w){const A=G.get();A.set(y,w),this.h?this.h.next=A:this.g=A,this.h=A}}var G=new j(()=>new ne,h=>h.reset());class ne{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let _e,le=!1,C=new Y,x=()=>{const h=Promise.resolve(void 0);_e=()=>{h.then(I)}};function I(){for(var h;h=q();){try{h.h.call(h.g)}catch(w){D(w)}var y=G;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}le=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};c.addEventListener("test",w,y),c.removeEventListener("test",w,y)}catch{}return h})();function N(h){return/^[\s\xa0]*$/.test(h)}function nt(h,y){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(nt,M),nt.prototype.init=function(h,y){const w=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(w=="mouseover"?y=h.fromElement:w=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&nt.Z.h.call(this)},nt.prototype.h=function(){nt.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var yt="closure_listenable_"+(Math.random()*1e6|0),X=0;function ae(h,y,w,A,B){this.listener=h,this.proxy=null,this.src=y,this.type=w,this.capture=!!A,this.ha=B,this.key=++X,this.da=this.fa=!1}function ie(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ee(h,y,w){for(const A in h)y.call(w,h[A],A,h)}function De(h,y){for(const w in h)y.call(void 0,h[w],w,h)}function P(h){const y={};for(const w in h)y[w]=h[w];return y}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(h,y){let w,A;for(let B=1;B<arguments.length;B++){A=arguments[B];for(w in A)h[w]=A[w];for(let K=0;K<W.length;K++)w=W[K],Object.prototype.hasOwnProperty.call(A,w)&&(h[w]=A[w])}}function ue(h){this.src=h,this.g={},this.h=0}ue.prototype.add=function(h,y,w,A,B){const K=h.toString();h=this.g[K],h||(h=this.g[K]=[],this.h++);const se=Oe(h,y,A,B);return se>-1?(y=h[se],w||(y.fa=!1)):(y=new ae(y,this.src,K,!!A,B),y.fa=w,h.push(y)),y};function Se(h,y){const w=y.type;if(w in h.g){var A=h.g[w],B=Array.prototype.indexOf.call(A,y,void 0),K;(K=B>=0)&&Array.prototype.splice.call(A,B,1),K&&(ie(y),h.g[w].length==0&&(delete h.g[w],h.h--))}}function Oe(h,y,w,A){for(let B=0;B<h.length;++B){const K=h[B];if(!K.da&&K.listener==y&&K.capture==!!w&&K.ha==A)return B}return-1}var Be="closure_lm_"+(Math.random()*1e6|0),Vt={};function lt(h,y,w,A,B){if(Array.isArray(y)){for(let K=0;K<y.length;K++)lt(h,y[K],w,A,B);return null}return w=tl(w),h&&h[yt]?h.J(y,w,f(A)?!!A.capture:!1,B):Ei(h,y,w,!1,A,B)}function Ei(h,y,w,A,B,K){if(!y)throw Error("Invalid event type");const se=f(B)?!!B.capture:!!B;let Ie=Ti(h);if(Ie||(h[Be]=Ie=new ue(h)),w=Ie.add(y,w,A,se,K),w.proxy)return w;if(A=ba(),w.proxy=A,A.src=h,A.listener=w,h.addEventListener)z||(B=se),B===void 0&&(B=!1),h.addEventListener(y.toString(),A,B);else if(h.attachEvent)h.attachEvent(gr(y.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return w}function ba(){function h(w){return y.call(h.src,h.listener,w)}const y=Zo;return h}function wa(h,y,w,A,B){if(Array.isArray(y))for(var K=0;K<y.length;K++)wa(h,y[K],w,A,B);else A=f(A)?!!A.capture:!!A,w=tl(w),h&&h[yt]?(h=h.i,K=String(y).toString(),K in h.g&&(y=h.g[K],w=Oe(y,w,A,B),w>-1&&(ie(y[w]),Array.prototype.splice.call(y,w,1),y.length==0&&(delete h.g[K],h.h--)))):h&&(h=Ti(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Oe(y,w,A,B)),(w=h>-1?y[h]:null)&&Ea(w))}function Ea(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[yt])Se(y.i,h);else{var w=h.type,A=h.proxy;y.removeEventListener?y.removeEventListener(w,A,h.capture):y.detachEvent?y.detachEvent(gr(w),A):y.addListener&&y.removeListener&&y.removeListener(A),(w=Ti(y))?(Se(w,h),w.h==0&&(w.src=null,y[Be]=null)):ie(h)}}}function gr(h){return h in Vt?Vt[h]:Vt[h]="on"+h}function Zo(h,y){if(h.da)h=!0;else{y=new nt(y,this);const w=h.listener,A=h.ha||h.src;h.fa&&Ea(h),h=w.call(A,y)}return h}function Ti(h){return h=h[Be],h instanceof ue?h:null}var el="__closure_events_fn_"+(Math.random()*1e9>>>0);function tl(h){return typeof h=="function"?h:(h[el]||(h[el]=function(y){return h.handleEvent(y)}),h[el])}function St(){U.call(this),this.i=new ue(this),this.M=this,this.G=null}E(St,U),St.prototype[yt]=!0,St.prototype.removeEventListener=function(h,y,w,A){wa(this,h,y,w,A)};function Ut(h,y){var w,A=h.G;if(A)for(w=[];A;A=A.G)w.push(A);if(h=h.M,A=y.type||y,typeof y=="string")y=new M(y,h);else if(y instanceof M)y.target=y.target||h;else{var B=y;y=new M(A,h),oe(y,B)}B=!0;let K,se;if(w)for(se=w.length-1;se>=0;se--)K=y.g=w[se],B=vs(K,A,!0,y)&&B;if(K=y.g=h,B=vs(K,A,!0,y)&&B,B=vs(K,A,!1,y)&&B,w)for(se=0;se<w.length;se++)K=y.g=w[se],B=vs(K,A,!1,y)&&B}St.prototype.N=function(){if(St.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const w=h.g[y];for(let A=0;A<w.length;A++)ie(w[A]);delete h.g[y],h.h--}}this.G=null},St.prototype.J=function(h,y,w,A){return this.i.add(String(h),y,!1,w,A)},St.prototype.K=function(h,y,w,A){return this.i.add(String(h),y,!0,w,A)};function vs(h,y,w,A){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let B=!0;for(let K=0;K<y.length;++K){const se=y[K];if(se&&!se.da&&se.capture==w){const Ie=se.listener,vt=se.ha||se.src;se.fa&&Se(h.i,se),B=Ie.call(vt,A)!==!1&&B}}return B&&!A.defaultPrevented}function Ld(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function Hu(h){h.g=Ld(()=>{h.g=null,h.i&&(h.i=!1,Hu(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class cn extends U{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Hu(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Si(h){U.call(this),this.h=h,this.g={}}E(Si,U);var nl=[];function rl(h){Ee(h.g,function(y,w){this.g.hasOwnProperty(w)&&Ea(y)},h),h.g={}}Si.prototype.N=function(){Si.Z.N.call(this),rl(this)},Si.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bs=c.JSON.stringify,zd=c.JSON.parse,$u=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Fu(){}function Gu(){}var Xn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Gt(){M.call(this,"d")}E(Gt,M);function Pn(){M.call(this,"c")}E(Pn,M);var _t={},Ku=null;function Ta(){return Ku=Ku||new St}_t.Ia="serverreachability";function Qu(h){M.call(this,_t.Ia,h)}E(Qu,M);function pr(h){const y=Ta();Ut(y,new Qu(y))}_t.STAT_EVENT="statevent";function Ai(h,y){M.call(this,_t.STAT_EVENT,h),this.stat=y}E(Ai,M);function At(h){const y=Ta();Ut(y,new Ai(y,h))}_t.Ja="timingevent";function yr(h,y){M.call(this,_t.Ja,h),this.size=y}E(yr,M);function _r(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function Jn(){this.g=!0}Jn.prototype.ua=function(){this.g=!1};function Bd(h,y,w,A,B,K){h.info(function(){if(h.g)if(K){var se="",Ie=K.split("&");for(let Ke=0;Ke<Ie.length;Ke++){var vt=Ie[Ke].split("=");if(vt.length>1){const ut=vt[0];vt=vt[1];const Ln=ut.split("_");se=Ln.length>=2&&Ln[1]=="type"?se+(ut+"="+vt+"&"):se+(ut+"=redacted&")}}}else se=null;else se=K;return"XMLHTTP REQ ("+A+") [attempt "+B+"]: "+y+`
`+w+`
`+se})}function Yu(h,y,w,A,B,K,se){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+B+"]: "+y+`
`+w+`
`+K+" "+se})}function vr(h,y,w,A){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+qd(h,w)+(A?" "+A:"")})}function Ri(h,y){h.info(function(){return"TIMEOUT: "+y})}Jn.prototype.info=function(){};function qd(h,y){if(!h.g)return y;if(!y)return null;try{const K=JSON.parse(y);if(K){for(h=0;h<K.length;h++)if(Array.isArray(K[h])){var w=K[h];if(!(w.length<2)){var A=w[1];if(Array.isArray(A)&&!(A.length<1)){var B=A[0];if(B!="noop"&&B!="stop"&&B!="close")for(let se=1;se<A.length;se++)A[se]=""}}}}return bs(K)}catch{return y}}var xi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},sl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},il;function Ci(){}E(Ci,Fu),Ci.prototype.g=function(){return new XMLHttpRequest},il=new Ci;function Qr(h){return encodeURIComponent(String(h))}function Xu(h){var y=1;h=h.split(":");const w=[];for(;y>0&&h.length;)w.push(h.shift()),y--;return h.length&&w.push(h.join(":")),w}function Wn(h,y,w,A){this.j=h,this.i=y,this.l=w,this.S=A||1,this.V=new Si(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Zn}function Zn(){this.i=null,this.g="",this.h=!1}var Rt={},qt={};function br(h,y,w){h.M=1,h.A=Ii(Ct(y)),h.u=w,h.R=!0,Sa(h,null)}function Sa(h,y){h.F=Date.now(),wr(h),h.B=Ct(h.A);var w=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),Ca(w.i,"t",A),h.C=0,w=h.j.L,h.h=new Zn,h.g=hc(h.j,w?y:null,!h.u),h.P>0&&(h.O=new cn(p(h.Y,h,h.g),h.P)),y=h.V,w=h.g,A=h.ba;var B="readystatechange";Array.isArray(B)||(B&&(nl[0]=B.toString()),B=nl);for(let K=0;K<B.length;K++){const se=lt(w,B[K],A||y.handleEvent,!1,y.h||y);if(!se)break;y.g[se.key]=se}y=h.J?P(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),pr(),Bd(h.i,h.v,h.B,h.l,h.S,h.u)}Wn.prototype.ba=function(h){h=h.target;const y=this.O;y&&nr(h)==3?y.j():this.Y(h)},Wn.prototype.Y=function(h){try{if(h==this.g)e:{const Ie=nr(this.g),vt=this.g.ya(),Ke=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||Kt(this.g)))){this.K||Ie!=4||vt==7||(vt==8||Ke<=0?pr(3):pr(2)),Er(this);var y=this.g.ca();this.X=y;var w=Hd(this);if(this.o=y==200,Yu(this.i,this.v,this.B,this.l,this.S,Ie,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,B=this.g;if((A=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(A)){var K=A;break t}}K=null}if(h=K)vr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Tr(this,h);else{this.o=!1,this.m=3,At(12),En(this),Mn(this);break e}}if(this.R){h=!0;let ut;for(;!this.K&&this.C<w.length;)if(ut=Wu(this,w),ut==qt){Ie==4&&(this.m=4,At(14),h=!1),vr(this.i,this.l,null,"[Incomplete Response]");break}else if(ut==Rt){this.m=4,At(15),vr(this.i,this.l,w,"[Invalid Chunk]"),h=!1;break}else vr(this.i,this.l,ut,null),Tr(this,ut);if(Ju(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||w.length!=0||this.h.h||(this.m=1,At(16),h=!1),this.o=this.o&&h,!h)vr(this.i,this.l,w,"[Invalid Chunked Response]"),En(this),Mn(this);else if(w.length>0&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.aa&&!se.P&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),bl(se),se.P=!0,At(11))}}else vr(this.i,this.l,w,null),Tr(this,w);Ie==4&&En(this),this.o&&!this.K&&(Ie==4?oc(this.j,this):(this.o=!1,wr(this)))}else Xr(this.g),y==400&&w.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),En(this),Mn(this)}}}catch{}finally{}};function Hd(h){if(!Ju(h))return h.g.la();const y=Kt(h.g);if(y==="")return"";let w="";const A=y.length,B=nr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return En(h),Mn(h),"";h.h.i=new c.TextDecoder}for(let K=0;K<A;K++)h.h.h=!0,w+=h.h.i.decode(y[K],{stream:!(B&&K==A-1)});return y.length=0,h.h.g+=w,h.C=0,h.h.g}function Ju(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Wu(h,y){var w=h.C,A=y.indexOf(`
`,w);return A==-1?qt:(w=Number(y.substring(w,A)),isNaN(w)?Rt:(A+=1,A+w>y.length?qt:(y=y.slice(A,A+w),h.C=A+w,y)))}Wn.prototype.cancel=function(){this.K=!0,En(this)};function wr(h){h.T=Date.now()+h.H,Aa(h,h.H)}function Aa(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=_r(p(h.aa,h),y)}function Er(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Wn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ri(this.i,this.B),this.M!=2&&(pr(),At(17)),En(this),this.m=2,Mn(this)):Aa(this,this.T-h)};function Mn(h){h.j.I==0||h.K||oc(h.j,h)}function En(h){Er(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,rl(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Tr(h,y){try{var w=h.j;if(w.I!=0&&(w.g==h||Ar(w.h,h))){if(!h.L&&Ar(w.h,h)&&w.I==3){try{var A=w.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var B=A;if(B[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<h.F)Da(w),Cs(w);else break e;Mi(w),At(18)}}else w.xa=B[1],0<w.xa-w.K&&B[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=_r(p(w.Va,w),6e3));Sr(w.h)<=1&&w.ta&&(w.ta=void 0)}else Or(w,11)}else if((h.L||w.g==h)&&Da(w),!N(y))for(B=w.Ba.g.parse(y),y=0;y<B.length;y++){let Ke=B[y];const ut=Ke[0];if(!(ut<=w.K))if(w.K=ut,Ke=Ke[1],w.I==2)if(Ke[0]=="c"){w.M=Ke[1],w.ba=Ke[2];const Ln=Ke[3];Ln!=null&&(w.ka=Ln,w.j.info("VER="+w.ka));const kr=Ke[4];kr!=null&&(w.za=kr,w.j.info("SVER="+w.za));const rr=Ke[5];rr!=null&&typeof rr=="number"&&rr>0&&(A=1.5*rr,w.O=A,w.j.info("backChannelRequestTimeoutMs_="+A)),A=w;const sr=h.g;if(sr){const Vi=sr.g?sr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vi){var K=A.h;K.g||Vi.indexOf("spdy")==-1&&Vi.indexOf("quic")==-1&&Vi.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(ll(K,K.h),K.h=null))}if(A.G){const ja=sr.g?sr.g.getResponseHeader("X-HTTP-Session-Id"):null;ja&&(A.wa=ja,Ye(A.J,A.G,ja))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-h.F,w.j.info("Handshake RTT: "+w.T+"ms")),A=w;var se=h;if(A.na=cc(A,A.L?A.ba:null,A.W),se.L){ul(A.h,se);var Ie=se,vt=A.O;vt&&(Ie.H=vt),Ie.D&&(Er(Ie),wr(Ie)),A.g=se}else ic(A);w.i.length>0&&Nr(w)}else Ke[0]!="stop"&&Ke[0]!="close"||Or(w,7);else w.I==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Or(w,7):_l(w):Ke[0]!="noop"&&w.l&&w.l.qa(Ke),w.A=0)}}pr(4)}catch{}}var xt=class{constructor(h,y){this.g=h,this.map=y}};function al(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ol(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Sr(h){return h.h?1:h.g?h.g.size:0}function Ar(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function ll(h,y){h.g?h.g.add(y):h.h=y}function ul(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}al.prototype.cancel=function(){if(this.i=cl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function cl(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const w of h.g.values())y=y.concat(w.G);return y}return R(h.i)}var Zu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ra(h,y){if(h){h=h.split("&");for(let w=0;w<h.length;w++){const A=h[w].indexOf("=");let B,K=null;A>=0?(B=h[w].substring(0,A),K=h[w].substring(A+1)):B=h[w],y(B,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Tn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Tn?(this.l=h.l,Ht(this,h.j),this.o=h.o,this.g=h.g,ws(this,h.u),this.h=h.h,hl(this,rc(h.i)),this.m=h.m):h&&(y=String(h).match(Zu))?(this.l=!1,Ht(this,y[1]||"",!0),this.o=Rr(y[2]||""),this.g=Rr(y[3]||"",!0),ws(this,y[4]),this.h=Rr(y[5]||"",!0),hl(this,y[6]||"",!0),this.m=Rr(y[7]||"")):(this.l=!1,this.i=new Ts(null,this.l))}Tn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Ni(y,xa,!0),":");var w=this.g;return(w||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Ni(y,xa,!0),"@"),h.push(Qr(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&h.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(Ni(w,w.charAt(0)=="/"?dl:ec,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",Ni(w,tc)),h.join("")},Tn.prototype.resolve=function(h){const y=Ct(this);let w=!!h.j;w?Ht(y,h.j):w=!!h.o,w?y.o=h.o:w=!!h.g,w?y.g=h.g:w=h.u!=null;var A=h.h;if(w)ws(y,h.u);else if(w=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var B=y.h.lastIndexOf("/");B!=-1&&(A=y.h.slice(0,B+1)+A)}if(B=A,B==".."||B==".")A="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){A=B.lastIndexOf("/",0)==0,B=B.split("/");const K=[];for(let se=0;se<B.length;){const Ie=B[se++];Ie=="."?A&&se==B.length&&K.push(""):Ie==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),A&&se==B.length&&K.push("")):(K.push(Ie),A=!0)}A=K.join("/")}else A=B}return w?y.h=A:w=h.i.toString()!=="",w?hl(y,rc(h.i)):w=!!h.m,w&&(y.m=h.m),y};function Ct(h){return new Tn(h)}function Ht(h,y,w){h.j=w?Rr(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function ws(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function hl(h,y,w){y instanceof Ts?(h.i=y,Ia(h.i,h.l)):(w||(y=Ni(y,Es)),h.i=new Ts(y,h.l))}function Ye(h,y,w){h.i.set(y,w)}function Ii(h){return Ye(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Rr(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ni(h,y,w){return typeof h=="string"?(h=encodeURI(h).replace(y,mn),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function mn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var xa=/[#\/\?@]/g,ec=/[#\?:]/g,dl=/[#\?]/g,Es=/[#\?@]/g,tc=/#/g;function Ts(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function gn(h){h.g||(h.g=new Map,h.h=0,h.i&&Ra(h.i,function(y,w){h.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}r=Ts.prototype,r.add=function(h,y){gn(this),this.i=null,h=Ss(this,h);let w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(y),this.h+=1,this};function nc(h,y){gn(h),y=Ss(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function fl(h,y){return gn(h),y=Ss(h,y),h.g.has(y)}r.forEach=function(h,y){gn(this),this.g.forEach(function(w,A){w.forEach(function(B){h.call(y,B,A,this)},this)},this)};function ml(h,y){gn(h);let w=[];if(typeof y=="string")fl(h,y)&&(w=w.concat(h.g.get(Ss(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)w=w.concat(h[y]);return w}r.set=function(h,y){return gn(this),this.i=null,h=Ss(this,h),fl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=ml(this,h),h.length>0?String(h[0]):y):y};function Ca(h,y,w){nc(h,y),w.length>0&&(h.i=null,h.g.set(Ss(h,y),R(w)),h.h+=w.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var w=y[A];const B=Qr(w);w=ml(this,w);for(let K=0;K<w.length;K++){let se=B;w[K]!==""&&(se+="="+Qr(w[K])),h.push(se)}}return this.i=h.join("&")};function rc(h){const y=new Ts;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Ss(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Ia(h,y){y&&!h.j&&(gn(h),h.i=null,h.g.forEach(function(w,A){const B=A.toLowerCase();A!=B&&(nc(this,A),Ca(this,B,w))},h)),h.j=y}function er(h,y){const w=new Jn;if(c.Image){const A=new Image;A.onload=b(Vn,w,"TestLoadImage: loaded",!0,y,A),A.onerror=b(Vn,w,"TestLoadImage: error",!1,y,A),A.onabort=b(Vn,w,"TestLoadImage: abort",!1,y,A),A.ontimeout=b(Vn,w,"TestLoadImage: timeout",!1,y,A),c.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else y(!1)}function gl(h,y){const w=new Jn,A=new AbortController,B=setTimeout(()=>{A.abort(),Vn(w,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:A.signal}).then(K=>{clearTimeout(B),K.ok?Vn(w,"TestPingServer: ok",!0,y):Vn(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),Vn(w,"TestPingServer: error",!1,y)})}function Vn(h,y,w,A,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),A(w)}catch{}}function As(){this.g=new $u}function xr(h){this.i=h.Sb||null,this.h=h.ab||!1}E(xr,Fu),xr.prototype.g=function(){return new Oi(this.i,this.h)};function Oi(h,y){St.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Oi,St),r=Oi.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,tr(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Rs(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,tr(this)),this.g&&(this.readyState=3,tr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Na(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Na(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Rs(this):tr(this),this.readyState==3&&Na(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,Rs(this))},r.Na=function(h){this.g&&(this.response=h,Rs(this))},r.ga=function(){this.g&&Rs(this)};function Rs(h){h.readyState=4,h.l=null,h.j=null,h.B=null,tr(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=y.next();return h.join(`\r
`)};function tr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Oi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Un(h){let y="";return Ee(h,function(w,A){y+=A,y+=":",y+=w,y+=`\r
`}),y}function ki(h,y,w){e:{for(A in w){var A=!1;break e}A=!0}A||(w=Un(w),typeof h=="string"?w!=null&&Qr(w):Ye(h,y,w))}function We(h){St.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(We,St);var Cr=/^https?$/i,pl=["POST","PUT"];r=We.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,w,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():il.g(),this.g.onreadystatechange=S(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(K){Di(this,K);return}if(h=w||"",w=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var B in A)w.set(B,A[B]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const K of A.keys())w.set(K,A.get(K));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(w.keys()).find(K=>K.toLowerCase()=="content-type"),B=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(pl,y,void 0)>=0)||A||B||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,se]of w)this.g.setRequestHeader(K,se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(K){Di(this,K)}};function Di(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,yl(h),Yr(h)}function yl(h){h.A||(h.A=!0,Ut(h,"complete"),Ut(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ut(this,"complete"),Ut(this,"abort"),Yr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yr(this,!0)),We.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?ji(this):this.Xa())},r.Xa=function(){ji(this)};function ji(h){if(h.h&&typeof l<"u"){if(h.v&&nr(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ut(h,"readystatechange"),nr(h)==4){h.h=!1;try{const K=h.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var A;if(A=K===0){let se=String(h.D).match(Zu)[1]||null;!se&&c.self&&c.self.location&&(se=c.self.location.protocol.slice(0,-1)),A=!Cr.test(se?se.toLowerCase():"")}w=A}if(w)Ut(h,"complete"),Ut(h,"success");else{h.o=6;try{var B=nr(h)>2?h.g.statusText:""}catch{B=""}h.l=B+" ["+h.ca()+"]",yl(h)}}finally{Yr(h)}}}}function Yr(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const w=h.g;h.g=null,y||Ut(h,"ready");try{w.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function nr(h){return h.g?h.g.readyState:0}r.ca=function(){try{return nr(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),zd(y)}};function Kt(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Xr(h){const y={};h=(h.g&&nr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(N(h[A]))continue;var w=Xu(h[A]);const B=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const K=y[B]||[];y[B]=K,K.push(w)}De(y,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ir(h,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||y}function xs(h){this.za=0,this.i=[],this.j=new Jn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ir("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ir("baseRetryDelayMs",5e3,h),this.Za=Ir("retryDelaySeedMs",1e4,h),this.Ta=Ir("forwardChannelMaxRetries",2,h),this.va=Ir("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new al(h&&h.concurrentRequestLimit),this.Ba=new As,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=xs.prototype,r.ka=8,r.I=1,r.connect=function(h,y,w,A){At(0),this.W=h,this.H=y||{},w&&A!==void 0&&(this.H.OSID=w,this.H.OAID=A),this.F=this.X,this.J=cc(this,null,this.W),Nr(this)};function _l(h){if(Oa(h),h.I==3){var y=h.V++,w=Ct(h.J);if(Ye(w,"SID",h.M),Ye(w,"RID",y),Ye(w,"TYPE","terminate"),Pi(h,w),y=new Wn(h,h.j,y),y.M=2,y.A=Ii(Ct(w)),w=!1,c.navigator&&c.navigator.sendBeacon)try{w=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!w&&c.Image&&(new Image().src=y.A,w=!0),w||(y.g=hc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),wr(y)}uc(h)}function Cs(h){h.g&&(bl(h),h.g.cancel(),h.g=null)}function Oa(h){Cs(h),h.v&&(c.clearTimeout(h.v),h.v=null),Da(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Nr(h){if(!ol(h.h)&&!h.m){h.m=!0;var y=h.Ea;_e||x(),le||(_e(),le=!0),C.add(y,h),h.D=0}}function ka(h,y){return Sr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=_r(p(h.Ea,h,y),lc(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const B=new Wn(this,this.j,h);let K=this.o;if(this.U&&(K?(K=P(K),oe(K,this.U)):K=this.U),this.u!==null||this.R||(B.J=K,K=null),this.S)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var A=this.i[w];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=sc(this,B,y),w=Ct(this.J),Ye(w,"RID",h),Ye(w,"CVER",22),this.G&&Ye(w,"X-HTTP-Session-Id",this.G),Pi(this,w),K&&(this.R?y="headers="+Qr(Un(K))+"&"+y:this.u&&ki(w,this.u,K)),ll(this.h,B),this.Ra&&Ye(w,"TYPE","init"),this.S?(Ye(w,"$req",y),Ye(w,"SID","null"),B.U=!0,br(B,w,null)):br(B,w,y),this.I=2}}else this.I==3&&(h?vl(this,h):this.i.length==0||ol(this.h)||vl(this))};function vl(h,y){var w;y?w=y.l:w=h.V++;const A=Ct(h.J);Ye(A,"SID",h.M),Ye(A,"RID",w),Ye(A,"AID",h.K),Pi(h,A),h.u&&h.o&&ki(A,h.u,h.o),w=new Wn(h,h.j,w,h.D+1),h.u===null&&(w.J=h.o),y&&(h.i=y.G.concat(h.i)),y=sc(h,w,1e3),w.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),ll(h.h,w),br(w,A,y)}function Pi(h,y){h.H&&Ee(h.H,function(w,A){Ye(y,A,w)}),h.l&&Ee({},function(w,A){Ye(y,A,w)})}function sc(h,y,w){w=Math.min(h.i.length,w);const A=h.l?p(h.l.Ka,h.l,h):null;e:{var B=h.i;let Ie=-1;for(;;){const vt=["count="+w];Ie==-1?w>0?(Ie=B[0].g,vt.push("ofs="+Ie)):Ie=0:vt.push("ofs="+Ie);let Ke=!0;for(let ut=0;ut<w;ut++){var K=B[ut].g;const Ln=B[ut].map;if(K-=Ie,K<0)Ie=Math.max(0,B[ut].g-100),Ke=!1;else try{K="req"+K+"_"||"";try{var se=Ln instanceof Map?Ln:Object.entries(Ln);for(const[kr,rr]of se){let sr=rr;f(rr)&&(sr=bs(rr)),vt.push(K+kr+"="+encodeURIComponent(sr))}}catch(kr){throw vt.push(K+"type="+encodeURIComponent("_badmap")),kr}}catch{A&&A(Ln)}}if(Ke){se=vt.join("&");break e}}se=void 0}return h=h.i.splice(0,w),y.G=h,se}function ic(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;_e||x(),le||(_e(),le=!0),C.add(y,h),h.A=0}}function Mi(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=_r(p(h.Da,h),lc(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,ac(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=_r(p(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),Cs(this),ac(this))};function bl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function ac(h){h.g=new Wn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Ct(h.na);Ye(y,"RID","rpc"),Ye(y,"SID",h.M),Ye(y,"AID",h.K),Ye(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ye(y,"TO",h.ia),Ye(y,"TYPE","xmlhttp"),Pi(h,y),h.u&&h.o&&ki(y,h.u,h.o),h.O&&(h.g.H=h.O);var w=h.g;h=h.ba,w.M=1,w.A=Ii(Ct(y)),w.u=null,w.R=!0,Sa(w,h)}r.Va=function(){this.C!=null&&(this.C=null,Cs(this),Mi(this),At(19))};function Da(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function oc(h,y){var w=null;if(h.g==y){Da(h),bl(h),h.g=null;var A=2}else if(Ar(h.h,y))w=y.G,ul(h.h,y),A=1;else return;if(h.I!=0){if(y.o)if(A==1){w=y.u?y.u.length:0,y=Date.now()-y.F;var B=h.D;A=Ta(),Ut(A,new yr(A,w)),Nr(h)}else ic(h);else if(B=y.m,B==3||B==0&&y.X>0||!(A==1&&ka(h,y)||A==2&&Mi(h)))switch(w&&w.length>0&&(y=h.h,y.i=y.i.concat(w)),B){case 1:Or(h,5);break;case 4:Or(h,10);break;case 3:Or(h,6);break;default:Or(h,2)}}}function lc(h,y){let w=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(w*=2),w*y}function Or(h,y){if(h.j.info("Error code "+y),y==2){var w=p(h.bb,h),A=h.Ua;const B=!A;A=new Tn(A||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ht(A,"https"),Ii(A),B?er(A.toString(),w):gl(A.toString(),w)}else At(2);h.I=0,h.l&&h.l.pa(y),uc(h),Oa(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function uc(h){if(h.I=0,h.ja=[],h.l){const y=cl(h.h);(y.length!=0||h.i.length!=0)&&(k(h.ja,y),k(h.ja,h.i),h.h.i.length=0,R(h.i),h.i.length=0),h.l.oa()}}function cc(h,y,w){var A=w instanceof Tn?Ct(w):new Tn(w);if(A.g!="")y&&(A.g=y+"."+A.g),ws(A,A.u);else{var B=c.location;A=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;const K=new Tn(null);A&&Ht(K,A),y&&(K.g=y),B&&ws(K,B),w&&(K.h=w),A=K}return w=h.G,y=h.wa,w&&y&&Ye(A,w,y),Ye(A,"VER",h.ka),Pi(h,A),A}function hc(h,y,w){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new We(new xr({ab:w})):new We(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function dc(){}r=dc.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Is(){}Is.prototype.g=function(h,y){return new hn(h,y)};function hn(h,y){St.call(this),this.g=new xs(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!N(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!N(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Jr(this)}E(hn,St),hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){_l(this.g)},hn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.v&&(w={},w.__data__=bs(h),h=w);y.i.push(new xt(y.Ya++,h)),y.I==3&&Nr(y)},hn.prototype.N=function(){this.g.l=null,delete this.j,_l(this.g),delete this.g,hn.Z.N.call(this)};function fc(h){Gt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const w in y){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(fc,Gt);function mc(){Pn.call(this),this.status=1}E(mc,Pn);function Jr(h){this.g=h}E(Jr,dc),Jr.prototype.ra=function(){Ut(this.g,"a")},Jr.prototype.qa=function(h){Ut(this.g,new fc(h))},Jr.prototype.pa=function(h){Ut(this.g,new mc)},Jr.prototype.oa=function(){Ut(this.g,"b")},Is.prototype.createWebChannel=Is.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,FE=function(){return new Is},$E=function(){return Ta()},HE=_t,Eg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xi.NO_ERROR=0,xi.TIMEOUT=8,xi.HTTP_ERROR=6,zh=xi,sl.COMPLETE="complete",qE=sl,Gu.EventType=Xn,Xn.OPEN="a",Xn.CLOSE="b",Xn.ERROR="c",Xn.MESSAGE="d",St.prototype.listen=St.prototype.J,ou=Gu,We.prototype.listenOnce=We.prototype.K,We.prototype.getLastError=We.prototype.Ha,We.prototype.getLastErrorCode=We.prototype.ya,We.prototype.getStatus=We.prototype.ca,We.prototype.getResponseJson=We.prototype.La,We.prototype.getResponseText=We.prototype.la,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Fa,BE=We}).apply(typeof vh<"u"?vh:typeof self<"u"?self:typeof window<"u"?window:{});const cb="@firebase/firestore",hb="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Go="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=new lp("@firebase/firestore");function yo(){return fa.logLevel}function ce(r,...e){if(fa.logLevel<=Ue.DEBUG){const t=e.map(_p);fa.debug(`Firestore (${Go}): ${r}`,...t)}}function _s(r,...e){if(fa.logLevel<=Ue.ERROR){const t=e.map(_p);fa.error(`Firestore (${Go}): ${r}`,...t)}}function Po(r,...e){if(fa.logLevel<=Ue.WARN){const t=e.map(_p);fa.warn(`Firestore (${Go}): ${r}`,...t)}}function _p(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,GE(r,s,t)}function GE(r,e,t){let s=`FIRESTORE (${Go}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw _s(s),new Error(s)}function mt(r,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,r||GE(e,a,s)}function He(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Kr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(an.UNAUTHENTICATED)))}shutdown(){}}class aI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class oI{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){mt(this.o===void 0,42304);let s=this.i;const a=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new la;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new la,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await a(this.currentUser)}))},f=g=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new la)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(mt(typeof s.accessToken=="string",31837,{l:s}),new KE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mt(e===null||typeof e=="string",2055,{h:e}),new an(e)}}class lI{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=an.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class uI{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new lI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(an.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class db{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){mt(this.o===void 0,3512);const s=l=>{l.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ce("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const a=l=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new db(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(mt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new db(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=hI(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%62))}return s}}function ze(r,e){return r<e?-1:r>e?1:0}function Tg(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const a=r.charAt(s),l=e.charAt(s);if(a!==l)return Jm(a)===Jm(l)?ze(a,l):Jm(a)?1:-1}return ze(r.length,e.length)}const dI=55296,fI=57343;function Jm(r){const e=r.charCodeAt(0);return e>=dI&&e<=fI}function Mo(r,e,t){return r.length===e.length&&r.every(((s,a)=>t(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="__name__";class Vr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ce(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Vr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=Vr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return ze(e.length,t.length)}static compareSegments(e,t){const s=Vr.isNumericId(e),a=Vr.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?Vr.extractNumericId(e).compare(Vr.extractNumericId(t)):Tg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hi.fromString(e.substring(4,e.length-2))}}class ht extends Vr{construct(e,t,s){return new ht(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new he(re.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new ht(t)}static emptyPath(){return new ht([])}}const mI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends Vr{construct(e,t,s){return new ln(e,t,s)}static isValidIdentifier(e){return mI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fb}static keyField(){return new ln([fb])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(s.length===0)throw new he(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new he(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new he(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,a+=2}else f==="`"?(c=!c,a++):f!=="."||c?(s+=f,a++):(l(),a++)}if(l(),c)throw new he(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(t)}static emptyPath(){return new ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(ht.fromString(e))}static fromName(e){return new be(ht.fromString(e).popFirst(5))}static empty(){return new be(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new ht(e.slice()))}}function gI(r,e,t,s){if(e===!0&&s===!0)throw new he(re.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function mb(r){if(be.isDocumentKey(r))throw new he(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function YE(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Ed(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ce(12329,{type:typeof r})}function Sg(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new he(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ed(r);throw new he(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Uu(r,e){if(!YE(r))throw new he(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const c=r[s];if(a&&typeof c!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new he(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb=-62135596800,pb=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*pb);return new dt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<gb)throw new he(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pb}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Uu(e,dt._jsonSchema))return new dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-gb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:Mt("string",dt._jsonSchemaVersion),seconds:Mt("number"),nanoseconds:Mt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new dt(0,0))}static max(){return new xe(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su=-1;function pI(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,a=xe.fromTimestamp(s===1e9?new dt(t+1,0):new dt(t,s));return new fi(a,be.empty(),e)}function yI(r){return new fi(r.readTime,r.key,Su)}class fi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new fi(xe.min(),be.empty(),Su)}static max(){return new fi(xe.max(),be.empty(),Su)}}function _I(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=be.comparator(r.documentKey,e.documentKey),t!==0?t:ze(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Td(r){if(r.code!==re.FAILED_PRECONDITION||r.message!==vI)throw r;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te(((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):te.reject(t)}static resolve(e){return new te(((t,s)=>{t(e)}))}static reject(e){return new te(((t,s)=>{s(e)}))}static waitFor(e){return new te(((t,s)=>{let a=0,l=0,c=!1;e.forEach((f=>{++a,f.next((()=>{++l,c&&l===a&&t()}),(g=>s(g)))})),c=!0,l===a&&t()}))}static or(e){let t=te.resolve(!1);for(const s of e)t=t.next((a=>a?te.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,l)=>{s.push(t.call(this,a,l))})),this.waitFor(s)}static mapArray(e,t){return new te(((s,a)=>{const l=e.length,c=new Array(l);let f=0;for(let g=0;g<l;g++){const p=g;t(e[p]).next((b=>{c[p]=b,++f,f===l&&s(c)}),(b=>a(b)))}}))}static doWhile(e,t){return new te(((s,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):s()};l()}))}}function wI(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ko(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Sd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=-1;function Ad(r){return r==null}function Wh(r){return r===0&&1/r==-1/0}function TI(r){return typeof r=="number"&&Number.isInteger(r)&&!Wh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="";function SI(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=yb(e)),e=AI(r.get(t),e);return yb(e)}function AI(r,e){let t=e;const s=r.length;for(let a=0;a<s;a++){const l=r.charAt(a);switch(l){case"\0":t+="";break;case XE:t+="";break;default:t+=l}}return t}function yb(r){return r+XE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Qo(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function JE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,t){this.comparator=e,this.root=t||Zt.EMPTY}insert(e,t){return new Tt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new Tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bh(this.root,e,this.comparator,!1)}getReverseIterator(){return new bh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bh(this.root,e,this.comparator,!0)}}class bh{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??Zt.RED,this.left=a??Zt.EMPTY,this.right=l??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new Zt(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Zt.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,s,a,l){return this}insert(e,t,s){return new Zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new Tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vb(this.data.getIterator())}getIteratorFrom(e){return new vb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class vb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new ii([])}unionWith(e){let t=new Bt(ln.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ii(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Mo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new WE("Invalid base64 string: "+l):l}})(e);return new en(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new en(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const RI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mi(r){if(mt(!!r,39018),typeof r=="string"){let e=0;const t=RI.exec(r);if(mt(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Et(r.seconds),nanos:Et(r.nanos)}}function Et(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function gi(r){return typeof r=="string"?en.fromBase64String(r):en.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="server_timestamp",e1="__type__",t1="__previous_value__",n1="__local_write_time__";function vp(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[e1])==null?void 0:s.stringValue)===ZE}function Rd(r){const e=r.mapValue.fields[t1];return vp(e)?Rd(e):e}function Au(r){const e=mi(r.mapValue.fields[n1].timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,t,s,a,l,c,f,g,p,b){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=b}}const Zh="(default)";class Ru{constructor(e,t){this.projectId=e,this.database=t||Zh}static empty(){return new Ru("","")}get isDefaultDatabase(){return this.database===Zh}isEqual(e){return e instanceof Ru&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1="__type__",CI="__max__",wh={mapValue:{}},s1="__vector__",ed="value";function pi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?vp(r)?4:NI(r)?9007199254740991:II(r)?10:11:Ce(28295,{value:r})}function Fr(r,e){if(r===e)return!0;const t=pi(r);if(t!==pi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Au(r).isEqual(Au(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=mi(a.timestampValue),f=mi(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(a,l){return gi(a.bytesValue).isEqual(gi(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(a,l){return Et(a.geoPointValue.latitude)===Et(l.geoPointValue.latitude)&&Et(a.geoPointValue.longitude)===Et(l.geoPointValue.longitude)})(r,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Et(a.integerValue)===Et(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Et(a.doubleValue),f=Et(l.doubleValue);return c===f?Wh(c)===Wh(f):isNaN(c)&&isNaN(f)}return!1})(r,e);case 9:return Mo(r.arrayValue.values||[],e.arrayValue.values||[],Fr);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},f=l.mapValue.fields||{};if(_b(c)!==_b(f))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(f[g]===void 0||!Fr(c[g],f[g])))return!1;return!0})(r,e);default:return Ce(52216,{left:r})}}function xu(r,e){return(r.values||[]).find((t=>Fr(t,e)))!==void 0}function Vo(r,e){if(r===e)return 0;const t=pi(r),s=pi(e);if(t!==s)return ze(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(r.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=Et(l.integerValue||l.doubleValue),g=Et(c.integerValue||c.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(r,e);case 3:return bb(r.timestampValue,e.timestampValue);case 4:return bb(Au(r),Au(e));case 5:return Tg(r.stringValue,e.stringValue);case 6:return(function(l,c){const f=gi(l),g=gi(c);return f.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),g=c.split("/");for(let p=0;p<f.length&&p<g.length;p++){const b=ze(f[p],g[p]);if(b!==0)return b}return ze(f.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=ze(Et(l.latitude),Et(c.latitude));return f!==0?f:ze(Et(l.longitude),Et(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return wb(r.arrayValue,e.arrayValue);case 10:return(function(l,c){var S,R,k,j;const f=l.fields||{},g=c.fields||{},p=(S=f[ed])==null?void 0:S.arrayValue,b=(R=g[ed])==null?void 0:R.arrayValue,E=ze(((k=p==null?void 0:p.values)==null?void 0:k.length)||0,((j=b==null?void 0:b.values)==null?void 0:j.length)||0);return E!==0?E:wb(p,b)})(r.mapValue,e.mapValue);case 11:return(function(l,c){if(l===wh.mapValue&&c===wh.mapValue)return 0;if(l===wh.mapValue)return 1;if(c===wh.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),p=c.fields||{},b=Object.keys(p);g.sort(),b.sort();for(let E=0;E<g.length&&E<b.length;++E){const S=Tg(g[E],b[E]);if(S!==0)return S;const R=Vo(f[g[E]],p[b[E]]);if(R!==0)return R}return ze(g.length,b.length)})(r.mapValue,e.mapValue);default:throw Ce(23264,{he:t})}}function bb(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return ze(r,e);const t=mi(r),s=mi(e),a=ze(t.seconds,s.seconds);return a!==0?a:ze(t.nanos,s.nanos)}function wb(r,e){const t=r.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const l=Vo(t[a],s[a]);if(l)return l}return ze(t.length,s.length)}function Uo(r){return Ag(r)}function Ag(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=mi(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return gi(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return be.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",a=!0;for(const l of t.values||[])a?a=!1:s+=",",s+=Ag(l);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of s)l?l=!1:a+=",",a+=`${c}:${Ag(t.fields[c])}`;return a+"}"})(r.mapValue):Ce(61005,{value:r})}function Bh(r){switch(pi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rd(r);return e?16+Bh(e):16;case 5:return 2*r.stringValue.length;case 6:return gi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,l)=>a+Bh(l)),0)})(r.arrayValue);case 10:case 11:return(function(s){let a=0;return Qo(s.fields,((l,c)=>{a+=l.length+Bh(c)})),a})(r.mapValue);default:throw Ce(13486,{value:r})}}function Eb(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Rg(r){return!!r&&"integerValue"in r}function bp(r){return!!r&&"arrayValue"in r}function Tb(r){return!!r&&"nullValue"in r}function Sb(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Wm(r){return!!r&&"mapValue"in r}function II(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[r1])==null?void 0:s.stringValue)===s1}function fu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Qo(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=fu(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fu(r.arrayValue.values[t]);return e}return{...r}}function NI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===CI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.value=e}static empty(){return new Ur({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Wm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fu(t)}setAll(e){let t=ln.emptyPath(),s={},a=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,a),s={},a=[],t=f.popLast()}c?s[f.lastSegment()]=fu(c):a.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());Wm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];Wm(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Qo(t,((a,l)=>e[a]=l));for(const a of s)delete e[a]}clone(){return new Ur(fu(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t,s,a,l,c,f){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new on(e,0,xe.min(),xe.min(),xe.min(),Ur.empty(),0)}static newFoundDocument(e,t,s,a){return new on(e,1,t,xe.min(),s,a,0)}static newNoDocument(e,t){return new on(e,2,t,xe.min(),xe.min(),Ur.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,xe.min(),xe.min(),Ur.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ur.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,t){this.position=e,this.inclusive=t}}function Ab(r,e,t){let s=0;for(let a=0;a<r.position.length;a++){const l=e[a],c=r.position[a];if(l.field.isKeyField()?s=be.comparator(be.fromName(c.referenceValue),t.key):s=Vo(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Rb(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Fr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,t="asc"){this.field=e,this.dir=t}}function OI(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{}class Pt extends i1{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new DI(e,t,s):t==="array-contains"?new MI(e,s):t==="in"?new VI(e,s):t==="not-in"?new UI(e,s):t==="array-contains-any"?new LI(e,s):new Pt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new jI(e,s):new PI(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Vo(t,this.value)):t!==null&&pi(this.value)===pi(t)&&this.matchesComparison(Vo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mr extends i1{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new mr(e,t)}matches(e){return a1(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function a1(r){return r.op==="and"}function o1(r){return kI(r)&&a1(r)}function kI(r){for(const e of r.filters)if(e instanceof mr)return!1;return!0}function xg(r){if(r instanceof Pt)return r.field.canonicalString()+r.op.toString()+Uo(r.value);if(o1(r))return r.filters.map((e=>xg(e))).join(",");{const e=r.filters.map((t=>xg(t))).join(",");return`${r.op}(${e})`}}function l1(r,e){return r instanceof Pt?(function(s,a){return a instanceof Pt&&s.op===a.op&&s.field.isEqual(a.field)&&Fr(s.value,a.value)})(r,e):r instanceof mr?(function(s,a){return a instanceof mr&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((l,c,f)=>l&&l1(c,a.filters[f])),!0):!1})(r,e):void Ce(19439)}function u1(r){return r instanceof Pt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Uo(t.value)}`})(r):r instanceof mr?(function(t){return t.op.toString()+" {"+t.getFilters().map(u1).join(" ,")+"}"})(r):"Filter"}class DI extends Pt{constructor(e,t,s){super(e,t,s),this.key=be.fromName(s.referenceValue)}matches(e){const t=be.comparator(e.key,this.key);return this.matchesComparison(t)}}class jI extends Pt{constructor(e,t){super(e,"in",t),this.keys=c1("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class PI extends Pt{constructor(e,t){super(e,"not-in",t),this.keys=c1("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function c1(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>be.fromName(s.referenceValue)))}class MI extends Pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bp(t)&&xu(t.arrayValue,this.value)}}class VI extends Pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&xu(this.value.arrayValue,t)}}class UI extends Pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(xu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!xu(this.value.arrayValue,t)}}class LI extends Pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>xu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,t=null,s=[],a=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function xb(r,e=null,t=[],s=[],a=null,l=null,c=null){return new zI(r,e,t,s,a,l,c)}function wp(r){const e=He(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>xg(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Ad(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Uo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Uo(s))).join(",")),e.Te=t}return e.Te}function Ep(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!OI(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!l1(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Rb(r.startAt,e.startAt)&&Rb(r.endAt,e.endAt)}function Cg(r){return be.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,t=null,s=[],a=[],l=null,c="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function BI(r,e,t,s,a,l,c,f){return new Yo(r,e,t,s,a,l,c,f)}function h1(r){return new Yo(r)}function Cb(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function d1(r){return r.collectionGroup!==null}function mu(r){const e=He(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new Bt(ln.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(f=f.add(p.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Cu(l,s))})),t.has(ln.keyField().canonicalString())||e.Ie.push(new Cu(ln.keyField(),s))}return e.Ie}function qr(r){const e=He(r);return e.Ee||(e.Ee=qI(e,mu(r))),e.Ee}function qI(r,e){if(r.limitType==="F")return xb(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Cu(a.field,l)}));const t=r.endAt?new td(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new td(r.startAt.position,r.startAt.inclusive):null;return xb(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Ig(r,e){const t=r.filters.concat([e]);return new Yo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Ng(r,e,t){return new Yo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function xd(r,e){return Ep(qr(r),qr(e))&&r.limitType===e.limitType}function f1(r){return`${wp(qr(r))}|lt:${r.limitType}`}function _o(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>u1(a))).join(", ")}]`),Ad(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>Uo(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>Uo(a))).join(",")),`Target(${s})`})(qr(r))}; limitType=${r.limitType})`}function Cd(r,e){return e.isFoundDocument()&&(function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):be.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(r,e)&&(function(s,a){for(const l of mu(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0})(r,e)&&(function(s,a){return!(s.startAt&&!(function(c,f,g){const p=Ab(c,f,g);return c.inclusive?p<=0:p<0})(s.startAt,mu(s),a)||s.endAt&&!(function(c,f,g){const p=Ab(c,f,g);return c.inclusive?p>=0:p>0})(s.endAt,mu(s),a))})(r,e)}function HI(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function m1(r){return(e,t)=>{let s=!1;for(const a of mu(r)){const l=$I(a,e,t);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function $I(r,e,t){const s=r.field.isKeyField()?be.comparator(e.key,t.key):(function(l,c,f){const g=c.data.field(l),p=f.data.field(l);return g!==null&&p!==null?Vo(g,p):Ce(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ce(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Qo(this.inner,((t,s)=>{for(const[a,l]of s)e(a,l)}))}isEmpty(){return JE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=new Tt(be.comparator);function yi(){return FI}const g1=new Tt(be.comparator);function lu(...r){let e=g1;for(const t of r)e=e.insert(t.key,t);return e}function GI(r){let e=g1;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function aa(){return gu()}function p1(){return gu()}function gu(){return new ya((r=>r.toString()),((r,e)=>r.isEqual(e)))}const KI=new Bt(be.comparator);function $e(...r){let e=KI;for(const t of r)e=e.add(t);return e}const QI=new Bt(ze);function YI(){return QI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wh(e)?"-0":e}}function y1(r){return{integerValue:""+r}}function XI(r,e){return TI(e)?y1(e):Tp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(){this._=void 0}}function JI(r,e,t){return r instanceof Og?(function(a,l){const c={fields:{[e1]:{stringValue:ZE},[n1]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&vp(l)&&(l=Rd(l)),l&&(c.fields[t1]=l),{mapValue:c}})(t,e):r instanceof nd?_1(r,e):r instanceof rd?v1(r,e):(function(a,l){const c=ZI(a,l),f=Ib(c)+Ib(a.Ae);return Rg(c)&&Rg(a.Ae)?y1(f):Tp(a.serializer,f)})(r,e)}function WI(r,e,t){return r instanceof nd?_1(r,e):r instanceof rd?v1(r,e):t}function ZI(r,e){return r instanceof kg?(function(s){return Rg(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Og extends Id{}class nd extends Id{constructor(e){super(),this.elements=e}}function _1(r,e){const t=b1(e);for(const s of r.elements)t.some((a=>Fr(a,s)))||t.push(s);return{arrayValue:{values:t}}}class rd extends Id{constructor(e){super(),this.elements=e}}function v1(r,e){let t=b1(e);for(const s of r.elements)t=t.filter((a=>!Fr(a,s)));return{arrayValue:{values:t}}}class kg extends Id{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ib(r){return Et(r.integerValue||r.doubleValue)}function b1(r){return bp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function eN(r,e){return r.field.isEqual(e.field)&&(function(s,a){return s instanceof nd&&a instanceof nd||s instanceof rd&&a instanceof rd?Mo(s.elements,a.elements,Fr):s instanceof kg&&a instanceof kg?Fr(s.Ae,a.Ae):s instanceof Og&&a instanceof Og})(r.transform,e.transform)}class ua{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ua}static exists(e){return new ua(void 0,e)}static updateTime(e){return new ua(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Sp{}function w1(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new nN(r.key,ua.none()):new Ap(r.key,r.data,ua.none());{const t=r.data,s=Ur.empty();let a=new Bt(ln.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),a=a.add(l)}return new Nd(r.key,s,new ii(a.toArray()),ua.none())}}function tN(r,e,t){r instanceof Ap?(function(a,l,c){const f=a.value.clone(),g=Ob(a.fieldTransforms,l,c.transformResults);f.setAll(g),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(r,e,t):r instanceof Nd?(function(a,l,c){if(!qh(a.precondition,l))return void l.convertToUnknownDocument(c.version);const f=Ob(a.fieldTransforms,l,c.transformResults),g=l.data;g.setAll(E1(a)),g.setAll(f),l.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(r,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function pu(r,e,t,s){return r instanceof Ap?(function(l,c,f,g){if(!qh(l.precondition,c))return f;const p=l.value.clone(),b=kb(l.fieldTransforms,g,c);return p.setAll(b),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(r,e,t,s):r instanceof Nd?(function(l,c,f,g){if(!qh(l.precondition,c))return f;const p=kb(l.fieldTransforms,g,c),b=c.data;return b.setAll(E1(l)),b.setAll(p),c.convertToFoundDocument(c.version,b).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(r,e,t,s):(function(l,c,f){return qh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(r,e,t)}function Nb(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Mo(s,a,((l,c)=>eN(l,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Ap extends Sp{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Nd extends Sp{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function E1(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function Ob(r,e,t){const s=new Map;mt(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let a=0;a<t.length;a++){const l=r[a],c=l.transform,f=e.data.field(l.field);s.set(l.field,WI(c,f,t[a]))}return s}function kb(r,e,t){const s=new Map;for(const a of r){const l=a.transform,c=t.data.field(a.field);s.set(a.field,JI(l,c,e))}return s}class nN extends Sp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&tN(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=pu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=pu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=p1();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(a.key)?null:f;const g=w1(c,f);g!==null&&s.set(a.key,g),c.isValidDocument()||c.convertToNoDocument(xe.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),$e())}isEqual(e){return this.batchId===e.batchId&&Mo(this.mutations,e.mutations,((t,s)=>Nb(t,s)))&&Mo(this.baseMutations,e.baseMutations,((t,s)=>Nb(t,s)))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,qe;function T1(r){if(r===void 0)return _s("GRPC error has no .code"),re.UNKNOWN;switch(r){case Dt.OK:return re.OK;case Dt.CANCELLED:return re.CANCELLED;case Dt.UNKNOWN:return re.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return re.INTERNAL;case Dt.UNAVAILABLE:return re.UNAVAILABLE;case Dt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Dt.NOT_FOUND:return re.NOT_FOUND;case Dt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Dt.ABORTED:return re.ABORTED;case Dt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Dt.DATA_LOSS:return re.DATA_LOSS;default:return Ce(39323,{code:r})}}(qe=Dt||(Dt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=new hi([4294967295,4294967295],0);function Db(r){const e=aN().encode(r),t=new zE;return t.update(e),new Uint8Array(t.digest())}function jb(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new hi([t,s],0),new hi([a,l],0)]}class Rp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new uu(`Invalid padding: ${t}`);if(s<0)throw new uu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new uu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new uu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=hi.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(hi.fromNumber(s)));return a.compare(oN)===1&&(a=new hi([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Db(e),[s,a]=jb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,a,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Rp(l,a,t);return s.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=Db(e),[s,a]=jb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class uu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,Lu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Od(xe.min(),a,new Tt(ze),yi(),$e())}}class Lu{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Lu(s,t,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,t,s,a){this.be=e,this.removedTargetIds=t,this.key=s,this.De=a}}class S1{constructor(e,t){this.targetId=e,this.Ce=t}}class A1{constructor(e,t,s=en.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class Pb{constructor(){this.ve=0,this.Fe=Mb(),this.Me=en.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=$e(),t=$e(),s=$e();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Ce(38017,{changeType:l})}})),new Lu(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=Mb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,mt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class lN{constructor(e){this.Ge=e,this.ze=new Map,this.je=yi(),this.Je=Eh(),this.He=Eh(),this.Ye=new Tt(ze)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Cg(l))if(s===0){const c=new be(l.path);this.et(t,c,on.newNoDocument(c,xe.min()))}else mt(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const f=this.ut(e),g=f?this.ct(f,e,c):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=t;let c,f;try{c=gi(s).toUint8Array()}catch(g){if(g instanceof WE)return Po("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new Rp(c,a,l)}catch(g){return Po(g instanceof uu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&Cg(f.target)){const g=new be(f.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,on.newNoDocument(g,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let s=$e();this.He.forEach(((l,c)=>{let f=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new Od(e,t,this.Ye,this.je,s);return this.je=yi(),this.Je=Eh(),this.He=Eh(),this.Ye=new Tt(ze),a}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Pb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Bt(ze),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Bt(ze),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Pb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Eh(){return new Tt(be.comparator)}function Mb(){return new Tt(be.comparator)}const uN={asc:"ASCENDING",desc:"DESCENDING"},cN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hN={and:"AND",or:"OR"};class dN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Dg(r,e){return r.useProto3Json||Ad(e)?e:{value:e}}function jg(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function R1(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function xo(r){return mt(!!r,49232),xe.fromTimestamp((function(t){const s=mi(t);return new dt(s.seconds,s.nanos)})(r))}function x1(r,e){return Pg(r,e).canonicalString()}function Pg(r,e){const t=(function(a){return new ht(["projects",a.projectId,"databases",a.database])})(r).child("documents");return e===void 0?t:t.child(e)}function C1(r){const e=ht.fromString(r);return mt(D1(e),10190,{key:e.toString()}),e}function Zm(r,e){const t=C1(e);if(t.get(1)!==r.databaseId.projectId)throw new he(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new he(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new be(N1(t))}function I1(r,e){return x1(r.databaseId,e)}function fN(r){const e=C1(r);return e.length===4?ht.emptyPath():N1(e)}function Vb(r){return new ht(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function N1(r){return mt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function mN(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ce(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,b){return p.useProto3Json?(mt(b===void 0||typeof b=="string",58123),en.fromBase64String(b||"")):(mt(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),en.fromUint8Array(b||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(p){const b=p.code===void 0?re.UNKNOWN:T1(p.code);return new he(b,p.message||"")})(c);t=new A1(s,a,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Zm(r,s.document.name),l=xo(s.document.updateTime),c=s.document.createTime?xo(s.document.createTime):xe.min(),f=new Ur({mapValue:{fields:s.document.fields}}),g=on.newFoundDocument(a,l,c,f),p=s.targetIds||[],b=s.removedTargetIds||[];t=new Hh(p,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Zm(r,s.document),l=s.readTime?xo(s.readTime):xe.min(),c=on.newNoDocument(a,l),f=s.removedTargetIds||[];t=new Hh([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Zm(r,s.document),l=s.removedTargetIds||[];t=new Hh([],l,a,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,c=new iN(a,l),f=s.targetId;t=new S1(f,c)}}return t}function gN(r,e){return{documents:[I1(r,e.path)]}}function pN(r,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=I1(r,a);const l=(function(p){if(p.length!==0)return k1(mr.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((b=>(function(S){return{field:vo(S.field),direction:vN(S.dir)}})(b)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=Dg(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:a}}function yN(r){let e=fN(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){mt(s===1,65062);const b=t.from[0];b.allDescendants?a=b.collectionId:e=e.child(b.collectionId)}let l=[];t.where&&(l=(function(E){const S=O1(E);return S instanceof mr&&o1(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((S=>(function(k){return new Cu(bo(k.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(S)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let S;return S=typeof E=="object"?E.value:E,Ad(S)?null:S})(t.limit));let g=null;t.startAt&&(g=(function(E){const S=!!E.before,R=E.values||[];return new td(R,S)})(t.startAt));let p=null;return t.endAt&&(p=(function(E){const S=!E.before,R=E.values||[];return new td(R,S)})(t.endAt)),BI(e,a,c,l,f,"F",g,p)}function _N(r,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function O1(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=bo(t.unaryFilter.field);return Pt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=bo(t.unaryFilter.field);return Pt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=bo(t.unaryFilter.field);return Pt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=bo(t.unaryFilter.field);return Pt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Pt.create(bo(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return mr.create(t.compositeFilter.filters.map((s=>O1(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(t.compositeFilter.op))})(r):Ce(30097,{filter:r})}function vN(r){return uN[r]}function bN(r){return cN[r]}function wN(r){return hN[r]}function vo(r){return{fieldPath:r.canonicalString()}}function bo(r){return ln.fromServerFormat(r.fieldPath)}function k1(r){return r instanceof Pt?(function(t){if(t.op==="=="){if(Sb(t.value))return{unaryFilter:{field:vo(t.field),op:"IS_NAN"}};if(Tb(t.value))return{unaryFilter:{field:vo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Sb(t.value))return{unaryFilter:{field:vo(t.field),op:"IS_NOT_NAN"}};if(Tb(t.value))return{unaryFilter:{field:vo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vo(t.field),op:bN(t.op),value:t.value}}})(r):r instanceof mr?(function(t){const s=t.getFilters().map((a=>k1(a)));return s.length===1?s[0]:{compositeFilter:{op:wN(t.op),filters:s}}})(r):Ce(54877,{filter:r})}function D1(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,t,s,a,l=xe.min(),c=xe.min(),f=en.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new ai(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ai(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.yt=e}}function TN(r){const e=yN({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Ng(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(){this.Cn=new AN}addToCollectionParentIndex(e,t){return this.Cn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(fi.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(fi.min())}updateCollectionGroup(e,t,s){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class AN{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Bt(ht.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Bt(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},j1=41943040;class wn{static withCacheSize(e){return new wn(e,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(j1,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Lo(0)}static cr(){return new Lo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb="LruGarbageCollector",RN=1048576;function zb([r,e],[t,s]){const a=ze(r,t);return a===0?ze(e,s):a}class xN{constructor(e){this.Ir=e,this.buffer=new Bt(zb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();zb(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class CN{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ce(Lb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ko(t)?ce(Lb,"Ignoring IndexedDB error during garbage collection: ",t):await Td(t)}await this.Vr(3e5)}))}}class IN{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return te.resolve(Sd.ce);const s=new xN(t);return this.mr.forEachTarget(e,(a=>s.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>s.Ar(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(Ub)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ub):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,a,l,c,f,g,p;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,c=Date.now(),this.nthSequenceNumber(e,a)))).next((E=>(s=E,f=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(p=Date.now(),yo()<=Ue.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-b}ms
	Determined least recently used ${a} in `+(f-c)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${E} documents in `+(p-g)+`ms
Total Duration: ${p-b}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E}))))}}function NN(r,e){return new IN(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(){this.changes=new ya((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?te.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&pu(s.mutation,a,ii.empty(),dt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,$e()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=$e()){const a=aa();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((l=>{let c=lu();return l.forEach(((f,g)=>{c=c.insert(f,g.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=aa();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,$e())))}populateOverlays(e,t,s){const a=[];return s.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,s,a){let l=yi();const c=gu(),f=(function(){return gu()})();return t.forEach(((g,p)=>{const b=s.get(p.key);a.has(p.key)&&(b===void 0||b.mutation instanceof Nd)?l=l.insert(p.key,p):b!==void 0?(c.set(p.key,b.mutation.getFieldMask()),pu(b.mutation,p,b.mutation.getFieldMask(),dt.now())):c.set(p.key,ii.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((p,b)=>c.set(p,b))),t.forEach(((p,b)=>f.set(p,new kN(b,c.get(p)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=gu();let a=new Tt(((c,f)=>c-f)),l=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let b=s.get(g)||ii.empty();b=f.applyToLocalView(p,b),s.set(g,b);const E=(a.get(f.batchId)||$e()).add(g);a=a.insert(f.batchId,E)}))})).next((()=>{const c=[],f=a.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),p=g.key,b=g.value,E=p1();b.forEach((S=>{if(!l.has(S)){const R=w1(t.get(S),s.get(S));R!==null&&E.set(S,R),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,E))}return te.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return(function(c){return be.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):d1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):te.resolve(aa());let f=Su,g=l;return c.next((p=>te.forEach(p,((b,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(b)?te.resolve():this.remoteDocumentCache.getEntry(e,b).next((S=>{g=g.insert(b,S)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,g,p,$e()))).next((b=>({batchId:f,changes:GI(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new be(t)).next((s=>{let a=lu();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const l=t.collectionGroup;let c=lu();return this.indexManager.getCollectionParents(e,l).next((f=>te.forEach(f,(g=>{const p=(function(E,S){return new Yo(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,s,a).next((b=>{b.forEach(((E,S)=>{c=c.insert(E,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,a)))).next((c=>{l.forEach(((g,p)=>{const b=p.getKey();c.get(b)===null&&(c=c.insert(b,on.newInvalidDocument(b)))}));let f=lu();return c.forEach(((g,p)=>{const b=l.get(g);b!==void 0&&pu(b.mutation,p,ii.empty(),dt.now()),Cd(t,p)&&(f=f.insert(g,p))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return te.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:xo(a.createTime)}})(t)),te.resolve()}getNamedQuery(e,t){return te.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:TN(a.bundledQuery),readTime:xo(a.readTime)}})(t)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(){this.overlays=new Tt(be.comparator),this.qr=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const s=aa();return te.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&s.set(a,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,l)=>{this.St(e,t,l)})),te.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),te.resolve()}getOverlaysForCollection(e,t,s){const a=aa(),l=t.length+1,c=new be(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const g=f.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&g.largestBatchId>s&&a.set(g.getKey(),g)}return te.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new Tt(((p,b)=>p-b));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>s){let b=l.get(p.largestBatchId);b===null&&(b=aa(),l=l.insert(p.largestBatchId,b)),b.set(p.getKey(),p)}}const f=aa(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,b)=>f.set(p,b))),!(f.size()>=a)););return te.resolve(f)}St(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new sN(t,s));let l=this.qr.get(t);l===void 0&&(l=$e(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(){this.Qr=new Bt(Ft.$r),this.Ur=new Bt(Ft.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Ft(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Ft(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new be(new ht([])),s=new Ft(t,e),a=new Ft(t,e+1),l=[];return this.Ur.forEachInRange([s,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new be(new ht([])),s=new Ft(t,e),a=new Ft(t,e+1);let l=$e();return this.Ur.forEachInRange([s,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Ft(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Ft{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return be.comparator(e.key,t.key)||ze(e.Yr,t.Yr)}static Kr(e,t){return ze(e.Yr,t.Yr)||be.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Bt(Ft.$r)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new rN(l,t,s,a);this.mutationQueue.push(c);for(const f of a)this.Zr=this.Zr.add(new Ft(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return te.resolve(c)}lookupMutationBatch(e,t){return te.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.ei(s),l=a<0?0:a;return te.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?EI:this.tr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ft(t,0),a=new Ft(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,a],(c=>{const f=this.Xr(c.Yr);l.push(f)})),te.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Bt(ze);return t.forEach((a=>{const l=new Ft(a,0),c=new Ft(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(f=>{s=s.add(f.Yr)}))})),te.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;be.isDocumentKey(l)||(l=l.child(""));const c=new Ft(new be(l),0);let f=new Bt(ze);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!s.isPrefixOf(p)&&(p.length===a&&(f=f.add(g.Yr)),!0)}),c),te.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const a=this.Xr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){mt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return te.forEach(t.mutations,(a=>{const l=new Ft(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Ft(t,0),a=this.Zr.firstAfterOrEqual(s);return te.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e){this.ri=e,this.docs=(function(){return new Tt(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return te.resolve(s?s.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let s=yi();return t.forEach((a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():on.newInvalidDocument(a))})),te.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=yi();const c=t.path,f=new be(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:p,value:{document:b}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||_I(yI(b),s)<=0||(a.has(b.key)||Cd(t,b))&&(l=l.insert(b.key,b.mutableCopy()))}return te.resolve(l)}getAllFromCollectionGroup(e,t,s,a){Ce(9500)}ii(e,t){return te.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new LN(this)}getSize(e){return te.resolve(this.size)}}class LN extends ON{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)})),te.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.persistence=e,this.si=new ya((t=>wp(t)),Ep),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.oi=0,this._i=new xp,this.targetCount=0,this.ai=Lo.ur()}forEachTarget(e,t){return this.si.forEach(((s,a)=>t(a))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),te.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Lo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.Pr(t),te.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.si.forEach(((c,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),te.waitFor(l).next((()=>a))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return te.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),te.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),te.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),te.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return te.resolve(s)}containsKey(e,t){return te.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,t){this.ui={},this.overlays={},this.ci=new Sd(0),this.li=!1,this.li=!0,this.hi=new MN,this.referenceDelegate=e(this),this.Pi=new zN(this),this.indexManager=new SN,this.remoteDocumentCache=(function(a){return new UN(a)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new EN(t),this.Ii=new jN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new PN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new VN(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ce("MemoryPersistence","Starting transaction:",e);const a=new BN(this.ci.next());return this.referenceDelegate.Ei(),s(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return te.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class BN extends bI{constructor(e){super(),this.currentSequenceNumber=e}}class Cp{constructor(e){this.persistence=e,this.Ri=new xp,this.Vi=null}static mi(e){return new Cp(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),te.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),te.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.fi,(s=>{const a=be.fromPath(s);return this.gi(e,a).next((l=>{l||t.removeEntry(a,xe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return te.or([()=>te.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class sd{constructor(e,t){this.persistence=e,this.pi=new ya((s=>SI(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=NN(this,t)}static mi(e,t){return new sd(e,t)}Ei(){}di(e){return te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return te.forEach(this.pi,((s,a)=>this.br(e,s,a).next((l=>l?te.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((f=>{f||(s++,l.removeEntry(c,xe.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),te.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),te.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Bh(e.data.value)),t}br(e,t,s){return te.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return te.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=a}static As(e,t){let s=$e(),a=$e();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Ip(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return A2()?8:wI(un())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new qN;return this.Ss(e,t,c).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,c,f.size)}))})).next((()=>l.result))}bs(e,t,s,a){return s.documentReadCount<this.fs?(yo()<=Ue.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",_o(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),te.resolve()):(yo()<=Ue.DEBUG&&ce("QueryEngine","Query:",_o(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(yo()<=Ue.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",_o(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qr(t))):te.resolve())}ys(e,t){if(Cb(t))return te.resolve(null);let s=qr(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Ng(t,null,"F"),s=qr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=$e(...l);return this.ps.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const p=this.Ds(t,f);return this.Cs(t,p,c,g.readTime)?this.ys(e,Ng(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,s,a){return Cb(t)||a.isEqual(xe.min())?te.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,a)?te.resolve(null):(yo()<=Ue.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),_o(t)),this.vs(e,c,t,pI(a,Su)).next((f=>f)))}))}Ds(e,t){let s=new Bt(m1(e));return t.forEach(((a,l)=>{Cd(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,s){return yo()<=Ue.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",_o(t)),this.ps.getDocumentsMatchingQuery(e,t,fi.min(),s)}vs(e,t,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="LocalStore",$N=3e8;class FN{constructor(e,t,s,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new Tt(ze),this.xs=new ya((l=>wp(l)),Ep),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function GN(r,e,t,s){return new FN(r,e,t,s)}async function M1(r,e){const t=He(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],f=[];let g=$e();for(const p of a){c.push(p.batchId);for(const b of p.mutations)g=g.add(b.key)}for(const p of l){f.push(p.batchId);for(const b of p.mutations)g=g.add(b.key)}return t.localDocuments.getDocuments(s,g).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:f})))}))}))}function V1(r){const e=He(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function KN(r,e){const t=He(r),s=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const f=[];e.targetChanges.forEach(((b,E)=>{const S=a.get(E);if(!S)return;f.push(t.Pi.removeMatchingKeys(l,b.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,b.addedDocuments,E))));let R=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?R=R.withResumeToken(en.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):b.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(b.resumeToken,s)),a=a.insert(E,R),(function(j,D,q){return j.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=$N?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0})(S,R,b)&&f.push(t.Pi.updateTargetData(l,R))}));let g=yi(),p=$e();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,b))})),f.push(QN(l,c,e.documentUpdates).next((b=>{g=b.ks,p=b.qs}))),!s.isEqual(xe.min())){const b=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(b)}return te.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,p))).next((()=>g))})).then((l=>(t.Ms=a,l)))}function QN(r,e,t){let s=$e(),a=$e();return t.forEach((l=>s=s.add(l))),e.getEntries(r,s).next((l=>{let c=yi();return t.forEach(((f,g)=>{const p=l.get(f);g.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(f)),g.isNoDocument()&&g.version.isEqual(xe.min())?(e.removeEntry(f,g.readTime),c=c.insert(f,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),c=c.insert(f,g)):ce(Np,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",g.version)})),{ks:c,qs:a}}))}function YN(r,e){const t=He(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.Pi.getTargetData(s,e).next((l=>l?(a=l,te.resolve(a)):t.Pi.allocateTargetId(s).next((c=>(a=new ai(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Mg(r,e,t){const s=He(r),a=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Ko(c))throw c;ce(Np,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function Bb(r,e,t){const s=He(r);let a=xe.min(),l=$e();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,b){const E=He(g),S=E.xs.get(b);return S!==void 0?te.resolve(E.Ms.get(S)):E.Pi.getTargetData(p,b)})(s,c,qr(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,f.targetId).next((g=>{l=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?a:xe.min(),t?l:$e()))).next((f=>(XN(s,HI(e),f),{documents:f,Qs:l})))))}function XN(r,e,t){let s=r.Os.get(e)||xe.min();t.forEach(((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),r.Os.set(e,s)}class qb{constructor(){this.activeTargetIds=YI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JN{constructor(){this.Mo=new qb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new qb,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb="ConnectivityMonitor";class $b{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ce(Hb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ce(Hb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Th=null;function Vg(){return Th===null?Th=(function(){return 268435456+Math.round(2147483648*Math.random())})():Th++,"0x"+Th.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg="RestConnection",ZN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===Zh?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,t,s,a,l){const c=Vg(),f=this.zo(e,t.toUriEncodedString());ce(eg,`Sending RPC '${e}' ${c}:`,f,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,a,l);const{host:p}=new URL(f),b=ma(p);return this.Jo(e,f,g,s,b).then((E=>(ce(eg,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Po(eg,`RPC '${e}' ${c} failed with error: `,E,"url: ",f,"request:",s),E}))}Ho(e,t,s,a,l,c){return this.Go(e,t,s,a,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Go})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),s&&s.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const s=ZN[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class nO extends eO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,a,l){const c=Vg();return new Promise(((f,g)=>{const p=new BE;p.setWithCredentials(!0),p.listenOnce(qE.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case zh.NO_ERROR:const E=p.getResponseJson();ce(rn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),f(E);break;case zh.TIMEOUT:ce(rn,`RPC '${e}' ${c} timed out`),g(new he(re.DEADLINE_EXCEEDED,"Request time out"));break;case zh.HTTP_ERROR:const S=p.getStatus();if(ce(rn,`RPC '${e}' ${c} failed with status:`,S,"response text:",p.getResponseText()),S>0){let R=p.getResponseJson();Array.isArray(R)&&(R=R[0]);const k=R==null?void 0:R.error;if(k&&k.status&&k.message){const j=(function(q){const Y=q.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(Y)>=0?Y:re.UNKNOWN})(k.status);g(new he(j,k.message))}else g(new he(re.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new he(re.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ce(rn,`RPC '${e}' ${c} completed.`)}}));const b=JSON.stringify(a);ce(rn,`RPC '${e}' ${c} sending request:`,a),p.send(t,"POST",b,s,15)}))}T_(e,t,s){const a=Vg(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=FE(),f=$E(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const b=l.join("");ce(rn,`Creating RPC '${e}' stream ${a}: ${b}`,g);const E=c.createWebChannel(b,g);this.I_(E);let S=!1,R=!1;const k=new tO({Yo:D=>{R?ce(rn,`Not sending because RPC '${e}' stream ${a} is closed:`,D):(S||(ce(rn,`Opening RPC '${e}' stream ${a} transport.`),E.open(),S=!0),ce(rn,`RPC '${e}' stream ${a} sending:`,D),E.send(D))},Zo:()=>E.close()}),j=(D,q,Y)=>{D.listen(q,(G=>{try{Y(G)}catch(ne){setTimeout((()=>{throw ne}),0)}}))};return j(E,ou.EventType.OPEN,(()=>{R||(ce(rn,`RPC '${e}' stream ${a} transport opened.`),k.o_())})),j(E,ou.EventType.CLOSE,(()=>{R||(R=!0,ce(rn,`RPC '${e}' stream ${a} transport closed`),k.a_(),this.E_(E))})),j(E,ou.EventType.ERROR,(D=>{R||(R=!0,Po(rn,`RPC '${e}' stream ${a} transport errored. Name:`,D.name,"Message:",D.message),k.a_(new he(re.UNAVAILABLE,"The operation could not be completed")))})),j(E,ou.EventType.MESSAGE,(D=>{var q;if(!R){const Y=D.data[0];mt(!!Y,16349);const G=Y,ne=(G==null?void 0:G.error)||((q=G[0])==null?void 0:q.error);if(ne){ce(rn,`RPC '${e}' stream ${a} received error:`,ne);const _e=ne.status;let le=(function(I){const U=Dt[I];if(U!==void 0)return T1(U)})(_e),C=ne.message;le===void 0&&(le=re.INTERNAL,C="Unknown error status: "+_e+" with message "+ne.message),R=!0,k.a_(new he(le,C)),E.close()}else ce(rn,`RPC '${e}' stream ${a} received:`,Y),k.u_(Y)}})),j(f,HE.STAT_EVENT,(D=>{D.stat===Eg.PROXY?ce(rn,`RPC '${e}' stream ${a} detected buffering proxy`):D.stat===Eg.NOPROXY&&ce(rn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function tg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(r){return new dN(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&ce("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb="PersistentStream";class rO{constructor(e,t,s,a,l,c,f,g){this.Mi=e,this.S_=s,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new U1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(_s(t.toString()),_s("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===t&&this.G_(s,a)}),(s=>{e((()=>{const a=new he(re.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(Fb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ce(Fb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class sO extends rO{constructor(e,t,s,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=mN(this.serializer,e),s=(function(l){if(!("targetChange"in l))return xe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?xe.min():c.readTime?xo(c.readTime):xe.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Vb(this.serializer),t.addTarget=(function(l,c){let f;const g=c.target;if(f=Cg(g)?{documents:gN(l,g)}:{query:pN(l,g).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=R1(l,c.resumeToken);const p=Dg(l,c.expectedCount);p!==null&&(f.expectedCount=p)}else if(c.snapshotVersion.compareTo(xe.min())>0){f.readTime=jg(l,c.snapshotVersion.toTimestamp());const p=Dg(l,c.expectedCount);p!==null&&(f.expectedCount=p)}return f})(this.serializer,e);const s=_N(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Vb(this.serializer),t.removeTarget=e,this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{}class aO extends iO{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new he(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Pg(t,s),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(re.UNKNOWN,l.toString())}))}Ho(e,t,s,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Ho(e,Pg(t,s),a,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(re.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class oO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_s(t),this.aa=!1):ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo="RemoteStore";class lO{constructor(e,t,s,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{Bu(this)&&(ce(zo,"Restarting streams for network reachability change."),await(async function(g){const p=He(g);p.Ea.add(4),await zu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Dd(p)})(this))}))})),this.Ra=new oO(s,a)}}async function Dd(r){if(Bu(r))for(const e of r.da)await e(!0)}async function zu(r){for(const e of r.da)await e(!1)}function L1(r,e){const t=He(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),jp(t)?Dp(t):Xo(t).O_()&&kp(t,e))}function Op(r,e){const t=He(r),s=Xo(t);t.Ia.delete(e),s.O_()&&z1(t,e),t.Ia.size===0&&(s.O_()?s.L_():Bu(t)&&t.Ra.set("Unknown"))}function kp(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Xo(r).Y_(e)}function z1(r,e){r.Va.Ue(e),Xo(r).Z_(e)}function Dp(r){r.Va=new lN({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Xo(r).start(),r.Ra.ua()}function jp(r){return Bu(r)&&!Xo(r).x_()&&r.Ia.size>0}function Bu(r){return He(r).Ea.size===0}function B1(r){r.Va=void 0}async function uO(r){r.Ra.set("Online")}async function cO(r){r.Ia.forEach(((e,t)=>{kp(r,e)}))}async function hO(r,e){B1(r),jp(r)?(r.Ra.ha(e),Dp(r)):r.Ra.set("Unknown")}async function dO(r,e,t){if(r.Ra.set("Online"),e instanceof A1&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const f of l.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,c),a.Ia.delete(f),a.Va.removeTarget(f))})(r,e)}catch(s){ce(zo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Gb(r,s)}else if(e instanceof Hh?r.Va.Ze(e):e instanceof S1?r.Va.st(e):r.Va.tt(e),!t.isEqual(xe.min()))try{const s=await V1(r.localStore);t.compareTo(s)>=0&&await(function(l,c){const f=l.Va.Tt(c);return f.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const b=l.Ia.get(p);b&&l.Ia.set(p,b.withResumeToken(g.resumeToken,c))}})),f.targetMismatches.forEach(((g,p)=>{const b=l.Ia.get(g);if(!b)return;l.Ia.set(g,b.withResumeToken(en.EMPTY_BYTE_STRING,b.snapshotVersion)),z1(l,g);const E=new ai(b.target,g,p,b.sequenceNumber);kp(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(s){ce(zo,"Failed to raise snapshot:",s),await Gb(r,s)}}async function Gb(r,e,t){if(!Ko(e))throw e;r.Ea.add(1),await zu(r),r.Ra.set("Offline"),t||(t=()=>V1(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ce(zo,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Dd(r)}))}async function Kb(r,e){const t=He(r);t.asyncQueue.verifyOperationInProgress(),ce(zo,"RemoteStore received new credentials");const s=Bu(t);t.Ea.add(3),await zu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Dd(t)}async function fO(r,e){const t=He(r);e?(t.Ea.delete(2),await Dd(t)):e||(t.Ea.add(2),await zu(t),t.Ra.set("Unknown"))}function Xo(r){return r.ma||(r.ma=(function(t,s,a){const l=He(t);return l.sa(),new sO(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Xo:uO.bind(null,r),t_:cO.bind(null,r),r_:hO.bind(null,r),H_:dO.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),jp(r)?Dp(r):r.Ra.set("Unknown")):(await r.ma.stop(),B1(r))}))),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new la,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,l){const c=Date.now()+s,f=new Pp(e,t,c,a,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function q1(r,e){if(_s("AsyncQueue",`${e}: ${r}`),Ko(r))return new he(re.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{static emptySet(e){return new Co(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||be.comparator(t.key,s.key):(t,s)=>be.comparator(t.key,s.key),this.keyedMap=lu(),this.sortedSet=new Tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Co;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(){this.ga=new Tt(be.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Bo{constructor(e,t,s,a,l,c,f,g,p){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,s,a,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new Bo(e,t,Co.emptySet(t),c,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class gO{constructor(){this.queries=Yb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=He(t),l=a.queries;a.queries=Yb(),l.forEach(((c,f)=>{for(const g of f.Sa)g.onError(s)}))})(this,new he(re.ABORTED,"Firestore shutting down"))}}function Yb(){return new ya((r=>f1(r)),xd)}async function pO(r,e){const t=He(r);let s=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(s=2):(l=new mO,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const f=q1(c,`Initialization of query '${_o(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Mp(t)}async function yO(r,e){const t=He(r),s=e.query;let a=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function _O(r,e){const t=He(r);let s=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const f of c.Sa)f.Fa(a)&&(s=!0);c.wa=a}}s&&Mp(t)}function vO(r,e,t){const s=He(r),a=s.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);s.queries.delete(e)}function Mp(r){r.Ca.forEach((e=>{e.next()}))}var Ug,Xb;(Xb=Ug||(Ug={})).Ma="default",Xb.Cache="cache";class bO{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Bo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Bo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ug.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e){this.key=e}}class $1{constructor(e){this.key=e}}class wO{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=$e(),this.mutatedKeys=$e(),this.eu=m1(e),this.tu=new Co(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new Qb,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,f=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((b,E)=>{const S=a.get(b),R=Cd(this.query,E)?E:null,k=!!S&&this.mutatedKeys.has(S.key),j=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let D=!1;S&&R?S.data.isEqual(R.data)?k!==j&&(s.track({type:3,doc:R}),D=!0):this.su(S,R)||(s.track({type:2,doc:R}),D=!0,(g&&this.eu(R,g)>0||p&&this.eu(R,p)<0)&&(f=!0)):!S&&R?(s.track({type:0,doc:R}),D=!0):S&&!R&&(s.track({type:1,doc:S}),D=!0,(g||p)&&(f=!0)),D&&(R?(c=c.add(R),l=j?l.add(b):l.delete(b)):(c=c.delete(b),l=l.delete(b)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const b=this.query.limitType==="F"?c.last():c.first();c=c.delete(b.key),l=l.delete(b.key),s.track({type:1,doc:b})}return{tu:c,iu:s,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((b,E)=>(function(R,k){const j=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:D})}};return j(R)-j(k)})(b.type,E.type)||this.eu(b.doc,E.doc))),this.ou(s),a=a??!1;const f=t&&!a?this._u():[],g=this.Xa.size===0&&this.current&&!a?1:0,p=g!==this.Za;return this.Za=g,c.length!==0||p?{snapshot:new Bo(this.query,e.tu,l,c,e.mutatedKeys,g===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Qb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=$e(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new $1(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new H1(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=$e();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Bo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Vp="SyncEngine";class EO{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class TO{constructor(e){this.key=e,this.hu=!1}}class SO{constructor(e,t,s,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ya((f=>f1(f)),xd),this.Iu=new Map,this.Eu=new Set,this.du=new Tt(be.comparator),this.Au=new Map,this.Ru=new xp,this.Vu={},this.mu=new Map,this.fu=Lo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function AO(r,e,t=!0){const s=Y1(r);let a;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await F1(s,e,t,!0),a}async function RO(r,e){const t=Y1(r);await F1(t,e,!0,!1)}async function F1(r,e,t,s){const a=await YN(r.localStore,qr(e)),l=a.targetId,c=r.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await xO(r,e,l,c==="current",a.resumeToken)),r.isPrimaryClient&&t&&L1(r.remoteStore,a),f}async function xO(r,e,t,s,a){r.pu=(E,S,R)=>(async function(j,D,q,Y){let G=D.view.ru(q);G.Cs&&(G=await Bb(j.localStore,D.query,!1).then((({documents:C})=>D.view.ru(C,G))));const ne=Y&&Y.targetChanges.get(D.targetId),_e=Y&&Y.targetMismatches.get(D.targetId)!=null,le=D.view.applyChanges(G,j.isPrimaryClient,ne,_e);return Wb(j,D.targetId,le.au),le.snapshot})(r,E,S,R);const l=await Bb(r.localStore,e,!0),c=new wO(e,l.Qs),f=c.ru(l.documents),g=Lu.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",a),p=c.applyChanges(f,r.isPrimaryClient,g);Wb(r,t,p.au);const b=new EO(e,t,c);return r.Tu.set(e,b),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),p.snapshot}async function CO(r,e,t){const s=He(r),a=s.Tu.get(e),l=s.Iu.get(a.targetId);if(l.length>1)return s.Iu.set(a.targetId,l.filter((c=>!xd(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Mg(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&Op(s.remoteStore,a.targetId),Lg(s,a.targetId)})).catch(Td)):(Lg(s,a.targetId),await Mg(s.localStore,a.targetId,!0))}async function IO(r,e){const t=He(r),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Op(t.remoteStore,s.targetId))}async function G1(r,e){const t=He(r);try{const s=await KN(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(mt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?mt(c.hu,14607):a.removedDocuments.size>0&&(mt(c.hu,42227),c.hu=!1))})),await Q1(t,s,e)}catch(s){await Td(s)}}function Jb(r,e,t){const s=He(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(c,f){const g=He(c);g.onlineState=f;let p=!1;g.queries.forEach(((b,E)=>{for(const S of E.Sa)S.va(f)&&(p=!0)})),p&&Mp(g)})(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function NO(r,e,t){const s=He(r);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),l=a&&a.key;if(l){let c=new Tt(be.comparator);c=c.insert(l,on.newNoDocument(l,xe.min()));const f=$e().add(l),g=new Od(xe.min(),new Map,new Tt(ze),c,f);await G1(s,g),s.du=s.du.remove(l),s.Au.delete(e),Up(s)}else await Mg(s.localStore,e,!1).then((()=>Lg(s,e,t))).catch(Td)}function Lg(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||K1(r,s)}))}function K1(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Op(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Up(r))}function Wb(r,e,t){for(const s of t)s instanceof H1?(r.Ru.addReference(s.key,e),OO(r,s)):s instanceof $1?(ce(Vp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||K1(r,s.key)):Ce(19791,{wu:s})}function OO(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(ce(Vp,"New document in limbo: "+t),r.Eu.add(s),Up(r))}function Up(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new be(ht.fromString(e)),s=r.fu.next();r.Au.set(s,new TO(t)),r.du=r.du.insert(t,s),L1(r.remoteStore,new ai(qr(h1(t.path)),s,"TargetPurposeLimboResolution",Sd.ce))}}async function Q1(r,e,t){const s=He(r),a=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,g)=>{c.push(s.pu(g,e,t).then((p=>{var b;if((p||t)&&s.isPrimaryClient){const E=p?!p.fromCache:(b=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:b.current;s.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(p){a.push(p);const E=Ip.As(g.targetId,p);l.push(E)}})))})),await Promise.all(c),s.Pu.H_(a),await(async function(g,p){const b=He(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>te.forEach(p,(S=>te.forEach(S.Es,(R=>b.persistence.referenceDelegate.addReference(E,S.targetId,R))).next((()=>te.forEach(S.ds,(R=>b.persistence.referenceDelegate.removeReference(E,S.targetId,R)))))))))}catch(E){if(!Ko(E))throw E;ce(Np,"Failed to update sequence numbers: "+E)}for(const E of p){const S=E.targetId;if(!E.fromCache){const R=b.Ms.get(S),k=R.snapshotVersion,j=R.withLastLimboFreeSnapshotVersion(k);b.Ms=b.Ms.insert(S,j)}}})(s.localStore,l))}async function kO(r,e){const t=He(r);if(!t.currentUser.isEqual(e)){ce(Vp,"User change. New user:",e.toKey());const s=await M1(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new he(re.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Q1(t,s.Ls)}}function DO(r,e){const t=He(r),s=t.Au.get(e);if(s&&s.hu)return $e().add(s.key);{let a=$e();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const f=t.Tu.get(c);a=a.unionWith(f.view.nu)}return a}}function Y1(r){const e=He(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=G1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NO.bind(null,e),e.Pu.H_=_O.bind(null,e.eventManager),e.Pu.yu=vO.bind(null,e.eventManager),e}class id{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return GN(this.persistence,new HN,e.initialUser,this.serializer)}Cu(e){return new P1(Cp.mi,this.serializer)}Du(e){return new JN}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}id.provider={build:()=>new id};class jO extends id{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){mt(this.persistence.referenceDelegate instanceof sd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new CN(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new P1((s=>sd.mi(s,t)),this.serializer)}}class zg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Jb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=kO.bind(null,this.syncEngine),await fO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new gO})()}createDatastore(e){const t=kd(e.databaseInfo.databaseId),s=(function(l){return new nO(l)})(e.databaseInfo);return(function(l,c,f,g){return new aO(l,c,f,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,l,c,f){return new lO(s,a,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>Jb(this.syncEngine,t,0)),(function(){return $b.v()?new $b:new WN})())}createSyncEngine(e,t){return(function(a,l,c,f,g,p,b){const E=new SO(a,l,c,f,g,p);return b&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=He(a);ce(zo,"RemoteStore shutting down."),l.Ea.add(5),await zu(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}zg.provider={build:()=>new zg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):_s("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i="FirestoreClient";class MO{constructor(e,t,s,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=an.UNAUTHENTICATED,this.clientId=QE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{ce(_i,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(ce(_i,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new la;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=q1(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function ng(r,e){r.asyncQueue.verifyOperationInProgress(),ce(_i,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async a=>{s.isEqual(a)||(await M1(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Zb(r,e){r.asyncQueue.verifyOperationInProgress();const t=await VO(r);ce(_i,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>Kb(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,a)=>Kb(e.remoteStore,a))),r._onlineComponents=e}async function VO(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ce(_i,"Using user provided OfflineComponentProvider");try{await ng(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===re.FAILED_PRECONDITION||a.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Po("Error using user provided cache. Falling back to memory cache: "+t),await ng(r,new id)}}else ce(_i,"Using default OfflineComponentProvider"),await ng(r,new jO(void 0));return r._offlineComponents}async function UO(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ce(_i,"Using user provided OnlineComponentProvider"),await Zb(r,r._uninitializedComponentsProvider._online)):(ce(_i,"Using default OnlineComponentProvider"),await Zb(r,new zg))),r._onlineComponents}async function LO(r){const e=await UO(r),t=e.eventManager;return t.onListen=AO.bind(null,e.syncEngine),t.onUnlisten=CO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=RO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=IO.bind(null,e.syncEngine),t}function zO(r,e,t={}){const s=new la;return r.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,g,p){const b=new PO({next:S=>{b.Nu(),c.enqueueAndForget((()=>yO(l,E))),S.fromCache&&g.source==="server"?p.reject(new he(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),E=new bO(f,b,{includeMetadataChanges:!0,qa:!0});return pO(l,E)})(await LO(r),r.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="firestore.googleapis.com",tw=!0;class nw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=J1,this.ssl=tw}else this.host=e.host,this.ssl=e.ssl??tw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=j1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<RN)throw new he(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=X1(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new he(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new he(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new he(re.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lp{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new iI;switch(s.type){case"firstParty":return new uI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new he(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=ew.get(t);s&&(ce("ComponentProvider","Removing Datastore"),ew.delete(t),s.terminate())})(this),Promise.resolve()}}function BO(r,e,t,s={}){var p;r=Sg(r,Lp);const a=ma(e),l=r._getSettings(),c={...l,emulatorOptions:r._getEmulatorOptions()},f=`${e}:${t}`;a&&(ap(`https://${f}`),op("Firestore",!0)),l.host!==J1&&l.host!==f&&Po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:a,emulatorOptions:s};if(!ca(g,c)&&(r._setSettings(g),s.mockUserToken)){let b,E;if(typeof s.mockUserToken=="string")b=s.mockUserToken,E=an.MOCK_USER;else{b=tE(s.mockUserToken,(p=r._app)==null?void 0:p.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new he(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new an(S)}r._authCredentials=new aI(new KE(b,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new _a(this.firestore,e,this._query)}}class fn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Io(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fn(this.firestore,e,this._key)}toJSON(){return{type:fn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Uu(t,fn._jsonSchema))return new fn(e,s||null,new be(ht.fromString(t.referencePath)))}}fn._jsonSchemaVersion="firestore/documentReference/1.0",fn._jsonSchema={type:Mt("string",fn._jsonSchemaVersion),referencePath:Mt("string")};class Io extends _a{constructor(e,t,s){super(e,t,h1(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fn(this.firestore,null,new be(e))}withConverter(e){return new Io(this.firestore,e,this._path)}}function qO(r,e,...t){if(r=jn(r),r instanceof Lp){const s=ht.fromString(e,...t);return mb(s),new Io(r,null,s)}{if(!(r instanceof fn||r instanceof Io))throw new he(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ht.fromString(e,...t));return mb(s),new Io(r.firestore,null,s)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="AsyncQueue";class sw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new U1(this,"async_queue_retry"),this._c=()=>{const s=tg();s&&ce(rw,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=tg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=tg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new la;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ko(e))throw e;ce(rw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,_s("INTERNAL UNHANDLED ERROR: ",iw(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Pp.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Ce(47125,{Pc:iw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function iw(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class W1 extends Lp{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new sw,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sw(e),this._firestoreClient=void 0,await e}}}function HO(r,e){const t=typeof r=="object"?r:yd(),s=typeof r=="string"?r:Zh,a=pd(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=Ww("firestore");l&&BO(a,...l)}return a}function $O(r){if(r._terminated)throw new he(re.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||FO(r),r._firestoreClient}function FO(r){var s,a,l;const e=r._freezeSettings(),t=(function(f,g,p,b){return new xI(f,g,p,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,X1(b.experimentalLongPollingOptions),b.useFetchStreams,b.isUsingEmulator)})(r._databaseId,((s=r._app)==null?void 0:s.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new MO(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yn(en.fromBase64String(e))}catch(t){throw new he(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yn(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Uu(e,Yn._jsonSchema))return Yn.fromBase64String(e.bytes)}}Yn._jsonSchemaVersion="firestore/bytes/1.0",Yn._jsonSchema={type:Mt("string",Yn._jsonSchemaVersion),bytes:Mt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hr._jsonSchemaVersion}}static fromJSON(e){if(Uu(e,Hr._jsonSchema))return new Hr(e.latitude,e.longitude)}}Hr._jsonSchemaVersion="firestore/geoPoint/1.0",Hr._jsonSchema={type:Mt("string",Hr._jsonSchemaVersion),latitude:Mt("number"),longitude:Mt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:$r._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Uu(e,$r._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new $r(e.vectorValues);throw new he(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$r._jsonSchemaVersion="firestore/vectorValue/1.0",$r._jsonSchema={type:Mt("string",$r._jsonSchemaVersion),vectorValues:Mt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=/^__.*__$/;function tT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:r})}}class zp{constructor(e,t,s,a,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new zp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bg(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(tT(this.Ac)&&GO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class KO{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||kd(e)}Cc(e,t,s,a=!1){return new zp({Ac:e,methodName:t,Dc:s,path:ln.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function QO(r){const e=r._freezeSettings(),t=kd(r._databaseId);return new KO(r._databaseId,!!e.ignoreUndefinedProperties,t)}function YO(r,e,t,s=!1){return Bp(t,r.Cc(s?4:3,e))}function Bp(r,e){if(nT(r=jn(r)))return JO("Unsupported field value:",e,r),XO(r,e);if(r instanceof eT)return(function(s,a){if(!tT(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,a){const l=[];let c=0;for(const f of s){let g=Bp(f,a.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),c++}return{arrayValue:{values:l}}})(r,e)}return(function(s,a){if((s=jn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return XI(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=dt.fromDate(s);return{timestampValue:jg(a.serializer,l)}}if(s instanceof dt){const l=new dt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:jg(a.serializer,l)}}if(s instanceof Hr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Yn)return{bytesValue:R1(a.serializer,s._byteString)};if(s instanceof fn){const l=a.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:x1(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof $r)return(function(c,f){return{mapValue:{fields:{[r1]:{stringValue:s1},[ed]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw f.Sc("VectorValues must only contain numeric values.");return Tp(f.serializer,p)}))}}}}}})(s,a);throw a.Sc(`Unsupported field value: ${Ed(s)}`)})(r,e)}function XO(r,e){const t={};return JE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qo(r,((s,a)=>{const l=Bp(a,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function nT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof dt||r instanceof Hr||r instanceof Yn||r instanceof fn||r instanceof eT||r instanceof $r)}function JO(r,e,t){if(!nT(t)||!YE(t)){const s=Ed(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}const WO=new RegExp("[~\\*/\\[\\]]");function ZO(r,e,t){if(e.search(WO)>=0)throw Bg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Z1(...e.split("."))._internalPath}catch{throw Bg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Bg(r,e,t,s,a){const l=s&&!s.isEmpty(),c=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||c)&&(g+=" (found",l&&(g+=` in field ${s}`),c&&(g+=` in document ${a}`),g+=")"),new he(re.INVALID_ARGUMENT,f+r+g)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new fn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new e5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class e5 extends rT{data(){return super.data()}}function jd(r,e){return typeof e=="string"?ZO(r,e):e instanceof Z1?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t5(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new he(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qp{}class sT extends qp{}function n5(r,e,...t){let s=[];e instanceof qp&&s.push(e),s=s.concat(t),(function(l){const c=l.filter((g=>g instanceof Hp)).length,f=l.filter((g=>g instanceof Pd)).length;if(c>1||c>0&&f>0)throw new he(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)r=a._apply(r);return r}class Pd extends sT{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Pd(e,t,s)}_apply(e){const t=this._parse(e);return iT(e._query,t),new _a(e.firestore,e.converter,Ig(e._query,t))}_parse(e){const t=QO(e.firestore);return(function(l,c,f,g,p,b,E){let S;if(p.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new he(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){ow(E,b);const k=[];for(const j of E)k.push(aw(g,l,j));S={arrayValue:{values:k}}}else S=aw(g,l,E)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||ow(E,b),S=YO(f,c,E,b==="in"||b==="not-in");return Pt.create(p,b,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function r5(r,e,t){const s=e,a=jd("where",r);return Pd._create(a,s,t)}class Hp extends qp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Hp(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:mr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const f=l.getFlattenedFilters();for(const g of f)iT(c,g),c=Ig(c,g)})(e._query,t),new _a(e.firestore,e.converter,Ig(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $p extends sT{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new $p(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new he(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new he(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Cu(l,c)})(e._query,this._field,this._direction);return new _a(e.firestore,e.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new Yo(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function s5(r,e="asc"){const t=e,s=jd("orderBy",r);return $p._create(s,t)}function aw(r,e,t){if(typeof(t=jn(t))=="string"){if(t==="")throw new he(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!d1(e)&&t.indexOf("/")!==-1)throw new he(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(ht.fromString(t));if(!be.isDocumentKey(s))throw new he(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Eb(r,new be(s))}if(t instanceof fn)return Eb(r,t._key);throw new he(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ed(t)}.`)}function ow(r,e){if(!Array.isArray(r)||r.length===0)throw new he(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iT(r,e){const t=(function(a,l){for(const c of a)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(r.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class i5{convertValue(e,t="none"){switch(pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Qo(e,((a,l)=>{s[a]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,a,l;const t=(l=(a=(s=e.fields)==null?void 0:s[ed].arrayValue)==null?void 0:a.values)==null?void 0:l.map((c=>Et(c.doubleValue)));return new $r(t)}convertGeoPoint(e){return new Hr(Et(e.latitude),Et(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Rd(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Au(e));default:return null}}convertTimestamp(e){const t=mi(e);return new dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=ht.fromString(e);mt(D1(s),9688,{name:e});const a=new Ru(s.get(1),s.get(3)),l=new be(s.popFirst(5));return a.isEqual(t)||_s(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class Sh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class No extends rT{constructor(e,t,s,a,l,c){super(e,t,s,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $h(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(jd("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=No._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}No._jsonSchemaVersion="firestore/documentSnapshot/1.0",No._jsonSchema={type:Mt("string",No._jsonSchemaVersion),bundleSource:Mt("string","DocumentSnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class $h extends No{data(e={}){return super.data(e)}}class Oo{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Sh(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new $h(this._firestore,this._userDataWriter,s.key,s,new Sh(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((f=>{const g=new $h(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Sh(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new $h(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Sh(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,b=-1;return f.type!==0&&(p=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),b=c.indexOf(f.doc.key)),{type:a5(f.type),doc:g,oldIndex:p,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Oo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=QE.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function a5(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:r})}}Oo._jsonSchemaVersion="firestore/querySnapshot/1.0",Oo._jsonSchema={type:Mt("string",Oo._jsonSchemaVersion),bundleSource:Mt("string","QuerySnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class o5 extends i5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fn(this.firestore,null,t)}}function l5(r){r=Sg(r,_a);const e=Sg(r.firestore,W1),t=$O(e),s=new o5(e);return t5(r._query),zO(t,r._query).then((a=>new Oo(e,s,r,a)))}(function(e,t=!0){(function(a){Go=a})(ga),ha(new di("firestore",((s,{instanceIdentifier:a,options:l})=>{const c=s.getProvider("app").getImmediate(),f=new W1(new oI(s.getProvider("auth-internal")),new cI(c,s.getProvider("app-check-internal")),(function(p,b){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new he(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ru(p.options.projectId,b)})(c,a),c);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Lr(cb,hb,e),Lr(cb,hb,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="firebasestorage.googleapis.com",u5="storageBucket",c5=120*1e3,h5=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bi=class oT extends Kr{constructor(e,t,s=0){super(rg(e),`Firebase Storage: ${t} (${rg(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,oT.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return rg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var Gr;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Gr||(Gr={}));function rg(r){return"storage/"+r}function d5(){const r="An unknown error occurred, please check the error payload for server response.";return new bi(Gr.UNKNOWN,r)}function f5(){return new bi(Gr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function m5(){return new bi(Gr.CANCELED,"User canceled the upload/download.")}function g5(r){return new bi(Gr.INVALID_URL,"Invalid URL '"+r+"'.")}function p5(r){return new bi(Gr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function lw(r){return new bi(Gr.INVALID_ARGUMENT,r)}function lT(){return new bi(Gr.APP_DELETED,"The Firebase app was deleted.")}function y5(r){return new bi(Gr.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=dr.makeFromUrl(e,t)}catch{return new dr(e,"")}if(s.path==="")return s;throw p5(e)}static makeFromUrl(e,t){let s=null;const a="([A-Za-z0-9.\\-_]+)";function l(ne){ne.path.charAt(ne.path.length-1)==="/"&&(ne.path_=ne.path_.slice(0,-1))}const c="(/(.*))?$",f=new RegExp("^gs://"+a+c,"i"),g={bucket:1,path:3};function p(ne){ne.path_=decodeURIComponent(ne.path)}const b="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",R=new RegExp(`^https?://${E}/${b}/b/${a}/o${S}`,"i"),k={bucket:1,path:3},j=t===aT?"(?:storage.googleapis.com|storage.cloud.google.com)":t,D="([^?#]*)",q=new RegExp(`^https?://${j}/${a}/${D}`,"i"),G=[{regex:f,indices:g,postModify:l},{regex:R,indices:k,postModify:p},{regex:q,indices:{bucket:1,path:2},postModify:p}];for(let ne=0;ne<G.length;ne++){const _e=G[ne],le=_e.regex.exec(e);if(le){const C=le[_e.indices.bucket];let x=le[_e.indices.path];x||(x=""),s=new dr(C,x),_e.postModify(s);break}}if(s==null)throw g5(e);return s}}class _5{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5(r,e,t){let s=1,a=null,l=null,c=!1,f=0;function g(){return f===2}let p=!1;function b(...D){p||(p=!0,e.apply(null,D))}function E(D){a=setTimeout(()=>{a=null,r(R,g())},D)}function S(){l&&clearTimeout(l)}function R(D,...q){if(p){S();return}if(D){S(),b.call(null,D,...q);return}if(g()||c){S(),b.call(null,D,...q);return}s<64&&(s*=2);let G;f===1?(f=2,G=0):G=(s+Math.random())*1e3,E(G)}let k=!1;function j(D){k||(k=!0,S(),!p&&(a!==null?(D||(f=2),clearTimeout(a),E(0)):D||(f=1)))}return E(0),l=setTimeout(()=>{c=!0,j(!0)},t),j}function b5(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w5(r){return r!==void 0}function uw(r,e,t,s){if(s<e)throw lw(`Invalid value for '${r}'. Expected ${e} or greater.`);if(s>t)throw lw(`Invalid value for '${r}'. Expected ${t} or less.`)}function E5(r){const e=encodeURIComponent;let t="?";for(const s in r)if(r.hasOwnProperty(s)){const a=e(s)+"="+e(r[s]);t=t+a+"&"}return t=t.slice(0,-1),t}var ad;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(ad||(ad={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T5(r,e){const t=r>=500&&r<600,a=[408,429].indexOf(r)!==-1,l=e.indexOf(r)!==-1;return t||a||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e,t,s,a,l,c,f,g,p,b,E,S=!0,R=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=g,this.timeout_=p,this.progressCallback_=b,this.connectionFactory_=E,this.retry=S,this.isUsingEmulator=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,j)=>{this.resolve_=k,this.reject_=j,this.start_()})}start_(){const e=(s,a)=>{if(a){s(!1,new Ah(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=f=>{const g=f.loaded,p=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,p)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const f=l.getErrorCode()===ad.NO_ERROR,g=l.getStatus();if(!f||T5(g,this.additionalRetryCodes_)&&this.retry){const b=l.getErrorCode()===ad.ABORT;s(!1,new Ah(!1,null,b));return}const p=this.successCodes_.indexOf(g)!==-1;s(!0,new Ah(p,l))})},t=(s,a)=>{const l=this.resolve_,c=this.reject_,f=a.connection;if(a.wasSuccessCode)try{const g=this.callback_(f,f.getResponse());w5(g)?l(g):l()}catch(g){c(g)}else if(f!==null){const g=d5();g.serverResponse=f.getErrorText(),this.errorCallback_?c(this.errorCallback_(f,g)):c(g)}else if(a.canceled){const g=this.appDelete_?lT():m5();c(g)}else{const g=f5();c(g)}};this.canceled_?t(!1,new Ah(!1,null,!0)):this.backoffId_=v5(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&b5(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ah{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function A5(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function R5(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function x5(r,e){e&&(r["X-Firebase-GMPID"]=e)}function C5(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function I5(r,e,t,s,a,l,c=!0,f=!1){const g=E5(r.urlParams),p=r.url+g,b=Object.assign({},r.headers);return x5(b,e),A5(b,t),R5(b,l),C5(b,s),new S5(p,r.method,b,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,a,c,f)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N5(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function O5(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t){this._service=e,t instanceof dr?this._location=t:this._location=dr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new od(e,t)}get root(){const e=new dr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return O5(this._location.path)}get storage(){return this._service}get parent(){const e=N5(this._location.path);if(e===null)return null;const t=new dr(this._location.bucket,e);return new od(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw y5(e)}}function cw(r,e){const t=e==null?void 0:e[u5];return t==null?null:dr.makeFromBucketSpec(t,r)}function k5(r,e,t,s={}){r.host=`${e}:${t}`;const a=ma(e);a&&(ap(`https://${r.host}/b`),op("Storage",!0)),r._isUsingEmulator=!0,r._protocol=a?"https":"http";const{mockUserToken:l}=s;l&&(r._overrideAuthToken=typeof l=="string"?l:tE(l,r.app.options.projectId))}class D5{constructor(e,t,s,a,l,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=aT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=c5,this._maxUploadRetryTime=h5,this._requests=new Set,a!=null?this._bucket=dr.makeFromBucketSpec(a,this._host):this._bucket=cw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=dr.makeFromBucketSpec(this._url,e):this._bucket=cw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){uw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){uw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new od(this,e)}_makeRequest(e,t,s,a,l=!0){if(this._deleted)return new _5(lT());{const c=I5(e,this._appId,s,a,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[s,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,a).getPromise()}}const hw="@firebase/storage",dw="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="storage";function j5(r=yd(),e){r=jn(r);const s=pd(r,uT).getImmediate({identifier:e}),a=Ww("storage");return a&&P5(s,...a),s}function P5(r,e,t,s={}){k5(r,e,t,s)}function M5(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),s=r.getProvider("auth-internal"),a=r.getProvider("app-check-internal");return new D5(t,s,a,e,ga)}function V5(){ha(new di(uT,M5,"PUBLIC").setMultipleInstances(!0)),Lr(hw,dw,""),Lr(hw,dw,"esm2020")}V5();const U5={apiKey:"AIzaSyDll7h-FpzCVml2vy8KeMPA6xExGUda_NE",authDomain:"thi-tnd.firebaseapp.com",projectId:"thi-tnd",storageBucket:"thi-tnd.firebasestorage.app",messagingSenderId:"107125875663",appId:"1:107125875663:web:0e1a632779f51340c828ba",databaseURL:"https://thi-tnd-default-rtdb.asia-southeast1.firebasedatabase.app"},Fp=DR().length?yd():sE(U5),cT=rI(Fp),L5=HO(Fp);j5(Fp);var qg=function(r,e){return qg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])},qg(r,e)};function hT(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");qg(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ld=function(){return ld=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++){t=arguments[s];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},ld.apply(this,arguments)};function Jo(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(r);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(r,s[a])&&(t[s[a]]=r[s[a]]);return t}function dT(r,e,t,s){var a=arguments.length,l=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(r,e,t,s);else for(var f=r.length-1;f>=0;f--)(c=r[f])&&(l=(a<3?c(l):a>3?c(e,t,l):c(e,t))||l);return a>3&&l&&Object.defineProperty(e,t,l),l}function fT(r,e){return function(t,s){e(t,s,r)}}function mT(r,e,t,s,a,l){function c(q){if(q!==void 0&&typeof q!="function")throw new TypeError("Function expected");return q}for(var f=s.kind,g=f==="getter"?"get":f==="setter"?"set":"value",p=!e&&r?s.static?r:r.prototype:null,b=e||(p?Object.getOwnPropertyDescriptor(p,s.name):{}),E,S=!1,R=t.length-1;R>=0;R--){var k={};for(var j in s)k[j]=j==="access"?{}:s[j];for(var j in s.access)k.access[j]=s.access[j];k.addInitializer=function(q){if(S)throw new TypeError("Cannot add initializers after decoration has completed");l.push(c(q||null))};var D=(0,t[R])(f==="accessor"?{get:b.get,set:b.set}:b[g],k);if(f==="accessor"){if(D===void 0)continue;if(D===null||typeof D!="object")throw new TypeError("Object expected");(E=c(D.get))&&(b.get=E),(E=c(D.set))&&(b.set=E),(E=c(D.init))&&a.unshift(E)}else(E=c(D))&&(f==="field"?a.unshift(E):b[g]=E)}p&&Object.defineProperty(p,s.name,b),S=!0}function gT(r,e,t){for(var s=arguments.length>2,a=0;a<e.length;a++)t=s?e[a].call(r,t):e[a].call(r);return s?t:void 0}function pT(r){return typeof r=="symbol"?r:"".concat(r)}function yT(r,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function _T(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function fe(r,e,t,s){function a(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function f(b){try{p(s.next(b))}catch(E){c(E)}}function g(b){try{p(s.throw(b))}catch(E){c(E)}}function p(b){b.done?l(b.value):a(b.value).then(f,g)}p((s=s.apply(r,e||[])).next())})}function vT(r,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=f(0),c.throw=f(1),c.return=f(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(p){return function(b){return g([p,b])}}function g(p){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(t=0)),t;)try{if(s=1,a&&(l=p[0]&2?a.return:p[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,p[1])).done)return l;switch(a=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,a=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){t.label=p[1];break}if(p[0]===6&&t.label<l[1]){t.label=l[1],l=p;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(p);break}l[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(r,t)}catch(b){p=[6,b],a=0}finally{s=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var Md=Object.create?(function(r,e,t,s){s===void 0&&(s=t);var a=Object.getOwnPropertyDescriptor(e,t);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,s,a)}):(function(r,e,t,s){s===void 0&&(s=t),r[s]=e[t]});function bT(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Md(e,r,t)}function ud(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],s=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gp(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var s=t.call(r),a,l=[],c;try{for(;(e===void 0||e-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(c)throw c.error}}return l}function wT(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Gp(arguments[e]));return r}function ET(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var s=Array(r),a=0,e=0;e<t;e++)for(var l=arguments[e],c=0,f=l.length;c<f;c++,a++)s[a]=l[c];return s}function TT(r,e,t){if(t||arguments.length===2)for(var s=0,a=e.length,l;s<a;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return r.concat(l||Array.prototype.slice.call(e))}function qo(r){return this instanceof qo?(this.v=r,this):new qo(r)}function ST(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(r,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(R){return function(k){return Promise.resolve(k).then(R,E)}}function f(R,k){s[R]&&(a[R]=function(j){return new Promise(function(D,q){l.push([R,j,D,q])>1||g(R,j)})},k&&(a[R]=k(a[R])))}function g(R,k){try{p(s[R](k))}catch(j){S(l[0][3],j)}}function p(R){R.value instanceof qo?Promise.resolve(R.value.v).then(b,E):S(l[0][2],R)}function b(R){g("next",R)}function E(R){g("throw",R)}function S(R,k){R(k),l.shift(),l.length&&g(l[0][0],l[0][1])}}function AT(r){var e,t;return e={},s("next"),s("throw",function(a){throw a}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(a,l){e[a]=r[a]?function(c){return(t=!t)?{value:qo(r[a](c)),done:!1}:l?l(c):c}:l}}function RT(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof ud=="function"?ud(r):r[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=r[l]&&function(c){return new Promise(function(f,g){c=r[l](c),a(f,g,c.done,c.value)})}}function a(l,c,f,g){Promise.resolve(g).then(function(p){l({value:p,done:f})},c)}}function xT(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}var z5=Object.create?(function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}):function(r,e){r.default=e},Hg=function(r){return Hg=Object.getOwnPropertyNames||function(e){var t=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[t.length]=s);return t},Hg(r)};function CT(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t=Hg(r),s=0;s<t.length;s++)t[s]!=="default"&&Md(e,r,t[s]);return z5(e,r),e}function IT(r){return r&&r.__esModule?r:{default:r}}function NT(r,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(r):s?s.value:e.get(r)}function OT(r,e,t,s,a){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!a:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?a.call(r,t):a?a.value=t:e.set(r,t),t}function kT(r,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?e===r:r.has(e)}function DT(r,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,a;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose],t&&(a=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");a&&(s=function(){try{a.call(this)}catch(l){return Promise.reject(l)}}),r.stack.push({value:e,dispose:s,async:t})}else t&&r.stack.push({async:!0});return e}var B5=typeof SuppressedError=="function"?SuppressedError:function(r,e,t){var s=new Error(t);return s.name="SuppressedError",s.error=r,s.suppressed=e,s};function jT(r){function e(l){r.error=r.hasError?new B5(l,r.error,"An error was suppressed during disposal."):l,r.hasError=!0}var t,s=0;function a(){for(;t=r.stack.pop();)try{if(!t.async&&s===1)return s=0,r.stack.push(t),Promise.resolve().then(a);if(t.dispose){var l=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(l).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error}return a()}function PT(r,e){return typeof r=="string"&&/^\.\.?\//.test(r)?r.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,s,a,l,c){return s?e?".jsx":".js":a&&(!l||!c)?t:a+l+"."+c.toLowerCase()+"js"}):r}const q5={__extends:hT,__assign:ld,__rest:Jo,__decorate:dT,__param:fT,__esDecorate:mT,__runInitializers:gT,__propKey:pT,__setFunctionName:yT,__metadata:_T,__awaiter:fe,__generator:vT,__createBinding:Md,__exportStar:bT,__values:ud,__read:Gp,__spread:wT,__spreadArrays:ET,__spreadArray:TT,__await:qo,__asyncGenerator:ST,__asyncDelegator:AT,__asyncValues:RT,__makeTemplateObject:xT,__importStar:CT,__importDefault:IT,__classPrivateFieldGet:NT,__classPrivateFieldSet:OT,__classPrivateFieldIn:kT,__addDisposableResource:DT,__disposeResources:jT,__rewriteRelativeImportExtension:PT},H5=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:DT,get __assign(){return ld},__asyncDelegator:AT,__asyncGenerator:ST,__asyncValues:RT,__await:qo,__awaiter:fe,__classPrivateFieldGet:NT,__classPrivateFieldIn:kT,__classPrivateFieldSet:OT,__createBinding:Md,__decorate:dT,__disposeResources:jT,__esDecorate:mT,__exportStar:bT,__extends:hT,__generator:vT,__importDefault:IT,__importStar:CT,__makeTemplateObject:xT,__metadata:_T,__param:fT,__propKey:pT,__read:Gp,__rest:Jo,__rewriteRelativeImportExtension:PT,__runInitializers:gT,__setFunctionName:yT,__spread:wT,__spreadArray:TT,__spreadArrays:ET,__values:ud,default:q5},Symbol.toStringTag,{value:"Module"})),$5=r=>r?(...e)=>r(...e):(...e)=>fetch(...e);class Kp extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class F5 extends Kp{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class fw extends Kp{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class mw extends Kp{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var $g;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})($g||($g={}));class G5{constructor(e,{headers:t={},customFetch:s,region:a=$g.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=$5(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return fe(this,arguments,void 0,function*(t,s={}){var a;let l,c;try{const{headers:f,method:g,body:p,signal:b,timeout:E}=s;let S={},{region:R}=s;R||(R=this.region);const k=new URL(`${this.url}/${t}`);R&&R!=="any"&&(S["x-region"]=R,k.searchParams.set("forceFunctionRegion",R));let j;p&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(S["Content-Type"]="application/octet-stream",j=p):typeof p=="string"?(S["Content-Type"]="text/plain",j=p):typeof FormData<"u"&&p instanceof FormData?j=p:(S["Content-Type"]="application/json",j=JSON.stringify(p)):j=p;let D=b;E&&(c=new AbortController,l=setTimeout(()=>c.abort(),E),b?(D=c.signal,b.addEventListener("abort",()=>c.abort())):D=c.signal);const q=yield this.fetch(k.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},S),this.headers),f),body:j,signal:D}).catch(_e=>{throw new F5(_e)}),Y=q.headers.get("x-relay-error");if(Y&&Y==="true")throw new fw(q);if(!q.ok)throw new mw(q);let G=((a=q.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),ne;return G==="application/json"?ne=yield q.json():G==="application/octet-stream"||G==="application/pdf"?ne=yield q.blob():G==="text/event-stream"?ne=q:G==="multipart/form-data"?ne=yield q.formData():ne=yield q.text(),{data:ne,error:null,response:q}}catch(f){return{data:null,error:f,response:f instanceof mw||f instanceof fw?f.context:void 0}}finally{l&&clearTimeout(l)}})}}var sn={};const Wo=UA(H5);var Rh={},xh={},Ch={},Ih={},Nh={},Oh={},gw;function MT(){if(gw)return Oh;gw=1,Object.defineProperty(Oh,"__esModule",{value:!0});class r extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Oh.default=r,Oh}var pw;function VT(){if(pw)return Nh;pw=1,Object.defineProperty(Nh,"__esModule",{value:!0});const e=Wo.__importDefault(MT());class t{constructor(a){var l,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(c=a.isMaybeSingle)!==null&&c!==void 0?c:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let f=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var p,b,E,S;let R=null,k=null,j=null,D=g.status,q=g.statusText;if(g.ok){if(this.method!=="HEAD"){const _e=await g.text();_e===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?k=_e:k=JSON.parse(_e))}const G=(b=this.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),ne=(E=g.headers.get("content-range"))===null||E===void 0?void 0:E.split("/");G&&ne&&ne.length>1&&(j=parseInt(ne[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(R={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,j=null,D=406,q="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const G=await g.text();try{R=JSON.parse(G),Array.isArray(R)&&g.status===404&&(k=[],R=null,D=200,q="OK")}catch{g.status===404&&G===""?(D=204,q="No Content"):R={message:G}}if(R&&this.isMaybeSingle&&(!((S=R==null?void 0:R.details)===null||S===void 0)&&S.includes("0 rows"))&&(R=null,D=200,q="OK"),R&&this.shouldThrowOnError)throw new e.default(R)}return{error:R,data:k,count:j,status:D,statusText:q}});return this.shouldThrowOnError||(f=f.catch(g=>{var p,b,E,S,R,k;let j="";const D=g==null?void 0:g.cause;if(D){const q=(p=D==null?void 0:D.message)!==null&&p!==void 0?p:"",Y=(b=D==null?void 0:D.code)!==null&&b!==void 0?b:"";j=`${(E=g==null?void 0:g.name)!==null&&E!==void 0?E:"FetchError"}: ${g==null?void 0:g.message}`,j+=`

Caused by: ${(S=D==null?void 0:D.name)!==null&&S!==void 0?S:"Error"}: ${q}`,Y&&(j+=` (${Y})`),D!=null&&D.stack&&(j+=`
${D.stack}`)}else j=(R=g==null?void 0:g.stack)!==null&&R!==void 0?R:"";return{error:{message:`${(k=g==null?void 0:g.name)!==null&&k!==void 0?k:"FetchError"}: ${g==null?void 0:g.message}`,details:j,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),f.then(a,l)}returns(){return this}overrideTypes(){return this}}return Nh.default=t,Nh}var yw;function UT(){if(yw)return Ih;yw=1,Object.defineProperty(Ih,"__esModule",{value:!0});const e=Wo.__importDefault(VT());class t extends e.default{select(a){let l=!1;const c=(a??"*").split("").map(f=>/\s/.test(f)&&!l?"":(f==='"'&&(l=!l),f)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:l=!0,nullsFirst:c,foreignTable:f,referencedTable:g=f}={}){const p=g?`${g}.order`:"order",b=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${b?`${b},`:""}${a}.${l?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:c=l}={}){const f=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(f,`${a}`),this}range(a,l,{foreignTable:c,referencedTable:f=c}={}){const g=typeof f>"u"?"offset":`${f}.offset`,p=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(g,`${a}`),this.url.searchParams.set(p,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:l=!1,settings:c=!1,buffers:f=!1,wal:g=!1,format:p="text"}={}){var b;const E=[a?"analyze":null,l?"verbose":null,c?"settings":null,f?"buffers":null,g?"wal":null].filter(Boolean).join("|"),S=(b=this.headers.get("Accept"))!==null&&b!==void 0?b:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${S}"; options=${E};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Ih.default=t,Ih}var _w;function Qp(){if(_w)return Ch;_w=1,Object.defineProperty(Ch,"__esModule",{value:!0});const e=Wo.__importDefault(UT()),t=new RegExp("[,()]");class s extends e.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}regexMatch(l,c){return this.url.searchParams.append(l,`match.${c}`),this}regexIMatch(l,c){return this.url.searchParams.append(l,`imatch.${c}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}isDistinct(l,c){return this.url.searchParams.append(l,`isdistinct.${c}`),this}in(l,c){const f=Array.from(new Set(c)).map(g=>typeof g=="string"&&t.test(g)?`"${g}"`:`${g}`).join(",");return this.url.searchParams.append(l,`in.(${f})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:f,type:g}={}){let p="";g==="plain"?p="pl":g==="phrase"?p="ph":g==="websearch"&&(p="w");const b=f===void 0?"":`(${f})`;return this.url.searchParams.append(l,`${p}fts${b}.${c}`),this}match(l){return Object.entries(l).forEach(([c,f])=>{this.url.searchParams.append(c,`eq.${f}`)}),this}not(l,c,f){return this.url.searchParams.append(l,`not.${c}.${f}`),this}or(l,{foreignTable:c,referencedTable:f=c}={}){const g=f?`${f}.or`:"or";return this.url.searchParams.append(g,`(${l})`),this}filter(l,c,f){return this.url.searchParams.append(l,`${c}.${f}`),this}}return Ch.default=s,Ch}var vw;function LT(){if(vw)return xh;vw=1,Object.defineProperty(xh,"__esModule",{value:!0});const e=Wo.__importDefault(Qp());class t{constructor(a,{headers:l={},schema:c,fetch:f}){this.url=a,this.headers=new Headers(l),this.schema=c,this.fetch=f}select(a,l){const{head:c=!1,count:f}=l??{},g=c?"HEAD":"GET";let p=!1;const b=(a??"*").split("").map(E=>/\s/.test(E)&&!p?"":(E==='"'&&(p=!p),E)).join("");return this.url.searchParams.set("select",b),f&&this.headers.append("Prefer",`count=${f}`),new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:l,defaultToNull:c=!0}={}){var f;const g="POST";if(l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const p=a.reduce((b,E)=>b.concat(Object.keys(E)),[]);if(p.length>0){const b=[...new Set(p)].map(E=>`"${E}"`);this.url.searchParams.set("columns",b.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(a,{onConflict:l,ignoreDuplicates:c=!1,count:f,defaultToNull:g=!0}={}){var p;const b="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),f&&this.headers.append("Prefer",`count=${f}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const E=a.reduce((S,R)=>S.concat(Object.keys(R)),[]);if(E.length>0){const S=[...new Set(E)].map(R=>`"${R}"`);this.url.searchParams.set("columns",S.join(","))}}return new e.default({method:b,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(a,{count:l}={}){var c;const f="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:a}={}){var l;const c="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return xh.default=t,xh}var bw;function K5(){if(bw)return Rh;bw=1,Object.defineProperty(Rh,"__esModule",{value:!0});const r=Wo,e=r.__importDefault(LT()),t=r.__importDefault(Qp());class s{constructor(l,{headers:c={},schema:f,fetch:g}={}){this.url=l,this.headers=new Headers(c),this.schemaName=f,this.fetch=g}from(l){if(!l||typeof l!="string"||l.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const c=new URL(`${this.url}/${l}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,c={},{head:f=!1,get:g=!1,count:p}={}){var b;let E;const S=new URL(`${this.url}/rpc/${l}`);let R;f||g?(E=f?"HEAD":"GET",Object.entries(c).filter(([j,D])=>D!==void 0).map(([j,D])=>[j,Array.isArray(D)?`{${D.join(",")}}`:`${D}`]).forEach(([j,D])=>{S.searchParams.append(j,D)})):(E="POST",R=c);const k=new Headers(this.headers);return p&&k.set("Prefer",`count=${p}`),new t.default({method:E,url:S,headers:k,schema:this.schemaName,body:R,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}}return Rh.default=s,Rh}var ww;function Q5(){if(ww)return sn;ww=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.PostgrestError=sn.PostgrestBuilder=sn.PostgrestTransformBuilder=sn.PostgrestFilterBuilder=sn.PostgrestQueryBuilder=sn.PostgrestClient=void 0;const r=Wo,e=r.__importDefault(K5());sn.PostgrestClient=e.default;const t=r.__importDefault(LT());sn.PostgrestQueryBuilder=t.default;const s=r.__importDefault(Qp());sn.PostgrestFilterBuilder=s.default;const a=r.__importDefault(UT());sn.PostgrestTransformBuilder=a.default;const l=r.__importDefault(VT());sn.PostgrestBuilder=l.default;const c=r.__importDefault(MT());return sn.PostgrestError=c.default,sn.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:c.default},sn}var zT=Q5();const BT=tp(zT),Y5=VA({__proto__:null,default:BT},[zT]),{PostgrestClient:X5,PostgrestQueryBuilder:bD,PostgrestFilterBuilder:wD,PostgrestTransformBuilder:ED,PostgrestBuilder:TD,PostgrestError:SD}=BT||Y5;class J5{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const s=t.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const W5="2.86.0",Z5=`realtime-js/${W5}`,qT="1.0.0",e4="2.0.0",Ew=qT,Fg=1e4,t4=1e3,n4=100;var ra;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(ra||(ra={}));var zt;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(zt||(zt={}));var cr;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(cr||(cr={}));var Gg;(function(r){r.websocket="websocket"})(Gg||(Gg={}));var sa;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(sa||(sa={}));class r4{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,s;const a=(s=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var t,s;const a=(s=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&s!==void 0?s:{},c=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,t,s){var a,l;const c=e.topic,f=(a=e.ref)!==null&&a!==void 0?a:"",g=(l=e.join_ref)!==null&&l!==void 0?l:"",p=e.payload.event,b=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},E=Object.keys(b).length===0?"":JSON.stringify(b);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(E.length>255)throw new Error(`metadata length ${E.length} exceeds maximum of 255`);const S=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+f.length+c.length+p.length+E.length,R=new ArrayBuffer(this.HEADER_LENGTH+S);let k=new DataView(R),j=0;k.setUint8(j++,this.KINDS.userBroadcastPush),k.setUint8(j++,g.length),k.setUint8(j++,f.length),k.setUint8(j++,c.length),k.setUint8(j++,p.length),k.setUint8(j++,E.length),k.setUint8(j++,t),Array.from(g,q=>k.setUint8(j++,q.charCodeAt(0))),Array.from(f,q=>k.setUint8(j++,q.charCodeAt(0))),Array.from(c,q=>k.setUint8(j++,q.charCodeAt(0))),Array.from(p,q=>k.setUint8(j++,q.charCodeAt(0))),Array.from(E,q=>k.setUint8(j++,q.charCodeAt(0)));var D=new Uint8Array(R.byteLength+s.byteLength);return D.set(new Uint8Array(R),0),D.set(new Uint8Array(s),R.byteLength),D.buffer}decode(e,t){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return t(s)}if(typeof e=="string"){const s=JSON.parse(e),[a,l,c,f,g]=s;return t({join_ref:a,ref:l,topic:c,event:f,payload:g})}return t({})}_binaryDecode(e){const t=new DataView(e),s=t.getUint8(0),a=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,a)}}_decodeUserBroadcast(e,t,s){const a=t.getUint8(1),l=t.getUint8(2),c=t.getUint8(3),f=t.getUint8(4);let g=this.HEADER_LENGTH+4;const p=s.decode(e.slice(g,g+a));g=g+a;const b=s.decode(e.slice(g,g+l));g=g+l;const E=s.decode(e.slice(g,g+c));g=g+c;const S=e.slice(g,e.byteLength),R=f===this.JSON_ENCODING?JSON.parse(s.decode(S)):S,k={type:this.BROADCAST_EVENT,event:b,payload:R};return c>0&&(k.meta=JSON.parse(E)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:k}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>t.includes(s)))}}class HT{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var it;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(it||(it={}));const Tw=(r,e,t={})=>{var s;const a=(s=t.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,c)=>(l[c]=s4(c,r,e,a),l),{}):{}},s4=(r,e,t,s)=>{const a=e.find(f=>f.name===r),l=a==null?void 0:a.type,c=t[r];return l&&!s.includes(l)?$T(l,c):Kg(c)},$T=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return l4(e,t)}switch(r){case it.bool:return i4(e);case it.float4:case it.float8:case it.int2:case it.int4:case it.int8:case it.numeric:case it.oid:return a4(e);case it.json:case it.jsonb:return o4(e);case it.timestamp:return u4(e);case it.abstime:case it.date:case it.daterange:case it.int4range:case it.int8range:case it.money:case it.reltime:case it.text:case it.time:case it.timestamptz:case it.timetz:case it.tsrange:case it.tstzrange:return Kg(e);default:return Kg(e)}},Kg=r=>r,i4=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},a4=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},o4=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},l4=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let l;const c=r.slice(1,t);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(f=>$T(e,f))}return r},u4=r=>typeof r=="string"?r.replace(" ","T"):r,FT=r=>{const e=new URL(r);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class sg{constructor(e,t,s={},a=Fg){this.channel=e,this.event=t,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Sw;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Sw||(Sw={}));class yu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:l,onLeave:c,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=yu.syncState(this.state,a,l,c),this.pendingDiffs.forEach(g=>{this.state=yu.syncDiff(this.state,g,l,c)}),this.pendingDiffs=[],f()}),this.channel._on(s.diff,{},a=>{const{onJoin:l,onLeave:c,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=yu.syncDiff(this.state,a,l,c),f())}),this.onJoin((a,l,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:c})}),this.onLeave((a,l,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,a){const l=this.cloneDeep(e),c=this.transformState(t),f={},g={};return this.map(l,(p,b)=>{c[p]||(g[p]=b)}),this.map(c,(p,b)=>{const E=l[p];if(E){const S=b.map(D=>D.presence_ref),R=E.map(D=>D.presence_ref),k=b.filter(D=>R.indexOf(D.presence_ref)<0),j=E.filter(D=>S.indexOf(D.presence_ref)<0);k.length>0&&(f[p]=k),j.length>0&&(g[p]=j)}else f[p]=b}),this.syncDiff(l,{joins:f,leaves:g},s,a)}static syncDiff(e,t,s,a){const{joins:l,leaves:c}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(l,(f,g)=>{var p;const b=(p=e[f])!==null&&p!==void 0?p:[];if(e[f]=this.cloneDeep(g),b.length>0){const E=e[f].map(R=>R.presence_ref),S=b.filter(R=>E.indexOf(R.presence_ref)<0);e[f].unshift(...S)}s(f,b,g)}),this.map(c,(f,g)=>{let p=e[f];if(!p)return;const b=g.map(E=>E.presence_ref);p=p.filter(E=>b.indexOf(E.presence_ref)<0),e[f]=p,a(f,p,g),p.length===0&&delete e[f]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const a=e[s];return"metas"in a?t[s]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):t[s]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Aw;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Aw||(Aw={}));var _u;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(_u||(_u={}));var fs;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(fs||(fs={}));class Yp{constructor(e,t={config:{}},s){var a,l;if(this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=zt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new sg(this,cr.join,this.params,this.timeout),this.rejoinTimer=new HT(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=zt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=zt.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(cr.reply,{},(c,f)=>{this._trigger(this._replyEventName(f),c)}),this.presence=new yu(this),this.broadcastEndpointURL=FT(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var s,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==zt.closed){const{config:{broadcast:c,presence:f,private:g}}=this.params,p=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(R=>R.filter))!==null&&a!==void 0?a:[],b=!!this.bindings[_u.PRESENCE]&&this.bindings[_u.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,E={},S={broadcast:c,presence:Object.assign(Object.assign({},f),{enabled:b}),postgres_changes:p,private:g};this.socket.accessTokenValue&&(E.access_token=this.socket.accessTokenValue),this._onError(R=>e==null?void 0:e(fs.CHANNEL_ERROR,R)),this._onClose(()=>e==null?void 0:e(fs.CLOSED)),this.updateJoinPayload(Object.assign({config:S},E)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:R})=>{var k;if(this.socket.setAuth(),R===void 0){e==null||e(fs.SUBSCRIBED);return}else{const j=this.bindings.postgres_changes,D=(k=j==null?void 0:j.length)!==null&&k!==void 0?k:0,q=[];for(let Y=0;Y<D;Y++){const G=j[Y],{filter:{event:ne,schema:_e,table:le,filter:C}}=G,x=R&&R[Y];if(x&&x.event===ne&&x.schema===_e&&x.table===le&&x.filter===C)q.push(Object.assign(Object.assign({},G),{id:x.id}));else{this.unsubscribe(),this.state=zt.errored,e==null||e(fs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=q,e&&e(fs.SUBSCRIBED);return}}).receive("error",R=>{this.state=zt.errored,e==null||e(fs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(R).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(fs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===zt.joined&&e===_u.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async httpSend(e,t,s={}){var a;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(f.status===202)return{success:!0};let g=f.statusText;try{const p=await f.json();g=p.error||p.message||g}catch{}return Promise.reject(new Error(g))}async send(e,t={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=e,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=p.body)===null||a===void 0?void 0:a.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,f,g;const p=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(f=(c=this.params)===null||c===void 0?void 0:c.config)===null||f===void 0?void 0:f.broadcast)===null||g===void 0)&&g.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=zt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(cr.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new sg(this,cr.leave,{},e),s.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=zt.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const a=new AbortController,l=setTimeout(()=>a.abort(),s),c=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(l),c}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new sg(this,e,t,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>n4){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var a,l;const c=e.toLocaleLowerCase(),{close:f,error:g,leave:p,join:b}=cr;if(s&&[f,g,p,b].indexOf(c)>=0&&s!==this._joinRef())return;let S=this._onMessage(c,t,s);if(t&&!S)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(R=>{var k,j,D;return((k=R.filter)===null||k===void 0?void 0:k.event)==="*"||((D=(j=R.filter)===null||j===void 0?void 0:j.event)===null||D===void 0?void 0:D.toLocaleLowerCase())===c}).map(R=>R.callback(S,s)):(l=this.bindings[c])===null||l===void 0||l.filter(R=>{var k,j,D,q,Y,G;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in R){const ne=R.id,_e=(k=R.filter)===null||k===void 0?void 0:k.event;return ne&&((j=t.ids)===null||j===void 0?void 0:j.includes(ne))&&(_e==="*"||(_e==null?void 0:_e.toLocaleLowerCase())===((D=t.data)===null||D===void 0?void 0:D.type.toLocaleLowerCase()))}else{const ne=(Y=(q=R==null?void 0:R.filter)===null||q===void 0?void 0:q.event)===null||Y===void 0?void 0:Y.toLocaleLowerCase();return ne==="*"||ne===((G=t==null?void 0:t.event)===null||G===void 0?void 0:G.toLocaleLowerCase())}else return R.type.toLocaleLowerCase()===c}).map(R=>{if(typeof S=="object"&&"ids"in S){const k=S.data,{schema:j,table:D,commit_timestamp:q,type:Y,errors:G}=k;S=Object.assign(Object.assign({},{schema:j,table:D,commit_timestamp:q,eventType:Y,new:{},old:{},errors:G}),this._getPayloadRecords(k))}R.callback(S,s)})}_isClosed(){return this.state===zt.closed}_isJoined(){return this.state===zt.joined}_isJoining(){return this.state===zt.joining}_isLeaving(){return this.state===zt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const a=e.toLocaleLowerCase(),l={type:a,filter:t,callback:s};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&Yp.isEqual(a.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(cr.close,{},e)}_onError(e){this._on(cr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=zt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Tw(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Tw(e.columns,e.old_record)),t}}const ig=()=>{},kh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},c4=[1e3,2e3,5e3,1e4],h4=1e4,d4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class f4{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Fg,this.transport=null,this.heartbeatIntervalMs=kh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ig,this.ref=0,this.reconnectTimer=null,this.vsn=Ew,this.logger=ig,this.conn=null,this.sendBuffer=[],this.serializer=new r4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((s=t==null?void 0:t.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Gg.websocket}`,this.httpEndpoint=FT(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=J5.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case ra.connecting:return sa.Connecting;case ra.open:return sa.Open;case ra.closing:return sa.Closing;default:return sa.Closed}}isConnected(){return this.connectionState()===sa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===s);if(a)return a;{const l=new Yp(`realtime:${e}`,t,this);return this.channels.push(l),l}}push(e){const{topic:t,event:s,payload:a,ref:l}=e,c=()=>{this.encode(e,f=>{var g;(g=this.conn)===null||g===void 0||g.send(f)})};this.log("push",`${t} ${s} (${l})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(t4,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},kh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:l,ref:c}=t,f=c?`(${c})`:"",g=l.status||"";this.log("receive",`${g} ${s} ${a} ${f}`.trim(),l),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(a,l,c)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===ra.open||this.conn.readyState===ra.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(cr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${s}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([d4],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const a={access_token:t,version:Z5};t&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(cr.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new HT(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},kh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,a,l,c,f,g,p,b,E,S,R;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:Fg,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:kh.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(f=e==null?void 0:e.heartbeatCallback)!==null&&f!==void 0?f:ig,this.vsn=(g=e==null?void 0:e.vsn)!==null&&g!==void 0?g:Ew,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:(k=>c4[k-1]||h4),this.vsn){case qT:this.encode=(b=e==null?void 0:e.encode)!==null&&b!==void 0?b:((k,j)=>j(JSON.stringify(k))),this.decode=(E=e==null?void 0:e.decode)!==null&&E!==void 0?E:((k,j)=>j(JSON.parse(k)));break;case e4:this.encode=(S=e==null?void 0:e.encode)!==null&&S!==void 0?S:this.serializer.encode.bind(this.serializer),this.decode=(R=e==null?void 0:e.decode)!==null&&R!==void 0?R:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Vd extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ft(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class m4 extends Vd{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Qg extends Vd{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const Xp=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),g4=()=>Response,Yg=r=>{if(Array.isArray(r))return r.map(t=>Yg(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,s])=>{const a=t.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=Yg(s)}),e},p4=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},y4=r=>!r||typeof r!="string"||r.length===0||r.length>100||r.trim()!==r||r.includes("/")||r.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(r),ag=r=>{var e;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(e=r.error)===null||e===void 0?void 0:e.message)||JSON.stringify(r)},_4=(r,e,t)=>fe(void 0,void 0,void 0,function*(){const s=yield g4();r instanceof s&&!(t!=null&&t.noResolveJson)?r.json().then(a=>{const l=r.status||500,c=(a==null?void 0:a.statusCode)||l+"";e(new m4(ag(a),l,c))}).catch(a=>{e(new Qg(ag(a),a))}):e(new Qg(ag(r),r))}),v4=(r,e,t,s)=>{const a={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"||!s?a:(p4(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),t))};function qu(r,e,t,s,a,l){return fe(this,void 0,void 0,function*(){return new Promise((c,f)=>{r(t,v4(e,s,a,l)).then(g=>{if(!g.ok)throw g;return s!=null&&s.noResolveJson?g:g.json()}).then(g=>c(g)).catch(g=>_4(g,f,s))})})}function Iu(r,e,t,s){return fe(this,void 0,void 0,function*(){return qu(r,"GET",e,t,s)})}function ur(r,e,t,s,a){return fe(this,void 0,void 0,function*(){return qu(r,"POST",e,s,a,t)})}function Xg(r,e,t,s,a){return fe(this,void 0,void 0,function*(){return qu(r,"PUT",e,s,a,t)})}function b4(r,e,t,s){return fe(this,void 0,void 0,function*(){return qu(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function Jp(r,e,t,s,a){return fe(this,void 0,void 0,function*(){return qu(r,"DELETE",e,s,a,t)})}class w4{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return fe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ft(e))return{data:null,error:e};throw e}})}}var GT;class E4{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[GT]="BlobDownloadBuilder",this.promise=null}asStream(){return new w4(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return fe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ft(e))return{data:null,error:e};throw e}})}}GT=Symbol.toStringTag;const T4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Rw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class S4{constructor(e,t={},s,a){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=Xp(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,s,a){return fe(this,void 0,void 0,function*(){try{let l;const c=Object.assign(Object.assign({},Rw),a);let f=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const g=c.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),g&&l.append("metadata",this.encodeMetadata(g)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),g&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(g))):(l=s,f["cache-control"]=`max-age=${c.cacheControl}`,f["content-type"]=c.contentType,g&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(g))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),a!=null&&a.headers&&(f=Object.assign(Object.assign({},f),a.headers));const p=this._removeEmptyFolders(t),b=this._getFinalPath(p),E=yield(e=="PUT"?Xg:ur)(this.fetch,`${this.url}/object/${b}`,l,Object.assign({headers:f},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:p,id:E.Id,fullPath:E.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ft(l))return{data:null,error:l};throw l}})}upload(e,t,s){return fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,a){return fe(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),c=this._getFinalPath(l),f=new URL(this.url+`/object/upload/sign/${c}`);f.searchParams.set("token",t);try{let g;const p=Object.assign({upsert:Rw.upsert},a),b=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&s instanceof Blob?(g=new FormData,g.append("cacheControl",p.cacheControl),g.append("",s)):typeof FormData<"u"&&s instanceof FormData?(g=s,g.append("cacheControl",p.cacheControl)):(g=s,b["cache-control"]=`max-age=${p.cacheControl}`,b["content-type"]=p.contentType);const E=yield Xg(this.fetch,f.toString(),g,{headers:b});return{data:{path:l,fullPath:E.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(ft(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(e,t){return fe(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const l=yield ur(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),c=new URL(this.url+l.url),f=c.searchParams.get("token");if(!f)throw new Vd("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:f},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ft(s))return{data:null,error:s};throw s}})}update(e,t,s){return fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return fe(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}})}copy(e,t,s){return fe(this,void 0,void 0,function*(){try{return{data:{path:(yield ur(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,s){return fe(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield ur(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const c=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,s){return fe(this,void 0,void 0,function*(){try{const a=yield ur(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}})}download(e,t){const a=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),c=l?`?${l}`:"",f=this._getFinalPath(e),g=()=>Iu(this.fetch,`${this.url}/${a}/${f}${c}`,{headers:this.headers,noResolveJson:!0});return new E4(g,this.shouldThrowOnError)}info(e){return fe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield Iu(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Yg(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ft(s))return{data:null,error:s};throw s}})}exists(e){return fe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield b4(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ft(s)&&s instanceof Qg){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),a=[],l=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";l!==""&&a.push(l);const f=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",g=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});g!==""&&a.push(g);let p=a.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${s}${p}`)}}}remove(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Jp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}})}list(e,t,s){return fe(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},T4),t),{prefix:e||""});return{data:yield ur(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}})}listV2(e,t){return fe(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield ur(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ft(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const KT="2.86.0",QT={"X-Client-Info":`storage-js/${KT}`};class A4{constructor(e,t={},s,a){this.shouldThrowOnError=!1;const l=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},QT),t),this.fetch=Xp(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return fe(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield Iu(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}})}getBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Iu(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}})}createBucket(e){return fe(this,arguments,void 0,function*(t,s={public:!1}){try{return{data:yield ur(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}})}updateBucket(e,t){return fe(this,void 0,void 0,function*(){try{return{data:yield Xg(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ft(s))return{data:null,error:s};throw s}})}emptyBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}})}deleteBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Jp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}var Nu=class extends Error{constructor(r,e){var t;super(r),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function R4(r,e,t){const s=new URL(e,r);if(t)for(const[a,l]of Object.entries(t))l!==void 0&&s.searchParams.set(a,l);return s.toString()}async function x4(r){return!r||r.type==="none"?{}:r.type==="bearer"?{Authorization:`Bearer ${r.token}`}:r.type==="header"?{[r.name]:r.value}:r.type==="custom"?await r.getHeaders():{}}function C4(r){const e=r.fetchImpl??globalThis.fetch;return{async request({method:t,path:s,query:a,body:l,headers:c}){const f=R4(r.baseUrl,s,a),g=await x4(r.auth),p=await e(f,{method:t,headers:{...l?{"Content-Type":"application/json"}:{},...g,...c},body:l?JSON.stringify(l):void 0}),b=await p.text(),E=(p.headers.get("content-type")||"").includes("application/json"),S=E&&b?JSON.parse(b):b;if(!p.ok){const R=E?S:void 0,k=R==null?void 0:R.error;throw new Nu((k==null?void 0:k.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:k==null?void 0:k.type,icebergCode:k==null?void 0:k.code,details:R})}return{status:p.status,headers:p.headers,data:S}}}}function Dh(r){return r.join("")}var I4=class{constructor(r,e=""){this.client=r,this.prefix=e}async listNamespaces(r){const e=r?{parent:Dh(r.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(r,e){const t={namespace:r.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Dh(r.namespace)}`})}async loadNamespaceMetadata(r){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Dh(r.namespace)}`})).data.properties}}async namespaceExists(r){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Dh(r.namespace)}`}),!0}catch(e){if(e instanceof Nu&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(r,e){try{return await this.createNamespace(r,e)}catch(t){if(t instanceof Nu&&t.status===409)return;throw t}}};function co(r){return r.join("")}var N4=class{constructor(r,e="",t){this.client=r,this.prefix=e,this.accessDelegation=t}async listTables(r){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${co(r.namespace)}/tables`})).data.identifiers}async createTable(r,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${co(r.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(r,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${co(r.namespace)}/tables/${r.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(r,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${co(r.namespace)}/tables/${r.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(r){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${co(r.namespace)}/tables/${r.name}`,headers:e})).data.metadata}async tableExists(r){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${co(r.namespace)}/tables/${r.name}`,headers:e}),!0}catch(t){if(t instanceof Nu&&t.status===404)return!1;throw t}}async createTableIfNotExists(r,e){try{return await this.createTable(r,e)}catch(t){if(t instanceof Nu&&t.status===409)return await this.loadTable({namespace:r.namespace,name:e.name});throw t}}},O4=class{constructor(r){var s;let e="v1";r.catalogName&&(e+=`/${r.catalogName}`);const t=r.baseUrl.endsWith("/")?r.baseUrl:`${r.baseUrl}/`;this.client=C4({baseUrl:t,auth:r.auth,fetchImpl:r.fetch}),this.accessDelegation=(s=r.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new I4(this.client,e),this.tableOps=new N4(this.client,e,this.accessDelegation)}async listNamespaces(r){return this.namespaceOps.listNamespaces(r)}async createNamespace(r,e){return this.namespaceOps.createNamespace(r,e)}async dropNamespace(r){await this.namespaceOps.dropNamespace(r)}async loadNamespaceMetadata(r){return this.namespaceOps.loadNamespaceMetadata(r)}async listTables(r){return this.tableOps.listTables(r)}async createTable(r,e){return this.tableOps.createTable(r,e)}async updateTable(r,e){return this.tableOps.updateTable(r,e)}async dropTable(r,e){await this.tableOps.dropTable(r,e)}async loadTable(r){return this.tableOps.loadTable(r)}async namespaceExists(r){return this.namespaceOps.namespaceExists(r)}async tableExists(r){return this.tableOps.tableExists(r)}async createNamespaceIfNotExists(r,e){return this.namespaceOps.createNamespaceIfNotExists(r,e)}async createTableIfNotExists(r,e){return this.tableOps.createTableIfNotExists(r,e)}};class k4{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},QT),t),this.fetch=Xp(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}})}listBuckets(e){return fe(this,void 0,void 0,function*(){try{const t=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&t.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&t.set("sortOrder",e.sortOrder),e!=null&&e.search&&t.set("search",e.search);const s=t.toString(),a=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield Iu(this.fetch,a,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}})}deleteBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Jp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}})}from(e){if(!y4(e))throw new Vd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new O4({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>fe(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const Wp={"X-Client-Info":`storage-js/${KT}`,"Content-Type":"application/json"};class YT extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function kn(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}class og extends YT{constructor(e,t,s){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class D4 extends YT{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var xw;(function(r){r.InternalError="InternalError",r.S3VectorConflictException="S3VectorConflictException",r.S3VectorNotFoundException="S3VectorNotFoundException",r.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",r.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",r.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(xw||(xw={}));const Zp=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),j4=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},Cw=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),P4=(r,e,t)=>fe(void 0,void 0,void 0,function*(){if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!(t!=null&&t.noResolveJson)){const a=r.status||500,l=r;if(typeof l.json=="function")l.json().then(c=>{const f=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||a+"";e(new og(Cw(c),a,f))}).catch(()=>{const c=a+"",f=l.statusText||`HTTP ${a} error`;e(new og(f,a,c))});else{const c=a+"",f=l.statusText||`HTTP ${a} error`;e(new og(f,a,c))}}else e(new D4(Cw(r),r))}),M4=(r,e,t,s)=>{const a={method:r,headers:(e==null?void 0:e.headers)||{}};return s?(j4(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,Object.assign(Object.assign({},a),t)):a};function V4(r,e,t,s,a,l){return fe(this,void 0,void 0,function*(){return new Promise((c,f)=>{r(t,M4(e,s,a,l)).then(g=>{if(!g.ok)throw g;if(s!=null&&s.noResolveJson)return g;const p=g.headers.get("content-type");return!p||!p.includes("application/json")?{}:g.json()}).then(g=>c(g)).catch(g=>P4(g,f,s))})})}function Dn(r,e,t,s,a){return fe(this,void 0,void 0,function*(){return V4(r,"POST",e,s,a,t)})}class U4{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Wp),t),this.fetch=Zp(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return fe(this,void 0,void 0,function*(){try{return{data:(yield Dn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(kn(t))return{data:null,error:t};throw t}})}getIndex(e,t){return fe(this,void 0,void 0,function*(){try{return{data:yield Dn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(kn(s))return{data:null,error:s};throw s}})}listIndexes(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Dn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(kn(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return fe(this,void 0,void 0,function*(){try{return{data:(yield Dn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(kn(s))return{data:null,error:s};throw s}})}}class L4{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Wp),t),this.fetch=Zp(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return fe(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Dn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(kn(t))return{data:null,error:t};throw t}})}getVectors(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Dn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(kn(t))return{data:null,error:t};throw t}})}listVectors(e){return fe(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Dn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(kn(t))return{data:null,error:t};throw t}})}queryVectors(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Dn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(kn(t))return{data:null,error:t};throw t}})}deleteVectors(e){return fe(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Dn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(kn(t))return{data:null,error:t};throw t}})}}class z4{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Wp),t),this.fetch=Zp(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:(yield Dn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(kn(t))return{data:null,error:t};throw t}})}getBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Dn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(kn(t))return{data:null,error:t};throw t}})}listBuckets(){return fe(this,arguments,void 0,function*(e={}){try{return{data:yield Dn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(kn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:(yield Dn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(kn(t))return{data:null,error:t};throw t}})}}class B4 extends z4{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new q4(this.url,this.headers,e,this.fetch)}createBucket(e){const t=Object.create(null,{createBucket:{get:()=>super.createBucket}});return fe(this,void 0,void 0,function*(){return t.createBucket.call(this,e)})}getBucket(e){const t=Object.create(null,{getBucket:{get:()=>super.getBucket}});return fe(this,void 0,void 0,function*(){return t.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return fe(this,arguments,void 0,function*(t={}){return e.listBuckets.call(this,t)})}deleteBucket(e){const t=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return fe(this,void 0,void 0,function*(){return t.deleteBucket.call(this,e)})}}class q4 extends U4{constructor(e,t,s,a){super(e,t,a),this.vectorBucketName=s}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return fe(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return fe(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return fe(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return fe(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new H4(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class H4 extends L4{constructor(e,t,s,a,l){super(e,t,l),this.vectorBucketName=s,this.indexName=a}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return fe(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return fe(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return fe(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return fe(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return fe(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class $4 extends A4{constructor(e,t={},s,a){super(e,t,s,a)}from(e){return new S4(this.url,this.headers,e,this.fetch)}get vectors(){return new B4(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new k4(this.url+"/iceberg",this.headers,this.fetch)}}const F4="2.86.0";let cu="";typeof Deno<"u"?cu="deno":typeof document<"u"?cu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?cu="react-native":cu="node";const G4={"X-Client-Info":`supabase-js-${cu}/${F4}`},K4={headers:G4},Q4={schema:"public"},Y4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},X4={},J4=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),W4=()=>Headers,Z4=(r,e,t)=>{const s=J4(t),a=W4();return async(l,c)=>{var f;const g=(f=await e())!==null&&f!==void 0?f:r;let p=new a(c==null?void 0:c.headers);return p.has("apikey")||p.set("apikey",r),p.has("Authorization")||p.set("Authorization",`Bearer ${g}`),s(l,Object.assign(Object.assign({},c),{headers:p}))}};function ek(r){return r.endsWith("/")?r:r+"/"}function tk(r,e){var t,s;const{db:a,auth:l,realtime:c,global:f}=r,{db:g,auth:p,realtime:b,global:E}=e,S={db:Object.assign(Object.assign({},g),a),auth:Object.assign(Object.assign({},p),l),realtime:Object.assign(Object.assign({},b),c),storage:{},global:Object.assign(Object.assign(Object.assign({},E),f),{headers:Object.assign(Object.assign({},(t=E==null?void 0:E.headers)!==null&&t!==void 0?t:{}),(s=f==null?void 0:f.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return r.accessToken?S.accessToken=r.accessToken:delete S.accessToken,S}function nk(r){const e=r==null?void 0:r.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ek(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const XT="2.86.0",wo=30*1e3,Jg=3,lg=Jg*wo,rk="http://localhost:9999",sk="supabase.auth.token",ik={"X-Client-Info":`gotrue-js/${XT}`},Wg="X-Supabase-Api-Version",JT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ak=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ok=600*1e3;class Ou extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function pe(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class lk extends Ou{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function uk(r){return pe(r)&&r.name==="AuthApiError"}class ia extends Ou{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class wi extends Ou{constructor(e,t,s,a){super(e,s,a),this.name=t,this.status=s}}class On extends wi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ck(r){return pe(r)&&r.name==="AuthSessionMissingError"}class ho extends wi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class jh extends wi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ph extends wi{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function hk(r){return pe(r)&&r.name==="AuthImplicitGrantRedirectError"}class Iw extends wi{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Zg extends wi{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function ug(r){return pe(r)&&r.name==="AuthRetryableFetchError"}class Nw extends wi{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class ep extends wi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const cd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ow=` 	
\r=`.split(""),dk=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<Ow.length;e+=1)r[Ow[e].charCodeAt(0)]=-2;for(let e=0;e<cd.length;e+=1)r[cd[e].charCodeAt(0)]=e;return r})();function kw(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(cd[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(cd[s]),e.queuedBits-=6}}function WT(r,e,t){const s=dk[r];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Dw(r){const e=[],t=c=>{e.push(String.fromCodePoint(c))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=c=>{gk(c,s,t)};for(let c=0;c<r.length;c+=1)WT(r.charCodeAt(c),a,l);return e.join("")}function fk(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function mk(r,e){for(let t=0;t<r.length;t+=1){let s=r.charCodeAt(t);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(r.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}fk(s,e)}}function gk(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let s=1;s<6;s+=1)if((r>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function ko(r){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<r.length;a+=1)WT(r.charCodeAt(a),t,s);return new Uint8Array(e)}function pk(r){const e=[];return mk(r,t=>e.push(t)),new Uint8Array(e)}function oa(r){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};return r.forEach(a=>kw(a,t,s)),kw(null,t,s),e.join("")}function yk(r){return Math.round(Date.now()/1e3)+r}function _k(){return Symbol("auth-callback")}const Wt=()=>typeof window<"u"&&typeof document<"u",Zi={tested:!1,writable:!1},ZT=()=>{if(!Wt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Zi.tested)return Zi.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Zi.tested=!0,Zi.writable=!0}catch{Zi.tested=!0,Zi.writable=!1}return Zi.writable};function vk(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return t.searchParams.forEach((s,a)=>{e[a]=s}),e}const eS=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),bk=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Eo=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},ea=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Zs=async(r,e)=>{await r.removeItem(e)};class Ud{constructor(){this.promise=new Ud.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Ud.promiseConstructor=Promise;function cg(r){const e=r.split(".");if(e.length!==3)throw new ep("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!ak.test(e[s]))throw new ep("JWT not in base64url format");return{header:JSON.parse(Dw(e[0])),payload:JSON.parse(Dw(e[1])),signature:ko(e[2]),raw:{header:e[0],payload:e[1]}}}async function wk(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function Ek(r,e){return new Promise((s,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await r(l);if(!e(l,null,c)){s(c);return}}catch(c){if(!e(l,c)){a(c);return}}})()})}function Tk(r){return("0"+r.toString(16)).substr(-2)}function Sk(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let a="";for(let l=0;l<56;l++)a+=t.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,Tk).join("")}async function Ak(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(s);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function Rk(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await Ak(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function fo(r,e,t=!1){const s=Sk();let a=s;t&&(a+="/PASSWORD_RECOVERY"),await Eo(r,`${e}-code-verifier`,a);const l=await Rk(s);return[l,s===l?"plain":"s256"]}const xk=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ck(r){const e=r.headers.get(Wg);if(!e||!e.match(xk))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Ik(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function Nk(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ok=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function mo(r){if(!Ok.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function hg(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function kk(r,e){return new Proxy(r,{get:(t,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,s,a)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,s,a)}})}function jw(r){return JSON.parse(JSON.stringify(r))}const na=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Dk=[502,503,504];async function Pw(r){var e;if(!bk(r))throw new Zg(na(r),0);if(Dk.includes(r.status))throw new Zg(na(r),r.status);let t;try{t=await r.json()}catch(l){throw new ia(na(l),l)}let s;const a=Ck(r);if(a&&a.getTime()>=JT["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new Nw(na(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new On}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new Nw(na(t),r.status,t.weak_password.reasons);throw new lk(na(t),r.status||500,s)}const jk=(r,e,t,s)=>{const a={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),t))};async function we(r,e,t,s){var a;const l=Object.assign({},s==null?void 0:s.headers);l[Wg]||(l[Wg]=JT["2024-01-01"].name),s!=null&&s.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const c=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(c.redirect_to=s.redirectTo);const f=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",g=await Pk(r,e,t+f,{headers:l,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(g):{data:Object.assign({},g),error:null}}async function Pk(r,e,t,s,a,l){const c=jk(e,s,a,l);let f;try{f=await r(t,Object.assign({},c))}catch(g){throw console.error(g),new Zg(na(g),0)}if(f.ok||await Pw(f),s!=null&&s.noResolveJson)return f;try{return await f.json()}catch(g){await Pw(g)}}function lr(r){var e;let t=null;Uk(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=yk(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function Mw(r){const e=lr(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function si(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Mk(r){return{data:r,error:null}}function Vk(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:l}=r,c=Jo(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:l},g=Object.assign({},c);return{data:{properties:f,user:g},error:null}}function Vw(r){return r}function Uk(r){return r.access_token&&r.refresh_token&&r.expires_in}const dg=["global","local","others"];class Lk{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=eS(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=dg[0]){if(dg.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${dg.join(", ")}`);try{return await we(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(pe(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await we(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:si})}catch(s){if(pe(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Jo(e,["options"]),a=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await we(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Vk,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(pe(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await we(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:si})}catch(t){if(pe(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,a,l,c,f,g;try{const p={nextPage:null,lastPage:0,total:0},b=await we(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:Vw});if(b.error)throw b.error;const E=await b.json(),S=(c=b.headers.get("x-total-count"))!==null&&c!==void 0?c:0,R=(g=(f=b.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&g!==void 0?g:[];return R.length>0&&(R.forEach(k=>{const j=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),D=JSON.parse(k.split(";")[1].split("=")[1]);p[`${D}Page`]=j}),p.total=parseInt(S)),{data:Object.assign(Object.assign({},E),p),error:null}}catch(p){if(pe(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){mo(e);try{return await we(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:si})}catch(t){if(pe(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){mo(e);try{return await we(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:si})}catch(s){if(pe(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){mo(e);try{return await we(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:si})}catch(s){if(pe(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){mo(e.userId);try{const{data:t,error:s}=await we(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:s}}catch(t){if(pe(t))return{data:null,error:t};throw t}}async _deleteFactor(e){mo(e.userId),mo(e.id);try{return{data:await we(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(pe(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,s,a,l,c,f,g;try{const p={nextPage:null,lastPage:0,total:0},b=await we(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:Vw});if(b.error)throw b.error;const E=await b.json(),S=(c=b.headers.get("x-total-count"))!==null&&c!==void 0?c:0,R=(g=(f=b.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&g!==void 0?g:[];return R.length>0&&(R.forEach(k=>{const j=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),D=JSON.parse(k.split(";")[1].split("=")[1]);p[`${D}Page`]=j}),p.total=parseInt(S)),{data:Object.assign(Object.assign({},E),p),error:null}}catch(p){if(pe(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await we(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(pe(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await we(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(pe(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await we(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(pe(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await we(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(pe(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await we(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(pe(t))return{data:null,error:t};throw t}}}function Uw(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}const go={debug:!!(globalThis&&ZT()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class tS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class zk extends tS{}async function Bk(r,e,t){go.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),go.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){go.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,a.name);try{return await t()}finally{go.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,a.name)}}else{if(e===0)throw go.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new zk(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(go.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function qk(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function nS(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function Hk(r){return parseInt(r,16)}function $k(r){const e=new TextEncoder().encode(r);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function Fk(r){var e;const{chainId:t,domain:s,expirationTime:a,issuedAt:l=new Date,nonce:c,notBefore:f,requestId:g,resources:p,scheme:b,uri:E,version:S}=r;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!E)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(S!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${S}`);if(!((e=r.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const R=nS(r.address),k=b?`${b}://${s}`:s,j=r.statement?`${r.statement}
`:"",D=`${k} wants you to sign in with your Ethereum account:
${R}

${j}`;let q=`URI: ${E}
Version: ${S}
Chain ID: ${t}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(a&&(q+=`
Expiration Time: ${a.toISOString()}`),f&&(q+=`
Not Before: ${f.toISOString()}`),g&&(q+=`
Request ID: ${g}`),p){let Y=`
Resources:`;for(const G of p){if(!G||typeof G!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${G}`);Y+=`
- ${G}`}q+=Y}return`${D}
${q}`}class jt extends Error{constructor({message:e,code:t,cause:s,name:a}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=a??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=t}}class hd extends jt{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function Gk({error:r,options:e}){var t,s,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new jt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((t=l.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new jt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new jt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new jt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new jt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new jt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return l.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new jt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new jt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const c=window.location.hostname;if(rS(c)){if(l.rp.id!==c)return new jt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new jt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new jt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new jt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new jt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function Kk({error:r,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new jt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new jt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const s=window.location.hostname;if(rS(s)){if(t.rpId!==s)return new jt({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new jt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new jt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new jt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class Qk{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Yk=new Qk;function Xk(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:e,user:t,excludeCredentials:s}=r,a=Jo(r,["challenge","user","excludeCredentials"]),l=ko(e).buffer,c=Object.assign(Object.assign({},t),{id:ko(t.id).buffer}),f=Object.assign(Object.assign({},a),{challenge:l,user:c});if(s&&s.length>0){f.excludeCredentials=new Array(s.length);for(let g=0;g<s.length;g++){const p=s[g];f.excludeCredentials[g]=Object.assign(Object.assign({},p),{id:ko(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return f}function Jk(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:e,allowCredentials:t}=r,s=Jo(r,["challenge","allowCredentials"]),a=ko(e).buffer,l=Object.assign(Object.assign({},s),{challenge:a});if(t&&t.length>0){l.allowCredentials=new Array(t.length);for(let c=0;c<t.length;c++){const f=t[c];l.allowCredentials[c]=Object.assign(Object.assign({},f),{id:ko(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return l}function Wk(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r;return{id:r.id,rawId:r.id,response:{attestationObject:oa(new Uint8Array(r.response.attestationObject)),clientDataJSON:oa(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Zk(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r,s=r.getClientExtensionResults(),a=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:oa(new Uint8Array(a.authenticatorData)),clientDataJSON:oa(new Uint8Array(a.clientDataJSON)),signature:oa(new Uint8Array(a.signature)),userHandle:a.userHandle?oa(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function rS(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function Lw(){var r,e;return!!(Wt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function e3(r){try{const e=await navigator.credentials.create(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new hd("Browser returned unexpected credential type",e)}:{data:null,error:new hd("Empty credential response",e)}}catch(e){return{data:null,error:Gk({error:e,options:r})}}}async function t3(r){try{const e=await navigator.credentials.get(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new hd("Browser returned unexpected credential type",e)}:{data:null,error:new hd("Empty credential response",e)}}catch(e){return{data:null,error:Kk({error:e,options:r})}}}const n3={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},r3={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function dd(...r){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),t=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of r)if(a)for(const l in a){const c=a[l];if(c!==void 0)if(Array.isArray(c))s[l]=c;else if(t(c))s[l]=c;else if(e(c)){const f=s[l];e(f)?s[l]=dd(f,c):s[l]=dd(c)}else s[l]=c}return s}function s3(r,e){return dd(n3,r,e||{})}function i3(r,e){return dd(r3,r,e||{})}class a3{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:s,signal:a},l){try{const{data:c,error:f}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!c)return{data:null,error:f};const g=a??Yk.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:p}=c.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${s}`),p.displayName||(p.displayName=p.name)}switch(c.webauthn.type){case"create":{const p=s3(c.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:b,error:E}=await e3({publicKey:p,signal:g});return b?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:b}},error:null}:{data:null,error:E}}case"request":{const p=i3(c.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:b,error:E}=await t3(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:p,signal:g}));return b?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:b}},error:null}:{data:null,error:E}}}}catch(c){return pe(c)?{data:null,error:c}:{data:null,error:new ia("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:t,webauthn:s}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!t)return{data:null,error:new Ou("rpId is required for WebAuthn authentication")};try{if(!Lw())return{data:null,error:new ia("Browser does not support WebAuthn",null)};const{data:c,error:f}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:s},signal:a},{request:l});if(!c)return{data:null,error:f};const{webauthn:g}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:g.type,rpId:t,rpOrigins:s,credential_response:g.credential_response}})}catch(c){return pe(c)?{data:null,error:c}:{data:null,error:new ia("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!t)return{data:null,error:new Ou("rpId is required for WebAuthn registration")};try{if(!Lw())return{data:null,error:new ia("Browser does not support WebAuthn",null)};const{data:c,error:f}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(b=>{var E;return(E=b.data)===null||E===void 0?void 0:E.all.find(S=>S.factor_type==="webauthn"&&S.friendly_name===e&&S.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b==null?void 0:b.id}):void 0),{data:null,error:f};const{data:g,error:p}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:t,rpOrigins:s},signal:a},{create:l});return g?this._verify({factorId:c.id,challengeId:g.challengeId,webauthn:{rpId:t,rpOrigins:s,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:p}}catch(c){return pe(c)?{data:null,error:c}:{data:null,error:new ia("Unexpected error in register",c)}}}}qk();const o3={url:rk,storageKey:sk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ik,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function zw(r,e,t){return await t()}const po={};class ku{get jwks(){var e,t;return(t=(e=po[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){po[this.storageKey]=Object.assign(Object.assign({},po[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=po[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){po[this.storageKey]=Object.assign(Object.assign({},po[this.storageKey]),{cachedAt:e})}constructor(e){var t,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},o3),e);if(this.storageKey=l.storageKey,this.instanceID=(t=ku.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,ku.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&Wt()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new Lk({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=eS(l.fetch),this.lock=l.lock||zw,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:Wt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Bk:this.lock=zw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new a3(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:ZT()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Uw(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Uw(this.memoryStorage)),Wt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${XT}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},s="none";if(Wt()&&(t=vk(window.location.href),this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce")),Wt()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:l}=await this._getSessionFromURL(t,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),hk(l)){const g=(e=l.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:f}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",f),await this._saveSession(c),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return pe(t)?this._returnResult({error:t}):this._returnResult({error:new ia("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,a;try{const l=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:lr}),{data:c,error:f}=l;if(f||!c)return this._returnResult({data:{user:null,session:null},error:f});const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(l){if(pe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var t,s,a;try{let l;if("email"in e){const{email:b,password:E,options:S}=e;let R=null,k=null;this.flowType==="pkce"&&([R,k]=await fo(this.storage,this.storageKey)),l=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:S==null?void 0:S.emailRedirectTo,body:{email:b,password:E,data:(t=S==null?void 0:S.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken},code_challenge:R,code_challenge_method:k},xform:lr})}else if("phone"in e){const{phone:b,password:E,options:S}=e;l=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:E,data:(s=S==null?void 0:S.data)!==null&&s!==void 0?s:{},channel:(a=S==null?void 0:S.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:S==null?void 0:S.captchaToken}},xform:lr})}else throw new jh("You must provide either an email or phone number and a password");const{data:c,error:f}=l;if(f||!c)return this._returnResult({data:{user:null,session:null},error:f});const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(l){if(pe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let t;if("email"in e){const{email:l,password:c,options:f}=e;t=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Mw})}else if("phone"in e){const{phone:l,password:c,options:f}=e;t=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Mw})}else throw new jh("You must provide either an email or phone number and a password");const{data:s,error:a}=t;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const l=new ho;return this._returnResult({data:{user:null,session:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(t){if(pe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,s,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,s,a,l,c,f,g,p,b,E,S;let R,k;if("message"in e)R=e.message,k=e.signature;else{const{chain:j,wallet:D,statement:q,options:Y}=e;let G;if(Wt())if(typeof D=="object")G=D;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")G=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!(Y!=null&&Y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");G=D}const ne=new URL((t=Y==null?void 0:Y.url)!==null&&t!==void 0?t:window.location.href),_e=await G.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_e||_e.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const le=nS(_e[0]);let C=(s=Y==null?void 0:Y.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!C){const I=await G.request({method:"eth_chainId"});C=Hk(I)}const x={domain:ne.host,address:le,statement:q,uri:ne.href,version:"1",chainId:C,nonce:(a=Y==null?void 0:Y.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(l=Y==null?void 0:Y.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(f=Y==null?void 0:Y.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(g=Y==null?void 0:Y.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(p=Y==null?void 0:Y.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(b=Y==null?void 0:Y.signInWithEthereum)===null||b===void 0?void 0:b.resources};R=Fk(x),k=await G.request({method:"personal_sign",params:[$k(R),le]})}try{const{data:j,error:D}=await we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:R,signature:k},!((E=e.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:lr});if(D)throw D;if(!j||!j.session||!j.user){const q=new ho;return this._returnResult({data:{user:null,session:null},error:q})}return j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),this._returnResult({data:Object.assign({},j),error:D})}catch(j){if(pe(j))return this._returnResult({data:{user:null,session:null},error:j});throw j}}async signInWithSolana(e){var t,s,a,l,c,f,g,p,b,E,S,R;let k,j;if("message"in e)k=e.message,j=e.signature;else{const{chain:D,wallet:q,statement:Y,options:G}=e;let ne;if(Wt())if(typeof q=="object")ne=q;else{const le=window;if("solana"in le&&typeof le.solana=="object"&&("signIn"in le.solana&&typeof le.solana.signIn=="function"||"signMessage"in le.solana&&typeof le.solana.signMessage=="function"))ne=le.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof q!="object"||!(G!=null&&G.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ne=q}const _e=new URL((t=G==null?void 0:G.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in ne&&ne.signIn){const le=await ne.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},G==null?void 0:G.signInWithSolana),{version:"1",domain:_e.host,uri:_e.href}),Y?{statement:Y}:null));let C;if(Array.isArray(le)&&le[0]&&typeof le[0]=="object")C=le[0];else if(le&&typeof le=="object"&&"signedMessage"in le&&"signature"in le)C=le;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)k=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),j=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ne)||typeof ne.signMessage!="function"||!("publicKey"in ne)||typeof ne!="object"||!ne.publicKey||!("toBase58"in ne.publicKey)||typeof ne.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${_e.host} wants you to sign in with your Solana account:`,ne.publicKey.toBase58(),...Y?["",Y,""]:[""],"Version: 1",`URI: ${_e.href}`,`Issued At: ${(a=(s=G==null?void 0:G.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=G==null?void 0:G.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${G.signInWithSolana.notBefore}`]:[],...!((c=G==null?void 0:G.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${G.signInWithSolana.expirationTime}`]:[],...!((f=G==null?void 0:G.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${G.signInWithSolana.chainId}`]:[],...!((g=G==null?void 0:G.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${G.signInWithSolana.nonce}`]:[],...!((p=G==null?void 0:G.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${G.signInWithSolana.requestId}`]:[],...!((E=(b=G==null?void 0:G.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||E===void 0)&&E.length?["Resources",...G.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const le=await ne.signMessage(new TextEncoder().encode(k),"utf8");if(!le||!(le instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=le}}try{const{data:D,error:q}=await we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:oa(j)},!((S=e.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(R=e.options)===null||R===void 0?void 0:R.captchaToken}}:null),xform:lr});if(q)throw q;if(!D||!D.session||!D.user){const Y=new ho;return this._returnResult({data:{user:null,session:null},error:Y})}return D.session&&(await this._saveSession(D.session),await this._notifyAllSubscribers("SIGNED_IN",D.session)),this._returnResult({data:Object.assign({},D),error:q})}catch(D){if(pe(D))return this._returnResult({data:{user:null,session:null},error:D});throw D}}async _exchangeCodeForSession(e){const t=await ea(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(t??"").split("/");try{const{data:l,error:c}=await we(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:lr});if(await Zs(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const f=new ho;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:c})}catch(l){if(pe(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:t,provider:s,token:a,access_token:l,nonce:c}=e,f=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:lr}),{data:g,error:p}=f;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!g||!g.session||!g.user){const b=new ho;return this._returnResult({data:{user:null,session:null},error:b})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:p})}catch(t){if(pe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,s,a,l,c;try{if("email"in e){const{email:f,options:g}=e;let p=null,b=null;this.flowType==="pkce"&&([p,b]=await fo(this.storage,this.storageKey));const{error:E}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(t=g==null?void 0:g.data)!==null&&t!==void 0?t:{},create_user:(s=g==null?void 0:g.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:p,code_challenge_method:b},redirectTo:g==null?void 0:g.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:E})}if("phone"in e){const{phone:f,options:g}=e,{data:p,error:b}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(a=g==null?void 0:g.data)!==null&&a!==void 0?a:{},create_user:(l=g==null?void 0:g.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(c=g==null?void 0:g.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:b})}throw new jh("You must provide either an email or phone number.")}catch(f){if(pe(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(e){var t,s;try{let a,l;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:c,error:f}=await we(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:lr});if(f)throw f;if(!c)throw new Error("An error occurred on token verification.");const g=c.session,p=c.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(a){if(pe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var t,s,a,l,c;try{let f=null,g=null;this.flowType==="pkce"&&([f,g]=await fo(this.storage,this.storageKey));const p=await we(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:g}),headers:this.headers,xform:Mk});return!((l=p.data)===null||l===void 0)&&l.url&&Wt()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(f){if(pe(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new On;const{error:a}=await we(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(pe(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:l}=e,{error:c}=await we(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:s,type:a,options:l}=e,{data:c,error:f}=await we(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:f})}throw new jh("You must provide either an email or phone number and a type")}catch(t){if(pe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ea(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<lg:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const c=await ea(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=hg()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=kk(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:si}):await this._useSession(async t=>{var s,a,l;const{data:c,error:f}=t;if(f)throw f;return!(!((s=c.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new On}:await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:si})})}catch(t){if(pe(t))return ck(t)&&(await this._removeSession(),await Zs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:a,error:l}=s;if(l)throw l;if(!a.session)throw new On;const c=a.session;let f=null,g=null;this.flowType==="pkce"&&e.email!=null&&([f,g]=await fo(this.storage,this.storageKey));const{data:p,error:b}=await we(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:g}),jwt:c.access_token,xform:si});if(b)throw b;return c.user=p.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(s){if(pe(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new On;const t=Date.now()/1e3;let s=t,a=!0,l=null;const{payload:c}=cg(e.access_token);if(c.exp&&(s=c.exp,a=s<=t),a){const{data:f,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!f)return{data:{user:null,session:null},error:null};l=f}else{const{data:f,error:g}=await this._getUser(e.access_token);if(g)throw g;l={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(t){if(pe(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:c,error:f}=t;if(f)throw f;e=(s=c.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new On;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(pe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Wt())throw new Ph("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ph(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Iw("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ph("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Iw("No code detected.");const{data:Y,error:G}=await this._exchangeCodeForSession(e.code);if(G)throw G;const ne=new URL(window.location.href);return ne.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ne.toString()),{data:{session:Y.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:l,refresh_token:c,expires_in:f,expires_at:g,token_type:p}=e;if(!l||!f||!c||!p)throw new Ph("No session defined in URL");const b=Math.round(Date.now()/1e3),E=parseInt(f);let S=b+E;g&&(S=parseInt(g));const R=S-b;R*1e3<=wo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${R}s, should have been closer to ${E}s`);const k=S-E;b-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,S,b):b-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,S,b);const{data:j,error:D}=await this._getUser(l);if(D)throw D;const q={provider_token:s,provider_refresh_token:a,access_token:l,expires_in:E,expires_at:S,refresh_token:c,token_type:p,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:q,redirectType:e.type},error:null})}catch(s){if(pe(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ea(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:a,error:l}=t;if(l)return this._returnResult({error:l});const c=(s=a.session)===null||s===void 0?void 0:s.access_token;if(c){const{error:f}=await this.admin.signOut(c,e);if(f&&!(uk(f)&&(f.status===404||f.status===401||f.status===403)))return this._returnResult({error:f})}return e!=="others"&&(await this._removeSession(),await Zs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=_k(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,a;try{const{data:{session:l},error:c}=t;if(c)throw c;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,t={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await fo(this.storage,this.storageKey,!0));try{return await we(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(l){if(pe(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:s,error:a}=await this._useSession(async l=>{var c,f,g,p,b;const{data:E,error:S}=l;if(S)throw S;const R=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await we(this.fetch,"GET",R,{headers:this.headers,jwt:(b=(p=E.session)===null||p===void 0?void 0:p.access_token)!==null&&b!==void 0?b:void 0})});if(a)throw a;return Wt()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(pe(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var s;try{const{error:a,data:{session:l}}=t;if(a)throw a;const{options:c,provider:f,token:g,access_token:p,nonce:b}=e,E=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l==null?void 0:l.access_token)!==null&&s!==void 0?s:void 0,body:{provider:f,id_token:g,access_token:p,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:lr}),{data:S,error:R}=E;return R?this._returnResult({data:{user:null,session:null},error:R}):!S||!S.session||!S.user?this._returnResult({data:{user:null,session:null},error:new ho}):(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("USER_UPDATED",S.session)),this._returnResult({data:S,error:R}))}catch(a){if(pe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,a;const{data:l,error:c}=t;if(c)throw c;return await we(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await Ek(async a=>(a>0&&await wk(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await we(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:lr})),(a,l)=>{const c=200*Math.pow(2,a);return l&&ug(l)&&Date.now()+c-s<wo})}catch(s){if(this._debug(t,"error",s),pe(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Wt()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await ea(this.storage,this.storageKey);if(a&&this.userStorage){let c=await ea(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await Eo(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:hg()}else if(a&&!a.user&&!a.user){const c=await ea(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(a.user=c.user,await Zs(this.storage,this.storageKey+"-user"),await Eo(this.storage,this.storageKey,a)):a.user=hg()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const l=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<lg;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${lg}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),ug(c)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:f}=await this._getUser(a.access_token);!f&&(c!=null&&c.user)?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(s,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new On;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Ud;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new On;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const f={data:l.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(l){if(this._debug(a,"error",l),pe(l)){const c={data:null,error:l};return ug(l)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(c),c}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,t)}catch(g){l.push(g)}});if(await Promise.all(c),l.length>0){for(let f=0;f<l.length;f+=1)console.error(l[f]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await Eo(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const l=jw(a);await Eo(this.storage,this.storageKey,l)}else{const a=jw(t);await Eo(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Zs(this.storage,this.storageKey),await Zs(this.storage,this.storageKey+"-code-verifier"),await Zs(this.storage,this.storageKey+"-user"),this.userStorage&&await Zs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Wt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),wo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/wo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${wo}ms, refresh threshold is ${Jg} ticks`),a<=Jg&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof tS)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Wt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const a=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,c]=await fo(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(f.toString())}if(s!=null&&s.queryParams){const l=new URLSearchParams(s.queryParams);a.push(l.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:a,error:l}=t;return l?this._returnResult({data:null,error:l}):await we(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,a;const{data:l,error:c}=t;if(c)return this._returnResult({data:null,error:c});const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:g,error:p}=await we(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&g.type==="totp"&&(!((a=g==null?void 0:g.totp)===null||a===void 0)&&a.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Wk(e.webauthn.credential_response):Zk(e.webauthn.credential_response)})}:{code:e.code}),{data:f,error:g}=await we(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:g}))})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=await we(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(c.error)return c;const{data:f}=c;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:Xk(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:Jk(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=cg(s.access_token);let c=null;l.aal&&(c=l.aal);let f=c;((t=(e=s.user.factors)===null||e===void 0?void 0:e.filter(b=>b.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(f="aal2");const p=l.amr||[];return{data:{currentLevel:c,nextLevel:f,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:s},error:a}=t;return a?this._returnResult({data:null,error:a}):s?await we(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new On})})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:a},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new On});const c=await we(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return c.data&&c.data.redirect_url&&Wt()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(s){if(pe(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:a},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new On});const c=await we(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return c.data&&c.data.redirect_url&&Wt()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(s){if(pe(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;return s?this._returnResult({data:null,error:s}):t?await we(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new On})})}catch(e){if(pe(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:s},error:a}=t;return a?this._returnResult({data:null,error:a}):s?(await we(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new On})})}catch(t){if(pe(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(f=>f.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(f=>f.kid===e),s&&this.jwks_cached_at+ok>a)return s;const{data:l,error:c}=await we(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,s=l.keys.find(f=>f.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:R,error:k}=await this.getSession();if(k||!R.session)return this._returnResult({data:null,error:k});s=R.session.access_token}const{header:a,payload:l,signature:c,raw:{header:f,payload:g}}=cg(s);t!=null&&t.allowExpired||Ik(l.exp);const p=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!p){const{error:R}=await this.getUser(s);if(R)throw R;return{data:{claims:l,header:a,signature:c},error:null}}const b=Nk(a.alg),E=await crypto.subtle.importKey("jwk",p,b,!0,["verify"]);if(!await crypto.subtle.verify(b,E,c,pk(`${f}.${g}`)))throw new ep("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(s){if(pe(s))return this._returnResult({data:null,error:s});throw s}}}ku.nextInstanceID={};const l3=ku;class u3 extends l3{constructor(e){super(e)}}class c3{constructor(e,t,s){var a,l,c;this.supabaseUrl=e,this.supabaseKey=t;const f=nk(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const g=`sb-${f.hostname.split(".")[0]}-auth-token`,p={db:Q4,realtime:X4,auth:Object.assign(Object.assign({},Y4),{storageKey:g}),global:K4},b=tk(s??{},p);this.storageKey=(a=b.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=b.global.headers)!==null&&l!==void 0?l:{},b.accessToken?(this.accessToken=b.accessToken,this.auth=new Proxy({},{get:(E,S)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(S)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=b.auth)!==null&&c!==void 0?c:{},this.headers,b.global.fetch),this.fetch=Z4(t,this._getAccessToken.bind(this),b.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},b.realtime)),this.accessToken&&this.accessToken().then(E=>this.realtime.setAuth(E)).catch(E=>console.warn("Failed to set initial Realtime auth token:",E)),this.rest=new X5(new URL("rest/v1",f).href,{headers:this.headers,schema:b.db.schema,fetch:this.fetch}),this.storage=new $4(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),b.accessToken||this._listenForAuthEvents()}get functions(){return new G5(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:s}=await this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,userStorage:l,storageKey:c,flowType:f,lock:g,debug:p,throwOnError:b},E,S){const R={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new u3({url:this.authUrl.href,headers:Object.assign(Object.assign({},R),E),storageKey:c,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,userStorage:l,flowType:f,lock:g,debug:p,throwOnError:b,fetch:S,hasCustomAuthorizationHeader:Object.keys(this.headers).some(k=>k.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new f4(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const h3=(r,e,t)=>new c3(r,e,t);function d3(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}d3()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const f3="https://hykypgxaegmufdothwbv.supabase.co",m3="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh5a3lwZ3hhZWdtdWZkb3Rod2J2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1NTE3NzMsImV4cCI6MjA3NzEyNzc3M30.Euzl2vfhHrxhgN-tfg2XftMaX9hEiJOorSJq16n2CRY",Do=h3(f3,m3),Bw=({onStart:r,onLoginClick:e})=>{const{theme:t}=tn();return _.jsx("div",{className:"text-center p-4 animate-slide-in-right",children:_.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8 md:p-12 max-w-2xl mx-auto relative",children:[t==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/MH9hVp8S/happy-techers-day.jpg",alt:"Icon Chc mng Ngy Nh gio",className:"h-24 w-24 mx-auto mb-4 rounded-full object-cover"}):t==="noel"?_.jsx(vu,{className:"h-24 w-24 mx-auto text-primary mb-4"}):_.jsx(vu,{className:"h-24 w-24 mx-auto text-primary mb-4"}),_.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-foreground mb-2",children:"ng Dng n tp"}),t==="tri-an"&&_.jsx("p",{className:"text-xl font-semibold text-primary mb-4",children:"Phin bn c bit Tri n Thy C"}),t==="noel"&&_.jsx("p",{className:"text-xl font-semibold text-primary mb-4",children:"Cho n Ging Sinh An Lnh"}),_.jsx("p",{className:"text-lg text-muted-foreground mb-4",children:"Cho mng anh/ch  n vi ng dng n tp, n thi chng ch chuyn mn phng tin thy ni a."}),t==="tri-an"&&_.jsx("p",{className:"text-lg text-muted-foreground mb-8 italic",children:'"Nhn ngy Nh gio Vit Nam 20-11, knh chc qu thy c lun mnh khe, hnh phc v thnh cng trong s nghip trng ngi."'}),_.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[_.jsx("button",{onClick:r,className:"w-full sm:w-auto bg-primary text-primary-foreground font-bold text-lg py-4 px-10 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105",children:"Bt u"}),_.jsx("button",{onClick:e,className:"w-full sm:w-auto bg-secondary text-secondary-foreground font-bold text-lg py-4 px-10 rounded-lg hover:bg-secondary/80 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300",children:"ng nhp"})]})]})})},g3=({onBack:r})=>{const[e,t]=me.useState(""),[s,a]=me.useState(""),[l,c]=me.useState(!1),[f,g]=me.useState(null),p=async b=>{b.preventDefault(),c(!0),g(null);let E=e.trim();E.toLowerCase()==="admin"&&(E="admin@onthihanghai.local");try{await Hx(cT,E,s)}catch(S){console.error("Login failed:",S),g("Ti khon hoc mt khu khng chnh xc.")}finally{c(!1)}};return _.jsxs("div",{className:"w-full max-w-md mx-auto p-4 animate-slide-in-right",children:[_.jsxs("div",{className:"relative text-center mb-10",children:[_.jsx("button",{onClick:r,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:_.jsx(Ho,{className:"h-10 w-10 text-primary"})}),_.jsx(vu,{className:"h-20 w-20 mx-auto text-primary mb-4"}),_.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"ng nhp"}),_.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Truy cp vo h thng qun l hc tp."})]}),_.jsx("div",{className:"bg-card p-8 rounded-2xl shadow-lg",children:_.jsxs("form",{onSubmit:p,children:[f&&_.jsx("p",{className:"bg-destructive/10 text-destructive p-3 rounded-md mb-4 text-center",children:f}),_.jsxs("div",{className:"mb-4",children:[_.jsx("label",{htmlFor:"account",className:"block text-sm font-medium text-card-foreground mb-2",children:"Ti khon"}),_.jsx("input",{id:"account",type:"text",value:e,onChange:b=>t(b.target.value),placeholder:"Nhp ti khon hoc email",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-colors duration-300",required:!0,autoFocus:!0})]}),_.jsxs("div",{className:"mb-6",children:[_.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-card-foreground mb-2",children:"Mt khu"}),_.jsx("input",{id:"password",type:"password",value:s,onChange:b=>a(b.target.value),placeholder:"",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-colors duration-300",required:!0})]}),_.jsx("button",{type:"submit",disabled:l,className:"w-full bg-primary text-primary-foreground font-bold py-3 px-6 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 disabled:opacity-50 disabled:cursor-wait",children:l?"ang x l...":"ng nhp"})]})})]})},p3=(r,e)=>{const t="h-14 w-14 mx-auto text-primary mb-3 object-contain",s="h-14 w-14 mx-auto mb-3 object-cover rounded-full border-2 border-border/20 shadow-sm",a="h-14 w-14 mx-auto mb-3 object-contain drop-shadow-lg",l=r.name.toLowerCase();if(e==="noel")return l.includes("thuyn trng")?_.jsx("img",{src:"/assets/img/hat.png",alt:"Captain Hat",className:a}):l.includes("my trng")?_.jsx("img",{src:"/assets/img/gift4.png",alt:"Chief Engineer",className:a}):l.includes("thy th")?_.jsx("img",{src:"/assets/img/bell.png",alt:"Sailor",className:a}):l.includes("li phng tin")?_.jsx("img",{src:"/assets/img/tree.png",alt:"Helm",className:a}):l.includes("chng ch")?_.jsx("img",{src:"/assets/img/star-gold.png",alt:"Certificate",className:a}):_.jsx("img",{src:"/assets/img/gift5.png",alt:"Default",className:a});if(e==="tri-an")switch(r.id){case"thuyentruong-h1":return _.jsx("img",{src:"https://i.postimg.cc/Vs76y54F/8.jpg",alt:r.name,className:s});case"thuyentruong-h2":return _.jsx("img",{src:"https://i.postimg.cc/Pf6xGNK4/9.jpg",alt:r.name,className:s});case"thuyentruong-h3":return _.jsx("img",{src:"https://i.postimg.cc/Vs76y54W/7.jpg",alt:r.name,className:s});case"thuythu":return _.jsx(fg,{className:t});case"lai-phuong-tien":return _.jsx(vu,{className:t});case"maytruong-h1":return _.jsx("img",{src:"https://i.postimg.cc/zDpm90H6/undefined.jpg",alt:r.name,className:s});case"maytruong-h2":return _.jsx("img",{src:"https://i.postimg.cc/wMwSLjdc/Teachers-day-background-design-art-illustration.jpg",alt:r.name,className:s});case"maytruong-h3":return _.jsx("img",{src:"https://i.postimg.cc/NFdWmjwH/Hinh-thiep.jpg",alt:r.name,className:s});case"thomay":return _.jsx("img",{src:"https://i.postimg.cc/cJYy2WQN/hinh-nen-3.jpg",alt:r.name,className:s});case"caotoc":return _.jsx("img",{src:"https://i.postimg.cc/dQWMQybn/5.jpg",alt:r.name,className:s});case"ven-bien":return _.jsx("img",{src:"https://i.postimg.cc/zDdmDgs0/6.jpg",alt:r.name,className:s});case"antoan-ven-bien":return _.jsx("img",{src:"https://i.postimg.cc/ZYFWdtv0/BOARD.webp",alt:r.name,className:s});case"antoan-xang-dau":return _.jsx("img",{src:"https://i.postimg.cc/T2k82Dzc/4.jpg",alt:r.name,className:s});case"antoan-hoa-chat":return _.jsx("img",{src:"https://i.postimg.cc/mZVx08Ff/World-Teacher-s-Day-Flowers-Border-Pink.jpg",alt:r.name,className:s});default:return l.includes("chng ch")?_.jsx(Ov,{className:t}):_.jsx(Nv,{className:t})}return l.includes("thuyn trng")?_.jsx(r2,{className:t}):l.includes("my trng")?_.jsx(n2,{className:t}):l.includes("thy th")?_.jsx(fg,{className:t}):l.includes("li phng tin")?_.jsx(vu,{className:t}):l.includes("chng ch")?_.jsx(Ov,{className:t}):_.jsx(Nv,{className:t})},y3=({licenses:r,onSelect:e,onBack:t})=>{const{theme:s}=tn();return _.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right",children:[_.jsxs("div",{className:"relative text-center mb-10",children:[_.jsx("button",{onClick:t,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:_.jsx(Ho,{className:"h-10 w-10 text-primary"})}),s==="noel"?_.jsx("img",{src:"/assets/img/tree.png",alt:"Tree",className:"h-20 w-20 mx-auto mb-4 object-contain drop-shadow-lg"}):_.jsx(fg,{className:"h-20 w-20 mx-auto text-primary mb-4"}),_.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Chn Hng Bng"}),_.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Anh/ch vui lng chn hng bng mun n tp v thi th."})]}),_.jsx("div",{className:"bg-card p-6 rounded-2xl shadow-lg",children:_.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:r.map(a=>{const l=a.subjects.reduce((c,f)=>c+f.questions.length,0);return _.jsxs("button",{onClick:()=>e(a),className:"group w-full p-4 bg-background rounded-lg text-center hover:bg-primary/10 transition-all duration-300 transform hover:scale-105 focus:ring-4 focus:ring-ring focus:outline-none",children:[p3(a,s),_.jsx("h3",{className:"text-md font-bold text-primary",children:a.name}),_.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[a.subjects.length," mn - ",l," cu"]})]},a.id)})})})]})},_3=({onNameSubmit:r,onBack:e})=>{const[t,s]=me.useState(""),a=l=>{l.preventDefault();const c=t.trim();r(c||"Hc vin")};return _.jsxs("div",{className:"w-full max-w-md mx-auto p-4 animate-slide-in-right",children:[_.jsxs("div",{className:"text-center mb-10",children:[_.jsx(e2,{className:"h-20 w-20 mx-auto text-primary mb-4"}),_.jsxs("div",{className:"relative flex justify-center items-center",children:[_.jsx("div",{className:"absolute left-0",children:_.jsx("button",{onClick:e,className:"bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:_.jsx(Ho,{className:"h-10 w-10 text-primary"})})}),_.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Thng tin ca anh/ch"})]}),_.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Nhp tn  ti c th lu li tin  hc tp cho anh/ch."})]}),_.jsx("div",{className:"bg-card p-8 rounded-2xl shadow-lg",children:_.jsxs("form",{onSubmit:a,children:[_.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-card-foreground mb-2",children:"Tn ca anh/ch"}),_.jsx("input",{id:"name",type:"text",value:t,onChange:l=>s(l.target.value),placeholder:"V d: Nguyn Vn A (c th b trng)",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-colors duration-300",autoFocus:!0}),_.jsx("button",{type:"submit",className:"mt-6 w-full bg-primary text-primary-foreground font-bold py-3 px-6 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300",children:"Xc nhn"})]})})]})},v3=({onModeSelect:r,licenseName:e,userName:t,onSwitchLicense:s})=>_.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right",children:[_.jsxs("div",{className:"relative text-center mb-10",children:[_.jsx("div",{className:"absolute right-0 top-0",children:_.jsxs("button",{onClick:s,className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground hover:text-primary transition-all duration-300 py-1 px-2 rounded-md hover:bg-secondary",title:"Chn li hng bng",children:[_.jsx(t2,{className:"h-4 w-4"}),_.jsx("span",{children:"Chn li hng bng"})]})}),_.jsxs("h1",{className:"text-4xl font-bold text-foreground",children:["Cho anh/ch ",t,"!"]}),_.jsxs("p",{className:"text-lg text-muted-foreground mt-2",children:["Anh/ch ang hc hng bng ",_.jsx("span",{className:"font-semibold text-primary",children:e}),"."]}),_.jsx("p",{className:"text-lg text-muted-foreground mt-1",children:"Hy chn mt ch   bt u."})]}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[_.jsxs("button",{onClick:()=>r("practice"),className:"group bg-card text-card-foreground p-8 rounded-2xl shadow-lg text-center hover:bg-primary/10 transition-all duration-300 transform hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-ring",children:[_.jsx(ip,{className:"h-16 w-16 mx-auto text-primary mb-4 transition-transform group-hover:scale-110"}),_.jsx("h2",{className:"text-2xl font-bold text-card-foreground",children:"n tp"}),_.jsx("p",{className:"text-muted-foreground mt-2",children:"Luyn tp tng mn  nm vng kin thc."})]}),_.jsxs("button",{onClick:()=>r("online_exam"),className:"group bg-card text-card-foreground p-8 rounded-2xl shadow-lg text-center hover:bg-destructive/10 transition-all duration-300 transform hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-ring",children:[_.jsx(s2,{className:"h-16 w-16 mx-auto text-destructive mb-4 transition-transform group-hover:scale-110"}),_.jsx("h2",{className:"text-2xl font-bold text-card-foreground",children:"Thi th"}),_.jsx("p",{className:"text-muted-foreground mt-2",children:"Lm bi thi 30 cu ngu nhin trong 45 pht."})]})]})]}),qw=r=>{if(!r)return"";const e=new Date(r),t=e.getDate().toString().padStart(2,"0"),s=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getHours().toString().padStart(2,"0"),l=e.getMinutes().toString().padStart(2,"0");return`(${t}/${s} ${a}:${l})`},b3=({subjects:r,progress:e,onSelect:t,onBack:s})=>_.jsxs("div",{className:"w-full max-w-2xl mx-auto p-4 animate-slide-in-right",children:[_.jsxs("div",{className:"relative text-center mb-10",children:[_.jsx("button",{onClick:s,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:_.jsx(Ho,{className:"h-10 w-10 text-primary"})}),_.jsx(ip,{className:"h-20 w-20 mx-auto text-primary mb-4"}),_.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Chn Mn hc"}),_.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Chn mt mn  bt u n tp."})]}),_.jsx("div",{className:"bg-card p-6 rounded-2xl shadow-lg",children:_.jsx("div",{className:"space-y-3",children:r.map(a=>{const l=e[a.id],c=l&&l.lastScore!==null;return _.jsxs("button",{onClick:()=>t(a),className:"w-full flex items-center justify-between p-5 bg-background rounded-lg text-left hover:bg-primary/10 transition-all duration-300 transform hover:scale-[1.02] focus:ring-4 focus:ring-ring focus:outline-none",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"text-lg font-bold text-primary",children:a.name}),_.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.questions.length," cu hi"]})]}),_.jsxs("div",{className:"flex items-center gap-4",children:[c&&_.jsxs("div",{className:"text-right text-sm",children:[_.jsxs("p",{className:"text-muted-foreground flex items-center justify-end",children:[_.jsx("span",{children:"Ln cui:"}),_.jsxs("span",{className:"font-semibold text-primary ml-1",children:[l.lastScore,"/",a.questions.length]}),l.lastScoreTimestamp&&_.jsx("span",{className:"ml-1.5 text-xs text-muted-foreground/80",children:qw(l.lastScoreTimestamp)})]}),_.jsxs("p",{className:"text-muted-foreground flex items-center justify-end mt-0.5",children:[_.jsx("span",{children:"Cao nht:"}),_.jsxs("span",{className:"font-semibold text-success ml-1",children:[l.highScore,"/",a.questions.length]}),l.highScoreTimestamp&&_.jsx("span",{className:"ml-1.5 text-xs text-muted-foreground/80",children:qw(l.highScoreTimestamp)})]})]}),_.jsx(ZA,{className:"h-6 w-6 text-muted-foreground"})]})]},a.id)})})})]}),w3=({quiz:r,onFinish:e,onBack:t})=>{const[s,a]=me.useState(0),[l,c]=me.useState({}),f=me.useMemo(()=>r.questions[s],[r.questions,s]),g=me.useMemo(()=>l[f.id]!==void 0,[l,f.id]),p=me.useMemo(()=>l[f.id]||null,[l,f.id]),b=()=>{e(l)},E=k=>{g||c(j=>({...j,[f.id]:k}))},S=()=>{s===r.questions.length-1?b():a(j=>j+1)},R=s/r.questions.length*100;return _.jsx("div",{className:"w-full max-w-3xl mx-auto p-4 md:p-6 animate-slide-in-right font-quiz-default",children:_.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-6 md:p-8",children:[_.jsxs("div",{className:"mb-6",children:[_.jsxs("div",{className:"flex justify-between items-center mb-4 relative",children:[_.jsx("button",{onClick:t,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-background/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-card transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:_.jsx(Ho,{className:"h-10 w-10"})}),_.jsx("h1",{className:"text-xl font-bold text-foreground text-center flex-grow",children:r.title}),_.jsx("button",{onClick:b,className:"bg-secondary text-secondary-foreground hover:bg-secondary/80 text-sm font-bold py-2 px-4 rounded-lg transition-colors duration-300",children:"Kt thc"})]}),_.jsx("div",{className:"w-full bg-secondary rounded-full h-2.5 mb-2",children:_.jsx("div",{className:"bg-primary h-2.5 rounded-full transition-all duration-500",style:{width:`${R}%`}})}),_.jsx("div",{className:"flex justify-between items-center text-sm text-muted-foreground",children:_.jsxs("span",{children:["Cu ",s+1," / ",r.questions.length]})})]}),_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-5 text-foreground",children:f.text}),f.image&&_.jsx("div",{className:"mb-6 rounded-lg overflow-hidden",children:_.jsx("img",{src:f.image,alt:"Cu hi",className:"w-full h-auto object-cover max-h-80"})}),_.jsx("div",{className:"space-y-3",children:f.answers.map(k=>{const j=p===k.id;let D="w-full text-left p-4 rounded-lg border-2 transition-all duration-300 flex items-center justify-between text-lg";const q=k.id===f.correctAnswerId;return g?q?D+=" bg-success/10 border-success text-success":j&&!q?D+=" bg-destructive/10 border-destructive text-destructive":D+=" border-border text-muted-foreground":j?D+=" bg-primary/10 border-primary ring-2 ring-primary text-primary-foreground":D+=" bg-background hover:bg-muted border-border text-foreground",_.jsxs("button",{onClick:()=>E(k.id),disabled:g,className:D,children:[_.jsx("span",{className:"flex-grow",children:k.text}),g&&_.jsxs(_.Fragment,{children:[q&&_.jsx(rp,{className:"h-6 w-6 text-success ml-3"}),j&&!q&&_.jsx(sp,{className:"h-6 w-6 text-destructive ml-3"})]})]},k.id)})}),_.jsx("div",{className:"mt-8",children:_.jsx("div",{className:"text-right",children:g?_.jsx("button",{onClick:S,className:"bg-success text-success-foreground font-bold py-3 px-8 rounded-lg hover:bg-success/90 transition-all duration-300 animate-slide-in-right",children:s===r.questions.length-1?"Hon thnh":"Cu tip theo"}):_.jsx("div",{className:"h-[48px]"})})})]})]})})},E3=r=>{const e=Math.floor(r/60),t=r%60;return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},T3=({quiz:r,onFinish:e,onBack:t})=>{const[s,a]=me.useState(0),[l,c]=me.useState({}),[f,g]=me.useState(r.timeLimit),p=me.useMemo(()=>r.questions[s],[r.questions,s]),b=me.useRef(l);me.useEffect(()=>{b.current=l},[l]);const E=me.useCallback(()=>{const j=b.current,D=r.questions.length-Object.keys(j).length,q=D>0?`Anh/ch vn cn ${D} cu cha tr li. Anh/ch c chc chn mun np bi khng?`:"Anh/ch  hon thnh tt c cc cu hi. Anh/ch c mun np bi khng?";window.confirm(q)&&e(j)},[r.questions.length,e]);me.useEffect(()=>{if(f===void 0)return;const j=setInterval(()=>{g(D=>D?D-1:0)},1e3);return()=>clearInterval(j)},[]);const S=me.useRef(e);me.useEffect(()=>{S.current=e},[e]),me.useEffect(()=>{f===0&&(alert(" ht gi lm bi! H thng s t ng np bi ca anh/ch."),S.current(b.current))},[f]);const R=j=>{c(D=>({...D,[p.id]:j}))},k=Object.keys(l).length/r.questions.length*100;return _.jsx("div",{className:"w-full max-w-3xl mx-auto p-4 md:p-6 animate-slide-in-right font-quiz-default",children:_.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-6 md:p-8",children:[_.jsxs("div",{className:"mb-6",children:[_.jsxs("div",{className:"flex justify-between items-center mb-4 relative",children:[_.jsx("button",{onClick:t,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-background/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-card transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:_.jsx(Ho,{className:"h-10 w-10"})}),_.jsx("h1",{className:"text-xl font-bold text-foreground text-center flex-grow",children:r.title}),_.jsx("button",{onClick:E,className:"bg-primary text-primary-foreground hover:bg-primary/90 text-sm font-bold py-2 px-4 rounded-lg transition-colors duration-300",children:"Np bi"})]}),_.jsx("div",{className:"w-full bg-secondary rounded-full h-2.5 mb-2",children:_.jsx("div",{className:"bg-primary h-2.5 rounded-full transition-all duration-500",style:{width:`${k}%`}})}),_.jsxs("div",{className:"flex justify-between items-center text-sm text-muted-foreground",children:[_.jsxs("span",{children:["Cu ",s+1," / ",r.questions.length]}),f!==void 0&&_.jsxs("div",{className:"flex items-center font-semibold text-destructive",children:[_.jsx(WA,{className:"h-5 w-5 mr-1"}),_.jsx("span",{children:E3(f)})]})]})]}),_.jsxs("div",{className:"mb-6 border-b border-border pb-6",children:[_.jsx("h3",{className:"text-sm font-semibold text-muted-foreground mb-3",children:"Danh sch cu hi:"}),_.jsx("div",{className:"flex flex-wrap gap-2",children:r.questions.map((j,D)=>{const q=D===s,Y=l[j.id]!==void 0;let G="w-8 h-8 rounded-md flex items-center justify-center font-bold text-xs transition-all duration-200 ";return q?G+="bg-primary text-primary-foreground scale-110 shadow-lg ring-2 ring-ring":Y?G+="bg-success text-success-foreground hover:bg-success/80":G+="bg-secondary text-secondary-foreground hover:bg-muted",_.jsx("button",{className:G,onClick:()=>a(D),children:D+1},j.id)})})]}),_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-5 text-foreground",children:p.text}),p.image&&_.jsx("div",{className:"mb-6 rounded-lg overflow-hidden",children:_.jsx("img",{src:p.image,alt:"Cu hi",className:"w-full h-auto object-cover max-h-80"})}),_.jsx("div",{className:"space-y-3",children:p.answers.map((j,D)=>{const q=l[p.id]===j.id;let Y="w-full text-left p-4 rounded-lg border-2 transition-all duration-300 flex items-center text-lg";return q?Y+=" bg-primary/10 border-primary ring-2 ring-primary text-foreground":Y+=" bg-background hover:bg-muted border-border text-foreground",_.jsx("button",{onClick:()=>R(j.id),className:Y,children:_.jsxs("div",{className:"flex items-start w-full",children:[_.jsxs("span",{className:"font-bold mr-2 min-w-[20px]",children:[String.fromCharCode(65+D),"."]}),_.jsx("span",{children:j.text})]})},j.id)})}),_.jsx("div",{className:"mt-8",children:_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("button",{onClick:()=>a(j=>j-1),disabled:s===0,className:"bg-secondary text-secondary-foreground font-bold py-3 px-8 rounded-lg hover:bg-muted disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300",children:"Cu trc"}),s===r.questions.length-1?_.jsx("button",{onClick:E,className:"bg-destructive text-destructive-foreground font-bold py-3 px-8 rounded-lg hover:bg-destructive/90 transition-all duration-300",children:"Np bi"}):_.jsx("button",{onClick:()=>a(j=>j+1),className:"bg-primary text-primary-foreground font-bold py-3 px-8 rounded-lg hover:bg-primary/90 transition-all duration-300",children:"Cu tip"})]})})]})]})})},S3=r=>{const e=Math.floor(r/60),t=r%60;return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},A3=({checked:r,onChange:e})=>_.jsx("div",{onClick:e,className:`w-[14px] h-[14px] border border-[#999] inline-block cursor-pointer bg-white relative ${r?"bg-[#333]":""}`,children:r&&_.jsx("div",{className:"absolute top-[2px] left-[2px] w-[8px] h-[8px] bg-[#333]"})}),R3=({quiz:r,onFinish:e,onBack:t,userName:s,selectedLicense:a})=>{const[l,c]=me.useState(0),[f,g]=me.useState({}),[p,b]=me.useState(r.timeLimit??3600),E=me.useMemo(()=>r.questions[l],[r.questions,l]),S=me.useRef(f);me.useEffect(()=>{S.current=f},[f]);const R=()=>{window.confirm("Anh/ch c chc chn mun thot khi bi thi khng? Mi tin trnh s b mt.")&&t()},k=me.useCallback(()=>{const q=S.current,Y=r.questions.length-Object.keys(q).length,G=Y>0?`Anh/ch vn cn ${Y} cu cha tr li. Anh/ch c chc chn mun np bi khng?`:"Anh/ch  hon thnh tt c cc cu hi. Anh/ch c mun np bi khng?";window.confirm(G)&&e(q)},[r.questions.length,e]),j=me.useRef(e);me.useEffect(()=>{j.current=e},[e]),me.useEffect(()=>{const q=setInterval(()=>{b(Y=>Y>0?Y-1:0)},1e3);return()=>clearInterval(q)},[]),me.useEffect(()=>{p===0&&(alert(" ht gi lm bi! H thng s t ng np bi ca anh/ch."),j.current(S.current))},[p]);const D=(q,Y)=>{g(G=>({...G,[q]:Y}))};return _.jsxs("div",{className:"w-full max-w-7xl mx-auto font-sans text-black shadow-lg animate-slide-in-right rounded-md",children:[_.jsx("div",{className:"h-3 bg-yellow-700 rounded-t-md border-b-2 border-yellow-900"}),_.jsxs("div",{className:"bg-white p-4",children:[_.jsxs("div",{className:"flex justify-between items-start pb-4 border-b border-gray-300",children:[_.jsxs("div",{className:"flex gap-4 items-center",children:[_.jsx("img",{src:"https://i.postimg.cc/8PDn1wfM/favicon.png",alt:"Avatar",className:"w-20 h-[100px] border border-gray-300 object-contain p-1"}),_.jsxs("div",{className:"text-sm",children:[_.jsx("p",{children:"S bo danh:"}),_.jsx("p",{children:"Ngy sinh:"}),_.jsxs("p",{className:"mt-2",children:["H tn: ",_.jsx("span",{className:"font-bold text-blue-700",children:s||"Hc vin"})]}),_.jsxs("p",{children:["Hng bng: ",_.jsx("span",{className:"font-bold text-blue-700",children:(a==null?void 0:a.name)||"Thuyn trng hng ba - T3"})]})]})]}),_.jsxs("div",{className:"flex items-start gap-4",children:[_.jsxs("div",{className:"bg-[#f0ad4e] text-black p-2 rounded-md text-sm w-48",children:[_.jsx("p",{className:"font-bold",children:"ang thi"}),_.jsx("p",{children:"Thi gian: 45 pht"}),_.jsx("p",{children:"B gi: 0 pht"}),_.jsxs("p",{children:["Cn li: ",_.jsx("span",{className:"font-bold",children:S3(p)})]})]}),_.jsx("button",{onClick:R,className:"text-sm text-gray-600 hover:text-red-500 font-semibold",children:"Thot"})]})]}),_.jsxs("div",{className:"flex mt-4 gap-4",children:[_.jsxs("div",{className:"flex-1 border border-gray-400 rounded-md p-4 flex flex-col justify-between min-h-[500px]",children:[_.jsxs("div",{children:[_.jsx("p",{className:"font-bold mb-4 border-b border-dashed border-gray-400 pb-2",children:"Ni dung cu hi"}),_.jsxs("p",{className:"font-bold text-red-600 mb-2",children:["Cu :",l+1]}),_.jsx("p",{className:"mb-4 font-semibold",children:E.text}),E.image&&_.jsx("div",{className:"mb-4 flex justify-start",children:_.jsx("img",{src:E.image,alt:"Hnh nh cu hi",className:"max-w-full h-auto max-h-60 object-contain border border-gray-300 rounded-md"})}),_.jsx("div",{className:"space-y-4",children:E.answers.map((q,Y)=>_.jsxs("div",{className:"flex items-start",children:[_.jsxs("span",{className:"font-bold mr-2 text-gray-700 min-w-[20px]",children:[String.fromCharCode(65+Y),"."]}),_.jsx("p",{children:q.text})]},q.id))})]}),_.jsxs("div",{className:"flex justify-center gap-4 mt-8",children:[_.jsxs("button",{onClick:()=>c(q=>Math.max(0,q-1)),disabled:l===0,className:"bg-[#f0ad4e] text-black px-4 py-2 rounded-md border border-gray-400 flex items-center font-semibold hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-5 h-5",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),"Tr li"]}),l<r.questions.length-1&&_.jsxs("button",{onClick:()=>c(q=>Math.min(r.questions.length-1,q+1)),className:"bg-[#f0ad4e] text-black px-4 py-2 rounded-md border border-gray-400 flex items-center font-semibold hover:bg-yellow-500 transition-colors",children:["Tip tc",_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-5 h-5",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})]})]})]}),_.jsxs("div",{className:"w-[200px] flex-none flex flex-col",children:[_.jsx("div",{className:"border border-gray-300 rounded-md",children:_.jsxs("table",{className:"w-full border-collapse text-xs",children:[_.jsx("thead",{className:"sticky top-0 bg-[#f0ad4e] z-10",children:_.jsxs("tr",{children:[_.jsx("th",{className:"border border-gray-400 p-2",children:"Cu"}),_.jsx("th",{className:"border border-gray-400 p-2",children:"a"}),_.jsx("th",{className:"border border-gray-400 p-2",children:"b"}),_.jsx("th",{className:"border border-gray-400 p-2",children:"c"}),_.jsx("th",{className:"border border-gray-400 p-2",children:"d"})]})}),_.jsx("tbody",{children:r.questions.map((q,Y)=>_.jsxs("tr",{className:l===Y?"bg-cyan-200":"hover:bg-gray-50",children:[_.jsxs("td",{className:`border border-gray-400 p-2 font-bold text-center cursor-pointer whitespace-nowrap ${l===Y?"text-black":"text-gray-500"}`,onClick:()=>c(Y),children:["Cu ",Y+1]}),q.answers.slice(0,4).map(G=>_.jsx("td",{className:"border border-gray-400 p-2 text-center",children:_.jsx(A3,{checked:f[q.id]===G.id,onChange:()=>D(q.id,G.id)})},G.id))]},q.id))})]})}),_.jsx("div",{className:"text-center mt-4 pt-2 border-t border-gray-200",children:_.jsx("button",{onClick:k,className:"bg-[#337ab7] text-white px-8 py-2 rounded-md font-semibold hover:bg-blue-700 transition-colors w-full",children:"Np bi"})})]})]}),_.jsxs("div",{className:"mt-4 bg-[#005a9c] text-white p-4 rounded-b-md flex items-center gap-4 text-xs",children:[_.jsx("img",{src:"https://i.postimg.cc/8PDn1wfM/favicon.png",alt:"Logo",className:"h-16 w-16 object-contain"}),_.jsxs("div",{children:[_.jsx("p",{className:"font-bold",children:"CNG TY C PHN T VN V GIO DC NINH BNH"}),_.jsx("p",{children:"a ch: ng Triu Vit Vng, phng Hoa L, tnh Ninh Bnh "})]})]})]})]})},x3=({quiz:r,userAnswers:e,score:t,onRetry:s,onBack:a,userName:l})=>{const[c,f]=me.useState("all"),[g]=me.useState(()=>new Date),p=r.questions.length,b=t>=25,E=me.useMemo(()=>new Intl.DateTimeFormat("vi-VN",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit",year:"numeric"}).format(g),[g]),S=me.useMemo(()=>c==="incorrect"?r.questions.filter(R=>e[R.id]!==R.correctAnswerId):r.questions,[c,r.questions,e]);return _.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right font-quiz-default",children:[_.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8 text-center mb-8",children:[_.jsx(Kw,{className:"h-24 w-24 mx-auto text-yellow-400 mb-4"}),_.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Kt qu Thi th"}),_.jsxs("div",{className:"my-4 text-muted-foreground",children:[_.jsxs("p",{className:"text-lg",children:["Th sinh: ",_.jsx("span",{className:"font-bold text-primary",children:l})]}),_.jsxs("p",{className:"text-sm",children:["Hon thnh lc: ",E]})]}),_.jsx("p",{className:`text-2xl font-bold mb-6 ${b?"text-success":"text-destructive"}`,children:b?"Chc mng, anh/ch  T!":"Rt tic, anh/ch KHNG T."}),_.jsxs("div",{className:`inline-block p-6 rounded-xl border ${b?"bg-success/10 border-success/20":"bg-destructive/10 border-destructive/20"}`,children:[_.jsxs("p",{className:`text-5xl font-extrabold ${b?"text-success":"text-destructive"}`,children:[t," / ",p]}),_.jsx("p",{className:"text-lg text-muted-foreground mt-1",children:"S cu ng"})]})]}),_.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8",children:[_.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6",children:[_.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Xem li bi lm"}),_.jsxs("div",{className:"flex items-center gap-2 mt-4 sm:mt-0",children:[_.jsx("button",{onClick:()=>f("all"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${c==="all"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:"Tt c"}),_.jsxs("button",{onClick:()=>f("incorrect"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${c==="incorrect"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:["Ch cu sai (",r.questions.length-t,")"]})]})]}),_.jsx("div",{className:"space-y-6 max-h-[50vh] overflow-y-auto pr-2",children:S.length>0?S.map((R,k)=>{const j=e[R.id],D=R.correctAnswerId;return _.jsxs("div",{className:"p-4 border-b border-border last:border-b-0",children:[_.jsxs("p",{className:"font-semibold text-lg mb-3 text-foreground",children:[_.jsxs("span",{className:"mr-2",children:["Cu ",r.questions.findIndex(q=>q.id===R.id)+1,":"]}),R.text]}),_.jsx("div",{className:"space-y-2",children:R.answers.map(q=>{const Y=q.id===j,G=q.id===D;let ne="flex items-center p-3 rounded-md text-sm ";return G?ne+="bg-success/10 text-success":Y?ne+="bg-destructive/10 text-destructive":ne+="bg-muted/50 text-muted-foreground",_.jsxs("div",{className:ne,children:[G?_.jsx(rp,{className:"h-5 w-5 mr-3 text-success"}):Y?_.jsx(sp,{className:"h-5 w-5 mr-3 text-destructive"}):_.jsx("div",{className:"w-5 h-5 mr-3"}),_.jsx("span",{children:q.text})]},q.id)})})]},R.id)}):_.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Tuyt vi! Anh/ch  tr li ng tt c cc cu hi."})})]}),_.jsxs("div",{className:"text-center mt-8 flex flex-col sm:flex-row justify-center items-center gap-4",children:[_.jsx("button",{onClick:a,className:"w-full sm:w-auto bg-primary text-primary-foreground font-bold py-3 px-8 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105",children:"Quay li"}),_.jsx("button",{onClick:s,className:"w-full sm:w-auto bg-secondary text-secondary-foreground font-bold py-3 px-8 rounded-lg hover:bg-muted focus:outline-none focus:ring-4 focus:ring-ring transition-colors duration-300",children:"Lm li bi thi"})]})]})},C3=({quiz:r,userAnswers:e,score:t,onRetry:s,onBack:a,userName:l})=>{const[c,f]=me.useState("all"),[g]=me.useState(()=>new Date),p=r.questions.length,b=p>0?Math.round(t/p*100):0,E=me.useMemo(()=>new Intl.DateTimeFormat("vi-VN",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit",year:"numeric"}).format(g),[g]),S=me.useMemo(()=>c==="incorrect"?r.questions.filter(R=>e[R.id]!==R.correctAnswerId):r.questions,[c,r.questions,e]);return _.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right font-quiz-default",children:[_.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8 text-center mb-8",children:[_.jsx(Kw,{className:"h-24 w-24 mx-auto text-yellow-400 mb-4"}),_.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Kt qu n tp"}),_.jsxs("div",{className:"my-4 text-muted-foreground",children:[_.jsxs("p",{className:"text-lg",children:["Hc vin: ",_.jsx("span",{className:"font-bold text-primary",children:l})]}),_.jsxs("p",{className:"text-sm",children:["Hon thnh lc: ",E]})]}),_.jsxs("div",{className:"bg-primary/10 inline-block p-6 rounded-xl border border-primary/20 mt-4",children:[_.jsxs("p",{className:"text-5xl font-extrabold text-primary",children:[t," / ",p]}),_.jsxs("p",{className:"text-2xl font-semibold text-primary/80 mt-1",children:["(",b,"%)"]})]})]}),_.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8",children:[_.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6",children:[_.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Xem li bi lm"}),_.jsxs("div",{className:"flex items-center gap-2 mt-4 sm:mt-0",children:[_.jsx("button",{onClick:()=>f("all"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${c==="all"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:"Tt c"}),_.jsxs("button",{onClick:()=>f("incorrect"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${c==="incorrect"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:["Ch cu sai (",r.questions.length-t,")"]})]})]}),_.jsx("div",{className:"space-y-6 max-h-[50vh] overflow-y-auto pr-2",children:S.length>0?S.map((R,k)=>{const j=e[R.id],D=R.correctAnswerId;return _.jsxs("div",{className:"p-4 border-b border-border last:border-b-0",children:[_.jsxs("p",{className:"font-semibold text-lg mb-3 text-foreground",children:[_.jsxs("span",{className:"mr-2",children:["Cu ",r.questions.findIndex(q=>q.id===R.id)+1,":"]}),R.text]}),_.jsx("div",{className:"space-y-2",children:R.answers.map(q=>{const Y=q.id===j,G=q.id===D;let ne="flex items-center p-3 rounded-md text-sm ";return G?ne+="bg-success/10 text-success":Y?ne+="bg-destructive/10 text-destructive":ne+="bg-muted/50 text-muted-foreground",_.jsxs("div",{className:ne,children:[G?_.jsx(rp,{className:"h-5 w-5 mr-3 text-success"}):Y?_.jsx(sp,{className:"h-5 w-5 mr-3 text-destructive"}):_.jsx("div",{className:"w-5 h-5 mr-3"}),_.jsx("span",{children:q.text})]},q.id)})})]},R.id)}):_.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Tuyt vi! Anh/ch  tr li ng tt c cc cu hi."})})]}),_.jsxs("div",{className:"text-center mt-8 flex flex-col sm:flex-row justify-center items-center gap-4",children:[_.jsx("button",{onClick:a,className:"w-full sm:w-auto bg-primary text-primary-foreground font-bold py-3 px-8 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105",children:"Cc mn khc"}),_.jsx("button",{onClick:s,className:"w-full sm:w-auto bg-secondary text-secondary-foreground font-bold py-3 px-8 rounded-lg hover:bg-muted focus:outline-none focus:ring-4 focus:ring-ring transition-colors duration-300",children:"Lm li"})]})]})},I3="_card_ns310_3",N3="_header_ns310_45",O3="_logoPlaceholder_ns310_69",k3="_schoolName_ns310_97",D3="_body_ns310_113",j3="_cardTitle_ns310_135",P3="_contentRow_ns310_157",M3="_photoSection_ns310_169",V3="_photoWrapper_ns310_179",U3="_avatar_ns310_195",L3="_infoSection_ns310_209",z3="_infoRow_ns310_229",B3="_label_ns310_239",q3="_value_ns310_255",H3="_valueHighlight_ns310_265",$3="_footer_ns310_281",F3="_barcode_ns310_299",st={card:I3,header:N3,logoPlaceholder:O3,schoolName:k3,body:D3,cardTitle:j3,contentRow:P3,photoSection:M3,photoWrapper:V3,avatar:U3,infoSection:L3,infoRow:z3,label:B3,value:q3,valueHighlight:H3,footer:$3,barcode:F3};var sS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Hw=oi.createContext&&oi.createContext(sS),G3=["attr","size","title"];function K3(r,e){if(r==null)return{};var t=Q3(r,e),s,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);for(a=0;a<l.length;a++)s=l[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(t[s]=r[s])}return t}function Q3(r,e){if(r==null)return{};var t={};for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s)){if(e.indexOf(s)>=0)continue;t[s]=r[s]}return t}function fd(){return fd=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},fd.apply(this,arguments)}function $w(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,s)}return t}function md(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?$w(Object(t),!0).forEach(function(s){Y3(r,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):$w(Object(t)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))})}return r}function Y3(r,e,t){return e=X3(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function X3(r){var e=J3(r,"string");return typeof e=="symbol"?e:e+""}function J3(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var s=t.call(r,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function iS(r){return r&&r.map((e,t)=>oi.createElement(e.tag,md({key:t},e.attr),iS(e.child)))}function va(r){return e=>oi.createElement(W3,fd({attr:md({},r.attr)},e),iS(r.child))}function W3(r){var e=t=>{var{attr:s,size:a,title:l}=r,c=K3(r,G3),f=a||t.size||"1em",g;return t.className&&(g=t.className),r.className&&(g=(g?g+" ":"")+r.className),oi.createElement("svg",fd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,c,{className:g,style:md(md({color:r.color||t.color},t.style),r.style),height:f,width:f,xmlns:"http://www.w3.org/2000/svg"}),l&&oi.createElement("title",null,l),r.children)};return Hw!==void 0?oi.createElement(Hw.Consumer,null,t=>e(t)):e(sS)}function Z3(r){return va({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M542.22 32.05c-54.8 3.11-163.72 14.43-230.96 55.59-4.64 2.84-7.27 7.89-7.27 13.17v363.87c0 11.55 12.63 18.85 23.28 13.49 69.18-34.82 169.23-44.32 218.7-46.92 16.89-.89 30.02-14.43 30.02-30.66V62.75c.01-17.71-15.35-31.74-33.77-30.7zM264.73 87.64C197.5 46.48 88.58 35.17 33.78 32.05 15.36 31.01 0 45.04 0 62.75V400.6c0 16.24 13.13 29.78 30.02 30.66 49.49 2.6 149.59 12.11 218.77 46.95 10.62 5.35 23.21-1.94 23.21-13.46V100.63c0-5.29-2.62-10.14-7.27-12.99z"},child:[]}]})(r)}function eD(r){return va({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"},child:[]}]})(r)}function tD(r){return va({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(r)}function nD(r){return va({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(r)}function rD(r){return va({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 128v16a8 8 0 0 1-8 8h-24v12c0 6.627-5.373 12-12 12H60c-6.627 0-12-5.373-12-12v-12H24a8 8 0 0 1-8-8v-16a8 8 0 0 1 4.941-7.392l232-88a7.996 7.996 0 0 1 6.118 0l232 88A8 8 0 0 1 496 128zm-24 304H40c-13.255 0-24 10.745-24 24v16a8 8 0 0 0 8 8h464a8 8 0 0 0 8-8v-16c0-13.255-10.745-24-24-24zM96 192v192H60c-6.627 0-12 5.373-12 12v20h416v-20c0-6.627-5.373-12-12-12h-36V192h-64v192h-64V192h-64v192h-64V192H96z"},child:[]}]})(r)}function sD(r){return va({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M610.5 373.3c2.6-14.1 2.6-28.5 0-42.6l25.8-14.9c3-1.7 4.3-5.2 3.3-8.5-6.7-21.6-18.2-41.2-33.2-57.4-2.3-2.5-6-3.1-9-1.4l-25.8 14.9c-10.9-9.3-23.4-16.5-36.9-21.3v-29.8c0-3.4-2.4-6.4-5.7-7.1-22.3-5-45-4.8-66.2 0-3.3.7-5.7 3.7-5.7 7.1v29.8c-13.5 4.8-26 12-36.9 21.3l-25.8-14.9c-2.9-1.7-6.7-1.1-9 1.4-15 16.2-26.5 35.8-33.2 57.4-1 3.3.4 6.8 3.3 8.5l25.8 14.9c-2.6 14.1-2.6 28.5 0 42.6l-25.8 14.9c-3 1.7-4.3 5.2-3.3 8.5 6.7 21.6 18.2 41.1 33.2 57.4 2.3 2.5 6 3.1 9 1.4l25.8-14.9c10.9 9.3 23.4 16.5 36.9 21.3v29.8c0 3.4 2.4 6.4 5.7 7.1 22.3 5 45 4.8 66.2 0 3.3-.7 5.7-3.7 5.7-7.1v-29.8c13.5-4.8 26-12 36.9-21.3l25.8 14.9c2.9 1.7 6.7 1.1 9-1.4 15-16.2 26.5-35.8 33.2-57.4 1-3.3-.4-6.8-3.3-8.5l-25.8-14.9zM496 400.5c-26.8 0-48.5-21.8-48.5-48.5s21.8-48.5 48.5-48.5 48.5 21.8 48.5 48.5-21.7 48.5-48.5 48.5zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm201.2 226.5c-2.3-1.2-4.6-2.6-6.8-3.9l-7.9 4.6c-6 3.4-12.8 5.3-19.6 5.3-10.9 0-21.4-4.6-28.9-12.6-18.3-19.8-32.3-43.9-40.2-69.6-5.5-17.7 1.9-36.4 17.9-45.7l7.9-4.6c-.1-2.6-.1-5.2 0-7.8l-7.9-4.6c-16-9.2-23.4-28-17.9-45.7.9-2.9 2.2-5.8 3.2-8.7-3.8-.3-7.5-1.2-11.4-1.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c10.1 0 19.5-3.2 27.2-8.5-1.2-3.8-2-7.7-2-11.8v-9.2z"},child:[]}]})(r)}function iD(r){return va({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M319.4 320.6L224 416l-95.4-95.4C57.1 323.7 0 382.2 0 454.4v9.6c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-9.6c0-72.2-57.1-130.7-128.6-133.8zM13.6 79.8l6.4 1.5v58.4c-7 4.2-12 11.5-12 20.3 0 8.4 4.6 15.4 11.1 19.7L3.5 242c-1.7 6.9 2.1 14 7.6 14h41.8c5.5 0 9.3-7.1 7.6-14l-15.6-62.3C51.4 175.4 56 168.4 56 160c0-8.8-5-16.1-12-20.3V87.1l66 15.9c-8.6 17.2-14 36.4-14 57 0 70.7 57.3 128 128 128s128-57.3 128-128c0-20.6-5.3-39.8-14-57l96.3-23.2c18.2-4.4 18.2-27.1 0-31.5l-190.4-46c-13-3.1-26.7-3.1-39.7 0L13.6 48.2c-18.1 4.4-18.1 27.2 0 31.6z"},child:[]}]})(r)}const aD=({user:r})=>_.jsxs("div",{className:st.card,children:[_.jsxs("div",{className:st.header,children:[_.jsx("div",{className:st.logoPlaceholder,children:_.jsx(rD,{size:20})}),_.jsxs("div",{className:st.schoolName,children:["Cng ty C phn",_.jsx("br",{}),"T VN V GIO DC NINH BNH"]})]}),_.jsxs("div",{className:st.body,children:[_.jsx("h2",{className:st.cardTitle,children:"TH HC VIN"}),_.jsxs("div",{className:st.contentRow,children:[_.jsx("div",{className:st.photoSection,children:_.jsx("div",{className:st.photoWrapper,children:_.jsx("img",{src:"https://via.placeholder.com/150",alt:"Avatar",className:st.avatar})})}),_.jsxs("div",{className:st.infoSection,children:[_.jsxs("div",{className:st.infoRow,children:[_.jsx("span",{className:st.label,children:"H tn:"}),_.jsx("span",{className:`${st.value} ${st.valueHighlight}`,children:r.fullName||"NGUYN VN A"})]}),_.jsxs("div",{className:st.infoRow,children:[_.jsx("span",{className:st.label,children:"Ngy sinh: "}),_.jsxs("span",{className:st.value,children:[" ",r.birthDate||" --/--/----"]})]}),_.jsxs("div",{className:st.infoRow,children:[_.jsx("span",{className:st.label,children:"Lp hc: "}),_.jsx("span",{className:st.value,children:r.courseName||"Cha vo kha"})]}),_.jsxs("div",{className:st.infoRow,children:[_.jsx("span",{className:st.label,children:"a ch:"}),_.jsx("span",{className:st.value,style:{fontSize:"0.9rem"},children:r.address||"---"})]})]})]})]}),_.jsxs("div",{className:st.footer,children:[_.jsx("div",{className:st.barcode}),_.jsxs("div",{style:{position:"absolute",bottom:"5px",fontSize:"0.6rem",color:"#718096"},children:["ID: ",r.id?r.id.substring(0,10).toUpperCase():"---"]})]})]}),oD=({userProfile:r,onStart:e,onHistoryClick:t})=>{const{theme:s}=tn();return _.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-slide-in-right",children:_.jsxs("div",{className:"w-full max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[_.jsx("div",{className:"flex justify-center",children:_.jsx(aD,{user:r})}),_.jsxs("div",{className:"bg-card/90 backdrop-blur-sm p-8 rounded-2xl shadow-xl border border-border",children:[_.jsxs("h1",{className:"text-3xl font-bold text-primary mb-6 text-center",children:["Xin cho, ",r.full_name||"Hc vin","!"]}),_.jsx("p",{className:"text-muted-foreground text-center mb-8",children:"Chc bn c mt bui n tp hiu qu v t kt qu cao."}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("button",{onClick:e,className:"w-full bg-primary text-primary-foreground font-bold text-lg py-4 px-6 rounded-xl hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-3 shadow-lg",children:[_.jsx(ip,{className:"w-8 h-8"}),_.jsx("span",{children:"Vo n Tp / Thi Th"})]}),_.jsxs("button",{onClick:t,className:"w-full bg-secondary text-secondary-foreground font-bold text-lg py-4 px-6 rounded-xl hover:bg-secondary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-3 shadow-lg",children:[_.jsx(XA,{className:"w-8 h-8"}),_.jsx("span",{children:"Lch S Thi"})]})]})]})]})})},lD=async r=>{try{const e=n5(qO(L5,"exam_results"),r5("userId","==",r),s5("completedAt","desc"));return(await l5(e)).docs.map(s=>{const a=s.data();return{id:s.id,...a,completedAt:a.completedAt.toDate()}})}catch(e){return console.error("Error fetching exam history:",e),[]}},uD=({userProfile:r,onBack:e})=>{const[t,s]=me.useState([]),[a,l]=me.useState(!0);me.useEffect(()=>{(async()=>{const p=await lD(r.id);s(p),l(!1)})()},[r.id]);const c=g=>new Intl.DateTimeFormat("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(g),f=g=>{const p=Math.floor(g/60),b=g%60;return`${p} pht ${b} giy`};return _.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right",children:[_.jsxs("div",{className:"flex justify-between items-center mb-6",children:[_.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Lch s lm bi"}),_.jsx("button",{onClick:e,className:"bg-secondary text-secondary-foreground px-4 py-2 rounded-lg hover:bg-secondary/80 transition-colors",children:"Quay li"})]}),a?_.jsx("div",{className:"text-center p-8",children:_.jsx("p",{className:"text-muted-foreground",children:"ang ti d liu..."})}):t.length===0?_.jsx("div",{className:"text-center p-8 bg-card rounded-xl shadow-sm",children:_.jsx("p",{className:"text-muted-foreground",children:"Cha c lch s lm bi no."})}):_.jsx("div",{className:"space-y-4",children:t.map(g=>_.jsx("div",{className:"bg-card text-card-foreground p-6 rounded-xl shadow-md border border-border",children:_.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"text-xl font-bold text-primary mb-1",children:g.quizTitle}),_.jsxs("p",{className:"text-sm text-muted-foreground",children:["Thi gian: ",c(g.completedAt)]})]}),_.jsxs("div",{className:"flex items-center gap-6",children:[_.jsxs("div",{className:"text-center",children:[_.jsx("p",{className:"text-xs text-muted-foreground uppercase font-bold",children:"im s"}),_.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[g.score,"/",g.totalQuestions]})]}),_.jsxs("div",{className:"text-center",children:[_.jsx("p",{className:"text-xs text-muted-foreground uppercase font-bold",children:"Thi gian lm"}),_.jsx("p",{className:"text-lg font-semibold",children:f(g.timeTaken)})]})]})]})},g.id))})]})},cD=({userProfile:r,onNavigate:e,onLogout:t})=>_.jsxs("div",{className:"fixed top-0 left-0 right-0 h-16 bg-white dark:bg-slate-900 border-b border-gray-200 dark:border-gray-800 z-40 px-4 shadow-sm flex items-center justify-between transition-colors duration-300",children:[_.jsxs("div",{className:"flex items-center gap-1 md:gap-4 overflow-x-auto no-scrollbar",children:[_.jsxs("button",{onClick:()=>e("dashboard"),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap",children:[_.jsx(Z3,{className:"text-blue-600 dark:text-blue-400"}),_.jsx("span",{className:"font-semibold text-sm md:text-base",children:"n tp"})]}),_.jsxs("a",{href:"/",className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap decoration-0",children:[_.jsx(tD,{className:"text-teal-600 dark:text-teal-400"}),_.jsx("span",{className:"font-medium text-sm md:text-base",children:"Trang ch"})]}),_.jsxs("a",{href:"/quan-ly",className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap decoration-0",children:[_.jsx(sD,{className:"text-orange-600 dark:text-orange-400"}),_.jsx("span",{className:"font-medium text-sm md:text-base",children:"Qun l"})]}),r&&_.jsxs("button",{onClick:()=>e("history"),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap",children:[_.jsx(eD,{className:"text-purple-600 dark:text-purple-400"}),_.jsx("span",{className:"font-medium text-sm md:text-base",children:"Lch s"})]})]}),_.jsx("div",{className:"flex items-center gap-3 md:gap-4 ml-4 flex-shrink-0",children:r?_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"hidden md:flex flex-col items-end",children:[_.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Xin cho,"}),_.jsx("span",{className:"text-sm font-bold text-gray-800 dark:text-white max-w-[150px] truncate",children:r.full_name})]}),_.jsx("div",{className:"md:hidden text-gray-700 dark:text-gray-200",children:_.jsx(iD,{})}),_.jsx("div",{className:"h-8 w-[1px] bg-gray-300 dark:bg-gray-700 mx-1"}),_.jsxs("button",{onClick:t,className:"group flex items-center gap-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 px-3 py-2 rounded-full transition-colors",title:"ng xut",children:[_.jsx(nD,{className:"group-hover:translate-x-1 transition-transform"}),_.jsx("span",{className:"hidden md:inline font-medium text-sm",children:"Thot"})]})]}):_.jsx("button",{onClick:()=>e("login"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold text-sm transition-colors shadow-md",children:"ng nhp"})})]}),hD=(r,e)=>{const t=s=>{const a=s.match(/(\d+)$/);return a?parseInt(a[1],10):0};return t(r.id)-t(e.id)},dD=async()=>{const{data:r,error:e}=await Do.from("licenses").select(`
      id,
      name,
      display_order,
      subjects (
        id,
        name,
        display_order,
        questions (
          *,
          answers (
            id,
            text
          )
        )
      )
    `).order("display_order",{ascending:!0}).order("display_order",{foreignTable:"subjects",ascending:!0});if(e)throw console.error("Error fetching data from Supabase:",e),e;return r.map(s=>({id:s.id,name:s.name,subjects:s.subjects.map(a=>({id:a.id,name:a.name,questions:a.questions.sort(hD).map(l=>({id:l.id,text:l.text,image:l.image,correctAnswerId:l.correct_answer_id,answers:l.answers.map(c=>({id:c.id,text:c.text}))}))}))}))},fD=async r=>{const{data:e,error:t}=await Do.from("profiles").select("*").eq("id",r).single();return t?(console.error("Error fetching user profile:",t),null):e},mD=async(r,e,t,s,a)=>{const{error:l}=await Do.from("exam_results").insert([{user_id:r,license_id:e,score:t,total_questions:s,time_taken:a,completed_at:new Date().toISOString()}]);l&&console.error("Error saving exam result:",l)},Ae={WELCOME:"welcome",LOGIN:"login",DASHBOARD:"dashboard",LICENSE_SELECTION:"license_selection",NAME_INPUT:"name_input",MODE_SELECTION:"mode_selection",SUBJECT_SELECTION:"subject_selection",IN_QUIZ:"in_quiz",IN_ONLINE_EXAM:"in_online_exam",RESULT:"results",EXAM_RESULT:"exam_result",HISTORY:"history"},gD=()=>{const[r,e]=me.useState(Ae.WELCOME),[t,s]=me.useState([]),[a,l]=me.useState(null),[c,f]=me.useState([]),[g,p]=me.useState(null),[b,E]=me.useState(null),[S,R]=me.useState({}),[k,j]=me.useState(0),[D,q]=me.useState(""),[Y,G]=me.useState(null),[ne,_e]=me.useState(window.innerWidth<768);me.useEffect(()=>{const ie=()=>{_e(window.innerWidth<768)};return window.addEventListener("resize",ie),()=>window.removeEventListener("resize",ie)},[]),me.useEffect(()=>{(async()=>{try{const Ee=await dD();s(Ee)}catch(Ee){console.error("Error loading licenses:",Ee)}})()},[]),me.useEffect(()=>{const ie=Gx(cT,async Ee=>{if(Ee){try{const P=await Ee.getIdToken(),{error:W}=await Do.auth.setSession({access_token:P,refresh_token:Ee.refreshToken||P});W&&console.error("Supabase Session Sync Error:",W)}catch(P){console.error("Token exchange failed:",P)}const De=await fD(Ee.uid);De?(G(De),q(De.full_name),e(Ae.DASHBOARD)):console.warn("User logged in but no profile found.")}else G(null),q(""),e(Ae.WELCOME),await Do.auth.signOut()});return()=>{ie()}},[]);const le=()=>{e(Y?Ae.DASHBOARD:Ae.LICENSE_SELECTION)},C=()=>{e(Ae.LOGIN)},x=async ie=>{l(ie),e(Y?Ae.MODE_SELECTION:Ae.NAME_INPUT)},I=ie=>{q(ie),e(Ae.MODE_SELECTION)},U=async ie=>{ie==="practice"?a&&(f(a.subjects),e(Ae.SUBJECT_SELECTION)):ie==="online_exam"&&M()},M=async()=>{if(a){const De=[...a.subjects.flatMap(W=>W.questions)].sort(()=>.5-Math.random()).slice(0,30),P={id:"exam-"+Date.now(),title:` thi th ${a.name}`,questions:De,timeLimit:1800};E(P),R({}),e(Ae.IN_ONLINE_EXAM)}},z=async ie=>{p(ie);const Ee={id:ie.id,title:ie.name,questions:ie.questions,timeLimit:0};E(Ee),R({}),e(Ae.IN_QUIZ)},N=ie=>{if(b){let Ee=0;b.questions.forEach(De=>{ie[De.id]===De.correctAnswerId&&Ee++}),j(Ee),R(ie),r===Ae.IN_ONLINE_EXAM?(Y&&mD(Y.id,a.id,Ee,30,b.timeLimit-0),e(Ae.EXAM_RESULT)):e(Ae.RESULT)}},nt=()=>{r===Ae.EXAM_RESULT?M():g&&a&&z(g)},yt=ie=>{ie==="dashboard"?e(Y?Ae.DASHBOARD:Ae.WELCOME):ie==="history"?e(Ae.HISTORY):ie==="login"&&e(Ae.LOGIN)},X=async()=>{await Do.auth.signOut()},ae=()=>{switch(r){case Ae.WELCOME:return _.jsx(Bw,{onStart:le,onLoginClick:C});case Ae.LOGIN:return _.jsx(g3,{onBack:()=>e(Ae.WELCOME)});case Ae.LICENSE_SELECTION:return _.jsx(y3,{licenses:t,onSelect:x,onBack:()=>e(Ae.WELCOME)});case Ae.NAME_INPUT:return _.jsx(_3,{onNameSubmit:I,onBack:()=>e(Ae.LICENSE_SELECTION)});case Ae.MODE_SELECTION:return _.jsx(v3,{onModeSelect:U,licenseName:(a==null?void 0:a.name)||"",userName:D,onSwitchLicense:()=>e(Ae.LICENSE_SELECTION)});case Ae.SUBJECT_SELECTION:return _.jsx(b3,{subjects:c,progress:{},onSelect:z,onBack:()=>e(Ae.MODE_SELECTION)});case Ae.IN_QUIZ:return b?_.jsx(w3,{quiz:b,onFinish:N,onBack:()=>e(Ae.SUBJECT_SELECTION)}):null;case Ae.IN_ONLINE_EXAM:return b?ne?_.jsx(T3,{quiz:b,onFinish:N,onBack:()=>e(Ae.MODE_SELECTION)}):_.jsx(R3,{quiz:b,onFinish:N,onBack:()=>e(Ae.MODE_SELECTION),userName:D,selectedLicense:a}):null;case Ae.RESULT:return b?_.jsx(C3,{quiz:b,userAnswers:S,score:k,onRetry:nt,onBack:()=>e(Ae.SUBJECT_SELECTION),userName:D}):null;case Ae.EXAM_RESULT:return b?_.jsx(x3,{quiz:b,userAnswers:S,score:k,onRetry:nt,onBack:()=>e(Ae.MODE_SELECTION),userName:D}):null;case Ae.DASHBOARD:return _.jsx(oD,{userProfile:Y,onStart:()=>e(Ae.LICENSE_SELECTION),onHistoryClick:()=>e(Ae.HISTORY)});case Ae.HISTORY:return _.jsx(uD,{userProfile:Y,onBack:()=>e(Ae.DASHBOARD)});default:return _.jsx(Bw,{onStart:le,onLoginClick:C})}};return _.jsxs("div",{className:"min-h-screen bg-background text-foreground font-sans transition-colors duration-300 pt-16",children:[_.jsx(cD,{userProfile:Y,onNavigate:yt,onLogout:X}),ae()]})},pD=()=>_.jsxs(Gw,{children:[_.jsx(o2,{}),_.jsx(gD,{}),_.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:_.jsx(a2,{})})]}),aS=document.getElementById("root");if(!aS)throw new Error("Could not find root element to mount to");const yD=YA.createRoot(aS);yD.render(_.jsx(oi.StrictMode,{children:_.jsx(Gw,{children:_.jsx(pD,{})})}));
