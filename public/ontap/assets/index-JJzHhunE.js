function TN(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in n)){const l=Object.getOwnPropertyDescriptor(s,a);l&&Object.defineProperty(n,a,l.get?l:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function Cy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function SN(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var a=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:function(){return n[s]}})}),t}var t0={exports:{}},Du={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _2;function AN(){if(_2)return Du;_2=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:n,type:s,key:c,ref:a!==void 0?a:null,props:l}}return Du.Fragment=e,Du.jsx=t,Du.jsxs=t,Du}var x2;function NN(){return x2||(x2=1,t0.exports=AN()),t0.exports}var d=NN(),n0={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E2;function CN(){if(E2)return Ve;E2=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),E=Symbol.iterator;function T(B){return B===null||typeof B!="object"?null:(B=E&&B[E]||B["@@iterator"],typeof B=="function"?B:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,C={};function M(B,ie,X){this.props=B,this.context=ie,this.refs=C,this.updater=X||N}M.prototype.isReactComponent={},M.prototype.setState=function(B,ie){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,ie,"setState")},M.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function H(){}H.prototype=M.prototype;function F(B,ie,X){this.props=B,this.context=ie,this.refs=C,this.updater=X||N}var te=F.prototype=new H;te.constructor=F,P(te,M.prototype),te.isPureReactComponent=!0;var fe=Array.isArray;function he(){}var k={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function I(B,ie,X){var le=X.ref;return{$$typeof:n,type:B,key:ie,ref:le!==void 0?le:null,props:X}}function U(B,ie){return I(B.type,ie,B.props)}function V(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function q(B){var ie={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(X){return ie[X]})}var j=/\/+/g;function Be(B,ie){return typeof B=="object"&&B!==null&&B.key!=null?q(""+B.key):ie.toString(36)}function se(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(he,he):(B.status="pending",B.then(function(ie){B.status==="pending"&&(B.status="fulfilled",B.value=ie)},function(ie){B.status==="pending"&&(B.status="rejected",B.reason=ie)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function O(B,ie,X,le,me){var Te=typeof B;(Te==="undefined"||Te==="boolean")&&(B=null);var je=!1;if(B===null)je=!0;else switch(Te){case"bigint":case"string":case"number":je=!0;break;case"object":switch(B.$$typeof){case n:case e:je=!0;break;case v:return je=B._init,O(je(B._payload),ie,X,le,me)}}if(je)return me=me(B),je=le===""?"."+Be(B,0):le,fe(me)?(X="",je!=null&&(X=je.replace(j,"$&/")+"/"),O(me,ie,X,"",function(Me){return Me})):me!=null&&(V(me)&&(me=U(me,X+(me.key==null||B&&B.key===me.key?"":(""+me.key).replace(j,"$&/")+"/")+je)),ie.push(me)),1;je=0;var Ke=le===""?".":le+":";if(fe(B))for(var it=0;it<B.length;it++)le=B[it],Te=Ke+Be(le,it),je+=O(le,ie,X,Te,me);else if(it=T(B),typeof it=="function")for(B=it.call(B),it=0;!(le=B.next()).done;)le=le.value,Te=Ke+Be(le,it++),je+=O(le,ie,X,Te,me);else if(Te==="object"){if(typeof B.then=="function")return O(se(B),ie,X,le,me);throw ie=String(B),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return je}function re(B,ie,X){if(B==null)return B;var le=[],me=0;return O(B,le,"","",function(Te){return ie.call(X,Te,me++)}),le}function ve(B){if(B._status===-1){var ie=B._result;ie=ie(),ie.then(function(X){(B._status===0||B._status===-1)&&(B._status=1,B._result=X)},function(X){(B._status===0||B._status===-1)&&(B._status=2,B._result=X)}),B._status===-1&&(B._status=0,B._result=ie)}if(B._status===1)return B._result.default;throw B._result}var Re=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},Ge={map:re,forEach:function(B,ie,X){re(B,function(){ie.apply(this,arguments)},X)},count:function(B){var ie=0;return re(B,function(){ie++}),ie},toArray:function(B){return re(B,function(ie){return ie})||[]},only:function(B){if(!V(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return Ve.Activity=_,Ve.Children=Ge,Ve.Component=M,Ve.Fragment=t,Ve.Profiler=a,Ve.PureComponent=F,Ve.StrictMode=s,Ve.Suspense=g,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(B){return k.H.useMemoCache(B)}},Ve.cache=function(B){return function(){return B.apply(null,arguments)}},Ve.cacheSignal=function(){return null},Ve.cloneElement=function(B,ie,X){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var le=P({},B.props),me=B.key;if(ie!=null)for(Te in ie.key!==void 0&&(me=""+ie.key),ie)!R.call(ie,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&ie.ref===void 0||(le[Te]=ie[Te]);var Te=arguments.length-2;if(Te===1)le.children=X;else if(1<Te){for(var je=Array(Te),Ke=0;Ke<Te;Ke++)je[Ke]=arguments[Ke+2];le.children=je}return I(B.type,me,le)},Ve.createContext=function(B){return B={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:l,_context:B},B},Ve.createElement=function(B,ie,X){var le,me={},Te=null;if(ie!=null)for(le in ie.key!==void 0&&(Te=""+ie.key),ie)R.call(ie,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(me[le]=ie[le]);var je=arguments.length-2;if(je===1)me.children=X;else if(1<je){for(var Ke=Array(je),it=0;it<je;it++)Ke[it]=arguments[it+2];me.children=Ke}if(B&&B.defaultProps)for(le in je=B.defaultProps,je)me[le]===void 0&&(me[le]=je[le]);return I(B,Te,me)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(B){return{$$typeof:f,render:B}},Ve.isValidElement=V,Ve.lazy=function(B){return{$$typeof:v,_payload:{_status:-1,_result:B},_init:ve}},Ve.memo=function(B,ie){return{$$typeof:y,type:B,compare:ie===void 0?null:ie}},Ve.startTransition=function(B){var ie=k.T,X={};k.T=X;try{var le=B(),me=k.S;me!==null&&me(X,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(he,Re)}catch(Te){Re(Te)}finally{ie!==null&&X.types!==null&&(ie.types=X.types),k.T=ie}},Ve.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Ve.use=function(B){return k.H.use(B)},Ve.useActionState=function(B,ie,X){return k.H.useActionState(B,ie,X)},Ve.useCallback=function(B,ie){return k.H.useCallback(B,ie)},Ve.useContext=function(B){return k.H.useContext(B)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(B,ie){return k.H.useDeferredValue(B,ie)},Ve.useEffect=function(B,ie){return k.H.useEffect(B,ie)},Ve.useEffectEvent=function(B){return k.H.useEffectEvent(B)},Ve.useId=function(){return k.H.useId()},Ve.useImperativeHandle=function(B,ie,X){return k.H.useImperativeHandle(B,ie,X)},Ve.useInsertionEffect=function(B,ie){return k.H.useInsertionEffect(B,ie)},Ve.useLayoutEffect=function(B,ie){return k.H.useLayoutEffect(B,ie)},Ve.useMemo=function(B,ie){return k.H.useMemo(B,ie)},Ve.useOptimistic=function(B,ie){return k.H.useOptimistic(B,ie)},Ve.useReducer=function(B,ie,X){return k.H.useReducer(B,ie,X)},Ve.useRef=function(B){return k.H.useRef(B)},Ve.useState=function(B){return k.H.useState(B)},Ve.useSyncExternalStore=function(B,ie,X){return k.H.useSyncExternalStore(B,ie,X)},Ve.useTransition=function(){return k.H.useTransition()},Ve.version="19.2.0",Ve}var T2;function ky(){return T2||(T2=1,n0.exports=CN()),n0.exports}var G=ky();const vr=Cy(G);var s0={exports:{}},Pu={},r0={exports:{}},i0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S2;function kN(){return S2||(S2=1,(function(n){function e(O,re){var ve=O.length;O.push(re);e:for(;0<ve;){var Re=ve-1>>>1,Ge=O[Re];if(0<a(Ge,re))O[Re]=re,O[ve]=Ge,ve=Re;else break e}}function t(O){return O.length===0?null:O[0]}function s(O){if(O.length===0)return null;var re=O[0],ve=O.pop();if(ve!==re){O[0]=ve;e:for(var Re=0,Ge=O.length,B=Ge>>>1;Re<B;){var ie=2*(Re+1)-1,X=O[ie],le=ie+1,me=O[le];if(0>a(X,ve))le<Ge&&0>a(me,X)?(O[Re]=me,O[le]=ve,Re=le):(O[Re]=X,O[ie]=ve,Re=ie);else if(le<Ge&&0>a(me,ve))O[Re]=me,O[le]=ve,Re=le;else break e}}return re}function a(O,re){var ve=O.sortIndex-re.sortIndex;return ve!==0?ve:O.id-re.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var g=[],y=[],v=1,_=null,E=3,T=!1,N=!1,P=!1,C=!1,M=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function te(O){for(var re=t(y);re!==null;){if(re.callback===null)s(y);else if(re.startTime<=O)s(y),re.sortIndex=re.expirationTime,e(g,re);else break;re=t(y)}}function fe(O){if(P=!1,te(O),!N)if(t(g)!==null)N=!0,he||(he=!0,q());else{var re=t(y);re!==null&&se(fe,re.startTime-O)}}var he=!1,k=-1,R=5,I=-1;function U(){return C?!0:!(n.unstable_now()-I<R)}function V(){if(C=!1,he){var O=n.unstable_now();I=O;var re=!0;try{e:{N=!1,P&&(P=!1,H(k),k=-1),T=!0;var ve=E;try{t:{for(te(O),_=t(g);_!==null&&!(_.expirationTime>O&&U());){var Re=_.callback;if(typeof Re=="function"){_.callback=null,E=_.priorityLevel;var Ge=Re(_.expirationTime<=O);if(O=n.unstable_now(),typeof Ge=="function"){_.callback=Ge,te(O),re=!0;break t}_===t(g)&&s(g),te(O)}else s(g);_=t(g)}if(_!==null)re=!0;else{var B=t(y);B!==null&&se(fe,B.startTime-O),re=!1}}break e}finally{_=null,E=ve,T=!1}re=void 0}}finally{re?q():he=!1}}}var q;if(typeof F=="function")q=function(){F(V)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,Be=j.port2;j.port1.onmessage=V,q=function(){Be.postMessage(null)}}else q=function(){M(V,0)};function se(O,re){k=M(function(){O(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_next=function(O){switch(E){case 1:case 2:case 3:var re=3;break;default:re=E}var ve=E;E=re;try{return O()}finally{E=ve}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(O,re){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var ve=E;E=O;try{return re()}finally{E=ve}},n.unstable_scheduleCallback=function(O,re,ve){var Re=n.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Re+ve:Re):ve=Re,O){case 1:var Ge=-1;break;case 2:Ge=250;break;case 5:Ge=1073741823;break;case 4:Ge=1e4;break;default:Ge=5e3}return Ge=ve+Ge,O={id:v++,callback:re,priorityLevel:O,startTime:ve,expirationTime:Ge,sortIndex:-1},ve>Re?(O.sortIndex=ve,e(y,O),t(g)===null&&O===t(y)&&(P?(H(k),k=-1):P=!0,se(fe,ve-Re))):(O.sortIndex=Ge,e(g,O),N||T||(N=!0,he||(he=!0,q()))),O},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(O){var re=E;return function(){var ve=E;E=re;try{return O.apply(this,arguments)}finally{E=ve}}}})(i0)),i0}var A2;function RN(){return A2||(A2=1,r0.exports=kN()),r0.exports}var a0={exports:{}},Vn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N2;function IN(){if(N2)return Vn;N2=1;var n=ky();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,y,v){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:g,containerInfo:y,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Vn.createPortal=function(g,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(g,y,null,v)},Vn.flushSync=function(g){var y=c.T,v=s.p;try{if(c.T=null,s.p=2,g)return g()}finally{c.T=y,s.p=v,s.d.f()}},Vn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},Vn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Vn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var v=y.as,_=f(v,y.crossOrigin),E=typeof y.integrity=="string"?y.integrity:void 0,T=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:_,integrity:E,fetchPriority:T}):v==="script"&&s.d.X(g,{crossOrigin:_,integrity:E,fetchPriority:T,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Vn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=f(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},Vn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,_=f(v,y.crossOrigin);s.d.L(g,v,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Vn.preloadModule=function(g,y){if(typeof g=="string")if(y){var v=f(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},Vn.requestFormReset=function(g){s.d.r(g)},Vn.unstable_batchedUpdates=function(g,y){return g(y)},Vn.useFormState=function(g,y,v){return c.H.useFormState(g,y,v)},Vn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Vn.version="19.2.0",Vn}var C2;function jN(){if(C2)return a0.exports;C2=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),a0.exports=IN(),a0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k2;function ON(){if(k2)return Pu;k2=1;var n=RN(),e=ky(),t=jN();function s(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function f(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function g(r){if(l(r)!==r)throw Error(s(188))}function y(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(s(188));return i!==r?null:r}for(var o=r,u=i;;){var m=o.return;if(m===null)break;var p=m.alternate;if(p===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===p.child){for(p=m.child;p;){if(p===o)return g(m),r;if(p===u)return g(m),i;p=p.sibling}throw Error(s(188))}if(o.return!==u.return)o=m,u=p;else{for(var w=!1,S=m.child;S;){if(S===o){w=!0,o=m,u=p;break}if(S===u){w=!0,u=m,o=p;break}S=S.sibling}if(!w){for(S=p.child;S;){if(S===o){w=!0,o=p,u=m;break}if(S===u){w=!0,u=p,o=m;break}S=S.sibling}if(!w)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?r:i}function v(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=v(r),i!==null)return i;r=r.sibling}return null}var _=Object.assign,E=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),F=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function q(r){return r===null||typeof r!="object"?null:(r=V&&r[V]||r["@@iterator"],typeof r=="function"?r:null)}var j=Symbol.for("react.client.reference");function Be(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===j?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case P:return"Fragment";case M:return"Profiler";case C:return"StrictMode";case fe:return"Suspense";case he:return"SuspenseList";case I:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case N:return"Portal";case F:return r.displayName||"Context";case H:return(r._context.displayName||"Context")+".Consumer";case te:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case k:return i=r.displayName||null,i!==null?i:Be(r.type)||"Memo";case R:i=r._payload,r=r._init;try{return Be(r(i))}catch{}}return null}var se=Array.isArray,O=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},Re=[],Ge=-1;function B(r){return{current:r}}function ie(r){0>Ge||(r.current=Re[Ge],Re[Ge]=null,Ge--)}function X(r,i){Ge++,Re[Ge]=r.current,r.current=i}var le=B(null),me=B(null),Te=B(null),je=B(null);function Ke(r,i){switch(X(Te,i),X(me,r),X(le,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?$_(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=$_(i),r=F_(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ie(le),X(le,r)}function it(){ie(le),ie(me),ie(Te)}function Me(r){r.memoizedState!==null&&X(je,r);var i=le.current,o=F_(i,r.type);i!==o&&(X(me,r),X(le,o))}function vt(r){me.current===r&&(ie(le),ie(me)),je.current===r&&(ie(je),Ru._currentValue=ve)}var Dn,fs;function nt(r){if(Dn===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Dn=i&&i[1]||"",fs=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Dn+r+fs}var Pn=!1;function Zs(r,i){if(!r||Pn)return"";Pn=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(Z){var W=Z}Reflect.construct(r,[],ce)}else{try{ce.call()}catch(Z){W=Z}r.call(ce.prototype)}}else{try{throw Error()}catch(Z){W=Z}(ce=r())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(Z){if(Z&&W&&typeof Z.stack=="string")return[Z.stack,W.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),w=p[0],S=p[1];if(w&&S){var L=w.split(`
`),Y=S.split(`
`);for(m=u=0;u<L.length&&!L[u].includes("DetermineComponentFrameRoot");)u++;for(;m<Y.length&&!Y[m].includes("DetermineComponentFrameRoot");)m++;if(u===L.length||m===Y.length)for(u=L.length-1,m=Y.length-1;1<=u&&0<=m&&L[u]!==Y[m];)m--;for(;1<=u&&0<=m;u--,m--)if(L[u]!==Y[m]){if(u!==1||m!==1)do if(u--,m--,0>m||L[u]!==Y[m]){var ne=`
`+L[u].replace(" at new "," at ");return r.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",r.displayName)),ne}while(1<=u&&0<=m);break}}}finally{Pn=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?nt(o):""}function Tr(r,i){switch(r.tag){case 26:case 27:case 5:return nt(r.type);case 16:return nt("Lazy");case 13:return r.child!==i&&i!==null?nt("Suspense Fallback"):nt("Suspense");case 19:return nt("SuspenseList");case 0:case 15:return Zs(r.type,!1);case 11:return Zs(r.type.render,!1);case 1:return Zs(r.type,!0);case 31:return nt("Activity");default:return""}}function Ii(r){try{var i="",o=null;do i+=Tr(r,o),o=r,r=r.return;while(r);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Pt=Object.prototype.hasOwnProperty,zt=n.unstable_scheduleCallback,er=n.unstable_cancelCallback,Fa=n.unstable_shouldYield,Zo=n.unstable_requestPaint,An=n.unstable_now,Ls=n.unstable_getCurrentPriorityLevel,tr=n.unstable_ImmediatePriority,Ga=n.unstable_UserBlockingPriority,nr=n.unstable_NormalPriority,el=n.unstable_LowPriority,Ka=n.unstable_IdlePriority,Qa=n.log,sr=n.unstable_setDisableYieldValue,ms=null,Kt=null;function ts(r){if(typeof Qa=="function"&&sr(r),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(ms,r)}catch{}}var It=Math.clz32?Math.clz32:Wa,Ya=Math.log,Sr=Math.LN2;function Wa(r){return r>>>=0,r===0?32:31-(Ya(r)/Sr|0)|0}var Mn=256,ei=262144,qt=4194304;function ns(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function vn(r,i,o){var u=r.pendingLanes;if(u===0)return 0;var m=0,p=r.suspendedLanes,w=r.pingedLanes;r=r.warmLanes;var S=u&134217727;return S!==0?(u=S&~p,u!==0?m=ns(u):(w&=S,w!==0?m=ns(w):o||(o=S&~r,o!==0&&(m=ns(o))))):(S=u&~p,S!==0?m=ns(S):w!==0?m=ns(w):o||(o=u&~r,o!==0&&(m=ns(o)))),m===0?0:i!==0&&i!==m&&(i&p)===0&&(p=m&-m,o=i&-i,p>=o||p===32&&(o&4194048)!==0)?i:m}function gs(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function ji(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xa(){var r=qt;return qt<<=1,(qt&62914560)===0&&(qt=4194304),r}function Qn(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function Ar(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Nr(r,i,o,u,m,p){var w=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var S=r.entanglements,L=r.expirationTimes,Y=r.hiddenUpdates;for(o=w&~o;0<o;){var ne=31-It(o),ce=1<<ne;S[ne]=0,L[ne]=-1;var W=Y[ne];if(W!==null)for(Y[ne]=null,ne=0;ne<W.length;ne++){var Z=W[ne];Z!==null&&(Z.lane&=-536870913)}o&=~ce}u!==0&&Cr(r,u,0),p!==0&&m===0&&r.tag!==0&&(r.suspendedLanes|=p&~(w&~i))}function Cr(r,i,o){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-It(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|o&261930}function Oi(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var u=31-It(o),m=1<<u;m&i|r[u]&i&&(r[u]|=i),o&=~m}}function Di(r,i){var o=i&-i;return o=(o&42)!==0?1:kr(o),(o&(r.suspendedLanes|i))!==0?0:o}function kr(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function ps(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function tl(){var r=re.p;return r!==0?r:(r=window.event,r===void 0?32:m2(r.type))}function ys(r,i){var o=re.p;try{return re.p=r,i()}finally{re.p=o}}var vs=Math.random().toString(36).slice(2),Ht="__reactFiber$"+vs,nn="__reactProps$"+vs,Vs="__reactContainer$"+vs,Pi="__reactEvents$"+vs,zc="__reactListeners$"+vs,nl="__reactHandles$"+vs,sl="__reactResources$"+vs,Us="__reactMarker$"+vs;function Mi(r){delete r[Ht],delete r[nn],delete r[Pi],delete r[zc],delete r[nl]}function bs(r){var i=r[Ht];if(i)return i;for(var o=r.parentNode;o;){if(i=o[Vs]||o[Ht]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=J_(r);r!==null;){if(o=r[Ht])return o;r=J_(r)}return i}r=o,o=r.parentNode}return null}function Ln(r){if(r=r[Ht]||r[Vs]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function Yn(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(s(33))}function Bs(r){var i=r[sl];return i||(i=r[sl]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Mt(r){r[Us]=!0}var Li=new Set,D={};function de(r,i){Se(r,i),Se(r+"Capture",i)}function Se(r,i){for(D[r]=i,r=0;r<i.length;r++)Li.add(i[r])}var He=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$e={},fn={};function jt(r){return Pt.call(fn,r)?!0:Pt.call($e,r)?!1:He.test(r)?fn[r]=!0:($e[r]=!0,!1)}function Lt(r,i,o){if(jt(i))if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+o)}}function Qt(r,i,o){if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+o)}}function sn(r,i,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(i,o,""+u)}}function bn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Vi(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function qc(r,i,o){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,p=u.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return m.call(this)},set:function(w){o=""+w,p.call(this,w)}}),Object.defineProperty(r,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(w){o=""+w},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function mt(r){if(!r._valueTracker){var i=Vi(r)?"checked":"value";r._valueTracker=qc(r,i,""+r[i])}}function Ja(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return r&&(u=Vi(r)?r.checked?"true":"false":r.value),r=u,r!==o?(i.setValue(r),!0):!1}function Rr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Za=/[\n"\\]/g;function ss(r){return r.replace(Za,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function rl(r,i,o,u,m,p,w,S){r.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.type=w:r.removeAttribute("type"),i!=null?w==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+bn(i)):r.value!==""+bn(i)&&(r.value=""+bn(i)):w!=="submit"&&w!=="reset"||r.removeAttribute("value"),i!=null?Hc(r,w,bn(i)):o!=null?Hc(r,w,bn(o)):u!=null&&r.removeAttribute("value"),m==null&&p!=null&&(r.defaultChecked=!!p),m!=null&&(r.checked=m&&typeof m!="function"&&typeof m!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?r.name=""+bn(S):r.removeAttribute("name")}function Vd(r,i,o,u,m,p,w,S){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(r.type=p),i!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||i!=null)){mt(r);return}o=o!=null?""+bn(o):"",i=i!=null?""+bn(i):o,S||i===r.value||(r.value=i),r.defaultValue=i}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=S?r.checked:!!u,r.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.name=w),mt(r)}function Hc(r,i,o){i==="number"&&Rr(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Ui(r,i,o,u){if(r=r.options,i){i={};for(var m=0;m<o.length;m++)i["$"+o[m]]=!0;for(o=0;o<r.length;o++)m=i.hasOwnProperty("$"+r[o].value),r[o].selected!==m&&(r[o].selected=m),m&&u&&(r[o].defaultSelected=!0)}else{for(o=""+bn(o),i=null,m=0;m<r.length;m++){if(r[m].value===o){r[m].selected=!0,u&&(r[m].defaultSelected=!0);return}i!==null||r[m].disabled||(i=r[m])}i!==null&&(i.selected=!0)}}function Ud(r,i,o){if(i!=null&&(i=""+bn(i),i!==r.value&&(r.value=i),o==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=o!=null?""+bn(o):""}function Bi(r,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(s(92));if(se(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=bn(i),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u),mt(r)}function rs(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var Bd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $c(r,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,o):typeof o!="number"||o===0||Bd.has(i)?i==="float"?r.cssFloat=o:r[i]=(""+o).trim():r[i]=o+"px"}function Fc(r,i,o){if(i!=null&&typeof i!="object")throw Error(s(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var m in i)u=i[m],i.hasOwnProperty(m)&&o[m]!==u&&$c(r,m,u)}else for(var p in i)i.hasOwnProperty(p)&&$c(r,p,i[p])}function il(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function al(r){return zi.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function rr(){}var Gc=null;function zs(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var qi=null,Ir=null;function eo(r){var i=Ln(r);if(i&&(r=i.stateNode)){var o=r[nn]||null;e:switch(r=i.stateNode,i.type){case"input":if(rl(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+ss(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==r&&u.form===r.form){var m=u[nn]||null;if(!m)throw Error(s(90));rl(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===r.form&&Ja(u)}break e;case"textarea":Ud(r,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Ui(r,!!o.multiple,i,!1)}}}var ol=!1;function Hi(r,i,o){if(ol)return r(i,o);ol=!0;try{var u=r(i);return u}finally{if(ol=!1,(qi!==null||Ir!==null)&&(Dh(),qi&&(i=qi,r=Ir,Ir=qi=null,eo(i),r)))for(i=0;i<r.length;i++)eo(r[i])}}function ir(r,i){var o=r.stateNode;if(o===null)return null;var u=o[nn]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(s(231,i,typeof o));return o}var qs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),to=!1;if(qs)try{var bt={};Object.defineProperty(bt,"passive",{get:function(){to=!0}}),window.addEventListener("test",bt,bt),window.removeEventListener("test",bt,bt)}catch{to=!1}var jr=null,Kc=null,no=null;function Qc(){if(no)return no;var r,i=Kc,o=i.length,u,m="value"in jr?jr.value:jr.textContent,p=m.length;for(r=0;r<o&&i[r]===m[r];r++);var w=o-r;for(u=1;u<=w&&i[o-u]===m[p-u];u++);return no=m.slice(r,1<u?1-u:void 0)}function so(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function ti(){return!0}function ar(){return!1}function Nn(r){function i(o,u,m,p,w){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var S in r)r.hasOwnProperty(S)&&(o=r[S],this[S]=o?o(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?ti:ar,this.isPropagationStopped=ar,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ti)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ti)},persist:function(){},isPersistent:ti}),i}var ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Or=Nn(ni),$i=_({},ni,{view:0,detail:0}),Yc=Nn($i),Fi,ll,Dr,cl=_({},$i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gi,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Dr&&(Dr&&r.type==="mousemove"?(Fi=r.screenX-Dr.screenX,ll=r.screenY-Dr.screenY):ll=Fi=0,Dr=r),Fi)},movementY:function(r){return"movementY"in r?r.movementY:ll}}),Wc=Nn(cl),ro=_({},cl,{dataTransfer:0}),qd=Nn(ro),Hd=_({},$i,{relatedTarget:0}),io=Nn(Hd),Xc=_({},ni,{animationName:0,elapsedTime:0,pseudoElement:0}),$d=Nn(Xc),ul=_({},ni,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Fd=Nn(ul),Gd=_({},ni,{data:0}),Pr=Nn(Gd),Kd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wd(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=Yd[r])?!!i[r]:!1}function Gi(){return Wd}var Wn=_({},$i,{key:function(r){if(r.key){var i=Kd[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=so(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Qd[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gi,charCode:function(r){return r.type==="keypress"?so(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?so(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Xd=Nn(Wn),Jd=_({},cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),si=Nn(Jd),h=_({},$i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gi}),b=Nn(h),x=_({},ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Nn(x),K=_({},cl,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),J=Nn(K),ge=_({},ni,{newState:0,oldState:0}),ze=Nn(ge),Yt=[9,13,27,32],ct=qs&&"CompositionEvent"in window,Ot=null;qs&&"documentMode"in document&&(Ot=document.documentMode);var Hs=qs&&"TextEvent"in window&&!Ot,Mr=qs&&(!ct||Ot&&8<Ot&&11>=Ot),or=" ",lr=!1;function ao(r,i){switch(r){case"keyup":return Yt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dl(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var hl=!1;function Q5(r,i){switch(r){case"compositionend":return dl(i);case"keypress":return i.which!==32?null:(lr=!0,or);case"textInput":return r=i.data,r===or&&lr?null:r;default:return null}}function Y5(r,i){if(hl)return r==="compositionend"||!ct&&ao(r,i)?(r=Qc(),no=Kc=jr=null,hl=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Mr&&i.locale!=="ko"?null:i.data;default:return null}}var W5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tb(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!W5[r.type]:i==="textarea"}function nb(r,i,o,u){qi?Ir?Ir.push(u):Ir=[u]:qi=u,i=zh(i,"onChange"),0<i.length&&(o=new Or("onChange","change",null,o,u),r.push({event:o,listeners:i}))}var Jc=null,Zc=null;function X5(r){V_(r,0)}function Zd(r){var i=Yn(r);if(Ja(i))return r}function sb(r,i){if(r==="change")return i}var rb=!1;if(qs){var lg;if(qs){var cg="oninput"in document;if(!cg){var ib=document.createElement("div");ib.setAttribute("oninput","return;"),cg=typeof ib.oninput=="function"}lg=cg}else lg=!1;rb=lg&&(!document.documentMode||9<document.documentMode)}function ab(){Jc&&(Jc.detachEvent("onpropertychange",ob),Zc=Jc=null)}function ob(r){if(r.propertyName==="value"&&Zd(Zc)){var i=[];nb(i,Zc,r,zs(r)),Hi(X5,i)}}function J5(r,i,o){r==="focusin"?(ab(),Jc=i,Zc=o,Jc.attachEvent("onpropertychange",ob)):r==="focusout"&&ab()}function Z5(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Zd(Zc)}function eA(r,i){if(r==="click")return Zd(i)}function tA(r,i){if(r==="input"||r==="change")return Zd(i)}function nA(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var ws=typeof Object.is=="function"?Object.is:nA;function eu(r,i){if(ws(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!Pt.call(i,m)||!ws(r[m],i[m]))return!1}return!0}function lb(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function cb(r,i){var o=lb(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=i&&u>=i)return{node:o,offset:i-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=lb(o)}}function ub(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?ub(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function db(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=Rr(r.document);i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=Rr(r.document)}return i}function ug(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var sA=qs&&"documentMode"in document&&11>=document.documentMode,fl=null,dg=null,tu=null,hg=!1;function hb(r,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;hg||fl==null||fl!==Rr(u)||(u=fl,"selectionStart"in u&&ug(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),tu&&eu(tu,u)||(tu=u,u=zh(dg,"onSelect"),0<u.length&&(i=new Or("onSelect","select",null,i,o),r.push({event:i,listeners:u}),i.target=fl)))}function oo(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var ml={animationend:oo("Animation","AnimationEnd"),animationiteration:oo("Animation","AnimationIteration"),animationstart:oo("Animation","AnimationStart"),transitionrun:oo("Transition","TransitionRun"),transitionstart:oo("Transition","TransitionStart"),transitioncancel:oo("Transition","TransitionCancel"),transitionend:oo("Transition","TransitionEnd")},fg={},fb={};qs&&(fb=document.createElement("div").style,"AnimationEvent"in window||(delete ml.animationend.animation,delete ml.animationiteration.animation,delete ml.animationstart.animation),"TransitionEvent"in window||delete ml.transitionend.transition);function lo(r){if(fg[r])return fg[r];if(!ml[r])return r;var i=ml[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in fb)return fg[r]=i[o];return r}var mb=lo("animationend"),gb=lo("animationiteration"),pb=lo("animationstart"),rA=lo("transitionrun"),iA=lo("transitionstart"),aA=lo("transitioncancel"),yb=lo("transitionend"),vb=new Map,mg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mg.push("scrollEnd");function cr(r,i){vb.set(r,i),de(i,[r])}var eh=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},$s=[],gl=0,gg=0;function th(){for(var r=gl,i=gg=gl=0;i<r;){var o=$s[i];$s[i++]=null;var u=$s[i];$s[i++]=null;var m=$s[i];$s[i++]=null;var p=$s[i];if($s[i++]=null,u!==null&&m!==null){var w=u.pending;w===null?m.next=m:(m.next=w.next,w.next=m),u.pending=m}p!==0&&bb(o,m,p)}}function nh(r,i,o,u){$s[gl++]=r,$s[gl++]=i,$s[gl++]=o,$s[gl++]=u,gg|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function pg(r,i,o,u){return nh(r,i,o,u),sh(r)}function co(r,i){return nh(r,null,null,i),sh(r)}function bb(r,i,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var m=!1,p=r.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(r=p.stateNode,r===null||r._visibility&1||(m=!0)),r=p,p=p.return;return r.tag===3?(p=r.stateNode,m&&i!==null&&(m=31-It(o),r=p.hiddenUpdates,u=r[m],u===null?r[m]=[i]:u.push(i),i.lane=o|536870912),p):null}function sh(r){if(50<Eu)throw Eu=0,Sp=null,Error(s(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var pl={};function oA(r,i,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _s(r,i,o,u){return new oA(r,i,o,u)}function yg(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ri(r,i){var o=r.alternate;return o===null?(o=_s(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function wb(r,i){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function rh(r,i,o,u,m,p){var w=0;if(u=r,typeof r=="function")yg(r)&&(w=1);else if(typeof r=="string")w=hN(r,o,le.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case I:return r=_s(31,o,i,m),r.elementType=I,r.lanes=p,r;case P:return uo(o.children,m,p,i);case C:w=8,m|=24;break;case M:return r=_s(12,o,i,m|2),r.elementType=M,r.lanes=p,r;case fe:return r=_s(13,o,i,m),r.elementType=fe,r.lanes=p,r;case he:return r=_s(19,o,i,m),r.elementType=he,r.lanes=p,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case F:w=10;break e;case H:w=9;break e;case te:w=11;break e;case k:w=14;break e;case R:w=16,u=null;break e}w=29,o=Error(s(130,r===null?"null":typeof r,"")),u=null}return i=_s(w,o,i,m),i.elementType=r,i.type=u,i.lanes=p,i}function uo(r,i,o,u){return r=_s(7,r,u,i),r.lanes=o,r}function vg(r,i,o){return r=_s(6,r,null,i),r.lanes=o,r}function _b(r){var i=_s(18,null,null,0);return i.stateNode=r,i}function bg(r,i,o){return i=_s(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var xb=new WeakMap;function Fs(r,i){if(typeof r=="object"&&r!==null){var o=xb.get(r);return o!==void 0?o:(i={value:r,source:i,stack:Ii(i)},xb.set(r,i),i)}return{value:r,source:i,stack:Ii(i)}}var yl=[],vl=0,ih=null,nu=0,Gs=[],Ks=0,Ki=null,Lr=1,Vr="";function ii(r,i){yl[vl++]=nu,yl[vl++]=ih,ih=r,nu=i}function Eb(r,i,o){Gs[Ks++]=Lr,Gs[Ks++]=Vr,Gs[Ks++]=Ki,Ki=r;var u=Lr;r=Vr;var m=32-It(u)-1;u&=~(1<<m),o+=1;var p=32-It(i)+m;if(30<p){var w=m-m%5;p=(u&(1<<w)-1).toString(32),u>>=w,m-=w,Lr=1<<32-It(i)+m|o<<m|u,Vr=p+r}else Lr=1<<p|o<<m|u,Vr=r}function wg(r){r.return!==null&&(ii(r,1),Eb(r,1,0))}function _g(r){for(;r===ih;)ih=yl[--vl],yl[vl]=null,nu=yl[--vl],yl[vl]=null;for(;r===Ki;)Ki=Gs[--Ks],Gs[Ks]=null,Vr=Gs[--Ks],Gs[Ks]=null,Lr=Gs[--Ks],Gs[Ks]=null}function Tb(r,i){Gs[Ks++]=Lr,Gs[Ks++]=Vr,Gs[Ks++]=Ki,Lr=i.id,Vr=i.overflow,Ki=r}var Cn=null,kt=null,st=!1,Qi=null,Qs=!1,xg=Error(s(519));function Yi(r){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw su(Fs(i,r)),xg}function Sb(r){var i=r.stateNode,o=r.type,u=r.memoizedProps;switch(i[Ht]=r,i[nn]=u,o){case"dialog":Ye("cancel",i),Ye("close",i);break;case"iframe":case"object":case"embed":Ye("load",i);break;case"video":case"audio":for(o=0;o<Su.length;o++)Ye(Su[o],i);break;case"source":Ye("error",i);break;case"img":case"image":case"link":Ye("error",i),Ye("load",i);break;case"details":Ye("toggle",i);break;case"input":Ye("invalid",i),Vd(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ye("invalid",i);break;case"textarea":Ye("invalid",i),Bi(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||q_(i.textContent,o)?(u.popover!=null&&(Ye("beforetoggle",i),Ye("toggle",i)),u.onScroll!=null&&Ye("scroll",i),u.onScrollEnd!=null&&Ye("scrollend",i),u.onClick!=null&&(i.onclick=rr),i=!0):i=!1,i||Yi(r,!0)}function Ab(r){for(Cn=r.return;Cn;)switch(Cn.tag){case 5:case 31:case 13:Qs=!1;return;case 27:case 3:Qs=!0;return;default:Cn=Cn.return}}function bl(r){if(r!==Cn)return!1;if(!st)return Ab(r),st=!0,!1;var i=r.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Bp(r.type,r.memoizedProps)),o=!o),o&&kt&&Yi(r),Ab(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));kt=X_(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));kt=X_(r)}else i===27?(i=kt,ca(r.type)?(r=Fp,Fp=null,kt=r):kt=i):kt=Cn?Ws(r.stateNode.nextSibling):null;return!0}function ho(){kt=Cn=null,st=!1}function Eg(){var r=Qi;return r!==null&&(ls===null?ls=r:ls.push.apply(ls,r),Qi=null),r}function su(r){Qi===null?Qi=[r]:Qi.push(r)}var Tg=B(null),fo=null,ai=null;function Wi(r,i,o){X(Tg,i._currentValue),i._currentValue=o}function oi(r){r._currentValue=Tg.current,ie(Tg)}function Sg(r,i,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===o)break;r=r.return}}function Ag(r,i,o,u){var m=r.child;for(m!==null&&(m.return=r);m!==null;){var p=m.dependencies;if(p!==null){var w=m.child;p=p.firstContext;e:for(;p!==null;){var S=p;p=m;for(var L=0;L<i.length;L++)if(S.context===i[L]){p.lanes|=o,S=p.alternate,S!==null&&(S.lanes|=o),Sg(p.return,o,r),u||(w=null);break e}p=S.next}}else if(m.tag===18){if(w=m.return,w===null)throw Error(s(341));w.lanes|=o,p=w.alternate,p!==null&&(p.lanes|=o),Sg(w,o,r),w=null}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===r){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}}function wl(r,i,o,u){r=null;for(var m=i,p=!1;m!==null;){if(!p){if((m.flags&524288)!==0)p=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var w=m.alternate;if(w===null)throw Error(s(387));if(w=w.memoizedProps,w!==null){var S=m.type;ws(m.pendingProps.value,w.value)||(r!==null?r.push(S):r=[S])}}else if(m===je.current){if(w=m.alternate,w===null)throw Error(s(387));w.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(r!==null?r.push(Ru):r=[Ru])}m=m.return}r!==null&&Ag(i,r,o,u),i.flags|=262144}function ah(r){for(r=r.firstContext;r!==null;){if(!ws(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function mo(r){fo=r,ai=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function kn(r){return Nb(fo,r)}function oh(r,i){return fo===null&&mo(r),Nb(r,i)}function Nb(r,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},ai===null){if(r===null)throw Error(s(308));ai=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else ai=ai.next=i;return o}var lA=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(o){return o()})}},cA=n.unstable_scheduleCallback,uA=n.unstable_NormalPriority,rn={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ng(){return{controller:new lA,data:new Map,refCount:0}}function ru(r){r.refCount--,r.refCount===0&&cA(uA,function(){r.controller.abort()})}var iu=null,Cg=0,_l=0,xl=null;function dA(r,i){if(iu===null){var o=iu=[];Cg=0,_l=Ip(),xl={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Cg++,i.then(Cb,Cb),i}function Cb(){if(--Cg===0&&iu!==null){xl!==null&&(xl.status="fulfilled");var r=iu;iu=null,_l=0,xl=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function hA(r,i){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var m=0;m<o.length;m++)(0,o[m])(i)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var kb=O.S;O.S=function(r,i){h_=An(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&dA(r,i),kb!==null&&kb(r,i)};var go=B(null);function kg(){var r=go.current;return r!==null?r:Tt.pooledCache}function lh(r,i){i===null?X(go,go.current):X(go,i.pool)}function Rb(){var r=kg();return r===null?null:{parent:rn._currentValue,pool:r}}var El=Error(s(460)),Rg=Error(s(474)),ch=Error(s(542)),uh={then:function(){}};function Ib(r){return r=r.status,r==="fulfilled"||r==="rejected"}function jb(r,i,o){switch(o=r[o],o===void 0?r.push(i):o!==i&&(i.then(rr,rr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Db(r),r;default:if(typeof i.status=="string")i.then(rr,rr);else{if(r=Tt,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var m=i;m.status="fulfilled",m.value=u}},function(u){if(i.status==="pending"){var m=i;m.status="rejected",m.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Db(r),r}throw yo=i,El}}function po(r){try{var i=r._init;return i(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(yo=o,El):o}}var yo=null;function Ob(){if(yo===null)throw Error(s(459));var r=yo;return yo=null,r}function Db(r){if(r===El||r===ch)throw Error(s(483))}var Tl=null,au=0;function dh(r){var i=au;return au+=1,Tl===null&&(Tl=[]),jb(Tl,r,i)}function ou(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function hh(r,i){throw i.$$typeof===E?Error(s(525)):(r=Object.prototype.toString.call(i),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function Pb(r){function i($,z){if(r){var Q=$.deletions;Q===null?($.deletions=[z],$.flags|=16):Q.push(z)}}function o($,z){if(!r)return null;for(;z!==null;)i($,z),z=z.sibling;return null}function u($){for(var z=new Map;$!==null;)$.key!==null?z.set($.key,$):z.set($.index,$),$=$.sibling;return z}function m($,z){return $=ri($,z),$.index=0,$.sibling=null,$}function p($,z,Q){return $.index=Q,r?(Q=$.alternate,Q!==null?(Q=Q.index,Q<z?($.flags|=67108866,z):Q):($.flags|=67108866,z)):($.flags|=1048576,z)}function w($){return r&&$.alternate===null&&($.flags|=67108866),$}function S($,z,Q,ae){return z===null||z.tag!==6?(z=vg(Q,$.mode,ae),z.return=$,z):(z=m(z,Q),z.return=$,z)}function L($,z,Q,ae){var Ce=Q.type;return Ce===P?ne($,z,Q.props.children,ae,Q.key):z!==null&&(z.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===R&&po(Ce)===z.type)?(z=m(z,Q.props),ou(z,Q),z.return=$,z):(z=rh(Q.type,Q.key,Q.props,null,$.mode,ae),ou(z,Q),z.return=$,z)}function Y($,z,Q,ae){return z===null||z.tag!==4||z.stateNode.containerInfo!==Q.containerInfo||z.stateNode.implementation!==Q.implementation?(z=bg(Q,$.mode,ae),z.return=$,z):(z=m(z,Q.children||[]),z.return=$,z)}function ne($,z,Q,ae,Ce){return z===null||z.tag!==7?(z=uo(Q,$.mode,ae,Ce),z.return=$,z):(z=m(z,Q),z.return=$,z)}function ce($,z,Q){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=vg(""+z,$.mode,Q),z.return=$,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case T:return Q=rh(z.type,z.key,z.props,null,$.mode,Q),ou(Q,z),Q.return=$,Q;case N:return z=bg(z,$.mode,Q),z.return=$,z;case R:return z=po(z),ce($,z,Q)}if(se(z)||q(z))return z=uo(z,$.mode,Q,null),z.return=$,z;if(typeof z.then=="function")return ce($,dh(z),Q);if(z.$$typeof===F)return ce($,oh($,z),Q);hh($,z)}return null}function W($,z,Q,ae){var Ce=z!==null?z.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Ce!==null?null:S($,z,""+Q,ae);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case T:return Q.key===Ce?L($,z,Q,ae):null;case N:return Q.key===Ce?Y($,z,Q,ae):null;case R:return Q=po(Q),W($,z,Q,ae)}if(se(Q)||q(Q))return Ce!==null?null:ne($,z,Q,ae,null);if(typeof Q.then=="function")return W($,z,dh(Q),ae);if(Q.$$typeof===F)return W($,z,oh($,Q),ae);hh($,Q)}return null}function Z($,z,Q,ae,Ce){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return $=$.get(Q)||null,S(z,$,""+ae,Ce);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case T:return $=$.get(ae.key===null?Q:ae.key)||null,L(z,$,ae,Ce);case N:return $=$.get(ae.key===null?Q:ae.key)||null,Y(z,$,ae,Ce);case R:return ae=po(ae),Z($,z,Q,ae,Ce)}if(se(ae)||q(ae))return $=$.get(Q)||null,ne(z,$,ae,Ce,null);if(typeof ae.then=="function")return Z($,z,Q,dh(ae),Ce);if(ae.$$typeof===F)return Z($,z,Q,oh(z,ae),Ce);hh(z,ae)}return null}function we($,z,Q,ae){for(var Ce=null,at=null,xe=z,Fe=z=0,Xe=null;xe!==null&&Fe<Q.length;Fe++){xe.index>Fe?(Xe=xe,xe=null):Xe=xe.sibling;var ot=W($,xe,Q[Fe],ae);if(ot===null){xe===null&&(xe=Xe);break}r&&xe&&ot.alternate===null&&i($,xe),z=p(ot,z,Fe),at===null?Ce=ot:at.sibling=ot,at=ot,xe=Xe}if(Fe===Q.length)return o($,xe),st&&ii($,Fe),Ce;if(xe===null){for(;Fe<Q.length;Fe++)xe=ce($,Q[Fe],ae),xe!==null&&(z=p(xe,z,Fe),at===null?Ce=xe:at.sibling=xe,at=xe);return st&&ii($,Fe),Ce}for(xe=u(xe);Fe<Q.length;Fe++)Xe=Z(xe,$,Fe,Q[Fe],ae),Xe!==null&&(r&&Xe.alternate!==null&&xe.delete(Xe.key===null?Fe:Xe.key),z=p(Xe,z,Fe),at===null?Ce=Xe:at.sibling=Xe,at=Xe);return r&&xe.forEach(function(ma){return i($,ma)}),st&&ii($,Fe),Ce}function Ie($,z,Q,ae){if(Q==null)throw Error(s(151));for(var Ce=null,at=null,xe=z,Fe=z=0,Xe=null,ot=Q.next();xe!==null&&!ot.done;Fe++,ot=Q.next()){xe.index>Fe?(Xe=xe,xe=null):Xe=xe.sibling;var ma=W($,xe,ot.value,ae);if(ma===null){xe===null&&(xe=Xe);break}r&&xe&&ma.alternate===null&&i($,xe),z=p(ma,z,Fe),at===null?Ce=ma:at.sibling=ma,at=ma,xe=Xe}if(ot.done)return o($,xe),st&&ii($,Fe),Ce;if(xe===null){for(;!ot.done;Fe++,ot=Q.next())ot=ce($,ot.value,ae),ot!==null&&(z=p(ot,z,Fe),at===null?Ce=ot:at.sibling=ot,at=ot);return st&&ii($,Fe),Ce}for(xe=u(xe);!ot.done;Fe++,ot=Q.next())ot=Z(xe,$,Fe,ot.value,ae),ot!==null&&(r&&ot.alternate!==null&&xe.delete(ot.key===null?Fe:ot.key),z=p(ot,z,Fe),at===null?Ce=ot:at.sibling=ot,at=ot);return r&&xe.forEach(function(EN){return i($,EN)}),st&&ii($,Fe),Ce}function xt($,z,Q,ae){if(typeof Q=="object"&&Q!==null&&Q.type===P&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case T:e:{for(var Ce=Q.key;z!==null;){if(z.key===Ce){if(Ce=Q.type,Ce===P){if(z.tag===7){o($,z.sibling),ae=m(z,Q.props.children),ae.return=$,$=ae;break e}}else if(z.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===R&&po(Ce)===z.type){o($,z.sibling),ae=m(z,Q.props),ou(ae,Q),ae.return=$,$=ae;break e}o($,z);break}else i($,z);z=z.sibling}Q.type===P?(ae=uo(Q.props.children,$.mode,ae,Q.key),ae.return=$,$=ae):(ae=rh(Q.type,Q.key,Q.props,null,$.mode,ae),ou(ae,Q),ae.return=$,$=ae)}return w($);case N:e:{for(Ce=Q.key;z!==null;){if(z.key===Ce)if(z.tag===4&&z.stateNode.containerInfo===Q.containerInfo&&z.stateNode.implementation===Q.implementation){o($,z.sibling),ae=m(z,Q.children||[]),ae.return=$,$=ae;break e}else{o($,z);break}else i($,z);z=z.sibling}ae=bg(Q,$.mode,ae),ae.return=$,$=ae}return w($);case R:return Q=po(Q),xt($,z,Q,ae)}if(se(Q))return we($,z,Q,ae);if(q(Q)){if(Ce=q(Q),typeof Ce!="function")throw Error(s(150));return Q=Ce.call(Q),Ie($,z,Q,ae)}if(typeof Q.then=="function")return xt($,z,dh(Q),ae);if(Q.$$typeof===F)return xt($,z,oh($,Q),ae);hh($,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,z!==null&&z.tag===6?(o($,z.sibling),ae=m(z,Q),ae.return=$,$=ae):(o($,z),ae=vg(Q,$.mode,ae),ae.return=$,$=ae),w($)):o($,z)}return function($,z,Q,ae){try{au=0;var Ce=xt($,z,Q,ae);return Tl=null,Ce}catch(xe){if(xe===El||xe===ch)throw xe;var at=_s(29,xe,null,$.mode);return at.lanes=ae,at.return=$,at}finally{}}}var vo=Pb(!0),Mb=Pb(!1),Xi=!1;function Ig(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jg(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ji(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Zi(r,i,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(ut&2)!==0){var m=u.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),u.pending=i,i=sh(r),bb(r,null,o),i}return nh(r,u,i,o),sh(r)}function lu(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,Oi(r,o)}}function Og(r,i){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var w={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?m=p=w:p=p.next=w,o=o.next}while(o!==null);p===null?m=p=i:p=p.next=i}else m=p=i;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}var Dg=!1;function cu(){if(Dg){var r=xl;if(r!==null)throw r}}function uu(r,i,o,u){Dg=!1;var m=r.updateQueue;Xi=!1;var p=m.firstBaseUpdate,w=m.lastBaseUpdate,S=m.shared.pending;if(S!==null){m.shared.pending=null;var L=S,Y=L.next;L.next=null,w===null?p=Y:w.next=Y,w=L;var ne=r.alternate;ne!==null&&(ne=ne.updateQueue,S=ne.lastBaseUpdate,S!==w&&(S===null?ne.firstBaseUpdate=Y:S.next=Y,ne.lastBaseUpdate=L))}if(p!==null){var ce=m.baseState;w=0,ne=Y=L=null,S=p;do{var W=S.lane&-536870913,Z=W!==S.lane;if(Z?(We&W)===W:(u&W)===W){W!==0&&W===_l&&(Dg=!0),ne!==null&&(ne=ne.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var we=r,Ie=S;W=i;var xt=o;switch(Ie.tag){case 1:if(we=Ie.payload,typeof we=="function"){ce=we.call(xt,ce,W);break e}ce=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Ie.payload,W=typeof we=="function"?we.call(xt,ce,W):we,W==null)break e;ce=_({},ce,W);break e;case 2:Xi=!0}}W=S.callback,W!==null&&(r.flags|=64,Z&&(r.flags|=8192),Z=m.callbacks,Z===null?m.callbacks=[W]:Z.push(W))}else Z={lane:W,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ne===null?(Y=ne=Z,L=ce):ne=ne.next=Z,w|=W;if(S=S.next,S===null){if(S=m.shared.pending,S===null)break;Z=S,S=Z.next,Z.next=null,m.lastBaseUpdate=Z,m.shared.pending=null}}while(!0);ne===null&&(L=ce),m.baseState=L,m.firstBaseUpdate=Y,m.lastBaseUpdate=ne,p===null&&(m.shared.lanes=0),ra|=w,r.lanes=w,r.memoizedState=ce}}function Lb(r,i){if(typeof r!="function")throw Error(s(191,r));r.call(i)}function Vb(r,i){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)Lb(o[r],i)}var Sl=B(null),fh=B(0);function Ub(r,i){r=pi,X(fh,r),X(Sl,i),pi=r|i.baseLanes}function Pg(){X(fh,pi),X(Sl,Sl.current)}function Mg(){pi=fh.current,ie(Sl),ie(fh)}var xs=B(null),Ys=null;function ea(r){var i=r.alternate;X(Wt,Wt.current&1),X(xs,r),Ys===null&&(i===null||Sl.current!==null||i.memoizedState!==null)&&(Ys=r)}function Lg(r){X(Wt,Wt.current),X(xs,r),Ys===null&&(Ys=r)}function Bb(r){r.tag===22?(X(Wt,Wt.current),X(xs,r),Ys===null&&(Ys=r)):ta()}function ta(){X(Wt,Wt.current),X(xs,xs.current)}function Es(r){ie(xs),Ys===r&&(Ys=null),ie(Wt)}var Wt=B(0);function mh(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Hp(o)||$p(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var li=0,qe=null,wt=null,an=null,gh=!1,Al=!1,bo=!1,ph=0,du=0,Nl=null,fA=0;function $t(){throw Error(s(321))}function Vg(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!ws(r[o],i[o]))return!1;return!0}function Ug(r,i,o,u,m,p){return li=p,qe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,O.H=r===null||r.memoizedState===null?Ew:ep,bo=!1,p=o(u,m),bo=!1,Al&&(p=qb(i,o,u,m)),zb(r),p}function zb(r){O.H=mu;var i=wt!==null&&wt.next!==null;if(li=0,an=wt=qe=null,gh=!1,du=0,Nl=null,i)throw Error(s(300));r===null||on||(r=r.dependencies,r!==null&&ah(r)&&(on=!0))}function qb(r,i,o,u){qe=r;var m=0;do{if(Al&&(Nl=null),du=0,Al=!1,25<=m)throw Error(s(301));if(m+=1,an=wt=null,r.updateQueue!=null){var p=r.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}O.H=Tw,p=i(o,u)}while(Al);return p}function mA(){var r=O.H,i=r.useState()[0];return i=typeof i.then=="function"?hu(i):i,r=r.useState()[0],(wt!==null?wt.memoizedState:null)!==r&&(qe.flags|=1024),i}function Bg(){var r=ph!==0;return ph=0,r}function zg(r,i,o){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~o}function qg(r){if(gh){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}gh=!1}li=0,an=wt=qe=null,Al=!1,du=ph=0,Nl=null}function Xn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?qe.memoizedState=an=r:an=an.next=r,an}function Xt(){if(wt===null){var r=qe.alternate;r=r!==null?r.memoizedState:null}else r=wt.next;var i=an===null?qe.memoizedState:an.next;if(i!==null)an=i,wt=r;else{if(r===null)throw qe.alternate===null?Error(s(467)):Error(s(310));wt=r,r={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},an===null?qe.memoizedState=an=r:an=an.next=r}return an}function yh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hu(r){var i=du;return du+=1,Nl===null&&(Nl=[]),r=jb(Nl,r,i),i=qe,(an===null?i.memoizedState:an.next)===null&&(i=i.alternate,O.H=i===null||i.memoizedState===null?Ew:ep),r}function vh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return hu(r);if(r.$$typeof===F)return kn(r)}throw Error(s(438,String(r)))}function Hg(r){var i=null,o=qe.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=qe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(m){return m.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=yh(),qe.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(r),u=0;u<r;u++)o[u]=U;return i.index++,o}function ci(r,i){return typeof i=="function"?i(r):i}function bh(r){var i=Xt();return $g(i,wt,r)}function $g(r,i,o){var u=r.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var m=r.baseQueue,p=u.pending;if(p!==null){if(m!==null){var w=m.next;m.next=p.next,p.next=w}i.baseQueue=m=p,u.pending=null}if(p=r.baseState,m===null)r.memoizedState=p;else{i=m.next;var S=w=null,L=null,Y=i,ne=!1;do{var ce=Y.lane&-536870913;if(ce!==Y.lane?(We&ce)===ce:(li&ce)===ce){var W=Y.revertLane;if(W===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ce===_l&&(ne=!0);else if((li&W)===W){Y=Y.next,W===_l&&(ne=!0);continue}else ce={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},L===null?(S=L=ce,w=p):L=L.next=ce,qe.lanes|=W,ra|=W;ce=Y.action,bo&&o(p,ce),p=Y.hasEagerState?Y.eagerState:o(p,ce)}else W={lane:ce,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},L===null?(S=L=W,w=p):L=L.next=W,qe.lanes|=ce,ra|=ce;Y=Y.next}while(Y!==null&&Y!==i);if(L===null?w=p:L.next=S,!ws(p,r.memoizedState)&&(on=!0,ne&&(o=xl,o!==null)))throw o;r.memoizedState=p,r.baseState=w,r.baseQueue=L,u.lastRenderedState=p}return m===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Fg(r){var i=Xt(),o=i.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=r;var u=o.dispatch,m=o.pending,p=i.memoizedState;if(m!==null){o.pending=null;var w=m=m.next;do p=r(p,w.action),w=w.next;while(w!==m);ws(p,i.memoizedState)||(on=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),o.lastRenderedState=p}return[p,u]}function Hb(r,i,o){var u=qe,m=Xt(),p=st;if(p){if(o===void 0)throw Error(s(407));o=o()}else o=i();var w=!ws((wt||m).memoizedState,o);if(w&&(m.memoizedState=o,on=!0),m=m.queue,Qg(Gb.bind(null,u,m,r),[r]),m.getSnapshot!==i||w||an!==null&&an.memoizedState.tag&1){if(u.flags|=2048,Cl(9,{destroy:void 0},Fb.bind(null,u,m,o,i),null),Tt===null)throw Error(s(349));p||(li&127)!==0||$b(u,i,o)}return o}function $b(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=qe.updateQueue,i===null?(i=yh(),qe.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function Fb(r,i,o,u){i.value=o,i.getSnapshot=u,Kb(i)&&Qb(r)}function Gb(r,i,o){return o(function(){Kb(i)&&Qb(r)})}function Kb(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!ws(r,o)}catch{return!0}}function Qb(r){var i=co(r,2);i!==null&&cs(i,r,2)}function Gg(r){var i=Xn();if(typeof r=="function"){var o=r;if(r=o(),bo){ts(!0);try{o()}finally{ts(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:r},i}function Yb(r,i,o,u){return r.baseState=o,$g(r,wt,typeof u=="function"?u:ci)}function gA(r,i,o,u,m){if(xh(r))throw Error(s(485));if(r=i.action,r!==null){var p={payload:m,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){p.listeners.push(w)}};O.T!==null?o(!0):p.isTransition=!1,u(p),o=i.pending,o===null?(p.next=i.pending=p,Wb(i,p)):(p.next=o.next,i.pending=o.next=p)}}function Wb(r,i){var o=i.action,u=i.payload,m=r.state;if(i.isTransition){var p=O.T,w={};O.T=w;try{var S=o(m,u),L=O.S;L!==null&&L(w,S),Xb(r,i,S)}catch(Y){Kg(r,i,Y)}finally{p!==null&&w.types!==null&&(p.types=w.types),O.T=p}}else try{p=o(m,u),Xb(r,i,p)}catch(Y){Kg(r,i,Y)}}function Xb(r,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Jb(r,i,u)},function(u){return Kg(r,i,u)}):Jb(r,i,o)}function Jb(r,i,o){i.status="fulfilled",i.value=o,Zb(i),r.state=o,i=r.pending,i!==null&&(o=i.next,o===i?r.pending=null:(o=o.next,i.next=o,Wb(r,o)))}function Kg(r,i,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,Zb(i),i=i.next;while(i!==u)}r.action=null}function Zb(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function ew(r,i){return i}function tw(r,i){if(st){var o=Tt.formState;if(o!==null){e:{var u=qe;if(st){if(kt){t:{for(var m=kt,p=Qs;m.nodeType!==8;){if(!p){m=null;break t}if(m=Ws(m.nextSibling),m===null){m=null;break t}}p=m.data,m=p==="F!"||p==="F"?m:null}if(m){kt=Ws(m.nextSibling),u=m.data==="F!";break e}}Yi(u)}u=!1}u&&(i=o[0])}}return o=Xn(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ew,lastRenderedState:i},o.queue=u,o=ww.bind(null,qe,u),u.dispatch=o,u=Gg(!1),p=Zg.bind(null,qe,!1,u.queue),u=Xn(),m={state:i,dispatch:null,action:r,pending:null},u.queue=m,o=gA.bind(null,qe,m,p,o),m.dispatch=o,u.memoizedState=r,[i,o,!1]}function nw(r){var i=Xt();return sw(i,wt,r)}function sw(r,i,o){if(i=$g(r,i,ew)[0],r=bh(ci)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=hu(i)}catch(w){throw w===El?ch:w}else u=i;i=Xt();var m=i.queue,p=m.dispatch;return o!==i.memoizedState&&(qe.flags|=2048,Cl(9,{destroy:void 0},pA.bind(null,m,o),null)),[u,p,r]}function pA(r,i){r.action=i}function rw(r){var i=Xt(),o=wt;if(o!==null)return sw(i,o,r);Xt(),i=i.memoizedState,o=Xt();var u=o.queue.dispatch;return o.memoizedState=r,[i,u,!1]}function Cl(r,i,o,u){return r={tag:r,create:o,deps:u,inst:i,next:null},i=qe.updateQueue,i===null&&(i=yh(),qe.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,i.lastEffect=r),r}function iw(){return Xt().memoizedState}function wh(r,i,o,u){var m=Xn();qe.flags|=r,m.memoizedState=Cl(1|i,{destroy:void 0},o,u===void 0?null:u)}function _h(r,i,o,u){var m=Xt();u=u===void 0?null:u;var p=m.memoizedState.inst;wt!==null&&u!==null&&Vg(u,wt.memoizedState.deps)?m.memoizedState=Cl(i,p,o,u):(qe.flags|=r,m.memoizedState=Cl(1|i,p,o,u))}function aw(r,i){wh(8390656,8,r,i)}function Qg(r,i){_h(2048,8,r,i)}function yA(r){qe.flags|=4;var i=qe.updateQueue;if(i===null)i=yh(),qe.updateQueue=i,i.events=[r];else{var o=i.events;o===null?i.events=[r]:o.push(r)}}function ow(r){var i=Xt().memoizedState;return yA({ref:i,nextImpl:r}),function(){if((ut&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function lw(r,i){return _h(4,2,r,i)}function cw(r,i){return _h(4,4,r,i)}function uw(r,i){if(typeof i=="function"){r=r();var o=i(r);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function dw(r,i,o){o=o!=null?o.concat([r]):null,_h(4,4,uw.bind(null,i,r),o)}function Yg(){}function hw(r,i){var o=Xt();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&Vg(i,u[1])?u[0]:(o.memoizedState=[r,i],r)}function fw(r,i){var o=Xt();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&Vg(i,u[1]))return u[0];if(u=r(),bo){ts(!0);try{r()}finally{ts(!1)}}return o.memoizedState=[u,i],u}function Wg(r,i,o){return o===void 0||(li&1073741824)!==0&&(We&261930)===0?r.memoizedState=i:(r.memoizedState=o,r=m_(),qe.lanes|=r,ra|=r,o)}function mw(r,i,o,u){return ws(o,i)?o:Sl.current!==null?(r=Wg(r,o,u),ws(r,i)||(on=!0),r):(li&42)===0||(li&1073741824)!==0&&(We&261930)===0?(on=!0,r.memoizedState=o):(r=m_(),qe.lanes|=r,ra|=r,i)}function gw(r,i,o,u,m){var p=re.p;re.p=p!==0&&8>p?p:8;var w=O.T,S={};O.T=S,Zg(r,!1,i,o);try{var L=m(),Y=O.S;if(Y!==null&&Y(S,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ne=hA(L,u);fu(r,i,ne,As(r))}else fu(r,i,u,As(r))}catch(ce){fu(r,i,{then:function(){},status:"rejected",reason:ce},As())}finally{re.p=p,w!==null&&S.types!==null&&(w.types=S.types),O.T=w}}function vA(){}function Xg(r,i,o,u){if(r.tag!==5)throw Error(s(476));var m=pw(r).queue;gw(r,m,i,ve,o===null?vA:function(){return yw(r),o(u)})}function pw(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:ve},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ci,lastRenderedState:o},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function yw(r){var i=pw(r);i.next===null&&(i=r.alternate.memoizedState),fu(r,i.next.queue,{},As())}function Jg(){return kn(Ru)}function vw(){return Xt().memoizedState}function bw(){return Xt().memoizedState}function bA(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var o=As();r=Ji(o);var u=Zi(i,r,o);u!==null&&(cs(u,i,o),lu(u,i,o)),i={cache:Ng()},r.payload=i;return}i=i.return}}function wA(r,i,o){var u=As();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},xh(r)?_w(i,o):(o=pg(r,i,o,u),o!==null&&(cs(o,r,u),xw(o,i,u)))}function ww(r,i,o){var u=As();fu(r,i,o,u)}function fu(r,i,o,u){var m={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(xh(r))_w(i,m);else{var p=r.alternate;if(r.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var w=i.lastRenderedState,S=p(w,o);if(m.hasEagerState=!0,m.eagerState=S,ws(S,w))return nh(r,i,m,0),Tt===null&&th(),!1}catch{}finally{}if(o=pg(r,i,m,u),o!==null)return cs(o,r,u),xw(o,i,u),!0}return!1}function Zg(r,i,o,u){if(u={lane:2,revertLane:Ip(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},xh(r)){if(i)throw Error(s(479))}else i=pg(r,o,u,2),i!==null&&cs(i,r,2)}function xh(r){var i=r.alternate;return r===qe||i!==null&&i===qe}function _w(r,i){Al=gh=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function xw(r,i,o){if((o&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,Oi(r,o)}}var mu={readContext:kn,use:vh,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useLayoutEffect:$t,useInsertionEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useSyncExternalStore:$t,useId:$t,useHostTransitionStatus:$t,useFormState:$t,useActionState:$t,useOptimistic:$t,useMemoCache:$t,useCacheRefresh:$t};mu.useEffectEvent=$t;var Ew={readContext:kn,use:vh,useCallback:function(r,i){return Xn().memoizedState=[r,i===void 0?null:i],r},useContext:kn,useEffect:aw,useImperativeHandle:function(r,i,o){o=o!=null?o.concat([r]):null,wh(4194308,4,uw.bind(null,i,r),o)},useLayoutEffect:function(r,i){return wh(4194308,4,r,i)},useInsertionEffect:function(r,i){wh(4,2,r,i)},useMemo:function(r,i){var o=Xn();i=i===void 0?null:i;var u=r();if(bo){ts(!0);try{r()}finally{ts(!1)}}return o.memoizedState=[u,i],u},useReducer:function(r,i,o){var u=Xn();if(o!==void 0){var m=o(i);if(bo){ts(!0);try{o(i)}finally{ts(!1)}}}else m=i;return u.memoizedState=u.baseState=m,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:m},u.queue=r,r=r.dispatch=wA.bind(null,qe,r),[u.memoizedState,r]},useRef:function(r){var i=Xn();return r={current:r},i.memoizedState=r},useState:function(r){r=Gg(r);var i=r.queue,o=ww.bind(null,qe,i);return i.dispatch=o,[r.memoizedState,o]},useDebugValue:Yg,useDeferredValue:function(r,i){var o=Xn();return Wg(o,r,i)},useTransition:function(){var r=Gg(!1);return r=gw.bind(null,qe,r.queue,!0,!1),Xn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,o){var u=qe,m=Xn();if(st){if(o===void 0)throw Error(s(407));o=o()}else{if(o=i(),Tt===null)throw Error(s(349));(We&127)!==0||$b(u,i,o)}m.memoizedState=o;var p={value:o,getSnapshot:i};return m.queue=p,aw(Gb.bind(null,u,p,r),[r]),u.flags|=2048,Cl(9,{destroy:void 0},Fb.bind(null,u,p,o,i),null),o},useId:function(){var r=Xn(),i=Tt.identifierPrefix;if(st){var o=Vr,u=Lr;o=(u&~(1<<32-It(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=ph++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=fA++,i="_"+i+"r_"+o.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:Jg,useFormState:tw,useActionState:tw,useOptimistic:function(r){var i=Xn();i.memoizedState=i.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Zg.bind(null,qe,!0,o),o.dispatch=i,[r,i]},useMemoCache:Hg,useCacheRefresh:function(){return Xn().memoizedState=bA.bind(null,qe)},useEffectEvent:function(r){var i=Xn(),o={impl:r};return i.memoizedState=o,function(){if((ut&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},ep={readContext:kn,use:vh,useCallback:hw,useContext:kn,useEffect:Qg,useImperativeHandle:dw,useInsertionEffect:lw,useLayoutEffect:cw,useMemo:fw,useReducer:bh,useRef:iw,useState:function(){return bh(ci)},useDebugValue:Yg,useDeferredValue:function(r,i){var o=Xt();return mw(o,wt.memoizedState,r,i)},useTransition:function(){var r=bh(ci)[0],i=Xt().memoizedState;return[typeof r=="boolean"?r:hu(r),i]},useSyncExternalStore:Hb,useId:vw,useHostTransitionStatus:Jg,useFormState:nw,useActionState:nw,useOptimistic:function(r,i){var o=Xt();return Yb(o,wt,r,i)},useMemoCache:Hg,useCacheRefresh:bw};ep.useEffectEvent=ow;var Tw={readContext:kn,use:vh,useCallback:hw,useContext:kn,useEffect:Qg,useImperativeHandle:dw,useInsertionEffect:lw,useLayoutEffect:cw,useMemo:fw,useReducer:Fg,useRef:iw,useState:function(){return Fg(ci)},useDebugValue:Yg,useDeferredValue:function(r,i){var o=Xt();return wt===null?Wg(o,r,i):mw(o,wt.memoizedState,r,i)},useTransition:function(){var r=Fg(ci)[0],i=Xt().memoizedState;return[typeof r=="boolean"?r:hu(r),i]},useSyncExternalStore:Hb,useId:vw,useHostTransitionStatus:Jg,useFormState:rw,useActionState:rw,useOptimistic:function(r,i){var o=Xt();return wt!==null?Yb(o,wt,r,i):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Hg,useCacheRefresh:bw};Tw.useEffectEvent=ow;function tp(r,i,o,u){i=r.memoizedState,o=o(u,i),o=o==null?i:_({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var np={enqueueSetState:function(r,i,o){r=r._reactInternals;var u=As(),m=Ji(u);m.payload=i,o!=null&&(m.callback=o),i=Zi(r,m,u),i!==null&&(cs(i,r,u),lu(i,r,u))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var u=As(),m=Ji(u);m.tag=1,m.payload=i,o!=null&&(m.callback=o),i=Zi(r,m,u),i!==null&&(cs(i,r,u),lu(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=As(),u=Ji(o);u.tag=2,i!=null&&(u.callback=i),i=Zi(r,u,o),i!==null&&(cs(i,r,o),lu(i,r,o))}};function Sw(r,i,o,u,m,p,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,p,w):i.prototype&&i.prototype.isPureReactComponent?!eu(o,u)||!eu(m,p):!0}function Aw(r,i,o,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==r&&np.enqueueReplaceState(i,i.state,null)}function wo(r,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(r=r.defaultProps){o===i&&(o=_({},o));for(var m in r)o[m]===void 0&&(o[m]=r[m])}return o}function Nw(r){eh(r)}function Cw(r){console.error(r)}function kw(r){eh(r)}function Eh(r,i){try{var o=r.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function Rw(r,i,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function sp(r,i,o){return o=Ji(o),o.tag=3,o.payload={element:null},o.callback=function(){Eh(r,i)},o}function Iw(r){return r=Ji(r),r.tag=3,r}function jw(r,i,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var p=u.value;r.payload=function(){return m(p)},r.callback=function(){Rw(i,o,u)}}var w=o.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(r.callback=function(){Rw(i,o,u),typeof m!="function"&&(ia===null?ia=new Set([this]):ia.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function _A(r,i,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&wl(i,o,m,!0),o=xs.current,o!==null){switch(o.tag){case 31:case 13:return Ys===null?Ph():o.alternate===null&&Ft===0&&(Ft=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===uh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),Cp(r,u,m)),!1;case 22:return o.flags|=65536,u===uh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),Cp(r,u,m)),!1}throw Error(s(435,o.tag))}return Cp(r,u,m),Ph(),!1}if(st)return i=xs.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=m,u!==xg&&(r=Error(s(422),{cause:u}),su(Fs(r,o)))):(u!==xg&&(i=Error(s(423),{cause:u}),su(Fs(i,o))),r=r.current.alternate,r.flags|=65536,m&=-m,r.lanes|=m,u=Fs(u,o),m=sp(r.stateNode,u,m),Og(r,m),Ft!==4&&(Ft=2)),!1;var p=Error(s(520),{cause:u});if(p=Fs(p,o),xu===null?xu=[p]:xu.push(p),Ft!==4&&(Ft=2),i===null)return!0;u=Fs(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,r=m&-m,o.lanes|=r,r=sp(o.stateNode,u,r),Og(o,r),!1;case 1:if(i=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ia===null||!ia.has(p))))return o.flags|=65536,m&=-m,o.lanes|=m,m=Iw(m),jw(m,r,o,u),Og(o,m),!1}o=o.return}while(o!==null);return!1}var rp=Error(s(461)),on=!1;function Rn(r,i,o,u){i.child=r===null?Mb(i,null,o,u):vo(i,r.child,o,u)}function Ow(r,i,o,u,m){o=o.render;var p=i.ref;if("ref"in u){var w={};for(var S in u)S!=="ref"&&(w[S]=u[S])}else w=u;return mo(i),u=Ug(r,i,o,w,p,m),S=Bg(),r!==null&&!on?(zg(r,i,m),ui(r,i,m)):(st&&S&&wg(i),i.flags|=1,Rn(r,i,u,m),i.child)}function Dw(r,i,o,u,m){if(r===null){var p=o.type;return typeof p=="function"&&!yg(p)&&p.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=p,Pw(r,i,p,u,m)):(r=rh(o.type,null,u,i,i.mode,m),r.ref=i.ref,r.return=i,i.child=r)}if(p=r.child,!hp(r,m)){var w=p.memoizedProps;if(o=o.compare,o=o!==null?o:eu,o(w,u)&&r.ref===i.ref)return ui(r,i,m)}return i.flags|=1,r=ri(p,u),r.ref=i.ref,r.return=i,i.child=r}function Pw(r,i,o,u,m){if(r!==null){var p=r.memoizedProps;if(eu(p,u)&&r.ref===i.ref)if(on=!1,i.pendingProps=u=p,hp(r,m))(r.flags&131072)!==0&&(on=!0);else return i.lanes=r.lanes,ui(r,i,m)}return ip(r,i,o,u,m)}function Mw(r,i,o,u){var m=u.children,p=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,r!==null){for(u=i.child=r.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~p}else u=0,i.child=null;return Lw(r,i,p,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&lh(i,p!==null?p.cachePool:null),p!==null?Ub(i,p):Pg(),Bb(i);else return u=i.lanes=536870912,Lw(r,i,p!==null?p.baseLanes|o:o,o,u)}else p!==null?(lh(i,p.cachePool),Ub(i,p),ta(),i.memoizedState=null):(r!==null&&lh(i,null),Pg(),ta());return Rn(r,i,m,o),i.child}function gu(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Lw(r,i,o,u,m){var p=kg();return p=p===null?null:{parent:rn._currentValue,pool:p},i.memoizedState={baseLanes:o,cachePool:p},r!==null&&lh(i,null),Pg(),Bb(i),r!==null&&wl(r,i,u,!0),i.childLanes=m,null}function Th(r,i){return i=Ah({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function Vw(r,i,o){return vo(i,r.child,null,o),r=Th(i,i.pendingProps),r.flags|=2,Es(i),i.memoizedState=null,r}function xA(r,i,o){var u=i.pendingProps,m=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(st){if(u.mode==="hidden")return r=Th(i,u),i.lanes=536870912,gu(null,r);if(Lg(i),(r=kt)?(r=W_(r,Qs),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Ki!==null?{id:Lr,overflow:Vr}:null,retryLane:536870912,hydrationErrors:null},o=_b(r),o.return=i,i.child=o,Cn=i,kt=null)):r=null,r===null)throw Yi(i);return i.lanes=536870912,null}return Th(i,u)}var p=r.memoizedState;if(p!==null){var w=p.dehydrated;if(Lg(i),m)if(i.flags&256)i.flags&=-257,i=Vw(r,i,o);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(s(558));else if(on||wl(r,i,o,!1),m=(o&r.childLanes)!==0,on||m){if(u=Tt,u!==null&&(w=Di(u,o),w!==0&&w!==p.retryLane))throw p.retryLane=w,co(r,w),cs(u,r,w),rp;Ph(),i=Vw(r,i,o)}else r=p.treeContext,kt=Ws(w.nextSibling),Cn=i,st=!0,Qi=null,Qs=!1,r!==null&&Tb(i,r),i=Th(i,u),i.flags|=4096;return i}return r=ri(r.child,{mode:u.mode,children:u.children}),r.ref=i.ref,i.child=r,r.return=i,r}function Sh(r,i){var o=i.ref;if(o===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(r===null||r.ref!==o)&&(i.flags|=4194816)}}function ip(r,i,o,u,m){return mo(i),o=Ug(r,i,o,u,void 0,m),u=Bg(),r!==null&&!on?(zg(r,i,m),ui(r,i,m)):(st&&u&&wg(i),i.flags|=1,Rn(r,i,o,m),i.child)}function Uw(r,i,o,u,m,p){return mo(i),i.updateQueue=null,o=qb(i,u,o,m),zb(r),u=Bg(),r!==null&&!on?(zg(r,i,p),ui(r,i,p)):(st&&u&&wg(i),i.flags|=1,Rn(r,i,o,p),i.child)}function Bw(r,i,o,u,m){if(mo(i),i.stateNode===null){var p=pl,w=o.contextType;typeof w=="object"&&w!==null&&(p=kn(w)),p=new o(u,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=np,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=u,p.state=i.memoizedState,p.refs={},Ig(i),w=o.contextType,p.context=typeof w=="object"&&w!==null?kn(w):pl,p.state=i.memoizedState,w=o.getDerivedStateFromProps,typeof w=="function"&&(tp(i,o,w,u),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(w=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),w!==p.state&&np.enqueueReplaceState(p,p.state,null),uu(i,u,p,m),cu(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){p=i.stateNode;var S=i.memoizedProps,L=wo(o,S);p.props=L;var Y=p.context,ne=o.contextType;w=pl,typeof ne=="object"&&ne!==null&&(w=kn(ne));var ce=o.getDerivedStateFromProps;ne=typeof ce=="function"||typeof p.getSnapshotBeforeUpdate=="function",S=i.pendingProps!==S,ne||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(S||Y!==w)&&Aw(i,p,u,w),Xi=!1;var W=i.memoizedState;p.state=W,uu(i,u,p,m),cu(),Y=i.memoizedState,S||W!==Y||Xi?(typeof ce=="function"&&(tp(i,o,ce,u),Y=i.memoizedState),(L=Xi||Sw(i,o,L,u,W,Y,w))?(ne||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=Y),p.props=u,p.state=Y,p.context=w,u=L):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{p=i.stateNode,jg(r,i),w=i.memoizedProps,ne=wo(o,w),p.props=ne,ce=i.pendingProps,W=p.context,Y=o.contextType,L=pl,typeof Y=="object"&&Y!==null&&(L=kn(Y)),S=o.getDerivedStateFromProps,(Y=typeof S=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(w!==ce||W!==L)&&Aw(i,p,u,L),Xi=!1,W=i.memoizedState,p.state=W,uu(i,u,p,m),cu();var Z=i.memoizedState;w!==ce||W!==Z||Xi||r!==null&&r.dependencies!==null&&ah(r.dependencies)?(typeof S=="function"&&(tp(i,o,S,u),Z=i.memoizedState),(ne=Xi||Sw(i,o,ne,u,W,Z,L)||r!==null&&r.dependencies!==null&&ah(r.dependencies))?(Y||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,Z,L),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,Z,L)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||w===r.memoizedProps&&W===r.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&W===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=Z),p.props=u,p.state=Z,p.context=L,u=ne):(typeof p.componentDidUpdate!="function"||w===r.memoizedProps&&W===r.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&W===r.memoizedState||(i.flags|=1024),u=!1)}return p=u,Sh(r,i),u=(i.flags&128)!==0,p||u?(p=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,r!==null&&u?(i.child=vo(i,r.child,null,m),i.child=vo(i,null,o,m)):Rn(r,i,o,m),i.memoizedState=p.state,r=i.child):r=ui(r,i,m),r}function zw(r,i,o,u){return ho(),i.flags|=256,Rn(r,i,o,u),i.child}var ap={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function op(r){return{baseLanes:r,cachePool:Rb()}}function lp(r,i,o){return r=r!==null?r.childLanes&~o:0,i&&(r|=Ss),r}function qw(r,i,o){var u=i.pendingProps,m=!1,p=(i.flags&128)!==0,w;if((w=p)||(w=r!==null&&r.memoizedState===null?!1:(Wt.current&2)!==0),w&&(m=!0,i.flags&=-129),w=(i.flags&32)!==0,i.flags&=-33,r===null){if(st){if(m?ea(i):ta(),(r=kt)?(r=W_(r,Qs),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Ki!==null?{id:Lr,overflow:Vr}:null,retryLane:536870912,hydrationErrors:null},o=_b(r),o.return=i,i.child=o,Cn=i,kt=null)):r=null,r===null)throw Yi(i);return $p(r)?i.lanes=32:i.lanes=536870912,null}var S=u.children;return u=u.fallback,m?(ta(),m=i.mode,S=Ah({mode:"hidden",children:S},m),u=uo(u,m,o,null),S.return=i,u.return=i,S.sibling=u,i.child=S,u=i.child,u.memoizedState=op(o),u.childLanes=lp(r,w,o),i.memoizedState=ap,gu(null,u)):(ea(i),cp(i,S))}var L=r.memoizedState;if(L!==null&&(S=L.dehydrated,S!==null)){if(p)i.flags&256?(ea(i),i.flags&=-257,i=up(r,i,o)):i.memoizedState!==null?(ta(),i.child=r.child,i.flags|=128,i=null):(ta(),S=u.fallback,m=i.mode,u=Ah({mode:"visible",children:u.children},m),S=uo(S,m,o,null),S.flags|=2,u.return=i,S.return=i,u.sibling=S,i.child=u,vo(i,r.child,null,o),u=i.child,u.memoizedState=op(o),u.childLanes=lp(r,w,o),i.memoizedState=ap,i=gu(null,u));else if(ea(i),$p(S)){if(w=S.nextSibling&&S.nextSibling.dataset,w)var Y=w.dgst;w=Y,u=Error(s(419)),u.stack="",u.digest=w,su({value:u,source:null,stack:null}),i=up(r,i,o)}else if(on||wl(r,i,o,!1),w=(o&r.childLanes)!==0,on||w){if(w=Tt,w!==null&&(u=Di(w,o),u!==0&&u!==L.retryLane))throw L.retryLane=u,co(r,u),cs(w,r,u),rp;Hp(S)||Ph(),i=up(r,i,o)}else Hp(S)?(i.flags|=192,i.child=r.child,i=null):(r=L.treeContext,kt=Ws(S.nextSibling),Cn=i,st=!0,Qi=null,Qs=!1,r!==null&&Tb(i,r),i=cp(i,u.children),i.flags|=4096);return i}return m?(ta(),S=u.fallback,m=i.mode,L=r.child,Y=L.sibling,u=ri(L,{mode:"hidden",children:u.children}),u.subtreeFlags=L.subtreeFlags&65011712,Y!==null?S=ri(Y,S):(S=uo(S,m,o,null),S.flags|=2),S.return=i,u.return=i,u.sibling=S,i.child=u,gu(null,u),u=i.child,S=r.child.memoizedState,S===null?S=op(o):(m=S.cachePool,m!==null?(L=rn._currentValue,m=m.parent!==L?{parent:L,pool:L}:m):m=Rb(),S={baseLanes:S.baseLanes|o,cachePool:m}),u.memoizedState=S,u.childLanes=lp(r,w,o),i.memoizedState=ap,gu(r.child,u)):(ea(i),o=r.child,r=o.sibling,o=ri(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,r!==null&&(w=i.deletions,w===null?(i.deletions=[r],i.flags|=16):w.push(r)),i.child=o,i.memoizedState=null,o)}function cp(r,i){return i=Ah({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function Ah(r,i){return r=_s(22,r,null,i),r.lanes=0,r}function up(r,i,o){return vo(i,r.child,null,o),r=cp(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function Hw(r,i,o){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),Sg(r.return,i,o)}function dp(r,i,o,u,m,p){var w=r.memoizedState;w===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m,treeForkCount:p}:(w.isBackwards=i,w.rendering=null,w.renderingStartTime=0,w.last=u,w.tail=o,w.tailMode=m,w.treeForkCount=p)}function $w(r,i,o){var u=i.pendingProps,m=u.revealOrder,p=u.tail;u=u.children;var w=Wt.current,S=(w&2)!==0;if(S?(w=w&1|2,i.flags|=128):w&=1,X(Wt,w),Rn(r,i,u,o),u=st?nu:0,!S&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Hw(r,o,i);else if(r.tag===19)Hw(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(m){case"forwards":for(o=i.child,m=null;o!==null;)r=o.alternate,r!==null&&mh(r)===null&&(m=o),o=o.sibling;o=m,o===null?(m=i.child,i.child=null):(m=o.sibling,o.sibling=null),dp(i,!1,m,o,p,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=i.child,i.child=null;m!==null;){if(r=m.alternate,r!==null&&mh(r)===null){i.child=m;break}r=m.sibling,m.sibling=o,o=m,m=r}dp(i,!0,o,null,p,u);break;case"together":dp(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function ui(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),ra|=i.lanes,(o&i.childLanes)===0)if(r!==null){if(wl(r,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(s(153));if(i.child!==null){for(r=i.child,o=ri(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=ri(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function hp(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&ah(r)))}function EA(r,i,o){switch(i.tag){case 3:Ke(i,i.stateNode.containerInfo),Wi(i,rn,r.memoizedState.cache),ho();break;case 27:case 5:Me(i);break;case 4:Ke(i,i.stateNode.containerInfo);break;case 10:Wi(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Lg(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(ea(i),i.flags|=128,null):(o&i.child.childLanes)!==0?qw(r,i,o):(ea(i),r=ui(r,i,o),r!==null?r.sibling:null);ea(i);break;case 19:var m=(r.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(wl(r,i,o,!1),u=(o&i.childLanes)!==0),m){if(u)return $w(r,i,o);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),X(Wt,Wt.current),u)break;return null;case 22:return i.lanes=0,Mw(r,i,o,i.pendingProps);case 24:Wi(i,rn,r.memoizedState.cache)}return ui(r,i,o)}function Fw(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps)on=!0;else{if(!hp(r,o)&&(i.flags&128)===0)return on=!1,EA(r,i,o);on=(r.flags&131072)!==0}else on=!1,st&&(i.flags&1048576)!==0&&Eb(i,nu,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(r=po(i.elementType),i.type=r,typeof r=="function")yg(r)?(u=wo(r,u),i.tag=1,i=Bw(null,i,r,u,o)):(i.tag=0,i=ip(null,i,r,u,o));else{if(r!=null){var m=r.$$typeof;if(m===te){i.tag=11,i=Ow(null,i,r,u,o);break e}else if(m===k){i.tag=14,i=Dw(null,i,r,u,o);break e}}throw i=Be(r)||r,Error(s(306,i,""))}}return i;case 0:return ip(r,i,i.type,i.pendingProps,o);case 1:return u=i.type,m=wo(u,i.pendingProps),Bw(r,i,u,m,o);case 3:e:{if(Ke(i,i.stateNode.containerInfo),r===null)throw Error(s(387));u=i.pendingProps;var p=i.memoizedState;m=p.element,jg(r,i),uu(i,u,null,o);var w=i.memoizedState;if(u=w.cache,Wi(i,rn,u),u!==p.cache&&Ag(i,[rn],o,!0),cu(),u=w.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:w.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=zw(r,i,u,o);break e}else if(u!==m){m=Fs(Error(s(424)),i),su(m),i=zw(r,i,u,o);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(kt=Ws(r.firstChild),Cn=i,st=!0,Qi=null,Qs=!0,o=Mb(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(ho(),u===m){i=ui(r,i,o);break e}Rn(r,i,u,o)}i=i.child}return i;case 26:return Sh(r,i),r===null?(o=n2(i.type,null,i.pendingProps,null))?i.memoizedState=o:st||(o=i.type,r=i.pendingProps,u=qh(Te.current).createElement(o),u[Ht]=i,u[nn]=r,In(u,o,r),Mt(u),i.stateNode=u):i.memoizedState=n2(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return Me(i),r===null&&st&&(u=i.stateNode=Z_(i.type,i.pendingProps,Te.current),Cn=i,Qs=!0,m=kt,ca(i.type)?(Fp=m,kt=Ws(u.firstChild)):kt=m),Rn(r,i,i.pendingProps.children,o),Sh(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&st&&((m=u=kt)&&(u=ZA(u,i.type,i.pendingProps,Qs),u!==null?(i.stateNode=u,Cn=i,kt=Ws(u.firstChild),Qs=!1,m=!0):m=!1),m||Yi(i)),Me(i),m=i.type,p=i.pendingProps,w=r!==null?r.memoizedProps:null,u=p.children,Bp(m,p)?u=null:w!==null&&Bp(m,w)&&(i.flags|=32),i.memoizedState!==null&&(m=Ug(r,i,mA,null,null,o),Ru._currentValue=m),Sh(r,i),Rn(r,i,u,o),i.child;case 6:return r===null&&st&&((r=o=kt)&&(o=eN(o,i.pendingProps,Qs),o!==null?(i.stateNode=o,Cn=i,kt=null,r=!0):r=!1),r||Yi(i)),null;case 13:return qw(r,i,o);case 4:return Ke(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=vo(i,null,u,o):Rn(r,i,u,o),i.child;case 11:return Ow(r,i,i.type,i.pendingProps,o);case 7:return Rn(r,i,i.pendingProps,o),i.child;case 8:return Rn(r,i,i.pendingProps.children,o),i.child;case 12:return Rn(r,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Wi(i,i.type,u.value),Rn(r,i,u.children,o),i.child;case 9:return m=i.type._context,u=i.pendingProps.children,mo(i),m=kn(m),u=u(m),i.flags|=1,Rn(r,i,u,o),i.child;case 14:return Dw(r,i,i.type,i.pendingProps,o);case 15:return Pw(r,i,i.type,i.pendingProps,o);case 19:return $w(r,i,o);case 31:return xA(r,i,o);case 22:return Mw(r,i,o,i.pendingProps);case 24:return mo(i),u=kn(rn),r===null?(m=kg(),m===null&&(m=Tt,p=Ng(),m.pooledCache=p,p.refCount++,p!==null&&(m.pooledCacheLanes|=o),m=p),i.memoizedState={parent:u,cache:m},Ig(i),Wi(i,rn,m)):((r.lanes&o)!==0&&(jg(r,i),uu(i,null,null,o),cu()),m=r.memoizedState,p=i.memoizedState,m.parent!==u?(m={parent:u,cache:u},i.memoizedState=m,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=m),Wi(i,rn,u)):(u=p.cache,Wi(i,rn,u),u!==m.cache&&Ag(i,[rn],o,!0))),Rn(r,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function di(r){r.flags|=4}function fp(r,i,o,u,m){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(m&335544128)===m)if(r.stateNode.complete)r.flags|=8192;else if(v_())r.flags|=8192;else throw yo=uh,Rg}else r.flags&=-16777217}function Gw(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!o2(i))if(v_())r.flags|=8192;else throw yo=uh,Rg}function Nh(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?Xa():536870912,r.lanes|=i,jl|=i)}function pu(r,i){if(!st)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Rt(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(i)for(var m=r.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=r,m=m.sibling;else for(m=r.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=r,m=m.sibling;return r.subtreeFlags|=u,r.childLanes=o,i}function TA(r,i,o){var u=i.pendingProps;switch(_g(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(i),null;case 1:return Rt(i),null;case 3:return o=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),oi(rn),it(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(bl(i)?di(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Eg())),Rt(i),null;case 26:var m=i.type,p=i.memoizedState;return r===null?(di(i),p!==null?(Rt(i),Gw(i,p)):(Rt(i),fp(i,m,null,u,o))):p?p!==r.memoizedState?(di(i),Rt(i),Gw(i,p)):(Rt(i),i.flags&=-16777217):(r=r.memoizedProps,r!==u&&di(i),Rt(i),fp(i,m,r,u,o)),null;case 27:if(vt(i),o=Te.current,m=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&di(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return Rt(i),null}r=le.current,bl(i)?Sb(i):(r=Z_(m,u,o),i.stateNode=r,di(i))}return Rt(i),null;case 5:if(vt(i),m=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&di(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return Rt(i),null}if(p=le.current,bl(i))Sb(i);else{var w=qh(Te.current);switch(p){case 1:p=w.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:p=w.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":p=w.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":p=w.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":p=w.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof u.is=="string"?w.createElement("select",{is:u.is}):w.createElement("select"),u.multiple?p.multiple=!0:u.size&&(p.size=u.size);break;default:p=typeof u.is=="string"?w.createElement(m,{is:u.is}):w.createElement(m)}}p[Ht]=i,p[nn]=u;e:for(w=i.child;w!==null;){if(w.tag===5||w.tag===6)p.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===i)break e;for(;w.sibling===null;){if(w.return===null||w.return===i)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}i.stateNode=p;e:switch(In(p,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&di(i)}}return Rt(i),fp(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,o),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&di(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(r=Te.current,bl(i)){if(r=i.stateNode,o=i.memoizedProps,u=null,m=Cn,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}r[Ht]=i,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||q_(r.nodeValue,o)),r||Yi(i,!0)}else r=qh(r).createTextNode(u),r[Ht]=i,i.stateNode=r}return Rt(i),null;case 31:if(o=i.memoizedState,r===null||r.memoizedState!==null){if(u=bl(i),o!==null){if(r===null){if(!u)throw Error(s(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));r[Ht]=i}else ho(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Rt(i),r=!1}else o=Eg(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return i.flags&256?(Es(i),i):(Es(i),null);if((i.flags&128)!==0)throw Error(s(558))}return Rt(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(m=bl(i),u!==null&&u.dehydrated!==null){if(r===null){if(!m)throw Error(s(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[Ht]=i}else ho(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Rt(i),m=!1}else m=Eg(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=m),m=!0;if(!m)return i.flags&256?(Es(i),i):(Es(i),null)}return Es(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,r=r!==null&&r.memoizedState!==null,o&&(u=i.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==m&&(u.flags|=2048)),o!==r&&o&&(i.child.flags|=8192),Nh(i,i.updateQueue),Rt(i),null);case 4:return it(),r===null&&Pp(i.stateNode.containerInfo),Rt(i),null;case 10:return oi(i.type),Rt(i),null;case 19:if(ie(Wt),u=i.memoizedState,u===null)return Rt(i),null;if(m=(i.flags&128)!==0,p=u.rendering,p===null)if(m)pu(u,!1);else{if(Ft!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(p=mh(r),p!==null){for(i.flags|=128,pu(u,!1),r=p.updateQueue,i.updateQueue=r,Nh(i,r),i.subtreeFlags=0,r=o,o=i.child;o!==null;)wb(o,r),o=o.sibling;return X(Wt,Wt.current&1|2),st&&ii(i,u.treeForkCount),i.child}r=r.sibling}u.tail!==null&&An()>jh&&(i.flags|=128,m=!0,pu(u,!1),i.lanes=4194304)}else{if(!m)if(r=mh(p),r!==null){if(i.flags|=128,m=!0,r=r.updateQueue,i.updateQueue=r,Nh(i,r),pu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!st)return Rt(i),null}else 2*An()-u.renderingStartTime>jh&&o!==536870912&&(i.flags|=128,m=!0,pu(u,!1),i.lanes=4194304);u.isBackwards?(p.sibling=i.child,i.child=p):(r=u.last,r!==null?r.sibling=p:i.child=p,u.last=p)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=An(),r.sibling=null,o=Wt.current,X(Wt,m?o&1|2:o&1),st&&ii(i,u.treeForkCount),r):(Rt(i),null);case 22:case 23:return Es(i),Mg(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(Rt(i),i.subtreeFlags&6&&(i.flags|=8192)):Rt(i),o=i.updateQueue,o!==null&&Nh(i,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),r!==null&&ie(go),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),oi(rn),Rt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function SA(r,i){switch(_g(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return oi(rn),it(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return vt(i),null;case 31:if(i.memoizedState!==null){if(Es(i),i.alternate===null)throw Error(s(340));ho()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(Es(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(s(340));ho()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return ie(Wt),null;case 4:return it(),null;case 10:return oi(i.type),null;case 22:case 23:return Es(i),Mg(),r!==null&&ie(go),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return oi(rn),null;case 25:return null;default:return null}}function Kw(r,i){switch(_g(i),i.tag){case 3:oi(rn),it();break;case 26:case 27:case 5:vt(i);break;case 4:it();break;case 31:i.memoizedState!==null&&Es(i);break;case 13:Es(i);break;case 19:ie(Wt);break;case 10:oi(i.type);break;case 22:case 23:Es(i),Mg(),r!==null&&ie(go);break;case 24:oi(rn)}}function yu(r,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&r)===r){u=void 0;var p=o.create,w=o.inst;u=p(),w.destroy=u}o=o.next}while(o!==m)}}catch(S){pt(i,i.return,S)}}function na(r,i,o){try{var u=i.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var p=m.next;u=p;do{if((u.tag&r)===r){var w=u.inst,S=w.destroy;if(S!==void 0){w.destroy=void 0,m=i;var L=o,Y=S;try{Y()}catch(ne){pt(m,L,ne)}}}u=u.next}while(u!==p)}}catch(ne){pt(i,i.return,ne)}}function Qw(r){var i=r.updateQueue;if(i!==null){var o=r.stateNode;try{Vb(i,o)}catch(u){pt(r,r.return,u)}}}function Yw(r,i,o){o.props=wo(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){pt(r,i,u)}}function vu(r,i){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(m){pt(r,i,m)}}function Ur(r,i){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){pt(r,i,m)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){pt(r,i,m)}else o.current=null}function Ww(r){var i=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){pt(r,r.return,m)}}function mp(r,i,o){try{var u=r.stateNode;KA(u,r.type,o,i),u[nn]=i}catch(m){pt(r,r.return,m)}}function Xw(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ca(r.type)||r.tag===4}function gp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Xw(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ca(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function pp(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(r),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=rr));else if(u!==4&&(u===27&&ca(r.type)&&(o=r.stateNode,i=null),r=r.child,r!==null))for(pp(r,i,o),r=r.sibling;r!==null;)pp(r,i,o),r=r.sibling}function Ch(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(u!==4&&(u===27&&ca(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Ch(r,i,o),r=r.sibling;r!==null;)Ch(r,i,o),r=r.sibling}function Jw(r){var i=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,m=i.attributes;m.length;)i.removeAttributeNode(m[0]);In(i,u,o),i[Ht]=r,i[nn]=o}catch(p){pt(r,r.return,p)}}var hi=!1,ln=!1,yp=!1,Zw=typeof WeakSet=="function"?WeakSet:Set,wn=null;function AA(r,i){if(r=r.containerInfo,Vp=Yh,r=db(r),ug(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var w=0,S=-1,L=-1,Y=0,ne=0,ce=r,W=null;t:for(;;){for(var Z;ce!==o||m!==0&&ce.nodeType!==3||(S=w+m),ce!==p||u!==0&&ce.nodeType!==3||(L=w+u),ce.nodeType===3&&(w+=ce.nodeValue.length),(Z=ce.firstChild)!==null;)W=ce,ce=Z;for(;;){if(ce===r)break t;if(W===o&&++Y===m&&(S=w),W===p&&++ne===u&&(L=w),(Z=ce.nextSibling)!==null)break;ce=W,W=ce.parentNode}ce=Z}o=S===-1||L===-1?null:{start:S,end:L}}else o=null}o=o||{start:0,end:0}}else o=null;for(Up={focusedElem:r,selectionRange:o},Yh=!1,wn=i;wn!==null;)if(i=wn,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,wn=r;else for(;wn!==null;){switch(i=wn,p=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)m=r[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&p!==null){r=void 0,o=i,m=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var we=wo(o.type,m);r=u.getSnapshotBeforeUpdate(we,p),u.__reactInternalSnapshotBeforeUpdate=r}catch(Ie){pt(o,o.return,Ie)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,o=r.nodeType,o===9)qp(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":qp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(s(163))}if(r=i.sibling,r!==null){r.return=i.return,wn=r;break}wn=i.return}}function e_(r,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:mi(r,o),u&4&&yu(5,o);break;case 1:if(mi(r,o),u&4)if(r=o.stateNode,i===null)try{r.componentDidMount()}catch(w){pt(o,o.return,w)}else{var m=wo(o.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(m,i,r.__reactInternalSnapshotBeforeUpdate)}catch(w){pt(o,o.return,w)}}u&64&&Qw(o),u&512&&vu(o,o.return);break;case 3:if(mi(r,o),u&64&&(r=o.updateQueue,r!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{Vb(r,i)}catch(w){pt(o,o.return,w)}}break;case 27:i===null&&u&4&&Jw(o);case 26:case 5:mi(r,o),i===null&&u&4&&Ww(o),u&512&&vu(o,o.return);break;case 12:mi(r,o);break;case 31:mi(r,o),u&4&&s_(r,o);break;case 13:mi(r,o),u&4&&r_(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=PA.bind(null,o),tN(r,o))));break;case 22:if(u=o.memoizedState!==null||hi,!u){i=i!==null&&i.memoizedState!==null||ln,m=hi;var p=ln;hi=u,(ln=i)&&!p?gi(r,o,(o.subtreeFlags&8772)!==0):mi(r,o),hi=m,ln=p}break;case 30:break;default:mi(r,o)}}function t_(r){var i=r.alternate;i!==null&&(r.alternate=null,t_(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&Mi(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Dt=null,is=!1;function fi(r,i,o){for(o=o.child;o!==null;)n_(r,i,o),o=o.sibling}function n_(r,i,o){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(ms,o)}catch{}switch(o.tag){case 26:ln||Ur(o,i),fi(r,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:ln||Ur(o,i);var u=Dt,m=is;ca(o.type)&&(Dt=o.stateNode,is=!1),fi(r,i,o),Nu(o.stateNode),Dt=u,is=m;break;case 5:ln||Ur(o,i);case 6:if(u=Dt,m=is,Dt=null,fi(r,i,o),Dt=u,is=m,Dt!==null)if(is)try{(Dt.nodeType===9?Dt.body:Dt.nodeName==="HTML"?Dt.ownerDocument.body:Dt).removeChild(o.stateNode)}catch(p){pt(o,i,p)}else try{Dt.removeChild(o.stateNode)}catch(p){pt(o,i,p)}break;case 18:Dt!==null&&(is?(r=Dt,Q_(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Bl(r)):Q_(Dt,o.stateNode));break;case 4:u=Dt,m=is,Dt=o.stateNode.containerInfo,is=!0,fi(r,i,o),Dt=u,is=m;break;case 0:case 11:case 14:case 15:na(2,o,i),ln||na(4,o,i),fi(r,i,o);break;case 1:ln||(Ur(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Yw(o,i,u)),fi(r,i,o);break;case 21:fi(r,i,o);break;case 22:ln=(u=ln)||o.memoizedState!==null,fi(r,i,o),ln=u;break;default:fi(r,i,o)}}function s_(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Bl(r)}catch(o){pt(i,i.return,o)}}}function r_(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Bl(r)}catch(o){pt(i,i.return,o)}}function NA(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new Zw),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new Zw),i;default:throw Error(s(435,r.tag))}}function kh(r,i){var o=NA(r);i.forEach(function(u){if(!o.has(u)){o.add(u);var m=MA.bind(null,r,u);u.then(m,m)}})}function as(r,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],p=r,w=i,S=w;e:for(;S!==null;){switch(S.tag){case 27:if(ca(S.type)){Dt=S.stateNode,is=!1;break e}break;case 5:Dt=S.stateNode,is=!1;break e;case 3:case 4:Dt=S.stateNode.containerInfo,is=!0;break e}S=S.return}if(Dt===null)throw Error(s(160));n_(p,w,m),Dt=null,is=!1,p=m.alternate,p!==null&&(p.return=null),m.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)i_(i,r),i=i.sibling}var ur=null;function i_(r,i){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:as(i,r),os(r),u&4&&(na(3,r,r.return),yu(3,r),na(5,r,r.return));break;case 1:as(i,r),os(r),u&512&&(ln||o===null||Ur(o,o.return)),u&64&&hi&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=ur;if(as(i,r),os(r),u&512&&(ln||o===null||Ur(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,m=m.ownerDocument||m;t:switch(u){case"title":p=m.getElementsByTagName("title")[0],(!p||p[Us]||p[Ht]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=m.createElement(u),m.head.insertBefore(p,m.querySelector("head > title"))),In(p,u,o),p[Ht]=r,Mt(p),u=p;break e;case"link":var w=i2("link","href",m).get(u+(o.href||""));if(w){for(var S=0;S<w.length;S++)if(p=w[S],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){w.splice(S,1);break t}}p=m.createElement(u),In(p,u,o),m.head.appendChild(p);break;case"meta":if(w=i2("meta","content",m).get(u+(o.content||""))){for(S=0;S<w.length;S++)if(p=w[S],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){w.splice(S,1);break t}}p=m.createElement(u),In(p,u,o),m.head.appendChild(p);break;default:throw Error(s(468,u))}p[Ht]=r,Mt(p),u=p}r.stateNode=u}else a2(m,r.type,r.stateNode);else r.stateNode=r2(m,u,r.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?a2(m,r.type,r.stateNode):r2(m,u,r.memoizedProps)):u===null&&r.stateNode!==null&&mp(r,r.memoizedProps,o.memoizedProps)}break;case 27:as(i,r),os(r),u&512&&(ln||o===null||Ur(o,o.return)),o!==null&&u&4&&mp(r,r.memoizedProps,o.memoizedProps);break;case 5:if(as(i,r),os(r),u&512&&(ln||o===null||Ur(o,o.return)),r.flags&32){m=r.stateNode;try{rs(m,"")}catch(we){pt(r,r.return,we)}}u&4&&r.stateNode!=null&&(m=r.memoizedProps,mp(r,m,o!==null?o.memoizedProps:m)),u&1024&&(yp=!0);break;case 6:if(as(i,r),os(r),u&4){if(r.stateNode===null)throw Error(s(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(we){pt(r,r.return,we)}}break;case 3:if(Fh=null,m=ur,ur=Hh(i.containerInfo),as(i,r),ur=m,os(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Bl(i.containerInfo)}catch(we){pt(r,r.return,we)}yp&&(yp=!1,a_(r));break;case 4:u=ur,ur=Hh(r.stateNode.containerInfo),as(i,r),os(r),ur=u;break;case 12:as(i,r),os(r);break;case 31:as(i,r),os(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,kh(r,u)));break;case 13:as(i,r),os(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Ih=An()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,kh(r,u)));break;case 22:m=r.memoizedState!==null;var L=o!==null&&o.memoizedState!==null,Y=hi,ne=ln;if(hi=Y||m,ln=ne||L,as(i,r),ln=ne,hi=Y,os(r),u&8192)e:for(i=r.stateNode,i._visibility=m?i._visibility&-2:i._visibility|1,m&&(o===null||L||hi||ln||_o(r)),o=null,i=r;;){if(i.tag===5||i.tag===26){if(o===null){L=o=i;try{if(p=L.stateNode,m)w=p.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{S=L.stateNode;var ce=L.memoizedProps.style,W=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;S.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(we){pt(L,L.return,we)}}}else if(i.tag===6){if(o===null){L=i;try{L.stateNode.nodeValue=m?"":L.memoizedProps}catch(we){pt(L,L.return,we)}}}else if(i.tag===18){if(o===null){L=i;try{var Z=L.stateNode;m?Y_(Z,!0):Y_(L.stateNode,!1)}catch(we){pt(L,L.return,we)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,kh(r,o))));break;case 19:as(i,r),os(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,kh(r,u)));break;case 30:break;case 21:break;default:as(i,r),os(r)}}function os(r){var i=r.flags;if(i&2){try{for(var o,u=r.return;u!==null;){if(Xw(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var m=o.stateNode,p=gp(r);Ch(r,p,m);break;case 5:var w=o.stateNode;o.flags&32&&(rs(w,""),o.flags&=-33);var S=gp(r);Ch(r,S,w);break;case 3:case 4:var L=o.stateNode.containerInfo,Y=gp(r);pp(r,Y,L);break;default:throw Error(s(161))}}catch(ne){pt(r,r.return,ne)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function a_(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;a_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function mi(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)e_(r,i.alternate,i),i=i.sibling}function _o(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:na(4,i,i.return),_o(i);break;case 1:Ur(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&Yw(i,i.return,o),_o(i);break;case 27:Nu(i.stateNode);case 26:case 5:Ur(i,i.return),_o(i);break;case 22:i.memoizedState===null&&_o(i);break;case 30:_o(i);break;default:_o(i)}r=r.sibling}}function gi(r,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,m=r,p=i,w=p.flags;switch(p.tag){case 0:case 11:case 15:gi(m,p,o),yu(4,p);break;case 1:if(gi(m,p,o),u=p,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(Y){pt(u,u.return,Y)}if(u=p,m=u.updateQueue,m!==null){var S=u.stateNode;try{var L=m.shared.hiddenCallbacks;if(L!==null)for(m.shared.hiddenCallbacks=null,m=0;m<L.length;m++)Lb(L[m],S)}catch(Y){pt(u,u.return,Y)}}o&&w&64&&Qw(p),vu(p,p.return);break;case 27:Jw(p);case 26:case 5:gi(m,p,o),o&&u===null&&w&4&&Ww(p),vu(p,p.return);break;case 12:gi(m,p,o);break;case 31:gi(m,p,o),o&&w&4&&s_(m,p);break;case 13:gi(m,p,o),o&&w&4&&r_(m,p);break;case 22:p.memoizedState===null&&gi(m,p,o),vu(p,p.return);break;case 30:break;default:gi(m,p,o)}i=i.sibling}}function vp(r,i){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&ru(o))}function bp(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&ru(r))}function dr(r,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)o_(r,i,o,u),i=i.sibling}function o_(r,i,o,u){var m=i.flags;switch(i.tag){case 0:case 11:case 15:dr(r,i,o,u),m&2048&&yu(9,i);break;case 1:dr(r,i,o,u);break;case 3:dr(r,i,o,u),m&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&ru(r)));break;case 12:if(m&2048){dr(r,i,o,u),r=i.stateNode;try{var p=i.memoizedProps,w=p.id,S=p.onPostCommit;typeof S=="function"&&S(w,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(L){pt(i,i.return,L)}}else dr(r,i,o,u);break;case 31:dr(r,i,o,u);break;case 13:dr(r,i,o,u);break;case 23:break;case 22:p=i.stateNode,w=i.alternate,i.memoizedState!==null?p._visibility&2?dr(r,i,o,u):bu(r,i):p._visibility&2?dr(r,i,o,u):(p._visibility|=2,kl(r,i,o,u,(i.subtreeFlags&10256)!==0||!1)),m&2048&&vp(w,i);break;case 24:dr(r,i,o,u),m&2048&&bp(i.alternate,i);break;default:dr(r,i,o,u)}}function kl(r,i,o,u,m){for(m=m&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var p=r,w=i,S=o,L=u,Y=w.flags;switch(w.tag){case 0:case 11:case 15:kl(p,w,S,L,m),yu(8,w);break;case 23:break;case 22:var ne=w.stateNode;w.memoizedState!==null?ne._visibility&2?kl(p,w,S,L,m):bu(p,w):(ne._visibility|=2,kl(p,w,S,L,m)),m&&Y&2048&&vp(w.alternate,w);break;case 24:kl(p,w,S,L,m),m&&Y&2048&&bp(w.alternate,w);break;default:kl(p,w,S,L,m)}i=i.sibling}}function bu(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=r,u=i,m=u.flags;switch(u.tag){case 22:bu(o,u),m&2048&&vp(u.alternate,u);break;case 24:bu(o,u),m&2048&&bp(u.alternate,u);break;default:bu(o,u)}i=i.sibling}}var wu=8192;function Rl(r,i,o){if(r.subtreeFlags&wu)for(r=r.child;r!==null;)l_(r,i,o),r=r.sibling}function l_(r,i,o){switch(r.tag){case 26:Rl(r,i,o),r.flags&wu&&r.memoizedState!==null&&fN(o,ur,r.memoizedState,r.memoizedProps);break;case 5:Rl(r,i,o);break;case 3:case 4:var u=ur;ur=Hh(r.stateNode.containerInfo),Rl(r,i,o),ur=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=wu,wu=16777216,Rl(r,i,o),wu=u):Rl(r,i,o));break;default:Rl(r,i,o)}}function c_(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function _u(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];wn=u,d_(u,r)}c_(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)u_(r),r=r.sibling}function u_(r){switch(r.tag){case 0:case 11:case 15:_u(r),r.flags&2048&&na(9,r,r.return);break;case 3:_u(r);break;case 12:_u(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,Rh(r)):_u(r);break;default:_u(r)}}function Rh(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];wn=u,d_(u,r)}c_(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:na(8,i,i.return),Rh(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Rh(i));break;default:Rh(i)}r=r.sibling}}function d_(r,i){for(;wn!==null;){var o=wn;switch(o.tag){case 0:case 11:case 15:na(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:ru(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,wn=u;else e:for(o=r;wn!==null;){u=wn;var m=u.sibling,p=u.return;if(t_(u),u===o){wn=null;break e}if(m!==null){m.return=p,wn=m;break e}wn=p}}}var CA={getCacheForType:function(r){var i=kn(rn),o=i.data.get(r);return o===void 0&&(o=r(),i.data.set(r,o)),o},cacheSignal:function(){return kn(rn).controller.signal}},kA=typeof WeakMap=="function"?WeakMap:Map,ut=0,Tt=null,Qe=null,We=0,gt=0,Ts=null,sa=!1,Il=!1,wp=!1,pi=0,Ft=0,ra=0,xo=0,_p=0,Ss=0,jl=0,xu=null,ls=null,xp=!1,Ih=0,h_=0,jh=1/0,Oh=null,ia=null,mn=0,aa=null,Ol=null,yi=0,Ep=0,Tp=null,f_=null,Eu=0,Sp=null;function As(){return(ut&2)!==0&&We!==0?We&-We:O.T!==null?Ip():tl()}function m_(){if(Ss===0)if((We&536870912)===0||st){var r=ei;ei<<=1,(ei&3932160)===0&&(ei=262144),Ss=r}else Ss=536870912;return r=xs.current,r!==null&&(r.flags|=32),Ss}function cs(r,i,o){(r===Tt&&(gt===2||gt===9)||r.cancelPendingCommit!==null)&&(Dl(r,0),oa(r,We,Ss,!1)),Ar(r,o),((ut&2)===0||r!==Tt)&&(r===Tt&&((ut&2)===0&&(xo|=o),Ft===4&&oa(r,We,Ss,!1)),Br(r))}function g_(r,i,o){if((ut&6)!==0)throw Error(s(327));var u=!o&&(i&127)===0&&(i&r.expiredLanes)===0||gs(r,i),m=u?jA(r,i):Np(r,i,!0),p=u;do{if(m===0){Il&&!u&&oa(r,i,0,!1);break}else{if(o=r.current.alternate,p&&!RA(o)){m=Np(r,i,!1),p=!1;continue}if(m===2){if(p=i,r.errorRecoveryDisabledLanes&p)var w=0;else w=r.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){i=w;e:{var S=r;m=xu;var L=S.current.memoizedState.isDehydrated;if(L&&(Dl(S,w).flags|=256),w=Np(S,w,!1),w!==2){if(wp&&!L){S.errorRecoveryDisabledLanes|=p,xo|=p,m=4;break e}p=ls,ls=m,p!==null&&(ls===null?ls=p:ls.push.apply(ls,p))}m=w}if(p=!1,m!==2)continue}}if(m===1){Dl(r,0),oa(r,i,0,!0);break}e:{switch(u=r,p=m,p){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:oa(u,i,Ss,!sa);break e;case 2:ls=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(m=Ih+300-An(),10<m)){if(oa(u,i,Ss,!sa),vn(u,0,!0)!==0)break e;yi=i,u.timeoutHandle=G_(p_.bind(null,u,o,ls,Oh,xp,i,Ss,xo,jl,sa,p,"Throttled",-0,0),m);break e}p_(u,o,ls,Oh,xp,i,Ss,xo,jl,sa,p,null,-0,0)}}break}while(!0);Br(r)}function p_(r,i,o,u,m,p,w,S,L,Y,ne,ce,W,Z){if(r.timeoutHandle=-1,ce=i.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:rr},l_(i,p,ce);var we=(p&62914560)===p?Ih-An():(p&4194048)===p?h_-An():0;if(we=mN(ce,we),we!==null){yi=p,r.cancelPendingCommit=we(T_.bind(null,r,i,p,o,u,m,w,S,L,ne,ce,null,W,Z)),oa(r,p,w,!Y);return}}T_(r,i,p,o,u,m,w,S,L)}function RA(r){for(var i=r;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],p=m.getSnapshot;m=m.value;try{if(!ws(p(),m))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function oa(r,i,o,u){i&=~_p,i&=~xo,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var m=i;0<m;){var p=31-It(m),w=1<<p;u[p]=-1,m&=~w}o!==0&&Cr(r,o,i)}function Dh(){return(ut&6)===0?(Tu(0),!1):!0}function Ap(){if(Qe!==null){if(gt===0)var r=Qe.return;else r=Qe,ai=fo=null,qg(r),Tl=null,au=0,r=Qe;for(;r!==null;)Kw(r.alternate,r),r=r.return;Qe=null}}function Dl(r,i){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,WA(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),yi=0,Ap(),Tt=r,Qe=o=ri(r.current,null),We=i,gt=0,Ts=null,sa=!1,Il=gs(r,i),wp=!1,jl=Ss=_p=xo=ra=Ft=0,ls=xu=null,xp=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var m=31-It(u),p=1<<m;i|=r[m],u&=~p}return pi=i,th(),o}function y_(r,i){qe=null,O.H=mu,i===El||i===ch?(i=Ob(),gt=3):i===Rg?(i=Ob(),gt=4):gt=i===rp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ts=i,Qe===null&&(Ft=1,Eh(r,Fs(i,r.current)))}function v_(){var r=xs.current;return r===null?!0:(We&4194048)===We?Ys===null:(We&62914560)===We||(We&536870912)!==0?r===Ys:!1}function b_(){var r=O.H;return O.H=mu,r===null?mu:r}function w_(){var r=O.A;return O.A=CA,r}function Ph(){Ft=4,sa||(We&4194048)!==We&&xs.current!==null||(Il=!0),(ra&134217727)===0&&(xo&134217727)===0||Tt===null||oa(Tt,We,Ss,!1)}function Np(r,i,o){var u=ut;ut|=2;var m=b_(),p=w_();(Tt!==r||We!==i)&&(Oh=null,Dl(r,i)),i=!1;var w=Ft;e:do try{if(gt!==0&&Qe!==null){var S=Qe,L=Ts;switch(gt){case 8:Ap(),w=6;break e;case 3:case 2:case 9:case 6:xs.current===null&&(i=!0);var Y=gt;if(gt=0,Ts=null,Pl(r,S,L,Y),o&&Il){w=0;break e}break;default:Y=gt,gt=0,Ts=null,Pl(r,S,L,Y)}}IA(),w=Ft;break}catch(ne){y_(r,ne)}while(!0);return i&&r.shellSuspendCounter++,ai=fo=null,ut=u,O.H=m,O.A=p,Qe===null&&(Tt=null,We=0,th()),w}function IA(){for(;Qe!==null;)__(Qe)}function jA(r,i){var o=ut;ut|=2;var u=b_(),m=w_();Tt!==r||We!==i?(Oh=null,jh=An()+500,Dl(r,i)):Il=gs(r,i);e:do try{if(gt!==0&&Qe!==null){i=Qe;var p=Ts;t:switch(gt){case 1:gt=0,Ts=null,Pl(r,i,p,1);break;case 2:case 9:if(Ib(p)){gt=0,Ts=null,x_(i);break}i=function(){gt!==2&&gt!==9||Tt!==r||(gt=7),Br(r)},p.then(i,i);break e;case 3:gt=7;break e;case 4:gt=5;break e;case 7:Ib(p)?(gt=0,Ts=null,x_(i)):(gt=0,Ts=null,Pl(r,i,p,7));break;case 5:var w=null;switch(Qe.tag){case 26:w=Qe.memoizedState;case 5:case 27:var S=Qe;if(w?o2(w):S.stateNode.complete){gt=0,Ts=null;var L=S.sibling;if(L!==null)Qe=L;else{var Y=S.return;Y!==null?(Qe=Y,Mh(Y)):Qe=null}break t}}gt=0,Ts=null,Pl(r,i,p,5);break;case 6:gt=0,Ts=null,Pl(r,i,p,6);break;case 8:Ap(),Ft=6;break e;default:throw Error(s(462))}}OA();break}catch(ne){y_(r,ne)}while(!0);return ai=fo=null,O.H=u,O.A=m,ut=o,Qe!==null?0:(Tt=null,We=0,th(),Ft)}function OA(){for(;Qe!==null&&!Fa();)__(Qe)}function __(r){var i=Fw(r.alternate,r,pi);r.memoizedProps=r.pendingProps,i===null?Mh(r):Qe=i}function x_(r){var i=r,o=i.alternate;switch(i.tag){case 15:case 0:i=Uw(o,i,i.pendingProps,i.type,void 0,We);break;case 11:i=Uw(o,i,i.pendingProps,i.type.render,i.ref,We);break;case 5:qg(i);default:Kw(o,i),i=Qe=wb(i,pi),i=Fw(o,i,pi)}r.memoizedProps=r.pendingProps,i===null?Mh(r):Qe=i}function Pl(r,i,o,u){ai=fo=null,qg(i),Tl=null,au=0;var m=i.return;try{if(_A(r,m,i,o,We)){Ft=1,Eh(r,Fs(o,r.current)),Qe=null;return}}catch(p){if(m!==null)throw Qe=m,p;Ft=1,Eh(r,Fs(o,r.current)),Qe=null;return}i.flags&32768?(st||u===1?r=!0:Il||(We&536870912)!==0?r=!1:(sa=r=!0,(u===2||u===9||u===3||u===6)&&(u=xs.current,u!==null&&u.tag===13&&(u.flags|=16384))),E_(i,r)):Mh(i)}function Mh(r){var i=r;do{if((i.flags&32768)!==0){E_(i,sa);return}r=i.return;var o=TA(i.alternate,i,pi);if(o!==null){Qe=o;return}if(i=i.sibling,i!==null){Qe=i;return}Qe=i=r}while(i!==null);Ft===0&&(Ft=5)}function E_(r,i){do{var o=SA(r.alternate,r);if(o!==null){o.flags&=32767,Qe=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(r=r.sibling,r!==null)){Qe=r;return}Qe=r=o}while(r!==null);Ft=6,Qe=null}function T_(r,i,o,u,m,p,w,S,L){r.cancelPendingCommit=null;do Lh();while(mn!==0);if((ut&6)!==0)throw Error(s(327));if(i!==null){if(i===r.current)throw Error(s(177));if(p=i.lanes|i.childLanes,p|=gg,Nr(r,o,p,w,S,L),r===Tt&&(Qe=Tt=null,We=0),Ol=i,aa=r,yi=o,Ep=p,Tp=m,f_=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,LA(nr,function(){return k_(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=O.T,O.T=null,m=re.p,re.p=2,w=ut,ut|=4;try{AA(r,i,o)}finally{ut=w,re.p=m,O.T=u}}mn=1,S_(),A_(),N_()}}function S_(){if(mn===1){mn=0;var r=aa,i=Ol,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=O.T,O.T=null;var u=re.p;re.p=2;var m=ut;ut|=4;try{i_(i,r);var p=Up,w=db(r.containerInfo),S=p.focusedElem,L=p.selectionRange;if(w!==S&&S&&S.ownerDocument&&ub(S.ownerDocument.documentElement,S)){if(L!==null&&ug(S)){var Y=L.start,ne=L.end;if(ne===void 0&&(ne=Y),"selectionStart"in S)S.selectionStart=Y,S.selectionEnd=Math.min(ne,S.value.length);else{var ce=S.ownerDocument||document,W=ce&&ce.defaultView||window;if(W.getSelection){var Z=W.getSelection(),we=S.textContent.length,Ie=Math.min(L.start,we),xt=L.end===void 0?Ie:Math.min(L.end,we);!Z.extend&&Ie>xt&&(w=xt,xt=Ie,Ie=w);var $=cb(S,Ie),z=cb(S,xt);if($&&z&&(Z.rangeCount!==1||Z.anchorNode!==$.node||Z.anchorOffset!==$.offset||Z.focusNode!==z.node||Z.focusOffset!==z.offset)){var Q=ce.createRange();Q.setStart($.node,$.offset),Z.removeAllRanges(),Ie>xt?(Z.addRange(Q),Z.extend(z.node,z.offset)):(Q.setEnd(z.node,z.offset),Z.addRange(Q))}}}}for(ce=[],Z=S;Z=Z.parentNode;)Z.nodeType===1&&ce.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ce.length;S++){var ae=ce[S];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Yh=!!Vp,Up=Vp=null}finally{ut=m,re.p=u,O.T=o}}r.current=i,mn=2}}function A_(){if(mn===2){mn=0;var r=aa,i=Ol,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=O.T,O.T=null;var u=re.p;re.p=2;var m=ut;ut|=4;try{e_(r,i.alternate,i)}finally{ut=m,re.p=u,O.T=o}}mn=3}}function N_(){if(mn===4||mn===3){mn=0,Zo();var r=aa,i=Ol,o=yi,u=f_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?mn=5:(mn=0,Ol=aa=null,C_(r,r.pendingLanes));var m=r.pendingLanes;if(m===0&&(ia=null),ps(o),i=i.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(ms,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=O.T,m=re.p,re.p=2,O.T=null;try{for(var p=r.onRecoverableError,w=0;w<u.length;w++){var S=u[w];p(S.value,{componentStack:S.stack})}}finally{O.T=i,re.p=m}}(yi&3)!==0&&Lh(),Br(r),m=r.pendingLanes,(o&261930)!==0&&(m&42)!==0?r===Sp?Eu++:(Eu=0,Sp=r):Eu=0,Tu(0)}}function C_(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,ru(i)))}function Lh(){return S_(),A_(),N_(),k_()}function k_(){if(mn!==5)return!1;var r=aa,i=Ep;Ep=0;var o=ps(yi),u=O.T,m=re.p;try{re.p=32>o?32:o,O.T=null,o=Tp,Tp=null;var p=aa,w=yi;if(mn=0,Ol=aa=null,yi=0,(ut&6)!==0)throw Error(s(331));var S=ut;if(ut|=4,u_(p.current),o_(p,p.current,w,o),ut=S,Tu(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(ms,p)}catch{}return!0}finally{re.p=m,O.T=u,C_(r,i)}}function R_(r,i,o){i=Fs(o,i),i=sp(r.stateNode,i,2),r=Zi(r,i,2),r!==null&&(Ar(r,2),Br(r))}function pt(r,i,o){if(r.tag===3)R_(r,r,o);else for(;i!==null;){if(i.tag===3){R_(i,r,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ia===null||!ia.has(u))){r=Fs(o,r),o=Iw(2),u=Zi(i,o,2),u!==null&&(jw(o,u,i,r),Ar(u,2),Br(u));break}}i=i.return}}function Cp(r,i,o){var u=r.pingCache;if(u===null){u=r.pingCache=new kA;var m=new Set;u.set(i,m)}else m=u.get(i),m===void 0&&(m=new Set,u.set(i,m));m.has(o)||(wp=!0,m.add(o),r=DA.bind(null,r,i,o),i.then(r,r))}function DA(r,i,o){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,Tt===r&&(We&o)===o&&(Ft===4||Ft===3&&(We&62914560)===We&&300>An()-Ih?(ut&2)===0&&Dl(r,0):_p|=o,jl===We&&(jl=0)),Br(r)}function I_(r,i){i===0&&(i=Xa()),r=co(r,i),r!==null&&(Ar(r,i),Br(r))}function PA(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),I_(r,o)}function MA(r,i){var o=0;switch(r.tag){case 31:case 13:var u=r.stateNode,m=r.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),I_(r,o)}function LA(r,i){return zt(r,i)}var Vh=null,Ml=null,kp=!1,Uh=!1,Rp=!1,la=0;function Br(r){r!==Ml&&r.next===null&&(Ml===null?Vh=Ml=r:Ml=Ml.next=r),Uh=!0,kp||(kp=!0,UA())}function Tu(r,i){if(!Rp&&Uh){Rp=!0;do for(var o=!1,u=Vh;u!==null;){if(r!==0){var m=u.pendingLanes;if(m===0)var p=0;else{var w=u.suspendedLanes,S=u.pingedLanes;p=(1<<31-It(42|r)+1)-1,p&=m&~(w&~S),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,P_(u,p))}else p=We,p=vn(u,u===Tt?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||gs(u,p)||(o=!0,P_(u,p));u=u.next}while(o);Rp=!1}}function VA(){j_()}function j_(){Uh=kp=!1;var r=0;la!==0&&YA()&&(r=la);for(var i=An(),o=null,u=Vh;u!==null;){var m=u.next,p=O_(u,i);p===0?(u.next=null,o===null?Vh=m:o.next=m,m===null&&(Ml=o)):(o=u,(r!==0||(p&3)!==0)&&(Uh=!0)),u=m}mn!==0&&mn!==5||Tu(r),la!==0&&(la=0)}function O_(r,i){for(var o=r.suspendedLanes,u=r.pingedLanes,m=r.expirationTimes,p=r.pendingLanes&-62914561;0<p;){var w=31-It(p),S=1<<w,L=m[w];L===-1?((S&o)===0||(S&u)!==0)&&(m[w]=ji(S,i)):L<=i&&(r.expiredLanes|=S),p&=~S}if(i=Tt,o=We,o=vn(r,r===i?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===i&&(gt===2||gt===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&er(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||gs(r,o)){if(i=o&-o,i===r.callbackPriority)return i;switch(u!==null&&er(u),ps(o)){case 2:case 8:o=Ga;break;case 32:o=nr;break;case 268435456:o=Ka;break;default:o=nr}return u=D_.bind(null,r),o=zt(o,u),r.callbackPriority=i,r.callbackNode=o,i}return u!==null&&u!==null&&er(u),r.callbackPriority=2,r.callbackNode=null,2}function D_(r,i){if(mn!==0&&mn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Lh()&&r.callbackNode!==o)return null;var u=We;return u=vn(r,r===Tt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(g_(r,u,i),O_(r,An()),r.callbackNode!=null&&r.callbackNode===o?D_.bind(null,r):null)}function P_(r,i){if(Lh())return null;g_(r,i,!0)}function UA(){XA(function(){(ut&6)!==0?zt(tr,VA):j_()})}function Ip(){if(la===0){var r=_l;r===0&&(r=Mn,Mn<<=1,(Mn&261888)===0&&(Mn=256)),la=r}return la}function M_(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:al(""+r)}function L_(r,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,r.id&&o.setAttribute("form",r.id),i.parentNode.insertBefore(o,i),r=new FormData(r),o.parentNode.removeChild(o),r}function BA(r,i,o,u,m){if(i==="submit"&&o&&o.stateNode===m){var p=M_((m[nn]||null).action),w=u.submitter;w&&(i=(i=w[nn]||null)?M_(i.formAction):w.getAttribute("formAction"),i!==null&&(p=i,w=null));var S=new Or("action","action",null,u,m);r.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(la!==0){var L=w?L_(m,w):new FormData(m);Xg(o,{pending:!0,data:L,method:m.method,action:p},null,L)}}else typeof p=="function"&&(S.preventDefault(),L=w?L_(m,w):new FormData(m),Xg(o,{pending:!0,data:L,method:m.method,action:p},p,L))},currentTarget:m}]})}}for(var jp=0;jp<mg.length;jp++){var Op=mg[jp],zA=Op.toLowerCase(),qA=Op[0].toUpperCase()+Op.slice(1);cr(zA,"on"+qA)}cr(mb,"onAnimationEnd"),cr(gb,"onAnimationIteration"),cr(pb,"onAnimationStart"),cr("dblclick","onDoubleClick"),cr("focusin","onFocus"),cr("focusout","onBlur"),cr(rA,"onTransitionRun"),cr(iA,"onTransitionStart"),cr(aA,"onTransitionCancel"),cr(yb,"onTransitionEnd"),Se("onMouseEnter",["mouseout","mouseover"]),Se("onMouseLeave",["mouseout","mouseover"]),Se("onPointerEnter",["pointerout","pointerover"]),Se("onPointerLeave",["pointerout","pointerover"]),de("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),de("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),de("onBeforeInput",["compositionend","keypress","textInput","paste"]),de("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),de("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),de("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Su));function V_(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],m=u.event;u=u.listeners;e:{var p=void 0;if(i)for(var w=u.length-1;0<=w;w--){var S=u[w],L=S.instance,Y=S.currentTarget;if(S=S.listener,L!==p&&m.isPropagationStopped())break e;p=S,m.currentTarget=Y;try{p(m)}catch(ne){eh(ne)}m.currentTarget=null,p=L}else for(w=0;w<u.length;w++){if(S=u[w],L=S.instance,Y=S.currentTarget,S=S.listener,L!==p&&m.isPropagationStopped())break e;p=S,m.currentTarget=Y;try{p(m)}catch(ne){eh(ne)}m.currentTarget=null,p=L}}}}function Ye(r,i){var o=i[Pi];o===void 0&&(o=i[Pi]=new Set);var u=r+"__bubble";o.has(u)||(U_(i,r,2,!1),o.add(u))}function Dp(r,i,o){var u=0;i&&(u|=4),U_(o,r,u,i)}var Bh="_reactListening"+Math.random().toString(36).slice(2);function Pp(r){if(!r[Bh]){r[Bh]=!0,Li.forEach(function(o){o!=="selectionchange"&&(HA.has(o)||Dp(o,!1,r),Dp(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Bh]||(i[Bh]=!0,Dp("selectionchange",!1,i))}}function U_(r,i,o,u){switch(m2(i)){case 2:var m=yN;break;case 8:m=vN;break;default:m=Wp}o=m.bind(null,i,o,r),m=void 0,!to||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),u?m!==void 0?r.addEventListener(i,o,{capture:!0,passive:m}):r.addEventListener(i,o,!0):m!==void 0?r.addEventListener(i,o,{passive:m}):r.addEventListener(i,o,!1)}function Mp(r,i,o,u,m){var p=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var S=u.stateNode.containerInfo;if(S===m)break;if(w===4)for(w=u.return;w!==null;){var L=w.tag;if((L===3||L===4)&&w.stateNode.containerInfo===m)return;w=w.return}for(;S!==null;){if(w=bs(S),w===null)return;if(L=w.tag,L===5||L===6||L===26||L===27){u=p=w;continue e}S=S.parentNode}}u=u.return}Hi(function(){var Y=p,ne=zs(o),ce=[];e:{var W=vb.get(r);if(W!==void 0){var Z=Or,we=r;switch(r){case"keypress":if(so(o)===0)break e;case"keydown":case"keyup":Z=Xd;break;case"focusin":we="focus",Z=io;break;case"focusout":we="blur",Z=io;break;case"beforeblur":case"afterblur":Z=io;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Wc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=qd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=b;break;case mb:case gb:case pb:Z=$d;break;case yb:Z=A;break;case"scroll":case"scrollend":Z=Yc;break;case"wheel":Z=J;break;case"copy":case"cut":case"paste":Z=Fd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=si;break;case"toggle":case"beforetoggle":Z=ze}var Ie=(i&4)!==0,xt=!Ie&&(r==="scroll"||r==="scrollend"),$=Ie?W!==null?W+"Capture":null:W;Ie=[];for(var z=Y,Q;z!==null;){var ae=z;if(Q=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Q===null||$===null||(ae=ir(z,$),ae!=null&&Ie.push(Au(z,ae,Q))),xt)break;z=z.return}0<Ie.length&&(W=new Z(W,we,null,o,ne),ce.push({event:W,listeners:Ie}))}}if((i&7)===0){e:{if(W=r==="mouseover"||r==="pointerover",Z=r==="mouseout"||r==="pointerout",W&&o!==Gc&&(we=o.relatedTarget||o.fromElement)&&(bs(we)||we[Vs]))break e;if((Z||W)&&(W=ne.window===ne?ne:(W=ne.ownerDocument)?W.defaultView||W.parentWindow:window,Z?(we=o.relatedTarget||o.toElement,Z=Y,we=we?bs(we):null,we!==null&&(xt=l(we),Ie=we.tag,we!==xt||Ie!==5&&Ie!==27&&Ie!==6)&&(we=null)):(Z=null,we=Y),Z!==we)){if(Ie=Wc,ae="onMouseLeave",$="onMouseEnter",z="mouse",(r==="pointerout"||r==="pointerover")&&(Ie=si,ae="onPointerLeave",$="onPointerEnter",z="pointer"),xt=Z==null?W:Yn(Z),Q=we==null?W:Yn(we),W=new Ie(ae,z+"leave",Z,o,ne),W.target=xt,W.relatedTarget=Q,ae=null,bs(ne)===Y&&(Ie=new Ie($,z+"enter",we,o,ne),Ie.target=Q,Ie.relatedTarget=xt,ae=Ie),xt=ae,Z&&we)t:{for(Ie=$A,$=Z,z=we,Q=0,ae=$;ae;ae=Ie(ae))Q++;ae=0;for(var Ce=z;Ce;Ce=Ie(Ce))ae++;for(;0<Q-ae;)$=Ie($),Q--;for(;0<ae-Q;)z=Ie(z),ae--;for(;Q--;){if($===z||z!==null&&$===z.alternate){Ie=$;break t}$=Ie($),z=Ie(z)}Ie=null}else Ie=null;Z!==null&&B_(ce,W,Z,Ie,!1),we!==null&&xt!==null&&B_(ce,xt,we,Ie,!0)}}e:{if(W=Y?Yn(Y):window,Z=W.nodeName&&W.nodeName.toLowerCase(),Z==="select"||Z==="input"&&W.type==="file")var at=sb;else if(tb(W))if(rb)at=tA;else{at=Z5;var xe=J5}else Z=W.nodeName,!Z||Z.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?Y&&il(Y.elementType)&&(at=sb):at=eA;if(at&&(at=at(r,Y))){nb(ce,at,o,ne);break e}xe&&xe(r,W,Y),r==="focusout"&&Y&&W.type==="number"&&Y.memoizedProps.value!=null&&Hc(W,"number",W.value)}switch(xe=Y?Yn(Y):window,r){case"focusin":(tb(xe)||xe.contentEditable==="true")&&(fl=xe,dg=Y,tu=null);break;case"focusout":tu=dg=fl=null;break;case"mousedown":hg=!0;break;case"contextmenu":case"mouseup":case"dragend":hg=!1,hb(ce,o,ne);break;case"selectionchange":if(sA)break;case"keydown":case"keyup":hb(ce,o,ne)}var Fe;if(ct)e:{switch(r){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else hl?ao(r,o)&&(Xe="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Xe="onCompositionStart");Xe&&(Mr&&o.locale!=="ko"&&(hl||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&hl&&(Fe=Qc()):(jr=ne,Kc="value"in jr?jr.value:jr.textContent,hl=!0)),xe=zh(Y,Xe),0<xe.length&&(Xe=new Pr(Xe,r,null,o,ne),ce.push({event:Xe,listeners:xe}),Fe?Xe.data=Fe:(Fe=dl(o),Fe!==null&&(Xe.data=Fe)))),(Fe=Hs?Q5(r,o):Y5(r,o))&&(Xe=zh(Y,"onBeforeInput"),0<Xe.length&&(xe=new Pr("onBeforeInput","beforeinput",null,o,ne),ce.push({event:xe,listeners:Xe}),xe.data=Fe)),BA(ce,r,Y,o,ne)}V_(ce,i)})}function Au(r,i,o){return{instance:r,listener:i,currentTarget:o}}function zh(r,i){for(var o=i+"Capture",u=[];r!==null;){var m=r,p=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||p===null||(m=ir(r,o),m!=null&&u.unshift(Au(r,m,p)),m=ir(r,i),m!=null&&u.push(Au(r,m,p))),r.tag===3)return u;r=r.return}return[]}function $A(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function B_(r,i,o,u,m){for(var p=i._reactName,w=[];o!==null&&o!==u;){var S=o,L=S.alternate,Y=S.stateNode;if(S=S.tag,L!==null&&L===u)break;S!==5&&S!==26&&S!==27||Y===null||(L=Y,m?(Y=ir(o,p),Y!=null&&w.unshift(Au(o,Y,L))):m||(Y=ir(o,p),Y!=null&&w.push(Au(o,Y,L)))),o=o.return}w.length!==0&&r.push({event:i,listeners:w})}var FA=/\r\n?/g,GA=/\u0000|\uFFFD/g;function z_(r){return(typeof r=="string"?r:""+r).replace(FA,`
`).replace(GA,"")}function q_(r,i){return i=z_(i),z_(r)===i}function _t(r,i,o,u,m,p){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||rs(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&rs(r,""+u);break;case"className":Qt(r,"class",u);break;case"tabIndex":Qt(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Qt(r,o,u);break;case"style":Fc(r,u,p);break;case"data":if(i!=="object"){Qt(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=al(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(i!=="input"&&_t(r,i,"name",m.name,m,null),_t(r,i,"formEncType",m.formEncType,m,null),_t(r,i,"formMethod",m.formMethod,m,null),_t(r,i,"formTarget",m.formTarget,m,null)):(_t(r,i,"encType",m.encType,m,null),_t(r,i,"method",m.method,m,null),_t(r,i,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=al(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=rr);break;case"onScroll":u!=null&&Ye("scroll",r);break;case"onScrollEnd":u!=null&&Ye("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=al(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Ye("beforetoggle",r),Ye("toggle",r),Lt(r,"popover",u);break;case"xlinkActuate":sn(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":sn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":sn(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":sn(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":sn(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":sn(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":sn(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":sn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":sn(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Lt(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=zd.get(o)||o,Lt(r,o,u))}}function Lp(r,i,o,u,m,p){switch(o){case"style":Fc(r,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(s(60));r.innerHTML=o}}break;case"children":typeof u=="string"?rs(r,u):(typeof u=="number"||typeof u=="bigint")&&rs(r,""+u);break;case"onScroll":u!=null&&Ye("scroll",r);break;case"onScrollEnd":u!=null&&Ye("scrollend",r);break;case"onClick":u!=null&&(r.onclick=rr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!D.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),i=o.slice(2,m?o.length-7:void 0),p=r[nn]||null,p=p!=null?p[o]:null,typeof p=="function"&&r.removeEventListener(i,p,m),typeof u=="function")){typeof p!="function"&&p!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(i,u,m);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Lt(r,o,u)}}}function In(r,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",r),Ye("load",r);var u=!1,m=!1,p;for(p in o)if(o.hasOwnProperty(p)){var w=o[p];if(w!=null)switch(p){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:_t(r,i,p,w,o,null)}}m&&_t(r,i,"srcSet",o.srcSet,o,null),u&&_t(r,i,"src",o.src,o,null);return;case"input":Ye("invalid",r);var S=p=w=m=null,L=null,Y=null;for(u in o)if(o.hasOwnProperty(u)){var ne=o[u];if(ne!=null)switch(u){case"name":m=ne;break;case"type":w=ne;break;case"checked":L=ne;break;case"defaultChecked":Y=ne;break;case"value":p=ne;break;case"defaultValue":S=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,i));break;default:_t(r,i,u,ne,o,null)}}Vd(r,p,S,L,Y,w,m,!1);return;case"select":Ye("invalid",r),u=w=p=null;for(m in o)if(o.hasOwnProperty(m)&&(S=o[m],S!=null))switch(m){case"value":p=S;break;case"defaultValue":w=S;break;case"multiple":u=S;default:_t(r,i,m,S,o,null)}i=p,o=w,r.multiple=!!u,i!=null?Ui(r,!!u,i,!1):o!=null&&Ui(r,!!u,o,!0);return;case"textarea":Ye("invalid",r),p=m=u=null;for(w in o)if(o.hasOwnProperty(w)&&(S=o[w],S!=null))switch(w){case"value":u=S;break;case"defaultValue":m=S;break;case"children":p=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:_t(r,i,w,S,o,null)}Bi(r,u,m,p);return;case"option":for(L in o)if(o.hasOwnProperty(L)&&(u=o[L],u!=null))switch(L){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:_t(r,i,L,u,o,null)}return;case"dialog":Ye("beforetoggle",r),Ye("toggle",r),Ye("cancel",r),Ye("close",r);break;case"iframe":case"object":Ye("load",r);break;case"video":case"audio":for(u=0;u<Su.length;u++)Ye(Su[u],r);break;case"image":Ye("error",r),Ye("load",r);break;case"details":Ye("toggle",r);break;case"embed":case"source":case"link":Ye("error",r),Ye("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in o)if(o.hasOwnProperty(Y)&&(u=o[Y],u!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:_t(r,i,Y,u,o,null)}return;default:if(il(i)){for(ne in o)o.hasOwnProperty(ne)&&(u=o[ne],u!==void 0&&Lp(r,i,ne,u,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(u=o[S],u!=null&&_t(r,i,S,u,o,null))}function KA(r,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,p=null,w=null,S=null,L=null,Y=null,ne=null;for(Z in o){var ce=o[Z];if(o.hasOwnProperty(Z)&&ce!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":L=ce;default:u.hasOwnProperty(Z)||_t(r,i,Z,null,u,ce)}}for(var W in u){var Z=u[W];if(ce=o[W],u.hasOwnProperty(W)&&(Z!=null||ce!=null))switch(W){case"type":p=Z;break;case"name":m=Z;break;case"checked":Y=Z;break;case"defaultChecked":ne=Z;break;case"value":w=Z;break;case"defaultValue":S=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,i));break;default:Z!==ce&&_t(r,i,W,Z,u,ce)}}rl(r,w,S,L,Y,ne,p,m);return;case"select":Z=w=S=W=null;for(p in o)if(L=o[p],o.hasOwnProperty(p)&&L!=null)switch(p){case"value":break;case"multiple":Z=L;default:u.hasOwnProperty(p)||_t(r,i,p,null,u,L)}for(m in u)if(p=u[m],L=o[m],u.hasOwnProperty(m)&&(p!=null||L!=null))switch(m){case"value":W=p;break;case"defaultValue":S=p;break;case"multiple":w=p;default:p!==L&&_t(r,i,m,p,u,L)}i=S,o=w,u=Z,W!=null?Ui(r,!!o,W,!1):!!u!=!!o&&(i!=null?Ui(r,!!o,i,!0):Ui(r,!!o,o?[]:"",!1));return;case"textarea":Z=W=null;for(S in o)if(m=o[S],o.hasOwnProperty(S)&&m!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:_t(r,i,S,null,u,m)}for(w in u)if(m=u[w],p=o[w],u.hasOwnProperty(w)&&(m!=null||p!=null))switch(w){case"value":W=m;break;case"defaultValue":Z=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==p&&_t(r,i,w,m,u,p)}Ud(r,W,Z);return;case"option":for(var we in o)if(W=o[we],o.hasOwnProperty(we)&&W!=null&&!u.hasOwnProperty(we))switch(we){case"selected":r.selected=!1;break;default:_t(r,i,we,null,u,W)}for(L in u)if(W=u[L],Z=o[L],u.hasOwnProperty(L)&&W!==Z&&(W!=null||Z!=null))switch(L){case"selected":r.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:_t(r,i,L,W,u,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in o)W=o[Ie],o.hasOwnProperty(Ie)&&W!=null&&!u.hasOwnProperty(Ie)&&_t(r,i,Ie,null,u,W);for(Y in u)if(W=u[Y],Z=o[Y],u.hasOwnProperty(Y)&&W!==Z&&(W!=null||Z!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,i));break;default:_t(r,i,Y,W,u,Z)}return;default:if(il(i)){for(var xt in o)W=o[xt],o.hasOwnProperty(xt)&&W!==void 0&&!u.hasOwnProperty(xt)&&Lp(r,i,xt,void 0,u,W);for(ne in u)W=u[ne],Z=o[ne],!u.hasOwnProperty(ne)||W===Z||W===void 0&&Z===void 0||Lp(r,i,ne,W,u,Z);return}}for(var $ in o)W=o[$],o.hasOwnProperty($)&&W!=null&&!u.hasOwnProperty($)&&_t(r,i,$,null,u,W);for(ce in u)W=u[ce],Z=o[ce],!u.hasOwnProperty(ce)||W===Z||W==null&&Z==null||_t(r,i,ce,W,u,Z)}function H_(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function QA(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var m=o[u],p=m.transferSize,w=m.initiatorType,S=m.duration;if(p&&S&&H_(w)){for(w=0,S=m.responseEnd,u+=1;u<o.length;u++){var L=o[u],Y=L.startTime;if(Y>S)break;var ne=L.transferSize,ce=L.initiatorType;ne&&H_(ce)&&(L=L.responseEnd,w+=ne*(L<S?1:(S-Y)/(L-Y)))}if(--u,i+=8*(p+w)/(m.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Vp=null,Up=null;function qh(r){return r.nodeType===9?r:r.ownerDocument}function $_(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function F_(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function Bp(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var zp=null;function YA(){var r=window.event;return r&&r.type==="popstate"?r===zp?!1:(zp=r,!0):(zp=null,!1)}var G_=typeof setTimeout=="function"?setTimeout:void 0,WA=typeof clearTimeout=="function"?clearTimeout:void 0,K_=typeof Promise=="function"?Promise:void 0,XA=typeof queueMicrotask=="function"?queueMicrotask:typeof K_<"u"?function(r){return K_.resolve(null).then(r).catch(JA)}:G_;function JA(r){setTimeout(function(){throw r})}function ca(r){return r==="head"}function Q_(r,i){var o=i,u=0;do{var m=o.nextSibling;if(r.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(u===0){r.removeChild(m),Bl(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Nu(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,Nu(o);for(var p=o.firstChild;p;){var w=p.nextSibling,S=p.nodeName;p[Us]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=w}}else o==="body"&&Nu(r.ownerDocument.body);o=m}while(o);Bl(i)}function Y_(r,i){var o=r;r=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=u}while(o)}function qp(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":qp(o),Mi(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function ZA(r,i,o,u){for(;r.nodeType===1;){var m=o;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Us])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(p=r.getAttribute("rel"),p==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(p!==m.rel||r.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||r.getAttribute("title")!==(m.title==null?null:m.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(p=r.getAttribute("src"),(p!==(m.src==null?null:m.src)||r.getAttribute("type")!==(m.type==null?null:m.type)||r.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&p&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var p=m.name==null?null:""+m.name;if(m.type==="hidden"&&r.getAttribute("name")===p)return r}else return r;if(r=Ws(r.nextSibling),r===null)break}return null}function eN(r,i,o){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Ws(r.nextSibling),r===null))return null;return r}function W_(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=Ws(r.nextSibling),r===null))return null;return r}function Hp(r){return r.data==="$?"||r.data==="$~"}function $p(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function tN(r,i){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Ws(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var Fp=null;function X_(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(i===0)return Ws(r.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}r=r.nextSibling}return null}function J_(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return r;i--}else o!=="/$"&&o!=="/&"||i++}r=r.previousSibling}return null}function Z_(r,i,o){switch(i=qh(o),r){case"html":if(r=i.documentElement,!r)throw Error(s(452));return r;case"head":if(r=i.head,!r)throw Error(s(453));return r;case"body":if(r=i.body,!r)throw Error(s(454));return r;default:throw Error(s(451))}}function Nu(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);Mi(r)}var Xs=new Map,e2=new Set;function Hh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var vi=re.d;re.d={f:nN,r:sN,D:rN,C:iN,L:aN,m:oN,X:cN,S:lN,M:uN};function nN(){var r=vi.f(),i=Dh();return r||i}function sN(r){var i=Ln(r);i!==null&&i.tag===5&&i.type==="form"?yw(i):vi.r(r)}var Ll=typeof document>"u"?null:document;function t2(r,i,o){var u=Ll;if(u&&typeof i=="string"&&i){var m=ss(i);m='link[rel="'+r+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),e2.has(m)||(e2.add(m),r={rel:r,crossOrigin:o,href:i},u.querySelector(m)===null&&(i=u.createElement("link"),In(i,"link",r),Mt(i),u.head.appendChild(i)))}}function rN(r){vi.D(r),t2("dns-prefetch",r,null)}function iN(r,i){vi.C(r,i),t2("preconnect",r,i)}function aN(r,i,o){vi.L(r,i,o);var u=Ll;if(u&&r&&i){var m='link[rel="preload"][as="'+ss(i)+'"]';i==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+ss(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+ss(o.imageSizes)+'"]')):m+='[href="'+ss(r)+'"]';var p=m;switch(i){case"style":p=Vl(r);break;case"script":p=Ul(r)}Xs.has(p)||(r=_({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:r,as:i},o),Xs.set(p,r),u.querySelector(m)!==null||i==="style"&&u.querySelector(Cu(p))||i==="script"&&u.querySelector(ku(p))||(i=u.createElement("link"),In(i,"link",r),Mt(i),u.head.appendChild(i)))}}function oN(r,i){vi.m(r,i);var o=Ll;if(o&&r){var u=i&&typeof i.as=="string"?i.as:"script",m='link[rel="modulepreload"][as="'+ss(u)+'"][href="'+ss(r)+'"]',p=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Ul(r)}if(!Xs.has(p)&&(r=_({rel:"modulepreload",href:r},i),Xs.set(p,r),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(ku(p)))return}u=o.createElement("link"),In(u,"link",r),Mt(u),o.head.appendChild(u)}}}function lN(r,i,o){vi.S(r,i,o);var u=Ll;if(u&&r){var m=Bs(u).hoistableStyles,p=Vl(r);i=i||"default";var w=m.get(p);if(!w){var S={loading:0,preload:null};if(w=u.querySelector(Cu(p)))S.loading=5;else{r=_({rel:"stylesheet",href:r,"data-precedence":i},o),(o=Xs.get(p))&&Gp(r,o);var L=w=u.createElement("link");Mt(L),In(L,"link",r),L._p=new Promise(function(Y,ne){L.onload=Y,L.onerror=ne}),L.addEventListener("load",function(){S.loading|=1}),L.addEventListener("error",function(){S.loading|=2}),S.loading|=4,$h(w,i,u)}w={type:"stylesheet",instance:w,count:1,state:S},m.set(p,w)}}}function cN(r,i){vi.X(r,i);var o=Ll;if(o&&r){var u=Bs(o).hoistableScripts,m=Ul(r),p=u.get(m);p||(p=o.querySelector(ku(m)),p||(r=_({src:r,async:!0},i),(i=Xs.get(m))&&Kp(r,i),p=o.createElement("script"),Mt(p),In(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(m,p))}}function uN(r,i){vi.M(r,i);var o=Ll;if(o&&r){var u=Bs(o).hoistableScripts,m=Ul(r),p=u.get(m);p||(p=o.querySelector(ku(m)),p||(r=_({src:r,async:!0,type:"module"},i),(i=Xs.get(m))&&Kp(r,i),p=o.createElement("script"),Mt(p),In(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(m,p))}}function n2(r,i,o,u){var m=(m=Te.current)?Hh(m):null;if(!m)throw Error(s(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Vl(o.href),o=Bs(m).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Vl(o.href);var p=Bs(m).hoistableStyles,w=p.get(r);if(w||(m=m.ownerDocument||m,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(r,w),(p=m.querySelector(Cu(r)))&&!p._p&&(w.instance=p,w.state.loading=5),Xs.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Xs.set(r,o),p||dN(m,r,o,w.state))),i&&u===null)throw Error(s(528,""));return w}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Ul(o),o=Bs(m).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,r))}}function Vl(r){return'href="'+ss(r)+'"'}function Cu(r){return'link[rel="stylesheet"]['+r+"]"}function s2(r){return _({},r,{"data-precedence":r.precedence,precedence:null})}function dN(r,i,o,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),In(i,"link",o),Mt(i),r.head.appendChild(i))}function Ul(r){return'[src="'+ss(r)+'"]'}function ku(r){return"script[async]"+r}function r2(r,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+ss(o.href)+'"]');if(u)return i.instance=u,Mt(u),u;var m=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),Mt(u),In(u,"style",m),$h(u,o.precedence,r),i.instance=u;case"stylesheet":m=Vl(o.href);var p=r.querySelector(Cu(m));if(p)return i.state.loading|=4,i.instance=p,Mt(p),p;u=s2(o),(m=Xs.get(m))&&Gp(u,m),p=(r.ownerDocument||r).createElement("link"),Mt(p);var w=p;return w._p=new Promise(function(S,L){w.onload=S,w.onerror=L}),In(p,"link",u),i.state.loading|=4,$h(p,o.precedence,r),i.instance=p;case"script":return p=Ul(o.src),(m=r.querySelector(ku(p)))?(i.instance=m,Mt(m),m):(u=o,(m=Xs.get(p))&&(u=_({},o),Kp(u,m)),r=r.ownerDocument||r,m=r.createElement("script"),Mt(m),In(m,"link",u),r.head.appendChild(m),i.instance=m);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,$h(u,o.precedence,r));return i.instance}function $h(r,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,p=m,w=0;w<u.length;w++){var S=u[w];if(S.dataset.precedence===i)p=S;else if(p!==m)break}p?p.parentNode.insertBefore(r,p.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(r,i.firstChild))}function Gp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function Kp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var Fh=null;function i2(r,i,o){if(Fh===null){var u=new Map,m=Fh=new Map;m.set(o,u)}else m=Fh,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),m=0;m<o.length;m++){var p=o[m];if(!(p[Us]||p[Ht]||r==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var w=p.getAttribute(i)||"";w=r+w;var S=u.get(w);S?S.push(p):u.set(w,[p])}}return u}function a2(r,i,o){r=r.ownerDocument||r,r.head.insertBefore(o,i==="title"?r.querySelector("head > title"):null)}function hN(r,i,o){if(o===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function o2(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function fN(r,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=Vl(u.href),p=i.querySelector(Cu(m));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=Gh.bind(r),i.then(r,r)),o.state.loading|=4,o.instance=p,Mt(p);return}p=i.ownerDocument||i,u=s2(u),(m=Xs.get(m))&&Gp(u,m),p=p.createElement("link"),Mt(p);var w=p;w._p=new Promise(function(S,L){w.onload=S,w.onerror=L}),In(p,"link",u),o.instance=p}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=Gh.bind(r),i.addEventListener("load",o),i.addEventListener("error",o))}}var Qp=0;function mN(r,i){return r.stylesheets&&r.count===0&&Qh(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var u=setTimeout(function(){if(r.stylesheets&&Qh(r,r.stylesheets),r.unsuspend){var p=r.unsuspend;r.unsuspend=null,p()}},6e4+i);0<r.imgBytes&&Qp===0&&(Qp=62500*QA());var m=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Qh(r,r.stylesheets),r.unsuspend)){var p=r.unsuspend;r.unsuspend=null,p()}},(r.imgBytes>Qp?50:800)+i);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function Gh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qh(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Kh=null;function Qh(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Kh=new Map,i.forEach(gN,r),Kh=null,Gh.call(r))}function gN(r,i){if(!(i.state.loading&4)){var o=Kh.get(r);if(o)var u=o.get(null);else{o=new Map,Kh.set(r,o);for(var m=r.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<m.length;p++){var w=m[p];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(o.set(w.dataset.precedence,w),u=w)}u&&o.set(null,u)}m=i.instance,w=m.getAttribute("data-precedence"),p=o.get(w)||u,p===u&&o.set(null,m),o.set(w,m),this.count++,u=Gh.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),p?p.parentNode.insertBefore(m,p.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(m,r.firstChild)),i.state.loading|=4}}var Ru={$$typeof:F,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function pN(r,i,o,u,m,p,w,S,L){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qn(0),this.hiddenUpdates=Qn(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=p,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function l2(r,i,o,u,m,p,w,S,L,Y,ne,ce){return r=new pN(r,i,o,w,L,Y,ne,ce,S),i=1,p===!0&&(i|=24),p=_s(3,null,null,i),r.current=p,p.stateNode=r,i=Ng(),i.refCount++,r.pooledCache=i,i.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:i},Ig(p),r}function c2(r){return r?(r=pl,r):pl}function u2(r,i,o,u,m,p){m=c2(m),u.context===null?u.context=m:u.pendingContext=m,u=Ji(i),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Zi(r,u,i),o!==null&&(cs(o,r,i),lu(o,r,i))}function d2(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function Yp(r,i){d2(r,i),(r=r.alternate)&&d2(r,i)}function h2(r){if(r.tag===13||r.tag===31){var i=co(r,67108864);i!==null&&cs(i,r,67108864),Yp(r,67108864)}}function f2(r){if(r.tag===13||r.tag===31){var i=As();i=kr(i);var o=co(r,i);o!==null&&cs(o,r,i),Yp(r,i)}}var Yh=!0;function yN(r,i,o,u){var m=O.T;O.T=null;var p=re.p;try{re.p=2,Wp(r,i,o,u)}finally{re.p=p,O.T=m}}function vN(r,i,o,u){var m=O.T;O.T=null;var p=re.p;try{re.p=8,Wp(r,i,o,u)}finally{re.p=p,O.T=m}}function Wp(r,i,o,u){if(Yh){var m=Xp(u);if(m===null)Mp(r,i,u,Wh,o),g2(r,u);else if(wN(m,r,i,o,u))u.stopPropagation();else if(g2(r,u),i&4&&-1<bN.indexOf(r)){for(;m!==null;){var p=Ln(m);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var w=ns(p.pendingLanes);if(w!==0){var S=p;for(S.pendingLanes|=2,S.entangledLanes|=2;w;){var L=1<<31-It(w);S.entanglements[1]|=L,w&=~L}Br(p),(ut&6)===0&&(jh=An()+500,Tu(0))}}break;case 31:case 13:S=co(p,2),S!==null&&cs(S,p,2),Dh(),Yp(p,2)}if(p=Xp(u),p===null&&Mp(r,i,u,Wh,o),p===m)break;m=p}m!==null&&u.stopPropagation()}else Mp(r,i,u,null,o)}}function Xp(r){return r=zs(r),Jp(r)}var Wh=null;function Jp(r){if(Wh=null,r=bs(r),r!==null){var i=l(r);if(i===null)r=null;else{var o=i.tag;if(o===13){if(r=c(i),r!==null)return r;r=null}else if(o===31){if(r=f(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return Wh=r,null}function m2(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ls()){case tr:return 2;case Ga:return 8;case nr:case el:return 32;case Ka:return 268435456;default:return 32}default:return 32}}var Zp=!1,ua=null,da=null,ha=null,Iu=new Map,ju=new Map,fa=[],bN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function g2(r,i){switch(r){case"focusin":case"focusout":ua=null;break;case"dragenter":case"dragleave":da=null;break;case"mouseover":case"mouseout":ha=null;break;case"pointerover":case"pointerout":Iu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ju.delete(i.pointerId)}}function Ou(r,i,o,u,m,p){return r===null||r.nativeEvent!==p?(r={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[m]},i!==null&&(i=Ln(i),i!==null&&h2(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),r)}function wN(r,i,o,u,m){switch(i){case"focusin":return ua=Ou(ua,r,i,o,u,m),!0;case"dragenter":return da=Ou(da,r,i,o,u,m),!0;case"mouseover":return ha=Ou(ha,r,i,o,u,m),!0;case"pointerover":var p=m.pointerId;return Iu.set(p,Ou(Iu.get(p)||null,r,i,o,u,m)),!0;case"gotpointercapture":return p=m.pointerId,ju.set(p,Ou(ju.get(p)||null,r,i,o,u,m)),!0}return!1}function p2(r){var i=bs(r.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){r.blockedOn=i,ys(r.priority,function(){f2(o)});return}}else if(i===31){if(i=f(o),i!==null){r.blockedOn=i,ys(r.priority,function(){f2(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Xh(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=Xp(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Gc=u,o.target.dispatchEvent(u),Gc=null}else return i=Ln(o),i!==null&&h2(i),r.blockedOn=o,!1;i.shift()}return!0}function y2(r,i,o){Xh(r)&&o.delete(i)}function _N(){Zp=!1,ua!==null&&Xh(ua)&&(ua=null),da!==null&&Xh(da)&&(da=null),ha!==null&&Xh(ha)&&(ha=null),Iu.forEach(y2),ju.forEach(y2)}function Jh(r,i){r.blockedOn===i&&(r.blockedOn=null,Zp||(Zp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,_N)))}var Zh=null;function v2(r){Zh!==r&&(Zh=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Zh===r&&(Zh=null);for(var i=0;i<r.length;i+=3){var o=r[i],u=r[i+1],m=r[i+2];if(typeof u!="function"){if(Jp(u||o)===null)continue;break}var p=Ln(o);p!==null&&(r.splice(i,3),i-=3,Xg(p,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function Bl(r){function i(L){return Jh(L,r)}ua!==null&&Jh(ua,r),da!==null&&Jh(da,r),ha!==null&&Jh(ha,r),Iu.forEach(i),ju.forEach(i);for(var o=0;o<fa.length;o++){var u=fa[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<fa.length&&(o=fa[0],o.blockedOn===null);)p2(o),o.blockedOn===null&&fa.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],p=o[u+1],w=m[nn]||null;if(typeof p=="function")w||v2(o);else if(w){var S=null;if(p&&p.hasAttribute("formAction")){if(m=p,w=p[nn]||null)S=w.formAction;else if(Jp(m)!==null)continue}else S=w.action;typeof S=="function"?o[u+1]=S:(o.splice(u,3),u-=3),v2(o)}}}function b2(){function r(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(w){return m=w})},focusReset:"manual",scroll:"manual"})}function i(){m!==null&&(m(),m=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),m!==null&&(m(),m=null)}}}function e0(r){this._internalRoot=r}ef.prototype.render=e0.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(s(409));var o=i.current,u=As();u2(o,u,r,i,null,null)},ef.prototype.unmount=e0.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;u2(r.current,2,null,r,null,null),Dh(),i[Vs]=null}};function ef(r){this._internalRoot=r}ef.prototype.unstable_scheduleHydration=function(r){if(r){var i=tl();r={blockedOn:null,target:r,priority:i};for(var o=0;o<fa.length&&i!==0&&i<fa[o].priority;o++);fa.splice(o,0,r),o===0&&p2(r)}};var w2=e.version;if(w2!=="19.2.0")throw Error(s(527,w2,"19.2.0"));re.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=y(i),r=r!==null?v(r):null,r=r===null?null:r.stateNode,r};var xN={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tf.isDisabled&&tf.supportsFiber)try{ms=tf.inject(xN),Kt=tf}catch{}}return Pu.createRoot=function(r,i){if(!a(r))throw Error(s(299));var o=!1,u="",m=Nw,p=Cw,w=kw;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError)),i=l2(r,1,!1,null,null,o,u,null,m,p,w,b2),r[Vs]=i.current,Pp(r),new e0(i)},Pu.hydrateRoot=function(r,i,o){if(!a(r))throw Error(s(299));var u=!1,m="",p=Nw,w=Cw,S=kw,L=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.formState!==void 0&&(L=o.formState)),i=l2(r,1,!0,i,o??null,u,m,L,p,w,S,b2),i.context=c2(null),o=i.current,u=As(),u=kr(u),m=Ji(u),m.callback=null,Zi(o,m,u),o=u,i.current.lanes=o,Ar(i,o),Br(i),r[Vs]=i.current,Pp(r),new ef(i)},Pu.version="19.2.0",Pu}var R2;function DN(){if(R2)return s0.exports;R2=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),s0.exports=ON(),s0.exports}var PN=DN();const MN=Cy(PN),LN="modulepreload",VN=function(n){return"/ontap/"+n},I2={},zn=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){let c=function(y){return Promise.all(y.map(v=>Promise.resolve(v).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),g=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));a=c(t.map(y=>{if(y=VN(y),y in I2)return;I2[y]=!0;const v=y.endsWith(".css"),_=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${_}`))return;const E=document.createElement("link");if(E.rel=v?"stylesheet":LN,v||(E.as="script"),E.crossOrigin="",E.href=y,g&&E.setAttribute("nonce",g),document.head.appendChild(E),v)return new Promise((T,N)=>{E.addEventListener("load",T),E.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${y}`)))})}))}function l(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return a.then(c=>{for(const f of c||[])f.status==="rejected"&&l(f.reason);return e().catch(l)})},cE=G.createContext(void 0),uE=({children:n})=>{const[e,t]=G.useState("light");G.useEffect(()=>{let l=localStorage.getItem("theme");(!l||l==="noel")&&(l="light",localStorage.setItem("theme","light")),t(l),document.documentElement.setAttribute("data-theme",l)},[]);const s=a=>{t(a),document.documentElement.setAttribute("data-theme",a),localStorage.setItem("theme",a)};return d.jsx(cE.Provider,{value:{theme:e,setTheme:s},children:n})},Kn=()=>{const n=G.useContext(cE);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},UN=n=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:[d.jsx("path",{d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm.25 4.5a.75.75 0 00-1.5 0v5.337a2.25 2.25 0 00-1.5 2.063v.75a.75.75 0 001.5 0v-.75a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 001.5 0v-.75a2.25 2.25 0 00-1.5-2.063V6.75z"}),d.jsx("path",{d:"M6.163 15.25a.75.75 0 011.06-1.06l1.25 1.25a.75.75 0 01-1.06 1.06l-1.25-1.25zm10.617 0a.75.75 0 011.06 1.06l-1.25 1.25a.75.75 0 01-1.06 1.06l1.25-1.25z"})]}),Ry=n=>{const{theme:e}=Kn();return e==="noel"?d.jsx("img",{src:"/assets/img/ball.png",alt:"Check",...n,className:`${n.className} object-contain`}):d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:d.jsx("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z",clipRule:"evenodd"})})},Iy=n=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:d.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z",clipRule:"evenodd"})}),Ac=n=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:d.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-4.28 9.22a.75.75 0 000 1.06l3 3a.75.75 0 101.06-1.06L10.81 12l1.47-1.47a.75.75 0 10-1.06-1.06l-3 3z",clipRule:"evenodd"})}),BN=n=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:d.jsx("path",{fillRule:"evenodd",d:"M16.28 11.47a.75.75 0 010 1.06l-3 3a.75.75 0 01-1.06-1.06L14.44 12l-2.22-2.22a.75.75 0 011.06-1.06l3 3z",clipRule:"evenodd"})}),zN=n=>{const{theme:e}=Kn();return e==="tri-an"?d.jsx("img",{src:"https://i.postimg.cc/J0JwWn5p/Mattahan-Buuf-One-of-those-ugly-pens-you-just-find-lying-around-128.png",alt:"Pen Icon",...n}):e==="noel"?d.jsx("img",{src:"/assets/img/celebrate.png",alt:"Santa",...n,className:`${n.className} object-contain`}):d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:[d.jsx("path",{d:"M12.75 12.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"}),d.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM9 12a3 3 0 116 0 3 3 0 01-6 0zm-2.121 4.212a.75.75 0 01.688-1.228 5.253 5.253 0 018.866 0 .75.75 0 11-.688 1.228 3.753 3.753 0 00-7.49 0z",clipRule:"evenodd"})]})},qN=n=>d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:d.jsx("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-4.5a.75.75 0 000 1.5h6a.75.75 0 00.75-.75V4.5a.75.75 0 00-1.5 0v2.253a9 9 0 00-15.06 4.042.75.75 0 00.75.75h1.5a.75.75 0 00.75-.75zM19.245 13.941a7.5 7.5 0 01-12.548 3.364l-1.903-1.903h4.5a.75.75 0 000-1.5h-6a.75.75 0 00-.75.75v6a.75.75 0 001.5 0v-2.253a9 9 0 0015.06-4.042.75.75 0 00-.75-.75h-1.5a.75.75 0 00-.75.75z",clipRule:"evenodd"})}),fc=n=>{const{theme:e}=Kn();return e==="tri-an"?d.jsx("img",{src:"https://i.postimg.cc/xjbVmxDW/Oxygen-Icons-org-Oxygen-Categories-applications-education-university-256.png",alt:"Graduation Cap Icon",...n}):e==="noel"?d.jsx("img",{src:"/assets/img/home.png",alt:"Home Icon",...n,className:`${n.className} object-contain`}):d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:[d.jsx("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm0 2a8 8 0 100 16 8 8 0 000-16zm0 3a5 5 0 110 10 5 5 0 010-10zm0 2a3 3 0 100 6 3 3 0 000-6z"}),d.jsx("path",{d:"M12 3v2m0 14v2M3 12h2m14 0h-2m-8-8L6.414 5.414m11.172 11.172L16.243 15.12m0-9.706l-1.121 1.121M5.414 17.586L6.536 16.464"})]})},D0=n=>{const{theme:e}=Kn();return e==="tri-an"?d.jsx("img",{src:"https://i.postimg.cc/66GxZjxN/school-114359.png",alt:"School Bag Icon",...n}):e==="noel"?d.jsx("img",{src:"/assets/img/bell.png",alt:"Bell Icon",...n,className:`${n.className} object-contain`}):d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:[d.jsx("path",{d:"M12 2a1 1 0 011 1v7.683a4.502 4.502 0 012.722 2.054 3 3 0 01-1.33 3.963 3.003 3.003 0 01-4.783-3.963A4.502 4.502 0 0111 10.683V3a1 1 0 011-1zm-3.5 10a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm7 0a1.5 1.5 0 100 3 1.5 1.5 0 000-3z"}),d.jsx("path",{d:"M12 22a8.956 8.956 0 01-6-2.583V18h12v1.417A8.956 8.956 0 0112 22z"})]})},HN=n=>{const{theme:e}=Kn();return e==="tri-an"?d.jsx("img",{src:"https://i.postimg.cc/h47RmyWN/Mattahan-Buuf-They-reply-technosorcery-128.png",alt:"Wrench Icon",...n}):e==="noel"?d.jsx("img",{src:"/assets/img/gift4.png",alt:"Gift Icon",...n,className:`${n.className} object-contain`}):d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:[d.jsx("path",{fillRule:"evenodd",d:"M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.981A10.503 10.503 0 0112 21a10.5 10.5 0 01-10.5-10.5c0-4.368 2.667-8.162 6.43-9.742a.75.75 0 01.819.162z",clipRule:"evenodd"}),d.jsx("path",{d:"M12.75 9a.75.75 0 00-1.5 0v2.25H9a.75.75 0 000 1.5h2.25V15a.75.75 0 001.5 0v-2.25H15a.75.75 0 000-1.5h-2.25V9z"})]})},$N=n=>{const{theme:e}=Kn();return e==="tri-an"?d.jsx("img",{src:"https://i.postimg.cc/zvWm1BFk/book-512x512-35977.png",alt:"Book Icon",...n}):e==="noel"?d.jsx("img",{src:"/assets/img/hat.png",alt:"Hat Icon",...n,className:`${n.className} object-contain`}):d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:[d.jsx("path",{d:"M12 2L3 8v2h18V8l-9-6zm-1.5 10a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm3 0a1.5 1.5 0 100 3 1.5 1.5 0 000-3z"}),d.jsx("path",{d:"M4 14v6h16v-6H4zm6 2h4v2h-4v-2z"})]})},j2=n=>{const{theme:e}=Kn();return e==="tri-an"?d.jsx("img",{src:"https://i.postimg.cc/2yvpf67d/Mattahan-Buuf-A-Proper-Journal-Icon-128.png",alt:"Journal Icon",...n}):e==="noel"?d.jsx("img",{src:"/assets/img/gift5.png",alt:"Gift Icon",...n,className:`${n.className} object-contain`}):d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:[d.jsx("path",{fillRule:"evenodd",d:"M12 2a10 10 0 100 20 10 10 0 000-20zM4 12a8 8 0 1116 0 8 8 0 01-16 0z",clipRule:"evenodd"}),d.jsx("path",{d:"M16.95 7.05l-1.414 1.414-2.122-2.122 1.414-1.414 2.122 2.122zm-9.9 9.9l1.414-1.414 2.122 2.122-1.414 1.414-2.122-2.122zm9.9 0l-1.414-1.414-2.122 2.122 1.414 1.414 2.122-2.122zm-9.9-9.9l1.414 1.414-2.122 2.122L5.636 9.172l2.122-2.122z"})]})},O2=n=>{const{theme:e}=Kn();return e==="tri-an"?d.jsx("img",{src:"https://i.postimg.cc/2yvpf67d/Mattahan-Buuf-A-Proper-Journal-Icon-128.png",alt:"Journal Icon",...n}):e==="noel"?d.jsx("img",{src:"/assets/img/star-gold.png",alt:"Star Icon",...n,className:`${n.className} object-contain`}):d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:[d.jsx("path",{fillRule:"evenodd",d:"M8.25 2.25A.75.75 0 019 3v.257a3.75 3.75 0 013 0V3a.75.75 0 011.5 0v.257a3.75 3.75 0 013 0V3a.75.75 0 01.75.75h-.008v.016c.361.32.622.754.74 1.232A23.953 23.953 0 0112 6c-2.305 0-4.52-.42-6.502-1.195a2.5 2.5 0 01.74-1.232H6a.75.75 0 01.75-.75h1.5zm-2.784 4.542a25.474 25.474 0 0013.068 0 .75.75 0 01.443.923 23.92 23.92 0 01-13.954 0 .75.75 0 01.443-.923zM8.25 10.5a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5a.75.75 0 01.75-.75zm3.75 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5a.75.75 0 01.75-.75zm3.75 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5a.75.75 0 01.75-.75z",clipRule:"evenodd"}),d.jsx("path",{d:"M4.145 9.421a.75.75 0 01.558-.923 25.483 25.483 0 0114.594 0 .75.75 0 01.558.923l-.36.99a25.01 25.01 0 01-14.832 0l-.36-.99z"}),d.jsx("path",{fillRule:"evenodd",d:"M3 15.75A2.25 2.25 0 015.25 13.5h13.5A2.25 2.25 0 0121 15.75v3A2.25 2.25 0 0118.75 21H5.25A2.25 2.25 0 013 18.75v-3z",clipRule:"evenodd"})]})},dE=n=>{const{theme:e}=Kn();return e==="tri-an"?d.jsx("img",{src:"https://i.postimg.cc/xjbVmxDW/Oxygen-Icons-org-Oxygen-Categories-applications-education-university-256.png",alt:"Graduation Cap Icon",...n}):e==="noel"?d.jsx("img",{src:"/assets/img/star-gold.png",alt:"Gold Star Icon",...n,className:`${n.className} object-contain`}):d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:[d.jsx("path",{fillRule:"evenodd",d:"M11.25 4.5A.75.75 0 0112 5.25v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0111.25 4.5zM12.75 6a.75.75 0 00-1.5 0v1.5a.75.75 0 001.5 0V6zM11.25 7.5A.75.75 0 0112 8.25v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0111.25 7.5zM12.75 9a.75.75 0 00-1.5 0v1.5a.75.75 0 001.5 0V9z",clipRule:"evenodd"}),d.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM6.262 6.072a8.25 8.25 0 1011.476 11.476A8.25 8.25 0 006.262 6.072zM12 18.75a.75.75 0 01-.75-.75V15a.75.75 0 011.5 0v3a.75.75 0 01-.75.75z",clipRule:"evenodd"}),d.jsx("path",{d:"M14.25 12a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})]})},jy=n=>{const{theme:e}=Kn();return e==="tri-an"?d.jsx("img",{src:"https://i.postimg.cc/FFJXSWXv/study-learning-knowledge-education-book-notebook-icon-256768.png",alt:"Book and Glasses Icon",...n}):e==="noel"?d.jsx("img",{src:"/assets/img/gift1.png",alt:"Gift Icon",...n,className:`${n.className} object-contain`}):d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:[d.jsx("path",{d:"M11.25 4.533A9.708 9.708 0 006 3.75c-1.052 0-2.062.18-3 .512V17.25a8.987 8.987 0 013.75-.82V9.75a.75.75 0 011.5 0v7.5a.75.75 0 01-1.5 0V15a6.726 6.726 0 00-3-.585V18.75C3.393 18.932 3.69 19.1 4 19.29c2.023.784 4.18 1.093 6.364 1.294a.75.75 0 00.872-.725V4.534z"}),d.jsx("path",{d:"M12.75 4.533V19.86a.75.75 0 00.872.725 49.33 49.33 0 006.364-1.294c.31-.19.607-.358.914-.54V5.25c-1.084-.308-2.18-.46-3.25-.46-1.637 0-3.235.32-4.75.922V4.534z"})]})},FN=n=>{const{theme:e}=Kn();return e==="tri-an"?d.jsx("img",{src:"https://i.postimg.cc/kG8rd4vv/Limpa-Curriculum-Vitae-Education-256.png",alt:"Blackboard Icon",...n}):e==="noel"?d.jsx("img",{src:"/assets/img/gift2.png",alt:"Gift Icon",...n,className:`${n.className} object-contain`}):d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:d.jsx("path",{fillRule:"evenodd",d:"M2.25 6a3 3 0 013-3h13.5a3 3 0 013 3v12a3 3 0 01-3-3H5.25a3 3 0 01-3-3V6zm3.75 3a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H7.5a.75.75 0 01-.75-.75zM7.5 12a.75.75 0 000 1.5h6a.75.75 0 000-1.5h-6z",clipRule:"evenodd"})})},GN=[{name:"light",label:"Sng",color:"bg-white"},{name:"dark",label:"Ti",color:"bg-slate-900"},{name:"noel",label:"Ging Sinh",color:"bg-[#8B0000]"},{name:"modern",label:"Hin i",color:"bg-indigo-600"},{name:"classic",label:"C in",color:"bg-[#6F6049]"},{name:"sunrise",label:"Bnh Minh",color:"bg-orange-500"},{name:"tri-an",label:"Tri n",color:"bg-red-400"}],KN=()=>{const[n,e]=G.useState(!1),{theme:t,setTheme:s}=Kn(),a=l=>{s(l),e(!1)};return d.jsxs("div",{className:"relative",children:[n&&d.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-40 rounded-lg border border-border bg-card p-2 shadow-2xl flex flex-col gap-1 animate-slide-in-right",children:GN.map(l=>d.jsxs("button",{onClick:()=>a(l.name),className:`w-full text-left px-3 py-2 text-sm font-semibold rounded-md flex items-center gap-3 transition-colors ${t===l.name?"bg-primary/20 text-primary":"text-card-foreground hover:bg-secondary"}`,children:[d.jsx("span",{className:`w-4 h-4 rounded-full ${l.color} border border-white/20`}),l.label]},l.name))}),d.jsx("button",{onClick:()=>e(!n),className:"flex h-10 w-10 items-center justify-center rounded-lg bg-secondary text-secondary-foreground shadow-sm transition-colors hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring","aria-label":"Change theme",children:d.jsx(UN,{className:"h-6 w-6"})})]})},QN=()=>{const n=["gift1.png","bell.png","star-gold.png","ball.png","gift2.png","gift3.png","gift4.png","gift5.png"],{theme:e}=Kn();return e!=="noel"?null:d.jsxs(d.Fragment,{children:[d.jsx("style",{dangerouslySetInnerHTML:{__html:`
        /* === PHN 5: HIU NG TUYT & QU RI === */
        .snowflakes {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 9999;
        }
        
        .snowflake {
            color: #fff;
            font-size: 1.2em;
            font-family: Arial, sans-serif;
            text-shadow: 0 0 3px rgba(255,255,255,0.8); /* Tuyt pht sng nh */
            position: fixed;
            top: -10%;
            z-index: 9999;
            user-select: none;
            cursor: default;
            animation-name: snowflakes-fall, snowflakes-shake;
            animation-timing-function: linear, ease-in-out;
            animation-iteration-count: infinite, infinite;
            animation-play-state: running, running;
        }

        .snowflake-img img {
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.3));
            width: 30px; 
            height: auto;
            opacity: 0.9;
        }

        @keyframes snowflakes-fall {
            0% { top: -10%; }
            100% { top: 100%; }
        }
        @keyframes snowflakes-shake {
            0% { transform: translateX(0px) rotate(0deg); }
            50% { transform: translateX(80px) rotate(180deg); }
            100% { transform: translateX(0px) rotate(360deg); }
        }

        /* Cu hnh ri ngu nhin */
        .snowflake:nth-of-type(1) { left: 1%; animation-duration: 12s, 4s; animation-delay: 0s, 0s; }
        .snowflake:nth-of-type(2) { left: 5%; animation-duration: 15s, 6s; animation-delay: 1s, 1s; }
        .snowflake:nth-of-type(3) { left: 10%; animation-duration: 10s, 3s; animation-delay: 2s, 0.5s; }
        .snowflake:nth-of-type(4) { left: 15%; animation-duration: 18s, 5s; animation-delay: 4s, 2s; }
        .snowflake:nth-of-type(5) { left: 20%; animation-duration: 11s, 4s; animation-delay: 2s, 2s; }
        .snowflake:nth-of-type(6) { left: 25%; animation-duration: 14s, 7s; animation-delay: 6s, 3s; }
        .snowflake:nth-of-type(7) { left: 30%; animation-duration: 16s, 5s; animation-delay: 3s, 2s; }
        .snowflake:nth-of-type(8) { left: 35%; animation-duration: 13s, 4s; animation-delay: 1s, 1s; }
        .snowflake:nth-of-type(9) { left: 40%; animation-duration: 17s, 6s; animation-delay: 0s, 0s; }
        .snowflake:nth-of-type(10) { left: 45%; animation-duration: 9s, 3s; animation-delay: 5s, 1.5s; }
        .snowflake:nth-of-type(11) { left: 50%; animation-duration: 14s, 5s; animation-delay: 2s, 3s; }
        .snowflake:nth-of-type(12) { left: 55%; animation-duration: 11s, 4s; animation-delay: 4s, 1s; }
        .snowflake:nth-of-type(13) { left: 60%; animation-duration: 19s, 7s; animation-delay: 1s, 2s; }
        .snowflake:nth-of-type(14) { left: 65%; animation-duration: 12s, 3s; animation-delay: 3s, 0s; }
        .snowflake:nth-of-type(15) { left: 70%; animation-duration: 15s, 6s; animation-delay: 5s, 4s; }
        .snowflake:nth-of-type(16) { left: 75%; animation-duration: 10s, 4s; animation-delay: 0s, 2s; }
        .snowflake:nth-of-type(17) { left: 80%; animation-duration: 16s, 5s; animation-delay: 2s, 1s; }
        .snowflake:nth-of-type(18) { left: 85%; animation-duration: 13s, 4s; animation-delay: 4s, 3s; }
        .snowflake:nth-of-type(19) { left: 90%; animation-duration: 18s, 6s; animation-delay: 1s, 2s; }
        .snowflake:nth-of-type(20) { left: 95%; animation-duration: 11s, 3s; animation-delay: 3s, 0s; }
        
        .snowflake:nth-of-type(21) { left: 2%; animation-duration: 13s, 5s; animation-delay: 5s, 1s; }
        .snowflake:nth-of-type(22) { left: 8%; animation-duration: 10s, 3s; animation-delay: 2s, 4s; }
        .snowflake:nth-of-type(23) { left: 12%; animation-duration: 16s, 6s; animation-delay: 1s, 2s; }
        .snowflake:nth-of-type(24) { left: 18%; animation-duration: 12s, 4s; animation-delay: 6s, 0s; }
        .snowflake:nth-of-type(25) { left: 22%; animation-duration: 14s, 5s; animation-delay: 0s, 3s; }
        .snowflake:nth-of-type(26) { left: 28%; animation-duration: 11s, 3s; animation-delay: 4s, 2s; }
        .snowflake:nth-of-type(27) { left: 32%; animation-duration: 19s, 7s; animation-delay: 2s, 1s; }
        .snowflake:nth-of-type(28) { left: 38%; animation-duration: 15s, 6s; animation-delay: 5s, 5s; }
        .snowflake:nth-of-type(29) { left: 42%; animation-duration: 12s, 4s; animation-delay: 1s, 0s; }
        .snowflake:nth-of-type(30) { left: 48%; animation-duration: 17s, 5s; animation-delay: 3s, 2s; }
        .snowflake:nth-of-type(31) { left: 52%; animation-duration: 9s, 3s; animation-delay: 0s, 3s; }
        .snowflake:nth-of-type(32) { left: 58%; animation-duration: 14s, 6s; animation-delay: 4s, 1s; }
        .snowflake:nth-of-type(33) { left: 62%; animation-duration: 11s, 4s; animation-delay: 2s, 4s; }
        .snowflake:nth-of-type(34) { left: 68%; animation-duration: 16s, 5s; animation-delay: 6s, 0s; }
        .snowflake:nth-of-type(35) { left: 72%; animation-duration: 13s, 3s; animation-delay: 1s, 2s; }
        .snowflake:nth-of-type(36) { left: 78%; animation-duration: 18s, 7s; animation-delay: 5s, 1s; }
        .snowflake:nth-of-type(37) { left: 82%; animation-duration: 10s, 4s; animation-delay: 2s, 3s; }
        .snowflake:nth-of-type(38) { left: 88%; animation-duration: 15s, 6s; animation-delay: 4s, 0s; }
        .snowflake:nth-of-type(39) { left: 92%; animation-duration: 12s, 5s; animation-delay: 0s, 2s; }
        .snowflake:nth-of-type(40) { left: 98%; animation-duration: 17s, 4s; animation-delay: 3s, 5s; }

        .snowflake:nth-child(odd) { animation-direction: normal; }
        .snowflake:nth-child(even) { animation-direction: alternate; }

        @media (max-width: 768px) {
            .snowflake { font-size: 1em; }
            .snowflake-img img { width: 20px; }
        }
      `}}),d.jsxs("div",{className:"snowflakes","aria-hidden":"true",children:[Array.from({length:100}).map((t,s)=>d.jsxs("div",{className:"snowflake",children:[["","",""][s%3]," "]},`snow-${s}`)),Array.from({length:8}).map((t,s)=>{const a=n[s%n.length];return d.jsx("div",{className:"snowflake snowflake-img",children:d.jsx("img",{src:`/assets/img/${a}`,alt:"",style:{width:"25px",height:"auto"}})},`img-${s}`)})]})]})},YN=()=>{};var D2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let a=n.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},WN=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const a=n[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],f=n[t++],g=((a&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},fE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,f=c?n[a+1]:0,g=a+2<n.length,y=g?n[a+2]:0,v=l>>2,_=(l&3)<<4|f>>4;let E=(f&15)<<2|y>>6,T=y&63;g||(T=64,c||(E=64)),s.push(t[v],t[_],t[E],t[T])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(hE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):WN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],f=a<n.length?t[n.charAt(a)]:0;++a;const y=a<n.length?t[n.charAt(a)]:64;++a;const _=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||f==null||y==null||_==null)throw new XN;const E=l<<2|f>>4;if(s.push(E),y!==64){const T=f<<4&240|y>>2;if(s.push(T),_!==64){const N=y<<6&192|_;s.push(N)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class XN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JN=function(n){const e=hE(n);return fE.encodeByteArray(e,!0)},jf=function(n){return JN(n).replace(/\./g,"")},mE=function(n){try{return fE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3=()=>ZN().__FIREBASE_DEFAULTS__,t3=()=>{if(typeof process>"u"||typeof D2>"u")return;const n=D2.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},n3=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&mE(n[1]);return e&&JSON.parse(e)},bm=()=>{try{return YN()||e3()||t3()||n3()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},gE=n=>{var e,t;return(t=(e=bm())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},pE=n=>{const e=gE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},yE=()=>{var n;return(n=bm())==null?void 0:n.config},vE=n=>{var e;return(e=bm())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s3=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Oy(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[jf(JSON.stringify(t)),jf(JSON.stringify(c)),""].join(".")}const qu={};function r3(){const n={prod:[],emulator:[]};for(const e of Object.keys(qu))qu[e]?n.emulator.push(e):n.prod.push(e);return n}function i3(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let P2=!1;function Dy(n,e){if(typeof window>"u"||typeof document>"u"||!Ho(window.location.host)||qu[n]===e||qu[n]||P2)return;qu[n]=e;function t(E){return`__firebase__banner__${E}`}const s="__firebase__banner",l=r3().prod.length>0;function c(){const E=document.getElementById(s);E&&E.remove()}function f(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function g(E,T){E.setAttribute("width","24"),E.setAttribute("id",T),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function y(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{P2=!0,c()},E}function v(E,T){E.setAttribute("id",T),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function _(){const E=i3(s),T=t("text"),N=document.getElementById(T)||document.createElement("span"),P=t("learnmore"),C=document.getElementById(P)||document.createElement("a"),M=t("preprendIcon"),H=document.getElementById(M)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const F=E.element;f(F),v(C,P);const te=y();g(H,M),F.append(H,N,C,te),document.body.appendChild(F)}l?(N.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function a3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fn())}function o3(){var e;const n=(e=bm())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function l3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function c3(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function u3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function d3(){const n=Fn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function h3(){return!o3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function f3(){try{return typeof indexedDB=="object"}catch{return!1}}function m3(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3="FirebaseError";class Jr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=g3,Object.setPrototypeOf(this,Jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yd.prototype.create)}}class yd{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?p3(l,s):"Error",f=`${this.serviceName}: ${c} (${a}).`;return new Jr(a,f,s)}}function p3(n,e){return n.replace(y3,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const y3=/\{\$([^}]+)}/g;function v3(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ai(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const l=n[a],c=e[a];if(M2(l)&&M2(c)){if(!Ai(l,c))return!1}else if(l!==c)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function M2(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Mu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,l]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Lu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function b3(n,e){const t=new w3(n,e);return t.subscribe.bind(t)}class w3{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");_3(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=o0),a.error===void 0&&(a.error=o0),a.complete===void 0&&(a.complete=o0);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _3(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function o0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(n){return n&&n._delegate?n._delegate:n}class Ra{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new s3;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(T3(e))try{this.getOrInitializeService({instanceIdentifier:Ao})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=Ao){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ao){return this.instances.has(e)}getOptions(e=Ao){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&c.resolve(a)}return a}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:E3(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ao){return this.component?this.component.multipleInstances?e:Ao:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function E3(n){return n===Ao?void 0:n}function T3(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new x3(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Je||(Je={}));const A3={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},N3=Je.INFO,C3={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},k3=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),a=C3[e];if(a)console[a](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Py{constructor(e){this.name=e,this._logLevel=N3,this._logHandler=k3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?A3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const R3=(n,e)=>e.some(t=>n instanceof t);let L2,V2;function I3(){return L2||(L2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function j3(){return V2||(V2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wE=new WeakMap,P0=new WeakMap,_E=new WeakMap,l0=new WeakMap,My=new WeakMap;function O3(n){const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Sa(n.result)),a()},c=()=>{s(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&wE.set(t,n)}).catch(()=>{}),My.set(e,n),e}function D3(n){if(P0.has(n))return;const e=new Promise((t,s)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});P0.set(n,e)}let M0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return P0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||_E.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Sa(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function P3(n){M0=n(M0)}function M3(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(c0(this),e,...t);return _E.set(s,e.sort?e.sort():[e]),Sa(s)}:j3().includes(n)?function(...e){return n.apply(c0(this),e),Sa(wE.get(this))}:function(...e){return Sa(n.apply(c0(this),e))}}function L3(n){return typeof n=="function"?M3(n):(n instanceof IDBTransaction&&D3(n),R3(n,I3())?new Proxy(n,M0):n)}function Sa(n){if(n instanceof IDBRequest)return O3(n);if(l0.has(n))return l0.get(n);const e=L3(n);return e!==n&&(l0.set(n,e),My.set(e,n)),e}const c0=n=>My.get(n);function V3(n,e,{blocked:t,upgrade:s,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),f=Sa(c);return s&&c.addEventListener("upgradeneeded",g=>{s(Sa(c.result),g.oldVersion,g.newVersion,Sa(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",y=>a(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const U3=["get","getKey","getAll","getAllKeys","count"],B3=["put","add","delete","clear"],u0=new Map;function U2(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(u0.get(e))return u0.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=B3.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||U3.includes(t)))return;const l=async function(c,...f){const g=this.transaction(c,a?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),a&&g.done]))[0]};return u0.set(e,l),l}P3(n=>({...n,get:(e,t,s)=>U2(e,t)||n.get(e,t,s),has:(e,t)=>!!U2(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(q3(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function q3(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const L0="@firebase/app",B2="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=new Py("@firebase/app"),H3="@firebase/app-compat",$3="@firebase/analytics-compat",F3="@firebase/analytics",G3="@firebase/app-check-compat",K3="@firebase/app-check",Q3="@firebase/auth",Y3="@firebase/auth-compat",W3="@firebase/database",X3="@firebase/data-connect",J3="@firebase/database-compat",Z3="@firebase/functions",eC="@firebase/functions-compat",tC="@firebase/installations",nC="@firebase/installations-compat",sC="@firebase/messaging",rC="@firebase/messaging-compat",iC="@firebase/performance",aC="@firebase/performance-compat",oC="@firebase/remote-config",lC="@firebase/remote-config-compat",cC="@firebase/storage",uC="@firebase/storage-compat",dC="@firebase/firestore",hC="@firebase/ai",fC="@firebase/firestore-compat",mC="firebase",gC="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0="[DEFAULT]",pC={[L0]:"fire-core",[H3]:"fire-core-compat",[F3]:"fire-analytics",[$3]:"fire-analytics-compat",[K3]:"fire-app-check",[G3]:"fire-app-check-compat",[Q3]:"fire-auth",[Y3]:"fire-auth-compat",[W3]:"fire-rtdb",[X3]:"fire-data-connect",[J3]:"fire-rtdb-compat",[Z3]:"fire-fn",[eC]:"fire-fn-compat",[tC]:"fire-iid",[nC]:"fire-iid-compat",[sC]:"fire-fcm",[rC]:"fire-fcm-compat",[iC]:"fire-perf",[aC]:"fire-perf-compat",[oC]:"fire-rc",[lC]:"fire-rc-compat",[cC]:"fire-gcs",[uC]:"fire-gcs-compat",[dC]:"fire-fst",[fC]:"fire-fst-compat",[hC]:"fire-vertex","fire-js":"fire-js",[mC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zu=new Map,yC=new Map,U0=new Map;function z2(n,e){try{n.container.addComponent(e)}catch(t){Ni.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Mo(n){const e=n.name;if(U0.has(e))return Ni.debug(`There were multiple attempts to register component ${e}.`),!1;U0.set(e,n);for(const t of Zu.values())z2(t,n);for(const t of yC.values())z2(t,n);return!0}function wm(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ks(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Aa=new yd("app","Firebase",vC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ra("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Aa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o=gC;function xE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:V0,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw Aa.create("bad-app-name",{appName:String(a)});if(t||(t=yE()),!t)throw Aa.create("no-options");const l=Zu.get(a);if(l){if(Ai(t,l.options)&&Ai(s,l.config))return l;throw Aa.create("duplicate-app",{appName:a})}const c=new S3(a);for(const g of U0.values())c.addComponent(g);const f=new bC(t,s,c);return Zu.set(a,f),f}function _m(n=V0){const e=Zu.get(n);if(!e&&n===V0&&yE())return xE();if(!e)throw Aa.create("no-app",{appName:n});return e}function wC(){return Array.from(Zu.values())}function $r(n,e,t){let s=pC[n]??n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${s}" with version "${e}":`];a&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ni.warn(c.join(" "));return}Mo(new Ra(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="firebase-heartbeat-database",xC=1,ed="firebase-heartbeat-store";let d0=null;function EE(){return d0||(d0=V3(_C,xC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ed)}catch(t){console.warn(t)}}}}).catch(n=>{throw Aa.create("idb-open",{originalErrorMessage:n.message})})),d0}async function EC(n){try{const t=(await EE()).transaction(ed),s=await t.objectStore(ed).get(TE(n));return await t.done,s}catch(e){if(e instanceof Jr)Ni.warn(e.message);else{const t=Aa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ni.warn(t.message)}}}async function q2(n,e){try{const s=(await EE()).transaction(ed,"readwrite");await s.objectStore(ed).put(e,TE(n)),await s.done}catch(t){if(t instanceof Jr)Ni.warn(t.message);else{const s=Aa.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ni.warn(s.message)}}}function TE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=1024,SC=30;class AC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new CC(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=H2();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>SC){const c=kC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ni.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=H2(),{heartbeatsToSend:s,unsentEntries:a}=NC(this._heartbeatsCache.heartbeats),l=jf(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ni.warn(t),""}}}function H2(){return new Date().toISOString().substring(0,10)}function NC(n,e=TC){const t=[];let s=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),$2(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),$2(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class CC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return f3()?m3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await EC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return q2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return q2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function $2(n){return jf(JSON.stringify({version:2,heartbeats:n})).length}function kC(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(n){Mo(new Ra("platform-logger",e=>new z3(e),"PRIVATE")),Mo(new Ra("heartbeat",e=>new AC(e),"PRIVATE")),$r(L0,B2,n),$r(L0,B2,"esm2020"),$r("fire-js","")}RC("");var F2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Na,SE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,R){function I(){}I.prototype=R.prototype,k.F=R.prototype,k.prototype=new I,k.prototype.constructor=k,k.D=function(U,V,q){for(var j=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)j[Be-2]=arguments[Be];return R.prototype[V].apply(U,j)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(k,R,I){I||(I=0);const U=Array(16);if(typeof R=="string")for(var V=0;V<16;++V)U[V]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(V=0;V<16;++V)U[V]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=k.g[0],I=k.g[1],V=k.g[2];let q=k.g[3],j;j=R+(q^I&(V^q))+U[0]+3614090360&4294967295,R=I+(j<<7&4294967295|j>>>25),j=q+(V^R&(I^V))+U[1]+3905402710&4294967295,q=R+(j<<12&4294967295|j>>>20),j=V+(I^q&(R^I))+U[2]+606105819&4294967295,V=q+(j<<17&4294967295|j>>>15),j=I+(R^V&(q^R))+U[3]+3250441966&4294967295,I=V+(j<<22&4294967295|j>>>10),j=R+(q^I&(V^q))+U[4]+4118548399&4294967295,R=I+(j<<7&4294967295|j>>>25),j=q+(V^R&(I^V))+U[5]+1200080426&4294967295,q=R+(j<<12&4294967295|j>>>20),j=V+(I^q&(R^I))+U[6]+2821735955&4294967295,V=q+(j<<17&4294967295|j>>>15),j=I+(R^V&(q^R))+U[7]+4249261313&4294967295,I=V+(j<<22&4294967295|j>>>10),j=R+(q^I&(V^q))+U[8]+1770035416&4294967295,R=I+(j<<7&4294967295|j>>>25),j=q+(V^R&(I^V))+U[9]+2336552879&4294967295,q=R+(j<<12&4294967295|j>>>20),j=V+(I^q&(R^I))+U[10]+4294925233&4294967295,V=q+(j<<17&4294967295|j>>>15),j=I+(R^V&(q^R))+U[11]+2304563134&4294967295,I=V+(j<<22&4294967295|j>>>10),j=R+(q^I&(V^q))+U[12]+1804603682&4294967295,R=I+(j<<7&4294967295|j>>>25),j=q+(V^R&(I^V))+U[13]+4254626195&4294967295,q=R+(j<<12&4294967295|j>>>20),j=V+(I^q&(R^I))+U[14]+2792965006&4294967295,V=q+(j<<17&4294967295|j>>>15),j=I+(R^V&(q^R))+U[15]+1236535329&4294967295,I=V+(j<<22&4294967295|j>>>10),j=R+(V^q&(I^V))+U[1]+4129170786&4294967295,R=I+(j<<5&4294967295|j>>>27),j=q+(I^V&(R^I))+U[6]+3225465664&4294967295,q=R+(j<<9&4294967295|j>>>23),j=V+(R^I&(q^R))+U[11]+643717713&4294967295,V=q+(j<<14&4294967295|j>>>18),j=I+(q^R&(V^q))+U[0]+3921069994&4294967295,I=V+(j<<20&4294967295|j>>>12),j=R+(V^q&(I^V))+U[5]+3593408605&4294967295,R=I+(j<<5&4294967295|j>>>27),j=q+(I^V&(R^I))+U[10]+38016083&4294967295,q=R+(j<<9&4294967295|j>>>23),j=V+(R^I&(q^R))+U[15]+3634488961&4294967295,V=q+(j<<14&4294967295|j>>>18),j=I+(q^R&(V^q))+U[4]+3889429448&4294967295,I=V+(j<<20&4294967295|j>>>12),j=R+(V^q&(I^V))+U[9]+568446438&4294967295,R=I+(j<<5&4294967295|j>>>27),j=q+(I^V&(R^I))+U[14]+3275163606&4294967295,q=R+(j<<9&4294967295|j>>>23),j=V+(R^I&(q^R))+U[3]+4107603335&4294967295,V=q+(j<<14&4294967295|j>>>18),j=I+(q^R&(V^q))+U[8]+1163531501&4294967295,I=V+(j<<20&4294967295|j>>>12),j=R+(V^q&(I^V))+U[13]+2850285829&4294967295,R=I+(j<<5&4294967295|j>>>27),j=q+(I^V&(R^I))+U[2]+4243563512&4294967295,q=R+(j<<9&4294967295|j>>>23),j=V+(R^I&(q^R))+U[7]+1735328473&4294967295,V=q+(j<<14&4294967295|j>>>18),j=I+(q^R&(V^q))+U[12]+2368359562&4294967295,I=V+(j<<20&4294967295|j>>>12),j=R+(I^V^q)+U[5]+4294588738&4294967295,R=I+(j<<4&4294967295|j>>>28),j=q+(R^I^V)+U[8]+2272392833&4294967295,q=R+(j<<11&4294967295|j>>>21),j=V+(q^R^I)+U[11]+1839030562&4294967295,V=q+(j<<16&4294967295|j>>>16),j=I+(V^q^R)+U[14]+4259657740&4294967295,I=V+(j<<23&4294967295|j>>>9),j=R+(I^V^q)+U[1]+2763975236&4294967295,R=I+(j<<4&4294967295|j>>>28),j=q+(R^I^V)+U[4]+1272893353&4294967295,q=R+(j<<11&4294967295|j>>>21),j=V+(q^R^I)+U[7]+4139469664&4294967295,V=q+(j<<16&4294967295|j>>>16),j=I+(V^q^R)+U[10]+3200236656&4294967295,I=V+(j<<23&4294967295|j>>>9),j=R+(I^V^q)+U[13]+681279174&4294967295,R=I+(j<<4&4294967295|j>>>28),j=q+(R^I^V)+U[0]+3936430074&4294967295,q=R+(j<<11&4294967295|j>>>21),j=V+(q^R^I)+U[3]+3572445317&4294967295,V=q+(j<<16&4294967295|j>>>16),j=I+(V^q^R)+U[6]+76029189&4294967295,I=V+(j<<23&4294967295|j>>>9),j=R+(I^V^q)+U[9]+3654602809&4294967295,R=I+(j<<4&4294967295|j>>>28),j=q+(R^I^V)+U[12]+3873151461&4294967295,q=R+(j<<11&4294967295|j>>>21),j=V+(q^R^I)+U[15]+530742520&4294967295,V=q+(j<<16&4294967295|j>>>16),j=I+(V^q^R)+U[2]+3299628645&4294967295,I=V+(j<<23&4294967295|j>>>9),j=R+(V^(I|~q))+U[0]+4096336452&4294967295,R=I+(j<<6&4294967295|j>>>26),j=q+(I^(R|~V))+U[7]+1126891415&4294967295,q=R+(j<<10&4294967295|j>>>22),j=V+(R^(q|~I))+U[14]+2878612391&4294967295,V=q+(j<<15&4294967295|j>>>17),j=I+(q^(V|~R))+U[5]+4237533241&4294967295,I=V+(j<<21&4294967295|j>>>11),j=R+(V^(I|~q))+U[12]+1700485571&4294967295,R=I+(j<<6&4294967295|j>>>26),j=q+(I^(R|~V))+U[3]+2399980690&4294967295,q=R+(j<<10&4294967295|j>>>22),j=V+(R^(q|~I))+U[10]+4293915773&4294967295,V=q+(j<<15&4294967295|j>>>17),j=I+(q^(V|~R))+U[1]+2240044497&4294967295,I=V+(j<<21&4294967295|j>>>11),j=R+(V^(I|~q))+U[8]+1873313359&4294967295,R=I+(j<<6&4294967295|j>>>26),j=q+(I^(R|~V))+U[15]+4264355552&4294967295,q=R+(j<<10&4294967295|j>>>22),j=V+(R^(q|~I))+U[6]+2734768916&4294967295,V=q+(j<<15&4294967295|j>>>17),j=I+(q^(V|~R))+U[13]+1309151649&4294967295,I=V+(j<<21&4294967295|j>>>11),j=R+(V^(I|~q))+U[4]+4149444226&4294967295,R=I+(j<<6&4294967295|j>>>26),j=q+(I^(R|~V))+U[11]+3174756917&4294967295,q=R+(j<<10&4294967295|j>>>22),j=V+(R^(q|~I))+U[2]+718787259&4294967295,V=q+(j<<15&4294967295|j>>>17),j=I+(q^(V|~R))+U[9]+3951481745&4294967295,k.g[0]=k.g[0]+R&4294967295,k.g[1]=k.g[1]+(V+(j<<21&4294967295|j>>>11))&4294967295,k.g[2]=k.g[2]+V&4294967295,k.g[3]=k.g[3]+q&4294967295}s.prototype.v=function(k,R){R===void 0&&(R=k.length);const I=R-this.blockSize,U=this.C;let V=this.h,q=0;for(;q<R;){if(V==0)for(;q<=I;)a(this,k,q),q+=this.blockSize;if(typeof k=="string"){for(;q<R;)if(U[V++]=k.charCodeAt(q++),V==this.blockSize){a(this,U),V=0;break}}else for(;q<R;)if(U[V++]=k[q++],V==this.blockSize){a(this,U),V=0;break}}this.h=V,this.o+=R},s.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var R=1;R<k.length-8;++R)k[R]=0;R=this.o*8;for(var I=k.length-8;I<k.length;++I)k[I]=R&255,R/=256;for(this.v(k),k=Array(16),R=0,I=0;I<4;++I)for(let U=0;U<32;U+=8)k[R++]=this.g[I]>>>U&255;return k};function l(k,R){var I=f;return Object.prototype.hasOwnProperty.call(I,k)?I[k]:I[k]=R(k)}function c(k,R){this.h=R;const I=[];let U=!0;for(let V=k.length-1;V>=0;V--){const q=k[V]|0;U&&q==R||(I[V]=q,U=!1)}this.g=I}var f={};function g(k){return-128<=k&&k<128?l(k,function(R){return new c([R|0],R<0?-1:0)}):new c([k|0],k<0?-1:0)}function y(k){if(isNaN(k)||!isFinite(k))return _;if(k<0)return C(y(-k));const R=[];let I=1;for(let U=0;k>=I;U++)R[U]=k/I|0,I*=4294967296;return new c(R,0)}function v(k,R){if(k.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(k.charAt(0)=="-")return C(v(k.substring(1),R));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=y(Math.pow(R,8));let U=_;for(let q=0;q<k.length;q+=8){var V=Math.min(8,k.length-q);const j=parseInt(k.substring(q,q+V),R);V<8?(V=y(Math.pow(R,V)),U=U.j(V).add(y(j))):(U=U.j(I),U=U.add(y(j)))}return U}var _=g(0),E=g(1),T=g(16777216);n=c.prototype,n.m=function(){if(P(this))return-C(this).m();let k=0,R=1;for(let I=0;I<this.g.length;I++){const U=this.i(I);k+=(U>=0?U:4294967296+U)*R,R*=4294967296}return k},n.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(N(this))return"0";if(P(this))return"-"+C(this).toString(k);const R=y(Math.pow(k,6));var I=this;let U="";for(;;){const V=te(I,R).g;I=M(I,V.j(R));let q=((I.g.length>0?I.g[0]:I.h)>>>0).toString(k);if(I=V,N(I))return q+U;for(;q.length<6;)q="0"+q;U=q+U}},n.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function N(k){if(k.h!=0)return!1;for(let R=0;R<k.g.length;R++)if(k.g[R]!=0)return!1;return!0}function P(k){return k.h==-1}n.l=function(k){return k=M(this,k),P(k)?-1:N(k)?0:1};function C(k){const R=k.g.length,I=[];for(let U=0;U<R;U++)I[U]=~k.g[U];return new c(I,~k.h).add(E)}n.abs=function(){return P(this)?C(this):this},n.add=function(k){const R=Math.max(this.g.length,k.g.length),I=[];let U=0;for(let V=0;V<=R;V++){let q=U+(this.i(V)&65535)+(k.i(V)&65535),j=(q>>>16)+(this.i(V)>>>16)+(k.i(V)>>>16);U=j>>>16,q&=65535,j&=65535,I[V]=j<<16|q}return new c(I,I[I.length-1]&-2147483648?-1:0)};function M(k,R){return k.add(C(R))}n.j=function(k){if(N(this)||N(k))return _;if(P(this))return P(k)?C(this).j(C(k)):C(C(this).j(k));if(P(k))return C(this.j(C(k)));if(this.l(T)<0&&k.l(T)<0)return y(this.m()*k.m());const R=this.g.length+k.g.length,I=[];for(var U=0;U<2*R;U++)I[U]=0;for(U=0;U<this.g.length;U++)for(let V=0;V<k.g.length;V++){const q=this.i(U)>>>16,j=this.i(U)&65535,Be=k.i(V)>>>16,se=k.i(V)&65535;I[2*U+2*V]+=j*se,H(I,2*U+2*V),I[2*U+2*V+1]+=q*se,H(I,2*U+2*V+1),I[2*U+2*V+1]+=j*Be,H(I,2*U+2*V+1),I[2*U+2*V+2]+=q*Be,H(I,2*U+2*V+2)}for(k=0;k<R;k++)I[k]=I[2*k+1]<<16|I[2*k];for(k=R;k<2*R;k++)I[k]=0;return new c(I,0)};function H(k,R){for(;(k[R]&65535)!=k[R];)k[R+1]+=k[R]>>>16,k[R]&=65535,R++}function F(k,R){this.g=k,this.h=R}function te(k,R){if(N(R))throw Error("division by zero");if(N(k))return new F(_,_);if(P(k))return R=te(C(k),R),new F(C(R.g),C(R.h));if(P(R))return R=te(k,C(R)),new F(C(R.g),R.h);if(k.g.length>30){if(P(k)||P(R))throw Error("slowDivide_ only works with positive integers.");for(var I=E,U=R;U.l(k)<=0;)I=fe(I),U=fe(U);var V=he(I,1),q=he(U,1);for(U=he(U,2),I=he(I,2);!N(U);){var j=q.add(U);j.l(k)<=0&&(V=V.add(I),q=j),U=he(U,1),I=he(I,1)}return R=M(k,V.j(R)),new F(V,R)}for(V=_;k.l(R)>=0;){for(I=Math.max(1,Math.floor(k.m()/R.m())),U=Math.ceil(Math.log(I)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),q=y(I),j=q.j(R);P(j)||j.l(k)>0;)I-=U,q=y(I),j=q.j(R);N(q)&&(q=E),V=V.add(q),k=M(k,j)}return new F(V,k)}n.B=function(k){return te(this,k).h},n.and=function(k){const R=Math.max(this.g.length,k.g.length),I=[];for(let U=0;U<R;U++)I[U]=this.i(U)&k.i(U);return new c(I,this.h&k.h)},n.or=function(k){const R=Math.max(this.g.length,k.g.length),I=[];for(let U=0;U<R;U++)I[U]=this.i(U)|k.i(U);return new c(I,this.h|k.h)},n.xor=function(k){const R=Math.max(this.g.length,k.g.length),I=[];for(let U=0;U<R;U++)I[U]=this.i(U)^k.i(U);return new c(I,this.h^k.h)};function fe(k){const R=k.g.length+1,I=[];for(let U=0;U<R;U++)I[U]=k.i(U)<<1|k.i(U-1)>>>31;return new c(I,k.h)}function he(k,R){const I=R>>5;R%=32;const U=k.g.length-I,V=[];for(let q=0;q<U;q++)V[q]=R>0?k.i(q+I)>>>R|k.i(q+I+1)<<32-R:k.i(q+I);return new c(V,k.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,SE=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=v,Na=c}).apply(typeof F2<"u"?F2:typeof self<"u"?self:typeof window<"u"?window:{});var nf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var AE,Vu,NE,Ef,B0,CE,kE,RE;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof nf=="object"&&nf];for(var b=0;b<h.length;++b){var x=h[b];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var s=t(this);function a(h,b){if(b)e:{var x=s;h=h.split(".");for(var A=0;A<h.length-1;A++){var K=h[A];if(!(K in x))break e;x=x[K]}h=h[h.length-1],A=x[h],b=b(A),b!=A&&b!=null&&e(x,h,{configurable:!0,writable:!0,value:b})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(b){var x=[],A;for(A in b)Object.prototype.hasOwnProperty.call(b,A)&&x.push([A,b[A]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(h){var b=typeof h;return b=="object"&&h!=null||b=="function"}function g(h,b,x){return h.call.apply(h.bind,arguments)}function y(h,b,x){return y=g,y.apply(null,arguments)}function v(h,b){var x=Array.prototype.slice.call(arguments,1);return function(){var A=x.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function _(h,b){function x(){}x.prototype=b.prototype,h.Z=b.prototype,h.prototype=new x,h.prototype.constructor=h,h.Ob=function(A,K,J){for(var ge=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)ge[ze-2]=arguments[ze];return b.prototype[K].apply(A,ge)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function T(h){const b=h.length;if(b>0){const x=Array(b);for(let A=0;A<b;A++)x[A]=h[A];return x}return[]}function N(h,b){for(let A=1;A<arguments.length;A++){const K=arguments[A];var x=typeof K;if(x=x!="object"?x:K?Array.isArray(K)?"array":x:"null",x=="array"||x=="object"&&typeof K.length=="number"){x=h.length||0;const J=K.length||0;h.length=x+J;for(let ge=0;ge<J;ge++)h[x+ge]=K[ge]}else h.push(K)}}class P{constructor(b,x){this.i=b,this.j=x,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function C(h){c.setTimeout(()=>{throw h},0)}function M(){var h=k;let b=null;return h.g&&(b=h.g,h.g=h.g.next,h.g||(h.h=null),b.next=null),b}class H{constructor(){this.h=this.g=null}add(b,x){const A=F.get();A.set(b,x),this.h?this.h.next=A:this.g=A,this.h=A}}var F=new P(()=>new te,h=>h.reset());class te{constructor(){this.next=this.g=this.h=null}set(b,x){this.h=b,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,he=!1,k=new H,R=()=>{const h=Promise.resolve(void 0);fe=()=>{h.then(I)}};function I(){for(var h;h=M();){try{h.h.call(h.g)}catch(x){C(x)}var b=F;b.j(h),b.h<100&&(b.h++,h.next=b.g,b.g=h)}he=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(h,b){this.type=h,this.g=this.target=b,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,b=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const x=()=>{};c.addEventListener("test",x,b),c.removeEventListener("test",x,b)}catch{}return h})();function j(h){return/^[\s\xa0]*$/.test(h)}function Be(h,b){V.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,b)}_(Be,V),Be.prototype.init=function(h,b){const x=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=b,b=h.relatedTarget,b||(x=="mouseover"?b=h.fromElement:x=="mouseout"&&(b=h.toElement)),this.relatedTarget=b,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Be.Z.h.call(this)},Be.prototype.h=function(){Be.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var se="closure_listenable_"+(Math.random()*1e6|0),O=0;function re(h,b,x,A,K){this.listener=h,this.proxy=null,this.src=b,this.type=x,this.capture=!!A,this.ha=K,this.key=++O,this.da=this.fa=!1}function ve(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Re(h,b,x){for(const A in h)b.call(x,h[A],A,h)}function Ge(h,b){for(const x in h)b.call(void 0,h[x],x,h)}function B(h){const b={};for(const x in h)b[x]=h[x];return b}const ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(h,b){let x,A;for(let K=1;K<arguments.length;K++){A=arguments[K];for(x in A)h[x]=A[x];for(let J=0;J<ie.length;J++)x=ie[J],Object.prototype.hasOwnProperty.call(A,x)&&(h[x]=A[x])}}function le(h){this.src=h,this.g={},this.h=0}le.prototype.add=function(h,b,x,A,K){const J=h.toString();h=this.g[J],h||(h=this.g[J]=[],this.h++);const ge=Te(h,b,A,K);return ge>-1?(b=h[ge],x||(b.fa=!1)):(b=new re(b,this.src,J,!!A,K),b.fa=x,h.push(b)),b};function me(h,b){const x=b.type;if(x in h.g){var A=h.g[x],K=Array.prototype.indexOf.call(A,b,void 0),J;(J=K>=0)&&Array.prototype.splice.call(A,K,1),J&&(ve(b),h.g[x].length==0&&(delete h.g[x],h.h--))}}function Te(h,b,x,A){for(let K=0;K<h.length;++K){const J=h[K];if(!J.da&&J.listener==b&&J.capture==!!x&&J.ha==A)return K}return-1}var je="closure_lm_"+(Math.random()*1e6|0),Ke={};function it(h,b,x,A,K){if(Array.isArray(b)){for(let J=0;J<b.length;J++)it(h,b[J],x,A,K);return null}return x=Ii(x),h&&h[se]?h.J(b,x,f(A)?!!A.capture:!1,K):Me(h,b,x,!1,A,K)}function Me(h,b,x,A,K,J){if(!b)throw Error("Invalid event type");const ge=f(K)?!!K.capture:!!K;let ze=Zs(h);if(ze||(h[je]=ze=new le(h)),x=ze.add(b,x,A,ge,J),x.proxy)return x;if(A=vt(),x.proxy=A,A.src=h,A.listener=x,h.addEventListener)q||(K=ge),K===void 0&&(K=!1),h.addEventListener(b.toString(),A,K);else if(h.attachEvent)h.attachEvent(nt(b.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return x}function vt(){function h(x){return b.call(h.src,h.listener,x)}const b=Pn;return h}function Dn(h,b,x,A,K){if(Array.isArray(b))for(var J=0;J<b.length;J++)Dn(h,b[J],x,A,K);else A=f(A)?!!A.capture:!!A,x=Ii(x),h&&h[se]?(h=h.i,J=String(b).toString(),J in h.g&&(b=h.g[J],x=Te(b,x,A,K),x>-1&&(ve(b[x]),Array.prototype.splice.call(b,x,1),b.length==0&&(delete h.g[J],h.h--)))):h&&(h=Zs(h))&&(b=h.g[b.toString()],h=-1,b&&(h=Te(b,x,A,K)),(x=h>-1?b[h]:null)&&fs(x))}function fs(h){if(typeof h!="number"&&h&&!h.da){var b=h.src;if(b&&b[se])me(b.i,h);else{var x=h.type,A=h.proxy;b.removeEventListener?b.removeEventListener(x,A,h.capture):b.detachEvent?b.detachEvent(nt(x),A):b.addListener&&b.removeListener&&b.removeListener(A),(x=Zs(b))?(me(x,h),x.h==0&&(x.src=null,b[je]=null)):ve(h)}}}function nt(h){return h in Ke?Ke[h]:Ke[h]="on"+h}function Pn(h,b){if(h.da)h=!0;else{b=new Be(b,this);const x=h.listener,A=h.ha||h.src;h.fa&&fs(h),h=x.call(A,b)}return h}function Zs(h){return h=h[je],h instanceof le?h:null}var Tr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ii(h){return typeof h=="function"?h:(h[Tr]||(h[Tr]=function(b){return h.handleEvent(b)}),h[Tr])}function Pt(){U.call(this),this.i=new le(this),this.M=this,this.G=null}_(Pt,U),Pt.prototype[se]=!0,Pt.prototype.removeEventListener=function(h,b,x,A){Dn(this,h,b,x,A)};function zt(h,b){var x,A=h.G;if(A)for(x=[];A;A=A.G)x.push(A);if(h=h.M,A=b.type||b,typeof b=="string")b=new V(b,h);else if(b instanceof V)b.target=b.target||h;else{var K=b;b=new V(A,h),X(b,K)}K=!0;let J,ge;if(x)for(ge=x.length-1;ge>=0;ge--)J=b.g=x[ge],K=er(J,A,!0,b)&&K;if(J=b.g=h,K=er(J,A,!0,b)&&K,K=er(J,A,!1,b)&&K,x)for(ge=0;ge<x.length;ge++)J=b.g=x[ge],K=er(J,A,!1,b)&&K}Pt.prototype.N=function(){if(Pt.Z.N.call(this),this.i){var h=this.i;for(const b in h.g){const x=h.g[b];for(let A=0;A<x.length;A++)ve(x[A]);delete h.g[b],h.h--}}this.G=null},Pt.prototype.J=function(h,b,x,A){return this.i.add(String(h),b,!1,x,A)},Pt.prototype.K=function(h,b,x,A){return this.i.add(String(h),b,!0,x,A)};function er(h,b,x,A){if(b=h.i.g[String(b)],!b)return!0;b=b.concat();let K=!0;for(let J=0;J<b.length;++J){const ge=b[J];if(ge&&!ge.da&&ge.capture==x){const ze=ge.listener,Yt=ge.ha||ge.src;ge.fa&&me(h.i,ge),K=ze.call(Yt,A)!==!1&&K}}return K&&!A.defaultPrevented}function Fa(h,b){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:c.setTimeout(h,b||0)}function Zo(h){h.g=Fa(()=>{h.g=null,h.i&&(h.i=!1,Zo(h))},h.l);const b=h.h;h.h=null,h.m.apply(null,b)}class An extends U{constructor(b,x){super(),this.m=b,this.l=x,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Zo(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ls(h){U.call(this),this.h=h,this.g={}}_(Ls,U);var tr=[];function Ga(h){Re(h.g,function(b,x){this.g.hasOwnProperty(x)&&fs(b)},h),h.g={}}Ls.prototype.N=function(){Ls.Z.N.call(this),Ga(this)},Ls.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nr=c.JSON.stringify,el=c.JSON.parse,Ka=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Qa(){}function sr(){}var ms={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kt(){V.call(this,"d")}_(Kt,V);function ts(){V.call(this,"c")}_(ts,V);var It={},Ya=null;function Sr(){return Ya=Ya||new Pt}It.Ia="serverreachability";function Wa(h){V.call(this,It.Ia,h)}_(Wa,V);function Mn(h){const b=Sr();zt(b,new Wa(b))}It.STAT_EVENT="statevent";function ei(h,b){V.call(this,It.STAT_EVENT,h),this.stat=b}_(ei,V);function qt(h){const b=Sr();zt(b,new ei(b,h))}It.Ja="timingevent";function ns(h,b){V.call(this,It.Ja,h),this.size=b}_(ns,V);function vn(h,b){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},b)}function gs(){this.g=!0}gs.prototype.ua=function(){this.g=!1};function ji(h,b,x,A,K,J){h.info(function(){if(h.g)if(J){var ge="",ze=J.split("&");for(let ct=0;ct<ze.length;ct++){var Yt=ze[ct].split("=");if(Yt.length>1){const Ot=Yt[0];Yt=Yt[1];const Hs=Ot.split("_");ge=Hs.length>=2&&Hs[1]=="type"?ge+(Ot+"="+Yt+"&"):ge+(Ot+"=redacted&")}}}else ge=null;else ge=J;return"XMLHTTP REQ ("+A+") [attempt "+K+"]: "+b+`
`+x+`
`+ge})}function Xa(h,b,x,A,K,J,ge){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+K+"]: "+b+`
`+x+`
`+J+" "+ge})}function Qn(h,b,x,A){h.info(function(){return"XMLHTTP TEXT ("+b+"): "+Nr(h,x)+(A?" "+A:"")})}function Ar(h,b){h.info(function(){return"TIMEOUT: "+b})}gs.prototype.info=function(){};function Nr(h,b){if(!h.g)return b;if(!b)return null;try{const J=JSON.parse(b);if(J){for(h=0;h<J.length;h++)if(Array.isArray(J[h])){var x=J[h];if(!(x.length<2)){var A=x[1];if(Array.isArray(A)&&!(A.length<1)){var K=A[0];if(K!="noop"&&K!="stop"&&K!="close")for(let ge=1;ge<A.length;ge++)A[ge]=""}}}}return nr(J)}catch{return b}}var Cr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Oi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Di;function kr(){}_(kr,Qa),kr.prototype.g=function(){return new XMLHttpRequest},Di=new kr;function ps(h){return encodeURIComponent(String(h))}function tl(h){var b=1;h=h.split(":");const x=[];for(;b>0&&h.length;)x.push(h.shift()),b--;return h.length&&x.push(h.join(":")),x}function ys(h,b,x,A){this.j=h,this.i=b,this.l=x,this.S=A||1,this.V=new Ls(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new vs}function vs(){this.i=null,this.g="",this.h=!1}var Ht={},nn={};function Vs(h,b,x){h.M=1,h.A=Ja(sn(b)),h.u=x,h.R=!0,Pi(h,null)}function Pi(h,b){h.F=Date.now(),Us(h),h.B=sn(h.A);var x=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),il(x.i,"t",A),h.C=0,x=h.j.L,h.h=new vs,h.g=Yd(h.j,x?b:null,!h.u),h.P>0&&(h.O=new An(y(h.Y,h,h.g),h.P)),b=h.V,x=h.g,A=h.ba;var K="readystatechange";Array.isArray(K)||(K&&(tr[0]=K.toString()),K=tr);for(let J=0;J<K.length;J++){const ge=it(x,K[J],A||b.handleEvent,!1,b.h||b);if(!ge)break;b.g[ge.key]=ge}b=h.J?B(h.J):{},h.u?(h.v||(h.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,b)):(h.v="GET",h.g.ea(h.B,h.v,null,b)),Mn(),ji(h.i,h.v,h.B,h.l,h.S,h.u)}ys.prototype.ba=function(h){h=h.target;const b=this.O;b&&ar(h)==3?b.j():this.Y(h)},ys.prototype.Y=function(h){try{if(h==this.g)e:{const ze=ar(this.g),Yt=this.g.ya(),ct=this.g.ca();if(!(ze<3)&&(ze!=3||this.g&&(this.h.h||this.g.la()||Nn(this.g)))){this.K||ze!=4||Yt==7||(Yt==8||ct<=0?Mn(3):Mn(2)),bs(this);var b=this.g.ca();this.X=b;var x=zc(this);if(this.o=b==200,Xa(this.i,this.v,this.B,this.l,this.S,ze,b),this.o){if(this.U&&!this.L){t:{if(this.g){var A,K=this.g;if((A=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(A)){var J=A;break t}}J=null}if(h=J)Qn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Bs(this,h);else{this.o=!1,this.m=3,qt(12),Yn(this),Ln(this);break e}}if(this.R){h=!0;let Ot;for(;!this.K&&this.C<x.length;)if(Ot=sl(this,x),Ot==nn){ze==4&&(this.m=4,qt(14),h=!1),Qn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ot==Ht){this.m=4,qt(15),Qn(this.i,this.l,x,"[Invalid Chunk]"),h=!1;break}else Qn(this.i,this.l,Ot,null),Bs(this,Ot);if(nl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ze!=4||x.length!=0||this.h.h||(this.m=1,qt(16),h=!1),this.o=this.o&&h,!h)Qn(this.i,this.l,x,"[Invalid Chunked Response]"),Yn(this),Ln(this);else if(x.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Xc(ge),ge.P=!0,qt(11))}}else Qn(this.i,this.l,x,null),Bs(this,x);ze==4&&Yn(this),this.o&&!this.K&&(ze==4?Fd(this.j,this):(this.o=!1,Us(this)))}else ni(this.g),b==400&&x.indexOf("Unknown SID")>0?(this.m=3,qt(12)):(this.m=0,qt(13)),Yn(this),Ln(this)}}}catch{}finally{}};function zc(h){if(!nl(h))return h.g.la();const b=Nn(h.g);if(b==="")return"";let x="";const A=b.length,K=ar(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Yn(h),Ln(h),"";h.h.i=new c.TextDecoder}for(let J=0;J<A;J++)h.h.h=!0,x+=h.h.i.decode(b[J],{stream:!(K&&J==A-1)});return b.length=0,h.h.g+=x,h.C=0,h.h.g}function nl(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function sl(h,b){var x=h.C,A=b.indexOf(`
`,x);return A==-1?nn:(x=Number(b.substring(x,A)),isNaN(x)?Ht:(A+=1,A+x>b.length?nn:(b=b.slice(A,A+x),h.C=A+x,b)))}ys.prototype.cancel=function(){this.K=!0,Yn(this)};function Us(h){h.T=Date.now()+h.H,Mi(h,h.H)}function Mi(h,b){if(h.D!=null)throw Error("WatchDog timer not null");h.D=vn(y(h.aa,h),b)}function bs(h){h.D&&(c.clearTimeout(h.D),h.D=null)}ys.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ar(this.i,this.B),this.M!=2&&(Mn(),qt(17)),Yn(this),this.m=2,Ln(this)):Mi(this,this.T-h)};function Ln(h){h.j.I==0||h.K||Fd(h.j,h)}function Yn(h){bs(h);var b=h.O;b&&typeof b.dispose=="function"&&b.dispose(),h.O=null,Ga(h.V),h.g&&(b=h.g,h.g=null,b.abort(),b.dispose())}function Bs(h,b){try{var x=h.j;if(x.I!=0&&(x.g==h||Se(x.h,h))){if(!h.L&&Se(x.h,h)&&x.I==3){try{var A=x.Ba.g.parse(b)}catch{A=null}if(Array.isArray(A)&&A.length==3){var K=A;if(K[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<h.F)ul(x),Fi(x);else break e;io(x),qt(18)}}else x.xa=K[1],0<x.xa-x.K&&K[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=vn(y(x.Va,x),6e3));de(x.h)<=1&&x.ta&&(x.ta=void 0)}else Pr(x,11)}else if((h.L||x.g==h)&&ul(x),!j(b))for(K=x.Ba.g.parse(b),b=0;b<K.length;b++){let ct=K[b];const Ot=ct[0];if(!(Ot<=x.K))if(x.K=Ot,ct=ct[1],x.I==2)if(ct[0]=="c"){x.M=ct[1],x.ba=ct[2];const Hs=ct[3];Hs!=null&&(x.ka=Hs,x.j.info("VER="+x.ka));const Mr=ct[4];Mr!=null&&(x.za=Mr,x.j.info("SVER="+x.za));const or=ct[5];or!=null&&typeof or=="number"&&or>0&&(A=1.5*or,x.O=A,x.j.info("backChannelRequestTimeoutMs_="+A)),A=x;const lr=h.g;if(lr){const ao=lr.g?lr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ao){var J=A.h;J.g||ao.indexOf("spdy")==-1&&ao.indexOf("quic")==-1&&ao.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(He(J,J.h),J.h=null))}if(A.G){const dl=lr.g?lr.g.getResponseHeader("X-HTTP-Session-Id"):null;dl&&(A.wa=dl,mt(A.J,A.G,dl))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-h.F,x.j.info("Handshake RTT: "+x.T+"ms")),A=x;var ge=h;if(A.na=Qd(A,A.L?A.ba:null,A.W),ge.L){$e(A.h,ge);var ze=ge,Yt=A.O;Yt&&(ze.H=Yt),ze.D&&(bs(ze),Us(ze)),A.g=ge}else Hd(A);x.i.length>0&&Dr(x)}else ct[0]!="stop"&&ct[0]!="close"||Pr(x,7);else x.I==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?Pr(x,7):Yc(x):ct[0]!="noop"&&x.l&&x.l.qa(ct),x.A=0)}}Mn(4)}catch{}}var Mt=class{constructor(h,b){this.g=h,this.map=b}};function Li(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function D(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function de(h){return h.h?1:h.g?h.g.size:0}function Se(h,b){return h.h?h.h==b:h.g?h.g.has(b):!1}function He(h,b){h.g?h.g.add(b):h.h=b}function $e(h,b){h.h&&h.h==b?h.h=null:h.g&&h.g.has(b)&&h.g.delete(b)}Li.prototype.cancel=function(){if(this.i=fn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function fn(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let b=h.i;for(const x of h.g.values())b=b.concat(x.G);return b}return T(h.i)}var jt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lt(h,b){if(h){h=h.split("&");for(let x=0;x<h.length;x++){const A=h[x].indexOf("=");let K,J=null;A>=0?(K=h[x].substring(0,A),J=h[x].substring(A+1)):K=h[x],b(K,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Qt(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;h instanceof Qt?(this.l=h.l,bn(this,h.j),this.o=h.o,this.g=h.g,Vi(this,h.u),this.h=h.h,qc(this,zd(h.i)),this.m=h.m):h&&(b=String(h).match(jt))?(this.l=!1,bn(this,b[1]||"",!0),this.o=Rr(b[2]||""),this.g=Rr(b[3]||"",!0),Vi(this,b[4]),this.h=Rr(b[5]||"",!0),qc(this,b[6]||"",!0),this.m=Rr(b[7]||"")):(this.l=!1,this.i=new Bi(null,this.l))}Qt.prototype.toString=function(){const h=[];var b=this.j;b&&h.push(Za(b,rl,!0),":");var x=this.g;return(x||b=="file")&&(h.push("//"),(b=this.o)&&h.push(Za(b,rl,!0),"@"),h.push(ps(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&h.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&h.push("/"),h.push(Za(x,x.charAt(0)=="/"?Hc:Vd,!0))),(x=this.i.toString())&&h.push("?",x),(x=this.m)&&h.push("#",Za(x,Ud)),h.join("")},Qt.prototype.resolve=function(h){const b=sn(this);let x=!!h.j;x?bn(b,h.j):x=!!h.o,x?b.o=h.o:x=!!h.g,x?b.g=h.g:x=h.u!=null;var A=h.h;if(x)Vi(b,h.u);else if(x=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var K=b.h.lastIndexOf("/");K!=-1&&(A=b.h.slice(0,K+1)+A)}if(K=A,K==".."||K==".")A="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){A=K.lastIndexOf("/",0)==0,K=K.split("/");const J=[];for(let ge=0;ge<K.length;){const ze=K[ge++];ze=="."?A&&ge==K.length&&J.push(""):ze==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),A&&ge==K.length&&J.push("")):(J.push(ze),A=!0)}A=J.join("/")}else A=K}return x?b.h=A:x=h.i.toString()!=="",x?qc(b,zd(h.i)):x=!!h.m,x&&(b.m=h.m),b};function sn(h){return new Qt(h)}function bn(h,b,x){h.j=x?Rr(b,!0):b,h.j&&(h.j=h.j.replace(/:$/,""))}function Vi(h,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);h.u=b}else h.u=null}function qc(h,b,x){b instanceof Bi?(h.i=b,al(h.i,h.l)):(x||(b=Za(b,Ui)),h.i=new Bi(b,h.l))}function mt(h,b,x){h.i.set(b,x)}function Ja(h){return mt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Rr(h,b){return h?b?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Za(h,b,x){return typeof h=="string"?(h=encodeURI(h).replace(b,ss),x&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ss(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var rl=/[#\/\?@]/g,Vd=/[#\?:]/g,Hc=/[#\?]/g,Ui=/[#\?@]/g,Ud=/#/g;function Bi(h,b){this.h=this.g=null,this.i=h||null,this.j=!!b}function rs(h){h.g||(h.g=new Map,h.h=0,h.i&&Lt(h.i,function(b,x){h.add(decodeURIComponent(b.replace(/\+/g," ")),x)}))}n=Bi.prototype,n.add=function(h,b){rs(this),this.i=null,h=zi(this,h);let x=this.g.get(h);return x||this.g.set(h,x=[]),x.push(b),this.h+=1,this};function Bd(h,b){rs(h),b=zi(h,b),h.g.has(b)&&(h.i=null,h.h-=h.g.get(b).length,h.g.delete(b))}function $c(h,b){return rs(h),b=zi(h,b),h.g.has(b)}n.forEach=function(h,b){rs(this),this.g.forEach(function(x,A){x.forEach(function(K){h.call(b,K,A,this)},this)},this)};function Fc(h,b){rs(h);let x=[];if(typeof b=="string")$c(h,b)&&(x=x.concat(h.g.get(zi(h,b))));else for(h=Array.from(h.g.values()),b=0;b<h.length;b++)x=x.concat(h[b]);return x}n.set=function(h,b){return rs(this),this.i=null,h=zi(this,h),$c(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[b]),this.h+=1,this},n.get=function(h,b){return h?(h=Fc(this,h),h.length>0?String(h[0]):b):b};function il(h,b,x){Bd(h,b),x.length>0&&(h.i=null,h.g.set(zi(h,b),T(x)),h.h+=x.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],b=Array.from(this.g.keys());for(let A=0;A<b.length;A++){var x=b[A];const K=ps(x);x=Fc(this,x);for(let J=0;J<x.length;J++){let ge=K;x[J]!==""&&(ge+="="+ps(x[J])),h.push(ge)}}return this.i=h.join("&")};function zd(h){const b=new Bi;return b.i=h.i,h.g&&(b.g=new Map(h.g),b.h=h.h),b}function zi(h,b){return b=String(b),h.j&&(b=b.toLowerCase()),b}function al(h,b){b&&!h.j&&(rs(h),h.i=null,h.g.forEach(function(x,A){const K=A.toLowerCase();A!=K&&(Bd(this,A),il(this,K,x))},h)),h.j=b}function rr(h,b){const x=new gs;if(c.Image){const A=new Image;A.onload=v(zs,x,"TestLoadImage: loaded",!0,b,A),A.onerror=v(zs,x,"TestLoadImage: error",!1,b,A),A.onabort=v(zs,x,"TestLoadImage: abort",!1,b,A),A.ontimeout=v(zs,x,"TestLoadImage: timeout",!1,b,A),c.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else b(!1)}function Gc(h,b){const x=new gs,A=new AbortController,K=setTimeout(()=>{A.abort(),zs(x,"TestPingServer: timeout",!1,b)},1e4);fetch(h,{signal:A.signal}).then(J=>{clearTimeout(K),J.ok?zs(x,"TestPingServer: ok",!0,b):zs(x,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(K),zs(x,"TestPingServer: error",!1,b)})}function zs(h,b,x,A,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),A(x)}catch{}}function qi(){this.g=new Ka}function Ir(h){this.i=h.Sb||null,this.h=h.ab||!1}_(Ir,Qa),Ir.prototype.g=function(){return new eo(this.i,this.h)};function eo(h,b){Pt.call(this),this.H=h,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(eo,Pt),n=eo.prototype,n.open=function(h,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=b,this.readyState=1,ir(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(b.body=h),(this.H||c).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Hi(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ir(this)),this.g&&(this.readyState=3,ir(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ol(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function ol(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var b=h.value?h.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!h.done}))&&(this.response=this.responseText+=b)}h.done?Hi(this):ir(this),this.readyState==3&&ol(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Hi(this))},n.Na=function(h){this.g&&(this.response=h,Hi(this))},n.ga=function(){this.g&&Hi(this)};function Hi(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ir(h)}n.setRequestHeader=function(h,b){this.A.append(h,b)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],b=this.h.entries();for(var x=b.next();!x.done;)x=x.value,h.push(x[0]+": "+x[1]),x=b.next();return h.join(`\r
`)};function ir(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(eo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function qs(h){let b="";return Re(h,function(x,A){b+=A,b+=":",b+=x,b+=`\r
`}),b}function to(h,b,x){e:{for(A in x){var A=!1;break e}A=!0}A||(x=qs(x),typeof h=="string"?x!=null&&ps(x):mt(h,b,x))}function bt(h){Pt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(bt,Pt);var jr=/^https?$/i,Kc=["POST","PUT"];n=bt.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,b,x,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);b=b?b.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Di.g(),this.g.onreadystatechange=E(y(this.Ca,this));try{this.B=!0,this.g.open(b,String(h),!0),this.B=!1}catch(J){no(this,J);return}if(h=x||"",x=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var K in A)x.set(K,A[K]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const J of A.keys())x.set(J,A.get(J));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(x.keys()).find(J=>J.toLowerCase()=="content-type"),K=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Kc,b,void 0)>=0)||A||K||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ge]of x)this.g.setRequestHeader(J,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(J){no(this,J)}};function no(h,b){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=b,h.o=5,Qc(h),ti(h)}function Qc(h){h.A||(h.A=!0,zt(h,"complete"),zt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,zt(this,"complete"),zt(this,"abort"),ti(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ti(this,!0)),bt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?so(this):this.Xa())},n.Xa=function(){so(this)};function so(h){if(h.h&&typeof l<"u"){if(h.v&&ar(h)==4)setTimeout(h.Ca.bind(h),0);else if(zt(h,"readystatechange"),ar(h)==4){h.h=!1;try{const J=h.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var x;if(!(x=b)){var A;if(A=J===0){let ge=String(h.D).match(jt)[1]||null;!ge&&c.self&&c.self.location&&(ge=c.self.location.protocol.slice(0,-1)),A=!jr.test(ge?ge.toLowerCase():"")}x=A}if(x)zt(h,"complete"),zt(h,"success");else{h.o=6;try{var K=ar(h)>2?h.g.statusText:""}catch{K=""}h.l=K+" ["+h.ca()+"]",Qc(h)}}finally{ti(h)}}}}function ti(h,b){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const x=h.g;h.g=null,b||zt(h,"ready");try{x.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ar(h){return h.g?h.g.readyState:0}n.ca=function(){try{return ar(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var b=this.g.responseText;return h&&b.indexOf(h)==0&&(b=b.substring(h.length)),el(b)}};function Nn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ni(h){const b={};h=(h.g&&ar(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(j(h[A]))continue;var x=tl(h[A]);const K=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const J=b[K]||[];b[K]=J,J.push(x)}Ge(b,function(A){return A.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Or(h,b,x){return x&&x.internalChannelParams&&x.internalChannelParams[h]||b}function $i(h){this.za=0,this.i=[],this.j=new gs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Or("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Or("baseRetryDelayMs",5e3,h),this.Za=Or("retryDelaySeedMs",1e4,h),this.Ta=Or("forwardChannelMaxRetries",2,h),this.va=Or("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Li(h&&h.concurrentRequestLimit),this.Ba=new qi,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=$i.prototype,n.ka=8,n.I=1,n.connect=function(h,b,x,A){qt(0),this.W=h,this.H=b||{},x&&A!==void 0&&(this.H.OSID=x,this.H.OAID=A),this.F=this.X,this.J=Qd(this,null,this.W),Dr(this)};function Yc(h){if(ll(h),h.I==3){var b=h.V++,x=sn(h.J);if(mt(x,"SID",h.M),mt(x,"RID",b),mt(x,"TYPE","terminate"),ro(h,x),b=new ys(h,h.j,b),b.M=2,b.A=Ja(sn(x)),x=!1,c.navigator&&c.navigator.sendBeacon)try{x=c.navigator.sendBeacon(b.A.toString(),"")}catch{}!x&&c.Image&&(new Image().src=b.A,x=!0),x||(b.g=Yd(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Us(b)}Kd(h)}function Fi(h){h.g&&(Xc(h),h.g.cancel(),h.g=null)}function ll(h){Fi(h),h.v&&(c.clearTimeout(h.v),h.v=null),ul(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Dr(h){if(!D(h.h)&&!h.m){h.m=!0;var b=h.Ea;fe||R(),he||(fe(),he=!0),k.add(b,h),h.D=0}}function cl(h,b){return de(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=b.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=vn(y(h.Ea,h,b),Gd(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const K=new ys(this,this.j,h);let J=this.o;if(this.U&&(J?(J=B(J),X(J,this.U)):J=this.U),this.u!==null||this.R||(K.J=J,J=null),this.S)e:{for(var b=0,x=0;x<this.i.length;x++){t:{var A=this.i[x];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(b+=A,b>4096){b=x;break e}if(b===4096||x===this.i.length-1){b=x+1;break e}}b=1e3}else b=1e3;b=qd(this,K,b),x=sn(this.J),mt(x,"RID",h),mt(x,"CVER",22),this.G&&mt(x,"X-HTTP-Session-Id",this.G),ro(this,x),J&&(this.R?b="headers="+ps(qs(J))+"&"+b:this.u&&to(x,this.u,J)),He(this.h,K),this.Ra&&mt(x,"TYPE","init"),this.S?(mt(x,"$req",b),mt(x,"SID","null"),K.U=!0,Vs(K,x,null)):Vs(K,x,b),this.I=2}}else this.I==3&&(h?Wc(this,h):this.i.length==0||D(this.h)||Wc(this))};function Wc(h,b){var x;b?x=b.l:x=h.V++;const A=sn(h.J);mt(A,"SID",h.M),mt(A,"RID",x),mt(A,"AID",h.K),ro(h,A),h.u&&h.o&&to(A,h.u,h.o),x=new ys(h,h.j,x,h.D+1),h.u===null&&(x.J=h.o),b&&(h.i=b.G.concat(h.i)),b=qd(h,x,1e3),x.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),He(h.h,x),Vs(x,A,b)}function ro(h,b){h.H&&Re(h.H,function(x,A){mt(b,A,x)}),h.l&&Re({},function(x,A){mt(b,A,x)})}function qd(h,b,x){x=Math.min(h.i.length,x);const A=h.l?y(h.l.Ka,h.l,h):null;e:{var K=h.i;let ze=-1;for(;;){const Yt=["count="+x];ze==-1?x>0?(ze=K[0].g,Yt.push("ofs="+ze)):ze=0:Yt.push("ofs="+ze);let ct=!0;for(let Ot=0;Ot<x;Ot++){var J=K[Ot].g;const Hs=K[Ot].map;if(J-=ze,J<0)ze=Math.max(0,K[Ot].g-100),ct=!1;else try{J="req"+J+"_"||"";try{var ge=Hs instanceof Map?Hs:Object.entries(Hs);for(const[Mr,or]of ge){let lr=or;f(or)&&(lr=nr(or)),Yt.push(J+Mr+"="+encodeURIComponent(lr))}}catch(Mr){throw Yt.push(J+"type="+encodeURIComponent("_badmap")),Mr}}catch{A&&A(Hs)}}if(ct){ge=Yt.join("&");break e}}ge=void 0}return h=h.i.splice(0,x),b.G=h,ge}function Hd(h){if(!h.g&&!h.v){h.Y=1;var b=h.Da;fe||R(),he||(fe(),he=!0),k.add(b,h),h.A=0}}function io(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=vn(y(h.Da,h),Gd(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,$d(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=vn(y(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,qt(10),Fi(this),$d(this))};function Xc(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function $d(h){h.g=new ys(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var b=sn(h.na);mt(b,"RID","rpc"),mt(b,"SID",h.M),mt(b,"AID",h.K),mt(b,"CI",h.F?"0":"1"),!h.F&&h.ia&&mt(b,"TO",h.ia),mt(b,"TYPE","xmlhttp"),ro(h,b),h.u&&h.o&&to(b,h.u,h.o),h.O&&(h.g.H=h.O);var x=h.g;h=h.ba,x.M=1,x.A=Ja(sn(b)),x.u=null,x.R=!0,Pi(x,h)}n.Va=function(){this.C!=null&&(this.C=null,Fi(this),io(this),qt(19))};function ul(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Fd(h,b){var x=null;if(h.g==b){ul(h),Xc(h),h.g=null;var A=2}else if(Se(h.h,b))x=b.G,$e(h.h,b),A=1;else return;if(h.I!=0){if(b.o)if(A==1){x=b.u?b.u.length:0,b=Date.now()-b.F;var K=h.D;A=Sr(),zt(A,new ns(A,x)),Dr(h)}else Hd(h);else if(K=b.m,K==3||K==0&&b.X>0||!(A==1&&cl(h,b)||A==2&&io(h)))switch(x&&x.length>0&&(b=h.h,b.i=b.i.concat(x)),K){case 1:Pr(h,5);break;case 4:Pr(h,10);break;case 3:Pr(h,6);break;default:Pr(h,2)}}}function Gd(h,b){let x=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(x*=2),x*b}function Pr(h,b){if(h.j.info("Error code "+b),b==2){var x=y(h.bb,h),A=h.Ua;const K=!A;A=new Qt(A||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||bn(A,"https"),Ja(A),K?rr(A.toString(),x):Gc(A.toString(),x)}else qt(2);h.I=0,h.l&&h.l.pa(b),Kd(h),ll(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),qt(2)):(this.j.info("Failed to ping google.com"),qt(1))};function Kd(h){if(h.I=0,h.ja=[],h.l){const b=fn(h.h);(b.length!=0||h.i.length!=0)&&(N(h.ja,b),N(h.ja,h.i),h.h.i.length=0,T(h.i),h.i.length=0),h.l.oa()}}function Qd(h,b,x){var A=x instanceof Qt?sn(x):new Qt(x);if(A.g!="")b&&(A.g=b+"."+A.g),Vi(A,A.u);else{var K=c.location;A=K.protocol,b=b?b+"."+K.hostname:K.hostname,K=+K.port;const J=new Qt(null);A&&bn(J,A),b&&(J.g=b),K&&Vi(J,K),x&&(J.h=x),A=J}return x=h.G,b=h.wa,x&&b&&mt(A,x,b),mt(A,"VER",h.ka),ro(h,A),A}function Yd(h,b,x){if(b&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=h.Aa&&!h.ma?new bt(new Ir({ab:x})):new bt(h.ma),b.Fa(h.L),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wd(){}n=Wd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Gi(){}Gi.prototype.g=function(h,b){return new Wn(h,b)};function Wn(h,b){Pt.call(this),this.g=new $i(b),this.l=h,this.h=b&&b.messageUrlParams||null,h=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(h?h["X-WebChannel-Content-Type"]=b.messageContentType:h={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(h?h["X-WebChannel-Client-Profile"]=b.sa:h={"X-WebChannel-Client-Profile":b.sa}),this.g.U=h,(h=b&&b.Qb)&&!j(h)&&(this.g.u=h),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!j(b)&&(this.g.G=b,h=this.h,h!==null&&b in h&&(h=this.h,b in h&&delete h[b])),this.j=new si(this)}_(Wn,Pt),Wn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Wn.prototype.close=function(){Yc(this.g)},Wn.prototype.o=function(h){var b=this.g;if(typeof h=="string"){var x={};x.__data__=h,h=x}else this.v&&(x={},x.__data__=nr(h),h=x);b.i.push(new Mt(b.Ya++,h)),b.I==3&&Dr(b)},Wn.prototype.N=function(){this.g.l=null,delete this.j,Yc(this.g),delete this.g,Wn.Z.N.call(this)};function Xd(h){Kt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var b=h.__sm__;if(b){e:{for(const x in b){h=x;break e}h=void 0}(this.i=h)&&(h=this.i,b=b!==null&&h in b?b[h]:void 0),this.data=b}else this.data=h}_(Xd,Kt);function Jd(){ts.call(this),this.status=1}_(Jd,ts);function si(h){this.g=h}_(si,Wd),si.prototype.ra=function(){zt(this.g,"a")},si.prototype.qa=function(h){zt(this.g,new Xd(h))},si.prototype.pa=function(h){zt(this.g,new Jd)},si.prototype.oa=function(){zt(this.g,"b")},Gi.prototype.createWebChannel=Gi.prototype.g,Wn.prototype.send=Wn.prototype.o,Wn.prototype.open=Wn.prototype.m,Wn.prototype.close=Wn.prototype.close,RE=function(){return new Gi},kE=function(){return Sr()},CE=It,B0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Cr.NO_ERROR=0,Cr.TIMEOUT=8,Cr.HTTP_ERROR=6,Ef=Cr,Oi.COMPLETE="complete",NE=Oi,sr.EventType=ms,ms.OPEN="a",ms.CLOSE="b",ms.ERROR="c",ms.MESSAGE="d",Pt.prototype.listen=Pt.prototype.J,Vu=sr,bt.prototype.listenOnce=bt.prototype.K,bt.prototype.getLastError=bt.prototype.Ha,bt.prototype.getLastErrorCode=bt.prototype.ya,bt.prototype.getStatus=bt.prototype.ca,bt.prototype.getResponseJson=bt.prototype.La,bt.prototype.getResponseText=bt.prototype.la,bt.prototype.send=bt.prototype.ea,bt.prototype.setWithCredentials=bt.prototype.Fa,AE=bt}).apply(typeof nf<"u"?nf:typeof self<"u"?self:typeof window<"u"?window:{});const G2="@firebase/firestore",K2="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qn.UNAUTHENTICATED=new qn(null),qn.GOOGLE_CREDENTIALS=new qn("google-credentials-uid"),qn.FIRST_PARTY=new qn("first-party-uid"),qn.MOCK_USER=new qn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=new Py("@firebase/firestore");function Kl(){return Lo.logLevel}function be(n,...e){if(Lo.logLevel<=Je.DEBUG){const t=e.map(Ly);Lo.debug(`Firestore (${Nc}): ${n}`,...t)}}function Ci(n,...e){if(Lo.logLevel<=Je.ERROR){const t=e.map(Ly);Lo.error(`Firestore (${Nc}): ${n}`,...t)}}function Vo(n,...e){if(Lo.logLevel<=Je.WARN){const t=e.map(Ly);Lo.warn(`Firestore (${Nc}): ${n}`,...t)}}function Ly(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,IE(n,s,t)}function IE(n,e,t){let s=`FIRESTORE (${Nc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Ci(s),new Error(s)}function ft(n,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,n||IE(e,a,s)}function Ue(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Jr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(qn.UNAUTHENTICATED)))}shutdown(){}}class IC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class jC{constructor(e){this.t=e,this.currentUser=qn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ft(this.o===void 0,42304);let s=this.i;const a=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new xi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new xi,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await a(this.currentUser)}))},f=g=>{be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(be("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new xi)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ft(typeof s.accessToken=="string",31837,{l:s}),new jE(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string",2055,{h:e}),new qn(e)}}class OC{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=qn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class DC{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new OC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(qn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Q2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PC{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ks(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ft(this.o===void 0,3512);const s=l=>{l.error!=null&&be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,be("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const a=l=>{be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Q2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ft(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Q2(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=MC(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%62))}return s}}function Ze(n,e){return n<e?-1:n>e?1:0}function z0(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const a=n.charAt(s),l=e.charAt(s);if(a!==l)return h0(a)===h0(l)?Ze(a,l):h0(a)?1:-1}return Ze(n.length,e.length)}const LC=55296,VC=57343;function h0(n){const e=n.charCodeAt(0);return e>=LC&&e<=VC}function mc(n,e,t){return n.length===e.length&&n.every(((s,a)=>t(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="__name__";class qr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Pe(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Pe(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return qr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=qr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ze(e.length,t.length)}static compareSegments(e,t){const s=qr.isNumericId(e),a=qr.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?qr.extractNumericId(e).compare(qr.extractNumericId(t)):z0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Na.fromString(e.substring(4,e.length-2))}}class Nt extends qr{construct(e,t,s){return new Nt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new pe(oe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new Nt(t)}static emptyPath(){return new Nt([])}}const UC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xn extends qr{construct(e,t,s){return new xn(e,t,s)}static isValidIdentifier(e){return UC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===q0}static keyField(){return new xn([q0])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(s.length===0)throw new pe(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new pe(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new pe(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,a+=2}else f==="`"?(c=!c,a++):f!=="."||c?(s+=f,a++):(l(),a++)}if(l(),c)throw new pe(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xn(t)}static emptyPath(){return new xn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(Nt.fromString(e))}static fromName(e){return new Ne(Nt.fromString(e).popFirst(5))}static empty(){return new Ne(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new Nt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(n,e,t){if(!t)throw new pe(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function PE(n,e,t,s){if(e===!0&&s===!0)throw new pe(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Y2(n){if(!Ne.isDocumentKey(n))throw new pe(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function W2(n){if(Ne.isDocumentKey(n))throw new pe(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ME(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Em(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Pe(12329,{type:typeof n})}function $n(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new pe(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Em(n);throw new pe(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(n,e){const t={typeString:n};return e&&(t.value=e),t}function bd(n,e){if(!ME(n))throw new pe(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(a&&typeof c!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new pe(oe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=-62135596800,J2=1e6;class Et{static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*J2);return new Et(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<X2)throw new pe(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/J2}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bd(e,Et._jsonSchema))return new Et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-X2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Et._jsonSchemaVersion="firestore/timestamp/1.0",Et._jsonSchema={type:hn("string",Et._jsonSchemaVersion),seconds:hn("number"),nanoseconds:hn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new Et(0,0))}static max(){return new Le(new Et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td=-1;function BC(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=Le.fromTimestamp(s===1e9?new Et(t+1,0):new Et(t,s));return new Ia(a,Ne.empty(),e)}function zC(n){return new Ia(n.readTime,n.key,td)}class Ia{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ia(Le.min(),Ne.empty(),td)}static max(){return new Ia(Le.max(),Ne.empty(),td)}}function qC(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ne.comparator(n.documentKey,e.documentKey),t!==0?t:Ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $C{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cc(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==HC)throw n;be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue(((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.reject(t)}static resolve(e){return new ue(((t,s)=>{t(e)}))}static reject(e){return new ue(((t,s)=>{s(e)}))}static waitFor(e){return new ue(((t,s)=>{let a=0,l=0,c=!1;e.forEach((f=>{++a,f.next((()=>{++l,c&&l===a&&t()}),(g=>s(g)))})),c=!0,l===a&&t()}))}static or(e){let t=ue.resolve(!1);for(const s of e)t=t.next((a=>a?ue.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,l)=>{s.push(t.call(this,a,l))})),this.waitFor(s)}static mapArray(e,t){return new ue(((s,a)=>{const l=e.length,c=new Array(l);let f=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((v=>{c[y]=v,++f,f===l&&s(c)}),(v=>a(v)))}}))}static doWhile(e,t){return new ue(((s,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):s()};l()}))}}function FC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function kc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Tm.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy=-1;function Sm(n){return n==null}function Of(n){return n===0&&1/n==-1/0}function GC(n){return typeof n=="number"&&Number.isInteger(n)&&!Of(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="";function KC(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Z2(e)),e=QC(n.get(t),e);return Z2(e)}function QC(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case LE:t+="";break;default:t+=l}}return t}function Z2(n){return n+LE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ua(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function VE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,t){this.comparator=e,this.root=t||On.EMPTY}insert(e,t){return new Bt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,On.BLACK,null,null))}remove(e){return new Bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,On.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sf(this.root,e,this.comparator,!1)}getReverseIterator(){return new sf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sf(this.root,e,this.comparator,!0)}}class sf{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class On{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??On.RED,this.left=a??On.EMPTY,this.right=l??On.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new On(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return On.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return On.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,On.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,On.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Pe(27949);return e+(this.isRed()?0:1)}}On.EMPTY=null,On.RED=!0,On.BLACK=!1;On.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe(57766)}get value(){throw Pe(16141)}get color(){throw Pe(16727)}get left(){throw Pe(29726)}get right(){throw Pe(36894)}copy(e,t,s,a,l){return this}insert(e,t,s){return new On(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.comparator=e,this.data=new Bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new t1(this.data.getIterator())}getIteratorFrom(e){return new t1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof yn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new yn(this.comparator);return t.data=e,t}}class t1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e){this.fields=e,e.sort(xn.comparator)}static empty(){return new Os([])}unionWith(e){let t=new yn(xn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Os(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return mc(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new UE("Invalid base64 string: "+l):l}})(e);return new Tn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new Tn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tn.EMPTY_BYTE_STRING=new Tn("");const YC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ja(n){if(ft(!!n,39018),typeof n=="string"){let e=0;const t=YC.exec(n);if(ft(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Zt(n.seconds),nanos:Zt(n.nanos)}}function Zt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Oa(n){return typeof n=="string"?Tn.fromBase64String(n):Tn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="server_timestamp",zE="__type__",qE="__previous_value__",HE="__local_write_time__";function Uy(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[zE])==null?void 0:s.stringValue)===BE}function Am(n){const e=n.mapValue.fields[qE];return Uy(e)?Am(e):e}function nd(n){const e=ja(n.mapValue.fields[HE].timestampValue);return new Et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,t,s,a,l,c,f,g,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=v}}const Df="(default)";class gc{constructor(e,t){this.projectId=e,this.database=t||Df}static empty(){return new gc("","")}get isDefaultDatabase(){return this.database===Df}isEqual(e){return e instanceof gc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="__type__",XC="__max__",rf={mapValue:{}},FE="__vector__",Pf="value";function Da(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Uy(n)?4:ZC(n)?9007199254740991:JC(n)?10:11:Pe(28295,{value:n})}function Yr(n,e){if(n===e)return!0;const t=Da(n);if(t!==Da(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return nd(n).isEqual(nd(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=ja(a.timestampValue),f=ja(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return Oa(a.bytesValue).isEqual(Oa(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return Zt(a.geoPointValue.latitude)===Zt(l.geoPointValue.latitude)&&Zt(a.geoPointValue.longitude)===Zt(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Zt(a.integerValue)===Zt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Zt(a.doubleValue),f=Zt(l.doubleValue);return c===f?Of(c)===Of(f):isNaN(c)&&isNaN(f)}return!1})(n,e);case 9:return mc(n.arrayValue.values||[],e.arrayValue.values||[],Yr);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},f=l.mapValue.fields||{};if(e1(c)!==e1(f))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(f[g]===void 0||!Yr(c[g],f[g])))return!1;return!0})(n,e);default:return Pe(52216,{left:n})}}function sd(n,e){return(n.values||[]).find((t=>Yr(t,e)))!==void 0}function pc(n,e){if(n===e)return 0;const t=Da(n),s=Da(e);if(t!==s)return Ze(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ze(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=Zt(l.integerValue||l.doubleValue),g=Zt(c.integerValue||c.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(n,e);case 3:return n1(n.timestampValue,e.timestampValue);case 4:return n1(nd(n),nd(e));case 5:return z0(n.stringValue,e.stringValue);case 6:return(function(l,c){const f=Oa(l),g=Oa(c);return f.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),g=c.split("/");for(let y=0;y<f.length&&y<g.length;y++){const v=Ze(f[y],g[y]);if(v!==0)return v}return Ze(f.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=Ze(Zt(l.latitude),Zt(c.latitude));return f!==0?f:Ze(Zt(l.longitude),Zt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return s1(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var E,T,N,P;const f=l.fields||{},g=c.fields||{},y=(E=f[Pf])==null?void 0:E.arrayValue,v=(T=g[Pf])==null?void 0:T.arrayValue,_=Ze(((N=y==null?void 0:y.values)==null?void 0:N.length)||0,((P=v==null?void 0:v.values)==null?void 0:P.length)||0);return _!==0?_:s1(y,v)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===rf.mapValue&&c===rf.mapValue)return 0;if(l===rf.mapValue)return 1;if(c===rf.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),y=c.fields||{},v=Object.keys(y);g.sort(),v.sort();for(let _=0;_<g.length&&_<v.length;++_){const E=z0(g[_],v[_]);if(E!==0)return E;const T=pc(f[g[_]],y[v[_]]);if(T!==0)return T}return Ze(g.length,v.length)})(n.mapValue,e.mapValue);default:throw Pe(23264,{he:t})}}function n1(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ze(n,e);const t=ja(n),s=ja(e),a=Ze(t.seconds,s.seconds);return a!==0?a:Ze(t.nanos,s.nanos)}function s1(n,e){const t=n.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const l=pc(t[a],s[a]);if(l)return l}return Ze(t.length,s.length)}function yc(n){return H0(n)}function H0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=ja(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Oa(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ne.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",a=!0;for(const l of t.values||[])a?a=!1:s+=",",s+=H0(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of s)l?l=!1:a+=",",a+=`${c}:${H0(t.fields[c])}`;return a+"}"})(n.mapValue):Pe(61005,{value:n})}function Tf(n){switch(Da(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Am(n);return e?16+Tf(e):16;case 5:return 2*n.stringValue.length;case 6:return Oa(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,l)=>a+Tf(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let a=0;return Ua(s.fields,((l,c)=>{a+=l.length+Tf(c)})),a})(n.mapValue);default:throw Pe(13486,{value:n})}}function r1(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $0(n){return!!n&&"integerValue"in n}function By(n){return!!n&&"arrayValue"in n}function i1(n){return!!n&&"nullValue"in n}function a1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sf(n){return!!n&&"mapValue"in n}function JC(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[$E])==null?void 0:s.stringValue)===FE}function Hu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ua(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Hu(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hu(n.arrayValue.values[t]);return e}return{...n}}function ZC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===XC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.value=e}static empty(){return new ds({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Sf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hu(t)}setAll(e){let t=xn.emptyPath(),s={},a=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,a),s={},a=[],t=f.popLast()}c?s[f.lastSegment()]=Hu(c):a.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());Sf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];Sf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){Ua(t,((a,l)=>e[a]=l));for(const a of s)delete e[a]}clone(){return new ds(Hu(this.value))}}function GE(n){const e=[];return Ua(n.fields,((t,s)=>{const a=new xn([t]);if(Sf(s)){const l=GE(s.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new Os(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,t,s,a,l,c,f){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new Hn(e,0,Le.min(),Le.min(),Le.min(),ds.empty(),0)}static newFoundDocument(e,t,s,a){return new Hn(e,1,t,Le.min(),s,a,0)}static newNoDocument(e,t){return new Hn(e,2,t,Le.min(),Le.min(),ds.empty(),0)}static newUnknownDocument(e,t){return new Hn(e,3,t,Le.min(),Le.min(),ds.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ds.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ds.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t){this.position=e,this.inclusive=t}}function o1(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?s=Ne.comparator(Ne.fromName(c.referenceValue),t.key):s=pc(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function l1(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Yr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,t="asc"){this.field=e,this.dir=t}}function e6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{}class dn extends KE{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new n6(e,t,s):t==="array-contains"?new i6(e,s):t==="in"?new a6(e,s):t==="not-in"?new o6(e,s):t==="array-contains-any"?new l6(e,s):new dn(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new s6(e,s):new r6(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(pc(t,this.value)):t!==null&&Da(this.value)===Da(t)&&this.matchesComparison(pc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _r extends KE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new _r(e,t)}matches(e){return QE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function QE(n){return n.op==="and"}function YE(n){return t6(n)&&QE(n)}function t6(n){for(const e of n.filters)if(e instanceof _r)return!1;return!0}function F0(n){if(n instanceof dn)return n.field.canonicalString()+n.op.toString()+yc(n.value);if(YE(n))return n.filters.map((e=>F0(e))).join(",");{const e=n.filters.map((t=>F0(t))).join(",");return`${n.op}(${e})`}}function WE(n,e){return n instanceof dn?(function(s,a){return a instanceof dn&&s.op===a.op&&s.field.isEqual(a.field)&&Yr(s.value,a.value)})(n,e):n instanceof _r?(function(s,a){return a instanceof _r&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((l,c,f)=>l&&WE(c,a.filters[f])),!0):!1})(n,e):void Pe(19439)}function XE(n){return n instanceof dn?(function(t){return`${t.field.canonicalString()} ${t.op} ${yc(t.value)}`})(n):n instanceof _r?(function(t){return t.op.toString()+" {"+t.getFilters().map(XE).join(" ,")+"}"})(n):"Filter"}class n6 extends dn{constructor(e,t,s){super(e,t,s),this.key=Ne.fromName(s.referenceValue)}matches(e){const t=Ne.comparator(e.key,this.key);return this.matchesComparison(t)}}class s6 extends dn{constructor(e,t){super(e,"in",t),this.keys=JE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class r6 extends dn{constructor(e,t){super(e,"not-in",t),this.keys=JE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function JE(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Ne.fromName(s.referenceValue)))}class i6 extends dn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return By(t)&&sd(t.arrayValue,this.value)}}class a6 extends dn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&sd(this.value.arrayValue,t)}}class o6 extends dn{constructor(e,t){super(e,"not-in",t)}matches(e){if(sd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!sd(this.value.arrayValue,t)}}class l6 extends dn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!By(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>sd(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e,t=null,s=[],a=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function c1(n,e=null,t=[],s=[],a=null,l=null,c=null){return new c6(n,e,t,s,a,l,c)}function zy(n){const e=Ue(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>F0(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Sm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>yc(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>yc(s))).join(",")),e.Te=t}return e.Te}function qy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!e6(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!WE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!l1(n.startAt,e.startAt)&&l1(n.endAt,e.endAt)}function G0(n){return Ne.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,t=null,s=[],a=[],l=null,c="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function u6(n,e,t,s,a,l,c,f){return new Rc(n,e,t,s,a,l,c,f)}function Nm(n){return new Rc(n)}function u1(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ZE(n){return n.collectionGroup!==null}function $u(n){const e=Ue(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new yn(xn.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new rd(l,s))})),t.has(xn.keyField().canonicalString())||e.Ie.push(new rd(xn.keyField(),s))}return e.Ie}function Fr(n){const e=Ue(n);return e.Ee||(e.Ee=d6(e,$u(n))),e.Ee}function d6(n,e){if(n.limitType==="F")return c1(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new rd(a.field,l)}));const t=n.endAt?new Mf(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Mf(n.startAt.position,n.startAt.inclusive):null;return c1(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function K0(n,e){const t=n.filters.concat([e]);return new Rc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Lf(n,e,t){return new Rc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Cm(n,e){return qy(Fr(n),Fr(e))&&n.limitType===e.limitType}function eT(n){return`${zy(Fr(n))}|lt:${n.limitType}`}function Ql(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>XE(a))).join(", ")}]`),Sm(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>yc(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>yc(a))).join(",")),`Target(${s})`})(Fr(n))}; limitType=${n.limitType})`}function km(n,e){return e.isFoundDocument()&&(function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ne.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,a){for(const l of $u(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(s,a){return!(s.startAt&&!(function(c,f,g){const y=o1(c,f,g);return c.inclusive?y<=0:y<0})(s.startAt,$u(s),a)||s.endAt&&!(function(c,f,g){const y=o1(c,f,g);return c.inclusive?y>=0:y>0})(s.endAt,$u(s),a))})(n,e)}function h6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function tT(n){return(e,t)=>{let s=!1;for(const a of $u(n)){const l=f6(a,e,t);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function f6(n,e,t){const s=n.field.isKeyField()?Ne.comparator(e.key,t.key):(function(l,c,f){const g=c.data.field(l),y=f.data.field(l);return g!==null&&y!==null?pc(g,y):Pe(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Pe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ua(this.inner,((t,s)=>{for(const[a,l]of s)e(a,l)}))}isEmpty(){return VE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6=new Bt(Ne.comparator);function ki(){return m6}const nT=new Bt(Ne.comparator);function Uu(...n){let e=nT;for(const t of n)e=e.insert(t.key,t);return e}function sT(n){let e=nT;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Io(){return Fu()}function rT(){return Fu()}function Fu(){return new Fo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const g6=new Bt(Ne.comparator),p6=new yn(Ne.comparator);function et(...n){let e=p6;for(const t of n)e=e.add(t);return e}const y6=new yn(Ze);function v6(){return y6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Of(e)?"-0":e}}function iT(n){return{integerValue:""+n}}function b6(n,e){return GC(e)?iT(e):Hy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(){this._=void 0}}function w6(n,e,t){return n instanceof id?(function(a,l){const c={fields:{[zE]:{stringValue:BE},[HE]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Uy(l)&&(l=Am(l)),l&&(c.fields[qE]=l),{mapValue:c}})(t,e):n instanceof vc?oT(n,e):n instanceof bc?lT(n,e):(function(a,l){const c=aT(a,l),f=d1(c)+d1(a.Ae);return $0(c)&&$0(a.Ae)?iT(f):Hy(a.serializer,f)})(n,e)}function _6(n,e,t){return n instanceof vc?oT(n,e):n instanceof bc?lT(n,e):t}function aT(n,e){return n instanceof Vf?(function(s){return $0(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class id extends Rm{}class vc extends Rm{constructor(e){super(),this.elements=e}}function oT(n,e){const t=cT(e);for(const s of n.elements)t.some((a=>Yr(a,s)))||t.push(s);return{arrayValue:{values:t}}}class bc extends Rm{constructor(e){super(),this.elements=e}}function lT(n,e){let t=cT(e);for(const s of n.elements)t=t.filter((a=>!Yr(a,s)));return{arrayValue:{values:t}}}class Vf extends Rm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function d1(n){return Zt(n.integerValue||n.doubleValue)}function cT(n){return By(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e,t){this.field=e,this.transform=t}}function x6(n,e){return n.field.isEqual(e.field)&&(function(s,a){return s instanceof vc&&a instanceof vc||s instanceof bc&&a instanceof bc?mc(s.elements,a.elements,Yr):s instanceof Vf&&a instanceof Vf?Yr(s.Ae,a.Ae):s instanceof id&&a instanceof id})(n.transform,e.transform)}class E6{constructor(e,t){this.version=e,this.transformResults=t}}class Jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Af(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Im{}function uT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new jm(n.key,Jn.none()):new wd(n.key,n.data,Jn.none());{const t=n.data,s=ds.empty();let a=new yn(xn.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),a=a.add(l)}return new Ba(n.key,s,new Os(a.toArray()),Jn.none())}}function T6(n,e,t){n instanceof wd?(function(a,l,c){const f=a.value.clone(),g=f1(a.fieldTransforms,l,c.transformResults);f.setAll(g),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):n instanceof Ba?(function(a,l,c){if(!Af(a.precondition,l))return void l.convertToUnknownDocument(c.version);const f=f1(a.fieldTransforms,l,c.transformResults),g=l.data;g.setAll(dT(a)),g.setAll(f),l.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(n,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Gu(n,e,t,s){return n instanceof wd?(function(l,c,f,g){if(!Af(l.precondition,c))return f;const y=l.value.clone(),v=m1(l.fieldTransforms,g,c);return y.setAll(v),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null})(n,e,t,s):n instanceof Ba?(function(l,c,f,g){if(!Af(l.precondition,c))return f;const y=m1(l.fieldTransforms,g,c),v=c.data;return v.setAll(dT(l)),v.setAll(y),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((_=>_.field)))})(n,e,t,s):(function(l,c,f){return Af(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(n,e,t)}function S6(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),l=aT(s.transform,a||null);l!=null&&(t===null&&(t=ds.empty()),t.set(s.field,l))}return t||null}function h1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&mc(s,a,((l,c)=>x6(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class wd extends Im{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ba extends Im{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function dT(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function f1(n,e,t){const s=new Map;ft(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,f=e.data.field(l.field);s.set(l.field,_6(c,f,t[a]))}return s}function m1(n,e,t){const s=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);s.set(a.field,w6(l,c,e))}return s}class jm extends Im{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class A6 extends Im{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&T6(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Gu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Gu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=rT();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(a.key)?null:f;const g=uT(c,f);g!==null&&s.set(a.key,g),c.isValidDocument()||c.convertToNoDocument(Le.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),et())}isEqual(e){return this.batchId===e.batchId&&mc(this.mutations,e.mutations,((t,s)=>h1(t,s)))&&mc(this.baseMutations,e.baseMutations,((t,s)=>h1(t,s)))}}class Fy{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){ft(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return g6})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,s[c].version);return new Fy(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cn,rt;function R6(n){switch(n){case oe.OK:return Pe(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Pe(15467,{code:n})}}function hT(n){if(n===void 0)return Ci("GRPC error has no .code"),oe.UNKNOWN;switch(n){case cn.OK:return oe.OK;case cn.CANCELLED:return oe.CANCELLED;case cn.UNKNOWN:return oe.UNKNOWN;case cn.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case cn.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case cn.INTERNAL:return oe.INTERNAL;case cn.UNAVAILABLE:return oe.UNAVAILABLE;case cn.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case cn.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case cn.NOT_FOUND:return oe.NOT_FOUND;case cn.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case cn.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case cn.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case cn.ABORTED:return oe.ABORTED;case cn.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case cn.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case cn.DATA_LOSS:return oe.DATA_LOSS;default:return Pe(39323,{code:n})}}(rt=cn||(cn={}))[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6=new Na([4294967295,4294967295],0);function g1(n){const e=I6().encode(n),t=new SE;return t.update(e),new Uint8Array(t.digest())}function p1(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Na([t,s],0),new Na([a,l],0)]}class Gy{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Bu(`Invalid padding: ${t}`);if(s<0)throw new Bu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Bu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Bu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Na.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(Na.fromNumber(s)));return a.compare(j6)===1&&(a=new Na([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=g1(e),[s,a]=p1(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,a,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Gy(l,a,t);return s.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=g1(e),[s,a]=p1(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Bu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,_d.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Om(Le.min(),a,new Bt(Ze),ki(),et())}}class _d{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new _d(s,t,et(),et(),et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,t,s,a){this.be=e,this.removedTargetIds=t,this.key=s,this.De=a}}class fT{constructor(e,t){this.targetId=e,this.Ce=t}}class mT{constructor(e,t,s=Tn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class y1{constructor(){this.ve=0,this.Fe=v1(),this.Me=Tn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=et(),t=et(),s=et();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Pe(38017,{changeType:l})}})),new _d(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=v1()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ft(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class O6{constructor(e){this.Ge=e,this.ze=new Map,this.je=ki(),this.Je=af(),this.He=af(),this.Ye=new Bt(Ze)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Pe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(G0(l))if(s===0){const c=new Ne(l.path);this.et(t,c,Hn.newNoDocument(c,Le.min()))}else ft(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const f=this.ut(e),g=f?this.ct(f,e,c):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=t;let c,f;try{c=Oa(s).toUint8Array()}catch(g){if(g instanceof UE)return Vo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new Gy(c,a,l)}catch(g){return Vo(g instanceof Bu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&G0(f.target)){const g=new Ne(f.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,Hn.newNoDocument(g,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let s=et();this.He.forEach(((l,c)=>{let f=!0;c.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new Om(e,t,this.Ye,this.je,s);return this.je=ki(),this.Je=af(),this.He=af(),this.Ye=new Bt(Ze),a}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new y1,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new yn(Ze),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new yn(Ze),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||be("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new y1),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function af(){return new Bt(Ne.comparator)}function v1(){return new Bt(Ne.comparator)}const D6={asc:"ASCENDING",desc:"DESCENDING"},P6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},M6={and:"AND",or:"OR"};class L6{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Q0(n,e){return n.useProto3Json||Sm(e)?e:{value:e}}function Uf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function V6(n,e){return Uf(n,e.toTimestamp())}function Gr(n){return ft(!!n,49232),Le.fromTimestamp((function(t){const s=ja(t);return new Et(s.seconds,s.nanos)})(n))}function Ky(n,e){return Y0(n,e).canonicalString()}function Y0(n,e){const t=(function(a){return new Nt(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function pT(n){const e=Nt.fromString(n);return ft(_T(e),10190,{key:e.toString()}),e}function W0(n,e){return Ky(n.databaseId,e.path)}function f0(n,e){const t=pT(e);if(t.get(1)!==n.databaseId.projectId)throw new pe(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new pe(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ne(vT(t))}function yT(n,e){return Ky(n.databaseId,e)}function U6(n){const e=pT(n);return e.length===4?Nt.emptyPath():vT(e)}function X0(n){return new Nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function vT(n){return ft(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function b1(n,e,t){return{name:W0(n,e),fields:t.value.mapValue.fields}}function B6(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Pe(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(y,v){return y.useProto3Json?(ft(v===void 0||typeof v=="string",58123),Tn.fromBase64String(v||"")):(ft(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Tn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(y){const v=y.code===void 0?oe.UNKNOWN:hT(y.code);return new pe(v,y.message||"")})(c);t=new mT(s,a,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=f0(n,s.document.name),l=Gr(s.document.updateTime),c=s.document.createTime?Gr(s.document.createTime):Le.min(),f=new ds({mapValue:{fields:s.document.fields}}),g=Hn.newFoundDocument(a,l,c,f),y=s.targetIds||[],v=s.removedTargetIds||[];t=new Nf(y,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=f0(n,s.document),l=s.readTime?Gr(s.readTime):Le.min(),c=Hn.newNoDocument(a,l),f=s.removedTargetIds||[];t=new Nf([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=f0(n,s.document),l=s.removedTargetIds||[];t=new Nf([],l,a,null)}else{if(!("filter"in e))return Pe(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,c=new k6(a,l),f=s.targetId;t=new fT(f,c)}}return t}function z6(n,e){let t;if(e instanceof wd)t={update:b1(n,e.key,e.value)};else if(e instanceof jm)t={delete:W0(n,e.key)};else if(e instanceof Ba)t={update:b1(n,e.key,e.data),updateMask:W6(e.fieldMask)};else{if(!(e instanceof A6))return Pe(16599,{Vt:e.type});t={verify:W0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const f=c.transform;if(f instanceof id)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof vc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof bc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Vf)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw Pe(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:V6(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Pe(27497)})(n,e.precondition)),t}function q6(n,e){return n&&n.length>0?(ft(e!==void 0,14353),n.map((t=>(function(a,l){let c=a.updateTime?Gr(a.updateTime):Gr(l);return c.isEqual(Le.min())&&(c=Gr(l)),new E6(c,a.transformResults||[])})(t,e)))):[]}function H6(n,e){return{documents:[yT(n,e.path)]}}function $6(n,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=yT(n,a);const l=(function(y){if(y.length!==0)return wT(_r.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(y){if(y.length!==0)return y.map((v=>(function(E){return{field:Yl(E.field),direction:K6(E.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=Q0(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:a}}function F6(n){let e=U6(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){ft(s===1,65062);const v=t.from[0];v.allDescendants?a=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(_){const E=bT(_);return E instanceof _r&&YE(E)?E.getFilters():[E]})(t.where));let c=[];t.orderBy&&(c=(function(_){return _.map((E=>(function(N){return new rd(Wl(N.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(E)))})(t.orderBy));let f=null;t.limit&&(f=(function(_){let E;return E=typeof _=="object"?_.value:_,Sm(E)?null:E})(t.limit));let g=null;t.startAt&&(g=(function(_){const E=!!_.before,T=_.values||[];return new Mf(T,E)})(t.startAt));let y=null;return t.endAt&&(y=(function(_){const E=!_.before,T=_.values||[];return new Mf(T,E)})(t.endAt)),u6(e,a,c,l,f,"F",g,y)}function G6(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function bT(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Wl(t.unaryFilter.field);return dn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Wl(t.unaryFilter.field);return dn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Wl(t.unaryFilter.field);return dn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Wl(t.unaryFilter.field);return dn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Pe(61313);default:return Pe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return dn.create(Wl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Pe(58110);default:return Pe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return _r.create(t.compositeFilter.filters.map((s=>bT(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Pe(1026)}})(t.compositeFilter.op))})(n):Pe(30097,{filter:n})}function K6(n){return D6[n]}function Q6(n){return P6[n]}function Y6(n){return M6[n]}function Yl(n){return{fieldPath:n.canonicalString()}}function Wl(n){return xn.fromServerFormat(n.fieldPath)}function wT(n){return n instanceof dn?(function(t){if(t.op==="=="){if(a1(t.value))return{unaryFilter:{field:Yl(t.field),op:"IS_NAN"}};if(i1(t.value))return{unaryFilter:{field:Yl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(a1(t.value))return{unaryFilter:{field:Yl(t.field),op:"IS_NOT_NAN"}};if(i1(t.value))return{unaryFilter:{field:Yl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yl(t.field),op:Q6(t.op),value:t.value}}})(n):n instanceof _r?(function(t){const s=t.getFilters().map((a=>wT(a)));return s.length===1?s[0]:{compositeFilter:{op:Y6(t.op),filters:s}}})(n):Pe(54877,{filter:n})}function W6(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function _T(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,t,s,a,l=Le.min(),c=Le.min(),f=Tn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new xa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e){this.yt=e}}function J6(n){const e=F6({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Lf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(){this.Cn=new ek}addToCollectionParentIndex(e,t){return this.Cn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(Ia.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(Ia.min())}updateCollectionGroup(e,t,s){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class ek{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new yn(Nt.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new yn(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xT=41943040;class us{static withCacheSize(e){return new us(e,us.DEFAULT_COLLECTION_PERCENTILE,us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */us.DEFAULT_COLLECTION_PERCENTILE=10,us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,us.DEFAULT=new us(xT,us.DEFAULT_COLLECTION_PERCENTILE,us.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),us.DISABLED=new us(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new wc(0)}static cr(){return new wc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="LruGarbageCollector",tk=1048576;function x1([n,e],[t,s]){const a=Ze(n,t);return a===0?Ze(e,s):a}class nk{constructor(e){this.Ir=e,this.buffer=new yn(x1),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();x1(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class sk{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){be(_1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){kc(t)?be(_1,"Ignoring IndexedDB error during garbage collection: ",t):await Cc(t)}await this.Vr(3e5)}))}}class rk{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return ue.resolve(Tm.ce);const s=new nk(t);return this.mr.forEachTarget(e,(a=>s.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>s.Ar(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(be("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(w1)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),w1):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,a,l,c,f,g,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),a=this.params.maximumSequenceNumbersToCollect):a=_,c=Date.now(),this.nthSequenceNumber(e,a)))).next((_=>(s=_,f=Date.now(),this.removeTargets(e,s,t)))).next((_=>(l=_,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((_=>(y=Date.now(),Kl()<=Je.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${a} in `+(f-c)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${_} documents in `+(y-g)+`ms
Total Duration: ${y-v}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:_}))))}}function ik(n,e){return new rk(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(){this.changes=new Fo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ue.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&Gu(s.mutation,a,Os.empty(),Et.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,et()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=et()){const a=Io();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((l=>{let c=Uu();return l.forEach(((f,g)=>{c=c.insert(f,g.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=Io();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,et())))}populateOverlays(e,t,s){const a=[];return s.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,s,a){let l=ki();const c=Fu(),f=(function(){return Fu()})();return t.forEach(((g,y)=>{const v=s.get(y.key);a.has(y.key)&&(v===void 0||v.mutation instanceof Ba)?l=l.insert(y.key,y):v!==void 0?(c.set(y.key,v.mutation.getFieldMask()),Gu(v.mutation,y,v.mutation.getFieldMask(),Et.now())):c.set(y.key,Os.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,v)=>c.set(y,v))),t.forEach(((y,v)=>f.set(y,new ok(v,c.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=Fu();let a=new Bt(((c,f)=>c-f)),l=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let v=s.get(g)||Os.empty();v=f.applyToLocalView(y,v),s.set(g,v);const _=(a.get(f.batchId)||et()).add(g);a=a.insert(f.batchId,_)}))})).next((()=>{const c=[],f=a.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),y=g.key,v=g.value,_=rT();v.forEach((E=>{if(!l.has(E)){const T=uT(t.get(E),s.get(E));T!==null&&_.set(E,T),l=l.add(E)}})),c.push(this.documentOverlayCache.saveOverlays(e,y,_))}return ue.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return(function(c){return Ne.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ZE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):ue.resolve(Io());let f=td,g=l;return c.next((y=>ue.forEach(y,((v,_)=>(f<_.largestBatchId&&(f=_.largestBatchId),l.get(v)?ue.resolve():this.remoteDocumentCache.getEntry(e,v).next((E=>{g=g.insert(v,E)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,et()))).next((v=>({batchId:f,changes:sT(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ne(t)).next((s=>{let a=Uu();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const l=t.collectionGroup;let c=Uu();return this.indexManager.getCollectionParents(e,l).next((f=>ue.forEach(f,(g=>{const y=(function(_,E){return new Rc(E,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,a).next((v=>{v.forEach(((_,E)=>{c=c.insert(_,E)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,a)))).next((c=>{l.forEach(((g,y)=>{const v=y.getKey();c.get(v)===null&&(c=c.insert(v,Hn.newInvalidDocument(v)))}));let f=Uu();return c.forEach(((g,y)=>{const v=l.get(g);v!==void 0&&Gu(v.mutation,y,Os.empty(),Et.now()),km(t,y)&&(f=f.insert(g,y))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ue.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Gr(a.createTime)}})(t)),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:J6(a.bundledQuery),readTime:Gr(a.readTime)}})(t)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(){this.overlays=new Bt(Ne.comparator),this.qr=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Io();return ue.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&s.set(a,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,l)=>{this.St(e,t,l)})),ue.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),ue.resolve()}getOverlaysForCollection(e,t,s){const a=Io(),l=t.length+1,c=new Ne(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const g=f.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>s&&a.set(g.getKey(),g)}return ue.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new Bt(((y,v)=>y-v));const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let v=l.get(y.largestBatchId);v===null&&(v=Io(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const f=Io(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,v)=>f.set(y,v))),!(f.size()>=a)););return ue.resolve(f)}St(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new C6(t,s));let l=this.qr.get(t);l===void 0&&(l=et(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(){this.sessionToken=Tn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(){this.Qr=new yn(_n.$r),this.Ur=new yn(_n.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new _n(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new _n(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ne(new Nt([])),s=new _n(t,e),a=new _n(t,e+1),l=[];return this.Ur.forEachInRange([s,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ne(new Nt([])),s=new _n(t,e),a=new _n(t,e+1);let l=et();return this.Ur.forEachInRange([s,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new _n(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class _n{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ne.comparator(e.key,t.key)||Ze(e.Yr,t.Yr)}static Kr(e,t){return Ze(e.Yr,t.Yr)||Ne.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new yn(_n.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new N6(l,t,s,a);this.mutationQueue.push(c);for(const f of a)this.Zr=this.Zr.add(new _n(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ue.resolve(c)}lookupMutationBatch(e,t){return ue.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.ei(s),l=a<0?0:a;return ue.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?Vy:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new _n(t,0),a=new _n(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,a],(c=>{const f=this.Xr(c.Yr);l.push(f)})),ue.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new yn(Ze);return t.forEach((a=>{const l=new _n(a,0),c=new _n(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(f=>{s=s.add(f.Yr)}))})),ue.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;Ne.isDocumentKey(l)||(l=l.child(""));const c=new _n(new Ne(l),0);let f=new yn(Ze);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===a&&(f=f.add(g.Yr)),!0)}),c),ue.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const a=this.Xr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){ft(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ue.forEach(t.mutations,(a=>{const l=new _n(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new _n(t,0),a=this.Zr.firstAfterOrEqual(s);return ue.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e){this.ri=e,this.docs=(function(){return new Bt(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ue.resolve(s?s.document.mutableCopy():Hn.newInvalidDocument(t))}getEntries(e,t){let s=ki();return t.forEach((a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():Hn.newInvalidDocument(a))})),ue.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=ki();const c=t.path,f=new Ne(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:y,value:{document:v}}=g.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||qC(zC(v),s)<=0||(a.has(v.key)||km(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ue.resolve(l)}getAllFromCollectionGroup(e,t,s,a){Pe(9500)}ii(e,t){return ue.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new mk(this)}getSize(e){return ue.resolve(this.size)}}class mk extends ak{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)})),ue.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e){this.persistence=e,this.si=new Fo((t=>zy(t)),qy),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.oi=0,this._i=new Qy,this.targetCount=0,this.ai=wc.ur()}forEachTarget(e,t){return this.si.forEach(((s,a)=>t(a))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),ue.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new wc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Pr(t),ue.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.si.forEach(((c,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),ue.waitFor(l).next((()=>a))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return ue.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),ue.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),ue.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return ue.resolve(s)}containsKey(e,t){return ue.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,t){this.ui={},this.overlays={},this.ci=new Tm(0),this.li=!1,this.li=!0,this.hi=new dk,this.referenceDelegate=e(this),this.Pi=new gk(this),this.indexManager=new Z6,this.remoteDocumentCache=(function(a){return new fk(a)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new X6(t),this.Ii=new ck(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new uk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new hk(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){be("MemoryPersistence","Starting transaction:",e);const a=new pk(this.ci.next());return this.referenceDelegate.Ei(),s(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return ue.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class pk extends $C{constructor(e){super(),this.currentSequenceNumber=e}}class Yy{constructor(e){this.persistence=e,this.Ri=new Qy,this.Vi=null}static mi(e){return new Yy(e)}get fi(){if(this.Vi)return this.Vi;throw Pe(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),ue.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,(s=>{const a=Ne.fromPath(s);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Le.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ue.or([()=>ue.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Bf{constructor(e,t){this.persistence=e,this.pi=new Fo((s=>KC(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=ik(this,t)}static mi(e,t){return new Bf(e,t)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return ue.forEach(this.pi,((s,a)=>this.br(e,s,a).next((l=>l?ue.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((f=>{f||(s++,l.removeEntry(c,Le.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Tf(e.data.value)),t}br(e,t,s){return ue.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return ue.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=a}static As(e,t){let s=et(),a=et();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Wy(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return h3()?8:FC(Fn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new yk;return this.Ss(e,t,c).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,c,f.size)}))})).next((()=>l.result))}bs(e,t,s,a){return s.documentReadCount<this.fs?(Kl()<=Je.DEBUG&&be("QueryEngine","SDK will not create cache indexes for query:",Ql(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(Kl()<=Je.DEBUG&&be("QueryEngine","Query:",Ql(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(Kl()<=Je.DEBUG&&be("QueryEngine","The SDK decides to create cache indexes for query:",Ql(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fr(t))):ue.resolve())}ys(e,t){if(u1(t))return ue.resolve(null);let s=Fr(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Lf(t,null,"F"),s=Fr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=et(...l);return this.ps.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.Ds(t,f);return this.Cs(t,y,c,g.readTime)?this.ys(e,Lf(t,null,"F")):this.vs(e,y,t,g)}))))})))))}ws(e,t,s,a){return u1(t)||a.isEqual(Le.min())?ue.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,a)?ue.resolve(null):(Kl()<=Je.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ql(t)),this.vs(e,c,t,BC(a,td)).next((f=>f)))}))}Ds(e,t){let s=new yn(tT(e));return t.forEach(((a,l)=>{km(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,s){return Kl()<=Je.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",Ql(t)),this.ps.getDocumentsMatchingQuery(e,t,Ia.min(),s)}vs(e,t,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="LocalStore",bk=3e8;class wk{constructor(e,t,s,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new Bt(Ze),this.xs=new Fo((l=>zy(l)),qy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function _k(n,e,t,s){return new wk(n,e,t,s)}async function TT(n,e){const t=Ue(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],f=[];let g=et();for(const y of a){c.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}for(const y of l){f.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(s,g).next((y=>({Ls:y,removedBatchIds:c,addedBatchIds:f})))}))}))}function xk(n,e){const t=Ue(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,y,v){const _=y.batch,E=_.keys();let T=ue.resolve();return E.forEach((N=>{T=T.next((()=>v.getEntry(g,N))).next((P=>{const C=y.docVersions.get(N);ft(C!==null,48541),P.version.compareTo(C)<0&&(_.applyToRemoteDocument(P,y),P.isValidDocument()&&(P.setReadTime(y.commitVersion),v.addEntry(P)))}))})),T.next((()=>f.mutationQueue.removeMutationBatch(g,_)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let g=et();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(g=g.add(f.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function ST(n){const e=Ue(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Ek(n,e){const t=Ue(n),s=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const f=[];e.targetChanges.forEach(((v,_)=>{const E=a.get(_);if(!E)return;f.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,_))));let T=E.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?T=T.withResumeToken(Tn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):v.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(v.resumeToken,s)),a=a.insert(_,T),(function(P,C,M){return P.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=bk?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0})(E,T,v)&&f.push(t.Pi.updateTargetData(l,T))}));let g=ki(),y=et();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),f.push(Tk(l,c,e.documentUpdates).next((v=>{g=v.ks,y=v.qs}))),!s.isEqual(Le.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((_=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(v)}return ue.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.Ms=a,l)))}function Tk(n,e,t){let s=et(),a=et();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=ki();return t.forEach(((f,g)=>{const y=l.get(f);g.isFoundDocument()!==y.isFoundDocument()&&(a=a.add(f)),g.isNoDocument()&&g.version.isEqual(Le.min())?(e.removeEntry(f,g.readTime),c=c.insert(f,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),c=c.insert(f,g)):be(Xy,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",g.version)})),{ks:c,qs:a}}))}function Sk(n,e){const t=Ue(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Vy),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function Ak(n,e){const t=Ue(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.Pi.getTargetData(s,e).next((l=>l?(a=l,ue.resolve(a)):t.Pi.allocateTargetId(s).next((c=>(a=new xa(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function J0(n,e,t){const s=Ue(n),a=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!kc(c))throw c;be(Xy,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function E1(n,e,t){const s=Ue(n);let a=Le.min(),l=et();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,y,v){const _=Ue(g),E=_.xs.get(v);return E!==void 0?ue.resolve(_.Ms.get(E)):_.Pi.getTargetData(y,v)})(s,c,Fr(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,f.targetId).next((g=>{l=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?a:Le.min(),t?l:et()))).next((f=>(Nk(s,h6(e),f),{documents:f,Qs:l})))))}function Nk(n,e,t){let s=n.Os.get(e)||Le.min();t.forEach(((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class T1{constructor(){this.activeTargetIds=v6()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ck{constructor(){this.Mo=new T1,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new T1,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="ConnectivityMonitor";class A1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){be(S1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){be(S1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let of=null;function Z0(){return of===null?of=(function(){return 268435456+Math.round(2147483648*Math.random())})():of++,"0x"+of.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0="RestConnection",Rk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ik{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===Df?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,t,s,a,l){const c=Z0(),f=this.zo(e,t.toUriEncodedString());be(m0,`Sending RPC '${e}' ${c}:`,f,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,a,l);const{host:y}=new URL(f),v=Ho(y);return this.Jo(e,f,g,s,v).then((_=>(be(m0,`Received RPC '${e}' ${c}: `,_),_)),(_=>{throw Vo(m0,`RPC '${e}' ${c} failed with error: `,_,"url: ",f,"request:",s),_}))}Ho(e,t,s,a,l,c){return this.Go(e,t,s,a,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Nc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),s&&s.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const s=Rk[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un="WebChannelConnection";class Ok extends Ik{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,a,l){const c=Z0();return new Promise(((f,g)=>{const y=new AE;y.setWithCredentials(!0),y.listenOnce(NE.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Ef.NO_ERROR:const _=y.getResponseJson();be(Un,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(_)),f(_);break;case Ef.TIMEOUT:be(Un,`RPC '${e}' ${c} timed out`),g(new pe(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Ef.HTTP_ERROR:const E=y.getStatus();if(be(Un,`RPC '${e}' ${c} failed with status:`,E,"response text:",y.getResponseText()),E>0){let T=y.getResponseJson();Array.isArray(T)&&(T=T[0]);const N=T==null?void 0:T.error;if(N&&N.status&&N.message){const P=(function(M){const H=M.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(H)>=0?H:oe.UNKNOWN})(N.status);g(new pe(P,N.message))}else g(new pe(oe.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new pe(oe.UNAVAILABLE,"Connection failed."));break;default:Pe(9055,{l_:e,streamId:c,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{be(Un,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(a);be(Un,`RPC '${e}' ${c} sending request:`,a),y.send(t,"POST",v,s,15)}))}T_(e,t,s){const a=Z0(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=RE(),f=kE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const v=l.join("");be(Un,`Creating RPC '${e}' stream ${a}: ${v}`,g);const _=c.createWebChannel(v,g);this.I_(_);let E=!1,T=!1;const N=new jk({Yo:C=>{T?be(Un,`Not sending because RPC '${e}' stream ${a} is closed:`,C):(E||(be(Un,`Opening RPC '${e}' stream ${a} transport.`),_.open(),E=!0),be(Un,`RPC '${e}' stream ${a} sending:`,C),_.send(C))},Zo:()=>_.close()}),P=(C,M,H)=>{C.listen(M,(F=>{try{H(F)}catch(te){setTimeout((()=>{throw te}),0)}}))};return P(_,Vu.EventType.OPEN,(()=>{T||(be(Un,`RPC '${e}' stream ${a} transport opened.`),N.o_())})),P(_,Vu.EventType.CLOSE,(()=>{T||(T=!0,be(Un,`RPC '${e}' stream ${a} transport closed`),N.a_(),this.E_(_))})),P(_,Vu.EventType.ERROR,(C=>{T||(T=!0,Vo(Un,`RPC '${e}' stream ${a} transport errored. Name:`,C.name,"Message:",C.message),N.a_(new pe(oe.UNAVAILABLE,"The operation could not be completed")))})),P(_,Vu.EventType.MESSAGE,(C=>{var M;if(!T){const H=C.data[0];ft(!!H,16349);const F=H,te=(F==null?void 0:F.error)||((M=F[0])==null?void 0:M.error);if(te){be(Un,`RPC '${e}' stream ${a} received error:`,te);const fe=te.status;let he=(function(I){const U=cn[I];if(U!==void 0)return hT(U)})(fe),k=te.message;he===void 0&&(he=oe.INTERNAL,k="Unknown error status: "+fe+" with message "+te.message),T=!0,N.a_(new pe(he,k)),_.close()}else be(Un,`RPC '${e}' stream ${a} received:`,H),N.u_(H)}})),P(f,CE.STAT_EVENT,(C=>{C.stat===B0.PROXY?be(Un,`RPC '${e}' stream ${a} detected buffering proxy`):C.stat===B0.NOPROXY&&be(Un,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{N.__()}),0),N}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function g0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(n){return new L6(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&be("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1="PersistentStream";class NT{constructor(e,t,s,a,l,c,f,g){this.Mi=e,this.S_=s,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new AT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(Ci(t.toString()),Ci("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===t&&this.G_(s,a)}),(s=>{e((()=>{const a=new pe(oe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return be(N1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(be(N1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Dk extends NT{constructor(e,t,s,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=B6(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Le.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Le.min():c.readTime?Gr(c.readTime):Le.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=X0(this.serializer),t.addTarget=(function(l,c){let f;const g=c.target;if(f=G0(g)?{documents:H6(l,g)}:{query:$6(l,g).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=gT(l,c.resumeToken);const y=Q0(l,c.expectedCount);y!==null&&(f.expectedCount=y)}else if(c.snapshotVersion.compareTo(Le.min())>0){f.readTime=Uf(l,c.snapshotVersion.toTimestamp());const y=Q0(l,c.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const s=G6(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=X0(this.serializer),t.removeTarget=e,this.q_(t)}}class Pk extends NT{constructor(e,t,s,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ft(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ft(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=q6(e.writeResults,e.commitTime),s=Gr(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=X0(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>z6(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{}class Lk extends Mk{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new pe(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Y0(t,s),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pe(oe.UNKNOWN,l.toString())}))}Ho(e,t,s,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Ho(e,Y0(t,s),a,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(oe.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Vk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ci(t),this.aa=!1):be("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo="RemoteStore";class Uk{constructor(e,t,s,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{Go(this)&&(be(Uo,"Restarting streams for network reachability change."),await(async function(g){const y=Ue(g);y.Ea.add(4),await xd(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Pm(y)})(this))}))})),this.Ra=new Vk(s,a)}}async function Pm(n){if(Go(n))for(const e of n.da)await e(!0)}async function xd(n){for(const e of n.da)await e(!1)}function CT(n,e){const t=Ue(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),tv(t)?ev(t):Ic(t).O_()&&Zy(t,e))}function Jy(n,e){const t=Ue(n),s=Ic(t);t.Ia.delete(e),s.O_()&&kT(t,e),t.Ia.size===0&&(s.O_()?s.L_():Go(t)&&t.Ra.set("Unknown"))}function Zy(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ic(n).Y_(e)}function kT(n,e){n.Va.Ue(e),Ic(n).Z_(e)}function ev(n){n.Va=new O6({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ic(n).start(),n.Ra.ua()}function tv(n){return Go(n)&&!Ic(n).x_()&&n.Ia.size>0}function Go(n){return Ue(n).Ea.size===0}function RT(n){n.Va=void 0}async function Bk(n){n.Ra.set("Online")}async function zk(n){n.Ia.forEach(((e,t)=>{Zy(n,e)}))}async function qk(n,e){RT(n),tv(n)?(n.Ra.ha(e),ev(n)):n.Ra.set("Unknown")}async function Hk(n,e,t){if(n.Ra.set("Online"),e instanceof mT&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const f of l.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,c),a.Ia.delete(f),a.Va.removeTarget(f))})(n,e)}catch(s){be(Uo,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await zf(n,s)}else if(e instanceof Nf?n.Va.Ze(e):e instanceof fT?n.Va.st(e):n.Va.tt(e),!t.isEqual(Le.min()))try{const s=await ST(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const f=l.Va.Tt(c);return f.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.Ia.get(y);v&&l.Ia.set(y,v.withResumeToken(g.resumeToken,c))}})),f.targetMismatches.forEach(((g,y)=>{const v=l.Ia.get(g);if(!v)return;l.Ia.set(g,v.withResumeToken(Tn.EMPTY_BYTE_STRING,v.snapshotVersion)),kT(l,g);const _=new xa(v.target,g,y,v.sequenceNumber);Zy(l,_)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(s){be(Uo,"Failed to raise snapshot:",s),await zf(n,s)}}async function zf(n,e,t){if(!kc(e))throw e;n.Ea.add(1),await xd(n),n.Ra.set("Offline"),t||(t=()=>ST(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{be(Uo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Pm(n)}))}function IT(n,e){return e().catch((t=>zf(n,t,e)))}async function Mm(n){const e=Ue(n),t=Pa(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Vy;for(;$k(e);)try{const a=await Sk(e.localStore,s);if(a===null){e.Ta.length===0&&t.L_();break}s=a.batchId,Fk(e,a)}catch(a){await zf(e,a)}jT(e)&&OT(e)}function $k(n){return Go(n)&&n.Ta.length<10}function Fk(n,e){n.Ta.push(e);const t=Pa(n);t.O_()&&t.X_&&t.ea(e.mutations)}function jT(n){return Go(n)&&!Pa(n).x_()&&n.Ta.length>0}function OT(n){Pa(n).start()}async function Gk(n){Pa(n).ra()}async function Kk(n){const e=Pa(n);for(const t of n.Ta)e.ea(t.mutations)}async function Qk(n,e,t){const s=n.Ta.shift(),a=Fy.from(s,e,t);await IT(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await Mm(n)}async function Yk(n,e){e&&Pa(n).X_&&await(async function(s,a){if((function(c){return R6(c)&&c!==oe.ABORTED})(a.code)){const l=s.Ta.shift();Pa(s).B_(),await IT(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Mm(s)}})(n,e),jT(n)&&OT(n)}async function C1(n,e){const t=Ue(n);t.asyncQueue.verifyOperationInProgress(),be(Uo,"RemoteStore received new credentials");const s=Go(t);t.Ea.add(3),await xd(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Pm(t)}async function Wk(n,e){const t=Ue(n);e?(t.Ea.delete(2),await Pm(t)):e||(t.Ea.add(2),await xd(t),t.Ra.set("Unknown"))}function Ic(n){return n.ma||(n.ma=(function(t,s,a){const l=Ue(t);return l.sa(),new Dk(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:Bk.bind(null,n),t_:zk.bind(null,n),r_:qk.bind(null,n),H_:Hk.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),tv(n)?ev(n):n.Ra.set("Unknown")):(await n.ma.stop(),RT(n))}))),n.ma}function Pa(n){return n.fa||(n.fa=(function(t,s,a){const l=Ue(t);return l.sa(),new Pk(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:Gk.bind(null,n),r_:Yk.bind(null,n),ta:Kk.bind(null,n),na:Qk.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Mm(n)):(await n.fa.stop(),n.Ta.length>0&&(be(Uo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,l){const c=Date.now()+s,f=new nv(e,t,c,a,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sv(n,e){if(Ci("AsyncQueue",`${e}: ${n}`),kc(n))return new pe(oe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{static emptySet(e){return new rc(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ne.comparator(t.key,s.key):(t,s)=>Ne.comparator(t.key,s.key),this.keyedMap=Uu(),this.sortedSet=new Bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof rc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new rc;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(){this.ga=new Bt(Ne.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Pe(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class _c{constructor(e,t,s,a,l,c,f,g,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,a,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new _c(e,t,rc.emptySet(t),c,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Jk{constructor(){this.queries=R1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=Ue(t),l=a.queries;a.queries=R1(),l.forEach(((c,f)=>{for(const g of f.Sa)g.onError(s)}))})(this,new pe(oe.ABORTED,"Firestore shutting down"))}}function R1(){return new Fo((n=>eT(n)),Cm)}async function rv(n,e){const t=Ue(n);let s=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(s=2):(l=new Xk,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const f=sv(c,`Initialization of query '${Ql(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&av(t)}async function iv(n,e){const t=Ue(n),s=e.query;let a=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function Zk(n,e){const t=Ue(n);let s=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const f of c.Sa)f.Fa(a)&&(s=!0);c.wa=a}}s&&av(t)}function eR(n,e,t){const s=Ue(n),a=s.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);s.queries.delete(e)}function av(n){n.Ca.forEach((e=>{e.next()}))}var ey,I1;(I1=ey||(ey={})).Ma="default",I1.Cache="cache";class ov{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new _c(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=_c.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ey.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e){this.key=e}}class PT{constructor(e){this.key=e}}class tR{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=et(),this.mutatedKeys=et(),this.eu=tT(e),this.tu=new rc(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new k1,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,f=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,y=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((v,_)=>{const E=a.get(v),T=km(this.query,_)?_:null,N=!!E&&this.mutatedKeys.has(E.key),P=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let C=!1;E&&T?E.data.isEqual(T.data)?N!==P&&(s.track({type:3,doc:T}),C=!0):this.su(E,T)||(s.track({type:2,doc:T}),C=!0,(g&&this.eu(T,g)>0||y&&this.eu(T,y)<0)&&(f=!0)):!E&&T?(s.track({type:0,doc:T}),C=!0):E&&!T&&(s.track({type:1,doc:E}),C=!0,(g||y)&&(f=!0)),C&&(T?(c=c.add(T),l=P?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{tu:c,iu:s,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,_)=>(function(T,N){const P=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe(20277,{Rt:C})}};return P(T)-P(N)})(v.type,_.type)||this.eu(v.doc,_.doc))),this.ou(s),a=a??!1;const f=t&&!a?this._u():[],g=this.Xa.size===0&&this.current&&!a?1:0,y=g!==this.Za;return this.Za=g,c.length!==0||y?{snapshot:new _c(this.query,e.tu,l,c,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new k1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=et(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new PT(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new DT(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=et();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return _c.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const lv="SyncEngine";class nR{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class sR{constructor(e){this.key=e,this.hu=!1}}class rR{constructor(e,t,s,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Fo((f=>eT(f)),Cm),this.Iu=new Map,this.Eu=new Set,this.du=new Bt(Ne.comparator),this.Au=new Map,this.Ru=new Qy,this.Vu={},this.mu=new Map,this.fu=wc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function iR(n,e,t=!0){const s=zT(n);let a;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await MT(s,e,t,!0),a}async function aR(n,e){const t=zT(n);await MT(t,e,!0,!1)}async function MT(n,e,t,s){const a=await Ak(n.localStore,Fr(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await oR(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&CT(n.remoteStore,a),f}async function oR(n,e,t,s,a){n.pu=(_,E,T)=>(async function(P,C,M,H){let F=C.view.ru(M);F.Cs&&(F=await E1(P.localStore,C.query,!1).then((({documents:k})=>C.view.ru(k,F))));const te=H&&H.targetChanges.get(C.targetId),fe=H&&H.targetMismatches.get(C.targetId)!=null,he=C.view.applyChanges(F,P.isPrimaryClient,te,fe);return O1(P,C.targetId,he.au),he.snapshot})(n,_,E,T);const l=await E1(n.localStore,e,!0),c=new tR(e,l.Qs),f=c.ru(l.documents),g=_d.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",a),y=c.applyChanges(f,n.isPrimaryClient,g);O1(n,t,y.au);const v=new nR(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),y.snapshot}async function lR(n,e,t){const s=Ue(n),a=s.Tu.get(e),l=s.Iu.get(a.targetId);if(l.length>1)return s.Iu.set(a.targetId,l.filter((c=>!Cm(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await J0(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&Jy(s.remoteStore,a.targetId),ty(s,a.targetId)})).catch(Cc)):(ty(s,a.targetId),await J0(s.localStore,a.targetId,!0))}async function cR(n,e){const t=Ue(n),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Jy(t.remoteStore,s.targetId))}async function uR(n,e,t){const s=yR(n);try{const a=await(function(c,f){const g=Ue(c),y=Et.now(),v=f.reduce(((T,N)=>T.add(N.key)),et());let _,E;return g.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let N=ki(),P=et();return g.Ns.getEntries(T,v).next((C=>{N=C,N.forEach(((M,H)=>{H.isValidDocument()||(P=P.add(M))}))})).next((()=>g.localDocuments.getOverlayedDocuments(T,N))).next((C=>{_=C;const M=[];for(const H of f){const F=S6(H,_.get(H.key).overlayedDocument);F!=null&&M.push(new Ba(H.key,F,GE(F.value.mapValue),Jn.exists(!0)))}return g.mutationQueue.addMutationBatch(T,y,M,f)})).next((C=>{E=C;const M=C.applyToLocalDocumentSet(_,P);return g.documentOverlayCache.saveOverlays(T,C.batchId,M)}))})).then((()=>({batchId:E.batchId,changes:sT(_)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(c,f,g){let y=c.Vu[c.currentUser.toKey()];y||(y=new Bt(Ze)),y=y.insert(f,g),c.Vu[c.currentUser.toKey()]=y})(s,a.batchId,t),await Ed(s,a.changes),await Mm(s.remoteStore)}catch(a){const l=sv(a,"Failed to persist write");t.reject(l)}}async function LT(n,e){const t=Ue(n);try{const s=await Ek(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(ft(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?ft(c.hu,14607):a.removedDocuments.size>0&&(ft(c.hu,42227),c.hu=!1))})),await Ed(t,s,e)}catch(s){await Cc(s)}}function j1(n,e,t){const s=Ue(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(c,f){const g=Ue(c);g.onlineState=f;let y=!1;g.queries.forEach(((v,_)=>{for(const E of _.Sa)E.va(f)&&(y=!0)})),y&&av(g)})(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function dR(n,e,t){const s=Ue(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),l=a&&a.key;if(l){let c=new Bt(Ne.comparator);c=c.insert(l,Hn.newNoDocument(l,Le.min()));const f=et().add(l),g=new Om(Le.min(),new Map,new Bt(Ze),c,f);await LT(s,g),s.du=s.du.remove(l),s.Au.delete(e),cv(s)}else await J0(s.localStore,e,!1).then((()=>ty(s,e,t))).catch(Cc)}async function hR(n,e){const t=Ue(n),s=e.batch.batchId;try{const a=await xk(t.localStore,e);UT(t,s,null),VT(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Ed(t,a)}catch(a){await Cc(a)}}async function fR(n,e,t){const s=Ue(n);try{const a=await(function(c,f){const g=Ue(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return g.mutationQueue.lookupMutationBatch(y,f).next((_=>(ft(_!==null,37113),v=_.keys(),g.mutationQueue.removeMutationBatch(y,_)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,v,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>g.localDocuments.getDocuments(y,v)))}))})(s.localStore,e);UT(s,e,t),VT(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Ed(s,a)}catch(a){await Cc(a)}}function VT(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function UT(n,e,t){const s=Ue(n);let a=s.Vu[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function ty(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||BT(n,s)}))}function BT(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Jy(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),cv(n))}function O1(n,e,t){for(const s of t)s instanceof DT?(n.Ru.addReference(s.key,e),mR(n,s)):s instanceof PT?(be(lv,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||BT(n,s.key)):Pe(19791,{wu:s})}function mR(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(be(lv,"New document in limbo: "+t),n.Eu.add(s),cv(n))}function cv(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ne(Nt.fromString(e)),s=n.fu.next();n.Au.set(s,new sR(t)),n.du=n.du.insert(t,s),CT(n.remoteStore,new xa(Fr(Nm(t.path)),s,"TargetPurposeLimboResolution",Tm.ce))}}async function Ed(n,e,t){const s=Ue(n),a=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,g)=>{c.push(s.pu(g,e,t).then((y=>{var v;if((y||t)&&s.isPrimaryClient){const _=y?!y.fromCache:(v=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(g.targetId,_?"current":"not-current")}if(y){a.push(y);const _=Wy.As(g.targetId,y);l.push(_)}})))})),await Promise.all(c),s.Pu.H_(a),await(async function(g,y){const v=Ue(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>ue.forEach(y,(E=>ue.forEach(E.Es,(T=>v.persistence.referenceDelegate.addReference(_,E.targetId,T))).next((()=>ue.forEach(E.ds,(T=>v.persistence.referenceDelegate.removeReference(_,E.targetId,T)))))))))}catch(_){if(!kc(_))throw _;be(Xy,"Failed to update sequence numbers: "+_)}for(const _ of y){const E=_.targetId;if(!_.fromCache){const T=v.Ms.get(E),N=T.snapshotVersion,P=T.withLastLimboFreeSnapshotVersion(N);v.Ms=v.Ms.insert(E,P)}}})(s.localStore,l))}async function gR(n,e){const t=Ue(n);if(!t.currentUser.isEqual(e)){be(lv,"User change. New user:",e.toKey());const s=await TT(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new pe(oe.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ed(t,s.Ls)}}function pR(n,e){const t=Ue(n),s=t.Au.get(e);if(s&&s.hu)return et().add(s.key);{let a=et();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const f=t.Tu.get(c);a=a.unionWith(f.view.nu)}return a}}function zT(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=LT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dR.bind(null,e),e.Pu.H_=Zk.bind(null,e.eventManager),e.Pu.yu=eR.bind(null,e.eventManager),e}function yR(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fR.bind(null,e),e}class qf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Dm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return _k(this.persistence,new vk,e.initialUser,this.serializer)}Cu(e){return new ET(Yy.mi,this.serializer)}Du(e){return new Ck}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qf.provider={build:()=>new qf};class vR extends qf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ft(this.persistence.referenceDelegate instanceof Bf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new sk(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?us.withCacheSize(this.cacheSizeBytes):us.DEFAULT;return new ET((s=>Bf.mi(s,t)),this.serializer)}}class ny{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>j1(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=gR.bind(null,this.syncEngine),await Wk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Jk})()}createDatastore(e){const t=Dm(e.databaseInfo.databaseId),s=(function(l){return new Ok(l)})(e.databaseInfo);return(function(l,c,f,g){return new Lk(l,c,f,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,l,c,f){return new Uk(s,a,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>j1(this.syncEngine,t,0)),(function(){return A1.v()?new A1:new kk})())}createSyncEngine(e,t){return(function(a,l,c,f,g,y,v){const _=new rR(a,l,c,f,g,y);return v&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=Ue(a);be(Uo,"RemoteStore shutting down."),l.Ea.add(5),await xd(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}ny.provider={build:()=>new ny};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ci("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma="FirestoreClient";class bR{constructor(e,t,s,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=qn.UNAUTHENTICATED,this.clientId=xm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{be(Ma,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(be(Ma,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=sv(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function p0(n,e){n.asyncQueue.verifyOperationInProgress(),be(Ma,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async a=>{s.isEqual(a)||(await TT(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function D1(n,e){n.asyncQueue.verifyOperationInProgress();const t=await wR(n);be(Ma,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>C1(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,a)=>C1(e.remoteStore,a))),n._onlineComponents=e}async function wR(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){be(Ma,"Using user provided OfflineComponentProvider");try{await p0(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===oe.FAILED_PRECONDITION||a.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Vo("Error using user provided cache. Falling back to memory cache: "+t),await p0(n,new qf)}}else be(Ma,"Using default OfflineComponentProvider"),await p0(n,new vR(void 0));return n._offlineComponents}async function qT(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(be(Ma,"Using user provided OnlineComponentProvider"),await D1(n,n._uninitializedComponentsProvider._online)):(be(Ma,"Using default OnlineComponentProvider"),await D1(n,new ny))),n._onlineComponents}function _R(n){return qT(n).then((e=>e.syncEngine))}async function Hf(n){const e=await qT(n),t=e.eventManager;return t.onListen=iR.bind(null,e.syncEngine),t.onUnlisten=lR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=aR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=cR.bind(null,e.syncEngine),t}function xR(n,e,t={}){const s=new xi;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,g,y){const v=new uv({next:E=>{v.Nu(),c.enqueueAndForget((()=>iv(l,_)));const T=E.docs.has(f);!T&&E.fromCache?y.reject(new pe(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&E.fromCache&&g&&g.source==="server"?y.reject(new pe(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(E)},error:E=>y.reject(E)}),_=new ov(Nm(f.path),v,{includeMetadataChanges:!0,qa:!0});return rv(l,_)})(await Hf(n),n.asyncQueue,e,t,s))),s.promise}function ER(n,e,t={}){const s=new xi;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,g,y){const v=new uv({next:E=>{v.Nu(),c.enqueueAndForget((()=>iv(l,_))),E.fromCache&&g.source==="server"?y.reject(new pe(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(E)},error:E=>y.reject(E)}),_=new ov(f,v,{includeMetadataChanges:!0,qa:!0});return rv(l,_)})(await Hf(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="firestore.googleapis.com",M1=!0;class L1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$T,this.ssl=M1}else this.host=e.host,this.ssl=e.ssl??M1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tk)throw new pe(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}PE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=HT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new pe(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new pe(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new pe(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lm{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new L1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new L1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new OE;switch(s.type){case"firstParty":return new DC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new pe(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=P1.get(t);s&&(be("ComponentProvider","Removing Datastore"),P1.delete(t),s.terminate())})(this),Promise.resolve()}}function FT(n,e,t,s={}){var y;n=$n(n,Lm);const a=Ho(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;a&&(Oy(`https://${f}`),Dy("Firestore",!0)),l.host!==$T&&l.host!==f&&Vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:a,emulatorOptions:s};if(!Ai(g,c)&&(n._setSettings(g),s.mockUserToken)){let v,_;if(typeof s.mockUserToken=="string")v=s.mockUserToken,_=qn.MOCK_USER;else{v=bE(s.mockUserToken,(y=n._app)==null?void 0:y.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new pe(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new qn(E)}n._authCredentials=new IC(new jE(v,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Zr(this.firestore,e,this._query)}}class Ut{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ut(this.firestore,e,this._key)}toJSON(){return{type:Ut._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(bd(t,Ut._jsonSchema))return new Ut(e,s||null,new Ne(Nt.fromString(t.referencePath)))}}Ut._jsonSchemaVersion="firestore/documentReference/1.0",Ut._jsonSchema={type:hn("string",Ut._jsonSchemaVersion),referencePath:hn("string")};class Ei extends Zr{constructor(e,t,s){super(e,t,Nm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new Ne(e))}withConverter(e){return new Ei(this.firestore,e,this._path)}}function St(n,e,...t){if(n=en(n),DE("collection","path",e),n instanceof Lm){const s=Nt.fromString(e,...t);return W2(s),new Ei(n,null,s)}{if(!(n instanceof Ut||n instanceof Ei))throw new pe(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Nt.fromString(e,...t));return W2(s),new Ei(n.firestore,null,s)}}function dt(n,e,...t){if(n=en(n),arguments.length===1&&(e=xm.newId()),DE("doc","path",e),n instanceof Lm){const s=Nt.fromString(e,...t);return Y2(s),new Ut(n,null,new Ne(s))}{if(!(n instanceof Ut||n instanceof Ei))throw new pe(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Nt.fromString(e,...t));return Y2(s),new Ut(n.firestore,n instanceof Ei?n.converter:null,new Ne(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="AsyncQueue";class U1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new AT(this,"async_queue_retry"),this._c=()=>{const s=g0();s&&be(V1,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=g0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=g0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new xi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!kc(e))throw e;be(V1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Ci("INTERNAL UNHANDLED ERROR: ",B1(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=nv.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Pe(47125,{Pc:B1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function B1(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of s)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}class xr extends Lm{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new U1,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new U1(e),this._firestoreClient=void 0,await e}}}function GT(n,e){const t=typeof n=="object"?n:_m(),s=typeof n=="string"?n:Df,a=wm(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=pE("firestore");l&&FT(a,...l)}return a}function jc(n){if(n._terminated)throw new pe(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||TR(n),n._firestoreClient}function TR(n){var s,a,l;const e=n._freezeSettings(),t=(function(f,g,y,v){return new WC(f,g,y,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,HT(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new bR(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rs(Tn.fromBase64String(e))}catch(t){throw new pe(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Rs(Tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bd(e,Rs._jsonSchema))return Rs.fromBase64String(e.bytes)}}Rs._jsonSchemaVersion="firestore/bytes/1.0",Rs._jsonSchema={type:hn("string",Rs._jsonSchemaVersion),bytes:hn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function Vm(){return new Ko(q0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:br._jsonSchemaVersion}}static fromJSON(e){if(bd(e,br._jsonSchema))return new br(e.latitude,e.longitude)}}br._jsonSchemaVersion="firestore/geoPoint/1.0",br._jsonSchema={type:hn("string",br._jsonSchemaVersion),latitude:hn("number"),longitude:hn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:wr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bd(e,wr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new wr(e.vectorValues);throw new pe(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}wr._jsonSchemaVersion="firestore/vectorValue/1.0",wr._jsonSchema={type:hn("string",wr._jsonSchemaVersion),vectorValues:hn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=/^__.*__$/;class AR{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ba(e,this.data,this.fieldMask,t,this.fieldTransforms):new wd(e,this.data,t,this.fieldTransforms)}}class KT{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ba(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function QT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe(40011,{Ac:n})}}class Um{constructor(e,t,s,a,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Um({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return $f(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(QT(this.Ac)&&SR.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class NR{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Dm(e)}Cc(e,t,s,a=!1){return new Um({Ac:e,methodName:t,Dc:s,path:xn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Td(n){const e=n._freezeSettings(),t=Dm(n._databaseId);return new NR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function dv(n,e,t,s,a,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,a);gv("Data must be an object, but it was:",c,s);const f=JT(s,c);let g,y;if(l.merge)g=new Os(c.fieldMask),y=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const _ of l.mergeFields){const E=sy(e,_,t);if(!c.contains(E))throw new pe(oe.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);eS(v,E)||v.push(E)}g=new Os(v),y=c.fieldTransforms.filter((_=>g.covers(_.field)))}else g=null,y=c.fieldTransforms;return new AR(new ds(f),g,y)}class Bm extends Qo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bm}}function YT(n,e,t){return new Um({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class hv extends Qo{_toFieldTransform(e){return new $y(e.path,new id)}isEqual(e){return e instanceof hv}}class fv extends Qo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=YT(this,e,!0),s=this.vc.map((l=>Yo(l,t))),a=new vc(s);return new $y(e.path,a)}isEqual(e){return e instanceof fv&&Ai(this.vc,e.vc)}}class mv extends Qo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=YT(this,e,!0),s=this.vc.map((l=>Yo(l,t))),a=new bc(s);return new $y(e.path,a)}isEqual(e){return e instanceof mv&&Ai(this.vc,e.vc)}}function WT(n,e,t,s){const a=n.Cc(1,e,t);gv("Data must be an object, but it was:",a,s);const l=[],c=ds.empty();Ua(s,((g,y)=>{const v=pv(e,g,t);y=en(y);const _=a.yc(v);if(y instanceof Bm)l.push(v);else{const E=Yo(y,_);E!=null&&(l.push(v),c.set(v,E))}}));const f=new Os(l);return new KT(c,f,a.fieldTransforms)}function XT(n,e,t,s,a,l){const c=n.Cc(1,e,t),f=[sy(e,s,t)],g=[a];if(l.length%2!=0)throw new pe(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<l.length;E+=2)f.push(sy(e,l[E])),g.push(l[E+1]);const y=[],v=ds.empty();for(let E=f.length-1;E>=0;--E)if(!eS(y,f[E])){const T=f[E];let N=g[E];N=en(N);const P=c.yc(T);if(N instanceof Bm)y.push(T);else{const C=Yo(N,P);C!=null&&(y.push(T),v.set(T,C))}}const _=new Os(y);return new KT(v,_,c.fieldTransforms)}function CR(n,e,t,s=!1){return Yo(t,n.Cc(s?4:3,e))}function Yo(n,e){if(ZT(n=en(n)))return gv("Unsupported field value:",e,n),JT(n,e);if(n instanceof Qo)return(function(s,a){if(!QT(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,a){const l=[];let c=0;for(const f of s){let g=Yo(f,a.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,a){if((s=en(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return b6(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Et.fromDate(s);return{timestampValue:Uf(a.serializer,l)}}if(s instanceof Et){const l=new Et(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Uf(a.serializer,l)}}if(s instanceof br)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Rs)return{bytesValue:gT(a.serializer,s._byteString)};if(s instanceof Ut){const l=a.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Ky(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof wr)return(function(c,f){return{mapValue:{fields:{[$E]:{stringValue:FE},[Pf]:{arrayValue:{values:c.toArray().map((y=>{if(typeof y!="number")throw f.Sc("VectorValues must only contain numeric values.");return Hy(f.serializer,y)}))}}}}}})(s,a);throw a.Sc(`Unsupported field value: ${Em(s)}`)})(n,e)}function JT(n,e){const t={};return VE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ua(n,((s,a)=>{const l=Yo(a,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function ZT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Et||n instanceof br||n instanceof Rs||n instanceof Ut||n instanceof Qo||n instanceof wr)}function gv(n,e,t){if(!ZT(t)||!ME(t)){const s=Em(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function sy(n,e,t){if((e=en(e))instanceof Ko)return e._internalPath;if(typeof e=="string")return pv(n,e);throw $f("Field path arguments must be of type string or ",n,!1,void 0,t)}const kR=new RegExp("[~\\*/\\[\\]]");function pv(n,e,t){if(e.search(kR)>=0)throw $f(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ko(...e.split("."))._internalPath}catch{throw $f(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $f(n,e,t,s,a){const l=s&&!s.isEmpty(),c=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||c)&&(g+=" (found",l&&(g+=` in field ${s}`),c&&(g+=` in document ${a}`),g+=")"),new pe(oe.INVALID_ARGUMENT,f+n+g)}function eS(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new RR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class RR extends tS{data(){return super.data()}}function zm(n,e){return typeof e=="string"?pv(n,e):e instanceof Ko?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new pe(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yv{}class qm extends yv{}function Gt(n,e,...t){let s=[];e instanceof yv&&s.push(e),s=s.concat(t),(function(l){const c=l.filter((g=>g instanceof Hm)).length,f=l.filter((g=>g instanceof Sd)).length;if(c>1||c>0&&f>0)throw new pe(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)n=a._apply(n);return n}class Sd extends qm{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Sd(e,t,s)}_apply(e){const t=this._parse(e);return sS(e._query,t),new Zr(e.firestore,e.converter,K0(e._query,t))}_parse(e){const t=Td(e.firestore);return(function(l,c,f,g,y,v,_){let E;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new pe(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){H1(_,v);const N=[];for(const P of _)N.push(q1(g,l,P));E={arrayValue:{values:N}}}else E=q1(g,l,_)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||H1(_,v),E=CR(f,c,_,v==="in"||v==="not-in");return dn.create(y,v,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function pn(n,e,t){const s=e,a=zm("where",n);return Sd._create(a,s,t)}class Hm extends yv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Hm(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:_r.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const f=l.getFlattenedFilters();for(const g of f)sS(c,g),c=K0(c,g)})(e._query,t),new Zr(e.firestore,e.converter,K0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $m extends qm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new $m(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new pe(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new pe(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rd(l,c)})(e._query,this._field,this._direction);return new Zr(e.firestore,e.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new Rc(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function Fm(n,e="asc"){const t=e,s=zm("orderBy",n);return $m._create(s,t)}class Gm extends qm{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new Gm(e,t,s)}_apply(e){return new Zr(e.firestore,e.converter,Lf(e._query,this._limit,this._limitType))}}function Ff(n){return Gm._create("limit",n,"F")}function q1(n,e,t){if(typeof(t=en(t))=="string"){if(t==="")throw new pe(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ZE(e)&&t.indexOf("/")!==-1)throw new pe(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Nt.fromString(t));if(!Ne.isDocumentKey(s))throw new pe(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return r1(n,new Ne(s))}if(t instanceof Ut)return r1(n,t._key);throw new pe(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Em(t)}.`)}function H1(n,e){if(!Array.isArray(n)||n.length===0)throw new pe(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sS(n,e){const t=(function(a,l){for(const c of a)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new pe(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class rS{convertValue(e,t="none"){switch(Da(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Oa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ua(e,((a,l)=>{s[a]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,a,l;const t=(l=(a=(s=e.fields)==null?void 0:s[Pf].arrayValue)==null?void 0:a.values)==null?void 0:l.map((c=>Zt(c.doubleValue)));return new wr(t)}convertGeoPoint(e){return new br(Zt(e.latitude),Zt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Am(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(nd(e));default:return null}}convertTimestamp(e){const t=ja(e);return new Et(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Nt.fromString(e);ft(_T(s),9688,{name:e});const a=new gc(s.get(1),s.get(3)),l=new Ne(s.popFirst(5));return a.isEqual(t)||Ci(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class ec{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ca extends tS{constructor(e,t,s,a,l,c){super(e,t,s,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ku(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(zm("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ca._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ca._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ca._jsonSchema={type:hn("string",Ca._jsonSchemaVersion),bundleSource:hn("string","DocumentSnapshot"),bundleName:hn("string"),bundle:hn("string")};class Ku extends Ca{data(e={}){return super.data(e)}}class ka{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new ec(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Ku(this._firestore,this._userDataWriter,s.key,s,new ec(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((f=>{const g=new Ku(a._firestore,a._userDataWriter,f.doc.key,f.doc,new ec(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new Ku(a._firestore,a._userDataWriter,f.doc.key,f.doc,new ec(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let y=-1,v=-1;return f.type!==0&&(y=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),v=c.indexOf(f.doc.key)),{type:IR(f.type),doc:g,oldIndex:y,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ka._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=xm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function IR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(n){n=$n(n,Ut);const e=$n(n.firestore,xr);return xR(jc(e),n._key).then((t=>iS(e,n,t)))}ka._jsonSchemaVersion="firestore/querySnapshot/1.0",ka._jsonSchema={type:hn("string",ka._jsonSchemaVersion),bundleSource:hn("string","QuerySnapshot"),bundleName:hn("string"),bundle:hn("string")};class bv extends rS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,t)}}function En(n){n=$n(n,Zr);const e=$n(n.firestore,xr),t=jc(e),s=new bv(e);return nS(n._query),ER(t,n._query).then((a=>new ka(e,s,n,a)))}function Km(n,e,t){n=$n(n,Ut);const s=$n(n.firestore,xr),a=vv(n.converter,e,t);return Oc(s,[dv(Td(s),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Jn.none())])}function Cs(n,e,t,...s){n=$n(n,Ut);const a=$n(n.firestore,xr),l=Td(a);let c;return c=typeof(e=en(e))=="string"||e instanceof Ko?XT(l,"updateDoc",n._key,e,t,s):WT(l,"updateDoc",n._key,e),Oc(a,[c.toMutation(n._key,Jn.exists(!0))])}function wv(n){return Oc($n(n.firestore,xr),[new jm(n._key,Jn.none())])}function ad(n,e){const t=$n(n.firestore,xr),s=dt(n),a=vv(n.converter,e);return Oc(t,[dv(Td(n.firestore),"addDoc",s._key,a,n.converter!==null,{}).toMutation(s._key,Jn.exists(!1))]).then((()=>s))}function ic(n,...e){var g,y,v;n=en(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||z1(e[s])||(t=e[s++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(z1(e[s])){const _=e[s];e[s]=(g=_.next)==null?void 0:g.bind(_),e[s+1]=(y=_.error)==null?void 0:y.bind(_),e[s+2]=(v=_.complete)==null?void 0:v.bind(_)}let l,c,f;if(n instanceof Ut)c=$n(n.firestore,xr),f=Nm(n._key.path),l={next:_=>{e[s]&&e[s](iS(c,n,_))},error:e[s+1],complete:e[s+2]};else{const _=$n(n,Zr);c=$n(_.firestore,xr),f=_._query;const E=new bv(c);l={next:T=>{e[s]&&e[s](new ka(c,E,_,T))},error:e[s+1],complete:e[s+2]},nS(n._query)}return(function(E,T,N,P){const C=new uv(P),M=new ov(T,C,N);return E.asyncQueue.enqueueAndForget((async()=>rv(await Hf(E),M))),()=>{C.Nu(),E.asyncQueue.enqueueAndForget((async()=>iv(await Hf(E),M)))}})(jc(c),f,a,l)}function Oc(n,e){return(function(s,a){const l=new xi;return s.asyncQueue.enqueueAndForget((async()=>uR(await _R(s),a,l))),l.promise})(jc(n),e)}function iS(n,e,t){const s=t.docs.get(e._key),a=new bv(n);return new Ca(n,a,e._key,s,new ec(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Td(e)}set(e,t,s){this._verifyNotCommitted();const a=y0(e,this._firestore),l=vv(a.converter,t,s),c=dv(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,s);return this._mutations.push(c.toMutation(a._key,Jn.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const l=y0(e,this._firestore);let c;return c=typeof(t=en(t))=="string"||t instanceof Ko?XT(this._dataReader,"WriteBatch.update",l._key,t,s,a):WT(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Jn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=y0(e,this._firestore);return this._mutations=this._mutations.concat(new jm(t._key,Jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new pe(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function y0(n,e){if((n=en(n)).firestore!==e)throw new pe(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function Ad(){return new hv("serverTimestamp")}function oS(...n){return new fv("arrayUnion",n)}function lS(...n){return new mv("arrayRemove",n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(n){return jc(n=$n(n,xr)),new aS(n,(e=>Oc(n,e)))}(function(e,t=!0){(function(a){Nc=a})($o),Mo(new Ra("firestore",((s,{instanceIdentifier:a,options:l})=>{const c=s.getProvider("app").getImmediate(),f=new xr(new jC(s.getProvider("auth-internal")),new PC(c,s.getProvider("app-check-internal")),(function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new pe(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gc(y.options.projectId,v)})(c,a),c);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),$r(G2,K2,e),$r(G2,K2,"esm2020")})();const od=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:rS,Bytes:Rs,CollectionReference:Ei,DocumentReference:Ut,DocumentSnapshot:Ca,FieldPath:Ko,FieldValue:Qo,Firestore:xr,FirestoreError:pe,GeoPoint:br,Query:Zr,QueryCompositeFilterConstraint:Hm,QueryConstraint:qm,QueryDocumentSnapshot:Ku,QueryFieldFilterConstraint:Sd,QueryLimitConstraint:Gm,QueryOrderByConstraint:$m,QuerySnapshot:ka,SnapshotMetadata:ec,Timestamp:Et,VectorValue:wr,WriteBatch:aS,_AutoId:xm,_ByteString:Tn,_DatabaseId:gc,_DocumentKey:Ne,_EmptyAuthCredentialsProvider:OE,_FieldPath:xn,_cast:$n,_logWarn:Vo,_validateIsNotUsedTogether:PE,addDoc:ad,arrayRemove:lS,arrayUnion:oS,collection:St,connectFirestoreEmulator:FT,deleteDoc:wv,doc:dt,documentId:Vm,ensureFirestoreConfigured:jc,executeWrite:Oc,getDoc:La,getDocs:En,getFirestore:GT,limit:Ff,onSnapshot:ic,orderBy:Fm,query:Gt,serverTimestamp:Ad,setDoc:Km,updateDoc:Cs,where:pn,writeBatch:cS},Symbol.toStringTag,{value:"Module"}));var jR="firebase",OR="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$r(jR,OR,"app");function uS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const DR=uS,dS=new yd("auth","Firebase",uS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf=new Py("@firebase/auth");function PR(n,...e){Gf.logLevel<=Je.WARN&&Gf.warn(`Auth (${$o}): ${n}`,...e)}function Cf(n,...e){Gf.logLevel<=Je.ERROR&&Gf.error(`Auth (${$o}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(n,...e){throw _v(n,...e)}function Kr(n,...e){return _v(n,...e)}function hS(n,e,t){const s={...DR(),[e]:t};return new yd("auth","Firebase",s).create(e,{appName:n.name})}function Ti(n){return hS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _v(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return dS.create(n,...e)}function De(n,e,...t){if(!n)throw _v(e,...t)}function wi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Cf(e),new Error(e)}function Ri(n,e){n||wi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function MR(){return $1()==="http:"||$1()==="https:"}function $1(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(MR()||c3()||"connection"in navigator)?navigator.onLine:!0}function VR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ri(t>e,"Short delay should be less than long delay!"),this.isMobile=a3()||u3()}get(){return LR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(n,e){Ri(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],zR=new Nd(3e4,6e4);function za(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function qa(n,e,t,s,a={}){return mS(n,a,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const f=vd({key:n.config.apiKey,...c}).slice(1),g=await n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);const y={method:e,headers:g,...l};return l3()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&Ho(n.emulatorConfig.host)&&(y.credentials="include"),fS.fetch()(await gS(n,n.config.apiHost,t,f),y)})}async function mS(n,e,t){n._canInitEmulator=!1;const s={...UR,...e};try{const a=new HR(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw lf(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[g,y]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw lf(n,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw lf(n,"email-already-in-use",c);if(g==="USER_DISABLED")throw lf(n,"user-disabled",c);const v=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw hS(n,v,y);Er(n,v)}}catch(a){if(a instanceof Jr)throw a;Er(n,"network-request-failed",{message:String(a)})}}async function Cd(n,e,t,s,a={}){const l=await qa(n,e,t,s,a);return"mfaPendingCredential"in l&&Er(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function gS(n,e,t,s){const a=`${e}${t}?${s}`,l=n,c=l.config.emulator?xv(n.config,a):`${n.config.apiScheme}://${a}`;return BR.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function qR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class HR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Kr(this.auth,"network-request-failed")),zR.get())})}}function lf(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=Kr(n,e,s);return a.customData._tokenResponse=t,a}function F1(n){return n!==void 0&&n.enterprise!==void 0}class $R{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return qR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function FR(n,e){return qa(n,"GET","/v2/recaptchaConfig",za(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GR(n,e){return qa(n,"POST","/v1/accounts:delete",e)}async function Kf(n,e){return qa(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function KR(n,e=!1){const t=en(n),s=await t.getIdToken(e),a=Ev(s);De(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:s,authTime:Qu(v0(a.auth_time)),issuedAtTime:Qu(v0(a.iat)),expirationTime:Qu(v0(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function v0(n){return Number(n)*1e3}function Ev(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Cf("JWT malformed, contained fewer than 3 sections"),null;try{const a=mE(t);return a?JSON.parse(a):(Cf("Failed to decode base64 JWT payload"),null)}catch(a){return Cf("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function G1(n){const e=Ev(n);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ld(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Jr&&QR(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function QR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qu(this.lastLoginAt),this.creationTime=Qu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qf(n){var _;const e=n.auth,t=await n.getIdToken(),s=await ld(n,Kf(e,{idToken:t}));De(s==null?void 0:s.users.length,e,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const l=(_=a.providerUserInfo)!=null&&_.length?pS(a.providerUserInfo):[],c=XR(n.providerData,l),f=n.isAnonymous,g=!(n.email&&a.passwordHash)&&!(c!=null&&c.length),y=f?g:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new iy(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(n,v)}async function WR(n){const e=en(n);await Qf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XR(n,e){return[...n.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function pS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JR(n,e){const t=await mS(n,{},async()=>{const s=vd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await gS(n,a,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:s};return n.emulatorConfig&&Ho(n.emulatorConfig.host)&&(g.credentials="include"),fS.fetch()(c,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ZR(n,e){return qa(n,"POST","/v2/accounts:revokeToken",za(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):G1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){De(e.length!==0,"internal-error");const t=G1(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:l}=await JR(e,t);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:l}=t,c=new ac;return s&&(De(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),a&&(De(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(De(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ac,this.toJSON())}_performRefresh(){return wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ga(n,e){De(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class pr{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new YR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new iy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await ld(this,this.stsTokenManager.getToken(this.auth,e));return De(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return KR(this,e)}reload(){return WR(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new pr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Qf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ks(this.auth.app))return Promise.reject(Ti(this.auth));const e=await this.getIdToken();return await ld(this,GR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:_,emailVerified:E,isAnonymous:T,providerData:N,stsTokenManager:P}=t;De(_&&P,e,"internal-error");const C=ac.fromJSON(this.name,P);De(typeof _=="string",e,"internal-error"),ga(s,e.name),ga(a,e.name),De(typeof E=="boolean",e,"internal-error"),De(typeof T=="boolean",e,"internal-error"),ga(l,e.name),ga(c,e.name),ga(f,e.name),ga(g,e.name),ga(y,e.name),ga(v,e.name);const M=new pr({uid:_,auth:e,email:a,emailVerified:E,displayName:s,isAnonymous:T,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:C,createdAt:y,lastLoginAt:v});return N&&Array.isArray(N)&&(M.providerData=N.map(H=>({...H}))),g&&(M._redirectEventId=g),M}static async _fromIdTokenResponse(e,t,s=!1){const a=new ac;a.updateFromServerResponse(t);const l=new pr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await Qf(l),l}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];De(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?pS(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),f=new ac;f.updateFromIdToken(s);const g=new pr({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:c}),y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new iy(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=new Map;function _i(n){Ri(n instanceof Function,"Expected a class definition");let e=K1.get(n);return e?(Ri(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,K1.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}yS.type="NONE";const Q1=yS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(n,e,t){return`firebase:${n}:${e}:${t}`}class oc{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=kf(this.userKey,a.apiKey,l),this.fullPersistenceKey=kf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Kf(this.auth,{idToken:e}).catch(()=>{});return t?pr._fromGetAccountInfoResponse(this.auth,t,e):null}return pr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new oc(_i(Q1),e,s);const a=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=a[0]||_i(Q1);const c=kf(s,e.config.apiKey,e.name);let f=null;for(const y of t)try{const v=await y._get(c);if(v){let _;if(typeof v=="string"){const E=await Kf(e,{idToken:v}).catch(()=>{});if(!E)break;_=await pr._fromGetAccountInfoResponse(e,E,v)}else _=pr._fromJSON(e,v);y!==l&&(f=_),l=y;break}}catch{}const g=a.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new oc(l,e,s):(l=g[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(c)}catch{}})),new oc(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_S(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ES(e))return"Blackberry";if(TS(e))return"Webos";if(bS(e))return"Safari";if((e.includes("chrome/")||wS(e))&&!e.includes("edge/"))return"Chrome";if(xS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function vS(n=Fn()){return/firefox\//i.test(n)}function bS(n=Fn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wS(n=Fn()){return/crios\//i.test(n)}function _S(n=Fn()){return/iemobile/i.test(n)}function xS(n=Fn()){return/android/i.test(n)}function ES(n=Fn()){return/blackberry/i.test(n)}function TS(n=Fn()){return/webos/i.test(n)}function Tv(n=Fn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function eI(n=Fn()){var e;return Tv(n)&&!!((e=window.navigator)!=null&&e.standalone)}function tI(){return d3()&&document.documentMode===10}function SS(n=Fn()){return Tv(n)||xS(n)||TS(n)||ES(n)||/windows phone/i.test(n)||_S(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(n,e=[]){let t;switch(n){case"Browser":t=Y1(Fn());break;case"Worker":t=`${Y1(Fn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${$o}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,f)=>{try{const g=e(l);c(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sI(n,e={}){return qa(n,"GET","/v2/passwordPolicy",za(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=6;class iI{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??rI,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new W1(this),this.idTokenSubscription=new W1(this),this.beforeStateQueue=new nI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_i(t)),this._initializationPromise=this.queue(async()=>{var s,a,l;if(!this._deleted&&(this.persistenceManager=await oc.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Kf(this,{idToken:e}),s=await pr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(ks(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!c||c===f)&&(g!=null&&g.user)&&(s=g.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Qf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=VR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ks(this.app))return Promise.reject(Ti(this));const t=e?en(e):null;return t&&De(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ks(this.app)?Promise.reject(Ti(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ks(this.app)?Promise.reject(Ti(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_i(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sI(this),t=new iI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yd("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await ZR(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_i(e)||this._popupRedirectResolver;De(t,this,"argument-error"),this.redirectPersistenceManager=await oc.create(this,[_i(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,a);return()=>{c=!0,g()}}else{const g=e.addObserver(t);return()=>{c=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=AS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(ks(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&PR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Wo(n){return en(n)}class W1{constructor(e){this.auth=e,this.observer=null,this.addObserver=b3(t=>this.observer=t)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oI(n){Qm=n}function NS(n){return Qm.loadJS(n)}function lI(){return Qm.recaptchaEnterpriseScript}function cI(){return Qm.gapiScript}function uI(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class dI{constructor(){this.enterprise=new hI}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class hI{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const fI="recaptcha-enterprise",CS="NO_RECAPTCHA";class mI{constructor(e){this.type=fI,this.auth=Wo(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,f)=>{FR(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const y=new $R(g);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,c(y.siteKey)}}).catch(g=>{f(g)})})}function a(l,c,f){const g=window.grecaptcha;F1(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(y=>{c(y)}).catch(()=>{c(CS)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new dI().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{s(this.auth).then(f=>{if(!t&&F1(window.grecaptcha))a(f,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let g=lI();g.length!==0&&(g+=f),NS(g).then(()=>{a(f,l,c)}).catch(y=>{c(y)})}}).catch(f=>{c(f)})})}}async function X1(n,e,t,s=!1,a=!1){const l=new mI(n);let c;if(a)c=CS;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const g=f.phoneEnrollmentInfo.phoneNumber,y=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const g=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function ay(n,e,t,s,a){var l;if((l=n._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await X1(n,e,t,t==="getOobCode");return s(n,c)}else return s(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await X1(n,e,t,t==="getOobCode");return s(n,f)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(n,e){const t=wm(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Ai(l,e??{}))return a;Er(a,"already-initialized")}return t.initialize({options:e})}function pI(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(_i);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function yI(n,e,t){const s=Wo(n);De(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=kS(e),{host:c,port:f}=vI(e),g=f===null?"":`:${f}`,y={url:`${l}//${c}${g}/`},v=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){De(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),De(Ai(y,s.config.emulator)&&Ai(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,Ho(c)?(Oy(`${l}//${c}${g}`),Dy("Auth",!0)):bI()}function kS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function vI(n){const e=kS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:J1(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:J1(c)}}}function J1(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function bI(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return wi("not implemented")}_getIdTokenResponse(e){return wi("not implemented")}_linkToIdToken(e,t){return wi("not implemented")}_getReauthenticationResolver(e){return wi("not implemented")}}async function wI(n,e){return qa(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _I(n,e){return Cd(n,"POST","/v1/accounts:signInWithPassword",za(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xI(n,e){return Cd(n,"POST","/v1/accounts:signInWithEmailLink",za(n,e))}async function EI(n,e){return Cd(n,"POST","/v1/accounts:signInWithEmailLink",za(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd extends Sv{constructor(e,t,s,a=null){super("password",s),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new cd(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new cd(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ay(e,t,"signInWithPassword",_I);case"emailLink":return xI(e,{email:this._email,oobCode:this._password});default:Er(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ay(e,s,"signUpPassword",wI);case"emailLink":return EI(e,{idToken:t,email:this._email,oobCode:this._password});default:Er(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lc(n,e){return Cd(n,"POST","/v1/accounts:signInWithIdp",za(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="http://localhost";class Bo extends Sv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Bo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Er("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...l}=t;if(!s||!a)return null;const c=new Bo(s,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return lc(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,lc(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,lc(e,t)}buildRequest(){const e={requestUri:TI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=vd(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function AI(n){const e=Mu(Lu(n)).link,t=e?Mu(Lu(e)).deep_link_id:null,s=Mu(Lu(n)).deep_link_id;return(s?Mu(Lu(s)).link:null)||s||t||e||n}class Av{constructor(e){const t=Mu(Lu(e)),s=t.apiKey??null,a=t.oobCode??null,l=SI(t.mode??null);De(s&&a&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=AI(e);try{return new Av(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(){this.providerId=Dc.PROVIDER_ID}static credential(e,t){return cd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Av.parseLink(t);return De(s,"argument-error"),cd._fromEmailAndCode(e,s.code,s.tenantId)}}Dc.PROVIDER_ID="password";Dc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Dc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd extends RS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya extends kd{constructor(){super("facebook.com")}static credential(e){return Bo._fromParams({providerId:ya.PROVIDER_ID,signInMethod:ya.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ya.credentialFromTaggedObject(e)}static credentialFromError(e){return ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ya.credential(e.oauthAccessToken)}catch{return null}}}ya.FACEBOOK_SIGN_IN_METHOD="facebook.com";ya.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va extends kd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Bo._fromParams({providerId:va.PROVIDER_ID,signInMethod:va.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return va.credentialFromTaggedObject(e)}static credentialFromError(e){return va.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return va.credential(t,s)}catch{return null}}}va.GOOGLE_SIGN_IN_METHOD="google.com";va.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba extends kd{constructor(){super("github.com")}static credential(e){return Bo._fromParams({providerId:ba.PROVIDER_ID,signInMethod:ba.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ba.credentialFromTaggedObject(e)}static credentialFromError(e){return ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ba.credential(e.oauthAccessToken)}catch{return null}}}ba.GITHUB_SIGN_IN_METHOD="github.com";ba.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa extends kd{constructor(){super("twitter.com")}static credential(e,t){return Bo._fromParams({providerId:wa.PROVIDER_ID,signInMethod:wa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return wa.credentialFromTaggedObject(e)}static credentialFromError(e){return wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return wa.credential(t,s)}catch{return null}}}wa.TWITTER_SIGN_IN_METHOD="twitter.com";wa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NI(n,e){return Cd(n,"POST","/v1/accounts:signUp",za(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const l=await pr._fromIdTokenResponse(e,s,a),c=Z1(s);return new zo({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=Z1(s);return new zo({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function Z1(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf extends Jr{constructor(e,t,s,a){super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,Yf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new Yf(e,t,s,a)}}function IS(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Yf._fromErrorAndOperation(n,l,e,s):l})}async function CI(n,e,t=!1){const s=await ld(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return zo._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kI(n,e,t=!1){const{auth:s}=n;if(ks(s.app))return Promise.reject(Ti(s));const a="reauthenticate";try{const l=await ld(n,IS(s,a,e,n),t);De(l.idToken,s,"internal-error");const c=Ev(l.idToken);De(c,s,"internal-error");const{sub:f}=c;return De(n.uid===f,s,"user-mismatch"),zo._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Er(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jS(n,e,t=!1){if(ks(n.app))return Promise.reject(Ti(n));const s="signIn",a=await IS(n,s,e),l=await zo._fromIdTokenResponse(n,s,a);return t||await n._updateCurrentUser(l.user),l}async function RI(n,e){return jS(Wo(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OS(n){const e=Wo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function II(n,e,t){if(ks(n.app))return Promise.reject(Ti(n));const s=Wo(n),c=await ay(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",NI).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&OS(n),g}),f=await zo._fromIdTokenResponse(s,"signIn",c);return await s._updateCurrentUser(f.user),f}function jI(n,e,t){return ks(n.app)?Promise.reject(Ti(n)):RI(en(n),Dc.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&OS(n),s})}function OI(n,e,t,s){return en(n).onIdTokenChanged(e,t,s)}function DI(n,e,t){return en(n).beforeAuthStateChanged(e,t)}function PI(n,e,t,s){return en(n).onAuthStateChanged(e,t,s)}const Wf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Wf,"1"),this.storage.removeItem(Wf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=1e3,LI=10;class PS extends DS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=SS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,g)=>{this.notifyListeners(c,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);tI()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,LI):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},MI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}PS.type="LOCAL";const VI=PS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS extends DS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}MS.type="SESSION";const LS=MS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UI(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new Ym(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const f=Array.from(c).map(async y=>y(t.origin,l)),g=await UI(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ym.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((f,g)=>{const y=Nv("",20);a.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},s);c={messageChannel:a,onMessage(_){const E=_;if(E.data.eventId===y)switch(E.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(E.data.response);break;default:clearTimeout(v),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(){return window}function zI(n){Qr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(){return typeof Qr().WorkerGlobalScope<"u"&&typeof Qr().importScripts=="function"}async function qI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HI(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function $I(){return VS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="firebaseLocalStorageDb",FI=1,Xf="firebaseLocalStorage",BS="fbase_key";class Rd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Wm(n,e){return n.transaction([Xf],e?"readwrite":"readonly").objectStore(Xf)}function GI(){const n=indexedDB.deleteDatabase(US);return new Rd(n).toPromise()}function oy(){const n=indexedDB.open(US,FI);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Xf,{keyPath:BS})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Xf)?e(s):(s.close(),await GI(),e(await oy()))})})}async function ex(n,e,t){const s=Wm(n,!0).put({[BS]:e,value:t});return new Rd(s).toPromise()}async function KI(n,e){const t=Wm(n,!1).get(e),s=await new Rd(t).toPromise();return s===void 0?null:s.value}function tx(n,e){const t=Wm(n,!0).delete(e);return new Rd(t).toPromise()}const QI=800,YI=3;class zS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await oy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>YI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return VS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ym._getInstance($I()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await qI(),!this.activeServiceWorker)return;this.sender=new BI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await oy();return await ex(e,Wf,"1"),await tx(e,Wf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>ex(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>KI(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>tx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Wm(a,!1).getAll();return new Rd(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zS.type="LOCAL";const WI=zS;new Nd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(n,e){return e?_i(e):(De(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv extends Sv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return lc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return lc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return lc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function JI(n){return jS(n.auth,new Cv(n),n.bypassAuthState)}function ZI(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),kI(t,new Cv(n),n.bypassAuthState)}async function ej(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),CI(t,new Cv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e,t,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return JI;case"linkViaPopup":case"linkViaRedirect":return ej;case"reauthViaPopup":case"reauthViaRedirect":return ZI;default:Er(this.auth,"internal-error")}}resolve(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=new Nd(2e3,1e4);class tc extends qS{constructor(e,t,s,a,l){super(e,t,a,l),this.provider=s,this.authWindow=null,this.pollId=null,tc.currentPopupAction&&tc.currentPopupAction.cancel(),tc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){Ri(this.filter.length===1,"Popup operations only handle one event");const e=Nv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Kr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Kr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,tc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tj.get())};e()}}tc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj="pendingRedirect",Rf=new Map;class sj extends qS{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Rf.get(this.auth._key());if(!e){try{const s=await rj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Rf.set(this.auth._key(),e)}return this.bypassAuthState||Rf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rj(n,e){const t=oj(e),s=aj(n);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function ij(n,e){Rf.set(n._key(),e)}function aj(n){return _i(n._redirectPersistence)}function oj(n){return kf(nj,n.config.apiKey,n.name)}async function lj(n,e,t=!1){if(ks(n.app))return Promise.reject(Ti(n));const s=Wo(n),a=XI(s,e),c=await new sj(s,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj=600*1e3;class uj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dj(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!HS(e)){const a=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(Kr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cj&&this.cachedEventUids.clear(),this.cachedEventUids.has(nx(e))}saveEventToCache(e){this.cachedEventUids.add(nx(e)),this.lastProcessedEventTime=Date.now()}}function nx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function HS({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function dj(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hj(n,e={}){return qa(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mj=/^https?/;async function gj(n){if(n.config.emulator)return;const{authorizedDomains:e}=await hj(n);for(const t of e)try{if(pj(t))return}catch{}Er(n,"unauthorized-domain")}function pj(n){const e=ry(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!mj.test(t))return!1;if(fj.test(n))return s===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj=new Nd(3e4,6e4);function sx(){const n=Qr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function vj(n){return new Promise((e,t)=>{var a,l,c;function s(){sx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sx(),t(Kr(n,"network-request-failed"))},timeout:yj.get()})}if((l=(a=Qr().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Qr().gapi)!=null&&c.load)s();else{const f=uI("iframefcb");return Qr()[f]=()=>{gapi.load?s():t(Kr(n,"network-request-failed"))},NS(`${cI()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw If=null,e})}let If=null;function bj(n){return If=If||vj(n),If}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj=new Nd(5e3,15e3),_j="__/auth/iframe",xj="emulator/auth/iframe",Ej={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Sj(n){const e=n.config;De(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?xv(e,xj):`https://${n.config.authDomain}/${_j}`,s={apiKey:e.apiKey,appName:n.name,v:$o},a=Tj.get(n.config.apiHost);a&&(s.eid=a);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${vd(s).slice(1)}`}async function Aj(n){const e=await bj(n),t=Qr().gapi;return De(t,n,"internal-error"),e.open({where:document.body,url:Sj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ej,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const c=Kr(n,"network-request-failed"),f=Qr().setTimeout(()=>{l(c)},wj.get());function g(){Qr().clearTimeout(f),a(s)}s.ping(g).then(g,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Cj=500,kj=600,Rj="_blank",Ij="http://localhost";class rx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jj(n,e,t,s=Cj,a=kj){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g={...Nj,width:s.toString(),height:a.toString(),top:l,left:c},y=Fn().toLowerCase();t&&(f=wS(y)?Rj:t),vS(y)&&(e=e||Ij,g.scrollbars="yes");const v=Object.entries(g).reduce((E,[T,N])=>`${E}${T}=${N},`,"");if(eI(y)&&f!=="_self")return Oj(e||"",f),new rx(null);const _=window.open(e||"",f,v);De(_,n,"popup-blocked");try{_.focus()}catch{}return new rx(_)}function Oj(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj="__/auth/handler",Pj="emulator/auth/handler",Mj=encodeURIComponent("fac");async function ix(n,e,t,s,a,l){De(n.config.authDomain,n,"auth-domain-config-required"),De(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:$o,eventId:a};if(e instanceof RS){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",v3(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,_]of Object.entries({}))c[v]=_}if(e instanceof kd){const v=e.getScopes().filter(_=>_!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const g=await n._getAppCheckToken(),y=g?`#${Mj}=${encodeURIComponent(g)}`:"";return`${Lj(n)}?${vd(f).slice(1)}${y}`}function Lj({config:n}){return n.emulator?xv(n,Pj):`https://${n.authDomain}/${Dj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="webStorageSupport";class Vj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=LS,this._completeRedirectFn=lj,this._overrideRedirectResult=ij}async _openPopup(e,t,s,a){var c;Ri((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await ix(e,t,s,ry(),a);return jj(e,l,Nv())}async _openRedirect(e,t,s,a){await this._originValidation(e);const l=await ix(e,t,s,ry(),a);return zI(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Ri(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await Aj(e),s=new uj(e);return t.register("authEvent",a=>(De(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(b0,{type:b0},a=>{var c;const l=(c=a==null?void 0:a[0])==null?void 0:c[b0];l!==void 0&&t(!!l),Er(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=gj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return SS()||bS()||Tv()}}const Uj=Vj;var ax="@firebase/auth",ox="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qj(n){Mo(new Ra("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=s.options;De(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:AS(n)},y=new aI(s,a,l,g);return pI(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Mo(new Ra("auth-internal",e=>{const t=Wo(e.getProvider("auth").getImmediate());return(s=>new Bj(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),$r(ax,ox,zj(n)),$r(ax,ox,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj=300,$j=vE("authIdTokenMaxAge")||Hj;let lx=null;const Fj=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>$j)return;const a=t==null?void 0:t.token;lx!==a&&(lx=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function Gj(n=_m()){const e=wm(n,"auth");if(e.isInitialized())return e.getImmediate();const t=gI(n,{popupRedirectResolver:Uj,persistence:[WI,VI,LS]}),s=vE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=Fj(l.toString());DI(t,c,()=>c(t.currentUser)),OI(t,f=>c(f))}}const a=gE("auth");return a&&yI(t,`http://${a}`),t}function Kj(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}oI({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=a=>{const l=Kr("internal-error");l.customData=a,t(l)},s.type="text/javascript",s.charset="UTF-8",Kj().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qj("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="firebasestorage.googleapis.com",Qj="storageBucket",Yj=120*1e3,Wj=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ha=class FS extends Jr{constructor(e,t,s=0){super(w0(e),`Firebase Storage: ${t} (${w0(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,FS.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return w0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var Wr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Wr||(Wr={}));function w0(n){return"storage/"+n}function Xj(){const n="An unknown error occurred, please check the error payload for server response.";return new Ha(Wr.UNKNOWN,n)}function Jj(){return new Ha(Wr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Zj(){return new Ha(Wr.CANCELED,"User canceled the upload/download.")}function eO(n){return new Ha(Wr.INVALID_URL,"Invalid URL '"+n+"'.")}function tO(n){return new Ha(Wr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function cx(n){return new Ha(Wr.INVALID_ARGUMENT,n)}function GS(){return new Ha(Wr.APP_DELETED,"The Firebase app was deleted.")}function nO(n){return new Ha(Wr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=yr.makeFromUrl(e,t)}catch{return new yr(e,"")}if(s.path==="")return s;throw tO(e)}static makeFromUrl(e,t){let s=null;const a="([A-Za-z0-9.\\-_]+)";function l(te){te.path.charAt(te.path.length-1)==="/"&&(te.path_=te.path_.slice(0,-1))}const c="(/(.*))?$",f=new RegExp("^gs://"+a+c,"i"),g={bucket:1,path:3};function y(te){te.path_=decodeURIComponent(te.path)}const v="v[A-Za-z0-9_]+",_=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",T=new RegExp(`^https?://${_}/${v}/b/${a}/o${E}`,"i"),N={bucket:1,path:3},P=t===$S?"(?:storage.googleapis.com|storage.cloud.google.com)":t,C="([^?#]*)",M=new RegExp(`^https?://${P}/${a}/${C}`,"i"),F=[{regex:f,indices:g,postModify:l},{regex:T,indices:N,postModify:y},{regex:M,indices:{bucket:1,path:2},postModify:y}];for(let te=0;te<F.length;te++){const fe=F[te],he=fe.regex.exec(e);if(he){const k=he[fe.indices.bucket];let R=he[fe.indices.path];R||(R=""),s=new yr(k,R),fe.postModify(s);break}}if(s==null)throw eO(e);return s}}class sO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(n,e,t){let s=1,a=null,l=null,c=!1,f=0;function g(){return f===2}let y=!1;function v(...C){y||(y=!0,e.apply(null,C))}function _(C){a=setTimeout(()=>{a=null,n(T,g())},C)}function E(){l&&clearTimeout(l)}function T(C,...M){if(y){E();return}if(C){E(),v.call(null,C,...M);return}if(g()||c){E(),v.call(null,C,...M);return}s<64&&(s*=2);let F;f===1?(f=2,F=0):F=(s+Math.random())*1e3,_(F)}let N=!1;function P(C){N||(N=!0,E(),!y&&(a!==null?(C||(f=2),clearTimeout(a),_(0)):C||(f=1)))}return _(0),l=setTimeout(()=>{c=!0,P(!0)},t),P}function iO(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(n){return n!==void 0}function ux(n,e,t,s){if(s<e)throw cx(`Invalid value for '${n}'. Expected ${e} or greater.`);if(s>t)throw cx(`Invalid value for '${n}'. Expected ${t} or less.`)}function oO(n){const e=encodeURIComponent;let t="?";for(const s in n)if(n.hasOwnProperty(s)){const a=e(s)+"="+e(n[s]);t=t+a+"&"}return t=t.slice(0,-1),t}var Jf;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Jf||(Jf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lO(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||a||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,t,s,a,l,c,f,g,y,v,_,E=!0,T=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=v,this.connectionFactory_=_,this.retry=E,this.isUsingEmulator=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,P)=>{this.resolve_=N,this.reject_=P,this.start_()})}start_(){const e=(s,a)=>{if(a){s(!1,new cf(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=f=>{const g=f.loaded,y=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const f=l.getErrorCode()===Jf.NO_ERROR,g=l.getStatus();if(!f||lO(g,this.additionalRetryCodes_)&&this.retry){const v=l.getErrorCode()===Jf.ABORT;s(!1,new cf(!1,null,v));return}const y=this.successCodes_.indexOf(g)!==-1;s(!0,new cf(y,l))})},t=(s,a)=>{const l=this.resolve_,c=this.reject_,f=a.connection;if(a.wasSuccessCode)try{const g=this.callback_(f,f.getResponse());aO(g)?l(g):l()}catch(g){c(g)}else if(f!==null){const g=Xj();g.serverResponse=f.getErrorText(),this.errorCallback_?c(this.errorCallback_(f,g)):c(g)}else if(a.canceled){const g=this.appDelete_?GS():Zj();c(g)}else{const g=Jj();c(g)}};this.canceled_?t(!1,new cf(!1,null,!0)):this.backoffId_=rO(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&iO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class cf{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function uO(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function dO(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function hO(n,e){e&&(n["X-Firebase-GMPID"]=e)}function fO(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function mO(n,e,t,s,a,l,c=!0,f=!1){const g=oO(n.urlParams),y=n.url+g,v=Object.assign({},n.headers);return hO(v,e),uO(v,t),dO(v,l),fO(v,s),new cO(y,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,c,f)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gO(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function pO(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e,t){this._service=e,t instanceof yr?this._location=t:this._location=yr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Zf(e,t)}get root(){const e=new yr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return pO(this._location.path)}get storage(){return this._service}get parent(){const e=gO(this._location.path);if(e===null)return null;const t=new yr(this._location.bucket,e);return new Zf(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw nO(e)}}function dx(n,e){const t=e==null?void 0:e[Qj];return t==null?null:yr.makeFromBucketSpec(t,n)}function yO(n,e,t,s={}){n.host=`${e}:${t}`;const a=Ho(e);a&&(Oy(`https://${n.host}/b`),Dy("Storage",!0)),n._isUsingEmulator=!0,n._protocol=a?"https":"http";const{mockUserToken:l}=s;l&&(n._overrideAuthToken=typeof l=="string"?l:bE(l,n.app.options.projectId))}class vO{constructor(e,t,s,a,l,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=$S,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Yj,this._maxUploadRetryTime=Wj,this._requests=new Set,a!=null?this._bucket=yr.makeFromBucketSpec(a,this._host):this._bucket=dx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=yr.makeFromBucketSpec(this._url,e):this._bucket=dx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ux("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ux("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ks(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zf(this,e)}_makeRequest(e,t,s,a,l=!0){if(this._deleted)return new sO(GS());{const c=mO(e,this._appId,s,a,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[s,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,a).getPromise()}}const hx="@firebase/storage",fx="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="storage";function bO(n=_m(),e){n=en(n);const s=wm(n,KS).getImmediate({identifier:e}),a=pE("storage");return a&&wO(s,...a),s}function wO(n,e,t,s={}){yO(n,e,t,s)}function _O(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),s=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new vO(t,s,a,e,$o)}function xO(){Mo(new Ra(KS,_O,"PUBLIC").setMultipleInstances(!0)),$r(hx,fx,""),$r(hx,fx,"esm2020")}xO();const EO={apiKey:"AIzaSyDll7h-FpzCVml2vy8KeMPA6xExGUda_NE",authDomain:"thi-tnd.firebaseapp.com",projectId:"thi-tnd",storageBucket:"thi-tnd.firebasestorage.app",messagingSenderId:"107125875663",appId:"1:107125875663:web:0e1a632779f51340c828ba",databaseURL:"https://thi-tnd-default-rtdb.asia-southeast1.firebasedatabase.app"},Xm=wC().length?_m():xE(EO),ud=Gj(Xm),Ae=GT(Xm);bO(Xm);const TO=Object.freeze(Object.defineProperty({__proto__:null,app:Xm,auth:ud,db:Ae},Symbol.toStringTag,{value:"Module"})),QS=async(n,e,t,s,a,l,c,f)=>{try{const g={title:n,message:e,type:t,targetType:s,targetId:a,senderId:l,senderName:c||"H thng",createdAt:Ad(),expiryDate:f?Et.fromDate(f):null,read:!1,readBy:[],deletedBy:[]};if(s==="user"&&a)await ad(St(Ae,"users",a,"notifications"),g),console.log(`Notification sent to user ${a}`);else if(s==="class"&&a){let y=new Map;const v=Gt(St(Ae,"courses"),pn("name","==",a)),_=await En(v);let E=null,T=a;if(!_.empty)E=_.docs[0].id;else{const C=dt(Ae,"courses",a),M=await En(Gt(St(Ae,"courses"),pn(Vm(),"==",a)));M.empty||(E=a,T=M.docs[0].data().name)}console.log(`Resolved Class Target: ID=${E}, Name=${T}`);const N=[];if(T&&(N.push(En(Gt(St(Ae,"users"),pn("courseName","==",T)))),N.push(En(Gt(St(Ae,"users"),pn("class","==",T))))),E&&N.push(En(Gt(St(Ae,"users"),pn("courseId","==",E)))),(await Promise.all(N)).forEach(C=>{C.docs.forEach(M=>{y.set(M.id,M.id)})}),y.size===0)console.log("No students found for this class.");else{const C=cS(Ae);let M=0;y.forEach(H=>{const F=dt(St(Ae,"users",H,"notifications"));C.set(F,g),M++}),await C.commit(),console.log(`Notification sent to ${y.size} students in class ${T}`)}}await ad(St(Ae,"notifications"),g),console.log("Master notification record created.")}catch(g){throw console.error("Error sending notification:",g),g}},SO=async(n,e)=>{try{const t=[],s=Gt(St(Ae,"notifications"),pn("targetType","==","all"),Ff(20)),a=Gt(St(Ae,"users",n,"notifications"),Fm("createdAt","desc"),Ff(20));try{(await En(s)).docs.forEach(f=>{var v;const g=f.data(),y=((v=g.readBy)==null?void 0:v.includes(n))||!1;t.push({id:f.id,...g,read:y})})}catch(c){console.warn("Retrying global fetch without constraints due to error:",c)}try{(await En(a)).docs.forEach(f=>{t.push({id:f.id,...f.data()})})}catch(c){console.error("Error fetching personal notifications:",c)}return t.sort((c,f)=>{var v,_;const g=((v=c.createdAt)==null?void 0:v.seconds)||0;return(((_=f.createdAt)==null?void 0:_.seconds)||0)-g}).filter(c=>{var f;return!((f=c.deletedBy)!=null&&f.includes(n))})}catch(t){return console.error("Error fetching notifications:",t),[]}},AO=async(n,e)=>{try{const t=dt(Ae,"notifications",n),{arrayUnion:s}=await zn(async()=>{const{arrayUnion:l}=await Promise.resolve().then(()=>od);return{arrayUnion:l}},void 0);try{await Cs(t,{deletedBy:s(e)});return}catch{}const a=dt(Ae,"users",e,"notifications",n);await Cs(a,{deletedBy:s(e)})}catch{}},YS=async()=>{try{const n=Et.now(),e=Gt(St(Ae,"notifications"),pn("targetType","==","all"),Ff(20)),t=await En(e),s=[];return t.forEach(a=>{const l=a.data();(l.type==="special"||l.type==="attention")&&(l.expiryDate&&l.expiryDate.seconds?l.expiryDate.seconds>n.seconds&&s.push({id:a.id,...l}):s.push({id:a.id,...l}))}),s}catch(n){return console.error("Error fetching marquee:",n),[]}},NO=async()=>{try{const n=Gt(St(Ae,"notifications"),Fm("createdAt","desc"));return(await En(n)).docs.map(t=>({id:t.id,...t.data()}))}catch(n){return console.error("Error fetching all notifications:",n),[]}},CO=async n=>{try{return await wv(dt(Ae,"notifications",n)),!0}catch(e){return console.error("Error deleting notification:",e),!1}};var WS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},mx=vr.createContext&&vr.createContext(WS),kO=["attr","size","title"];function RO(n,e){if(n==null)return{};var t=IO(n,e),s,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(a=0;a<l.length;a++)s=l[a],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(t[s]=n[s])}return t}function IO(n,e){if(n==null)return{};var t={};for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)){if(e.indexOf(s)>=0)continue;t[s]=n[s]}return t}function em(){return em=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},em.apply(this,arguments)}function gx(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,s)}return t}function tm(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gx(Object(t),!0).forEach(function(s){jO(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):gx(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function jO(n,e,t){return e=OO(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function OO(n){var e=DO(n,"string");return typeof e=="symbol"?e:e+""}function DO(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var s=t.call(n,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function XS(n){return n&&n.map((e,t)=>vr.createElement(e.tag,tm({key:t},e.attr),XS(e.child)))}function tt(n){return e=>vr.createElement(PO,em({attr:tm({},n.attr)},e),XS(n.child))}function PO(n){var e=t=>{var{attr:s,size:a,title:l}=n,c=RO(n,kO),f=a||t.size||"1em",g;return t.className&&(g=t.className),n.className&&(g=(g?g+" ":"")+n.className),vr.createElement("svg",em({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,c,{className:g,style:tm(tm({color:n.color||t.color},t.style),n.style),height:f,width:f,xmlns:"http://www.w3.org/2000/svg"}),l&&vr.createElement("title",null,l),n.children)};return mx!==void 0?vr.createElement(mx.Consumer,null,t=>e(t)):e(WS)}function Yu(n){return tt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(n)}function MO(n){return tt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.034 8 8 119.033 8 256s111.034 248 248 248 248-111.034 248-248S392.967 8 256 8zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676zM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676z"},child:[]}]})(n)}function dd(n){return tt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(n)}function LO(n){return tt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M542.22 32.05c-54.8 3.11-163.72 14.43-230.96 55.59-4.64 2.84-7.27 7.89-7.27 13.17v363.87c0 11.55 12.63 18.85 23.28 13.49 69.18-34.82 169.23-44.32 218.7-46.92 16.89-.89 30.02-14.43 30.02-30.66V62.75c.01-17.71-15.35-31.74-33.77-30.7zM264.73 87.64C197.5 46.48 88.58 35.17 33.78 32.05 15.36 31.01 0 45.04 0 62.75V400.6c0 16.24 13.13 29.78 30.02 30.66 49.49 2.6 149.59 12.11 218.77 46.95 10.62 5.35 23.21-1.94 23.21-13.46V100.63c0-5.29-2.62-10.14-7.27-12.99z"},child:[]}]})(n)}function VO(n){return tt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"},child:[]}]})(n)}function ly(n){return tt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M208 352c-2.39 0-4.78.35-7.06 1.09C187.98 357.3 174.35 360 160 360c-14.35 0-27.98-2.7-40.95-6.91-2.28-.74-4.66-1.09-7.05-1.09C49.94 352-.33 402.48 0 464.62.14 490.88 21.73 512 48 512h224c26.27 0 47.86-21.12 48-47.38.33-62.14-49.94-112.62-112-112.62zm-48-32c53.02 0 96-42.98 96-96s-42.98-96-96-96-96 42.98-96 96 42.98 96 96 96zM592 0H208c-26.47 0-48 22.25-48 49.59V96c23.42 0 45.1 6.78 64 17.8V64h352v288h-64v-64H384v64h-76.24c19.1 16.69 33.12 38.73 39.69 64H592c26.47 0 48-22.25 48-49.59V49.59C640 22.25 618.47 0 592 0z"},child:[]}]})(n)}function JS(n){return tt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(n)}function UO(n){return tt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(n)}function BO(n){return tt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(n)}function zO(n){return tt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M512.1 191l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0L552 6.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zm-10.5-58.8c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.7-82.4 14.3-52.8 52.8zM386.3 286.1l33.7 16.8c10.1 5.8 14.5 18.1 10.5 29.1-8.9 24.2-26.4 46.4-42.6 65.8-7.4 8.9-20.2 11.1-30.3 5.3l-29.1-16.8c-16 13.7-34.6 24.6-54.9 31.7v33.6c0 11.6-8.3 21.6-19.7 23.6-24.6 4.2-50.4 4.4-75.9 0-11.5-2-20-11.9-20-23.6V418c-20.3-7.2-38.9-18-54.9-31.7L74 403c-10 5.8-22.9 3.6-30.3-5.3-16.2-19.4-33.3-41.6-42.2-65.7-4-10.9.4-23.2 10.5-29.1l33.3-16.8c-3.9-20.9-3.9-42.4 0-63.4L12 205.8c-10.1-5.8-14.6-18.1-10.5-29 8.9-24.2 26-46.4 42.2-65.8 7.4-8.9 20.2-11.1 30.3-5.3l29.1 16.8c16-13.7 34.6-24.6 54.9-31.7V57.1c0-11.5 8.2-21.5 19.6-23.5 24.6-4.2 50.5-4.4 76-.1 11.5 2 20 11.9 20 23.6v33.6c20.3 7.2 38.9 18 54.9 31.7l29.1-16.8c10-5.8 22.9-3.6 30.3 5.3 16.2 19.4 33.2 41.6 42.1 65.8 4 10.9.1 23.2-10 29.1l-33.7 16.8c3.9 21 3.9 42.5 0 63.5zm-117.6 21.1c59.2-77-28.7-164.9-105.7-105.7-59.2 77 28.7 164.9 105.7 105.7zm243.4 182.7l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0l8.2-14.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zM501.6 431c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.6-82.4 14.3-52.8 52.8z"},child:[]}]})(n)}function Xl(n){return tt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(n)}function qO(n){return tt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 464c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V200.724a48 48 0 0 1 18.387-37.776c24.913-19.529 45.501-35.365 164.2-121.511C199.412 29.17 232.797-.347 256 .003c23.198-.354 56.596 29.172 73.413 41.433 118.687 86.137 139.303 101.995 164.2 121.512A48 48 0 0 1 512 200.724V464zm-65.666-196.605c-2.563-3.728-7.7-4.595-11.339-1.907-22.845 16.873-55.462 40.705-105.582 77.079-16.825 12.266-50.21 41.781-73.413 41.43-23.211.344-56.559-29.143-73.413-41.43-50.114-36.37-82.734-60.204-105.582-77.079-3.639-2.688-8.776-1.821-11.339 1.907l-9.072 13.196a7.998 7.998 0 0 0 1.839 10.967c22.887 16.899 55.454 40.69 105.303 76.868 20.274 14.781 56.524 47.813 92.264 47.573 35.724.242 71.961-32.771 92.263-47.573 49.85-36.179 82.418-59.97 105.303-76.868a7.998 7.998 0 0 0 1.839-10.967l-9.071-13.196z"},child:[]}]})(n)}function Jm(n){return tt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(n)}function px(n){return tt({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"},child:[]}]})(n)}function nm(n){return tt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.34 153.2L343.4 67.5c-15.2-4.67-31.6-4.67-46.79 0L17.66 153.2c-23.54 7.23-23.54 38.36 0 45.59l48.63 14.94c-10.67 13.19-17.23 29.28-17.88 46.9C38.78 266.15 32 276.11 32 288c0 10.78 5.68 19.85 13.86 25.65L20.33 428.53C18.11 438.52 25.71 448 35.94 448h56.11c10.24 0 17.84-9.48 15.62-19.47L82.14 313.65C90.32 307.85 96 298.78 96 288c0-11.57-6.47-21.25-15.66-26.87.76-15.02 8.44-28.3 20.69-36.72L296.6 284.5c9.06 2.78 26.44 6.25 46.79 0l278.95-85.7c23.55-7.24 23.55-38.36 0-45.6zM352.79 315.09c-28.53 8.76-52.84 3.92-65.59 0l-145.02-44.55L128 384c0 35.35 85.96 64 192 64s192-28.65 192-64l-14.18-113.47-145.03 44.56z"},child:[]}]})(n)}function Wu(n){return tt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"},child:[]}]})(n)}function HO(n){return tt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(n)}function ZS(n){return tt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(n)}function uf(n){return tt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"},child:[]}]})(n)}function nc(n){return tt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(n)}function kv(n){return tt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(n)}function jo(n){return tt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M0 224v272c0 8.84 7.16 16 16 16h80V192H32c-17.67 0-32 14.33-32 32zm360-48h-24v-40c0-4.42-3.58-8-8-8h-16c-4.42 0-8 3.58-8 8v64c0 4.42 3.58 8 8 8h48c4.42 0 8-3.58 8-8v-16c0-4.42-3.58-8-8-8zm137.75-63.96l-160-106.67a32.02 32.02 0 0 0-35.5 0l-160 106.67A32.002 32.002 0 0 0 128 138.66V512h128V368c0-8.84 7.16-16 16-16h96c8.84 0 16 7.16 16 16v144h128V138.67c0-10.7-5.35-20.7-14.25-26.63zM320 256c-44.18 0-80-35.82-80-80s35.82-80 80-80 80 35.82 80 80-35.82 80-80 80zm288-64h-64v320h80c8.84 0 16-7.16 16-16V224c0-17.67-14.33-32-32-32z"},child:[]}]})(n)}function cy(n){return tt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(n)}function $O(n){return tt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(n)}function e4(n){return tt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 32h192c13.255 0 24 10.745 24 24v160c0 13.255-10.745 24-24 24H296c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24zm-80 0H24C10.745 32 0 42.745 0 56v160c0 13.255 10.745 24 24 24h192c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24zM0 296v160c0 13.255 10.745 24 24 24h192c13.255 0 24-10.745 24-24V296c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm296 184h192c13.255 0 24-10.745 24-24V296c0-13.255-10.745-24-24-24H296c-13.255 0-24 10.745-24 24v160c0 13.255 10.745 24 24 24z"},child:[]}]})(n)}function sc(n){return tt({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(n)}function Oo(n){return tt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(n)}function FO(n){return tt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 128v16a8 8 0 0 1-8 8h-24v12c0 6.627-5.373 12-12 12H60c-6.627 0-12-5.373-12-12v-12H24a8 8 0 0 1-8-8v-16a8 8 0 0 1 4.941-7.392l232-88a7.996 7.996 0 0 1 6.118 0l232 88A8 8 0 0 1 496 128zm-24 304H40c-13.255 0-24 10.745-24 24v16a8 8 0 0 0 8 8h464a8 8 0 0 0 8-8v-16c0-13.255-10.745-24-24-24zM96 192v192H60c-6.627 0-12 5.373-12 12v20h416v-20c0-6.627-5.373-12-12-12h-36V192h-64v192h-64V192h-64v192h-64V192H96z"},child:[]}]})(n)}function GO(n){return tt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M64 224h13.5c24.7 56.5 80.9 96 146.5 96s121.8-39.5 146.5-96H384c8.8 0 16-7.2 16-16v-96c0-8.8-7.2-16-16-16h-13.5C345.8 39.5 289.6 0 224 0S102.2 39.5 77.5 96H64c-8.8 0-16 7.2-16 16v96c0 8.8 7.2 16 16 16zm40-88c0-22.1 21.5-40 48-40h144c26.5 0 48 17.9 48 40v24c0 53-43 96-96 96h-48c-53 0-96-43-96-96v-24zm72 72l12-36 36-12-36-12-12-36-12 36-36 12 36 12 12 36zm151.6 113.4C297.7 340.7 262.2 352 224 352s-73.7-11.3-103.6-30.6C52.9 328.5 0 385 0 454.4v9.6c0 26.5 21.5 48 48 48h80v-64c0-17.7 14.3-32 32-32h128c17.7 0 32 14.3 32 32v64h80c26.5 0 48-21.5 48-48v-9.6c0-69.4-52.9-125.9-120.4-133zM272 448c-8.8 0-16 7.2-16 16s7.2 16 16 16 16-7.2 16-16-7.2-16-16-16zm-96 0c-8.8 0-16 7.2-16 16v48h32v-48c0-8.8-7.2-16-16-16z"},child:[]}]})(n)}function KO(n){return tt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M610.5 373.3c2.6-14.1 2.6-28.5 0-42.6l25.8-14.9c3-1.7 4.3-5.2 3.3-8.5-6.7-21.6-18.2-41.2-33.2-57.4-2.3-2.5-6-3.1-9-1.4l-25.8 14.9c-10.9-9.3-23.4-16.5-36.9-21.3v-29.8c0-3.4-2.4-6.4-5.7-7.1-22.3-5-45-4.8-66.2 0-3.3.7-5.7 3.7-5.7 7.1v29.8c-13.5 4.8-26 12-36.9 21.3l-25.8-14.9c-2.9-1.7-6.7-1.1-9 1.4-15 16.2-26.5 35.8-33.2 57.4-1 3.3.4 6.8 3.3 8.5l25.8 14.9c-2.6 14.1-2.6 28.5 0 42.6l-25.8 14.9c-3 1.7-4.3 5.2-3.3 8.5 6.7 21.6 18.2 41.1 33.2 57.4 2.3 2.5 6 3.1 9 1.4l25.8-14.9c10.9 9.3 23.4 16.5 36.9 21.3v29.8c0 3.4 2.4 6.4 5.7 7.1 22.3 5 45 4.8 66.2 0 3.3-.7 5.7-3.7 5.7-7.1v-29.8c13.5-4.8 26-12 36.9-21.3l25.8 14.9c2.9 1.7 6.7 1.1 9-1.4 15-16.2 26.5-35.8 33.2-57.4 1-3.3-.4-6.8-3.3-8.5l-25.8-14.9zM496 400.5c-26.8 0-48.5-21.8-48.5-48.5s21.8-48.5 48.5-48.5 48.5 21.8 48.5 48.5-21.7 48.5-48.5 48.5zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm201.2 226.5c-2.3-1.2-4.6-2.6-6.8-3.9l-7.9 4.6c-6 3.4-12.8 5.3-19.6 5.3-10.9 0-21.4-4.6-28.9-12.6-18.3-19.8-32.3-43.9-40.2-69.6-5.5-17.7 1.9-36.4 17.9-45.7l7.9-4.6c-.1-2.6-.1-5.2 0-7.8l-7.9-4.6c-16-9.2-23.4-28-17.9-45.7.9-2.9 2.2-5.8 3.2-8.7-3.8-.3-7.5-1.2-11.4-1.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c10.1 0 19.5-3.2 27.2-8.5-1.2-3.8-2-7.7-2-11.8v-9.2z"},child:[]}]})(n)}function uy(n){return tt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M319.4 320.6L224 416l-95.4-95.4C57.1 323.7 0 382.2 0 454.4v9.6c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-9.6c0-72.2-57.1-130.7-128.6-133.8zM13.6 79.8l6.4 1.5v58.4c-7 4.2-12 11.5-12 20.3 0 8.4 4.6 15.4 11.1 19.7L3.5 242c-1.7 6.9 2.1 14 7.6 14h41.8c5.5 0 9.3-7.1 7.6-14l-15.6-62.3C51.4 175.4 56 168.4 56 160c0-8.8-5-16.1-12-20.3V87.1l66 15.9c-8.6 17.2-14 36.4-14 57 0 70.7 57.3 128 128 128s128-57.3 128-128c0-20.6-5.3-39.8-14-57l96.3-23.2c18.2-4.4 18.2-27.1 0-31.5l-190.4-46c-13-3.1-26.7-3.1-39.7 0L13.6 48.2c-18.1 4.4-18.1 27.2 0 31.6z"},child:[]}]})(n)}function QO(n){return tt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M383.9 308.3l23.9-62.6c4-10.5-3.7-21.7-15-21.7h-58.5c11-18.9 17.8-40.6 17.8-64v-.3c39.2-7.8 64-19.1 64-31.7 0-13.3-27.3-25.1-70.1-33-9.2-32.8-27-65.8-40.6-82.8-9.5-11.9-25.9-15.6-39.5-8.8l-27.6 13.8c-9 4.5-19.6 4.5-28.6 0L182.1 3.4c-13.6-6.8-30-3.1-39.5 8.8-13.5 17-31.4 50-40.6 82.8-42.7 7.9-70 19.7-70 33 0 12.6 24.8 23.9 64 31.7v.3c0 23.4 6.8 45.1 17.8 64H56.3c-11.5 0-19.2 11.7-14.7 22.3l25.8 60.2C27.3 329.8 0 372.7 0 422.4v44.8C0 491.9 20.1 512 44.8 512h358.4c24.7 0 44.8-20.1 44.8-44.8v-44.8c0-48.4-25.8-90.4-64.1-114.1zM176 480l-41.6-192 49.6 32 24 40-32 120zm96 0l-32-120 24-40 49.6-32L272 480zm41.7-298.5c-3.9 11.9-7 24.6-16.5 33.4-10.1 9.3-48 22.4-64-25-2.8-8.4-15.4-8.4-18.3 0-17 50.2-56 32.4-64 25-9.5-8.8-12.7-21.5-16.5-33.4-.8-2.5-6.3-5.7-6.3-5.8v-10.8c28.3 3.6 61 5.8 96 5.8s67.7-2.1 96-5.8v10.8c-.1.1-5.6 3.2-6.4 5.8z"},child:[]}]})(n)}function YO(n){return tt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.3 271.1l-115.2-45c-4.1-1.6-12.6-3.7-22.2 0l-115.2 45c-10.7 4.2-17.7 14-17.7 24.9 0 111.6 68.7 188.8 132.9 213.9 9.6 3.7 18 1.6 22.2 0C558.4 489.9 640 420.5 640 296c0-10.9-7-20.7-17.7-24.9zM496 462.4V273.3l95.5 37.3c-5.6 87.1-60.9 135.4-95.5 151.8zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm96 40c0-2.5.8-4.8 1.1-7.2-2.5-.1-4.9-.8-7.5-.8h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c6.8 0 13.3-1.5 19.2-4-54-42.9-99.2-116.7-99.2-212z"},child:[]}]})(n)}function cc(n){return tt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm95.8 32.6L272 480l-32-136 32-56h-96l32 56-32 136-47.8-191.4C56.9 292 0 350.3 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-72.1-56.9-130.4-128.2-133.8z"},child:[]}]})(n)}function sm(n){return tt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(n)}function hd(n){return tt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(n)}const WO=()=>{const[n,e]=G.useState([]);return G.useEffect(()=>{const t=async()=>{const a=await YS();a.sort((l,c)=>{var y,v;const f=((y=l.createdAt)==null?void 0:y.seconds)||0;return(((v=c.createdAt)==null?void 0:v.seconds)||0)-f}),e(a)};t();const s=setInterval(t,3e4);return()=>clearInterval(s)},[]),n.length===0?null:d.jsx("div",{className:"fixed top-16 left-0 right-0 z-[30] pointer-events-none",children:n.map(t=>{const s=t.type==="special",a=s?"bg-gradient-to-r from-red-600 to-red-700 text-white border-b border-red-800 shadow-red-500/50":"bg-gradient-to-r from-amber-500 to-orange-600 text-white border-b border-orange-700 shadow-orange-500/50";return d.jsx("div",{className:`${a} shadow-lg py-3 relative`,children:d.jsx("marquee",{behavior:"scroll",direction:"left",scrollamount:"5",width:"100%",children:d.jsxs("div",{className:"inline-flex items-center gap-4 mx-8 font-bold text-sm md:text-base uppercase tracking-wider",children:[s?d.jsx(Jm,{className:"animate-pulse"}):d.jsx(dd,{className:"animate-bounce"}),d.jsxs("span",{children:[t.title,":"]}),d.jsx("span",{className:"font-medium normal-case",children:t.message})]})})},t.id)})})},XO=()=>{const[n,e]=G.useState(null);G.useEffect(()=>{(async()=>{const l=await YS();if(l.length>0){const c=l.find(y=>y.type==="special"),f=l.find(y=>y.type==="attention"),g=c||f;g&&(sessionStorage.getItem(`seen_alert_${g.id}`)||e(g))}})()},[]);const t=()=>{n&&(sessionStorage.setItem(`seen_alert_${n.id}`,"true"),e(null))};if(!n)return null;const s=n.type==="special";return d.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm animate-fade-in p-4",children:d.jsx("div",{className:`bg-white dark:bg-slate-800 rounded-3xl shadow-2xl max-w-md w-full overflow-hidden transform transition-all scale-100 animate-bounce-in border-t-8 ${s?"border-red-500":"border-orange-500"}`,children:d.jsxs("div",{className:"p-8 flex flex-col items-center text-center",children:[d.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mb-6 ${s?"bg-red-100 text-red-500":"bg-orange-100 text-orange-500"}`,children:d.jsx(Jm,{className:"text-4xl animate-pulse"})}),d.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:s?"THNG BO C BIT":"CH "}),d.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200 mb-4",children:n.title}),d.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8 leading-relaxed",children:n.message}),d.jsx("button",{onClick:t,className:`px-8 py-3 rounded-xl font-bold text-white shadow-lg hover:shadow-xl hover:scale-105 transition-all ${s?"bg-gradient-to-r from-red-500 to-pink-600":"bg-gradient-to-r from-orange-400 to-yellow-500"}`,children:" Hiu"})]})})})};var dy=function(n,e){return dy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])},dy(n,e)};function t4(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");dy(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var rm=function(){return rm=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++){t=arguments[s];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},rm.apply(this,arguments)};function Pc(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(t[s[a]]=n[s[a]]);return t}function n4(n,e,t,s){var a=arguments.length,l=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(n,e,t,s);else for(var f=n.length-1;f>=0;f--)(c=n[f])&&(l=(a<3?c(l):a>3?c(e,t,l):c(e,t))||l);return a>3&&l&&Object.defineProperty(e,t,l),l}function s4(n,e){return function(t,s){e(t,s,n)}}function r4(n,e,t,s,a,l){function c(M){if(M!==void 0&&typeof M!="function")throw new TypeError("Function expected");return M}for(var f=s.kind,g=f==="getter"?"get":f==="setter"?"set":"value",y=!e&&n?s.static?n:n.prototype:null,v=e||(y?Object.getOwnPropertyDescriptor(y,s.name):{}),_,E=!1,T=t.length-1;T>=0;T--){var N={};for(var P in s)N[P]=P==="access"?{}:s[P];for(var P in s.access)N.access[P]=s.access[P];N.addInitializer=function(M){if(E)throw new TypeError("Cannot add initializers after decoration has completed");l.push(c(M||null))};var C=(0,t[T])(f==="accessor"?{get:v.get,set:v.set}:v[g],N);if(f==="accessor"){if(C===void 0)continue;if(C===null||typeof C!="object")throw new TypeError("Object expected");(_=c(C.get))&&(v.get=_),(_=c(C.set))&&(v.set=_),(_=c(C.init))&&a.unshift(_)}else(_=c(C))&&(f==="field"?a.unshift(_):v[g]=_)}y&&Object.defineProperty(y,s.name,v),E=!0}function i4(n,e,t){for(var s=arguments.length>2,a=0;a<e.length;a++)t=s?e[a].call(n,t):e[a].call(n);return s?t:void 0}function a4(n){return typeof n=="symbol"?n:"".concat(n)}function o4(n,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function l4(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function _e(n,e,t,s){function a(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function f(v){try{y(s.next(v))}catch(_){c(_)}}function g(v){try{y(s.throw(v))}catch(_){c(_)}}function y(v){v.done?l(v.value):a(v.value).then(f,g)}y((s=s.apply(n,e||[])).next())})}function c4(n,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=f(0),c.throw=f(1),c.return=f(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(y){return function(v){return g([y,v])}}function g(y){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,y[0]&&(t=0)),t;)try{if(s=1,a&&(l=y[0]&2?a.return:y[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,y[1])).done)return l;switch(a=0,l&&(y=[y[0]&2,l.value]),y[0]){case 0:case 1:l=y;break;case 4:return t.label++,{value:y[1],done:!1};case 5:t.label++,a=y[1],y=[0];continue;case 7:y=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(y[0]===6||y[0]===2)){t=0;continue}if(y[0]===3&&(!l||y[1]>l[0]&&y[1]<l[3])){t.label=y[1];break}if(y[0]===6&&t.label<l[1]){t.label=l[1],l=y;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(y);break}l[2]&&t.ops.pop(),t.trys.pop();continue}y=e.call(n,t)}catch(v){y=[6,v],a=0}finally{s=l=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}var Zm=Object.create?(function(n,e,t,s){s===void 0&&(s=t);var a=Object.getOwnPropertyDescriptor(e,t);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,s,a)}):(function(n,e,t,s){s===void 0&&(s=t),n[s]=e[t]});function u4(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Zm(e,n,t)}function im(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rv(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var s=t.call(n),a,l=[],c;try{for(;(e===void 0||e-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(c)throw c.error}}return l}function d4(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(Rv(arguments[e]));return n}function h4(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var s=Array(n),a=0,e=0;e<t;e++)for(var l=arguments[e],c=0,f=l.length;c<f;c++,a++)s[a]=l[c];return s}function f4(n,e,t){if(t||arguments.length===2)for(var s=0,a=e.length,l;s<a;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return n.concat(l||Array.prototype.slice.call(e))}function xc(n){return this instanceof xc?(this.v=n,this):new xc(n)}function m4(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(T){return function(N){return Promise.resolve(N).then(T,_)}}function f(T,N){s[T]&&(a[T]=function(P){return new Promise(function(C,M){l.push([T,P,C,M])>1||g(T,P)})},N&&(a[T]=N(a[T])))}function g(T,N){try{y(s[T](N))}catch(P){E(l[0][3],P)}}function y(T){T.value instanceof xc?Promise.resolve(T.value.v).then(v,_):E(l[0][2],T)}function v(T){g("next",T)}function _(T){g("throw",T)}function E(T,N){T(N),l.shift(),l.length&&g(l[0][0],l[0][1])}}function g4(n){var e,t;return e={},s("next"),s("throw",function(a){throw a}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(a,l){e[a]=n[a]?function(c){return(t=!t)?{value:xc(n[a](c)),done:!1}:l?l(c):c}:l}}function p4(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof im=="function"?im(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(c){return new Promise(function(f,g){c=n[l](c),a(f,g,c.done,c.value)})}}function a(l,c,f,g){Promise.resolve(g).then(function(y){l({value:y,done:f})},c)}}function y4(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}var JO=Object.create?(function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}):function(n,e){n.default=e},hy=function(n){return hy=Object.getOwnPropertyNames||function(e){var t=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[t.length]=s);return t},hy(n)};function v4(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t=hy(n),s=0;s<t.length;s++)t[s]!=="default"&&Zm(e,n,t[s]);return JO(e,n),e}function b4(n){return n&&n.__esModule?n:{default:n}}function w4(n,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(n):s?s.value:e.get(n)}function _4(n,e,t,s,a){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!a:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?a.call(n,t):a?a.value=t:e.set(n,t),t}function x4(n,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?e===n:n.has(e)}function E4(n,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,a;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose],t&&(a=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");a&&(s=function(){try{a.call(this)}catch(l){return Promise.reject(l)}}),n.stack.push({value:e,dispose:s,async:t})}else t&&n.stack.push({async:!0});return e}var ZO=typeof SuppressedError=="function"?SuppressedError:function(n,e,t){var s=new Error(t);return s.name="SuppressedError",s.error=n,s.suppressed=e,s};function T4(n){function e(l){n.error=n.hasError?new ZO(l,n.error,"An error was suppressed during disposal."):l,n.hasError=!0}var t,s=0;function a(){for(;t=n.stack.pop();)try{if(!t.async&&s===1)return s=0,n.stack.push(t),Promise.resolve().then(a);if(t.dispose){var l=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(l).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return a()}function S4(n,e){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,s,a,l,c){return s?e?".jsx":".js":a&&(!l||!c)?t:a+l+"."+c.toLowerCase()+"js"}):n}const e8={__extends:t4,__assign:rm,__rest:Pc,__decorate:n4,__param:s4,__esDecorate:r4,__runInitializers:i4,__propKey:a4,__setFunctionName:o4,__metadata:l4,__awaiter:_e,__generator:c4,__createBinding:Zm,__exportStar:u4,__values:im,__read:Rv,__spread:d4,__spreadArrays:h4,__spreadArray:f4,__await:xc,__asyncGenerator:m4,__asyncDelegator:g4,__asyncValues:p4,__makeTemplateObject:y4,__importStar:v4,__importDefault:b4,__classPrivateFieldGet:w4,__classPrivateFieldSet:_4,__classPrivateFieldIn:x4,__addDisposableResource:E4,__disposeResources:T4,__rewriteRelativeImportExtension:S4},t8=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:E4,get __assign(){return rm},__asyncDelegator:g4,__asyncGenerator:m4,__asyncValues:p4,__await:xc,__awaiter:_e,__classPrivateFieldGet:w4,__classPrivateFieldIn:x4,__classPrivateFieldSet:_4,__createBinding:Zm,__decorate:n4,__disposeResources:T4,__esDecorate:r4,__exportStar:u4,__extends:t4,__generator:c4,__importDefault:b4,__importStar:v4,__makeTemplateObject:y4,__metadata:l4,__param:s4,__propKey:a4,__read:Rv,__rest:Pc,__rewriteRelativeImportExtension:S4,__runInitializers:i4,__setFunctionName:o4,__spread:d4,__spreadArray:f4,__spreadArrays:h4,__values:im,default:e8},Symbol.toStringTag,{value:"Module"})),n8=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);class Iv extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class s8 extends Iv{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class yx extends Iv{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class vx extends Iv{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var fy;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(fy||(fy={}));class r8{constructor(e,{headers:t={},customFetch:s,region:a=fy.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=n8(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return _e(this,arguments,void 0,function*(t,s={}){var a;let l,c;try{const{headers:f,method:g,body:y,signal:v,timeout:_}=s;let E={},{region:T}=s;T||(T=this.region);const N=new URL(`${this.url}/${t}`);T&&T!=="any"&&(E["x-region"]=T,N.searchParams.set("forceFunctionRegion",T));let P;y&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&y instanceof Blob||y instanceof ArrayBuffer?(E["Content-Type"]="application/octet-stream",P=y):typeof y=="string"?(E["Content-Type"]="text/plain",P=y):typeof FormData<"u"&&y instanceof FormData?P=y:(E["Content-Type"]="application/json",P=JSON.stringify(y)):P=y;let C=v;_&&(c=new AbortController,l=setTimeout(()=>c.abort(),_),v?(C=c.signal,v.addEventListener("abort",()=>c.abort())):C=c.signal);const M=yield this.fetch(N.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},E),this.headers),f),body:P,signal:C}).catch(fe=>{throw new s8(fe)}),H=M.headers.get("x-relay-error");if(H&&H==="true")throw new yx(M);if(!M.ok)throw new vx(M);let F=((a=M.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),te;return F==="application/json"?te=yield M.json():F==="application/octet-stream"||F==="application/pdf"?te=yield M.blob():F==="text/event-stream"?te=M:F==="multipart/form-data"?te=yield M.formData():te=yield M.text(),{data:te,error:null,response:M}}catch(f){return{data:null,error:f,response:f instanceof vx||f instanceof yx?f.context:void 0}}finally{l&&clearTimeout(l)}})}}var Bn={};const Mc=SN(t8);var df={},hf={},ff={},mf={},gf={},pf={},bx;function A4(){if(bx)return pf;bx=1,Object.defineProperty(pf,"__esModule",{value:!0});class n extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return pf.default=n,pf}var wx;function N4(){if(wx)return gf;wx=1,Object.defineProperty(gf,"__esModule",{value:!0});const e=Mc.__importDefault(A4());class t{constructor(a){var l,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(c=a.isMaybeSingle)!==null&&c!==void 0?c:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let f=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var y,v,_,E;let T=null,N=null,P=null,C=g.status,M=g.statusText;if(g.ok){if(this.method!=="HEAD"){const fe=await g.text();fe===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((y=this.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?N=fe:N=JSON.parse(fe))}const F=(v=this.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),te=(_=g.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");F&&te&&te.length>1&&(P=parseInt(te[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(N)&&(N.length>1?(T={code:"PGRST116",details:`Results contain ${N.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},N=null,P=null,C=406,M="Not Acceptable"):N.length===1?N=N[0]:N=null)}else{const F=await g.text();try{T=JSON.parse(F),Array.isArray(T)&&g.status===404&&(N=[],T=null,C=200,M="OK")}catch{g.status===404&&F===""?(C=204,M="No Content"):T={message:F}}if(T&&this.isMaybeSingle&&(!((E=T==null?void 0:T.details)===null||E===void 0)&&E.includes("0 rows"))&&(T=null,C=200,M="OK"),T&&this.shouldThrowOnError)throw new e.default(T)}return{error:T,data:N,count:P,status:C,statusText:M}});return this.shouldThrowOnError||(f=f.catch(g=>{var y,v,_,E,T,N;let P="";const C=g==null?void 0:g.cause;if(C){const M=(y=C==null?void 0:C.message)!==null&&y!==void 0?y:"",H=(v=C==null?void 0:C.code)!==null&&v!==void 0?v:"";P=`${(_=g==null?void 0:g.name)!==null&&_!==void 0?_:"FetchError"}: ${g==null?void 0:g.message}`,P+=`

Caused by: ${(E=C==null?void 0:C.name)!==null&&E!==void 0?E:"Error"}: ${M}`,H&&(P+=` (${H})`),C!=null&&C.stack&&(P+=`
${C.stack}`)}else P=(T=g==null?void 0:g.stack)!==null&&T!==void 0?T:"";return{error:{message:`${(N=g==null?void 0:g.name)!==null&&N!==void 0?N:"FetchError"}: ${g==null?void 0:g.message}`,details:P,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),f.then(a,l)}returns(){return this}overrideTypes(){return this}}return gf.default=t,gf}var _x;function C4(){if(_x)return mf;_x=1,Object.defineProperty(mf,"__esModule",{value:!0});const e=Mc.__importDefault(N4());class t extends e.default{select(a){let l=!1;const c=(a??"*").split("").map(f=>/\s/.test(f)&&!l?"":(f==='"'&&(l=!l),f)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:l=!0,nullsFirst:c,foreignTable:f,referencedTable:g=f}={}){const y=g?`${g}.order`:"order",v=this.url.searchParams.get(y);return this.url.searchParams.set(y,`${v?`${v},`:""}${a}.${l?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:c=l}={}){const f=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(f,`${a}`),this}range(a,l,{foreignTable:c,referencedTable:f=c}={}){const g=typeof f>"u"?"offset":`${f}.offset`,y=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(g,`${a}`),this.url.searchParams.set(y,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:l=!1,settings:c=!1,buffers:f=!1,wal:g=!1,format:y="text"}={}){var v;const _=[a?"analyze":null,l?"verbose":null,c?"settings":null,f?"buffers":null,g?"wal":null].filter(Boolean).join("|"),E=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${y}; for="${E}"; options=${_};`),y==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return mf.default=t,mf}var xx;function jv(){if(xx)return ff;xx=1,Object.defineProperty(ff,"__esModule",{value:!0});const e=Mc.__importDefault(C4()),t=new RegExp("[,()]");class s extends e.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}regexMatch(l,c){return this.url.searchParams.append(l,`match.${c}`),this}regexIMatch(l,c){return this.url.searchParams.append(l,`imatch.${c}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}isDistinct(l,c){return this.url.searchParams.append(l,`isdistinct.${c}`),this}in(l,c){const f=Array.from(new Set(c)).map(g=>typeof g=="string"&&t.test(g)?`"${g}"`:`${g}`).join(",");return this.url.searchParams.append(l,`in.(${f})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:f,type:g}={}){let y="";g==="plain"?y="pl":g==="phrase"?y="ph":g==="websearch"&&(y="w");const v=f===void 0?"":`(${f})`;return this.url.searchParams.append(l,`${y}fts${v}.${c}`),this}match(l){return Object.entries(l).forEach(([c,f])=>{this.url.searchParams.append(c,`eq.${f}`)}),this}not(l,c,f){return this.url.searchParams.append(l,`not.${c}.${f}`),this}or(l,{foreignTable:c,referencedTable:f=c}={}){const g=f?`${f}.or`:"or";return this.url.searchParams.append(g,`(${l})`),this}filter(l,c,f){return this.url.searchParams.append(l,`${c}.${f}`),this}}return ff.default=s,ff}var Ex;function k4(){if(Ex)return hf;Ex=1,Object.defineProperty(hf,"__esModule",{value:!0});const e=Mc.__importDefault(jv());class t{constructor(a,{headers:l={},schema:c,fetch:f}){this.url=a,this.headers=new Headers(l),this.schema=c,this.fetch=f}select(a,l){const{head:c=!1,count:f}=l??{},g=c?"HEAD":"GET";let y=!1;const v=(a??"*").split("").map(_=>/\s/.test(_)&&!y?"":(_==='"'&&(y=!y),_)).join("");return this.url.searchParams.set("select",v),f&&this.headers.append("Prefer",`count=${f}`),new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:l,defaultToNull:c=!0}={}){var f;const g="POST";if(l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const y=a.reduce((v,_)=>v.concat(Object.keys(_)),[]);if(y.length>0){const v=[...new Set(y)].map(_=>`"${_}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(a,{onConflict:l,ignoreDuplicates:c=!1,count:f,defaultToNull:g=!0}={}){var y;const v="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),f&&this.headers.append("Prefer",`count=${f}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const _=a.reduce((E,T)=>E.concat(Object.keys(T)),[]);if(_.length>0){const E=[...new Set(_)].map(T=>`"${T}"`);this.url.searchParams.set("columns",E.join(","))}}return new e.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}update(a,{count:l}={}){var c;const f="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:a}={}){var l;const c="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return hf.default=t,hf}var Tx;function i8(){if(Tx)return df;Tx=1,Object.defineProperty(df,"__esModule",{value:!0});const n=Mc,e=n.__importDefault(k4()),t=n.__importDefault(jv());class s{constructor(l,{headers:c={},schema:f,fetch:g}={}){this.url=l,this.headers=new Headers(c),this.schemaName=f,this.fetch=g}from(l){if(!l||typeof l!="string"||l.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const c=new URL(`${this.url}/${l}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,c={},{head:f=!1,get:g=!1,count:y}={}){var v;let _;const E=new URL(`${this.url}/rpc/${l}`);let T;f||g?(_=f?"HEAD":"GET",Object.entries(c).filter(([P,C])=>C!==void 0).map(([P,C])=>[P,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([P,C])=>{E.searchParams.append(P,C)})):(_="POST",T=c);const N=new Headers(this.headers);return y&&N.set("Prefer",`count=${y}`),new t.default({method:_,url:E,headers:N,schema:this.schemaName,body:T,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return df.default=s,df}var Sx;function a8(){if(Sx)return Bn;Sx=1,Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.PostgrestError=Bn.PostgrestBuilder=Bn.PostgrestTransformBuilder=Bn.PostgrestFilterBuilder=Bn.PostgrestQueryBuilder=Bn.PostgrestClient=void 0;const n=Mc,e=n.__importDefault(i8());Bn.PostgrestClient=e.default;const t=n.__importDefault(k4());Bn.PostgrestQueryBuilder=t.default;const s=n.__importDefault(jv());Bn.PostgrestFilterBuilder=s.default;const a=n.__importDefault(C4());Bn.PostgrestTransformBuilder=a.default;const l=n.__importDefault(N4());Bn.PostgrestBuilder=l.default;const c=n.__importDefault(A4());return Bn.PostgrestError=c.default,Bn.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:c.default},Bn}var R4=a8();const I4=Cy(R4),o8=TN({__proto__:null,default:I4},[R4]),{PostgrestClient:l8,PostgrestQueryBuilder:_L,PostgrestFilterBuilder:xL,PostgrestTransformBuilder:EL,PostgrestBuilder:TL,PostgrestError:SL}=I4||o8;class c8{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const s=t.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const u8="2.86.0",d8=`realtime-js/${u8}`,j4="1.0.0",h8="2.0.0",Ax=j4,my=1e4,f8=1e3,m8=100;var Co;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Co||(Co={}));var gn;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(gn||(gn={}));var gr;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(gr||(gr={}));var gy;(function(n){n.websocket="websocket"})(gy||(gy={}));var ko;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(ko||(ko={}));class g8{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,s;const a=(s=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var t,s;const a=(s=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&s!==void 0?s:{},c=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,t,s){var a,l;const c=e.topic,f=(a=e.ref)!==null&&a!==void 0?a:"",g=(l=e.join_ref)!==null&&l!==void 0?l:"",y=e.payload.event,v=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},_=Object.keys(v).length===0?"":JSON.stringify(v);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`userEvent length ${y.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const E=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+f.length+c.length+y.length+_.length,T=new ArrayBuffer(this.HEADER_LENGTH+E);let N=new DataView(T),P=0;N.setUint8(P++,this.KINDS.userBroadcastPush),N.setUint8(P++,g.length),N.setUint8(P++,f.length),N.setUint8(P++,c.length),N.setUint8(P++,y.length),N.setUint8(P++,_.length),N.setUint8(P++,t),Array.from(g,M=>N.setUint8(P++,M.charCodeAt(0))),Array.from(f,M=>N.setUint8(P++,M.charCodeAt(0))),Array.from(c,M=>N.setUint8(P++,M.charCodeAt(0))),Array.from(y,M=>N.setUint8(P++,M.charCodeAt(0))),Array.from(_,M=>N.setUint8(P++,M.charCodeAt(0)));var C=new Uint8Array(T.byteLength+s.byteLength);return C.set(new Uint8Array(T),0),C.set(new Uint8Array(s),T.byteLength),C.buffer}decode(e,t){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return t(s)}if(typeof e=="string"){const s=JSON.parse(e),[a,l,c,f,g]=s;return t({join_ref:a,ref:l,topic:c,event:f,payload:g})}return t({})}_binaryDecode(e){const t=new DataView(e),s=t.getUint8(0),a=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,a)}}_decodeUserBroadcast(e,t,s){const a=t.getUint8(1),l=t.getUint8(2),c=t.getUint8(3),f=t.getUint8(4);let g=this.HEADER_LENGTH+4;const y=s.decode(e.slice(g,g+a));g=g+a;const v=s.decode(e.slice(g,g+l));g=g+l;const _=s.decode(e.slice(g,g+c));g=g+c;const E=e.slice(g,e.byteLength),T=f===this.JSON_ENCODING?JSON.parse(s.decode(E)):E,N={type:this.BROADCAST_EVENT,event:v,payload:T};return c>0&&(N.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:y,event:this.BROADCAST_EVENT,payload:N}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>t.includes(s)))}}let O4=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var At;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(At||(At={}));const Nx=(n,e,t={})=>{var s;const a=(s=t.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,c)=>(l[c]=p8(c,n,e,a),l),{}):{}},p8=(n,e,t,s)=>{const a=e.find(f=>f.name===n),l=a==null?void 0:a.type,c=t[n];return l&&!s.includes(l)?D4(l,c):py(c)},D4=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return w8(e,t)}switch(n){case At.bool:return y8(e);case At.float4:case At.float8:case At.int2:case At.int4:case At.int8:case At.numeric:case At.oid:return v8(e);case At.json:case At.jsonb:return b8(e);case At.timestamp:return _8(e);case At.abstime:case At.date:case At.daterange:case At.int4range:case At.int8range:case At.money:case At.reltime:case At.text:case At.time:case At.timestamptz:case At.timetz:case At.tsrange:case At.tstzrange:return py(e);default:return py(e)}},py=n=>n,y8=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},v8=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},b8=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},w8=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,s=n[t];if(n[0]==="{"&&s==="}"){let l;const c=n.slice(1,t);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(f=>D4(e,f))}return n},_8=n=>typeof n=="string"?n.replace(" ","T"):n,P4=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class _0{constructor(e,t,s={},a=my){this.channel=e,this.event=t,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Cx;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Cx||(Cx={}));class Xu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:l,onLeave:c,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Xu.syncState(this.state,a,l,c),this.pendingDiffs.forEach(g=>{this.state=Xu.syncDiff(this.state,g,l,c)}),this.pendingDiffs=[],f()}),this.channel._on(s.diff,{},a=>{const{onJoin:l,onLeave:c,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Xu.syncDiff(this.state,a,l,c),f())}),this.onJoin((a,l,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:c})}),this.onLeave((a,l,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,a){const l=this.cloneDeep(e),c=this.transformState(t),f={},g={};return this.map(l,(y,v)=>{c[y]||(g[y]=v)}),this.map(c,(y,v)=>{const _=l[y];if(_){const E=v.map(C=>C.presence_ref),T=_.map(C=>C.presence_ref),N=v.filter(C=>T.indexOf(C.presence_ref)<0),P=_.filter(C=>E.indexOf(C.presence_ref)<0);N.length>0&&(f[y]=N),P.length>0&&(g[y]=P)}else f[y]=v}),this.syncDiff(l,{joins:f,leaves:g},s,a)}static syncDiff(e,t,s,a){const{joins:l,leaves:c}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(l,(f,g)=>{var y;const v=(y=e[f])!==null&&y!==void 0?y:[];if(e[f]=this.cloneDeep(g),v.length>0){const _=e[f].map(T=>T.presence_ref),E=v.filter(T=>_.indexOf(T.presence_ref)<0);e[f].unshift(...E)}s(f,v,g)}),this.map(c,(f,g)=>{let y=e[f];if(!y)return;const v=g.map(_=>_.presence_ref);y=y.filter(_=>v.indexOf(_.presence_ref)<0),e[f]=y,a(f,y,g),y.length===0&&delete e[f]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const a=e[s];return"metas"in a?t[s]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):t[s]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var kx;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(kx||(kx={}));var Ju;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Ju||(Ju={}));var bi;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(bi||(bi={}));class Ov{constructor(e,t={config:{}},s){var a,l;if(this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=gn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new _0(this,gr.join,this.params,this.timeout),this.rejoinTimer=new O4(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=gn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=gn.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=gn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=gn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=gn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gr.reply,{},(c,f)=>{this._trigger(this._replyEventName(f),c)}),this.presence=new Xu(this),this.broadcastEndpointURL=P4(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var s,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==gn.closed){const{config:{broadcast:c,presence:f,private:g}}=this.params,y=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(T=>T.filter))!==null&&a!==void 0?a:[],v=!!this.bindings[Ju.PRESENCE]&&this.bindings[Ju.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,_={},E={broadcast:c,presence:Object.assign(Object.assign({},f),{enabled:v}),postgres_changes:y,private:g};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(T=>e==null?void 0:e(bi.CHANNEL_ERROR,T)),this._onClose(()=>e==null?void 0:e(bi.CLOSED)),this.updateJoinPayload(Object.assign({config:E},_)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:T})=>{var N;if(this.socket.setAuth(),T===void 0){e==null||e(bi.SUBSCRIBED);return}else{const P=this.bindings.postgres_changes,C=(N=P==null?void 0:P.length)!==null&&N!==void 0?N:0,M=[];for(let H=0;H<C;H++){const F=P[H],{filter:{event:te,schema:fe,table:he,filter:k}}=F,R=T&&T[H];if(R&&R.event===te&&R.schema===fe&&R.table===he&&R.filter===k)M.push(Object.assign(Object.assign({},F),{id:R.id}));else{this.unsubscribe(),this.state=gn.errored,e==null||e(bi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=M,e&&e(bi.SUBSCRIBED);return}}).receive("error",T=>{this.state=gn.errored,e==null||e(bi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(T).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(bi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===gn.joined&&e===Ju.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async httpSend(e,t,s={}){var a;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(f.status===202)return{success:!0};let g=f.statusText;try{const y=await f.json();g=y.error||y.message||g}catch{}return Promise.reject(new Error(g))}async send(e,t={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=e,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const y=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=y.body)===null||a===void 0?void 0:a.cancel()),y.ok?"ok":"error"}catch(y){return y.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,f,g;const y=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(f=(c=this.params)===null||c===void 0?void 0:c.config)===null||f===void 0?void 0:f.broadcast)===null||g===void 0)&&g.ack)&&l("ok"),y.receive("ok",()=>l("ok")),y.receive("error",()=>l("error")),y.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=gn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gr.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new _0(this,gr.leave,{},e),s.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=gn.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const a=new AbortController,l=setTimeout(()=>a.abort(),s),c=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(l),c}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new _0(this,e,t,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>m8){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var a,l;const c=e.toLocaleLowerCase(),{close:f,error:g,leave:y,join:v}=gr;if(s&&[f,g,y,v].indexOf(c)>=0&&s!==this._joinRef())return;let E=this._onMessage(c,t,s);if(t&&!E)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(T=>{var N,P,C;return((N=T.filter)===null||N===void 0?void 0:N.event)==="*"||((C=(P=T.filter)===null||P===void 0?void 0:P.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===c}).map(T=>T.callback(E,s)):(l=this.bindings[c])===null||l===void 0||l.filter(T=>{var N,P,C,M,H,F;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in T){const te=T.id,fe=(N=T.filter)===null||N===void 0?void 0:N.event;return te&&((P=t.ids)===null||P===void 0?void 0:P.includes(te))&&(fe==="*"||(fe==null?void 0:fe.toLocaleLowerCase())===((C=t.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const te=(H=(M=T==null?void 0:T.filter)===null||M===void 0?void 0:M.event)===null||H===void 0?void 0:H.toLocaleLowerCase();return te==="*"||te===((F=t==null?void 0:t.event)===null||F===void 0?void 0:F.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===c}).map(T=>{if(typeof E=="object"&&"ids"in E){const N=E.data,{schema:P,table:C,commit_timestamp:M,type:H,errors:F}=N;E=Object.assign(Object.assign({},{schema:P,table:C,commit_timestamp:M,eventType:H,new:{},old:{},errors:F}),this._getPayloadRecords(N))}T.callback(E,s)})}_isClosed(){return this.state===gn.closed}_isJoined(){return this.state===gn.joined}_isJoining(){return this.state===gn.joining}_isLeaving(){return this.state===gn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const a=e.toLocaleLowerCase(),l={type:a,filter:t,callback:s};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&Ov.isEqual(a.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(gr.close,{},e)}_onError(e){this._on(gr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=gn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Nx(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Nx(e.columns,e.old_record)),t}}const x0=()=>{},yf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},x8=[1e3,2e3,5e3,1e4],E8=1e4,T8=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class S8{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=my,this.transport=null,this.heartbeatIntervalMs=yf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=x0,this.ref=0,this.reconnectTimer=null,this.vsn=Ax,this.logger=x0,this.conn=null,this.sendBuffer=[],this.serializer=new g8,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((s=t==null?void 0:t.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${gy.websocket}`,this.httpEndpoint=P4(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=c8.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Co.connecting:return ko.Connecting;case Co.open:return ko.Open;case Co.closing:return ko.Closing;default:return ko.Closed}}isConnected(){return this.connectionState()===ko.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===s);if(a)return a;{const l=new Ov(`realtime:${e}`,t,this);return this.channels.push(l),l}}push(e){const{topic:t,event:s,payload:a,ref:l}=e,c=()=>{this.encode(e,f=>{var g;(g=this.conn)===null||g===void 0||g.send(f)})};this.log("push",`${t} ${s} (${l})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(f8,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},yf.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(y){this.log("error","error in heartbeat callback",y)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:l,ref:c}=t,f=c?`(${c})`:"",g=l.status||"";this.log("receive",`${g} ${s} ${a} ${f}`.trim(),l),this.channels.filter(y=>y._isMember(s)).forEach(y=>y._trigger(a,l,c)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Co.open||this.conn.readyState===Co.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(gr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${s}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([T8],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const a={access_token:t,version:d8};t&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(gr.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new O4(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},yf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,a,l,c,f,g,y,v,_,E,T;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:my,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:yf.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(f=e==null?void 0:e.heartbeatCallback)!==null&&f!==void 0?f:x0,this.vsn=(g=e==null?void 0:e.vsn)!==null&&g!==void 0?g:Ax,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(y=e==null?void 0:e.reconnectAfterMs)!==null&&y!==void 0?y:(N=>x8[N-1]||E8),this.vsn){case j4:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:((N,P)=>P(JSON.stringify(N))),this.decode=(_=e==null?void 0:e.decode)!==null&&_!==void 0?_:((N,P)=>P(JSON.parse(N)));break;case h8:this.encode=(E=e==null?void 0:e.encode)!==null&&E!==void 0?E:this.serializer.encode.bind(this.serializer),this.decode=(T=e==null?void 0:e.decode)!==null&&T!==void 0?T:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class eg extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Vt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class A8 extends eg{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class yy extends eg{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const Dv=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),N8=()=>Response,vy=n=>{if(Array.isArray(n))return n.map(t=>vy(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,s])=>{const a=t.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=vy(s)}),e},C8=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},k8=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n),E0=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},R8=(n,e,t)=>_e(void 0,void 0,void 0,function*(){const s=yield N8();n instanceof s&&!(t!=null&&t.noResolveJson)?n.json().then(a=>{const l=n.status||500,c=(a==null?void 0:a.statusCode)||l+"";e(new A8(E0(a),l,c))}).catch(a=>{e(new yy(E0(a),a))}):e(new yy(E0(n),n))}),I8=(n,e,t,s)=>{const a={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!s?a:(C8(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),t))};function Id(n,e,t,s,a,l){return _e(this,void 0,void 0,function*(){return new Promise((c,f)=>{n(t,I8(e,s,a,l)).then(g=>{if(!g.ok)throw g;return s!=null&&s.noResolveJson?g:g.json()}).then(g=>c(g)).catch(g=>R8(g,f,s))})})}function fd(n,e,t,s){return _e(this,void 0,void 0,function*(){return Id(n,"GET",e,t,s)})}function mr(n,e,t,s,a){return _e(this,void 0,void 0,function*(){return Id(n,"POST",e,s,a,t)})}function by(n,e,t,s,a){return _e(this,void 0,void 0,function*(){return Id(n,"PUT",e,s,a,t)})}function j8(n,e,t,s){return _e(this,void 0,void 0,function*(){return Id(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function Pv(n,e,t,s,a){return _e(this,void 0,void 0,function*(){return Id(n,"DELETE",e,s,a,t)})}class O8{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return _e(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Vt(e))return{data:null,error:e};throw e}})}}var M4;class D8{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[M4]="BlobDownloadBuilder",this.promise=null}asStream(){return new O8(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return _e(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Vt(e))return{data:null,error:e};throw e}})}}M4=Symbol.toStringTag;const P8={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Rx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class M8{constructor(e,t={},s,a){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=Dv(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,s,a){return _e(this,void 0,void 0,function*(){try{let l;const c=Object.assign(Object.assign({},Rx),a);let f=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const g=c.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),g&&l.append("metadata",this.encodeMetadata(g)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),g&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(g))):(l=s,f["cache-control"]=`max-age=${c.cacheControl}`,f["content-type"]=c.contentType,g&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(g))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),a!=null&&a.headers&&(f=Object.assign(Object.assign({},f),a.headers));const y=this._removeEmptyFolders(t),v=this._getFinalPath(y),_=yield(e=="PUT"?by:mr)(this.fetch,`${this.url}/object/${v}`,l,Object.assign({headers:f},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:y,id:_.Id,fullPath:_.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Vt(l))return{data:null,error:l};throw l}})}upload(e,t,s){return _e(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,a){return _e(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),c=this._getFinalPath(l),f=new URL(this.url+`/object/upload/sign/${c}`);f.searchParams.set("token",t);try{let g;const y=Object.assign({upsert:Rx.upsert},a),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(y.upsert)});typeof Blob<"u"&&s instanceof Blob?(g=new FormData,g.append("cacheControl",y.cacheControl),g.append("",s)):typeof FormData<"u"&&s instanceof FormData?(g=s,g.append("cacheControl",y.cacheControl)):(g=s,v["cache-control"]=`max-age=${y.cacheControl}`,v["content-type"]=y.contentType);const _=yield by(this.fetch,f.toString(),g,{headers:v});return{data:{path:l,fullPath:_.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(Vt(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(e,t){return _e(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const l=yield mr(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),c=new URL(this.url+l.url),f=c.searchParams.get("token");if(!f)throw new eg("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:f},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}update(e,t,s){return _e(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return _e(this,void 0,void 0,function*(){try{return{data:yield mr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vt(a))return{data:null,error:a};throw a}})}copy(e,t,s){return _e(this,void 0,void 0,function*(){try{return{data:{path:(yield mr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vt(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,s){return _e(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield mr(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const c=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vt(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,s){return _e(this,void 0,void 0,function*(){try{const a=yield mr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vt(a))return{data:null,error:a};throw a}})}download(e,t){const a=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),c=l?`?${l}`:"",f=this._getFinalPath(e),g=()=>fd(this.fetch,`${this.url}/${a}/${f}${c}`,{headers:this.headers,noResolveJson:!0});return new D8(g,this.shouldThrowOnError)}info(e){return _e(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield fd(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:vy(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}exists(e){return _e(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield j8(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s)&&s instanceof yy){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),a=[],l=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";l!==""&&a.push(l);const f=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",g=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});g!==""&&a.push(g);let y=a.join("&");return y!==""&&(y=`?${y}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${s}${y}`)}}}remove(e){return _e(this,void 0,void 0,function*(){try{return{data:yield Pv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}list(e,t,s){return _e(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},P8),t),{prefix:e||""});return{data:yield mr(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vt(a))return{data:null,error:a};throw a}})}listV2(e,t){return _e(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield mr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const L4="2.86.0",V4={"X-Client-Info":`storage-js/${L4}`};class L8{constructor(e,t={},s,a){this.shouldThrowOnError=!1;const l=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},V4),t),this.fetch=Dv(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return _e(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield fd(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}getBucket(e){return _e(this,void 0,void 0,function*(){try{return{data:yield fd(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}createBucket(e){return _e(this,arguments,void 0,function*(t,s={public:!1}){try{return{data:yield mr(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vt(a))return{data:null,error:a};throw a}})}updateBucket(e,t){return _e(this,void 0,void 0,function*(){try{return{data:yield by(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Vt(s))return{data:null,error:s};throw s}})}emptyBucket(e){return _e(this,void 0,void 0,function*(){try{return{data:yield mr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return _e(this,void 0,void 0,function*(){try{return{data:yield Pv(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}var md=class extends Error{constructor(n,e){var t;super(n),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function V8(n,e,t){const s=new URL(e,n);if(t)for(const[a,l]of Object.entries(t))l!==void 0&&s.searchParams.set(a,l);return s.toString()}async function U8(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function B8(n){const e=n.fetchImpl??globalThis.fetch;return{async request({method:t,path:s,query:a,body:l,headers:c}){const f=V8(n.baseUrl,s,a),g=await U8(n.auth),y=await e(f,{method:t,headers:{...l?{"Content-Type":"application/json"}:{},...g,...c},body:l?JSON.stringify(l):void 0}),v=await y.text(),_=(y.headers.get("content-type")||"").includes("application/json"),E=_&&v?JSON.parse(v):v;if(!y.ok){const T=_?E:void 0,N=T==null?void 0:T.error;throw new md((N==null?void 0:N.message)??`Request failed with status ${y.status}`,{status:y.status,icebergType:N==null?void 0:N.type,icebergCode:N==null?void 0:N.code,details:T})}return{status:y.status,headers:y.headers,data:E}}}}function vf(n){return n.join("")}var z8=class{constructor(n,e=""){this.client=n,this.prefix=e}async listNamespaces(n){const e=n?{parent:vf(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(n,e){const t={namespace:n.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${vf(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${vf(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${vf(n.namespace)}`}),!0}catch(e){if(e instanceof md&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(n,e){try{return await this.createNamespace(n,e)}catch(t){if(t instanceof md&&t.status===409)return;throw t}}};function zl(n){return n.join("")}var q8=class{constructor(n,e="",t){this.client=n,this.prefix=e,this.accessDelegation=t}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${zl(n.namespace)}/tables`})).data.identifiers}async createTable(n,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${zl(n.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(n,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${zl(n.namespace)}/tables/${n.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(n,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${zl(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(n){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${zl(n.namespace)}/tables/${n.name}`,headers:e})).data.metadata}async tableExists(n){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${zl(n.namespace)}/tables/${n.name}`,headers:e}),!0}catch(t){if(t instanceof md&&t.status===404)return!1;throw t}}async createTableIfNotExists(n,e){try{return await this.createTable(n,e)}catch(t){if(t instanceof md&&t.status===409)return await this.loadTable({namespace:n.namespace,name:e.name});throw t}}},H8=class{constructor(n){var s;let e="v1";n.catalogName&&(e+=`/${n.catalogName}`);const t=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=B8({baseUrl:t,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(s=n.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new z8(this.client,e),this.tableOps=new q8(this.client,e,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,e){return this.namespaceOps.createNamespace(n,e)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,e){return this.tableOps.createTable(n,e)}async updateTable(n,e){return this.tableOps.updateTable(n,e)}async dropTable(n,e){await this.tableOps.dropTable(n,e)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,e){return this.namespaceOps.createNamespaceIfNotExists(n,e)}async createTableIfNotExists(n,e){return this.tableOps.createTableIfNotExists(n,e)}};class $8{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},V4),t),this.fetch=Dv(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return _e(this,void 0,void 0,function*(){try{return{data:yield mr(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}listBuckets(e){return _e(this,void 0,void 0,function*(){try{const t=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&t.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&t.set("sortOrder",e.sortOrder),e!=null&&e.search&&t.set("search",e.search);const s=t.toString(),a=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield fd(this.fetch,a,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return _e(this,void 0,void 0,function*(){try{return{data:yield Pv(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vt(t))return{data:null,error:t};throw t}})}from(e){if(!k8(e))throw new eg("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new H8({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>_e(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const Mv={"X-Client-Info":`storage-js/${L4}`,"Content-Type":"application/json"};class U4 extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Is(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}class T0 extends U4{constructor(e,t,s){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class F8 extends U4{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var Ix;(function(n){n.InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Ix||(Ix={}));const Lv=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),G8=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},jx=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),K8=(n,e,t)=>_e(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(t!=null&&t.noResolveJson)){const a=n.status||500,l=n;if(typeof l.json=="function")l.json().then(c=>{const f=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||a+"";e(new T0(jx(c),a,f))}).catch(()=>{const c=a+"",f=l.statusText||`HTTP ${a} error`;e(new T0(f,a,c))});else{const c=a+"",f=l.statusText||`HTTP ${a} error`;e(new T0(f,a,c))}}else e(new F8(jx(n),n))}),Q8=(n,e,t,s)=>{const a={method:n,headers:(e==null?void 0:e.headers)||{}};return s?(G8(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,Object.assign(Object.assign({},a),t)):a};function Y8(n,e,t,s,a,l){return _e(this,void 0,void 0,function*(){return new Promise((c,f)=>{n(t,Q8(e,s,a,l)).then(g=>{if(!g.ok)throw g;if(s!=null&&s.noResolveJson)return g;const y=g.headers.get("content-type");return!y||!y.includes("application/json")?{}:g.json()}).then(g=>c(g)).catch(g=>K8(g,f,s))})})}function js(n,e,t,s,a){return _e(this,void 0,void 0,function*(){return Y8(n,"POST",e,s,a,t)})}class W8{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Mv),t),this.fetch=Lv(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return _e(this,void 0,void 0,function*(){try{return{data:(yield js(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Is(t))return{data:null,error:t};throw t}})}getIndex(e,t){return _e(this,void 0,void 0,function*(){try{return{data:yield js(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Is(s))return{data:null,error:s};throw s}})}listIndexes(e){return _e(this,void 0,void 0,function*(){try{return{data:yield js(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Is(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return _e(this,void 0,void 0,function*(){try{return{data:(yield js(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Is(s))return{data:null,error:s};throw s}})}}class X8{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Mv),t),this.fetch=Lv(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return _e(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield js(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Is(t))return{data:null,error:t};throw t}})}getVectors(e){return _e(this,void 0,void 0,function*(){try{return{data:yield js(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Is(t))return{data:null,error:t};throw t}})}listVectors(e){return _e(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield js(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Is(t))return{data:null,error:t};throw t}})}queryVectors(e){return _e(this,void 0,void 0,function*(){try{return{data:yield js(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Is(t))return{data:null,error:t};throw t}})}deleteVectors(e){return _e(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield js(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Is(t))return{data:null,error:t};throw t}})}}class J8{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Mv),t),this.fetch=Lv(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return _e(this,void 0,void 0,function*(){try{return{data:(yield js(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Is(t))return{data:null,error:t};throw t}})}getBucket(e){return _e(this,void 0,void 0,function*(){try{return{data:yield js(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Is(t))return{data:null,error:t};throw t}})}listBuckets(){return _e(this,arguments,void 0,function*(e={}){try{return{data:yield js(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Is(t))return{data:null,error:t};throw t}})}deleteBucket(e){return _e(this,void 0,void 0,function*(){try{return{data:(yield js(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Is(t))return{data:null,error:t};throw t}})}}class Z8 extends J8{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new e7(this.url,this.headers,e,this.fetch)}createBucket(e){const t=Object.create(null,{createBucket:{get:()=>super.createBucket}});return _e(this,void 0,void 0,function*(){return t.createBucket.call(this,e)})}getBucket(e){const t=Object.create(null,{getBucket:{get:()=>super.getBucket}});return _e(this,void 0,void 0,function*(){return t.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return _e(this,arguments,void 0,function*(t={}){return e.listBuckets.call(this,t)})}deleteBucket(e){const t=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return _e(this,void 0,void 0,function*(){return t.deleteBucket.call(this,e)})}}class e7 extends W8{constructor(e,t,s,a){super(e,t,a),this.vectorBucketName=s}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return _e(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return _e(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return _e(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return _e(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new t7(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class t7 extends X8{constructor(e,t,s,a,l){super(e,t,l),this.vectorBucketName=s,this.indexName=a}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return _e(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return _e(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return _e(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return _e(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return _e(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class n7 extends L8{constructor(e,t={},s,a){super(e,t,s,a)}from(e){return new M8(this.url,this.headers,e,this.fetch)}get vectors(){return new Z8(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new $8(this.url+"/iceberg",this.headers,this.fetch)}}const s7="2.86.0";let zu="";typeof Deno<"u"?zu="deno":typeof document<"u"?zu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zu="react-native":zu="node";const r7={"X-Client-Info":`supabase-js-${zu}/${s7}`},i7={headers:r7},a7={schema:"public"},o7={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},l7={},c7=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),u7=()=>Headers,d7=(n,e,t)=>{const s=c7(t),a=u7();return async(l,c)=>{var f;const g=(f=await e())!==null&&f!==void 0?f:n;let y=new a(c==null?void 0:c.headers);return y.has("apikey")||y.set("apikey",n),y.has("Authorization")||y.set("Authorization",`Bearer ${g}`),s(l,Object.assign(Object.assign({},c),{headers:y}))}};function h7(n){return n.endsWith("/")?n:n+"/"}function f7(n,e){var t,s;const{db:a,auth:l,realtime:c,global:f}=n,{db:g,auth:y,realtime:v,global:_}=e,E={db:Object.assign(Object.assign({},g),a),auth:Object.assign(Object.assign({},y),l),realtime:Object.assign(Object.assign({},v),c),storage:{},global:Object.assign(Object.assign(Object.assign({},_),f),{headers:Object.assign(Object.assign({},(t=_==null?void 0:_.headers)!==null&&t!==void 0?t:{}),(s=f==null?void 0:f.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return n.accessToken?E.accessToken=n.accessToken:delete E.accessToken,E}function m7(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(h7(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const B4="2.86.0",Jl=30*1e3,wy=3,S0=wy*Jl,g7="http://localhost:9999",p7="supabase.auth.token",y7={"X-Client-Info":`gotrue-js/${B4}`},_y="X-Supabase-Api-Version",z4={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},v7=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,b7=600*1e3;class gd extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function Ee(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class w7 extends gd{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function _7(n){return Ee(n)&&n.name==="AuthApiError"}class Ro extends gd{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class $a extends gd{constructor(e,t,s,a){super(e,s,a),this.name=t,this.status=s}}class Ns extends $a{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function x7(n){return Ee(n)&&n.name==="AuthSessionMissingError"}class ql extends $a{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bf extends $a{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class wf extends $a{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function E7(n){return Ee(n)&&n.name==="AuthImplicitGrantRedirectError"}class Ox extends $a{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xy extends $a{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function A0(n){return Ee(n)&&n.name==="AuthRetryableFetchError"}class Dx extends $a{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Ey extends $a{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const am="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Px=` 	
\r=`.split(""),T7=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<Px.length;e+=1)n[Px[e].charCodeAt(0)]=-2;for(let e=0;e<am.length;e+=1)n[am[e].charCodeAt(0)]=e;return n})();function Mx(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(am[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(am[s]),e.queuedBits-=6}}function q4(n,e,t){const s=T7[n];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Lx(n){const e=[],t=c=>{e.push(String.fromCodePoint(c))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=c=>{N7(c,s,t)};for(let c=0;c<n.length;c+=1)q4(n.charCodeAt(c),a,l);return e.join("")}function S7(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function A7(n,e){for(let t=0;t<n.length;t+=1){let s=n.charCodeAt(t);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(n.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}S7(s,e)}}function N7(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let s=1;s<6;s+=1)if((n>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function uc(n){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<n.length;a+=1)q4(n.charCodeAt(a),t,s);return new Uint8Array(e)}function C7(n){const e=[];return A7(n,t=>e.push(t)),new Uint8Array(e)}function Do(n){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};return n.forEach(a=>Mx(a,t,s)),Mx(null,t,s),e.join("")}function k7(n){return Math.round(Date.now()/1e3)+n}function R7(){return Symbol("auth-callback")}const jn=()=>typeof window<"u"&&typeof document<"u",Eo={tested:!1,writable:!1},H4=()=>{if(!jn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Eo.tested)return Eo.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Eo.tested=!0,Eo.writable=!0}catch{Eo.tested=!0,Eo.writable=!1}return Eo.writable};function I7(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return t.searchParams.forEach((s,a)=>{e[a]=s}),e}const $4=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),j7=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Zl=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},To=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},pa=async(n,e)=>{await n.removeItem(e)};class tg{constructor(){this.promise=new tg.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}tg.promiseConstructor=Promise;function N0(n){const e=n.split(".");if(e.length!==3)throw new Ey("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!v7.test(e[s]))throw new Ey("JWT not in base64url format");return{header:JSON.parse(Lx(e[0])),payload:JSON.parse(Lx(e[1])),signature:uc(e[2]),raw:{header:e[0],payload:e[1]}}}async function O7(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function D7(n,e){return new Promise((s,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await n(l);if(!e(l,null,c)){s(c);return}}catch(c){if(!e(l,c)){a(c);return}}})()})}function P7(n){return("0"+n.toString(16)).substr(-2)}function M7(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let a="";for(let l=0;l<56;l++)a+=t.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,P7).join("")}async function L7(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(s);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function V7(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await L7(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Hl(n,e,t=!1){const s=M7();let a=s;t&&(a+="/PASSWORD_RECOVERY"),await Zl(n,`${e}-code-verifier`,a);const l=await V7(s);return[l,s===l?"plain":"s256"]}const U7=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function B7(n){const e=n.headers.get(_y);if(!e||!e.match(U7))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function z7(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function q7(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const H7=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function $l(n){if(!H7.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function C0(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function $7(n,e){return new Proxy(n,{get:(t,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,s,a)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,s,a)}})}function Vx(n){return JSON.parse(JSON.stringify(n))}const No=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),F7=[502,503,504];async function Ux(n){var e;if(!j7(n))throw new xy(No(n),0);if(F7.includes(n.status))throw new xy(No(n),n.status);let t;try{t=await n.json()}catch(l){throw new Ro(No(l),l)}let s;const a=B7(n);if(a&&a.getTime()>=z4["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new Dx(No(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Ns}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new Dx(No(t),n.status,t.weak_password.reasons);throw new w7(No(t),n.status||500,s)}const G7=(n,e,t,s)=>{const a={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),t))};async function Oe(n,e,t,s){var a;const l=Object.assign({},s==null?void 0:s.headers);l[_y]||(l[_y]=z4["2024-01-01"].name),s!=null&&s.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const c=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(c.redirect_to=s.redirectTo);const f=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",g=await K7(n,e,t+f,{headers:l,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(g):{data:Object.assign({},g),error:null}}async function K7(n,e,t,s,a,l){const c=G7(e,s,a,l);let f;try{f=await n(t,Object.assign({},c))}catch(g){throw console.error(g),new xy(No(g),0)}if(f.ok||await Ux(f),s!=null&&s.noResolveJson)return f;try{return await f.json()}catch(g){await Ux(g)}}function fr(n){var e;let t=null;W7(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=k7(n.expires_in)));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:s},error:null}}function Bx(n){const e=fr(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=n.weak_password),e}function _a(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Q7(n){return{data:n,error:null}}function Y7(n){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:l}=n,c=Pc(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:l},g=Object.assign({},c);return{data:{properties:f,user:g},error:null}}function zx(n){return n}function W7(n){return n.access_token&&n.refresh_token&&n.expires_in}const k0=["global","local","others"];class X7{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=$4(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=k0[0]){if(k0.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${k0.join(", ")}`);try{return await Oe(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Ee(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await Oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:_a})}catch(s){if(Ee(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Pc(e,["options"]),a=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await Oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Y7,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Ee(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Oe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:_a})}catch(t){if(Ee(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,a,l,c,f,g;try{const y={nextPage:null,lastPage:0,total:0},v=await Oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:zx});if(v.error)throw v.error;const _=await v.json(),E=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,T=(g=(f=v.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&g!==void 0?g:[];return T.length>0&&(T.forEach(N=>{const P=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(N.split(";")[1].split("=")[1]);y[`${C}Page`]=P}),y.total=parseInt(E)),{data:Object.assign(Object.assign({},_),y),error:null}}catch(y){if(Ee(y))return{data:{users:[]},error:y};throw y}}async getUserById(e){$l(e);try{return await Oe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:_a})}catch(t){if(Ee(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){$l(e);try{return await Oe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:_a})}catch(s){if(Ee(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){$l(e);try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:_a})}catch(s){if(Ee(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){$l(e.userId);try{const{data:t,error:s}=await Oe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:s}}catch(t){if(Ee(t))return{data:null,error:t};throw t}}async _deleteFactor(e){$l(e.userId),$l(e.id);try{return{data:await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Ee(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,s,a,l,c,f,g;try{const y={nextPage:null,lastPage:0,total:0},v=await Oe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:zx});if(v.error)throw v.error;const _=await v.json(),E=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,T=(g=(f=v.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&g!==void 0?g:[];return T.length>0&&(T.forEach(N=>{const P=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(N.split(";")[1].split("=")[1]);y[`${C}Page`]=P}),y.total=parseInt(E)),{data:Object.assign(Object.assign({},_),y),error:null}}catch(y){if(Ee(y))return{data:{clients:[]},error:y};throw y}}async _createOAuthClient(e){try{return await Oe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Ee(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Oe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Ee(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Oe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Ee(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(Ee(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Oe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Ee(t))return{data:null,error:t};throw t}}}function qx(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const Fl={debug:!!(globalThis&&H4()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class F4 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class J7 extends F4{}async function Z7(n,e,t){Fl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Fl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){Fl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,a.name);try{return await t()}finally{Fl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,a.name)}}else{if(e===0)throw Fl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new J7(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Fl.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function eD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function G4(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function tD(n){return parseInt(n,16)}function nD(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function sD(n){var e;const{chainId:t,domain:s,expirationTime:a,issuedAt:l=new Date,nonce:c,notBefore:f,requestId:g,resources:y,scheme:v,uri:_,version:E}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(E!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${E}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const T=G4(n.address),N=v?`${v}://${s}`:s,P=n.statement?`${n.statement}
`:"",C=`${N} wants you to sign in with your Ethereum account:
${T}

${P}`;let M=`URI: ${_}
Version: ${E}
Chain ID: ${t}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(a&&(M+=`
Expiration Time: ${a.toISOString()}`),f&&(M+=`
Not Before: ${f.toISOString()}`),g&&(M+=`
Request ID: ${g}`),y){let H=`
Resources:`;for(const F of y){if(!F||typeof F!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${F}`);H+=`
- ${F}`}M+=H}return`${C}
${M}`}class un extends Error{constructor({message:e,code:t,cause:s,name:a}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=a??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=t}}class om extends un{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function rD({error:n,options:e}){var t,s,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new un({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=l.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new un({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new un({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new un({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new un({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new un({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return l.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new un({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new un({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const c=window.location.hostname;if(K4(c)){if(l.rp.id!==c)return new un({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new un({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new un({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new un({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new un({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function iD({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new un({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new un({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const s=window.location.hostname;if(K4(s)){if(t.rpId!==s)return new un({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new un({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new un({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new un({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class aD{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const oD=new aD;function lD(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:s}=n,a=Pc(n,["challenge","user","excludeCredentials"]),l=uc(e).buffer,c=Object.assign(Object.assign({},t),{id:uc(t.id).buffer}),f=Object.assign(Object.assign({},a),{challenge:l,user:c});if(s&&s.length>0){f.excludeCredentials=new Array(s.length);for(let g=0;g<s.length;g++){const y=s[g];f.excludeCredentials[g]=Object.assign(Object.assign({},y),{id:uc(y.id).buffer,type:y.type||"public-key",transports:y.transports})}}return f}function cD(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,s=Pc(n,["challenge","allowCredentials"]),a=uc(e).buffer,l=Object.assign(Object.assign({},s),{challenge:a});if(t&&t.length>0){l.allowCredentials=new Array(t.length);for(let c=0;c<t.length;c++){const f=t[c];l.allowCredentials[c]=Object.assign(Object.assign({},f),{id:uc(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return l}function uD(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:Do(new Uint8Array(n.response.attestationObject)),clientDataJSON:Do(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function dD(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,s=n.getClientExtensionResults(),a=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Do(new Uint8Array(a.authenticatorData)),clientDataJSON:Do(new Uint8Array(a.clientDataJSON)),signature:Do(new Uint8Array(a.signature)),userHandle:a.userHandle?Do(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function K4(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function Hx(){var n,e;return!!(jn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function hD(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new om("Browser returned unexpected credential type",e)}:{data:null,error:new om("Empty credential response",e)}}catch(e){return{data:null,error:rD({error:e,options:n})}}}async function fD(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new om("Browser returned unexpected credential type",e)}:{data:null,error:new om("Empty credential response",e)}}catch(e){return{data:null,error:iD({error:e,options:n})}}}const mD={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},gD={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function lm(...n){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),t=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of n)if(a)for(const l in a){const c=a[l];if(c!==void 0)if(Array.isArray(c))s[l]=c;else if(t(c))s[l]=c;else if(e(c)){const f=s[l];e(f)?s[l]=lm(f,c):s[l]=lm(c)}else s[l]=c}return s}function pD(n,e){return lm(mD,n,e||{})}function yD(n,e){return lm(gD,n,e||{})}class vD{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:s,signal:a},l){try{const{data:c,error:f}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!c)return{data:null,error:f};const g=a??oD.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:y}=c.webauthn.credential_options.publicKey;y.name||(y.name=`${y.id}:${s}`),y.displayName||(y.displayName=y.name)}switch(c.webauthn.type){case"create":{const y=pD(c.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:v,error:_}=await hD({publicKey:y,signal:g});return v?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:_}}case"request":{const y=yD(c.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:v,error:_}=await fD(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:y,signal:g}));return v?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:v}},error:null}:{data:null,error:_}}}}catch(c){return Ee(c)?{data:null,error:c}:{data:null,error:new Ro("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:t,webauthn:s}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!t)return{data:null,error:new gd("rpId is required for WebAuthn authentication")};try{if(!Hx())return{data:null,error:new Ro("Browser does not support WebAuthn",null)};const{data:c,error:f}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:s},signal:a},{request:l});if(!c)return{data:null,error:f};const{webauthn:g}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:g.type,rpId:t,rpOrigins:s,credential_response:g.credential_response}})}catch(c){return Ee(c)?{data:null,error:c}:{data:null,error:new Ro("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!t)return{data:null,error:new gd("rpId is required for WebAuthn registration")};try{if(!Hx())return{data:null,error:new Ro("Browser does not support WebAuthn",null)};const{data:c,error:f}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(v=>{var _;return(_=v.data)===null||_===void 0?void 0:_.all.find(E=>E.factor_type==="webauthn"&&E.friendly_name===e&&E.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:f};const{data:g,error:y}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:t,rpOrigins:s},signal:a},{create:l});return g?this._verify({factorId:c.id,challengeId:g.challengeId,webauthn:{rpId:t,rpOrigins:s,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:y}}catch(c){return Ee(c)?{data:null,error:c}:{data:null,error:new Ro("Unexpected error in register",c)}}}}eD();const bD={url:g7,storageKey:p7,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:y7,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function $x(n,e,t){return await t()}const Gl={};class pd{get jwks(){var e,t;return(t=(e=Gl[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Gl[this.storageKey]=Object.assign(Object.assign({},Gl[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Gl[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Gl[this.storageKey]=Object.assign(Object.assign({},Gl[this.storageKey]),{cachedAt:e})}constructor(e){var t,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},bD),e);if(this.storageKey=l.storageKey,this.instanceID=(t=pd.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,pd.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&jn()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new X7({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=$4(l.fetch),this.lock=l.lock||$x,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:jn()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Z7:this.lock=$x,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new vD(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:H4()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=qx(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=qx(this.memoryStorage)),jn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${B4}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},s="none";if(jn()&&(t=I7(window.location.href),this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce")),jn()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:l}=await this._getSessionFromURL(t,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),E7(l)){const g=(e=l.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:f}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",f),await this._saveSession(c),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Ee(t)?this._returnResult({error:t}):this._returnResult({error:new Ro("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,a;try{const l=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:fr}),{data:c,error:f}=l;if(f||!c)return this._returnResult({data:{user:null,session:null},error:f});const g=c.session,y=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:y,session:g},error:null})}catch(l){if(Ee(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var t,s,a;try{let l;if("email"in e){const{email:v,password:_,options:E}=e;let T=null,N=null;this.flowType==="pkce"&&([T,N]=await Hl(this.storage,this.storageKey)),l=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:E==null?void 0:E.emailRedirectTo,body:{email:v,password:_,data:(t=E==null?void 0:E.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken},code_challenge:T,code_challenge_method:N},xform:fr})}else if("phone"in e){const{phone:v,password:_,options:E}=e;l=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:_,data:(s=E==null?void 0:E.data)!==null&&s!==void 0?s:{},channel:(a=E==null?void 0:E.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken}},xform:fr})}else throw new bf("You must provide either an email or phone number and a password");const{data:c,error:f}=l;if(f||!c)return this._returnResult({data:{user:null,session:null},error:f});const g=c.session,y=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:y,session:g},error:null})}catch(l){if(Ee(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let t;if("email"in e){const{email:l,password:c,options:f}=e;t=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Bx})}else if("phone"in e){const{phone:l,password:c,options:f}=e;t=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Bx})}else throw new bf("You must provide either an email or phone number and a password");const{data:s,error:a}=t;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const l=new ql;return this._returnResult({data:{user:null,session:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(t){if(Ee(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,s,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,s,a,l,c,f,g,y,v,_,E;let T,N;if("message"in e)T=e.message,N=e.signature;else{const{chain:P,wallet:C,statement:M,options:H}=e;let F;if(jn())if(typeof C=="object")F=C;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")F=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(H!=null&&H.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=C}const te=new URL((t=H==null?void 0:H.url)!==null&&t!==void 0?t:window.location.href),fe=await F.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!fe||fe.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const he=G4(fe[0]);let k=(s=H==null?void 0:H.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!k){const I=await F.request({method:"eth_chainId"});k=tD(I)}const R={domain:te.host,address:he,statement:M,uri:te.href,version:"1",chainId:k,nonce:(a=H==null?void 0:H.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(l=H==null?void 0:H.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(f=H==null?void 0:H.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(g=H==null?void 0:H.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(y=H==null?void 0:H.signInWithEthereum)===null||y===void 0?void 0:y.requestId,resources:(v=H==null?void 0:H.signInWithEthereum)===null||v===void 0?void 0:v.resources};T=sD(R),N=await F.request({method:"personal_sign",params:[nD(T),he]})}try{const{data:P,error:C}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:T,signature:N},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(E=e.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:fr});if(C)throw C;if(!P||!P.session||!P.user){const M=new ql;return this._returnResult({data:{user:null,session:null},error:M})}return P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),this._returnResult({data:Object.assign({},P),error:C})}catch(P){if(Ee(P))return this._returnResult({data:{user:null,session:null},error:P});throw P}}async signInWithSolana(e){var t,s,a,l,c,f,g,y,v,_,E,T;let N,P;if("message"in e)N=e.message,P=e.signature;else{const{chain:C,wallet:M,statement:H,options:F}=e;let te;if(jn())if(typeof M=="object")te=M;else{const he=window;if("solana"in he&&typeof he.solana=="object"&&("signIn"in he.solana&&typeof he.solana.signIn=="function"||"signMessage"in he.solana&&typeof he.solana.signMessage=="function"))te=he.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof M!="object"||!(F!=null&&F.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");te=M}const fe=new URL((t=F==null?void 0:F.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in te&&te.signIn){const he=await te.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},F==null?void 0:F.signInWithSolana),{version:"1",domain:fe.host,uri:fe.href}),H?{statement:H}:null));let k;if(Array.isArray(he)&&he[0]&&typeof he[0]=="object")k=he[0];else if(he&&typeof he=="object"&&"signedMessage"in he&&"signature"in he)k=he;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)N=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),P=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in te)||typeof te.signMessage!="function"||!("publicKey"in te)||typeof te!="object"||!te.publicKey||!("toBase58"in te.publicKey)||typeof te.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${fe.host} wants you to sign in with your Solana account:`,te.publicKey.toBase58(),...H?["",H,""]:[""],"Version: 1",`URI: ${fe.href}`,`Issued At: ${(a=(s=F==null?void 0:F.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=F==null?void 0:F.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${F.signInWithSolana.notBefore}`]:[],...!((c=F==null?void 0:F.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${F.signInWithSolana.expirationTime}`]:[],...!((f=F==null?void 0:F.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${F.signInWithSolana.chainId}`]:[],...!((g=F==null?void 0:F.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${F.signInWithSolana.nonce}`]:[],...!((y=F==null?void 0:F.signInWithSolana)===null||y===void 0)&&y.requestId?[`Request ID: ${F.signInWithSolana.requestId}`]:[],...!((_=(v=F==null?void 0:F.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||_===void 0)&&_.length?["Resources",...F.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const he=await te.signMessage(new TextEncoder().encode(N),"utf8");if(!he||!(he instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");P=he}}try{const{data:C,error:M}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:Do(P)},!((E=e.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:fr});if(M)throw M;if(!C||!C.session||!C.user){const H=new ql;return this._returnResult({data:{user:null,session:null},error:H})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:M})}catch(C){if(Ee(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(e){const t=await To(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(t??"").split("/");try{const{data:l,error:c}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:fr});if(await pa(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const f=new ql;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:c})}catch(l){if(Ee(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:t,provider:s,token:a,access_token:l,nonce:c}=e,f=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:fr}),{data:g,error:y}=f;if(y)return this._returnResult({data:{user:null,session:null},error:y});if(!g||!g.session||!g.user){const v=new ql;return this._returnResult({data:{user:null,session:null},error:v})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:y})}catch(t){if(Ee(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,s,a,l,c;try{if("email"in e){const{email:f,options:g}=e;let y=null,v=null;this.flowType==="pkce"&&([y,v]=await Hl(this.storage,this.storageKey));const{error:_}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(t=g==null?void 0:g.data)!==null&&t!==void 0?t:{},create_user:(s=g==null?void 0:g.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:y,code_challenge_method:v},redirectTo:g==null?void 0:g.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in e){const{phone:f,options:g}=e,{data:y,error:v}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(a=g==null?void 0:g.data)!==null&&a!==void 0?a:{},create_user:(l=g==null?void 0:g.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(c=g==null?void 0:g.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:y==null?void 0:y.message_id},error:v})}throw new bf("You must provide either an email or phone number.")}catch(f){if(Ee(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(e){var t,s;try{let a,l;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:c,error:f}=await Oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:fr});if(f)throw f;if(!c)throw new Error("An error occurred on token verification.");const g=c.session,y=c.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:y,session:g},error:null})}catch(a){if(Ee(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var t,s,a,l,c;try{let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Hl(this.storage,this.storageKey));const y=await Oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:g}),headers:this.headers,xform:Q7});return!((l=y.data)===null||l===void 0)&&l.url&&jn()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(y.data.url),this._returnResult(y)}catch(f){if(Ee(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Ns;const{error:a}=await Oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(Ee(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:l}=e,{error:c}=await Oe(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:s,type:a,options:l}=e,{data:c,error:f}=await Oe(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:f})}throw new bf("You must provide either an email or phone number and a type")}catch(t){if(Ee(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await To(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<S0:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const c=await To(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=C0()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=$7(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:_a}):await this._useSession(async t=>{var s,a,l;const{data:c,error:f}=t;if(f)throw f;return!(!((s=c.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ns}:await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:_a})})}catch(t){if(Ee(t))return x7(t)&&(await this._removeSession(),await pa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:a,error:l}=s;if(l)throw l;if(!a.session)throw new Ns;const c=a.session;let f=null,g=null;this.flowType==="pkce"&&e.email!=null&&([f,g]=await Hl(this.storage,this.storageKey));const{data:y,error:v}=await Oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:g}),jwt:c.access_token,xform:_a});if(v)throw v;return c.user=y.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(s){if(Ee(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ns;const t=Date.now()/1e3;let s=t,a=!0,l=null;const{payload:c}=N0(e.access_token);if(c.exp&&(s=c.exp,a=s<=t),a){const{data:f,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!f)return{data:{user:null,session:null},error:null};l=f}else{const{data:f,error:g}=await this._getUser(e.access_token);if(g)throw g;l={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(t){if(Ee(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:c,error:f}=t;if(f)throw f;e=(s=c.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Ns;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(Ee(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!jn())throw new wf("No browser detected.");if(e.error||e.error_description||e.error_code)throw new wf(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Ox("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new wf("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ox("No code detected.");const{data:H,error:F}=await this._exchangeCodeForSession(e.code);if(F)throw F;const te=new URL(window.location.href);return te.searchParams.delete("code"),window.history.replaceState(window.history.state,"",te.toString()),{data:{session:H.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:l,refresh_token:c,expires_in:f,expires_at:g,token_type:y}=e;if(!l||!f||!c||!y)throw new wf("No session defined in URL");const v=Math.round(Date.now()/1e3),_=parseInt(f);let E=v+_;g&&(E=parseInt(g));const T=E-v;T*1e3<=Jl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${_}s`);const N=E-_;v-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,E,v):v-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,E,v);const{data:P,error:C}=await this._getUser(l);if(C)throw C;const M={provider_token:s,provider_refresh_token:a,access_token:l,expires_in:_,expires_at:E,refresh_token:c,token_type:y,user:P.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:M,redirectType:e.type},error:null})}catch(s){if(Ee(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await To(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:a,error:l}=t;if(l)return this._returnResult({error:l});const c=(s=a.session)===null||s===void 0?void 0:s.access_token;if(c){const{error:f}=await this.admin.signOut(c,e);if(f&&!(_7(f)&&(f.status===404||f.status===401||f.status===403)))return this._returnResult({error:f})}return e!=="others"&&(await this._removeSession(),await pa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=R7(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,a;try{const{data:{session:l},error:c}=t;if(c)throw c;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,t={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await Hl(this.storage,this.storageKey,!0));try{return await Oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(l){if(Ee(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(Ee(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:s,error:a}=await this._useSession(async l=>{var c,f,g,y,v;const{data:_,error:E}=l;if(E)throw E;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await Oe(this.fetch,"GET",T,{headers:this.headers,jwt:(v=(y=_.session)===null||y===void 0?void 0:y.access_token)!==null&&v!==void 0?v:void 0})});if(a)throw a;return jn()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(Ee(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var s;try{const{error:a,data:{session:l}}=t;if(a)throw a;const{options:c,provider:f,token:g,access_token:y,nonce:v}=e,_=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l==null?void 0:l.access_token)!==null&&s!==void 0?s:void 0,body:{provider:f,id_token:g,access_token:y,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:fr}),{data:E,error:T}=_;return T?this._returnResult({data:{user:null,session:null},error:T}):!E||!E.session||!E.user?this._returnResult({data:{user:null,session:null},error:new ql}):(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("USER_UPDATED",E.session)),this._returnResult({data:E,error:T}))}catch(a){if(Ee(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,a;const{data:l,error:c}=t;if(c)throw c;return await Oe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(Ee(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await D7(async a=>(a>0&&await O7(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await Oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:fr})),(a,l)=>{const c=200*Math.pow(2,a);return l&&A0(l)&&Date.now()+c-s<Jl})}catch(s){if(this._debug(t,"error",s),Ee(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),jn()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await To(this.storage,this.storageKey);if(a&&this.userStorage){let c=await To(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await Zl(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:C0()}else if(a&&!a.user&&!a.user){const c=await To(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(a.user=c.user,await pa(this.storage,this.storageKey+"-user"),await Zl(this.storage,this.storageKey,a)):a.user=C0()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const l=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<S0;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${S0}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),A0(c)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:f}=await this._getUser(a.access_token);!f&&(c!=null&&c.user)?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(s,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Ns;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new tg;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new Ns;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const f={data:l.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(l){if(this._debug(a,"error",l),Ee(l)){const c={data:null,error:l};return A0(l)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(c),c}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,t)}catch(g){l.push(g)}});if(await Promise.all(c),l.length>0){for(let f=0;f<l.length;f+=1)console.error(l[f]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await Zl(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const l=Vx(a);await Zl(this.storage,this.storageKey,l)}else{const a=Vx(t);await Zl(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await pa(this.storage,this.storageKey),await pa(this.storage,this.storageKey+"-code-verifier"),await pa(this.storage,this.storageKey+"-user"),this.userStorage&&await pa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&jn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Jl);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/Jl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Jl}ms, refresh threshold is ${wy} ticks`),a<=wy&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof F4)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!jn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const a=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,c]=await Hl(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(f.toString())}if(s!=null&&s.queryParams){const l=new URLSearchParams(s.queryParams);a.push(l.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:a,error:l}=t;return l?this._returnResult({data:null,error:l}):await Oe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Ee(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,a;const{data:l,error:c}=t;if(c)return this._returnResult({data:null,error:c});const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:g,error:y}=await Oe(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token});return y?this._returnResult({data:null,error:y}):(e.factorType==="totp"&&g.type==="totp"&&(!((a=g==null?void 0:g.totp)===null||a===void 0)&&a.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(t){if(Ee(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?uD(e.webauthn.credential_response):dD(e.webauthn.credential_response)})}:{code:e.code}),{data:f,error:g}=await Oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:g}))})}catch(t){if(Ee(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=await Oe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(c.error)return c;const{data:f}=c;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:lD(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:cD(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(Ee(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=N0(s.access_token);let c=null;l.aal&&(c=l.aal);let f=c;((t=(e=s.user.factors)===null||e===void 0?void 0:e.filter(v=>v.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(f="aal2");const y=l.amr||[];return{data:{currentLevel:c,nextLevel:f,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:s},error:a}=t;return a?this._returnResult({data:null,error:a}):s?await Oe(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Ns})})}catch(t){if(Ee(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:a},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Ns});const c=await Oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return c.data&&c.data.redirect_url&&jn()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(s){if(Ee(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:a},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Ns});const c=await Oe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return c.data&&c.data.redirect_url&&jn()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(s){if(Ee(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;return s?this._returnResult({data:null,error:s}):t?await Oe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Ns})})}catch(e){if(Ee(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:s},error:a}=t;return a?this._returnResult({data:null,error:a}):s?(await Oe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ns})})}catch(t){if(Ee(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(f=>f.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(f=>f.kid===e),s&&this.jwks_cached_at+b7>a)return s;const{data:l,error:c}=await Oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,s=l.keys.find(f=>f.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:T,error:N}=await this.getSession();if(N||!T.session)return this._returnResult({data:null,error:N});s=T.session.access_token}const{header:a,payload:l,signature:c,raw:{header:f,payload:g}}=N0(s);t!=null&&t.allowExpired||z7(l.exp);const y=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!y){const{error:T}=await this.getUser(s);if(T)throw T;return{data:{claims:l,header:a,signature:c},error:null}}const v=q7(a.alg),_=await crypto.subtle.importKey("jwk",y,v,!0,["verify"]);if(!await crypto.subtle.verify(v,_,c,C7(`${f}.${g}`)))throw new Ey("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(s){if(Ee(s))return this._returnResult({data:null,error:s});throw s}}}pd.nextInstanceID={};const wD=pd;class _D extends wD{constructor(e){super(e)}}class xD{constructor(e,t,s){var a,l,c;this.supabaseUrl=e,this.supabaseKey=t;const f=m7(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const g=`sb-${f.hostname.split(".")[0]}-auth-token`,y={db:a7,realtime:l7,auth:Object.assign(Object.assign({},o7),{storageKey:g}),global:i7},v=f7(s??{},y);this.storageKey=(a=v.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=v.global.headers)!==null&&l!==void 0?l:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(_,E)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(E)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=v.auth)!==null&&c!==void 0?c:{},this.headers,v.global.fetch),this.fetch=d7(t,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.accessToken&&this.accessToken().then(_=>this.realtime.setAuth(_)).catch(_=>console.warn("Failed to set initial Realtime auth token:",_)),this.rest=new l8(new URL("rest/v1",f).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new n7(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new r8(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:s}=await this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,userStorage:l,storageKey:c,flowType:f,lock:g,debug:y,throwOnError:v},_,E){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new _D({url:this.authUrl.href,headers:Object.assign(Object.assign({},T),_),storageKey:c,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,userStorage:l,flowType:f,lock:g,debug:y,throwOnError:v,fetch:E,hasCustomAuthorizationHeader:Object.keys(this.headers).some(N=>N.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new S8(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ED=(n,e,t)=>new xD(n,e,t);function TD(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}TD()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const SD="https://hykypgxaegmufdothwbv.supabase.co",AD="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh5a3lwZ3hhZWdtdWZkb3Rod2J2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1NTE3NzMsImV4cCI6MjA3NzEyNzc3M30.Euzl2vfhHrxhgN-tfg2XftMaX9hEiJOorSJq16n2CRY",Ty=ED(SD,AD),Va=n=>{const e=(n||"").toLowerCase();return e==="hoc_vien"||e==="student"||e==="hoc-vien"?"/assets/img/avatar.webp1.webp":"/assets/img/avatar.webp.webp"},ND=n=>new Promise((e,t)=>{const s=new FileReader;s.readAsDataURL(n),s.onload=a=>{var c;const l=new Image;l.src=(c=a.target)==null?void 0:c.result,l.onload=()=>{let y=l.width,v=l.height;y>v?y>350&&(v*=350/y,y=350):v>350&&(y*=350/v,v=350);const _=document.createElement("canvas");_.width=y,_.height=v;const E=_.getContext("2d");if(!E){t(new Error("Canvas context not available"));return}E.drawImage(l,0,0,y,v),_.toBlob(T=>{T?e(T):t(new Error("WebP conversion failed"))},"image/webp",.6)},l.onerror=f=>t(f)},s.onerror=a=>t(a)}),CD=async(n,e)=>{try{const t=await ND(n),a=`avatars/${`${e}_${Date.now()}.webp`}`,{error:l}=await Ty.storage.from("avatars").upload(a,t,{cacheControl:"3600",upsert:!0});if(l)throw console.error("Supabase upload error:",l),l;const{data:c}=Ty.storage.from("avatars").getPublicUrl(a);return c.publicUrl}catch(t){throw console.error("Error uploading avatar:",t),t}},kD=async n=>{try{const e=dt(Ae,"users",n),t=await La(e);if(t.exists()){const s=t.data();return{id:n,email:s.email,full_name:s.fullName||s.full_name||"Ngi dng",role:(()=>{const a=s.role;return a==="teacher"||a==="giao-vien"||a==="giao_vien"?"giao_vien":a==="student"||a==="hoc-vien"||a==="hoc_vien"?"hoc_vien":a==="manager"||a==="quan-ly"||a==="quan_ly"?"quan_ly":a==="leader"||a==="lanh-dao"||a==="lanh_dao"?"lanh_dao":a==="admin"?"admin":"hoc_vien"})(),photoURL:s.photoURL||Va(s.role),birthDate:s.birthDate||"",address:s.address||"",class:s.class||"",phoneNumber:s.phoneNumber||"",courseName:s.courseName||"",courseId:s.courseId||""}}return null}catch(e){return console.error("Error fetching user profile from Firestore:",e),null}},Fx=async(n,e,t,s,a,l,c,f)=>{try{let g=t;a==="n tp"&&s?g=`${t} / ${s}`:a==="Thi th"&&(g=`${t} (Thi th)`),await ad(St(Ae,"exam_results"),{studentId:n,licenseId:e,score:l,totalQuestions:c,timeTaken:f,completedAt:Ad(),type:a,quizTitle:g})}catch(g){console.error("Error saving exam result to Firestore:",g)}},RD=async()=>{try{const n=Gt(St(Ae,"courses")),e=await En(n),t=[];return e.forEach(s=>{const a=s.data();a.name&&t.push({id:s.id,name:a.name})}),t.sort((s,a)=>s.name.localeCompare(a.name))}catch(n){return console.error("Error fetching courses:",n),[]}},ID=async n=>{try{if(!n||n.length<3)return[];const e=Gt(St(Ae,"users"),pn("email",">=",n),pn("email","<=",n+""));return(await En(e)).docs.map(s=>{const a=s.data();return{id:s.id,email:a.email,full_name:a.fullName||a.full_name||"Ngi dng",role:(()=>{const l=a.role;return l==="teacher"||l==="giao-vien"?"giao_vien":l==="student"||l==="hoc-vien"?"hoc_vien":l==="manager"||l==="quan-ly"?"quan_ly":l==="leader"||l==="lanh-dao"?"lanh_dao":l||"hoc_vien"})(),photoURL:a.photoURL||Va(a.role),birthDate:a.birthDate||"",address:a.address||"",class:a.class||"",phoneNumber:a.phoneNumber||"",courseName:a.courseName||"",courseId:a.courseId||""}})}catch(e){return console.error("Error searching users:",e),[]}},jD=({userProfile:n})=>{const[e,t]=G.useState([]),[s,a]=G.useState(!0);G.useEffect(()=>{l()},[]);const l=async()=>{a(!0);const O=await NO();t(O),a(!1)},c=O=>!(n.role==="giao_vien"&&(O.type==="special"||O.type==="attention")),f=async O=>{confirm("Bn c chc chn mun XA VNH VIN thng bo ny? Hnh ng ny s g thng bo khi mn hnh ca tt c ngi dng.")&&(await CO(O)?(alert(" xa thng bo!"),l()):alert("C li xy ra khi xa."))},g=O=>O?new Date(O*1e3).toLocaleString("vi-VN"):"--",[y,v]=G.useState(!1),[_,E]=G.useState(""),[T,N]=G.useState(""),[P,C]=G.useState("system"),[M,H]=G.useState("all"),[F,te]=G.useState([]),[fe,he]=G.useState(""),[k,R]=G.useState(""),[I,U]=G.useState([]),[V,q]=G.useState(null),[j,Be]=G.useState("");G.useEffect(()=>{y&&M==="class"&&RD().then(te)},[y,M]),G.useEffect(()=>{if(k.length>2&&M==="user"){const O=setTimeout(async()=>{const re=await ID(k);U(re)},500);return()=>clearTimeout(O)}},[k,M]);const se=async O=>{if(O.preventDefault(),!_||!T)return alert("Vui lng nhp tiu  v ni dung");if(M==="class"&&!fe)return alert("Vui lng chn lp");if(M==="user"&&!V)return alert("Vui lng chn ngi nhn");try{let re=null;M==="class"&&(re=fe),M==="user"&&(re=V.id),await QS(_,T,P,M,re,n.id,n.full_name,j?new Date(j):null),alert(" gi thng bo thnh cng!"),v(!1),E(""),N(""),C("system"),l()}catch(re){console.error(re),alert("Li khi gi thng bo")}};return d.jsxs("div",{className:"p-4 md:p-8 animate-fade-in pb-20 max-w-7xl mx-auto",children:[d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl overflow-hidden min-h-[500px] flex flex-col",children:[d.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-slate-700 bg-gradient-to-r from-teal-500 to-emerald-600 text-white flex justify-between items-center",children:[d.jsxs("div",{children:[d.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3",children:[d.jsx(Jm,{})," Qun L Thng Bo H Thng"]}),d.jsx("p",{className:"text-teal-100 mt-1 opacity-90",children:n.role==="giao_vien"?"Bn c th xem tt c v qun l thng bo thng.":"Bn c ton quyn qun l thng bo."})]}),d.jsxs("button",{onClick:()=>v(!0),className:"bg-white text-teal-600 px-4 py-2 rounded-lg font-bold shadow hover:bg-teal-50 transition flex items-center gap-2",children:[d.jsx(nc,{})," To mi"]})]}),d.jsx("div",{className:"flex-1 p-6 bg-gray-50 dark:bg-slate-900/50 overflow-x-auto",children:s?d.jsx("div",{className:"text-center py-20 text-gray-500",children:"ang ti d liu..."}):d.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow border border-gray-200 dark:border-slate-700 overflow-hidden min-w-[800px]",children:d.jsxs("table",{className:"w-full text-left text-sm",children:[d.jsx("thead",{className:"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-200 font-bold uppercase",children:d.jsxs("tr",{children:[d.jsx("th",{className:"p-4 w-32",children:"i tng"}),d.jsx("th",{className:"p-4 w-32",children:"Loi"}),d.jsx("th",{className:"p-4",children:"Tiu  & Ni dung"}),d.jsx("th",{className:"p-4 w-40",children:"Ngi to"}),d.jsx("th",{className:"p-4 w-48",children:"Ht hn (Marquee)"}),d.jsx("th",{className:"p-4 w-40",children:"Ngy to"}),d.jsx("th",{className:"p-4 w-32 text-center",children:"Hnh ng"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-700",children:e.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:7,className:"p-10 text-center text-gray-500 text-base",children:"H thng cha c thng bo no."})}):e.map(O=>{var ve,Re;const re=c(O);return d.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors",children:[d.jsxs("td",{className:"p-4 align-top",children:[d.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-bold whitespace-nowrap border
                                                            ${O.targetType==="all"?"bg-purple-100 text-purple-700 border-purple-200":O.targetType==="class"?"bg-indigo-100 text-indigo-700 border-indigo-200":"bg-pink-100 text-pink-700 border-pink-200"}
                                                        `,children:[O.targetType==="all"&&d.jsxs(d.Fragment,{children:[d.jsx(px,{})," Tt c"]}),O.targetType==="class"&&d.jsxs(d.Fragment,{children:[d.jsx(hd,{})," Lp"]}),O.targetType==="user"&&d.jsxs(d.Fragment,{children:[d.jsx(sm,{})," C nhn"]})]}),O.targetId&&O.targetType!=="all"&&d.jsx("div",{className:"text-xs text-gray-500 mt-1 font-mono",children:O.targetId})]}),d.jsx("td",{className:"p-4 align-top",children:d.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold whitespace-nowrap
                                                            ${O.type==="special"?"bg-red-100 text-red-600":O.type==="attention"?"bg-orange-100 text-orange-600":"bg-blue-100 text-blue-600"}
                                                        `,children:O.type==="special"?"C BIT":O.type==="attention"?"CH ":"Thng"})}),d.jsxs("td",{className:"p-4 align-top",children:[d.jsx("div",{className:"font-bold text-gray-900 dark:text-white mb-1 text-base",children:O.title}),d.jsx("div",{className:"text-gray-600 dark:text-gray-400 line-clamp-2",children:O.message})]}),d.jsxs("td",{className:"p-4 align-top text-gray-700 dark:text-gray-300 font-medium",children:[O.senderName,d.jsx("div",{className:"text-xs text-gray-400 font-normal",children:O.senderId===n.id?"(Bn)":""})]}),d.jsx("td",{className:"p-4 align-top",children:O.type==="special"||O.type==="attention"?d.jsxs("div",{className:"flex items-center gap-1 text-xs font-mono bg-gray-100 dark:bg-slate-900 px-2 py-1 rounded border whitespace-nowrap",children:[d.jsx(UO,{className:"text-gray-400"}),g((ve=O.expiryDate)==null?void 0:ve.seconds)]}):d.jsx("span",{className:"text-gray-400 text-xs",children:"--"})}),d.jsx("td",{className:"p-4 align-top text-gray-500 text-xs whitespace-nowrap",children:g((Re=O.createdAt)==null?void 0:Re.seconds)}),d.jsx("td",{className:"p-4 align-top text-center",children:re?d.jsxs("button",{onClick:()=>f(O.id),className:"text-red-500 hover:text-red-700 p-2 bg-red-50 hover:bg-red-100 rounded-lg transition-colors flex items-center gap-1 mx-auto",title:"Xa vnh vin",children:[d.jsx(Oo,{size:14})," ",d.jsx("span",{className:"text-xs font-bold",children:"Xa"})]}):d.jsx("div",{className:"text-gray-300 flex justify-center p-2 cursor-not-allowed",title:"Bn khng c quyn xa thng bo cp cao ny",children:d.jsx(MO,{})})})]},O.id)})})]})})})]}),y&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm",onClick:()=>v(!1),children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden animate-scale-in",onClick:O=>O.stopPropagation(),children:[d.jsxs("div",{className:"p-6 border-b dark:border-slate-700 bg-gray-50 dark:bg-slate-900 flex justify-between items-center",children:[d.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2 text-gray-800 dark:text-white",children:[d.jsx(nc,{className:"text-teal-600"})," To thng bo mi"]}),d.jsx("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),d.jsxs("form",{onSubmit:se,className:"p-6 space-y-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300",children:"Gi ti:"}),d.jsxs("div",{className:"flex gap-4",children:[d.jsxs("label",{className:`flex items-center gap-2 p-3 rounded-lg border cursor-pointer flex-1 justify-center transition-all ${M==="all"?"bg-purple-50 border-purple-500 text-purple-700 ring-1 ring-purple-500":"border-gray-200 hover:bg-gray-50"}`,children:[d.jsx("input",{type:"radio",name:"target",value:"all",checked:M==="all",onChange:()=>H("all"),className:"hidden"}),d.jsx(px,{})," Tt c"]}),d.jsxs("label",{className:`flex items-center gap-2 p-3 rounded-lg border cursor-pointer flex-1 justify-center transition-all ${M==="class"?"bg-indigo-50 border-indigo-500 text-indigo-700 ring-1 ring-indigo-500":"border-gray-200 hover:bg-gray-50"}`,children:[d.jsx("input",{type:"radio",name:"target",value:"class",checked:M==="class",onChange:()=>H("class"),className:"hidden"}),d.jsx(hd,{})," Lp hc"]}),d.jsxs("label",{className:`flex items-center gap-2 p-3 rounded-lg border cursor-pointer flex-1 justify-center transition-all ${M==="user"?"bg-pink-50 border-pink-500 text-pink-700 ring-1 ring-pink-500":"border-gray-200 hover:bg-gray-50"}`,children:[d.jsx("input",{type:"radio",name:"target",value:"user",checked:M==="user",onChange:()=>H("user"),className:"hidden"}),d.jsx(sm,{})," C nhn"]})]})]}),M==="class"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1",children:"Chn lp:"}),d.jsxs("select",{className:"w-full p-2 border rounded-lg dark:bg-slate-700",value:fe,onChange:O=>he(O.target.value),required:!0,children:[d.jsx("option",{value:"",children:"-- Chn lp --"}),F.map(O=>d.jsxs("option",{value:O.name,children:[O.name," -- (",O.id,")"]},O.id))]})]}),M==="user"&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1",children:"Tm ngi nhn (Email):"}),d.jsx("input",{className:"w-full p-2 border rounded-lg dark:bg-slate-700",placeholder:"Nhp email...",value:k,onChange:O=>R(O.target.value)}),I.length>0&&d.jsx("div",{className:"mt-2 border rounded max-h-40 overflow-y-auto bg-gray-50 dark:bg-slate-900",children:I.map(O=>d.jsxs("div",{onClick:()=>{q(O),U([]),R(O.email)},className:"p-2 hover:bg-teal-50 cursor-pointer flex justify-between items-center border-b last:border-0",children:[d.jsx("span",{className:"font-medium",children:O.full_name}),d.jsx("span",{className:"text-xs text-gray-500",children:O.email})]},O.id))}),V&&d.jsxs("div",{className:"mt-2 p-2 bg-green-50 text-green-700 text-sm rounded flex items-center gap-2",children:[d.jsx(JS,{}),"  chn: ",d.jsx("b",{children:V.full_name})," (",V.email,")"]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1",children:"Tiu :"}),d.jsx("input",{className:"w-full p-2 border rounded-lg dark:bg-slate-700",value:_,onChange:O=>E(O.target.value),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1",children:"Ni dung:"}),d.jsx("textarea",{className:"w-full p-2 border rounded-lg dark:bg-slate-700 h-24",value:T,onChange:O=>N(O.target.value),required:!0})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1",children:"Loi thng bo:"}),d.jsxs("select",{className:"w-full p-2 border rounded-lg dark:bg-slate-700",value:P,onChange:O=>C(O.target.value),children:[d.jsx("option",{value:"system",children:"Thng (Xanh)"}),d.jsx("option",{value:"attention",children:"Ch  (Cam)"}),d.jsx("option",{value:"special",children:"c bit ( - Marquee)"})]})]}),(P==="attention"||P==="special")&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1",children:"Ht hn chy ch (Marquee):"}),d.jsx("input",{type:"datetime-local",className:"w-full p-2 border rounded-lg dark:bg-slate-700",value:j,onChange:O=>Be(O.target.value),required:!0})]})]}),d.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t dark:border-slate-700 mt-6",children:[d.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-5 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition",children:"Hy"}),d.jsx("button",{type:"submit",className:"px-5 py-2 bg-teal-600 hover:bg-teal-700 text-white rounded-lg font-bold shadow-lg shadow-teal-500/30 transition transform hover:-translate-y-0.5",children:"Gi thng bo"})]})]})]})})]})},Gx=({onStart:n,onLoginClick:e,onRegisterClick:t})=>{const{theme:s}=Kn();return d.jsx("div",{className:"text-center p-4 animate-slide-in-right",children:d.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8 md:p-12 max-w-2xl mx-auto relative",children:[s==="tri-an"?d.jsx("img",{src:"https://i.postimg.cc/MH9hVp8S/happy-techers-day.jpg",alt:"Icon Chc mng Ngy Nh gio",className:"h-24 w-24 mx-auto mb-4 rounded-full object-cover"}):s==="noel"?d.jsx(fc,{className:"h-24 w-24 mx-auto text-primary mb-4"}):d.jsx(fc,{className:"h-24 w-24 mx-auto text-primary mb-4"}),d.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-foreground mb-2",children:"ng Dng n tp"}),s==="tri-an"&&d.jsx("p",{className:"text-xl font-semibold text-primary mb-4",children:"Phin bn c bit Tri n Thy C"}),s==="noel"&&d.jsx("p",{className:"text-xl font-semibold text-primary mb-4",children:"Cho n Ging Sinh An Lnh"}),d.jsx("p",{className:"text-lg text-muted-foreground mb-4",children:"Cho mng anh/ch  n vi ng dng n tp, n thi chng ch chuyn mn phng tin thy ni a."}),s==="tri-an"&&d.jsx("p",{className:"text-lg text-muted-foreground mb-8 italic",children:'"Nhn ngy Nh gio Vit Nam 20-11, knh chc qu thy c lun mnh khe, hnh phc v thnh cng trong s nghip trng ngi."'}),d.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[d.jsx("button",{onClick:n,className:"w-full sm:w-auto bg-primary text-primary-foreground font-bold text-lg py-4 px-10 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105",children:"Bt u"}),d.jsx("button",{onClick:e,className:"w-full sm:w-auto bg-secondary text-secondary-foreground font-bold text-lg py-4 px-10 rounded-lg hover:bg-secondary/80 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300",children:"ng nhp"})]}),d.jsx("div",{className:"mt-4",children:d.jsx("button",{onClick:t,className:"text-primary hover:underline font-medium",children:"Cha c ti khon? ng k ngay"})})]})})},OD=async n=>{const e=n.trim();return e.includes("@")?e:`${e}@gmail.com`},DD=({onBack:n})=>{const[e,t]=G.useState(""),[s,a]=G.useState(""),[l,c]=G.useState(!1),[f,g]=G.useState(null),y=async v=>{v.preventDefault(),c(!0),g(null);try{const _=await OD(e);await jI(ud,_,s)}catch(_){console.error("Login failed:",_),_.code==="auth/invalid-email"?g("Tn ng nhp hoc email khng hp l."):_.code==="auth/user-not-found"||_.code==="auth/wrong-password"||_.code==="auth/invalid-credential"?g("Ti khon hoc mt khu khng chnh xc."):g("ng nhp tht bi. Vui lng th li.")}finally{c(!1)}};return d.jsxs("div",{className:"w-full max-w-md mx-auto p-4 animate-slide-in-right",children:[d.jsxs("div",{className:"relative text-center mb-10",children:[d.jsx("button",{onClick:n,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:d.jsx(Ac,{className:"h-10 w-10 text-primary"})}),d.jsx(fc,{className:"h-20 w-20 mx-auto text-primary mb-4"}),d.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"ng nhp"}),d.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Truy cp vo h thng qun l hc tp."})]}),d.jsx("div",{className:"bg-card p-8 rounded-2xl shadow-lg",children:d.jsxs("form",{onSubmit:y,children:[f&&d.jsx("p",{className:"bg-destructive/10 text-destructive p-3 rounded-md mb-4 text-center",children:f}),d.jsxs("div",{className:"mb-4",children:[d.jsx("label",{htmlFor:"account",className:"block text-sm font-medium text-card-foreground mb-2",children:"Ti khon"}),d.jsx("input",{id:"account",type:"text",value:e,onChange:v=>t(v.target.value),placeholder:"Nhp ti khon hoc email",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-colors duration-300",required:!0,autoFocus:!0})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-card-foreground mb-2",children:"Mt khu"}),d.jsx("input",{id:"password",type:"password",value:s,onChange:v=>a(v.target.value),placeholder:"",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-colors duration-300",required:!0})]}),d.jsx("button",{type:"submit",disabled:l,className:"w-full bg-primary text-primary-foreground font-bold py-3 px-6 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 disabled:opacity-50 disabled:cursor-wait",children:l?"ang x l...":"ng nhp"})]})})]})},PD=({onBack:n,onSuccess:e})=>{const[t,s]=G.useState(""),[a,l]=G.useState(""),[c,f]=G.useState(""),[g,y]=G.useState(""),[v,_]=G.useState(""),[E,T]=G.useState(""),[N,P]=G.useState(!1),[C,M]=G.useState(null),H=async F=>{if(F.preventDefault(),P(!0),M(null),a.length<6){M("Mt khu phi c t nht 6 k t."),P(!1);return}try{const fe=(await II(ud,t.trim(),a)).user,he=t.split("@")[0].toLowerCase();await Km(dt(Ae,"users",fe.uid),{email:fe.email,fullName:c.trim(),phoneNumber:v.trim(),birthDate:E,role:"hoc_vien",class:g.trim(),username:he,createdAt:Ad()}),console.log("Registration successful"),e()}catch(te){console.error("Registration failed:",te),te.code==="auth/email-already-in-use"?M("Email ny  c s dng."):te.code==="auth/invalid-email"?M("Email khng hp l."):te.code==="auth/weak-password"?M("Mt khu qu yu."):M("ng k tht bi. Vui lng th li.")}finally{P(!1)}};return d.jsxs("div",{className:"w-full max-w-md mx-auto p-4 animate-slide-in-right",children:[d.jsxs("div",{className:"relative text-center mb-6",children:[d.jsx("button",{onClick:n,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-card/50 p-2 rounded-full shadow-md hover:bg-muted transition-all duration-300",children:d.jsx(Ac,{className:"h-8 w-8 text-primary"})}),d.jsx(fc,{className:"h-16 w-16 mx-auto text-primary mb-2"}),d.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"ng K"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"To ti khon hc vin mi"})]}),d.jsx("div",{className:"bg-card p-6 rounded-2xl shadow-lg",children:d.jsxs("form",{onSubmit:H,className:"space-y-4",children:[C&&d.jsx("p",{className:"bg-destructive/10 text-destructive p-3 rounded-md text-sm text-center",children:C}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"H v Tn *"}),d.jsx("input",{type:"text",value:c,onChange:F=>f(F.target.value),required:!0,className:"w-full px-4 py-2 bg-background border border-border rounded-lg focus:ring-2 focus:ring-primary outline-none",placeholder:"Nguyn Vn A"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"Lp Hc *"}),d.jsx("input",{type:"text",value:g,onChange:F=>y(F.target.value),required:!0,className:"w-full px-4 py-2 bg-background border border-border rounded-lg focus:ring-2 focus:ring-primary outline-none",placeholder:"Nhp tn lp (GV s duyt)"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"Ngy sinh"}),d.jsx("input",{type:"date",value:E,onChange:F=>T(F.target.value),className:"w-full px-4 py-2 bg-background border border-border rounded-lg focus:ring-2 focus:ring-primary outline-none"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"ST"}),d.jsx("input",{type:"tel",value:v,onChange:F=>_(F.target.value),className:"w-full px-4 py-2 bg-background border border-border rounded-lg focus:ring-2 focus:ring-primary outline-none",placeholder:"09..."})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"Email *"}),d.jsx("input",{type:"email",value:t,onChange:F=>s(F.target.value),required:!0,className:"w-full px-4 py-2 bg-background border border-border rounded-lg focus:ring-2 focus:ring-primary outline-none",placeholder:"email@example.com"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"Mt khu *"}),d.jsx("input",{type:"password",value:a,onChange:F=>l(F.target.value),required:!0,className:"w-full px-4 py-2 bg-background border border-border rounded-lg focus:ring-2 focus:ring-primary outline-none",placeholder:"t nht 6 k t"})]}),d.jsx("button",{type:"submit",disabled:N,className:"w-full bg-primary text-primary-foreground font-bold py-3 px-6 rounded-lg hover:bg-primary/90 transition-all duration-300 mt-4 disabled:opacity-50",children:N?"ang to ti khon...":"ng K"})]})})]})},MD=(n,e)=>{const t="h-14 w-14 mx-auto text-primary mb-3 object-contain",s="h-14 w-14 mx-auto mb-3 object-cover rounded-full border-2 border-border/20 shadow-sm",a="h-14 w-14 mx-auto mb-3 object-contain drop-shadow-lg",l=n.name.toLowerCase();if(e==="noel")return l.includes("thuyn trng")?d.jsx("img",{src:"/assets/img/hat.png",alt:"Captain Hat",className:a}):l.includes("my trng")?d.jsx("img",{src:"/assets/img/gift4.png",alt:"Chief Engineer",className:a}):l.includes("thy th")?d.jsx("img",{src:"/assets/img/bell.png",alt:"Sailor",className:a}):l.includes("li phng tin")?d.jsx("img",{src:"/assets/img/tree.png",alt:"Helm",className:a}):l.includes("chng ch")?d.jsx("img",{src:"/assets/img/star-gold.png",alt:"Certificate",className:a}):d.jsx("img",{src:"/assets/img/gift5.png",alt:"Default",className:a});if(e==="tri-an")switch(n.id){case"thuyentruong-h1":return d.jsx("img",{src:"https://i.postimg.cc/Vs76y54F/8.jpg",alt:n.name,className:s});case"thuyentruong-h2":return d.jsx("img",{src:"https://i.postimg.cc/Pf6xGNK4/9.jpg",alt:n.name,className:s});case"thuyentruong-h3":return d.jsx("img",{src:"https://i.postimg.cc/Vs76y54W/7.jpg",alt:n.name,className:s});case"thuythu":return d.jsx(D0,{className:t});case"lai-phuong-tien":return d.jsx(fc,{className:t});case"maytruong-h1":return d.jsx("img",{src:"https://i.postimg.cc/zDpm90H6/undefined.jpg",alt:n.name,className:s});case"maytruong-h2":return d.jsx("img",{src:"https://i.postimg.cc/wMwSLjdc/Teachers-day-background-design-art-illustration.jpg",alt:n.name,className:s});case"maytruong-h3":return d.jsx("img",{src:"https://i.postimg.cc/NFdWmjwH/Hinh-thiep.jpg",alt:n.name,className:s});case"thomay":return d.jsx("img",{src:"https://i.postimg.cc/cJYy2WQN/hinh-nen-3.jpg",alt:n.name,className:s});case"caotoc":return d.jsx("img",{src:"https://i.postimg.cc/dQWMQybn/5.jpg",alt:n.name,className:s});case"ven-bien":return d.jsx("img",{src:"https://i.postimg.cc/zDdmDgs0/6.jpg",alt:n.name,className:s});case"antoan-ven-bien":return d.jsx("img",{src:"https://i.postimg.cc/ZYFWdtv0/BOARD.webp",alt:n.name,className:s});case"antoan-xang-dau":return d.jsx("img",{src:"https://i.postimg.cc/T2k82Dzc/4.jpg",alt:n.name,className:s});case"antoan-hoa-chat":return d.jsx("img",{src:"https://i.postimg.cc/mZVx08Ff/World-Teacher-s-Day-Flowers-Border-Pink.jpg",alt:n.name,className:s});default:return l.includes("chng ch")?d.jsx(O2,{className:t}):d.jsx(j2,{className:t})}return l.includes("thuyn trng")?d.jsx($N,{className:t}):l.includes("my trng")?d.jsx(HN,{className:t}):l.includes("thy th")?d.jsx(D0,{className:t}):l.includes("li phng tin")?d.jsx(fc,{className:t}):l.includes("chng ch")?d.jsx(O2,{className:t}):d.jsx(j2,{className:t})},LD=({licenses:n,onSelect:e,onBack:t})=>{const{theme:s}=Kn();return d.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right",children:[d.jsxs("div",{className:"relative text-center mb-10",children:[d.jsx("button",{onClick:t,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:d.jsx(Ac,{className:"h-10 w-10 text-primary"})}),s==="noel"?d.jsx("img",{src:"/assets/img/tree.png",alt:"Tree",className:"h-20 w-20 mx-auto mb-4 object-contain drop-shadow-lg"}):d.jsx(D0,{className:"h-20 w-20 mx-auto text-primary mb-4"}),d.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Chn Hng Bng"}),d.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Anh/ch vui lng chn hng bng mun n tp v thi th."})]}),d.jsx("div",{className:"bg-card p-6 rounded-2xl shadow-lg",children:d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:n.map(a=>{const l=a.subjects.reduce((c,f)=>c+f.questions.length,0);return d.jsxs("button",{onClick:()=>e(a),className:"group w-full p-4 bg-background rounded-lg text-center hover:bg-primary/10 transition-all duration-300 transform hover:scale-105 focus:ring-4 focus:ring-ring focus:outline-none",children:[MD(a,s),d.jsx("h3",{className:"text-md font-bold text-primary",children:a.name}),d.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[a.subjects.length," mn - ",l," cu"]})]},a.id)})})})]})},VD=({onNameSubmit:n,onBack:e})=>{const[t,s]=G.useState(""),a=l=>{l.preventDefault();const c=t.trim();n(c||"Hc vin")};return d.jsxs("div",{className:"w-full max-w-md mx-auto p-4 animate-slide-in-right",children:[d.jsxs("div",{className:"text-center mb-10",children:[d.jsx(zN,{className:"h-20 w-20 mx-auto text-primary mb-4"}),d.jsxs("div",{className:"relative flex justify-center items-center",children:[d.jsx("div",{className:"absolute left-0",children:d.jsx("button",{onClick:e,className:"bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:d.jsx(Ac,{className:"h-10 w-10 text-primary"})})}),d.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Thng tin ca anh/ch"})]}),d.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Nhp tn  ti c th lu li tin  hc tp cho anh/ch."})]}),d.jsx("div",{className:"bg-card p-8 rounded-2xl shadow-lg",children:d.jsxs("form",{onSubmit:a,children:[d.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-card-foreground mb-2",children:"Tn ca anh/ch"}),d.jsx("input",{id:"name",type:"text",value:t,onChange:l=>s(l.target.value),placeholder:"V d: Nguyn Vn A (c th b trng)",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-colors duration-300",autoFocus:!0}),d.jsx("button",{type:"submit",className:"mt-6 w-full bg-primary text-primary-foreground font-bold py-3 px-6 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300",children:"Xc nhn"})]})})]})},UD=({onModeSelect:n,licenseName:e,userName:t,onSwitchLicense:s})=>d.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right",children:[d.jsxs("div",{className:"relative text-center mb-10",children:[d.jsx("div",{className:"absolute right-0 top-0",children:d.jsxs("button",{onClick:s,className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground hover:text-primary transition-all duration-300 py-1 px-2 rounded-md hover:bg-secondary",title:"Chn li hng bng",children:[d.jsx(qN,{className:"h-4 w-4"}),d.jsx("span",{children:"Chn li hng bng"})]})}),d.jsxs("h1",{className:"text-4xl font-bold text-foreground",children:["Cho anh/ch ",t,"!"]}),d.jsxs("p",{className:"text-lg text-muted-foreground mt-2",children:["Anh/ch ang hc hng bng ",d.jsx("span",{className:"font-semibold text-primary",children:e}),"."]}),d.jsx("p",{className:"text-lg text-muted-foreground mt-1",children:"Hy chn mt ch   bt u."})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("button",{onClick:()=>n("practice"),className:"group bg-card text-card-foreground p-8 rounded-2xl shadow-lg text-center hover:bg-primary/10 transition-all duration-300 transform hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-ring",children:[d.jsx(jy,{className:"h-16 w-16 mx-auto text-primary mb-4 transition-transform group-hover:scale-110"}),d.jsx("h2",{className:"text-2xl font-bold text-card-foreground",children:"n tp"}),d.jsx("p",{className:"text-muted-foreground mt-2",children:"Luyn tp tng mn  nm vng kin thc."})]}),d.jsxs("button",{onClick:()=>n("online_exam"),className:"group bg-card text-card-foreground p-8 rounded-2xl shadow-lg text-center hover:bg-destructive/10 transition-all duration-300 transform hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-ring",children:[d.jsx(FN,{className:"h-16 w-16 mx-auto text-destructive mb-4 transition-transform group-hover:scale-110"}),d.jsx("h2",{className:"text-2xl font-bold text-card-foreground",children:"Thi th"}),d.jsx("p",{className:"text-muted-foreground mt-2",children:"Lm bi thi 30 cu ngu nhin trong 45 pht."})]})]})]}),Kx=n=>{if(!n)return"";const e=new Date(n),t=e.getDate().toString().padStart(2,"0"),s=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getHours().toString().padStart(2,"0"),l=e.getMinutes().toString().padStart(2,"0");return`(${t}/${s} ${a}:${l})`},BD=({subjects:n,progress:e,onSelect:t,onBack:s})=>d.jsxs("div",{className:"w-full max-w-2xl mx-auto p-4 animate-slide-in-right",children:[d.jsxs("div",{className:"relative text-center mb-10",children:[d.jsx("button",{onClick:s,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:d.jsx(Ac,{className:"h-10 w-10 text-primary"})}),d.jsx(jy,{className:"h-20 w-20 mx-auto text-primary mb-4"}),d.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Chn Mn hc"}),d.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Chn mt mn  bt u n tp."})]}),d.jsx("div",{className:"bg-card p-6 rounded-2xl shadow-lg",children:d.jsx("div",{className:"space-y-3",children:n.map(a=>{const l=e[a.id],c=l&&l.lastScore!==null;return d.jsxs("button",{onClick:()=>t(a),className:"w-full flex items-center justify-between p-5 bg-background rounded-lg text-left hover:bg-primary/10 transition-all duration-300 transform hover:scale-[1.02] focus:ring-4 focus:ring-ring focus:outline-none",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-bold text-primary",children:a.name}),d.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.questions.length," cu hi"]})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[c&&d.jsxs("div",{className:"text-right text-sm",children:[d.jsxs("p",{className:"text-muted-foreground flex items-center justify-end",children:[d.jsx("span",{children:"Ln cui:"}),d.jsxs("span",{className:"font-semibold text-primary ml-1",children:[l.lastScore,"/",a.questions.length]}),l.lastScoreTimestamp&&d.jsx("span",{className:"ml-1.5 text-xs text-muted-foreground/80",children:Kx(l.lastScoreTimestamp)})]}),d.jsxs("p",{className:"text-muted-foreground flex items-center justify-end mt-0.5",children:[d.jsx("span",{children:"Cao nht:"}),d.jsxs("span",{className:"font-semibold text-success ml-1",children:[l.highScore,"/",a.questions.length]}),l.highScoreTimestamp&&d.jsx("span",{className:"ml-1.5 text-xs text-muted-foreground/80",children:Kx(l.highScoreTimestamp)})]})]}),d.jsx(BN,{className:"h-6 w-6 text-muted-foreground"})]})]},a.id)})})})]}),zD=({quiz:n,onFinish:e,onBack:t,initialIndex:s=0,initialAnswers:a={},onProgressUpdate:l})=>{const[c,f]=G.useState(s),[g,y]=G.useState(a);if(!n.questions||n.questions.length===0)return d.jsxs("div",{className:"w-full max-w-3xl mx-auto p-4 text-center",children:[d.jsx("h2",{className:"text-xl font-bold mb-4",children:"Cha c cu hi no trong ch  ny."}),d.jsx("button",{onClick:t,className:"bg-primary text-primary-foreground hover:bg-primary/90 py-2 px-4 rounded-lg",children:"Quay li"})]});const v=G.useMemo(()=>n.questions[c],[n.questions,c]);if(!v)return d.jsxs("div",{className:"w-full max-w-3xl mx-auto p-4 text-center",children:[d.jsx("h2",{className:"text-xl font-bold mb-4",children:"C li xy ra khi ti cu hi."}),d.jsx("button",{onClick:t,className:"bg-primary text-primary-foreground py-2 px-4 rounded-lg",children:"Quay li"})]});const _=G.useMemo(()=>g[v.id]!==void 0,[g,v.id]),E=G.useMemo(()=>g[v.id]||null,[g,v.id]);G.useEffect(()=>{l==null||l(c,0,g)},[c,g]);const T=()=>{e(g)},N=M=>{_||y(H=>({...H,[v.id]:M}))},P=()=>{c===n.questions.length-1?T():f(H=>H+1)},C=c/n.questions.length*100;return d.jsx("div",{className:"w-full max-w-3xl mx-auto p-4 md:p-6 animate-slide-in-right font-quiz-default",children:d.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-6 md:p-8",children:[d.jsxs("div",{className:"mb-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4 relative",children:[d.jsx("button",{onClick:t,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-background/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-card transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:d.jsx(Ac,{className:"h-10 w-10"})}),d.jsx("h1",{className:"text-xl font-bold text-foreground text-center flex-grow",children:n.title}),d.jsx("button",{onClick:T,className:"bg-secondary text-secondary-foreground hover:bg-secondary/80 text-sm font-bold py-2 px-4 rounded-lg transition-colors duration-300",children:"Kt thc"})]}),d.jsx("div",{className:"w-full bg-secondary rounded-full h-2.5 mb-2",children:d.jsx("div",{className:"bg-primary h-2.5 rounded-full transition-all duration-500",style:{width:`${C}%`}})}),d.jsx("div",{className:"flex justify-between items-center text-sm text-muted-foreground",children:d.jsxs("span",{children:["Cu ",c+1," / ",n.questions.length]})})]}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-5 text-foreground",children:v.text}),v.image&&d.jsx("div",{className:"mb-6 rounded-lg overflow-hidden",children:d.jsx("img",{src:v.image,alt:"Cu hi",className:"w-full h-auto object-cover max-h-80"})}),d.jsx("div",{className:"space-y-3",children:v.answers.map(M=>{const H=E===M.id;let F="w-full text-left p-4 rounded-lg border-2 transition-all duration-300 flex items-center justify-between text-lg";const te=M.id===v.correctAnswerId;return _?te?F+=" bg-success/10 border-success text-success":H&&!te?F+=" bg-destructive/10 border-destructive text-destructive":F+=" border-border text-muted-foreground":H?F+=" bg-primary/10 border-primary ring-2 ring-primary text-primary-foreground":F+=" bg-background hover:bg-muted border-border text-foreground",d.jsxs("button",{onClick:()=>N(M.id),disabled:_,className:F,children:[d.jsx("span",{className:"flex-grow",children:M.text}),_&&d.jsxs(d.Fragment,{children:[te&&d.jsx(Ry,{className:"h-6 w-6 text-success ml-3"}),H&&!te&&d.jsx(Iy,{className:"h-6 w-6 text-destructive ml-3"})]})]},M.id)})}),d.jsx("div",{className:"mt-8",children:d.jsx("div",{className:"text-right",children:_?d.jsx("button",{onClick:P,className:"bg-success text-success-foreground font-bold py-3 px-8 rounded-lg hover:bg-success/90 transition-all duration-300 animate-slide-in-right",children:c===n.questions.length-1?"Hon thnh":"Cu tip theo"}):d.jsx("div",{className:"h-[48px]"})})})]})]})})},qD=n=>{const e=Math.floor(n/60),t=n%60;return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},HD=({checked:n,onChange:e})=>d.jsx("div",{onClick:e,className:`w-[14px] h-[14px] border border-[#999] inline-block cursor-pointer bg-white relative ${n?"bg-[#333]":""}`,children:n&&d.jsx("div",{className:"absolute top-[2px] left-[2px] w-[8px] h-[8px] bg-[#333]"})}),$D=({quiz:n,onFinish:e,onBack:t,userName:s,selectedLicense:a,initialIndex:l=0,initialAnswers:c={},initialTime:f,onProgressUpdate:g})=>{const[y,v]=G.useState(l),[_,E]=G.useState(c),[T,N]=G.useState(f!==void 0?f:n.timeLimit??3600),P=G.useMemo(()=>n.questions[y],[n.questions,y]),C=G.useRef(_);G.useEffect(()=>{C.current=_,g==null||g(y,T,_)},[_]),G.useEffect(()=>{g==null||g(y,T,_)},[y]),G.useEffect(()=>{T%5===0&&(g==null||g(y,T,_))},[T]);const M=()=>{window.confirm("Anh/ch c chc chn mun thot khi bi thi khng? Mi tin trnh s b mt.")&&t()},H=G.useCallback(()=>{const fe=C.current,he=n.questions.length-Object.keys(fe).length,k=he>0?`Anh/ch vn cn ${he} cu cha tr li. Anh/ch c chc chn mun np bi khng?`:"Anh/ch  hon thnh tt c cc cu hi. Anh/ch c mun np bi khng?";window.confirm(k)&&e(fe)},[n.questions.length,e]),F=G.useRef(e);G.useEffect(()=>{F.current=e},[e]),G.useEffect(()=>{const fe=setInterval(()=>{N(he=>he>0?he-1:0)},1e3);return()=>clearInterval(fe)},[]),G.useEffect(()=>{T===0&&(alert(" ht gi lm bi! H thng s t ng np bi ca anh/ch."),F.current(C.current))},[T]);const te=(fe,he)=>{E(k=>({...k,[fe]:he}))};return d.jsxs("div",{className:"w-full max-w-7xl mx-auto font-sans text-black shadow-lg animate-slide-in-right rounded-md",children:[d.jsx("div",{className:"h-3 bg-yellow-700 rounded-t-md border-b-2 border-yellow-900"}),d.jsxs("div",{className:"bg-white p-4",children:[d.jsxs("div",{className:"flex justify-between items-start pb-4 border-b border-gray-300",children:[d.jsxs("div",{className:"flex gap-4 items-center",children:[d.jsx("img",{src:"https://i.postimg.cc/8PDn1wfM/favicon.png",alt:"Avatar",className:"w-20 h-[100px] border border-gray-300 object-contain p-1"}),d.jsxs("div",{className:"text-sm",children:[d.jsx("p",{children:"S bo danh:"}),d.jsx("p",{children:"Ngy sinh:"}),d.jsxs("p",{className:"mt-2",children:["H tn: ",d.jsx("span",{className:"font-bold text-blue-700",children:s||"Hc vin"})]}),d.jsxs("p",{children:["Hng bng: ",d.jsx("span",{className:"font-bold text-blue-700",children:(a==null?void 0:a.name)||"Thuyn trng hng ba - T3"})]})]})]}),d.jsxs("div",{className:"flex items-start gap-4",children:[d.jsxs("div",{className:"bg-[#f0ad4e] text-black p-2 rounded-md text-sm w-48",children:[d.jsx("p",{className:"font-bold",children:"ang thi"}),d.jsx("p",{children:"Thi gian: 45 pht"}),d.jsx("p",{children:"B gi: 0 pht"}),d.jsxs("p",{children:["Cn li: ",d.jsx("span",{className:"font-bold",children:qD(T)})]})]}),d.jsx("button",{onClick:M,className:"text-sm text-gray-600 hover:text-red-500 font-semibold",children:"Thot"})]})]}),d.jsxs("div",{className:"flex mt-4 gap-4",children:[d.jsxs("div",{className:"flex-1 border border-gray-400 rounded-md p-4 flex flex-col justify-between min-h-[500px]",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-bold mb-4 border-b border-dashed border-gray-400 pb-2",children:"Ni dung cu hi"}),d.jsxs("p",{className:"font-bold text-red-600 mb-2",children:["Cu :",y+1]}),d.jsx("p",{className:"mb-4 font-semibold",children:P.text}),P.image&&d.jsx("div",{className:"mb-4 flex justify-start",children:d.jsx("img",{src:P.image,alt:"Hnh nh cu hi",className:"max-w-full h-auto max-h-60 object-contain border border-gray-300 rounded-md"})}),d.jsx("div",{className:"space-y-4",children:P.answers.map((fe,he)=>d.jsxs("div",{className:"flex items-start",children:[d.jsxs("span",{className:"font-bold mr-2 text-gray-700 min-w-[20px]",children:[String.fromCharCode(65+he),"."]}),d.jsx("p",{children:fe.text})]},fe.id))})]}),d.jsxs("div",{className:"flex justify-center gap-4 mt-8",children:[d.jsxs("button",{onClick:()=>v(fe=>Math.max(0,fe-1)),disabled:y===0,className:"bg-[#f0ad4e] text-black px-4 py-2 rounded-md border border-gray-400 flex items-center font-semibold hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-5 h-5",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),"Tr li"]}),y<n.questions.length-1&&d.jsxs("button",{onClick:()=>v(fe=>Math.min(n.questions.length-1,fe+1)),className:"bg-[#f0ad4e] text-black px-4 py-2 rounded-md border border-gray-400 flex items-center font-semibold hover:bg-yellow-500 transition-colors",children:["Tip tc",d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-5 h-5",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})]})]})]}),d.jsxs("div",{className:"w-[200px] flex-none flex flex-col",children:[d.jsx("div",{className:"border border-gray-300 rounded-md",children:d.jsxs("table",{className:"w-full border-collapse text-xs",children:[d.jsx("thead",{className:"sticky top-0 bg-[#f0ad4e] z-10",children:d.jsxs("tr",{children:[d.jsx("th",{className:"border border-gray-400 p-2",children:"Cu"}),d.jsx("th",{className:"border border-gray-400 p-2",children:"a"}),d.jsx("th",{className:"border border-gray-400 p-2",children:"b"}),d.jsx("th",{className:"border border-gray-400 p-2",children:"c"}),d.jsx("th",{className:"border border-gray-400 p-2",children:"d"})]})}),d.jsx("tbody",{children:n.questions.map((fe,he)=>d.jsxs("tr",{className:y===he?"bg-cyan-200":"hover:bg-gray-50",children:[d.jsxs("td",{className:`border border-gray-400 p-2 font-bold text-center cursor-pointer whitespace-nowrap ${y===he?"text-black":"text-gray-500"}`,onClick:()=>v(he),children:["Cu ",he+1]}),fe.answers.slice(0,4).map(k=>d.jsx("td",{className:"border border-gray-400 p-2 text-center",children:d.jsx(HD,{checked:_[fe.id]===k.id,onChange:()=>te(fe.id,k.id)})},k.id))]},fe.id))})]})}),d.jsx("div",{className:"text-center mt-4 pt-2 border-t border-gray-200",children:d.jsx("button",{onClick:H,className:"bg-[#337ab7] text-white px-8 py-2 rounded-md font-semibold hover:bg-blue-700 transition-colors w-full",children:"Np bi"})})]})]}),d.jsxs("div",{className:"mt-4 bg-[#005a9c] text-white p-4 rounded-b-md flex items-center gap-4 text-xs",children:[d.jsx("img",{src:"https://i.postimg.cc/8PDn1wfM/favicon.png",alt:"Logo",className:"h-16 w-16 object-contain"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-bold",children:"CNG TY C PHN T VN V GIO DC NINH BNH"}),d.jsx("p",{children:"a ch: ng Triu Vit Vng, phng Hoa L, tnh Ninh Bnh "})]})]})]})]})},FD=({quiz:n,userAnswers:e,score:t,onRetry:s,onBack:a,userName:l})=>{const[c,f]=G.useState("all"),[g]=G.useState(()=>new Date),y=n.questions.length,v=t>=25,_=G.useMemo(()=>new Intl.DateTimeFormat("vi-VN",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit",year:"numeric"}).format(g),[g]),E=G.useMemo(()=>c==="incorrect"?n.questions.filter(T=>e[T.id]!==T.correctAnswerId):n.questions,[c,n.questions,e]);return d.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right font-quiz-default",children:[d.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8 text-center mb-8",children:[d.jsx(dE,{className:"h-24 w-24 mx-auto text-yellow-400 mb-4"}),d.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Kt qu Thi th"}),d.jsxs("div",{className:"my-4 text-muted-foreground",children:[d.jsxs("p",{className:"text-lg",children:["Th sinh: ",d.jsx("span",{className:"font-bold text-primary",children:l})]}),d.jsxs("p",{className:"text-sm",children:["Hon thnh lc: ",_]})]}),d.jsx("p",{className:`text-2xl font-bold mb-6 ${v?"text-success":"text-destructive"}`,children:v?"Chc mng, anh/ch  T!":"Rt tic, anh/ch KHNG T."}),d.jsxs("div",{className:`inline-block p-6 rounded-xl border ${v?"bg-success/10 border-success/20":"bg-destructive/10 border-destructive/20"}`,children:[d.jsxs("p",{className:`text-5xl font-extrabold ${v?"text-success":"text-destructive"}`,children:[t," / ",y]}),d.jsx("p",{className:"text-lg text-muted-foreground mt-1",children:"S cu ng"})]})]}),d.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Xem li bi lm"}),d.jsxs("div",{className:"flex items-center gap-2 mt-4 sm:mt-0",children:[d.jsx("button",{onClick:()=>f("all"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${c==="all"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:"Tt c"}),d.jsxs("button",{onClick:()=>f("incorrect"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${c==="incorrect"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:["Ch cu sai (",n.questions.length-t,")"]})]})]}),d.jsx("div",{className:"space-y-6 max-h-[50vh] overflow-y-auto pr-2",children:E.length>0?E.map((T,N)=>{const P=e[T.id],C=T.correctAnswerId;return d.jsxs("div",{className:"p-4 border-b border-border last:border-b-0",children:[d.jsxs("p",{className:"font-semibold text-lg mb-3 text-foreground",children:[d.jsxs("span",{className:"mr-2",children:["Cu ",n.questions.findIndex(M=>M.id===T.id)+1,":"]}),T.text]}),d.jsx("div",{className:"space-y-2",children:T.answers.map(M=>{const H=M.id===P,F=M.id===C;let te="flex items-center p-3 rounded-md text-sm ";return F?te+="bg-success/10 text-success":H?te+="bg-destructive/10 text-destructive":te+="bg-muted/50 text-muted-foreground",d.jsxs("div",{className:te,children:[F?d.jsx(Ry,{className:"h-5 w-5 mr-3 text-success"}):H?d.jsx(Iy,{className:"h-5 w-5 mr-3 text-destructive"}):d.jsx("div",{className:"w-5 h-5 mr-3"}),d.jsx("span",{children:M.text})]},M.id)})})]},T.id)}):d.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Tuyt vi! Anh/ch  tr li ng tt c cc cu hi."})})]}),d.jsxs("div",{className:"text-center mt-8 flex flex-col sm:flex-row justify-center items-center gap-4",children:[d.jsx("button",{onClick:a,className:"w-full sm:w-auto bg-primary text-primary-foreground font-bold py-3 px-8 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105",children:"Quay li"}),d.jsx("button",{onClick:s,className:"w-full sm:w-auto bg-secondary text-secondary-foreground font-bold py-3 px-8 rounded-lg hover:bg-muted focus:outline-none focus:ring-4 focus:ring-ring transition-colors duration-300",children:"Lm li bi thi"})]})]})},GD=({quiz:n,userAnswers:e,score:t,onRetry:s,onBack:a,userName:l})=>{const[c,f]=G.useState("all"),[g]=G.useState(()=>new Date),y=n.questions.length,v=y>0?Math.round(t/y*100):0,_=G.useMemo(()=>new Intl.DateTimeFormat("vi-VN",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit",year:"numeric"}).format(g),[g]),E=G.useMemo(()=>c==="incorrect"?n.questions.filter(T=>e[T.id]!==T.correctAnswerId):n.questions,[c,n.questions,e]);return d.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right font-quiz-default",children:[d.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8 text-center mb-8",children:[d.jsx(dE,{className:"h-24 w-24 mx-auto text-yellow-400 mb-4"}),d.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Kt qu n tp"}),d.jsxs("div",{className:"my-4 text-muted-foreground",children:[d.jsxs("p",{className:"text-lg",children:["Hc vin: ",d.jsx("span",{className:"font-bold text-primary",children:l})]}),d.jsxs("p",{className:"text-sm",children:["Hon thnh lc: ",_]})]}),d.jsxs("div",{className:"bg-primary/10 inline-block p-6 rounded-xl border border-primary/20 mt-4",children:[d.jsxs("p",{className:"text-5xl font-extrabold text-primary",children:[t," / ",y]}),d.jsxs("p",{className:"text-2xl font-semibold text-primary/80 mt-1",children:["(",v,"%)"]})]})]}),d.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Xem li bi lm"}),d.jsxs("div",{className:"flex items-center gap-2 mt-4 sm:mt-0",children:[d.jsx("button",{onClick:()=>f("all"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${c==="all"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:"Tt c"}),d.jsxs("button",{onClick:()=>f("incorrect"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${c==="incorrect"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:["Ch cu sai (",n.questions.length-t,")"]})]})]}),d.jsx("div",{className:"space-y-6 max-h-[50vh] overflow-y-auto pr-2",children:E.length>0?E.map((T,N)=>{const P=e[T.id],C=T.correctAnswerId;return d.jsxs("div",{className:"p-4 border-b border-border last:border-b-0",children:[d.jsxs("p",{className:"font-semibold text-lg mb-3 text-foreground",children:[d.jsxs("span",{className:"mr-2",children:["Cu ",n.questions.findIndex(M=>M.id===T.id)+1,":"]}),T.text]}),d.jsx("div",{className:"space-y-2",children:T.answers.map(M=>{const H=M.id===P,F=M.id===C;let te="flex items-center p-3 rounded-md text-sm ";return F?te+="bg-success/10 text-success":H?te+="bg-destructive/10 text-destructive":te+="bg-muted/50 text-muted-foreground",d.jsxs("div",{className:te,children:[F?d.jsx(Ry,{className:"h-5 w-5 mr-3 text-success"}):H?d.jsx(Iy,{className:"h-5 w-5 mr-3 text-destructive"}):d.jsx("div",{className:"w-5 h-5 mr-3"}),d.jsx("span",{children:M.text})]},M.id)})})]},T.id)}):d.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Tuyt vi! Anh/ch  tr li ng tt c cc cu hi."})})]}),d.jsxs("div",{className:"text-center mt-8 flex flex-col sm:flex-row justify-center items-center gap-4",children:[d.jsx("button",{onClick:a,className:"w-full sm:w-auto bg-primary text-primary-foreground font-bold py-3 px-8 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105",children:"Cc mn khc"}),d.jsx("button",{onClick:s,className:"w-full sm:w-auto bg-secondary text-secondary-foreground font-bold py-3 px-8 rounded-lg hover:bg-muted focus:outline-none focus:ring-4 focus:ring-ring transition-colors duration-300",children:"Lm li"})]})]})},KD="_card_ns310_3",QD="_header_ns310_45",YD="_logoPlaceholder_ns310_69",WD="_schoolName_ns310_97",XD="_body_ns310_113",JD="_cardTitle_ns310_135",ZD="_contentRow_ns310_157",e9="_photoSection_ns310_169",t9="_photoWrapper_ns310_179",n9="_avatar_ns310_195",s9="_infoSection_ns310_209",r9="_infoRow_ns310_229",i9="_label_ns310_239",a9="_value_ns310_255",o9="_valueHighlight_ns310_265",l9="_footer_ns310_281",c9="_barcode_ns310_299",yt={card:KD,header:QD,logoPlaceholder:YD,schoolName:WD,body:XD,cardTitle:JD,contentRow:ZD,photoSection:e9,photoWrapper:t9,avatar:n9,infoSection:s9,infoRow:r9,label:i9,value:a9,valueHighlight:o9,footer:l9,barcode:c9},u9=({user:n})=>{const e=n.role!=="hoc_vien",t=e?"TH GIO VIN":"TH HC VIN",s=e?{background:"linear-gradient(135deg, #b91c1c 0%, #c2410c 100%)",borderBottom:"4px solid #fcd34d"}:{},a=e?{color:"#b91c1c",textShadow:"0px 1px 2px rgba(0,0,0,0.1)"}:{};return d.jsxs("div",{className:yt.card,style:e?{borderColor:"#fcd34d",boxShadow:"0 10px 25px -5px rgba(234, 88, 12, 0.3)"}:{},children:[d.jsxs("div",{className:yt.header,style:s,children:[d.jsx("div",{className:yt.logoPlaceholder,style:e?{color:"#fbbf24",background:"rgba(255,255,255,0.2)"}:{},children:d.jsx(FO,{size:20})}),d.jsxs("div",{className:yt.schoolName,style:e?{color:"#fff",fontWeight:"800"}:{},children:["Cng ty C phn",d.jsx("br",{}),"T VN V GIO DC NINH BNH"]})]}),d.jsxs("div",{className:yt.body,children:[d.jsx("h2",{className:yt.cardTitle,style:a,children:t}),d.jsxs("div",{className:yt.contentRow,children:[d.jsx("div",{className:yt.photoSection,children:d.jsx("div",{className:yt.photoWrapper,style:e?{borderColor:"#fcd34d"}:{},children:d.jsx("img",{src:n.photoURL||"https://via.placeholder.com/150",alt:"Avatar",className:yt.avatar})})}),d.jsxs("div",{className:yt.infoSection,children:[d.jsxs("div",{className:yt.infoRow,children:[d.jsx("span",{className:yt.label,children:"H tn:"}),d.jsx("span",{className:`${yt.value} ${yt.valueHighlight}`,style:e?{color:"#b91c1c"}:{},children:n.full_name||"---"})]}),d.jsxs("div",{className:yt.infoRow,children:[d.jsx("span",{className:yt.label,children:"Ngy sinh: "}),d.jsxs("span",{className:yt.value,children:[" ",n.birthDate||" --/--/----"]})]}),e?d.jsxs("div",{className:yt.infoRow,children:[d.jsx("span",{className:yt.label,children:"Phng: "}),d.jsx("span",{className:yt.value,style:{fontWeight:"bold"},children:" Phng o to - T vn hnh my tu thy"})]}):d.jsxs("div",{className:yt.infoRow,children:[d.jsx("span",{className:yt.label,children:"Lp hc: "}),d.jsx("span",{className:yt.value,children:n.courseName||"Cha vo kha"})]}),d.jsxs("div",{className:yt.infoRow,children:[d.jsx("span",{className:yt.label,children:"a ch:"}),d.jsx("span",{className:yt.value,style:{fontSize:"0.9rem"},children:n.address||"---"})]})]})]})]}),d.jsxs("div",{className:yt.footer,style:e?{background:"#fef2f2",borderTop:"1px dashed #fca5a5"}:{},children:[d.jsx("div",{className:yt.barcode,style:e?{opacity:.8}:{}}),d.jsxs("div",{style:{position:"absolute",bottom:"5px",fontSize:"0.6rem",color:e?"#991b1b":"#718096"},children:["ID: ",n.id?n.id.substring(0,10).toUpperCase():"---"]})]})]})},d9=({isOpen:n,onClose:e,notifications:t,userId:s,onMarkRead:a})=>{if(!n)return null;const l=async(c,f)=>{c.stopPropagation(),confirm("Bn c mun xa thng bo ny?")&&await AO(f.id,s)};return d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 animate-fade-in",onClick:e,children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[80vh]",onClick:c=>c.stopPropagation(),children:[d.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-slate-700 flex justify-between items-center bg-gradient-to-r from-blue-500 to-indigo-600 text-white",children:[d.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[d.jsx(dd,{})," Hp th thng bo"]}),d.jsx("button",{onClick:e,className:"hover:bg-white/20 p-2 rounded-full transition-colors",children:d.jsx(sc,{})})]}),d.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50 dark:bg-slate-900/50",children:t.length===0?d.jsxs("div",{className:"text-center py-10 text-gray-400",children:[d.jsx(qO,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),d.jsx("p",{children:"Cha c thng bo no."})]}):t.map(c=>{var g,y;const f=((g=c.readBy)==null?void 0:g.includes(s))||c.read;return d.jsxs("div",{onClick:()=>a(c.id),className:`p-4 rounded-xl border transition-all cursor-pointer relative overflow-hidden group
                                        ${f?"bg-white dark:bg-slate-800 border-gray-200 dark:border-slate-700 opacity-60":"bg-white dark:bg-slate-800 border-blue-200 dark:border-blue-500/50 shadow-md transform hover:-translate-y-1"}
                                    `,children:[!f&&d.jsx("div",{className:"absolute top-0 right-0 w-3 h-3 bg-red-500 rounded-full m-2 animate-pulse"}),d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("div",{className:`p-2 rounded-full flex-shrink-0 
                                            ${c.type==="special"?"bg-red-100 text-red-600 animate-pulse":c.type==="attention"?"bg-orange-100 text-orange-600":c.type==="system"?"bg-blue-100 text-blue-600":c.type==="class"?"bg-indigo-100 text-indigo-600":c.type==="reminder"?"bg-yellow-100 text-yellow-600":"bg-green-100 text-green-600"}
                                        `,children:d.jsx(dd,{size:14})}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("h3",{className:`font-bold text-sm mb-1 ${f?"text-gray-600 dark:text-gray-400":"text-gray-900 dark:text-white"}`,children:[c.title,(c.type==="special"||c.type==="attention")&&d.jsx("span",{className:"ml-2 text-[10px] uppercase border px-1 rounded bg-red-50 text-red-500 border-red-200",children:"Quan trng"})]}),d.jsx("p",{className:"text-xs text-gray-500 mb-2 line-clamp-3",children:c.message}),d.jsxs("div",{className:"flex justify-between items-center text-[10px] text-gray-400",children:[d.jsx("span",{children:c.senderName}),d.jsx("span",{children:(y=c.createdAt)!=null&&y.seconds?new Date(c.createdAt.seconds*1e3).toLocaleDateString("vi-VN"):"Va xong"})]})]}),d.jsx("button",{onClick:v=>l(v,c),className:"p-2 text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"Xa thng bo",children:d.jsx(Oo,{size:12})})]})]},c.id)})})]})})},h9=({notification:n,userId:e,onDismiss:t,onOpenInbox:s})=>{const[a,l]=G.useState(!1);return G.useEffect(()=>{if(n&&!n.readBy.includes(e)&&(l(!0),n.type!=="system")){const c=setTimeout(()=>l(!1),8e3);return()=>clearTimeout(c)}},[n,e]),!n||!a?null:d.jsx("div",{className:"fixed top-20 right-4 z-40 max-w-sm w-full animate-slide-in-right cursor-pointer",onClick:s,children:d.jsxs("div",{className:`rounded-xl shadow-2xl border-l-4 p-4 flex items-start gap-3 relative overflow-hidden backdrop-blur-md bg-white/90 dark:bg-slate-800/90
                ${n.type==="system"?"border-red-500":"border-blue-500"}
            `,children:[d.jsx("button",{onClick:c=>{c.stopPropagation(),l(!1),t()},className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600 p-1",children:d.jsx(sc,{size:12})}),d.jsx("div",{className:`p-2 rounded-full ${n.type==="system"?"bg-red-100 text-red-600":"bg-blue-100 text-blue-600"}`,children:d.jsx(dd,{})}),d.jsxs("div",{className:"flex-1 pr-6",children:[d.jsx("h4",{className:"font-bold text-sm text-gray-900 dark:text-white mb-1",children:n.title}),d.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 line-clamp-2",children:n.message}),d.jsx("p",{className:"text-[10px] text-gray-400 mt-2",children:"Nhn  xem chi tit"})]})]})})},f9=({userProfile:n,onStart:e,onHistoryClick:t,onClassClick:s})=>{const{theme:a}=Kn(),[l,c]=G.useState([]),[f,g]=G.useState(!1),[y,v]=G.useState(0),[_,E]=G.useState(null);G.useEffect(()=>{(async()=>{if(n!=null&&n.id){const P=await SO(n.id,n.class);c(P);const C=P.filter(M=>!M.read);v(C.length),C.length>0&&E(C[0])}})()},[n]);const T=N=>{c(P=>P.map(C=>C.id===N?{...C,read:!0,readBy:[...C.readBy||[],n.id]}:C)),v(P=>Math.max(0,P-1)),(_==null?void 0:_.id)===N&&E(null)};return d.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-slide-in-right",children:d.jsxs("div",{className:"w-full max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("div",{className:"w-full flex justify-end mb-4 md:mb-0 relative md:absolute md:top-4 md:right-4 gap-2",children:d.jsxs("button",{onClick:()=>g(!0),className:"bg-white/80 dark:bg-slate-800/80 p-3 rounded-full shadow-lg hover:scale-110 transition-transform relative",children:[d.jsx(dd,{className:"text-xl text-yellow-500"}),y>0&&d.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center animate-bounce",children:y})]})}),d.jsx(u9,{user:n})]}),d.jsx(d9,{isOpen:f,onClose:()=>g(!1),notifications:l,userId:n.id,onMarkRead:T}),d.jsx(h9,{notification:_,userId:n.id,onDismiss:()=>E(null),onOpenInbox:()=>g(!0)}),d.jsxs("div",{className:"bg-card/90 backdrop-blur-sm p-8 rounded-2xl shadow-xl border border-border",children:[d.jsxs("h1",{className:"text-3xl font-bold text-primary mb-6 text-center",children:["Xin cho, ",n.full_name||"Hc vin","!"]}),d.jsx("p",{className:"text-muted-foreground text-center mb-8",children:"Chc bn c mt bui n tp hiu qu v t kt qu cao."}),d.jsx("div",{className:"space-y-4",children:d.jsxs("button",{onClick:e,className:"w-full bg-primary text-primary-foreground font-bold text-lg py-4 px-6 rounded-xl hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-3 shadow-lg",children:[d.jsx(jy,{className:"w-8 h-8"}),d.jsx("span",{children:"Vo n Tp / Thi Th"})]})})]})]})})},cm=async n=>{try{const e=Gt(St(Ae,"exam_results"),pn("studentId","==",n));return(await En(e)).docs.map(a=>{const l=a.data(),c=l.submitted_at||l.completedAt,f=c?c.toDate():new Date;return{id:a.id,...l,userId:l.studentId,completedAt:f}}).sort((a,l)=>l.completedAt.getTime()-a.completedAt.getTime())}catch(e){return console.error("Error fetching exam history:",e),[]}},m9=({userProfile:n,onBack:e})=>{const[t,s]=G.useState([]),[a,l]=G.useState(!0),[c,f]=G.useState({});G.useEffect(()=>{(async()=>{const E=await cm(n.id);E.sort((N,P)=>P.completedAt.getTime()-N.completedAt.getTime()),s(E),l(!1);const T=Array.from(new Set(E.filter(N=>N.roomId).map(N=>N.roomId)));if(T.length>0){const N={};await Promise.all(T.map(async P=>{try{const{doc:C,getDoc:M}=await zn(async()=>{const{doc:te,getDoc:fe}=await Promise.resolve().then(()=>od);return{doc:te,getDoc:fe}},void 0),{db:H}=await zn(async()=>{const{db:te}=await Promise.resolve().then(()=>TO);return{db:te}},void 0),F=await M(C(H,"exam_rooms",P));F.exists()&&(N[P]=F.data())}catch(C){console.error(`Error fetching room ${P}`,C)}})),f(N)}})()},[n.id]);const g=_=>_.roomId?"Thi Trc Tuyn":_.quizId==="exam-quiz"||_.quizId==="thithu2"||_.type==="Thi th"?"Thi th":"n tp",y=_=>{switch(_){case"Thi Trc Tuyn":return"bg-red-100 text-red-800 border-red-200";case"Thi th":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}},v=_=>{if(_.roomId&&c[_.roomId]){const E=c[_.roomId];return`Phng thi ${E.name} / ${E.course_name||"T do"} / ${E.license_name||""}`}return _.quizTitle||(_.roomId?`Phng thi ${_.roomId}`:_.type)};return d.jsxs("div",{className:"w-full max-w-5xl mx-auto p-4 animate-slide-in-right",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("h1",{className:"text-2xl font-bold text-foreground flex items-center gap-2",children:[d.jsx(Wu,{className:"text-primary"}),"Lch s n tp & Thi"]}),d.jsx("button",{onClick:e,className:"bg-secondary text-secondary-foreground px-4 py-2 rounded-lg hover:bg-secondary/80 transition-colors shadow-sm",children:"Quay li"})]}),a?d.jsx("div",{className:"text-center p-8",children:d.jsx("p",{className:"text-muted-foreground",children:"ang ti d liu..."})}):t.length===0?d.jsx("div",{className:"text-center p-8 bg-card rounded-xl shadow-sm border border-border",children:d.jsx("p",{className:"text-muted-foreground",children:"Cha c lch s lm bi no."})}):d.jsx("div",{className:"bg-white dark:bg-card rounded-xl shadow-sm border border-border overflow-hidden",children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-left border-collapse",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"bg-muted/50 border-b border-border text-xs uppercase text-muted-foreground",children:[d.jsx("th",{className:"p-4 font-semibold",children:"Loi"}),d.jsx("th",{className:"p-4 font-semibold",children:"Bi thi"}),d.jsx("th",{className:"p-4 font-semibold text-center",children:"im s"}),d.jsx("th",{className:"p-4 font-semibold",children:"Gi np"})," ",d.jsx("th",{className:"p-4 font-semibold",children:"Ngy np"})]})}),d.jsx("tbody",{className:"divide-y divide-border",children:t.map(_=>{const E=g(_);return d.jsxs("tr",{className:"hover:bg-muted/30 transition-colors",children:[d.jsx("td",{className:"p-4 align-middle",children:d.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium border ${y(E)}`,children:E})}),d.jsx("td",{className:"p-4 align-middle font-medium text-foreground",children:v(_)}),d.jsxs("td",{className:"p-4 align-middle text-center",children:[d.jsx("span",{className:"font-bold text-primary",children:_.score}),d.jsxs("span",{className:"text-muted-foreground text-sm",children:[" / ",_.totalQuestions]})]}),d.jsx("td",{className:"p-4 align-middle text-sm",children:new Date(_.completedAt).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})}),d.jsx("td",{className:"p-4 align-middle text-sm text-muted-foreground",children:new Date(_.completedAt).toLocaleDateString("vi-VN")})]},_.id)})})]})})})]})},g9=n=>{if(!n)return"Thnh vin";const e=n.toLowerCase().trim();return{admin:"Qun tr vin",quan_ly:"Qun l",lanh_dao:"Lnh o",giao_vien:"Gio vin",hoc_vien:"Hc vin",phu_huynh:"Ph huynh"}[e]||n},p9=({userProfile:n,onBack:e})=>{const[t,s]=G.useState(null),[a,l]=G.useState([]),[c,f]=G.useState([]),[g,y]=G.useState(!0),[v,_]=G.useState("grid"),[E,T]=G.useState({}),[N,P]=G.useState("");return G.useEffect(()=>{let C,M,H;return(async()=>{if(!n.id)return;const te=dt(Ae,"users",n.id),fe=await La(te);if(!fe.exists()){y(!1);return}const k=fe.data().courseId;if(!k){y(!1);return}const R=dt(Ae,"courses",k);C=ic(R,I=>{if(I.exists()){const U={id:I.id,...I.data()};if(s(U),U.licenseId&&zn(async()=>{const{fetchLicenses:V}=await Promise.resolve().then(()=>G5);return{fetchLicenses:V}},void 0).then(({fetchLicenses:V})=>{V().then(q=>{const j=q.find(Be=>Be.id===U.licenseId);j&&P(j.name)})}),M&&M(),U.teacherIds&&U.teacherIds.length>0)try{const V=[...new Set(U.teacherIds.filter(q=>q&&q.trim()!==""))].slice(0,10);if(V.length>0){const q=Gt(St(Ae,"users"),pn(Vm(),"in",V));M=ic(q,j=>{l(j.docs.map(Be=>{const se=Be.data();return{uid:Be.id,...se,photoURL:se.photoURL||Va(se.role)}}))})}else l([])}catch(V){console.error("Error creating teacher query:",V),l([])}else l([]);if(H)y(!1);else{const V=Gt(St(Ae,"users"),pn("courseId","==",k),pn("role","==","hoc_vien"));H=ic(V,async q=>{const j=q.docs.map(se=>{const O=se.data();return{uid:se.id,...O,photoURL:O.photoURL||Va(O.role)}});f(j);const Be={};await Promise.all(j.map(async se=>{try{const O=await cm(se.uid);if(O&&O.length>0){const re=O[0];Be[se.uid]={type:re.quizTitle||re.type||"Bi thi",time:re.completedAt?re.completedAt.toLocaleString("vi-VN"):"--",score:`${re.score}/${re.totalQuestions} cu`}}else Be[se.uid]={type:"--",time:"--",score:"--"}}catch(O){console.error(`Error fetching history for ${se.uid}`,O),Be[se.uid]={type:"Li",time:"--",score:"--"}}})),T(Be),y(!1)})}}else s(null),y(!1)})})(),()=>{C&&C(),M&&M(),H&&H()}},[n.id]),g?d.jsx("div",{className:"flex justify-center items-center h-screen",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600"})}):t?d.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 animate-slide-in-right",children:[d.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[d.jsxs("div",{children:[d.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-sm text-gray-500 hover:text-blue-600 mb-2 transition-colors font-medium",children:[d.jsx(Yu,{})," Quay li Dashboard"]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-2 rounded-lg",children:d.jsx(jo,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-cyan-500",children:t.name}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-0.5",children:t.description||"Cha c m t"}),N&&d.jsxs("div",{className:"mt-2 inline-flex items-center gap-1.5 bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-xs font-bold border border-yellow-200",children:[d.jsx(nm,{}),d.jsxs("span",{children:["Chng ch: ",N]})]})]})]})]}),d.jsxs("div",{className:"flex gap-4",children:[d.jsxs("div",{className:"bg-white dark:bg-slate-800 px-4 py-2 rounded-xl shadow-sm border border-gray-100 dark:border-slate-700 flex items-center gap-3",children:[d.jsx("div",{className:"bg-green-100 p-2 rounded-full text-green-600",children:d.jsx(cc,{})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-gray-500",children:"Gio vin"}),d.jsx("p",{className:"font-bold text-lg",children:a.length})]})]}),d.jsxs("div",{className:"bg-white dark:bg-slate-800 px-4 py-2 rounded-xl shadow-sm border border-gray-100 dark:border-slate-700 flex items-center gap-3",children:[d.jsx("div",{className:"bg-blue-100 p-2 rounded-full text-blue-600",children:d.jsx(hd,{})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-gray-500",children:"Hc vin"}),d.jsx("p",{className:"font-bold text-lg",children:c.length})]})]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[d.jsx("div",{className:"lg:col-span-1 space-y-6",children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-slate-700 p-5 sticky top-20",children:[d.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2 text-gray-800 dark:text-white border-b pb-3 border-gray-100 dark:border-slate-700",children:[d.jsx(cc,{className:"text-green-500"})," i ng Gio vin"]}),d.jsxs("div",{className:"space-y-3",children:[a.map(C=>d.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 dark:hover:bg-slate-700/50 rounded-lg transition-colors group cursor-pointer",children:[d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:C.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(C.fullName)}&background=random`,alt:C.fullName,className:"w-10 h-10 rounded-full object-cover border border-gray-200 dark:border-slate-600 group-hover:scale-105 transition-transform"}),t.headTeacherId===C.uid&&d.jsx("div",{className:"absolute -top-1 -right-1 bg-yellow-400 text-white rounded-full p-0.5 border-2 border-white",children:d.jsx(nm,{size:10})})]}),d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-gray-100 truncate",children:C.fullName}),d.jsx("p",{className:"text-[11px] text-gray-400",children:g9(C.role)}),t.headTeacherId===C.uid&&d.jsx("span",{className:"inline-flex items-center text-[10px] font-bold text-yellow-600",children:" GV Ch Nhim"})]})]},C.uid)),a.length===0&&d.jsx("p",{className:"text-sm text-gray-500 italic text-center py-4",children:"Cha c thng tin gio vin."})]})]})}),d.jsx("div",{className:"lg:col-span-3",children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-slate-700 p-6 min-h-[500px]",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[d.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-700 rounded-lg p-1",children:[d.jsx("button",{onClick:()=>_("grid"),className:`p-1.5 rounded ${v==="grid"?"bg-white dark:bg-slate-600 shadow text-blue-600":"text-gray-500 hover:text-blue-500"}`,title:"Dng li",children:d.jsx(e4,{})}),d.jsx("button",{onClick:()=>_("list"),className:`p-1.5 rounded ${v==="list"?"bg-white dark:bg-slate-600 shadow text-blue-600":"text-gray-500 hover:text-blue-500"}`,title:"Dng danh sch",children:d.jsx(ZS,{})})]}),d.jsxs("span",{className:"text-sm px-2 py-0.5 bg-blue-100 text-blue-700 rounded-full font-medium",children:[c.length," thnh vin"]})]}),c.length===0?d.jsxs("div",{className:"text-center py-20 flex flex-col items-center",children:[d.jsx("div",{className:"bg-gray-100 dark:bg-slate-700 p-6 rounded-full mb-4",children:d.jsx(hd,{className:"text-gray-300 w-12 h-12"})}),d.jsx("p",{className:"text-gray-500 font-medium",children:"Lp cha c hc vin no khc."})]}):v==="grid"?d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-5",children:c.map(C=>d.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/30 rounded-xl p-4 border border-gray-100 dark:border-slate-700 hover:shadow-md hover:border-blue-200 dark:hover:border-blue-500/30 transition-all duration-300 group relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-bl from-blue-100 to-transparent -mr-8 -mt-8 rounded-full opacity-50 group-hover:scale-150 transition-transform"}),d.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:C.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(C.fullName)}&background=random`,alt:C.fullName,className:"w-14 h-14 rounded-full object-cover border-2 border-white dark:border-slate-600 shadow-sm group-hover:border-blue-500 transition-colors"}),d.jsx("div",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 bg-green-500 border-2 border-white rounded-full"})]}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h4",{className:"font-bold text-gray-900 dark:text-gray-100 truncate group-hover:text-blue-600 transition-colors text-base",children:C.fullName}),d.jsxs("div",{className:"space-y-1.5 mt-2",children:[d.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1.5 bg-white dark:bg-slate-800 px-2 py-1 rounded border border-gray-100 dark:border-slate-600 w-fit",children:[d.jsx("span",{children:""})," ",C.birthDate||"--/--"]}),d.jsxs("p",{className:"text-xs text-gray-500 truncate flex items-center gap-1.5",title:C.address,children:[d.jsx("span",{children:""})," ",C.address||"Cha cp nht"]})]}),C.uid===n.id&&d.jsx("div",{className:"mt-2",children:d.jsx("span",{className:"text-[10px] font-bold text-teal-600 bg-teal-50 border border-teal-100 px-2 py-0.5 rounded-full",children:"L ti"})})]})]})]},C.uid))}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-sm text-left",children:[d.jsx("thead",{className:"text-xs text-gray-500 uppercase bg-gray-50 dark:bg-slate-700 dark:text-gray-300",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 rounded-l-lg",children:"Hc vin"}),d.jsx("th",{className:"px-4 py-3",children:"Ngy sinh"}),d.jsx("th",{className:"px-4 py-3",children:"Bi lm gn nht"}),d.jsx("th",{className:"px-4 py-3",children:"Thi gian"}),d.jsx("th",{className:"px-4 py-3 rounded-r-lg",children:"im"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-700",children:c.map(C=>{const M=E[C.uid]||{type:"--",time:"--",score:"--"};return d.jsxs("tr",{className:"bg-white dark:bg-slate-800 hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors",children:[d.jsxs("td",{className:"px-4 py-3 font-medium text-gray-900 dark:text-white flex items-center gap-3",children:[d.jsx("img",{src:C.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(C.fullName)}`,className:"w-8 h-8 rounded-full border border-gray-200"}),d.jsxs("div",{children:[d.jsx("p",{children:C.fullName}),C.uid===n.id&&d.jsx("span",{className:"text-[10px] font-bold text-teal-600 border border-teal-100 bg-teal-50 px-1 rounded",children:"Ti"})]})]}),d.jsx("td",{className:"px-4 py-3 text-gray-500",children:C.birthDate||"--"}),d.jsx("td",{className:"px-4 py-3",children:d.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold
                                                        ${M.type.includes("n")?"bg-blue-100 text-blue-700":M.type.includes("Th")?"bg-purple-100 text-purple-700":M.type==="--"?"bg-gray-100 text-gray-500":"bg-red-100 text-red-700"}`,children:M.type})}),d.jsx("td",{className:"px-4 py-3 text-gray-500",children:M.time}),d.jsx("td",{className:"px-4 py-3 font-bold text-teal-600",children:M.score})]},C.uid)})})]})})]})})]})]}):d.jsxs("div",{className:"w-full max-w-5xl mx-auto p-4 animate-slide-in-right",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3 bg-clip-text text-transparent bg-gradient-to-r from-teal-600 to-emerald-600",children:[d.jsx(jo,{className:"text-teal-600"})," Lp Ca Ti"]}),d.jsx("button",{onClick:e,className:"bg-gray-200 dark:bg-slate-700 text-gray-800 dark:text-gray-200 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-slate-600 transition-colors",children:"Quay li"})]}),d.jsx("div",{className:"text-center p-12 bg-white dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 shadow-sm",children:d.jsx("p",{className:"text-gray-500",children:"Bn cha c phn lp."})})]})},y9=n=>{switch(n){case"admin":return"Qun tr vin";case"lanh_dao":return"Lnh o";case"quan_ly":return"Qun l";case"giao_vien":return"Gio vin";case"hoc_vien":return"Hc vin";default:return n}},R0=n=>n==="admin"?10:n==="lanh_dao"?5:n==="quan_ly"?2:n==="giao_vien"?1:0,zr=n=>(n||"").toLowerCase(),v9=({userProfile:n,onBack:e})=>{var Mt,Li;const[t,s]=G.useState([]),[a,l]=G.useState(null),[c,f]=G.useState(!0),[g,y]=G.useState({}),[v,_]=G.useState(!0),[E,T]=G.useState([]),[N,P]=G.useState([]),[C,M]=G.useState([]),[H,F]=G.useState([]),[te,fe]=G.useState({}),[he,k]=G.useState(!1),[R,I]=G.useState(!1),[U,V]=G.useState(""),[q,j]=G.useState(""),[Be,se]=G.useState(!1),[O,re]=G.useState(!1),[ve,Re]=G.useState(!1),[Ge,B]=G.useState(null),[ie,X]=G.useState([]),[le,me]=G.useState(!1),[Te,je]=G.useState({}),[Ke,it]=G.useState(!1),[Me,vt]=G.useState(null),[Dn,fs]=G.useState(!1),[nt,Pn]=G.useState(!1),[Zs,Tr]=G.useState(!1),[Ii,Pt]=G.useState(""),[zt,er]=G.useState(""),[Fa,Zo]=G.useState(!1),[An,Ls]=G.useState(!1),[tr,Ga]=G.useState(null),[nr,el]=G.useState(""),[Ka,Qa]=G.useState(""),[sr,ms]=G.useState("system"),[Kt,ts]=G.useState(""),[It,Ya]=G.useState(!1),[Sr,Wa]=G.useState("list"),[Mn,ei]=G.useState([]),[qt,ns]=G.useState(!1),[vn,gs]=G.useState(null),[ji,Xa]=G.useState(""),[Qn,Ar]=G.useState(""),[Nr,Cr]=G.useState(""),[Oi,Di]=G.useState(""),kr=R0(n.role)>=2,ps=["admin","quan_ly","lanh_dao","giao_vien"].includes(n.role),tl=R0(n.role)>=2,ys=R0(n.role)>=2,vs=D=>D.roomId?"Thi Trc Tuyn":D.quizId==="exam-quiz"||D.quizId==="thithu2"||D.type==="Thi th"||D.quizTitle&&D.quizTitle.includes("Thi th")?"Thi th":"n tp",Ht=D=>{switch(D){case"Thi Trc Tuyn":return"bg-red-100 text-red-800 border-red-200";case"Thi th":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}},nn=D=>{if(D.roomId&&Te[D.roomId]){const de=Te[D.roomId];return`Phng thi ${de.name} / ${de.course_name||"T do"} / ${de.license_name||""}`}return D.quizTitle||(D.roomId?`Phng thi ${D.roomId}`:D.type)};G.useEffect(()=>{(async()=>{try{const de=Gt(St(Ae,"courses")),He=(await En(de)).docs.map(jt=>({id:jt.id,...jt.data()}));s(He);const $e=new Set(He.map(jt=>jt.headTeacherId).filter(Boolean)),fn={};for(const jt of Array.from($e))if(jt)try{const Lt=await La(dt(Ae,"users",jt));Lt.exists()&&(fn[jt]=Lt.data().fullName)}catch{}y(fn)}catch(de){console.error(de)}finally{f(!1)}})(),zn(async()=>{const{fetchLicenses:de}=await Promise.resolve().then(()=>G5);return{fetchLicenses:de}},void 0).then(({fetchLicenses:de})=>{de().then(ei).catch(console.error)})},[n]),G.useEffect(()=>{if(!a)return;let D,de;if(a.teacherIds&&a.teacherIds.length>0)try{const He=[...new Set(a.teacherIds.filter($e=>$e&&$e.trim()!==""))].slice(0,10);if(He.length>0){const $e=Gt(St(Ae,"users"),pn(Vm(),"in",He));D=ic($e,fn=>{P(fn.docs.map(jt=>{const Lt=jt.data();return{uid:jt.id,...Lt,photoURL:Lt.photoURL||Va(Lt.role)}}))})}else P([])}catch(He){console.error("Teacher fetch error:",He),P([])}else P([]);const Se=Gt(St(Ae,"users"),pn("courseId","==",a.id));return de=ic(Se,async He=>{const $e=He.docs.map(jt=>{const Lt=jt.data();return{uid:jt.id,...Lt,photoURL:Lt.photoURL||Va(Lt.role)}});T($e);const fn={};await Promise.all($e.map(async jt=>{try{const Lt=await cm(jt.uid);if(Lt&&Lt.length>0){const Qt=Lt[0];fn[jt.uid]={type:Qt.quizTitle||Qt.type||"Bi thi",time:Qt.completedAt?Qt.completedAt.toLocaleString("vi-VN"):"--",score:`${Qt.score}/${Qt.totalQuestions} cu`,rawDate:Qt.completedAt}}else fn[jt.uid]={type:"--",time:"--",score:"--"}}catch{fn[jt.uid]={type:"Li",time:"--",score:"--"}}})),fe(fn)}),()=>{D&&D(),de&&de()}},[a]),G.useEffect(()=>{he&&(async()=>{const de=Gt(St(Ae,"users"),pn("role","in",["hoc_vien"])),He=(await En(de)).docs.map($e=>({uid:$e.id,...$e.data()}));M(He.filter($e=>$e.courseId!==(a==null?void 0:a.id)||!$e.courseId))})()},[he,a]),G.useEffect(()=>{R&&(async()=>{const de=Gt(St(Ae,"users"),pn("role","in",["giao_vien","admin","quan_ly","lanh_dao"])),He=(await En(de)).docs.map($e=>({uid:$e.id,...$e.data()}));F(He.filter($e=>!((a==null?void 0:a.teacherIds)||[]).includes($e.uid)))})()},[R,a]),G.useEffect(()=>{ve&&Ge&&(me(!0),(async()=>{const de=await cm(Ge.uid);de.sort((He,$e)=>$e.completedAt.getTime()-He.completedAt.getTime()),X(de);const Se=Array.from(new Set(de.filter(He=>He.roomId).map(He=>He.roomId)));if(Se.length>0){const He={};await Promise.all(Se.map(async $e=>{try{const fn=await La(dt(Ae,"exam_rooms",$e));fn.exists()&&(He[$e]=fn.data())}catch{}})),je(He)}me(!1)})())},[ve,Ge]);const Vs=async D=>{D.preventDefault();try{await ad(St(Ae,"courses"),{name:Ii,description:zt,teacherIds:[],createdAt:Ad(),createdBy:n.id,licenseId:Oi}),Tr(!1),Pt(""),er(""),Di(""),window.location.reload()}catch(de){console.error(de)}},Pi=async D=>{if(D.preventDefault(),!!vn)try{if(await Cs(dt(Ae,"courses",vn.id),{name:ji,description:Qn,licenseId:Nr}),vn.licenseId!==Nr){const de=Gt(St(Ae,"users"),pn("courseId","==",vn.id)),He=(await En(de)).docs.map($e=>Cs(dt(Ae,"users",$e.id),{defaultLicenseId:Nr||null}));await Promise.all(He)}alert("Cp nht lp hc thnh cng!"),s(de=>de.map(Se=>Se.id===vn.id?{...Se,name:ji,description:Qn,licenseId:Nr}:Se)),(a==null?void 0:a.id)===vn.id&&l(de=>de?{...de,name:ji,description:Qn,licenseId:Nr}:null),ns(!1)}catch(de){console.error(de),alert("Li khi cp nht lp.")}},zc=async D=>{if(confirm("Bn c chc chn mun xa lp ny? Hnh ng ny khng th hon tc!"))try{await zn(async()=>{const{deleteDoc:de}=await Promise.resolve().then(()=>od);return{deleteDoc:de}},void 0).then(({deleteDoc:de})=>de(dt(Ae,"courses",D))),s(de=>de.filter(Se=>Se.id!==D)),alert(" xa lp hc!"),(a==null?void 0:a.id)===D&&l(null)}catch(de){console.error(de),alert("Li khi xa lp.")}},nl=(D,de)=>{de.stopPropagation(),gs(D),Xa(D.name),Ar(D.description||""),Cr(D.licenseId||""),ns(!0)},sl=async D=>{if(!a)return;const de=C.find(Se=>Se.uid===D);if(de&&de.courseId){alert(`Hc vin ny ang hc lp ${de.courseName||de.courseId}. Vui lng xa khi lp c trc khi thm vo lp mi.`);return}se(!0);try{await Cs(dt(Ae,"users",D),{courseId:a.id,courseName:a.name,defaultLicenseId:a.licenseId||null}),M(Se=>Se.filter(He=>He.uid!==D)),alert(` thm hc vin vo lp ${a.name}`)}catch(Se){console.error(Se),alert("Li khi thm hc vin.")}finally{se(!1)}},Us=async D=>{if(a){re(!0);try{const de=dt(Ae,"courses",a.id);await Cs(de,{teacherIds:oS(D),...Fa?{headTeacherId:D}:{}}),F(Se=>Se.filter(He=>He.uid!==D)),Fa&&l(Se=>Se?{...Se,headTeacherId:D}:null),l(Se=>Se?{...Se,teacherIds:[...Se.teacherIds||[],D]}:null)}catch(de){console.error(de)}finally{re(!1)}}},Mi=async D=>{if(a&&confirm("Bn c chc chn xo gio vin ny khi lp?"))try{const de=dt(Ae,"courses",a.id);await Cs(de,{teacherIds:lS(D),...a.headTeacherId===D?{headTeacherId:null}:{}}),l(Se=>Se?{...Se,teacherIds:(Se.teacherIds||[]).filter(He=>He!==D),headTeacherId:Se.headTeacherId===D?void 0:Se.headTeacherId}:null)}catch(de){console.error("Error removing teacher:",de)}},bs=async D=>{if(confirm("Bn c chc chn mun xa hc vin ny khi lp?"))try{await Cs(dt(Ae,"users",D),{courseId:null,courseName:null})}catch(de){console.error(de)}},Ln=(D,de,Se)=>{Ga({type:D,id:de,name:Se}),el(""),Qa(""),Ls(!0)},Yn=async D=>{if(D.preventDefault(),!(!tr||!n.id)){Ya(!0);try{const de=Kt?new Date(Kt):null,Se=sr==="special"||sr==="attention",He=Se?"all":tr.type,$e=Se?null:tr.id;await QS(nr,Ka,sr,He,$e,n.id,n.full_name,de),alert("Gi thng bo thnh cng!"),Ls(!1)}catch(de){console.error(de),alert("Li khi gi thng bo. C th thiu Index Firestore.")}finally{Ya(!1)}}},Bs=async()=>{if(Me){fs(!0);try{const D=de=>de===void 0?null:de;await Cs(dt(Ae,"users",Me.uid),{fullName:D(Me.fullName),birthDate:D(Me.birthDate),email:D(Me.email),phoneNumber:D(Me.phoneNumber),address:D(Me.address),cccd:D(Me.cccd),cccdDate:D(Me.cccdDate),cccdPlace:D(Me.cccdPlace),class:D(Me.class),courseCode:D(Me.courseCode),role:D(Me.role)}),alert(" cp nht thng tin hc vin!"),it(!1),Pn(!1)}catch(D){console.error("Error updating user:",D),alert("Li khi cp nht thng tin.")}finally{fs(!1)}}};return a?d.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 animate-slide-in-right relative",children:[d.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 rounded-2xl p-6 mb-8 text-white shadow-lg relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20",children:d.jsx(jo,{className:"w-32 h-32 transform rotate-12"})}),d.jsxs("div",{className:"relative z-10",children:[d.jsxs("button",{onClick:e,className:"absolute top-0 left-0 bg-white/20 hover:bg-white/30 text-white px-3 py-1 rounded text-sm transition flex items-center gap-1 backdrop-blur-sm",children:[d.jsx(Yu,{})," Quay li Dashboard"]}),d.jsxs("div",{className:"mt-8",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[d.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-md",children:d.jsx(ly,{className:"w-8 h-8"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold",children:a.name}),d.jsx("p",{className:"opacity-90",children:a.description||"Cha c m t"})]})]}),a.licenseId&&d.jsxs("div",{className:"inline-flex items-center gap-2 bg-yellow-400 text-black px-3 py-1 rounded-full text-sm font-bold shadow-sm mt-2",children:[d.jsx(nm,{}),((Mt=Mn.find(D=>D.id===a.licenseId))==null?void 0:Mt.name)||a.licenseId]})]})]})]}),he&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:()=>k(!1),children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl p-6 h-[80vh] flex flex-col relative",onClick:D=>D.stopPropagation(),children:[d.jsx("button",{onClick:()=>k(!1),className:"absolute top-4 right-4 bg-gray-100 dark:bg-slate-700 p-2 rounded-full border border-gray-200 dark:border-slate-600",children:d.jsx(sc,{})}),d.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[d.jsxs("span",{className:"text-gray-800 dark:text-white",children:["Thm Hc Vin vo ",a.name]}),a.licenseId&&d.jsxs("span",{className:"text-xs px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full border border-yellow-200",children:["Hng: ",((Li=Mn.find(D=>D.id===a.licenseId))==null?void 0:Li.name)||a.licenseId]})]}),d.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[d.jsxs("div",{className:"relative flex-1",children:[d.jsx(cy,{className:"absolute left-3 top-3 text-gray-400"}),d.jsx("input",{className:"w-full pl-10 pr-4 py-2 border rounded-lg dark:bg-slate-700 focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Tm kim tn, email, st...",value:U,onChange:D=>V(D.target.value)})]}),d.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 dark:bg-blue-900/30 rounded-lg border border-blue-100 dark:border-blue-800 px-4 cursor-pointer",onClick:()=>_(!v),children:[d.jsx("input",{type:"checkbox",checked:v,onChange:D=>_(D.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),d.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-200 cursor-pointer select-none",children:"Ch hin hc vin cha c lp"})]})]}),d.jsxs("div",{className:"grid grid-cols-12 gap-2 text-xs font-bold text-gray-500 uppercase px-3 pb-2 border-b border-gray-100 dark:border-slate-700",children:[d.jsx("div",{className:"col-span-4",children:"Hc vin"}),d.jsx("div",{className:"col-span-2",children:"Ngy sinh/ST"}),d.jsx("div",{className:"col-span-3",children:"a ch/Qu qun"}),d.jsx("div",{className:"col-span-2",children:"Lp hin ti"}),d.jsx("div",{className:"col-span-1 text-center",children:"Thao tc"})]}),d.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2 mt-2",children:C.filter(D=>{const de=zr(D.fullName).includes(zr(U))||zr(D.email).includes(zr(U))||zr(D.phoneNumber).includes(zr(U)),Se=v?!D.courseId:!0;return de&&Se}).map(D=>d.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center p-3 bg-gray-50 dark:bg-slate-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-700 transition border border-transparent hover:border-gray-200 dark:hover:border-slate-600",children:[d.jsxs("div",{className:"col-span-4 flex items-center gap-3 overflow-hidden",children:[d.jsx("img",{src:D.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(D.fullName)}`,className:"w-10 h-10 rounded-full border border-gray-200 flex-shrink-0"}),d.jsxs("div",{className:"min-w-0",children:[d.jsx("p",{className:"font-bold text-sm truncate text-gray-900 dark:text-white",title:D.fullName,children:D.fullName}),d.jsx("p",{className:"text-xs text-gray-500 truncate",title:D.email,children:D.email})]})]}),d.jsxs("div",{className:"col-span-2 text-sm text-gray-700 dark:text-gray-300",children:[d.jsx("div",{className:"text-xs text-gray-500",children:D.birthDate||"--/--/----"}),d.jsx("div",{className:"font-medium",children:D.phoneNumber||"---"})]}),d.jsx("div",{className:"col-span-3 text-sm text-gray-700 dark:text-gray-300",children:d.jsx("p",{className:"line-clamp-2 text-xs",title:D.address||D.cccdPlace,children:D.address||D.cccdPlace||"---"})}),d.jsx("div",{className:"col-span-2 text-sm",children:D.courseName?d.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-md text-xs font-semibold border border-yellow-200 truncate block text-center",title:D.courseName,children:D.courseName}):d.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-md text-xs font-semibold border border-green-200 block text-center",children:"Cha c"})}),d.jsx("div",{className:"col-span-1 flex justify-center",children:d.jsx("button",{onClick:()=>sl(D.uid),disabled:Be,className:"bg-blue-600 text-white p-2 rounded hover:bg-blue-700 disabled:opacity-50 shadow-sm transition-transform active:scale-95",title:"Thm vo lp",children:d.jsx(nc,{})})})]},D.uid))})]})}),R&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:()=>I(!1),children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl p-6 h-[80vh] flex flex-col relative",onClick:D=>D.stopPropagation(),children:[d.jsx("button",{onClick:()=>I(!1),className:"absolute top-4 right-4 bg-gray-100 p-2 rounded-full",children:d.jsx(sc,{})}),d.jsx("h2",{className:"text-xl font-bold mb-4",children:"Thm Gio Vin"}),d.jsxs("div",{className:"flex items-center gap-2 p-2 bg-yellow-50 rounded mb-4",children:[d.jsx("input",{type:"checkbox",checked:Fa,onChange:D=>Zo(D.target.checked),className:"w-5 h-5 text-yellow-600"}),d.jsx("label",{className:"text-sm font-medium",children:"t lm GVCN"})]}),d.jsxs("div",{className:"relative mb-4",children:[d.jsx(cy,{className:"absolute left-3 top-3 text-gray-400"}),d.jsx("input",{className:"w-full pl-10 pr-4 py-2 border rounded dark:bg-slate-700",placeholder:"Tm kim gio vin...",value:q,onChange:D=>j(D.target.value)})]}),d.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2",children:H.filter(D=>zr(D.fullName).includes(zr(q))||zr(D.email).includes(zr(q))).map(D=>d.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-slate-700/50 rounded-lg hover:bg-gray-100 transition",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("img",{src:D.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(D.fullName)}`,className:"w-10 h-10 rounded-full"}),d.jsxs("div",{children:[d.jsx("p",{className:"font-bold text-sm",children:D.fullName}),d.jsx("p",{className:"text-xs text-gray-500",children:D.email})]})]}),d.jsx("button",{onClick:()=>Us(D.uid),disabled:O,className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 disabled:opacity-50 text-sm",children:"Thm"})]},D.uid))})]})}),ve&&Ge&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:()=>Re(!1),children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-5xl p-6 h-[80vh] flex flex-col relative",onClick:D=>D.stopPropagation(),children:[d.jsx("button",{onClick:()=>Re(!1),className:"absolute top-4 right-4 bg-gray-100 dark:bg-slate-700 p-2 rounded-full",children:d.jsx(sc,{})}),d.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[d.jsx(Wu,{className:"text-blue-500"})," Lch s lm bi: ",d.jsx("span",{className:"text-blue-600",children:Ge.fullName})]}),d.jsx("div",{className:"flex-1 overflow-y-auto",children:le?d.jsx("div",{className:"p-10 text-center text-gray-500",children:"ang ti lch s..."}):ie.length===0?d.jsx("div",{className:"p-10 text-center text-gray-500 italic",children:"Hc vin ny cha lm bi thi no."}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[d.jsx("thead",{className:"bg-gray-50 dark:bg-slate-700 sticky top-0 text-gray-500 uppercase text-xs",children:d.jsxs("tr",{children:[d.jsx("th",{className:"p-4 font-semibold",children:"Loi"}),d.jsx("th",{className:"p-4 font-semibold",children:"Bi thi"}),d.jsx("th",{className:"p-4 font-semibold text-center",children:"im s"}),d.jsx("th",{className:"p-4 font-semibold",children:"Gi np"}),d.jsx("th",{className:"p-4 font-semibold",children:"Ngy np"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-700",children:ie.map(D=>{const de=vs(D);return d.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors",children:[d.jsx("td",{className:"p-4 align-middle",children:d.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-bold border ${Ht(de)}`,children:de})}),d.jsx("td",{className:"p-4 align-middle font-medium text-gray-900 dark:text-gray-100",children:nn(D)}),d.jsxs("td",{className:"p-4 align-middle text-center",children:[d.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:D.score}),d.jsxs("span",{className:"text-gray-400 text-xs",children:[" / ",D.totalQuestions]})]}),d.jsx("td",{className:"p-4 align-middle text-gray-500",children:new Date(D.completedAt).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})}),d.jsx("td",{className:"p-4 align-middle text-gray-500",children:new Date(D.completedAt).toLocaleDateString("vi-VN")})]},D.id)})})]})})})]})}),Ke&&Me&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:()=>it(!1),children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl p-6 relative animate-scale-up max-h-[90vh] overflow-y-auto",onClick:D=>D.stopPropagation(),children:[d.jsx("button",{onClick:()=>{it(!1),Pn(!1)},className:"absolute top-4 right-4 bg-gray-100 dark:bg-slate-700 p-2 rounded-full hover:bg-gray-200 transition",children:d.jsx(sc,{})}),d.jsx("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2 text-blue-700 dark:text-blue-400",children:nt?d.jsxs(d.Fragment,{children:[d.jsx(Xl,{className:"text-yellow-500"})," Cp Nht Thng Tin"]}):d.jsxs(d.Fragment,{children:[d.jsx(cc,{className:"text-blue-500"})," H S Hc Vin"]})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"H v Tn"}),d.jsx("input",{className:`w-full p-2.5 border rounded-lg dark:bg-slate-700 ${nt?"focus:ring-2 focus:ring-blue-500":"bg-gray-50 border-transparent cursor-default"}`,value:Me.fullName,readOnly:!nt,onChange:D=>vt({...Me,fullName:D.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"Ngy sinh"}),d.jsx("input",{type:"date",className:`w-full p-2.5 border rounded-lg dark:bg-slate-700 ${nt?"focus:ring-2 focus:ring-blue-500":"bg-gray-50 border-transparent cursor-default"}`,value:Me.birthDate||"",readOnly:!nt,onChange:D=>vt({...Me,birthDate:D.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"Lp hc (Kha hc)"}),d.jsx("input",{className:"w-full p-2.5 border rounded-lg dark:bg-slate-700 bg-gray-50 border-transparent cursor-default",value:Me.courseName||Me.courseCode||"--",readOnly:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"Ngy cp CCCD"}),d.jsx("input",{type:nt?"date":"text",className:`w-full p-2.5 border rounded-lg dark:bg-slate-700 ${nt?"focus:ring-2 focus:ring-blue-500":"bg-gray-50 border-transparent cursor-default"}`,value:Me.cccdDate||"",readOnly:!nt,onChange:D=>vt({...Me,cccdDate:D.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"a ch"}),d.jsx("input",{className:`w-full p-2.5 border rounded-lg dark:bg-slate-700 ${nt?"focus:ring-2 focus:ring-blue-500":"bg-gray-50 border-transparent cursor-default"}`,value:Me.address||"",readOnly:!nt,onChange:D=>vt({...Me,address:D.target.value})})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"S in thoi"}),d.jsx("input",{className:`w-full p-2.5 border rounded-lg dark:bg-slate-700 ${nt?"focus:ring-2 focus:ring-blue-500":"bg-gray-50 border-transparent cursor-default"}`,value:Me.phoneNumber||"",readOnly:!nt,onChange:D=>vt({...Me,phoneNumber:D.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"Lp hc (t in)"}),d.jsx("input",{className:`w-full p-2.5 border rounded-lg dark:bg-slate-700 ${nt?"focus:ring-2 focus:ring-blue-500":"bg-gray-50 border-transparent cursor-default"}`,value:Me.class||"",placeholder:"V d: Th my k2",readOnly:!nt,onChange:D=>vt({...Me,class:D.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"S CCCD"}),d.jsx("input",{className:`w-full p-2.5 border rounded-lg dark:bg-slate-700 ${nt?"focus:ring-2 focus:ring-blue-500":"bg-gray-50 border-transparent cursor-default"}`,value:Me.cccd||"",readOnly:!nt,onChange:D=>vt({...Me,cccd:D.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"Ni cp"}),d.jsx("input",{className:`w-full p-2.5 border rounded-lg dark:bg-slate-700 ${nt?"focus:ring-2 focus:ring-blue-500":"bg-gray-50 border-transparent cursor-default"}`,value:Me.cccdPlace||"",readOnly:!nt,onChange:D=>vt({...Me,cccdPlace:D.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"Vai tr"}),d.jsxs("select",{className:`w-full p-2.5 border rounded-lg dark:bg-slate-700 ${nt?"focus:ring-2 focus:ring-blue-500":"bg-gray-50 border-transparent cursor-default appearance-none pointer-events-none"}`,value:Me.role,disabled:!nt,onChange:D=>vt({...Me,role:D.target.value}),children:[d.jsx("option",{value:"hoc_vien",children:"Hc vin"}),d.jsx("option",{value:"student",children:"Hc sinh"}),d.jsx("option",{value:"teacher",children:"Gio vin"})]})]})]})]}),d.jsx("div",{className:"flex justify-end gap-3 mt-8 pt-4 border-t border-gray-100 dark:border-slate-700",children:nt?d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:()=>Pn(!1),className:"px-4 py-2 bg-gray-100 rounded-lg hover:bg-gray-200 text-gray-700 font-medium",children:"Hy b"}),d.jsxs("button",{onClick:Bs,disabled:Dn,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 shadow-lg font-medium transition-transform active:scale-95",children:[d.jsx(kv,{})," ",Dn?"ang lu...":"Lu Thay i"]})]}):d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:()=>it(!1),className:"px-4 py-2 bg-gray-100 rounded-lg hover:bg-gray-200 text-gray-700 font-medium",children:"ng"}),d.jsxs("button",{onClick:()=>Pn(!0),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 shadow-lg font-medium transition-transform active:scale-95",children:[d.jsx(Xl,{})," Chnh sa"]})]})})]})}),An&&tr&&d.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>Ls(!1),children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-6 w-full max-w-md animate-scale-up",onClick:D=>D.stopPropagation(),children:[d.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[d.jsx(uf,{className:"text-yellow-500"})," Gi Thng Bo"]}),d.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["To: ",d.jsx("span",{className:"font-bold text-blue-600",children:tr.name})]}),d.jsxs("form",{onSubmit:Yn,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Loi thng bo"}),d.jsxs("select",{className:"w-full px-4 py-2 border rounded-lg dark:bg-slate-700 outline-none focus:ring-2 focus:ring-blue-500",value:sr,onChange:D=>ms(D.target.value),children:[d.jsx("option",{value:"system",children:"Bnh thng"}),["admin","lanh_dao","quan_ly"].includes(n.role)&&d.jsxs(d.Fragment,{children:[d.jsx("option",{value:"attention",children:" Ch  (Chy ch vng)"}),d.jsx("option",{value:"special",children:" C BIT (Chy ch )"})]})]})]}),(sr==="special"||sr==="attention")&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Hiu lc chy ch n"}),d.jsx("input",{type:"datetime-local",className:"w-full px-4 py-2 border rounded-lg dark:bg-slate-700 outline-none focus:ring-2 focus:ring-blue-500",value:Kt,onChange:D=>ts(D.target.value),required:!0}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sau thi gian ny, thng bo s ngng chy ngang mn hnh."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tiu "}),d.jsx("input",{className:"w-full px-4 py-2 border rounded-lg dark:bg-slate-700 focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Tiu ...",value:nr,onChange:D=>el(D.target.value),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tin nhn"}),d.jsx("textarea",{className:"w-full px-4 py-2 border rounded-lg dark:bg-slate-700 h-24 focus:ring-2 focus:ring-blue-500 outline-none resize-none",placeholder:"Ni dung...",value:Ka,onChange:D=>Qa(D.target.value),required:!0})]}),d.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[d.jsx("button",{type:"button",onClick:()=>Ls(!1),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Hy"}),d.jsx("button",{type:"submit",disabled:It,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 shadow-lg font-medium",children:It?"ang gi...":"Gi Ngay"})]})]})]})}),d.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[d.jsxs("div",{children:[d.jsxs("button",{onClick:()=>l(null),className:"flex items-center gap-2 text-sm text-gray-500 hover:text-blue-600 mb-2 transition-colors font-medium",children:[d.jsx(Yu,{})," Quay li danh sch"]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-2 rounded-lg",children:d.jsx(jo,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-cyan-500",children:a.name}),d.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-0.5",children:a.description})]})]})]}),d.jsx("div",{className:"flex gap-4",children:d.jsxs("button",{onClick:()=>Ln("class",a.name,a.name),className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition flex items-center gap-2 font-medium",children:[d.jsx(uf,{})," Thng bo c lp"]})})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[d.jsx("div",{className:"lg:col-span-1 space-y-6",children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-slate-700 p-5 sticky top-20",children:[d.jsxs("div",{className:"flex justify-between items-center border-b pb-3 border-gray-100 dark:border-slate-700 mb-4",children:[d.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2 text-gray-800 dark:text-white",children:[d.jsx(cc,{className:"text-green-500"})," Gio vin"]}),tl&&d.jsx("button",{onClick:()=>I(!0),className:"text-green-600 hover:bg-green-50 p-1.5 rounded-full transition-colors",children:d.jsx(nc,{size:14})})]}),d.jsxs("div",{className:"space-y-3",children:[N.map(D=>d.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 dark:hover:bg-slate-700/50 rounded-lg transition-colors group relative cursor-pointer",children:[d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:D.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(D.fullName)}`,className:"w-10 h-10 rounded-full border border-gray-200"}),a.headTeacherId===D.uid&&d.jsx("div",{className:"absolute -top-1 -right-1 bg-yellow-400 text-white rounded-full p-0.5 border-2 border-white",children:d.jsx(nm,{size:10})})]}),d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("p",{className:"font-medium text-sm truncate text-gray-900 dark:text-gray-100",children:D.fullName}),d.jsx("p",{className:"text-[11px] text-gray-400 truncate",children:y9(D.role)}),a.headTeacherId===D.uid&&d.jsx("span",{className:"text-[10px] font-bold text-yellow-600 bg-yellow-50 px-1.5 py-0.5 rounded border border-yellow-200 mt-1 inline-block",children:"GVCN"})]}),ys&&d.jsx("button",{onClick:de=>{de.stopPropagation(),Mi(D.uid)},className:"text-gray-400 hover:text-red-500 hover:bg-red-50 p-1.5 rounded opacity-0 group-hover:opacity-100 transition-all absolute right-2",title:"Xa gio vin",children:d.jsx(Oo,{size:12})})]},D.uid)),N.length===0&&d.jsx("p",{className:"text-sm text-gray-500 italic text-center py-4",children:"Cha c gio vin."})]})]})}),d.jsx("div",{className:"lg:col-span-3",children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-slate-700 p-6 min-h-[500px]",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-100 dark:border-slate-700",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("h3",{className:"font-bold text-xl flex items-center gap-2 text-gray-800 dark:text-white",children:[d.jsx(hd,{className:"text-blue-500"})," Hc vin (",E.length,")"]}),d.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-700 rounded-lg p-1 ml-4",children:[d.jsx("button",{onClick:()=>Wa("grid"),className:`p-1.5 rounded ${Sr==="grid"?"bg-white dark:bg-slate-600 shadow text-blue-600":"text-gray-500 hover:text-blue-500"}`,title:"Dng li",children:d.jsx(e4,{})}),d.jsx("button",{onClick:()=>Wa("list"),className:`p-1.5 rounded ${Sr==="list"?"bg-white dark:bg-slate-600 shadow text-blue-600":"text-gray-500 hover:text-blue-500"}`,title:"Dng danh sch",children:d.jsx(ZS,{})})]})]}),ps&&d.jsxs("button",{onClick:()=>k(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg shadow hover:bg-blue-700 hover:shadow-lg transition flex items-center gap-2 text-sm font-medium",children:[d.jsx(nc,{})," Thm Hc Vin"]})]}),Sr==="grid"?d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:E.map(D=>{const de=te[D.uid]||{score:"--"};return d.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/30 rounded-xl p-4 border border-gray-100 dark:border-slate-700 hover:shadow-md hover:border-blue-200 dark:hover:border-blue-500/30 transition-all duration-300 group relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-bl from-blue-100 to-transparent -mr-8 -mt-8 rounded-full opacity-50 group-hover:scale-150 transition-transform"}),d.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[d.jsx("div",{className:"relative",children:d.jsx("img",{src:D.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(D.fullName)}&background=random`,alt:D.fullName,className:"w-14 h-14 rounded-full object-cover border-2 border-white dark:border-slate-600 shadow-sm group-hover:border-blue-500 transition-colors"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h4",{className:"font-bold text-gray-900 dark:text-gray-100 truncate group-hover:text-blue-600 transition-colors text-base",children:D.fullName}),d.jsx("p",{className:"text-xs text-gray-500 truncate",children:D.email}),d.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100 dark:border-slate-600 text-xs",children:d.jsxs("div",{className:"flex justify-between text-gray-500",children:[d.jsx("span",{children:"Kt qu mi:"}),d.jsx("span",{className:"font-bold text-teal-600",children:de.score})]})}),d.jsxs("div",{className:"flex gap-2 mt-3 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[d.jsx("button",{onClick:()=>Ln("user",D.uid,D.fullName),className:"text-yellow-600 bg-yellow-50 hover:bg-yellow-100 p-1.5 rounded text-xs flex items-center gap-1",title:"Nhn tin",children:d.jsx(uf,{})}),d.jsx("button",{onClick:()=>{vt(D),it(!0)},className:"text-blue-600 bg-blue-50 hover:bg-blue-100 p-1.5 rounded text-xs flex items-center gap-1",title:"Sa thng tin",children:d.jsx(Xl,{})}),d.jsx("button",{onClick:()=>{B(D),Re(!0)},className:"text-purple-600 bg-purple-50 hover:bg-purple-100 p-1.5 rounded text-xs flex items-center gap-1",title:"Xem lch s",children:d.jsx(Wu,{})}),ps&&d.jsx("button",{onClick:()=>bs(D.uid),className:"text-red-600 bg-red-50 hover:bg-red-100 p-1.5 rounded text-xs flex items-center gap-1",title:"Xa",children:d.jsx(Oo,{})})]})]})]})]},D.uid)})}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-left text-sm",children:[d.jsx("thead",{className:"text-xs text-gray-500 uppercase bg-gray-50 dark:bg-slate-700 dark:text-gray-300",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-4 py-3 rounded-l-lg",children:"Hc vin"}),d.jsx("th",{className:"px-4 py-3",children:"Ngy sinh"}),d.jsx("th",{className:"px-4 py-3",children:"Bi lm gn nht"}),d.jsx("th",{className:"px-4 py-3",children:"Thi gian"}),d.jsx("th",{className:"px-4 py-3",children:"im"}),d.jsx("th",{className:"px-4 py-3 text-center rounded-r-lg",children:"Hnh ng"})]})}),d.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-700",children:[E.map(D=>{const de=te[D.uid]||{type:"--",time:"--",score:"--"};return d.jsxs("tr",{className:"group hover:bg-gray-50 dark:hover:bg-slate-700/30 transition-colors",children:[d.jsxs("td",{className:"px-4 py-3 font-medium text-gray-900 dark:text-white flex items-center gap-3",children:[d.jsx("img",{src:D.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(D.fullName)}`,className:"w-8 h-8 rounded-full border border-gray-200"}),d.jsxs("div",{children:[d.jsx("p",{children:D.fullName}),d.jsx("p",{className:"text-xs text-gray-500 font-normal",children:D.email})]})]}),d.jsx("td",{className:"px-4 py-3 text-gray-500",children:D.birthDate||"--"}),d.jsx("td",{className:"px-4 py-3",children:d.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold
                                                        ${de.type.includes("n")?"bg-blue-100 text-blue-700":de.type.includes("Th")?"bg-purple-100 text-purple-700":de.type==="--"?"bg-gray-100 text-gray-500":"bg-red-100 text-red-700"}`,children:de.type})}),d.jsx("td",{className:"px-4 py-3 text-gray-500",children:de.time}),d.jsx("td",{className:"px-4 py-3 font-bold text-teal-600",children:de.score}),d.jsx("td",{className:"px-4 py-3 text-center",children:d.jsxs("div",{className:"flex items-center justify-center gap-2 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[d.jsx("button",{onClick:()=>Ln("user",D.uid,D.fullName),className:"text-yellow-500 hover:bg-yellow-50 p-2 rounded-lg transition",title:"Gi tin nhn",children:d.jsx(uf,{})}),d.jsx("button",{onClick:()=>{vt(D),it(!0)},className:"text-blue-500 hover:bg-blue-50 p-2 rounded-lg transition",title:"Sa thng tin",children:d.jsx(Xl,{})}),d.jsx("button",{onClick:()=>{B(D),Re(!0)},className:"text-purple-500 hover:bg-purple-50 p-2 rounded-lg transition",title:"Xem lch s thi",children:d.jsx(Wu,{})}),ps&&d.jsx("button",{onClick:()=>bs(D.uid),className:"text-red-400 hover:text-red-600 hover:bg-red-50 p-2 rounded-lg transition",title:"Xa khi lp",children:d.jsx(Oo,{})})]})})]},D.uid)}),E.length===0&&d.jsx("tr",{children:d.jsx("td",{colSpan:6,className:"text-center py-10 text-gray-400 italic",children:"Lp cha c hc vin no."})})]})]})})]})})]})]}):d.jsxs("div",{className:"w-full max-w-6xl mx-auto p-4 animate-slide-in-right relative",children:[Zs&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md p-6",children:[d.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800 dark:text-white",children:"To Lp Hc Mi"}),d.jsxs("form",{onSubmit:Vs,className:"space-y-4",children:[d.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",placeholder:"Tn lp",value:Ii,onChange:D=>Pt(D.target.value),required:!0}),d.jsxs("div",{className:"mb-2",children:[d.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Hng bng (Mc nh)"}),d.jsxs("select",{className:"w-full p-2 border rounded dark:bg-slate-700",value:Oi,onChange:D=>Di(D.target.value),children:[d.jsx("option",{value:"",children:"-- Chn hng bng --"}),Mn.map(D=>d.jsx("option",{value:D.id,children:D.name},D.id))]}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hc vin s t ng c gn hng bng ny khi n tp."})]}),d.jsx("textarea",{className:"w-full p-2 border rounded dark:bg-slate-700",placeholder:"M t",value:zt,onChange:D=>er(D.target.value)}),d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx("button",{type:"button",onClick:()=>Tr(!1),className:"px-4 py-2 bg-gray-200 rounded",children:"Hy"}),d.jsx("button",{type:"submit",className:"px-4 py-2 bg-teal-600 text-white rounded",children:"To"})]})]})]})}),qt&&vn&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md p-6",children:[d.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800 dark:text-white",children:"Chnh Sa Lp Hc"}),d.jsxs("form",{onSubmit:Pi,className:"space-y-4",children:[d.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",placeholder:"Tn lp",value:ji,onChange:D=>Xa(D.target.value),required:!0}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Hng bng mc nh"}),d.jsxs("select",{className:"w-full p-2 border rounded dark:bg-slate-700",value:Nr,onChange:D=>Cr(D.target.value),children:[d.jsx("option",{value:"",children:"-- Khng chn --"}),Mn.map(D=>d.jsx("option",{value:D.id,children:D.name},D.id))]})]}),d.jsx("textarea",{className:"w-full p-2 border rounded dark:bg-slate-700",placeholder:"M t",value:Qn,onChange:D=>Ar(D.target.value)}),d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx("button",{type:"button",onClick:()=>ns(!1),className:"px-4 py-2 bg-gray-200 rounded",children:"Hy"}),d.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Lu Thay i"})]})]})]})}),d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3 bg-clip-text text-transparent bg-gradient-to-r from-teal-600 to-emerald-600",children:[d.jsx(jo,{className:"text-teal-600"})," Qun l Lp hc"]}),d.jsx("button",{onClick:e,className:"bg-gray-200 dark:bg-slate-700 text-gray-800 dark:text-gray-200 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-slate-600 transition-colors",children:"Back Dashboard"})]}),c?d.jsx("div",{className:"p-20 text-center",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600 mx-auto"})}):t.length===0?d.jsxs("div",{className:"text-center p-12 bg-white dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 shadow-sm",children:[d.jsx(jo,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),d.jsx("h3",{className:"text-xl font-bold text-gray-700 dark:text-gray-200 mb-2",children:"Cha c lp hc no"}),kr&&d.jsx("button",{onClick:()=>Tr(!0),className:"bg-teal-600 text-white px-6 py-2 rounded-lg hover:bg-teal-700 transition",children:"To Lp Ngay"})]}):d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[kr&&d.jsxs("div",{onClick:()=>Tr(!0),className:"bg-gradient-to-br from-teal-500 to-emerald-500 rounded-xl shadow-lg p-6 flex flex-col justify-center items-center text-white cursor-pointer hover:shadow-xl hover:scale-[1.02] transition-all duration-300 group",children:[d.jsx("div",{className:"bg-white/20 p-4 rounded-full mb-3 group-hover:bg-white/30 transition-colors",children:d.jsx(nc,{className:"w-8 h-8"})}),d.jsx("h3",{className:"font-bold text-lg",children:"Thm Lp Mi"})]}),t.map(D=>{var He;const de=["admin","quan_ly","lanh_dao"].includes(n.role)||n.role==="giao_vien"&&(D.headTeacherId===n.id||(D.teacherIds||[]).includes(n.id)),Se=["admin","quan_ly","lanh_dao"].includes(n.role);return d.jsxs("div",{onClick:()=>l(D),className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-slate-700 overflow-hidden cursor-pointer hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group flex flex-col relative",children:[(de||Se)&&d.jsxs("div",{className:"absolute top-2 right-2 z-10 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[de&&d.jsx("button",{onClick:$e=>nl(D,$e),className:"p-2 bg-white/90 text-blue-600 rounded-full shadow-sm hover:bg-blue-50",title:"Sa lp",children:d.jsx(Xl,{})}),Se&&d.jsx("button",{onClick:$e=>{$e.stopPropagation(),zc(D.id)},className:"p-2 bg-white/90 text-red-600 rounded-full shadow-sm hover:bg-red-50",title:"Xa lp",children:d.jsx(Oo,{})})]}),d.jsxs("div",{className:"h-32 bg-gradient-to-r from-blue-600 to-cyan-500 relative flex items-center justify-center overflow-hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-transparent transition-colors"}),d.jsx(ly,{className:"text-white/30 w-20 h-20 transform -rotate-12 group-hover:scale-110 transition-transform duration-500"}),d.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/60 to-transparent",children:[d.jsx("h3",{className:"font-bold text-xl text-white truncate",children:D.name}),D.licenseId&&d.jsx("span",{className:"text-xs text-yellow-300 font-mono bg-black/30 px-1 rounded ml-2",children:((He=Mn.find($e=>$e.id===D.licenseId))==null?void 0:He.name)||D.licenseId})]})]}),d.jsxs("div",{className:"p-5 flex-1 flex flex-col",children:[d.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-2 mb-4 flex-1",children:D.description||"Cha c m t kha hc."}),d.jsxs("div",{className:"flex justify-between items-center text-sm font-medium pt-4 border-t border-gray-100 dark:border-slate-700",children:[d.jsxs("span",{className:"text-gray-500 flex items-center gap-1",children:[d.jsx(cc,{})," GVCN: ",D.headTeacherId?g[D.headTeacherId]||"...":"Cha c"]}),d.jsxs("span",{className:"text-blue-600 group-hover:underline flex items-center gap-1",children:["Chi tit ",d.jsx(Yu,{className:"rotate-180"})]})]})]})]},D.id)})]})]})},Qx=[{id:"admin",name:"Qun tr vin"},{id:"lanh_dao",name:"Lnh o"},{id:"quan_ly",name:"Qun l"},{id:"giao_vien",name:"Gio vin"},{id:"hoc_vien",name:"Hc vin"}],b9=["giao_vien","lanh_dao","quan_ly"],w9=({userProfile:n,onBack:e})=>{const[t,s]=G.useState(n),[a,l]=G.useState(!1),c=n.role!=="hoc_vien",[f,g]=G.useState([]),[y,v]=G.useState(!1),[_,E]=G.useState([]),[T,N]=G.useState(""),[P,C]=G.useState("all"),[M,H]=G.useState(null),[F,te]=G.useState(!1);G.useEffect(()=>{c&&fe()},[c]),G.useEffect(()=>{if(c){let se=f;if(P==="staff"?se=se.filter(O=>b9.includes(O.role)):P==="hoc_vien"&&(se=se.filter(O=>O.role==="hoc_vien")),T.trim()){const O=T.toLowerCase();se=se.filter(re=>re.fullName.toLowerCase().includes(O)||re.email.toLowerCase().includes(O)||re.phoneNumber&&re.phoneNumber.includes(O))}E(se)}},[f,P,T,c]);const fe=async()=>{v(!0);try{const se=Gt(St(Ae,"users"),Fm("createdAt","desc")),re=(await En(se)).docs.map(ve=>{const Re=ve.data();return{id:ve.id,...Re,photoURL:Re.photoURL||Va(Re.photoURL?void 0:Re.role)}});g(re)}catch(se){console.error("Error fetching users:",se)}finally{v(!1)}},he=async se=>{se.preventDefault(),l(!0);try{const O=re=>re===void 0?null:re;await Cs(dt(Ae,"users",n.id),{fullName:O(t.full_name),phoneNumber:O(t.phoneNumber),birthDate:O(t.birthDate),address:O(t.address),cccd:O(t.cccd),cccdDate:O(t.cccdDate),cccdPlace:O(t.cccdPlace),class:O(t.class)}),alert("Cp nht thng tin thnh cng!")}catch(O){console.error(O),alert("Li khi lu thng tin.")}finally{l(!1)}},k=async se=>{if(confirm("Bn c chc chn mun xa ti khon ny?"))try{await wv(dt(Ae,"users",se)),g(O=>O.filter(re=>re.id!==se))}catch(O){console.error(O),alert("Li khi xa.")}},R=async se=>{if(se.preventDefault(),!!M)try{const O=re=>re===void 0?null:re;await Cs(dt(Ae,"users",M.id),{fullName:M.fullName,phoneNumber:O(M.phoneNumber),birthDate:O(M.birthDate),role:M.role,class:O(M.class),cccd:O(M.cccd),cccdDate:O(M.cccdDate),cccdPlace:O(M.cccdPlace),address:O(M.address)}),alert(" cp nht!"),te(!1),fe()}catch(O){console.error(O),alert("Li khi lu.")}},I=se=>{var O;return((O=Qx.find(re=>re.id===se))==null?void 0:O.name)||se},[U,V]=G.useState(!1),q=vr.useRef(null),j=()=>{var se;(se=q.current)==null||se.click()},Be=async se=>{var re;const O=(re=se.target.files)==null?void 0:re[0];if(O){if(!O.type.startsWith("image/")){alert("Vui lng chn file nh!");return}try{V(!0);const ve=await CD(O,n.id);await Cs(dt(Ae,"users",n.id),{photoURL:ve}),s(Re=>({...Re,photoURL:ve})),alert("Ti nh i din thnh cng!")}catch(ve){console.error("Upload failed:",ve),alert("C li xy ra khi ti nh.")}finally{V(!1),q.current&&(q.current.value="")}}};return d.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 animate-slide-in-right pb-20",children:[d.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[d.jsx("button",{onClick:e,className:"p-2 bg-gray-100 dark:bg-slate-700 rounded-full hover:bg-gray-200",children:d.jsx(Yu,{})}),d.jsxs("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[d.jsx(sm,{})," Ti khon ca ti"]})]}),d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md p-6 mb-8 border border-gray-100 dark:border-slate-700",children:[d.jsx("h2",{className:"text-lg font-bold mb-4 text-blue-600 border-b pb-2",children:"Thng tin c nhn"}),d.jsxs("div",{className:"flex flex-col items-center mb-6",children:[d.jsxs("div",{className:"relative group cursor-pointer",onClick:j,children:[d.jsxs("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-gray-200 dark:border-slate-600 shadow-lg relative",children:[d.jsx("img",{src:t.photoURL||Va(t.role),alt:"Avatar",className:"w-full h-full object-cover"}),U&&d.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:d.jsx("div",{className:"w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin"})})]}),d.jsx("div",{className:"absolute bottom-1 right-1 bg-white dark:bg-slate-700 p-2 rounded-full shadow-md text-gray-600 dark:text-gray-200 group-hover:bg-blue-500 group-hover:text-white transition-colors",children:d.jsx(VO,{size:16})}),d.jsx("input",{type:"file",ref:q,className:"hidden",accept:"image/*",onChange:Be})]}),d.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Chm  i nh i din"})]}),d.jsxs("form",{onSubmit:he,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"H v Tn"}),d.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:t.full_name,onChange:se=>s({...t,full_name:se.target.value}),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Email (Khng i)"}),d.jsx("input",{className:"w-full p-2 border rounded bg-gray-50 dark:bg-slate-900 text-gray-500",value:t.email||"",readOnly:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Ngy sinh"}),d.jsx("input",{type:"date",className:"w-full p-2 border rounded dark:bg-slate-700",value:t.birthDate||"",onChange:se=>s({...t,birthDate:se.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"S in thoi"}),d.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:t.phoneNumber||"",onChange:se=>s({...t,phoneNumber:se.target.value})})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"S CCCD"}),d.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:t.cccd||"",onChange:se=>s({...t,cccd:se.target.value})})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Ngy cp"}),d.jsx("input",{type:"date",className:"w-full p-2 border rounded dark:bg-slate-700",value:t.cccdDate||"",onChange:se=>s({...t,cccdDate:se.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Ni cp"}),d.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:t.cccdPlace||"",onChange:se=>s({...t,cccdPlace:se.target.value})})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"a ch / Qu qun"}),d.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:t.address||"",onChange:se=>s({...t,address:se.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Lp hc (t in)"}),d.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:t.class||"",onChange:se=>s({...t,class:se.target.value}),placeholder:"VD: Th my K2"})]})]}),d.jsx("div",{className:"md:col-span-2 flex justify-end mt-4",children:d.jsxs("button",{type:"submit",disabled:a,className:"flex items-center gap-2 bg-teal-600 text-white px-6 py-2 rounded-lg hover:bg-teal-700 transition shadow-md disabled:opacity-50",children:[d.jsx(kv,{})," ",a?"ang lu...":"Cp nht thng tin"]})})]})]}),c&&d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md p-6 border border-gray-100 dark:border-slate-700 animate-fade-in-up",children:[d.jsxs("h2",{className:"text-lg font-bold mb-4 text-orange-600 border-b pb-2 flex items-center justify-between",children:[d.jsx("span",{children:"Qun l ngi dng"}),d.jsx("span",{className:"text-xs font-normal text-gray-500 bg-gray-100 rounded-full px-2 py-1",children:"Admin/Lnh o/QL/GV"})]}),d.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6 justify-between items-center",children:[d.jsxs("div",{className:"relative flex-1 max-w-md w-full",children:[d.jsx(cy,{className:"absolute left-3 top-3 text-gray-400"}),d.jsx("input",{className:"w-full pl-10 pr-4 py-2 border rounded-lg dark:bg-slate-700",placeholder:"Tm hc vin, gio vin...",value:T,onChange:se=>N(se.target.value)})]}),d.jsxs("select",{className:"p-2 border rounded-lg dark:bg-slate-700 flex-1 md:flex-none",value:P,onChange:se=>C(se.target.value),children:[d.jsx("option",{value:"all",children:"Tt c vai tr"}),d.jsx("option",{value:"staff",children:"Gio vin/Qun l"}),d.jsx("option",{value:"hoc_vien",children:"Hc vin"})]})]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-left border-collapse min-w-[800px]",children:[d.jsx("thead",{className:"bg-gray-50 dark:bg-slate-900 text-sm uppercase text-gray-500 font-bold",children:d.jsxs("tr",{children:[d.jsx("th",{className:"p-3 border-b dark:border-slate-700",children:"H v Tn"}),d.jsx("th",{className:"p-3 border-b dark:border-slate-700",children:"Lp hc (Kha/Tn)"}),d.jsx("th",{className:"p-3 border-b dark:border-slate-700",children:"Lin h"}),d.jsx("th",{className:"p-3 border-b dark:border-slate-700",children:"Vai tr"}),d.jsx("th",{className:"p-3 border-b dark:border-slate-700 text-center",children:"Thao tc"})]})}),d.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-700",children:y?d.jsx("tr",{children:d.jsx("td",{colSpan:5,className:"p-4 text-center",children:"ang ti..."})}):_.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:5,className:"p-4 text-center italic text-gray-500",children:"Khng tm thy ngi dng."})}):_.map(se=>d.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50 transition",children:[d.jsxs("td",{className:"p-3 font-medium text-gray-900 dark:text-white",children:[se.fullName,se.role==="hoc_vien"&&se.isVerified&&d.jsx(JS,{className:"inline ml-1 text-blue-500 text-xs"})]}),d.jsx("td",{className:"p-3 text-sm",children:se.courseName||se.courseId||"--"}),d.jsxs("td",{className:"p-3 text-sm",children:[d.jsx("div",{children:se.email}),d.jsx("div",{className:"text-xs text-gray-500",children:se.phoneNumber})]}),d.jsx("td",{className:"p-3",children:d.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${se.role==="hoc_vien"?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"}`,children:I(se.role)})}),d.jsxs("td",{className:"p-3 flex justify-center gap-2",children:[d.jsx("button",{onClick:()=>{H(se),te(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded",children:d.jsx(Xl,{})}),n.role==="admin"&&d.jsx("button",{onClick:()=>k(se.id),className:"p-2 text-red-600 hover:bg-red-50 rounded",children:d.jsx(Oo,{})})]})]},se.id))})]})})]}),F&&M&&d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:()=>te(!1),children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl p-6 relative max-h-[90vh] overflow-y-auto",onClick:se=>se.stopPropagation(),children:[d.jsxs("h2",{className:"text-lg font-bold mb-4",children:["Sa ti khon: ",M.fullName]}),d.jsxs("form",{onSubmit:R,className:"space-y-4",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1",children:"H tn"}),d.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:M.fullName,onChange:se=>H({...M,fullName:se.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1",children:"ST"}),d.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:M.phoneNumber||"",onChange:se=>H({...M,phoneNumber:se.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1",children:"Ngy sinh"}),d.jsx("input",{type:"date",className:"w-full p-2 border rounded dark:bg-slate-700",value:M.birthDate||"",onChange:se=>H({...M,birthDate:se.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1",children:"Lp hc (t in)"}),d.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:M.class||"",onChange:se=>H({...M,class:se.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1",children:"CCCD"}),d.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:M.cccd||"",onChange:se=>H({...M,cccd:se.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1",children:"a ch"}),d.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:M.address||"",onChange:se=>H({...M,address:se.target.value})})]}),d.jsxs("div",{className:"col-span-2",children:[d.jsx("label",{className:"block text-sm font-bold mb-1",children:"Vai tr"}),d.jsx("select",{className:"w-full p-2 border rounded dark:bg-slate-700",value:M.role,onChange:se=>H({...M,role:se.target.value}),children:Qx.map(se=>d.jsx("option",{value:se.id,children:se.name},se.id))})]})]}),d.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[d.jsx("button",{type:"button",onClick:()=>te(!1),className:"px-4 py-2 bg-gray-200 rounded",children:"Hy"}),d.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Lu"})]})]})]})})]})};/*!
* sweetalert2 v11.26.4
* Released under the MIT License.
*/function Q4(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function _9(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Yx(n,e){return n.get(Q4(n,e))}function x9(n,e,t){_9(n,e),e.set(n,t)}function E9(n,e,t){return n.set(Q4(n,e),t),t}const T9=100,ke={},S9=()=>{ke.previousActiveElement instanceof HTMLElement?(ke.previousActiveElement.focus(),ke.previousActiveElement=null):document.body&&document.body.focus()},A9=n=>new Promise(e=>{if(!n)return e();const t=window.scrollX,s=window.scrollY;ke.restoreFocusTimeout=setTimeout(()=>{S9(),e()},T9),window.scrollTo(t,s)}),Y4="swal2-",N9=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],ee=N9.reduce((n,e)=>(n[e]=Y4+e,n),{}),C9=["success","warning","info","question","error"],um=C9.reduce((n,e)=>(n[e]=Y4+e,n),{}),W4="SweetAlert2:",Vv=n=>n.charAt(0).toUpperCase()+n.slice(1),Zn=n=>{console.warn(`${W4} ${typeof n=="object"?n.join(" "):n}`)},Xo=n=>{console.error(`${W4} ${n}`)},Wx=[],k9=n=>{Wx.includes(n)||(Wx.push(n),Zn(n))},X4=(n,e=null)=>{k9(`"${n}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},ng=n=>typeof n=="function"?n():n,Uv=n=>n&&typeof n.toPromise=="function",jd=n=>Uv(n)?n.toPromise():Promise.resolve(n),Bv=n=>n&&Promise.resolve(n)===n,es=()=>document.body.querySelector(`.${ee.container}`),Od=n=>{const e=es();return e?e.querySelector(n):null},Ps=n=>Od(`.${n}`),lt=()=>Ps(ee.popup),Lc=()=>Ps(ee.icon),R9=()=>Ps(ee["icon-content"]),J4=()=>Ps(ee.title),zv=()=>Ps(ee["html-container"]),Z4=()=>Ps(ee.image),qv=()=>Ps(ee["progress-steps"]),sg=()=>Ps(ee["validation-message"]),Xr=()=>Od(`.${ee.actions} .${ee.confirm}`),Vc=()=>Od(`.${ee.actions} .${ee.cancel}`),Jo=()=>Od(`.${ee.actions} .${ee.deny}`),I9=()=>Ps(ee["input-label"]),Uc=()=>Od(`.${ee.loader}`),Dd=()=>Ps(ee.actions),e5=()=>Ps(ee.footer),rg=()=>Ps(ee["timer-progress-bar"]),Hv=()=>Ps(ee.close),j9=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,$v=()=>{const n=lt();if(!n)return[];const e=n.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),t=Array.from(e).sort((l,c)=>{const f=parseInt(l.getAttribute("tabindex")||"0"),g=parseInt(c.getAttribute("tabindex")||"0");return f>g?1:f<g?-1:0}),s=n.querySelectorAll(j9),a=Array.from(s).filter(l=>l.getAttribute("tabindex")!=="-1");return[...new Set(t.concat(a))].filter(l=>hs(l))},Fv=()=>Si(document.body,ee.shown)&&!Si(document.body,ee["toast-shown"])&&!Si(document.body,ee["no-backdrop"]),ig=()=>{const n=lt();return n?Si(n,ee.toast):!1},O9=()=>{const n=lt();return n?n.hasAttribute("data-loading"):!1},Ms=(n,e)=>{if(n.textContent="",e){const s=new DOMParser().parseFromString(e,"text/html"),a=s.querySelector("head");a&&Array.from(a.childNodes).forEach(c=>{n.appendChild(c)});const l=s.querySelector("body");l&&Array.from(l.childNodes).forEach(c=>{c instanceof HTMLVideoElement||c instanceof HTMLAudioElement?n.appendChild(c.cloneNode(!0)):n.appendChild(c)})}},Si=(n,e)=>{if(!e)return!1;const t=e.split(/\s+/);for(let s=0;s<t.length;s++)if(!n.classList.contains(t[s]))return!1;return!0},D9=(n,e)=>{Array.from(n.classList).forEach(t=>{!Object.values(ee).includes(t)&&!Object.values(um).includes(t)&&!Object.values(e.showClass||{}).includes(t)&&n.classList.remove(t)})},Ds=(n,e,t)=>{if(D9(n,e),!e.customClass)return;const s=e.customClass[t];if(s){if(typeof s!="string"&&!s.forEach){Zn(`Invalid type of customClass.${t}! Expected string or iterable object, got "${typeof s}"`);return}ht(n,s)}},ag=(n,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return n.querySelector(`.${ee.popup} > .${ee[e]}`);case"checkbox":return n.querySelector(`.${ee.popup} > .${ee.checkbox} input`);case"radio":return n.querySelector(`.${ee.popup} > .${ee.radio} input:checked`)||n.querySelector(`.${ee.popup} > .${ee.radio} input:first-child`);case"range":return n.querySelector(`.${ee.popup} > .${ee.range} input`);default:return n.querySelector(`.${ee.popup} > .${ee.input}`)}},t5=n=>{if(n.focus(),n.type!=="file"){const e=n.value;n.value="",n.value=e}},n5=(n,e,t)=>{!n||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(s=>{Array.isArray(n)?n.forEach(a=>{t?a.classList.add(s):a.classList.remove(s)}):t?n.classList.add(s):n.classList.remove(s)}))},ht=(n,e)=>{n5(n,e,!0)},Js=(n,e)=>{n5(n,e,!1)},Ea=(n,e)=>{const t=Array.from(n.children);for(let s=0;s<t.length;s++){const a=t[s];if(a instanceof HTMLElement&&Si(a,e))return a}},Po=(n,e,t)=>{t===`${parseInt(`${t}`)}`&&(t=parseInt(t)),t||parseInt(`${t}`)===0?n.style.setProperty(e,typeof t=="number"?`${t}px`:t):n.style.removeProperty(e)},Sn=(n,e="flex")=>{n&&(n.style.display=e)},Gn=n=>{n&&(n.style.display="none")},Gv=(n,e="block")=>{n&&new MutationObserver(()=>{Pd(n,n.innerHTML,e)}).observe(n,{childList:!0,subtree:!0})},Xx=(n,e,t,s)=>{const a=n.querySelector(e);a&&a.style.setProperty(t,s)},Pd=(n,e,t="flex")=>{e?Sn(n,t):Gn(n)},hs=n=>!!(n&&(n.offsetWidth||n.offsetHeight||n.getClientRects().length)),P9=()=>!hs(Xr())&&!hs(Jo())&&!hs(Vc()),Sy=n=>n.scrollHeight>n.clientHeight,M9=(n,e)=>{let t=n;for(;t&&t!==e;){if(Sy(t))return!0;t=t.parentElement}return!1},s5=n=>{const e=window.getComputedStyle(n),t=parseFloat(e.getPropertyValue("animation-duration")||"0"),s=parseFloat(e.getPropertyValue("transition-duration")||"0");return t>0||s>0},Kv=(n,e=!1)=>{const t=rg();t&&hs(t)&&(e&&(t.style.transition="none",t.style.width="100%"),setTimeout(()=>{t.style.transition=`width ${n/1e3}s linear`,t.style.width="0%"},10))},L9=()=>{const n=rg();if(!n)return;const e=parseInt(window.getComputedStyle(n).width);n.style.removeProperty("transition"),n.style.width="100%";const t=parseInt(window.getComputedStyle(n).width),s=e/t*100;n.style.width=`${s}%`},V9=()=>typeof window>"u"||typeof document>"u",U9=`
 <div aria-labelledby="${ee.title}" aria-describedby="${ee["html-container"]}" class="${ee.popup}" tabindex="-1">
   <button type="button" class="${ee.close}"></button>
   <ul class="${ee["progress-steps"]}"></ul>
   <div class="${ee.icon}"></div>
   <img class="${ee.image}" />
   <h2 class="${ee.title}" id="${ee.title}"></h2>
   <div class="${ee["html-container"]}" id="${ee["html-container"]}"></div>
   <input class="${ee.input}" id="${ee.input}" />
   <input type="file" class="${ee.file}" />
   <div class="${ee.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${ee.select}" id="${ee.select}"></select>
   <div class="${ee.radio}"></div>
   <label class="${ee.checkbox}">
     <input type="checkbox" id="${ee.checkbox}" />
     <span class="${ee.label}"></span>
   </label>
   <textarea class="${ee.textarea}" id="${ee.textarea}"></textarea>
   <div class="${ee["validation-message"]}" id="${ee["validation-message"]}"></div>
   <div class="${ee.actions}">
     <div class="${ee.loader}"></div>
     <button type="button" class="${ee.confirm}"></button>
     <button type="button" class="${ee.deny}"></button>
     <button type="button" class="${ee.cancel}"></button>
   </div>
   <div class="${ee.footer}"></div>
   <div class="${ee["timer-progress-bar-container"]}">
     <div class="${ee["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),B9=()=>{const n=es();return n?(n.remove(),Js([document.documentElement,document.body],[ee["no-backdrop"],ee["toast-shown"],ee["has-column"]]),!0):!1},So=()=>{ke.currentInstance.resetValidationMessage()},z9=()=>{const n=lt(),e=Ea(n,ee.input),t=Ea(n,ee.file),s=n.querySelector(`.${ee.range} input`),a=n.querySelector(`.${ee.range} output`),l=Ea(n,ee.select),c=n.querySelector(`.${ee.checkbox} input`),f=Ea(n,ee.textarea);e.oninput=So,t.onchange=So,l.onchange=So,c.onchange=So,f.oninput=So,s.oninput=()=>{So(),a.value=s.value},s.onchange=()=>{So(),a.value=s.value}},q9=n=>typeof n=="string"?document.querySelector(n):n,H9=n=>{const e=lt();e.setAttribute("role",n.toast?"alert":"dialog"),e.setAttribute("aria-live",n.toast?"polite":"assertive"),n.toast||e.setAttribute("aria-modal","true")},$9=n=>{window.getComputedStyle(n).direction==="rtl"&&(ht(es(),ee.rtl),ke.isRTL=!0)},F9=n=>{const e=B9();if(V9()){Xo("SweetAlert2 requires document to initialize");return}const t=document.createElement("div");t.className=ee.container,e&&ht(t,ee["no-transition"]),Ms(t,U9),t.dataset.swal2Theme=n.theme;const s=q9(n.target);s.appendChild(t),n.topLayer&&(t.setAttribute("popover",""),t.showPopover()),H9(n),$9(s),z9()},Qv=(n,e)=>{n instanceof HTMLElement?e.appendChild(n):typeof n=="object"?G9(n,e):n&&Ms(e,n)},G9=(n,e)=>{n.jquery?K9(e,n):Ms(e,n.toString())},K9=(n,e)=>{if(n.textContent="",0 in e)for(let t=0;t in e;t++)n.appendChild(e[t].cloneNode(!0));else n.appendChild(e.cloneNode(!0))},Q9=(n,e)=>{const t=Dd(),s=Uc();!t||!s||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?Gn(t):Sn(t),Ds(t,e,"actions"),Y9(t,s,e),Ms(s,e.loaderHtml||""),Ds(s,e,"loader"))};function Y9(n,e,t){const s=Xr(),a=Jo(),l=Vc();!s||!a||!l||(j0(s,"confirm",t),j0(a,"deny",t),j0(l,"cancel",t),W9(s,a,l,t),t.reverseButtons&&(t.toast?(n.insertBefore(l,s),n.insertBefore(a,s)):(n.insertBefore(l,e),n.insertBefore(a,e),n.insertBefore(s,e))))}function W9(n,e,t,s){if(!s.buttonsStyling){Js([n,e,t],ee.styled);return}ht([n,e,t],ee.styled),s.confirmButtonColor&&n.style.setProperty("--swal2-confirm-button-background-color",s.confirmButtonColor),s.denyButtonColor&&e.style.setProperty("--swal2-deny-button-background-color",s.denyButtonColor),s.cancelButtonColor&&t.style.setProperty("--swal2-cancel-button-background-color",s.cancelButtonColor),I0(n),I0(e),I0(t)}function I0(n){const e=window.getComputedStyle(n);if(e.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const t=e.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");n.style.setProperty("--swal2-action-button-focus-box-shadow",e.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${t}`))}function j0(n,e,t){const s=Vv(e);Pd(n,t[`show${s}Button`],"inline-block"),Ms(n,t[`${e}ButtonText`]||""),n.setAttribute("aria-label",t[`${e}ButtonAriaLabel`]||""),n.className=ee[e],Ds(n,t,`${e}Button`)}const X9=(n,e)=>{const t=Hv();t&&(Ms(t,e.closeButtonHtml||""),Ds(t,e,"closeButton"),Pd(t,e.showCloseButton),t.setAttribute("aria-label",e.closeButtonAriaLabel||""))},J9=(n,e)=>{const t=es();t&&(Z9(t,e.backdrop),eP(t,e.position),tP(t,e.grow),Ds(t,e,"container"))};function Z9(n,e){typeof e=="string"?n.style.background=e:e||ht([document.documentElement,document.body],ee["no-backdrop"])}function eP(n,e){e&&(e in ee?ht(n,ee[e]):(Zn('The "position" parameter is not valid, defaulting to "center"'),ht(n,ee.center)))}function tP(n,e){e&&ht(n,ee[`grow-${e}`])}var Ct={innerParams:new WeakMap,domCache:new WeakMap};const nP=["input","file","range","select","radio","checkbox","textarea"],sP=(n,e)=>{const t=lt();if(!t)return;const s=Ct.innerParams.get(n),a=!s||e.input!==s.input;nP.forEach(l=>{const c=Ea(t,ee[l]);c&&(aP(l,e.inputAttributes),c.className=ee[l],a&&Gn(c))}),e.input&&(a&&rP(e),oP(e))},rP=n=>{if(!n.input)return;if(!Jt[n.input]){Xo(`Unexpected type of input! Expected ${Object.keys(Jt).join(" | ")}, got "${n.input}"`);return}const e=r5(n.input);if(!e)return;const t=Jt[n.input](e,n);Sn(e),n.inputAutoFocus&&setTimeout(()=>{t5(t)})},iP=n=>{for(let e=0;e<n.attributes.length;e++){const t=n.attributes[e].name;["id","type","value","style"].includes(t)||n.removeAttribute(t)}},aP=(n,e)=>{const t=lt();if(!t)return;const s=ag(t,n);if(s){iP(s);for(const a in e)s.setAttribute(a,e[a])}},oP=n=>{if(!n.input)return;const e=r5(n.input);e&&Ds(e,n,"input")},Yv=(n,e)=>{!n.placeholder&&e.inputPlaceholder&&(n.placeholder=e.inputPlaceholder)},Md=(n,e,t)=>{if(t.inputLabel){const s=document.createElement("label"),a=ee["input-label"];s.setAttribute("for",n.id),s.className=a,typeof t.customClass=="object"&&ht(s,t.customClass.inputLabel),s.innerText=t.inputLabel,e.insertAdjacentElement("beforebegin",s)}},r5=n=>{const e=lt();if(e)return Ea(e,ee[n]||ee.input)},dm=(n,e)=>{["string","number"].includes(typeof e)?n.value=`${e}`:Bv(e)||Zn(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},Jt={};Jt.text=Jt.email=Jt.password=Jt.number=Jt.tel=Jt.url=Jt.search=Jt.date=Jt["datetime-local"]=Jt.time=Jt.week=Jt.month=(n,e)=>(dm(n,e.inputValue),Md(n,n,e),Yv(n,e),n.type=e.input,n);Jt.file=(n,e)=>(Md(n,n,e),Yv(n,e),n);Jt.range=(n,e)=>{const t=n.querySelector("input"),s=n.querySelector("output");return dm(t,e.inputValue),t.type=e.input,dm(s,e.inputValue),Md(t,n,e),n};Jt.select=(n,e)=>{if(n.textContent="",e.inputPlaceholder){const t=document.createElement("option");Ms(t,e.inputPlaceholder),t.value="",t.disabled=!0,t.selected=!0,n.appendChild(t)}return Md(n,n,e),n};Jt.radio=n=>(n.textContent="",n);Jt.checkbox=(n,e)=>{const t=ag(lt(),"checkbox");t.value="1",t.checked=!!e.inputValue;const s=n.querySelector("span");return Ms(s,e.inputPlaceholder||e.inputLabel),t};Jt.textarea=(n,e)=>{dm(n,e.inputValue),Yv(n,e),Md(n,n,e);const t=s=>parseInt(window.getComputedStyle(s).marginLeft)+parseInt(window.getComputedStyle(s).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const s=parseInt(window.getComputedStyle(lt()).width),a=()=>{if(!document.body.contains(n))return;const l=n.offsetWidth+t(n);l>s?lt().style.width=`${l}px`:Po(lt(),"width",e.width)};new MutationObserver(a).observe(n,{attributes:!0,attributeFilter:["style"]})}}),n};const lP=(n,e)=>{const t=zv();t&&(Gv(t),Ds(t,e,"htmlContainer"),e.html?(Qv(e.html,t),Sn(t,"block")):e.text?(t.textContent=e.text,Sn(t,"block")):Gn(t),sP(n,e))},cP=(n,e)=>{const t=e5();t&&(Gv(t),Pd(t,!!e.footer,"block"),e.footer&&Qv(e.footer,t),Ds(t,e,"footer"))},uP=(n,e)=>{const t=Ct.innerParams.get(n),s=Lc();if(!s)return;if(t&&e.icon===t.icon){Zx(s,e),Jx(s,e);return}if(!e.icon&&!e.iconHtml){Gn(s);return}if(e.icon&&Object.keys(um).indexOf(e.icon)===-1){Xo(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),Gn(s);return}Sn(s),Zx(s,e),Jx(s,e),ht(s,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",i5)},Jx=(n,e)=>{for(const[t,s]of Object.entries(um))e.icon!==t&&Js(n,s);ht(n,e.icon&&um[e.icon]),fP(n,e),i5(),Ds(n,e,"icon")},i5=()=>{const n=lt();if(!n)return;const e=window.getComputedStyle(n).getPropertyValue("background-color"),t=n.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let s=0;s<t.length;s++)t[s].style.backgroundColor=e},dP=n=>`
  ${n.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${n.animation?'<div class="swal2-success-fix"></div>':""}
  ${n.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,hP=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Zx=(n,e)=>{if(!e.icon&&!e.iconHtml)return;let t=n.innerHTML,s="";e.iconHtml?s=eE(e.iconHtml):e.icon==="success"?(s=dP(e),t=t.replace(/ style=".*?"/g,"")):e.icon==="error"?s=hP:e.icon&&(s=eE({question:"?",warning:"!",info:"i"}[e.icon])),t.trim()!==s.trim()&&Ms(n,s)},fP=(n,e)=>{if(e.iconColor){n.style.color=e.iconColor,n.style.borderColor=e.iconColor;for(const t of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Xx(n,t,"background-color",e.iconColor);Xx(n,".swal2-success-ring","border-color",e.iconColor)}},eE=n=>`<div class="${ee["icon-content"]}">${n}</div>`,mP=(n,e)=>{const t=Z4();if(t){if(!e.imageUrl){Gn(t);return}Sn(t,""),t.setAttribute("src",e.imageUrl),t.setAttribute("alt",e.imageAlt||""),Po(t,"width",e.imageWidth),Po(t,"height",e.imageHeight),t.className=ee.image,Ds(t,e,"image")}};let Wv=!1,a5=0,o5=0,l5=0,c5=0;const gP=n=>{n.addEventListener("mousedown",hm),document.body.addEventListener("mousemove",fm),n.addEventListener("mouseup",mm),n.addEventListener("touchstart",hm),document.body.addEventListener("touchmove",fm),n.addEventListener("touchend",mm)},pP=n=>{n.removeEventListener("mousedown",hm),document.body.removeEventListener("mousemove",fm),n.removeEventListener("mouseup",mm),n.removeEventListener("touchstart",hm),document.body.removeEventListener("touchmove",fm),n.removeEventListener("touchend",mm)},hm=n=>{const e=lt();if(n.target===e||Lc().contains(n.target)){Wv=!0;const t=u5(n);a5=t.clientX,o5=t.clientY,l5=parseInt(e.style.insetInlineStart)||0,c5=parseInt(e.style.insetBlockStart)||0,ht(e,"swal2-dragging")}},fm=n=>{const e=lt();if(Wv){let{clientX:t,clientY:s}=u5(n);const a=t-a5;e.style.insetInlineStart=`${l5+(ke.isRTL?-a:a)}px`,e.style.insetBlockStart=`${c5+(s-o5)}px`}},mm=()=>{const n=lt();Wv=!1,Js(n,"swal2-dragging")},u5=n=>{let e=0,t=0;return n.type.startsWith("mouse")?(e=n.clientX,t=n.clientY):n.type.startsWith("touch")&&(e=n.touches[0].clientX,t=n.touches[0].clientY),{clientX:e,clientY:t}},yP=(n,e)=>{const t=es(),s=lt();if(!(!t||!s)){if(e.toast){Po(t,"width",e.width),s.style.width="100%";const a=Uc();a&&s.insertBefore(a,Lc())}else Po(s,"width",e.width);Po(s,"padding",e.padding),e.color&&(s.style.color=e.color),e.background&&(s.style.background=e.background),Gn(sg()),vP(s,e),e.draggable&&!e.toast?(ht(s,ee.draggable),gP(s)):(Js(s,ee.draggable),pP(s))}},vP=(n,e)=>{const t=e.showClass||{};n.className=`${ee.popup} ${hs(n)?t.popup:""}`,e.toast?(ht([document.documentElement,document.body],ee["toast-shown"]),ht(n,ee.toast)):ht(n,ee.modal),Ds(n,e,"popup"),typeof e.customClass=="string"&&ht(n,e.customClass),e.icon&&ht(n,ee[`icon-${e.icon}`])},bP=(n,e)=>{const t=qv();if(!t)return;const{progressSteps:s,currentProgressStep:a}=e;if(!s||s.length===0||a===void 0){Gn(t);return}Sn(t),t.textContent="",a>=s.length&&Zn("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),s.forEach((l,c)=>{const f=wP(l);if(t.appendChild(f),c===a&&ht(f,ee["active-progress-step"]),c!==s.length-1){const g=_P(e);t.appendChild(g)}})},wP=n=>{const e=document.createElement("li");return ht(e,ee["progress-step"]),Ms(e,n),e},_P=n=>{const e=document.createElement("li");return ht(e,ee["progress-step-line"]),n.progressStepsDistance&&Po(e,"width",n.progressStepsDistance),e},xP=(n,e)=>{const t=J4();t&&(Gv(t),Pd(t,!!(e.title||e.titleText),"block"),e.title&&Qv(e.title,t),e.titleText&&(t.innerText=e.titleText),Ds(t,e,"title"))},d5=(n,e)=>{yP(n,e),J9(n,e),bP(n,e),uP(n,e),mP(n,e),xP(n,e),X9(n,e),lP(n,e),Q9(n,e),cP(n,e);const t=lt();typeof e.didRender=="function"&&t&&e.didRender(t),ke.eventEmitter.emit("didRender",t)},EP=()=>hs(lt()),h5=()=>{var n;return(n=Xr())===null||n===void 0?void 0:n.click()},TP=()=>{var n;return(n=Jo())===null||n===void 0?void 0:n.click()},SP=()=>{var n;return(n=Vc())===null||n===void 0?void 0:n.click()},Bc=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),f5=n=>{n.keydownTarget&&n.keydownHandlerAdded&&(n.keydownTarget.removeEventListener("keydown",n.keydownHandler,{capture:n.keydownListenerCapture}),n.keydownHandlerAdded=!1)},AP=(n,e,t)=>{f5(n),e.toast||(n.keydownHandler=s=>CP(e,s,t),n.keydownTarget=e.keydownListenerCapture?window:lt(),n.keydownListenerCapture=e.keydownListenerCapture,n.keydownTarget.addEventListener("keydown",n.keydownHandler,{capture:n.keydownListenerCapture}),n.keydownHandlerAdded=!0)},Ay=(n,e)=>{var t;const s=$v();if(s.length){n=n+e,n===-2&&(n=s.length-1),n===s.length?n=0:n===-1&&(n=s.length-1),s[n].focus();return}(t=lt())===null||t===void 0||t.focus()},m5=["ArrowRight","ArrowDown"],NP=["ArrowLeft","ArrowUp"],CP=(n,e,t)=>{n&&(e.isComposing||e.keyCode===229||(n.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?kP(e,n):e.key==="Tab"?RP(e):[...m5,...NP].includes(e.key)?IP(e.key):e.key==="Escape"&&jP(e,n,t)))},kP=(n,e)=>{if(!ng(e.allowEnterKey))return;const t=ag(lt(),e.input);if(n.target&&t&&n.target instanceof HTMLElement&&n.target.outerHTML===t.outerHTML){if(["textarea","file"].includes(e.input))return;h5(),n.preventDefault()}},RP=n=>{const e=n.target,t=$v();let s=-1;for(let a=0;a<t.length;a++)if(e===t[a]){s=a;break}n.shiftKey?Ay(s,-1):Ay(s,1),n.stopPropagation(),n.preventDefault()},IP=n=>{const e=Dd(),t=Xr(),s=Jo(),a=Vc();if(!e||!t||!s||!a)return;const l=[t,s,a];if(document.activeElement instanceof HTMLElement&&!l.includes(document.activeElement))return;const c=m5.includes(n)?"nextElementSibling":"previousElementSibling";let f=document.activeElement;if(f){for(let g=0;g<e.children.length;g++){if(f=f[c],!f)return;if(f instanceof HTMLButtonElement&&hs(f))break}f instanceof HTMLButtonElement&&f.focus()}},jP=(n,e,t)=>{n.preventDefault(),ng(e.allowEscapeKey)&&t(Bc.esc)};var Ec={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const OP=()=>{const n=es();Array.from(document.body.children).forEach(t=>{t.contains(n)||(t.hasAttribute("aria-hidden")&&t.setAttribute("data-previous-aria-hidden",t.getAttribute("aria-hidden")||""),t.setAttribute("aria-hidden","true"))})},g5=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},p5=typeof window<"u"&&!!window.GestureEvent,DP=()=>{if(p5&&!Si(document.body,ee.iosfix)){const n=document.body.scrollTop;document.body.style.top=`${n*-1}px`,ht(document.body,ee.iosfix),PP()}},PP=()=>{const n=es();if(!n)return;let e;n.ontouchstart=t=>{e=MP(t)},n.ontouchmove=t=>{e&&(t.preventDefault(),t.stopPropagation())}},MP=n=>{const e=n.target,t=es(),s=zv();return!t||!s||LP(n)||VP(n)?!1:e===t||!Sy(t)&&e instanceof HTMLElement&&!M9(e,s)&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(Sy(s)&&s.contains(e))},LP=n=>n.touches&&n.touches.length&&n.touches[0].touchType==="stylus",VP=n=>n.touches&&n.touches.length>1,UP=()=>{if(Si(document.body,ee.iosfix)){const n=parseInt(document.body.style.top,10);Js(document.body,ee.iosfix),document.body.style.top="",document.body.scrollTop=n*-1}},BP=()=>{const n=document.createElement("div");n.className=ee["scrollbar-measure"],document.body.appendChild(n);const e=n.getBoundingClientRect().width-n.clientWidth;return document.body.removeChild(n),e};let dc=null;const zP=n=>{dc===null&&(document.body.scrollHeight>window.innerHeight||n==="scroll")&&(dc=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${dc+BP()}px`)},qP=()=>{dc!==null&&(document.body.style.paddingRight=`${dc}px`,dc=null)};function y5(n,e,t,s){ig()?tE(n,s):(A9(t).then(()=>tE(n,s)),f5(ke)),p5?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),Fv()&&(qP(),UP(),g5()),HP()}function HP(){Js([document.documentElement,document.body],[ee.shown,ee["height-auto"],ee["no-backdrop"],ee["toast-shown"]])}function Ta(n){n=FP(n);const e=Ec.swalPromiseResolve.get(this),t=$P(this);this.isAwaitingPromise?n.isDismissed||(Ld(this),e(n)):t&&e(n)}const $P=n=>{const e=lt();if(!e)return!1;const t=Ct.innerParams.get(n);if(!t||Si(e,t.hideClass.popup))return!1;Js(e,t.showClass.popup),ht(e,t.hideClass.popup);const s=es();return Js(s,t.showClass.backdrop),ht(s,t.hideClass.backdrop),GP(n,e,t),!0};function v5(n){const e=Ec.swalPromiseReject.get(this);Ld(this),e&&e(n)}const Ld=n=>{n.isAwaitingPromise&&(delete n.isAwaitingPromise,Ct.innerParams.get(n)||n._destroy())},FP=n=>typeof n>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},n),GP=(n,e,t)=>{var s;const a=es(),l=s5(e);typeof t.willClose=="function"&&t.willClose(e),(s=ke.eventEmitter)===null||s===void 0||s.emit("willClose",e),l?KP(n,e,a,t.returnFocus,t.didClose):y5(n,a,t.returnFocus,t.didClose)},KP=(n,e,t,s,a)=>{ke.swalCloseEventFinishedCallback=y5.bind(null,n,t,s,a);const l=function(c){if(c.target===e){var f;(f=ke.swalCloseEventFinishedCallback)===null||f===void 0||f.call(ke),delete ke.swalCloseEventFinishedCallback,e.removeEventListener("animationend",l),e.removeEventListener("transitionend",l)}};e.addEventListener("animationend",l),e.addEventListener("transitionend",l)},tE=(n,e)=>{setTimeout(()=>{var t;typeof e=="function"&&e.bind(n.params)(),(t=ke.eventEmitter)===null||t===void 0||t.emit("didClose"),n._destroy&&n._destroy()})},Tc=n=>{let e=lt();if(e||new Sc,e=lt(),!e)return;const t=Uc();ig()?Gn(Lc()):QP(e,n),Sn(t),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},QP=(n,e)=>{const t=Dd(),s=Uc();!t||!s||(!e&&hs(Xr())&&(e=Xr()),Sn(t),e&&(Gn(e),s.setAttribute("data-button-to-replace",e.className),t.insertBefore(s,e)),ht([n,t],ee.loading))},YP=(n,e)=>{e.input==="select"||e.input==="radio"?eM(n,e):["text","email","number","tel","textarea"].some(t=>t===e.input)&&(Uv(e.inputValue)||Bv(e.inputValue))&&(Tc(Xr()),tM(n,e))},WP=(n,e)=>{const t=n.getInput();if(!t)return null;switch(e.input){case"checkbox":return XP(t);case"radio":return JP(t);case"file":return ZP(t);default:return e.inputAutoTrim?t.value.trim():t.value}},XP=n=>n.checked?1:0,JP=n=>n.checked?n.value:null,ZP=n=>n.files&&n.files.length?n.getAttribute("multiple")!==null?n.files:n.files[0]:null,eM=(n,e)=>{const t=lt();if(!t)return;const s=a=>{e.input==="select"?nM(t,gm(a),e):e.input==="radio"&&sM(t,gm(a),e)};Uv(e.inputOptions)||Bv(e.inputOptions)?(Tc(Xr()),jd(e.inputOptions).then(a=>{n.hideLoading(),s(a)})):typeof e.inputOptions=="object"?s(e.inputOptions):Xo(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},tM=(n,e)=>{const t=n.getInput();t&&(Gn(t),jd(e.inputValue).then(s=>{t.value=e.input==="number"?`${parseFloat(s)||0}`:`${s}`,Sn(t),t.focus(),n.hideLoading()}).catch(s=>{Xo(`Error in inputValue promise: ${s}`),t.value="",Sn(t),t.focus(),n.hideLoading()}))};function nM(n,e,t){const s=Ea(n,ee.select);if(!s)return;const a=(l,c,f)=>{const g=document.createElement("option");g.value=f,Ms(g,c),g.selected=b5(f,t.inputValue),l.appendChild(g)};e.forEach(l=>{const c=l[0],f=l[1];if(Array.isArray(f)){const g=document.createElement("optgroup");g.label=c,g.disabled=!1,s.appendChild(g),f.forEach(y=>a(g,y[1],y[0]))}else a(s,f,c)}),s.focus()}function sM(n,e,t){const s=Ea(n,ee.radio);if(!s)return;e.forEach(l=>{const c=l[0],f=l[1],g=document.createElement("input"),y=document.createElement("label");g.type="radio",g.name=ee.radio,g.value=c,b5(c,t.inputValue)&&(g.checked=!0);const v=document.createElement("span");Ms(v,f),v.className=ee.label,y.appendChild(g),y.appendChild(v),s.appendChild(y)});const a=s.querySelectorAll("input");a.length&&a[0].focus()}const gm=n=>{const e=[];return n instanceof Map?n.forEach((t,s)=>{let a=t;typeof a=="object"&&(a=gm(a)),e.push([s,a])}):Object.keys(n).forEach(t=>{let s=n[t];typeof s=="object"&&(s=gm(s)),e.push([t,s])}),e},b5=(n,e)=>!!e&&e.toString()===n.toString(),rM=n=>{const e=Ct.innerParams.get(n);n.disableButtons(),e.input?w5(n,"confirm"):Jv(n,!0)},iM=n=>{const e=Ct.innerParams.get(n);n.disableButtons(),e.returnInputValueOnDeny?w5(n,"deny"):Xv(n,!1)},aM=(n,e)=>{n.disableButtons(),e(Bc.cancel)},w5=(n,e)=>{const t=Ct.innerParams.get(n);if(!t.input){Xo(`The "input" parameter is needed to be set when using returnInputValueOn${Vv(e)}`);return}const s=n.getInput(),a=WP(n,t);t.inputValidator?oM(n,a,e):s&&!s.checkValidity()?(n.enableButtons(),n.showValidationMessage(t.validationMessage||s.validationMessage)):e==="deny"?Xv(n,a):Jv(n,a)},oM=(n,e,t)=>{const s=Ct.innerParams.get(n);n.disableInput(),Promise.resolve().then(()=>jd(s.inputValidator(e,s.validationMessage))).then(l=>{n.enableButtons(),n.enableInput(),l?n.showValidationMessage(l):t==="deny"?Xv(n,e):Jv(n,e)})},Xv=(n,e)=>{const t=Ct.innerParams.get(n||void 0);t.showLoaderOnDeny&&Tc(Jo()),t.preDeny?(n.isAwaitingPromise=!0,Promise.resolve().then(()=>jd(t.preDeny(e,t.validationMessage))).then(a=>{a===!1?(n.hideLoading(),Ld(n)):n.close({isDenied:!0,value:typeof a>"u"?e:a})}).catch(a=>_5(n||void 0,a))):n.close({isDenied:!0,value:e})},nE=(n,e)=>{n.close({isConfirmed:!0,value:e})},_5=(n,e)=>{n.rejectPromise(e)},Jv=(n,e)=>{const t=Ct.innerParams.get(n||void 0);t.showLoaderOnConfirm&&Tc(),t.preConfirm?(n.resetValidationMessage(),n.isAwaitingPromise=!0,Promise.resolve().then(()=>jd(t.preConfirm(e,t.validationMessage))).then(a=>{hs(sg())||a===!1?(n.hideLoading(),Ld(n)):nE(n,typeof a>"u"?e:a)}).catch(a=>_5(n||void 0,a))):nE(n,e)};function pm(){const n=Ct.innerParams.get(this);if(!n)return;const e=Ct.domCache.get(this);Gn(e.loader),ig()?n.icon&&Sn(Lc()):lM(e),Js([e.popup,e.actions],ee.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const lM=n=>{const e=n.popup.getElementsByClassName(n.loader.getAttribute("data-button-to-replace"));e.length?Sn(e[0],"inline-block"):P9()&&Gn(n.actions)};function x5(){const n=Ct.innerParams.get(this),e=Ct.domCache.get(this);return e?ag(e.popup,n.input):null}function E5(n,e,t){const s=Ct.domCache.get(n);e.forEach(a=>{s[a].disabled=t})}function T5(n,e){const t=lt();if(!(!t||!n))if(n.type==="radio"){const s=t.querySelectorAll(`[name="${ee.radio}"]`);for(let a=0;a<s.length;a++)s[a].disabled=e}else n.disabled=e}function S5(){E5(this,["confirmButton","denyButton","cancelButton"],!1)}function A5(){E5(this,["confirmButton","denyButton","cancelButton"],!0)}function N5(){T5(this.getInput(),!1)}function C5(){T5(this.getInput(),!0)}function k5(n){const e=Ct.domCache.get(this),t=Ct.innerParams.get(this);Ms(e.validationMessage,n),e.validationMessage.className=ee["validation-message"],t.customClass&&t.customClass.validationMessage&&ht(e.validationMessage,t.customClass.validationMessage),Sn(e.validationMessage);const s=this.getInput();s&&(s.setAttribute("aria-invalid","true"),s.setAttribute("aria-describedby",ee["validation-message"]),t5(s),ht(s,ee.inputerror))}function R5(){const n=Ct.domCache.get(this);n.validationMessage&&Gn(n.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),Js(e,ee.inputerror))}const hc={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},cM=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],uM={allowEnterKey:void 0},dM=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],I5=n=>Object.prototype.hasOwnProperty.call(hc,n),j5=n=>cM.indexOf(n)!==-1,O5=n=>uM[n],hM=n=>{I5(n)||Zn(`Unknown parameter "${n}"`)},fM=n=>{dM.includes(n)&&Zn(`The parameter "${n}" is incompatible with toasts`)},mM=n=>{const e=O5(n);e&&X4(n,e)},D5=n=>{n.backdrop===!1&&n.allowOutsideClick&&Zn('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),n.theme&&!["light","dark","auto","minimal","borderless","bootstrap-4","bootstrap-4-light","bootstrap-4-dark","bootstrap-5","bootstrap-5-light","bootstrap-5-dark","material-ui","material-ui-light","material-ui-dark","embed-iframe","bulma","bulma-light","bulma-dark"].includes(n.theme)&&Zn(`Invalid theme "${n.theme}"`);for(const e in n)hM(e),n.toast&&fM(e),mM(e)};function P5(n){const e=es(),t=lt(),s=Ct.innerParams.get(this);if(!t||Si(t,s.hideClass.popup)){Zn("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const a=gM(n),l=Object.assign({},s,a);D5(l),e.dataset.swal2Theme=l.theme,d5(this,l),Ct.innerParams.set(this,l),Object.defineProperties(this,{params:{value:Object.assign({},this.params,n),writable:!1,enumerable:!0}})}const gM=n=>{const e={};return Object.keys(n).forEach(t=>{j5(t)?e[t]=n[t]:Zn(`Invalid parameter to update: ${t}`)}),e};function M5(){const n=Ct.domCache.get(this),e=Ct.innerParams.get(this);if(!e){L5(this);return}n.popup&&ke.swalCloseEventFinishedCallback&&(ke.swalCloseEventFinishedCallback(),delete ke.swalCloseEventFinishedCallback),typeof e.didDestroy=="function"&&e.didDestroy(),ke.eventEmitter.emit("didDestroy"),pM(this)}const pM=n=>{L5(n),delete n.params,delete ke.keydownHandler,delete ke.keydownTarget,delete ke.currentInstance},L5=n=>{n.isAwaitingPromise?(O0(Ct,n),n.isAwaitingPromise=!0):(O0(Ec,n),O0(Ct,n),delete n.isAwaitingPromise,delete n.disableButtons,delete n.enableButtons,delete n.getInput,delete n.disableInput,delete n.enableInput,delete n.hideLoading,delete n.disableLoading,delete n.showValidationMessage,delete n.resetValidationMessage,delete n.close,delete n.closePopup,delete n.closeModal,delete n.closeToast,delete n.rejectPromise,delete n.update,delete n._destroy)},O0=(n,e)=>{for(const t in n)n[t].delete(e)};var yM=Object.freeze({__proto__:null,_destroy:M5,close:Ta,closeModal:Ta,closePopup:Ta,closeToast:Ta,disableButtons:A5,disableInput:C5,disableLoading:pm,enableButtons:S5,enableInput:N5,getInput:x5,handleAwaitingPromise:Ld,hideLoading:pm,rejectPromise:v5,resetValidationMessage:R5,showValidationMessage:k5,update:P5});const vM=(n,e,t)=>{n.toast?bM(n,e,t):(_M(e),xM(e),EM(n,e,t))},bM=(n,e,t)=>{e.popup.onclick=()=>{n&&(wM(n)||n.timer||n.input)||t(Bc.close)}},wM=n=>!!(n.showConfirmButton||n.showDenyButton||n.showCancelButton||n.showCloseButton);let ym=!1;const _M=n=>{n.popup.onmousedown=()=>{n.container.onmouseup=function(e){n.container.onmouseup=()=>{},e.target===n.container&&(ym=!0)}}},xM=n=>{n.container.onmousedown=e=>{e.target===n.container&&e.preventDefault(),n.popup.onmouseup=function(t){n.popup.onmouseup=()=>{},(t.target===n.popup||t.target instanceof HTMLElement&&n.popup.contains(t.target))&&(ym=!0)}}},EM=(n,e,t)=>{e.container.onclick=s=>{if(ym){ym=!1;return}s.target===e.container&&ng(n.allowOutsideClick)&&t(Bc.backdrop)}},TM=n=>typeof n=="object"&&n.jquery,sE=n=>n instanceof Element||TM(n),SM=n=>{const e={};return typeof n[0]=="object"&&!sE(n[0])?Object.assign(e,n[0]):["title","html","icon"].forEach((t,s)=>{const a=n[s];typeof a=="string"||sE(a)?e[t]=a:a!==void 0&&Xo(`Unexpected type of ${t}! Expected "string" or "Element", got ${typeof a}`)}),e};function AM(...n){return new this(...n)}function NM(n){class e extends this{_main(s,a){return super._main(s,Object.assign({},n,a))}}return e}const CM=()=>ke.timeout&&ke.timeout.getTimerLeft(),V5=()=>{if(ke.timeout)return L9(),ke.timeout.stop()},U5=()=>{if(ke.timeout){const n=ke.timeout.start();return Kv(n),n}},kM=()=>{const n=ke.timeout;return n&&(n.running?V5():U5())},RM=n=>{if(ke.timeout){const e=ke.timeout.increase(n);return Kv(e,!0),e}},IM=()=>!!(ke.timeout&&ke.timeout.isRunning());let rE=!1;const Ny={};function jM(n="data-swal-template"){Ny[n]=this,rE||(document.body.addEventListener("click",OM),rE=!0)}const OM=n=>{for(let e=n.target;e&&e!==document;e=e.parentNode)for(const t in Ny){const s=e.getAttribute(t);if(s){Ny[t].fire({template:s});return}}};class DM{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,t){const s=this._getHandlersByEventName(e);s.includes(t)||s.push(t)}once(e,t){const s=(...a)=>{this.removeListener(e,s),t.apply(this,a)};this.on(e,s)}emit(e,...t){this._getHandlersByEventName(e).forEach(s=>{try{s.apply(this,t)}catch(a){console.error(a)}})}removeListener(e,t){const s=this._getHandlersByEventName(e),a=s.indexOf(t);a>-1&&s.splice(a,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}}ke.eventEmitter=new DM;const PM=(n,e)=>{ke.eventEmitter.on(n,e)},MM=(n,e)=>{ke.eventEmitter.once(n,e)},LM=(n,e)=>{if(!n){ke.eventEmitter.reset();return}e?ke.eventEmitter.removeListener(n,e):ke.eventEmitter.removeAllListeners(n)};var VM=Object.freeze({__proto__:null,argsToParams:SM,bindClickHandler:jM,clickCancel:SP,clickConfirm:h5,clickDeny:TP,enableLoading:Tc,fire:AM,getActions:Dd,getCancelButton:Vc,getCloseButton:Hv,getConfirmButton:Xr,getContainer:es,getDenyButton:Jo,getFocusableElements:$v,getFooter:e5,getHtmlContainer:zv,getIcon:Lc,getIconContent:R9,getImage:Z4,getInputLabel:I9,getLoader:Uc,getPopup:lt,getProgressSteps:qv,getTimerLeft:CM,getTimerProgressBar:rg,getTitle:J4,getValidationMessage:sg,increaseTimer:RM,isDeprecatedParameter:O5,isLoading:O9,isTimerRunning:IM,isUpdatableParameter:j5,isValidParameter:I5,isVisible:EP,mixin:NM,off:LM,on:PM,once:MM,resumeTimer:U5,showLoading:Tc,stopTimer:V5,toggleTimer:kM});class UM{constructor(e,t){this.callback=e,this.remaining=t,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const t=this.running;return t&&this.stop(),this.remaining+=e,t&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const B5=["swal-title","swal-html","swal-footer"],BM=n=>{const e=typeof n.template=="string"?document.querySelector(n.template):n.template;if(!e)return{};const t=e.content;return QM(t),Object.assign(zM(t),qM(t),HM(t),$M(t),FM(t),GM(t),KM(t,B5))},zM=n=>{const e={};return Array.from(n.querySelectorAll("swal-param")).forEach(s=>{qo(s,["name","value"]);const a=s.getAttribute("name"),l=s.getAttribute("value");!a||!l||(typeof hc[a]=="boolean"?e[a]=l!=="false":typeof hc[a]=="object"?e[a]=JSON.parse(l):e[a]=l)}),e},qM=n=>{const e={};return Array.from(n.querySelectorAll("swal-function-param")).forEach(s=>{const a=s.getAttribute("name"),l=s.getAttribute("value");!a||!l||(e[a]=new Function(`return ${l}`)())}),e},HM=n=>{const e={};return Array.from(n.querySelectorAll("swal-button")).forEach(s=>{qo(s,["type","color","aria-label"]);const a=s.getAttribute("type");!a||!["confirm","cancel","deny"].includes(a)||(e[`${a}ButtonText`]=s.innerHTML,e[`show${Vv(a)}Button`]=!0,s.hasAttribute("color")&&(e[`${a}ButtonColor`]=s.getAttribute("color")),s.hasAttribute("aria-label")&&(e[`${a}ButtonAriaLabel`]=s.getAttribute("aria-label")))}),e},$M=n=>{const e={},t=n.querySelector("swal-image");return t&&(qo(t,["src","width","height","alt"]),t.hasAttribute("src")&&(e.imageUrl=t.getAttribute("src")||void 0),t.hasAttribute("width")&&(e.imageWidth=t.getAttribute("width")||void 0),t.hasAttribute("height")&&(e.imageHeight=t.getAttribute("height")||void 0),t.hasAttribute("alt")&&(e.imageAlt=t.getAttribute("alt")||void 0)),e},FM=n=>{const e={},t=n.querySelector("swal-icon");return t&&(qo(t,["type","color"]),t.hasAttribute("type")&&(e.icon=t.getAttribute("type")),t.hasAttribute("color")&&(e.iconColor=t.getAttribute("color")),e.iconHtml=t.innerHTML),e},GM=n=>{const e={},t=n.querySelector("swal-input");t&&(qo(t,["type","label","placeholder","value"]),e.input=t.getAttribute("type")||"text",t.hasAttribute("label")&&(e.inputLabel=t.getAttribute("label")),t.hasAttribute("placeholder")&&(e.inputPlaceholder=t.getAttribute("placeholder")),t.hasAttribute("value")&&(e.inputValue=t.getAttribute("value")));const s=Array.from(n.querySelectorAll("swal-input-option"));return s.length&&(e.inputOptions={},s.forEach(a=>{qo(a,["value"]);const l=a.getAttribute("value");if(!l)return;const c=a.innerHTML;e.inputOptions[l]=c})),e},KM=(n,e)=>{const t={};for(const s in e){const a=e[s],l=n.querySelector(a);l&&(qo(l,[]),t[a.replace(/^swal-/,"")]=l.innerHTML.trim())}return t},QM=n=>{const e=B5.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(n.children).forEach(t=>{const s=t.tagName.toLowerCase();e.includes(s)||Zn(`Unrecognized element <${s}>`)})},qo=(n,e)=>{Array.from(n.attributes).forEach(t=>{e.indexOf(t.name)===-1&&Zn([`Unrecognized attribute "${t.name}" on <${n.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},z5=10,YM=n=>{const e=es(),t=lt();typeof n.willOpen=="function"&&n.willOpen(t),ke.eventEmitter.emit("willOpen",t);const a=window.getComputedStyle(document.body).overflowY;JM(e,t,n),setTimeout(()=>{WM(e,t)},z5),Fv()&&(XM(e,n.scrollbarPadding,a),OP()),!ig()&&!ke.previousActiveElement&&(ke.previousActiveElement=document.activeElement),typeof n.didOpen=="function"&&setTimeout(()=>n.didOpen(t)),ke.eventEmitter.emit("didOpen",t)},vm=n=>{const e=lt();if(n.target!==e)return;const t=es();e.removeEventListener("animationend",vm),e.removeEventListener("transitionend",vm),t.style.overflowY="auto",Js(t,ee["no-transition"])},WM=(n,e)=>{s5(e)?(n.style.overflowY="hidden",e.addEventListener("animationend",vm),e.addEventListener("transitionend",vm)):n.style.overflowY="auto"},XM=(n,e,t)=>{DP(),e&&t!=="hidden"&&zP(t),setTimeout(()=>{n.scrollTop=0})},JM=(n,e,t)=>{ht(n,t.showClass.backdrop),t.animation?(e.style.setProperty("opacity","0","important"),Sn(e,"grid"),setTimeout(()=>{ht(e,t.showClass.popup),e.style.removeProperty("opacity")},z5)):Sn(e,"grid"),ht([document.documentElement,document.body],ee.shown),t.heightAuto&&t.backdrop&&!t.toast&&ht([document.documentElement,document.body],ee["height-auto"])};var iE={email:(n,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(n)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(n,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(n)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function ZM(n){n.inputValidator||(n.input==="email"&&(n.inputValidator=iE.email),n.input==="url"&&(n.inputValidator=iE.url))}function eL(n){(!n.target||typeof n.target=="string"&&!document.querySelector(n.target)||typeof n.target!="string"&&!n.target.appendChild)&&(Zn('Target parameter is not valid, defaulting to "body"'),n.target="body")}function tL(n){ZM(n),n.showLoaderOnConfirm&&!n.preConfirm&&Zn(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),eL(n),typeof n.title=="string"&&(n.title=n.title.split(`
`).join("<br />")),F9(n)}let Hr;var _f=new WeakMap;class tn{constructor(...e){if(x9(this,_f,void 0),typeof window>"u")return;Hr=this;const t=Object.freeze(this.constructor.argsToParams(e));this.params=t,this.isAwaitingPromise=!1,E9(_f,this,this._main(Hr.params))}_main(e,t={}){if(D5(Object.assign({},t,e)),ke.currentInstance){const l=Ec.swalPromiseResolve.get(ke.currentInstance),{isAwaitingPromise:c}=ke.currentInstance;ke.currentInstance._destroy(),c||l({isDismissed:!0}),Fv()&&g5()}ke.currentInstance=Hr;const s=sL(e,t);tL(s),Object.freeze(s),ke.timeout&&(ke.timeout.stop(),delete ke.timeout),clearTimeout(ke.restoreFocusTimeout);const a=rL(Hr);return d5(Hr,s),Ct.innerParams.set(Hr,s),nL(Hr,a,s)}then(e){return Yx(_f,this).then(e)}finally(e){return Yx(_f,this).finally(e)}}const nL=(n,e,t)=>new Promise((s,a)=>{const l=c=>{n.close({isDismissed:!0,dismiss:c,isConfirmed:!1,isDenied:!1})};Ec.swalPromiseResolve.set(n,s),Ec.swalPromiseReject.set(n,a),e.confirmButton.onclick=()=>{rM(n)},e.denyButton.onclick=()=>{iM(n)},e.cancelButton.onclick=()=>{aM(n,l)},e.closeButton.onclick=()=>{l(Bc.close)},vM(t,e,l),AP(ke,t,l),YP(n,t),YM(t),iL(ke,t,l),aL(e,t),setTimeout(()=>{e.container.scrollTop=0})}),sL=(n,e)=>{const t=BM(n),s=Object.assign({},hc,e,t,n);return s.showClass=Object.assign({},hc.showClass,s.showClass),s.hideClass=Object.assign({},hc.hideClass,s.hideClass),s.animation===!1&&(s.showClass={backdrop:"swal2-noanimation"},s.hideClass={}),s},rL=n=>{const e={popup:lt(),container:es(),actions:Dd(),confirmButton:Xr(),denyButton:Jo(),cancelButton:Vc(),loader:Uc(),closeButton:Hv(),validationMessage:sg(),progressSteps:qv()};return Ct.domCache.set(n,e),e},iL=(n,e,t)=>{const s=rg();Gn(s),e.timer&&(n.timeout=new UM(()=>{t("timer"),delete n.timeout},e.timer),e.timerProgressBar&&(Sn(s),Ds(s,e,"timerProgressBar"),setTimeout(()=>{n.timeout&&n.timeout.running&&Kv(e.timer)})))},aL=(n,e)=>{if(!e.toast){if(!ng(e.allowEnterKey)){X4("allowEnterKey"),cL();return}oL(n)||lL(n,e)||Ay(-1,1)}},oL=n=>{const e=Array.from(n.popup.querySelectorAll("[autofocus]"));for(const t of e)if(t instanceof HTMLElement&&hs(t))return t.focus(),!0;return!1},lL=(n,e)=>e.focusDeny&&hs(n.denyButton)?(n.denyButton.focus(),!0):e.focusCancel&&hs(n.cancelButton)?(n.cancelButton.focus(),!0):e.focusConfirm&&hs(n.confirmButton)?(n.confirmButton.focus(),!0):!1,cL=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};tn.prototype.disableButtons=A5;tn.prototype.enableButtons=S5;tn.prototype.getInput=x5;tn.prototype.disableInput=C5;tn.prototype.enableInput=N5;tn.prototype.hideLoading=pm;tn.prototype.disableLoading=pm;tn.prototype.showValidationMessage=k5;tn.prototype.resetValidationMessage=R5;tn.prototype.close=Ta;tn.prototype.closePopup=Ta;tn.prototype.closeModal=Ta;tn.prototype.closeToast=Ta;tn.prototype.rejectPromise=v5;tn.prototype.update=P5;tn.prototype._destroy=M5;Object.assign(tn,VM);Object.keys(yM).forEach(n=>{tn[n]=function(...e){return Hr&&Hr[n]?Hr[n](...e):null}});tn.DismissReason=Bc;tn.version="11.26.4";const Sc=tn;Sc.default=Sc;typeof document<"u"&&(function(n,e){var t=n.createElement("style");if(n.getElementsByTagName("head")[0].appendChild(t),t.styleSheet)t.styleSheet.disabled||(t.styleSheet.cssText=e);else try{t.innerHTML=e}catch{t.innerText=e}})(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.15s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}100%{transform:translate3d(0, 0, 0) scale(1);opacity:1}}@keyframes swal2-hide{0%{transform:translate3d(0, 0, 0) scale(1);opacity:1}100%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const q5="usage_config",H5="settings",hr={guest:{limit:5,period:"daily",isEnabled:!0,showAds:!0,message:"Bn  s dng ht {limit} lt lm th min ph trong ngy. Vui lng ng nhp  tip tc n tp! Mi chi tit lin h phng o to-Cng ty CP T vn v Gio dc Ninh Bnh. ST: 022 96 282 969"},free_user:{limit:10,period:"daily",isEnabled:!0,showAds:!0,message:"Bn  ht {limit} lt lm bi min ph hm nay. Hy ng k lp hc  m kha ton b tnh nng v n tp khng gii hn. Mi chi tit lin h phng o to-Cng ty CP T vn v Gio dc Ninh Bnh. ST: 022 96 282 969"},verified_user:{limit:50,period:"daily",isEnabled:!1,showAds:!1,message:"Ti khon lp ca bn  t gii hn {limit} lt truy cp. Vui lng lin h gio vin hoc admin  c h tr."},vip_user:{limit:100,period:"daily",isEnabled:!1,showAds:!1,message:"Ti khon VIP ca bn  ht {limit} lt s dng. Vui lng gia hn hoc lin h h tr."},teacher:{limit:9999,period:"daily",isEnabled:!1,showAds:!1,message:"Gii hn gio vin."},manager:{limit:9999,period:"daily",isEnabled:!1,showAds:!1,message:"Gii hn cn b qun l."},admin:{limit:9999,period:"daily",isEnabled:!1,showAds:!1,message:"Gii hn Admin."}},Zv=async()=>{try{const n=dt(Ae,H5,q5),e=await La(n);if(e.exists()){const t=e.data();return{...hr,guest:{...hr.guest,...t.guest||{}},free_user:{...hr.free_user,...t.free_user||{}},verified_user:{...hr.verified_user,...t.verified_user||{}},vip_user:{...hr.vip_user,...t.vip_user||{}},teacher:{...hr.teacher,...t.teacher||{}},manager:{...hr.manager,...t.manager||{}},admin:{...hr.admin,...t.admin||{}}}}else return console.log("Initializing default usage config..."),await Km(n,hr),hr}catch(n){return console.error("Error fetching usage config:",n),hr}},uL=async n=>{try{const e=dt(Ae,H5,q5);await Km(e,n)}catch(e){throw console.error("Error saving usage config:",e),e}},dL=({onClose:n})=>{const[e,t]=G.useState(null),[s,a]=G.useState(!0),[l,c]=G.useState(!1),[f,g]=G.useState("guest");G.useEffect(()=>{y()},[]);const y=async()=>{a(!0);const N=await Zv();t(N),a(!1)},v=async()=>{if(e){c(!0);try{await uL(e),Sc.fire({title:"Thnh cng!",text:"Cu hnh  c lu.",icon:"success",timer:1500,showConfirmButton:!1})}catch{Sc.fire("Li","Khng th lu cu hnh","error")}finally{c(!1)}}},_=(N,P,C)=>{e&&t({...e,[N]:{...e[N],[P]:C}})};if(s)return d.jsx("div",{className:"p-8 text-center",children:"ang ti cu hnh..."});if(!e)return d.jsx("div",{className:"p-8 text-center text-red-500",children:"Li ti d liu"});const E=[{id:"guest",label:"Khch Vng Lai",icon:sm,color:"text-gray-500"},{id:"free_user",label:"Thnh Vin T Do",icon:uy,color:"text-green-500"},{id:"verified_user",label:"Hc Vin Lp",icon:YO,color:"text-blue-500"},{id:"vip_user",label:"Thnh Vin VIP",icon:QO,color:"text-yellow-500"},{id:"teacher",label:"Gio Vin",icon:ly,color:"text-purple-500"},{id:"manager",label:"Cn B Qun L",icon:cc,color:"text-red-500"},{id:"admin",label:"Qun Tr Vin",icon:GO,color:"text-indigo-600"}],T=e[f];return d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm animate-fade-in",children:d.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-4xl overflow-hidden flex flex-col max-h-[90vh]",children:[d.jsxs("div",{className:"p-5 bg-gradient-to-r from-purple-600 to-indigo-600 text-white flex justify-between items-center",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(BO,{className:"text-2xl animate-spin-slow"}),d.jsx("h2",{className:"text-xl font-bold",children:"Cu Hnh Gii Hn & Quyn Truy Cp"})]}),d.jsx("button",{onClick:n,className:"text-white/80 hover:text-white text-2xl",children:""})]}),d.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[d.jsx("div",{className:"w-1/3 bg-gray-50 dark:bg-slate-900 border-r dark:border-slate-700 overflow-y-auto",children:E.map(N=>d.jsxs("button",{onClick:()=>g(N.id),className:`w-full text-left p-4 border-b dark:border-slate-700 flex items-center gap-3 transition-colors ${f===N.id?"bg-white dark:bg-slate-800 border-l-4 border-l-purple-500 shadow-sm":"hover:bg-gray-100 dark:hover:bg-slate-800 text-gray-500 dark:text-gray-400"}`,children:[d.jsx(N.icon,{className:`text-xl ${f===N.id?N.color:""}`}),d.jsxs("div",{children:[d.jsx("div",{className:`font-bold ${f===N.id?"text-gray-800 dark:text-white":""}`,children:N.label}),d.jsx("div",{className:"text-xs mt-1",children:e[N.id].isEnabled?d.jsxs("span",{className:"text-green-600 font-bold",children:["Limit: ",e[N.id].limit," (",e[N.id].period==="daily"?"Ngy":"Tun",")"]}):d.jsx("span",{className:"text-gray-400",children:"Khng gii hn (Tt)"})})]})]},N.id))}),d.jsxs("div",{className:"w-2/3 p-6 overflow-y-auto bg-white dark:bg-slate-800",children:[d.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[d.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[vr.createElement(E.find(N=>N.id===f).icon,{className:E.find(N=>N.id===f).color}),E.find(N=>N.id===f).label]}),d.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:T.isEnabled,onChange:N=>_(f,"isEnabled",N.target.checked),className:"sr-only peer"}),d.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"}),d.jsx("span",{className:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-300",children:T.isEnabled?"ang bt gii hn":"Khng gii hn (Tt)"})]})]}),T.isEnabled&&d.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1 dark:text-gray-300",children:"S lt ti a"}),d.jsx("input",{type:"number",value:T.limit,onChange:N=>_(f,"limit",parseInt(N.target.value)||0),className:"w-full p-2 border rounded-lg dark:bg-slate-700 focus:ring-2 focus:ring-purple-500 outline-none"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1 dark:text-gray-300",children:"Chu k reset"}),d.jsxs("select",{value:T.period,onChange:N=>_(f,"period",N.target.value),className:"w-full p-2 border rounded-lg dark:bg-slate-700 focus:ring-2 focus:ring-purple-500 outline-none",children:[d.jsx("option",{value:"daily",children:"Hng Ngy (00:00)"}),d.jsx("option",{value:"weekly",children:"Hng Tun (Th 2)"})]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-bold mb-1 dark:text-gray-300",children:"Tin nhn bo chn"}),d.jsx("textarea",{rows:3,value:T.message,onChange:N=>_(f,"message",N.target.value),className:"w-full p-3 border rounded-lg dark:bg-slate-700 focus:ring-2 focus:ring-purple-500 outline-none",placeholder:"Nhp tin nhn..."}),d.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[" Mo: Dng ",d.jsx("code",{children:"{limit}"}),"  hin th s lt t ng."]})]})]}),d.jsxs("div",{className:"mt-6 flex items-center justify-between bg-orange-50 dark:bg-slate-700/50 p-3 rounded-lg border border-orange-200 dark:border-slate-600",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"font-bold text-orange-700 dark:text-orange-400 text-sm",children:"Hin th Qung Co (Google Adsense)"}),d.jsx("p",{className:"text-xs text-orange-600/80 dark:text-gray-400",children:"Bt  hin qung co cho nhm ny (Khng ph thuc gii hn)."})]}),d.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[d.jsx("input",{type:"checkbox",checked:T.showAds,onChange:N=>_(f,"showAds",N.target.checked),className:"sr-only peer"}),d.jsx("div",{className:"w-9 h-5 bg-gray-300 peer-focus:outline-none rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-orange-500"})]})]}),!T.isEnabled&&d.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-700/50 rounded-xl border border-dashed border-gray-300 dark:border-slate-600 text-center text-gray-500",children:[d.jsx(hL,{className:"text-4xl mx-auto mb-2 text-green-500 opacity-50"}),d.jsx("p",{children:"Ngi dng thuc nhm ny c truy cp khng gii hn."})]})]})]}),d.jsxs("div",{className:"p-5 border-t dark:border-slate-700 bg-gray-50 dark:bg-slate-700/50 flex justify-end gap-3",children:[d.jsx("button",{onClick:n,className:"px-6 py-2 rounded-lg font-medium text-gray-600 hover:bg-gray-200 dark:text-gray-300 dark:hover:bg-slate-600 transition-colors",children:"ng"}),d.jsx("button",{onClick:v,disabled:l,className:"px-8 py-2 rounded-lg font-bold text-white bg-gradient-to-r from-purple-600 to-indigo-600 hover:shadow-lg hover:scale-105 transition-all flex items-center gap-2 disabled:opacity-50",children:l?"ang lu...":d.jsxs(d.Fragment,{children:[d.jsx(kv,{})," Lu Cu Hnh"]})})]})]})})},hL=({className:n})=>d.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 512 512",className:n,xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628 0z"})}),fL=({userProfile:n,onNavigate:e,onLogout:t})=>{const[s,a]=vr.useState(!1);return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"fixed top-0 left-0 right-0 h-16 bg-white dark:bg-slate-900 border-b border-gray-200 dark:border-gray-800 z-40 px-4 shadow-sm flex items-center justify-between transition-colors duration-300",children:[d.jsxs("div",{className:"flex items-center gap-1 md:gap-4 overflow-x-auto no-scrollbar",children:[d.jsxs("button",{onClick:()=>e("dashboard"),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap",children:[d.jsx(LO,{className:"text-blue-600 dark:text-blue-400"}),d.jsx("span",{className:"font-semibold text-sm md:text-base",children:"n tp"})]}),d.jsxs("a",{href:"/",className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap decoration-0",children:[d.jsx(HO,{className:"text-teal-600 dark:text-teal-400"}),d.jsx("span",{className:"font-medium text-sm md:text-base",children:"Trang ch"})]}),d.jsxs("button",{onClick:()=>e("account"),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap",children:[d.jsx(KO,{className:"text-orange-600 dark:text-orange-400"}),d.jsx("span",{className:"font-medium text-sm md:text-base",children:"Ti khon"})]}),n&&d.jsxs(d.Fragment,{children:[["admin","lanh_dao","quan_ly","giao_vien"].includes(n.role)?d.jsxs("button",{onClick:()=>e("class_management"),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap",children:[d.jsx(jo,{className:"text-indigo-600 dark:text-indigo-400"}),d.jsx("span",{className:"font-medium text-sm md:text-base",children:"Qun l lp"})]}):d.jsxs("button",{onClick:()=>e("my_class"),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap",children:[d.jsx(uy,{className:"text-green-600 dark:text-green-400"}),d.jsx("span",{className:"font-medium text-sm md:text-base",children:"Lp ca ti"})]}),["admin","lanh_dao","quan_ly","giao_vien"].includes(n.role)&&d.jsxs("button",{onClick:()=>e("notification_mgmt"),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap border-l border-gray-200 dark:border-gray-700 ml-2 pl-4",children:[d.jsx(Jm,{className:"text-red-500 animate-pulse-slow"}),d.jsx("span",{className:"font-bold text-sm md:text-base text-red-600 dark:text-red-400",children:"Qun l TB"})]}),n.role==="admin"&&d.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap border-l border-gray-200 dark:border-gray-700 ml-2 pl-4",children:[d.jsx(zO,{className:"text-purple-600 animate-spin-slow"}),d.jsx("span",{className:"font-bold text-sm md:text-base text-purple-600 dark:text-purple-400",children:"Cu hnh"})]}),d.jsxs("button",{onClick:()=>e("history"),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap",children:[d.jsx(Wu,{className:"text-purple-600 dark:text-purple-400"}),d.jsx("span",{className:"font-medium text-sm md:text-base",children:"Lch s"})]})]})]}),d.jsx("div",{className:"flex items-center gap-3 md:gap-4 ml-4 flex-shrink-0",children:n?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"hidden md:flex flex-col items-end",children:[d.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Xin cho,"}),d.jsx("span",{className:"text-sm font-bold text-gray-800 dark:text-white max-w-[150px] truncate",children:n.full_name})]}),d.jsx("div",{className:"md:hidden text-gray-700 dark:text-gray-200",children:d.jsx(uy,{})}),d.jsx("div",{className:"h-8 w-[1px] bg-gray-300 dark:bg-gray-700 mx-1"}),d.jsxs("button",{onClick:t,className:"group flex items-center gap-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 px-3 py-2 rounded-full transition-colors",title:"ng xut",children:[d.jsx($O,{className:"group-hover:translate-x-1 transition-transform"}),d.jsx("span",{className:"hidden md:inline font-medium text-sm",children:"Thot"})]})]}):d.jsx("button",{onClick:()=>e("login"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold text-sm transition-colors shadow-md",children:"ng nhp"})})]}),s&&d.jsx(dL,{onClose:()=>a(!1)})]})};let xf=null;const eb=async()=>xf||(xf=await Zv(),xf),og=(n,e)=>{if(!e)return{param:n.guest,type:"guest"};const t=e.role;return t==="admin"?{param:n.admin,type:"admin"}:["lanh_dao","quan_ly"].includes(t)?{param:n.manager,type:"manager"}:t==="giao_vien"?{param:n.teacher,type:"teacher"}:e.isVip?{param:n.vip_user,type:"vip"}:e.class&&e.class.length>0||e.isVerified?{param:n.verified_user,type:"verified"}:{param:n.free_user,type:"free"}},$5=n=>{const e=new Date;if(n==="daily")return e.toLocaleDateString("vi-VN");{const t=e.getDay()||7;return t!==1?e.setHours(-24*(t-1)):e.setHours(0,0,0,0),`W-${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`}},aE=async n=>{const e=await eb(),{param:t}=og(e,n);if(!t.isEnabled)return"ALLOWED";const a=`${n?`usage_user_${n.id}`:"usage_guest"}_${t.period}`,l=$5(t.period);let c={date:l,count:0};const f=localStorage.getItem(a);if(f)try{const g=JSON.parse(f);g.date===l&&(c=g)}catch(g){console.error("Error parsing usage data",g)}return console.log(`[Usage Check] ${a} - Used: ${c.count}/${t.limit}`),c.count>=t.limit?"BLOCKED":"ALLOWED"},oE=async n=>{const e=await eb(),{param:t}=og(e,n);if(!t.isEnabled)return;const a=`${n?`usage_user_${n.id}`:"usage_guest"}_${t.period}`,l=$5(t.period);let c={date:l,count:0};const f=localStorage.getItem(a);if(f)try{const g=JSON.parse(f);g.date===l&&(c=g)}catch{}c.count++,console.log(`[Usage] Incremented usage for ${a}: ${c.count}`),localStorage.setItem(a,JSON.stringify(c))},lE=async(n,e)=>{const t=await eb(),{param:s,type:a}=og(t,n),l=s.message.replace("{limit}",s.limit.toString()),c=a==="guest";Sc.fire({title:"Ht lt lm bi!",text:l,icon:"warning",showCancelButton:!0,confirmButtonText:c?"ng nhp ngay":"Lin h thy",cancelButtonText:"ng",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"}).then(f=>{f.isConfirmed&&(c?e():window.open("https://zalo.me/02296282969","_blank"))})},mL=({userProfile:n})=>{const[e,t]=G.useState(!1);G.useEffect(()=>{(async()=>{try{const g=await Zv(),{param:y}=og(g,n);y.showAds?(t(!0),s(),c()):(t(!1),a(),l())}catch(g){console.error("Error checking AdSense config:",g)}})()},[n]);const s=()=>{if(document.getElementById("google-adsense-script"))return;const g=document.createElement("script");g.id="google-adsense-script",g.async=!0,g.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6121118706628509",g.crossOrigin="anonymous",document.head.appendChild(g),console.log(" Google AdSense Script Loaded (Allowed for this role)")},a=()=>{const f=document.getElementById("google-adsense-script");f&&(f.remove(),console.log(" Google AdSense Script Removed (Blocked for this role)"))},l=()=>{if(document.getElementById("adsense-blocker-style"))return;const f=document.createElement("style");f.id="adsense-blocker-style",f.innerHTML=`
            .adsbygoogle, .google-auto-placed, ins.adsbygoogle {
                display: none !important;
                visibility: hidden !important;
                height: 0 !important;
                width: 0 !important;
                overflow: hidden !important;
                position: absolute !important;
                pointer-events: none !important;
                z-index: -9999 !important;
            }
        `,document.head.appendChild(f),console.log(" AdSense Blocker Style Injected")},c=()=>{const f=document.getElementById("adsense-blocker-style");f&&(f.remove(),console.log(" AdSense Blocker Style Removed"))};return null},gL=(n,e)=>{const t=s=>{const a=s.match(/(\d+)$/);return a?parseInt(a[1],10):0};return t(n.id)-t(e.id)},F5=async()=>{const{data:n,error:e}=await Ty.from("licenses").select(`
      id,
      name,
      display_order,
      subjects (
        id,
        name,
        display_order,
        questions (
          *,
          answers (
            id,
            text
          )
        )
      )
    `).order("display_order",{ascending:!0}).order("display_order",{foreignTable:"subjects",ascending:!0});if(e)throw console.error("Error fetching data from Supabase:",e),e;return n.map(s=>({id:s.id,name:s.name,subjects:s.subjects.map(a=>({id:a.id,name:a.name,questions:a.questions.sort(gL).map(l=>({id:l.id,text:l.text,image:l.image,correctAnswerId:l.correct_answer_id,answers:l.answers.map(c=>({id:c.id,text:c.text}))}))}))}))},G5=Object.freeze(Object.defineProperty({__proto__:null,fetchLicenses:F5},Symbol.toStringTag,{value:"Module"})),ye={WELCOME:"welcome",LOGIN:"login",DASHBOARD:"dashboard",LICENSE_SELECTION:"license_selection",NAME_INPUT:"name_input",MODE_SELECTION:"mode_selection",SUBJECT_SELECTION:"subject_selection",IN_QUIZ:"in_quiz",IN_ONLINE_EXAM:"in_online_exam",RESULT:"results",EXAM_RESULT:"exam_result",HISTORY:"history",MY_CLASS:"my_class",CLASS_MANAGEMENT:"class_management",REGISTER:"register",ACCOUNT:"account",NOTIFICATION_MGMT:"notification_mgmt"},pL=()=>{const[n,e]=G.useState(ye.WELCOME),[t,s]=G.useState([]),[a,l]=G.useState(null),[c,f]=G.useState([]),[g,y]=G.useState(null),[v,_]=G.useState(null),[E,T]=G.useState({}),[N,P]=G.useState(0),[C,M]=G.useState(""),[H,F]=G.useState(null),[te,fe]=G.useState(window.innerWidth<768),[he,k]=G.useState(!1);G.useEffect(()=>{const X=()=>{fe(window.innerWidth<768)};return window.addEventListener("resize",X),()=>window.removeEventListener("resize",X)},[]),G.useEffect(()=>{(async()=>{try{const le=await F5();s(le)}catch(le){console.error("Error loading licenses:",le)}})()},[]),G.useEffect(()=>{const X=PI(ud,async le=>{if(le){const me=await kD(le.uid);F(me),M((me==null?void 0:me.full_name)||le.displayName||""),zn(async()=>{const{loadSession:Te,getLicensePreference:je}=await import("./sessionService-CxCtOUx6.js");return{loadSession:Te,getLicensePreference:je}},[]).then(({loadSession:Te,getLicensePreference:je})=>{const Ke=Te(le.uid);if(Ke){console.log("Restoring session...",Ke),_(Ke.quiz),T(Ke.userAnswers),l(Ke.selectedLicense),y(Ke.selectedSubject),Ke.mode==="online_exam"?e(ye.IN_ONLINE_EXAM):e(ye.IN_QUIZ);return}(async()=>{if(me!=null&&me.defaultLicenseId){const vt=t.find(Dn=>Dn.id===me.defaultLicenseId);if(vt){l(vt),e(ye.MODE_SELECTION);return}}if(me!=null&&me.courseId)try{const vt=dt(Ae,"courses",me.courseId),Dn=await La(vt);if(Dn.exists()){const fs=Dn.data();if(fs.licenseId){const nt=t.find(Pn=>Pn.id===fs.licenseId);if(nt){l(nt),e(ye.MODE_SELECTION),zn(async()=>{const{updateDoc:Pn}=await Promise.resolve().then(()=>od);return{updateDoc:Pn}},void 0).then(({updateDoc:Pn})=>{Pn(dt(Ae,"users",le.uid),{defaultLicenseId:fs.licenseId}).catch(Zs=>console.error("Self-heal error:",Zs))});return}}}}catch(vt){console.error("Error in auth fallback:",vt)}const Me=je();if(Me){const vt=t.find(Dn=>Dn.id===Me);vt&&l(vt),e(ye.DASHBOARD)}else e(ye.DASHBOARD)})()})}else F(null),M(""),e(ye.WELCOME)});return()=>{X()}},[t]);const R=G.useCallback((X,le,me,Te,je)=>{!Te||!H||zn(async()=>{const{saveSession:Ke}=await import("./sessionService-CxCtOUx6.js");return{saveSession:Ke}},[]).then(({saveSession:Ke})=>{Ke(H.id,Te,je,me,X,le,a,g)})},[a,g,H]);G.useEffect(()=>{if(n===ye.IN_QUIZ||n===ye.IN_ONLINE_EXAM){k(!1);return}H&&zn(async()=>{const{loadSession:X}=await import("./sessionService-CxCtOUx6.js");return{loadSession:X}},[]).then(({loadSession:X})=>{const le=X(H.id);k(!!le)})},[n,H]);const I=()=>{zn(async()=>{const{loadSession:X}=await import("./sessionService-CxCtOUx6.js");return{loadSession:X}},[]).then(({loadSession:X})=>{if(!H)return;const le=X(H.id);le&&(_(le.quiz),T(le.userAnswers),l(le.selectedLicense),y(le.selectedSubject),le.mode==="online_exam"?e(ye.IN_ONLINE_EXAM):e(ye.IN_QUIZ))})},U=async()=>{if(H){if(H.defaultLicenseId){const X=t.find(le=>le.id===H.defaultLicenseId);if(X){l(X),e(ye.MODE_SELECTION);return}}else if(H.courseId)try{const X=dt(Ae,"courses",H.courseId),le=await La(X);if(le.exists()){const me=le.data();if(me.licenseId){const Te=t.find(je=>je.id===me.licenseId);if(Te){l(Te),e(ye.MODE_SELECTION),zn(async()=>{const{updateDoc:je}=await Promise.resolve().then(()=>od);return{updateDoc:je}},void 0).then(({updateDoc:je})=>{je(dt(Ae,"users",H.id),{defaultLicenseId:me.licenseId}).catch(Ke=>console.error("Self-heal failed:",Ke))});return}}}}catch(X){console.error("Error in license fallback:",X)}zn(async()=>{const{getLicensePreference:X}=await import("./sessionService-CxCtOUx6.js");return{getLicensePreference:X}},[]).then(({getLicensePreference:X})=>{const le=X();le&&t.find(me=>me.id===le)?(l(t.find(me=>me.id===le)),e(ye.DASHBOARD)):e(ye.LICENSE_SELECTION)})}else e(ye.LICENSE_SELECTION)},V=()=>{e(ye.LOGIN)},q=()=>{e(ye.REGISTER)},j=async X=>{l(X),zn(async()=>{const{saveLicensePreference:le}=await import("./sessionService-CxCtOUx6.js");return{saveLicensePreference:le}},[]).then(({saveLicensePreference:le})=>{le(X.id)}),e(H?ye.MODE_SELECTION:ye.NAME_INPUT)},Be=X=>{M(X),e(ye.MODE_SELECTION)},se=async()=>{if(!a)return;if(await aE(H)!=="ALLOWED"){await lE(H,()=>e(ye.LOGIN));return}await oE(H);const le=[];a.subjects.forEach(Ke=>{le.push(...Ke.questions)});const Te=[...le].sort(()=>.5-Math.random()).slice(0,30),je={id:`exam_${Date.now()}`,title:`Thi Th - ${a.name}`,questions:Te,timeLimit:1200};_(je),T({}),P(0),e(ye.IN_ONLINE_EXAM)},O=async X=>{X==="practice"?a&&(f(a.subjects),e(ye.SUBJECT_SELECTION)):X==="online_exam"&&se()},re=async X=>{if(await aE(H)!=="ALLOWED"){await lE(H,()=>e(ye.LOGIN));return}await oE(H),y(X);const me={id:X.id,title:X.name,questions:X.questions,timeLimit:0};_(me),T({}),e(ye.IN_QUIZ)},ve=X=>{if(v){zn(async()=>{const{clearSession:me}=await import("./sessionService-CxCtOUx6.js");return{clearSession:me}},[]).then(({clearSession:me})=>me()),k(!1);let le=0;if(v.questions.forEach(me=>{X[me.id]===me.correctAnswerId&&le++}),P(le),T(X),n===ye.IN_ONLINE_EXAM)H&&Fx(H.id,a.id,a.name,null,"Thi th",le,30,v.timeLimit-0),e(ye.EXAM_RESULT);else{if(H&&a){const me=g?g.name:null;Fx(H.id,a.id,a.name,me,"n tp",le,v.questions.length,0)}e(ye.RESULT)}}},Re=()=>{n===ye.EXAM_RESULT?se():g&&a&&re(g)},Ge=X=>{X==="dashboard"?e(H?ye.DASHBOARD:ye.WELCOME):X==="history"?e(ye.HISTORY):X==="login"?e(ye.LOGIN):X==="my_class"?e(ye.MY_CLASS):X==="class_management"?e(ye.CLASS_MANAGEMENT):X==="account"?e(H?ye.ACCOUNT:ye.LOGIN):X==="notification_mgmt"&&e(ye.NOTIFICATION_MGMT)},B=async()=>{zn(async()=>{const{clearSession:X}=await import("./sessionService-CxCtOUx6.js");return{clearSession:X}},[]).then(({clearSession:X})=>X()),await ud.signOut()},ie=()=>{switch(n){case ye.WELCOME:return d.jsx(Gx,{onStart:U,onLoginClick:V,onRegisterClick:q});case ye.LOGIN:return d.jsx(DD,{onBack:()=>e(ye.WELCOME)});case ye.REGISTER:return d.jsx(PD,{onBack:()=>e(ye.WELCOME),onSuccess:()=>e(ye.DASHBOARD)});case ye.LICENSE_SELECTION:return d.jsx(LD,{licenses:t,onSelect:j,onBack:()=>e(ye.WELCOME)});case ye.NAME_INPUT:return d.jsx(VD,{onNameSubmit:Be,onBack:()=>e(ye.LICENSE_SELECTION)});case ye.MODE_SELECTION:return d.jsx(UD,{onModeSelect:O,licenseName:(a==null?void 0:a.name)||"",userName:C,onSwitchLicense:()=>e(ye.LICENSE_SELECTION)});case ye.SUBJECT_SELECTION:return d.jsx(BD,{subjects:c,progress:{},onSelect:re,onBack:()=>e(ye.MODE_SELECTION)});case ye.IN_QUIZ:return v?d.jsx(zD,{quiz:v,onFinish:ve,onBack:()=>e(ye.SUBJECT_SELECTION),initialAnswers:E,initialIndex:(()=>{try{const X=localStorage.getItem("ontap_quiz_session");return X?JSON.parse(X).currentQuestionIndex:0}catch{return 0}})(),onProgressUpdate:(X,le,me)=>R(X,le,me,v,"practice")}):null;case ye.IN_ONLINE_EXAM:return v?d.jsx($D,{quiz:v,onFinish:ve,onBack:()=>e(ye.MODE_SELECTION),userName:C,selectedLicense:a,initialAnswers:E,initialIndex:(()=>{try{const X=localStorage.getItem("ontap_quiz_session");return X?JSON.parse(X).currentQuestionIndex:0}catch{return 0}})(),initialTime:(()=>{try{const X=localStorage.getItem("ontap_quiz_session");return X?JSON.parse(X).timeLeft:void 0}catch{return}})(),onProgressUpdate:(X,le,me)=>R(X,le,me,v,"online_exam")}):null;case ye.RESULT:return v?d.jsx(GD,{quiz:v,userAnswers:E,score:N,onRetry:Re,onBack:()=>e(ye.SUBJECT_SELECTION),userName:C}):null;case ye.EXAM_RESULT:return v?d.jsx(FD,{quiz:v,userAnswers:E,score:N,onRetry:Re,onBack:()=>e(ye.MODE_SELECTION),userName:C}):null;case ye.DASHBOARD:return d.jsx(f9,{userProfile:H,onStart:()=>e(ye.LICENSE_SELECTION),onHistoryClick:()=>e(ye.HISTORY),onClassClick:()=>Ge(H.role==="hoc_vien"?"my_class":"class_management")});case ye.HISTORY:return d.jsx(m9,{userProfile:H,onBack:()=>e(ye.DASHBOARD)});case ye.MY_CLASS:return d.jsx(p9,{userProfile:H,onBack:()=>e(ye.DASHBOARD)});case ye.CLASS_MANAGEMENT:return d.jsx(v9,{userProfile:H,onBack:()=>e(ye.DASHBOARD)});case ye.ACCOUNT:return d.jsx(w9,{userProfile:H,onBack:()=>e(ye.DASHBOARD)});case ye.NOTIFICATION_MGMT:return H?d.jsx(jD,{userProfile:H}):null;default:return d.jsx(Gx,{onStart:U,onLoginClick:V,onRegisterClick:q})}};return d.jsxs("div",{className:"min-h-screen bg-background text-foreground font-sans transition-colors duration-300 pt-16",children:[d.jsx(WO,{}),d.jsx(XO,{}),he&&d.jsxs("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-yellow-400 text-black px-6 py-3 rounded-full shadow-xl z-50 animate-bounce cursor-pointer hover:bg-yellow-500 font-bold flex items-center gap-2",onClick:I,children:[d.jsx("span",{children:" Bn ang c bi thi lm d!"}),d.jsx("span",{className:"underline",children:"Lm tip ngay"})]}),d.jsx(mL,{userProfile:H}),d.jsx(fL,{userProfile:H,onNavigate:Ge,onLogout:B}),ie()]})},yL=()=>d.jsxs(uE,{children:[d.jsx(QN,{}),d.jsx(pL,{}),d.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:d.jsx(KN,{})})]}),K5=document.getElementById("root");if(!K5)throw new Error("Could not find root element to mount to");const vL=MN.createRoot(K5);vL.render(d.jsx(vr.StrictMode,{children:d.jsx(uE,{children:d.jsx(yL,{})})}));
