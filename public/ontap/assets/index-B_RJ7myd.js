var bre=Object.defineProperty;var wre=(t,e,n)=>e in t?bre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var oS=(t,e,n)=>wre(t,typeof e!="symbol"?e+"":e,n);function v$(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function va(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function xre(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var lS={exports:{}},Gg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uD;function _re(){if(uD)return Gg;uD=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var l in i)l!=="key"&&(s[l]=i[l])}else s=i;return i=s.ref,{$$typeof:t,type:r,key:a,ref:i!==void 0?i:null,props:s}}return Gg.Fragment=e,Gg.jsx=n,Gg.jsxs=n,Gg}var dD;function Ere(){return dD||(dD=1,lS.exports=_re()),lS.exports}var m=Ere(),cS={exports:{}},vt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hD;function Tre(){if(hD)return vt;hD=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),y=Symbol.iterator;function v(B){return B===null||typeof B!="object"?null:(B=y&&B[y]||B["@@iterator"],typeof B=="function"?B:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,E={};function C(B,X,G){this.props=B,this.context=X,this.refs=E,this.updater=G||w}C.prototype.isReactComponent={},C.prototype.setState=function(B,X){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,X,"setState")},C.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function N(){}N.prototype=C.prototype;function O(B,X,G){this.props=B,this.context=X,this.refs=E,this.updater=G||w}var R=O.prototype=new N;R.constructor=O,_(R,C.prototype),R.isPureReactComponent=!0;var D=Array.isArray;function P(){}var A={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function M(B,X,G){var Q=G.ref;return{$$typeof:t,type:B,key:X,ref:Q!==void 0?Q:null,props:G}}function V(B,X){return M(B.type,X,B.props)}function U(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function z(B){var X={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(G){return X[G]})}var $=/\/+/g;function ne(B,X){return typeof B=="object"&&B!==null&&B.key!=null?z(""+B.key):X.toString(36)}function fe(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(P,P):(B.status="pending",B.then(function(X){B.status==="pending"&&(B.status="fulfilled",B.value=X)},function(X){B.status==="pending"&&(B.status="rejected",B.reason=X)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function K(B,X,G,Q,re){var _e=typeof B;(_e==="undefined"||_e==="boolean")&&(B=null);var Se=!1;if(B===null)Se=!0;else switch(_e){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(B.$$typeof){case t:case e:Se=!0;break;case h:return Se=B._init,K(Se(B._payload),X,G,Q,re)}}if(Se)return re=re(B),Se=Q===""?"."+ne(B,0):Q,D(re)?(G="",Se!=null&&(G=Se.replace($,"$&/")+"/"),K(re,X,G,"",function(ke){return ke})):re!=null&&(U(re)&&(re=V(re,G+(re.key==null||B&&B.key===re.key?"":(""+re.key).replace($,"$&/")+"/")+Se)),X.push(re)),1;Se=0;var ce=Q===""?".":Q+":";if(D(B))for(var Z=0;Z<B.length;Z++)Q=B[Z],_e=ce+ne(Q,Z),Se+=K(Q,X,G,_e,re);else if(Z=v(B),typeof Z=="function")for(B=Z.call(B),Z=0;!(Q=B.next()).done;)Q=Q.value,_e=ce+ne(Q,Z++),Se+=K(Q,X,G,_e,re);else if(_e==="object"){if(typeof B.then=="function")return K(fe(B),X,G,Q,re);throw X=String(B),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return Se}function W(B,X,G){if(B==null)return B;var Q=[],re=0;return K(B,Q,"","",function(_e){return X.call(G,_e,re++)}),Q}function ee(B){if(B._status===-1){var X=B._result;X=X(),X.then(function(G){(B._status===0||B._status===-1)&&(B._status=1,B._result=G)},function(G){(B._status===0||B._status===-1)&&(B._status=2,B._result=G)}),B._status===-1&&(B._status=0,B._result=X)}if(B._status===1)return B._result.default;throw B._result}var oe=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},pe={map:W,forEach:function(B,X,G){W(B,function(){X.apply(this,arguments)},G)},count:function(B){var X=0;return W(B,function(){X++}),X},toArray:function(B){return W(B,function(X){return X})||[]},only:function(B){if(!U(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return vt.Activity=p,vt.Children=pe,vt.Component=C,vt.Fragment=n,vt.Profiler=i,vt.PureComponent=O,vt.StrictMode=r,vt.Suspense=u,vt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,vt.__COMPILER_RUNTIME={__proto__:null,c:function(B){return A.H.useMemoCache(B)}},vt.cache=function(B){return function(){return B.apply(null,arguments)}},vt.cacheSignal=function(){return null},vt.cloneElement=function(B,X,G){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var Q=_({},B.props),re=B.key;if(X!=null)for(_e in X.key!==void 0&&(re=""+X.key),X)!k.call(X,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&X.ref===void 0||(Q[_e]=X[_e]);var _e=arguments.length-2;if(_e===1)Q.children=G;else if(1<_e){for(var Se=Array(_e),ce=0;ce<_e;ce++)Se[ce]=arguments[ce+2];Q.children=Se}return M(B.type,re,Q)},vt.createContext=function(B){return B={$$typeof:a,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:s,_context:B},B},vt.createElement=function(B,X,G){var Q,re={},_e=null;if(X!=null)for(Q in X.key!==void 0&&(_e=""+X.key),X)k.call(X,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(re[Q]=X[Q]);var Se=arguments.length-2;if(Se===1)re.children=G;else if(1<Se){for(var ce=Array(Se),Z=0;Z<Se;Z++)ce[Z]=arguments[Z+2];re.children=ce}if(B&&B.defaultProps)for(Q in Se=B.defaultProps,Se)re[Q]===void 0&&(re[Q]=Se[Q]);return M(B,_e,re)},vt.createRef=function(){return{current:null}},vt.forwardRef=function(B){return{$$typeof:l,render:B}},vt.isValidElement=U,vt.lazy=function(B){return{$$typeof:h,_payload:{_status:-1,_result:B},_init:ee}},vt.memo=function(B,X){return{$$typeof:d,type:B,compare:X===void 0?null:X}},vt.startTransition=function(B){var X=A.T,G={};A.T=G;try{var Q=B(),re=A.S;re!==null&&re(G,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(P,oe)}catch(_e){oe(_e)}finally{X!==null&&G.types!==null&&(X.types=G.types),A.T=X}},vt.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},vt.use=function(B){return A.H.use(B)},vt.useActionState=function(B,X,G){return A.H.useActionState(B,X,G)},vt.useCallback=function(B,X){return A.H.useCallback(B,X)},vt.useContext=function(B){return A.H.useContext(B)},vt.useDebugValue=function(){},vt.useDeferredValue=function(B,X){return A.H.useDeferredValue(B,X)},vt.useEffect=function(B,X){return A.H.useEffect(B,X)},vt.useEffectEvent=function(B){return A.H.useEffectEvent(B)},vt.useId=function(){return A.H.useId()},vt.useImperativeHandle=function(B,X,G){return A.H.useImperativeHandle(B,X,G)},vt.useInsertionEffect=function(B,X){return A.H.useInsertionEffect(B,X)},vt.useLayoutEffect=function(B,X){return A.H.useLayoutEffect(B,X)},vt.useMemo=function(B,X){return A.H.useMemo(B,X)},vt.useOptimistic=function(B,X){return A.H.useOptimistic(B,X)},vt.useReducer=function(B,X,G){return A.H.useReducer(B,X,G)},vt.useRef=function(B){return A.H.useRef(B)},vt.useState=function(B){return A.H.useState(B)},vt.useSyncExternalStore=function(B,X,G){return A.H.useSyncExternalStore(B,X,G)},vt.useTransition=function(){return A.H.useTransition()},vt.version="19.2.0",vt}var fD;function Yh(){return fD||(fD=1,cS.exports=Tre()),cS.exports}var S=Yh();const ue=va(S),Sre=v$({__proto__:null,default:ue},[S]);var uS={exports:{}},Wg={},dS={exports:{}},hS={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mD;function Cre(){return mD||(mD=1,(function(t){function e(K,W){var ee=K.length;K.push(W);e:for(;0<ee;){var oe=ee-1>>>1,pe=K[oe];if(0<i(pe,W))K[oe]=W,K[ee]=pe,ee=oe;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var W=K[0],ee=K.pop();if(ee!==W){K[0]=ee;e:for(var oe=0,pe=K.length,B=pe>>>1;oe<B;){var X=2*(oe+1)-1,G=K[X],Q=X+1,re=K[Q];if(0>i(G,ee))Q<pe&&0>i(re,G)?(K[oe]=re,K[Q]=ee,oe=Q):(K[oe]=G,K[X]=ee,oe=X);else if(Q<pe&&0>i(re,ee))K[oe]=re,K[Q]=ee,oe=Q;else break e}}return W}function i(K,W){var ee=K.sortIndex-W.sortIndex;return ee!==0?ee:K.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],d=[],h=1,p=null,y=3,v=!1,w=!1,_=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function R(K){for(var W=n(d);W!==null;){if(W.callback===null)r(d);else if(W.startTime<=K)r(d),W.sortIndex=W.expirationTime,e(u,W);else break;W=n(d)}}function D(K){if(_=!1,R(K),!w)if(n(u)!==null)w=!0,P||(P=!0,z());else{var W=n(d);W!==null&&fe(D,W.startTime-K)}}var P=!1,A=-1,k=5,M=-1;function V(){return E?!0:!(t.unstable_now()-M<k)}function U(){if(E=!1,P){var K=t.unstable_now();M=K;var W=!0;try{e:{w=!1,_&&(_=!1,N(A),A=-1),v=!0;var ee=y;try{t:{for(R(K),p=n(u);p!==null&&!(p.expirationTime>K&&V());){var oe=p.callback;if(typeof oe=="function"){p.callback=null,y=p.priorityLevel;var pe=oe(p.expirationTime<=K);if(K=t.unstable_now(),typeof pe=="function"){p.callback=pe,R(K),W=!0;break t}p===n(u)&&r(u),R(K)}else r(u);p=n(u)}if(p!==null)W=!0;else{var B=n(d);B!==null&&fe(D,B.startTime-K),W=!1}}break e}finally{p=null,y=ee,v=!1}W=void 0}}finally{W?z():P=!1}}}var z;if(typeof O=="function")z=function(){O(U)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,ne=$.port2;$.port1.onmessage=U,z=function(){ne.postMessage(null)}}else z=function(){C(U,0)};function fe(K,W){A=C(function(){K(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(K){switch(y){case 1:case 2:case 3:var W=3;break;default:W=y}var ee=y;y=W;try{return K()}finally{y=ee}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(K,W){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ee=y;y=K;try{return W()}finally{y=ee}},t.unstable_scheduleCallback=function(K,W,ee){var oe=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?oe+ee:oe):ee=oe,K){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=ee+pe,K={id:h++,callback:W,priorityLevel:K,startTime:ee,expirationTime:pe,sortIndex:-1},ee>oe?(K.sortIndex=ee,e(d,K),n(u)===null&&K===n(d)&&(_?(N(A),A=-1):_=!0,fe(D,ee-oe))):(K.sortIndex=pe,e(u,K),w||v||(w=!0,P||(P=!0,z()))),K},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(K){var W=y;return function(){var ee=y;y=W;try{return K.apply(this,arguments)}finally{y=ee}}}})(hS)),hS}var pD;function Are(){return pD||(pD=1,dS.exports=Cre()),dS.exports}var fS={exports:{}},Wi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gD;function Nre(){if(gD)return Wi;gD=1;var t=Yh();function e(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(u,d,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:u,containerInfo:d,implementation:h}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Wi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Wi.createPortal=function(u,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return s(u,d,null,h)},Wi.flushSync=function(u){var d=a.T,h=r.p;try{if(a.T=null,r.p=2,u)return u()}finally{a.T=d,r.p=h,r.d.f()}},Wi.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},Wi.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},Wi.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var h=d.as,p=l(h,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,v=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:y,fetchPriority:v}):h==="script"&&r.d.X(u,{crossOrigin:p,integrity:y,fetchPriority:v,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Wi.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=l(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},Wi.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,p=l(h,d.crossOrigin);r.d.L(u,h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Wi.preloadModule=function(u,d){if(typeof u=="string")if(d){var h=l(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},Wi.requestFormReset=function(u){r.d.r(u)},Wi.unstable_batchedUpdates=function(u,d){return u(d)},Wi.useFormState=function(u,d,h){return a.H.useFormState(u,d,h)},Wi.useFormStatus=function(){return a.H.useHostTransitionStatus()},Wi.version="19.2.0",Wi}var yD;function b$(){if(yD)return fS.exports;yD=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),fS.exports=Nre(),fS.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vD;function kre(){if(vD)return Wg;vD=1;var t=Are(),e=Yh(),n=b$();function r(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function s(o){var c=o,f=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(f=c.return),o=c.return;while(o)}return c.tag===3?f:null}function a(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function l(o){if(o.tag===31){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function u(o){if(s(o)!==o)throw Error(r(188))}function d(o){var c=o.alternate;if(!c){if(c=s(o),c===null)throw Error(r(188));return c!==o?null:o}for(var f=o,g=c;;){var x=f.return;if(x===null)break;var T=x.alternate;if(T===null){if(g=x.return,g!==null){f=g;continue}break}if(x.child===T.child){for(T=x.child;T;){if(T===f)return u(x),o;if(T===g)return u(x),c;T=T.sibling}throw Error(r(188))}if(f.return!==g.return)f=x,g=T;else{for(var j=!1,F=x.child;F;){if(F===f){j=!0,f=x,g=T;break}if(F===g){j=!0,g=x,f=T;break}F=F.sibling}if(!j){for(F=T.child;F;){if(F===f){j=!0,f=T,g=x;break}if(F===g){j=!0,g=T,f=x;break}F=F.sibling}if(!j)throw Error(r(189))}}if(f.alternate!==g)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?o:c}function h(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=h(o),c!==null)return c;o=o.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),O=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function z(o){return o===null||typeof o!="object"?null:(o=U&&o[U]||o["@@iterator"],typeof o=="function"?o:null)}var $=Symbol.for("react.client.reference");function ne(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===$?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case _:return"Fragment";case C:return"Profiler";case E:return"StrictMode";case D:return"Suspense";case P:return"SuspenseList";case M:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case w:return"Portal";case O:return o.displayName||"Context";case N:return(o._context.displayName||"Context")+".Consumer";case R:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case A:return c=o.displayName||null,c!==null?c:ne(o.type)||"Memo";case k:c=o._payload,o=o._init;try{return ne(o(c))}catch{}}return null}var fe=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},oe=[],pe=-1;function B(o){return{current:o}}function X(o){0>pe||(o.current=oe[pe],oe[pe]=null,pe--)}function G(o,c){pe++,oe[pe]=o.current,o.current=c}var Q=B(null),re=B(null),_e=B(null),Se=B(null);function ce(o,c){switch(G(_e,c),G(re,o),G(Q,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?P6(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=P6(c),o=R6(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}X(Q),G(Q,o)}function Z(){X(Q),X(re),X(_e)}function ke(o){o.memoizedState!==null&&G(Se,o);var c=Q.current,f=R6(c,o.type);c!==f&&(G(re,o),G(Q,f))}function Le(o){re.current===o&&(X(Q),X(re)),Se.current===o&&(X(Se),$g._currentValue=ee)}var ye,ze;function Ae(o){if(ye===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);ye=c&&c[1]||"",ze=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ye+o+ze}var Ze=!1;function rt(o,c){if(!o||Ze)return"";Ze=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(c){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(ge){var de=ge}Reflect.construct(o,[],Te)}else{try{Te.call()}catch(ge){de=ge}o.call(Te.prototype)}}else{try{throw Error()}catch(ge){de=ge}(Te=o())&&typeof Te.catch=="function"&&Te.catch(function(){})}}catch(ge){if(ge&&de&&typeof ge.stack=="string")return[ge.stack,de.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=g.DetermineComponentFrameRoot(),j=T[0],F=T[1];if(j&&F){var Y=j.split(`
`),le=F.split(`
`);for(x=g=0;g<Y.length&&!Y[g].includes("DetermineComponentFrameRoot");)g++;for(;x<le.length&&!le[x].includes("DetermineComponentFrameRoot");)x++;if(g===Y.length||x===le.length)for(g=Y.length-1,x=le.length-1;1<=g&&0<=x&&Y[g]!==le[x];)x--;for(;1<=g&&0<=x;g--,x--)if(Y[g]!==le[x]){if(g!==1||x!==1)do if(g--,x--,0>x||Y[g]!==le[x]){var we=`
`+Y[g].replace(" at new "," at ");return o.displayName&&we.includes("<anonymous>")&&(we=we.replace("<anonymous>",o.displayName)),we}while(1<=g&&0<=x);break}}}finally{Ze=!1,Error.prepareStackTrace=f}return(f=o?o.displayName||o.name:"")?Ae(f):""}function it(o,c){switch(o.tag){case 26:case 27:case 5:return Ae(o.type);case 16:return Ae("Lazy");case 13:return o.child!==c&&c!==null?Ae("Suspense Fallback"):Ae("Suspense");case 19:return Ae("SuspenseList");case 0:case 15:return rt(o.type,!1);case 11:return rt(o.type.render,!1);case 1:return rt(o.type,!0);case 31:return Ae("Activity");default:return""}}function Ke(o){try{var c="",f=null;do c+=it(o,f),f=o,o=o.return;while(o);return c}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var lt=Object.prototype.hasOwnProperty,xt=t.unstable_scheduleCallback,Sr=t.unstable_cancelCallback,Un=t.unstable_shouldYield,hr=t.unstable_requestPaint,Ht=t.unstable_now,fr=t.unstable_getCurrentPriorityLevel,ei=t.unstable_ImmediatePriority,cs=t.unstable_UserBlockingPriority,se=t.unstable_NormalPriority,Ie=t.unstable_LowPriority,mt=t.unstable_IdlePriority,gn=t.log,Ft=t.unstable_setDisableYieldValue,ti=null,Kn=null;function hi(o){if(typeof gn=="function"&&Ft(o),Kn&&typeof Kn.setStrictMode=="function")try{Kn.setStrictMode(ti,o)}catch{}}var Qt=Math.clz32?Math.clz32:us,$c=Math.log,Ss=Math.LN2;function us(o){return o>>>=0,o===0?32:31-($c(o)/Ss|0)|0}var ds=256,xa=262144,Cn=4194304;function Fi(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function et(o,c,f){var g=o.pendingLanes;if(g===0)return 0;var x=0,T=o.suspendedLanes,j=o.pingedLanes;o=o.warmLanes;var F=g&134217727;return F!==0?(g=F&~T,g!==0?x=Fi(g):(j&=F,j!==0?x=Fi(j):f||(f=F&~o,f!==0&&(x=Fi(f))))):(F=g&~T,F!==0?x=Fi(F):j!==0?x=Fi(j):f||(f=g&~o,f!==0&&(x=Fi(f)))),x===0?0:c!==0&&c!==x&&(c&T)===0&&(T=x&-x,f=c&-c,T>=f||T===32&&(f&4194048)!==0)?c:x}function qt(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function mr(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pr(){var o=Cn;return Cn<<=1,(Cn&62914560)===0&&(Cn=4194304),o}function sr(o){for(var c=[],f=0;31>f;f++)c.push(o);return c}function An(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Cr(o,c,f,g,x,T){var j=o.pendingLanes;o.pendingLanes=f,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=f,o.entangledLanes&=f,o.errorRecoveryDisabledLanes&=f,o.shellSuspendCounter=0;var F=o.entanglements,Y=o.expirationTimes,le=o.hiddenUpdates;for(f=j&~f;0<f;){var we=31-Qt(f),Te=1<<we;F[we]=0,Y[we]=-1;var de=le[we];if(de!==null)for(le[we]=null,we=0;we<de.length;we++){var ge=de[we];ge!==null&&(ge.lane&=-536870913)}f&=~Te}g!==0&&hs(o,g,0),T!==0&&x===0&&o.tag!==0&&(o.suspendedLanes|=T&~(j&~c))}function hs(o,c,f){o.pendingLanes|=c,o.suspendedLanes&=~c;var g=31-Qt(c);o.entangledLanes|=c,o.entanglements[g]=o.entanglements[g]|1073741824|f&261930}function gr(o,c){var f=o.entangledLanes|=c;for(o=o.entanglements;f;){var g=31-Qt(f),x=1<<g;x&c|o[g]&c&&(o[g]|=c),f&=~x}}function Mr(o,c){var f=c&-c;return f=(f&42)!==0?1:Ai(f),(f&(o.suspendedLanes|c))!==0?0:f}function Ai(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Lr(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Fc(){var o=W.p;return o!==0?o:(o=window.event,o===void 0?32:rD(o.type))}function Cs(o,c){var f=W.p;try{return W.p=o,c()}finally{W.p=f}}var Hi=Math.random().toString(36).slice(2),yr="__reactFiber$"+Hi,Pn="__reactProps$"+Hi,qi="__reactContainer$"+Hi,Ws="__reactEvents$"+Hi,rg="__reactListeners$"+Hi,Nl="__reactHandles$"+Hi,xd="__reactResources$"+Hi,Ks="__reactMarker$"+Hi;function _a(o){delete o[yr],delete o[Pn],delete o[Ws],delete o[rg],delete o[Nl]}function Ea(o){var c=o[yr];if(c)return c;for(var f=o.parentNode;f;){if(c=f[qi]||f[yr]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(o=z6(o);o!==null;){if(f=o[yr])return f;o=z6(o)}return c}o=f,f=o.parentNode}return null}function As(o){if(o=o[yr]||o[qi]){var c=o.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return o}return null}function fs(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(r(33))}function Ta(o){var c=o[xd];return c||(c=o[xd]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function vr(o){o[Ks]=!0}var kl=new Set,Sa={};function Ys(o,c){Gi(o,c),Gi(o+"Capture",c)}function Gi(o,c){for(Sa[o]=c,o=0;o<c.length;o++)kl.add(c[o])}var to=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_d={},Ed={};function hf(o){return lt.call(Ed,o)?!0:lt.call(_d,o)?!1:to.test(o)?Ed[o]=!0:(_d[o]=!0,!1)}function Hc(o,c,f){if(hf(c))if(f===null)o.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var g=c.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+f)}}function ms(o,c,f){if(f===null)o.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+f)}}function br(o,c,f,g){if(g===null)o.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(f);return}o.setAttributeNS(c,f,""+g)}}function Vr(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function no(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Td(o,c,f){var g=Object.getOwnPropertyDescriptor(o.constructor.prototype,c);if(!o.hasOwnProperty(c)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var x=g.get,T=g.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return x.call(this)},set:function(j){f=""+j,T.call(this,j)}}),Object.defineProperty(o,c,{enumerable:g.enumerable}),{getValue:function(){return f},setValue:function(j){f=""+j},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function Jt(o){if(!o._valueTracker){var c=no(o)?"checked":"value";o._valueTracker=Td(o,c,""+o[c])}}function Il(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var f=c.getValue(),g="";return o&&(g=no(o)?o.checked?"true":"false":o.value),o=g,o!==f?(c.setValue(o),!0):!1}function Ns(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Ol=/[\n"\\]/g;function Ni(o){return o.replace(Ol,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function qc(o,c,f,g,x,T,j,F){o.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?o.type=j:o.removeAttribute("type"),c!=null?j==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+Vr(c)):o.value!==""+Vr(c)&&(o.value=""+Vr(c)):j!=="submit"&&j!=="reset"||o.removeAttribute("value"),c!=null?Gc(o,j,Vr(c)):f!=null?Gc(o,j,Vr(f)):g!=null&&o.removeAttribute("value"),x==null&&T!=null&&(o.defaultChecked=!!T),x!=null&&(o.checked=x&&typeof x!="function"&&typeof x!="symbol"),F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?o.name=""+Vr(F):o.removeAttribute("name")}function Sd(o,c,f,g,x,T,j,F){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(o.type=T),c!=null||f!=null){if(!(T!=="submit"&&T!=="reset"||c!=null)){Jt(o);return}f=f!=null?""+Vr(f):"",c=c!=null?""+Vr(c):f,F||c===o.value||(o.value=c),o.defaultValue=c}g=g??x,g=typeof g!="function"&&typeof g!="symbol"&&!!g,o.checked=F?o.checked:!!g,o.defaultChecked=!!g,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(o.name=j),Jt(o)}function Gc(o,c,f){c==="number"&&Ns(o.ownerDocument)===o||o.defaultValue===""+f||(o.defaultValue=""+f)}function q(o,c,f,g){if(o=o.options,c){c={};for(var x=0;x<f.length;x++)c["$"+f[x]]=!0;for(f=0;f<o.length;f++)x=c.hasOwnProperty("$"+o[f].value),o[f].selected!==x&&(o[f].selected=x),x&&g&&(o[f].defaultSelected=!0)}else{for(f=""+Vr(f),c=null,x=0;x<o.length;x++){if(o[x].value===f){o[x].selected=!0,g&&(o[x].defaultSelected=!0);return}c!==null||o[x].disabled||(c=o[x])}c!==null&&(c.selected=!0)}}function xe(o,c,f){if(c!=null&&(c=""+Vr(c),c!==o.value&&(o.value=c),f==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=f!=null?""+Vr(f):""}function Ve(o,c,f,g){if(c==null){if(g!=null){if(f!=null)throw Error(r(92));if(fe(g)){if(1<g.length)throw Error(r(93));g=g[0]}f=g}f==null&&(f=""),c=f}f=Vr(c),o.defaultValue=f,g=o.textContent,g===f&&g!==""&&g!==null&&(o.value=g),Jt(o)}function $e(o,c){if(c){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=c;return}}o.textContent=c}var We=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cn(o,c,f){var g=c.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":g?o.setProperty(c,f):typeof f!="number"||f===0||We.has(c)?c==="float"?o.cssFloat=f:o[c]=(""+f).trim():o[c]=f+"px"}function Nn(o,c,f){if(c!=null&&typeof c!="object")throw Error(r(62));if(o=o.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||c!=null&&c.hasOwnProperty(g)||(g.indexOf("--")===0?o.setProperty(g,""):g==="float"?o.cssFloat="":o[g]="");for(var x in c)g=c[x],c.hasOwnProperty(x)&&f[x]!==g&&cn(o,x,g)}else for(var T in c)c.hasOwnProperty(T)&&cn(o,T,c[T])}function ar(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ca=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ff(o){return Wc.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function ro(){}var ig=null;function Aa(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Kc=null,Fo=null;function Cd(o){var c=As(o);if(c&&(o=c.stateNode)){var f=o[Pn]||null;e:switch(o=c.stateNode,c.type){case"input":if(qc(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),c=f.name,f.type==="radio"&&c!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Ni(""+c)+'"][type="radio"]'),c=0;c<f.length;c++){var g=f[c];if(g!==o&&g.form===o.form){var x=g[Pn]||null;if(!x)throw Error(r(90));qc(g,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(c=0;c<f.length;c++)g=f[c],g.form===o.form&&Il(g)}break e;case"textarea":xe(o,f.value,f.defaultValue);break e;case"select":c=f.value,c!=null&&q(o,!!f.multiple,c,!1)}}}var mf=!1;function Yc(o,c,f){if(mf)return o(c,f);mf=!0;try{var g=o(c);return g}finally{if(mf=!1,(Kc!==null||Fo!==null)&&(Tb(),Kc&&(c=Kc,o=Fo,Fo=Kc=null,Cd(c),o)))for(c=0;c<o.length;c++)Cd(o[c])}}function io(o,c){var f=o.stateNode;if(f===null)return null;var g=f[Pn]||null;if(g===null)return null;f=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(r(231,c,typeof f));return f}var Na=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ad=!1;if(Na)try{var yn={};Object.defineProperty(yn,"passive",{get:function(){Ad=!0}}),window.addEventListener("test",yn,yn),window.removeEventListener("test",yn,yn)}catch{Ad=!1}var Ho=null,sg=null,Nd=null;function ag(){if(Nd)return Nd;var o,c=sg,f=c.length,g,x="value"in Ho?Ho.value:Ho.textContent,T=x.length;for(o=0;o<f&&c[o]===x[o];o++);var j=f-o;for(g=1;g<=j&&c[f-g]===x[T-g];g++);return Nd=x.slice(o,1<g?1-g:void 0)}function kd(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function jl(){return!0}function so(){return!1}function ki(o){function c(f,g,x,T,j){this._reactName=f,this._targetInst=x,this.type=g,this.nativeEvent=T,this.target=j,this.currentTarget=null;for(var F in o)o.hasOwnProperty(F)&&(f=o[F],this[F]=f?f(T):T[F]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?jl:so,this.isPropagationStopped=so,this}return p(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=jl)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=jl)},persist:function(){},isPersistent:jl}),c}var Pl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qo=ki(Pl),Xc=p({},Pl,{view:0,detail:0}),og=ki(Xc),Qc,pf,Go,gf=p({},Xc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jc,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Go&&(Go&&o.type==="mousemove"?(Qc=o.screenX-Go.screenX,pf=o.screenY-Go.screenY):pf=Qc=0,Go=o),Qc)},movementY:function(o){return"movementY"in o?o.movementY:pf}}),lg=ki(gf),Id=p({},gf,{dataTransfer:0}),jv=ki(Id),Pv=p({},Xc,{relatedTarget:0}),Od=ki(Pv),cg=p({},Pl,{animationName:0,elapsedTime:0,pseudoElement:0}),Rv=ki(cg),yf=p({},Pl,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Dv=ki(yf),Mv=p({},Pl,{data:0}),Wo=ki(Mv),Lv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bv(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=Uv[o])?!!c[o]:!1}function Jc(){return Bv}var ps=p({},Xc,{key:function(o){if(o.key){var c=Lv[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=kd(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Vv[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jc,charCode:function(o){return o.type==="keypress"?kd(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?kd(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),zv=ki(ps),$v=p({},gf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rl=ki($v),b=p({},Xc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jc}),I=ki(b),L=p({},Pl,{propertyName:0,elapsedTime:0,pseudoElement:0}),H=ki(L),ie=p({},gf,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),me=ki(ie),Me=p({},Pl,{newState:0,oldState:0}),Et=ki(Me),Ar=[9,13,27,32],Zt=Na&&"CompositionEvent"in window,Yn=null;Na&&"documentMode"in document&&(Yn=document.documentMode);var ka=Na&&"TextEvent"in window&&!Yn,Ko=Na&&(!Zt||Yn&&8<Yn&&11>=Yn),ao=" ",oo=!1;function jd(o,c){switch(o){case"keyup":return Ar.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vf(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var bf=!1;function Fte(o,c){switch(o){case"compositionend":return vf(c);case"keypress":return c.which!==32?null:(oo=!0,ao);case"textInput":return o=c.data,o===ao&&oo?null:o;default:return null}}function Hte(o,c){if(bf)return o==="compositionend"||!Zt&&jd(o,c)?(o=ag(),Nd=sg=Ho=null,bf=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Ko&&c.locale!=="ko"?null:c.data;default:return null}}var qte={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function HP(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!qte[o.type]:c==="textarea"}function qP(o,c,f,g){Kc?Fo?Fo.push(g):Fo=[g]:Kc=g,c=Ob(c,"onChange"),0<c.length&&(f=new qo("onChange","change",null,f,g),o.push({event:f,listeners:c}))}var ug=null,dg=null;function Gte(o){A6(o,0)}function Fv(o){var c=fs(o);if(Il(c))return o}function GP(o,c){if(o==="change")return c}var WP=!1;if(Na){var mE;if(Na){var pE="oninput"in document;if(!pE){var KP=document.createElement("div");KP.setAttribute("oninput","return;"),pE=typeof KP.oninput=="function"}mE=pE}else mE=!1;WP=mE&&(!document.documentMode||9<document.documentMode)}function YP(){ug&&(ug.detachEvent("onpropertychange",XP),dg=ug=null)}function XP(o){if(o.propertyName==="value"&&Fv(dg)){var c=[];qP(c,dg,o,Aa(o)),Yc(Gte,c)}}function Wte(o,c,f){o==="focusin"?(YP(),ug=c,dg=f,ug.attachEvent("onpropertychange",XP)):o==="focusout"&&YP()}function Kte(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Fv(dg)}function Yte(o,c){if(o==="click")return Fv(c)}function Xte(o,c){if(o==="input"||o==="change")return Fv(c)}function Qte(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Xs=typeof Object.is=="function"?Object.is:Qte;function hg(o,c){if(Xs(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var f=Object.keys(o),g=Object.keys(c);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var x=f[g];if(!lt.call(c,x)||!Xs(o[x],c[x]))return!1}return!0}function QP(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function JP(o,c){var f=QP(o);o=0;for(var g;f;){if(f.nodeType===3){if(g=o+f.textContent.length,o<=c&&g>=c)return{node:f,offset:c-o};o=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=QP(f)}}function ZP(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?ZP(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function eR(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=Ns(o.document);c instanceof o.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)o=c.contentWindow;else break;c=Ns(o.document)}return c}function gE(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var Jte=Na&&"documentMode"in document&&11>=document.documentMode,wf=null,yE=null,fg=null,vE=!1;function tR(o,c,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;vE||wf==null||wf!==Ns(g)||(g=wf,"selectionStart"in g&&gE(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),fg&&hg(fg,g)||(fg=g,g=Ob(yE,"onSelect"),0<g.length&&(c=new qo("onSelect","select",null,c,f),o.push({event:c,listeners:g}),c.target=wf)))}function Pd(o,c){var f={};return f[o.toLowerCase()]=c.toLowerCase(),f["Webkit"+o]="webkit"+c,f["Moz"+o]="moz"+c,f}var xf={animationend:Pd("Animation","AnimationEnd"),animationiteration:Pd("Animation","AnimationIteration"),animationstart:Pd("Animation","AnimationStart"),transitionrun:Pd("Transition","TransitionRun"),transitionstart:Pd("Transition","TransitionStart"),transitioncancel:Pd("Transition","TransitionCancel"),transitionend:Pd("Transition","TransitionEnd")},bE={},nR={};Na&&(nR=document.createElement("div").style,"AnimationEvent"in window||(delete xf.animationend.animation,delete xf.animationiteration.animation,delete xf.animationstart.animation),"TransitionEvent"in window||delete xf.transitionend.transition);function Rd(o){if(bE[o])return bE[o];if(!xf[o])return o;var c=xf[o],f;for(f in c)if(c.hasOwnProperty(f)&&f in nR)return bE[o]=c[f];return o}var rR=Rd("animationend"),iR=Rd("animationiteration"),sR=Rd("animationstart"),Zte=Rd("transitionrun"),ene=Rd("transitionstart"),tne=Rd("transitioncancel"),aR=Rd("transitionend"),oR=new Map,wE="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wE.push("scrollEnd");function lo(o,c){oR.set(o,c),Ys(c,[o])}var Hv=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Ia=[],_f=0,xE=0;function qv(){for(var o=_f,c=xE=_f=0;c<o;){var f=Ia[c];Ia[c++]=null;var g=Ia[c];Ia[c++]=null;var x=Ia[c];Ia[c++]=null;var T=Ia[c];if(Ia[c++]=null,g!==null&&x!==null){var j=g.pending;j===null?x.next=x:(x.next=j.next,j.next=x),g.pending=x}T!==0&&lR(f,x,T)}}function Gv(o,c,f,g){Ia[_f++]=o,Ia[_f++]=c,Ia[_f++]=f,Ia[_f++]=g,xE|=g,o.lanes|=g,o=o.alternate,o!==null&&(o.lanes|=g)}function _E(o,c,f,g){return Gv(o,c,f,g),Wv(o)}function Dd(o,c){return Gv(o,null,null,c),Wv(o)}function lR(o,c,f){o.lanes|=f;var g=o.alternate;g!==null&&(g.lanes|=f);for(var x=!1,T=o.return;T!==null;)T.childLanes|=f,g=T.alternate,g!==null&&(g.childLanes|=f),T.tag===22&&(o=T.stateNode,o===null||o._visibility&1||(x=!0)),o=T,T=T.return;return o.tag===3?(T=o.stateNode,x&&c!==null&&(x=31-Qt(f),o=T.hiddenUpdates,g=o[x],g===null?o[x]=[c]:g.push(c),c.lane=f|536870912),T):null}function Wv(o){if(50<Dg)throw Dg=0,OT=null,Error(r(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var Ef={};function nne(o,c,f,g){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qs(o,c,f,g){return new nne(o,c,f,g)}function EE(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Dl(o,c){var f=o.alternate;return f===null?(f=Qs(o.tag,c,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=c,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&65011712,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,c=o.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f.refCleanup=o.refCleanup,f}function cR(o,c){o.flags&=65011714;var f=o.alternate;return f===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=f.childLanes,o.lanes=f.lanes,o.child=f.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=f.memoizedProps,o.memoizedState=f.memoizedState,o.updateQueue=f.updateQueue,o.type=f.type,c=f.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function Kv(o,c,f,g,x,T){var j=0;if(g=o,typeof o=="function")EE(o)&&(j=1);else if(typeof o=="string")j=ore(o,f,Q.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case M:return o=Qs(31,f,c,x),o.elementType=M,o.lanes=T,o;case _:return Md(f.children,x,T,c);case E:j=8,x|=24;break;case C:return o=Qs(12,f,c,x|2),o.elementType=C,o.lanes=T,o;case D:return o=Qs(13,f,c,x),o.elementType=D,o.lanes=T,o;case P:return o=Qs(19,f,c,x),o.elementType=P,o.lanes=T,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case O:j=10;break e;case N:j=9;break e;case R:j=11;break e;case A:j=14;break e;case k:j=16,g=null;break e}j=29,f=Error(r(130,o===null?"null":typeof o,"")),g=null}return c=Qs(j,f,c,x),c.elementType=o,c.type=g,c.lanes=T,c}function Md(o,c,f,g){return o=Qs(7,o,g,c),o.lanes=f,o}function TE(o,c,f){return o=Qs(6,o,null,c),o.lanes=f,o}function uR(o){var c=Qs(18,null,null,0);return c.stateNode=o,c}function SE(o,c,f){return c=Qs(4,o.children!==null?o.children:[],o.key,c),c.lanes=f,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var dR=new WeakMap;function Oa(o,c){if(typeof o=="object"&&o!==null){var f=dR.get(o);return f!==void 0?f:(c={value:o,source:c,stack:Ke(c)},dR.set(o,c),c)}return{value:o,source:c,stack:Ke(c)}}var Tf=[],Sf=0,Yv=null,mg=0,ja=[],Pa=0,Zc=null,Yo=1,Xo="";function Ml(o,c){Tf[Sf++]=mg,Tf[Sf++]=Yv,Yv=o,mg=c}function hR(o,c,f){ja[Pa++]=Yo,ja[Pa++]=Xo,ja[Pa++]=Zc,Zc=o;var g=Yo;o=Xo;var x=32-Qt(g)-1;g&=~(1<<x),f+=1;var T=32-Qt(c)+x;if(30<T){var j=x-x%5;T=(g&(1<<j)-1).toString(32),g>>=j,x-=j,Yo=1<<32-Qt(c)+x|f<<x|g,Xo=T+o}else Yo=1<<T|f<<x|g,Xo=o}function CE(o){o.return!==null&&(Ml(o,1),hR(o,1,0))}function AE(o){for(;o===Yv;)Yv=Tf[--Sf],Tf[Sf]=null,mg=Tf[--Sf],Tf[Sf]=null;for(;o===Zc;)Zc=ja[--Pa],ja[Pa]=null,Xo=ja[--Pa],ja[Pa]=null,Yo=ja[--Pa],ja[Pa]=null}function fR(o,c){ja[Pa++]=Yo,ja[Pa++]=Xo,ja[Pa++]=Zc,Yo=c.id,Xo=c.overflow,Zc=o}var Ii=null,Bn=null,Ut=!1,eu=null,Ra=!1,NE=Error(r(519));function tu(o){var c=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw pg(Oa(c,o)),NE}function mR(o){var c=o.stateNode,f=o.type,g=o.memoizedProps;switch(c[yr]=o,c[Pn]=g,f){case"dialog":Pt("cancel",c),Pt("close",c);break;case"iframe":case"object":case"embed":Pt("load",c);break;case"video":case"audio":for(f=0;f<Lg.length;f++)Pt(Lg[f],c);break;case"source":Pt("error",c);break;case"img":case"image":case"link":Pt("error",c),Pt("load",c);break;case"details":Pt("toggle",c);break;case"input":Pt("invalid",c),Sd(c,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":Pt("invalid",c);break;case"textarea":Pt("invalid",c),Ve(c,g.value,g.defaultValue,g.children)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||c.textContent===""+f||g.suppressHydrationWarning===!0||O6(c.textContent,f)?(g.popover!=null&&(Pt("beforetoggle",c),Pt("toggle",c)),g.onScroll!=null&&Pt("scroll",c),g.onScrollEnd!=null&&Pt("scrollend",c),g.onClick!=null&&(c.onclick=ro),c=!0):c=!1,c||tu(o,!0)}function pR(o){for(Ii=o.return;Ii;)switch(Ii.tag){case 5:case 31:case 13:Ra=!1;return;case 27:case 3:Ra=!0;return;default:Ii=Ii.return}}function Cf(o){if(o!==Ii)return!1;if(!Ut)return pR(o),Ut=!0,!1;var c=o.tag,f;if((f=c!==3&&c!==27)&&((f=c===5)&&(f=o.type,f=!(f!=="form"&&f!=="button")||GT(o.type,o.memoizedProps)),f=!f),f&&Bn&&tu(o),pR(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));Bn=B6(o)}else if(c===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));Bn=B6(o)}else c===27?(c=Bn,pu(o.type)?(o=QT,QT=null,Bn=o):Bn=c):Bn=Ii?Ma(o.stateNode.nextSibling):null;return!0}function Ld(){Bn=Ii=null,Ut=!1}function kE(){var o=eu;return o!==null&&(js===null?js=o:js.push.apply(js,o),eu=null),o}function pg(o){eu===null?eu=[o]:eu.push(o)}var IE=B(null),Vd=null,Ll=null;function nu(o,c,f){G(IE,c._currentValue),c._currentValue=f}function Vl(o){o._currentValue=IE.current,X(IE)}function OE(o,c,f){for(;o!==null;){var g=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),o===f)break;o=o.return}}function jE(o,c,f,g){var x=o.child;for(x!==null&&(x.return=o);x!==null;){var T=x.dependencies;if(T!==null){var j=x.child;T=T.firstContext;e:for(;T!==null;){var F=T;T=x;for(var Y=0;Y<c.length;Y++)if(F.context===c[Y]){T.lanes|=f,F=T.alternate,F!==null&&(F.lanes|=f),OE(T.return,f,o),g||(j=null);break e}T=F.next}}else if(x.tag===18){if(j=x.return,j===null)throw Error(r(341));j.lanes|=f,T=j.alternate,T!==null&&(T.lanes|=f),OE(j,f,o),j=null}else j=x.child;if(j!==null)j.return=x;else for(j=x;j!==null;){if(j===o){j=null;break}if(x=j.sibling,x!==null){x.return=j.return,j=x;break}j=j.return}x=j}}function Af(o,c,f,g){o=null;for(var x=c,T=!1;x!==null;){if(!T){if((x.flags&524288)!==0)T=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var j=x.alternate;if(j===null)throw Error(r(387));if(j=j.memoizedProps,j!==null){var F=x.type;Xs(x.pendingProps.value,j.value)||(o!==null?o.push(F):o=[F])}}else if(x===Se.current){if(j=x.alternate,j===null)throw Error(r(387));j.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(o!==null?o.push($g):o=[$g])}x=x.return}o!==null&&jE(c,o,f,g),c.flags|=262144}function Xv(o){for(o=o.firstContext;o!==null;){if(!Xs(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Ud(o){Vd=o,Ll=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Oi(o){return gR(Vd,o)}function Qv(o,c){return Vd===null&&Ud(o),gR(o,c)}function gR(o,c){var f=c._currentValue;if(c={context:c,memoizedValue:f,next:null},Ll===null){if(o===null)throw Error(r(308));Ll=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else Ll=Ll.next=c;return f}var rne=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(f,g){o.push(g)}};this.abort=function(){c.aborted=!0,o.forEach(function(f){return f()})}},ine=t.unstable_scheduleCallback,sne=t.unstable_NormalPriority,Ur={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function PE(){return{controller:new rne,data:new Map,refCount:0}}function gg(o){o.refCount--,o.refCount===0&&ine(sne,function(){o.controller.abort()})}var yg=null,RE=0,Nf=0,kf=null;function ane(o,c){if(yg===null){var f=yg=[];RE=0,Nf=LT(),kf={status:"pending",value:void 0,then:function(g){f.push(g)}}}return RE++,c.then(yR,yR),c}function yR(){if(--RE===0&&yg!==null){kf!==null&&(kf.status="fulfilled");var o=yg;yg=null,Nf=0,kf=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function one(o,c){var f=[],g={status:"pending",value:null,reason:null,then:function(x){f.push(x)}};return o.then(function(){g.status="fulfilled",g.value=c;for(var x=0;x<f.length;x++)(0,f[x])(c)},function(x){for(g.status="rejected",g.reason=x,x=0;x<f.length;x++)(0,f[x])(void 0)}),g}var vR=K.S;K.S=function(o,c){t6=Ht(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&ane(o,c),vR!==null&&vR(o,c)};var Bd=B(null);function DE(){var o=Bd.current;return o!==null?o:kn.pooledCache}function Jv(o,c){c===null?G(Bd,Bd.current):G(Bd,c.pool)}function bR(){var o=DE();return o===null?null:{parent:Ur._currentValue,pool:o}}var If=Error(r(460)),ME=Error(r(474)),Zv=Error(r(542)),eb={then:function(){}};function wR(o){return o=o.status,o==="fulfilled"||o==="rejected"}function xR(o,c,f){switch(f=o[f],f===void 0?o.push(c):f!==c&&(c.then(ro,ro),c=f),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,ER(o),o;default:if(typeof c.status=="string")c.then(ro,ro);else{if(o=kn,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=c,o.status="pending",o.then(function(g){if(c.status==="pending"){var x=c;x.status="fulfilled",x.value=g}},function(g){if(c.status==="pending"){var x=c;x.status="rejected",x.reason=g}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,ER(o),o}throw $d=c,If}}function zd(o){try{var c=o._init;return c(o._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?($d=f,If):f}}var $d=null;function _R(){if($d===null)throw Error(r(459));var o=$d;return $d=null,o}function ER(o){if(o===If||o===Zv)throw Error(r(483))}var Of=null,vg=0;function tb(o){var c=vg;return vg+=1,Of===null&&(Of=[]),xR(Of,o,c)}function bg(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function nb(o,c){throw c.$$typeof===y?Error(r(525)):(o=Object.prototype.toString.call(c),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function TR(o){function c(te,J){if(o){var ae=te.deletions;ae===null?(te.deletions=[J],te.flags|=16):ae.push(J)}}function f(te,J){if(!o)return null;for(;J!==null;)c(te,J),J=J.sibling;return null}function g(te){for(var J=new Map;te!==null;)te.key!==null?J.set(te.key,te):J.set(te.index,te),te=te.sibling;return J}function x(te,J){return te=Dl(te,J),te.index=0,te.sibling=null,te}function T(te,J,ae){return te.index=ae,o?(ae=te.alternate,ae!==null?(ae=ae.index,ae<J?(te.flags|=67108866,J):ae):(te.flags|=67108866,J)):(te.flags|=1048576,J)}function j(te){return o&&te.alternate===null&&(te.flags|=67108866),te}function F(te,J,ae,Ee){return J===null||J.tag!==6?(J=TE(ae,te.mode,Ee),J.return=te,J):(J=x(J,ae),J.return=te,J)}function Y(te,J,ae,Ee){var st=ae.type;return st===_?we(te,J,ae.props.children,Ee,ae.key):J!==null&&(J.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===k&&zd(st)===J.type)?(J=x(J,ae.props),bg(J,ae),J.return=te,J):(J=Kv(ae.type,ae.key,ae.props,null,te.mode,Ee),bg(J,ae),J.return=te,J)}function le(te,J,ae,Ee){return J===null||J.tag!==4||J.stateNode.containerInfo!==ae.containerInfo||J.stateNode.implementation!==ae.implementation?(J=SE(ae,te.mode,Ee),J.return=te,J):(J=x(J,ae.children||[]),J.return=te,J)}function we(te,J,ae,Ee,st){return J===null||J.tag!==7?(J=Md(ae,te.mode,Ee,st),J.return=te,J):(J=x(J,ae),J.return=te,J)}function Te(te,J,ae){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=TE(""+J,te.mode,ae),J.return=te,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case v:return ae=Kv(J.type,J.key,J.props,null,te.mode,ae),bg(ae,J),ae.return=te,ae;case w:return J=SE(J,te.mode,ae),J.return=te,J;case k:return J=zd(J),Te(te,J,ae)}if(fe(J)||z(J))return J=Md(J,te.mode,ae,null),J.return=te,J;if(typeof J.then=="function")return Te(te,tb(J),ae);if(J.$$typeof===O)return Te(te,Qv(te,J),ae);nb(te,J)}return null}function de(te,J,ae,Ee){var st=J!==null?J.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return st!==null?null:F(te,J,""+ae,Ee);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case v:return ae.key===st?Y(te,J,ae,Ee):null;case w:return ae.key===st?le(te,J,ae,Ee):null;case k:return ae=zd(ae),de(te,J,ae,Ee)}if(fe(ae)||z(ae))return st!==null?null:we(te,J,ae,Ee,null);if(typeof ae.then=="function")return de(te,J,tb(ae),Ee);if(ae.$$typeof===O)return de(te,J,Qv(te,ae),Ee);nb(te,ae)}return null}function ge(te,J,ae,Ee,st){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return te=te.get(ae)||null,F(J,te,""+Ee,st);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case v:return te=te.get(Ee.key===null?ae:Ee.key)||null,Y(J,te,Ee,st);case w:return te=te.get(Ee.key===null?ae:Ee.key)||null,le(J,te,Ee,st);case k:return Ee=zd(Ee),ge(te,J,ae,Ee,st)}if(fe(Ee)||z(Ee))return te=te.get(ae)||null,we(J,te,Ee,st,null);if(typeof Ee.then=="function")return ge(te,J,ae,tb(Ee),st);if(Ee.$$typeof===O)return ge(te,J,ae,Qv(J,Ee),st);nb(J,Ee)}return null}function He(te,J,ae,Ee){for(var st=null,Gt=null,Ye=J,St=J=0,Mt=null;Ye!==null&&St<ae.length;St++){Ye.index>St?(Mt=Ye,Ye=null):Mt=Ye.sibling;var Wt=de(te,Ye,ae[St],Ee);if(Wt===null){Ye===null&&(Ye=Mt);break}o&&Ye&&Wt.alternate===null&&c(te,Ye),J=T(Wt,J,St),Gt===null?st=Wt:Gt.sibling=Wt,Gt=Wt,Ye=Mt}if(St===ae.length)return f(te,Ye),Ut&&Ml(te,St),st;if(Ye===null){for(;St<ae.length;St++)Ye=Te(te,ae[St],Ee),Ye!==null&&(J=T(Ye,J,St),Gt===null?st=Ye:Gt.sibling=Ye,Gt=Ye);return Ut&&Ml(te,St),st}for(Ye=g(Ye);St<ae.length;St++)Mt=ge(Ye,te,St,ae[St],Ee),Mt!==null&&(o&&Mt.alternate!==null&&Ye.delete(Mt.key===null?St:Mt.key),J=T(Mt,J,St),Gt===null?st=Mt:Gt.sibling=Mt,Gt=Mt);return o&&Ye.forEach(function(wu){return c(te,wu)}),Ut&&Ml(te,St),st}function ot(te,J,ae,Ee){if(ae==null)throw Error(r(151));for(var st=null,Gt=null,Ye=J,St=J=0,Mt=null,Wt=ae.next();Ye!==null&&!Wt.done;St++,Wt=ae.next()){Ye.index>St?(Mt=Ye,Ye=null):Mt=Ye.sibling;var wu=de(te,Ye,Wt.value,Ee);if(wu===null){Ye===null&&(Ye=Mt);break}o&&Ye&&wu.alternate===null&&c(te,Ye),J=T(wu,J,St),Gt===null?st=wu:Gt.sibling=wu,Gt=wu,Ye=Mt}if(Wt.done)return f(te,Ye),Ut&&Ml(te,St),st;if(Ye===null){for(;!Wt.done;St++,Wt=ae.next())Wt=Te(te,Wt.value,Ee),Wt!==null&&(J=T(Wt,J,St),Gt===null?st=Wt:Gt.sibling=Wt,Gt=Wt);return Ut&&Ml(te,St),st}for(Ye=g(Ye);!Wt.done;St++,Wt=ae.next())Wt=ge(Ye,te,St,Wt.value,Ee),Wt!==null&&(o&&Wt.alternate!==null&&Ye.delete(Wt.key===null?St:Wt.key),J=T(Wt,J,St),Gt===null?st=Wt:Gt.sibling=Wt,Gt=Wt);return o&&Ye.forEach(function(vre){return c(te,vre)}),Ut&&Ml(te,St),st}function wn(te,J,ae,Ee){if(typeof ae=="object"&&ae!==null&&ae.type===_&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case v:e:{for(var st=ae.key;J!==null;){if(J.key===st){if(st=ae.type,st===_){if(J.tag===7){f(te,J.sibling),Ee=x(J,ae.props.children),Ee.return=te,te=Ee;break e}}else if(J.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===k&&zd(st)===J.type){f(te,J.sibling),Ee=x(J,ae.props),bg(Ee,ae),Ee.return=te,te=Ee;break e}f(te,J);break}else c(te,J);J=J.sibling}ae.type===_?(Ee=Md(ae.props.children,te.mode,Ee,ae.key),Ee.return=te,te=Ee):(Ee=Kv(ae.type,ae.key,ae.props,null,te.mode,Ee),bg(Ee,ae),Ee.return=te,te=Ee)}return j(te);case w:e:{for(st=ae.key;J!==null;){if(J.key===st)if(J.tag===4&&J.stateNode.containerInfo===ae.containerInfo&&J.stateNode.implementation===ae.implementation){f(te,J.sibling),Ee=x(J,ae.children||[]),Ee.return=te,te=Ee;break e}else{f(te,J);break}else c(te,J);J=J.sibling}Ee=SE(ae,te.mode,Ee),Ee.return=te,te=Ee}return j(te);case k:return ae=zd(ae),wn(te,J,ae,Ee)}if(fe(ae))return He(te,J,ae,Ee);if(z(ae)){if(st=z(ae),typeof st!="function")throw Error(r(150));return ae=st.call(ae),ot(te,J,ae,Ee)}if(typeof ae.then=="function")return wn(te,J,tb(ae),Ee);if(ae.$$typeof===O)return wn(te,J,Qv(te,ae),Ee);nb(te,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint"?(ae=""+ae,J!==null&&J.tag===6?(f(te,J.sibling),Ee=x(J,ae),Ee.return=te,te=Ee):(f(te,J),Ee=TE(ae,te.mode,Ee),Ee.return=te,te=Ee),j(te)):f(te,J)}return function(te,J,ae,Ee){try{vg=0;var st=wn(te,J,ae,Ee);return Of=null,st}catch(Ye){if(Ye===If||Ye===Zv)throw Ye;var Gt=Qs(29,Ye,null,te.mode);return Gt.lanes=Ee,Gt.return=te,Gt}finally{}}}var Fd=TR(!0),SR=TR(!1),ru=!1;function LE(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function VE(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function iu(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function su(o,c,f){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(en&2)!==0){var x=g.pending;return x===null?c.next=c:(c.next=x.next,x.next=c),g.pending=c,c=Wv(o),lR(o,null,f),c}return Gv(o,g,c,f),Wv(o)}function wg(o,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194048)!==0)){var g=c.lanes;g&=o.pendingLanes,f|=g,c.lanes=f,gr(o,f)}}function UE(o,c){var f=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var x=null,T=null;if(f=f.firstBaseUpdate,f!==null){do{var j={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};T===null?x=T=j:T=T.next=j,f=f.next}while(f!==null);T===null?x=T=c:T=T.next=c}else x=T=c;f={baseState:g.baseState,firstBaseUpdate:x,lastBaseUpdate:T,shared:g.shared,callbacks:g.callbacks},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=c:o.next=c,f.lastBaseUpdate=c}var BE=!1;function xg(){if(BE){var o=kf;if(o!==null)throw o}}function _g(o,c,f,g){BE=!1;var x=o.updateQueue;ru=!1;var T=x.firstBaseUpdate,j=x.lastBaseUpdate,F=x.shared.pending;if(F!==null){x.shared.pending=null;var Y=F,le=Y.next;Y.next=null,j===null?T=le:j.next=le,j=Y;var we=o.alternate;we!==null&&(we=we.updateQueue,F=we.lastBaseUpdate,F!==j&&(F===null?we.firstBaseUpdate=le:F.next=le,we.lastBaseUpdate=Y))}if(T!==null){var Te=x.baseState;j=0,we=le=Y=null,F=T;do{var de=F.lane&-536870913,ge=de!==F.lane;if(ge?(Dt&de)===de:(g&de)===de){de!==0&&de===Nf&&(BE=!0),we!==null&&(we=we.next={lane:0,tag:F.tag,payload:F.payload,callback:null,next:null});e:{var He=o,ot=F;de=c;var wn=f;switch(ot.tag){case 1:if(He=ot.payload,typeof He=="function"){Te=He.call(wn,Te,de);break e}Te=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=ot.payload,de=typeof He=="function"?He.call(wn,Te,de):He,de==null)break e;Te=p({},Te,de);break e;case 2:ru=!0}}de=F.callback,de!==null&&(o.flags|=64,ge&&(o.flags|=8192),ge=x.callbacks,ge===null?x.callbacks=[de]:ge.push(de))}else ge={lane:de,tag:F.tag,payload:F.payload,callback:F.callback,next:null},we===null?(le=we=ge,Y=Te):we=we.next=ge,j|=de;if(F=F.next,F===null){if(F=x.shared.pending,F===null)break;ge=F,F=ge.next,ge.next=null,x.lastBaseUpdate=ge,x.shared.pending=null}}while(!0);we===null&&(Y=Te),x.baseState=Y,x.firstBaseUpdate=le,x.lastBaseUpdate=we,T===null&&(x.shared.lanes=0),uu|=j,o.lanes=j,o.memoizedState=Te}}function CR(o,c){if(typeof o!="function")throw Error(r(191,o));o.call(c)}function AR(o,c){var f=o.callbacks;if(f!==null)for(o.callbacks=null,o=0;o<f.length;o++)CR(f[o],c)}var jf=B(null),rb=B(0);function NR(o,c){o=Wl,G(rb,o),G(jf,c),Wl=o|c.baseLanes}function zE(){G(rb,Wl),G(jf,jf.current)}function $E(){Wl=rb.current,X(jf),X(rb)}var Js=B(null),Da=null;function au(o){var c=o.alternate;G(Nr,Nr.current&1),G(Js,o),Da===null&&(c===null||jf.current!==null||c.memoizedState!==null)&&(Da=o)}function FE(o){G(Nr,Nr.current),G(Js,o),Da===null&&(Da=o)}function kR(o){o.tag===22?(G(Nr,Nr.current),G(Js,o),Da===null&&(Da=o)):ou()}function ou(){G(Nr,Nr.current),G(Js,Js.current)}function Zs(o){X(Js),Da===o&&(Da=null),X(Nr)}var Nr=B(0);function ib(o){for(var c=o;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||YT(f)||XT(f)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Ul=0,Tt=null,vn=null,Br=null,sb=!1,Pf=!1,Hd=!1,ab=0,Eg=0,Rf=null,lne=0;function wr(){throw Error(r(321))}function HE(o,c){if(c===null)return!1;for(var f=0;f<c.length&&f<o.length;f++)if(!Xs(o[f],c[f]))return!1;return!0}function qE(o,c,f,g,x,T){return Ul=T,Tt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,K.H=o===null||o.memoizedState===null?h3:aT,Hd=!1,T=f(g,x),Hd=!1,Pf&&(T=OR(c,f,g,x)),IR(o),T}function IR(o){K.H=Cg;var c=vn!==null&&vn.next!==null;if(Ul=0,Br=vn=Tt=null,sb=!1,Eg=0,Rf=null,c)throw Error(r(300));o===null||zr||(o=o.dependencies,o!==null&&Xv(o)&&(zr=!0))}function OR(o,c,f,g){Tt=o;var x=0;do{if(Pf&&(Rf=null),Eg=0,Pf=!1,25<=x)throw Error(r(301));if(x+=1,Br=vn=null,o.updateQueue!=null){var T=o.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}K.H=f3,T=c(f,g)}while(Pf);return T}function cne(){var o=K.H,c=o.useState()[0];return c=typeof c.then=="function"?Tg(c):c,o=o.useState()[0],(vn!==null?vn.memoizedState:null)!==o&&(Tt.flags|=1024),c}function GE(){var o=ab!==0;return ab=0,o}function WE(o,c,f){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~f}function KE(o){if(sb){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}sb=!1}Ul=0,Br=vn=Tt=null,Pf=!1,Eg=ab=0,Rf=null}function gs(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Br===null?Tt.memoizedState=Br=o:Br=Br.next=o,Br}function kr(){if(vn===null){var o=Tt.alternate;o=o!==null?o.memoizedState:null}else o=vn.next;var c=Br===null?Tt.memoizedState:Br.next;if(c!==null)Br=c,vn=o;else{if(o===null)throw Tt.alternate===null?Error(r(467)):Error(r(310));vn=o,o={memoizedState:vn.memoizedState,baseState:vn.baseState,baseQueue:vn.baseQueue,queue:vn.queue,next:null},Br===null?Tt.memoizedState=Br=o:Br=Br.next=o}return Br}function ob(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tg(o){var c=Eg;return Eg+=1,Rf===null&&(Rf=[]),o=xR(Rf,o,c),c=Tt,(Br===null?c.memoizedState:Br.next)===null&&(c=c.alternate,K.H=c===null||c.memoizedState===null?h3:aT),o}function lb(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Tg(o);if(o.$$typeof===O)return Oi(o)}throw Error(r(438,String(o)))}function YE(o){var c=null,f=Tt.updateQueue;if(f!==null&&(c=f.memoCache),c==null){var g=Tt.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(c={data:g.data.map(function(x){return x.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),f===null&&(f=ob(),Tt.updateQueue=f),f.memoCache=c,f=c.data[c.index],f===void 0)for(f=c.data[c.index]=Array(o),g=0;g<o;g++)f[g]=V;return c.index++,f}function Bl(o,c){return typeof c=="function"?c(o):c}function cb(o){var c=kr();return XE(c,vn,o)}function XE(o,c,f){var g=o.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=f;var x=o.baseQueue,T=g.pending;if(T!==null){if(x!==null){var j=x.next;x.next=T.next,T.next=j}c.baseQueue=x=T,g.pending=null}if(T=o.baseState,x===null)o.memoizedState=T;else{c=x.next;var F=j=null,Y=null,le=c,we=!1;do{var Te=le.lane&-536870913;if(Te!==le.lane?(Dt&Te)===Te:(Ul&Te)===Te){var de=le.revertLane;if(de===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),Te===Nf&&(we=!0);else if((Ul&de)===de){le=le.next,de===Nf&&(we=!0);continue}else Te={lane:0,revertLane:le.revertLane,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},Y===null?(F=Y=Te,j=T):Y=Y.next=Te,Tt.lanes|=de,uu|=de;Te=le.action,Hd&&f(T,Te),T=le.hasEagerState?le.eagerState:f(T,Te)}else de={lane:Te,revertLane:le.revertLane,gesture:le.gesture,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},Y===null?(F=Y=de,j=T):Y=Y.next=de,Tt.lanes|=Te,uu|=Te;le=le.next}while(le!==null&&le!==c);if(Y===null?j=T:Y.next=F,!Xs(T,o.memoizedState)&&(zr=!0,we&&(f=kf,f!==null)))throw f;o.memoizedState=T,o.baseState=j,o.baseQueue=Y,g.lastRenderedState=T}return x===null&&(g.lanes=0),[o.memoizedState,g.dispatch]}function QE(o){var c=kr(),f=c.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=o;var g=f.dispatch,x=f.pending,T=c.memoizedState;if(x!==null){f.pending=null;var j=x=x.next;do T=o(T,j.action),j=j.next;while(j!==x);Xs(T,c.memoizedState)||(zr=!0),c.memoizedState=T,c.baseQueue===null&&(c.baseState=T),f.lastRenderedState=T}return[T,g]}function jR(o,c,f){var g=Tt,x=kr(),T=Ut;if(T){if(f===void 0)throw Error(r(407));f=f()}else f=c();var j=!Xs((vn||x).memoizedState,f);if(j&&(x.memoizedState=f,zr=!0),x=x.queue,eT(DR.bind(null,g,x,o),[o]),x.getSnapshot!==c||j||Br!==null&&Br.memoizedState.tag&1){if(g.flags|=2048,Df(9,{destroy:void 0},RR.bind(null,g,x,f,c),null),kn===null)throw Error(r(349));T||(Ul&127)!==0||PR(g,c,f)}return f}function PR(o,c,f){o.flags|=16384,o={getSnapshot:c,value:f},c=Tt.updateQueue,c===null?(c=ob(),Tt.updateQueue=c,c.stores=[o]):(f=c.stores,f===null?c.stores=[o]:f.push(o))}function RR(o,c,f,g){c.value=f,c.getSnapshot=g,MR(c)&&LR(o)}function DR(o,c,f){return f(function(){MR(c)&&LR(o)})}function MR(o){var c=o.getSnapshot;o=o.value;try{var f=c();return!Xs(o,f)}catch{return!0}}function LR(o){var c=Dd(o,2);c!==null&&Ps(c,o,2)}function JE(o){var c=gs();if(typeof o=="function"){var f=o;if(o=f(),Hd){hi(!0);try{f()}finally{hi(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bl,lastRenderedState:o},c}function VR(o,c,f,g){return o.baseState=f,XE(o,vn,typeof g=="function"?g:Bl)}function une(o,c,f,g,x){if(hb(o))throw Error(r(485));if(o=c.action,o!==null){var T={payload:x,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){T.listeners.push(j)}};K.T!==null?f(!0):T.isTransition=!1,g(T),f=c.pending,f===null?(T.next=c.pending=T,UR(c,T)):(T.next=f.next,c.pending=f.next=T)}}function UR(o,c){var f=c.action,g=c.payload,x=o.state;if(c.isTransition){var T=K.T,j={};K.T=j;try{var F=f(x,g),Y=K.S;Y!==null&&Y(j,F),BR(o,c,F)}catch(le){ZE(o,c,le)}finally{T!==null&&j.types!==null&&(T.types=j.types),K.T=T}}else try{T=f(x,g),BR(o,c,T)}catch(le){ZE(o,c,le)}}function BR(o,c,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){zR(o,c,g)},function(g){return ZE(o,c,g)}):zR(o,c,f)}function zR(o,c,f){c.status="fulfilled",c.value=f,$R(c),o.state=f,c=o.pending,c!==null&&(f=c.next,f===c?o.pending=null:(f=f.next,c.next=f,UR(o,f)))}function ZE(o,c,f){var g=o.pending;if(o.pending=null,g!==null){g=g.next;do c.status="rejected",c.reason=f,$R(c),c=c.next;while(c!==g)}o.action=null}function $R(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function FR(o,c){return c}function HR(o,c){if(Ut){var f=kn.formState;if(f!==null){e:{var g=Tt;if(Ut){if(Bn){t:{for(var x=Bn,T=Ra;x.nodeType!==8;){if(!T){x=null;break t}if(x=Ma(x.nextSibling),x===null){x=null;break t}}T=x.data,x=T==="F!"||T==="F"?x:null}if(x){Bn=Ma(x.nextSibling),g=x.data==="F!";break e}}tu(g)}g=!1}g&&(c=f[0])}}return f=gs(),f.memoizedState=f.baseState=c,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:FR,lastRenderedState:c},f.queue=g,f=c3.bind(null,Tt,g),g.dispatch=f,g=JE(!1),T=sT.bind(null,Tt,!1,g.queue),g=gs(),x={state:c,dispatch:null,action:o,pending:null},g.queue=x,f=une.bind(null,Tt,x,T,f),x.dispatch=f,g.memoizedState=o,[c,f,!1]}function qR(o){var c=kr();return GR(c,vn,o)}function GR(o,c,f){if(c=XE(o,c,FR)[0],o=cb(Bl)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var g=Tg(c)}catch(j){throw j===If?Zv:j}else g=c;c=kr();var x=c.queue,T=x.dispatch;return f!==c.memoizedState&&(Tt.flags|=2048,Df(9,{destroy:void 0},dne.bind(null,x,f),null)),[g,T,o]}function dne(o,c){o.action=c}function WR(o){var c=kr(),f=vn;if(f!==null)return GR(c,f,o);kr(),c=c.memoizedState,f=kr();var g=f.queue.dispatch;return f.memoizedState=o,[c,g,!1]}function Df(o,c,f,g){return o={tag:o,create:f,deps:g,inst:c,next:null},c=Tt.updateQueue,c===null&&(c=ob(),Tt.updateQueue=c),f=c.lastEffect,f===null?c.lastEffect=o.next=o:(g=f.next,f.next=o,o.next=g,c.lastEffect=o),o}function KR(){return kr().memoizedState}function ub(o,c,f,g){var x=gs();Tt.flags|=o,x.memoizedState=Df(1|c,{destroy:void 0},f,g===void 0?null:g)}function db(o,c,f,g){var x=kr();g=g===void 0?null:g;var T=x.memoizedState.inst;vn!==null&&g!==null&&HE(g,vn.memoizedState.deps)?x.memoizedState=Df(c,T,f,g):(Tt.flags|=o,x.memoizedState=Df(1|c,T,f,g))}function YR(o,c){ub(8390656,8,o,c)}function eT(o,c){db(2048,8,o,c)}function hne(o){Tt.flags|=4;var c=Tt.updateQueue;if(c===null)c=ob(),Tt.updateQueue=c,c.events=[o];else{var f=c.events;f===null?c.events=[o]:f.push(o)}}function XR(o){var c=kr().memoizedState;return hne({ref:c,nextImpl:o}),function(){if((en&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}function QR(o,c){return db(4,2,o,c)}function JR(o,c){return db(4,4,o,c)}function ZR(o,c){if(typeof c=="function"){o=o();var f=c(o);return function(){typeof f=="function"?f():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function e3(o,c,f){f=f!=null?f.concat([o]):null,db(4,4,ZR.bind(null,c,o),f)}function tT(){}function t3(o,c){var f=kr();c=c===void 0?null:c;var g=f.memoizedState;return c!==null&&HE(c,g[1])?g[0]:(f.memoizedState=[o,c],o)}function n3(o,c){var f=kr();c=c===void 0?null:c;var g=f.memoizedState;if(c!==null&&HE(c,g[1]))return g[0];if(g=o(),Hd){hi(!0);try{o()}finally{hi(!1)}}return f.memoizedState=[g,c],g}function nT(o,c,f){return f===void 0||(Ul&1073741824)!==0&&(Dt&261930)===0?o.memoizedState=c:(o.memoizedState=f,o=r6(),Tt.lanes|=o,uu|=o,f)}function r3(o,c,f,g){return Xs(f,c)?f:jf.current!==null?(o=nT(o,f,g),Xs(o,c)||(zr=!0),o):(Ul&42)===0||(Ul&1073741824)!==0&&(Dt&261930)===0?(zr=!0,o.memoizedState=f):(o=r6(),Tt.lanes|=o,uu|=o,c)}function i3(o,c,f,g,x){var T=W.p;W.p=T!==0&&8>T?T:8;var j=K.T,F={};K.T=F,sT(o,!1,c,f);try{var Y=x(),le=K.S;if(le!==null&&le(F,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var we=one(Y,g);Sg(o,c,we,na(o))}else Sg(o,c,g,na(o))}catch(Te){Sg(o,c,{then:function(){},status:"rejected",reason:Te},na())}finally{W.p=T,j!==null&&F.types!==null&&(j.types=F.types),K.T=j}}function fne(){}function rT(o,c,f,g){if(o.tag!==5)throw Error(r(476));var x=s3(o).queue;i3(o,x,c,ee,f===null?fne:function(){return a3(o),f(g)})}function s3(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bl,lastRenderedState:ee},next:null};var f={};return c.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bl,lastRenderedState:f},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function a3(o){var c=s3(o);c.next===null&&(c=o.alternate.memoizedState),Sg(o,c.next.queue,{},na())}function iT(){return Oi($g)}function o3(){return kr().memoizedState}function l3(){return kr().memoizedState}function mne(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var f=na();o=iu(f);var g=su(c,o,f);g!==null&&(Ps(g,c,f),wg(g,c,f)),c={cache:PE()},o.payload=c;return}c=c.return}}function pne(o,c,f){var g=na();f={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},hb(o)?u3(c,f):(f=_E(o,c,f,g),f!==null&&(Ps(f,o,g),d3(f,c,g)))}function c3(o,c,f){var g=na();Sg(o,c,f,g)}function Sg(o,c,f,g){var x={lane:g,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(hb(o))u3(c,x);else{var T=o.alternate;if(o.lanes===0&&(T===null||T.lanes===0)&&(T=c.lastRenderedReducer,T!==null))try{var j=c.lastRenderedState,F=T(j,f);if(x.hasEagerState=!0,x.eagerState=F,Xs(F,j))return Gv(o,c,x,0),kn===null&&qv(),!1}catch{}finally{}if(f=_E(o,c,x,g),f!==null)return Ps(f,o,g),d3(f,c,g),!0}return!1}function sT(o,c,f,g){if(g={lane:2,revertLane:LT(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},hb(o)){if(c)throw Error(r(479))}else c=_E(o,f,g,2),c!==null&&Ps(c,o,2)}function hb(o){var c=o.alternate;return o===Tt||c!==null&&c===Tt}function u3(o,c){Pf=sb=!0;var f=o.pending;f===null?c.next=c:(c.next=f.next,f.next=c),o.pending=c}function d3(o,c,f){if((f&4194048)!==0){var g=c.lanes;g&=o.pendingLanes,f|=g,c.lanes=f,gr(o,f)}}var Cg={readContext:Oi,use:lb,useCallback:wr,useContext:wr,useEffect:wr,useImperativeHandle:wr,useLayoutEffect:wr,useInsertionEffect:wr,useMemo:wr,useReducer:wr,useRef:wr,useState:wr,useDebugValue:wr,useDeferredValue:wr,useTransition:wr,useSyncExternalStore:wr,useId:wr,useHostTransitionStatus:wr,useFormState:wr,useActionState:wr,useOptimistic:wr,useMemoCache:wr,useCacheRefresh:wr};Cg.useEffectEvent=wr;var h3={readContext:Oi,use:lb,useCallback:function(o,c){return gs().memoizedState=[o,c===void 0?null:c],o},useContext:Oi,useEffect:YR,useImperativeHandle:function(o,c,f){f=f!=null?f.concat([o]):null,ub(4194308,4,ZR.bind(null,c,o),f)},useLayoutEffect:function(o,c){return ub(4194308,4,o,c)},useInsertionEffect:function(o,c){ub(4,2,o,c)},useMemo:function(o,c){var f=gs();c=c===void 0?null:c;var g=o();if(Hd){hi(!0);try{o()}finally{hi(!1)}}return f.memoizedState=[g,c],g},useReducer:function(o,c,f){var g=gs();if(f!==void 0){var x=f(c);if(Hd){hi(!0);try{f(c)}finally{hi(!1)}}}else x=c;return g.memoizedState=g.baseState=x,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:x},g.queue=o,o=o.dispatch=pne.bind(null,Tt,o),[g.memoizedState,o]},useRef:function(o){var c=gs();return o={current:o},c.memoizedState=o},useState:function(o){o=JE(o);var c=o.queue,f=c3.bind(null,Tt,c);return c.dispatch=f,[o.memoizedState,f]},useDebugValue:tT,useDeferredValue:function(o,c){var f=gs();return nT(f,o,c)},useTransition:function(){var o=JE(!1);return o=i3.bind(null,Tt,o.queue,!0,!1),gs().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,f){var g=Tt,x=gs();if(Ut){if(f===void 0)throw Error(r(407));f=f()}else{if(f=c(),kn===null)throw Error(r(349));(Dt&127)!==0||PR(g,c,f)}x.memoizedState=f;var T={value:f,getSnapshot:c};return x.queue=T,YR(DR.bind(null,g,T,o),[o]),g.flags|=2048,Df(9,{destroy:void 0},RR.bind(null,g,T,f,c),null),f},useId:function(){var o=gs(),c=kn.identifierPrefix;if(Ut){var f=Xo,g=Yo;f=(g&~(1<<32-Qt(g)-1)).toString(32)+f,c="_"+c+"R_"+f,f=ab++,0<f&&(c+="H"+f.toString(32)),c+="_"}else f=lne++,c="_"+c+"r_"+f.toString(32)+"_";return o.memoizedState=c},useHostTransitionStatus:iT,useFormState:HR,useActionState:HR,useOptimistic:function(o){var c=gs();c.memoizedState=c.baseState=o;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=f,c=sT.bind(null,Tt,!0,f),f.dispatch=c,[o,c]},useMemoCache:YE,useCacheRefresh:function(){return gs().memoizedState=mne.bind(null,Tt)},useEffectEvent:function(o){var c=gs(),f={impl:o};return c.memoizedState=f,function(){if((en&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},aT={readContext:Oi,use:lb,useCallback:t3,useContext:Oi,useEffect:eT,useImperativeHandle:e3,useInsertionEffect:QR,useLayoutEffect:JR,useMemo:n3,useReducer:cb,useRef:KR,useState:function(){return cb(Bl)},useDebugValue:tT,useDeferredValue:function(o,c){var f=kr();return r3(f,vn.memoizedState,o,c)},useTransition:function(){var o=cb(Bl)[0],c=kr().memoizedState;return[typeof o=="boolean"?o:Tg(o),c]},useSyncExternalStore:jR,useId:o3,useHostTransitionStatus:iT,useFormState:qR,useActionState:qR,useOptimistic:function(o,c){var f=kr();return VR(f,vn,o,c)},useMemoCache:YE,useCacheRefresh:l3};aT.useEffectEvent=XR;var f3={readContext:Oi,use:lb,useCallback:t3,useContext:Oi,useEffect:eT,useImperativeHandle:e3,useInsertionEffect:QR,useLayoutEffect:JR,useMemo:n3,useReducer:QE,useRef:KR,useState:function(){return QE(Bl)},useDebugValue:tT,useDeferredValue:function(o,c){var f=kr();return vn===null?nT(f,o,c):r3(f,vn.memoizedState,o,c)},useTransition:function(){var o=QE(Bl)[0],c=kr().memoizedState;return[typeof o=="boolean"?o:Tg(o),c]},useSyncExternalStore:jR,useId:o3,useHostTransitionStatus:iT,useFormState:WR,useActionState:WR,useOptimistic:function(o,c){var f=kr();return vn!==null?VR(f,vn,o,c):(f.baseState=o,[o,f.queue.dispatch])},useMemoCache:YE,useCacheRefresh:l3};f3.useEffectEvent=XR;function oT(o,c,f,g){c=o.memoizedState,f=f(g,c),f=f==null?c:p({},c,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var lT={enqueueSetState:function(o,c,f){o=o._reactInternals;var g=na(),x=iu(g);x.payload=c,f!=null&&(x.callback=f),c=su(o,x,g),c!==null&&(Ps(c,o,g),wg(c,o,g))},enqueueReplaceState:function(o,c,f){o=o._reactInternals;var g=na(),x=iu(g);x.tag=1,x.payload=c,f!=null&&(x.callback=f),c=su(o,x,g),c!==null&&(Ps(c,o,g),wg(c,o,g))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var f=na(),g=iu(f);g.tag=2,c!=null&&(g.callback=c),c=su(o,g,f),c!==null&&(Ps(c,o,f),wg(c,o,f))}};function m3(o,c,f,g,x,T,j){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,T,j):c.prototype&&c.prototype.isPureReactComponent?!hg(f,g)||!hg(x,T):!0}function p3(o,c,f,g){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,g),c.state!==o&&lT.enqueueReplaceState(c,c.state,null)}function qd(o,c){var f=c;if("ref"in c){f={};for(var g in c)g!=="ref"&&(f[g]=c[g])}if(o=o.defaultProps){f===c&&(f=p({},f));for(var x in o)f[x]===void 0&&(f[x]=o[x])}return f}function g3(o){Hv(o)}function y3(o){console.error(o)}function v3(o){Hv(o)}function fb(o,c){try{var f=o.onUncaughtError;f(c.value,{componentStack:c.stack})}catch(g){setTimeout(function(){throw g})}}function b3(o,c,f){try{var g=o.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function cT(o,c,f){return f=iu(f),f.tag=3,f.payload={element:null},f.callback=function(){fb(o,c)},f}function w3(o){return o=iu(o),o.tag=3,o}function x3(o,c,f,g){var x=f.type.getDerivedStateFromError;if(typeof x=="function"){var T=g.value;o.payload=function(){return x(T)},o.callback=function(){b3(c,f,g)}}var j=f.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(o.callback=function(){b3(c,f,g),typeof x!="function"&&(du===null?du=new Set([this]):du.add(this));var F=g.stack;this.componentDidCatch(g.value,{componentStack:F!==null?F:""})})}function gne(o,c,f,g,x){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(c=f.alternate,c!==null&&Af(c,f,x,!0),f=Js.current,f!==null){switch(f.tag){case 31:case 13:return Da===null?Sb():f.alternate===null&&xr===0&&(xr=3),f.flags&=-257,f.flags|=65536,f.lanes=x,g===eb?f.flags|=16384:(c=f.updateQueue,c===null?f.updateQueue=new Set([g]):c.add(g),RT(o,g,x)),!1;case 22:return f.flags|=65536,g===eb?f.flags|=16384:(c=f.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=c):(f=c.retryQueue,f===null?c.retryQueue=new Set([g]):f.add(g)),RT(o,g,x)),!1}throw Error(r(435,f.tag))}return RT(o,g,x),Sb(),!1}if(Ut)return c=Js.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=x,g!==NE&&(o=Error(r(422),{cause:g}),pg(Oa(o,f)))):(g!==NE&&(c=Error(r(423),{cause:g}),pg(Oa(c,f))),o=o.current.alternate,o.flags|=65536,x&=-x,o.lanes|=x,g=Oa(g,f),x=cT(o.stateNode,g,x),UE(o,x),xr!==4&&(xr=2)),!1;var T=Error(r(520),{cause:g});if(T=Oa(T,f),Rg===null?Rg=[T]:Rg.push(T),xr!==4&&(xr=2),c===null)return!0;g=Oa(g,f),f=c;do{switch(f.tag){case 3:return f.flags|=65536,o=x&-x,f.lanes|=o,o=cT(f.stateNode,g,o),UE(f,o),!1;case 1:if(c=f.type,T=f.stateNode,(f.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(du===null||!du.has(T))))return f.flags|=65536,x&=-x,f.lanes|=x,x=w3(x),x3(x,o,f,g),UE(f,x),!1}f=f.return}while(f!==null);return!1}var uT=Error(r(461)),zr=!1;function ji(o,c,f,g){c.child=o===null?SR(c,null,f,g):Fd(c,o.child,f,g)}function _3(o,c,f,g,x){f=f.render;var T=c.ref;if("ref"in g){var j={};for(var F in g)F!=="ref"&&(j[F]=g[F])}else j=g;return Ud(c),g=qE(o,c,f,j,T,x),F=GE(),o!==null&&!zr?(WE(o,c,x),zl(o,c,x)):(Ut&&F&&CE(c),c.flags|=1,ji(o,c,g,x),c.child)}function E3(o,c,f,g,x){if(o===null){var T=f.type;return typeof T=="function"&&!EE(T)&&T.defaultProps===void 0&&f.compare===null?(c.tag=15,c.type=T,T3(o,c,T,g,x)):(o=Kv(f.type,null,g,c,c.mode,x),o.ref=c.ref,o.return=c,c.child=o)}if(T=o.child,!vT(o,x)){var j=T.memoizedProps;if(f=f.compare,f=f!==null?f:hg,f(j,g)&&o.ref===c.ref)return zl(o,c,x)}return c.flags|=1,o=Dl(T,g),o.ref=c.ref,o.return=c,c.child=o}function T3(o,c,f,g,x){if(o!==null){var T=o.memoizedProps;if(hg(T,g)&&o.ref===c.ref)if(zr=!1,c.pendingProps=g=T,vT(o,x))(o.flags&131072)!==0&&(zr=!0);else return c.lanes=o.lanes,zl(o,c,x)}return dT(o,c,f,g,x)}function S3(o,c,f,g){var x=g.children,T=o!==null?o.memoizedState:null;if(o===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((c.flags&128)!==0){if(T=T!==null?T.baseLanes|f:f,o!==null){for(g=c.child=o.child,x=0;g!==null;)x=x|g.lanes|g.childLanes,g=g.sibling;g=x&~T}else g=0,c.child=null;return C3(o,c,T,f,g)}if((f&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&Jv(c,T!==null?T.cachePool:null),T!==null?NR(c,T):zE(),kR(c);else return g=c.lanes=536870912,C3(o,c,T!==null?T.baseLanes|f:f,f,g)}else T!==null?(Jv(c,T.cachePool),NR(c,T),ou(),c.memoizedState=null):(o!==null&&Jv(c,null),zE(),ou());return ji(o,c,x,f),c.child}function Ag(o,c){return o!==null&&o.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function C3(o,c,f,g,x){var T=DE();return T=T===null?null:{parent:Ur._currentValue,pool:T},c.memoizedState={baseLanes:f,cachePool:T},o!==null&&Jv(c,null),zE(),kR(c),o!==null&&Af(o,c,g,!0),c.childLanes=x,null}function mb(o,c){return c=gb({mode:c.mode,children:c.children},o.mode),c.ref=o.ref,o.child=c,c.return=o,c}function A3(o,c,f){return Fd(c,o.child,null,f),o=mb(c,c.pendingProps),o.flags|=2,Zs(c),c.memoizedState=null,o}function yne(o,c,f){var g=c.pendingProps,x=(c.flags&128)!==0;if(c.flags&=-129,o===null){if(Ut){if(g.mode==="hidden")return o=mb(c,g),c.lanes=536870912,Ag(null,o);if(FE(c),(o=Bn)?(o=U6(o,Ra),o=o!==null&&o.data==="&"?o:null,o!==null&&(c.memoizedState={dehydrated:o,treeContext:Zc!==null?{id:Yo,overflow:Xo}:null,retryLane:536870912,hydrationErrors:null},f=uR(o),f.return=c,c.child=f,Ii=c,Bn=null)):o=null,o===null)throw tu(c);return c.lanes=536870912,null}return mb(c,g)}var T=o.memoizedState;if(T!==null){var j=T.dehydrated;if(FE(c),x)if(c.flags&256)c.flags&=-257,c=A3(o,c,f);else if(c.memoizedState!==null)c.child=o.child,c.flags|=128,c=null;else throw Error(r(558));else if(zr||Af(o,c,f,!1),x=(f&o.childLanes)!==0,zr||x){if(g=kn,g!==null&&(j=Mr(g,f),j!==0&&j!==T.retryLane))throw T.retryLane=j,Dd(o,j),Ps(g,o,j),uT;Sb(),c=A3(o,c,f)}else o=T.treeContext,Bn=Ma(j.nextSibling),Ii=c,Ut=!0,eu=null,Ra=!1,o!==null&&fR(c,o),c=mb(c,g),c.flags|=4096;return c}return o=Dl(o.child,{mode:g.mode,children:g.children}),o.ref=c.ref,c.child=o,o.return=c,o}function pb(o,c){var f=c.ref;if(f===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(o===null||o.ref!==f)&&(c.flags|=4194816)}}function dT(o,c,f,g,x){return Ud(c),f=qE(o,c,f,g,void 0,x),g=GE(),o!==null&&!zr?(WE(o,c,x),zl(o,c,x)):(Ut&&g&&CE(c),c.flags|=1,ji(o,c,f,x),c.child)}function N3(o,c,f,g,x,T){return Ud(c),c.updateQueue=null,f=OR(c,g,f,x),IR(o),g=GE(),o!==null&&!zr?(WE(o,c,T),zl(o,c,T)):(Ut&&g&&CE(c),c.flags|=1,ji(o,c,f,T),c.child)}function k3(o,c,f,g,x){if(Ud(c),c.stateNode===null){var T=Ef,j=f.contextType;typeof j=="object"&&j!==null&&(T=Oi(j)),T=new f(g,T),c.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=lT,c.stateNode=T,T._reactInternals=c,T=c.stateNode,T.props=g,T.state=c.memoizedState,T.refs={},LE(c),j=f.contextType,T.context=typeof j=="object"&&j!==null?Oi(j):Ef,T.state=c.memoizedState,j=f.getDerivedStateFromProps,typeof j=="function"&&(oT(c,f,j,g),T.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(j=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),j!==T.state&&lT.enqueueReplaceState(T,T.state,null),_g(c,g,T,x),xg(),T.state=c.memoizedState),typeof T.componentDidMount=="function"&&(c.flags|=4194308),g=!0}else if(o===null){T=c.stateNode;var F=c.memoizedProps,Y=qd(f,F);T.props=Y;var le=T.context,we=f.contextType;j=Ef,typeof we=="object"&&we!==null&&(j=Oi(we));var Te=f.getDerivedStateFromProps;we=typeof Te=="function"||typeof T.getSnapshotBeforeUpdate=="function",F=c.pendingProps!==F,we||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(F||le!==j)&&p3(c,T,g,j),ru=!1;var de=c.memoizedState;T.state=de,_g(c,g,T,x),xg(),le=c.memoizedState,F||de!==le||ru?(typeof Te=="function"&&(oT(c,f,Te,g),le=c.memoizedState),(Y=ru||m3(c,f,Y,g,de,le,j))?(we||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(c.flags|=4194308)):(typeof T.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=le),T.props=g,T.state=le,T.context=j,g=Y):(typeof T.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{T=c.stateNode,VE(o,c),j=c.memoizedProps,we=qd(f,j),T.props=we,Te=c.pendingProps,de=T.context,le=f.contextType,Y=Ef,typeof le=="object"&&le!==null&&(Y=Oi(le)),F=f.getDerivedStateFromProps,(le=typeof F=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(j!==Te||de!==Y)&&p3(c,T,g,Y),ru=!1,de=c.memoizedState,T.state=de,_g(c,g,T,x),xg();var ge=c.memoizedState;j!==Te||de!==ge||ru||o!==null&&o.dependencies!==null&&Xv(o.dependencies)?(typeof F=="function"&&(oT(c,f,F,g),ge=c.memoizedState),(we=ru||m3(c,f,we,g,de,ge,Y)||o!==null&&o.dependencies!==null&&Xv(o.dependencies))?(le||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(g,ge,Y),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(g,ge,Y)),typeof T.componentDidUpdate=="function"&&(c.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof T.componentDidUpdate!="function"||j===o.memoizedProps&&de===o.memoizedState||(c.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||j===o.memoizedProps&&de===o.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=ge),T.props=g,T.state=ge,T.context=Y,g=we):(typeof T.componentDidUpdate!="function"||j===o.memoizedProps&&de===o.memoizedState||(c.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||j===o.memoizedProps&&de===o.memoizedState||(c.flags|=1024),g=!1)}return T=g,pb(o,c),g=(c.flags&128)!==0,T||g?(T=c.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:T.render(),c.flags|=1,o!==null&&g?(c.child=Fd(c,o.child,null,x),c.child=Fd(c,null,f,x)):ji(o,c,f,x),c.memoizedState=T.state,o=c.child):o=zl(o,c,x),o}function I3(o,c,f,g){return Ld(),c.flags|=256,ji(o,c,f,g),c.child}var hT={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fT(o){return{baseLanes:o,cachePool:bR()}}function mT(o,c,f){return o=o!==null?o.childLanes&~f:0,c&&(o|=ta),o}function O3(o,c,f){var g=c.pendingProps,x=!1,T=(c.flags&128)!==0,j;if((j=T)||(j=o!==null&&o.memoizedState===null?!1:(Nr.current&2)!==0),j&&(x=!0,c.flags&=-129),j=(c.flags&32)!==0,c.flags&=-33,o===null){if(Ut){if(x?au(c):ou(),(o=Bn)?(o=U6(o,Ra),o=o!==null&&o.data!=="&"?o:null,o!==null&&(c.memoizedState={dehydrated:o,treeContext:Zc!==null?{id:Yo,overflow:Xo}:null,retryLane:536870912,hydrationErrors:null},f=uR(o),f.return=c,c.child=f,Ii=c,Bn=null)):o=null,o===null)throw tu(c);return XT(o)?c.lanes=32:c.lanes=536870912,null}var F=g.children;return g=g.fallback,x?(ou(),x=c.mode,F=gb({mode:"hidden",children:F},x),g=Md(g,x,f,null),F.return=c,g.return=c,F.sibling=g,c.child=F,g=c.child,g.memoizedState=fT(f),g.childLanes=mT(o,j,f),c.memoizedState=hT,Ag(null,g)):(au(c),pT(c,F))}var Y=o.memoizedState;if(Y!==null&&(F=Y.dehydrated,F!==null)){if(T)c.flags&256?(au(c),c.flags&=-257,c=gT(o,c,f)):c.memoizedState!==null?(ou(),c.child=o.child,c.flags|=128,c=null):(ou(),F=g.fallback,x=c.mode,g=gb({mode:"visible",children:g.children},x),F=Md(F,x,f,null),F.flags|=2,g.return=c,F.return=c,g.sibling=F,c.child=g,Fd(c,o.child,null,f),g=c.child,g.memoizedState=fT(f),g.childLanes=mT(o,j,f),c.memoizedState=hT,c=Ag(null,g));else if(au(c),XT(F)){if(j=F.nextSibling&&F.nextSibling.dataset,j)var le=j.dgst;j=le,g=Error(r(419)),g.stack="",g.digest=j,pg({value:g,source:null,stack:null}),c=gT(o,c,f)}else if(zr||Af(o,c,f,!1),j=(f&o.childLanes)!==0,zr||j){if(j=kn,j!==null&&(g=Mr(j,f),g!==0&&g!==Y.retryLane))throw Y.retryLane=g,Dd(o,g),Ps(j,o,g),uT;YT(F)||Sb(),c=gT(o,c,f)}else YT(F)?(c.flags|=192,c.child=o.child,c=null):(o=Y.treeContext,Bn=Ma(F.nextSibling),Ii=c,Ut=!0,eu=null,Ra=!1,o!==null&&fR(c,o),c=pT(c,g.children),c.flags|=4096);return c}return x?(ou(),F=g.fallback,x=c.mode,Y=o.child,le=Y.sibling,g=Dl(Y,{mode:"hidden",children:g.children}),g.subtreeFlags=Y.subtreeFlags&65011712,le!==null?F=Dl(le,F):(F=Md(F,x,f,null),F.flags|=2),F.return=c,g.return=c,g.sibling=F,c.child=g,Ag(null,g),g=c.child,F=o.child.memoizedState,F===null?F=fT(f):(x=F.cachePool,x!==null?(Y=Ur._currentValue,x=x.parent!==Y?{parent:Y,pool:Y}:x):x=bR(),F={baseLanes:F.baseLanes|f,cachePool:x}),g.memoizedState=F,g.childLanes=mT(o,j,f),c.memoizedState=hT,Ag(o.child,g)):(au(c),f=o.child,o=f.sibling,f=Dl(f,{mode:"visible",children:g.children}),f.return=c,f.sibling=null,o!==null&&(j=c.deletions,j===null?(c.deletions=[o],c.flags|=16):j.push(o)),c.child=f,c.memoizedState=null,f)}function pT(o,c){return c=gb({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function gb(o,c){return o=Qs(22,o,null,c),o.lanes=0,o}function gT(o,c,f){return Fd(c,o.child,null,f),o=pT(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function j3(o,c,f){o.lanes|=c;var g=o.alternate;g!==null&&(g.lanes|=c),OE(o.return,c,f)}function yT(o,c,f,g,x,T){var j=o.memoizedState;j===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:x,treeForkCount:T}:(j.isBackwards=c,j.rendering=null,j.renderingStartTime=0,j.last=g,j.tail=f,j.tailMode=x,j.treeForkCount=T)}function P3(o,c,f){var g=c.pendingProps,x=g.revealOrder,T=g.tail;g=g.children;var j=Nr.current,F=(j&2)!==0;if(F?(j=j&1|2,c.flags|=128):j&=1,G(Nr,j),ji(o,c,g,f),g=Ut?mg:0,!F&&o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&j3(o,f,c);else if(o.tag===19)j3(o,f,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(x){case"forwards":for(f=c.child,x=null;f!==null;)o=f.alternate,o!==null&&ib(o)===null&&(x=f),f=f.sibling;f=x,f===null?(x=c.child,c.child=null):(x=f.sibling,f.sibling=null),yT(c,!1,x,f,T,g);break;case"backwards":case"unstable_legacy-backwards":for(f=null,x=c.child,c.child=null;x!==null;){if(o=x.alternate,o!==null&&ib(o)===null){c.child=x;break}o=x.sibling,x.sibling=f,f=x,x=o}yT(c,!0,f,null,T,g);break;case"together":yT(c,!1,null,null,void 0,g);break;default:c.memoizedState=null}return c.child}function zl(o,c,f){if(o!==null&&(c.dependencies=o.dependencies),uu|=c.lanes,(f&c.childLanes)===0)if(o!==null){if(Af(o,c,f,!1),(f&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(r(153));if(c.child!==null){for(o=c.child,f=Dl(o,o.pendingProps),c.child=f,f.return=c;o.sibling!==null;)o=o.sibling,f=f.sibling=Dl(o,o.pendingProps),f.return=c;f.sibling=null}return c.child}function vT(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&Xv(o)))}function vne(o,c,f){switch(c.tag){case 3:ce(c,c.stateNode.containerInfo),nu(c,Ur,o.memoizedState.cache),Ld();break;case 27:case 5:ke(c);break;case 4:ce(c,c.stateNode.containerInfo);break;case 10:nu(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,FE(c),null;break;case 13:var g=c.memoizedState;if(g!==null)return g.dehydrated!==null?(au(c),c.flags|=128,null):(f&c.child.childLanes)!==0?O3(o,c,f):(au(c),o=zl(o,c,f),o!==null?o.sibling:null);au(c);break;case 19:var x=(o.flags&128)!==0;if(g=(f&c.childLanes)!==0,g||(Af(o,c,f,!1),g=(f&c.childLanes)!==0),x){if(g)return P3(o,c,f);c.flags|=128}if(x=c.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),G(Nr,Nr.current),g)break;return null;case 22:return c.lanes=0,S3(o,c,f,c.pendingProps);case 24:nu(c,Ur,o.memoizedState.cache)}return zl(o,c,f)}function R3(o,c,f){if(o!==null)if(o.memoizedProps!==c.pendingProps)zr=!0;else{if(!vT(o,f)&&(c.flags&128)===0)return zr=!1,vne(o,c,f);zr=(o.flags&131072)!==0}else zr=!1,Ut&&(c.flags&1048576)!==0&&hR(c,mg,c.index);switch(c.lanes=0,c.tag){case 16:e:{var g=c.pendingProps;if(o=zd(c.elementType),c.type=o,typeof o=="function")EE(o)?(g=qd(o,g),c.tag=1,c=k3(null,c,o,g,f)):(c.tag=0,c=dT(null,c,o,g,f));else{if(o!=null){var x=o.$$typeof;if(x===R){c.tag=11,c=_3(null,c,o,g,f);break e}else if(x===A){c.tag=14,c=E3(null,c,o,g,f);break e}}throw c=ne(o)||o,Error(r(306,c,""))}}return c;case 0:return dT(o,c,c.type,c.pendingProps,f);case 1:return g=c.type,x=qd(g,c.pendingProps),k3(o,c,g,x,f);case 3:e:{if(ce(c,c.stateNode.containerInfo),o===null)throw Error(r(387));g=c.pendingProps;var T=c.memoizedState;x=T.element,VE(o,c),_g(c,g,null,f);var j=c.memoizedState;if(g=j.cache,nu(c,Ur,g),g!==T.cache&&jE(c,[Ur],f,!0),xg(),g=j.element,T.isDehydrated)if(T={element:g,isDehydrated:!1,cache:j.cache},c.updateQueue.baseState=T,c.memoizedState=T,c.flags&256){c=I3(o,c,g,f);break e}else if(g!==x){x=Oa(Error(r(424)),c),pg(x),c=I3(o,c,g,f);break e}else{switch(o=c.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(Bn=Ma(o.firstChild),Ii=c,Ut=!0,eu=null,Ra=!0,f=SR(c,null,g,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Ld(),g===x){c=zl(o,c,f);break e}ji(o,c,g,f)}c=c.child}return c;case 26:return pb(o,c),o===null?(f=q6(c.type,null,c.pendingProps,null))?c.memoizedState=f:Ut||(f=c.type,o=c.pendingProps,g=jb(_e.current).createElement(f),g[yr]=c,g[Pn]=o,Pi(g,f,o),vr(g),c.stateNode=g):c.memoizedState=q6(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return ke(c),o===null&&Ut&&(g=c.stateNode=$6(c.type,c.pendingProps,_e.current),Ii=c,Ra=!0,x=Bn,pu(c.type)?(QT=x,Bn=Ma(g.firstChild)):Bn=x),ji(o,c,c.pendingProps.children,f),pb(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&Ut&&((x=g=Bn)&&(g=Kne(g,c.type,c.pendingProps,Ra),g!==null?(c.stateNode=g,Ii=c,Bn=Ma(g.firstChild),Ra=!1,x=!0):x=!1),x||tu(c)),ke(c),x=c.type,T=c.pendingProps,j=o!==null?o.memoizedProps:null,g=T.children,GT(x,T)?g=null:j!==null&&GT(x,j)&&(c.flags|=32),c.memoizedState!==null&&(x=qE(o,c,cne,null,null,f),$g._currentValue=x),pb(o,c),ji(o,c,g,f),c.child;case 6:return o===null&&Ut&&((o=f=Bn)&&(f=Yne(f,c.pendingProps,Ra),f!==null?(c.stateNode=f,Ii=c,Bn=null,o=!0):o=!1),o||tu(c)),null;case 13:return O3(o,c,f);case 4:return ce(c,c.stateNode.containerInfo),g=c.pendingProps,o===null?c.child=Fd(c,null,g,f):ji(o,c,g,f),c.child;case 11:return _3(o,c,c.type,c.pendingProps,f);case 7:return ji(o,c,c.pendingProps,f),c.child;case 8:return ji(o,c,c.pendingProps.children,f),c.child;case 12:return ji(o,c,c.pendingProps.children,f),c.child;case 10:return g=c.pendingProps,nu(c,c.type,g.value),ji(o,c,g.children,f),c.child;case 9:return x=c.type._context,g=c.pendingProps.children,Ud(c),x=Oi(x),g=g(x),c.flags|=1,ji(o,c,g,f),c.child;case 14:return E3(o,c,c.type,c.pendingProps,f);case 15:return T3(o,c,c.type,c.pendingProps,f);case 19:return P3(o,c,f);case 31:return yne(o,c,f);case 22:return S3(o,c,f,c.pendingProps);case 24:return Ud(c),g=Oi(Ur),o===null?(x=DE(),x===null&&(x=kn,T=PE(),x.pooledCache=T,T.refCount++,T!==null&&(x.pooledCacheLanes|=f),x=T),c.memoizedState={parent:g,cache:x},LE(c),nu(c,Ur,x)):((o.lanes&f)!==0&&(VE(o,c),_g(c,null,null,f),xg()),x=o.memoizedState,T=c.memoizedState,x.parent!==g?(x={parent:g,cache:g},c.memoizedState=x,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=x),nu(c,Ur,g)):(g=T.cache,nu(c,Ur,g),g!==x.cache&&jE(c,[Ur],f,!0))),ji(o,c,c.pendingProps.children,f),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function $l(o){o.flags|=4}function bT(o,c,f,g,x){if((c=(o.mode&32)!==0)&&(c=!1),c){if(o.flags|=16777216,(x&335544128)===x)if(o.stateNode.complete)o.flags|=8192;else if(o6())o.flags|=8192;else throw $d=eb,ME}else o.flags&=-16777217}function D3(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!X6(c))if(o6())o.flags|=8192;else throw $d=eb,ME}function yb(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?pr():536870912,o.lanes|=c,Uf|=c)}function Ng(o,c){if(!Ut)switch(o.tailMode){case"hidden":c=o.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function zn(o){var c=o.alternate!==null&&o.alternate.child===o.child,f=0,g=0;if(c)for(var x=o.child;x!==null;)f|=x.lanes|x.childLanes,g|=x.subtreeFlags&65011712,g|=x.flags&65011712,x.return=o,x=x.sibling;else for(x=o.child;x!==null;)f|=x.lanes|x.childLanes,g|=x.subtreeFlags,g|=x.flags,x.return=o,x=x.sibling;return o.subtreeFlags|=g,o.childLanes=f,c}function bne(o,c,f){var g=c.pendingProps;switch(AE(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zn(c),null;case 1:return zn(c),null;case 3:return f=c.stateNode,g=null,o!==null&&(g=o.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),Vl(Ur),Z(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(o===null||o.child===null)&&(Cf(c)?$l(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,kE())),zn(c),null;case 26:var x=c.type,T=c.memoizedState;return o===null?($l(c),T!==null?(zn(c),D3(c,T)):(zn(c),bT(c,x,null,g,f))):T?T!==o.memoizedState?($l(c),zn(c),D3(c,T)):(zn(c),c.flags&=-16777217):(o=o.memoizedProps,o!==g&&$l(c),zn(c),bT(c,x,o,g,f)),null;case 27:if(Le(c),f=_e.current,x=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==g&&$l(c);else{if(!g){if(c.stateNode===null)throw Error(r(166));return zn(c),null}o=Q.current,Cf(c)?mR(c):(o=$6(x,g,f),c.stateNode=o,$l(c))}return zn(c),null;case 5:if(Le(c),x=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==g&&$l(c);else{if(!g){if(c.stateNode===null)throw Error(r(166));return zn(c),null}if(T=Q.current,Cf(c))mR(c);else{var j=jb(_e.current);switch(T){case 1:T=j.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:T=j.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":T=j.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":T=j.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":T=j.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof g.is=="string"?j.createElement("select",{is:g.is}):j.createElement("select"),g.multiple?T.multiple=!0:g.size&&(T.size=g.size);break;default:T=typeof g.is=="string"?j.createElement(x,{is:g.is}):j.createElement(x)}}T[yr]=c,T[Pn]=g;e:for(j=c.child;j!==null;){if(j.tag===5||j.tag===6)T.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===c)break e;for(;j.sibling===null;){if(j.return===null||j.return===c)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}c.stateNode=T;e:switch(Pi(T,x,g),x){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&$l(c)}}return zn(c),bT(c,c.type,o===null?null:o.memoizedProps,c.pendingProps,f),null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==g&&$l(c);else{if(typeof g!="string"&&c.stateNode===null)throw Error(r(166));if(o=_e.current,Cf(c)){if(o=c.stateNode,f=c.memoizedProps,g=null,x=Ii,x!==null)switch(x.tag){case 27:case 5:g=x.memoizedProps}o[yr]=c,o=!!(o.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||O6(o.nodeValue,f)),o||tu(c,!0)}else o=jb(o).createTextNode(g),o[yr]=c,c.stateNode=o}return zn(c),null;case 31:if(f=c.memoizedState,o===null||o.memoizedState!==null){if(g=Cf(c),f!==null){if(o===null){if(!g)throw Error(r(318));if(o=c.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(557));o[yr]=c}else Ld(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;zn(c),o=!1}else f=kE(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=f),o=!0;if(!o)return c.flags&256?(Zs(c),c):(Zs(c),null);if((c.flags&128)!==0)throw Error(r(558))}return zn(c),null;case 13:if(g=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(x=Cf(c),g!==null&&g.dehydrated!==null){if(o===null){if(!x)throw Error(r(318));if(x=c.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(317));x[yr]=c}else Ld(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;zn(c),x=!1}else x=kE(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=x),x=!0;if(!x)return c.flags&256?(Zs(c),c):(Zs(c),null)}return Zs(c),(c.flags&128)!==0?(c.lanes=f,c):(f=g!==null,o=o!==null&&o.memoizedState!==null,f&&(g=c.child,x=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(x=g.alternate.memoizedState.cachePool.pool),T=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(T=g.memoizedState.cachePool.pool),T!==x&&(g.flags|=2048)),f!==o&&f&&(c.child.flags|=8192),yb(c,c.updateQueue),zn(c),null);case 4:return Z(),o===null&&zT(c.stateNode.containerInfo),zn(c),null;case 10:return Vl(c.type),zn(c),null;case 19:if(X(Nr),g=c.memoizedState,g===null)return zn(c),null;if(x=(c.flags&128)!==0,T=g.rendering,T===null)if(x)Ng(g,!1);else{if(xr!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(T=ib(o),T!==null){for(c.flags|=128,Ng(g,!1),o=T.updateQueue,c.updateQueue=o,yb(c,o),c.subtreeFlags=0,o=f,f=c.child;f!==null;)cR(f,o),f=f.sibling;return G(Nr,Nr.current&1|2),Ut&&Ml(c,g.treeForkCount),c.child}o=o.sibling}g.tail!==null&&Ht()>_b&&(c.flags|=128,x=!0,Ng(g,!1),c.lanes=4194304)}else{if(!x)if(o=ib(T),o!==null){if(c.flags|=128,x=!0,o=o.updateQueue,c.updateQueue=o,yb(c,o),Ng(g,!0),g.tail===null&&g.tailMode==="hidden"&&!T.alternate&&!Ut)return zn(c),null}else 2*Ht()-g.renderingStartTime>_b&&f!==536870912&&(c.flags|=128,x=!0,Ng(g,!1),c.lanes=4194304);g.isBackwards?(T.sibling=c.child,c.child=T):(o=g.last,o!==null?o.sibling=T:c.child=T,g.last=T)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=Ht(),o.sibling=null,f=Nr.current,G(Nr,x?f&1|2:f&1),Ut&&Ml(c,g.treeForkCount),o):(zn(c),null);case 22:case 23:return Zs(c),$E(),g=c.memoizedState!==null,o!==null?o.memoizedState!==null!==g&&(c.flags|=8192):g&&(c.flags|=8192),g?(f&536870912)!==0&&(c.flags&128)===0&&(zn(c),c.subtreeFlags&6&&(c.flags|=8192)):zn(c),f=c.updateQueue,f!==null&&yb(c,f.retryQueue),f=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==f&&(c.flags|=2048),o!==null&&X(Bd),null;case 24:return f=null,o!==null&&(f=o.memoizedState.cache),c.memoizedState.cache!==f&&(c.flags|=2048),Vl(Ur),zn(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function wne(o,c){switch(AE(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Vl(Ur),Z(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return Le(c),null;case 31:if(c.memoizedState!==null){if(Zs(c),c.alternate===null)throw Error(r(340));Ld()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 13:if(Zs(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(r(340));Ld()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return X(Nr),null;case 4:return Z(),null;case 10:return Vl(c.type),null;case 22:case 23:return Zs(c),$E(),o!==null&&X(Bd),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return Vl(Ur),null;case 25:return null;default:return null}}function M3(o,c){switch(AE(c),c.tag){case 3:Vl(Ur),Z();break;case 26:case 27:case 5:Le(c);break;case 4:Z();break;case 31:c.memoizedState!==null&&Zs(c);break;case 13:Zs(c);break;case 19:X(Nr);break;case 10:Vl(c.type);break;case 22:case 23:Zs(c),$E(),o!==null&&X(Bd);break;case 24:Vl(Ur)}}function kg(o,c){try{var f=c.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var x=g.next;f=x;do{if((f.tag&o)===o){g=void 0;var T=f.create,j=f.inst;g=T(),j.destroy=g}f=f.next}while(f!==x)}}catch(F){dn(c,c.return,F)}}function lu(o,c,f){try{var g=c.updateQueue,x=g!==null?g.lastEffect:null;if(x!==null){var T=x.next;g=T;do{if((g.tag&o)===o){var j=g.inst,F=j.destroy;if(F!==void 0){j.destroy=void 0,x=c;var Y=f,le=F;try{le()}catch(we){dn(x,Y,we)}}}g=g.next}while(g!==T)}}catch(we){dn(c,c.return,we)}}function L3(o){var c=o.updateQueue;if(c!==null){var f=o.stateNode;try{AR(c,f)}catch(g){dn(o,o.return,g)}}}function V3(o,c,f){f.props=qd(o.type,o.memoizedProps),f.state=o.memoizedState;try{f.componentWillUnmount()}catch(g){dn(o,c,g)}}function Ig(o,c){try{var f=o.ref;if(f!==null){switch(o.tag){case 26:case 27:case 5:var g=o.stateNode;break;case 30:g=o.stateNode;break;default:g=o.stateNode}typeof f=="function"?o.refCleanup=f(g):f.current=g}}catch(x){dn(o,c,x)}}function Qo(o,c){var f=o.ref,g=o.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(x){dn(o,c,x)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(x){dn(o,c,x)}else f.current=null}function U3(o){var c=o.type,f=o.memoizedProps,g=o.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(x){dn(o,o.return,x)}}function wT(o,c,f){try{var g=o.stateNode;$ne(g,o.type,f,c),g[Pn]=c}catch(x){dn(o,o.return,x)}}function B3(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&pu(o.type)||o.tag===4}function xT(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||B3(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&pu(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function _T(o,c,f){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(o,c):(c=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,c.appendChild(o),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=ro));else if(g!==4&&(g===27&&pu(o.type)&&(f=o.stateNode,c=null),o=o.child,o!==null))for(_T(o,c,f),o=o.sibling;o!==null;)_T(o,c,f),o=o.sibling}function vb(o,c,f){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?f.insertBefore(o,c):f.appendChild(o);else if(g!==4&&(g===27&&pu(o.type)&&(f=o.stateNode),o=o.child,o!==null))for(vb(o,c,f),o=o.sibling;o!==null;)vb(o,c,f),o=o.sibling}function z3(o){var c=o.stateNode,f=o.memoizedProps;try{for(var g=o.type,x=c.attributes;x.length;)c.removeAttributeNode(x[0]);Pi(c,g,f),c[yr]=o,c[Pn]=f}catch(T){dn(o,o.return,T)}}var Fl=!1,$r=!1,ET=!1,$3=typeof WeakSet=="function"?WeakSet:Set,fi=null;function xne(o,c){if(o=o.containerInfo,HT=Ub,o=eR(o),gE(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var x=g.anchorOffset,T=g.focusNode;g=g.focusOffset;try{f.nodeType,T.nodeType}catch{f=null;break e}var j=0,F=-1,Y=-1,le=0,we=0,Te=o,de=null;t:for(;;){for(var ge;Te!==f||x!==0&&Te.nodeType!==3||(F=j+x),Te!==T||g!==0&&Te.nodeType!==3||(Y=j+g),Te.nodeType===3&&(j+=Te.nodeValue.length),(ge=Te.firstChild)!==null;)de=Te,Te=ge;for(;;){if(Te===o)break t;if(de===f&&++le===x&&(F=j),de===T&&++we===g&&(Y=j),(ge=Te.nextSibling)!==null)break;Te=de,de=Te.parentNode}Te=ge}f=F===-1||Y===-1?null:{start:F,end:Y}}else f=null}f=f||{start:0,end:0}}else f=null;for(qT={focusedElem:o,selectionRange:f},Ub=!1,fi=c;fi!==null;)if(c=fi,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,fi=o;else for(;fi!==null;){switch(c=fi,T=c.alternate,o=c.flags,c.tag){case 0:if((o&4)!==0&&(o=c.updateQueue,o=o!==null?o.events:null,o!==null))for(f=0;f<o.length;f++)x=o[f],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&T!==null){o=void 0,f=c,x=T.memoizedProps,T=T.memoizedState,g=f.stateNode;try{var He=qd(f.type,x);o=g.getSnapshotBeforeUpdate(He,T),g.__reactInternalSnapshotBeforeUpdate=o}catch(ot){dn(f,f.return,ot)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,f=o.nodeType,f===9)KT(o);else if(f===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":KT(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=c.sibling,o!==null){o.return=c.return,fi=o;break}fi=c.return}}function F3(o,c,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:ql(o,f),g&4&&kg(5,f);break;case 1:if(ql(o,f),g&4)if(o=f.stateNode,c===null)try{o.componentDidMount()}catch(j){dn(f,f.return,j)}else{var x=qd(f.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(x,c,o.__reactInternalSnapshotBeforeUpdate)}catch(j){dn(f,f.return,j)}}g&64&&L3(f),g&512&&Ig(f,f.return);break;case 3:if(ql(o,f),g&64&&(o=f.updateQueue,o!==null)){if(c=null,f.child!==null)switch(f.child.tag){case 27:case 5:c=f.child.stateNode;break;case 1:c=f.child.stateNode}try{AR(o,c)}catch(j){dn(f,f.return,j)}}break;case 27:c===null&&g&4&&z3(f);case 26:case 5:ql(o,f),c===null&&g&4&&U3(f),g&512&&Ig(f,f.return);break;case 12:ql(o,f);break;case 31:ql(o,f),g&4&&G3(o,f);break;case 13:ql(o,f),g&4&&W3(o,f),g&64&&(o=f.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(f=Ine.bind(null,f),Xne(o,f))));break;case 22:if(g=f.memoizedState!==null||Fl,!g){c=c!==null&&c.memoizedState!==null||$r,x=Fl;var T=$r;Fl=g,($r=c)&&!T?Gl(o,f,(f.subtreeFlags&8772)!==0):ql(o,f),Fl=x,$r=T}break;case 30:break;default:ql(o,f)}}function H3(o){var c=o.alternate;c!==null&&(o.alternate=null,H3(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&_a(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Xn=null,ks=!1;function Hl(o,c,f){for(f=f.child;f!==null;)q3(o,c,f),f=f.sibling}function q3(o,c,f){if(Kn&&typeof Kn.onCommitFiberUnmount=="function")try{Kn.onCommitFiberUnmount(ti,f)}catch{}switch(f.tag){case 26:$r||Qo(f,c),Hl(o,c,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:$r||Qo(f,c);var g=Xn,x=ks;pu(f.type)&&(Xn=f.stateNode,ks=!1),Hl(o,c,f),Ug(f.stateNode),Xn=g,ks=x;break;case 5:$r||Qo(f,c);case 6:if(g=Xn,x=ks,Xn=null,Hl(o,c,f),Xn=g,ks=x,Xn!==null)if(ks)try{(Xn.nodeType===9?Xn.body:Xn.nodeName==="HTML"?Xn.ownerDocument.body:Xn).removeChild(f.stateNode)}catch(T){dn(f,c,T)}else try{Xn.removeChild(f.stateNode)}catch(T){dn(f,c,T)}break;case 18:Xn!==null&&(ks?(o=Xn,L6(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,f.stateNode),Wf(o)):L6(Xn,f.stateNode));break;case 4:g=Xn,x=ks,Xn=f.stateNode.containerInfo,ks=!0,Hl(o,c,f),Xn=g,ks=x;break;case 0:case 11:case 14:case 15:lu(2,f,c),$r||lu(4,f,c),Hl(o,c,f);break;case 1:$r||(Qo(f,c),g=f.stateNode,typeof g.componentWillUnmount=="function"&&V3(f,c,g)),Hl(o,c,f);break;case 21:Hl(o,c,f);break;case 22:$r=(g=$r)||f.memoizedState!==null,Hl(o,c,f),$r=g;break;default:Hl(o,c,f)}}function G3(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Wf(o)}catch(f){dn(c,c.return,f)}}}function W3(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Wf(o)}catch(f){dn(c,c.return,f)}}function _ne(o){switch(o.tag){case 31:case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new $3),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new $3),c;default:throw Error(r(435,o.tag))}}function bb(o,c){var f=_ne(o);c.forEach(function(g){if(!f.has(g)){f.add(g);var x=One.bind(null,o,g);g.then(x,x)}})}function Is(o,c){var f=c.deletions;if(f!==null)for(var g=0;g<f.length;g++){var x=f[g],T=o,j=c,F=j;e:for(;F!==null;){switch(F.tag){case 27:if(pu(F.type)){Xn=F.stateNode,ks=!1;break e}break;case 5:Xn=F.stateNode,ks=!1;break e;case 3:case 4:Xn=F.stateNode.containerInfo,ks=!0;break e}F=F.return}if(Xn===null)throw Error(r(160));q3(T,j,x),Xn=null,ks=!1,T=x.alternate,T!==null&&(T.return=null),x.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)K3(c,o),c=c.sibling}var co=null;function K3(o,c){var f=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Is(c,o),Os(o),g&4&&(lu(3,o,o.return),kg(3,o),lu(5,o,o.return));break;case 1:Is(c,o),Os(o),g&512&&($r||f===null||Qo(f,f.return)),g&64&&Fl&&(o=o.updateQueue,o!==null&&(g=o.callbacks,g!==null&&(f=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var x=co;if(Is(c,o),Os(o),g&512&&($r||f===null||Qo(f,f.return)),g&4){var T=f!==null?f.memoizedState:null;if(g=o.memoizedState,f===null)if(g===null)if(o.stateNode===null){e:{g=o.type,f=o.memoizedProps,x=x.ownerDocument||x;t:switch(g){case"title":T=x.getElementsByTagName("title")[0],(!T||T[Ks]||T[yr]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=x.createElement(g),x.head.insertBefore(T,x.querySelector("head > title"))),Pi(T,g,f),T[yr]=o,vr(T),g=T;break e;case"link":var j=K6("link","href",x).get(g+(f.href||""));if(j){for(var F=0;F<j.length;F++)if(T=j[F],T.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&T.getAttribute("rel")===(f.rel==null?null:f.rel)&&T.getAttribute("title")===(f.title==null?null:f.title)&&T.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){j.splice(F,1);break t}}T=x.createElement(g),Pi(T,g,f),x.head.appendChild(T);break;case"meta":if(j=K6("meta","content",x).get(g+(f.content||""))){for(F=0;F<j.length;F++)if(T=j[F],T.getAttribute("content")===(f.content==null?null:""+f.content)&&T.getAttribute("name")===(f.name==null?null:f.name)&&T.getAttribute("property")===(f.property==null?null:f.property)&&T.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&T.getAttribute("charset")===(f.charSet==null?null:f.charSet)){j.splice(F,1);break t}}T=x.createElement(g),Pi(T,g,f),x.head.appendChild(T);break;default:throw Error(r(468,g))}T[yr]=o,vr(T),g=T}o.stateNode=g}else Y6(x,o.type,o.stateNode);else o.stateNode=W6(x,g,o.memoizedProps);else T!==g?(T===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):T.count--,g===null?Y6(x,o.type,o.stateNode):W6(x,g,o.memoizedProps)):g===null&&o.stateNode!==null&&wT(o,o.memoizedProps,f.memoizedProps)}break;case 27:Is(c,o),Os(o),g&512&&($r||f===null||Qo(f,f.return)),f!==null&&g&4&&wT(o,o.memoizedProps,f.memoizedProps);break;case 5:if(Is(c,o),Os(o),g&512&&($r||f===null||Qo(f,f.return)),o.flags&32){x=o.stateNode;try{$e(x,"")}catch(He){dn(o,o.return,He)}}g&4&&o.stateNode!=null&&(x=o.memoizedProps,wT(o,x,f!==null?f.memoizedProps:x)),g&1024&&(ET=!0);break;case 6:if(Is(c,o),Os(o),g&4){if(o.stateNode===null)throw Error(r(162));g=o.memoizedProps,f=o.stateNode;try{f.nodeValue=g}catch(He){dn(o,o.return,He)}}break;case 3:if(Db=null,x=co,co=Pb(c.containerInfo),Is(c,o),co=x,Os(o),g&4&&f!==null&&f.memoizedState.isDehydrated)try{Wf(c.containerInfo)}catch(He){dn(o,o.return,He)}ET&&(ET=!1,Y3(o));break;case 4:g=co,co=Pb(o.stateNode.containerInfo),Is(c,o),Os(o),co=g;break;case 12:Is(c,o),Os(o);break;case 31:Is(c,o),Os(o),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,bb(o,g)));break;case 13:Is(c,o),Os(o),o.child.flags&8192&&o.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(xb=Ht()),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,bb(o,g)));break;case 22:x=o.memoizedState!==null;var Y=f!==null&&f.memoizedState!==null,le=Fl,we=$r;if(Fl=le||x,$r=we||Y,Is(c,o),$r=we,Fl=le,Os(o),g&8192)e:for(c=o.stateNode,c._visibility=x?c._visibility&-2:c._visibility|1,x&&(f===null||Y||Fl||$r||Gd(o)),f=null,c=o;;){if(c.tag===5||c.tag===26){if(f===null){Y=f=c;try{if(T=Y.stateNode,x)j=T.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{F=Y.stateNode;var Te=Y.memoizedProps.style,de=Te!=null&&Te.hasOwnProperty("display")?Te.display:null;F.style.display=de==null||typeof de=="boolean"?"":(""+de).trim()}}catch(He){dn(Y,Y.return,He)}}}else if(c.tag===6){if(f===null){Y=c;try{Y.stateNode.nodeValue=x?"":Y.memoizedProps}catch(He){dn(Y,Y.return,He)}}}else if(c.tag===18){if(f===null){Y=c;try{var ge=Y.stateNode;x?V6(ge,!0):V6(Y.stateNode,!1)}catch(He){dn(Y,Y.return,He)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}g&4&&(g=o.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,bb(o,f))));break;case 19:Is(c,o),Os(o),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,bb(o,g)));break;case 30:break;case 21:break;default:Is(c,o),Os(o)}}function Os(o){var c=o.flags;if(c&2){try{for(var f,g=o.return;g!==null;){if(B3(g)){f=g;break}g=g.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var x=f.stateNode,T=xT(o);vb(o,T,x);break;case 5:var j=f.stateNode;f.flags&32&&($e(j,""),f.flags&=-33);var F=xT(o);vb(o,F,j);break;case 3:case 4:var Y=f.stateNode.containerInfo,le=xT(o);_T(o,le,Y);break;default:throw Error(r(161))}}catch(we){dn(o,o.return,we)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function Y3(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;Y3(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function ql(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)F3(o,c.alternate,c),c=c.sibling}function Gd(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:lu(4,c,c.return),Gd(c);break;case 1:Qo(c,c.return);var f=c.stateNode;typeof f.componentWillUnmount=="function"&&V3(c,c.return,f),Gd(c);break;case 27:Ug(c.stateNode);case 26:case 5:Qo(c,c.return),Gd(c);break;case 22:c.memoizedState===null&&Gd(c);break;case 30:Gd(c);break;default:Gd(c)}o=o.sibling}}function Gl(o,c,f){for(f=f&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var g=c.alternate,x=o,T=c,j=T.flags;switch(T.tag){case 0:case 11:case 15:Gl(x,T,f),kg(4,T);break;case 1:if(Gl(x,T,f),g=T,x=g.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(le){dn(g,g.return,le)}if(g=T,x=g.updateQueue,x!==null){var F=g.stateNode;try{var Y=x.shared.hiddenCallbacks;if(Y!==null)for(x.shared.hiddenCallbacks=null,x=0;x<Y.length;x++)CR(Y[x],F)}catch(le){dn(g,g.return,le)}}f&&j&64&&L3(T),Ig(T,T.return);break;case 27:z3(T);case 26:case 5:Gl(x,T,f),f&&g===null&&j&4&&U3(T),Ig(T,T.return);break;case 12:Gl(x,T,f);break;case 31:Gl(x,T,f),f&&j&4&&G3(x,T);break;case 13:Gl(x,T,f),f&&j&4&&W3(x,T);break;case 22:T.memoizedState===null&&Gl(x,T,f),Ig(T,T.return);break;case 30:break;default:Gl(x,T,f)}c=c.sibling}}function TT(o,c){var f=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==f&&(o!=null&&o.refCount++,f!=null&&gg(f))}function ST(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&gg(o))}function uo(o,c,f,g){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)X3(o,c,f,g),c=c.sibling}function X3(o,c,f,g){var x=c.flags;switch(c.tag){case 0:case 11:case 15:uo(o,c,f,g),x&2048&&kg(9,c);break;case 1:uo(o,c,f,g);break;case 3:uo(o,c,f,g),x&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&gg(o)));break;case 12:if(x&2048){uo(o,c,f,g),o=c.stateNode;try{var T=c.memoizedProps,j=T.id,F=T.onPostCommit;typeof F=="function"&&F(j,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Y){dn(c,c.return,Y)}}else uo(o,c,f,g);break;case 31:uo(o,c,f,g);break;case 13:uo(o,c,f,g);break;case 23:break;case 22:T=c.stateNode,j=c.alternate,c.memoizedState!==null?T._visibility&2?uo(o,c,f,g):Og(o,c):T._visibility&2?uo(o,c,f,g):(T._visibility|=2,Mf(o,c,f,g,(c.subtreeFlags&10256)!==0||!1)),x&2048&&TT(j,c);break;case 24:uo(o,c,f,g),x&2048&&ST(c.alternate,c);break;default:uo(o,c,f,g)}}function Mf(o,c,f,g,x){for(x=x&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var T=o,j=c,F=f,Y=g,le=j.flags;switch(j.tag){case 0:case 11:case 15:Mf(T,j,F,Y,x),kg(8,j);break;case 23:break;case 22:var we=j.stateNode;j.memoizedState!==null?we._visibility&2?Mf(T,j,F,Y,x):Og(T,j):(we._visibility|=2,Mf(T,j,F,Y,x)),x&&le&2048&&TT(j.alternate,j);break;case 24:Mf(T,j,F,Y,x),x&&le&2048&&ST(j.alternate,j);break;default:Mf(T,j,F,Y,x)}c=c.sibling}}function Og(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var f=o,g=c,x=g.flags;switch(g.tag){case 22:Og(f,g),x&2048&&TT(g.alternate,g);break;case 24:Og(f,g),x&2048&&ST(g.alternate,g);break;default:Og(f,g)}c=c.sibling}}var jg=8192;function Lf(o,c,f){if(o.subtreeFlags&jg)for(o=o.child;o!==null;)Q3(o,c,f),o=o.sibling}function Q3(o,c,f){switch(o.tag){case 26:Lf(o,c,f),o.flags&jg&&o.memoizedState!==null&&lre(f,co,o.memoizedState,o.memoizedProps);break;case 5:Lf(o,c,f);break;case 3:case 4:var g=co;co=Pb(o.stateNode.containerInfo),Lf(o,c,f),co=g;break;case 22:o.memoizedState===null&&(g=o.alternate,g!==null&&g.memoizedState!==null?(g=jg,jg=16777216,Lf(o,c,f),jg=g):Lf(o,c,f));break;default:Lf(o,c,f)}}function J3(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function Pg(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var g=c[f];fi=g,e6(g,o)}J3(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Z3(o),o=o.sibling}function Z3(o){switch(o.tag){case 0:case 11:case 15:Pg(o),o.flags&2048&&lu(9,o,o.return);break;case 3:Pg(o);break;case 12:Pg(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,wb(o)):Pg(o);break;default:Pg(o)}}function wb(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var g=c[f];fi=g,e6(g,o)}J3(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:lu(8,c,c.return),wb(c);break;case 22:f=c.stateNode,f._visibility&2&&(f._visibility&=-3,wb(c));break;default:wb(c)}o=o.sibling}}function e6(o,c){for(;fi!==null;){var f=fi;switch(f.tag){case 0:case 11:case 15:lu(8,f,c);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:gg(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,fi=g;else e:for(f=o;fi!==null;){g=fi;var x=g.sibling,T=g.return;if(H3(g),g===f){fi=null;break e}if(x!==null){x.return=T,fi=x;break e}fi=T}}}var Ene={getCacheForType:function(o){var c=Oi(Ur),f=c.data.get(o);return f===void 0&&(f=o(),c.data.set(o,f)),f},cacheSignal:function(){return Oi(Ur).controller.signal}},Tne=typeof WeakMap=="function"?WeakMap:Map,en=0,kn=null,jt=null,Dt=0,un=0,ea=null,cu=!1,Vf=!1,CT=!1,Wl=0,xr=0,uu=0,Wd=0,AT=0,ta=0,Uf=0,Rg=null,js=null,NT=!1,xb=0,t6=0,_b=1/0,Eb=null,du=null,ni=0,hu=null,Bf=null,Kl=0,kT=0,IT=null,n6=null,Dg=0,OT=null;function na(){return(en&2)!==0&&Dt!==0?Dt&-Dt:K.T!==null?LT():Fc()}function r6(){if(ta===0)if((Dt&536870912)===0||Ut){var o=xa;xa<<=1,(xa&3932160)===0&&(xa=262144),ta=o}else ta=536870912;return o=Js.current,o!==null&&(o.flags|=32),ta}function Ps(o,c,f){(o===kn&&(un===2||un===9)||o.cancelPendingCommit!==null)&&(zf(o,0),fu(o,Dt,ta,!1)),An(o,f),((en&2)===0||o!==kn)&&(o===kn&&((en&2)===0&&(Wd|=f),xr===4&&fu(o,Dt,ta,!1)),Jo(o))}function i6(o,c,f){if((en&6)!==0)throw Error(r(327));var g=!f&&(c&127)===0&&(c&o.expiredLanes)===0||qt(o,c),x=g?Ane(o,c):PT(o,c,!0),T=g;do{if(x===0){Vf&&!g&&fu(o,c,0,!1);break}else{if(f=o.current.alternate,T&&!Sne(f)){x=PT(o,c,!1),T=!1;continue}if(x===2){if(T=c,o.errorRecoveryDisabledLanes&T)var j=0;else j=o.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){c=j;e:{var F=o;x=Rg;var Y=F.current.memoizedState.isDehydrated;if(Y&&(zf(F,j).flags|=256),j=PT(F,j,!1),j!==2){if(CT&&!Y){F.errorRecoveryDisabledLanes|=T,Wd|=T,x=4;break e}T=js,js=x,T!==null&&(js===null?js=T:js.push.apply(js,T))}x=j}if(T=!1,x!==2)continue}}if(x===1){zf(o,0),fu(o,c,0,!0);break}e:{switch(g=o,T=x,T){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:fu(g,c,ta,!cu);break e;case 2:js=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(x=xb+300-Ht(),10<x)){if(fu(g,c,ta,!cu),et(g,0,!0)!==0)break e;Kl=c,g.timeoutHandle=D6(s6.bind(null,g,f,js,Eb,NT,c,ta,Wd,Uf,cu,T,"Throttled",-0,0),x);break e}s6(g,f,js,Eb,NT,c,ta,Wd,Uf,cu,T,null,-0,0)}}break}while(!0);Jo(o)}function s6(o,c,f,g,x,T,j,F,Y,le,we,Te,de,ge){if(o.timeoutHandle=-1,Te=c.subtreeFlags,Te&8192||(Te&16785408)===16785408){Te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ro},Q3(c,T,Te);var He=(T&62914560)===T?xb-Ht():(T&4194048)===T?t6-Ht():0;if(He=cre(Te,He),He!==null){Kl=T,o.cancelPendingCommit=He(f6.bind(null,o,c,T,f,g,x,j,F,Y,we,Te,null,de,ge)),fu(o,T,j,!le);return}}f6(o,c,T,f,g,x,j,F,Y)}function Sne(o){for(var c=o;;){var f=c.tag;if((f===0||f===11||f===15)&&c.flags&16384&&(f=c.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var x=f[g],T=x.getSnapshot;x=x.value;try{if(!Xs(T(),x))return!1}catch{return!1}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function fu(o,c,f,g){c&=~AT,c&=~Wd,o.suspendedLanes|=c,o.pingedLanes&=~c,g&&(o.warmLanes|=c),g=o.expirationTimes;for(var x=c;0<x;){var T=31-Qt(x),j=1<<T;g[T]=-1,x&=~j}f!==0&&hs(o,f,c)}function Tb(){return(en&6)===0?(Mg(0),!1):!0}function jT(){if(jt!==null){if(un===0)var o=jt.return;else o=jt,Ll=Vd=null,KE(o),Of=null,vg=0,o=jt;for(;o!==null;)M3(o.alternate,o),o=o.return;jt=null}}function zf(o,c){var f=o.timeoutHandle;f!==-1&&(o.timeoutHandle=-1,qne(f)),f=o.cancelPendingCommit,f!==null&&(o.cancelPendingCommit=null,f()),Kl=0,jT(),kn=o,jt=f=Dl(o.current,null),Dt=c,un=0,ea=null,cu=!1,Vf=qt(o,c),CT=!1,Uf=ta=AT=Wd=uu=xr=0,js=Rg=null,NT=!1,(c&8)!==0&&(c|=c&32);var g=o.entangledLanes;if(g!==0)for(o=o.entanglements,g&=c;0<g;){var x=31-Qt(g),T=1<<x;c|=o[x],g&=~T}return Wl=c,qv(),f}function a6(o,c){Tt=null,K.H=Cg,c===If||c===Zv?(c=_R(),un=3):c===ME?(c=_R(),un=4):un=c===uT?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,ea=c,jt===null&&(xr=1,fb(o,Oa(c,o.current)))}function o6(){var o=Js.current;return o===null?!0:(Dt&4194048)===Dt?Da===null:(Dt&62914560)===Dt||(Dt&536870912)!==0?o===Da:!1}function l6(){var o=K.H;return K.H=Cg,o===null?Cg:o}function c6(){var o=K.A;return K.A=Ene,o}function Sb(){xr=4,cu||(Dt&4194048)!==Dt&&Js.current!==null||(Vf=!0),(uu&134217727)===0&&(Wd&134217727)===0||kn===null||fu(kn,Dt,ta,!1)}function PT(o,c,f){var g=en;en|=2;var x=l6(),T=c6();(kn!==o||Dt!==c)&&(Eb=null,zf(o,c)),c=!1;var j=xr;e:do try{if(un!==0&&jt!==null){var F=jt,Y=ea;switch(un){case 8:jT(),j=6;break e;case 3:case 2:case 9:case 6:Js.current===null&&(c=!0);var le=un;if(un=0,ea=null,$f(o,F,Y,le),f&&Vf){j=0;break e}break;default:le=un,un=0,ea=null,$f(o,F,Y,le)}}Cne(),j=xr;break}catch(we){a6(o,we)}while(!0);return c&&o.shellSuspendCounter++,Ll=Vd=null,en=g,K.H=x,K.A=T,jt===null&&(kn=null,Dt=0,qv()),j}function Cne(){for(;jt!==null;)u6(jt)}function Ane(o,c){var f=en;en|=2;var g=l6(),x=c6();kn!==o||Dt!==c?(Eb=null,_b=Ht()+500,zf(o,c)):Vf=qt(o,c);e:do try{if(un!==0&&jt!==null){c=jt;var T=ea;t:switch(un){case 1:un=0,ea=null,$f(o,c,T,1);break;case 2:case 9:if(wR(T)){un=0,ea=null,d6(c);break}c=function(){un!==2&&un!==9||kn!==o||(un=7),Jo(o)},T.then(c,c);break e;case 3:un=7;break e;case 4:un=5;break e;case 7:wR(T)?(un=0,ea=null,d6(c)):(un=0,ea=null,$f(o,c,T,7));break;case 5:var j=null;switch(jt.tag){case 26:j=jt.memoizedState;case 5:case 27:var F=jt;if(j?X6(j):F.stateNode.complete){un=0,ea=null;var Y=F.sibling;if(Y!==null)jt=Y;else{var le=F.return;le!==null?(jt=le,Cb(le)):jt=null}break t}}un=0,ea=null,$f(o,c,T,5);break;case 6:un=0,ea=null,$f(o,c,T,6);break;case 8:jT(),xr=6;break e;default:throw Error(r(462))}}Nne();break}catch(we){a6(o,we)}while(!0);return Ll=Vd=null,K.H=g,K.A=x,en=f,jt!==null?0:(kn=null,Dt=0,qv(),xr)}function Nne(){for(;jt!==null&&!Un();)u6(jt)}function u6(o){var c=R3(o.alternate,o,Wl);o.memoizedProps=o.pendingProps,c===null?Cb(o):jt=c}function d6(o){var c=o,f=c.alternate;switch(c.tag){case 15:case 0:c=N3(f,c,c.pendingProps,c.type,void 0,Dt);break;case 11:c=N3(f,c,c.pendingProps,c.type.render,c.ref,Dt);break;case 5:KE(c);default:M3(f,c),c=jt=cR(c,Wl),c=R3(f,c,Wl)}o.memoizedProps=o.pendingProps,c===null?Cb(o):jt=c}function $f(o,c,f,g){Ll=Vd=null,KE(c),Of=null,vg=0;var x=c.return;try{if(gne(o,x,c,f,Dt)){xr=1,fb(o,Oa(f,o.current)),jt=null;return}}catch(T){if(x!==null)throw jt=x,T;xr=1,fb(o,Oa(f,o.current)),jt=null;return}c.flags&32768?(Ut||g===1?o=!0:Vf||(Dt&536870912)!==0?o=!1:(cu=o=!0,(g===2||g===9||g===3||g===6)&&(g=Js.current,g!==null&&g.tag===13&&(g.flags|=16384))),h6(c,o)):Cb(c)}function Cb(o){var c=o;do{if((c.flags&32768)!==0){h6(c,cu);return}o=c.return;var f=bne(c.alternate,c,Wl);if(f!==null){jt=f;return}if(c=c.sibling,c!==null){jt=c;return}jt=c=o}while(c!==null);xr===0&&(xr=5)}function h6(o,c){do{var f=wne(o.alternate,o);if(f!==null){f.flags&=32767,jt=f;return}if(f=o.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!c&&(o=o.sibling,o!==null)){jt=o;return}jt=o=f}while(o!==null);xr=6,jt=null}function f6(o,c,f,g,x,T,j,F,Y){o.cancelPendingCommit=null;do Ab();while(ni!==0);if((en&6)!==0)throw Error(r(327));if(c!==null){if(c===o.current)throw Error(r(177));if(T=c.lanes|c.childLanes,T|=xE,Cr(o,f,T,j,F,Y),o===kn&&(jt=kn=null,Dt=0),Bf=c,hu=o,Kl=f,kT=T,IT=x,n6=g,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,jne(se,function(){return v6(),null})):(o.callbackNode=null,o.callbackPriority=0),g=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||g){g=K.T,K.T=null,x=W.p,W.p=2,j=en,en|=4;try{xne(o,c,f)}finally{en=j,W.p=x,K.T=g}}ni=1,m6(),p6(),g6()}}function m6(){if(ni===1){ni=0;var o=hu,c=Bf,f=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||f){f=K.T,K.T=null;var g=W.p;W.p=2;var x=en;en|=4;try{K3(c,o);var T=qT,j=eR(o.containerInfo),F=T.focusedElem,Y=T.selectionRange;if(j!==F&&F&&F.ownerDocument&&ZP(F.ownerDocument.documentElement,F)){if(Y!==null&&gE(F)){var le=Y.start,we=Y.end;if(we===void 0&&(we=le),"selectionStart"in F)F.selectionStart=le,F.selectionEnd=Math.min(we,F.value.length);else{var Te=F.ownerDocument||document,de=Te&&Te.defaultView||window;if(de.getSelection){var ge=de.getSelection(),He=F.textContent.length,ot=Math.min(Y.start,He),wn=Y.end===void 0?ot:Math.min(Y.end,He);!ge.extend&&ot>wn&&(j=wn,wn=ot,ot=j);var te=JP(F,ot),J=JP(F,wn);if(te&&J&&(ge.rangeCount!==1||ge.anchorNode!==te.node||ge.anchorOffset!==te.offset||ge.focusNode!==J.node||ge.focusOffset!==J.offset)){var ae=Te.createRange();ae.setStart(te.node,te.offset),ge.removeAllRanges(),ot>wn?(ge.addRange(ae),ge.extend(J.node,J.offset)):(ae.setEnd(J.node,J.offset),ge.addRange(ae))}}}}for(Te=[],ge=F;ge=ge.parentNode;)ge.nodeType===1&&Te.push({element:ge,left:ge.scrollLeft,top:ge.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<Te.length;F++){var Ee=Te[F];Ee.element.scrollLeft=Ee.left,Ee.element.scrollTop=Ee.top}}Ub=!!HT,qT=HT=null}finally{en=x,W.p=g,K.T=f}}o.current=c,ni=2}}function p6(){if(ni===2){ni=0;var o=hu,c=Bf,f=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||f){f=K.T,K.T=null;var g=W.p;W.p=2;var x=en;en|=4;try{F3(o,c.alternate,c)}finally{en=x,W.p=g,K.T=f}}ni=3}}function g6(){if(ni===4||ni===3){ni=0,hr();var o=hu,c=Bf,f=Kl,g=n6;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?ni=5:(ni=0,Bf=hu=null,y6(o,o.pendingLanes));var x=o.pendingLanes;if(x===0&&(du=null),Lr(f),c=c.stateNode,Kn&&typeof Kn.onCommitFiberRoot=="function")try{Kn.onCommitFiberRoot(ti,c,void 0,(c.current.flags&128)===128)}catch{}if(g!==null){c=K.T,x=W.p,W.p=2,K.T=null;try{for(var T=o.onRecoverableError,j=0;j<g.length;j++){var F=g[j];T(F.value,{componentStack:F.stack})}}finally{K.T=c,W.p=x}}(Kl&3)!==0&&Ab(),Jo(o),x=o.pendingLanes,(f&261930)!==0&&(x&42)!==0?o===OT?Dg++:(Dg=0,OT=o):Dg=0,Mg(0)}}function y6(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,gg(c)))}function Ab(){return m6(),p6(),g6(),v6()}function v6(){if(ni!==5)return!1;var o=hu,c=kT;kT=0;var f=Lr(Kl),g=K.T,x=W.p;try{W.p=32>f?32:f,K.T=null,f=IT,IT=null;var T=hu,j=Kl;if(ni=0,Bf=hu=null,Kl=0,(en&6)!==0)throw Error(r(331));var F=en;if(en|=4,Z3(T.current),X3(T,T.current,j,f),en=F,Mg(0,!1),Kn&&typeof Kn.onPostCommitFiberRoot=="function")try{Kn.onPostCommitFiberRoot(ti,T)}catch{}return!0}finally{W.p=x,K.T=g,y6(o,c)}}function b6(o,c,f){c=Oa(f,c),c=cT(o.stateNode,c,2),o=su(o,c,2),o!==null&&(An(o,2),Jo(o))}function dn(o,c,f){if(o.tag===3)b6(o,o,f);else for(;c!==null;){if(c.tag===3){b6(c,o,f);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(du===null||!du.has(g))){o=Oa(f,o),f=w3(2),g=su(c,f,2),g!==null&&(x3(f,g,c,o),An(g,2),Jo(g));break}}c=c.return}}function RT(o,c,f){var g=o.pingCache;if(g===null){g=o.pingCache=new Tne;var x=new Set;g.set(c,x)}else x=g.get(c),x===void 0&&(x=new Set,g.set(c,x));x.has(f)||(CT=!0,x.add(f),o=kne.bind(null,o,c,f),c.then(o,o))}function kne(o,c,f){var g=o.pingCache;g!==null&&g.delete(c),o.pingedLanes|=o.suspendedLanes&f,o.warmLanes&=~f,kn===o&&(Dt&f)===f&&(xr===4||xr===3&&(Dt&62914560)===Dt&&300>Ht()-xb?(en&2)===0&&zf(o,0):AT|=f,Uf===Dt&&(Uf=0)),Jo(o)}function w6(o,c){c===0&&(c=pr()),o=Dd(o,c),o!==null&&(An(o,c),Jo(o))}function Ine(o){var c=o.memoizedState,f=0;c!==null&&(f=c.retryLane),w6(o,f)}function One(o,c){var f=0;switch(o.tag){case 31:case 13:var g=o.stateNode,x=o.memoizedState;x!==null&&(f=x.retryLane);break;case 19:g=o.stateNode;break;case 22:g=o.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(c),w6(o,f)}function jne(o,c){return xt(o,c)}var Nb=null,Ff=null,DT=!1,kb=!1,MT=!1,mu=0;function Jo(o){o!==Ff&&o.next===null&&(Ff===null?Nb=Ff=o:Ff=Ff.next=o),kb=!0,DT||(DT=!0,Rne())}function Mg(o,c){if(!MT&&kb){MT=!0;do for(var f=!1,g=Nb;g!==null;){if(o!==0){var x=g.pendingLanes;if(x===0)var T=0;else{var j=g.suspendedLanes,F=g.pingedLanes;T=(1<<31-Qt(42|o)+1)-1,T&=x&~(j&~F),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(f=!0,T6(g,T))}else T=Dt,T=et(g,g===kn?T:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(T&3)===0||qt(g,T)||(f=!0,T6(g,T));g=g.next}while(f);MT=!1}}function Pne(){x6()}function x6(){kb=DT=!1;var o=0;mu!==0&&Hne()&&(o=mu);for(var c=Ht(),f=null,g=Nb;g!==null;){var x=g.next,T=_6(g,c);T===0?(g.next=null,f===null?Nb=x:f.next=x,x===null&&(Ff=f)):(f=g,(o!==0||(T&3)!==0)&&(kb=!0)),g=x}ni!==0&&ni!==5||Mg(o),mu!==0&&(mu=0)}function _6(o,c){for(var f=o.suspendedLanes,g=o.pingedLanes,x=o.expirationTimes,T=o.pendingLanes&-62914561;0<T;){var j=31-Qt(T),F=1<<j,Y=x[j];Y===-1?((F&f)===0||(F&g)!==0)&&(x[j]=mr(F,c)):Y<=c&&(o.expiredLanes|=F),T&=~F}if(c=kn,f=Dt,f=et(o,o===c?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g=o.callbackNode,f===0||o===c&&(un===2||un===9)||o.cancelPendingCommit!==null)return g!==null&&g!==null&&Sr(g),o.callbackNode=null,o.callbackPriority=0;if((f&3)===0||qt(o,f)){if(c=f&-f,c===o.callbackPriority)return c;switch(g!==null&&Sr(g),Lr(f)){case 2:case 8:f=cs;break;case 32:f=se;break;case 268435456:f=mt;break;default:f=se}return g=E6.bind(null,o),f=xt(f,g),o.callbackPriority=c,o.callbackNode=f,c}return g!==null&&g!==null&&Sr(g),o.callbackPriority=2,o.callbackNode=null,2}function E6(o,c){if(ni!==0&&ni!==5)return o.callbackNode=null,o.callbackPriority=0,null;var f=o.callbackNode;if(Ab()&&o.callbackNode!==f)return null;var g=Dt;return g=et(o,o===kn?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g===0?null:(i6(o,g,c),_6(o,Ht()),o.callbackNode!=null&&o.callbackNode===f?E6.bind(null,o):null)}function T6(o,c){if(Ab())return null;i6(o,c,!0)}function Rne(){Gne(function(){(en&6)!==0?xt(ei,Pne):x6()})}function LT(){if(mu===0){var o=Nf;o===0&&(o=ds,ds<<=1,(ds&261888)===0&&(ds=256)),mu=o}return mu}function S6(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:ff(""+o)}function C6(o,c){var f=c.ownerDocument.createElement("input");return f.name=c.name,f.value=c.value,o.id&&f.setAttribute("form",o.id),c.parentNode.insertBefore(f,c),o=new FormData(o),f.parentNode.removeChild(f),o}function Dne(o,c,f,g,x){if(c==="submit"&&f&&f.stateNode===x){var T=S6((x[Pn]||null).action),j=g.submitter;j&&(c=(c=j[Pn]||null)?S6(c.formAction):j.getAttribute("formAction"),c!==null&&(T=c,j=null));var F=new qo("action","action",null,g,x);o.push({event:F,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(mu!==0){var Y=j?C6(x,j):new FormData(x);rT(f,{pending:!0,data:Y,method:x.method,action:T},null,Y)}}else typeof T=="function"&&(F.preventDefault(),Y=j?C6(x,j):new FormData(x),rT(f,{pending:!0,data:Y,method:x.method,action:T},T,Y))},currentTarget:x}]})}}for(var VT=0;VT<wE.length;VT++){var UT=wE[VT],Mne=UT.toLowerCase(),Lne=UT[0].toUpperCase()+UT.slice(1);lo(Mne,"on"+Lne)}lo(rR,"onAnimationEnd"),lo(iR,"onAnimationIteration"),lo(sR,"onAnimationStart"),lo("dblclick","onDoubleClick"),lo("focusin","onFocus"),lo("focusout","onBlur"),lo(Zte,"onTransitionRun"),lo(ene,"onTransitionStart"),lo(tne,"onTransitionCancel"),lo(aR,"onTransitionEnd"),Gi("onMouseEnter",["mouseout","mouseover"]),Gi("onMouseLeave",["mouseout","mouseover"]),Gi("onPointerEnter",["pointerout","pointerover"]),Gi("onPointerLeave",["pointerout","pointerover"]),Ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ys("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vne=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lg));function A6(o,c){c=(c&4)!==0;for(var f=0;f<o.length;f++){var g=o[f],x=g.event;g=g.listeners;e:{var T=void 0;if(c)for(var j=g.length-1;0<=j;j--){var F=g[j],Y=F.instance,le=F.currentTarget;if(F=F.listener,Y!==T&&x.isPropagationStopped())break e;T=F,x.currentTarget=le;try{T(x)}catch(we){Hv(we)}x.currentTarget=null,T=Y}else for(j=0;j<g.length;j++){if(F=g[j],Y=F.instance,le=F.currentTarget,F=F.listener,Y!==T&&x.isPropagationStopped())break e;T=F,x.currentTarget=le;try{T(x)}catch(we){Hv(we)}x.currentTarget=null,T=Y}}}}function Pt(o,c){var f=c[Ws];f===void 0&&(f=c[Ws]=new Set);var g=o+"__bubble";f.has(g)||(N6(c,o,2,!1),f.add(g))}function BT(o,c,f){var g=0;c&&(g|=4),N6(f,o,g,c)}var Ib="_reactListening"+Math.random().toString(36).slice(2);function zT(o){if(!o[Ib]){o[Ib]=!0,kl.forEach(function(f){f!=="selectionchange"&&(Vne.has(f)||BT(f,!1,o),BT(f,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[Ib]||(c[Ib]=!0,BT("selectionchange",!1,c))}}function N6(o,c,f,g){switch(rD(c)){case 2:var x=hre;break;case 8:x=fre;break;default:x=nS}f=x.bind(null,c,f,o),x=void 0,!Ad||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(x=!0),g?x!==void 0?o.addEventListener(c,f,{capture:!0,passive:x}):o.addEventListener(c,f,!0):x!==void 0?o.addEventListener(c,f,{passive:x}):o.addEventListener(c,f,!1)}function $T(o,c,f,g,x){var T=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var j=g.tag;if(j===3||j===4){var F=g.stateNode.containerInfo;if(F===x)break;if(j===4)for(j=g.return;j!==null;){var Y=j.tag;if((Y===3||Y===4)&&j.stateNode.containerInfo===x)return;j=j.return}for(;F!==null;){if(j=Ea(F),j===null)return;if(Y=j.tag,Y===5||Y===6||Y===26||Y===27){g=T=j;continue e}F=F.parentNode}}g=g.return}Yc(function(){var le=T,we=Aa(f),Te=[];e:{var de=oR.get(o);if(de!==void 0){var ge=qo,He=o;switch(o){case"keypress":if(kd(f)===0)break e;case"keydown":case"keyup":ge=zv;break;case"focusin":He="focus",ge=Od;break;case"focusout":He="blur",ge=Od;break;case"beforeblur":case"afterblur":ge=Od;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=lg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=jv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=I;break;case rR:case iR:case sR:ge=Rv;break;case aR:ge=H;break;case"scroll":case"scrollend":ge=og;break;case"wheel":ge=me;break;case"copy":case"cut":case"paste":ge=Dv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=Rl;break;case"toggle":case"beforetoggle":ge=Et}var ot=(c&4)!==0,wn=!ot&&(o==="scroll"||o==="scrollend"),te=ot?de!==null?de+"Capture":null:de;ot=[];for(var J=le,ae;J!==null;){var Ee=J;if(ae=Ee.stateNode,Ee=Ee.tag,Ee!==5&&Ee!==26&&Ee!==27||ae===null||te===null||(Ee=io(J,te),Ee!=null&&ot.push(Vg(J,Ee,ae))),wn)break;J=J.return}0<ot.length&&(de=new ge(de,He,null,f,we),Te.push({event:de,listeners:ot}))}}if((c&7)===0){e:{if(de=o==="mouseover"||o==="pointerover",ge=o==="mouseout"||o==="pointerout",de&&f!==ig&&(He=f.relatedTarget||f.fromElement)&&(Ea(He)||He[qi]))break e;if((ge||de)&&(de=we.window===we?we:(de=we.ownerDocument)?de.defaultView||de.parentWindow:window,ge?(He=f.relatedTarget||f.toElement,ge=le,He=He?Ea(He):null,He!==null&&(wn=s(He),ot=He.tag,He!==wn||ot!==5&&ot!==27&&ot!==6)&&(He=null)):(ge=null,He=le),ge!==He)){if(ot=lg,Ee="onMouseLeave",te="onMouseEnter",J="mouse",(o==="pointerout"||o==="pointerover")&&(ot=Rl,Ee="onPointerLeave",te="onPointerEnter",J="pointer"),wn=ge==null?de:fs(ge),ae=He==null?de:fs(He),de=new ot(Ee,J+"leave",ge,f,we),de.target=wn,de.relatedTarget=ae,Ee=null,Ea(we)===le&&(ot=new ot(te,J+"enter",He,f,we),ot.target=ae,ot.relatedTarget=wn,Ee=ot),wn=Ee,ge&&He)t:{for(ot=Une,te=ge,J=He,ae=0,Ee=te;Ee;Ee=ot(Ee))ae++;Ee=0;for(var st=J;st;st=ot(st))Ee++;for(;0<ae-Ee;)te=ot(te),ae--;for(;0<Ee-ae;)J=ot(J),Ee--;for(;ae--;){if(te===J||J!==null&&te===J.alternate){ot=te;break t}te=ot(te),J=ot(J)}ot=null}else ot=null;ge!==null&&k6(Te,de,ge,ot,!1),He!==null&&wn!==null&&k6(Te,wn,He,ot,!0)}}e:{if(de=le?fs(le):window,ge=de.nodeName&&de.nodeName.toLowerCase(),ge==="select"||ge==="input"&&de.type==="file")var Gt=GP;else if(HP(de))if(WP)Gt=Xte;else{Gt=Kte;var Ye=Wte}else ge=de.nodeName,!ge||ge.toLowerCase()!=="input"||de.type!=="checkbox"&&de.type!=="radio"?le&&ar(le.elementType)&&(Gt=GP):Gt=Yte;if(Gt&&(Gt=Gt(o,le))){qP(Te,Gt,f,we);break e}Ye&&Ye(o,de,le),o==="focusout"&&le&&de.type==="number"&&le.memoizedProps.value!=null&&Gc(de,"number",de.value)}switch(Ye=le?fs(le):window,o){case"focusin":(HP(Ye)||Ye.contentEditable==="true")&&(wf=Ye,yE=le,fg=null);break;case"focusout":fg=yE=wf=null;break;case"mousedown":vE=!0;break;case"contextmenu":case"mouseup":case"dragend":vE=!1,tR(Te,f,we);break;case"selectionchange":if(Jte)break;case"keydown":case"keyup":tR(Te,f,we)}var St;if(Zt)e:{switch(o){case"compositionstart":var Mt="onCompositionStart";break e;case"compositionend":Mt="onCompositionEnd";break e;case"compositionupdate":Mt="onCompositionUpdate";break e}Mt=void 0}else bf?jd(o,f)&&(Mt="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(Mt="onCompositionStart");Mt&&(Ko&&f.locale!=="ko"&&(bf||Mt!=="onCompositionStart"?Mt==="onCompositionEnd"&&bf&&(St=ag()):(Ho=we,sg="value"in Ho?Ho.value:Ho.textContent,bf=!0)),Ye=Ob(le,Mt),0<Ye.length&&(Mt=new Wo(Mt,o,null,f,we),Te.push({event:Mt,listeners:Ye}),St?Mt.data=St:(St=vf(f),St!==null&&(Mt.data=St)))),(St=ka?Fte(o,f):Hte(o,f))&&(Mt=Ob(le,"onBeforeInput"),0<Mt.length&&(Ye=new Wo("onBeforeInput","beforeinput",null,f,we),Te.push({event:Ye,listeners:Mt}),Ye.data=St)),Dne(Te,o,le,f,we)}A6(Te,c)})}function Vg(o,c,f){return{instance:o,listener:c,currentTarget:f}}function Ob(o,c){for(var f=c+"Capture",g=[];o!==null;){var x=o,T=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||T===null||(x=io(o,f),x!=null&&g.unshift(Vg(o,x,T)),x=io(o,c),x!=null&&g.push(Vg(o,x,T))),o.tag===3)return g;o=o.return}return[]}function Une(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function k6(o,c,f,g,x){for(var T=c._reactName,j=[];f!==null&&f!==g;){var F=f,Y=F.alternate,le=F.stateNode;if(F=F.tag,Y!==null&&Y===g)break;F!==5&&F!==26&&F!==27||le===null||(Y=le,x?(le=io(f,T),le!=null&&j.unshift(Vg(f,le,Y))):x||(le=io(f,T),le!=null&&j.push(Vg(f,le,Y)))),f=f.return}j.length!==0&&o.push({event:c,listeners:j})}var Bne=/\r\n?/g,zne=/\u0000|\uFFFD/g;function I6(o){return(typeof o=="string"?o:""+o).replace(Bne,`
`).replace(zne,"")}function O6(o,c){return c=I6(c),I6(o)===c}function bn(o,c,f,g,x,T){switch(f){case"children":typeof g=="string"?c==="body"||c==="textarea"&&g===""||$e(o,g):(typeof g=="number"||typeof g=="bigint")&&c!=="body"&&$e(o,""+g);break;case"className":ms(o,"class",g);break;case"tabIndex":ms(o,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":ms(o,f,g);break;case"style":Nn(o,g,T);break;case"data":if(c!=="object"){ms(o,"data",g);break}case"src":case"href":if(g===""&&(c!=="a"||f!=="href")){o.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(f);break}g=ff(""+g),o.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){o.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(f==="formAction"?(c!=="input"&&bn(o,c,"name",x.name,x,null),bn(o,c,"formEncType",x.formEncType,x,null),bn(o,c,"formMethod",x.formMethod,x,null),bn(o,c,"formTarget",x.formTarget,x,null)):(bn(o,c,"encType",x.encType,x,null),bn(o,c,"method",x.method,x,null),bn(o,c,"target",x.target,x,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(f);break}g=ff(""+g),o.setAttribute(f,g);break;case"onClick":g!=null&&(o.onclick=ro);break;case"onScroll":g!=null&&Pt("scroll",o);break;case"onScrollEnd":g!=null&&Pt("scrollend",o);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(f=g.__html,f!=null){if(x.children!=null)throw Error(r(60));o.innerHTML=f}}break;case"multiple":o.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":o.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){o.removeAttribute("xlink:href");break}f=ff(""+g),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(f,""+g):o.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(f,""):o.removeAttribute(f);break;case"capture":case"download":g===!0?o.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(f,g):o.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?o.setAttribute(f,g):o.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?o.removeAttribute(f):o.setAttribute(f,g);break;case"popover":Pt("beforetoggle",o),Pt("toggle",o),Hc(o,"popover",g);break;case"xlinkActuate":br(o,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":br(o,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":br(o,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":br(o,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":br(o,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":br(o,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":br(o,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":br(o,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":br(o,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Hc(o,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Ca.get(f)||f,Hc(o,f,g))}}function FT(o,c,f,g,x,T){switch(f){case"style":Nn(o,g,T);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(f=g.__html,f!=null){if(x.children!=null)throw Error(r(60));o.innerHTML=f}}break;case"children":typeof g=="string"?$e(o,g):(typeof g=="number"||typeof g=="bigint")&&$e(o,""+g);break;case"onScroll":g!=null&&Pt("scroll",o);break;case"onScrollEnd":g!=null&&Pt("scrollend",o);break;case"onClick":g!=null&&(o.onclick=ro);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Sa.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(x=f.endsWith("Capture"),c=f.slice(2,x?f.length-7:void 0),T=o[Pn]||null,T=T!=null?T[f]:null,typeof T=="function"&&o.removeEventListener(c,T,x),typeof g=="function")){typeof T!="function"&&T!==null&&(f in o?o[f]=null:o.hasAttribute(f)&&o.removeAttribute(f)),o.addEventListener(c,g,x);break e}f in o?o[f]=g:g===!0?o.setAttribute(f,""):Hc(o,f,g)}}}function Pi(o,c,f){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pt("error",o),Pt("load",o);var g=!1,x=!1,T;for(T in f)if(f.hasOwnProperty(T)){var j=f[T];if(j!=null)switch(T){case"src":g=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:bn(o,c,T,j,f,null)}}x&&bn(o,c,"srcSet",f.srcSet,f,null),g&&bn(o,c,"src",f.src,f,null);return;case"input":Pt("invalid",o);var F=T=j=x=null,Y=null,le=null;for(g in f)if(f.hasOwnProperty(g)){var we=f[g];if(we!=null)switch(g){case"name":x=we;break;case"type":j=we;break;case"checked":Y=we;break;case"defaultChecked":le=we;break;case"value":T=we;break;case"defaultValue":F=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(r(137,c));break;default:bn(o,c,g,we,f,null)}}Sd(o,T,F,Y,le,j,x,!1);return;case"select":Pt("invalid",o),g=j=T=null;for(x in f)if(f.hasOwnProperty(x)&&(F=f[x],F!=null))switch(x){case"value":T=F;break;case"defaultValue":j=F;break;case"multiple":g=F;default:bn(o,c,x,F,f,null)}c=T,f=j,o.multiple=!!g,c!=null?q(o,!!g,c,!1):f!=null&&q(o,!!g,f,!0);return;case"textarea":Pt("invalid",o),T=x=g=null;for(j in f)if(f.hasOwnProperty(j)&&(F=f[j],F!=null))switch(j){case"value":g=F;break;case"defaultValue":x=F;break;case"children":T=F;break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(91));break;default:bn(o,c,j,F,f,null)}Ve(o,g,x,T);return;case"option":for(Y in f)if(f.hasOwnProperty(Y)&&(g=f[Y],g!=null))switch(Y){case"selected":o.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:bn(o,c,Y,g,f,null)}return;case"dialog":Pt("beforetoggle",o),Pt("toggle",o),Pt("cancel",o),Pt("close",o);break;case"iframe":case"object":Pt("load",o);break;case"video":case"audio":for(g=0;g<Lg.length;g++)Pt(Lg[g],o);break;case"image":Pt("error",o),Pt("load",o);break;case"details":Pt("toggle",o);break;case"embed":case"source":case"link":Pt("error",o),Pt("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in f)if(f.hasOwnProperty(le)&&(g=f[le],g!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:bn(o,c,le,g,f,null)}return;default:if(ar(c)){for(we in f)f.hasOwnProperty(we)&&(g=f[we],g!==void 0&&FT(o,c,we,g,f,void 0));return}}for(F in f)f.hasOwnProperty(F)&&(g=f[F],g!=null&&bn(o,c,F,g,f,null))}function $ne(o,c,f,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,T=null,j=null,F=null,Y=null,le=null,we=null;for(ge in f){var Te=f[ge];if(f.hasOwnProperty(ge)&&Te!=null)switch(ge){case"checked":break;case"value":break;case"defaultValue":Y=Te;default:g.hasOwnProperty(ge)||bn(o,c,ge,null,g,Te)}}for(var de in g){var ge=g[de];if(Te=f[de],g.hasOwnProperty(de)&&(ge!=null||Te!=null))switch(de){case"type":T=ge;break;case"name":x=ge;break;case"checked":le=ge;break;case"defaultChecked":we=ge;break;case"value":j=ge;break;case"defaultValue":F=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(r(137,c));break;default:ge!==Te&&bn(o,c,de,ge,g,Te)}}qc(o,j,F,Y,le,we,T,x);return;case"select":ge=j=F=de=null;for(T in f)if(Y=f[T],f.hasOwnProperty(T)&&Y!=null)switch(T){case"value":break;case"multiple":ge=Y;default:g.hasOwnProperty(T)||bn(o,c,T,null,g,Y)}for(x in g)if(T=g[x],Y=f[x],g.hasOwnProperty(x)&&(T!=null||Y!=null))switch(x){case"value":de=T;break;case"defaultValue":F=T;break;case"multiple":j=T;default:T!==Y&&bn(o,c,x,T,g,Y)}c=F,f=j,g=ge,de!=null?q(o,!!f,de,!1):!!g!=!!f&&(c!=null?q(o,!!f,c,!0):q(o,!!f,f?[]:"",!1));return;case"textarea":ge=de=null;for(F in f)if(x=f[F],f.hasOwnProperty(F)&&x!=null&&!g.hasOwnProperty(F))switch(F){case"value":break;case"children":break;default:bn(o,c,F,null,g,x)}for(j in g)if(x=g[j],T=f[j],g.hasOwnProperty(j)&&(x!=null||T!=null))switch(j){case"value":de=x;break;case"defaultValue":ge=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:x!==T&&bn(o,c,j,x,g,T)}xe(o,de,ge);return;case"option":for(var He in f)if(de=f[He],f.hasOwnProperty(He)&&de!=null&&!g.hasOwnProperty(He))switch(He){case"selected":o.selected=!1;break;default:bn(o,c,He,null,g,de)}for(Y in g)if(de=g[Y],ge=f[Y],g.hasOwnProperty(Y)&&de!==ge&&(de!=null||ge!=null))switch(Y){case"selected":o.selected=de&&typeof de!="function"&&typeof de!="symbol";break;default:bn(o,c,Y,de,g,ge)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ot in f)de=f[ot],f.hasOwnProperty(ot)&&de!=null&&!g.hasOwnProperty(ot)&&bn(o,c,ot,null,g,de);for(le in g)if(de=g[le],ge=f[le],g.hasOwnProperty(le)&&de!==ge&&(de!=null||ge!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,c));break;default:bn(o,c,le,de,g,ge)}return;default:if(ar(c)){for(var wn in f)de=f[wn],f.hasOwnProperty(wn)&&de!==void 0&&!g.hasOwnProperty(wn)&&FT(o,c,wn,void 0,g,de);for(we in g)de=g[we],ge=f[we],!g.hasOwnProperty(we)||de===ge||de===void 0&&ge===void 0||FT(o,c,we,de,g,ge);return}}for(var te in f)de=f[te],f.hasOwnProperty(te)&&de!=null&&!g.hasOwnProperty(te)&&bn(o,c,te,null,g,de);for(Te in g)de=g[Te],ge=f[Te],!g.hasOwnProperty(Te)||de===ge||de==null&&ge==null||bn(o,c,Te,de,g,ge)}function j6(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Fne(){if(typeof performance.getEntriesByType=="function"){for(var o=0,c=0,f=performance.getEntriesByType("resource"),g=0;g<f.length;g++){var x=f[g],T=x.transferSize,j=x.initiatorType,F=x.duration;if(T&&F&&j6(j)){for(j=0,F=x.responseEnd,g+=1;g<f.length;g++){var Y=f[g],le=Y.startTime;if(le>F)break;var we=Y.transferSize,Te=Y.initiatorType;we&&j6(Te)&&(Y=Y.responseEnd,j+=we*(Y<F?1:(F-le)/(Y-le)))}if(--g,c+=8*(T+j)/(x.duration/1e3),o++,10<o)break}}if(0<o)return c/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var HT=null,qT=null;function jb(o){return o.nodeType===9?o:o.ownerDocument}function P6(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function R6(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function GT(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var WT=null;function Hne(){var o=window.event;return o&&o.type==="popstate"?o===WT?!1:(WT=o,!0):(WT=null,!1)}var D6=typeof setTimeout=="function"?setTimeout:void 0,qne=typeof clearTimeout=="function"?clearTimeout:void 0,M6=typeof Promise=="function"?Promise:void 0,Gne=typeof queueMicrotask=="function"?queueMicrotask:typeof M6<"u"?function(o){return M6.resolve(null).then(o).catch(Wne)}:D6;function Wne(o){setTimeout(function(){throw o})}function pu(o){return o==="head"}function L6(o,c){var f=c,g=0;do{var x=f.nextSibling;if(o.removeChild(f),x&&x.nodeType===8)if(f=x.data,f==="/$"||f==="/&"){if(g===0){o.removeChild(x),Wf(c);return}g--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")g++;else if(f==="html")Ug(o.ownerDocument.documentElement);else if(f==="head"){f=o.ownerDocument.head,Ug(f);for(var T=f.firstChild;T;){var j=T.nextSibling,F=T.nodeName;T[Ks]||F==="SCRIPT"||F==="STYLE"||F==="LINK"&&T.rel.toLowerCase()==="stylesheet"||f.removeChild(T),T=j}}else f==="body"&&Ug(o.ownerDocument.body);f=x}while(f);Wf(c)}function V6(o,c){var f=o;o=0;do{var g=f.nextSibling;if(f.nodeType===1?c?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(c?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),g&&g.nodeType===8)if(f=g.data,f==="/$"){if(o===0)break;o--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||o++;f=g}while(f)}function KT(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var f=c;switch(c=c.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":KT(f),_a(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}o.removeChild(f)}}function Kne(o,c,f,g){for(;o.nodeType===1;){var x=f;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!g&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(g){if(!o[Ks])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(T=o.getAttribute("rel"),T==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(T!==x.rel||o.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||o.getAttribute("title")!==(x.title==null?null:x.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(T=o.getAttribute("src"),(T!==(x.src==null?null:x.src)||o.getAttribute("type")!==(x.type==null?null:x.type)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&T&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var T=x.name==null?null:""+x.name;if(x.type==="hidden"&&o.getAttribute("name")===T)return o}else return o;if(o=Ma(o.nextSibling),o===null)break}return null}function Yne(o,c,f){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!f||(o=Ma(o.nextSibling),o===null))return null;return o}function U6(o,c){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!c||(o=Ma(o.nextSibling),o===null))return null;return o}function YT(o){return o.data==="$?"||o.data==="$~"}function XT(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function Xne(o,c){var f=o.ownerDocument;if(o.data==="$~")o._reactRetry=c;else if(o.data!=="$?"||f.readyState!=="loading")c();else{var g=function(){c(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),o._reactRetry=g}}function Ma(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return o}var QT=null;function B6(o){o=o.nextSibling;for(var c=0;o;){if(o.nodeType===8){var f=o.data;if(f==="/$"||f==="/&"){if(c===0)return Ma(o.nextSibling);c--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||c++}o=o.nextSibling}return null}function z6(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(c===0)return o;c--}else f!=="/$"&&f!=="/&"||c++}o=o.previousSibling}return null}function $6(o,c,f){switch(c=jb(f),o){case"html":if(o=c.documentElement,!o)throw Error(r(452));return o;case"head":if(o=c.head,!o)throw Error(r(453));return o;case"body":if(o=c.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function Ug(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);_a(o)}var La=new Map,F6=new Set;function Pb(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Yl=W.d;W.d={f:Qne,r:Jne,D:Zne,C:ere,L:tre,m:nre,X:ire,S:rre,M:sre};function Qne(){var o=Yl.f(),c=Tb();return o||c}function Jne(o){var c=As(o);c!==null&&c.tag===5&&c.type==="form"?a3(c):Yl.r(o)}var Hf=typeof document>"u"?null:document;function H6(o,c,f){var g=Hf;if(g&&typeof c=="string"&&c){var x=Ni(c);x='link[rel="'+o+'"][href="'+x+'"]',typeof f=="string"&&(x+='[crossorigin="'+f+'"]'),F6.has(x)||(F6.add(x),o={rel:o,crossOrigin:f,href:c},g.querySelector(x)===null&&(c=g.createElement("link"),Pi(c,"link",o),vr(c),g.head.appendChild(c)))}}function Zne(o){Yl.D(o),H6("dns-prefetch",o,null)}function ere(o,c){Yl.C(o,c),H6("preconnect",o,c)}function tre(o,c,f){Yl.L(o,c,f);var g=Hf;if(g&&o&&c){var x='link[rel="preload"][as="'+Ni(c)+'"]';c==="image"&&f&&f.imageSrcSet?(x+='[imagesrcset="'+Ni(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(x+='[imagesizes="'+Ni(f.imageSizes)+'"]')):x+='[href="'+Ni(o)+'"]';var T=x;switch(c){case"style":T=qf(o);break;case"script":T=Gf(o)}La.has(T)||(o=p({rel:"preload",href:c==="image"&&f&&f.imageSrcSet?void 0:o,as:c},f),La.set(T,o),g.querySelector(x)!==null||c==="style"&&g.querySelector(Bg(T))||c==="script"&&g.querySelector(zg(T))||(c=g.createElement("link"),Pi(c,"link",o),vr(c),g.head.appendChild(c)))}}function nre(o,c){Yl.m(o,c);var f=Hf;if(f&&o){var g=c&&typeof c.as=="string"?c.as:"script",x='link[rel="modulepreload"][as="'+Ni(g)+'"][href="'+Ni(o)+'"]',T=x;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=Gf(o)}if(!La.has(T)&&(o=p({rel:"modulepreload",href:o},c),La.set(T,o),f.querySelector(x)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(zg(T)))return}g=f.createElement("link"),Pi(g,"link",o),vr(g),f.head.appendChild(g)}}}function rre(o,c,f){Yl.S(o,c,f);var g=Hf;if(g&&o){var x=Ta(g).hoistableStyles,T=qf(o);c=c||"default";var j=x.get(T);if(!j){var F={loading:0,preload:null};if(j=g.querySelector(Bg(T)))F.loading=5;else{o=p({rel:"stylesheet",href:o,"data-precedence":c},f),(f=La.get(T))&&JT(o,f);var Y=j=g.createElement("link");vr(Y),Pi(Y,"link",o),Y._p=new Promise(function(le,we){Y.onload=le,Y.onerror=we}),Y.addEventListener("load",function(){F.loading|=1}),Y.addEventListener("error",function(){F.loading|=2}),F.loading|=4,Rb(j,c,g)}j={type:"stylesheet",instance:j,count:1,state:F},x.set(T,j)}}}function ire(o,c){Yl.X(o,c);var f=Hf;if(f&&o){var g=Ta(f).hoistableScripts,x=Gf(o),T=g.get(x);T||(T=f.querySelector(zg(x)),T||(o=p({src:o,async:!0},c),(c=La.get(x))&&ZT(o,c),T=f.createElement("script"),vr(T),Pi(T,"link",o),f.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},g.set(x,T))}}function sre(o,c){Yl.M(o,c);var f=Hf;if(f&&o){var g=Ta(f).hoistableScripts,x=Gf(o),T=g.get(x);T||(T=f.querySelector(zg(x)),T||(o=p({src:o,async:!0,type:"module"},c),(c=La.get(x))&&ZT(o,c),T=f.createElement("script"),vr(T),Pi(T,"link",o),f.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},g.set(x,T))}}function q6(o,c,f,g){var x=(x=_e.current)?Pb(x):null;if(!x)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(c=qf(f.href),f=Ta(x).hoistableStyles,g=f.get(c),g||(g={type:"style",instance:null,count:0,state:null},f.set(c,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){o=qf(f.href);var T=Ta(x).hoistableStyles,j=T.get(o);if(j||(x=x.ownerDocument||x,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(o,j),(T=x.querySelector(Bg(o)))&&!T._p&&(j.instance=T,j.state.loading=5),La.has(o)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},La.set(o,f),T||are(x,o,f,j.state))),c&&g===null)throw Error(r(528,""));return j}if(c&&g!==null)throw Error(r(529,""));return null;case"script":return c=f.async,f=f.src,typeof f=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Gf(f),f=Ta(x).hoistableScripts,g=f.get(c),g||(g={type:"script",instance:null,count:0,state:null},f.set(c,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function qf(o){return'href="'+Ni(o)+'"'}function Bg(o){return'link[rel="stylesheet"]['+o+"]"}function G6(o){return p({},o,{"data-precedence":o.precedence,precedence:null})}function are(o,c,f,g){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?g.loading=1:(c=o.createElement("link"),g.preload=c,c.addEventListener("load",function(){return g.loading|=1}),c.addEventListener("error",function(){return g.loading|=2}),Pi(c,"link",f),vr(c),o.head.appendChild(c))}function Gf(o){return'[src="'+Ni(o)+'"]'}function zg(o){return"script[async]"+o}function W6(o,c,f){if(c.count++,c.instance===null)switch(c.type){case"style":var g=o.querySelector('style[data-href~="'+Ni(f.href)+'"]');if(g)return c.instance=g,vr(g),g;var x=p({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(o.ownerDocument||o).createElement("style"),vr(g),Pi(g,"style",x),Rb(g,f.precedence,o),c.instance=g;case"stylesheet":x=qf(f.href);var T=o.querySelector(Bg(x));if(T)return c.state.loading|=4,c.instance=T,vr(T),T;g=G6(f),(x=La.get(x))&&JT(g,x),T=(o.ownerDocument||o).createElement("link"),vr(T);var j=T;return j._p=new Promise(function(F,Y){j.onload=F,j.onerror=Y}),Pi(T,"link",g),c.state.loading|=4,Rb(T,f.precedence,o),c.instance=T;case"script":return T=Gf(f.src),(x=o.querySelector(zg(T)))?(c.instance=x,vr(x),x):(g=f,(x=La.get(T))&&(g=p({},f),ZT(g,x)),o=o.ownerDocument||o,x=o.createElement("script"),vr(x),Pi(x,"link",g),o.head.appendChild(x),c.instance=x);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(g=c.instance,c.state.loading|=4,Rb(g,f.precedence,o));return c.instance}function Rb(o,c,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=g.length?g[g.length-1]:null,T=x,j=0;j<g.length;j++){var F=g[j];if(F.dataset.precedence===c)T=F;else if(T!==x)break}T?T.parentNode.insertBefore(o,T.nextSibling):(c=f.nodeType===9?f.head:f,c.insertBefore(o,c.firstChild))}function JT(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function ZT(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var Db=null;function K6(o,c,f){if(Db===null){var g=new Map,x=Db=new Map;x.set(f,g)}else x=Db,g=x.get(f),g||(g=new Map,x.set(f,g));if(g.has(o))return g;for(g.set(o,null),f=f.getElementsByTagName(o),x=0;x<f.length;x++){var T=f[x];if(!(T[Ks]||T[yr]||o==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var j=T.getAttribute(c)||"";j=o+j;var F=g.get(j);F?F.push(T):g.set(j,[T])}}return g}function Y6(o,c,f){o=o.ownerDocument||o,o.head.insertBefore(f,c==="title"?o.querySelector("head > title"):null)}function ore(o,c,f){if(f===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function X6(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function lre(o,c,f,g){if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var x=qf(g.href),T=c.querySelector(Bg(x));if(T){c=T._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(o.count++,o=Mb.bind(o),c.then(o,o)),f.state.loading|=4,f.instance=T,vr(T);return}T=c.ownerDocument||c,g=G6(g),(x=La.get(x))&&JT(g,x),T=T.createElement("link"),vr(T);var j=T;j._p=new Promise(function(F,Y){j.onload=F,j.onerror=Y}),Pi(T,"link",g),f.instance=T}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(f,c),(c=f.state.preload)&&(f.state.loading&3)===0&&(o.count++,f=Mb.bind(o),c.addEventListener("load",f),c.addEventListener("error",f))}}var eS=0;function cre(o,c){return o.stylesheets&&o.count===0&&Vb(o,o.stylesheets),0<o.count||0<o.imgCount?function(f){var g=setTimeout(function(){if(o.stylesheets&&Vb(o,o.stylesheets),o.unsuspend){var T=o.unsuspend;o.unsuspend=null,T()}},6e4+c);0<o.imgBytes&&eS===0&&(eS=62500*Fne());var x=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&Vb(o,o.stylesheets),o.unsuspend)){var T=o.unsuspend;o.unsuspend=null,T()}},(o.imgBytes>eS?50:800)+c);return o.unsuspend=f,function(){o.unsuspend=null,clearTimeout(g),clearTimeout(x)}}:null}function Mb(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Vb(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Lb=null;function Vb(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Lb=new Map,c.forEach(ure,o),Lb=null,Mb.call(o))}function ure(o,c){if(!(c.state.loading&4)){var f=Lb.get(o);if(f)var g=f.get(null);else{f=new Map,Lb.set(o,f);for(var x=o.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<x.length;T++){var j=x[T];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(f.set(j.dataset.precedence,j),g=j)}g&&f.set(null,g)}x=c.instance,j=x.getAttribute("data-precedence"),T=f.get(j)||g,T===g&&f.set(null,x),f.set(j,x),this.count++,g=Mb.bind(this),x.addEventListener("load",g),x.addEventListener("error",g),T?T.parentNode.insertBefore(x,T.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(x,o.firstChild)),c.state.loading|=4}}var $g={$$typeof:O,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function dre(o,c,f,g,x,T,j,F,Y){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=sr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sr(0),this.hiddenUpdates=sr(null),this.identifierPrefix=g,this.onUncaughtError=x,this.onCaughtError=T,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function Q6(o,c,f,g,x,T,j,F,Y,le,we,Te){return o=new dre(o,c,f,j,Y,le,we,Te,F),c=1,T===!0&&(c|=24),T=Qs(3,null,null,c),o.current=T,T.stateNode=o,c=PE(),c.refCount++,o.pooledCache=c,c.refCount++,T.memoizedState={element:g,isDehydrated:f,cache:c},LE(T),o}function J6(o){return o?(o=Ef,o):Ef}function Z6(o,c,f,g,x,T){x=J6(x),g.context===null?g.context=x:g.pendingContext=x,g=iu(c),g.payload={element:f},T=T===void 0?null:T,T!==null&&(g.callback=T),f=su(o,g,c),f!==null&&(Ps(f,o,c),wg(f,o,c))}function eD(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<c?f:c}}function tS(o,c){eD(o,c),(o=o.alternate)&&eD(o,c)}function tD(o){if(o.tag===13||o.tag===31){var c=Dd(o,67108864);c!==null&&Ps(c,o,67108864),tS(o,67108864)}}function nD(o){if(o.tag===13||o.tag===31){var c=na();c=Ai(c);var f=Dd(o,c);f!==null&&Ps(f,o,c),tS(o,c)}}var Ub=!0;function hre(o,c,f,g){var x=K.T;K.T=null;var T=W.p;try{W.p=2,nS(o,c,f,g)}finally{W.p=T,K.T=x}}function fre(o,c,f,g){var x=K.T;K.T=null;var T=W.p;try{W.p=8,nS(o,c,f,g)}finally{W.p=T,K.T=x}}function nS(o,c,f,g){if(Ub){var x=rS(g);if(x===null)$T(o,c,g,Bb,f),iD(o,g);else if(pre(x,o,c,f,g))g.stopPropagation();else if(iD(o,g),c&4&&-1<mre.indexOf(o)){for(;x!==null;){var T=As(x);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var j=Fi(T.pendingLanes);if(j!==0){var F=T;for(F.pendingLanes|=2,F.entangledLanes|=2;j;){var Y=1<<31-Qt(j);F.entanglements[1]|=Y,j&=~Y}Jo(T),(en&6)===0&&(_b=Ht()+500,Mg(0))}}break;case 31:case 13:F=Dd(T,2),F!==null&&Ps(F,T,2),Tb(),tS(T,2)}if(T=rS(g),T===null&&$T(o,c,g,Bb,f),T===x)break;x=T}x!==null&&g.stopPropagation()}else $T(o,c,g,null,f)}}function rS(o){return o=Aa(o),iS(o)}var Bb=null;function iS(o){if(Bb=null,o=Ea(o),o!==null){var c=s(o);if(c===null)o=null;else{var f=c.tag;if(f===13){if(o=a(c),o!==null)return o;o=null}else if(f===31){if(o=l(c),o!==null)return o;o=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return Bb=o,null}function rD(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fr()){case ei:return 2;case cs:return 8;case se:case Ie:return 32;case mt:return 268435456;default:return 32}default:return 32}}var sS=!1,gu=null,yu=null,vu=null,Fg=new Map,Hg=new Map,bu=[],mre="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iD(o,c){switch(o){case"focusin":case"focusout":gu=null;break;case"dragenter":case"dragleave":yu=null;break;case"mouseover":case"mouseout":vu=null;break;case"pointerover":case"pointerout":Fg.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hg.delete(c.pointerId)}}function qg(o,c,f,g,x,T){return o===null||o.nativeEvent!==T?(o={blockedOn:c,domEventName:f,eventSystemFlags:g,nativeEvent:T,targetContainers:[x]},c!==null&&(c=As(c),c!==null&&tD(c)),o):(o.eventSystemFlags|=g,c=o.targetContainers,x!==null&&c.indexOf(x)===-1&&c.push(x),o)}function pre(o,c,f,g,x){switch(c){case"focusin":return gu=qg(gu,o,c,f,g,x),!0;case"dragenter":return yu=qg(yu,o,c,f,g,x),!0;case"mouseover":return vu=qg(vu,o,c,f,g,x),!0;case"pointerover":var T=x.pointerId;return Fg.set(T,qg(Fg.get(T)||null,o,c,f,g,x)),!0;case"gotpointercapture":return T=x.pointerId,Hg.set(T,qg(Hg.get(T)||null,o,c,f,g,x)),!0}return!1}function sD(o){var c=Ea(o.target);if(c!==null){var f=s(c);if(f!==null){if(c=f.tag,c===13){if(c=a(f),c!==null){o.blockedOn=c,Cs(o.priority,function(){nD(f)});return}}else if(c===31){if(c=l(f),c!==null){o.blockedOn=c,Cs(o.priority,function(){nD(f)});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function zb(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var f=rS(o.nativeEvent);if(f===null){f=o.nativeEvent;var g=new f.constructor(f.type,f);ig=g,f.target.dispatchEvent(g),ig=null}else return c=As(f),c!==null&&tD(c),o.blockedOn=f,!1;c.shift()}return!0}function aD(o,c,f){zb(o)&&f.delete(c)}function gre(){sS=!1,gu!==null&&zb(gu)&&(gu=null),yu!==null&&zb(yu)&&(yu=null),vu!==null&&zb(vu)&&(vu=null),Fg.forEach(aD),Hg.forEach(aD)}function $b(o,c){o.blockedOn===c&&(o.blockedOn=null,sS||(sS=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,gre)))}var Fb=null;function oD(o){Fb!==o&&(Fb=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Fb===o&&(Fb=null);for(var c=0;c<o.length;c+=3){var f=o[c],g=o[c+1],x=o[c+2];if(typeof g!="function"){if(iS(g||f)===null)continue;break}var T=As(f);T!==null&&(o.splice(c,3),c-=3,rT(T,{pending:!0,data:x,method:f.method,action:g},g,x))}}))}function Wf(o){function c(Y){return $b(Y,o)}gu!==null&&$b(gu,o),yu!==null&&$b(yu,o),vu!==null&&$b(vu,o),Fg.forEach(c),Hg.forEach(c);for(var f=0;f<bu.length;f++){var g=bu[f];g.blockedOn===o&&(g.blockedOn=null)}for(;0<bu.length&&(f=bu[0],f.blockedOn===null);)sD(f),f.blockedOn===null&&bu.shift();if(f=(o.ownerDocument||o).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var x=f[g],T=f[g+1],j=x[Pn]||null;if(typeof T=="function")j||oD(f);else if(j){var F=null;if(T&&T.hasAttribute("formAction")){if(x=T,j=T[Pn]||null)F=j.formAction;else if(iS(x)!==null)continue}else F=j.action;typeof F=="function"?f[g+1]=F:(f.splice(g,3),g-=3),oD(f)}}}function lD(){function o(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(j){return x=j})},focusReset:"manual",scroll:"manual"})}function c(){x!==null&&(x(),x=null),g||setTimeout(f,20)}function f(){if(!g&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,x=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(f,100),function(){g=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),x!==null&&(x(),x=null)}}}function aS(o){this._internalRoot=o}Hb.prototype.render=aS.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(r(409));var f=c.current,g=na();Z6(f,g,o,c,null,null)},Hb.prototype.unmount=aS.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;Z6(o.current,2,null,o,null,null),Tb(),c[qi]=null}};function Hb(o){this._internalRoot=o}Hb.prototype.unstable_scheduleHydration=function(o){if(o){var c=Fc();o={blockedOn:null,target:o,priority:c};for(var f=0;f<bu.length&&c!==0&&c<bu[f].priority;f++);bu.splice(f,0,o),f===0&&sD(o)}};var cD=e.version;if(cD!=="19.2.0")throw Error(r(527,cD,"19.2.0"));W.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=d(c),o=o!==null?h(o):null,o=o===null?null:o.stateNode,o};var yre={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qb.isDisabled&&qb.supportsFiber)try{ti=qb.inject(yre),Kn=qb}catch{}}return Wg.createRoot=function(o,c){if(!i(o))throw Error(r(299));var f=!1,g="",x=g3,T=y3,j=v3;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(T=c.onCaughtError),c.onRecoverableError!==void 0&&(j=c.onRecoverableError)),c=Q6(o,1,!1,null,null,f,g,null,x,T,j,lD),o[qi]=c.current,zT(o),new aS(c)},Wg.hydrateRoot=function(o,c,f){if(!i(o))throw Error(r(299));var g=!1,x="",T=g3,j=y3,F=v3,Y=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(x=f.identifierPrefix),f.onUncaughtError!==void 0&&(T=f.onUncaughtError),f.onCaughtError!==void 0&&(j=f.onCaughtError),f.onRecoverableError!==void 0&&(F=f.onRecoverableError),f.formState!==void 0&&(Y=f.formState)),c=Q6(o,1,!0,c,f??null,g,x,Y,T,j,F,lD),c.context=J6(null),f=c.current,g=na(),g=Ai(g),x=iu(g),x.callback=null,su(f,x,g),f=g,c.current.lanes=f,An(c,f),Jo(c),o[qi]=c.current,zT(o),new Hb(c)},Wg.version="19.2.0",Wg}var bD;function Ire(){if(bD)return uS.exports;bD=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),uS.exports=kre(),uS.exports}var Ore=Ire();const jre=va(Ore),Pre="modulepreload",Rre=function(t){return"/ontap/"+t},wD={},$n=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let a=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=a(n.map(d=>{if(d=Rre(d),d in wD)return;wD[d]=!0;const h=d.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":Pre,h||(y.as="script"),y.crossOrigin="",y.href=d,u&&y.setAttribute("nonce",u),document.head.appendChild(y),h)return new Promise((v,w)=>{y.addEventListener("load",v),y.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},w$=S.createContext(void 0),x$=({children:t})=>{const[e,n]=S.useState("light");S.useEffect(()=>{let s=localStorage.getItem("theme");(!s||s==="noel")&&(s="light",localStorage.setItem("theme","light")),n(s),document.documentElement.setAttribute("data-theme",s)},[]);const r=i=>{n(i),document.documentElement.setAttribute("data-theme",i),localStorage.setItem("theme",i)};return m.jsx(w$.Provider,{value:{theme:e,setTheme:r},children:t})},$i=()=>{const t=S.useContext(w$);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},$I=S.createContext({});function FI(t){const e=S.useRef(null);return e.current===null&&(e.current=t()),e.current}const HI=typeof window<"u",_$=HI?S.useLayoutEffect:S.useEffect,f_=S.createContext(null);function qI(t,e){t.indexOf(e)===-1&&t.push(e)}function GI(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const yc=(t,e,n)=>n>e?e:n<t?t:n;let WI=()=>{};const vc={},E$=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function T$(t){return typeof t=="object"&&t!==null}const S$=t=>/^0[^.\s]+$/u.test(t);function KI(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ya=t=>t,Dre=(t,e)=>n=>e(t(n)),Oy=(...t)=>t.reduce(Dre),V0=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class YI{constructor(){this.subscriptions=[]}add(e){return qI(this.subscriptions,e),()=>GI(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ll=t=>t*1e3,Ha=t=>t/1e3;function C$(t,e){return e?t*(1e3/e):0}const A$=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Mre=1e-7,Lre=12;function Vre(t,e,n,r,i){let s,a,l=0;do a=e+(n-e)/2,s=A$(a,r,i)-t,s>0?n=a:e=a;while(Math.abs(s)>Mre&&++l<Lre);return a}function jy(t,e,n,r){if(t===e&&n===r)return Ya;const i=s=>Vre(s,0,1,t,n);return s=>s===0||s===1?s:A$(i(s),e,r)}const N$=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,k$=t=>e=>1-t(1-e),I$=jy(.33,1.53,.69,.99),XI=k$(I$),O$=N$(XI),j$=t=>(t*=2)<1?.5*XI(t):.5*(2-Math.pow(2,-10*(t-1))),QI=t=>1-Math.sin(Math.acos(t)),P$=k$(QI),R$=N$(QI),Ure=jy(.42,0,1,1),Bre=jy(0,0,.58,1),D$=jy(.42,0,.58,1),zre=t=>Array.isArray(t)&&typeof t[0]!="number",M$=t=>Array.isArray(t)&&typeof t[0]=="number",$re={linear:Ya,easeIn:Ure,easeInOut:D$,easeOut:Bre,circIn:QI,circInOut:R$,circOut:P$,backIn:XI,backInOut:O$,backOut:I$,anticipate:j$},Fre=t=>typeof t=="string",xD=t=>{if(M$(t)){WI(t.length===4);const[e,n,r,i]=t;return jy(e,n,r,i)}else if(Fre(t))return $re[t];return t},Gb=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Hre(t,e){let n=new Set,r=new Set,i=!1,s=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(h){a.has(h)&&(d.schedule(h),t()),h(l)}const d={schedule:(h,p=!1,y=!1)=>{const w=y&&i?n:r;return p&&a.add(h),w.has(h)||w.add(h),h},cancel:h=>{r.delete(h),a.delete(h)},process:h=>{if(l=h,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),n.clear(),i=!1,s&&(s=!1,d.process(h))}};return d}const qre=40;function L$(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=Gb.reduce((O,R)=>(O[R]=Hre(s),O),{}),{setup:l,read:u,resolveKeyframes:d,preUpdate:h,update:p,preRender:y,render:v,postRender:w}=a,_=()=>{const O=vc.useManualTiming?i.timestamp:performance.now();n=!1,vc.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(O-i.timestamp,qre),1)),i.timestamp=O,i.isProcessing=!0,l.process(i),u.process(i),d.process(i),h.process(i),p.process(i),y.process(i),v.process(i),w.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(_))},E=()=>{n=!0,r=!0,i.isProcessing||t(_)};return{schedule:Gb.reduce((O,R)=>{const D=a[R];return O[R]=(P,A=!1,k=!1)=>(n||E(),D.schedule(P,A,k)),O},{}),cancel:O=>{for(let R=0;R<Gb.length;R++)a[Gb[R]].cancel(O)},state:i,steps:a}}const{schedule:er,cancel:Gu,state:Mi,steps:mS}=L$(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ya,!0);let Bw;function Gre(){Bw=void 0}const Vs={now:()=>(Bw===void 0&&Vs.set(Mi.isProcessing||vc.useManualTiming?Mi.timestamp:performance.now()),Bw),set:t=>{Bw=t,queueMicrotask(Gre)}},V$=t=>e=>typeof e=="string"&&e.startsWith(t),U$=V$("--"),Wre=V$("var(--"),JI=t=>Wre(t)?Kre.test(t.split("/*")[0].trim()):!1,Kre=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Tp={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},U0={...Tp,transform:t=>yc(0,1,t)},Wb={...Tp,default:1},y0=t=>Math.round(t*1e5)/1e5,ZI=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Yre(t){return t==null}const Xre=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,e4=(t,e)=>n=>!!(typeof n=="string"&&Xre.test(n)&&n.startsWith(t)||e&&!Yre(n)&&Object.prototype.hasOwnProperty.call(n,e)),B$=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,a,l]=r.match(ZI);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},Qre=t=>yc(0,255,t),pS={...Tp,transform:t=>Math.round(Qre(t))},lh={test:e4("rgb","red"),parse:B$("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+pS.transform(t)+", "+pS.transform(e)+", "+pS.transform(n)+", "+y0(U0.transform(r))+")"};function Jre(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const nN={test:e4("#"),parse:Jre,transform:lh.transform},Py=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Eu=Py("deg"),cl=Py("%"),pt=Py("px"),Zre=Py("vh"),eie=Py("vw"),_D={...cl,parse:t=>cl.parse(t)/100,transform:t=>cl.transform(t*100)},dm={test:e4("hsl","hue"),parse:B$("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+cl.transform(y0(e))+", "+cl.transform(y0(n))+", "+y0(U0.transform(r))+")"},qr={test:t=>lh.test(t)||nN.test(t)||dm.test(t),parse:t=>lh.test(t)?lh.parse(t):dm.test(t)?dm.parse(t):nN.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?lh.transform(t):dm.transform(t),getAnimatableNone:t=>{const e=qr.parse(t);return e.alpha=0,qr.transform(e)}},tie=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function nie(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(ZI))==null?void 0:e.length)||0)+(((n=t.match(tie))==null?void 0:n.length)||0)>0}const z$="number",$$="color",rie="var",iie="var(",ED="${}",sie=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function B0(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const l=e.replace(sie,u=>(qr.test(u)?(r.color.push(s),i.push($$),n.push(qr.parse(u))):u.startsWith(iie)?(r.var.push(s),i.push(rie),n.push(u)):(r.number.push(s),i.push(z$),n.push(parseFloat(u))),++s,ED)).split(ED);return{values:n,split:l,indexes:r,types:i}}function F$(t){return B0(t).values}function H$(t){const{split:e,types:n}=B0(t),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const l=n[a];l===z$?s+=y0(i[a]):l===$$?s+=qr.transform(i[a]):s+=i[a]}return s}}const aie=t=>typeof t=="number"?0:qr.test(t)?qr.getAnimatableNone(t):t;function oie(t){const e=F$(t);return H$(t)(e.map(aie))}const Wu={test:nie,parse:F$,createTransformer:H$,getAnimatableNone:oie};function gS(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function lie({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,a=0;if(!e)i=s=a=n;else{const l=n<.5?n*(1+e):n+e-n*e,u=2*n-l;i=gS(u,l,t+1/3),s=gS(u,l,t),a=gS(u,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function ox(t,e){return n=>n>0?e:t}const lr=(t,e,n)=>t+(e-t)*n,yS=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},cie=[nN,lh,dm],uie=t=>cie.find(e=>e.test(t));function TD(t){const e=uie(t);if(!e)return!1;let n=e.parse(t);return e===dm&&(n=lie(n)),n}const SD=(t,e)=>{const n=TD(t),r=TD(e);if(!n||!r)return ox(t,e);const i={...n};return s=>(i.red=yS(n.red,r.red,s),i.green=yS(n.green,r.green,s),i.blue=yS(n.blue,r.blue,s),i.alpha=lr(n.alpha,r.alpha,s),lh.transform(i))},rN=new Set(["none","hidden"]);function die(t,e){return rN.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function hie(t,e){return n=>lr(t,e,n)}function t4(t){return typeof t=="number"?hie:typeof t=="string"?JI(t)?ox:qr.test(t)?SD:pie:Array.isArray(t)?q$:typeof t=="object"?qr.test(t)?SD:fie:ox}function q$(t,e){const n=[...t],r=n.length,i=t.map((s,a)=>t4(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)n[a]=i[a](s);return n}}function fie(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=t4(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function mie(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],a=t.indexes[s][r[s]],l=t.values[a]??0;n[i]=l,r[s]++}return n}const pie=(t,e)=>{const n=Wu.createTransformer(e),r=B0(t),i=B0(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?rN.has(t)&&!i.values.length||rN.has(e)&&!r.values.length?die(t,e):Oy(q$(mie(r,i),i.values),n):ox(t,e)};function G$(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?lr(t,e,n):t4(t)(t,e)}const gie=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>er.update(e,n),stop:()=>Gu(e),now:()=>Mi.isProcessing?Mi.timestamp:Vs.now()}},W$=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},lx=2e4;function n4(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<lx;)e+=n,r=t.next(e);return e>=lx?1/0:e}function yie(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(n4(r),lx);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:Ha(i)}}const vie=5;function K$(t,e,n){const r=Math.max(e-vie,0);return C$(n-t(r),e-r)}const _r={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},vS=.001;function bie({duration:t=_r.duration,bounce:e=_r.bounce,velocity:n=_r.velocity,mass:r=_r.mass}){let i,s,a=1-e;a=yc(_r.minDamping,_r.maxDamping,a),t=yc(_r.minDuration,_r.maxDuration,Ha(t)),a<1?(i=d=>{const h=d*a,p=h*t,y=h-n,v=iN(d,a),w=Math.exp(-p);return vS-y/v*w},s=d=>{const p=d*a*t,y=p*n+n,v=Math.pow(a,2)*Math.pow(d,2)*t,w=Math.exp(-p),_=iN(Math.pow(d,2),a);return(-i(d)+vS>0?-1:1)*((y-v)*w)/_}):(i=d=>{const h=Math.exp(-d*t),p=(d-n)*t+1;return-vS+h*p},s=d=>{const h=Math.exp(-d*t),p=(n-d)*(t*t);return h*p});const l=5/t,u=xie(i,s,l);if(t=ll(t),isNaN(u))return{stiffness:_r.stiffness,damping:_r.damping,duration:t};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:a*2*Math.sqrt(r*d),duration:t}}}const wie=12;function xie(t,e,n){let r=n;for(let i=1;i<wie;i++)r=r-t(r)/e(r);return r}function iN(t,e){return t*Math.sqrt(1-e*e)}const _ie=["duration","bounce"],Eie=["stiffness","damping","mass"];function CD(t,e){return e.some(n=>t[n]!==void 0)}function Tie(t){let e={velocity:_r.velocity,stiffness:_r.stiffness,damping:_r.damping,mass:_r.mass,isResolvedFromDuration:!1,...t};if(!CD(t,Eie)&&CD(t,_ie))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*yc(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:_r.mass,stiffness:i,damping:s}}else{const n=bie(t);e={...e,...n,mass:_r.mass},e.isResolvedFromDuration=!0}return e}function cx(t=_r.visualDuration,e=_r.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],l={done:!1,value:s},{stiffness:u,damping:d,mass:h,duration:p,velocity:y,isResolvedFromDuration:v}=Tie({...n,velocity:-Ha(n.velocity||0)}),w=y||0,_=d/(2*Math.sqrt(u*h)),E=a-s,C=Ha(Math.sqrt(u/h)),N=Math.abs(E)<5;r||(r=N?_r.restSpeed.granular:_r.restSpeed.default),i||(i=N?_r.restDelta.granular:_r.restDelta.default);let O;if(_<1){const D=iN(C,_);O=P=>{const A=Math.exp(-_*C*P);return a-A*((w+_*C*E)/D*Math.sin(D*P)+E*Math.cos(D*P))}}else if(_===1)O=D=>a-Math.exp(-C*D)*(E+(w+C*E)*D);else{const D=C*Math.sqrt(_*_-1);O=P=>{const A=Math.exp(-_*C*P),k=Math.min(D*P,300);return a-A*((w+_*C*E)*Math.sinh(k)+D*E*Math.cosh(k))/D}}const R={calculatedDuration:v&&p||null,next:D=>{const P=O(D);if(v)l.done=D>=p;else{let A=D===0?w:0;_<1&&(A=D===0?ll(w):K$(O,D,P));const k=Math.abs(A)<=r,M=Math.abs(a-P)<=i;l.done=k&&M}return l.value=l.done?a:P,l},toString:()=>{const D=Math.min(n4(R),lx),P=W$(A=>R.next(D*A).value,D,30);return D+"ms "+P},toTransition:()=>{}};return R}cx.applyToOptions=t=>{const e=yie(t,100,cx);return t.ease=e.ease,t.duration=ll(e.duration),t.type="keyframes",t};function sN({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:l,max:u,restDelta:d=.5,restSpeed:h}){const p=t[0],y={done:!1,value:p},v=k=>l!==void 0&&k<l||u!==void 0&&k>u,w=k=>l===void 0?u:u===void 0||Math.abs(l-k)<Math.abs(u-k)?l:u;let _=n*e;const E=p+_,C=a===void 0?E:a(E);C!==E&&(_=C-p);const N=k=>-_*Math.exp(-k/r),O=k=>C+N(k),R=k=>{const M=N(k),V=O(k);y.done=Math.abs(M)<=d,y.value=y.done?C:V};let D,P;const A=k=>{v(y.value)&&(D=k,P=cx({keyframes:[y.value,w(y.value)],velocity:K$(O,k,y.value),damping:i,stiffness:s,restDelta:d,restSpeed:h}))};return A(0),{calculatedDuration:null,next:k=>{let M=!1;return!P&&D===void 0&&(M=!0,R(k),A(k)),D!==void 0&&k>=D?P.next(k-D):(!M&&R(k),y)}}}function Sie(t,e,n){const r=[],i=n||vc.mix||G$,s=t.length-1;for(let a=0;a<s;a++){let l=i(t[a],t[a+1]);if(e){const u=Array.isArray(e)?e[a]||Ya:e;l=Oy(u,l)}r.push(l)}return r}function Cie(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(WI(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=Sie(e,r,i),u=l.length,d=h=>{if(a&&h<t[0])return e[0];let p=0;if(u>1)for(;p<t.length-2&&!(h<t[p+1]);p++);const y=V0(t[p],t[p+1],h);return l[p](y)};return n?h=>d(yc(t[0],t[s-1],h)):d}function Aie(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=V0(0,e,r);t.push(lr(n,1,i))}}function Nie(t){const e=[0];return Aie(e,t.length-1),e}function kie(t,e){return t.map(n=>n*e)}function Iie(t,e){return t.map(()=>e||D$).splice(0,t.length-1)}function v0({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=zre(r)?r.map(xD):xD(r),s={done:!1,value:e[0]},a=kie(n&&n.length===e.length?n:Nie(e),t),l=Cie(a,e,{ease:Array.isArray(i)?i:Iie(e,i)});return{calculatedDuration:t,next:u=>(s.value=l(u),s.done=u>=t,s)}}const Oie=t=>t!==null;function r4(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(Oie),l=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!l||r===void 0?s[l]:r}const jie={decay:sN,inertia:sN,tween:v0,keyframes:v0,spring:cx};function Y$(t){typeof t.type=="string"&&(t.type=jie[t.type])}class i4{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Pie=t=>t/100;class s4 extends i4{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Vs.now()&&this.tick(Vs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Y$(e);const{type:n=v0,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=e;let{keyframes:l}=e;const u=n||v0;u!==v0&&typeof l[0]!="number"&&(this.mixKeyframes=Oy(Pie,G$(l[0],l[1])),l=[0,100]);const d=u({...e,keyframes:l});s==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...l].reverse(),velocity:-a})),d.calculatedDuration===null&&(d.calculatedDuration=n4(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:l,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:p,repeatType:y,repeatDelay:v,type:w,onUpdate:_,finalKeyframe:E}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const C=this.currentTime-d*(this.playbackSpeed>=0?1:-1),N=this.playbackSpeed>=0?C<0:C>i;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let O=this.currentTime,R=r;if(p){const k=Math.min(this.currentTime,i)/l;let M=Math.floor(k),V=k%1;!V&&k>=1&&(V=1),V===1&&M--,M=Math.min(M,p+1),!!(M%2)&&(y==="reverse"?(V=1-V,v&&(V-=v/l)):y==="mirror"&&(R=a)),O=yc(0,1,V)*l}const D=N?{done:!1,value:h[0]}:R.next(O);s&&(D.value=s(D.value));let{done:P}=D;!N&&u!==null&&(P=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return A&&w!==sN&&(D.value=r4(h,this.options,E,this.speed)),_&&_(D.value),A&&this.finish(),D}then(e,n){return this.finished.then(e,n)}get duration(){return Ha(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ha(e)}get time(){return Ha(this.currentTime)}set time(e){var n;e=ll(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Vs.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ha(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=gie,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Vs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function Rie(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ch=t=>t*180/Math.PI,aN=t=>{const e=ch(Math.atan2(t[1],t[0]));return oN(e)},Die={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:aN,rotateZ:aN,skewX:t=>ch(Math.atan(t[1])),skewY:t=>ch(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},oN=t=>(t=t%360,t<0&&(t+=360),t),AD=aN,ND=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),kD=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Mie={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:ND,scaleY:kD,scale:t=>(ND(t)+kD(t))/2,rotateX:t=>oN(ch(Math.atan2(t[6],t[5]))),rotateY:t=>oN(ch(Math.atan2(-t[2],t[0]))),rotateZ:AD,rotate:AD,skewX:t=>ch(Math.atan(t[4])),skewY:t=>ch(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function lN(t){return t.includes("scale")?1:0}function cN(t,e){if(!t||t==="none")return lN(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Mie,i=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Die,i=l}if(!i)return lN(e);const s=r[e],a=i[1].split(",").map(Vie);return typeof s=="function"?s(a):a[s]}const Lie=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return cN(n,e)};function Vie(t){return parseFloat(t.trim())}const Sp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Cp=new Set(Sp),ID=t=>t===Tp||t===pt,Uie=new Set(["x","y","z"]),Bie=Sp.filter(t=>!Uie.has(t));function zie(t){const e=[];return Bie.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const wh={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>cN(e,"x"),y:(t,{transform:e})=>cN(e,"y")};wh.translateX=wh.x;wh.translateY=wh.y;const xh=new Set;let uN=!1,dN=!1,hN=!1;function X$(){if(dN){const t=Array.from(xh).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=zie(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,a])=>{var l;(l=r.getValue(s))==null||l.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}dN=!1,uN=!1,xh.forEach(t=>t.complete(hN)),xh.clear()}function Q$(){xh.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(dN=!0)})}function $ie(){hN=!0,Q$(),X$(),hN=!1}class a4{constructor(e,n,r,i,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(xh.add(this),uN||(uN=!0,er.read(Q$),er.resolveKeyframes(X$))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),a=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&s===void 0&&i.set(e[0])}Rie(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),xh.delete(this)}cancel(){this.state==="scheduled"&&(xh.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Fie=t=>t.startsWith("--");function Hie(t,e,n){Fie(e)?t.style.setProperty(e,n):t.style[e]=n}const qie=KI(()=>window.ScrollTimeline!==void 0),Gie={};function Wie(t,e){const n=KI(t);return()=>Gie[e]??n()}const J$=Wie(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),l0=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,OD={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:l0([0,.65,.55,1]),circOut:l0([.55,0,1,.45]),backIn:l0([.31,.01,.66,-.59]),backOut:l0([.33,1.53,.69,.99])};function Z$(t,e){if(t)return typeof t=="function"?J$()?W$(t,e):"ease-out":M$(t)?l0(t):Array.isArray(t)?t.map(n=>Z$(n,e)||OD.easeOut):OD[t]}function Kie(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:l="easeOut",times:u}={},d=void 0){const h={[e]:n};u&&(h.offset=u);const p=Z$(l,i);Array.isArray(p)&&(h.easing=p);const y={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return d&&(y.pseudoElement=d),t.animate(h,y)}function eF(t){return typeof t=="function"&&"applyToOptions"in t}function Yie({type:t,...e}){return eF(t)&&J$()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Xie extends i4{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:l,onComplete:u}=e;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=e,WI(typeof e.type!="string");const d=Yie(e);this.animation=Kie(n,r,i,d,s),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=r4(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):Hie(n,r,h),this.animation.cancel()}u==null||u(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Ha(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ha(e)}get time(){return Ha(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ll(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&qie()?(this.animation.timeline=e,Ya):n(this)}}const tF={anticipate:j$,backInOut:O$,circInOut:R$};function Qie(t){return t in tF}function Jie(t){typeof t.ease=="string"&&Qie(t.ease)&&(t.ease=tF[t.ease])}const jD=10;class Zie extends Xie{constructor(e){Jie(e),Y$(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...a}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new s4({...a,autoplay:!1}),u=ll(this.finishedTime??this.time);n.setWithVelocity(l.sample(u-jD).value,l.sample(u).value,jD),l.stop()}}const PD=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Wu.test(t)||t==="0")&&!t.startsWith("url("));function ese(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function tse(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],a=PD(i,e),l=PD(s,e);return!a||!l?!1:ese(t)||(n==="spring"||eF(n))&&r}function fN(t){t.duration=0,t.type="keyframes"}const nse=new Set(["opacity","clipPath","filter","transform"]),rse=KI(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function ise(t){var h;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:a}=t;if(!(((h=e==null?void 0:e.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=e.owner.getProps();return rse()&&n&&nse.has(n)&&(n!=="transform"||!d)&&!u&&!r&&i!=="mirror"&&s!==0&&a!=="inertia"}const sse=40;class ase extends i4{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",keyframes:l,name:u,motionValue:d,element:h,...p}){var w;super(),this.stop=()=>{var _,E;this._animation&&(this._animation.stop(),(_=this.stopTimeline)==null||_.call(this)),(E=this.keyframeResolver)==null||E.cancel()},this.createdAt=Vs.now();const y={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:a,name:u,motionValue:d,element:h,...p},v=(h==null?void 0:h.KeyframeResolver)||a4;this.keyframeResolver=new v(l,(_,E,C)=>this.onKeyframesResolved(_,E,y,!C),u,d,h),(w=this.keyframeResolver)==null||w.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:a,velocity:l,delay:u,isHandoff:d,onUpdate:h}=r;this.resolvedAt=Vs.now(),tse(e,s,a,l)||((vc.instantAnimations||!u)&&(h==null||h(r4(e,r,n))),e[0]=e[e.length-1],fN(r),r.repeat=0);const y={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>sse?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},v=!d&&ise(y)?new Zie({...y,element:y.motionValue.owner.current}):new s4(y);v.finished.then(()=>this.notifyFinished()).catch(Ya),this.pendingTimeline&&(this.stopTimeline=v.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=v}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),$ie()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const ose=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function lse(t){const e=ose.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function nF(t,e,n=1){const[r,i]=lse(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return E$(a)?parseFloat(a):a}return JI(i)?nF(i,e,n+1):i}function o4(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const rF=new Set(["width","height","top","left","right","bottom",...Sp]),cse={test:t=>t==="auto",parse:t=>t},iF=t=>e=>e.test(t),sF=[Tp,pt,cl,Eu,eie,Zre,cse],RD=t=>sF.find(iF(t));function use(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||S$(t):!0}const dse=new Set(["brightness","contrast","saturate","opacity"]);function hse(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(ZI)||[];if(!r)return t;const i=n.replace(r,"");let s=dse.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const fse=/\b([a-z-]*)\(.*?\)/gu,mN={...Wu,getAnimatableNone:t=>{const e=t.match(fse);return e?e.map(hse).join(" "):t}},DD={...Tp,transform:Math.round},mse={rotate:Eu,rotateX:Eu,rotateY:Eu,rotateZ:Eu,scale:Wb,scaleX:Wb,scaleY:Wb,scaleZ:Wb,skew:Eu,skewX:Eu,skewY:Eu,distance:pt,translateX:pt,translateY:pt,translateZ:pt,x:pt,y:pt,z:pt,perspective:pt,transformPerspective:pt,opacity:U0,originX:_D,originY:_D,originZ:pt},l4={borderWidth:pt,borderTopWidth:pt,borderRightWidth:pt,borderBottomWidth:pt,borderLeftWidth:pt,borderRadius:pt,radius:pt,borderTopLeftRadius:pt,borderTopRightRadius:pt,borderBottomRightRadius:pt,borderBottomLeftRadius:pt,width:pt,maxWidth:pt,height:pt,maxHeight:pt,top:pt,right:pt,bottom:pt,left:pt,padding:pt,paddingTop:pt,paddingRight:pt,paddingBottom:pt,paddingLeft:pt,margin:pt,marginTop:pt,marginRight:pt,marginBottom:pt,marginLeft:pt,backgroundPositionX:pt,backgroundPositionY:pt,...mse,zIndex:DD,fillOpacity:U0,strokeOpacity:U0,numOctaves:DD},pse={...l4,color:qr,backgroundColor:qr,outlineColor:qr,fill:qr,stroke:qr,borderColor:qr,borderTopColor:qr,borderRightColor:qr,borderBottomColor:qr,borderLeftColor:qr,filter:mN,WebkitFilter:mN},aF=t=>pse[t];function oF(t,e){let n=aF(t);return n!==mN&&(n=Wu),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const gse=new Set(["auto","none","0"]);function yse(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!gse.has(s)&&B0(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=oF(n,i)}class vse extends a4{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let d=e[u];if(typeof d=="string"&&(d=d.trim(),JI(d))){const h=nF(d,n.current);h!==void 0&&(e[u]=h),u===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!rF.has(r)||e.length!==2)return;const[i,s]=e,a=RD(i),l=RD(s);if(a!==l)if(ID(a)&&ID(l))for(let u=0;u<e.length;u++){const d=e[u];typeof d=="string"&&(e[u]=parseFloat(d))}else wh[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||use(e[i]))&&r.push(i);r.length&&yse(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=wh[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var l;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,a=r[s];r[s]=wh[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([u,d])=>{e.getValue(u).set(d)}),this.resolveNoneKeyframes()}}function bse(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const lF=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function cF(t){return T$(t)&&"offsetHeight"in t}const MD=30,wse=t=>!isNaN(parseFloat(t));class xse{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=Vs.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Vs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=wse(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new YI);const r=this.events[e].add(n);return e==="change"?()=>{r(),er.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Vs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>MD)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,MD);return C$(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Fm(t,e){return new xse(t,e)}const{schedule:c4}=L$(queueMicrotask,!1),po={x:!1,y:!1};function uF(){return po.x||po.y}function _se(t){return t==="x"||t==="y"?po[t]?null:(po[t]=!0,()=>{po[t]=!1}):po.x||po.y?null:(po.x=po.y=!0,()=>{po.x=po.y=!1})}function dF(t,e){const n=bse(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function LD(t){return!(t.pointerType==="touch"||uF())}function Ese(t,e,n={}){const[r,i,s]=dF(t,n),a=l=>{if(!LD(l))return;const{target:u}=l,d=e(u,l);if(typeof d!="function"||!u)return;const h=p=>{LD(p)&&(d(p),u.removeEventListener("pointerleave",h))};u.addEventListener("pointerleave",h,i)};return r.forEach(l=>{l.addEventListener("pointerenter",a,i)}),s}const hF=(t,e)=>e?t===e?!0:hF(t,e.parentElement):!1,u4=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Tse=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Sse(t){return Tse.has(t.tagName)||t.tabIndex!==-1}const zw=new WeakSet;function VD(t){return e=>{e.key==="Enter"&&t(e)}}function bS(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Cse=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=VD(()=>{if(zw.has(n))return;bS(n,"down");const i=VD(()=>{bS(n,"up")}),s=()=>bS(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function UD(t){return u4(t)&&!uF()}function Ase(t,e,n={}){const[r,i,s]=dF(t,n),a=l=>{const u=l.currentTarget;if(!UD(l))return;zw.add(u);const d=e(u,l),h=(v,w)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",y),zw.has(u)&&zw.delete(u),UD(v)&&typeof d=="function"&&d(v,{success:w})},p=v=>{h(v,u===window||u===document||n.useGlobalTarget||hF(u,v.target))},y=v=>{h(v,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",y,i)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",a,i),cF(l)&&(l.addEventListener("focus",d=>Cse(d,i)),!Sse(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function fF(t){return T$(t)&&"ownerSVGElement"in t}function Nse(t){return fF(t)&&t.tagName==="svg"}const ns=t=>!!(t&&t.getVelocity),kse=[...sF,qr,Wu],Ise=t=>kse.find(iF(t)),d4=S.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function BD(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Ose(...t){return e=>{let n=!1;const r=t.map(i=>{const s=BD(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():BD(t[i],null)}}}}function jse(...t){return S.useCallback(Ose(...t),t)}class Pse extends S.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=cF(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Rse({children:t,isPresent:e,anchorX:n,root:r}){const i=S.useId(),s=S.useRef(null),a=S.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=S.useContext(d4),u=jse(s,t==null?void 0:t.ref);return S.useInsertionEffect(()=>{const{width:d,height:h,top:p,left:y,right:v}=a.current;if(e||!s.current||!d||!h)return;const w=n==="left"?`left: ${y}`:`right: ${v}`;s.current.dataset.motionPopId=i;const _=document.createElement("style");l&&(_.nonce=l);const E=r??document.head;return E.appendChild(_),_.sheet&&_.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${w}px !important;
            top: ${p}px !important;
          }
        `),()=>{E.contains(_)&&E.removeChild(_)}},[e]),m.jsx(Pse,{isPresent:e,childRef:s,sizeRef:a,children:S.cloneElement(t,{ref:u})})}const Dse=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a,anchorX:l,root:u})=>{const d=FI(Mse),h=S.useId();let p=!0,y=S.useMemo(()=>(p=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:v=>{d.set(v,!0);for(const w of d.values())if(!w)return;r&&r()},register:v=>(d.set(v,!1),()=>d.delete(v))}),[n,d,r]);return s&&p&&(y={...y}),S.useMemo(()=>{d.forEach((v,w)=>d.set(w,!1))},[n]),S.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),a==="popLayout"&&(t=m.jsx(Rse,{isPresent:n,anchorX:l,root:u,children:t})),m.jsx(f_.Provider,{value:y,children:t})};function Mse(){return new Map}function mF(t=!0){const e=S.useContext(f_);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=S.useId();S.useEffect(()=>{if(t)return i(s)},[t]);const a=S.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,a]:[!0]}const Kb=t=>t.key||"";function zD(t){const e=[];return S.Children.forEach(t,n=>{S.isValidElement(n)&&e.push(n)}),e}const pF=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1,anchorX:l="left",root:u})=>{const[d,h]=mF(a),p=S.useMemo(()=>zD(t),[t]),y=a&&!d?[]:p.map(Kb),v=S.useRef(!0),w=S.useRef(p),_=FI(()=>new Map),[E,C]=S.useState(p),[N,O]=S.useState(p);_$(()=>{v.current=!1,w.current=p;for(let P=0;P<N.length;P++){const A=Kb(N[P]);y.includes(A)?_.delete(A):_.get(A)!==!0&&_.set(A,!1)}},[N,y.length,y.join("-")]);const R=[];if(p!==E){let P=[...p];for(let A=0;A<N.length;A++){const k=N[A],M=Kb(k);y.includes(M)||(P.splice(A,0,k),R.push(k))}return s==="wait"&&R.length&&(P=R),O(zD(P)),C(p),null}const{forceRender:D}=S.useContext($I);return m.jsx(m.Fragment,{children:N.map(P=>{const A=Kb(P),k=a&&!d?!1:p===N||y.includes(A),M=()=>{if(_.has(A))_.set(A,!0);else return;let V=!0;_.forEach(U=>{U||(V=!1)}),V&&(D==null||D(),O(w.current),a&&(h==null||h()),r&&r())};return m.jsx(Dse,{isPresent:k,initial:!v.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:u,onExitComplete:k?void 0:M,anchorX:l,children:P},A)})})},gF=S.createContext({strict:!1}),$D={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Hm={};for(const t in $D)Hm[t]={isEnabled:e=>$D[t].some(n=>!!e[n])};function Lse(t){for(const e in t)Hm[e]={...Hm[e],...t[e]}}const Vse=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ux(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Vse.has(t)}let yF=t=>!ux(t);function Use(t){typeof t=="function"&&(yF=e=>e.startsWith("on")?!ux(e):t(e))}try{Use(require("@emotion/is-prop-valid").default)}catch{}function Bse(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(yF(i)||n===!0&&ux(i)||!e&&!ux(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const m_=S.createContext({});function p_(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function z0(t){return typeof t=="string"||Array.isArray(t)}const h4=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],f4=["initial",...h4];function g_(t){return p_(t.animate)||f4.some(e=>z0(t[e]))}function vF(t){return!!(g_(t)||t.variants)}function zse(t,e){if(g_(t)){const{initial:n,animate:r}=t;return{initial:n===!1||z0(n)?n:void 0,animate:z0(r)?r:void 0}}return t.inherit!==!1?e:{}}function $se(t){const{initial:e,animate:n}=zse(t,S.useContext(m_));return S.useMemo(()=>({initial:e,animate:n}),[FD(e),FD(n)])}function FD(t){return Array.isArray(t)?t.join(" "):t}function HD(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Kg={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(pt.test(t))t=parseFloat(t);else return t;const n=HD(t,e.target.x),r=HD(t,e.target.y);return`${n}% ${r}%`}},Fse={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Wu.parse(t);if(i.length>5)return r;const s=Wu.createTransformer(t),a=typeof i[0]!="number"?1:0,l=n.x.scale*e.x,u=n.y.scale*e.y;i[0+a]/=l,i[1+a]/=u;const d=lr(l,u,.5);return typeof i[2+a]=="number"&&(i[2+a]/=d),typeof i[3+a]=="number"&&(i[3+a]/=d),s(i)}},pN={borderRadius:{...Kg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Kg,borderTopRightRadius:Kg,borderBottomLeftRadius:Kg,borderBottomRightRadius:Kg,boxShadow:Fse};function bF(t,{layout:e,layoutId:n}){return Cp.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!pN[t]||t==="opacity")}const Hse={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},qse=Sp.length;function Gse(t,e,n){let r="",i=!0;for(let s=0;s<qse;s++){const a=Sp[s],l=t[a];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(a.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||n){const d=lF(l,l4[a]);if(!u){i=!1;const h=Hse[a]||a;r+=`${h}(${d}) `}n&&(e[a]=d)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function m4(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let a=!1,l=!1;for(const u in e){const d=e[u];if(Cp.has(u)){a=!0;continue}else if(U$(u)){i[u]=d;continue}else{const h=lF(d,l4[u]);u.startsWith("origin")?(l=!0,s[u]=h):r[u]=h}}if(e.transform||(a||n?r.transform=Gse(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:u="50%",originY:d="50%",originZ:h=0}=s;r.transformOrigin=`${u} ${d} ${h}`}}const p4=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function wF(t,e,n){for(const r in e)!ns(e[r])&&!bF(r,n)&&(t[r]=e[r])}function Wse({transformTemplate:t},e){return S.useMemo(()=>{const n=p4();return m4(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Kse(t,e){const n=t.style||{},r={};return wF(r,n,t),Object.assign(r,Wse(t,e)),r}function Yse(t,e){const n={},r=Kse(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const Xse={offset:"stroke-dashoffset",array:"stroke-dasharray"},Qse={offset:"strokeDashoffset",array:"strokeDasharray"};function Jse(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?Xse:Qse;t[s.offset]=pt.transform(-r);const a=pt.transform(e),l=pt.transform(n);t[s.array]=`${a} ${l}`}function xF(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:a=0,...l},u,d,h){if(m4(t,l,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:y}=t;p.transform&&(y.transform=p.transform,delete p.transform),(y.transform||p.transformOrigin)&&(y.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),y.transform&&(y.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),i!==void 0&&Jse(p,i,s,a,!1)}const _F=()=>({...p4(),attrs:{}}),EF=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Zse(t,e,n,r){const i=S.useMemo(()=>{const s=_F();return xF(s,e,EF(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};wF(s,t.style,t),i.style={...s,...i.style}}return i}const eae=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function g4(t){return typeof t!="string"||t.includes("-")?!1:!!(eae.indexOf(t)>-1||/[A-Z]/u.test(t))}function tae(t,e,n,{latestValues:r},i,s=!1){const l=(g4(t)?Zse:Yse)(e,r,i,t),u=Bse(e,typeof t=="string",s),d=t!==S.Fragment?{...u,...l,ref:n}:{},{children:h}=e,p=S.useMemo(()=>ns(h)?h.get():h,[h]);return S.createElement(t,{...d,children:p})}function qD(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function y4(t,e,n,r){if(typeof e=="function"){const[i,s]=qD(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=qD(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function $w(t){return ns(t)?t.get():t}function nae({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:rae(n,r,i,t),renderState:e()}}function rae(t,e,n,r){const i={},s=r(t,{});for(const y in s)i[y]=$w(s[y]);let{initial:a,animate:l}=t;const u=g_(t),d=vF(t);e&&d&&!u&&t.inherit!==!1&&(a===void 0&&(a=e.initial),l===void 0&&(l=e.animate));let h=n?n.initial===!1:!1;h=h||a===!1;const p=h?l:a;if(p&&typeof p!="boolean"&&!p_(p)){const y=Array.isArray(p)?p:[p];for(let v=0;v<y.length;v++){const w=y4(t,y[v]);if(w){const{transitionEnd:_,transition:E,...C}=w;for(const N in C){let O=C[N];if(Array.isArray(O)){const R=h?O.length-1:0;O=O[R]}O!==null&&(i[N]=O)}for(const N in _)i[N]=_[N]}}}return i}const TF=t=>(e,n)=>{const r=S.useContext(m_),i=S.useContext(f_),s=()=>nae(t,e,r,i);return n?s():FI(s)};function v4(t,e,n){var s;const{style:r}=t,i={};for(const a in r)(ns(r[a])||e.style&&ns(e.style[a])||bF(a,t)||((s=n==null?void 0:n.getValue(a))==null?void 0:s.liveStyle)!==void 0)&&(i[a]=r[a]);return i}const iae=TF({scrapeMotionValuesFromProps:v4,createRenderState:p4});function SF(t,e,n){const r=v4(t,e,n);for(const i in t)if(ns(t[i])||ns(e[i])){const s=Sp.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const sae=TF({scrapeMotionValuesFromProps:SF,createRenderState:_F}),aae=Symbol.for("motionComponentSymbol");function hm(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function oae(t,e,n){return S.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):hm(n)&&(n.current=r))},[e])}const b4=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),lae="framerAppearId",CF="data-"+b4(lae),AF=S.createContext({});function cae(t,e,n,r,i){var _,E;const{visualElement:s}=S.useContext(m_),a=S.useContext(gF),l=S.useContext(f_),u=S.useContext(d4).reducedMotion,d=S.useRef(null);r=r||a.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:s,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,p=S.useContext(AF);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&uae(d.current,n,i,p);const y=S.useRef(!1);S.useInsertionEffect(()=>{h&&y.current&&h.update(n,l)});const v=n[CF],w=S.useRef(!!v&&!((_=window.MotionHandoffIsComplete)!=null&&_.call(window,v))&&((E=window.MotionHasOptimisedAnimation)==null?void 0:E.call(window,v)));return _$(()=>{h&&(y.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),w.current&&h.animationState&&h.animationState.animateChanges())}),S.useEffect(()=>{h&&(!w.current&&h.animationState&&h.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var C;(C=window.MotionHandoffMarkAsComplete)==null||C.call(window,v)}),w.current=!1),h.enteringChildren=void 0)}),h}function uae(t,e,n,r){const{layoutId:i,layout:s,drag:a,dragConstraints:l,layoutScroll:u,layoutRoot:d,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:NF(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||l&&hm(l),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:u,layoutRoot:d})}function NF(t){if(t)return t.options.allowProjection!==!1?t.projection:NF(t.parent)}function wS(t,{forwardMotionProps:e=!1}={},n,r){n&&Lse(n);const i=g4(t)?sae:iae;function s(l,u){let d;const h={...S.useContext(d4),...l,layoutId:dae(l)},{isStatic:p}=h,y=$se(l),v=i(l,p);if(!p&&HI){hae();const w=fae(h);d=w.MeasureLayout,y.visualElement=cae(t,v,h,r,w.ProjectionNode)}return m.jsxs(m_.Provider,{value:y,children:[d&&y.visualElement?m.jsx(d,{visualElement:y.visualElement,...h}):null,tae(t,l,oae(v,y.visualElement,u),v,p,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const a=S.forwardRef(s);return a[aae]=t,a}function dae({layoutId:t}){const e=S.useContext($I).id;return e&&t!==void 0?e+"-"+t:t}function hae(t,e){S.useContext(gF).strict}function fae(t){const{drag:e,layout:n}=Hm;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function mae(t,e){if(typeof Proxy>"u")return wS;const n=new Map,r=(s,a)=>wS(s,a,t,e),i=(s,a)=>r(s,a);return new Proxy(i,{get:(s,a)=>a==="create"?r:(n.has(a)||n.set(a,wS(a,void 0,t,e)),n.get(a))})}function kF({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function pae({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function gae(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function xS(t){return t===void 0||t===1}function gN({scale:t,scaleX:e,scaleY:n}){return!xS(t)||!xS(e)||!xS(n)}function Jd(t){return gN(t)||IF(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function IF(t){return GD(t.x)||GD(t.y)}function GD(t){return t&&t!=="0%"}function dx(t,e,n){const r=t-n,i=e*r;return n+i}function WD(t,e,n,r,i){return i!==void 0&&(t=dx(t,i,r)),dx(t,n,r)+e}function yN(t,e=0,n=1,r,i){t.min=WD(t.min,e,n,r,i),t.max=WD(t.max,e,n,r,i)}function OF(t,{x:e,y:n}){yN(t.x,e.translate,e.scale,e.originPoint),yN(t.y,n.translate,n.scale,n.originPoint)}const KD=.999999999999,YD=1.0000000000001;function yae(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,a;for(let l=0;l<i;l++){s=n[l],a=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&mm(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,OF(t,a)),r&&Jd(s.latestValues)&&mm(t,s.latestValues))}e.x<YD&&e.x>KD&&(e.x=1),e.y<YD&&e.y>KD&&(e.y=1)}function fm(t,e){t.min=t.min+e,t.max=t.max+e}function XD(t,e,n,r,i=.5){const s=lr(t.min,t.max,i);yN(t,e,n,s,r)}function mm(t,e){XD(t.x,e.x,e.scaleX,e.scale,e.originX),XD(t.y,e.y,e.scaleY,e.scale,e.originY)}function jF(t,e){return kF(gae(t.getBoundingClientRect(),e))}function vae(t,e,n){const r=jF(t,n),{scroll:i}=e;return i&&(fm(r.x,i.offset.x),fm(r.y,i.offset.y)),r}const QD=()=>({translate:0,scale:1,origin:0,originPoint:0}),pm=()=>({x:QD(),y:QD()}),JD=()=>({min:0,max:0}),ii=()=>({x:JD(),y:JD()}),vN={current:null},PF={current:!1};function bae(){if(PF.current=!0,!!HI)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>vN.current=t.matches;t.addEventListener("change",e),e()}else vN.current=!1}const wae=new WeakMap;function xae(t,e,n){for(const r in e){const i=e[r],s=n[r];if(ns(i))t.addValue(r,i);else if(ns(s))t.addValue(r,Fm(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(r);t.addValue(r,Fm(a!==void 0?a:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const ZD=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class _ae{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=a4,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Vs.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,er.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=a;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=g_(n),this.isVariantNode=vF(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const y in p){const v=p[y];u[y]!==void 0&&ns(v)&&v.set(u[y])}}mount(e){var n;this.current=e,wae.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),PF.current||bae(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:vN.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Gu(this.notifyUpdate),Gu(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Cp.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&er.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Hm){const n=Hm[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ii()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<ZD.length;r++){const i=ZD[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=xae(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Fm(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(E$(r)||S$(r))?r=parseFloat(r):!Ise(r)&&Wu.test(n)&&(r=oF(e,n)),this.setBaseTarget(e,ns(r)?r.get():r)),ns(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=y4(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!ns(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new YI),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){c4.render(this.render)}}class RF extends _ae{constructor(){super(...arguments),this.KeyframeResolver=vse}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ns(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function DF(t,{style:e,vars:n},r,i){const s=t.style;let a;for(a in e)s[a]=e[a];i==null||i.applyProjectionStyles(s,r);for(a in n)s.setProperty(a,n[a])}function Eae(t){return window.getComputedStyle(t)}class Tae extends RF{constructor(){super(...arguments),this.type="html",this.renderInstance=DF}readValueFromInstance(e,n){var r;if(Cp.has(n))return(r=this.projection)!=null&&r.isProjecting?lN(n):Lie(e,n);{const i=Eae(e),s=(U$(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return jF(e,n)}build(e,n,r){m4(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return v4(e,n,r)}}const MF=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Sae(t,e,n,r){DF(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(MF.has(i)?i:b4(i),e.attrs[i])}class Cae extends RF{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ii}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Cp.has(n)){const r=aF(n);return r&&r.default||0}return n=MF.has(n)?n:b4(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return SF(e,n,r)}build(e,n,r){xF(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){Sae(e,n,r,i)}mount(e){this.isSVGTag=EF(e.tagName),super.mount(e)}}const Aae=(t,e)=>g4(t)?new Cae(e):new Tae(e,{allowProjection:t!==S.Fragment});function Tm(t,e,n){const r=t.getProps();return y4(r,e,n!==void 0?n:r.custom,t)}const bN=t=>Array.isArray(t);function Nae(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Fm(n))}function kae(t){return bN(t)?t[t.length-1]||0:t}function Iae(t,e){const n=Tm(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const a in s){const l=kae(s[a]);Nae(t,a,l)}}function Oae(t){return!!(ns(t)&&t.add)}function wN(t,e){const n=t.getValue("willChange");if(Oae(n))return n.add(e);if(!n&&vc.WillChange){const r=new vc.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function LF(t){return t.props[CF]}const jae=t=>t!==null;function Pae(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(jae),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const Rae={type:"spring",stiffness:500,damping:25,restSpeed:10},Dae=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Mae={type:"keyframes",duration:.8},Lae={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Vae=(t,{keyframes:e})=>e.length>2?Mae:Cp.has(t)?t.startsWith("scale")?Dae(e[1]):Rae:Lae;function Uae({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:l,from:u,elapsed:d,...h}){return!!Object.keys(h).length}const w4=(t,e,n,r={},i,s)=>a=>{const l=o4(r,t)||{},u=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-ll(u);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:y=>{e.set(y),l.onUpdate&&l.onUpdate(y)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:s?void 0:i};Uae(l)||Object.assign(h,Vae(t,h)),h.duration&&(h.duration=ll(h.duration)),h.repeatDelay&&(h.repeatDelay=ll(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(fN(h),h.delay===0&&(p=!0)),(vc.instantAnimations||vc.skipAnimations)&&(p=!0,fN(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,p&&!s&&e.get()!==void 0){const y=Pae(h.keyframes,l);if(y!==void 0){er.update(()=>{h.onUpdate(y),h.onComplete()});return}}return l.isSync?new s4(h):new ase(h)};function Bae({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function VF(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(s=r);const u=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const h in l){const p=t.getValue(h,t.latestValues[h]??null),y=l[h];if(y===void 0||d&&Bae(d,h))continue;const v={delay:n,...o4(s||{},h)},w=p.get();if(w!==void 0&&!p.isAnimating&&!Array.isArray(y)&&y===w&&!v.velocity)continue;let _=!1;if(window.MotionHandoffAnimation){const C=LF(t);if(C){const N=window.MotionHandoffAnimation(C,h,er);N!==null&&(v.startTime=N,_=!0)}}wN(t,h),p.start(w4(h,p,y,t.shouldReduceMotion&&rF.has(h)?{type:!1}:v,t,_));const E=p.animation;E&&u.push(E)}return a&&Promise.all(u).then(()=>{er.update(()=>{a&&Iae(t,a)})}),u}function UF(t,e,n,r=0,i=1){const s=Array.from(t).sort((d,h)=>d.sortNodePosition(h)).indexOf(e),a=t.size,l=(a-1)*r;return typeof n=="function"?n(s,a):i===1?s*r:l-s*r}function xN(t,e,n={}){var u;const r=Tm(t,e,n.type==="exit"?(u=t.presenceContext)==null?void 0:u.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(VF(t,r,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:p,staggerDirection:y}=i;return zae(t,e,d,h,p,y,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[d,h]=l==="beforeChildren"?[s,a]:[a,s];return d().then(()=>h())}else return Promise.all([s(),a(n.delay)])}function zae(t,e,n=0,r=0,i=0,s=1,a){const l=[];for(const u of t.variantChildren)u.notify("AnimationStart",e),l.push(xN(u,e,{...a,delay:n+(typeof r=="function"?0:r)+UF(t.variantChildren,u,r,i,s)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(l)}function $ae(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>xN(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=xN(t,e,n);else{const i=typeof e=="function"?Tm(t,e,n.custom):e;r=Promise.all(VF(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function BF(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const Fae=f4.length;function zF(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?zF(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Fae;n++){const r=f4[n],i=t.props[r];(z0(i)||i===!1)&&(e[r]=i)}return e}const Hae=[...h4].reverse(),qae=h4.length;function Gae(t){return e=>Promise.all(e.map(({animation:n,options:r})=>$ae(t,n,r)))}function Wae(t){let e=Gae(t),n=eM(),r=!0;const i=u=>(d,h)=>{var y;const p=Tm(t,h,u==="exit"?(y=t.presenceContext)==null?void 0:y.custom:void 0);if(p){const{transition:v,transitionEnd:w,..._}=p;d={...d,..._,...w}}return d};function s(u){e=u(t)}function a(u){const{props:d}=t,h=zF(t.parent)||{},p=[],y=new Set;let v={},w=1/0;for(let E=0;E<qae;E++){const C=Hae[E],N=n[C],O=d[C]!==void 0?d[C]:h[C],R=z0(O),D=C===u?N.isActive:null;D===!1&&(w=E);let P=O===h[C]&&O!==d[C]&&R;if(P&&r&&t.manuallyAnimateOnMount&&(P=!1),N.protectedKeys={...v},!N.isActive&&D===null||!O&&!N.prevProp||p_(O)||typeof O=="boolean")continue;const A=Kae(N.prevProp,O);let k=A||C===u&&N.isActive&&!P&&R||E>w&&R,M=!1;const V=Array.isArray(O)?O:[O];let U=V.reduce(i(C),{});D===!1&&(U={});const{prevResolvedValues:z={}}=N,$={...z,...U},ne=W=>{k=!0,y.has(W)&&(M=!0,y.delete(W)),N.needsAnimating[W]=!0;const ee=t.getValue(W);ee&&(ee.liveStyle=!1)};for(const W in $){const ee=U[W],oe=z[W];if(v.hasOwnProperty(W))continue;let pe=!1;bN(ee)&&bN(oe)?pe=!BF(ee,oe):pe=ee!==oe,pe?ee!=null?ne(W):y.add(W):ee!==void 0&&y.has(W)?ne(W):N.protectedKeys[W]=!0}N.prevProp=O,N.prevResolvedValues=U,N.isActive&&(v={...v,...U}),r&&t.blockInitialAnimation&&(k=!1);const fe=P&&A;k&&(!fe||M)&&p.push(...V.map(W=>{const ee={type:C};if(typeof W=="string"&&r&&!fe&&t.manuallyAnimateOnMount&&t.parent){const{parent:oe}=t,pe=Tm(oe,W);if(oe.enteringChildren&&pe){const{delayChildren:B}=pe.transition||{};ee.delay=UF(oe.enteringChildren,t,B)}}return{animation:W,options:ee}}))}if(y.size){const E={};if(typeof d.initial!="boolean"){const C=Tm(t,Array.isArray(d.initial)?d.initial[0]:d.initial);C&&C.transition&&(E.transition=C.transition)}y.forEach(C=>{const N=t.getBaseTarget(C),O=t.getValue(C);O&&(O.liveStyle=!0),E[C]=N??null}),p.push({animation:E})}let _=!!p.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(_=!1),r=!1,_?e(p):Promise.resolve()}function l(u,d){var p;if(n[u].isActive===d)return Promise.resolve();(p=t.variantChildren)==null||p.forEach(y=>{var v;return(v=y.animationState)==null?void 0:v.setActive(u,d)}),n[u].isActive=d;const h=a(u);for(const y in n)n[y].protectedKeys={};return h}return{animateChanges:a,setActive:l,setAnimateFunction:s,getState:()=>n,reset:()=>{n=eM()}}}function Kae(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!BF(e,t):!1}function Kd(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function eM(){return{animate:Kd(!0),whileInView:Kd(),whileHover:Kd(),whileTap:Kd(),whileDrag:Kd(),whileFocus:Kd(),exit:Kd()}}class ld{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Yae extends ld{constructor(e){super(e),e.animationState||(e.animationState=Wae(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();p_(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Xae=0;class Qae extends ld{constructor(){super(...arguments),this.id=Xae++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Jae={animation:{Feature:Yae},exit:{Feature:Qae}};function $0(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Ry(t){return{point:{x:t.pageX,y:t.pageY}}}const Zae=t=>e=>u4(e)&&t(e,Ry(e));function b0(t,e,n,r){return $0(t,e,Zae(n),r)}const $F=1e-4,eoe=1-$F,toe=1+$F,FF=.01,noe=0-FF,roe=0+FF;function ys(t){return t.max-t.min}function ioe(t,e,n){return Math.abs(t-e)<=n}function tM(t,e,n,r=.5){t.origin=r,t.originPoint=lr(e.min,e.max,t.origin),t.scale=ys(n)/ys(e),t.translate=lr(n.min,n.max,t.origin)-t.originPoint,(t.scale>=eoe&&t.scale<=toe||isNaN(t.scale))&&(t.scale=1),(t.translate>=noe&&t.translate<=roe||isNaN(t.translate))&&(t.translate=0)}function w0(t,e,n,r){tM(t.x,e.x,n.x,r?r.originX:void 0),tM(t.y,e.y,n.y,r?r.originY:void 0)}function nM(t,e,n){t.min=n.min+e.min,t.max=t.min+ys(e)}function soe(t,e,n){nM(t.x,e.x,n.x),nM(t.y,e.y,n.y)}function rM(t,e,n){t.min=e.min-n.min,t.max=t.min+ys(e)}function hx(t,e,n){rM(t.x,e.x,n.x),rM(t.y,e.y,n.y)}function za(t){return[t("x"),t("y")]}const HF=({current:t})=>t?t.ownerDocument.defaultView:null,iM=(t,e)=>Math.abs(t-e);function aoe(t,e){const n=iM(t.x,e.x),r=iM(t.y,e.y);return Math.sqrt(n**2+r**2)}class qF{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=ES(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,w=aoe(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!w)return;const{point:_}=y,{timestamp:E}=Mi;this.history.push({..._,timestamp:E});const{onStart:C,onMove:N}=this.handlers;v||(C&&C(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,y)},this.handlePointerMove=(y,v)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=_S(v,this.transformPagePoint),er.update(this.updatePoint,!0)},this.handlePointerUp=(y,v)=>{this.end();const{onEnd:w,onSessionEnd:_,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=ES(y.type==="pointercancel"?this.lastMoveEventInfo:_S(v,this.transformPagePoint),this.history);this.startEvent&&w&&w(y,C),_&&_(y,C)},!u4(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=i||window;const l=Ry(e),u=_S(l,this.transformPagePoint),{point:d}=u,{timestamp:h}=Mi;this.history=[{...d,timestamp:h}];const{onSessionStart:p}=n;p&&p(e,ES(u,this.history)),this.removeListeners=Oy(b0(this.contextWindow,"pointermove",this.handlePointerMove),b0(this.contextWindow,"pointerup",this.handlePointerUp),b0(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Gu(this.updatePoint)}}function _S(t,e){return e?{point:e(t.point)}:t}function sM(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ES({point:t},e){return{point:t,delta:sM(t,GF(e)),offset:sM(t,ooe(e)),velocity:loe(e,.1)}}function ooe(t){return t[0]}function GF(t){return t[t.length-1]}function loe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=GF(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>ll(e)));)n--;if(!r)return{x:0,y:0};const s=Ha(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function coe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?lr(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?lr(n,t,r.max):Math.min(t,n)),t}function aM(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function uoe(t,{top:e,left:n,bottom:r,right:i}){return{x:aM(t.x,n,i),y:aM(t.y,e,r)}}function oM(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function doe(t,e){return{x:oM(t.x,e.x),y:oM(t.y,e.y)}}function hoe(t,e){let n=.5;const r=ys(t),i=ys(e);return i>r?n=V0(e.min,e.max-r,t.min):r>i&&(n=V0(t.min,t.max-i,e.min)),yc(0,1,n)}function foe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const _N=.35;function moe(t=_N){return t===!1?t=0:t===!0&&(t=_N),{x:lM(t,"left","right"),y:lM(t,"top","bottom")}}function lM(t,e,n){return{min:cM(t,e),max:cM(t,n)}}function cM(t,e){return typeof t=="number"?t:t[e]||0}const poe=new WeakMap;class goe{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ii(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=p=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ry(p).point)},a=(p,y)=>{const{drag:v,dragPropagation:w,onDragStart:_}=this.getProps();if(v&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=_se(v),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=y,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),za(C=>{let N=this.getAxisMotionValue(C).get()||0;if(cl.test(N)){const{projection:O}=this.visualElement;if(O&&O.layout){const R=O.layout.layoutBox[C];R&&(N=ys(R)*(parseFloat(N)/100))}}this.originPoint[C]=N}),_&&er.postRender(()=>_(p,y)),wN(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},l=(p,y)=>{this.latestPointerEvent=p,this.latestPanInfo=y;const{dragPropagation:v,dragDirectionLock:w,onDirectionLock:_,onDrag:E}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:C}=y;if(w&&this.currentDirection===null){this.currentDirection=yoe(C),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",y.point,C),this.updateAxis("y",y.point,C),this.visualElement.render(),E&&E(p,y)},u=(p,y)=>{this.latestPointerEvent=p,this.latestPanInfo=y,this.stop(p,y),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>za(p=>{var y;return this.getAnimationState(p)==="paused"&&((y=this.getAxisMotionValue(p).animation)==null?void 0:y.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new qF(e,{onSessionStart:s,onStart:a,onMove:l,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:HF(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&er.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Yb(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=coe(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&hm(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=uoe(r.layoutBox,e):this.constraints=!1,this.elastic=moe(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&za(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=foe(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!hm(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=vae(r,i.root,this.visualElement.getTransformPagePoint());let a=doe(i.layout.layoutBox,s);if(n){const l=n(pae(a));this.hasMutatedConstraints=!!l,l&&(a=kF(l))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},d=za(h=>{if(!Yb(h,n,this.currentDirection))return;let p=u&&u[h]||{};a&&(p={min:0,max:0});const y=i?200:1e6,v=i?40:1e7,w={type:"inertia",velocity:r?e[h]:0,bounceStiffness:y,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(h,w)});return Promise.all(d).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return wN(this.visualElement,e),r.start(w4(e,r,0,n,this.visualElement,!1))}stopAnimation(){za(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){za(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){za(n=>{const{drag:r}=this.getProps();if(!Yb(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:l}=i.layout.layoutBox[n];s.set(e[n]-lr(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!hm(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};za(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const u=l.get();i[a]=hoe({min:u,max:u},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),za(a=>{if(!Yb(a,e,null))return;const l=this.getAxisMotionValue(a),{min:u,max:d}=this.constraints[a];l.set(lr(u,d,i[a]))})}addListeners(){if(!this.visualElement.current)return;poe.set(this.visualElement,this);const e=this.visualElement.current,n=b0(e,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();hm(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),er.read(r);const a=$0(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(za(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=u[h].translate,p.set(p.get()+u[h].translate))}),this.visualElement.render())}));return()=>{a(),n(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=_N,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:l}}}function Yb(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function yoe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class voe extends ld{constructor(e){super(e),this.removeGroupControls=Ya,this.removeListeners=Ya,this.controls=new goe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ya}unmount(){this.removeGroupControls(),this.removeListeners()}}const uM=t=>(e,n)=>{t&&er.postRender(()=>t(e,n))};class boe extends ld{constructor(){super(...arguments),this.removePointerDownListener=Ya}onPointerDown(e){this.session=new qF(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:HF(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:uM(e),onStart:uM(n),onMove:r,onEnd:(s,a)=>{delete this.session,i&&er.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=b0(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Fw={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let TS=!1;class woe extends S.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),TS&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Fw.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:a}=r;return a&&(a.isPresent=s,TS=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||er.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),c4.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;TS=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function WF(t){const[e,n]=mF(),r=S.useContext($I);return m.jsx(woe,{...t,layoutGroup:r,switchLayoutGroup:S.useContext(AF),isPresent:e,safeToRemove:n})}function xoe(t,e,n){const r=ns(t)?t:Fm(t);return r.start(w4("",r,e,n)),r.animation}const _oe=(t,e)=>t.depth-e.depth;class Eoe{constructor(){this.children=[],this.isDirty=!1}add(e){qI(this.children,e),this.isDirty=!0}remove(e){GI(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(_oe),this.isDirty=!1,this.children.forEach(e)}}function Toe(t,e){const n=Vs.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Gu(r),t(s-e))};return er.setup(r,!0),()=>Gu(r)}const KF=["TopLeft","TopRight","BottomLeft","BottomRight"],Soe=KF.length,dM=t=>typeof t=="string"?parseFloat(t):t,hM=t=>typeof t=="number"||pt.test(t);function Coe(t,e,n,r,i,s){i?(t.opacity=lr(0,n.opacity??1,Aoe(r)),t.opacityExit=lr(e.opacity??1,0,Noe(r))):s&&(t.opacity=lr(e.opacity??1,n.opacity??1,r));for(let a=0;a<Soe;a++){const l=`border${KF[a]}Radius`;let u=fM(e,l),d=fM(n,l);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||hM(u)===hM(d)?(t[l]=Math.max(lr(dM(u),dM(d),r),0),(cl.test(d)||cl.test(u))&&(t[l]+="%")):t[l]=d}(e.rotate||n.rotate)&&(t.rotate=lr(e.rotate||0,n.rotate||0,r))}function fM(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Aoe=YF(0,.5,P$),Noe=YF(.5,.95,Ya);function YF(t,e,n){return r=>r<t?0:r>e?1:n(V0(t,e,r))}function mM(t,e){t.min=e.min,t.max=e.max}function ho(t,e){mM(t.x,e.x),mM(t.y,e.y)}function pM(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function gM(t,e,n,r,i){return t-=e,t=dx(t,1/n,r),i!==void 0&&(t=dx(t,1/i,r)),t}function koe(t,e=0,n=1,r=.5,i,s=t,a=t){if(cl.test(e)&&(e=parseFloat(e),e=lr(a.min,a.max,e/100)-a.min),typeof e!="number")return;let l=lr(s.min,s.max,r);t===s&&(l-=e),t.min=gM(t.min,e,n,l,i),t.max=gM(t.max,e,n,l,i)}function yM(t,e,[n,r,i],s,a){koe(t,e[n],e[r],e[i],e.scale,s,a)}const Ioe=["x","scaleX","originX"],Ooe=["y","scaleY","originY"];function vM(t,e,n,r){yM(t.x,e,Ioe,n?n.x:void 0,r?r.x:void 0),yM(t.y,e,Ooe,n?n.y:void 0,r?r.y:void 0)}function bM(t){return t.translate===0&&t.scale===1}function XF(t){return bM(t.x)&&bM(t.y)}function wM(t,e){return t.min===e.min&&t.max===e.max}function joe(t,e){return wM(t.x,e.x)&&wM(t.y,e.y)}function xM(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function QF(t,e){return xM(t.x,e.x)&&xM(t.y,e.y)}function _M(t){return ys(t.x)/ys(t.y)}function EM(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Poe{constructor(){this.members=[]}add(e){qI(this.members,e),e.scheduleRender()}remove(e){if(GI(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Roe(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:p,rotateY:y,skewX:v,skewY:w}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),y&&(r+=`rotateY(${y}deg) `),v&&(r+=`skewX(${v}deg) `),w&&(r+=`skewY(${w}deg) `)}const l=t.x.scale*e.x,u=t.y.scale*e.y;return(l!==1||u!==1)&&(r+=`scale(${l}, ${u})`),r||"none"}const SS=["","X","Y","Z"],Doe=1e3;let Moe=0;function CS(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function JF(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=LF(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",er,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&JF(r)}function ZF({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},l=e==null?void 0:e()){this.id=Moe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Uoe),this.nodes.forEach(Foe),this.nodes.forEach(Hoe),this.nodes.forEach(Boe)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new Eoe)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new YI),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const u=this.eventHandlers.get(a);u&&u.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=fF(a)&&!Nse(a),this.instance=a;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||l)&&(this.isLayoutDirty=!0),t){let h,p=0;const y=()=>this.root.updateBlockedByResize=!1;er.read(()=>{p=window.innerWidth}),t(a,()=>{const v=window.innerWidth;v!==p&&(p=v,this.root.updateBlockedByResize=!0,h&&h(),h=Toe(y,250),Fw.hasAnimatedSinceResize&&(Fw.hasAnimatedSinceResize=!1,this.nodes.forEach(CM)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:y,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||d.getDefaultTransition()||Yoe,{onLayoutAnimationStart:_,onLayoutAnimationComplete:E}=d.getProps(),C=!this.targetLayout||!QF(this.targetLayout,v),N=!p&&y;if(this.options.layoutRoot||this.resumeFrom||N||p&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const O={...o4(w,"layout"),onPlay:_,onComplete:E};(d.shouldReduceMotion||this.options.layoutRoot)&&(O.delay=0,O.type=!1),this.startAnimation(O),this.setAnimationOrigin(h,N)}else p||CM(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Gu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(qoe),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&JF(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(TM);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(SM);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach($oe),this.nodes.forEach(Loe),this.nodes.forEach(Voe)):this.nodes.forEach(SM),this.clearAllSnapshots();const l=Vs.now();Mi.delta=yc(0,1e3/60,l-Mi.timestamp),Mi.timestamp=l,Mi.isProcessing=!0,mS.update.process(Mi),mS.preRender.process(Mi),mS.render.process(Mi),Mi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,c4.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(zoe),this.sharedNodes.forEach(Goe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,er.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){er.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ys(this.snapshot.measuredBox.x)&&!ys(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=ii(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!XF(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;a&&this.instance&&(l||Jd(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return a&&(u=this.removeTransform(u)),Xoe(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:a}=this.options;if(!a)return ii();const l=a.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(Qoe))){const{scroll:h}=this.root;h&&(fm(l.x,h.offset.x),fm(l.y,h.offset.y))}return l}removeElementScroll(a){var u;const l=ii();if(ho(l,a),(u=this.scroll)!=null&&u.wasRoot)return l;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:p,options:y}=h;h!==this.root&&p&&y.layoutScroll&&(p.wasRoot&&ho(l,a),fm(l.x,p.offset.x),fm(l.y,p.offset.y))}return l}applyTransform(a,l=!1){const u=ii();ho(u,a);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&mm(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Jd(h.latestValues)&&mm(u,h.latestValues)}return Jd(this.latestValues)&&mm(u,this.latestValues),u}removeTransform(a){const l=ii();ho(l,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!Jd(d.latestValues))continue;gN(d.latestValues)&&d.updateSnapshot();const h=ii(),p=d.measurePageBox();ho(h,p),vM(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Jd(this.latestValues)&&vM(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Mi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var v;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!this.layout||!(h||p))return;this.resolvedRelativeTargetAt=Mi.timestamp;const y=this.getClosestProjectingParent();y&&this.linkedParentVersion!==y.layoutVersion&&!y.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(y&&y.layout?this.createRelativeTarget(y,this.layout.layoutBox,y.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ii(),this.targetWithTransforms=ii()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),soe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ho(this.target,this.layout.layoutBox),OF(this.target,this.targetDelta)):ho(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?this.createRelativeTarget(y,this.target,y.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||gN(this.parent.latestValues)||IF(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(a,l,u){this.relativeParent=a,this.linkedParentVersion=a.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ii(),this.relativeTargetOrigin=ii(),hx(this.relativeTargetOrigin,l,u),ho(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var w;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Mi.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;ho(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,y=this.treeScale.y;yae(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ii());const{target:v}=a;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(pM(this.prevProjectionDelta.x,this.projectionDelta.x),pM(this.prevProjectionDelta.y,this.projectionDelta.y)),w0(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==y||!EM(this.projectionDelta.x,this.prevProjectionDelta.x)||!EM(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=pm(),this.projectionDelta=pm(),this.projectionDeltaWithTransform=pm()}setAnimationOrigin(a,l=!1){const u=this.snapshot,d=u?u.latestValues:{},h={...this.latestValues},p=pm();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const y=ii(),v=u?u.source:void 0,w=this.layout?this.layout.source:void 0,_=v!==w,E=this.getStack(),C=!E||E.members.length<=1,N=!!(_&&!C&&this.options.crossfade===!0&&!this.path.some(Koe));this.animationProgress=0;let O;this.mixTargetDelta=R=>{const D=R/1e3;AM(p.x,a.x,D),AM(p.y,a.y,D),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(hx(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Woe(this.relativeTarget,this.relativeTargetOrigin,y,D),O&&joe(this.relativeTarget,O)&&(this.isProjectionDirty=!1),O||(O=ii()),ho(O,this.relativeTarget)),_&&(this.animationValues=h,Coe(h,d,this.latestValues,D,N,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var l,u,d;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(d=(u=this.resumingFrom)==null?void 0:u.currentAnimation)==null||d.stop(),this.pendingAnimation&&(Gu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=er.update(()=>{Fw.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Fm(0)),this.currentAnimation=xoe(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),a.onUpdate&&a.onUpdate(h)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Doe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:u,layout:d,latestValues:h}=a;if(!(!l||!u||!d)){if(this!==a&&this.layout&&d&&eH(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||ii();const p=ys(this.layout.layoutBox.x);u.x.min=a.target.x.min,u.x.max=u.x.min+p;const y=ys(this.layout.layoutBox.y);u.y.min=a.target.y.min,u.y.max=u.y.min+y}ho(l,u),mm(l,h),w0(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Poe),this.sharedNodes.get(a).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var l;const{layoutId:a}=this.options;return a?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:a}=this.options;return a?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:u}=a;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const d={};u.z&&CS("z",a,d,this.animationValues);for(let h=0;h<SS.length;h++)CS(`rotate${SS[h]}`,a,d,this.animationValues),CS(`skew${SS[h]}`,a,d,this.animationValues);a.render();for(const h in d)a.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);a.scheduleRender()}applyProjectionStyles(a,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=$w(l==null?void 0:l.pointerEvents)||"",a.transform=u?u(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=$w(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Jd(this.latestValues)&&(a.transform=u?u({},""):"none",this.hasProjected=!1);return}a.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let p=Roe(this.projectionDeltaWithTransform,this.treeScale,h);u&&(p=u(h,p)),a.transform=p;const{x:y,y:v}=this.projectionDelta;a.transformOrigin=`${y.origin*100}% ${v.origin*100}% 0`,d.animationValues?a.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:a.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const w in pN){if(h[w]===void 0)continue;const{correct:_,applyTo:E,isCSSVariable:C}=pN[w],N=p==="none"?h[w]:_(h[w],d);if(E){const O=E.length;for(let R=0;R<O;R++)a[E[R]]=N}else C?this.options.visualElement.renderState.vars[w]=N:a[w]=N}this.options.layoutId&&(a.pointerEvents=d===this?$w(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(TM),this.root.sharedNodes.clear()}}}function Loe(t){t.updateLayout()}function Voe(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,a=e.source!==t.layout.source;s==="size"?za(p=>{const y=a?e.measuredBox[p]:e.layoutBox[p],v=ys(y);y.min=r[p].min,y.max=y.min+v}):eH(s,e.layoutBox,r)&&za(p=>{const y=a?e.measuredBox[p]:e.layoutBox[p],v=ys(r[p]);y.max=y.min+v,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+v)});const l=pm();w0(l,r,e.layoutBox);const u=pm();a?w0(u,t.applyTransform(i,!0),e.measuredBox):w0(u,r,e.layoutBox);const d=!XF(l);let h=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:y,layout:v}=p;if(y&&v){const w=ii();hx(w,e.layoutBox,y.layoutBox);const _=ii();hx(_,r,v.layoutBox),QF(w,_)||(h=!0),p.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=w,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:u,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Uoe(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Boe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function zoe(t){t.clearSnapshot()}function TM(t){t.clearMeasurements()}function SM(t){t.isLayoutDirty=!1}function $oe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function CM(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Foe(t){t.resolveTargetDelta()}function Hoe(t){t.calcProjection()}function qoe(t){t.resetSkewAndRotation()}function Goe(t){t.removeLeadSnapshot()}function AM(t,e,n){t.translate=lr(e.translate,0,n),t.scale=lr(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function NM(t,e,n,r){t.min=lr(e.min,n.min,r),t.max=lr(e.max,n.max,r)}function Woe(t,e,n,r){NM(t.x,e.x,n.x,r),NM(t.y,e.y,n.y,r)}function Koe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Yoe={duration:.45,ease:[.4,0,.1,1]},kM=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),IM=kM("applewebkit/")&&!kM("chrome/")?Math.round:Ya;function OM(t){t.min=IM(t.min),t.max=IM(t.max)}function Xoe(t){OM(t.x),OM(t.y)}function eH(t,e,n){return t==="position"||t==="preserve-aspect"&&!ioe(_M(e),_M(n),.2)}function Qoe(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const Joe=ZF({attachResizeListener:(t,e)=>$0(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),AS={current:void 0},tH=ZF({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!AS.current){const t=new Joe({});t.mount(window),t.setOptions({layoutScroll:!0}),AS.current=t}return AS.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Zoe={pan:{Feature:boe},drag:{Feature:voe,ProjectionNode:tH,MeasureLayout:WF}};function jM(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&er.postRender(()=>s(e,Ry(e)))}class ele extends ld{mount(){const{current:e}=this.node;e&&(this.unmount=Ese(e,(n,r)=>(jM(this.node,r,"Start"),i=>jM(this.node,i,"End"))))}unmount(){}}class tle extends ld{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Oy($0(this.node.current,"focus",()=>this.onFocus()),$0(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function PM(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&er.postRender(()=>s(e,Ry(e)))}class nle extends ld{mount(){const{current:e}=this.node;e&&(this.unmount=Ase(e,(n,r)=>(PM(this.node,r,"Start"),(i,{success:s})=>PM(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const EN=new WeakMap,NS=new WeakMap,rle=t=>{const e=EN.get(t.target);e&&e(t)},ile=t=>{t.forEach(rle)};function sle({root:t,...e}){const n=t||document;NS.has(n)||NS.set(n,{});const r=NS.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(ile,{root:t,...e})),r[i]}function ale(t,e,n){const r=sle(e);return EN.set(t,n),r.observe(t),()=>{EN.delete(t),r.unobserve(t)}}const ole={some:0,all:1};class lle extends ld{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:ole[i]},l=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),y=d?h:p;y&&y(u)};return ale(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(cle(e,n))&&this.startObserver()}unmount(){}}function cle({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const ule={inView:{Feature:lle},tap:{Feature:nle},focus:{Feature:tle},hover:{Feature:ele}},dle={layout:{ProjectionNode:tH,MeasureLayout:WF}},hle={...Jae,...ule,...Zoe,...dle},Nh=mae(hle,Aae);var yo=b$();const nH=va(yo);function fle(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const mle=t=>{switch(t){case"success":return yle;case"info":return ble;case"warning":return vle;case"error":return wle;default:return null}},ple=Array(12).fill(0),gle=({visible:t,className:e})=>ue.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},ue.createElement("div",{className:"sonner-spinner"},ple.map((n,r)=>ue.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),yle=ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ue.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),vle=ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ue.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),ble=ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ue.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),wle=ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ue.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),xle=ue.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ue.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ue.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),_le=()=>{const[t,e]=ue.useState(document.hidden);return ue.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let TN=1;class Ele{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:r,...i}=e,s=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:TN++,a=this.toasts.find(u=>u.id===s),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),a?this.toasts=this.toasts.map(u=>u.id===s?(this.publish({...u,...e,id:s,title:r}),{...u,...e,id:s,dismissible:l,title:r}):u):this.addToast({title:r,...i,dismissible:l,id:s}),s},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let s=r!==void 0,a;const l=i.then(async d=>{if(a=["resolve",d],ue.isValidElement(d))s=!1,this.create({id:r,type:"default",message:d});else if(Sle(d)&&!d.ok){s=!1;const p=typeof n.error=="function"?await n.error(`HTTP error! status: ${d.status}`):n.error,y=typeof n.description=="function"?await n.description(`HTTP error! status: ${d.status}`):n.description,w=typeof p=="object"&&!ue.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:y,...w})}else if(d instanceof Error){s=!1;const p=typeof n.error=="function"?await n.error(d):n.error,y=typeof n.description=="function"?await n.description(d):n.description,w=typeof p=="object"&&!ue.isValidElement(p)?p:{message:p};this.create({id:r,type:"error",description:y,...w})}else if(n.success!==void 0){s=!1;const p=typeof n.success=="function"?await n.success(d):n.success,y=typeof n.description=="function"?await n.description(d):n.description,w=typeof p=="object"&&!ue.isValidElement(p)?p:{message:p};this.create({id:r,type:"success",description:y,...w})}}).catch(async d=>{if(a=["reject",d],n.error!==void 0){s=!1;const h=typeof n.error=="function"?await n.error(d):n.error,p=typeof n.description=="function"?await n.description(d):n.description,v=typeof h=="object"&&!ue.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:p,...v})}}).finally(()=>{s&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),u=()=>new Promise((d,h)=>l.then(()=>a[0]==="reject"?h(a[1]):d(a[1])).catch(h));return typeof r!="string"&&typeof r!="number"?{unwrap:u}:Object.assign(r,{unwrap:u})},this.custom=(e,n)=>{const r=(n==null?void 0:n.id)||TN++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Rs=new Ele,Tle=(t,e)=>{const n=(e==null?void 0:e.id)||TN++;return Rs.addToast({title:t,...e,id:n}),n},Sle=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Cle=Tle,Ale=()=>Rs.toasts,Nle=()=>Rs.getActiveToasts(),Fa=Object.assign(Cle,{success:Rs.success,info:Rs.info,warning:Rs.warning,error:Rs.error,custom:Rs.custom,message:Rs.message,promise:Rs.promise,dismiss:Rs.dismiss,loading:Rs.loading},{getHistory:Ale,getToasts:Nle});fle("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Xb(t){return t.label!==void 0}const kle=3,Ile="24px",Ole="16px",RM=4e3,jle=356,Ple=14,Rle=45,Dle=200;function Zo(...t){return t.filter(Boolean).join(" ")}function Mle(t){const[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}const Lle=t=>{var e,n,r,i,s,a,l,u,d;const{invert:h,toast:p,unstyled:y,interacting:v,setHeights:w,visibleToasts:_,heights:E,index:C,toasts:N,expanded:O,removeToast:R,defaultRichColors:D,closeButton:P,style:A,cancelButtonStyle:k,actionButtonStyle:M,className:V="",descriptionClassName:U="",duration:z,position:$,gap:ne,expandByDefault:fe,classNames:K,icons:W,closeButtonAriaLabel:ee="Close toast"}=t,[oe,pe]=ue.useState(null),[B,X]=ue.useState(null),[G,Q]=ue.useState(!1),[re,_e]=ue.useState(!1),[Se,ce]=ue.useState(!1),[Z,ke]=ue.useState(!1),[Le,ye]=ue.useState(!1),[ze,Ae]=ue.useState(0),[Ze,rt]=ue.useState(0),it=ue.useRef(p.duration||z||RM),Ke=ue.useRef(null),lt=ue.useRef(null),xt=C===0,Sr=C+1<=_,Un=p.type,hr=p.dismissible!==!1,Ht=p.className||"",fr=p.descriptionClassName||"",ei=ue.useMemo(()=>E.findIndex(et=>et.toastId===p.id)||0,[E,p.id]),cs=ue.useMemo(()=>{var et;return(et=p.closeButton)!=null?et:P},[p.closeButton,P]),se=ue.useMemo(()=>p.duration||z||RM,[p.duration,z]),Ie=ue.useRef(0),mt=ue.useRef(0),gn=ue.useRef(0),Ft=ue.useRef(null),[ti,Kn]=$.split("-"),hi=ue.useMemo(()=>E.reduce((et,qt,mr)=>mr>=ei?et:et+qt.height,0),[E,ei]),Qt=_le(),$c=p.invert||h,Ss=Un==="loading";mt.current=ue.useMemo(()=>ei*ne+hi,[ei,hi]),ue.useEffect(()=>{it.current=se},[se]),ue.useEffect(()=>{Q(!0)},[]),ue.useEffect(()=>{const et=lt.current;if(et){const qt=et.getBoundingClientRect().height;return rt(qt),w(mr=>[{toastId:p.id,height:qt,position:p.position},...mr]),()=>w(mr=>mr.filter(pr=>pr.toastId!==p.id))}},[w,p.id]),ue.useLayoutEffect(()=>{if(!G)return;const et=lt.current,qt=et.style.height;et.style.height="auto";const mr=et.getBoundingClientRect().height;et.style.height=qt,rt(mr),w(pr=>pr.find(An=>An.toastId===p.id)?pr.map(An=>An.toastId===p.id?{...An,height:mr}:An):[{toastId:p.id,height:mr,position:p.position},...pr])},[G,p.title,p.description,w,p.id,p.jsx,p.action,p.cancel]);const us=ue.useCallback(()=>{_e(!0),Ae(mt.current),w(et=>et.filter(qt=>qt.toastId!==p.id)),setTimeout(()=>{R(p)},Dle)},[p,R,w,mt]);ue.useEffect(()=>{if(p.promise&&Un==="loading"||p.duration===1/0||p.type==="loading")return;let et;return O||v||Qt?(()=>{if(gn.current<Ie.current){const pr=new Date().getTime()-Ie.current;it.current=it.current-pr}gn.current=new Date().getTime()})():(()=>{it.current!==1/0&&(Ie.current=new Date().getTime(),et=setTimeout(()=>{p.onAutoClose==null||p.onAutoClose.call(p,p),us()},it.current))})(),()=>clearTimeout(et)},[O,v,p,Un,Qt,us]),ue.useEffect(()=>{p.delete&&(us(),p.onDismiss==null||p.onDismiss.call(p,p))},[us,p.delete]);function ds(){var et;if(W!=null&&W.loading){var qt;return ue.createElement("div",{className:Zo(K==null?void 0:K.loader,p==null||(qt=p.classNames)==null?void 0:qt.loader,"sonner-loader"),"data-visible":Un==="loading"},W.loading)}return ue.createElement(gle,{className:Zo(K==null?void 0:K.loader,p==null||(et=p.classNames)==null?void 0:et.loader),visible:Un==="loading"})}const xa=p.icon||(W==null?void 0:W[Un])||mle(Un);var Cn,Fi;return ue.createElement("li",{tabIndex:0,ref:lt,className:Zo(V,Ht,K==null?void 0:K.toast,p==null||(e=p.classNames)==null?void 0:e.toast,K==null?void 0:K.default,K==null?void 0:K[Un],p==null||(n=p.classNames)==null?void 0:n[Un]),"data-sonner-toast":"","data-rich-colors":(Cn=p.richColors)!=null?Cn:D,"data-styled":!(p.jsx||p.unstyled||y),"data-mounted":G,"data-promise":!!p.promise,"data-swiped":Le,"data-removed":re,"data-visible":Sr,"data-y-position":ti,"data-x-position":Kn,"data-index":C,"data-front":xt,"data-swiping":Se,"data-dismissible":hr,"data-type":Un,"data-invert":$c,"data-swipe-out":Z,"data-swipe-direction":B,"data-expanded":!!(O||fe&&G),"data-testid":p.testId,style:{"--index":C,"--toasts-before":C,"--z-index":N.length-C,"--offset":`${re?ze:mt.current}px`,"--initial-height":fe?"auto":`${Ze}px`,...A,...p.style},onDragEnd:()=>{ce(!1),pe(null),Ft.current=null},onPointerDown:et=>{et.button!==2&&(Ss||!hr||(Ke.current=new Date,Ae(mt.current),et.target.setPointerCapture(et.pointerId),et.target.tagName!=="BUTTON"&&(ce(!0),Ft.current={x:et.clientX,y:et.clientY})))},onPointerUp:()=>{var et,qt,mr;if(Z||!hr)return;Ft.current=null;const pr=Number(((et=lt.current)==null?void 0:et.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),sr=Number(((qt=lt.current)==null?void 0:qt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),An=new Date().getTime()-((mr=Ke.current)==null?void 0:mr.getTime()),Cr=oe==="x"?pr:sr,hs=Math.abs(Cr)/An;if(Math.abs(Cr)>=Rle||hs>.11){Ae(mt.current),p.onDismiss==null||p.onDismiss.call(p,p),X(oe==="x"?pr>0?"right":"left":sr>0?"down":"up"),us(),ke(!0);return}else{var gr,Mr;(gr=lt.current)==null||gr.style.setProperty("--swipe-amount-x","0px"),(Mr=lt.current)==null||Mr.style.setProperty("--swipe-amount-y","0px")}ye(!1),ce(!1),pe(null)},onPointerMove:et=>{var qt,mr,pr;if(!Ft.current||!hr||((qt=window.getSelection())==null?void 0:qt.toString().length)>0)return;const An=et.clientY-Ft.current.y,Cr=et.clientX-Ft.current.x;var hs;const gr=(hs=t.swipeDirections)!=null?hs:Mle($);!oe&&(Math.abs(Cr)>1||Math.abs(An)>1)&&pe(Math.abs(Cr)>Math.abs(An)?"x":"y");let Mr={x:0,y:0};const Ai=Lr=>1/(1.5+Math.abs(Lr)/20);if(oe==="y"){if(gr.includes("top")||gr.includes("bottom"))if(gr.includes("top")&&An<0||gr.includes("bottom")&&An>0)Mr.y=An;else{const Lr=An*Ai(An);Mr.y=Math.abs(Lr)<Math.abs(An)?Lr:An}}else if(oe==="x"&&(gr.includes("left")||gr.includes("right")))if(gr.includes("left")&&Cr<0||gr.includes("right")&&Cr>0)Mr.x=Cr;else{const Lr=Cr*Ai(Cr);Mr.x=Math.abs(Lr)<Math.abs(Cr)?Lr:Cr}(Math.abs(Mr.x)>0||Math.abs(Mr.y)>0)&&ye(!0),(mr=lt.current)==null||mr.style.setProperty("--swipe-amount-x",`${Mr.x}px`),(pr=lt.current)==null||pr.style.setProperty("--swipe-amount-y",`${Mr.y}px`)}},cs&&!p.jsx&&Un!=="loading"?ue.createElement("button",{"aria-label":ee,"data-disabled":Ss,"data-close-button":!0,onClick:Ss||!hr?()=>{}:()=>{us(),p.onDismiss==null||p.onDismiss.call(p,p)},className:Zo(K==null?void 0:K.closeButton,p==null||(r=p.classNames)==null?void 0:r.closeButton)},(Fi=W==null?void 0:W.close)!=null?Fi:xle):null,(Un||p.icon||p.promise)&&p.icon!==null&&((W==null?void 0:W[Un])!==null||p.icon)?ue.createElement("div",{"data-icon":"",className:Zo(K==null?void 0:K.icon,p==null||(i=p.classNames)==null?void 0:i.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||ds():null,p.type!=="loading"?xa:null):null,ue.createElement("div",{"data-content":"",className:Zo(K==null?void 0:K.content,p==null||(s=p.classNames)==null?void 0:s.content)},ue.createElement("div",{"data-title":"",className:Zo(K==null?void 0:K.title,p==null||(a=p.classNames)==null?void 0:a.title)},p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title),p.description?ue.createElement("div",{"data-description":"",className:Zo(U,fr,K==null?void 0:K.description,p==null||(l=p.classNames)==null?void 0:l.description)},typeof p.description=="function"?p.description():p.description):null),ue.isValidElement(p.cancel)?p.cancel:p.cancel&&Xb(p.cancel)?ue.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||k,onClick:et=>{Xb(p.cancel)&&hr&&(p.cancel.onClick==null||p.cancel.onClick.call(p.cancel,et),us())},className:Zo(K==null?void 0:K.cancelButton,p==null||(u=p.classNames)==null?void 0:u.cancelButton)},p.cancel.label):null,ue.isValidElement(p.action)?p.action:p.action&&Xb(p.action)?ue.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||M,onClick:et=>{Xb(p.action)&&(p.action.onClick==null||p.action.onClick.call(p.action,et),!et.defaultPrevented&&us())},className:Zo(K==null?void 0:K.actionButton,p==null||(d=p.classNames)==null?void 0:d.actionButton)},p.action.label):null)};function DM(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Vle(t,e){const n={};return[t,e].forEach((r,i)=>{const s=i===1,a=s?"--mobile-offset":"--offset",l=s?Ole:Ile;function u(d){["top","right","bottom","left"].forEach(h=>{n[`${a}-${h}`]=typeof d=="number"?`${d}px`:d})}typeof r=="number"||typeof r=="string"?u(r):typeof r=="object"?["top","right","bottom","left"].forEach(d=>{r[d]===void 0?n[`${a}-${d}`]=l:n[`${a}-${d}`]=typeof r[d]=="number"?`${r[d]}px`:r[d]}):u(l)}),n}const Ule=ue.forwardRef(function(e,n){const{id:r,invert:i,position:s="bottom-right",hotkey:a=["altKey","KeyT"],expand:l,closeButton:u,className:d,offset:h,mobileOffset:p,theme:y="light",richColors:v,duration:w,style:_,visibleToasts:E=kle,toastOptions:C,dir:N=DM(),gap:O=Ple,icons:R,containerAriaLabel:D="Notifications"}=e,[P,A]=ue.useState([]),k=ue.useMemo(()=>r?P.filter(G=>G.toasterId===r):P.filter(G=>!G.toasterId),[P,r]),M=ue.useMemo(()=>Array.from(new Set([s].concat(k.filter(G=>G.position).map(G=>G.position)))),[k,s]),[V,U]=ue.useState([]),[z,$]=ue.useState(!1),[ne,fe]=ue.useState(!1),[K,W]=ue.useState(y!=="system"?y:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ee=ue.useRef(null),oe=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),pe=ue.useRef(null),B=ue.useRef(!1),X=ue.useCallback(G=>{A(Q=>{var re;return(re=Q.find(_e=>_e.id===G.id))!=null&&re.delete||Rs.dismiss(G.id),Q.filter(({id:_e})=>_e!==G.id)})},[]);return ue.useEffect(()=>Rs.subscribe(G=>{if(G.dismiss){requestAnimationFrame(()=>{A(Q=>Q.map(re=>re.id===G.id?{...re,delete:!0}:re))});return}setTimeout(()=>{nH.flushSync(()=>{A(Q=>{const re=Q.findIndex(_e=>_e.id===G.id);return re!==-1?[...Q.slice(0,re),{...Q[re],...G},...Q.slice(re+1)]:[G,...Q]})})})}),[P]),ue.useEffect(()=>{if(y!=="system"){W(y);return}if(y==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?W("dark"):W("light")),typeof window>"u")return;const G=window.matchMedia("(prefers-color-scheme: dark)");try{G.addEventListener("change",({matches:Q})=>{W(Q?"dark":"light")})}catch{G.addListener(({matches:re})=>{try{W(re?"dark":"light")}catch(_e){console.error(_e)}})}},[y]),ue.useEffect(()=>{P.length<=1&&$(!1)},[P]),ue.useEffect(()=>{const G=Q=>{var re;if(a.every(ce=>Q[ce]||Q.code===ce)){var Se;$(!0),(Se=ee.current)==null||Se.focus()}Q.code==="Escape"&&(document.activeElement===ee.current||(re=ee.current)!=null&&re.contains(document.activeElement))&&$(!1)};return document.addEventListener("keydown",G),()=>document.removeEventListener("keydown",G)},[a]),ue.useEffect(()=>{if(ee.current)return()=>{pe.current&&(pe.current.focus({preventScroll:!0}),pe.current=null,B.current=!1)}},[ee.current]),ue.createElement("section",{ref:n,"aria-label":`${D} ${oe}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},M.map((G,Q)=>{var re;const[_e,Se]=G.split("-");return k.length?ue.createElement("ol",{key:G,dir:N==="auto"?DM():N,tabIndex:-1,ref:ee,className:d,"data-sonner-toaster":!0,"data-sonner-theme":K,"data-y-position":_e,"data-x-position":Se,style:{"--front-toast-height":`${((re=V[0])==null?void 0:re.height)||0}px`,"--width":`${jle}px`,"--gap":`${O}px`,..._,...Vle(h,p)},onBlur:ce=>{B.current&&!ce.currentTarget.contains(ce.relatedTarget)&&(B.current=!1,pe.current&&(pe.current.focus({preventScroll:!0}),pe.current=null))},onFocus:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||B.current||(B.current=!0,pe.current=ce.relatedTarget)},onMouseEnter:()=>$(!0),onMouseMove:()=>$(!0),onMouseLeave:()=>{ne||$(!1)},onDragEnd:()=>$(!1),onPointerDown:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||fe(!0)},onPointerUp:()=>fe(!1)},k.filter(ce=>!ce.position&&Q===0||ce.position===G).map((ce,Z)=>{var ke,Le;return ue.createElement(Lle,{key:ce.id,icons:R,index:Z,toast:ce,defaultRichColors:v,duration:(ke=C==null?void 0:C.duration)!=null?ke:w,className:C==null?void 0:C.className,descriptionClassName:C==null?void 0:C.descriptionClassName,invert:i,visibleToasts:E,closeButton:(Le=C==null?void 0:C.closeButton)!=null?Le:u,interacting:ne,position:G,style:C==null?void 0:C.style,unstyled:C==null?void 0:C.unstyled,classNames:C==null?void 0:C.classNames,cancelButtonStyle:C==null?void 0:C.cancelButtonStyle,actionButtonStyle:C==null?void 0:C.actionButtonStyle,closeButtonAriaLabel:C==null?void 0:C.closeButtonAriaLabel,removeToast:X,toasts:k.filter(ye=>ye.position==ce.position),heights:V.filter(ye=>ye.position==ce.position),setHeights:U,expandByDefault:l,gap:O,expanded:z,swipeDirections:e.swipeDirections})})):null}))}),Ble=t=>{const{theme:e}=$i();return e==="tri-an"?m.jsx("img",{src:"https://i.postimg.cc/8PDn1wfM/favicon.png",alt:"Online Exam Icon",...t}):e==="noel"?m.jsx("img",{src:"/assets/img/gift3.png",alt:"Gift Icon",...t,className:"h-16 w-16 object-contain"}):m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t,children:m.jsx("path",{fillRule:"evenodd",d:"M3.75 4.5a3 3 0 00-3 3v10.5a3 3 0 003 3h16.5a3 3 0 003-3V7.5a3 3 0 00-3-3H3.75zm.75 4.5a.75.75 0 01.75-.75h13.5a.75.75 0 010 1.5H5.25a.75.75 0 01-.75-.75zm0 3.75a.75.75 0 01.75-.75h6a.75.75 0 010 1.5h-6a.75.75 0 01-.75-.75zm0 2.25a.75.75 0 01.75-.75h3a.75.75 0 010 1.5h-3a.75.75 0 01-.75-.75z",clipRule:"evenodd"})})},zle=t=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t,children:[m.jsx("path",{d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm.25 4.5a.75.75 0 00-1.5 0v5.337a2.25 2.25 0 00-1.5 2.063v.75a.75.75 0 001.5 0v-.75a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 001.5 0v-.75a2.25 2.25 0 00-1.5-2.063V6.75z"}),m.jsx("path",{d:"M6.163 15.25a.75.75 0 011.06-1.06l1.25 1.25a.75.75 0 01-1.06 1.06l-1.25-1.25zm10.617 0a.75.75 0 011.06 1.06l-1.25 1.25a.75.75 0 01-1.06 1.06l1.25-1.25z"})]}),x4=t=>{const{theme:e}=$i();return e==="noel"?m.jsx("img",{src:"/assets/img/ball.png",alt:"Check",...t,className:`${t.className} object-contain`}):m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t,children:m.jsx("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z",clipRule:"evenodd"})})},_4=t=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t,children:m.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z",clipRule:"evenodd"})}),kh=t=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t,children:m.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-4.28 9.22a.75.75 0 000 1.06l3 3a.75.75 0 101.06-1.06L10.81 12l1.47-1.47a.75.75 0 10-1.06-1.06l-3 3z",clipRule:"evenodd"})}),$le=t=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t,children:m.jsx("path",{fillRule:"evenodd",d:"M16.28 11.47a.75.75 0 010 1.06l-3 3a.75.75 0 01-1.06-1.06L14.44 12l-2.22-2.22a.75.75 0 011.06-1.06l3 3z",clipRule:"evenodd"})}),Fle=t=>{const{theme:e}=$i();return e==="tri-an"?m.jsx("img",{src:"https://i.postimg.cc/J0JwWn5p/Mattahan-Buuf-One-of-those-ugly-pens-you-just-find-lying-around-128.png",alt:"Pen Icon",...t}):e==="noel"?m.jsx("img",{src:"/assets/img/celebrate.png",alt:"Santa",...t,className:`${t.className} object-contain`}):m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t,children:[m.jsx("path",{d:"M12.75 12.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"}),m.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM9 12a3 3 0 116 0 3 3 0 01-6 0zm-2.121 4.212a.75.75 0 01.688-1.228 5.253 5.253 0 018.866 0 .75.75 0 11-.688 1.228 3.753 3.753 0 00-7.49 0z",clipRule:"evenodd"})]})},Hle=t=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t,children:m.jsx("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-4.5a.75.75 0 000 1.5h6a.75.75 0 00.75-.75V4.5a.75.75 0 00-1.5 0v2.253a9 9 0 00-15.06 4.042.75.75 0 00.75.75h1.5a.75.75 0 00.75-.75zM19.245 13.941a7.5 7.5 0 01-12.548 3.364l-1.903-1.903h4.5a.75.75 0 000-1.5h-6a.75.75 0 00-.75.75v6a.75.75 0 001.5 0v-2.253a9 9 0 0015.06-4.042.75.75 0 00-.75-.75h-1.5a.75.75 0 00-.75.75z",clipRule:"evenodd"})}),qm=t=>{const{theme:e}=$i();return e==="tri-an"?m.jsx("img",{src:"https://i.postimg.cc/xjbVmxDW/Oxygen-Icons-org-Oxygen-Categories-applications-education-university-256.png",alt:"Graduation Cap Icon",...t}):e==="noel"?m.jsx("img",{src:"/assets/img/home.png",alt:"Home Icon",...t,className:`${t.className} object-contain`}):m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t,children:[m.jsx("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm0 2a8 8 0 100 16 8 8 0 000-16zm0 3a5 5 0 110 10 5 5 0 010-10zm0 2a3 3 0 100 6 3 3 0 000-6z"}),m.jsx("path",{d:"M12 3v2m0 14v2M3 12h2m14 0h-2m-8-8L6.414 5.414m11.172 11.172L16.243 15.12m0-9.706l-1.121 1.121M5.414 17.586L6.536 16.464"})]})},SN=t=>{const{theme:e}=$i();return e==="tri-an"?m.jsx("img",{src:"https://i.postimg.cc/66GxZjxN/school-114359.png",alt:"School Bag Icon",...t}):e==="noel"?m.jsx("img",{src:"/assets/img/bell.png",alt:"Bell Icon",...t,className:`${t.className} object-contain`}):m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t,children:[m.jsx("path",{d:"M12 2a1 1 0 011 1v7.683a4.502 4.502 0 012.722 2.054 3 3 0 01-1.33 3.963 3.003 3.003 0 01-4.783-3.963A4.502 4.502 0 0111 10.683V3a1 1 0 011-1zm-3.5 10a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm7 0a1.5 1.5 0 100 3 1.5 1.5 0 000-3z"}),m.jsx("path",{d:"M12 22a8.956 8.956 0 01-6-2.583V18h12v1.417A8.956 8.956 0 0112 22z"})]})},qle=t=>{const{theme:e}=$i();return e==="tri-an"?m.jsx("img",{src:"https://i.postimg.cc/h47RmyWN/Mattahan-Buuf-They-reply-technosorcery-128.png",alt:"Wrench Icon",...t}):e==="noel"?m.jsx("img",{src:"/assets/img/gift4.png",alt:"Gift Icon",...t,className:`${t.className} object-contain`}):m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t,children:[m.jsx("path",{fillRule:"evenodd",d:"M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.981A10.503 10.503 0 0112 21a10.5 10.5 0 01-10.5-10.5c0-4.368 2.667-8.162 6.43-9.742a.75.75 0 01.819.162z",clipRule:"evenodd"}),m.jsx("path",{d:"M12.75 9a.75.75 0 00-1.5 0v2.25H9a.75.75 0 000 1.5h2.25V15a.75.75 0 001.5 0v-2.25H15a.75.75 0 000-1.5h-2.25V9z"})]})},Gle=t=>{const{theme:e}=$i();return e==="tri-an"?m.jsx("img",{src:"https://i.postimg.cc/zvWm1BFk/book-512x512-35977.png",alt:"Book Icon",...t}):e==="noel"?m.jsx("img",{src:"/assets/img/hat.png",alt:"Hat Icon",...t,className:`${t.className} object-contain`}):m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t,children:[m.jsx("path",{d:"M12 2L3 8v2h18V8l-9-6zm-1.5 10a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm3 0a1.5 1.5 0 100 3 1.5 1.5 0 000-3z"}),m.jsx("path",{d:"M4 14v6h16v-6H4zm6 2h4v2h-4v-2z"})]})},MM=t=>{const{theme:e}=$i();return e==="tri-an"?m.jsx("img",{src:"https://i.postimg.cc/2yvpf67d/Mattahan-Buuf-A-Proper-Journal-Icon-128.png",alt:"Journal Icon",...t}):e==="noel"?m.jsx("img",{src:"/assets/img/gift5.png",alt:"Gift Icon",...t,className:`${t.className} object-contain`}):m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t,children:[m.jsx("path",{fillRule:"evenodd",d:"M12 2a10 10 0 100 20 10 10 0 000-20zM4 12a8 8 0 1116 0 8 8 0 01-16 0z",clipRule:"evenodd"}),m.jsx("path",{d:"M16.95 7.05l-1.414 1.414-2.122-2.122 1.414-1.414 2.122 2.122zm-9.9 9.9l1.414-1.414 2.122 2.122-1.414 1.414-2.122-2.122zm9.9 0l-1.414-1.414-2.122 2.122 1.414 1.414 2.122-2.122zm-9.9-9.9l1.414 1.414-2.122 2.122L5.636 9.172l2.122-2.122z"})]})},LM=t=>{const{theme:e}=$i();return e==="tri-an"?m.jsx("img",{src:"https://i.postimg.cc/2yvpf67d/Mattahan-Buuf-A-Proper-Journal-Icon-128.png",alt:"Journal Icon",...t}):e==="noel"?m.jsx("img",{src:"/assets/img/star-gold.png",alt:"Star Icon",...t,className:`${t.className} object-contain`}):m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t,children:[m.jsx("path",{fillRule:"evenodd",d:"M8.25 2.25A.75.75 0 019 3v.257a3.75 3.75 0 013 0V3a.75.75 0 011.5 0v.257a3.75 3.75 0 013 0V3a.75.75 0 01.75.75h-.008v.016c.361.32.622.754.74 1.232A23.953 23.953 0 0112 6c-2.305 0-4.52-.42-6.502-1.195a2.5 2.5 0 01.74-1.232H6a.75.75 0 01.75-.75h1.5zm-2.784 4.542a25.474 25.474 0 0013.068 0 .75.75 0 01.443.923 23.92 23.92 0 01-13.954 0 .75.75 0 01.443-.923zM8.25 10.5a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5a.75.75 0 01.75-.75zm3.75 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5a.75.75 0 01.75-.75zm3.75 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5a.75.75 0 01.75-.75z",clipRule:"evenodd"}),m.jsx("path",{d:"M4.145 9.421a.75.75 0 01.558-.923 25.483 25.483 0 0114.594 0 .75.75 0 01.558.923l-.36.99a25.01 25.01 0 01-14.832 0l-.36-.99z"}),m.jsx("path",{fillRule:"evenodd",d:"M3 15.75A2.25 2.25 0 015.25 13.5h13.5A2.25 2.25 0 0121 15.75v3A2.25 2.25 0 0118.75 21H5.25A2.25 2.25 0 013 18.75v-3z",clipRule:"evenodd"})]})},rH=t=>{const{theme:e}=$i();return e==="tri-an"?m.jsx("img",{src:"https://i.postimg.cc/xjbVmxDW/Oxygen-Icons-org-Oxygen-Categories-applications-education-university-256.png",alt:"Graduation Cap Icon",...t}):e==="noel"?m.jsx("img",{src:"/assets/img/star-gold.png",alt:"Gold Star Icon",...t,className:`${t.className} object-contain`}):m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t,children:[m.jsx("path",{fillRule:"evenodd",d:"M11.25 4.5A.75.75 0 0112 5.25v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0111.25 4.5zM12.75 6a.75.75 0 00-1.5 0v1.5a.75.75 0 001.5 0V6zM11.25 7.5A.75.75 0 0112 8.25v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0111.25 7.5zM12.75 9a.75.75 0 00-1.5 0v1.5a.75.75 0 001.5 0V9z",clipRule:"evenodd"}),m.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM6.262 6.072a8.25 8.25 0 1011.476 11.476A8.25 8.25 0 006.262 6.072zM12 18.75a.75.75 0 01-.75-.75V15a.75.75 0 011.5 0v3a.75.75 0 01-.75.75z",clipRule:"evenodd"}),m.jsx("path",{d:"M14.25 12a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})]})},E4=t=>{const{theme:e}=$i();return e==="tri-an"?m.jsx("img",{src:"https://i.postimg.cc/FFJXSWXv/study-learning-knowledge-education-book-notebook-icon-256768.png",alt:"Book and Glasses Icon",...t}):e==="noel"?m.jsx("img",{src:"/assets/img/gift1.png",alt:"Gift Icon",...t,className:`${t.className} object-contain`}):m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t,children:[m.jsx("path",{d:"M11.25 4.533A9.708 9.708 0 006 3.75c-1.052 0-2.062.18-3 .512V17.25a8.987 8.987 0 013.75-.82V9.75a.75.75 0 011.5 0v7.5a.75.75 0 01-1.5 0V15a6.726 6.726 0 00-3-.585V18.75C3.393 18.932 3.69 19.1 4 19.29c2.023.784 4.18 1.093 6.364 1.294a.75.75 0 00.872-.725V4.534z"}),m.jsx("path",{d:"M12.75 4.533V19.86a.75.75 0 00.872.725 49.33 49.33 0 006.364-1.294c.31-.19.607-.358.914-.54V5.25c-1.084-.308-2.18-.46-3.25-.46-1.637 0-3.235.32-4.75.922V4.534z"})]})},Wle=t=>{const{theme:e}=$i();return e==="tri-an"?m.jsx("img",{src:"https://i.postimg.cc/kG8rd4vv/Limpa-Curriculum-Vitae-Education-256.png",alt:"Blackboard Icon",...t}):e==="noel"?m.jsx("img",{src:"/assets/img/gift2.png",alt:"Gift Icon",...t,className:`${t.className} object-contain`}):m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t,children:m.jsx("path",{fillRule:"evenodd",d:"M2.25 6a3 3 0 013-3h13.5a3 3 0 013 3v12a3 3 0 01-3-3H5.25a3 3 0 01-3-3V6zm3.75 3a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H7.5a.75.75 0 01-.75-.75zM7.5 12a.75.75 0 000 1.5h6a.75.75 0 000-1.5h-6z",clipRule:"evenodd"})})},Kle=[{name:"light",label:"Sng",color:"bg-white"},{name:"dark",label:"Ti",color:"bg-slate-900"},{name:"noel",label:"Ging Sinh",color:"bg-[#8B0000]"},{name:"modern",label:"Hin i",color:"bg-indigo-600"},{name:"classic",label:"C in",color:"bg-[#6F6049]"},{name:"sunrise",label:"Bnh Minh",color:"bg-orange-500"},{name:"tri-an",label:"Tri n",color:"bg-red-400"}],Yle=()=>{const[t,e]=S.useState(!1),{theme:n,setTheme:r}=$i(),i=s=>{r(s),e(!1)};return m.jsxs("div",{className:"relative",children:[t&&m.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-40 rounded-lg border border-border bg-card p-2 shadow-2xl flex flex-col gap-1 animate-slide-in-right",children:Kle.map(s=>m.jsxs("button",{onClick:()=>i(s.name),className:`w-full text-left px-3 py-2 text-sm font-semibold rounded-md flex items-center gap-3 transition-colors ${n===s.name?"bg-primary/20 text-primary":"text-card-foreground hover:bg-secondary"}`,children:[m.jsx("span",{className:`w-4 h-4 rounded-full ${s.color} border border-white/20`}),s.label]},s.name))}),m.jsx("button",{onClick:()=>e(!t),className:"flex h-10 w-10 items-center justify-center rounded-lg bg-secondary text-secondary-foreground shadow-sm transition-colors hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring","aria-label":"Change theme",children:m.jsx(zle,{className:"h-6 w-6"})})]})},Xle=()=>{const t=["gift1.png","bell.png","star-gold.png","ball.png","gift2.png","gift3.png","gift4.png","gift5.png"],{theme:e}=$i();return e!=="noel"?null:m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:`
        /* === PHN 5: HIU NG TUYT & QU RI === */
        .snowflakes {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 9999;
        }
        
        .snowflake {
            color: #fff;
            font-size: 1.2em;
            font-family: Arial, sans-serif;
            text-shadow: 0 0 3px rgba(255,255,255,0.8); /* Tuyt pht sng nh */
            position: fixed;
            top: -10%;
            z-index: 9999;
            user-select: none;
            cursor: default;
            animation-name: snowflakes-fall, snowflakes-shake;
            animation-timing-function: linear, ease-in-out;
            animation-iteration-count: infinite, infinite;
            animation-play-state: running, running;
        }

        .snowflake-img img {
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.3));
            width: 30px; 
            height: auto;
            opacity: 0.9;
        }

        @keyframes snowflakes-fall {
            0% { top: -10%; }
            100% { top: 100%; }
        }
        @keyframes snowflakes-shake {
            0% { transform: translateX(0px) rotate(0deg); }
            50% { transform: translateX(80px) rotate(180deg); }
            100% { transform: translateX(0px) rotate(360deg); }
        }

        /* Cu hnh ri ngu nhin */
        .snowflake:nth-of-type(1) { left: 1%; animation-duration: 12s, 4s; animation-delay: 0s, 0s; }
        .snowflake:nth-of-type(2) { left: 5%; animation-duration: 15s, 6s; animation-delay: 1s, 1s; }
        .snowflake:nth-of-type(3) { left: 10%; animation-duration: 10s, 3s; animation-delay: 2s, 0.5s; }
        .snowflake:nth-of-type(4) { left: 15%; animation-duration: 18s, 5s; animation-delay: 4s, 2s; }
        .snowflake:nth-of-type(5) { left: 20%; animation-duration: 11s, 4s; animation-delay: 2s, 2s; }
        .snowflake:nth-of-type(6) { left: 25%; animation-duration: 14s, 7s; animation-delay: 6s, 3s; }
        .snowflake:nth-of-type(7) { left: 30%; animation-duration: 16s, 5s; animation-delay: 3s, 2s; }
        .snowflake:nth-of-type(8) { left: 35%; animation-duration: 13s, 4s; animation-delay: 1s, 1s; }
        .snowflake:nth-of-type(9) { left: 40%; animation-duration: 17s, 6s; animation-delay: 0s, 0s; }
        .snowflake:nth-of-type(10) { left: 45%; animation-duration: 9s, 3s; animation-delay: 5s, 1.5s; }
        .snowflake:nth-of-type(11) { left: 50%; animation-duration: 14s, 5s; animation-delay: 2s, 3s; }
        .snowflake:nth-of-type(12) { left: 55%; animation-duration: 11s, 4s; animation-delay: 4s, 1s; }
        .snowflake:nth-of-type(13) { left: 60%; animation-duration: 19s, 7s; animation-delay: 1s, 2s; }
        .snowflake:nth-of-type(14) { left: 65%; animation-duration: 12s, 3s; animation-delay: 3s, 0s; }
        .snowflake:nth-of-type(15) { left: 70%; animation-duration: 15s, 6s; animation-delay: 5s, 4s; }
        .snowflake:nth-of-type(16) { left: 75%; animation-duration: 10s, 4s; animation-delay: 0s, 2s; }
        .snowflake:nth-of-type(17) { left: 80%; animation-duration: 16s, 5s; animation-delay: 2s, 1s; }
        .snowflake:nth-of-type(18) { left: 85%; animation-duration: 13s, 4s; animation-delay: 4s, 3s; }
        .snowflake:nth-of-type(19) { left: 90%; animation-duration: 18s, 6s; animation-delay: 1s, 2s; }
        .snowflake:nth-of-type(20) { left: 95%; animation-duration: 11s, 3s; animation-delay: 3s, 0s; }
        
        .snowflake:nth-of-type(21) { left: 2%; animation-duration: 13s, 5s; animation-delay: 5s, 1s; }
        .snowflake:nth-of-type(22) { left: 8%; animation-duration: 10s, 3s; animation-delay: 2s, 4s; }
        .snowflake:nth-of-type(23) { left: 12%; animation-duration: 16s, 6s; animation-delay: 1s, 2s; }
        .snowflake:nth-of-type(24) { left: 18%; animation-duration: 12s, 4s; animation-delay: 6s, 0s; }
        .snowflake:nth-of-type(25) { left: 22%; animation-duration: 14s, 5s; animation-delay: 0s, 3s; }
        .snowflake:nth-of-type(26) { left: 28%; animation-duration: 11s, 3s; animation-delay: 4s, 2s; }
        .snowflake:nth-of-type(27) { left: 32%; animation-duration: 19s, 7s; animation-delay: 2s, 1s; }
        .snowflake:nth-of-type(28) { left: 38%; animation-duration: 15s, 6s; animation-delay: 5s, 5s; }
        .snowflake:nth-of-type(29) { left: 42%; animation-duration: 12s, 4s; animation-delay: 1s, 0s; }
        .snowflake:nth-of-type(30) { left: 48%; animation-duration: 17s, 5s; animation-delay: 3s, 2s; }
        .snowflake:nth-of-type(31) { left: 52%; animation-duration: 9s, 3s; animation-delay: 0s, 3s; }
        .snowflake:nth-of-type(32) { left: 58%; animation-duration: 14s, 6s; animation-delay: 4s, 1s; }
        .snowflake:nth-of-type(33) { left: 62%; animation-duration: 11s, 4s; animation-delay: 2s, 4s; }
        .snowflake:nth-of-type(34) { left: 68%; animation-duration: 16s, 5s; animation-delay: 6s, 0s; }
        .snowflake:nth-of-type(35) { left: 72%; animation-duration: 13s, 3s; animation-delay: 1s, 2s; }
        .snowflake:nth-of-type(36) { left: 78%; animation-duration: 18s, 7s; animation-delay: 5s, 1s; }
        .snowflake:nth-of-type(37) { left: 82%; animation-duration: 10s, 4s; animation-delay: 2s, 3s; }
        .snowflake:nth-of-type(38) { left: 88%; animation-duration: 15s, 6s; animation-delay: 4s, 0s; }
        .snowflake:nth-of-type(39) { left: 92%; animation-duration: 12s, 5s; animation-delay: 0s, 2s; }
        .snowflake:nth-of-type(40) { left: 98%; animation-duration: 17s, 4s; animation-delay: 3s, 5s; }

        .snowflake:nth-child(odd) { animation-direction: normal; }
        .snowflake:nth-child(even) { animation-direction: alternate; }

        @media (max-width: 768px) {
            .snowflake { font-size: 1em; }
            .snowflake-img img { width: 20px; }
        }
      `}}),m.jsxs("div",{className:"snowflakes","aria-hidden":"true",children:[Array.from({length:100}).map((n,r)=>m.jsxs("div",{className:"snowflake",children:[["","",""][r%3]," "]},`snow-${r}`)),Array.from({length:8}).map((n,r)=>{const i=t[r%t.length];return m.jsx("div",{className:"snowflake snowflake-img",children:m.jsx("img",{src:`/assets/img/${i}`,alt:"",style:{width:"25px",height:"auto"}})},`img-${r}`)})]})]})},Qle=()=>{};var VM={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iH={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const De=function(t,e){if(!t)throw Ap(e)},Ap=function(t){return new Error("Firebase Database ("+iH.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sH=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Jle=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},T4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,l=a?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|l>>4;let y=(l&15)<<2|d>>6,v=d&63;u||(v=64,a||(y=64)),r.push(n[h],n[p],n[y],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sH(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Jle(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||d==null||p==null)throw new Zle;const y=s<<2|l>>4;if(r.push(y),d!==64){const v=l<<4&240|d>>2;if(r.push(v),p!==64){const w=d<<6&192|p;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Zle extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aH=function(t){const e=sH(t);return T4.encodeByteArray(e,!0)},fx=function(t){return aH(t).replace(/\./g,"")},mx=function(t){try{return T4.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ece(t){return oH(void 0,t)}function oH(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!tce(n)||(t[n]=oH(t[n],e[n]));return t}function tce(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nce(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rce=()=>nce().__FIREBASE_DEFAULTS__,ice=()=>{if(typeof process>"u"||typeof VM>"u")return;const t=VM.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},sce=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mx(t[1]);return e&&JSON.parse(e)},y_=()=>{try{return Qle()||rce()||ice()||sce()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},lH=t=>{var e,n;return(n=(e=y_())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},S4=t=>{const e=lH(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},cH=()=>{var t;return(t=y_())==null?void 0:t.config},uH=t=>{var e;return(e=y_())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zl=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function v_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C4(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[fx(JSON.stringify(n)),fx(JSON.stringify(a)),""].join(".")}const x0={};function ace(){const t={prod:[],emulator:[]};for(const e of Object.keys(x0))x0[e]?t.emulator.push(e):t.prod.push(e);return t}function oce(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let UM=!1;function b_(t,e){if(typeof window>"u"||typeof document>"u"||!jc(window.location.host)||x0[t]===e||x0[t]||UM)return;x0[t]=e;function n(y){return`__firebase__banner__${y}`}const r="__firebase__banner",s=ace().prod.length>0;function a(){const y=document.getElementById(r);y&&y.remove()}function l(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function u(y,v){y.setAttribute("width","24"),y.setAttribute("id",v),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function d(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{UM=!0,a()},y}function h(y,v){y.setAttribute("id",v),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function p(){const y=oce(r),v=n("text"),w=document.getElementById(v)||document.createElement("span"),_=n("learnmore"),E=document.getElementById(_)||document.createElement("a"),C=n("preprendIcon"),N=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const O=y.element;l(O),h(E,_);const R=d();u(N,C),O.append(N,w,E,R),document.body.appendChild(O)}s?(w.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function A4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(as())}function lce(){var e;const t=(e=y_())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cce(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uce(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function dH(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dce(){const t=as();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hce(){return iH.NODE_ADMIN===!0}function fce(){return!lce()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mce(){try{return typeof indexedDB=="object"}catch{return!1}}function pce(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gce="FirebaseError";class Tl extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=gce,Object.setPrototypeOf(this,Tl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dy.prototype.create)}}class Dy{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?yce(s,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new Tl(i,l,r)}}function yce(t,e){return t.replace(vce,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const vce=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(t){return JSON.parse(t)}function wi(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hH=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=F0(mx(s[0])||""),n=F0(mx(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},bce=function(t){const e=hH(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},wce=function(t){const e=hH(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Gm(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function px(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function gx(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function yl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(BM(s)&&BM(a)){if(!yl(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function BM(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function c0(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function u0(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xce{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)r[p]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let p=0;p<16;p++)r[p]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let p=16;p<80;p++){const y=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=(y<<1|y>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],a=this.chain_[2],l=this.chain_[3],u=this.chain_[4],d,h;for(let p=0;p<80;p++){p<40?p<20?(d=l^s&(a^l),h=1518500249):(d=s^a^l,h=1859775393):p<60?(d=s&a|l&(s|a),h=2400959708):(d=s^a^l,h=3395469782);const y=(i<<5|i>>>27)+d+u+h+r[p]&4294967295;u=l,l=a,a=(s<<30|s>>>2)&4294967295,s=i,i=y}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let a=this.inbuf_;for(;i<n;){if(a===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[a]=e.charCodeAt(i),++a,++i,a===this.blockSize){this.compress_(s),a=0;break}}else for(;i<n;)if(s[a]=e[i],++a,++i,a===this.blockSize){this.compress_(s),a=0;break}}this.inbuf_=a,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function _ce(t,e){const n=new Ece(t,e);return n.subscribe.bind(n)}class Ece{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Tce(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=kS),i.error===void 0&&(i.error=kS),i.complete===void 0&&(i.complete=kS);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Tce(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function kS(){}function Wm(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sce=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,De(r<t.length,"Surrogate pair missing trail surrogate.");const a=t.charCodeAt(r)-56320;i=65536+(s<<10)+a}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},w_=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(t){return t&&t._delegate?t._delegate:t}class bc{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cce=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Zl;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Nce(e))try{this.getOrInitializeService({instanceIdentifier:Zd})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Zd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zd){return this.instances.has(e)}getOptions(e=Zd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&a.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ace(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zd){return this.component?this.component.multipleInstances?e:Zd:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Ace(t){return t===Zd?void 0:t}function Nce(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kce{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Cce(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Rt||(Rt={}));const Ice={debug:Rt.DEBUG,verbose:Rt.VERBOSE,info:Rt.INFO,warn:Rt.WARN,error:Rt.ERROR,silent:Rt.SILENT},Oce=Rt.INFO,jce={[Rt.DEBUG]:"log",[Rt.VERBOSE]:"log",[Rt.INFO]:"info",[Rt.WARN]:"warn",[Rt.ERROR]:"error"},Pce=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=jce[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class x_{constructor(e){this.name=e,this._logLevel=Oce,this._logHandler=Pce,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ice[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Rt.DEBUG,...e),this._logHandler(this,Rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Rt.VERBOSE,...e),this._logHandler(this,Rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Rt.INFO,...e),this._logHandler(this,Rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Rt.WARN,...e),this._logHandler(this,Rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Rt.ERROR,...e),this._logHandler(this,Rt.ERROR,...e)}}const Rce=(t,e)=>e.some(n=>t instanceof n);let zM,$M;function Dce(){return zM||(zM=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Mce(){return $M||($M=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fH=new WeakMap,CN=new WeakMap,mH=new WeakMap,IS=new WeakMap,N4=new WeakMap;function Lce(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Vu(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&fH.set(n,t)}).catch(()=>{}),N4.set(e,t),e}function Vce(t){if(CN.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});CN.set(t,e)}let AN={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return CN.get(t);if(e==="objectStoreNames")return t.objectStoreNames||mH.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vu(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Uce(t){AN=t(AN)}function Bce(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(OS(this),e,...n);return mH.set(r,e.sort?e.sort():[e]),Vu(r)}:Mce().includes(t)?function(...e){return t.apply(OS(this),e),Vu(fH.get(this))}:function(...e){return Vu(t.apply(OS(this),e))}}function zce(t){return typeof t=="function"?Bce(t):(t instanceof IDBTransaction&&Vce(t),Rce(t,Dce())?new Proxy(t,AN):t)}function Vu(t){if(t instanceof IDBRequest)return Lce(t);if(IS.has(t))return IS.get(t);const e=zce(t);return e!==t&&(IS.set(t,e),N4.set(e,t)),e}const OS=t=>N4.get(t);function $ce(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),l=Vu(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Vu(a.result),u.oldVersion,u.newVersion,Vu(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const Fce=["get","getKey","getAll","getAllKeys","count"],Hce=["put","add","delete","clear"],jS=new Map;function FM(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jS.get(e))return jS.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Hce.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Fce.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&u.done]))[0]};return jS.set(e,s),s}Uce(t=>({...t,get:(e,n,r)=>FM(e,n)||t.get(e,n,r),has:(e,n)=>!!FM(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qce{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Gce(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Gce(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const NN="@firebase/app",HM="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc=new x_("@firebase/app"),Wce="@firebase/app-compat",Kce="@firebase/analytics-compat",Yce="@firebase/analytics",Xce="@firebase/app-check-compat",Qce="@firebase/app-check",Jce="@firebase/auth",Zce="@firebase/auth-compat",eue="@firebase/database",tue="@firebase/data-connect",nue="@firebase/database-compat",rue="@firebase/functions",iue="@firebase/functions-compat",sue="@firebase/installations",aue="@firebase/installations-compat",oue="@firebase/messaging",lue="@firebase/messaging-compat",cue="@firebase/performance",uue="@firebase/performance-compat",due="@firebase/remote-config",hue="@firebase/remote-config-compat",fue="@firebase/storage",mue="@firebase/storage-compat",pue="@firebase/firestore",gue="@firebase/ai",yue="@firebase/firestore-compat",vue="firebase",bue="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="[DEFAULT]",wue={[NN]:"fire-core",[Wce]:"fire-core-compat",[Yce]:"fire-analytics",[Kce]:"fire-analytics-compat",[Qce]:"fire-app-check",[Xce]:"fire-app-check-compat",[Jce]:"fire-auth",[Zce]:"fire-auth-compat",[eue]:"fire-rtdb",[tue]:"fire-data-connect",[nue]:"fire-rtdb-compat",[rue]:"fire-fn",[iue]:"fire-fn-compat",[sue]:"fire-iid",[aue]:"fire-iid-compat",[oue]:"fire-fcm",[lue]:"fire-fcm-compat",[cue]:"fire-perf",[uue]:"fire-perf-compat",[due]:"fire-rc",[hue]:"fire-rc-compat",[fue]:"fire-gcs",[mue]:"fire-gcs-compat",[pue]:"fire-fst",[yue]:"fire-fst-compat",[gue]:"fire-vertex","fire-js":"fire-js",[vue]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=new Map,xue=new Map,IN=new Map;function qM(t,e){try{t.container.addComponent(e)}catch(n){wc.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ku(t){const e=t.name;if(IN.has(e))return wc.debug(`There were multiple attempts to register component ${e}.`),!1;IN.set(e,t);for(const n of H0.values())qM(n,t);for(const n of xue.values())qM(n,t);return!0}function My(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ms(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _ue={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Uu=new Dy("app","Firebase",_ue);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eue{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Uu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd=bue;function pH(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:kN,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Uu.create("bad-app-name",{appName:String(i)});if(n||(n=cH()),!n)throw Uu.create("no-options");const s=H0.get(i);if(s){if(yl(n,s.options)&&yl(r,s.config))return s;throw Uu.create("duplicate-app",{appName:i})}const a=new kce(i);for(const u of IN.values())a.addComponent(u);const l=new Eue(n,r,a);return H0.set(i,l),l}function Ly(t=kN){const e=H0.get(t);if(!e&&t===kN&&cH())return pH();if(!e)throw Uu.create("no-app",{appName:t});return e}function Tue(){return Array.from(H0.values())}function Xa(t,e,n){let r=wue[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wc.warn(a.join(" "));return}Ku(new bc(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sue="firebase-heartbeat-database",Cue=1,q0="firebase-heartbeat-store";let PS=null;function gH(){return PS||(PS=$ce(Sue,Cue,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(q0)}catch(n){console.warn(n)}}}}).catch(t=>{throw Uu.create("idb-open",{originalErrorMessage:t.message})})),PS}async function Aue(t){try{const n=(await gH()).transaction(q0),r=await n.objectStore(q0).get(yH(t));return await n.done,r}catch(e){if(e instanceof Tl)wc.warn(e.message);else{const n=Uu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wc.warn(n.message)}}}async function GM(t,e){try{const r=(await gH()).transaction(q0,"readwrite");await r.objectStore(q0).put(e,yH(t)),await r.done}catch(n){if(n instanceof Tl)wc.warn(n.message);else{const r=Uu.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wc.warn(r.message)}}}function yH(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nue=1024,kue=30;class Iue{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jue(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=WM();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>kue){const a=Pue(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){wc.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=WM(),{heartbeatsToSend:r,unsentEntries:i}=Oue(this._heartbeatsCache.heartbeats),s=fx(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return wc.warn(n),""}}}function WM(){return new Date().toISOString().substring(0,10)}function Oue(t,e=Nue){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),KM(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),KM(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class jue{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mce()?pce().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Aue(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return GM(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return GM(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function KM(t){return fx(JSON.stringify({version:2,heartbeats:t})).length}function Pue(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rue(t){Ku(new bc("platform-logger",e=>new qce(e),"PRIVATE")),Ku(new bc("heartbeat",e=>new Iue(e),"PRIVATE")),Xa(NN,HM,t),Xa(NN,HM,"esm2020"),Xa("fire-js","")}Rue("");var YM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bu,vH;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,k){function M(){}M.prototype=k.prototype,A.F=k.prototype,A.prototype=new M,A.prototype.constructor=A,A.D=function(V,U,z){for(var $=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)$[ne-2]=arguments[ne];return k.prototype[U].apply(V,$)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,k,M){M||(M=0);const V=Array(16);if(typeof k=="string")for(var U=0;U<16;++U)V[U]=k.charCodeAt(M++)|k.charCodeAt(M++)<<8|k.charCodeAt(M++)<<16|k.charCodeAt(M++)<<24;else for(U=0;U<16;++U)V[U]=k[M++]|k[M++]<<8|k[M++]<<16|k[M++]<<24;k=A.g[0],M=A.g[1],U=A.g[2];let z=A.g[3],$;$=k+(z^M&(U^z))+V[0]+3614090360&4294967295,k=M+($<<7&4294967295|$>>>25),$=z+(U^k&(M^U))+V[1]+3905402710&4294967295,z=k+($<<12&4294967295|$>>>20),$=U+(M^z&(k^M))+V[2]+606105819&4294967295,U=z+($<<17&4294967295|$>>>15),$=M+(k^U&(z^k))+V[3]+3250441966&4294967295,M=U+($<<22&4294967295|$>>>10),$=k+(z^M&(U^z))+V[4]+4118548399&4294967295,k=M+($<<7&4294967295|$>>>25),$=z+(U^k&(M^U))+V[5]+1200080426&4294967295,z=k+($<<12&4294967295|$>>>20),$=U+(M^z&(k^M))+V[6]+2821735955&4294967295,U=z+($<<17&4294967295|$>>>15),$=M+(k^U&(z^k))+V[7]+4249261313&4294967295,M=U+($<<22&4294967295|$>>>10),$=k+(z^M&(U^z))+V[8]+1770035416&4294967295,k=M+($<<7&4294967295|$>>>25),$=z+(U^k&(M^U))+V[9]+2336552879&4294967295,z=k+($<<12&4294967295|$>>>20),$=U+(M^z&(k^M))+V[10]+4294925233&4294967295,U=z+($<<17&4294967295|$>>>15),$=M+(k^U&(z^k))+V[11]+2304563134&4294967295,M=U+($<<22&4294967295|$>>>10),$=k+(z^M&(U^z))+V[12]+1804603682&4294967295,k=M+($<<7&4294967295|$>>>25),$=z+(U^k&(M^U))+V[13]+4254626195&4294967295,z=k+($<<12&4294967295|$>>>20),$=U+(M^z&(k^M))+V[14]+2792965006&4294967295,U=z+($<<17&4294967295|$>>>15),$=M+(k^U&(z^k))+V[15]+1236535329&4294967295,M=U+($<<22&4294967295|$>>>10),$=k+(U^z&(M^U))+V[1]+4129170786&4294967295,k=M+($<<5&4294967295|$>>>27),$=z+(M^U&(k^M))+V[6]+3225465664&4294967295,z=k+($<<9&4294967295|$>>>23),$=U+(k^M&(z^k))+V[11]+643717713&4294967295,U=z+($<<14&4294967295|$>>>18),$=M+(z^k&(U^z))+V[0]+3921069994&4294967295,M=U+($<<20&4294967295|$>>>12),$=k+(U^z&(M^U))+V[5]+3593408605&4294967295,k=M+($<<5&4294967295|$>>>27),$=z+(M^U&(k^M))+V[10]+38016083&4294967295,z=k+($<<9&4294967295|$>>>23),$=U+(k^M&(z^k))+V[15]+3634488961&4294967295,U=z+($<<14&4294967295|$>>>18),$=M+(z^k&(U^z))+V[4]+3889429448&4294967295,M=U+($<<20&4294967295|$>>>12),$=k+(U^z&(M^U))+V[9]+568446438&4294967295,k=M+($<<5&4294967295|$>>>27),$=z+(M^U&(k^M))+V[14]+3275163606&4294967295,z=k+($<<9&4294967295|$>>>23),$=U+(k^M&(z^k))+V[3]+4107603335&4294967295,U=z+($<<14&4294967295|$>>>18),$=M+(z^k&(U^z))+V[8]+1163531501&4294967295,M=U+($<<20&4294967295|$>>>12),$=k+(U^z&(M^U))+V[13]+2850285829&4294967295,k=M+($<<5&4294967295|$>>>27),$=z+(M^U&(k^M))+V[2]+4243563512&4294967295,z=k+($<<9&4294967295|$>>>23),$=U+(k^M&(z^k))+V[7]+1735328473&4294967295,U=z+($<<14&4294967295|$>>>18),$=M+(z^k&(U^z))+V[12]+2368359562&4294967295,M=U+($<<20&4294967295|$>>>12),$=k+(M^U^z)+V[5]+4294588738&4294967295,k=M+($<<4&4294967295|$>>>28),$=z+(k^M^U)+V[8]+2272392833&4294967295,z=k+($<<11&4294967295|$>>>21),$=U+(z^k^M)+V[11]+1839030562&4294967295,U=z+($<<16&4294967295|$>>>16),$=M+(U^z^k)+V[14]+4259657740&4294967295,M=U+($<<23&4294967295|$>>>9),$=k+(M^U^z)+V[1]+2763975236&4294967295,k=M+($<<4&4294967295|$>>>28),$=z+(k^M^U)+V[4]+1272893353&4294967295,z=k+($<<11&4294967295|$>>>21),$=U+(z^k^M)+V[7]+4139469664&4294967295,U=z+($<<16&4294967295|$>>>16),$=M+(U^z^k)+V[10]+3200236656&4294967295,M=U+($<<23&4294967295|$>>>9),$=k+(M^U^z)+V[13]+681279174&4294967295,k=M+($<<4&4294967295|$>>>28),$=z+(k^M^U)+V[0]+3936430074&4294967295,z=k+($<<11&4294967295|$>>>21),$=U+(z^k^M)+V[3]+3572445317&4294967295,U=z+($<<16&4294967295|$>>>16),$=M+(U^z^k)+V[6]+76029189&4294967295,M=U+($<<23&4294967295|$>>>9),$=k+(M^U^z)+V[9]+3654602809&4294967295,k=M+($<<4&4294967295|$>>>28),$=z+(k^M^U)+V[12]+3873151461&4294967295,z=k+($<<11&4294967295|$>>>21),$=U+(z^k^M)+V[15]+530742520&4294967295,U=z+($<<16&4294967295|$>>>16),$=M+(U^z^k)+V[2]+3299628645&4294967295,M=U+($<<23&4294967295|$>>>9),$=k+(U^(M|~z))+V[0]+4096336452&4294967295,k=M+($<<6&4294967295|$>>>26),$=z+(M^(k|~U))+V[7]+1126891415&4294967295,z=k+($<<10&4294967295|$>>>22),$=U+(k^(z|~M))+V[14]+2878612391&4294967295,U=z+($<<15&4294967295|$>>>17),$=M+(z^(U|~k))+V[5]+4237533241&4294967295,M=U+($<<21&4294967295|$>>>11),$=k+(U^(M|~z))+V[12]+1700485571&4294967295,k=M+($<<6&4294967295|$>>>26),$=z+(M^(k|~U))+V[3]+2399980690&4294967295,z=k+($<<10&4294967295|$>>>22),$=U+(k^(z|~M))+V[10]+4293915773&4294967295,U=z+($<<15&4294967295|$>>>17),$=M+(z^(U|~k))+V[1]+2240044497&4294967295,M=U+($<<21&4294967295|$>>>11),$=k+(U^(M|~z))+V[8]+1873313359&4294967295,k=M+($<<6&4294967295|$>>>26),$=z+(M^(k|~U))+V[15]+4264355552&4294967295,z=k+($<<10&4294967295|$>>>22),$=U+(k^(z|~M))+V[6]+2734768916&4294967295,U=z+($<<15&4294967295|$>>>17),$=M+(z^(U|~k))+V[13]+1309151649&4294967295,M=U+($<<21&4294967295|$>>>11),$=k+(U^(M|~z))+V[4]+4149444226&4294967295,k=M+($<<6&4294967295|$>>>26),$=z+(M^(k|~U))+V[11]+3174756917&4294967295,z=k+($<<10&4294967295|$>>>22),$=U+(k^(z|~M))+V[2]+718787259&4294967295,U=z+($<<15&4294967295|$>>>17),$=M+(z^(U|~k))+V[9]+3951481745&4294967295,A.g[0]=A.g[0]+k&4294967295,A.g[1]=A.g[1]+(U+($<<21&4294967295|$>>>11))&4294967295,A.g[2]=A.g[2]+U&4294967295,A.g[3]=A.g[3]+z&4294967295}r.prototype.v=function(A,k){k===void 0&&(k=A.length);const M=k-this.blockSize,V=this.C;let U=this.h,z=0;for(;z<k;){if(U==0)for(;z<=M;)i(this,A,z),z+=this.blockSize;if(typeof A=="string"){for(;z<k;)if(V[U++]=A.charCodeAt(z++),U==this.blockSize){i(this,V),U=0;break}}else for(;z<k;)if(V[U++]=A[z++],U==this.blockSize){i(this,V),U=0;break}}this.h=U,this.o+=k},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var k=1;k<A.length-8;++k)A[k]=0;k=this.o*8;for(var M=A.length-8;M<A.length;++M)A[M]=k&255,k/=256;for(this.v(A),A=Array(16),k=0,M=0;M<4;++M)for(let V=0;V<32;V+=8)A[k++]=this.g[M]>>>V&255;return A};function s(A,k){var M=l;return Object.prototype.hasOwnProperty.call(M,A)?M[A]:M[A]=k(A)}function a(A,k){this.h=k;const M=[];let V=!0;for(let U=A.length-1;U>=0;U--){const z=A[U]|0;V&&z==k||(M[U]=z,V=!1)}this.g=M}var l={};function u(A){return-128<=A&&A<128?s(A,function(k){return new a([k|0],k<0?-1:0)}):new a([A|0],A<0?-1:0)}function d(A){if(isNaN(A)||!isFinite(A))return p;if(A<0)return E(d(-A));const k=[];let M=1;for(let V=0;A>=M;V++)k[V]=A/M|0,M*=4294967296;return new a(k,0)}function h(A,k){if(A.length==0)throw Error("number format error: empty string");if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(A.charAt(0)=="-")return E(h(A.substring(1),k));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=d(Math.pow(k,8));let V=p;for(let z=0;z<A.length;z+=8){var U=Math.min(8,A.length-z);const $=parseInt(A.substring(z,z+U),k);U<8?(U=d(Math.pow(k,U)),V=V.j(U).add(d($))):(V=V.j(M),V=V.add(d($)))}return V}var p=u(0),y=u(1),v=u(16777216);t=a.prototype,t.m=function(){if(_(this))return-E(this).m();let A=0,k=1;for(let M=0;M<this.g.length;M++){const V=this.i(M);A+=(V>=0?V:4294967296+V)*k,k*=4294967296}return A},t.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(w(this))return"0";if(_(this))return"-"+E(this).toString(A);const k=d(Math.pow(A,6));var M=this;let V="";for(;;){const U=R(M,k).g;M=C(M,U.j(k));let z=((M.g.length>0?M.g[0]:M.h)>>>0).toString(A);if(M=U,w(M))return z+V;for(;z.length<6;)z="0"+z;V=z+V}},t.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function w(A){if(A.h!=0)return!1;for(let k=0;k<A.g.length;k++)if(A.g[k]!=0)return!1;return!0}function _(A){return A.h==-1}t.l=function(A){return A=C(this,A),_(A)?-1:w(A)?0:1};function E(A){const k=A.g.length,M=[];for(let V=0;V<k;V++)M[V]=~A.g[V];return new a(M,~A.h).add(y)}t.abs=function(){return _(this)?E(this):this},t.add=function(A){const k=Math.max(this.g.length,A.g.length),M=[];let V=0;for(let U=0;U<=k;U++){let z=V+(this.i(U)&65535)+(A.i(U)&65535),$=(z>>>16)+(this.i(U)>>>16)+(A.i(U)>>>16);V=$>>>16,z&=65535,$&=65535,M[U]=$<<16|z}return new a(M,M[M.length-1]&-2147483648?-1:0)};function C(A,k){return A.add(E(k))}t.j=function(A){if(w(this)||w(A))return p;if(_(this))return _(A)?E(this).j(E(A)):E(E(this).j(A));if(_(A))return E(this.j(E(A)));if(this.l(v)<0&&A.l(v)<0)return d(this.m()*A.m());const k=this.g.length+A.g.length,M=[];for(var V=0;V<2*k;V++)M[V]=0;for(V=0;V<this.g.length;V++)for(let U=0;U<A.g.length;U++){const z=this.i(V)>>>16,$=this.i(V)&65535,ne=A.i(U)>>>16,fe=A.i(U)&65535;M[2*V+2*U]+=$*fe,N(M,2*V+2*U),M[2*V+2*U+1]+=z*fe,N(M,2*V+2*U+1),M[2*V+2*U+1]+=$*ne,N(M,2*V+2*U+1),M[2*V+2*U+2]+=z*ne,N(M,2*V+2*U+2)}for(A=0;A<k;A++)M[A]=M[2*A+1]<<16|M[2*A];for(A=k;A<2*k;A++)M[A]=0;return new a(M,0)};function N(A,k){for(;(A[k]&65535)!=A[k];)A[k+1]+=A[k]>>>16,A[k]&=65535,k++}function O(A,k){this.g=A,this.h=k}function R(A,k){if(w(k))throw Error("division by zero");if(w(A))return new O(p,p);if(_(A))return k=R(E(A),k),new O(E(k.g),E(k.h));if(_(k))return k=R(A,E(k)),new O(E(k.g),k.h);if(A.g.length>30){if(_(A)||_(k))throw Error("slowDivide_ only works with positive integers.");for(var M=y,V=k;V.l(A)<=0;)M=D(M),V=D(V);var U=P(M,1),z=P(V,1);for(V=P(V,2),M=P(M,2);!w(V);){var $=z.add(V);$.l(A)<=0&&(U=U.add(M),z=$),V=P(V,1),M=P(M,1)}return k=C(A,U.j(k)),new O(U,k)}for(U=p;A.l(k)>=0;){for(M=Math.max(1,Math.floor(A.m()/k.m())),V=Math.ceil(Math.log(M)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),z=d(M),$=z.j(k);_($)||$.l(A)>0;)M-=V,z=d(M),$=z.j(k);w(z)&&(z=y),U=U.add(z),A=C(A,$)}return new O(U,A)}t.B=function(A){return R(this,A).h},t.and=function(A){const k=Math.max(this.g.length,A.g.length),M=[];for(let V=0;V<k;V++)M[V]=this.i(V)&A.i(V);return new a(M,this.h&A.h)},t.or=function(A){const k=Math.max(this.g.length,A.g.length),M=[];for(let V=0;V<k;V++)M[V]=this.i(V)|A.i(V);return new a(M,this.h|A.h)},t.xor=function(A){const k=Math.max(this.g.length,A.g.length),M=[];for(let V=0;V<k;V++)M[V]=this.i(V)^A.i(V);return new a(M,this.h^A.h)};function D(A){const k=A.g.length+1,M=[];for(let V=0;V<k;V++)M[V]=A.i(V)<<1|A.i(V-1)>>>31;return new a(M,A.h)}function P(A,k){const M=k>>5;k%=32;const V=A.g.length-M,U=[];for(let z=0;z<V;z++)U[z]=k>0?A.i(z+M)>>>k|A.i(z+M+1)<<32-k:A.i(z+M);return new a(U,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,vH=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,Bu=a}).apply(typeof YM<"u"?YM:typeof self<"u"?self:typeof window<"u"?window:{});var Qb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bH,d0,wH,Hw,ON,xH,_H,EH;(function(){var t,e=Object.defineProperty;function n(b){b=[typeof globalThis=="object"&&globalThis,b,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qb=="object"&&Qb];for(var I=0;I<b.length;++I){var L=b[I];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}var r=n(this);function i(b,I){if(I)e:{var L=r;b=b.split(".");for(var H=0;H<b.length-1;H++){var ie=b[H];if(!(ie in L))break e;L=L[ie]}b=b[b.length-1],H=L[b],I=I(H),I!=H&&I!=null&&e(L,b,{configurable:!0,writable:!0,value:I})}}i("Symbol.dispose",function(b){return b||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(b){return b||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(b){return b||function(I){var L=[],H;for(H in I)Object.prototype.hasOwnProperty.call(I,H)&&L.push([H,I[H]]);return L}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(b){var I=typeof b;return I=="object"&&b!=null||I=="function"}function u(b,I,L){return b.call.apply(b.bind,arguments)}function d(b,I,L){return d=u,d.apply(null,arguments)}function h(b,I){var L=Array.prototype.slice.call(arguments,1);return function(){var H=L.slice();return H.push.apply(H,arguments),b.apply(this,H)}}function p(b,I){function L(){}L.prototype=I.prototype,b.Z=I.prototype,b.prototype=new L,b.prototype.constructor=b,b.Ob=function(H,ie,me){for(var Me=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)Me[Et-2]=arguments[Et];return I.prototype[ie].apply(H,Me)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?b=>b&&AsyncContext.Snapshot.wrap(b):b=>b;function v(b){const I=b.length;if(I>0){const L=Array(I);for(let H=0;H<I;H++)L[H]=b[H];return L}return[]}function w(b,I){for(let H=1;H<arguments.length;H++){const ie=arguments[H];var L=typeof ie;if(L=L!="object"?L:ie?Array.isArray(ie)?"array":L:"null",L=="array"||L=="object"&&typeof ie.length=="number"){L=b.length||0;const me=ie.length||0;b.length=L+me;for(let Me=0;Me<me;Me++)b[L+Me]=ie[Me]}else b.push(ie)}}class _{constructor(I,L){this.i=I,this.j=L,this.h=0,this.g=null}get(){let I;return this.h>0?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function E(b){a.setTimeout(()=>{throw b},0)}function C(){var b=A;let I=null;return b.g&&(I=b.g,b.g=b.g.next,b.g||(b.h=null),I.next=null),I}class N{constructor(){this.h=this.g=null}add(I,L){const H=O.get();H.set(I,L),this.h?this.h.next=H:this.g=H,this.h=H}}var O=new _(()=>new R,b=>b.reset());class R{constructor(){this.next=this.g=this.h=null}set(I,L){this.h=I,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let D,P=!1,A=new N,k=()=>{const b=Promise.resolve(void 0);D=()=>{b.then(M)}};function M(){for(var b;b=C();){try{b.h.call(b.g)}catch(L){E(L)}var I=O;I.j(b),I.h<100&&(I.h++,b.next=I.g,I.g=b)}P=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(b,I){this.type=b,this.g=this.target=I,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var b=!1,I=Object.defineProperty({},"passive",{get:function(){b=!0}});try{const L=()=>{};a.addEventListener("test",L,I),a.removeEventListener("test",L,I)}catch{}return b})();function $(b){return/^[\s\xa0]*$/.test(b)}function ne(b,I){U.call(this,b?b.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,b&&this.init(b,I)}p(ne,U),ne.prototype.init=function(b,I){const L=this.type=b.type,H=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:null;this.target=b.target||b.srcElement,this.g=I,I=b.relatedTarget,I||(L=="mouseover"?I=b.fromElement:L=="mouseout"&&(I=b.toElement)),this.relatedTarget=I,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0),this.button=b.button,this.key=b.key||"",this.ctrlKey=b.ctrlKey,this.altKey=b.altKey,this.shiftKey=b.shiftKey,this.metaKey=b.metaKey,this.pointerId=b.pointerId||0,this.pointerType=b.pointerType,this.state=b.state,this.i=b,b.defaultPrevented&&ne.Z.h.call(this)},ne.prototype.h=function(){ne.Z.h.call(this);const b=this.i;b.preventDefault?b.preventDefault():b.returnValue=!1};var fe="closure_listenable_"+(Math.random()*1e6|0),K=0;function W(b,I,L,H,ie){this.listener=b,this.proxy=null,this.src=I,this.type=L,this.capture=!!H,this.ha=ie,this.key=++K,this.da=this.fa=!1}function ee(b){b.da=!0,b.listener=null,b.proxy=null,b.src=null,b.ha=null}function oe(b,I,L){for(const H in b)I.call(L,b[H],H,b)}function pe(b,I){for(const L in b)I.call(void 0,b[L],L,b)}function B(b){const I={};for(const L in b)I[L]=b[L];return I}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function G(b,I){let L,H;for(let ie=1;ie<arguments.length;ie++){H=arguments[ie];for(L in H)b[L]=H[L];for(let me=0;me<X.length;me++)L=X[me],Object.prototype.hasOwnProperty.call(H,L)&&(b[L]=H[L])}}function Q(b){this.src=b,this.g={},this.h=0}Q.prototype.add=function(b,I,L,H,ie){const me=b.toString();b=this.g[me],b||(b=this.g[me]=[],this.h++);const Me=_e(b,I,H,ie);return Me>-1?(I=b[Me],L||(I.fa=!1)):(I=new W(I,this.src,me,!!H,ie),I.fa=L,b.push(I)),I};function re(b,I){const L=I.type;if(L in b.g){var H=b.g[L],ie=Array.prototype.indexOf.call(H,I,void 0),me;(me=ie>=0)&&Array.prototype.splice.call(H,ie,1),me&&(ee(I),b.g[L].length==0&&(delete b.g[L],b.h--))}}function _e(b,I,L,H){for(let ie=0;ie<b.length;++ie){const me=b[ie];if(!me.da&&me.listener==I&&me.capture==!!L&&me.ha==H)return ie}return-1}var Se="closure_lm_"+(Math.random()*1e6|0),ce={};function Z(b,I,L,H,ie){if(Array.isArray(I)){for(let me=0;me<I.length;me++)Z(b,I[me],L,H,ie);return null}return L=Ke(L),b&&b[fe]?b.J(I,L,l(H)?!!H.capture:!1,ie):ke(b,I,L,!1,H,ie)}function ke(b,I,L,H,ie,me){if(!I)throw Error("Invalid event type");const Me=l(ie)?!!ie.capture:!!ie;let Et=rt(b);if(Et||(b[Se]=Et=new Q(b)),L=Et.add(I,L,H,Me,me),L.proxy)return L;if(H=Le(),L.proxy=H,H.src=b,H.listener=L,b.addEventListener)z||(ie=Me),ie===void 0&&(ie=!1),b.addEventListener(I.toString(),H,ie);else if(b.attachEvent)b.attachEvent(Ae(I.toString()),H);else if(b.addListener&&b.removeListener)b.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return L}function Le(){function b(L){return I.call(b.src,b.listener,L)}const I=Ze;return b}function ye(b,I,L,H,ie){if(Array.isArray(I))for(var me=0;me<I.length;me++)ye(b,I[me],L,H,ie);else H=l(H)?!!H.capture:!!H,L=Ke(L),b&&b[fe]?(b=b.i,me=String(I).toString(),me in b.g&&(I=b.g[me],L=_e(I,L,H,ie),L>-1&&(ee(I[L]),Array.prototype.splice.call(I,L,1),I.length==0&&(delete b.g[me],b.h--)))):b&&(b=rt(b))&&(I=b.g[I.toString()],b=-1,I&&(b=_e(I,L,H,ie)),(L=b>-1?I[b]:null)&&ze(L))}function ze(b){if(typeof b!="number"&&b&&!b.da){var I=b.src;if(I&&I[fe])re(I.i,b);else{var L=b.type,H=b.proxy;I.removeEventListener?I.removeEventListener(L,H,b.capture):I.detachEvent?I.detachEvent(Ae(L),H):I.addListener&&I.removeListener&&I.removeListener(H),(L=rt(I))?(re(L,b),L.h==0&&(L.src=null,I[Se]=null)):ee(b)}}}function Ae(b){return b in ce?ce[b]:ce[b]="on"+b}function Ze(b,I){if(b.da)b=!0;else{I=new ne(I,this);const L=b.listener,H=b.ha||b.src;b.fa&&ze(b),b=L.call(H,I)}return b}function rt(b){return b=b[Se],b instanceof Q?b:null}var it="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ke(b){return typeof b=="function"?b:(b[it]||(b[it]=function(I){return b.handleEvent(I)}),b[it])}function lt(){V.call(this),this.i=new Q(this),this.M=this,this.G=null}p(lt,V),lt.prototype[fe]=!0,lt.prototype.removeEventListener=function(b,I,L,H){ye(this,b,I,L,H)};function xt(b,I){var L,H=b.G;if(H)for(L=[];H;H=H.G)L.push(H);if(b=b.M,H=I.type||I,typeof I=="string")I=new U(I,b);else if(I instanceof U)I.target=I.target||b;else{var ie=I;I=new U(H,b),G(I,ie)}ie=!0;let me,Me;if(L)for(Me=L.length-1;Me>=0;Me--)me=I.g=L[Me],ie=Sr(me,H,!0,I)&&ie;if(me=I.g=b,ie=Sr(me,H,!0,I)&&ie,ie=Sr(me,H,!1,I)&&ie,L)for(Me=0;Me<L.length;Me++)me=I.g=L[Me],ie=Sr(me,H,!1,I)&&ie}lt.prototype.N=function(){if(lt.Z.N.call(this),this.i){var b=this.i;for(const I in b.g){const L=b.g[I];for(let H=0;H<L.length;H++)ee(L[H]);delete b.g[I],b.h--}}this.G=null},lt.prototype.J=function(b,I,L,H){return this.i.add(String(b),I,!1,L,H)},lt.prototype.K=function(b,I,L,H){return this.i.add(String(b),I,!0,L,H)};function Sr(b,I,L,H){if(I=b.i.g[String(I)],!I)return!0;I=I.concat();let ie=!0;for(let me=0;me<I.length;++me){const Me=I[me];if(Me&&!Me.da&&Me.capture==L){const Et=Me.listener,Ar=Me.ha||Me.src;Me.fa&&re(b.i,Me),ie=Et.call(Ar,H)!==!1&&ie}}return ie&&!H.defaultPrevented}function Un(b,I){if(typeof b!="function")if(b&&typeof b.handleEvent=="function")b=d(b.handleEvent,b);else throw Error("Invalid listener argument");return Number(I)>2147483647?-1:a.setTimeout(b,I||0)}function hr(b){b.g=Un(()=>{b.g=null,b.i&&(b.i=!1,hr(b))},b.l);const I=b.h;b.h=null,b.m.apply(null,I)}class Ht extends V{constructor(I,L){super(),this.m=I,this.l=L,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:hr(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fr(b){V.call(this),this.h=b,this.g={}}p(fr,V);var ei=[];function cs(b){oe(b.g,function(I,L){this.g.hasOwnProperty(L)&&ze(I)},b),b.g={}}fr.prototype.N=function(){fr.Z.N.call(this),cs(this)},fr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var se=a.JSON.stringify,Ie=a.JSON.parse,mt=class{stringify(b){return a.JSON.stringify(b,void 0)}parse(b){return a.JSON.parse(b,void 0)}};function gn(){}function Ft(){}var ti={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kn(){U.call(this,"d")}p(Kn,U);function hi(){U.call(this,"c")}p(hi,U);var Qt={},$c=null;function Ss(){return $c=$c||new lt}Qt.Ia="serverreachability";function us(b){U.call(this,Qt.Ia,b)}p(us,U);function ds(b){const I=Ss();xt(I,new us(I))}Qt.STAT_EVENT="statevent";function xa(b,I){U.call(this,Qt.STAT_EVENT,b),this.stat=I}p(xa,U);function Cn(b){const I=Ss();xt(I,new xa(I,b))}Qt.Ja="timingevent";function Fi(b,I){U.call(this,Qt.Ja,b),this.size=I}p(Fi,U);function et(b,I){if(typeof b!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){b()},I)}function qt(){this.g=!0}qt.prototype.ua=function(){this.g=!1};function mr(b,I,L,H,ie,me){b.info(function(){if(b.g)if(me){var Me="",Et=me.split("&");for(let Zt=0;Zt<Et.length;Zt++){var Ar=Et[Zt].split("=");if(Ar.length>1){const Yn=Ar[0];Ar=Ar[1];const ka=Yn.split("_");Me=ka.length>=2&&ka[1]=="type"?Me+(Yn+"="+Ar+"&"):Me+(Yn+"=redacted&")}}}else Me=null;else Me=me;return"XMLHTTP REQ ("+H+") [attempt "+ie+"]: "+I+`
`+L+`
`+Me})}function pr(b,I,L,H,ie,me,Me){b.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+ie+"]: "+I+`
`+L+`
`+me+" "+Me})}function sr(b,I,L,H){b.info(function(){return"XMLHTTP TEXT ("+I+"): "+Cr(b,L)+(H?" "+H:"")})}function An(b,I){b.info(function(){return"TIMEOUT: "+I})}qt.prototype.info=function(){};function Cr(b,I){if(!b.g)return I;if(!I)return null;try{const me=JSON.parse(I);if(me){for(b=0;b<me.length;b++)if(Array.isArray(me[b])){var L=me[b];if(!(L.length<2)){var H=L[1];if(Array.isArray(H)&&!(H.length<1)){var ie=H[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(let Me=1;Me<H.length;Me++)H[Me]=""}}}}return se(me)}catch{return I}}var hs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},gr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Mr;function Ai(){}p(Ai,gn),Ai.prototype.g=function(){return new XMLHttpRequest},Mr=new Ai;function Lr(b){return encodeURIComponent(String(b))}function Fc(b){var I=1;b=b.split(":");const L=[];for(;I>0&&b.length;)L.push(b.shift()),I--;return b.length&&L.push(b.join(":")),L}function Cs(b,I,L,H){this.j=b,this.i=I,this.l=L,this.S=H||1,this.V=new fr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Hi}function Hi(){this.i=null,this.g="",this.h=!1}var yr={},Pn={};function qi(b,I,L){b.M=1,b.A=Il(br(I)),b.u=L,b.R=!0,Ws(b,null)}function Ws(b,I){b.F=Date.now(),Ks(b),b.B=br(b.A);var L=b.B,H=b.S;Array.isArray(H)||(H=[String(H)]),ar(L.i,"t",H),b.C=0,L=b.j.L,b.h=new Hi,b.g=Uv(b.j,L?I:null,!b.u),b.P>0&&(b.O=new Ht(d(b.Y,b,b.g),b.P)),I=b.V,L=b.g,H=b.ba;var ie="readystatechange";Array.isArray(ie)||(ie&&(ei[0]=ie.toString()),ie=ei);for(let me=0;me<ie.length;me++){const Me=Z(L,ie[me],H||I.handleEvent,!1,I.h||I);if(!Me)break;I.g[Me.key]=Me}I=b.J?B(b.J):{},b.u?(b.v||(b.v="POST"),I["Content-Type"]="application/x-www-form-urlencoded",b.g.ea(b.B,b.v,b.u,I)):(b.v="GET",b.g.ea(b.B,b.v,null,I)),ds(),mr(b.i,b.v,b.B,b.l,b.S,b.u)}Cs.prototype.ba=function(b){b=b.target;const I=this.O;I&&so(b)==3?I.j():this.Y(b)},Cs.prototype.Y=function(b){try{if(b==this.g)e:{const Et=so(this.g),Ar=this.g.ya(),Zt=this.g.ca();if(!(Et<3)&&(Et!=3||this.g&&(this.h.h||this.g.la()||ki(this.g)))){this.K||Et!=4||Ar==7||(Ar==8||Zt<=0?ds(3):ds(2)),Ea(this);var I=this.g.ca();this.X=I;var L=rg(this);if(this.o=I==200,pr(this.i,this.v,this.B,this.l,this.S,Et,I),this.o){if(this.U&&!this.L){t:{if(this.g){var H,ie=this.g;if((H=ie.g?ie.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(H)){var me=H;break t}}me=null}if(b=me)sr(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ta(this,b);else{this.o=!1,this.m=3,Cn(12),fs(this),As(this);break e}}if(this.R){b=!0;let Yn;for(;!this.K&&this.C<L.length;)if(Yn=xd(this,L),Yn==Pn){Et==4&&(this.m=4,Cn(14),b=!1),sr(this.i,this.l,null,"[Incomplete Response]");break}else if(Yn==yr){this.m=4,Cn(15),sr(this.i,this.l,L,"[Invalid Chunk]"),b=!1;break}else sr(this.i,this.l,Yn,null),Ta(this,Yn);if(Nl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Et!=4||L.length!=0||this.h.h||(this.m=1,Cn(16),b=!1),this.o=this.o&&b,!b)sr(this.i,this.l,L,"[Invalid Chunked Response]"),fs(this),As(this);else if(L.length>0&&!this.W){this.W=!0;var Me=this.j;Me.g==this&&Me.aa&&!Me.P&&(Me.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),cg(Me),Me.P=!0,Cn(11))}}else sr(this.i,this.l,L,null),Ta(this,L);Et==4&&fs(this),this.o&&!this.K&&(Et==4?Dv(this.j,this):(this.o=!1,Ks(this)))}else Pl(this.g),I==400&&L.indexOf("Unknown SID")>0?(this.m=3,Cn(12)):(this.m=0,Cn(13)),fs(this),As(this)}}}catch{}finally{}};function rg(b){if(!Nl(b))return b.g.la();const I=ki(b.g);if(I==="")return"";let L="";const H=I.length,ie=so(b.g)==4;if(!b.h.i){if(typeof TextDecoder>"u")return fs(b),As(b),"";b.h.i=new a.TextDecoder}for(let me=0;me<H;me++)b.h.h=!0,L+=b.h.i.decode(I[me],{stream:!(ie&&me==H-1)});return I.length=0,b.h.g+=L,b.C=0,b.h.g}function Nl(b){return b.g?b.v=="GET"&&b.M!=2&&b.j.Aa:!1}function xd(b,I){var L=b.C,H=I.indexOf(`
`,L);return H==-1?Pn:(L=Number(I.substring(L,H)),isNaN(L)?yr:(H+=1,H+L>I.length?Pn:(I=I.slice(H,H+L),b.C=H+L,I)))}Cs.prototype.cancel=function(){this.K=!0,fs(this)};function Ks(b){b.T=Date.now()+b.H,_a(b,b.H)}function _a(b,I){if(b.D!=null)throw Error("WatchDog timer not null");b.D=et(d(b.aa,b),I)}function Ea(b){b.D&&(a.clearTimeout(b.D),b.D=null)}Cs.prototype.aa=function(){this.D=null;const b=Date.now();b-this.T>=0?(An(this.i,this.B),this.M!=2&&(ds(),Cn(17)),fs(this),this.m=2,As(this)):_a(this,this.T-b)};function As(b){b.j.I==0||b.K||Dv(b.j,b)}function fs(b){Ea(b);var I=b.O;I&&typeof I.dispose=="function"&&I.dispose(),b.O=null,cs(b.V),b.g&&(I=b.g,b.g=null,I.abort(),I.dispose())}function Ta(b,I){try{var L=b.j;if(L.I!=0&&(L.g==b||Gi(L.h,b))){if(!b.L&&Gi(L.h,b)&&L.I==3){try{var H=L.Ba.g.parse(I)}catch{H=null}if(Array.isArray(H)&&H.length==3){var ie=H;if(ie[0]==0){e:if(!L.v){if(L.g)if(L.g.F+3e3<b.F)yf(L),Qc(L);else break e;Od(L),Cn(18)}}else L.xa=ie[1],0<L.xa-L.K&&ie[2]<37500&&L.F&&L.A==0&&!L.C&&(L.C=et(d(L.Va,L),6e3));Ys(L.h)<=1&&L.ta&&(L.ta=void 0)}else Wo(L,11)}else if((b.L||L.g==b)&&yf(L),!$(I))for(ie=L.Ba.g.parse(I),I=0;I<ie.length;I++){let Zt=ie[I];const Yn=Zt[0];if(!(Yn<=L.K))if(L.K=Yn,Zt=Zt[1],L.I==2)if(Zt[0]=="c"){L.M=Zt[1],L.ba=Zt[2];const ka=Zt[3];ka!=null&&(L.ka=ka,L.j.info("VER="+L.ka));const Ko=Zt[4];Ko!=null&&(L.za=Ko,L.j.info("SVER="+L.za));const ao=Zt[5];ao!=null&&typeof ao=="number"&&ao>0&&(H=1.5*ao,L.O=H,L.j.info("backChannelRequestTimeoutMs_="+H)),H=L;const oo=b.g;if(oo){const jd=oo.g?oo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jd){var me=H.h;me.g||jd.indexOf("spdy")==-1&&jd.indexOf("quic")==-1&&jd.indexOf("h2")==-1||(me.j=me.l,me.g=new Set,me.h&&(to(me,me.h),me.h=null))}if(H.G){const vf=oo.g?oo.g.getResponseHeader("X-HTTP-Session-Id"):null;vf&&(H.wa=vf,Jt(H.J,H.G,vf))}}L.I=3,L.l&&L.l.ra(),L.aa&&(L.T=Date.now()-b.F,L.j.info("Handshake RTT: "+L.T+"ms")),H=L;var Me=b;if(H.na=Vv(H,H.L?H.ba:null,H.W),Me.L){_d(H.h,Me);var Et=Me,Ar=H.O;Ar&&(Et.H=Ar),Et.D&&(Ea(Et),Ks(Et)),H.g=Me}else Pv(H);L.i.length>0&&Go(L)}else Zt[0]!="stop"&&Zt[0]!="close"||Wo(L,7);else L.I==3&&(Zt[0]=="stop"||Zt[0]=="close"?Zt[0]=="stop"?Wo(L,7):og(L):Zt[0]!="noop"&&L.l&&L.l.qa(Zt),L.A=0)}}ds(4)}catch{}}var vr=class{constructor(b,I){this.g=b,this.map=I}};function kl(b){this.l=b||10,a.PerformanceNavigationTiming?(b=a.performance.getEntriesByType("navigation"),b=b.length>0&&(b[0].nextHopProtocol=="hq"||b[0].nextHopProtocol=="h2")):b=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=b?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Sa(b){return b.h?!0:b.g?b.g.size>=b.j:!1}function Ys(b){return b.h?1:b.g?b.g.size:0}function Gi(b,I){return b.h?b.h==I:b.g?b.g.has(I):!1}function to(b,I){b.g?b.g.add(I):b.h=I}function _d(b,I){b.h&&b.h==I?b.h=null:b.g&&b.g.has(I)&&b.g.delete(I)}kl.prototype.cancel=function(){if(this.i=Ed(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const b of this.g.values())b.cancel();this.g.clear()}};function Ed(b){if(b.h!=null)return b.i.concat(b.h.G);if(b.g!=null&&b.g.size!==0){let I=b.i;for(const L of b.g.values())I=I.concat(L.G);return I}return v(b.i)}var hf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hc(b,I){if(b){b=b.split("&");for(let L=0;L<b.length;L++){const H=b[L].indexOf("=");let ie,me=null;H>=0?(ie=b[L].substring(0,H),me=b[L].substring(H+1)):ie=b[L],I(ie,me?decodeURIComponent(me.replace(/\+/g," ")):"")}}}function ms(b){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let I;b instanceof ms?(this.l=b.l,Vr(this,b.j),this.o=b.o,this.g=b.g,no(this,b.u),this.h=b.h,Td(this,Ca(b.i)),this.m=b.m):b&&(I=String(b).match(hf))?(this.l=!1,Vr(this,I[1]||"",!0),this.o=Ns(I[2]||""),this.g=Ns(I[3]||"",!0),no(this,I[4]),this.h=Ns(I[5]||"",!0),Td(this,I[6]||"",!0),this.m=Ns(I[7]||"")):(this.l=!1,this.i=new Ve(null,this.l))}ms.prototype.toString=function(){const b=[];var I=this.j;I&&b.push(Ol(I,qc,!0),":");var L=this.g;return(L||I=="file")&&(b.push("//"),(I=this.o)&&b.push(Ol(I,qc,!0),"@"),b.push(Lr(L).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),L=this.u,L!=null&&b.push(":",String(L))),(L=this.h)&&(this.g&&L.charAt(0)!="/"&&b.push("/"),b.push(Ol(L,L.charAt(0)=="/"?Gc:Sd,!0))),(L=this.i.toString())&&b.push("?",L),(L=this.m)&&b.push("#",Ol(L,xe)),b.join("")},ms.prototype.resolve=function(b){const I=br(this);let L=!!b.j;L?Vr(I,b.j):L=!!b.o,L?I.o=b.o:L=!!b.g,L?I.g=b.g:L=b.u!=null;var H=b.h;if(L)no(I,b.u);else if(L=!!b.h){if(H.charAt(0)!="/")if(this.g&&!this.h)H="/"+H;else{var ie=I.h.lastIndexOf("/");ie!=-1&&(H=I.h.slice(0,ie+1)+H)}if(ie=H,ie==".."||ie==".")H="";else if(ie.indexOf("./")!=-1||ie.indexOf("/.")!=-1){H=ie.lastIndexOf("/",0)==0,ie=ie.split("/");const me=[];for(let Me=0;Me<ie.length;){const Et=ie[Me++];Et=="."?H&&Me==ie.length&&me.push(""):Et==".."?((me.length>1||me.length==1&&me[0]!="")&&me.pop(),H&&Me==ie.length&&me.push("")):(me.push(Et),H=!0)}H=me.join("/")}else H=ie}return L?I.h=H:L=b.i.toString()!=="",L?Td(I,Ca(b.i)):L=!!b.m,L&&(I.m=b.m),I};function br(b){return new ms(b)}function Vr(b,I,L){b.j=L?Ns(I,!0):I,b.j&&(b.j=b.j.replace(/:$/,""))}function no(b,I){if(I){if(I=Number(I),isNaN(I)||I<0)throw Error("Bad port number "+I);b.u=I}else b.u=null}function Td(b,I,L){I instanceof Ve?(b.i=I,ff(b.i,b.l)):(L||(I=Ol(I,q)),b.i=new Ve(I,b.l))}function Jt(b,I,L){b.i.set(I,L)}function Il(b){return Jt(b,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),b}function Ns(b,I){return b?I?decodeURI(b.replace(/%25/g,"%2525")):decodeURIComponent(b):""}function Ol(b,I,L){return typeof b=="string"?(b=encodeURI(b).replace(I,Ni),L&&(b=b.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b):null}function Ni(b){return b=b.charCodeAt(0),"%"+(b>>4&15).toString(16)+(b&15).toString(16)}var qc=/[#\/\?@]/g,Sd=/[#\?:]/g,Gc=/[#\?]/g,q=/[#\?@]/g,xe=/#/g;function Ve(b,I){this.h=this.g=null,this.i=b||null,this.j=!!I}function $e(b){b.g||(b.g=new Map,b.h=0,b.i&&Hc(b.i,function(I,L){b.add(decodeURIComponent(I.replace(/\+/g," ")),L)}))}t=Ve.prototype,t.add=function(b,I){$e(this),this.i=null,b=Wc(this,b);let L=this.g.get(b);return L||this.g.set(b,L=[]),L.push(I),this.h+=1,this};function We(b,I){$e(b),I=Wc(b,I),b.g.has(I)&&(b.i=null,b.h-=b.g.get(I).length,b.g.delete(I))}function cn(b,I){return $e(b),I=Wc(b,I),b.g.has(I)}t.forEach=function(b,I){$e(this),this.g.forEach(function(L,H){L.forEach(function(ie){b.call(I,ie,H,this)},this)},this)};function Nn(b,I){$e(b);let L=[];if(typeof I=="string")cn(b,I)&&(L=L.concat(b.g.get(Wc(b,I))));else for(b=Array.from(b.g.values()),I=0;I<b.length;I++)L=L.concat(b[I]);return L}t.set=function(b,I){return $e(this),this.i=null,b=Wc(this,b),cn(this,b)&&(this.h-=this.g.get(b).length),this.g.set(b,[I]),this.h+=1,this},t.get=function(b,I){return b?(b=Nn(this,b),b.length>0?String(b[0]):I):I};function ar(b,I,L){We(b,I),L.length>0&&(b.i=null,b.g.set(Wc(b,I),v(L)),b.h+=L.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const b=[],I=Array.from(this.g.keys());for(let H=0;H<I.length;H++){var L=I[H];const ie=Lr(L);L=Nn(this,L);for(let me=0;me<L.length;me++){let Me=ie;L[me]!==""&&(Me+="="+Lr(L[me])),b.push(Me)}}return this.i=b.join("&")};function Ca(b){const I=new Ve;return I.i=b.i,b.g&&(I.g=new Map(b.g),I.h=b.h),I}function Wc(b,I){return I=String(I),b.j&&(I=I.toLowerCase()),I}function ff(b,I){I&&!b.j&&($e(b),b.i=null,b.g.forEach(function(L,H){const ie=H.toLowerCase();H!=ie&&(We(this,H),ar(this,ie,L))},b)),b.j=I}function ro(b,I){const L=new qt;if(a.Image){const H=new Image;H.onload=h(Aa,L,"TestLoadImage: loaded",!0,I,H),H.onerror=h(Aa,L,"TestLoadImage: error",!1,I,H),H.onabort=h(Aa,L,"TestLoadImage: abort",!1,I,H),H.ontimeout=h(Aa,L,"TestLoadImage: timeout",!1,I,H),a.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=b}else I(!1)}function ig(b,I){const L=new qt,H=new AbortController,ie=setTimeout(()=>{H.abort(),Aa(L,"TestPingServer: timeout",!1,I)},1e4);fetch(b,{signal:H.signal}).then(me=>{clearTimeout(ie),me.ok?Aa(L,"TestPingServer: ok",!0,I):Aa(L,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(ie),Aa(L,"TestPingServer: error",!1,I)})}function Aa(b,I,L,H,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),H(L)}catch{}}function Kc(){this.g=new mt}function Fo(b){this.i=b.Sb||null,this.h=b.ab||!1}p(Fo,gn),Fo.prototype.g=function(){return new Cd(this.i,this.h)};function Cd(b,I){lt.call(this),this.H=b,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Cd,lt),t=Cd.prototype,t.open=function(b,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=b,this.D=I,this.readyState=1,io(this)},t.send=function(b){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const I={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};b&&(I.body=b),(this.H||a).fetch(new Request(this.D,I)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Yc(this)),this.readyState=0},t.Pa=function(b){if(this.g&&(this.l=b,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=b.headers,this.readyState=2,io(this)),this.g&&(this.readyState=3,io(this),this.g)))if(this.responseType==="arraybuffer")b.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in b){if(this.j=b.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;mf(this)}else b.text().then(this.Oa.bind(this),this.ga.bind(this))};function mf(b){b.j.read().then(b.Ma.bind(b)).catch(b.ga.bind(b))}t.Ma=function(b){if(this.g){if(this.o&&b.value)this.response.push(b.value);else if(!this.o){var I=b.value?b.value:new Uint8Array(0);(I=this.B.decode(I,{stream:!b.done}))&&(this.response=this.responseText+=I)}b.done?Yc(this):io(this),this.readyState==3&&mf(this)}},t.Oa=function(b){this.g&&(this.response=this.responseText=b,Yc(this))},t.Na=function(b){this.g&&(this.response=b,Yc(this))},t.ga=function(){this.g&&Yc(this)};function Yc(b){b.readyState=4,b.l=null,b.j=null,b.B=null,io(b)}t.setRequestHeader=function(b,I){this.A.append(b,I)},t.getResponseHeader=function(b){return this.h&&this.h.get(b.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const b=[],I=this.h.entries();for(var L=I.next();!L.done;)L=L.value,b.push(L[0]+": "+L[1]),L=I.next();return b.join(`\r
`)};function io(b){b.onreadystatechange&&b.onreadystatechange.call(b)}Object.defineProperty(Cd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(b){this.m=b?"include":"same-origin"}});function Na(b){let I="";return oe(b,function(L,H){I+=H,I+=":",I+=L,I+=`\r
`}),I}function Ad(b,I,L){e:{for(H in L){var H=!1;break e}H=!0}H||(L=Na(L),typeof b=="string"?L!=null&&Lr(L):Jt(b,I,L))}function yn(b){lt.call(this),this.headers=new Map,this.L=b||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(yn,lt);var Ho=/^https?$/i,sg=["POST","PUT"];t=yn.prototype,t.Fa=function(b){this.H=b},t.ea=function(b,I,L,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+b);I=I?I.toUpperCase():"GET",this.D=b,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Mr.g(),this.g.onreadystatechange=y(d(this.Ca,this));try{this.B=!0,this.g.open(I,String(b),!0),this.B=!1}catch(me){Nd(this,me);return}if(b=L||"",L=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var ie in H)L.set(ie,H[ie]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const me of H.keys())L.set(me,H.get(me));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(L.keys()).find(me=>me.toLowerCase()=="content-type"),ie=a.FormData&&b instanceof a.FormData,!(Array.prototype.indexOf.call(sg,I,void 0)>=0)||H||ie||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[me,Me]of L)this.g.setRequestHeader(me,Me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(b),this.v=!1}catch(me){Nd(this,me)}};function Nd(b,I){b.h=!1,b.g&&(b.j=!0,b.g.abort(),b.j=!1),b.l=I,b.o=5,ag(b),jl(b)}function ag(b){b.A||(b.A=!0,xt(b,"complete"),xt(b,"error"))}t.abort=function(b){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=b||7,xt(this,"complete"),xt(this,"abort"),jl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jl(this,!0)),yn.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?kd(this):this.Xa())},t.Xa=function(){kd(this)};function kd(b){if(b.h&&typeof s<"u"){if(b.v&&so(b)==4)setTimeout(b.Ca.bind(b),0);else if(xt(b,"readystatechange"),so(b)==4){b.h=!1;try{const me=b.ca();e:switch(me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var L;if(!(L=I)){var H;if(H=me===0){let Me=String(b.D).match(hf)[1]||null;!Me&&a.self&&a.self.location&&(Me=a.self.location.protocol.slice(0,-1)),H=!Ho.test(Me?Me.toLowerCase():"")}L=H}if(L)xt(b,"complete"),xt(b,"success");else{b.o=6;try{var ie=so(b)>2?b.g.statusText:""}catch{ie=""}b.l=ie+" ["+b.ca()+"]",ag(b)}}finally{jl(b)}}}}function jl(b,I){if(b.g){b.m&&(clearTimeout(b.m),b.m=null);const L=b.g;b.g=null,I||xt(b,"ready");try{L.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function so(b){return b.g?b.g.readyState:0}t.ca=function(){try{return so(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(b){if(this.g){var I=this.g.responseText;return b&&I.indexOf(b)==0&&(I=I.substring(b.length)),Ie(I)}};function ki(b){try{if(!b.g)return null;if("response"in b.g)return b.g.response;switch(b.F){case"":case"text":return b.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in b.g)return b.g.mozResponseArrayBuffer}return null}catch{return null}}function Pl(b){const I={};b=(b.g&&so(b)>=2&&b.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<b.length;H++){if($(b[H]))continue;var L=Fc(b[H]);const ie=L[0];if(L=L[1],typeof L!="string")continue;L=L.trim();const me=I[ie]||[];I[ie]=me,me.push(L)}pe(I,function(H){return H.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function qo(b,I,L){return L&&L.internalChannelParams&&L.internalChannelParams[b]||I}function Xc(b){this.za=0,this.i=[],this.j=new qt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=qo("failFast",!1,b),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=qo("baseRetryDelayMs",5e3,b),this.Za=qo("retryDelaySeedMs",1e4,b),this.Ta=qo("forwardChannelMaxRetries",2,b),this.va=qo("forwardChannelRequestTimeoutMs",2e4,b),this.ma=b&&b.xmlHttpFactory||void 0,this.Ua=b&&b.Rb||void 0,this.Aa=b&&b.useFetchStreams||!1,this.O=void 0,this.L=b&&b.supportsCrossDomainXhr||!1,this.M="",this.h=new kl(b&&b.concurrentRequestLimit),this.Ba=new Kc,this.S=b&&b.fastHandshake||!1,this.R=b&&b.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=b&&b.Pb||!1,b&&b.ua&&this.j.ua(),b&&b.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&b&&b.detectBufferingProxy||!1,this.ia=void 0,b&&b.longPollingTimeout&&b.longPollingTimeout>0&&(this.ia=b.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Xc.prototype,t.ka=8,t.I=1,t.connect=function(b,I,L,H){Cn(0),this.W=b,this.H=I||{},L&&H!==void 0&&(this.H.OSID=L,this.H.OAID=H),this.F=this.X,this.J=Vv(this,null,this.W),Go(this)};function og(b){if(pf(b),b.I==3){var I=b.V++,L=br(b.J);if(Jt(L,"SID",b.M),Jt(L,"RID",I),Jt(L,"TYPE","terminate"),Id(b,L),I=new Cs(b,b.j,I),I.M=2,I.A=Il(br(L)),L=!1,a.navigator&&a.navigator.sendBeacon)try{L=a.navigator.sendBeacon(I.A.toString(),"")}catch{}!L&&a.Image&&(new Image().src=I.A,L=!0),L||(I.g=Uv(I.j,null),I.g.ea(I.A)),I.F=Date.now(),Ks(I)}Lv(b)}function Qc(b){b.g&&(cg(b),b.g.cancel(),b.g=null)}function pf(b){Qc(b),b.v&&(a.clearTimeout(b.v),b.v=null),yf(b),b.h.cancel(),b.m&&(typeof b.m=="number"&&a.clearTimeout(b.m),b.m=null)}function Go(b){if(!Sa(b.h)&&!b.m){b.m=!0;var I=b.Ea;D||k(),P||(D(),P=!0),A.add(I,b),b.D=0}}function gf(b,I){return Ys(b.h)>=b.h.j-(b.m?1:0)?!1:b.m?(b.i=I.G.concat(b.i),!0):b.I==1||b.I==2||b.D>=(b.Sa?0:b.Ta)?!1:(b.m=et(d(b.Ea,b,I),Mv(b,b.D)),b.D++,!0)}t.Ea=function(b){if(this.m)if(this.m=null,this.I==1){if(!b){this.V=Math.floor(Math.random()*1e5),b=this.V++;const ie=new Cs(this,this.j,b);let me=this.o;if(this.U&&(me?(me=B(me),G(me,this.U)):me=this.U),this.u!==null||this.R||(ie.J=me,me=null),this.S)e:{for(var I=0,L=0;L<this.i.length;L++){t:{var H=this.i[L];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(I+=H,I>4096){I=L;break e}if(I===4096||L===this.i.length-1){I=L+1;break e}}I=1e3}else I=1e3;I=jv(this,ie,I),L=br(this.J),Jt(L,"RID",b),Jt(L,"CVER",22),this.G&&Jt(L,"X-HTTP-Session-Id",this.G),Id(this,L),me&&(this.R?I="headers="+Lr(Na(me))+"&"+I:this.u&&Ad(L,this.u,me)),to(this.h,ie),this.Ra&&Jt(L,"TYPE","init"),this.S?(Jt(L,"$req",I),Jt(L,"SID","null"),ie.U=!0,qi(ie,L,null)):qi(ie,L,I),this.I=2}}else this.I==3&&(b?lg(this,b):this.i.length==0||Sa(this.h)||lg(this))};function lg(b,I){var L;I?L=I.l:L=b.V++;const H=br(b.J);Jt(H,"SID",b.M),Jt(H,"RID",L),Jt(H,"AID",b.K),Id(b,H),b.u&&b.o&&Ad(H,b.u,b.o),L=new Cs(b,b.j,L,b.D+1),b.u===null&&(L.J=b.o),I&&(b.i=I.G.concat(b.i)),I=jv(b,L,1e3),L.H=Math.round(b.va*.5)+Math.round(b.va*.5*Math.random()),to(b.h,L),qi(L,H,I)}function Id(b,I){b.H&&oe(b.H,function(L,H){Jt(I,H,L)}),b.l&&oe({},function(L,H){Jt(I,H,L)})}function jv(b,I,L){L=Math.min(b.i.length,L);const H=b.l?d(b.l.Ka,b.l,b):null;e:{var ie=b.i;let Et=-1;for(;;){const Ar=["count="+L];Et==-1?L>0?(Et=ie[0].g,Ar.push("ofs="+Et)):Et=0:Ar.push("ofs="+Et);let Zt=!0;for(let Yn=0;Yn<L;Yn++){var me=ie[Yn].g;const ka=ie[Yn].map;if(me-=Et,me<0)Et=Math.max(0,ie[Yn].g-100),Zt=!1;else try{me="req"+me+"_"||"";try{var Me=ka instanceof Map?ka:Object.entries(ka);for(const[Ko,ao]of Me){let oo=ao;l(ao)&&(oo=se(ao)),Ar.push(me+Ko+"="+encodeURIComponent(oo))}}catch(Ko){throw Ar.push(me+"type="+encodeURIComponent("_badmap")),Ko}}catch{H&&H(ka)}}if(Zt){Me=Ar.join("&");break e}}Me=void 0}return b=b.i.splice(0,L),I.G=b,Me}function Pv(b){if(!b.g&&!b.v){b.Y=1;var I=b.Da;D||k(),P||(D(),P=!0),A.add(I,b),b.A=0}}function Od(b){return b.g||b.v||b.A>=3?!1:(b.Y++,b.v=et(d(b.Da,b),Mv(b,b.A)),b.A++,!0)}t.Da=function(){if(this.v=null,Rv(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var b=4*this.T;this.j.info("BP detection timer enabled: "+b),this.B=et(d(this.Wa,this),b)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Cn(10),Qc(this),Rv(this))};function cg(b){b.B!=null&&(a.clearTimeout(b.B),b.B=null)}function Rv(b){b.g=new Cs(b,b.j,"rpc",b.Y),b.u===null&&(b.g.J=b.o),b.g.P=0;var I=br(b.na);Jt(I,"RID","rpc"),Jt(I,"SID",b.M),Jt(I,"AID",b.K),Jt(I,"CI",b.F?"0":"1"),!b.F&&b.ia&&Jt(I,"TO",b.ia),Jt(I,"TYPE","xmlhttp"),Id(b,I),b.u&&b.o&&Ad(I,b.u,b.o),b.O&&(b.g.H=b.O);var L=b.g;b=b.ba,L.M=1,L.A=Il(br(I)),L.u=null,L.R=!0,Ws(L,b)}t.Va=function(){this.C!=null&&(this.C=null,Qc(this),Od(this),Cn(19))};function yf(b){b.C!=null&&(a.clearTimeout(b.C),b.C=null)}function Dv(b,I){var L=null;if(b.g==I){yf(b),cg(b),b.g=null;var H=2}else if(Gi(b.h,I))L=I.G,_d(b.h,I),H=1;else return;if(b.I!=0){if(I.o)if(H==1){L=I.u?I.u.length:0,I=Date.now()-I.F;var ie=b.D;H=Ss(),xt(H,new Fi(H,L)),Go(b)}else Pv(b);else if(ie=I.m,ie==3||ie==0&&I.X>0||!(H==1&&gf(b,I)||H==2&&Od(b)))switch(L&&L.length>0&&(I=b.h,I.i=I.i.concat(L)),ie){case 1:Wo(b,5);break;case 4:Wo(b,10);break;case 3:Wo(b,6);break;default:Wo(b,2)}}}function Mv(b,I){let L=b.Qa+Math.floor(Math.random()*b.Za);return b.isActive()||(L*=2),L*I}function Wo(b,I){if(b.j.info("Error code "+I),I==2){var L=d(b.bb,b),H=b.Ua;const ie=!H;H=new ms(H||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Vr(H,"https"),Il(H),ie?ro(H.toString(),L):ig(H.toString(),L)}else Cn(2);b.I=0,b.l&&b.l.pa(I),Lv(b),pf(b)}t.bb=function(b){b?(this.j.info("Successfully pinged google.com"),Cn(2)):(this.j.info("Failed to ping google.com"),Cn(1))};function Lv(b){if(b.I=0,b.ja=[],b.l){const I=Ed(b.h);(I.length!=0||b.i.length!=0)&&(w(b.ja,I),w(b.ja,b.i),b.h.i.length=0,v(b.i),b.i.length=0),b.l.oa()}}function Vv(b,I,L){var H=L instanceof ms?br(L):new ms(L);if(H.g!="")I&&(H.g=I+"."+H.g),no(H,H.u);else{var ie=a.location;H=ie.protocol,I=I?I+"."+ie.hostname:ie.hostname,ie=+ie.port;const me=new ms(null);H&&Vr(me,H),I&&(me.g=I),ie&&no(me,ie),L&&(me.h=L),H=me}return L=b.G,I=b.wa,L&&I&&Jt(H,L,I),Jt(H,"VER",b.ka),Id(b,H),H}function Uv(b,I,L){if(I&&!b.L)throw Error("Can't create secondary domain capable XhrIo object.");return I=b.Aa&&!b.ma?new yn(new Fo({ab:L})):new yn(b.ma),I.Fa(b.L),I}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bv(){}t=Bv.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Jc(){}Jc.prototype.g=function(b,I){return new ps(b,I)};function ps(b,I){lt.call(this),this.g=new Xc(I),this.l=b,this.h=I&&I.messageUrlParams||null,b=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(b?b["X-Client-Protocol"]="webchannel":b={"X-Client-Protocol":"webchannel"}),this.g.o=b,b=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(b?b["X-WebChannel-Content-Type"]=I.messageContentType:b={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.sa&&(b?b["X-WebChannel-Client-Profile"]=I.sa:b={"X-WebChannel-Client-Profile":I.sa}),this.g.U=b,(b=I&&I.Qb)&&!$(b)&&(this.g.u=b),this.A=I&&I.supportsCrossDomainXhr||!1,this.v=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!$(I)&&(this.g.G=I,b=this.h,b!==null&&I in b&&(b=this.h,I in b&&delete b[I])),this.j=new Rl(this)}p(ps,lt),ps.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ps.prototype.close=function(){og(this.g)},ps.prototype.o=function(b){var I=this.g;if(typeof b=="string"){var L={};L.__data__=b,b=L}else this.v&&(L={},L.__data__=se(b),b=L);I.i.push(new vr(I.Ya++,b)),I.I==3&&Go(I)},ps.prototype.N=function(){this.g.l=null,delete this.j,og(this.g),delete this.g,ps.Z.N.call(this)};function zv(b){Kn.call(this),b.__headers__&&(this.headers=b.__headers__,this.statusCode=b.__status__,delete b.__headers__,delete b.__status__);var I=b.__sm__;if(I){e:{for(const L in I){b=L;break e}b=void 0}(this.i=b)&&(b=this.i,I=I!==null&&b in I?I[b]:void 0),this.data=I}else this.data=b}p(zv,Kn);function $v(){hi.call(this),this.status=1}p($v,hi);function Rl(b){this.g=b}p(Rl,Bv),Rl.prototype.ra=function(){xt(this.g,"a")},Rl.prototype.qa=function(b){xt(this.g,new zv(b))},Rl.prototype.pa=function(b){xt(this.g,new $v)},Rl.prototype.oa=function(){xt(this.g,"b")},Jc.prototype.createWebChannel=Jc.prototype.g,ps.prototype.send=ps.prototype.o,ps.prototype.open=ps.prototype.m,ps.prototype.close=ps.prototype.close,EH=function(){return new Jc},_H=function(){return Ss()},xH=Qt,ON={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},hs.NO_ERROR=0,hs.TIMEOUT=8,hs.HTTP_ERROR=6,Hw=hs,gr.COMPLETE="complete",wH=gr,Ft.EventType=ti,ti.OPEN="a",ti.CLOSE="b",ti.ERROR="c",ti.MESSAGE="d",lt.prototype.listen=lt.prototype.J,d0=Ft,yn.prototype.listenOnce=yn.prototype.K,yn.prototype.getLastError=yn.prototype.Ha,yn.prototype.getLastErrorCode=yn.prototype.ya,yn.prototype.getStatus=yn.prototype.ca,yn.prototype.getResponseJson=yn.prototype.La,yn.prototype.getResponseText=yn.prototype.la,yn.prototype.send=yn.prototype.ea,yn.prototype.setWithCredentials=yn.prototype.Fa,bH=yn}).apply(typeof Qb<"u"?Qb:typeof self<"u"?self:typeof window<"u"?window:{});const XM="@firebase/firestore",QM="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qi.UNAUTHENTICATED=new Qi(null),Qi.GOOGLE_CREDENTIALS=new Qi("google-credentials-uid"),Qi.FIRST_PARTY=new Qi("first-party-uid"),Qi.MOCK_USER=new Qi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kp="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=new x_("@firebase/firestore");function im(){return Ih.logLevel}function Be(t,...e){if(Ih.logLevel<=Rt.DEBUG){const n=e.map(k4);Ih.debug(`Firestore (${kp}): ${t}`,...n)}}function xc(t,...e){if(Ih.logLevel<=Rt.ERROR){const n=e.map(k4);Ih.error(`Firestore (${kp}): ${t}`,...n)}}function Oh(t,...e){if(Ih.logLevel<=Rt.WARN){const n=e.map(k4);Ih.warn(`Firestore (${kp}): ${t}`,...n)}}function k4(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,TH(t,r,n)}function TH(t,e,n){let r=`FIRESTORE (${kp}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw xc(r),new Error(r)}function ln(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||TH(e,i,r)}function wt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Tl{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SH{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CH{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Qi.UNAUTHENTICATED)))}shutdown(){}}class Due{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Mue{constructor(e){this.t=e,this.currentUser=Qi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ln(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new uc;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new uc,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const u=s;e.enqueueRetryable((async()=>{await u.promise,await i(this.currentUser)}))},l=u=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((u=>l(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new uc)}}),0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ln(typeof r.accessToken=="string",31837,{l:r}),new SH(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ln(e===null||typeof e=="string",2055,{h:e}),new Qi(e)}}class Lue{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Qi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Vue{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Lue(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Qi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class JM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Uue{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ms(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ln(this.o===void 0,3512);const r=s=>{s.error!=null&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,Be("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new JM(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ln(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new JM(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bue(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Bue(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function Lt(t,e){return t<e?-1:t>e?1:0}function jN(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return RS(i)===RS(s)?Lt(i,s):RS(i)?1:-1}return Lt(t.length,e.length)}const zue=55296,$ue=57343;function RS(t){const e=t.charCodeAt(0);return e>=zue&&e<=$ue}function Km(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="__name__";class tl{constructor(e,n,r){n===void 0?n=0:n>e.length&&ft(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ft(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return tl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof tl?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=tl.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return Lt(e.length,n.length)}static compareSegments(e,n){const r=tl.isNumericId(e),i=tl.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?tl.extractNumericId(e).compare(tl.extractNumericId(n)):jN(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Bu.fromString(e.substring(4,e.length-2))}}class On extends tl{construct(e,n,r){return new On(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new On(n)}static emptyPath(){return new On([])}}const Fue=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xi extends tl{construct(e,n,r){return new xi(e,n,r)}static isValidIdentifier(e){return Fue.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xi.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===PN}static keyField(){return new xi([PN])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Re(be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Re(be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Re(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(r+=l,i++):(s(),i++)}if(s(),a)throw new Re(be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xi(n)}static emptyPath(){return new xi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.path=e}static fromPath(e){return new nt(On.fromString(e))}static fromName(e){return new nt(On.fromString(e).popFirst(5))}static empty(){return new nt(On.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&On.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return On.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nt(new On(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AH(t,e,n){if(!n)throw new Re(be.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function NH(t,e,n,r){if(e===!0&&r===!0)throw new Re(be.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ZM(t){if(!nt.isDocumentKey(t))throw new Re(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function e8(t){if(nt.isDocumentKey(t))throw new Re(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function kH(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function E_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ft(12329,{type:typeof t})}function ss(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Re(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=E_(t);throw new Re(be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Hue(t,e){if(e<=0)throw new Re(be.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(t,e){const n={typeString:t};return e&&(n.value=e),n}function Vy(t,e){if(!kH(t))throw new Re(be.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new Re(be.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t8=-62135596800,n8=1e6;class Tn{static now(){return Tn.fromMillis(Date.now())}static fromDate(e){return Tn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*n8);return new Tn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Re(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Re(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<t8)throw new Re(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/n8}_compareTo(e){return this.seconds===e.seconds?Lt(this.nanoseconds,e.nanoseconds):Lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Tn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vy(e,Tn._jsonSchema))return new Tn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-t8;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Tn._jsonSchemaVersion="firestore/timestamp/1.0",Tn._jsonSchema={type:Xr("string",Tn._jsonSchemaVersion),seconds:Xr("number"),nanoseconds:Xr("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{static fromTimestamp(e){return new yt(e)}static min(){return new yt(new Tn(0,0))}static max(){return new yt(new Tn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=-1;function que(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=yt.fromTimestamp(r===1e9?new Tn(n+1,0):new Tn(n,r));return new Yu(i,nt.empty(),e)}function Gue(t){return new Yu(t.readTime,t.key,G0)}class Yu{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Yu(yt.min(),nt.empty(),G0)}static max(){return new Yu(yt.max(),nt.empty(),G0)}}function Wue(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=nt.comparator(t.documentKey,e.documentKey),n!==0?n:Lt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kue="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Yue{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ip(t){if(t.code!==be.FAILED_PRECONDITION||t.message!==Kue)throw t;Be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ft(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ce(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Ce?n:Ce.resolve(n)}catch(n){return Ce.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Ce.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Ce.reject(n)}static resolve(e){return new Ce(((n,r)=>{n(e)}))}static reject(e){return new Ce(((n,r)=>{r(e)}))}static waitFor(e){return new Ce(((n,r)=>{let i=0,s=0,a=!1;e.forEach((l=>{++i,l.next((()=>{++s,a&&s===i&&n()}),(u=>r(u)))})),a=!0,s===i&&n()}))}static or(e){let n=Ce.resolve(!1);for(const r of e)n=n.next((i=>i?Ce.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,s)=>{r.push(n.call(this,i,s))})),this.waitFor(r)}static mapArray(e,n){return new Ce(((r,i)=>{const s=e.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const d=u;n(e[d]).next((h=>{a[d]=h,++l,l===s&&r(a)}),(h=>i(h)))}}))}static doWhile(e,n){return new Ce(((r,i)=>{const s=()=>{e()===!0?n().next((()=>{s()}),i):r()};s()}))}}function Xue(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Op(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}T_.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4=-1;function S_(t){return t==null}function yx(t){return t===0&&1/t==-1/0}function Que(t){return typeof t=="number"&&Number.isInteger(t)&&!yx(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IH="";function Jue(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=r8(e)),e=Zue(t.get(n),e);return r8(e)}function Zue(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case IH:n+="";break;default:n+=s}}return n}function r8(t){return t+IH+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i8(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ud(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function OH(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zr=class RN{constructor(e,n){this.comparator=e,this.root=n||zu.EMPTY}insert(e,n){return new RN(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zu.BLACK,null,null))}remove(e){return new RN(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zu.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jb(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jb(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jb(this.root,e,this.comparator,!0)}},Jb=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},zu=class Xl{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Xl.RED,this.left=i??Xl.EMPTY,this.right=s??Xl.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Xl(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Xl.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Xl.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xl.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xl.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ft(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ft(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ft(27949);return e+(this.isRed()?0:1)}};zu.EMPTY=null,zu.RED=!0,zu.BLACK=!1;zu.EMPTY=new class{constructor(){this.size=0}get key(){throw ft(57766)}get value(){throw ft(16141)}get color(){throw ft(16727)}get left(){throw ft(29726)}get right(){throw ft(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new zu(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.comparator=e,this.data=new Zr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new s8(this.data.getIterator())}getIteratorFrom(e){return new s8(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof oi)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new oi(this.comparator);return n.data=e,n}}class s8{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this.fields=e,e.sort(xi.comparator)}static empty(){return new ua([])}unionWith(e){let n=new oi(xi.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ua(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Km(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jH extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new jH("Invalid base64 string: "+s):s}})(e);return new Ei(n)}static fromUint8Array(e){const n=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new Ei(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ei.EMPTY_BYTE_STRING=new Ei("");const ede=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xu(t){if(ln(!!t,39018),typeof t=="string"){let e=0;const n=ede.exec(t);if(ln(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pr(t.seconds),nanos:Pr(t.nanos)}}function Pr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qu(t){return typeof t=="string"?Ei.fromBase64String(t):Ei.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PH="server_timestamp",RH="__type__",DH="__previous_value__",MH="__local_write_time__";function C_(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[RH])==null?void 0:r.stringValue)===PH}function A_(t){const e=t.mapValue.fields[DH];return C_(e)?A_(e):e}function W0(t){const e=Xu(t.mapValue.fields[MH].timestampValue);return new Tn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tde{constructor(e,n,r,i,s,a,l,u,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}}const vx="(default)";class Ym{constructor(e,n){this.projectId=e,this.database=n||vx}static empty(){return new Ym("","")}get isDefaultDatabase(){return this.database===vx}isEqual(e){return e instanceof Ym&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LH="__type__",nde="__max__",Zb={mapValue:{}},VH="__vector__",bx="value";function Ju(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?C_(t)?4:ide(t)?9007199254740991:rde(t)?10:11:ft(28295,{value:t})}function vl(t,e){if(t===e)return!0;const n=Ju(t);if(n!==Ju(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return W0(t).isEqual(W0(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Xu(i.timestampValue),l=Xu(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,s){return Qu(i.bytesValue).isEqual(Qu(s.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,s){return Pr(i.geoPointValue.latitude)===Pr(s.geoPointValue.latitude)&&Pr(i.geoPointValue.longitude)===Pr(s.geoPointValue.longitude)})(t,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Pr(i.integerValue)===Pr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Pr(i.doubleValue),l=Pr(s.doubleValue);return a===l?yx(a)===yx(l):isNaN(a)&&isNaN(l)}return!1})(t,e);case 9:return Km(t.arrayValue.values||[],e.arrayValue.values||[],vl);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},l=s.mapValue.fields||{};if(i8(a)!==i8(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!vl(a[u],l[u])))return!1;return!0})(t,e);default:return ft(52216,{left:t})}}function K0(t,e){return(t.values||[]).find((n=>vl(n,e)))!==void 0}function Xm(t,e){if(t===e)return 0;const n=Ju(t),r=Ju(e);if(n!==r)return Lt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Lt(t.booleanValue,e.booleanValue);case 2:return(function(s,a){const l=Pr(s.integerValue||s.doubleValue),u=Pr(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1})(t,e);case 3:return a8(t.timestampValue,e.timestampValue);case 4:return a8(W0(t),W0(e));case 5:return jN(t.stringValue,e.stringValue);case 6:return(function(s,a){const l=Qu(s),u=Qu(a);return l.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(s,a){const l=s.split("/"),u=a.split("/");for(let d=0;d<l.length&&d<u.length;d++){const h=Lt(l[d],u[d]);if(h!==0)return h}return Lt(l.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(s,a){const l=Lt(Pr(s.latitude),Pr(a.latitude));return l!==0?l:Lt(Pr(s.longitude),Pr(a.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return o8(t.arrayValue,e.arrayValue);case 10:return(function(s,a){var y,v,w,_;const l=s.fields||{},u=a.fields||{},d=(y=l[bx])==null?void 0:y.arrayValue,h=(v=u[bx])==null?void 0:v.arrayValue,p=Lt(((w=d==null?void 0:d.values)==null?void 0:w.length)||0,((_=h==null?void 0:h.values)==null?void 0:_.length)||0);return p!==0?p:o8(d,h)})(t.mapValue,e.mapValue);case 11:return(function(s,a){if(s===Zb.mapValue&&a===Zb.mapValue)return 0;if(s===Zb.mapValue)return 1;if(a===Zb.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),d=a.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const y=jN(u[p],h[p]);if(y!==0)return y;const v=Xm(l[u[p]],d[h[p]]);if(v!==0)return v}return Lt(u.length,h.length)})(t.mapValue,e.mapValue);default:throw ft(23264,{he:n})}}function a8(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Lt(t,e);const n=Xu(t),r=Xu(e),i=Lt(n.seconds,r.seconds);return i!==0?i:Lt(n.nanos,r.nanos)}function o8(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Xm(n[i],r[i]);if(s)return s}return Lt(n.length,r.length)}function Qm(t){return DN(t)}function DN(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Xu(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Qu(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return nt.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=DN(s);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${DN(n.fields[a])}`;return i+"}"})(t.mapValue):ft(61005,{value:t})}function qw(t){switch(Ju(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=A_(t);return e?16+qw(e):16;case 5:return 2*t.stringValue.length;case 6:return Qu(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+qw(s)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return ud(r.fields,((s,a)=>{i+=s.length+qw(a)})),i})(t.mapValue);default:throw ft(13486,{value:t})}}function wx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function MN(t){return!!t&&"integerValue"in t}function O4(t){return!!t&&"arrayValue"in t}function l8(t){return!!t&&"nullValue"in t}function c8(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gw(t){return!!t&&"mapValue"in t}function rde(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[LH])==null?void 0:r.stringValue)===VH}function _0(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ud(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=_0(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_0(t.arrayValue.values[n]);return e}return{...t}}function ide(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===nde}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this.value=e}static empty(){return new Ls({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Gw(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_0(n)}setAll(e){let n=xi.emptyPath(),r={},i=[];e.forEach(((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}a?r[l.lastSegment()]=_0(a):i.push(l.lastSegment())}));const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Gw(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vl(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Gw(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ud(n,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new Ls(_0(this.value))}}function UH(t){const e=[];return ud(t.fields,((n,r)=>{const i=new xi([n]);if(Gw(r)){const s=UH(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new ua(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n,r,i,s,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Zi(e,0,yt.min(),yt.min(),yt.min(),Ls.empty(),0)}static newFoundDocument(e,n,r,i){return new Zi(e,1,n,yt.min(),r,i,0)}static newNoDocument(e,n){return new Zi(e,2,n,yt.min(),yt.min(),Ls.empty(),0)}static newUnknownDocument(e,n){return new Zi(e,3,n,yt.min(),yt.min(),Ls.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(yt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ls.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ls.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,n){this.position=e,this.inclusive=n}}function u8(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=nt.comparator(nt.fromName(a.referenceValue),n.key):r=Xm(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function d8(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vl(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e,n="asc"){this.field=e,this.dir=n}}function sde(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BH{}class Kr extends BH{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ode(e,n,r):n==="array-contains"?new ude(e,r):n==="in"?new dde(e,r):n==="not-in"?new hde(e,r):n==="array-contains-any"?new fde(e,r):new Kr(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new lde(e,r):new cde(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Xm(n,this.value)):n!==null&&Ju(this.value)===Ju(n)&&this.matchesComparison(Xm(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ft(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Po extends BH{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Po(e,n)}matches(e){return zH(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function zH(t){return t.op==="and"}function $H(t){return ade(t)&&zH(t)}function ade(t){for(const e of t.filters)if(e instanceof Po)return!1;return!0}function LN(t){if(t instanceof Kr)return t.field.canonicalString()+t.op.toString()+Qm(t.value);if($H(t))return t.filters.map((e=>LN(e))).join(",");{const e=t.filters.map((n=>LN(n))).join(",");return`${t.op}(${e})`}}function FH(t,e){return t instanceof Kr?(function(r,i){return i instanceof Kr&&r.op===i.op&&r.field.isEqual(i.field)&&vl(r.value,i.value)})(t,e):t instanceof Po?(function(r,i){return i instanceof Po&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,a,l)=>s&&FH(a,i.filters[l])),!0):!1})(t,e):void ft(19439)}function HH(t){return t instanceof Kr?(function(n){return`${n.field.canonicalString()} ${n.op} ${Qm(n.value)}`})(t):t instanceof Po?(function(n){return n.op.toString()+" {"+n.getFilters().map(HH).join(" ,")+"}"})(t):"Filter"}class ode extends Kr{constructor(e,n,r){super(e,n,r),this.key=nt.fromName(r.referenceValue)}matches(e){const n=nt.comparator(e.key,this.key);return this.matchesComparison(n)}}class lde extends Kr{constructor(e,n){super(e,"in",n),this.keys=qH("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class cde extends Kr{constructor(e,n){super(e,"not-in",n),this.keys=qH("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function qH(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>nt.fromName(r.referenceValue)))}class ude extends Kr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return O4(n)&&K0(n.arrayValue,this.value)}}class dde extends Kr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&K0(this.value.arrayValue,n)}}class hde extends Kr{constructor(e,n){super(e,"not-in",n)}matches(e){if(K0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!K0(this.value.arrayValue,n)}}class fde extends Kr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!O4(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>K0(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mde{constructor(e,n=null,r=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.Te=null}}function h8(t,e=null,n=[],r=[],i=null,s=null,a=null){return new mde(t,e,n,r,i,s,a)}function j4(t){const e=wt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>LN(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),S_(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Qm(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Qm(r))).join(",")),e.Te=n}return e.Te}function P4(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!sde(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!FH(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!d8(t.startAt,e.startAt)&&d8(t.endAt,e.endAt)}function VN(t){return nt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n=null,r=[],i=[],s=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function pde(t,e,n,r,i,s,a,l){return new Xh(t,e,n,r,i,s,a,l)}function N_(t){return new Xh(t)}function f8(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function R4(t){return t.collectionGroup!==null}function Sm(t){const e=wt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new oi(xi.comparator);return a.filters.forEach((u=>{u.getFlattenedFilters().forEach((d=>{d.isInequality()&&(l=l.add(d.field))}))})),l})(e).forEach((s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Y0(s,r))})),n.has(xi.keyField().canonicalString())||e.Ie.push(new Y0(xi.keyField(),r))}return e.Ie}function ul(t){const e=wt(t);return e.Ee||(e.Ee=gde(e,Sm(t))),e.Ee}function gde(t,e){if(t.limitType==="F")return h8(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new Y0(i.field,s)}));const n=t.endAt?new Jm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Jm(t.startAt.position,t.startAt.inclusive):null;return h8(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function UN(t,e){const n=t.filters.concat([e]);return new Xh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function xx(t,e,n){return new Xh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function k_(t,e){return P4(ul(t),ul(e))&&t.limitType===e.limitType}function GH(t){return`${j4(ul(t))}|lt:${t.limitType}`}function sm(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>HH(i))).join(", ")}]`),S_(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>Qm(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>Qm(i))).join(",")),`Target(${r})`})(ul(t))}; limitType=${t.limitType})`}function I_(t,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):nt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(t,e)&&(function(r,i){for(const s of Sm(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(a,l,u){const d=u8(a,l,u);return a.inclusive?d<=0:d<0})(r.startAt,Sm(r),i)||r.endAt&&!(function(a,l,u){const d=u8(a,l,u);return a.inclusive?d>=0:d>0})(r.endAt,Sm(r),i))})(t,e)}function yde(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function WH(t){return(e,n)=>{let r=!1;for(const i of Sm(t)){const s=vde(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function vde(t,e,n){const r=t.field.isKeyField()?nt.comparator(e.key,n.key):(function(s,a,l){const u=a.data.field(s),d=l.data.field(s);return u!==null&&d!==null?Xm(u,d):ft(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ft(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ud(this.inner,((n,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return OH(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bde=new Zr(nt.comparator);function _c(){return bde}const KH=new Zr(nt.comparator);function h0(...t){let e=KH;for(const n of t)e=e.insert(n.key,n);return e}function YH(t){let e=KH;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function uh(){return E0()}function XH(){return E0()}function E0(){return new Qh((t=>t.toString()),((t,e)=>t.isEqual(e)))}const wde=new Zr(nt.comparator),xde=new oi(nt.comparator);function Vt(...t){let e=xde;for(const n of t)e=e.add(n);return e}const _de=new oi(Lt);function Ede(){return _de}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yx(e)?"-0":e}}function QH(t){return{integerValue:""+t}}function Tde(t,e){return Que(e)?QH(e):D4(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(){this._=void 0}}function Sde(t,e,n){return t instanceof X0?(function(i,s){const a={fields:{[RH]:{stringValue:PH},[MH]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&C_(s)&&(s=A_(s)),s&&(a.fields[DH]=s),{mapValue:a}})(n,e):t instanceof Zm?ZH(t,e):t instanceof ep?eq(t,e):(function(i,s){const a=JH(i,s),l=m8(a)+m8(i.Ae);return MN(a)&&MN(i.Ae)?QH(l):D4(i.serializer,l)})(t,e)}function Cde(t,e,n){return t instanceof Zm?ZH(t,e):t instanceof ep?eq(t,e):n}function JH(t,e){return t instanceof _x?(function(r){return MN(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class X0 extends O_{}class Zm extends O_{constructor(e){super(),this.elements=e}}function ZH(t,e){const n=tq(e);for(const r of t.elements)n.some((i=>vl(i,r)))||n.push(r);return{arrayValue:{values:n}}}class ep extends O_{constructor(e){super(),this.elements=e}}function eq(t,e){let n=tq(e);for(const r of t.elements)n=n.filter((i=>!vl(i,r)));return{arrayValue:{values:n}}}class _x extends O_{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function m8(t){return Pr(t.integerValue||t.doubleValue)}function tq(t){return O4(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e,n){this.field=e,this.transform=n}}function Ade(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Zm&&i instanceof Zm||r instanceof ep&&i instanceof ep?Km(r.elements,i.elements,vl):r instanceof _x&&i instanceof _x?vl(r.Ae,i.Ae):r instanceof X0&&i instanceof X0})(t.transform,e.transform)}class Nde{constructor(e,n){this.version=e,this.transformResults=n}}class bs{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new bs}static exists(e){return new bs(void 0,e)}static updateTime(e){return new bs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ww(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class j_{}function nq(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new P_(t.key,bs.none()):new Uy(t.key,t.data,bs.none());{const n=t.data,r=Ls.empty();let i=new oi(xi.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new dd(t.key,r,new ua(i.toArray()),bs.none())}}function kde(t,e,n){t instanceof Uy?(function(i,s,a){const l=i.value.clone(),u=g8(i.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(t,e,n):t instanceof dd?(function(i,s,a){if(!Ww(i.precondition,s))return void s.convertToUnknownDocument(a.version);const l=g8(i.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(rq(i)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(t,e,n):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,n)}function T0(t,e,n,r){return t instanceof Uy?(function(s,a,l,u){if(!Ww(s.precondition,a))return l;const d=s.value.clone(),h=y8(s.fieldTransforms,u,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null})(t,e,n,r):t instanceof dd?(function(s,a,l,u){if(!Ww(s.precondition,a))return l;const d=y8(s.fieldTransforms,u,a),h=a.data;return h.setAll(rq(s)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((p=>p.field)))})(t,e,n,r):(function(s,a,l){return Ww(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l})(t,e,n)}function Ide(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=JH(r.transform,i||null);s!=null&&(n===null&&(n=Ls.empty()),n.set(r.field,s))}return n||null}function p8(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Km(r,i,((s,a)=>Ade(s,a)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Uy extends j_{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class dd extends j_{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function rq(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function g8(t,e,n){const r=new Map;ln(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,l=e.data.field(s.field);r.set(s.field,Cde(a,l,n[i]))}return r}function y8(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,Sde(s,a,e))}return r}class P_ extends j_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ode extends j_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jde{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&kde(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=T0(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=T0(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=XH();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(i.key)?null:l;const u=nq(a,l);u!==null&&r.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(yt.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Vt())}isEqual(e){return this.batchId===e.batchId&&Km(this.mutations,e.mutations,((n,r)=>p8(n,r)))&&Km(this.baseMutations,e.baseMutations,((n,r)=>p8(n,r)))}}class L4{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ln(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return wde})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new L4(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pde{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rde{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fr,zt;function Dde(t){switch(t){case be.OK:return ft(64938);case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0;default:return ft(15467,{code:t})}}function iq(t){if(t===void 0)return xc("GRPC error has no .code"),be.UNKNOWN;switch(t){case Fr.OK:return be.OK;case Fr.CANCELLED:return be.CANCELLED;case Fr.UNKNOWN:return be.UNKNOWN;case Fr.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case Fr.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case Fr.INTERNAL:return be.INTERNAL;case Fr.UNAVAILABLE:return be.UNAVAILABLE;case Fr.UNAUTHENTICATED:return be.UNAUTHENTICATED;case Fr.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case Fr.NOT_FOUND:return be.NOT_FOUND;case Fr.ALREADY_EXISTS:return be.ALREADY_EXISTS;case Fr.PERMISSION_DENIED:return be.PERMISSION_DENIED;case Fr.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case Fr.ABORTED:return be.ABORTED;case Fr.OUT_OF_RANGE:return be.OUT_OF_RANGE;case Fr.UNIMPLEMENTED:return be.UNIMPLEMENTED;case Fr.DATA_LOSS:return be.DATA_LOSS;default:return ft(39323,{code:t})}}(zt=Fr||(Fr={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mde(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lde=new Bu([4294967295,4294967295],0);function v8(t){const e=Mde().encode(t),n=new vH;return n.update(e),new Uint8Array(n.digest())}function b8(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Bu([n,r],0),new Bu([i,s],0)]}class V4{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new f0(`Invalid padding: ${n}`);if(r<0)throw new f0(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new f0(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new f0(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Bu.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Bu.fromNumber(r)));return i.compare(Lde)===1&&(i=new Bu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=v8(e),[r,i]=b8(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new V4(s,i,n);return r.forEach((l=>a.insert(l))),a}insert(e){if(this.ge===0)return;const n=v8(e),[r,i]=b8(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class f0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,By.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new R_(yt.min(),i,new Zr(Lt),_c(),Vt())}}class By{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new By(r,n,Vt(),Vt(),Vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class sq{constructor(e,n){this.targetId=e,this.Ce=n}}class aq{constructor(e,n,r=Ei.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class w8{constructor(){this.ve=0,this.Fe=x8(),this.Me=Ei.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Vt(),n=Vt(),r=Vt();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ft(38017,{changeType:s})}})),new By(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=x8()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ln(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Vde{constructor(e){this.Ge=e,this.ze=new Map,this.je=_c(),this.Je=ew(),this.He=ew(),this.Ye=new Zr(Lt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ft(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(VN(s))if(r===0){const a=new nt(s.path);this.et(n,a,Zi.newNoDocument(a,yt.min()))}else ln(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),u=l?this.ct(l,e,a):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,l;try{a=Qu(r).toUint8Array()}catch(u){if(u instanceof jH)return Oh("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new V4(a,i,s)}catch(u){return Oh(u instanceof f0?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((s=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((s,a)=>{const l=this.ot(a);if(l){if(s.current&&VN(l.target)){const u=new nt(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,Zi.newNoDocument(u,e))}s.Be&&(n.set(a,s.ke()),s.qe())}}));let r=Vt();this.He.forEach(((s,a)=>{let l=!0;a.forEachWhile((u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(s))})),this.je.forEach(((s,a)=>a.setReadTime(e)));const i=new R_(e,n,this.Ye,this.je,r);return this.je=_c(),this.Je=ew(),this.He=ew(),this.Ye=new Zr(Lt),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new w8,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new oi(Lt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new oi(Lt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Be("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new w8),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ew(){return new Zr(nt.comparator)}function x8(){return new Zr(nt.comparator)}const Ude={asc:"ASCENDING",desc:"DESCENDING"},Bde={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zde={and:"AND",or:"OR"};class $de{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function BN(t,e){return t.useProto3Json||S_(e)?e:{value:e}}function Ex(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oq(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Fde(t,e){return Ex(t,e.toTimestamp())}function dl(t){return ln(!!t,49232),yt.fromTimestamp((function(n){const r=Xu(n);return new Tn(r.seconds,r.nanos)})(t))}function U4(t,e){return zN(t,e).canonicalString()}function zN(t,e){const n=(function(i){return new On(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function lq(t){const e=On.fromString(t);return ln(fq(e),10190,{key:e.toString()}),e}function $N(t,e){return U4(t.databaseId,e.path)}function DS(t,e){const n=lq(e);if(n.get(1)!==t.databaseId.projectId)throw new Re(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Re(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new nt(uq(n))}function cq(t,e){return U4(t.databaseId,e)}function Hde(t){const e=lq(t);return e.length===4?On.emptyPath():uq(e)}function FN(t){return new On(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function uq(t){return ln(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function _8(t,e,n){return{name:$N(t,e),fields:n.value.mapValue.fields}}function qde(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ft(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,h){return d.useProto3Json?(ln(h===void 0||typeof h=="string",58123),Ei.fromBase64String(h||"")):(ln(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ei.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&(function(d){const h=d.code===void 0?be.UNKNOWN:iq(d.code);return new Re(h,d.message||"")})(a);n=new aq(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=DS(t,r.document.name),s=dl(r.document.updateTime),a=r.document.createTime?dl(r.document.createTime):yt.min(),l=new Ls({mapValue:{fields:r.document.fields}}),u=Zi.newFoundDocument(i,s,a,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Kw(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=DS(t,r.document),s=r.readTime?dl(r.readTime):yt.min(),a=Zi.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Kw([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=DS(t,r.document),s=r.removedTargetIds||[];n=new Kw([],s,i,null)}else{if(!("filter"in e))return ft(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new Rde(i,s),l=r.targetId;n=new sq(l,a)}}return n}function Gde(t,e){let n;if(e instanceof Uy)n={update:_8(t,e.key,e.value)};else if(e instanceof P_)n={delete:$N(t,e.key)};else if(e instanceof dd)n={update:_8(t,e.key,e.data),updateMask:the(e.fieldMask)};else{if(!(e instanceof Ode))return ft(16599,{Vt:e.type});n={verify:$N(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(s,a){const l=a.transform;if(l instanceof X0)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Zm)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ep)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof _x)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw ft(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:Fde(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ft(27497)})(t,e.precondition)),n}function Wde(t,e){return t&&t.length>0?(ln(e!==void 0,14353),t.map((n=>(function(i,s){let a=i.updateTime?dl(i.updateTime):dl(s);return a.isEqual(yt.min())&&(a=dl(s)),new Nde(a,i.transformResults||[])})(n,e)))):[]}function Kde(t,e){return{documents:[cq(t,e.path)]}}function Yde(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=cq(t,i);const s=(function(d){if(d.length!==0)return hq(Po.create(d,"and"))})(e.filters);s&&(n.structuredQuery.where=s);const a=(function(d){if(d.length!==0)return d.map((h=>(function(y){return{field:am(y.field),direction:Jde(y.dir)}})(h)))})(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=BN(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:n,parent:i}}function Xde(t){let e=Hde(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ln(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=(function(p){const y=dq(p);return y instanceof Po&&$H(y)?y.getFilters():[y]})(n.where));let a=[];n.orderBy&&(a=(function(p){return p.map((y=>(function(w){return new Y0(om(w.field),(function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(w.direction))})(y)))})(n.orderBy));let l=null;n.limit&&(l=(function(p){let y;return y=typeof p=="object"?p.value:p,S_(y)?null:y})(n.limit));let u=null;n.startAt&&(u=(function(p){const y=!!p.before,v=p.values||[];return new Jm(v,y)})(n.startAt));let d=null;return n.endAt&&(d=(function(p){const y=!p.before,v=p.values||[];return new Jm(v,y)})(n.endAt)),pde(e,i,a,s,l,"F",u,d)}function Qde(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ft(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function dq(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=om(n.unaryFilter.field);return Kr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=om(n.unaryFilter.field);return Kr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=om(n.unaryFilter.field);return Kr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=om(n.unaryFilter.field);return Kr.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ft(61313);default:return ft(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Kr.create(om(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ft(58110);default:return ft(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Po.create(n.compositeFilter.filters.map((r=>dq(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ft(1026)}})(n.compositeFilter.op))})(t):ft(30097,{filter:t})}function Jde(t){return Ude[t]}function Zde(t){return Bde[t]}function ehe(t){return zde[t]}function am(t){return{fieldPath:t.canonicalString()}}function om(t){return xi.fromServerFormat(t.fieldPath)}function hq(t){return t instanceof Kr?(function(n){if(n.op==="=="){if(c8(n.value))return{unaryFilter:{field:am(n.field),op:"IS_NAN"}};if(l8(n.value))return{unaryFilter:{field:am(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(c8(n.value))return{unaryFilter:{field:am(n.field),op:"IS_NOT_NAN"}};if(l8(n.value))return{unaryFilter:{field:am(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:am(n.field),op:Zde(n.op),value:n.value}}})(t):t instanceof Po?(function(n){const r=n.getFilters().map((i=>hq(i)));return r.length===1?r[0]:{compositeFilter:{op:ehe(n.op),filters:r}}})(t):ft(54877,{filter:t})}function the(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function fq(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,n,r,i,s=yt.min(),a=yt.min(),l=Ei.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Pu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Pu(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nhe{constructor(e){this.yt=e}}function rhe(t){const e=Xde({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?xx(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ihe{constructor(){this.Cn=new she}addToCollectionParentIndex(e,n){return this.Cn.add(n),Ce.resolve()}getCollectionParents(e,n){return Ce.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Ce.resolve()}deleteFieldIndex(e,n){return Ce.resolve()}deleteAllFieldIndexes(e){return Ce.resolve()}createTargetIndexes(e,n){return Ce.resolve()}getDocumentsMatchingTarget(e,n){return Ce.resolve(null)}getIndexType(e,n){return Ce.resolve(0)}getFieldIndexes(e,n){return Ce.resolve([])}getNextCollectionGroupToUpdate(e){return Ce.resolve(null)}getMinOffset(e,n){return Ce.resolve(Yu.min())}getMinOffsetFromCollectionGroup(e,n){return Ce.resolve(Yu.min())}updateCollectionGroup(e,n,r){return Ce.resolve()}updateIndexEntries(e,n){return Ce.resolve()}}class she{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new oi(On.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new oi(On.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E8={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mq=41943040;class Ds{static withCacheSize(e){return new Ds(e,Ds.DEFAULT_COLLECTION_PERCENTILE,Ds.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ds.DEFAULT_COLLECTION_PERCENTILE=10,Ds.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ds.DEFAULT=new Ds(mq,Ds.DEFAULT_COLLECTION_PERCENTILE,Ds.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ds.DISABLED=new Ds(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new tp(0)}static cr(){return new tp(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T8="LruGarbageCollector",ahe=1048576;function S8([t,e],[n,r]){const i=Lt(t,n);return i===0?Lt(e,r):i}class ohe{constructor(e){this.Ir=e,this.buffer=new oi(S8),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();S8(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class lhe{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Be(T8,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Op(n)?Be(T8,"Ignoring IndexedDB error during garbage collection: ",n):await Ip(n)}await this.Vr(3e5)}))}}class che{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return Ce.resolve(T_.ce);const r=new ohe(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),Ce.resolve(E8)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),E8):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,a,l,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,a=Date.now(),this.nthSequenceNumber(e,i)))).next((p=>(r=p,l=Date.now(),this.removeTargets(e,r,n)))).next((p=>(s=p,u=Date.now(),this.removeOrphanedDocuments(e,r)))).next((p=>(d=Date.now(),im()<=Rt.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${i} in `+(l-a)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),Ce.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p}))))}}function uhe(t,e){return new che(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dhe{constructor(){this.changes=new Qh((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Zi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ce.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hhe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fhe{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&T0(r.mutation,i,ua.empty(),Tn.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Vt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Vt()){const i=uh();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((s=>{let a=h0();return s.forEach(((l,u)=>{a=a.insert(l,u.overlayedDocument)})),a}))))}getOverlayedDocuments(e,n){const r=uh();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Vt())))}populateOverlays(e,n,r){const i=[];return r.forEach((s=>{n.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,l)=>{n.set(a,l)}))}))}computeViews(e,n,r,i){let s=_c();const a=E0(),l=(function(){return E0()})();return n.forEach(((u,d)=>{const h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof dd)?s=s.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),T0(h.mutation,d,h.mutation.getFieldMask(),Tn.now())):a.set(d.key,ua.empty())})),this.recalculateAndSaveOverlays(e,s).next((u=>(u.forEach(((d,h)=>a.set(d,h))),n.forEach(((d,h)=>l.set(d,new hhe(h,a.get(d)??null)))),l)))}recalculateAndSaveOverlays(e,n){const r=E0();let i=new Zr(((a,l)=>a-l)),s=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((a=>{for(const l of a)l.keys().forEach((u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||ua.empty();h=l.applyToLocalView(d,h),r.set(u,h);const p=(i.get(l.batchId)||Vt()).add(u);i=i.insert(l.batchId,p)}))})).next((()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,h=u.value,p=XH();h.forEach((y=>{if(!s.has(y)){const v=nq(n.get(y),r.get(y));v!==null&&p.set(y,v),s=s.add(y)}})),a.push(this.documentOverlayCache.saveOverlays(e,d,p))}return Ce.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(a){return nt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):R4(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Ce.resolve(uh());let l=G0,u=s;return a.next((d=>Ce.forEach(d,((h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(h)?Ce.resolve():this.remoteDocumentCache.getEntry(e,h).next((y=>{u=u.insert(h,y)}))))).next((()=>this.populateOverlays(e,d,s))).next((()=>this.computeViews(e,u,d,Vt()))).next((h=>({batchId:l,changes:YH(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new nt(n)).next((r=>{let i=h0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=h0();return this.indexManager.getCollectionParents(e,s).next((l=>Ce.forEach(l,(u=>{const d=(function(p,y){return new Xh(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next((h=>{h.forEach(((p,y)=>{a=a.insert(p,y)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i)))).next((a=>{s.forEach(((u,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,Zi.newInvalidDocument(h)))}));let l=h0();return a.forEach(((u,d)=>{const h=s.get(u);h!==void 0&&T0(h.mutation,d,ua.empty(),Tn.now()),I_(n,d)&&(l=l.insert(u,d))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mhe{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Ce.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:dl(i.createTime)}})(n)),Ce.resolve()}getNamedQuery(e,n){return Ce.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:rhe(i.bundledQuery),readTime:dl(i.readTime)}})(n)),Ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class phe{constructor(){this.overlays=new Zr(nt.comparator),this.qr=new Map}getOverlay(e,n){return Ce.resolve(this.overlays.get(n))}getOverlays(e,n){const r=uh();return Ce.forEach(n,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,s)=>{this.St(e,n,s)})),Ce.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),Ce.resolve()}getOverlaysForCollection(e,n,r){const i=uh(),s=n.length+1,a=new nt(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Ce.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Zr(((d,h)=>d-h));const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=uh(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=uh(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((d,h)=>l.set(d,h))),!(l.size()>=i)););return Ce.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Pde(n,r));let s=this.qr.get(n);s===void 0&&(s=Vt(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ghe{constructor(){this.sessionToken=Ei.EMPTY_BYTE_STRING}getSessionToken(e){return Ce.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(){this.Qr=new oi(yi.$r),this.Ur=new oi(yi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new yi(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new yi(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new nt(new On([])),r=new yi(n,e),i=new yi(n,e+1),s=[];return this.Ur.forEachInRange([r,i],(a=>{this.Gr(a),s.push(a.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new nt(new On([])),r=new yi(n,e),i=new yi(n,e+1);let s=Vt();return this.Ur.forEachInRange([r,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const n=new yi(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class yi{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return nt.comparator(e.key,n.key)||Lt(e.Yr,n.Yr)}static Kr(e,n){return Lt(e.Yr,n.Yr)||nt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yhe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new oi(yi.$r)}checkEmpty(e){return Ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new jde(s,n,r,i);this.mutationQueue.push(a);for(const l of i)this.Zr=this.Zr.add(new yi(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Ce.resolve(a)}lookupMutationBatch(e,n){return Ce.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return Ce.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ce.resolve(this.mutationQueue.length===0?I4:this.tr-1)}getAllMutationBatches(e){return Ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new yi(n,0),i=new yi(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(a=>{const l=this.Xr(a.Yr);s.push(l)})),Ce.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new oi(Lt);return n.forEach((i=>{const s=new yi(i,0),a=new yi(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],(l=>{r=r.add(l.Yr)}))})),Ce.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;nt.isDocumentKey(s)||(s=s.child(""));const a=new yi(new nt(s),0);let l=new oi(Lt);return this.Zr.forEachWhile((u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(l=l.add(u.Yr)),!0)}),a),Ce.resolve(this.ti(l))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){ln(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Ce.forEach(n.mutations,(i=>{const s=new yi(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new yi(n,0),i=this.Zr.firstAfterOrEqual(r);return Ce.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ce.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vhe{constructor(e){this.ri=e,this.docs=(function(){return new Zr(nt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ce.resolve(r?r.document.mutableCopy():Zi.newInvalidDocument(n))}getEntries(e,n){let r=_c();return n.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Zi.newInvalidDocument(i))})),Ce.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=_c();const a=n.path,l=new nt(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||Wue(Gue(h),r)<=0||(i.has(h.key)||I_(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return Ce.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ft(9500)}ii(e,n){return Ce.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new bhe(this)}getSize(e){return Ce.resolve(this.size)}}class bhe extends dhe{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),Ce.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class whe{constructor(e){this.persistence=e,this.si=new Qh((n=>j4(n)),P4),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.oi=0,this._i=new B4,this.targetCount=0,this.ai=tp.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),Ce.resolve()}getLastRemoteSnapshotVersion(e){return Ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ce.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ce.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Ce.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new tp(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Ce.resolve()}updateTargetData(e,n){return this.Pr(n),Ce.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Ce.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach(((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)})),Ce.waitFor(s).next((()=>i))}getTargetCount(e){return Ce.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Ce.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Ce.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),Ce.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Ce.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Ce.resolve(r)}containsKey(e,n){return Ce.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pq{constructor(e,n){this.ui={},this.overlays={},this.ci=new T_(0),this.li=!1,this.li=!0,this.hi=new ghe,this.referenceDelegate=e(this),this.Pi=new whe(this),this.indexManager=new ihe,this.remoteDocumentCache=(function(i){return new vhe(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new nhe(n),this.Ii=new mhe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new phe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new yhe(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Be("MemoryPersistence","Starting transaction:",e);const i=new xhe(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,n){return Ce.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class xhe extends Yue{constructor(e){super(),this.currentSequenceNumber=e}}class z4{constructor(e){this.persistence=e,this.Ri=new B4,this.Vi=null}static mi(e){return new z4(e)}get fi(){if(this.Vi)return this.Vi;throw ft(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Ce.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Ce.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Ce.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ce.forEach(this.fi,(r=>{const i=nt.fromPath(r);return this.gi(e,i).next((s=>{s||n.removeEntry(i,yt.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Ce.or([()=>Ce.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Tx{constructor(e,n){this.persistence=e,this.pi=new Qh((r=>Jue(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=uhe(this,n)}static mi(e,n){return new Tx(e,n)}Ei(){}di(e){return Ce.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return Ce.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?Ce.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(a=>this.br(e,a,n).next((l=>{l||(r++,s.removeEntry(a,yt.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Ce.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Ce.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Ce.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Ce.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=qw(e.data.value)),n}br(e,n,r){return Ce.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return Ce.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=Vt(),i=Vt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new $4(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _he{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ehe{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return fce()?8:Xue(as())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ws(e,n,i,r).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new _he;return this.Ss(e,n,a).next((l=>{if(s.result=l,this.Vs)return this.bs(e,n,a,l.size)}))})).next((()=>s.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(im()<=Rt.DEBUG&&Be("QueryEngine","SDK will not create cache indexes for query:",sm(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ce.resolve()):(im()<=Rt.DEBUG&&Be("QueryEngine","Query:",sm(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(im()<=Rt.DEBUG&&Be("QueryEngine","The SDK decides to create cache indexes for query:",sm(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ul(n))):Ce.resolve())}ys(e,n){if(f8(n))return Ce.resolve(null);let r=ul(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=xx(n,null,"F"),r=ul(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const a=Vt(...s);return this.ps.getDocuments(e,a).next((l=>this.indexManager.getMinOffset(e,r).next((u=>{const d=this.Ds(n,l);return this.Cs(n,d,a,u.readTime)?this.ys(e,xx(n,null,"F")):this.vs(e,d,n,u)}))))})))))}ws(e,n,r,i){return f8(n)||i.isEqual(yt.min())?Ce.resolve(null):this.ps.getDocuments(e,r).next((s=>{const a=this.Ds(n,s);return this.Cs(n,a,r,i)?Ce.resolve(null):(im()<=Rt.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),sm(n)),this.vs(e,a,n,que(i,G0)).next((l=>l)))}))}Ds(e,n){let r=new oi(WH(e));return n.forEach(((i,s)=>{I_(e,s)&&(r=r.add(s))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return im()<=Rt.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",sm(n)),this.ps.getDocumentsMatchingQuery(e,n,Yu.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(n.forEach((a=>{s=s.insert(a.key,a)})),s)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4="LocalStore",The=3e8;class She{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Zr(Lt),this.xs=new Qh((s=>j4(s)),P4),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fhe(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Che(t,e,n,r){return new She(t,e,n,r)}async function gq(t,e){const n=wt(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((s=>{const a=[],l=[];let u=Vt();for(const d of i){a.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of s){l.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next((d=>({Ls:d,removedBatchIds:a,addedBatchIds:l})))}))}))}function Ahe(t,e){const n=wt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,u,d,h){const p=d.batch,y=p.keys();let v=Ce.resolve();return y.forEach((w=>{v=v.next((()=>h.getEntry(u,w))).next((_=>{const E=d.docVersions.get(w);ln(E!==null,48541),_.version.compareTo(E)<0&&(p.applyToRemoteDocument(_,d),_.isValidDocument()&&(_.setReadTime(d.commitVersion),h.addEntry(_)))}))})),v.next((()=>l.mutationQueue.removeMutationBatch(u,p)))})(n,r,e,s).next((()=>s.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let u=Vt();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function yq(t){const e=wt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function Nhe(t,e){const n=wt(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach(((h,p)=>{const y=i.get(p);if(!y)return;l.push(n.Pi.removeMatchingKeys(s,h.removedDocuments,p).next((()=>n.Pi.addMatchingKeys(s,h.addedDocuments,p))));let v=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Ei.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),(function(_,E,C){return _.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=The?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0})(y,v,h)&&l.push(n.Pi.updateTargetData(s,v))}));let u=_c(),d=Vt();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))})),l.push(khe(s,a,e.documentUpdates).next((h=>{u=h.ks,d=h.qs}))),!r.isEqual(yt.min())){const h=n.Pi.getLastRemoteSnapshotVersion(s).next((p=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));l.push(h)}return Ce.waitFor(l).next((()=>a.apply(s))).next((()=>n.localDocuments.getLocalViewOfDocuments(s,u,d))).next((()=>u))})).then((s=>(n.Ms=i,s)))}function khe(t,e,n){let r=Vt(),i=Vt();return n.forEach((s=>r=r.add(s))),e.getEntries(t,r).next((s=>{let a=_c();return n.forEach(((l,u)=>{const d=s.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(yt.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):Be(F4,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)})),{ks:a,qs:i}}))}function Ihe(t,e){const n=wt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=I4),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Ohe(t,e){const n=wt(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((s=>s?(i=s,Ce.resolve(i)):n.Pi.allocateTargetId(r).next((a=>(i=new Pu(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function HN(t,e,n){const r=wt(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!Op(a))throw a;Be(F4,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function C8(t,e,n){const r=wt(t);let i=yt.min(),s=Vt();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(u,d,h){const p=wt(u),y=p.xs.get(h);return y!==void 0?Ce.resolve(p.Ms.get(y)):p.Pi.getTargetData(d,h)})(r,a,ul(e)).next((l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next((u=>{s=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,e,n?i:yt.min(),n?s:Vt()))).next((l=>(jhe(r,yde(e),l),{documents:l,Qs:s})))))}function jhe(t,e,n){let r=t.Os.get(e)||yt.min();n.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),t.Os.set(e,r)}class A8{constructor(){this.activeTargetIds=Ede()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Phe{constructor(){this.Mo=new A8,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new A8,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rhe{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N8="ConnectivityMonitor";class k8{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Be(N8,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Be(N8,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tw=null;function qN(){return tw===null?tw=(function(){return 268435456+Math.round(2147483648*Math.random())})():tw++,"0x"+tw.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="RestConnection",Dhe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Mhe{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===vx?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const a=qN(),l=this.zo(e,n.toUriEncodedString());Be(MS,`Sending RPC '${e}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,s);const{host:d}=new URL(l),h=jc(d);return this.Jo(e,l,u,r,h).then((p=>(Be(MS,`Received RPC '${e}' ${a}: `,p),p)),(p=>{throw Oh(MS,`RPC '${e}' ${a} failed with error: `,p,"url: ",l,"request:",r),p}))}Ho(e,n,r,i,s,a){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+kp})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,n){const r=Dhe[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lhe{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki="WebChannelConnection";class Vhe extends Mhe{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const a=qN();return new Promise(((l,u)=>{const d=new bH;d.setWithCredentials(!0),d.listenOnce(wH.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Hw.NO_ERROR:const p=d.getResponseJson();Be(Ki,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(p)),l(p);break;case Hw.TIMEOUT:Be(Ki,`RPC '${e}' ${a} timed out`),u(new Re(be.DEADLINE_EXCEEDED,"Request time out"));break;case Hw.HTTP_ERROR:const y=d.getStatus();if(Be(Ki,`RPC '${e}' ${a} failed with status:`,y,"response text:",d.getResponseText()),y>0){let v=d.getResponseJson();Array.isArray(v)&&(v=v[0]);const w=v==null?void 0:v.error;if(w&&w.status&&w.message){const _=(function(C){const N=C.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(N)>=0?N:be.UNKNOWN})(w.status);u(new Re(_,w.message))}else u(new Re(be.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Re(be.UNAVAILABLE,"Connection failed."));break;default:ft(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Be(Ki,`RPC '${e}' ${a} completed.`)}}));const h=JSON.stringify(i);Be(Ki,`RPC '${e}' ${a} sending request:`,i),d.send(n,"POST",h,r,15)}))}T_(e,n,r){const i=qN(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=EH(),l=_H(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");Be(Ki,`Creating RPC '${e}' stream ${i}: ${h}`,u);const p=a.createWebChannel(h,u);this.I_(p);let y=!1,v=!1;const w=new Lhe({Yo:E=>{v?Be(Ki,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(y||(Be(Ki,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),Be(Ki,`RPC '${e}' stream ${i} sending:`,E),p.send(E))},Zo:()=>p.close()}),_=(E,C,N)=>{E.listen(C,(O=>{try{N(O)}catch(R){setTimeout((()=>{throw R}),0)}}))};return _(p,d0.EventType.OPEN,(()=>{v||(Be(Ki,`RPC '${e}' stream ${i} transport opened.`),w.o_())})),_(p,d0.EventType.CLOSE,(()=>{v||(v=!0,Be(Ki,`RPC '${e}' stream ${i} transport closed`),w.a_(),this.E_(p))})),_(p,d0.EventType.ERROR,(E=>{v||(v=!0,Oh(Ki,`RPC '${e}' stream ${i} transport errored. Name:`,E.name,"Message:",E.message),w.a_(new Re(be.UNAVAILABLE,"The operation could not be completed")))})),_(p,d0.EventType.MESSAGE,(E=>{var C;if(!v){const N=E.data[0];ln(!!N,16349);const O=N,R=(O==null?void 0:O.error)||((C=O[0])==null?void 0:C.error);if(R){Be(Ki,`RPC '${e}' stream ${i} received error:`,R);const D=R.status;let P=(function(M){const V=Fr[M];if(V!==void 0)return iq(V)})(D),A=R.message;P===void 0&&(P=be.INTERNAL,A="Unknown error status: "+D+" with message "+R.message),v=!0,w.a_(new Re(P,A)),p.close()}else Be(Ki,`RPC '${e}' stream ${i} received:`,N),w.u_(N)}})),_(l,xH.STAT_EVENT,(E=>{E.stat===ON.PROXY?Be(Ki,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===ON.NOPROXY&&Be(Ki,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{w.__()}),0),w}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function LS(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(t){return new $de(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vq{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I8="PersistentStream";class bq{constructor(e,n,r,i,s,a,l,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vq(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===be.RESOURCE_EXHAUSTED?(xc(n.toString()),xc("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Re(be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Be(I8,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Be(I8,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Uhe extends bq{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=qde(this.serializer,e),r=(function(s){if(!("targetChange"in s))return yt.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?yt.min():a.readTime?dl(a.readTime):yt.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=FN(this.serializer),n.addTarget=(function(s,a){let l;const u=a.target;if(l=VN(u)?{documents:Kde(s,u)}:{query:Yde(s,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=oq(s,a.resumeToken);const d=BN(s,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(yt.min())>0){l.readTime=Ex(s,a.snapshotVersion.toTimestamp());const d=BN(s,a.expectedCount);d!==null&&(l.expectedCount=d)}return l})(this.serializer,e);const r=Qde(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=FN(this.serializer),n.removeTarget=e,this.q_(n)}}class Bhe extends bq{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ln(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ln(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ln(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Wde(e.writeResults,e.commitTime),r=dl(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=FN(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>Gde(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zhe{}class $he extends zhe{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Re(be.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Go(e,zN(n,r),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Re(be.UNKNOWN,s.toString())}))}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Ho(e,zN(n,r),i,a,l,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Re(be.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Fhe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(xc(n),this.aa=!1):Be("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh="RemoteStore";class Hhe{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{Jh(this)&&(Be(jh,"Restarting streams for network reachability change."),await(async function(u){const d=wt(u);d.Ea.add(4),await zy(d),d.Ra.set("Unknown"),d.Ea.delete(4),await M_(d)})(this))}))})),this.Ra=new Fhe(r,i)}}async function M_(t){if(Jh(t))for(const e of t.da)await e(!0)}async function zy(t){for(const e of t.da)await e(!1)}function wq(t,e){const n=wt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),W4(n)?G4(n):jp(n).O_()&&q4(n,e))}function H4(t,e){const n=wt(t),r=jp(n);n.Ia.delete(e),r.O_()&&xq(n,e),n.Ia.size===0&&(r.O_()?r.L_():Jh(n)&&n.Ra.set("Unknown"))}function q4(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(yt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}jp(t).Y_(e)}function xq(t,e){t.Va.Ue(e),jp(t).Z_(e)}function G4(t){t.Va=new Vde({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),jp(t).start(),t.Ra.ua()}function W4(t){return Jh(t)&&!jp(t).x_()&&t.Ia.size>0}function Jh(t){return wt(t).Ea.size===0}function _q(t){t.Va=void 0}async function qhe(t){t.Ra.set("Online")}async function Ghe(t){t.Ia.forEach(((e,n)=>{q4(t,e)}))}async function Whe(t,e){_q(t),W4(t)?(t.Ra.ha(e),G4(t)):t.Ra.set("Unknown")}async function Khe(t,e,n){if(t.Ra.set("Online"),e instanceof aq&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.Ia.delete(l),i.Va.removeTarget(l))})(t,e)}catch(r){Be(jh,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Sx(t,r)}else if(e instanceof Kw?t.Va.Ze(e):e instanceof sq?t.Va.st(e):t.Va.tt(e),!n.isEqual(yt.min()))try{const r=await yq(t.localStore);n.compareTo(r)>=0&&await(function(s,a){const l=s.Va.Tt(a);return l.targetChanges.forEach(((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.Ia.get(d);h&&s.Ia.set(d,h.withResumeToken(u.resumeToken,a))}})),l.targetMismatches.forEach(((u,d)=>{const h=s.Ia.get(u);if(!h)return;s.Ia.set(u,h.withResumeToken(Ei.EMPTY_BYTE_STRING,h.snapshotVersion)),xq(s,u);const p=new Pu(h.target,u,d,h.sequenceNumber);q4(s,p)})),s.remoteSyncer.applyRemoteEvent(l)})(t,n)}catch(r){Be(jh,"Failed to raise snapshot:",r),await Sx(t,r)}}async function Sx(t,e,n){if(!Op(e))throw e;t.Ea.add(1),await zy(t),t.Ra.set("Offline"),n||(n=()=>yq(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Be(jh,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await M_(t)}))}function Eq(t,e){return e().catch((n=>Sx(t,n,e)))}async function L_(t){const e=wt(t),n=Zu(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:I4;for(;Yhe(e);)try{const i=await Ihe(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,Xhe(e,i)}catch(i){await Sx(e,i)}Tq(e)&&Sq(e)}function Yhe(t){return Jh(t)&&t.Ta.length<10}function Xhe(t,e){t.Ta.push(e);const n=Zu(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Tq(t){return Jh(t)&&!Zu(t).x_()&&t.Ta.length>0}function Sq(t){Zu(t).start()}async function Qhe(t){Zu(t).ra()}async function Jhe(t){const e=Zu(t);for(const n of t.Ta)e.ea(n.mutations)}async function Zhe(t,e,n){const r=t.Ta.shift(),i=L4.from(r,e,n);await Eq(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await L_(t)}async function efe(t,e){e&&Zu(t).X_&&await(async function(r,i){if((function(a){return Dde(a)&&a!==be.ABORTED})(i.code)){const s=r.Ta.shift();Zu(r).B_(),await Eq(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await L_(r)}})(t,e),Tq(t)&&Sq(t)}async function O8(t,e){const n=wt(t);n.asyncQueue.verifyOperationInProgress(),Be(jh,"RemoteStore received new credentials");const r=Jh(n);n.Ea.add(3),await zy(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await M_(n)}async function tfe(t,e){const n=wt(t);e?(n.Ea.delete(2),await M_(n)):e||(n.Ea.add(2),await zy(n),n.Ra.set("Unknown"))}function jp(t){return t.ma||(t.ma=(function(n,r,i){const s=wt(n);return s.sa(),new Uhe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Xo:qhe.bind(null,t),t_:Ghe.bind(null,t),r_:Whe.bind(null,t),H_:Khe.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),W4(t)?G4(t):t.Ra.set("Unknown")):(await t.ma.stop(),_q(t))}))),t.ma}function Zu(t){return t.fa||(t.fa=(function(n,r,i){const s=wt(n);return s.sa(),new Bhe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Qhe.bind(null,t),r_:efe.bind(null,t),ta:Jhe.bind(null,t),na:Zhe.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await L_(t)):(await t.fa.stop(),t.Ta.length>0&&(Be(jh,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new uc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,l=new K4(e,n,a,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Re(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Y4(t,e){if(xc("AsyncQueue",`${e}: ${t}`),Op(t))return new Re(be.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{static emptySet(e){return new Cm(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||nt.comparator(n.key,r.key):(n,r)=>nt.comparator(n.key,r.key),this.keyedMap=h0(),this.sortedSet=new Zr(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Cm)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Cm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(){this.ga=new Zr(nt.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ft(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class np{constructor(e,n,r,i,s,a,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach((l=>{a.push({type:0,doc:l})})),new np(e,n,Cm.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&k_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nfe{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class rfe{constructor(){this.queries=P8(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=wt(n),s=i.queries;i.queries=P8(),s.forEach(((a,l)=>{for(const u of l.Sa)u.onError(r)}))})(this,new Re(be.ABORTED,"Firestore shutting down"))}}function P8(){return new Qh((t=>GH(t)),k_)}async function X4(t,e){const n=wt(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new nfe,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const l=Y4(a,`Initialization of query '${sm(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&J4(n)}async function Q4(t,e){const n=wt(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ife(t,e){const n=wt(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const l of a.Sa)l.Fa(i)&&(r=!0);a.wa=i}}r&&J4(n)}function sfe(t,e,n){const r=wt(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function J4(t){t.Ca.forEach((e=>{e.next()}))}var GN,R8;(R8=GN||(GN={})).Ma="default",R8.Cache="cache";class Z4{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new np(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=np.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==GN.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cq{constructor(e){this.key=e}}class Aq{constructor(e){this.key=e}}class afe{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Vt(),this.mutatedKeys=Vt(),this.eu=WH(e),this.tu=new Cm(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new j8,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((h,p)=>{const y=i.get(h),v=I_(this.query,p)?p:null,w=!!y&&this.mutatedKeys.has(y.key),_=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let E=!1;y&&v?y.data.isEqual(v.data)?w!==_&&(r.track({type:3,doc:v}),E=!0):this.su(y,v)||(r.track({type:2,doc:v}),E=!0,(u&&this.eu(v,u)>0||d&&this.eu(v,d)<0)&&(l=!0)):!y&&v?(r.track({type:0,doc:v}),E=!0):y&&!v&&(r.track({type:1,doc:y}),E=!0,(u||d)&&(l=!0)),E&&(v?(a=a.add(v),s=_?s.add(h):s.delete(h)):(a=a.delete(h),s=s.delete(h)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:a,iu:r,Cs:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((h,p)=>(function(v,w){const _=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft(20277,{Rt:E})}};return _(v)-_(w)})(h.type,p.type)||this.eu(h.doc,p.doc))),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,a.length!==0||d?{snapshot:new np(this.query,e.tu,s,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new j8,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Vt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new Aq(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new Cq(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Vt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return np.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const eO="SyncEngine";class ofe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class lfe{constructor(e){this.key=e,this.hu=!1}}class cfe{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Qh((l=>GH(l)),k_),this.Iu=new Map,this.Eu=new Set,this.du=new Zr(nt.comparator),this.Au=new Map,this.Ru=new B4,this.Vu={},this.mu=new Map,this.fu=tp.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ufe(t,e,n=!0){const r=Pq(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Nq(r,e,n,!0),i}async function dfe(t,e){const n=Pq(t);await Nq(n,e,!0,!1)}async function Nq(t,e,n,r){const i=await Ohe(t.localStore,ul(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await hfe(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&wq(t.remoteStore,i),l}async function hfe(t,e,n,r,i){t.pu=(p,y,v)=>(async function(_,E,C,N){let O=E.view.ru(C);O.Cs&&(O=await C8(_.localStore,E.query,!1).then((({documents:A})=>E.view.ru(A,O))));const R=N&&N.targetChanges.get(E.targetId),D=N&&N.targetMismatches.get(E.targetId)!=null,P=E.view.applyChanges(O,_.isPrimaryClient,R,D);return M8(_,E.targetId,P.au),P.snapshot})(t,p,y,v);const s=await C8(t.localStore,e,!0),a=new afe(e,s.Qs),l=a.ru(s.documents),u=By.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=a.applyChanges(l,t.isPrimaryClient,u);M8(t,n,d.au);const h=new ofe(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function ffe(t,e,n){const r=wt(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((a=>!k_(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await HN(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&H4(r.remoteStore,i.targetId),WN(r,i.targetId)})).catch(Ip)):(WN(r,i.targetId),await HN(r.localStore,i.targetId,!0))}async function mfe(t,e){const n=wt(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),H4(n.remoteStore,r.targetId))}async function pfe(t,e,n){const r=_fe(t);try{const i=await(function(a,l){const u=wt(a),d=Tn.now(),h=l.reduce(((v,w)=>v.add(w.key)),Vt());let p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",(v=>{let w=_c(),_=Vt();return u.Ns.getEntries(v,h).next((E=>{w=E,w.forEach(((C,N)=>{N.isValidDocument()||(_=_.add(C))}))})).next((()=>u.localDocuments.getOverlayedDocuments(v,w))).next((E=>{p=E;const C=[];for(const N of l){const O=Ide(N,p.get(N.key).overlayedDocument);O!=null&&C.push(new dd(N.key,O,UH(O.value.mapValue),bs.exists(!0)))}return u.mutationQueue.addMutationBatch(v,d,C,l)})).next((E=>{y=E;const C=E.applyToLocalDocumentSet(p,_);return u.documentOverlayCache.saveOverlays(v,E.batchId,C)}))})).then((()=>({batchId:y.batchId,changes:YH(p)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,l,u){let d=a.Vu[a.currentUser.toKey()];d||(d=new Zr(Lt)),d=d.insert(l,u),a.Vu[a.currentUser.toKey()]=d})(r,i.batchId,n),await $y(r,i.changes),await L_(r.remoteStore)}catch(i){const s=Y4(i,"Failed to persist write");n.reject(s)}}async function kq(t,e){const n=wt(t);try{const r=await Nhe(n.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=n.Au.get(s);a&&(ln(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?ln(a.hu,14607):i.removedDocuments.size>0&&(ln(a.hu,42227),a.hu=!1))})),await $y(n,r,e)}catch(r){await Ip(r)}}function D8(t,e,n){const r=wt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((s,a)=>{const l=a.view.va(e);l.snapshot&&i.push(l.snapshot)})),(function(a,l){const u=wt(a);u.onlineState=l;let d=!1;u.queries.forEach(((h,p)=>{for(const y of p.Sa)y.va(l)&&(d=!0)})),d&&J4(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function gfe(t,e,n){const r=wt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new Zr(nt.comparator);a=a.insert(s,Zi.newNoDocument(s,yt.min()));const l=Vt().add(s),u=new R_(yt.min(),new Map,new Zr(Lt),a,l);await kq(r,u),r.du=r.du.remove(s),r.Au.delete(e),tO(r)}else await HN(r.localStore,e,!1).then((()=>WN(r,e,n))).catch(Ip)}async function yfe(t,e){const n=wt(t),r=e.batch.batchId;try{const i=await Ahe(n.localStore,e);Oq(n,r,null),Iq(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await $y(n,i)}catch(i){await Ip(i)}}async function vfe(t,e,n){const r=wt(t);try{const i=await(function(a,l){const u=wt(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let h;return u.mutationQueue.lookupMutationBatch(d,l).next((p=>(ln(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(d,p)))).next((()=>u.mutationQueue.performConsistencyCheck(d))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,l))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h))).next((()=>u.localDocuments.getDocuments(d,h)))}))})(r.localStore,e);Oq(r,e,n),Iq(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await $y(r,i)}catch(i){await Ip(i)}}function Iq(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function Oq(t,e,n){const r=wt(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function WN(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||jq(t,r)}))}function jq(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(H4(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),tO(t))}function M8(t,e,n){for(const r of n)r instanceof Cq?(t.Ru.addReference(r.key,e),bfe(t,r)):r instanceof Aq?(Be(eO,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||jq(t,r.key)):ft(19791,{wu:r})}function bfe(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Be(eO,"New document in limbo: "+n),t.Eu.add(r),tO(t))}function tO(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new nt(On.fromString(e)),r=t.fu.next();t.Au.set(r,new lfe(n)),t.du=t.du.insert(n,r),wq(t.remoteStore,new Pu(ul(N_(n.path)),r,"TargetPurposeLimboResolution",T_.ce))}}async function $y(t,e,n){const r=wt(t),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((l,u)=>{a.push(r.pu(u,e,n).then((d=>{var h;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){i.push(d);const p=$4.As(u.targetId,d);s.push(p)}})))})),await Promise.all(a),r.Pu.H_(i),await(async function(u,d){const h=wt(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>Ce.forEach(d,(y=>Ce.forEach(y.Es,(v=>h.persistence.referenceDelegate.addReference(p,y.targetId,v))).next((()=>Ce.forEach(y.ds,(v=>h.persistence.referenceDelegate.removeReference(p,y.targetId,v)))))))))}catch(p){if(!Op(p))throw p;Be(F4,"Failed to update sequence numbers: "+p)}for(const p of d){const y=p.targetId;if(!p.fromCache){const v=h.Ms.get(y),w=v.snapshotVersion,_=v.withLastLimboFreeSnapshotVersion(w);h.Ms=h.Ms.insert(y,_)}}})(r.localStore,s))}async function wfe(t,e){const n=wt(t);if(!n.currentUser.isEqual(e)){Be(eO,"User change. New user:",e.toKey());const r=await gq(n.localStore,e);n.currentUser=e,(function(s,a){s.mu.forEach((l=>{l.forEach((u=>{u.reject(new Re(be.CANCELLED,a))}))})),s.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await $y(n,r.Ls)}}function xfe(t,e){const n=wt(t),r=n.Au.get(e);if(r&&r.hu)return Vt().add(r.key);{let i=Vt();const s=n.Iu.get(e);if(!s)return i;for(const a of s){const l=n.Tu.get(a);i=i.unionWith(l.view.nu)}return i}}function Pq(t){const e=wt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=kq.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xfe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gfe.bind(null,e),e.Pu.H_=ife.bind(null,e.eventManager),e.Pu.yu=sfe.bind(null,e.eventManager),e}function _fe(t){const e=wt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yfe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vfe.bind(null,e),e}class Cx{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=D_(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Che(this.persistence,new Ehe,e.initialUser,this.serializer)}Cu(e){return new pq(z4.mi,this.serializer)}Du(e){return new Phe}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cx.provider={build:()=>new Cx};class Efe extends Cx{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ln(this.persistence.referenceDelegate instanceof Tx,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new lhe(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ds.withCacheSize(this.cacheSizeBytes):Ds.DEFAULT;return new pq((r=>Tx.mi(r,n)),this.serializer)}}class KN{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>D8(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wfe.bind(null,this.syncEngine),await tfe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new rfe})()}createDatastore(e){const n=D_(e.databaseInfo.databaseId),r=(function(s){return new Vhe(s)})(e.databaseInfo);return(function(s,a,l,u){return new $he(s,a,l,u)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,s,a,l){return new Hhe(r,i,s,a,l)})(this.localStore,this.datastore,e.asyncQueue,(n=>D8(this.syncEngine,n,0)),(function(){return k8.v()?new k8:new Rhe})())}createSyncEngine(e,n){return(function(i,s,a,l,u,d,h){const p=new cfe(i,s,a,l,u,d);return h&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(i){const s=wt(i);Be(jh,"RemoteStore shutting down."),s.Ea.add(5),await zy(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}KN.provider={build:()=>new KN};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):xc("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed="FirestoreClient";class Tfe{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Qi.UNAUTHENTICATED,this.clientId=__.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async a=>{Be(ed,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(Be(ed,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new uc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Y4(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function VS(t,e){t.asyncQueue.verifyOperationInProgress(),Be(ed,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await gq(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function L8(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Sfe(t);Be(ed,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>O8(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>O8(e.remoteStore,i))),t._onlineComponents=e}async function Sfe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Be(ed,"Using user provided OfflineComponentProvider");try{await VS(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===be.FAILED_PRECONDITION||i.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Oh("Error using user provided cache. Falling back to memory cache: "+n),await VS(t,new Cx)}}else Be(ed,"Using default OfflineComponentProvider"),await VS(t,new Efe(void 0));return t._offlineComponents}async function Rq(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Be(ed,"Using user provided OnlineComponentProvider"),await L8(t,t._uninitializedComponentsProvider._online)):(Be(ed,"Using default OnlineComponentProvider"),await L8(t,new KN))),t._onlineComponents}function Cfe(t){return Rq(t).then((e=>e.syncEngine))}async function Ax(t){const e=await Rq(t),n=e.eventManager;return n.onListen=ufe.bind(null,e.syncEngine),n.onUnlisten=ffe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=dfe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=mfe.bind(null,e.syncEngine),n}function Afe(t,e,n={}){const r=new uc;return t.asyncQueue.enqueueAndForget((async()=>(function(s,a,l,u,d){const h=new nO({next:y=>{h.Nu(),a.enqueueAndForget((()=>Q4(s,p)));const v=y.docs.has(l);!v&&y.fromCache?d.reject(new Re(be.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&y.fromCache&&u&&u.source==="server"?d.reject(new Re(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(y)},error:y=>d.reject(y)}),p=new Z4(N_(l.path),h,{includeMetadataChanges:!0,qa:!0});return X4(s,p)})(await Ax(t),t.asyncQueue,e,n,r))),r.promise}function Nfe(t,e,n={}){const r=new uc;return t.asyncQueue.enqueueAndForget((async()=>(function(s,a,l,u,d){const h=new nO({next:y=>{h.Nu(),a.enqueueAndForget((()=>Q4(s,p))),y.fromCache&&u.source==="server"?d.reject(new Re(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(y)},error:y=>d.reject(y)}),p=new Z4(l,h,{includeMetadataChanges:!0,qa:!0});return X4(s,p)})(await Ax(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dq(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V8=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mq="firestore.googleapis.com",U8=!0;class B8{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Re(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Mq,this.ssl=U8}else this.host=e.host,this.ssl=e.ssl??U8;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mq;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ahe)throw new Re(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Dq(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Re(be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Re(be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Re(be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class V_{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new B8({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Re(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new B8(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new CH;switch(r.type){case"firstParty":return new Vue(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Re(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=V8.get(n);r&&(Be("ComponentProvider","Removing Datastore"),V8.delete(n),r.terminate())})(this),Promise.resolve()}}function Lq(t,e,n,r={}){var d;t=ss(t,V_);const i=jc(e),s=t._getSettings(),a={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(v_(`https://${l}`),b_("Firestore",!0)),s.host!==Mq&&s.host!==l&&Oh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:i,emulatorOptions:r};if(!yl(u,a)&&(t._setSettings(u),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Qi.MOCK_USER;else{h=C4(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Re(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Qi(y)}t._authCredentials=new Due(new SH(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bo(this.firestore,e,this._query)}}class cr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cr(this.firestore,e,this._key)}toJSON(){return{type:cr._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Vy(n,cr._jsonSchema))return new cr(e,r||null,new nt(On.fromString(n.referencePath)))}}cr._jsonSchemaVersion="firestore/documentReference/1.0",cr._jsonSchema={type:Xr("string",cr._jsonSchemaVersion),referencePath:Xr("string")};class dc extends Bo{constructor(e,n,r){super(e,n,N_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cr(this.firestore,null,new nt(e))}withConverter(e){return new dc(this.firestore,e,this._path)}}function _t(t,e,...n){if(t=rn(t),AH("collection","path",e),t instanceof V_){const r=On.fromString(e,...n);return e8(r),new dc(t,null,r)}{if(!(t instanceof cr||t instanceof dc))throw new Re(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(On.fromString(e,...n));return e8(r),new dc(t.firestore,null,r)}}function Ct(t,e,...n){if(t=rn(t),arguments.length===1&&(e=__.newId()),AH("doc","path",e),t instanceof V_){const r=On.fromString(e,...n);return ZM(r),new cr(t,null,new nt(r))}{if(!(t instanceof cr||t instanceof dc))throw new Re(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(On.fromString(e,...n));return ZM(r),new cr(t.firestore,t instanceof dc?t.converter:null,new nt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z8="AsyncQueue";class $8{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vq(this,"async_queue_retry"),this._c=()=>{const r=LS();r&&Be(z8,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=LS();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=LS();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new uc;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Op(e))throw e;Be(z8,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,xc("INTERNAL UNHANDLED ERROR: ",F8(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=K4.createAndSchedule(this,e,n,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&ft(47125,{Pc:F8(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function F8(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H8(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(t,["next","error","complete"])}class Ro extends V_{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new $8,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new $8(e),this._firestoreClient=void 0,await e}}}function Vq(t,e){const n=typeof t=="object"?t:Ly(),r=typeof t=="string"?t:vx,i=My(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=S4("firestore");s&&Lq(i,...s)}return i}function Pp(t){if(t._terminated)throw new Re(be.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||kfe(t),t._firestoreClient}function kfe(t){var r,i,s;const e=t._freezeSettings(),n=(function(l,u,d,h){return new tde(l,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Dq(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Tfe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sa(Ei.fromBase64String(e))}catch(n){throw new Re(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new sa(Ei.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:sa._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vy(e,sa._jsonSchema))return sa.fromBase64String(e.bytes)}}sa._jsonSchemaVersion="firestore/bytes/1.0",sa._jsonSchema={type:Xr("string",sa._jsonSchemaVersion),bytes:Xr("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Re(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function U_(){return new Zh(PN)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Re(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Re(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Lt(this._lat,e._lat)||Lt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ao._jsonSchemaVersion}}static fromJSON(e){if(Vy(e,Ao._jsonSchema))return new Ao(e.latitude,e.longitude)}}Ao._jsonSchemaVersion="firestore/geoPoint/1.0",Ao._jsonSchema={type:Xr("string",Ao._jsonSchemaVersion),latitude:Xr("number"),longitude:Xr("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:No._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vy(e,No._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new No(e.vectorValues);throw new Re(be.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}No._jsonSchemaVersion="firestore/vectorValue/1.0",No._jsonSchema={type:Xr("string",No._jsonSchemaVersion),vectorValues:Xr("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ife=/^__.*__$/;class Ofe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new dd(e,this.data,this.fieldMask,n,this.fieldTransforms):new Uy(e,this.data,n,this.fieldTransforms)}}class Uq{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new dd(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Bq(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft(40011,{Ac:t})}}class B_{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new B_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Nx(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Bq(this.Ac)&&Ife.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class jfe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||D_(e)}Cc(e,n,r,i=!1){return new B_({Ac:e,methodName:n,Dc:r,path:xi.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rp(t){const e=t._freezeSettings(),n=D_(t._databaseId);return new jfe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function rO(t,e,n,r,i,s={}){const a=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);oO("Data must be an object, but it was:",a,r);const l=qq(r,a);let u,d;if(s.merge)u=new ua(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){const h=[];for(const p of s.mergeFields){const y=YN(e,p,n);if(!a.contains(y))throw new Re(be.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);Wq(h,y)||h.push(y)}u=new ua(h),d=a.fieldTransforms.filter((p=>u.covers(p.field)))}else u=null,d=a.fieldTransforms;return new Ofe(new Ls(l),u,d)}class z_ extends ef{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof z_}}function zq(t,e,n){return new B_({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class iO extends ef{_toFieldTransform(e){return new M4(e.path,new X0)}isEqual(e){return e instanceof iO}}class sO extends ef{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=zq(this,e,!0),r=this.vc.map((s=>tf(s,n))),i=new Zm(r);return new M4(e.path,i)}isEqual(e){return e instanceof sO&&yl(this.vc,e.vc)}}class aO extends ef{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=zq(this,e,!0),r=this.vc.map((s=>tf(s,n))),i=new ep(r);return new M4(e.path,i)}isEqual(e){return e instanceof aO&&yl(this.vc,e.vc)}}function $q(t,e,n,r){const i=t.Cc(1,e,n);oO("Data must be an object, but it was:",i,r);const s=[],a=Ls.empty();ud(r,((u,d)=>{const h=lO(e,u,n);d=rn(d);const p=i.yc(h);if(d instanceof z_)s.push(h);else{const y=tf(d,p);y!=null&&(s.push(h),a.set(h,y))}}));const l=new ua(s);return new Uq(a,l,i.fieldTransforms)}function Fq(t,e,n,r,i,s){const a=t.Cc(1,e,n),l=[YN(e,r,n)],u=[i];if(s.length%2!=0)throw new Re(be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)l.push(YN(e,s[y])),u.push(s[y+1]);const d=[],h=Ls.empty();for(let y=l.length-1;y>=0;--y)if(!Wq(d,l[y])){const v=l[y];let w=u[y];w=rn(w);const _=a.yc(v);if(w instanceof z_)d.push(v);else{const E=tf(w,_);E!=null&&(d.push(v),h.set(v,E))}}const p=new ua(d);return new Uq(h,p,a.fieldTransforms)}function Hq(t,e,n,r=!1){return tf(n,t.Cc(r?4:3,e))}function tf(t,e){if(Gq(t=rn(t)))return oO("Unsupported field value:",e,t),qq(t,e);if(t instanceof ef)return(function(r,i){if(!Bq(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const s=[];let a=0;for(const l of r){let u=tf(l,i.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}})(t,e)}return(function(r,i){if((r=rn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Tde(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Tn.fromDate(r);return{timestampValue:Ex(i.serializer,s)}}if(r instanceof Tn){const s=new Tn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ex(i.serializer,s)}}if(r instanceof Ao)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof sa)return{bytesValue:oq(i.serializer,r._byteString)};if(r instanceof cr){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:U4(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof No)return(function(a,l){return{mapValue:{fields:{[LH]:{stringValue:VH},[bx]:{arrayValue:{values:a.toArray().map((d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return D4(l.serializer,d)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${E_(r)}`)})(t,e)}function qq(t,e){const n={};return OH(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ud(t,((r,i)=>{const s=tf(i,e.mc(r));s!=null&&(n[r]=s)})),{mapValue:{fields:n}}}function Gq(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Tn||t instanceof Ao||t instanceof sa||t instanceof cr||t instanceof ef||t instanceof No)}function oO(t,e,n){if(!Gq(n)||!kH(n)){const r=E_(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function YN(t,e,n){if((e=rn(e))instanceof Zh)return e._internalPath;if(typeof e=="string")return lO(t,e);throw Nx("Field path arguments must be of type string or ",t,!1,void 0,n)}const Pfe=new RegExp("[~\\*/\\[\\]]");function lO(t,e,n){if(e.search(Pfe)>=0)throw Nx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Zh(...e.split("."))._internalPath}catch{throw Nx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Nx(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${r}`),a&&(u+=` in document ${i}`),u+=")"),new Re(be.INVALID_ARGUMENT,l+t+u)}function Wq(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new cr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Rfe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field($_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Rfe extends cO{data(){return super.data()}}function $_(t,e){return typeof e=="string"?lO(t,e):e instanceof Zh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kq(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Re(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uO{}class Fy extends uO{}function $t(t,e,...n){let r=[];e instanceof uO&&r.push(e),r=r.concat(n),(function(s){const a=s.filter((u=>u instanceof F_)).length,l=s.filter((u=>u instanceof Hy)).length;if(a>1||a>0&&l>0)throw new Re(be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class Hy extends Fy{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Hy(e,n,r)}_apply(e){const n=this._parse(e);return Xq(e._query,n),new Bo(e.firestore,e.converter,UN(e._query,n))}_parse(e){const n=Rp(e.firestore);return(function(s,a,l,u,d,h,p){let y;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Re(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){G8(p,h);const w=[];for(const _ of p)w.push(q8(u,s,_));y={arrayValue:{values:w}}}else y=q8(u,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||G8(p,h),y=Hq(l,a,p,h==="in"||h==="not-in");return Kr.create(d,h,y)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function an(t,e,n){const r=e,i=$_("where",t);return Hy._create(i,r,n)}class F_ extends uO{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new F_(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Po.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,s){let a=i;const l=s.getFlattenedFilters();for(const u of l)Xq(a,u),a=UN(a,u)})(e._query,n),new Bo(e.firestore,e.converter,UN(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class H_ extends Fy{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new H_(e,n)}_apply(e){const n=(function(i,s,a){if(i.startAt!==null)throw new Re(be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Re(be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Y0(s,a)})(e._query,this._field,this._direction);return new Bo(e.firestore,e.converter,(function(i,s){const a=i.explicitOrderBy.concat([s]);return new Xh(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}}function Do(t,e="asc"){const n=e,r=$_("orderBy",t);return H_._create(r,n)}class q_ extends Fy{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new q_(e,n,r)}_apply(e){return new Bo(e.firestore,e.converter,xx(e._query,this._limit,this._limitType))}}function hl(t){return Hue("limit",t),q_._create("limit",t,"F")}class G_ extends Fy{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new G_(e,n,r)}_apply(e){const n=Dfe(e,this.type,this._docOrFields,this._inclusive);return new Bo(e.firestore,e.converter,(function(i,s){return new Xh(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)})(e._query,n))}}function Yq(...t){return G_._create("startAfter",t,!1)}function Dfe(t,e,n,r){if(n[0]=rn(n[0]),n[0]instanceof cO)return(function(s,a,l,u,d){if(!u)throw new Re(be.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const h=[];for(const p of Sm(s))if(p.field.isKeyField())h.push(wx(a,u.key));else{const y=u.data.field(p.field);if(C_(y))throw new Re(be.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(y===null){const v=p.field.canonicalString();throw new Re(be.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(y)}return new Jm(h,d)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Rp(t.firestore);return(function(a,l,u,d,h,p){const y=a.explicitOrderBy;if(h.length>y.length)throw new Re(be.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const v=[];for(let w=0;w<h.length;w++){const _=h[w];if(y[w].field.isKeyField()){if(typeof _!="string")throw new Re(be.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof _}`);if(!R4(a)&&_.indexOf("/")!==-1)throw new Re(be.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${_}' contains a slash.`);const E=a.path.child(On.fromString(_));if(!nt.isDocumentKey(E))throw new Re(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${E}' is not because it contains an odd number of segments.`);const C=new nt(E);v.push(wx(l,C))}else{const E=Hq(u,d,_);v.push(E)}}return new Jm(v,p)})(t._query,t.firestore._databaseId,i,e,n,r)}}function q8(t,e,n){if(typeof(n=rn(n))=="string"){if(n==="")throw new Re(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!R4(e)&&n.indexOf("/")!==-1)throw new Re(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(On.fromString(n));if(!nt.isDocumentKey(r))throw new Re(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wx(t,new nt(r))}if(n instanceof cr)return wx(t,n._key);throw new Re(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${E_(n)}.`)}function G8(t,e){if(!Array.isArray(t)||t.length===0)throw new Re(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Xq(t,e){const n=(function(i,s){for(const a of i)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Re(be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Re(be.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Qq{convertValue(e,n="none"){switch(Ju(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ft(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ud(e,((i,s)=>{r[i]=this.convertValue(s,n)})),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[bx].arrayValue)==null?void 0:i.values)==null?void 0:s.map((a=>Pr(a.doubleValue)));return new No(n)}convertGeoPoint(e){return new Ao(Pr(e.latitude),Pr(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=A_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(W0(e));default:return null}}convertTimestamp(e){const n=Xu(e);return new Tn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=On.fromString(e);ln(fq(r),9688,{name:e});const i=new Ym(r.get(1),r.get(3)),s=new nt(r.popFirst(5));return i.isEqual(n)||xc(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class gm{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $u extends cO{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new S0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field($_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(be.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=$u._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}$u._jsonSchemaVersion="firestore/documentSnapshot/1.0",$u._jsonSchema={type:Xr("string",$u._jsonSchemaVersion),bundleSource:Xr("string","DocumentSnapshot"),bundleName:Xr("string"),bundle:Xr("string")};class S0 extends $u{data(e={}){return super.data(e)}}class Fu{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new gm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new S0(this._firestore,this._userDataWriter,r.key,r,new gm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Re(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((l=>{const u=new S0(i._firestore,i._userDataWriter,l.doc.key,l.doc,new gm(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((l=>s||l.type!==3)).map((l=>{const u=new S0(i._firestore,i._userDataWriter,l.doc.key,l.doc,new gm(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:Mfe(l.type),doc:u,oldIndex:d,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(be.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=__.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Mfe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(t){t=ss(t,cr);const e=ss(t.firestore,Ro);return Afe(Pp(e),t._key).then((n=>Jq(e,t,n)))}Fu._jsonSchemaVersion="firestore/querySnapshot/1.0",Fu._jsonSchema={type:Xr("string",Fu._jsonSchemaVersion),bundleSource:Xr("string","QuerySnapshot"),bundleName:Xr("string"),bundle:Xr("string")};class hO extends Qq{constructor(e){super(),this.firestore=e}convertBytes(e){return new sa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new cr(this.firestore,null,n)}}function Mn(t){t=ss(t,Bo);const e=ss(t.firestore,Ro),n=Pp(e),r=new hO(e);return Kq(t._query),Nfe(n,t._query).then((i=>new Fu(e,r,t,i)))}function W_(t,e,n){t=ss(t,cr);const r=ss(t.firestore,Ro),i=dO(t.converter,e,n);return Dp(r,[rO(Rp(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,bs.none())])}function jr(t,e,n,...r){t=ss(t,cr);const i=ss(t.firestore,Ro),s=Rp(i);let a;return a=typeof(e=rn(e))=="string"||e instanceof Zh?Fq(s,"updateDoc",t._key,e,n,r):$q(s,"updateDoc",t._key,e),Dp(i,[a.toMutation(t._key,bs.exists(!0))])}function K_(t){return Dp(ss(t.firestore,Ro),[new P_(t._key,bs.none())])}function Ph(t,e){const n=ss(t.firestore,Ro),r=Ct(t),i=dO(t.converter,e);return Dp(n,[rO(Rp(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,bs.exists(!1))]).then((()=>r))}function ko(t,...e){var u,d,h;t=rn(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||H8(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(H8(e[r])){const p=e[r];e[r]=(u=p.next)==null?void 0:u.bind(p),e[r+1]=(d=p.error)==null?void 0:d.bind(p),e[r+2]=(h=p.complete)==null?void 0:h.bind(p)}let s,a,l;if(t instanceof cr)a=ss(t.firestore,Ro),l=N_(t._key.path),s={next:p=>{e[r]&&e[r](Jq(a,t,p))},error:e[r+1],complete:e[r+2]};else{const p=ss(t,Bo);a=ss(p.firestore,Ro),l=p._query;const y=new hO(a);s={next:v=>{e[r]&&e[r](new Fu(a,y,p,v))},error:e[r+1],complete:e[r+2]},Kq(t._query)}return(function(y,v,w,_){const E=new nO(_),C=new Z4(v,E,w);return y.asyncQueue.enqueueAndForget((async()=>X4(await Ax(y),C))),()=>{E.Nu(),y.asyncQueue.enqueueAndForget((async()=>Q4(await Ax(y),C)))}})(Pp(a),l,i,s)}function Dp(t,e){return(function(r,i){const s=new uc;return r.asyncQueue.enqueueAndForget((async()=>pfe(await Cfe(r),i,s))),s.promise})(Pp(t),e)}function Jq(t,e,n){const r=n.docs.get(e._key),i=new hO(t);return new $u(t,i,e._key,r,new gm(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zq{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Rp(e)}set(e,n,r){this._verifyNotCommitted();const i=US(e,this._firestore),s=dO(i.converter,n,r),a=rO(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,bs.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=US(e,this._firestore);let a;return a=typeof(n=rn(n))=="string"||n instanceof Zh?Fq(this._dataReader,"WriteBatch.update",s._key,n,r,i):$q(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,bs.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=US(e,this._firestore);return this._mutations=this._mutations.concat(new P_(n._key,bs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function US(t,e){if((t=rn(t)).firestore!==e)throw new Re(be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function fl(){return new iO("serverTimestamp")}function XN(...t){return new sO("arrayUnion",t)}function fO(...t){return new aO("arrayRemove",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(t){return Pp(t=ss(t,Ro)),new Zq(t,(e=>Dp(t,e)))}(function(e,n=!0){(function(i){kp=i})(cd),Ku(new bc("firestore",((r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),l=new Ro(new Mue(r.getProvider("auth-internal")),new Uue(a,r.getProvider("app-check-internal")),(function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Re(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ym(d.options.projectId,h)})(a,i),a);return s={useFetchStreams:n,...s},l._setSettings(s),l}),"PUBLIC").setMultipleInstances(!0)),Xa(XM,QM,e),Xa(XM,QM,"esm2020")})();const rc=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Qq,Bytes:sa,CollectionReference:dc,DocumentReference:cr,DocumentSnapshot:$u,FieldPath:Zh,FieldValue:ef,Firestore:Ro,FirestoreError:Re,GeoPoint:Ao,Query:Bo,QueryCompositeFilterConstraint:F_,QueryConstraint:Fy,QueryDocumentSnapshot:S0,QueryFieldFilterConstraint:Hy,QueryLimitConstraint:q_,QueryOrderByConstraint:H_,QuerySnapshot:Fu,QueryStartAtConstraint:G_,SnapshotMetadata:gm,Timestamp:Tn,VectorValue:No,WriteBatch:Zq,_AutoId:__,_ByteString:Ei,_DatabaseId:Ym,_DocumentKey:nt,_EmptyAuthCredentialsProvider:CH,_FieldPath:xi,_cast:ss,_logWarn:Oh,_validateIsNotUsedTogether:NH,addDoc:Ph,arrayRemove:fO,arrayUnion:XN,collection:_t,connectFirestoreEmulator:Lq,deleteDoc:K_,doc:Ct,documentId:U_,ensureFirestoreConfigured:Pp,executeWrite:Dp,getDoc:td,getDocs:Mn,getFirestore:Vq,limit:hl,onSnapshot:ko,orderBy:Do,query:$t,serverTimestamp:fl,setDoc:W_,startAfter:Yq,updateDoc:jr,where:an,writeBatch:mO},Symbol.toStringTag,{value:"Module"}));var Lfe="firebase",Vfe="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xa(Lfe,Vfe,"app");function eG(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ufe=eG,tG=new Dy("auth","Firebase",eG());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx=new x_("@firebase/auth");function Bfe(t,...e){kx.logLevel<=Rt.WARN&&kx.warn(`Auth (${cd}): ${t}`,...e)}function Yw(t,...e){kx.logLevel<=Rt.ERROR&&kx.error(`Auth (${cd}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(t,...e){throw pO(t,...e)}function ml(t,...e){return pO(t,...e)}function nG(t,e,n){const r={...Ufe(),[e]:n};return new Dy("auth","Firebase",r).create(e,{appName:t.name})}function hc(t){return nG(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pO(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return tG.create(t,...e)}function ht(t,e,...n){if(!t)throw pO(e,...n)}function ic(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Yw(e),new Error(e)}function Ec(t,e){t||ic(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function zfe(){return W8()==="http:"||W8()==="https:"}function W8(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $fe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zfe()||uce()||"connection"in navigator)?navigator.onLine:!0}function Ffe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ec(n>e,"Short delay should be less than long delay!"),this.isMobile=A4()||dH()}get(){return $fe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gO(t,e){Ec(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rG{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ic("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ic("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ic("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hfe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qfe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Gfe=new qy(3e4,6e4);function Pc(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Cl(t,e,n,r,i={}){return iG(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const l=Np({key:t.config.apiKey,...a}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...s};return cce()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&jc(t.emulatorConfig.host)&&(d.credentials="include"),rG.fetch()(await sG(t,t.config.apiHost,n,l),d)})}async function iG(t,e,n){t._canInitEmulator=!1;const r={...Hfe,...e};try{const i=new Kfe(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw nw(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw nw(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw nw(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw nw(t,"user-disabled",a);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw nG(t,h,d);Mo(t,h)}}catch(i){if(i instanceof Tl)throw i;Mo(t,"network-request-failed",{message:String(i)})}}async function Gy(t,e,n,r,i={}){const s=await Cl(t,e,n,r,i);return"mfaPendingCredential"in s&&Mo(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function sG(t,e,n,r){const i=`${e}${n}?${r}`,s=t,a=s.config.emulator?gO(t.config,i):`${t.config.apiScheme}://${i}`;return qfe.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function Wfe(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Kfe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ml(this.auth,"network-request-failed")),Gfe.get())})}}function nw(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ml(t,e,r);return i.customData._tokenResponse=n,i}function K8(t){return t!==void 0&&t.enterprise!==void 0}class Yfe{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Wfe(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Xfe(t,e){return Cl(t,"GET","/v2/recaptchaConfig",Pc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qfe(t,e){return Cl(t,"POST","/v1/accounts:delete",e)}async function Ix(t,e){return Cl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Jfe(t,e=!1){const n=rn(t),r=await n.getIdToken(e),i=yO(r);ht(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:C0(BS(i.auth_time)),issuedAtTime:C0(BS(i.iat)),expirationTime:C0(BS(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function BS(t){return Number(t)*1e3}function yO(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Yw("JWT malformed, contained fewer than 3 sections"),null;try{const i=mx(n);return i?JSON.parse(i):(Yw("Failed to decode base64 JWT payload"),null)}catch(i){return Yw("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Y8(t){const e=yO(t);return ht(e,"internal-error"),ht(typeof e.exp<"u","internal-error"),ht(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rp(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Tl&&Zfe(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Zfe({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eme{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=C0(this.lastLoginAt),this.creationTime=C0(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ox(t){var p;const e=t.auth,n=await t.getIdToken(),r=await rp(t,Ix(e,{idToken:n}));ht(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(p=i.providerUserInfo)!=null&&p.length?aG(i.providerUserInfo):[],a=nme(t.providerData,s),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new JN(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function tme(t){const e=rn(t);await Ox(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nme(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function aG(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rme(t,e){const n=await iG(t,{},async()=>{const r=Np({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=await sG(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:r};return t.emulatorConfig&&jc(t.emulatorConfig.host)&&(u.credentials="include"),rG.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ime(t,e){return Cl(t,"POST","/v2/accounts:revokeToken",Pc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ht(e.idToken,"internal-error"),ht(typeof e.idToken<"u","internal-error"),ht(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Y8(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ht(e.length!==0,"internal-error");const n=Y8(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ht(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await rme(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new Am;return r&&(ht(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(ht(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(ht(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Am,this.toJSON())}_performRefresh(){return ic("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(t,e){ht(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Eo{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new eme(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new JN(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await rp(this,this.stsTokenManager.getToken(this.auth,e));return ht(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Jfe(this,e)}reload(){return tme(this)}_assign(e){this!==e&&(ht(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Eo({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ht(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ox(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ms(this.auth.app))return Promise.reject(hc(this.auth));const e=await this.getIdToken();return await rp(this,Qfe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:p,emailVerified:y,isAnonymous:v,providerData:w,stsTokenManager:_}=n;ht(p&&_,e,"internal-error");const E=Am.fromJSON(this.name,_);ht(typeof p=="string",e,"internal-error"),xu(r,e.name),xu(i,e.name),ht(typeof y=="boolean",e,"internal-error"),ht(typeof v=="boolean",e,"internal-error"),xu(s,e.name),xu(a,e.name),xu(l,e.name),xu(u,e.name),xu(d,e.name),xu(h,e.name);const C=new Eo({uid:p,auth:e,email:i,emailVerified:y,displayName:r,isAnonymous:v,photoURL:a,phoneNumber:s,tenantId:l,stsTokenManager:E,createdAt:d,lastLoginAt:h});return w&&Array.isArray(w)&&(C.providerData=w.map(N=>({...N}))),u&&(C._redirectEventId=u),C}static async _fromIdTokenResponse(e,n,r=!1){const i=new Am;i.updateFromServerResponse(n);const s=new Eo({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ox(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ht(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?aG(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new Am;l.updateFromIdToken(r);const u=new Eo({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new JN(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X8=new Map;function sc(t){Ec(t instanceof Function,"Expected a class definition");let e=X8.get(t);return e?(Ec(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,X8.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oG{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}oG.type="NONE";const Q8=oG;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(t,e,n){return`firebase:${t}:${e}:${n}`}class Nm{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Xw(this.userKey,i.apiKey,s),this.fullPersistenceKey=Xw("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ix(this.auth,{idToken:e}).catch(()=>{});return n?Eo._fromGetAccountInfoResponse(this.auth,n,e):null}return Eo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Nm(sc(Q8),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||sc(Q8);const a=Xw(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(a);if(h){let p;if(typeof h=="string"){const y=await Ix(e,{idToken:h}).catch(()=>{});if(!y)break;p=await Eo._fromGetAccountInfoResponse(e,y,h)}else p=Eo._fromJSON(e,h);d!==s&&(l=p),s=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Nm(s,e,r):(s=u[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(a)}catch{}})),new Nm(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J8(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dG(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lG(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fG(e))return"Blackberry";if(mG(e))return"Webos";if(cG(e))return"Safari";if((e.includes("chrome/")||uG(e))&&!e.includes("edge/"))return"Chrome";if(hG(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function lG(t=as()){return/firefox\//i.test(t)}function cG(t=as()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uG(t=as()){return/crios\//i.test(t)}function dG(t=as()){return/iemobile/i.test(t)}function hG(t=as()){return/android/i.test(t)}function fG(t=as()){return/blackberry/i.test(t)}function mG(t=as()){return/webos/i.test(t)}function vO(t=as()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function sme(t=as()){var e;return vO(t)&&!!((e=window.navigator)!=null&&e.standalone)}function ame(){return dce()&&document.documentMode===10}function pG(t=as()){return vO(t)||hG(t)||mG(t)||fG(t)||/windows phone/i.test(t)||dG(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gG(t,e=[]){let n;switch(t){case"Browser":n=J8(as());break;case"Worker":n=`${J8(as())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${cd}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ome{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,l)=>{try{const u=e(s);a(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lme(t,e={}){return Cl(t,"GET","/v2/passwordPolicy",Pc(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cme=6;class ume{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??cme,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dme{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Z8(this),this.idTokenSubscription=new Z8(this),this.beforeStateQueue=new ome(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tG,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=sc(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Nm.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ix(this,{idToken:e}),r=await Eo._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Ms(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ht(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ox(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ffe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ms(this.app))return Promise.reject(hc(this));const n=e?rn(e):null;return n&&ht(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ht(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ms(this.app)?Promise.reject(hc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ms(this.app)?Promise.reject(hc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sc(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lme(this),n=new ume(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Dy("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await ime(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&sc(e)||this._popupRedirectResolver;ht(n,this,"argument-error"),this.redirectPersistenceManager=await Nm.create(this,[sc(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ht(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ht(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gG(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Ms(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Bfe(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function hd(t){return rn(t)}class Z8{constructor(e){this.auth=e,this.observer=null,this.addObserver=_ce(n=>this.observer=n)}get next(){return ht(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Y_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hme(t){Y_=t}function yG(t){return Y_.loadJS(t)}function fme(){return Y_.recaptchaEnterpriseScript}function mme(){return Y_.gapiScript}function pme(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class gme{constructor(){this.enterprise=new yme}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class yme{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const vme="recaptcha-enterprise",vG="NO_RECAPTCHA";class bme{constructor(e){this.type=vme,this.auth=hd(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,l)=>{Xfe(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new Yfe(u);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,a(d.siteKey)}}).catch(u=>{l(u)})})}function i(s,a,l){const u=window.grecaptcha;K8(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(d=>{a(d)}).catch(()=>{a(vG)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new gme().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{r(this.auth).then(l=>{if(!n&&K8(window.grecaptcha))i(l,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=fme();u.length!==0&&(u+=l),yG(u).then(()=>{i(l,s,a)}).catch(d=>{a(d)})}}).catch(l=>{a(l)})})}}async function eL(t,e,n,r=!1,i=!1){const s=new bme(t);let a;if(i)a=vG;else try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function jx(t,e,n,r,i){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await eL(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await eL(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wme(t,e){const n=My(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(yl(s,e??{}))return i;Mo(i,"already-initialized")}return n.initialize({options:e})}function xme(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(sc);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function _me(t,e,n){const r=hd(t);ht(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=bG(e),{host:a,port:l}=Eme(e),u=l===null?"":`:${l}`,d={url:`${s}//${a}${u}/`},h=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ht(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ht(yl(d,r.config.emulator)&&yl(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,jc(a)?(v_(`${s}//${a}${u}`),b_("Auth",!0)):Tme()}function bG(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Eme(t){const e=bG(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:tL(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:tL(a)}}}function tL(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Tme(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ic("not implemented")}_getIdTokenResponse(e){return ic("not implemented")}_linkToIdToken(e,n){return ic("not implemented")}_getReauthenticationResolver(e){return ic("not implemented")}}async function Sme(t,e){return Cl(t,"POST","/v1/accounts:update",e)}async function Cme(t,e){return Cl(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ame(t,e){return Gy(t,"POST","/v1/accounts:signInWithPassword",Pc(t,e))}async function Nme(t,e){return Cl(t,"POST","/v1/accounts:sendOobCode",Pc(t,e))}async function kme(t,e){return Nme(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ime(t,e){return Gy(t,"POST","/v1/accounts:signInWithEmailLink",Pc(t,e))}async function Ome(t,e){return Gy(t,"POST","/v1/accounts:signInWithEmailLink",Pc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0 extends bO{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Q0(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Q0(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jx(e,n,"signInWithPassword",Ame);case"emailLink":return Ime(e,{email:this._email,oobCode:this._password});default:Mo(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jx(e,r,"signUpPassword",Cme);case"emailLink":return Ome(e,{idToken:n,email:this._email,oobCode:this._password});default:Mo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function km(t,e){return Gy(t,"POST","/v1/accounts:signInWithIdp",Pc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jme="http://localhost";class Rh extends bO{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Rh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Mo("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const a=new Rh(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return km(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,km(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,km(e,n)}buildRequest(){const e={requestUri:jme,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Np(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pme(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Rme(t){const e=c0(u0(t)).link,n=e?c0(u0(e)).deep_link_id:null,r=c0(u0(t)).deep_link_id;return(r?c0(u0(r)).link:null)||r||n||e||t}class wO{constructor(e){const n=c0(u0(e)),r=n.apiKey??null,i=n.oobCode??null,s=Pme(n.mode??null);ht(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Rme(e);try{return new wO(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(){this.providerId=nf.PROVIDER_ID}static credential(e,n){return Q0._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=wO.parseLink(n);return ht(r,"argument-error"),Q0._fromEmailAndCode(e,r.code,r.tenantId)}}nf.PROVIDER_ID="password";nf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";nf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wG{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy extends wG{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu extends Wy{constructor(){super("facebook.com")}static credential(e){return Rh._fromParams({providerId:Cu.PROVIDER_ID,signInMethod:Cu.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cu.credentialFromTaggedObject(e)}static credentialFromError(e){return Cu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cu.credential(e.oauthAccessToken)}catch{return null}}}Cu.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cu.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au extends Wy{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Rh._fromParams({providerId:Au.PROVIDER_ID,signInMethod:Au.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Au.credentialFromTaggedObject(e)}static credentialFromError(e){return Au.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Au.credential(n,r)}catch{return null}}}Au.GOOGLE_SIGN_IN_METHOD="google.com";Au.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu extends Wy{constructor(){super("github.com")}static credential(e){return Rh._fromParams({providerId:Nu.PROVIDER_ID,signInMethod:Nu.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nu.credentialFromTaggedObject(e)}static credentialFromError(e){return Nu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nu.credential(e.oauthAccessToken)}catch{return null}}}Nu.GITHUB_SIGN_IN_METHOD="github.com";Nu.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku extends Wy{constructor(){super("twitter.com")}static credential(e,n){return Rh._fromParams({providerId:ku.PROVIDER_ID,signInMethod:ku.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ku.credentialFromTaggedObject(e)}static credentialFromError(e){return ku.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ku.credential(n,r)}catch{return null}}}ku.TWITTER_SIGN_IN_METHOD="twitter.com";ku.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dme(t,e){return Gy(t,"POST","/v1/accounts:signUp",Pc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Eo._fromIdTokenResponse(e,r,i),a=nL(r);return new Dh({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=nL(r);return new Dh({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function nL(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px extends Tl{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Px.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Px(e,n,r,i)}}function xG(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Px._fromErrorAndOperation(t,s,e,r):s})}async function Mme(t,e,n=!1){const r=await rp(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Dh._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _G(t,e,n=!1){const{auth:r}=t;if(Ms(r.app))return Promise.reject(hc(r));const i="reauthenticate";try{const s=await rp(t,xG(r,i,e,t),n);ht(s.idToken,r,"internal-error");const a=yO(s.idToken);ht(a,r,"internal-error");const{sub:l}=a;return ht(t.uid===l,r,"user-mismatch"),Dh._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Mo(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EG(t,e,n=!1){if(Ms(t.app))return Promise.reject(hc(t));const r="signIn",i=await xG(t,r,e),s=await Dh._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function Lme(t,e){return EG(hd(t),e)}async function Vme(t,e){return _G(rn(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TG(t){const e=hd(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Ume(t,e,n){const r=hd(t);await jx(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",kme)}async function Bme(t,e,n){if(Ms(t.app))return Promise.reject(hc(t));const r=hd(t),a=await jx(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Dme).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&TG(t),u}),l=await Dh._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(l.user),l}function ZN(t,e,n){return Ms(t.app)?Promise.reject(hc(t)):Lme(rn(t),nf.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&TG(t),r})}function zme(t,e){return $me(rn(t),null,e)}async function $me(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const a=await rp(t,Sme(r,s));await t._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t,e){return rn(t).setPersistence(e)}function Fme(t,e,n,r){return rn(t).onIdTokenChanged(e,n,r)}function Hme(t,e,n){return rn(t).beforeAuthStateChanged(e,n)}function SG(t,e,n,r){return rn(t).onAuthStateChanged(e,n,r)}const Rx="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CG{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Rx,"1"),this.storage.removeItem(Rx),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qme=1e3,Gme=10;class AG extends CG{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pG(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);ame()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Gme):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},qme)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}AG.type="LOCAL";const ek=AG;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NG extends CG{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}NG.type="SESSION";const xO=NG;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wme(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new X_(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(a).map(async d=>d(n.origin,s)),u=await Wme(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}X_.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kme{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((l,u)=>{const d=_O("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(p){const y=p;if(y.data.eventId===d)switch(y.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(y.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(){return window}function Yme(t){pl().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kG(){return typeof pl().WorkerGlobalScope<"u"&&typeof pl().importScripts=="function"}async function Xme(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Qme(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Jme(){return kG()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IG="firebaseLocalStorageDb",Zme=1,Dx="firebaseLocalStorage",OG="fbase_key";class Ky{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Q_(t,e){return t.transaction([Dx],e?"readwrite":"readonly").objectStore(Dx)}function epe(){const t=indexedDB.deleteDatabase(IG);return new Ky(t).toPromise()}function tk(){const t=indexedDB.open(IG,Zme);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Dx,{keyPath:OG})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Dx)?e(r):(r.close(),await epe(),e(await tk()))})})}async function rL(t,e,n){const r=Q_(t,!0).put({[OG]:e,value:n});return new Ky(r).toPromise()}async function tpe(t,e){const n=Q_(t,!1).get(e),r=await new Ky(n).toPromise();return r===void 0?null:r.value}function iL(t,e){const n=Q_(t,!0).delete(e);return new Ky(n).toPromise()}const npe=800,rpe=3;class jG{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tk(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>rpe)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kG()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=X_._getInstance(Jme()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Xme(),!this.activeServiceWorker)return;this.sender=new Kme(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Qme()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tk();return await rL(e,Rx,"1"),await iL(e,Rx),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>rL(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>tpe(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>iL(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Q_(i,!1).getAll();return new Ky(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),npe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jG.type="LOCAL";const ipe=jG;new qy(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function spe(t,e){return e?sc(e):(ht(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO extends bO{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return km(e,this._buildIdpRequest())}_linkToIdToken(e,n){return km(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return km(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ape(t){return EG(t.auth,new EO(t),t.bypassAuthState)}function ope(t){const{auth:e,user:n}=t;return ht(n,e,"internal-error"),_G(n,new EO(t),t.bypassAuthState)}async function lpe(t){const{auth:e,user:n}=t;return ht(n,e,"internal-error"),Mme(n,new EO(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PG{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ape;case"linkViaPopup":case"linkViaRedirect":return lpe;case"reauthViaPopup":case"reauthViaRedirect":return ope;default:Mo(this.auth,"internal-error")}}resolve(e){Ec(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ec(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cpe=new qy(2e3,1e4);class ym extends PG{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,ym.currentPopupAction&&ym.currentPopupAction.cancel(),ym.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ht(e,this.auth,"internal-error"),e}async onExecution(){Ec(this.filter.length===1,"Popup operations only handle one event");const e=_O();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ml(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ml(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ym.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ml(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,cpe.get())};e()}}ym.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const upe="pendingRedirect",Qw=new Map;class dpe extends PG{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Qw.get(this.auth._key());if(!e){try{const r=await hpe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Qw.set(this.auth._key(),e)}return this.bypassAuthState||Qw.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hpe(t,e){const n=ppe(e),r=mpe(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function fpe(t,e){Qw.set(t._key(),e)}function mpe(t){return sc(t._redirectPersistence)}function ppe(t){return Xw(upe,t.config.apiKey,t.name)}async function gpe(t,e,n=!1){if(Ms(t.app))return Promise.reject(hc(t));const r=hd(t),i=spe(r,e),a=await new dpe(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ype=600*1e3;class vpe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bpe(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!RG(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(ml(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ype&&this.cachedEventUids.clear(),this.cachedEventUids.has(sL(e))}saveEventToCache(e){this.cachedEventUids.add(sL(e)),this.lastProcessedEventTime=Date.now()}}function sL(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function RG({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bpe(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RG(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wpe(t,e={}){return Cl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xpe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_pe=/^https?/;async function Epe(t){if(t.config.emulator)return;const{authorizedDomains:e}=await wpe(t);for(const n of e)try{if(Tpe(n))return}catch{}Mo(t,"unauthorized-domain")}function Tpe(t){const e=QN(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!_pe.test(n))return!1;if(xpe.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Spe=new qy(3e4,6e4);function aL(){const t=pl().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Cpe(t){return new Promise((e,n)=>{var i,s,a;function r(){aL(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{aL(),n(ml(t,"network-request-failed"))},timeout:Spe.get()})}if((s=(i=pl().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((a=pl().gapi)!=null&&a.load)r();else{const l=pme("iframefcb");return pl()[l]=()=>{gapi.load?r():n(ml(t,"network-request-failed"))},yG(`${mme()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Jw=null,e})}let Jw=null;function Ape(t){return Jw=Jw||Cpe(t),Jw}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Npe=new qy(5e3,15e3),kpe="__/auth/iframe",Ipe="emulator/auth/iframe",Ope={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jpe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ppe(t){const e=t.config;ht(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?gO(e,Ipe):`https://${t.config.authDomain}/${kpe}`,r={apiKey:e.apiKey,appName:t.name,v:cd},i=jpe.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Np(r).slice(1)}`}async function Rpe(t){const e=await Ape(t),n=pl().gapi;return ht(n,t,"internal-error"),e.open({where:document.body,url:Ppe(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ope,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=ml(t,"network-request-failed"),l=pl().setTimeout(()=>{s(a)},Npe.get());function u(){pl().clearTimeout(l),i(r)}r.ping(u).then(u,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dpe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Mpe=500,Lpe=600,Vpe="_blank",Upe="http://localhost";class oL{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Bpe(t,e,n,r=Mpe,i=Lpe){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u={...Dpe,width:r.toString(),height:i.toString(),top:s,left:a},d=as().toLowerCase();n&&(l=uG(d)?Vpe:n),lG(d)&&(e=e||Upe,u.scrollbars="yes");const h=Object.entries(u).reduce((y,[v,w])=>`${y}${v}=${w},`,"");if(sme(d)&&l!=="_self")return zpe(e||"",l),new oL(null);const p=window.open(e||"",l,h);ht(p,t,"popup-blocked");try{p.focus()}catch{}return new oL(p)}function zpe(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $pe="__/auth/handler",Fpe="emulator/auth/handler",Hpe=encodeURIComponent("fac");async function lL(t,e,n,r,i,s){ht(t.config.authDomain,t,"auth-domain-config-required"),ht(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:cd,eventId:i};if(e instanceof wG){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",px(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))a[h]=p}if(e instanceof Wy){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),d=u?`#${Hpe}=${encodeURIComponent(u)}`:"";return`${qpe(t)}?${Np(l).slice(1)}${d}`}function qpe({config:t}){return t.emulator?gO(t,Fpe):`https://${t.authDomain}/${$pe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="webStorageSupport";class Gpe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xO,this._completeRedirectFn=gpe,this._overrideRedirectResult=fpe}async _openPopup(e,n,r,i){var a;Ec((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await lL(e,n,r,QN(),i);return Bpe(e,s,_O())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await lL(e,n,r,QN(),i);return Yme(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ec(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Rpe(e),r=new vpe(e);return n.register("authEvent",i=>(ht(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($S,{type:$S},i=>{var a;const s=(a=i==null?void 0:i[0])==null?void 0:a[$S];s!==void 0&&n(!!s),Mo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Epe(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return pG()||cG()||vO()}}const Wpe=Gpe;var cL="@firebase/auth",uL="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kpe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ht(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ype(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Xpe(t){Ku(new bc("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;ht(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gG(t)},d=new dme(r,i,s,u);return xme(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ku(new bc("auth-internal",e=>{const n=hd(e.getProvider("auth").getImmediate());return(r=>new Kpe(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xa(cL,uL,Ype(t)),Xa(cL,uL,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qpe=300,Jpe=uH("authIdTokenMaxAge")||Qpe;let dL=null;const Zpe=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Jpe)return;const i=n==null?void 0:n.token;dL!==i&&(dL=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function ege(t=Ly()){const e=My(t,"auth");if(e.isInitialized())return e.getImmediate();const n=wme(t,{popupRedirectResolver:Wpe,persistence:[ipe,ek,xO]}),r=uH("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=Zpe(s.toString());Hme(n,a,()=>a(n.currentUser)),Fme(n,l=>a(l))}}const i=lH("auth");return i&&_me(n,`http://${i}`),n}function tge(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}hme({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=ml("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",tge().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Xpe("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DG="firebasestorage.googleapis.com",nge="storageBucket",rge=120*1e3,ige=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fd=class MG extends Tl{constructor(e,n,r=0){super(FS(e),`Firebase Storage: ${n} (${FS(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,MG.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return FS(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var bl;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(bl||(bl={}));function FS(t){return"storage/"+t}function sge(){const t="An unknown error occurred, please check the error payload for server response.";return new fd(bl.UNKNOWN,t)}function age(){return new fd(bl.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function oge(){return new fd(bl.CANCELED,"User canceled the upload/download.")}function lge(t){return new fd(bl.INVALID_URL,"Invalid URL '"+t+"'.")}function cge(t){return new fd(bl.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function hL(t){return new fd(bl.INVALID_ARGUMENT,t)}function LG(){return new fd(bl.APP_DELETED,"The Firebase app was deleted.")}function uge(t){return new fd(bl.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=To.makeFromUrl(e,n)}catch{return new To(e,"")}if(r.path==="")return r;throw cge(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+i+a,"i"),u={bucket:1,path:3};function d(R){R.path_=decodeURIComponent(R.path)}const h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",v=new RegExp(`^https?://${p}/${h}/b/${i}/o${y}`,"i"),w={bucket:1,path:3},_=n===DG?"(?:storage.googleapis.com|storage.cloud.google.com)":n,E="([^?#]*)",C=new RegExp(`^https?://${_}/${i}/${E}`,"i"),O=[{regex:l,indices:u,postModify:s},{regex:v,indices:w,postModify:d},{regex:C,indices:{bucket:1,path:2},postModify:d}];for(let R=0;R<O.length;R++){const D=O[R],P=D.regex.exec(e);if(P){const A=P[D.indices.bucket];let k=P[D.indices.path];k||(k=""),r=new To(A,k),D.postModify(r);break}}if(r==null)throw lge(e);return r}}class dge{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hge(t,e,n){let r=1,i=null,s=null,a=!1,l=0;function u(){return l===2}let d=!1;function h(...E){d||(d=!0,e.apply(null,E))}function p(E){i=setTimeout(()=>{i=null,t(v,u())},E)}function y(){s&&clearTimeout(s)}function v(E,...C){if(d){y();return}if(E){y(),h.call(null,E,...C);return}if(u()||a){y(),h.call(null,E,...C);return}r<64&&(r*=2);let O;l===1?(l=2,O=0):O=(r+Math.random())*1e3,p(O)}let w=!1;function _(E){w||(w=!0,y(),!d&&(i!==null?(E||(l=2),clearTimeout(i),p(0)):E||(l=1)))}return p(0),s=setTimeout(()=>{a=!0,_(!0)},n),_}function fge(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mge(t){return t!==void 0}function fL(t,e,n,r){if(r<e)throw hL(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw hL(`Invalid value for '${t}'. Expected ${n} or less.`)}function pge(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Mx;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Mx||(Mx={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gge(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yge{constructor(e,n,r,i,s,a,l,u,d,h,p,y=!0,v=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=p,this.retry=y,this.isUsingEmulator=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,_)=>{this.resolve_=w,this.reject_=_,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new rw(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const l=s.getErrorCode()===Mx.NO_ERROR,u=s.getStatus();if(!l||gge(u,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===Mx.ABORT;r(!1,new rw(!1,null,h));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new rw(d,s))})},n=(r,i)=>{const s=this.resolve_,a=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());mge(u)?s(u):s()}catch(u){a(u)}else if(l!==null){const u=sge();u.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,u)):a(u)}else if(i.canceled){const u=this.appDelete_?LG():oge();a(u)}else{const u=age();a(u)}};this.canceled_?n(!1,new rw(!1,null,!0)):this.backoffId_=hge(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&fge(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class rw{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function vge(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function bge(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function wge(t,e){e&&(t["X-Firebase-GMPID"]=e)}function xge(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function _ge(t,e,n,r,i,s,a=!0,l=!1){const u=pge(t.urlParams),d=t.url+u,h=Object.assign({},t.headers);return wge(h,e),vge(h,n),bge(h,s),xge(h,r),new yge(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,a,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ege(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Tge(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,n){this._service=e,n instanceof To?this._location=n:this._location=To.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Lx(e,n)}get root(){const e=new To(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Tge(this._location.path)}get storage(){return this._service}get parent(){const e=Ege(this._location.path);if(e===null)return null;const n=new To(this._location.bucket,e);return new Lx(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw uge(e)}}function mL(t,e){const n=e==null?void 0:e[nge];return n==null?null:To.makeFromBucketSpec(n,t)}function Sge(t,e,n,r={}){t.host=`${e}:${n}`;const i=jc(e);i&&(v_(`https://${t.host}/b`),b_("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:C4(s,t.app.options.projectId))}class Cge{constructor(e,n,r,i,s,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=DG,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=rge,this._maxUploadRetryTime=ige,this._requests=new Set,i!=null?this._bucket=To.makeFromBucketSpec(i,this._host):this._bucket=mL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=To.makeFromBucketSpec(this._url,e):this._bucket=mL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){fL("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){fL("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ms(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Lx(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new dge(LG());{const a=_ge(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const pL="@firebase/storage",gL="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VG="storage";function Age(t=Ly(),e){t=rn(t);const r=My(t,VG).getImmediate({identifier:e}),i=S4("storage");return i&&Nge(r,...i),r}function Nge(t,e,n,r={}){Sge(t,e,n,r)}function kge(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Cge(n,r,i,e,cd)}function Ige(){Ku(new bc(VG,kge,"PUBLIC").setMultipleInstances(!0)),Xa(pL,gL,""),Xa(pL,gL,"esm2020")}Ige();var yL={};const vL="@firebase/database",bL="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let UG="";function Oge(t){UG=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jge{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),wi(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:F0(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pge{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Sl(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BG=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new jge(e)}}catch{}return new Pge},dh=BG("localStorage"),Rge=BG("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im=new x_("@firebase/database"),Dge=(function(){let t=1;return function(){return t++}})(),zG=function(t){const e=Sce(t),n=new xce;n.update(e);const r=n.digest();return T4.encodeByteArray(r)},Yy=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Yy.apply(null,r):typeof r=="object"?e+=wi(r):e+=r,e+=" "}return e};let A0=null,wL=!0;const Mge=function(t,e){De(!0,"Can't turn on custom loggers persistently."),Im.logLevel=Rt.VERBOSE,A0=Im.log.bind(Im)},Vi=function(...t){if(wL===!0&&(wL=!1,A0===null&&Rge.get("logging_enabled")===!0&&Mge()),A0){const e=Yy.apply(null,t);A0(e)}},Xy=function(t){return function(...e){Vi(t,...e)}},nk=function(...t){const e="FIREBASE INTERNAL ERROR: "+Yy(...t);Im.error(e)},Tc=function(...t){const e=`FIREBASE FATAL ERROR: ${Yy(...t)}`;throw Im.error(e),new Error(e)},$s=function(...t){const e="FIREBASE WARNING: "+Yy(...t);Im.warn(e)},Lge=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&$s("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},J_=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Vge=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ip="[MIN_NAME]",Mh="[MAX_NAME]",rf=function(t,e){if(t===e)return 0;if(t===ip||e===Mh)return-1;if(e===ip||t===Mh)return 1;{const n=xL(t),r=xL(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Uge=function(t,e){return t===e?0:t<e?-1:1},Yg=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+wi(e))},TO=function(t){if(typeof t!="object"||t===null)return wi(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=wi(e[r]),n+=":",n+=TO(t[e[r]]);return n+="}",n},$G=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function os(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const FG=function(t){De(!J_(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,a,l,u;t===0?(s=0,a=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=l+r,a=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(s=0,a=Math.round(t/Math.pow(2,1-r-n))));const d=[];for(u=n;u;u-=1)d.push(a%2?1:0),a=Math.floor(a/2);for(u=e;u;u-=1)d.push(s%2?1:0),s=Math.floor(s/2);d.push(i?1:0),d.reverse();const h=d.join("");let p="";for(u=0;u<64;u+=8){let y=parseInt(h.substr(u,8),2).toString(16);y.length===1&&(y="0"+y),p=p+y}return p.toLowerCase()},Bge=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},zge=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function $ge(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const Fge=new RegExp("^-?(0*)\\d{1,10}$"),Hge=-2147483648,qge=2147483647,xL=function(t){if(Fge.test(t)){const e=Number(t);if(e>=Hge&&e<=qge)return e}return null},Mp=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw $s("Exception was thrown by user callback.",n),e},Math.floor(0))}},Gge=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},N0=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wge{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Ms(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){$s(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kge{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Vi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',$s(e)}}class Zw{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Zw.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO="5",HG="v",qG="s",GG="r",WG="f",KG=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,YG="ls",XG="p",rk="ac",QG="websocket",JG="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZG{constructor(e,n,r,i,s=!1,a="",l=!1,u=!1,d=null){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=a,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=u,this.emulatorOptions=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=dh.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&dh.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Yge(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function eW(t,e,n){De(typeof e=="string","typeof type must == string"),De(typeof n=="object","typeof params must == object");let r;if(e===QG)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===JG)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Yge(t)&&(n.ns=t.namespace);const i=[];return os(n,(s,a)=>{i.push(s+"="+a)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xge{constructor(){this.counters_={}}incrementCounter(e,n=1){Sl(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return ece(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS={},qS={};function CO(t){const e=t.toString();return HS[e]||(HS[e]=new Xge),HS[e]}function Qge(t,e){const n=t.toString();return qS[n]||(qS[n]=e()),qS[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jge{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Mp(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L="start",Zge="close",e0e="pLPCommand",t0e="pRTLPCB",tW="id",nW="pw",rW="ser",n0e="cb",r0e="seg",i0e="ts",s0e="d",a0e="dframe",iW=1870,sW=30,o0e=iW-sW,l0e=25e3,c0e=3e4;class vm{constructor(e,n,r,i,s,a,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=a,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Xy(e),this.stats_=CO(n),this.urlFn=u=>(this.appCheckToken&&(u[rk]=this.appCheckToken),eW(n,JG,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Jge(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(c0e)),Vge(()=>{if(this.isClosed_)return;this.scriptTagHolder=new AO((...s)=>{const[a,l,u,d,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===_L)this.id=l,this.password=u;else if(a===Zge)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...s)=>{const[a,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(a,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[_L]="t",r[rW]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[n0e]=this.scriptTagHolder.uniqueCallbackIdentifier),r[HG]=SO,this.transportSessionId&&(r[qG]=this.transportSessionId),this.lastSessionId&&(r[YG]=this.lastSessionId),this.applicationId&&(r[XG]=this.applicationId),this.appCheckToken&&(r[rk]=this.appCheckToken),typeof location<"u"&&location.hostname&&KG.test(location.hostname)&&(r[GG]=WG);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){vm.forceAllow_=!0}static forceDisallow(){vm.forceDisallow_=!0}static isAvailable(){return vm.forceAllow_?!0:!vm.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Bge()&&!zge()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=wi(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=aH(n),i=$G(r,o0e);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[a0e]="t",r[tW]=e,r[nW]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=wi(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class AO{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Dge(),window[e0e+this.uniqueCallbackIdentifier]=e,window[t0e+this.uniqueCallbackIdentifier]=n,this.myIFrame=AO.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(l){Vi("frame writing exception"),l.stack&&Vi(l.stack),Vi(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Vi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[tW]=this.myID,e[nW]=this.myPW,e[rW]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+sW+r.length<=iW;){const a=this.pendingSegs.shift();r=r+"&"+r0e+i+"="+a.seg+"&"+i0e+i+"="+a.ts+"&"+s0e+i+"="+a.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(l0e)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Vi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0e=16384,d0e=45e3;let Vx=null;typeof MozWebSocket<"u"?Vx=MozWebSocket:typeof WebSocket<"u"&&(Vx=WebSocket);class bo{constructor(e,n,r,i,s,a,l){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Xy(this.connId),this.stats_=CO(n),this.connURL=bo.connectionURL_(n,a,l,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const a={};return a[HG]=SO,typeof location<"u"&&location.hostname&&KG.test(location.hostname)&&(a[GG]=WG),n&&(a[qG]=n),r&&(a[YG]=r),i&&(a[rk]=i),s&&(a[XG]=s),eW(e,QG,a)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,dh.set("previous_websocket_failure",!0);try{let r;hce(),this.mySock=new Vx(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){bo.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Vx!==null&&!bo.forceDisallow_}static previouslyFailed(){return dh.isInMemoryStorage||dh.get("previous_websocket_failure")===!0}markConnectionHealthy(){dh.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=F0(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(De(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=wi(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=$G(n,u0e);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(d0e))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}bo.responsesRequiredToBeHealthy=2;bo.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{static get ALL_TRANSPORTS(){return[vm,bo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=bo&&bo.isAvailable();let r=n&&!bo.previouslyFailed();if(e.webSocketOnly&&(n||$s("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[bo];else{const i=this.transports_=[];for(const s of J0.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);J0.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}J0.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0e=6e4,f0e=5e3,m0e=10*1024,p0e=100*1024,GS="t",EL="d",g0e="s",TL="r",y0e="e",SL="o",CL="a",AL="n",NL="p",v0e="h";class b0e{constructor(e,n,r,i,s,a,l,u,d,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=a,this.onReady_=l,this.onDisconnect_=u,this.onKill_=d,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Xy("c:"+this.id+":"),this.transportManager_=new J0(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=N0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>p0e?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>m0e?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(GS in e){const n=e[GS];n===CL?this.upgradeIfSecondaryHealthy_():n===TL?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===SL&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Yg("t",e),r=Yg("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:NL,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:CL,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:AL,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Yg("t",e),r=Yg("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Yg(GS,e);if(EL in e){const r=e[EL];if(n===v0e){const i={...r};this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===AL){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===g0e?this.onConnectionShutdown_(r):n===TL?this.onReset_(r):n===y0e?nk("Server Error: "+r):n===SL?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):nk("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),SO!==r&&$s("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),N0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(h0e))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):N0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(f0e))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:NL,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(dh.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aW{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oW=class{constructor(e){this.allowedEvents_=e,this.listeners_={},De(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){De(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux extends oW{static getInstance(){return new Ux}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!A4()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return De(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL=32,IL=768;let mn=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function tn(){return new mn("")}function kt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function nd(t){return t.pieces_.length-t.pieceNum_}function In(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new mn(t.pieces_,e)}function NO(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function w0e(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Z0(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function lW(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new mn(e,0)}function Rr(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof mn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new mn(n,0)}function It(t){return t.pieceNum_>=t.pieces_.length}function Us(t,e){const n=kt(t),r=kt(e);if(n===null)return e;if(n===r)return Us(In(t),In(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function x0e(t,e){const n=Z0(t,0),r=Z0(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=rf(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function kO(t,e){if(nd(t)!==nd(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function qa(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(nd(t)>nd(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class _0e{constructor(e,n){this.errorPrefix_=n,this.parts_=Z0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=w_(this.parts_[r]);cW(this)}}function E0e(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=w_(e),cW(t)}function T0e(t){const e=t.parts_.pop();t.byteLength_-=w_(e),t.parts_.length>0&&(t.byteLength_-=1)}function cW(t){if(t.byteLength_>IL)throw new Error(t.errorPrefix_+"has a key path longer than "+IL+" bytes ("+t.byteLength_+").");if(t.parts_.length>kL)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+kL+") or object contains a cycle "+eh(t))}function eh(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO extends oW{static getInstance(){return new IO}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return De(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg=1e3,S0e=300*1e3,OL=30*1e3,C0e=1.3,A0e=3e4,N0e="server_kill",jL=3;class fc extends aW{constructor(e,n,r,i,s,a,l,u){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=u,this.id=fc.nextPersistentConnectionId_++,this.log_=Xy("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Xg,this.maxReconnectDelay_=S0e,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");IO.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Ux.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(wi(s)),De(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Zl,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{const l=a.d;a.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),De(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),De(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const l={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(a).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},a="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(a,s,l=>{const u=l.d,d=l.s;fc.warnOnListenWarnings_(u,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",l),d!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(d,u))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Sl(e,"w")){const r=Gm(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();$s(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||wce(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=OL)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=bce(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,a=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),De(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},a="n";i&&(s.q=r,s.t=i),this.sendRequest(a,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,a=>{i&&setTimeout(()=>{i(a.s,a.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const a={p:n,d:r};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:e,request:a,onComplete:i}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+wi(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):nk("Unrecognized action received from server: "+wi(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){De(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Xg,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Xg,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>A0e&&(this.reconnectDelay_=Xg),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*C0e)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+fc.nextConnectionId_++,s=this.lastSessionId;let a=!1,l=null;const u=function(){l?l.close():(a=!0,r())},d=function(p){De(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(p)};this.realtime_={close:u,sendRequest:d};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[p,y]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);a?Vi("getToken() completed but was canceled"):(Vi("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=y&&y.token,l=new b0e(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,v=>{$s(v+" ("+this.repoInfo_.toString()+")"),this.interrupt(N0e)},s))}catch(p){this.log_("Failed to get token: "+p),a||(this.repoInfo_.nodeAdmin&&$s(p),u())}}}interrupt(e){Vi("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Vi("Resuming connection for reason: "+e),delete this.interruptReasons_[e],px(this.interruptReasons_)&&(this.reconnectDelay_=Xg,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>TO(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new mn(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){Vi("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=jL&&(this.reconnectDelay_=OL,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Vi("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=jL&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+UG.replace(/\./g,"-")]=1,A4()?e["framework.cordova"]=1:dH()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ux.getInstance().currentlyOnline();return px(this.interruptReasons_)&&e}}fc.nextPersistentConnectionId_=0;fc.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ot(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Ot(ip,e),i=new Ot(ip,n);return this.compare(r,i)!==0}minPost(){return Ot.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iw;class uW extends Z_{static get __EMPTY_NODE(){return iw}static set __EMPTY_NODE(e){iw=e}compare(e,n){return rf(e.name,n.name)}isDefinedOn(e){throw Ap("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ot.MIN}maxPost(){return new Ot(Mh,iw)}makePost(e,n){return De(typeof e=="string","KeyIndex indexValue must always be a string."),new Ot(e,iw)}toString(){return".key"}}const Om=new uW;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let a=1;for(;!e.isEmpty();)if(e=e,a=n?r(e.key,n):1,i&&(a*=-1),a<0)this.isReverse_?e=e.left:e=e.right;else if(a===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class bi{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??bi.RED,this.left=i??Bs.EMPTY_NODE,this.right=s??Bs.EMPTY_NODE}copy(e,n,r,i,s){return new bi(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Bs.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Bs.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,bi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,bi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}bi.RED=!0;bi.BLACK=!1;class k0e{copy(e,n,r,i,s){return this}insert(e,n,r){return new bi(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Bs{constructor(e,n=Bs.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Bs(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,bi.BLACK,null,null))}remove(e){return new Bs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,bi.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new sw(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new sw(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new sw(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new sw(this.root_,null,this.comparator_,!0,e)}}Bs.EMPTY_NODE=new k0e;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0e(t,e){return rf(t.name,e.name)}function OO(t,e){return rf(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ik;function O0e(t){ik=t}const dW=function(t){return typeof t=="number"?"number:"+FG(t):"string:"+t},hW=function(t){if(t.isLeafNode()){const e=t.val();De(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Sl(e,".sv"),"Priority must be a string or number.")}else De(t===ik||t.isEmpty(),"priority of unexpected type.");De(t===ik||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PL;class gi{static set __childrenNodeConstructor(e){PL=e}static get __childrenNodeConstructor(){return PL}constructor(e,n=gi.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,De(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),hW(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new gi(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:gi.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return It(e)?this:kt(e)===".priority"?this.priorityNode_:gi.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:gi.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=kt(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(De(r!==".priority"||nd(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,gi.__childrenNodeConstructor.EMPTY_NODE.updateChild(In(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+dW(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=FG(this.value_):e+=this.value_,this.lazyHash_=zG(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===gi.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof gi.__childrenNodeConstructor?-1:(De(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=gi.VALUE_TYPE_ORDER.indexOf(n),s=gi.VALUE_TYPE_ORDER.indexOf(r);return De(i>=0,"Unknown leaf type: "+n),De(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}gi.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fW,mW;function j0e(t){fW=t}function P0e(t){mW=t}class R0e extends Z_{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?rf(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ot.MIN}maxPost(){return new Ot(Mh,new gi("[PRIORITY-POST]",mW))}makePost(e,n){const r=fW(e);return new Ot(n,new gi("[PRIORITY-POST]",r))}toString(){return".priority"}}const ur=new R0e;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0e=Math.log(2);class M0e{constructor(e){const n=s=>parseInt(Math.log(s)/D0e,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Bx=function(t,e,n,r){t.sort(e);const i=function(u,d){const h=d-u;let p,y;if(h===0)return null;if(h===1)return p=t[u],y=n?n(p):p,new bi(y,p.node,bi.BLACK,null,null);{const v=parseInt(h/2,10)+u,w=i(u,v),_=i(v+1,d);return p=t[v],y=n?n(p):p,new bi(y,p.node,bi.BLACK,w,_)}},s=function(u){let d=null,h=null,p=t.length;const y=function(w,_){const E=p-w,C=p;p-=w;const N=i(E+1,C),O=t[E],R=n?n(O):O;v(new bi(R,O.node,_,null,N))},v=function(w){d?(d.left=w,d=w):(h=w,d=w)};for(let w=0;w<u.count;++w){const _=u.nextBitIsOne(),E=Math.pow(2,u.count-(w+1));_?y(E,bi.BLACK):(y(E,bi.BLACK),y(E,bi.RED))}return h},a=new M0e(t.length),l=s(a);return new Bs(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WS;const Kf={};class ac{static get Default(){return De(Kf&&ur,"ChildrenNode.ts has not been loaded"),WS=WS||new ac({".priority":Kf},{".priority":ur}),WS}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Gm(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Bs?n:null}hasIndex(e){return Sl(this.indexSet_,e.toString())}addIndex(e,n){De(e!==Om,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(Ot.Wrap);let a=s.getNext();for(;a;)i=i||e.isDefinedOn(a.node),r.push(a),a=s.getNext();let l;i?l=Bx(r,e.getCompare()):l=Kf;const u=e.toString(),d={...this.indexSet_};d[u]=e;const h={...this.indexes_};return h[u]=l,new ac(h,d)}addToIndexes(e,n){const r=gx(this.indexes_,(i,s)=>{const a=Gm(this.indexSet_,s);if(De(a,"Missing index implementation for "+s),i===Kf)if(a.isDefinedOn(e.node)){const l=[],u=n.getIterator(Ot.Wrap);let d=u.getNext();for(;d;)d.name!==e.name&&l.push(d),d=u.getNext();return l.push(e),Bx(l,a.getCompare())}else return Kf;else{const l=n.get(e.name);let u=i;return l&&(u=u.remove(new Ot(e.name,l))),u.insert(e,e.node)}});return new ac(r,this.indexSet_)}removeFromIndexes(e,n){const r=gx(this.indexes_,i=>{if(i===Kf)return i;{const s=n.get(e.name);return s?i.remove(new Ot(e.name,s)):i}});return new ac(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qg;class gt{static get EMPTY_NODE(){return Qg||(Qg=new gt(new Bs(OO),null,ac.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&hW(this.priorityNode_),this.children_.isEmpty()&&De(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Qg}updatePriority(e){return this.children_.isEmpty()?this:new gt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Qg:n}}getChild(e){const n=kt(e);return n===null?this:this.getImmediateChild(n).getChild(In(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(De(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Ot(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const a=i.isEmpty()?Qg:this.priorityNode_;return new gt(i,a,s)}}updateChild(e,n){const r=kt(e);if(r===null)return n;{De(kt(e)!==".priority"||nd(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(In(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(ur,(a,l)=>{n[a]=l.val(e),r++,s&&gt.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):s=!1}),!e&&s&&i<2*r){const a=[];for(const l in n)a[l]=n[l];return a}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+dW(this.getPriority().val())+":"),this.forEachChild(ur,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":zG(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new Ot(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ot(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ot(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,Ot.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,Ot.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Qy?-1:0}withIndex(e){if(e===Om||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new gt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Om||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(ur),i=n.getIterator(ur);let s=r.getNext(),a=i.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=r.getNext(),a=i.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===Om?null:this.indexMap_.get(e.toString())}}gt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class L0e extends gt{constructor(){super(new Bs(OO),gt.EMPTY_NODE,ac.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return gt.EMPTY_NODE}isEmpty(){return!1}}const Qy=new L0e;Object.defineProperties(Ot,{MIN:{value:new Ot(ip,gt.EMPTY_NODE)},MAX:{value:new Ot(Mh,Qy)}});uW.__EMPTY_NODE=gt.EMPTY_NODE;gi.__childrenNodeConstructor=gt;O0e(Qy);P0e(Qy);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0e=!0;function Wr(t,e=null){if(t===null)return gt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),De(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new gi(n,Wr(e))}if(!(t instanceof Array)&&V0e){const n=[];let r=!1;if(os(t,(a,l)=>{if(a.substring(0,1)!=="."){const u=Wr(l);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new Ot(a,u)))}}),n.length===0)return gt.EMPTY_NODE;const s=Bx(n,I0e,a=>a.name,OO);if(r){const a=Bx(n,ur.getCompare());return new gt(s,Wr(e),new ac({".priority":a},{".priority":ur}))}else return new gt(s,Wr(e),ac.Default)}else{let n=gt.EMPTY_NODE;return os(t,(r,i)=>{if(Sl(t,r)&&r.substring(0,1)!=="."){const s=Wr(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Wr(e))}}j0e(Wr);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0e extends Z_{constructor(e){super(),this.indexPath_=e,De(!It(e)&&kt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?rf(e.name,n.name):s}makePost(e,n){const r=Wr(e),i=gt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ot(n,i)}maxPost(){const e=gt.EMPTY_NODE.updateChild(this.indexPath_,Qy);return new Ot(Mh,e)}toString(){return Z0(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0e extends Z_{compare(e,n){const r=e.node.compareTo(n.node);return r===0?rf(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ot.MIN}maxPost(){return Ot.MAX}makePost(e,n){const r=Wr(e);return new Ot(n,r)}toString(){return".value"}}const z0e=new B0e;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pW(t){return{type:"value",snapshotNode:t}}function sp(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ey(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ty(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function $0e(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e){this.index_=e}updateChild(e,n,r,i,s,a){De(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(i).equals(r.getChild(i))&&l.isEmpty()===r.isEmpty()||(a!=null&&(r.isEmpty()?e.hasChild(n)?a.trackChildChange(ey(n,l)):De(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?a.trackChildChange(sp(n,r)):a.trackChildChange(ty(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ur,(i,s)=>{n.hasChild(i)||r.trackChildChange(ey(i,s))}),n.isLeafNode()||n.forEachChild(ur,(i,s)=>{if(e.hasChild(i)){const a=e.getImmediateChild(i);a.equals(s)||r.trackChildChange(ty(i,s,a))}else r.trackChildChange(sp(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?gt.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e){this.indexedFilter_=new jO(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ny.getStartPost_(e),this.endPost_=ny.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,a){return this.matches(new Ot(n,r))||(r=gt.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,a)}updateFullNode(e,n,r){n.isLeafNode()&&(n=gt.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(gt.EMPTY_NODE);const s=this;return n.forEachChild(ur,(a,l)=>{s.matches(new Ot(a,l))||(i=i.updateImmediateChild(a,gt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0e{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new ny(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,a){return this.rangedFilter_.matches(new Ot(n,r))||(r=gt.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,a):this.fullLimitUpdateChild_(e,n,r,s,a)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=gt.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=gt.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let a=0;for(;s.hasNext()&&a<this.limit_;){const l=s.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))i=i.updateImmediateChild(l.name,l.node),a++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(gt.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let a=0;for(;s.hasNext();){const l=s.getNext();a<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?a++:i=i.updateImmediateChild(l.name,gt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let a;if(this.reverse_){const p=this.index_.getCompare();a=(y,v)=>p(v,y)}else a=this.index_.getCompare();const l=e;De(l.numChildren()===this.limit_,"");const u=new Ot(n,r),d=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(l.hasChild(n)){const p=l.getImmediateChild(n);let y=i.getChildAfterChild(this.index_,d,this.reverse_);for(;y!=null&&(y.name===n||l.hasChild(y.name));)y=i.getChildAfterChild(this.index_,y,this.reverse_);const v=y==null?1:a(y,u);if(h&&!r.isEmpty()&&v>=0)return s!=null&&s.trackChildChange(ty(n,r,p)),l.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(ey(n,p));const _=l.updateImmediateChild(n,gt.EMPTY_NODE);return y!=null&&this.rangedFilter_.matches(y)?(s!=null&&s.trackChildChange(sp(y.name,y.node)),_.updateImmediateChild(y.name,y.node)):_}}else return r.isEmpty()?e:h&&a(d,u)>=0?(s!=null&&(s.trackChildChange(ey(d.name,d.node)),s.trackChildChange(sp(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(d.name,gt.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ur}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return De(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return De(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ip}hasEnd(){return this.endSet_}getIndexEndValue(){return De(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return De(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Mh}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return De(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ur}copy(){const e=new PO;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function H0e(t){return t.loadsAllData()?new jO(t.getIndex()):t.hasLimit()?new F0e(t):new ny(t)}function RL(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ur?n="$priority":t.index_===z0e?n="$value":t.index_===Om?n="$key":(De(t.index_ instanceof U0e,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=wi(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=wi(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+wi(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=wi(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+wi(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function DL(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ur&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx extends aW{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(De(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Xy("p:rest:"),this.listens_={}}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const a=zx.getListenId_(e,r),l={};this.listens_[a]=l;const u=RL(e._queryParams);this.restRequest_(s+".json",u,(d,h)=>{let p=h;if(d===404&&(p=null,d=null),d===null&&this.onDataUpdate_(s,p,!1,r),Gm(this.listens_,a)===l){let y;d?d===401?y="permission_denied":y="rest_error:"+d:y="ok",i(y,null)}})}unlisten(e,n){const r=zx.getListenId_(e,n);delete this.listens_[r]}get(e){const n=RL(e._queryParams),r=e._path.toString(),i=new Zl;return this.restRequest_(r+".json",n,(s,a)=>{let l=a;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(r,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Np(n);this.log_("Sending REST request for "+a);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+a+" received. status:",l.status,"response:",l.responseText);let u=null;if(l.status>=200&&l.status<300){try{u=F0(l.responseText)}catch{$s("Failed to parse JSON response for "+a+": "+l.responseText)}r(null,u)}else l.status!==401&&l.status!==404&&$s("Got unsuccessful REST response for "+a+" Status: "+l.status),r(l.status);r=null}},l.open("GET",a,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0e{constructor(){this.rootNode_=gt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(){return{value:null,children:new Map}}function Lp(t,e,n){if(It(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=kt(e);t.children.has(r)||t.children.set(r,$x());const i=t.children.get(r);e=In(e),Lp(i,e,n)}}function sk(t,e){if(It(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(ur,(r,i)=>{Lp(t,new mn(r),i)}),sk(t,e)}}else if(t.children.size>0){const n=kt(e);return e=In(e),t.children.has(n)&&sk(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function ak(t,e,n){t.value!==null?n(e,t.value):G0e(t,(r,i)=>{const s=new mn(e.toString()+"/"+r);ak(i,s,n)})}function G0e(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0e{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&os(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML=10*1e3,K0e=30*1e3,Y0e=300*1e3;class X0e{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new W0e(e);const r=ML+(K0e-ML)*Math.random();N0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;os(e,(i,s)=>{s>0&&Sl(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),N0(this.reportStats_.bind(this),Math.floor(Math.random()*2*Y0e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var So;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(So||(So={}));function gW(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function RO(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function DO(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=So.ACK_USER_WRITE,this.source=gW()}operationForChild(e){if(It(this.path)){if(this.affectedTree.value!=null)return De(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new mn(e));return new Fx(tn(),n,this.revert)}}else return De(kt(this.path)===e,"operationForChild called for unrelated child."),new Fx(In(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e,n){this.source=e,this.path=n,this.type=So.LISTEN_COMPLETE}operationForChild(e){return It(this.path)?new ry(this.source,tn()):new ry(this.source,In(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=So.OVERWRITE}operationForChild(e){return It(this.path)?new Lh(this.source,tn(),this.snap.getImmediateChild(e)):new Lh(this.source,In(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=So.MERGE}operationForChild(e){if(It(this.path)){const n=this.children.subtree(new mn(e));return n.isEmpty()?null:n.value?new Lh(this.source,tn(),n.value):new iy(this.source,tn(),n)}else return De(kt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new iy(this.source,In(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(It(e))return this.isFullyInitialized()&&!this.filtered_;const n=kt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0e{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function J0e(t,e,n,r){const i=[],s=[];return e.forEach(a=>{a.type==="child_changed"&&t.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&s.push($0e(a.childName,a.snapshotNode))}),Jg(t,i,"child_removed",e,r,n),Jg(t,i,"child_added",e,r,n),Jg(t,i,"child_moved",s,r,n),Jg(t,i,"child_changed",e,r,n),Jg(t,i,"value",e,r,n),i}function Jg(t,e,n,r,i,s){const a=r.filter(l=>l.type===n);a.sort((l,u)=>eye(t,l,u)),a.forEach(l=>{const u=Z0e(t,l,s);i.forEach(d=>{d.respondsTo(l.type)&&e.push(d.createEvent(u,t.query_))})})}function Z0e(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function eye(t,e,n){if(e.childName==null||n.childName==null)throw Ap("Should only compare child_ events.");const r=new Ot(e.childName,e.snapshotNode),i=new Ot(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(t,e){return{eventCache:t,serverCache:e}}function k0(t,e,n,r){return e2(new Vh(e,n,r),t.serverCache)}function yW(t,e,n,r){return e2(t.eventCache,new Vh(e,n,r))}function ok(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Uh(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KS;const tye=()=>(KS||(KS=new Bs(Uge)),KS);class Fn{static fromObject(e){let n=new Fn(null);return os(e,(r,i)=>{n=n.set(new mn(r),i)}),n}constructor(e,n=tye()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:tn(),value:this.value};if(It(e))return null;{const r=kt(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(In(e),n);return s!=null?{path:Rr(new mn(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(It(e))return this;{const n=kt(e),r=this.children.get(n);return r!==null?r.subtree(In(e)):new Fn(null)}}set(e,n){if(It(e))return new Fn(n,this.children);{const r=kt(e),s=(this.children.get(r)||new Fn(null)).set(In(e),n),a=this.children.insert(r,s);return new Fn(this.value,a)}}remove(e){if(It(e))return this.children.isEmpty()?new Fn(null):new Fn(null,this.children);{const n=kt(e),r=this.children.get(n);if(r){const i=r.remove(In(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new Fn(null):new Fn(this.value,s)}else return this}}get(e){if(It(e))return this.value;{const n=kt(e),r=this.children.get(n);return r?r.get(In(e)):null}}setTree(e,n){if(It(e))return n;{const r=kt(e),s=(this.children.get(r)||new Fn(null)).setTree(In(e),n);let a;return s.isEmpty()?a=this.children.remove(r):a=this.children.insert(r,s),new Fn(this.value,a)}}fold(e){return this.fold_(tn(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Rr(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,tn(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(It(e))return null;{const s=kt(e),a=this.children.get(s);return a?a.findOnPath_(In(e),Rr(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,tn(),n)}foreachOnPath_(e,n,r){if(It(e))return this;{this.value&&r(n,this.value);const i=kt(e),s=this.children.get(i);return s?s.foreachOnPath_(In(e),Rr(n,i),r):new Fn(null)}}foreach(e){this.foreach_(tn(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Rr(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e){this.writeTree_=e}static empty(){return new Io(new Fn(null))}}function I0(t,e,n){if(It(e))return new Io(new Fn(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const a=Us(i,e);return s=s.updateChild(a,n),new Io(t.writeTree_.set(i,s))}else{const i=new Fn(n),s=t.writeTree_.setTree(e,i);return new Io(s)}}}function LL(t,e,n){let r=t;return os(n,(i,s)=>{r=I0(r,Rr(e,i),s)}),r}function VL(t,e){if(It(e))return Io.empty();{const n=t.writeTree_.setTree(e,new Fn(null));return new Io(n)}}function lk(t,e){return sf(t,e)!=null}function sf(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Us(n.path,e)):null}function UL(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ur,(r,i)=>{e.push(new Ot(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Ot(r,i.value))}),e}function Hu(t,e){if(It(e))return t;{const n=sf(t,e);return n!=null?new Io(new Fn(n)):new Io(t.writeTree_.subtree(e))}}function ck(t){return t.writeTree_.isEmpty()}function ap(t,e){return vW(tn(),t.writeTree_,e)}function vW(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(De(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=vW(Rr(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Rr(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MO(t,e){return _W(e,t)}function nye(t,e,n,r,i){De(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=I0(t.visibleWrites,e,n)),t.lastWriteId=r}function rye(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function iye(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);De(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,a=t.allWrites.length-1;for(;i&&a>=0;){const l=t.allWrites[a];l.visible&&(a>=n&&sye(l,r.path)?i=!1:qa(r.path,l.path)&&(s=!0)),a--}if(i){if(s)return aye(t),!0;if(r.snap)t.visibleWrites=VL(t.visibleWrites,r.path);else{const l=r.children;os(l,u=>{t.visibleWrites=VL(t.visibleWrites,Rr(r.path,u))})}return!0}else return!1}function sye(t,e){if(t.snap)return qa(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&qa(Rr(t.path,n),e))return!0;return!1}function aye(t){t.visibleWrites=bW(t.allWrites,oye,tn()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function oye(t){return t.visible}function bW(t,e,n){let r=Io.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const a=s.path;let l;if(s.snap)qa(n,a)?(l=Us(n,a),r=I0(r,l,s.snap)):qa(a,n)&&(l=Us(a,n),r=I0(r,tn(),s.snap.getChild(l)));else if(s.children){if(qa(n,a))l=Us(n,a),r=LL(r,l,s.children);else if(qa(a,n))if(l=Us(a,n),It(l))r=LL(r,tn(),s.children);else{const u=Gm(s.children,kt(l));if(u){const d=u.getChild(In(l));r=I0(r,tn(),d)}}}else throw Ap("WriteRecord should have .snap or .children")}}return r}function wW(t,e,n,r,i){if(!r&&!i){const s=sf(t.visibleWrites,e);if(s!=null)return s;{const a=Hu(t.visibleWrites,e);if(ck(a))return n;if(n==null&&!lk(a,tn()))return null;{const l=n||gt.EMPTY_NODE;return ap(a,l)}}}else{const s=Hu(t.visibleWrites,e);if(!i&&ck(s))return n;if(!i&&n==null&&!lk(s,tn()))return null;{const a=function(d){return(d.visible||i)&&(!r||!~r.indexOf(d.writeId))&&(qa(d.path,e)||qa(e,d.path))},l=bW(t.allWrites,a,e),u=n||gt.EMPTY_NODE;return ap(l,u)}}}function lye(t,e,n){let r=gt.EMPTY_NODE;const i=sf(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ur,(s,a)=>{r=r.updateImmediateChild(s,a)}),r;if(n){const s=Hu(t.visibleWrites,e);return n.forEachChild(ur,(a,l)=>{const u=ap(Hu(s,new mn(a)),l);r=r.updateImmediateChild(a,u)}),UL(s).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}else{const s=Hu(t.visibleWrites,e);return UL(s).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}}function cye(t,e,n,r,i){De(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Rr(e,n);if(lk(t.visibleWrites,s))return null;{const a=Hu(t.visibleWrites,s);return ck(a)?i.getChild(n):ap(a,i.getChild(n))}}function uye(t,e,n,r){const i=Rr(e,n),s=sf(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const a=Hu(t.visibleWrites,i);return ap(a,r.getNode().getImmediateChild(n))}else return null}function dye(t,e){return sf(t.visibleWrites,e)}function hye(t,e,n,r,i,s,a){let l;const u=Hu(t.visibleWrites,e),d=sf(u,tn());if(d!=null)l=d;else if(n!=null)l=ap(u,n);else return[];if(l=l.withIndex(a),!l.isEmpty()&&!l.isLeafNode()){const h=[],p=a.getCompare(),y=s?l.getReverseIteratorFrom(r,a):l.getIteratorFrom(r,a);let v=y.getNext();for(;v&&h.length<i;)p(v,r)!==0&&h.push(v),v=y.getNext();return h}else return[]}function fye(){return{visibleWrites:Io.empty(),allWrites:[],lastWriteId:-1}}function Hx(t,e,n,r){return wW(t.writeTree,t.treePath,e,n,r)}function LO(t,e){return lye(t.writeTree,t.treePath,e)}function BL(t,e,n,r){return cye(t.writeTree,t.treePath,e,n,r)}function qx(t,e){return dye(t.writeTree,Rr(t.treePath,e))}function mye(t,e,n,r,i,s){return hye(t.writeTree,t.treePath,e,n,r,i,s)}function VO(t,e,n){return uye(t.writeTree,t.treePath,e,n)}function xW(t,e){return _W(Rr(t.treePath,e),t.writeTree)}function _W(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pye{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;De(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),De(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,ty(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,ey(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,sp(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,ty(r,e.snapshotNode,i.oldSnap));else throw Ap("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gye{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const EW=new gye;class UO{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Vh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return VO(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Uh(this.viewCache_),s=mye(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yye(t){return{filter:t}}function vye(t,e){De(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),De(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function bye(t,e,n,r,i){const s=new pye;let a,l;if(n.type===So.OVERWRITE){const d=n;d.source.fromUser?a=uk(t,e,d.path,d.snap,r,i,s):(De(d.source.fromServer,"Unknown source."),l=d.source.tagged||e.serverCache.isFiltered()&&!It(d.path),a=Gx(t,e,d.path,d.snap,r,i,l,s))}else if(n.type===So.MERGE){const d=n;d.source.fromUser?a=xye(t,e,d.path,d.children,r,i,s):(De(d.source.fromServer,"Unknown source."),l=d.source.tagged||e.serverCache.isFiltered(),a=dk(t,e,d.path,d.children,r,i,l,s))}else if(n.type===So.ACK_USER_WRITE){const d=n;d.revert?a=Tye(t,e,d.path,r,i,s):a=_ye(t,e,d.path,d.affectedTree,r,i,s)}else if(n.type===So.LISTEN_COMPLETE)a=Eye(t,e,n.path,r,s);else throw Ap("Unknown operation type: "+n.type);const u=s.getChanges();return wye(e,a,u),{viewCache:a,changes:u}}function wye(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=ok(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(pW(ok(e)))}}function TW(t,e,n,r,i,s){const a=e.eventCache;if(qx(r,n)!=null)return e;{let l,u;if(It(n))if(De(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const d=Uh(e),h=d instanceof gt?d:gt.EMPTY_NODE,p=LO(r,h);l=t.filter.updateFullNode(e.eventCache.getNode(),p,s)}else{const d=Hx(r,Uh(e));l=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const d=kt(n);if(d===".priority"){De(nd(n)===1,"Can't have a priority with additional path components");const h=a.getNode();u=e.serverCache.getNode();const p=BL(r,n,h,u);p!=null?l=t.filter.updatePriority(h,p):l=a.getNode()}else{const h=In(n);let p;if(a.isCompleteForChild(d)){u=e.serverCache.getNode();const y=BL(r,n,a.getNode(),u);y!=null?p=a.getNode().getImmediateChild(d).updateChild(h,y):p=a.getNode().getImmediateChild(d)}else p=VO(r,d,e.serverCache);p!=null?l=t.filter.updateChild(a.getNode(),d,p,h,i,s):l=a.getNode()}}return k0(e,l,a.isFullyInitialized()||It(n),t.filter.filtersNodes())}}function Gx(t,e,n,r,i,s,a,l){const u=e.serverCache;let d;const h=a?t.filter:t.filter.getIndexedFilter();if(It(n))d=h.updateFullNode(u.getNode(),r,null);else if(h.filtersNodes()&&!u.isFiltered()){const v=u.getNode().updateChild(n,r);d=h.updateFullNode(u.getNode(),v,null)}else{const v=kt(n);if(!u.isCompleteForPath(n)&&nd(n)>1)return e;const w=In(n),E=u.getNode().getImmediateChild(v).updateChild(w,r);v===".priority"?d=h.updatePriority(u.getNode(),E):d=h.updateChild(u.getNode(),v,E,w,EW,null)}const p=yW(e,d,u.isFullyInitialized()||It(n),h.filtersNodes()),y=new UO(i,p,s);return TW(t,p,n,i,y,l)}function uk(t,e,n,r,i,s,a){const l=e.eventCache;let u,d;const h=new UO(i,e,s);if(It(n))d=t.filter.updateFullNode(e.eventCache.getNode(),r,a),u=k0(e,d,!0,t.filter.filtersNodes());else{const p=kt(n);if(p===".priority")d=t.filter.updatePriority(e.eventCache.getNode(),r),u=k0(e,d,l.isFullyInitialized(),l.isFiltered());else{const y=In(n),v=l.getNode().getImmediateChild(p);let w;if(It(y))w=r;else{const _=h.getCompleteChild(p);_!=null?NO(y)===".priority"&&_.getChild(lW(y)).isEmpty()?w=_:w=_.updateChild(y,r):w=gt.EMPTY_NODE}if(v.equals(w))u=e;else{const _=t.filter.updateChild(l.getNode(),p,w,y,h,a);u=k0(e,_,l.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function zL(t,e){return t.eventCache.isCompleteForChild(e)}function xye(t,e,n,r,i,s,a){let l=e;return r.foreach((u,d)=>{const h=Rr(n,u);zL(e,kt(h))&&(l=uk(t,l,h,d,i,s,a))}),r.foreach((u,d)=>{const h=Rr(n,u);zL(e,kt(h))||(l=uk(t,l,h,d,i,s,a))}),l}function $L(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function dk(t,e,n,r,i,s,a,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,d;It(n)?d=r:d=new Fn(null).setTree(n,r);const h=e.serverCache.getNode();return d.children.inorderTraversal((p,y)=>{if(h.hasChild(p)){const v=e.serverCache.getNode().getImmediateChild(p),w=$L(t,v,y);u=Gx(t,u,new mn(p),w,i,s,a,l)}}),d.children.inorderTraversal((p,y)=>{const v=!e.serverCache.isCompleteForChild(p)&&y.value===null;if(!h.hasChild(p)&&!v){const w=e.serverCache.getNode().getImmediateChild(p),_=$L(t,w,y);u=Gx(t,u,new mn(p),_,i,s,a,l)}}),u}function _ye(t,e,n,r,i,s,a){if(qx(i,n)!=null)return e;const l=e.serverCache.isFiltered(),u=e.serverCache;if(r.value!=null){if(It(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Gx(t,e,n,u.getNode().getChild(n),i,s,l,a);if(It(n)){let d=new Fn(null);return u.getNode().forEachChild(Om,(h,p)=>{d=d.set(new mn(h),p)}),dk(t,e,n,d,i,s,l,a)}else return e}else{let d=new Fn(null);return r.foreach((h,p)=>{const y=Rr(n,h);u.isCompleteForPath(y)&&(d=d.set(h,u.getNode().getChild(y)))}),dk(t,e,n,d,i,s,l,a)}}function Eye(t,e,n,r,i){const s=e.serverCache,a=yW(e,s.getNode(),s.isFullyInitialized()||It(n),s.isFiltered());return TW(t,a,n,r,EW,i)}function Tye(t,e,n,r,i,s){let a;if(qx(r,n)!=null)return e;{const l=new UO(r,e,i),u=e.eventCache.getNode();let d;if(It(n)||kt(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=Hx(r,Uh(e));else{const p=e.serverCache.getNode();De(p instanceof gt,"serverChildren would be complete if leaf node"),h=LO(r,p)}h=h,d=t.filter.updateFullNode(u,h,s)}else{const h=kt(n);let p=VO(r,h,e.serverCache);p==null&&e.serverCache.isCompleteForChild(h)&&(p=u.getImmediateChild(h)),p!=null?d=t.filter.updateChild(u,h,p,In(n),l,s):e.eventCache.getNode().hasChild(h)?d=t.filter.updateChild(u,h,gt.EMPTY_NODE,In(n),l,s):d=u,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=Hx(r,Uh(e)),a.isLeafNode()&&(d=t.filter.updateFullNode(d,a,s)))}return a=e.serverCache.isFullyInitialized()||qx(r,tn())!=null,k0(e,d,a,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sye{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new jO(r.getIndex()),s=H0e(r);this.processor_=yye(s);const a=n.serverCache,l=n.eventCache,u=i.updateFullNode(gt.EMPTY_NODE,a.getNode(),null),d=s.updateFullNode(gt.EMPTY_NODE,l.getNode(),null),h=new Vh(u,a.isFullyInitialized(),i.filtersNodes()),p=new Vh(d,l.isFullyInitialized(),s.filtersNodes());this.viewCache_=e2(p,h),this.eventGenerator_=new Q0e(this.query_)}get query(){return this.query_}}function Cye(t){return t.viewCache_.serverCache.getNode()}function Aye(t,e){const n=Uh(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!It(e)&&!n.getImmediateChild(kt(e)).isEmpty())?n.getChild(e):null}function FL(t){return t.eventRegistrations_.length===0}function Nye(t,e){t.eventRegistrations_.push(e)}function HL(t,e,n){const r=[];if(n){De(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const a=s.createCancelEvent(n,i);a&&r.push(a)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const a=t.eventRegistrations_[s];if(!a.matches(e))i.push(a);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function qL(t,e,n,r){e.type===So.MERGE&&e.source.queryId!==null&&(De(Uh(t.viewCache_),"We should always have a full cache before handling merges"),De(ok(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=bye(t.processor_,i,e,n,r);return vye(t.processor_,s.viewCache),De(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,SW(t,s.changes,s.viewCache.eventCache.getNode(),null)}function kye(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ur,(s,a)=>{r.push(sp(s,a))}),n.isFullyInitialized()&&r.push(pW(n.getNode())),SW(t,r,n.getNode(),e)}function SW(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return J0e(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wx;class Iye{constructor(){this.views=new Map}}function Oye(t){De(!Wx,"__referenceConstructor has already been defined"),Wx=t}function jye(){return De(Wx,"Reference.ts has not been loaded"),Wx}function Pye(t){return t.views.size===0}function BO(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return De(s!=null,"SyncTree gave us an op for an invalid query."),qL(s,e,n,r)}else{let s=[];for(const a of t.views.values())s=s.concat(qL(a,e,n,r));return s}}function Rye(t,e,n,r,i){const s=e._queryIdentifier,a=t.views.get(s);if(!a){let l=Hx(n,i?r:null),u=!1;l?u=!0:r instanceof gt?(l=LO(n,r),u=!1):(l=gt.EMPTY_NODE,u=!1);const d=e2(new Vh(l,u,!1),new Vh(r,i,!1));return new Sye(e,d)}return a}function Dye(t,e,n,r,i,s){const a=Rye(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,a),Nye(a,n),kye(a,n)}function Mye(t,e,n,r){const i=e._queryIdentifier,s=[];let a=[];const l=rd(t);if(i==="default")for(const[u,d]of t.views.entries())a=a.concat(HL(d,n,r)),FL(d)&&(t.views.delete(u),d.query._queryParams.loadsAllData()||s.push(d.query));else{const u=t.views.get(i);u&&(a=a.concat(HL(u,n,r)),FL(u)&&(t.views.delete(i),u.query._queryParams.loadsAllData()||s.push(u.query)))}return l&&!rd(t)&&s.push(new(jye())(e._repo,e._path)),{removed:s,events:a}}function CW(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function jm(t,e){let n=null;for(const r of t.views.values())n=n||Aye(r,e);return n}function AW(t,e){if(e._queryParams.loadsAllData())return t2(t);{const r=e._queryIdentifier;return t.views.get(r)}}function NW(t,e){return AW(t,e)!=null}function rd(t){return t2(t)!=null}function t2(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kx;function Lye(t){De(!Kx,"__referenceConstructor has already been defined"),Kx=t}function Vye(){return De(Kx,"Reference.ts has not been loaded"),Kx}let Uye=1;class GL{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Fn(null),this.pendingWriteTree_=fye(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function kW(t,e,n,r,i){return nye(t.pendingWriteTree_,e,n,r,i),i?Jy(t,new Lh(gW(),e,n)):[]}function hh(t,e,n=!1){const r=rye(t.pendingWriteTree_,e);if(iye(t.pendingWriteTree_,e)){let s=new Fn(null);return r.snap!=null?s=s.set(tn(),!0):os(r.children,a=>{s=s.set(new mn(a),!0)}),Jy(t,new Fx(r.path,s,n))}else return[]}function n2(t,e,n){return Jy(t,new Lh(RO(),e,n))}function Bye(t,e,n){const r=Fn.fromObject(n);return Jy(t,new iy(RO(),e,r))}function zye(t,e){return Jy(t,new ry(RO(),e))}function $ye(t,e,n){const r=$O(t,n);if(r){const i=FO(r),s=i.path,a=i.queryId,l=Us(s,e),u=new ry(DO(a),l);return HO(t,s,u)}else return[]}function hk(t,e,n,r,i=!1){const s=e._path,a=t.syncPointTree_.get(s);let l=[];if(a&&(e._queryIdentifier==="default"||NW(a,e))){const u=Mye(a,e,n,r);Pye(a)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const d=u.removed;if(l=u.events,!i){const h=d.findIndex(y=>y._queryParams.loadsAllData())!==-1,p=t.syncPointTree_.findOnPath(s,(y,v)=>rd(v));if(h&&!p){const y=t.syncPointTree_.subtree(s);if(!y.isEmpty()){const v=qye(y);for(let w=0;w<v.length;++w){const _=v[w],E=_.query,C=jW(t,_);t.listenProvider_.startListening(O0(E),Yx(t,E),C.hashFn,C.onComplete)}}}!p&&d.length>0&&!r&&(h?t.listenProvider_.stopListening(O0(e),null):d.forEach(y=>{const v=t.queryToTagMap.get(r2(y));t.listenProvider_.stopListening(O0(y),v)}))}Gye(t,d)}return l}function Fye(t,e,n,r){const i=$O(t,r);if(i!=null){const s=FO(i),a=s.path,l=s.queryId,u=Us(a,e),d=new Lh(DO(l),u,n);return HO(t,a,d)}else return[]}function Hye(t,e,n,r){const i=$O(t,r);if(i){const s=FO(i),a=s.path,l=s.queryId,u=Us(a,e),d=Fn.fromObject(n),h=new iy(DO(l),u,d);return HO(t,a,h)}else return[]}function WL(t,e,n,r=!1){const i=e._path;let s=null,a=!1;t.syncPointTree_.foreachOnPath(i,(y,v)=>{const w=Us(y,i);s=s||jm(v,w),a=a||rd(v)});let l=t.syncPointTree_.get(i);l?(a=a||rd(l),s=s||jm(l,tn())):(l=new Iye,t.syncPointTree_=t.syncPointTree_.set(i,l));let u;s!=null?u=!0:(u=!1,s=gt.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((v,w)=>{const _=jm(w,tn());_&&(s=s.updateImmediateChild(v,_))}));const d=NW(l,e);if(!d&&!e._queryParams.loadsAllData()){const y=r2(e);De(!t.queryToTagMap.has(y),"View does not exist, but we have a tag");const v=Wye();t.queryToTagMap.set(y,v),t.tagToQueryMap.set(v,y)}const h=MO(t.pendingWriteTree_,i);let p=Dye(l,e,n,h,s,u);if(!d&&!a&&!r){const y=AW(l,e);p=p.concat(Kye(t,e,y))}return p}function zO(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(a,l)=>{const u=Us(a,e),d=jm(l,u);if(d)return d});return wW(i,e,s,n,!0)}function Jy(t,e){return IW(e,t.syncPointTree_,null,MO(t.pendingWriteTree_,tn()))}function IW(t,e,n,r){if(It(t.path))return OW(t,e,n,r);{const i=e.get(tn());n==null&&i!=null&&(n=jm(i,tn()));let s=[];const a=kt(t.path),l=t.operationForChild(a),u=e.children.get(a);if(u&&l){const d=n?n.getImmediateChild(a):null,h=xW(r,a);s=s.concat(IW(l,u,d,h))}return i&&(s=s.concat(BO(i,t,r,n))),s}}function OW(t,e,n,r){const i=e.get(tn());n==null&&i!=null&&(n=jm(i,tn()));let s=[];return e.children.inorderTraversal((a,l)=>{const u=n?n.getImmediateChild(a):null,d=xW(r,a),h=t.operationForChild(a);h&&(s=s.concat(OW(h,l,u,d)))}),i&&(s=s.concat(BO(i,t,r,n))),s}function jW(t,e){const n=e.query,r=Yx(t,n);return{hashFn:()=>(Cye(e)||gt.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?$ye(t,n._path,r):zye(t,n._path);{const s=$ge(i,n);return hk(t,n,null,s)}}}}function Yx(t,e){const n=r2(e);return t.queryToTagMap.get(n)}function r2(t){return t._path.toString()+"$"+t._queryIdentifier}function $O(t,e){return t.tagToQueryMap.get(e)}function FO(t){const e=t.indexOf("$");return De(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new mn(t.substr(0,e))}}function HO(t,e,n){const r=t.syncPointTree_.get(e);De(r,"Missing sync point for query tag that we're tracking");const i=MO(t.pendingWriteTree_,e);return BO(r,n,i,null)}function qye(t){return t.fold((e,n,r)=>{if(n&&rd(n))return[t2(n)];{let i=[];return n&&(i=CW(n)),os(r,(s,a)=>{i=i.concat(a)}),i}})}function O0(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Vye())(t._repo,t._path):t}function Gye(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=r2(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function Wye(){return Uye++}function Kye(t,e,n){const r=e._path,i=Yx(t,e),s=jW(t,n),a=t.listenProvider_.startListening(O0(e),i,s.hashFn,s.onComplete),l=t.syncPointTree_.subtree(r);if(i)De(!rd(l.value),"If we're adding a query, it shouldn't be shadowed");else{const u=l.fold((d,h,p)=>{if(!It(d)&&h&&rd(h))return[t2(h).query];{let y=[];return h&&(y=y.concat(CW(h).map(v=>v.query))),os(p,(v,w)=>{y=y.concat(w)}),y}});for(let d=0;d<u.length;++d){const h=u[d];t.listenProvider_.stopListening(O0(h),Yx(t,h))}}return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new qO(n)}node(){return this.node_}}class GO{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Rr(this.path_,e);return new GO(this.syncTree_,n)}node(){return zO(this.syncTree_,this.path_)}}const Yye=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},KL=function(t,e,n){if(!t||typeof t!="object")return t;if(De(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Xye(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Qye(t[".sv"],e);De(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Xye=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:De(!1,"Unexpected server value: "+t)}},Qye=function(t,e,n){t.hasOwnProperty("increment")||De(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&De(!1,"Unexpected increment value: "+r);const i=e.node();if(De(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const a=i.getValue();return typeof a!="number"?r:a+r},Jye=function(t,e,n,r){return WO(e,new GO(n,t),r)},PW=function(t,e,n){return WO(t,new qO(e),n)};function WO(t,e,n){const r=t.getPriority().val(),i=KL(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const a=t,l=KL(a.getValue(),e,n);return l!==a.getValue()||i!==a.getPriority().val()?new gi(l,Wr(i)):t}else{const a=t;return s=a,i!==a.getPriority().val()&&(s=s.updatePriority(new gi(i))),a.forEachChild(ur,(l,u)=>{const d=WO(u,e.getImmediateChild(l),n);d!==u&&(s=s.updateImmediateChild(l,d))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function YO(t,e){let n=e instanceof mn?e:new mn(e),r=t,i=kt(n);for(;i!==null;){const s=Gm(r.node.children,i)||{children:{},childCount:0};r=new KO(i,r,s),n=In(n),i=kt(n)}return r}function Vp(t){return t.node.value}function RW(t,e){t.node.value=e,fk(t)}function DW(t){return t.node.childCount>0}function Zye(t){return Vp(t)===void 0&&!DW(t)}function i2(t,e){os(t.node.children,(n,r)=>{e(new KO(n,t,r))})}function MW(t,e,n,r){n&&e(t),i2(t,i=>{MW(i,e,!0)})}function eve(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Zy(t){return new mn(t.parent===null?t.name:Zy(t.parent)+"/"+t.name)}function fk(t){t.parent!==null&&tve(t.parent,t.name,t)}function tve(t,e,n){const r=Zye(n),i=Sl(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,fk(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,fk(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nve=/[\[\].#$\/\u0000-\u001F\u007F]/,rve=/[\[\].#$\u0000-\u001F\u007F]/,YS=10*1024*1024,XO=function(t){return typeof t=="string"&&t.length!==0&&!nve.test(t)},LW=function(t){return typeof t=="string"&&t.length!==0&&!rve.test(t)},ive=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),LW(t)},VW=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!J_(t)||t&&typeof t=="object"&&Sl(t,".sv")},mk=function(t,e,n,r){s2(Wm(t,"value"),e,n)},s2=function(t,e,n){const r=n instanceof mn?new _0e(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+eh(r));if(typeof e=="function")throw new Error(t+"contains a function "+eh(r)+" with contents = "+e.toString());if(J_(e))throw new Error(t+"contains "+e.toString()+" "+eh(r));if(typeof e=="string"&&e.length>YS/3&&w_(e)>YS)throw new Error(t+"contains a string greater than "+YS+" utf8 bytes "+eh(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(os(e,(a,l)=>{if(a===".value")i=!0;else if(a!==".priority"&&a!==".sv"&&(s=!0,!XO(a)))throw new Error(t+" contains an invalid key ("+a+") "+eh(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);E0e(r,a),s2(t,l,r),T0e(r)}),i&&s)throw new Error(t+' contains ".value" child '+eh(r)+" in addition to actual children.")}},sve=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=Z0(r);for(let a=0;a<s.length;a++)if(!(s[a]===".priority"&&a===s.length-1)){if(!XO(s[a]))throw new Error(t+"contains an invalid key ("+s[a]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(x0e);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&qa(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},ave=function(t,e,n,r){const i=Wm(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];os(e,(a,l)=>{const u=new mn(a);if(s2(i,l,Rr(n,u)),NO(u)===".priority"&&!VW(l))throw new Error(i+"contains an invalid value for '"+u.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(u)}),sve(i,s)},ove=function(t,e,n){if(J_(e))throw new Error(Wm(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!VW(e))throw new Error(Wm(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},UW=function(t,e,n,r){if(!LW(n))throw new Error(Wm(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},lve=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),UW(t,e,n)},bm=function(t,e){if(kt(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},cve=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!XO(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!ive(n))throw new Error(Wm(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uve{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function QO(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!kO(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function BW(t,e,n){QO(t,n),zW(t,r=>kO(r,e))}function Sc(t,e,n){QO(t,n),zW(t,r=>qa(r,e)||qa(e,r))}function zW(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(dve(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function dve(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();A0&&Vi("event: "+n.toString()),Mp(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hve="repo_interrupt",fve=25;class mve{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new uve,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=$x(),this.transactionQueueTree_=new KO,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function pve(t,e,n){if(t.stats_=CO(t.repoInfo_),t.forceRestClient_||Gge())t.server_=new zx(t.repoInfo_,(r,i,s,a)=>{YL(t,r,i,s,a)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>XL(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{wi(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new fc(t.repoInfo_,e,(r,i,s,a)=>{YL(t,r,i,s,a)},r=>{XL(t,r)},r=>{yve(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Qge(t.repoInfo_,()=>new X0e(t.stats_,t.server_)),t.infoData_=new q0e,t.infoSyncTree_=new GL({startListening:(r,i,s,a)=>{let l=[];const u=t.infoData_.getNode(r._path);return u.isEmpty()||(l=n2(t.infoSyncTree_,r._path,u),setTimeout(()=>{a("ok")},0)),l},stopListening:()=>{}}),ZO(t,"connected",!1),t.serverSyncTree_=new GL({startListening:(r,i,s,a)=>(t.server_.listen(r,s,i,(l,u)=>{const d=a(l,u);Sc(t.eventQueue_,r._path,d)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function gve(t){const n=t.infoData_.getNode(new mn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function JO(t){return Yye({timestamp:gve(t)})}function YL(t,e,n,r,i){t.dataUpdateCount++;const s=new mn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let a=[];if(i)if(r){const u=gx(n,d=>Wr(d));a=Hye(t.serverSyncTree_,s,u,i)}else{const u=Wr(n);a=Fye(t.serverSyncTree_,s,u,i)}else if(r){const u=gx(n,d=>Wr(d));a=Bye(t.serverSyncTree_,s,u)}else{const u=Wr(n);a=n2(t.serverSyncTree_,s,u)}let l=s;a.length>0&&(l=a2(t,s)),Sc(t.eventQueue_,l,a)}function XL(t,e){ZO(t,"connected",e),e===!1&&bve(t)}function yve(t,e){os(e,(n,r)=>{ZO(t,n,r)})}function ZO(t,e,n){const r=new mn("/.info/"+e),i=Wr(n);t.infoData_.updateSnapshot(r,i);const s=n2(t.infoSyncTree_,r,i);Sc(t.eventQueue_,r,s)}function $W(t){return t.nextWriteId_++}function vve(t,e,n,r,i){ej(t,"set",{path:e.toString(),value:n,priority:r});const s=JO(t),a=Wr(n,r),l=zO(t.serverSyncTree_,e),u=PW(a,l,s),d=$W(t),h=kW(t.serverSyncTree_,e,u,d,!0);QO(t.eventQueue_,h),t.server_.put(e.toString(),a.val(!0),(y,v)=>{const w=y==="ok";w||$s("set at "+e+" failed: "+y);const _=hh(t.serverSyncTree_,d,!w);Sc(t.eventQueue_,e,_),op(t,i,y,v)});const p=WW(t,e);a2(t,p),Sc(t.eventQueue_,p,[])}function bve(t){ej(t,"onDisconnectEvents");const e=JO(t),n=$x();ak(t.onDisconnect_,tn(),(i,s)=>{const a=Jye(i,s,t.serverSyncTree_,e);Lp(n,i,a)});let r=[];ak(n,tn(),(i,s)=>{r=r.concat(n2(t.serverSyncTree_,i,s));const a=WW(t,i);a2(t,a)}),t.onDisconnect_=$x(),Sc(t.eventQueue_,tn(),r)}function wve(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&sk(t.onDisconnect_,e),op(t,n,r,i)})}function QL(t,e,n,r){const i=Wr(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(s,a)=>{s==="ok"&&Lp(t.onDisconnect_,e,i),op(t,r,s,a)})}function xve(t,e,n,r,i){const s=Wr(n,r);t.server_.onDisconnectPut(e.toString(),s.val(!0),(a,l)=>{a==="ok"&&Lp(t.onDisconnect_,e,s),op(t,i,a,l)})}function _ve(t,e,n,r){if(px(n)){Vi("onDisconnect().update() called with empty data.  Don't do anything."),op(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,s)=>{i==="ok"&&os(n,(a,l)=>{const u=Wr(l);Lp(t.onDisconnect_,Rr(e,a),u)}),op(t,r,i,s)})}function Eve(t,e,n){let r;kt(e._path)===".info"?r=WL(t.infoSyncTree_,e,n):r=WL(t.serverSyncTree_,e,n),BW(t.eventQueue_,e._path,r)}function Tve(t,e,n){let r;kt(e._path)===".info"?r=hk(t.infoSyncTree_,e,n):r=hk(t.serverSyncTree_,e,n),BW(t.eventQueue_,e._path,r)}function Sve(t){t.persistentConnection_&&t.persistentConnection_.interrupt(hve)}function ej(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Vi(n,...e)}function op(t,e,n,r){e&&Mp(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const a=new Error(s);a.code=i,e(a)}})}function FW(t,e,n){return zO(t.serverSyncTree_,e,n)||gt.EMPTY_NODE}function tj(t,e=t.transactionQueueTree_){if(e||o2(t,e),Vp(e)){const n=qW(t,e);De(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&Cve(t,Zy(e),n)}else DW(e)&&i2(e,n=>{tj(t,n)})}function Cve(t,e,n){const r=n.map(d=>d.currentWriteId),i=FW(t,e,r);let s=i;const a=i.hash();for(let d=0;d<n.length;d++){const h=n[d];De(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const p=Us(e,h.path);s=s.updateChild(p,h.currentOutputSnapshotRaw)}const l=s.val(!0),u=e;t.server_.put(u.toString(),l,d=>{ej(t,"transaction put response",{path:u.toString(),status:d});let h=[];if(d==="ok"){const p=[];for(let y=0;y<n.length;y++)n[y].status=2,h=h.concat(hh(t.serverSyncTree_,n[y].currentWriteId)),n[y].onComplete&&p.push(()=>n[y].onComplete(null,!0,n[y].currentOutputSnapshotResolved)),n[y].unwatcher();o2(t,YO(t.transactionQueueTree_,e)),tj(t,t.transactionQueueTree_),Sc(t.eventQueue_,e,h);for(let y=0;y<p.length;y++)Mp(p[y])}else{if(d==="datastale")for(let p=0;p<n.length;p++)n[p].status===3?n[p].status=4:n[p].status=0;else{$s("transaction at "+u.toString()+" failed: "+d);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=d}a2(t,e)}},a)}function a2(t,e){const n=HW(t,e),r=Zy(n),i=qW(t,n);return Ave(t,i,r),r}function Ave(t,e,n){if(e.length===0)return;const r=[];let i=[];const a=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const u=e[l],d=Us(n,u.path);let h=!1,p;if(De(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)h=!0,p=u.abortReason,i=i.concat(hh(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=fve)h=!0,p="maxretry",i=i.concat(hh(t.serverSyncTree_,u.currentWriteId,!0));else{const y=FW(t,u.path,a);u.currentInputSnapshot=y;const v=e[l].update(y.val());if(v!==void 0){s2("transaction failed: Data returned ",v,u.path);let w=Wr(v);typeof v=="object"&&v!=null&&Sl(v,".priority")||(w=w.updatePriority(y.getPriority()));const E=u.currentWriteId,C=JO(t),N=PW(w,y,C);u.currentOutputSnapshotRaw=w,u.currentOutputSnapshotResolved=N,u.currentWriteId=$W(t),a.splice(a.indexOf(E),1),i=i.concat(kW(t.serverSyncTree_,u.path,N,u.currentWriteId,u.applyLocally)),i=i.concat(hh(t.serverSyncTree_,E,!0))}else h=!0,p="nodata",i=i.concat(hh(t.serverSyncTree_,u.currentWriteId,!0))}Sc(t.eventQueue_,n,i),i=[],h&&(e[l].status=2,(function(y){setTimeout(y,Math.floor(0))})(e[l].unwatcher),e[l].onComplete&&(p==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(p),!1,null))))}o2(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)Mp(r[l]);tj(t,t.transactionQueueTree_)}function HW(t,e){let n,r=t.transactionQueueTree_;for(n=kt(e);n!==null&&Vp(r)===void 0;)r=YO(r,n),e=In(e),n=kt(e);return r}function qW(t,e){const n=[];return GW(t,e,n),n.sort((r,i)=>r.order-i.order),n}function GW(t,e,n){const r=Vp(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);i2(e,i=>{GW(t,i,n)})}function o2(t,e){const n=Vp(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,RW(e,n.length>0?n:void 0)}i2(e,r=>{o2(t,r)})}function WW(t,e){const n=Zy(HW(t,e)),r=YO(t.transactionQueueTree_,e);return eve(r,i=>{XS(t,i)}),XS(t,r),MW(r,i=>{XS(t,i)}),n}function XS(t,e){const n=Vp(e);if(n){const r=[];let i=[],s=-1;for(let a=0;a<n.length;a++)n[a].status===3||(n[a].status===1?(De(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(De(n[a].status===0,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(hh(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));s===-1?RW(e,void 0):n.length=s+1,Sc(t.eventQueue_,Zy(e),i);for(let a=0;a<r.length;a++)Mp(r[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nve(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function kve(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):$s(`Invalid query segment '${n}' in query '${t}'`)}return e}const JL=function(t,e){const n=Ive(t),r=n.namespace;n.domain==="firebase.com"&&Tc(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Tc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Lge();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new ZG(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new mn(n.pathString)}},Ive=function(t){let e="",n="",r="",i="",s="",a=!0,l="https",u=443;if(typeof t=="string"){let d=t.indexOf("//");d>=0&&(l=t.substring(0,d-1),t=t.substring(d+2));let h=t.indexOf("/");h===-1&&(h=t.length);let p=t.indexOf("?");p===-1&&(p=t.length),e=t.substring(0,Math.min(h,p)),h<p&&(i=Nve(t.substring(h,p)));const y=kve(t.substring(Math.min(t.length,p)));d=e.indexOf(":"),d>=0?(a=l==="https"||l==="wss",u=parseInt(e.substring(d+1),10)):d=e.length;const v=e.slice(0,d);if(v.toLowerCase()==="localhost")n="localhost";else if(v.split(".").length<=2)n=v;else{const w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),n=e.substring(w+1),s=r}"ns"in y&&(s=y.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:a,scheme:l,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ove{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+wi(this.snapshot.exportVal())}}class jve{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pve{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return De(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rve{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new Zl;return wve(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){bm("OnDisconnect.remove",this._path);const e=new Zl;return QL(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){bm("OnDisconnect.set",this._path),mk("OnDisconnect.set",e,this._path);const n=new Zl;return QL(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){bm("OnDisconnect.setWithPriority",this._path),mk("OnDisconnect.setWithPriority",e,this._path),ove("OnDisconnect.setWithPriority",n);const r=new Zl;return xve(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){bm("OnDisconnect.update",this._path),ave("OnDisconnect.update",e,this._path);const n=new Zl;return _ve(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return It(this._path)?null:NO(this._path)}get ref(){return new md(this._repo,this._path)}get _queryIdentifier(){const e=DL(this._queryParams),n=TO(e);return n==="{}"?"default":n}get _queryObject(){return DL(this._queryParams)}isEqual(e){if(e=rn(e),!(e instanceof nj))return!1;const n=this._repo===e._repo,r=kO(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+w0e(this._path)}}class md extends nj{constructor(e,n){super(e,n,new PO,!1)}get parent(){const e=lW(this._path);return e===null?null:new md(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Xx{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new mn(e),r=pk(this.ref,e);return new Xx(this._node.getChild(n),r,ur)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Xx(i,pk(this.ref,r),ur)))}hasChild(e){const n=new mn(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ru(t,e){return t=rn(t),t._checkNotDeleted("ref"),e!==void 0?pk(t._root,e):t._root}function pk(t,e){return t=rn(t),kt(t._path)===null?lve("child","path",e):UW("child","path",e),new md(t._repo,Rr(t._path,e))}function Dve(t){return t=rn(t),new Rve(t._repo,t._path)}function ZL(t){return bm("remove",t._path),rj(t,null)}function rj(t,e){t=rn(t),bm("set",t._path),mk("set",e,t._path);const n=new Zl;return vve(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class ij{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new Ove("value",this,new Xx(e.snapshotNode,new md(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new jve(this,e,n):null}matches(e){return e instanceof ij?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function Mve(t,e,n,r,i){const s=new Pve(n,void 0),a=new ij(s);return Eve(t._repo,t,a),()=>Tve(t._repo,t,a)}function Qx(t,e,n,r){return Mve(t,"value",e)}Oye(md);Lye(md);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lve="FIREBASE_DATABASE_EMULATOR_HOST",gk={};let Vve=!1;function Uve(t,e,n,r){const i=e.lastIndexOf(":"),s=e.substring(0,i),a=jc(s);t.repoInfo_=new ZG(e,a,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),r&&(t.authTokenProvider_=r)}function Bve(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Tc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Vi("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let a=JL(s,i),l=a.repoInfo,u;typeof process<"u"&&yL&&(u=yL[Lve]),u?(s=`http://${u}?ns=${l.namespace}`,a=JL(s,i),l=a.repoInfo):a.repoInfo.secure;const d=new Kge(t.name,t.options,e);cve("Invalid Firebase Database URL",a),It(a.path)||Tc("Database URL must point to the root of a Firebase Database (not including a child path).");const h=$ve(l,t,d,new Wge(t,n));return new Fve(h,t)}function zve(t,e){const n=gk[e];(!n||n[t.key]!==t)&&Tc(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Sve(t),delete n[t.key]}function $ve(t,e,n,r){let i=gk[e.name];i||(i={},gk[e.name]=i);let s=i[t.toURLString()];return s&&Tc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new mve(t,Vve,n,r),i[t.toURLString()]=s,s}class Fve{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(pve(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new md(this._repo,tn())),this._rootInternal}_delete(){return this._rootInternal!==null&&(zve(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Tc("Cannot call "+e+" on a deleted database.")}}function Hve(t=Ly(),e){const n=My(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=S4("database");r&&qve(n,...r)}return n}function qve(t,e,n,r={}){t=rn(t),t._checkNotDeleted("useEmulator");const i=`${e}:${n}`,s=t._repoInternal;if(t._instanceStarted){if(i===t._repoInternal.repoInfo_.host&&yl(r,s.repoInfo_.emulatorOptions))return;Tc("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let a;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&Tc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Zw(Zw.OWNER);else if(r.mockUserToken){const l=typeof r.mockUserToken=="string"?r.mockUserToken:C4(r.mockUserToken,t.app.options.projectId);a=new Zw(l)}jc(e)&&(v_(e),b_("Database",!0)),Uve(s,i,r,a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gve(t){Oge(cd),Ku(new bc("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return Bve(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Xa(vL,bL,t),Xa(vL,bL,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wve={".sv":"timestamp"};function QS(){return Wve}fc.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};fc.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Gve();const Kve={apiKey:"AIzaSyDll7h-FpzCVml2vy8KeMPA6xExGUda_NE",authDomain:"thi-tnd.firebaseapp.com",projectId:"thi-tnd",storageBucket:"thi-tnd.firebasestorage.app",messagingSenderId:"107125875663",appId:"1:107125875663:web:0e1a632779f51340c828ba",databaseURL:"https://thi-tnd-default-rtdb.asia-southeast1.firebasedatabase.app"},ev=Tue().length?Ly():pH(Kve),Ji=ege(ev),Pe=Vq(ev),Co=Hve(ev);Age(ev);const KW=Object.freeze(Object.defineProperty({__proto__:null,app:ev,auth:Ji,db:Pe,rtdb:Co},Symbol.toStringTag,{value:"Module"})),YW=async(t,e,n,r,i,s,a,l,u,d)=>{try{const h={title:t,message:e,type:n,targetType:r==="role"?"all":r,_originalTargetType:r,targetId:i,targetName:u||null,targetRoles:d||[],senderId:s,senderName:a||"H thng",createdAt:fl(),expiryDate:l?Tn.fromDate(l):null,read:!1,readBy:[],deletedBy:[]};if(r==="user"&&i)await Ph(_t(Pe,"users",i,"notifications"),h);else if(r==="class"&&i){let p=new Map;const y=$t(_t(Pe,"courses"),an("name","==",i)),v=await Mn(y);let w=null,_=i;if(!v.empty)w=v.docs[0].id;else{const N=Ct(Pe,"courses",i),O=await Mn($t(_t(Pe,"courses"),an(U_(),"==",i)));O.empty||(w=i,_=O.docs[0].data().name)}const E=[];if(_&&E.push(Mn($t(_t(Pe,"users"),an("courseName","==",_)))),w&&E.push(Mn($t(_t(Pe,"users"),an("courseId","==",w)))),(await Promise.all(E)).forEach(N=>{N.docs.forEach(O=>p.set(O.id,O.id))}),p.size>0){const N=mO(Pe);p.forEach(O=>{const R=Ct(_t(Pe,"users",O,"notifications"));N.set(R,h)}),await N.commit()}}await Ph(_t(Pe,"notifications"),h)}catch(h){throw console.error("Error sending notification:",h),h}},Yve=async(t,e,n)=>{try{const r=[],i=$t(_t(Pe,"notifications"),an("targetType","==","all"),hl(20)),s=$t(_t(Pe,"users",t,"notifications"),Do("createdAt","desc"),hl(20));try{(await Mn(i)).docs.forEach(u=>{var p;const d=u.data();if(d.targetRoles&&Array.isArray(d.targetRoles)&&d.targetRoles.length>0&&(!n||!d.targetRoles.includes(n)))return;const h=((p=d.readBy)==null?void 0:p.includes(t))||!1;r.push({id:u.id,...d,read:h})})}catch(l){console.warn("Error fetching global:",l)}try{(await Mn(s)).docs.forEach(u=>{r.push({id:u.id,...u.data()})})}catch(l){console.error("Error fetching personal:",l)}return r.sort((l,u)=>{var p,y;const d=((p=l.createdAt)==null?void 0:p.seconds)||0;return(((y=u.createdAt)==null?void 0:y.seconds)||0)-d}).filter(l=>{var u;return!((u=l.deletedBy)!=null&&u.includes(t))})}catch(r){return console.error("Error fetching notifications:",r),[]}},e7=async(t,e)=>{try{const n=Ct(Pe,"notifications",t),{arrayUnion:r}=await $n(async()=>{const{arrayUnion:s}=await Promise.resolve().then(()=>rc);return{arrayUnion:s}},void 0);try{await jr(n,{deletedBy:r(e)});return}catch{}const i=Ct(Pe,"users",e,"notifications",t);await jr(i,{deletedBy:r(e)})}catch{}},XW=async(t,e)=>{try{const n=Tn.now(),r=[],i=$t(_t(Pe,"notifications"),an("targetType","==","all"),hl(20));if((await Mn(i)).forEach(l=>{const u=l.data();u.targetRoles&&Array.isArray(u.targetRoles)&&u.targetRoles.length>0&&(!e||!u.targetRoles.includes(e))||(u.type==="special"||u.type==="attention")&&(!u.expiryDate||u.expiryDate.seconds&&u.expiryDate.seconds>n.seconds)&&r.push({id:l.id,...u})}),t){const l=$t(_t(Pe,"users",t,"notifications"),Do("createdAt","desc"),hl(20));(await Mn(l)).forEach(d=>{const h=d.data();(h.type==="special"||h.type==="attention")&&(!h.expiryDate||h.expiryDate.seconds&&h.expiryDate.seconds>n.seconds)&&r.push({id:d.id,...h})})}return Array.from(new Map(r.map(l=>[l.id,l])).values()).sort((l,u)=>{var p,y;const d=((p=l.createdAt)==null?void 0:p.seconds)||0;return(((y=u.createdAt)==null?void 0:y.seconds)||0)-d})}catch(n){return console.error("Error fetching marquee:",n),[]}},Xve=async(t,e)=>{try{const n=Ct(Pe,"users",e,"notifications",t);try{await jr(n,{read:!0});return}catch{}const r=Ct(Pe,"notifications",t),{arrayUnion:i}=await $n(async()=>{const{arrayUnion:s}=await Promise.resolve().then(()=>rc);return{arrayUnion:s}},void 0);await jr(r,{readBy:i(e)})}catch(n){console.error("Error marking read:",n)}},Qve=async()=>{try{const t=$t(_t(Pe,"notifications"),Do("createdAt","desc"));return(await Mn(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){return console.error("Error fetching all notifications:",t),[]}},Jve=async t=>{try{return await K_(Ct(Pe,"notifications",t)),!0}catch(e){return console.error("Error deleting notification:",e),!1}},Zve=async(t,e)=>{try{const n=Ct(Pe,"notifications",t);return await jr(n,{...e,updatedAt:fl()}),!0}catch(n){return console.error("Error updating notification:",n),!1}};var QW={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},t7=ue.createContext&&ue.createContext(QW),ebe=["attr","size","title"];function tbe(t,e){if(t==null)return{};var n=nbe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nbe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Jx(){return Jx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jx.apply(this,arguments)}function n7(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n7(Object(n),!0).forEach(function(r){rbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n7(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rbe(t,e,n){return e=ibe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ibe(t){var e=sbe(t,"string");return typeof e=="symbol"?e:e+""}function sbe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JW(t){return t&&t.map((e,n)=>ue.createElement(e.tag,Zx({key:n},e.attr),JW(e.child)))}function Xe(t){return e=>ue.createElement(abe,Jx({attr:Zx({},t.attr)},e),JW(t.child))}function abe(t){var e=n=>{var{attr:r,size:i,title:s}=t,a=tbe(t,ebe),l=i||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),ue.createElement("svg",Jx({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:u,style:Zx(Zx({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&ue.createElement("title",null,s),t.children)};return t7!==void 0?ue.createElement(t7.Consumer,null,n=>e(n)):e(QW)}function Pm(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(t)}function obe(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"},child:[]}]})(t)}function lbe(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.034 8 8 119.033 8 256s111.034 248 248 248 248-111.034 248-248S392.967 8 256 8zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676zM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676z"},child:[]}]})(t)}function cbe(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(t)}function ube(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(t)}function dbe(t){return Xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M542.22 32.05c-54.8 3.11-163.72 14.43-230.96 55.59-4.64 2.84-7.27 7.89-7.27 13.17v363.87c0 11.55 12.63 18.85 23.28 13.49 69.18-34.82 169.23-44.32 218.7-46.92 16.89-.89 30.02-14.43 30.02-30.66V62.75c.01-17.71-15.35-31.74-33.77-30.7zM264.73 87.64C197.5 46.48 88.58 35.17 33.78 32.05 15.36 31.01 0 45.04 0 62.75V400.6c0 16.24 13.13 29.78 30.02 30.66 49.49 2.6 149.59 12.11 218.77 46.95 10.62 5.35 23.21-1.94 23.21-13.46V100.63c0-5.29-2.62-10.14-7.27-12.99z"},child:[]}]})(t)}function hbe(t){return Xe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M256.47 216.77l86.73 109.18s-16.6 102.36-76.57 150.12C206.66 523.85 0 510.19 0 510.19s3.8-23.14 11-55.43l94.62-112.17c3.97-4.7-.87-11.62-6.65-9.5l-60.4 22.09c14.44-41.66 32.72-80.04 54.6-97.47 59.97-47.76 163.3-40.94 163.3-40.94zM636.53 31.03l-19.86-25c-5.49-6.9-15.52-8.05-22.41-2.56l-232.48 177.8-34.14-42.97c-5.09-6.41-15.14-5.21-18.59 2.21l-25.33 54.55 86.73 109.18 58.8-12.45c8-1.69 11.42-11.2 6.34-17.6l-34.09-42.92 232.48-177.8c6.89-5.48 8.04-15.53 2.55-22.44z"},child:[]}]})(t)}function fbe(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(t)}function mbe(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"},child:[]}]})(t)}function yk(t){return Xe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M208 352c-2.39 0-4.78.35-7.06 1.09C187.98 357.3 174.35 360 160 360c-14.35 0-27.98-2.7-40.95-6.91-2.28-.74-4.66-1.09-7.05-1.09C49.94 352-.33 402.48 0 464.62.14 490.88 21.73 512 48 512h224c26.27 0 47.86-21.12 48-47.38.33-62.14-49.94-112.62-112-112.62zm-48-32c53.02 0 96-42.98 96-96s-42.98-96-96-96-96 42.98-96 96 42.98 96 96 96zM592 0H208c-26.47 0-48 22.25-48 49.59V96c23.42 0 45.1 6.78 64 17.8V64h352v288h-64v-64H384v64h-76.24c19.1 16.69 33.12 38.73 39.69 64H592c26.47 0 48-22.25 48-49.59V49.59C640 22.25 618.47 0 592 0z"},child:[]}]})(t)}function r7(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(t)}function lp(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(t)}function pbe(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 174.8l-39.6-39.6c-9.4-9.4-24.6-9.4-33.9 0L192 374.7 80.6 263.2c-9.4-9.4-24.6-9.4-33.9 0L7 302.9c-9.4 9.4-9.4 24.6 0 34L175 505c9.4 9.4 24.6 9.4 33.9 0l296-296.2c9.4-9.5 9.4-24.7.1-34zm-324.3 106c6.2 6.3 16.4 6.3 22.6 0l208-208.2c6.2-6.3 6.2-16.4 0-22.6L366.1 4.7c-6.2-6.3-16.4-6.3-22.6 0L192 156.2l-55.4-55.5c-6.2-6.3-16.4-6.3-22.6 0L68.7 146c-6.2 6.3-6.2 16.4 0 22.6l112 112.2z"},child:[]}]})(t)}function gbe(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 480H48c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h352c26.51 0 48 21.49 48 48v352c0 26.51-21.49 48-48 48zm-204.686-98.059l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.248-16.379-6.249-22.628 0L184 302.745l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.25 16.379 6.25 22.628.001z"},child:[]}]})(t)}function ybe(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(t)}function vbe(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"},child:[]}]})(t)}function bbe(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"},child:[]}]})(t)}function wbe(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(t)}function xbe(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function _be(t){return Xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"},child:[]}]})(t)}function ec(t){return Xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function l2(t){return Xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(t)}function Ebe(t){return Xe({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(t)}function JS(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"},child:[]}]})(t)}function Tbe(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256.12 245.96c-13.25 0-24 10.74-24 24 1.14 72.25-8.14 141.9-27.7 211.55-2.73 9.72 2.15 30.49 23.12 30.49 10.48 0 20.11-6.92 23.09-17.52 13.53-47.91 31.04-125.41 29.48-224.52.01-13.25-10.73-24-23.99-24zm-.86-81.73C194 164.16 151.25 211.3 152.1 265.32c.75 47.94-3.75 95.91-13.37 142.55-2.69 12.98 5.67 25.69 18.64 28.36 13.05 2.67 25.67-5.66 28.36-18.64 10.34-50.09 15.17-101.58 14.37-153.02-.41-25.95 19.92-52.49 54.45-52.34 31.31.47 57.15 25.34 57.62 55.47.77 48.05-2.81 96.33-10.61 143.55-2.17 13.06 6.69 25.42 19.76 27.58 19.97 3.33 26.81-15.1 27.58-19.77 8.28-50.03 12.06-101.21 11.27-152.11-.88-55.8-47.94-101.88-104.91-102.72zm-110.69-19.78c-10.3-8.34-25.37-6.8-33.76 3.48-25.62 31.5-39.39 71.28-38.75 112 .59 37.58-2.47 75.27-9.11 112.05-2.34 13.05 6.31 25.53 19.36 27.89 20.11 3.5 27.07-14.81 27.89-19.36 7.19-39.84 10.5-80.66 9.86-121.33-.47-29.88 9.2-57.88 28-80.97 8.35-10.28 6.79-25.39-3.49-33.76zm109.47-62.33c-15.41-.41-30.87 1.44-45.78 4.97-12.89 3.06-20.87 15.98-17.83 28.89 3.06 12.89 16 20.83 28.89 17.83 11.05-2.61 22.47-3.77 34-3.69 75.43 1.13 137.73 61.5 138.88 134.58.59 37.88-1.28 76.11-5.58 113.63-1.5 13.17 7.95 25.08 21.11 26.58 16.72 1.95 25.51-11.88 26.58-21.11a929.06 929.06 0 0 0 5.89-119.85c-1.56-98.75-85.07-180.33-186.16-181.83zm252.07 121.45c-2.86-12.92-15.51-21.2-28.61-18.27-12.94 2.86-21.12 15.66-18.26 28.61 4.71 21.41 4.91 37.41 4.7 61.6-.11 13.27 10.55 24.09 23.8 24.2h.2c13.17 0 23.89-10.61 24-23.8.18-22.18.4-44.11-5.83-72.34zm-40.12-90.72C417.29 43.46 337.6 1.29 252.81.02 183.02-.82 118.47 24.91 70.46 72.94 24.09 119.37-.9 181.04.14 246.65l-.12 21.47c-.39 13.25 10.03 24.31 23.28 24.69.23.02.48.02.72.02 12.92 0 23.59-10.3 23.97-23.3l.16-23.64c-.83-52.5 19.16-101.86 56.28-139 38.76-38.8 91.34-59.67 147.68-58.86 69.45 1.03 134.73 35.56 174.62 92.39 7.61 10.86 22.56 13.45 33.42 5.86 10.84-7.62 13.46-22.59 5.84-33.43z"},child:[]}]})(t)}function Sbe(t){return Xe({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111.03 8 0 119.03 0 256s111.03 248 248 248 248-111.03 248-248S384.97 8 248 8zm-11.34 240.23c-2.89 4.82-8.1 7.77-13.72 7.77h-.31c-4.24 0-8.31 1.69-11.31 4.69l-5.66 5.66c-3.12 3.12-3.12 8.19 0 11.31l5.66 5.66c3 3 4.69 7.07 4.69 11.31V304c0 8.84-7.16 16-16 16h-6.11c-6.06 0-11.6-3.42-14.31-8.85l-22.62-45.23c-2.44-4.88-8.95-5.94-12.81-2.08l-19.47 19.46c-3 3-7.07 4.69-11.31 4.69H50.81C49.12 277.55 48 266.92 48 256c0-110.28 89.72-200 200-200 21.51 0 42.2 3.51 61.63 9.82l-50.16 38.53c-5.11 3.41-4.63 11.06.86 13.81l10.83 5.41c5.42 2.71 8.84 8.25 8.84 14.31V216c0 4.42-3.58 8-8 8h-3.06c-3.03 0-5.8-1.71-7.15-4.42-1.56-3.12-5.96-3.29-7.76-.3l-17.37 28.95zM408 358.43c0 4.24-1.69 8.31-4.69 11.31l-9.57 9.57c-3 3-7.07 4.69-11.31 4.69h-15.16c-4.24 0-8.31-1.69-11.31-4.69l-13.01-13.01a26.767 26.767 0 0 0-25.42-7.04l-21.27 5.32c-1.27.32-2.57.48-3.88.48h-10.34c-4.24 0-8.31-1.69-11.31-4.69l-11.91-11.91a8.008 8.008 0 0 1-2.34-5.66v-10.2c0-3.27 1.99-6.21 5.03-7.43l39.34-15.74c1.98-.79 3.86-1.82 5.59-3.05l23.71-16.89a7.978 7.978 0 0 1 4.64-1.48h12.09c3.23 0 6.15 1.94 7.39 4.93l5.35 12.85a4 4 0 0 0 3.69 2.46h3.8c1.78 0 3.35-1.18 3.84-2.88l4.2-14.47c.5-1.71 2.06-2.88 3.84-2.88h6.06c2.21 0 4 1.79 4 4v12.93c0 2.12.84 4.16 2.34 5.66l11.91 11.91c3 3 4.69 7.07 4.69 11.31v24.6z"},child:[]}]})(t)}function i7(t){return Xe({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"},child:[]}]})(t)}function e1(t){return Xe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.34 153.2L343.4 67.5c-15.2-4.67-31.6-4.67-46.79 0L17.66 153.2c-23.54 7.23-23.54 38.36 0 45.59l48.63 14.94c-10.67 13.19-17.23 29.28-17.88 46.9C38.78 266.15 32 276.11 32 288c0 10.78 5.68 19.85 13.86 25.65L20.33 428.53C18.11 438.52 25.71 448 35.94 448h56.11c10.24 0 17.84-9.48 15.62-19.47L82.14 313.65C90.32 307.85 96 298.78 96 288c0-11.57-6.47-21.25-15.66-26.87.76-15.02 8.44-28.3 20.69-36.72L296.6 284.5c9.06 2.78 26.44 6.25 46.79 0l278.95-85.7c23.55-7.24 23.55-38.36 0-45.6zM352.79 315.09c-28.53 8.76-52.84 3.92-65.59 0l-145.02-44.55L128 384c0 35.35 85.96 64 192 64s192-28.65 192-64l-14.18-113.47-145.03 44.56z"},child:[]}]})(t)}function j0(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"},child:[]}]})(t)}function Cbe(t){return Xe({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function ZW(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(t)}function t1(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 176.001C512 273.203 433.202 352 336 352c-11.22 0-22.19-1.062-32.827-3.069l-24.012 27.014A23.999 23.999 0 0 1 261.223 384H224v40c0 13.255-10.745 24-24 24h-40v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24v-78.059c0-6.365 2.529-12.47 7.029-16.971l161.802-161.802C163.108 213.814 160 195.271 160 176 160 78.798 238.797.001 335.999 0 433.488-.001 512 78.511 512 176.001zM336 128c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48-48 21.49-48 48z"},child:[]}]})(t)}function eK(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(t)}function s7(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(t)}function Abe(t){return Xe({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"},child:[]}]})(t)}function aw(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"},child:[]}]})(t)}function Nbe(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"},child:[]}]})(t)}function Iu(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function sj(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(t)}function fh(t){return Xe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M0 224v272c0 8.84 7.16 16 16 16h80V192H32c-17.67 0-32 14.33-32 32zm360-48h-24v-40c0-4.42-3.58-8-8-8h-16c-4.42 0-8 3.58-8 8v64c0 4.42 3.58 8 8 8h48c4.42 0 8-3.58 8-8v-16c0-4.42-3.58-8-8-8zm137.75-63.96l-160-106.67a32.02 32.02 0 0 0-35.5 0l-160 106.67A32.002 32.002 0 0 0 128 138.66V512h128V368c0-8.84 7.16-16 16-16h96c8.84 0 16 7.16 16 16v144h128V138.67c0-10.7-5.35-20.7-14.25-26.63zM320 256c-44.18 0-80-35.82-80-80s35.82-80 80-80 80 35.82 80 80-35.82 80-80 80zm288-64h-64v320h80c8.84 0 16-7.16 16-16V224c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function vk(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(t)}function kbe(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function tK(t){return Xe({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41z"},child:[]}]})(t)}function nK(t){return Xe({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M279 224H41c-21.4 0-32.1-25.9-17-41L143 64c9.4-9.4 24.6-9.4 33.9 0l119 119c15.2 15.1 4.5 41-16.9 41z"},child:[]}]})(t)}function rK(t){return Xe({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M41 288h238c21.4 0 32.1 25.9 17 41L177 448c-9.4 9.4-24.6 9.4-33.9 0L24 329c-15.1-15.1-4.4-41 17-41zm255-105L177 64c-9.4-9.4-24.6-9.4-33.9 0L24 183c-15.1 15.1-4.4 41 17 41h238c21.4 0 32.1-25.9 17-41z"},child:[]}]})(t)}function Ibe(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"},child:[]}]})(t)}function Obe(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"},child:[]}]})(t)}function iK(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 32h192c13.255 0 24 10.745 24 24v160c0 13.255-10.745 24-24 24H296c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24zm-80 0H24C10.745 32 0 42.745 0 56v160c0 13.255 10.745 24 24 24h192c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24zM0 296v160c0 13.255 10.745 24 24 24h192c13.255 0 24-10.745 24-24V296c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm296 184h192c13.255 0 24-10.745 24-24V296c0-13.255-10.745-24-24-24H296c-13.255 0-24 10.745-24 24v160c0 13.255 10.745 24 24 24z"},child:[]}]})(t)}function wm(t){return Xe({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function jbe(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M501.1 395.7L384 278.6c-23.1-23.1-57.6-27.6-85.4-13.9L192 158.1V96L64 0 0 64l96 128h62.1l106.6 106.6c-13.6 27.8-9.2 62.3 13.9 85.4l117.1 117.1c14.6 14.6 38.2 14.6 52.7 0l52.7-52.7c14.5-14.6 14.5-38.2 0-52.7zM331.7 225c28.3 0 54.9 11 74.9 31l19.4 19.4c15.8-6.9 30.8-16.5 43.8-29.5 37.1-37.1 49.7-89.3 37.9-136.7-2.2-9-13.5-12.1-20.1-5.5l-74.4 74.4-67.9-11.3L334 98.9l74.4-74.4c6.6-6.6 3.4-17.9-5.7-20.2-47.4-11.7-99.6.9-136.6 37.9-28.5 28.5-41.9 66.1-41.2 103.6l82.1 82.1c8.1-1.9 16.5-2.9 24.7-2.9zm-103.9 82l-56.7-56.7L18.7 402.8c-25 25-25 65.5 0 90.5s65.5 25 90.5 0l123.6-123.6c-7.6-19.9-9.9-41.6-5-62.7zM64 472c-13.2 0-24-10.8-24-24 0-13.3 10.7-24 24-24s24 10.7 24 24c0 13.2-10.7 24-24 24z"},child:[]}]})(t)}function sl(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function Pbe(t){return Xe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 128v16a8 8 0 0 1-8 8h-24v12c0 6.627-5.373 12-12 12H60c-6.627 0-12-5.373-12-12v-12H24a8 8 0 0 1-8-8v-16a8 8 0 0 1 4.941-7.392l232-88a7.996 7.996 0 0 1 6.118 0l232 88A8 8 0 0 1 496 128zm-24 304H40c-13.255 0-24 10.745-24 24v16a8 8 0 0 0 8 8h464a8 8 0 0 0 8-8v-16c0-13.255-10.745-24-24-24zM96 192v192H60c-6.627 0-12 5.373-12 12v20h416v-20c0-6.627-5.373-12-12-12h-36V192h-64v192h-64V192h-64v192h-64V192H96z"},child:[]}]})(t)}function Rbe(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M64 224h13.5c24.7 56.5 80.9 96 146.5 96s121.8-39.5 146.5-96H384c8.8 0 16-7.2 16-16v-96c0-8.8-7.2-16-16-16h-13.5C345.8 39.5 289.6 0 224 0S102.2 39.5 77.5 96H64c-8.8 0-16 7.2-16 16v96c0 8.8 7.2 16 16 16zm40-88c0-22.1 21.5-40 48-40h144c26.5 0 48 17.9 48 40v24c0 53-43 96-96 96h-48c-53 0-96-43-96-96v-24zm72 72l12-36 36-12-36-12-12-36-12 36-36 12 36 12 12 36zm151.6 113.4C297.7 340.7 262.2 352 224 352s-73.7-11.3-103.6-30.6C52.9 328.5 0 385 0 454.4v9.6c0 26.5 21.5 48 48 48h80v-64c0-17.7 14.3-32 32-32h128c17.7 0 32 14.3 32 32v64h80c26.5 0 48-21.5 48-48v-9.6c0-69.4-52.9-125.9-120.4-133zM272 448c-8.8 0-16 7.2-16 16s7.2 16 16 16 16-7.2 16-16-7.2-16-16-16zm-96 0c-8.8 0-16 7.2-16 16v48h32v-48c0-8.8-7.2-16-16-16z"},child:[]}]})(t)}function Dbe(t){return Xe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M496 224c-79.6 0-144 64.4-144 144s64.4 144 144 144 144-64.4 144-144-64.4-144-144-144zm64 150.3c0 5.3-4.4 9.7-9.7 9.7h-60.6c-5.3 0-9.7-4.4-9.7-9.7v-76.6c0-5.3 4.4-9.7 9.7-9.7h12.6c5.3 0 9.7 4.4 9.7 9.7V352h38.3c5.3 0 9.7 4.4 9.7 9.7v12.6zM320 368c0-27.8 6.7-54.1 18.2-77.5-8-1.5-16.2-2.5-24.6-2.5h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h347.1c-45.3-31.9-75.1-84.5-75.1-144zm-96-112c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128z"},child:[]}]})(t)}function Mbe(t){return Xe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M610.5 373.3c2.6-14.1 2.6-28.5 0-42.6l25.8-14.9c3-1.7 4.3-5.2 3.3-8.5-6.7-21.6-18.2-41.2-33.2-57.4-2.3-2.5-6-3.1-9-1.4l-25.8 14.9c-10.9-9.3-23.4-16.5-36.9-21.3v-29.8c0-3.4-2.4-6.4-5.7-7.1-22.3-5-45-4.8-66.2 0-3.3.7-5.7 3.7-5.7 7.1v29.8c-13.5 4.8-26 12-36.9 21.3l-25.8-14.9c-2.9-1.7-6.7-1.1-9 1.4-15 16.2-26.5 35.8-33.2 57.4-1 3.3.4 6.8 3.3 8.5l25.8 14.9c-2.6 14.1-2.6 28.5 0 42.6l-25.8 14.9c-3 1.7-4.3 5.2-3.3 8.5 6.7 21.6 18.2 41.1 33.2 57.4 2.3 2.5 6 3.1 9 1.4l25.8-14.9c10.9 9.3 23.4 16.5 36.9 21.3v29.8c0 3.4 2.4 6.4 5.7 7.1 22.3 5 45 4.8 66.2 0 3.3-.7 5.7-3.7 5.7-7.1v-29.8c13.5-4.8 26-12 36.9-21.3l25.8 14.9c2.9 1.7 6.7 1.1 9-1.4 15-16.2 26.5-35.8 33.2-57.4 1-3.3-.4-6.8-3.3-8.5l-25.8-14.9zM496 400.5c-26.8 0-48.5-21.8-48.5-48.5s21.8-48.5 48.5-48.5 48.5 21.8 48.5 48.5-21.7 48.5-48.5 48.5zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm201.2 226.5c-2.3-1.2-4.6-2.6-6.8-3.9l-7.9 4.6c-6 3.4-12.8 5.3-19.6 5.3-10.9 0-21.4-4.6-28.9-12.6-18.3-19.8-32.3-43.9-40.2-69.6-5.5-17.7 1.9-36.4 17.9-45.7l7.9-4.6c-.1-2.6-.1-5.2 0-7.8l-7.9-4.6c-16-9.2-23.4-28-17.9-45.7.9-2.9 2.2-5.8 3.2-8.7-3.8-.3-7.5-1.2-11.4-1.2h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c10.1 0 19.5-3.2 27.2-8.5-1.2-3.8-2-7.7-2-11.8v-9.2z"},child:[]}]})(t)}function sK(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M319.4 320.6L224 416l-95.4-95.4C57.1 323.7 0 382.2 0 454.4v9.6c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-9.6c0-72.2-57.1-130.7-128.6-133.8zM13.6 79.8l6.4 1.5v58.4c-7 4.2-12 11.5-12 20.3 0 8.4 4.6 15.4 11.1 19.7L3.5 242c-1.7 6.9 2.1 14 7.6 14h41.8c5.5 0 9.3-7.1 7.6-14l-15.6-62.3C51.4 175.4 56 168.4 56 160c0-8.8-5-16.1-12-20.3V87.1l66 15.9c-8.6 17.2-14 36.4-14 57 0 70.7 57.3 128 128 128s128-57.3 128-128c0-20.6-5.3-39.8-14-57l96.3-23.2c18.2-4.4 18.2-27.1 0-31.5l-190.4-46c-13-3.1-26.7-3.1-39.7 0L13.6 48.2c-18.1 4.4-18.1 27.2 0 31.6z"},child:[]}]})(t)}function Lbe(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M383.9 308.3l23.9-62.6c4-10.5-3.7-21.7-15-21.7h-58.5c11-18.9 17.8-40.6 17.8-64v-.3c39.2-7.8 64-19.1 64-31.7 0-13.3-27.3-25.1-70.1-33-9.2-32.8-27-65.8-40.6-82.8-9.5-11.9-25.9-15.6-39.5-8.8l-27.6 13.8c-9 4.5-19.6 4.5-28.6 0L182.1 3.4c-13.6-6.8-30-3.1-39.5 8.8-13.5 17-31.4 50-40.6 82.8-42.7 7.9-70 19.7-70 33 0 12.6 24.8 23.9 64 31.7v.3c0 23.4 6.8 45.1 17.8 64H56.3c-11.5 0-19.2 11.7-14.7 22.3l25.8 60.2C27.3 329.8 0 372.7 0 422.4v44.8C0 491.9 20.1 512 44.8 512h358.4c24.7 0 44.8-20.1 44.8-44.8v-44.8c0-48.4-25.8-90.4-64.1-114.1zM176 480l-41.6-192 49.6 32 24 40-32 120zm96 0l-32-120 24-40 49.6-32L272 480zm41.7-298.5c-3.9 11.9-7 24.6-16.5 33.4-10.1 9.3-48 22.4-64-25-2.8-8.4-15.4-8.4-18.3 0-17 50.2-56 32.4-64 25-9.5-8.8-12.7-21.5-16.5-33.4-.8-2.5-6.3-5.7-6.3-5.8v-10.8c28.3 3.6 61 5.8 96 5.8s67.7-2.1 96-5.8v10.8c-.1.1-5.6 3.2-6.4 5.8z"},child:[]}]})(t)}function Vbe(t){return Xe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.3 271.1l-115.2-45c-4.1-1.6-12.6-3.7-22.2 0l-115.2 45c-10.7 4.2-17.7 14-17.7 24.9 0 111.6 68.7 188.8 132.9 213.9 9.6 3.7 18 1.6 22.2 0C558.4 489.9 640 420.5 640 296c0-10.9-7-20.7-17.7-24.9zM496 462.4V273.3l95.5 37.3c-5.6 87.1-60.9 135.4-95.5 151.8zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm96 40c0-2.5.8-4.8 1.1-7.2-2.5-.1-4.9-.8-7.5-.8h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c6.8 0 13.3-1.5 19.2-4-54-42.9-99.2-116.7-99.2-212z"},child:[]}]})(t)}function Rm(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm95.8 32.6L272 480l-32-136 32-56h-96l32 56-32 136-47.8-191.4C56.9 292 0 350.3 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-72.1-56.9-130.4-128.2-133.8z"},child:[]}]})(t)}function n1(t){return Xe({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function _h(t){return Xe({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}const Ube=()=>{const[t,e]=S.useState(null);S.useEffect(()=>{(async()=>{const s=await XW();if(s.length>0){const a=s.find(d=>d.type==="special"),l=s.find(d=>d.type==="attention"),u=a||l;u&&(sessionStorage.getItem(`seen_alert_${u.id}`)||e(u))}})()},[]);const n=()=>{t&&(sessionStorage.setItem(`seen_alert_${t.id}`,"true"),e(null))};if(!t)return null;const r=t.type==="special";return m.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm animate-fade-in p-4",children:m.jsx("div",{className:`bg-white dark:bg-slate-800 rounded-3xl shadow-2xl max-w-md w-full overflow-hidden transform transition-all scale-100 animate-bounce-in border-t-8 ${r?"border-red-500":"border-orange-500"}`,children:m.jsxs("div",{className:"p-8 flex flex-col items-center text-center",children:[m.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center mb-6 ${r?"bg-red-100 text-red-500":"bg-orange-100 text-orange-500"}`,children:m.jsx(l2,{className:"text-4xl animate-pulse"})}),m.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:r?"THNG BO C BIT":"CH "}),m.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200 mb-4",children:t.title}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8 leading-relaxed",children:t.message}),m.jsx("button",{onClick:n,className:`px-8 py-3 rounded-xl font-bold text-white shadow-lg hover:shadow-xl hover:scale-105 transition-all ${r?"bg-gradient-to-r from-red-500 to-pink-600":"bg-gradient-to-r from-orange-400 to-yellow-500"}`,children:" Hiu"})]})})})};var bk=function(t,e){return bk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},bk(t,e)};function aK(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");bk(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var r1=function(){return r1=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},r1.apply(this,arguments)};function Up(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function oK(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(s=(i<3?a(s):i>3?a(e,n,s):a(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function lK(t,e){return function(n,r){e(n,r,t)}}function cK(t,e,n,r,i,s){function a(C){if(C!==void 0&&typeof C!="function")throw new TypeError("Function expected");return C}for(var l=r.kind,u=l==="getter"?"get":l==="setter"?"set":"value",d=!e&&t?r.static?t:t.prototype:null,h=e||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),p,y=!1,v=n.length-1;v>=0;v--){var w={};for(var _ in r)w[_]=_==="access"?{}:r[_];for(var _ in r.access)w.access[_]=r.access[_];w.addInitializer=function(C){if(y)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(C||null))};var E=(0,n[v])(l==="accessor"?{get:h.get,set:h.set}:h[u],w);if(l==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(p=a(E.get))&&(h.get=p),(p=a(E.set))&&(h.set=p),(p=a(E.init))&&i.unshift(p)}else(p=a(E))&&(l==="field"?i.unshift(p):h[u]=p)}d&&Object.defineProperty(d,r.name,h),y=!0}function uK(t,e,n){for(var r=arguments.length>2,i=0;i<e.length;i++)n=r?e[i].call(t,n):e[i].call(t);return r?n:void 0}function dK(t){return typeof t=="symbol"?t:"".concat(t)}function hK(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function fK(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function qe(t,e,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function l(h){try{d(r.next(h))}catch(p){a(p)}}function u(h){try{d(r.throw(h))}catch(p){a(p)}}function d(h){h.done?s(h.value):i(h.value).then(l,u)}d((r=r.apply(t,e||[])).next())})}function mK(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(d){return function(h){return u([d,h])}}function u(d){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(s=d[0]&2?i.return:d[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,d[1])).done)return s;switch(i=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){n.label=d[1];break}if(d[0]===6&&n.label<s[1]){n.label=s[1],s=d;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(d);break}s[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(h){d=[6,h],i=0}finally{r=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var c2=Object.create?(function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]});function pK(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&c2(e,t,n)}function i1(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function aj(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){a={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s}function gK(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(aj(arguments[e]));return t}function yK(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],a=0,l=s.length;a<l;a++,i++)r[i]=s[a];return r}function vK(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function cp(t){return this instanceof cp?(this.v=t,this):new cp(t)}function bK(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(v){return function(w){return Promise.resolve(w).then(v,p)}}function l(v,w){r[v]&&(i[v]=function(_){return new Promise(function(E,C){s.push([v,_,E,C])>1||u(v,_)})},w&&(i[v]=w(i[v])))}function u(v,w){try{d(r[v](w))}catch(_){y(s[0][3],_)}}function d(v){v.value instanceof cp?Promise.resolve(v.value.v).then(h,p):y(s[0][2],v)}function h(v){u("next",v)}function p(v){u("throw",v)}function y(v,w){v(w),s.shift(),s.length&&u(s[0][0],s[0][1])}}function wK(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(a){return(n=!n)?{value:cp(t[i](a)),done:!1}:s?s(a):a}:s}}function xK(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof i1=="function"?i1(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(a){return new Promise(function(l,u){a=t[s](a),i(l,u,a.done,a.value)})}}function i(s,a,l,u){Promise.resolve(u).then(function(d){s({value:d,done:l})},a)}}function _K(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var Bbe=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},wk=function(t){return wk=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},wk(t)};function EK(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=wk(t),r=0;r<n.length;r++)n[r]!=="default"&&c2(e,t,n[r]);return Bbe(e,t),e}function TK(t){return t&&t.__esModule?t:{default:t}}function SK(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function CK(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}function AK(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function NK(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var zbe=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function kK(t){function e(s){t.error=t.hasError?new zbe(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var n,r=0;function i(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(i);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(s).then(i,function(a){return e(a),i()})}else r|=1}catch(a){e(a)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function IK(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,s,a){return r?e?".jsx":".js":i&&(!s||!a)?n:i+s+"."+a.toLowerCase()+"js"}):t}const $be={__extends:aK,__assign:r1,__rest:Up,__decorate:oK,__param:lK,__esDecorate:cK,__runInitializers:uK,__propKey:dK,__setFunctionName:hK,__metadata:fK,__awaiter:qe,__generator:mK,__createBinding:c2,__exportStar:pK,__values:i1,__read:aj,__spread:gK,__spreadArrays:yK,__spreadArray:vK,__await:cp,__asyncGenerator:bK,__asyncDelegator:wK,__asyncValues:xK,__makeTemplateObject:_K,__importStar:EK,__importDefault:TK,__classPrivateFieldGet:SK,__classPrivateFieldSet:CK,__classPrivateFieldIn:AK,__addDisposableResource:NK,__disposeResources:kK,__rewriteRelativeImportExtension:IK},Fbe=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:NK,get __assign(){return r1},__asyncDelegator:wK,__asyncGenerator:bK,__asyncValues:xK,__await:cp,__awaiter:qe,__classPrivateFieldGet:SK,__classPrivateFieldIn:AK,__classPrivateFieldSet:CK,__createBinding:c2,__decorate:oK,__disposeResources:kK,__esDecorate:cK,__exportStar:pK,__extends:aK,__generator:mK,__importDefault:TK,__importStar:EK,__makeTemplateObject:_K,__metadata:fK,__param:lK,__propKey:dK,__read:aj,__rest:Up,__rewriteRelativeImportExtension:IK,__runInitializers:uK,__setFunctionName:hK,__spread:gK,__spreadArray:vK,__spreadArrays:yK,__values:i1,default:$be},Symbol.toStringTag,{value:"Module"})),Hbe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class oj extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class qbe extends oj{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class a7 extends oj{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class o7 extends oj{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var xk;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(xk||(xk={}));class Gbe{constructor(e,{headers:n={},customFetch:r,region:i=xk.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=Hbe(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return qe(this,arguments,void 0,function*(n,r={}){var i;let s,a;try{const{headers:l,method:u,body:d,signal:h,timeout:p}=r;let y={},{region:v}=r;v||(v=this.region);const w=new URL(`${this.url}/${n}`);v&&v!=="any"&&(y["x-region"]=v,w.searchParams.set("forceFunctionRegion",v));let _;d&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",_=d):typeof d=="string"?(y["Content-Type"]="text/plain",_=d):typeof FormData<"u"&&d instanceof FormData?_=d:(y["Content-Type"]="application/json",_=JSON.stringify(d)):_=d;let E=h;p&&(a=new AbortController,s=setTimeout(()=>a.abort(),p),h?(E=a.signal,h.addEventListener("abort",()=>a.abort())):E=a.signal);const C=yield this.fetch(w.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),l),body:_,signal:E}).catch(D=>{throw new qbe(D)}),N=C.headers.get("x-relay-error");if(N&&N==="true")throw new a7(C);if(!C.ok)throw new o7(C);let O=((i=C.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),R;return O==="application/json"?R=yield C.json():O==="application/octet-stream"||O==="application/pdf"?R=yield C.blob():O==="text/event-stream"?R=C:O==="multipart/form-data"?R=yield C.formData():R=yield C.text(),{data:R,error:null,response:C}}catch(l){return{data:null,error:l,response:l instanceof o7||l instanceof a7?l.context:void 0}}finally{s&&clearTimeout(s)}})}}var Yi={};const Bp=xre(Fbe);var ow={},lw={},cw={},uw={},dw={},hw={},l7;function OK(){if(l7)return hw;l7=1,Object.defineProperty(hw,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return hw.default=t,hw}var c7;function jK(){if(c7)return dw;c7=1,Object.defineProperty(dw,"__esModule",{value:!0});const e=Bp.__importDefault(OK());class n{constructor(i){var s,a;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(s=i.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=i.signal,this.isMaybeSingle=(a=i.isMaybeSingle)!==null&&a!==void 0?a:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,s){return this.headers=new Headers(this.headers),this.headers.set(i,s),this}then(i,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var d,h,p,y;let v=null,w=null,_=null,E=u.status,C=u.statusText;if(u.ok){if(this.method!=="HEAD"){const D=await u.text();D===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?w=D:w=JSON.parse(D))}const O=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),R=(p=u.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");O&&R&&R.length>1&&(_=parseInt(R[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(v={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,_=null,E=406,C="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const O=await u.text();try{v=JSON.parse(O),Array.isArray(v)&&u.status===404&&(w=[],v=null,E=200,C="OK")}catch{u.status===404&&O===""?(E=204,C="No Content"):v={message:O}}if(v&&this.isMaybeSingle&&(!((y=v==null?void 0:v.details)===null||y===void 0)&&y.includes("0 rows"))&&(v=null,E=200,C="OK"),v&&this.shouldThrowOnError)throw new e.default(v)}return{error:v,data:w,count:_,status:E,statusText:C}});return this.shouldThrowOnError||(l=l.catch(u=>{var d,h,p,y,v,w;let _="";const E=u==null?void 0:u.cause;if(E){const C=(d=E==null?void 0:E.message)!==null&&d!==void 0?d:"",N=(h=E==null?void 0:E.code)!==null&&h!==void 0?h:"";_=`${(p=u==null?void 0:u.name)!==null&&p!==void 0?p:"FetchError"}: ${u==null?void 0:u.message}`,_+=`

Caused by: ${(y=E==null?void 0:E.name)!==null&&y!==void 0?y:"Error"}: ${C}`,N&&(_+=` (${N})`),E!=null&&E.stack&&(_+=`
${E.stack}`)}else _=(v=u==null?void 0:u.stack)!==null&&v!==void 0?v:"";return{error:{message:`${(w=u==null?void 0:u.name)!==null&&w!==void 0?w:"FetchError"}: ${u==null?void 0:u.message}`,details:_,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(i,s)}returns(){return this}overrideTypes(){return this}}return dw.default=n,dw}var u7;function PK(){if(u7)return uw;u7=1,Object.defineProperty(uw,"__esModule",{value:!0});const e=Bp.__importDefault(jK());class n extends e.default{select(i){let s=!1;const a=(i??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:a,foreignTable:l,referencedTable:u=l}={}){const d=u?`${u}.order`:"order",h=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${h?`${h},`:""}${i}.${s?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:a=s}={}){const l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this}range(i,s,{foreignTable:a,referencedTable:l=a}={}){const u=typeof l>"u"?"offset":`${l}.offset`,d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${i}`),this.url.searchParams.set(d,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:a=!1,buffers:l=!1,wal:u=!1,format:d="text"}={}){var h;const p=[i?"analyze":null,s?"verbose":null,a?"settings":null,l?"buffers":null,u?"wal":null].filter(Boolean).join("|"),y=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${y}"; options=${p};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return uw.default=n,uw}var d7;function lj(){if(d7)return cw;d7=1,Object.defineProperty(cw,"__esModule",{value:!0});const e=Bp.__importDefault(PK()),n=new RegExp("[,()]");class r extends e.default{eq(s,a){return this.url.searchParams.append(s,`eq.${a}`),this}neq(s,a){return this.url.searchParams.append(s,`neq.${a}`),this}gt(s,a){return this.url.searchParams.append(s,`gt.${a}`),this}gte(s,a){return this.url.searchParams.append(s,`gte.${a}`),this}lt(s,a){return this.url.searchParams.append(s,`lt.${a}`),this}lte(s,a){return this.url.searchParams.append(s,`lte.${a}`),this}like(s,a){return this.url.searchParams.append(s,`like.${a}`),this}likeAllOf(s,a){return this.url.searchParams.append(s,`like(all).{${a.join(",")}}`),this}likeAnyOf(s,a){return this.url.searchParams.append(s,`like(any).{${a.join(",")}}`),this}ilike(s,a){return this.url.searchParams.append(s,`ilike.${a}`),this}ilikeAllOf(s,a){return this.url.searchParams.append(s,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(s,a){return this.url.searchParams.append(s,`ilike(any).{${a.join(",")}}`),this}regexMatch(s,a){return this.url.searchParams.append(s,`match.${a}`),this}regexIMatch(s,a){return this.url.searchParams.append(s,`imatch.${a}`),this}is(s,a){return this.url.searchParams.append(s,`is.${a}`),this}isDistinct(s,a){return this.url.searchParams.append(s,`isdistinct.${a}`),this}in(s,a){const l=Array.from(new Set(a)).map(u=>typeof u=="string"&&n.test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cs.{${a.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(a)}`),this}containedBy(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cd.{${a.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(a)}`),this}rangeGt(s,a){return this.url.searchParams.append(s,`sr.${a}`),this}rangeGte(s,a){return this.url.searchParams.append(s,`nxl.${a}`),this}rangeLt(s,a){return this.url.searchParams.append(s,`sl.${a}`),this}rangeLte(s,a){return this.url.searchParams.append(s,`nxr.${a}`),this}rangeAdjacent(s,a){return this.url.searchParams.append(s,`adj.${a}`),this}overlaps(s,a){return typeof a=="string"?this.url.searchParams.append(s,`ov.${a}`):this.url.searchParams.append(s,`ov.{${a.join(",")}}`),this}textSearch(s,a,{config:l,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const h=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${d}fts${h}.${a}`),this}match(s){return Object.entries(s).forEach(([a,l])=>{this.url.searchParams.append(a,`eq.${l}`)}),this}not(s,a,l){return this.url.searchParams.append(s,`not.${a}.${l}`),this}or(s,{foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${s})`),this}filter(s,a,l){return this.url.searchParams.append(s,`${a}.${l}`),this}}return cw.default=r,cw}var h7;function RK(){if(h7)return lw;h7=1,Object.defineProperty(lw,"__esModule",{value:!0});const e=Bp.__importDefault(lj());class n{constructor(i,{headers:s={},schema:a,fetch:l}){this.url=i,this.headers=new Headers(s),this.schema=a,this.fetch=l}select(i,s){const{head:a=!1,count:l}=s??{},u=a?"HEAD":"GET";let d=!1;const h=(i??"*").split("").map(p=>/\s/.test(p)&&!d?"":(p==='"'&&(d=!d),p)).join("");return this.url.searchParams.set("select",h),l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:a=!0}={}){var l;const u="POST";if(s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(d.length>0){const h=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:a=!1,count:l,defaultToNull:u=!0}={}){var d;const h="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((y,v)=>y.concat(Object.keys(v)),[]);if(p.length>0){const y=[...new Set(p)].map(v=>`"${v}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(i,{count:s}={}){var a;const l="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:i}={}){var s;const a="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return lw.default=n,lw}var f7;function Wbe(){if(f7)return ow;f7=1,Object.defineProperty(ow,"__esModule",{value:!0});const t=Bp,e=t.__importDefault(RK()),n=t.__importDefault(lj());class r{constructor(s,{headers:a={},schema:l,fetch:u}={}){this.url=s,this.headers=new Headers(a),this.schemaName=l,this.fetch=u}from(s){if(!s||typeof s!="string"||s.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const a=new URL(`${this.url}/${s}`);return new e.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new r(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,a={},{head:l=!1,get:u=!1,count:d}={}){var h;let p;const y=new URL(`${this.url}/rpc/${s}`);let v;l||u?(p=l?"HEAD":"GET",Object.entries(a).filter(([_,E])=>E!==void 0).map(([_,E])=>[_,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([_,E])=>{y.searchParams.append(_,E)})):(p="POST",v=a);const w=new Headers(this.headers);return d&&w.set("Prefer",`count=${d}`),new n.default({method:p,url:y,headers:w,schema:this.schemaName,body:v,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return ow.default=r,ow}var m7;function Kbe(){if(m7)return Yi;m7=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.PostgrestError=Yi.PostgrestBuilder=Yi.PostgrestTransformBuilder=Yi.PostgrestFilterBuilder=Yi.PostgrestQueryBuilder=Yi.PostgrestClient=void 0;const t=Bp,e=t.__importDefault(Wbe());Yi.PostgrestClient=e.default;const n=t.__importDefault(RK());Yi.PostgrestQueryBuilder=n.default;const r=t.__importDefault(lj());Yi.PostgrestFilterBuilder=r.default;const i=t.__importDefault(PK());Yi.PostgrestTransformBuilder=i.default;const s=t.__importDefault(jK());Yi.PostgrestBuilder=s.default;const a=t.__importDefault(OK());return Yi.PostgrestError=a.default,Yi.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:s.default,PostgrestError:a.default},Yi}var DK=Kbe();const MK=va(DK),Ybe=v$({__proto__:null,default:MK},[DK]),{PostgrestClient:Xbe,PostgrestQueryBuilder:DVe,PostgrestFilterBuilder:MVe,PostgrestTransformBuilder:LVe,PostgrestBuilder:VVe,PostgrestError:UVe}=MK||Ybe;class Qbe{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Jbe="2.86.0",Zbe=`realtime-js/${Jbe}`,LK="1.0.0",ewe="2.0.0",p7=LK,_k=1e4,twe=1e3,nwe=100;var sh;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(sh||(sh={}));var ri;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ri||(ri={}));var vo;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(vo||(vo={}));var Ek;(function(t){t.websocket="websocket"})(Ek||(Ek={}));var ah;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ah||(ah={}));class rwe{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},a=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,n,r){var i,s;const a=e.topic,l=(i=e.ref)!==null&&i!==void 0?i:"",u=(s=e.join_ref)!==null&&s!==void 0?s:"",d=e.payload.event,h=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},p=Object.keys(h).length===0?"":JSON.stringify(h);if(u.length>255)throw new Error(`joinRef length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`userEvent length ${d.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`metadata length ${p.length} exceeds maximum of 255`);const y=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+l.length+a.length+d.length+p.length,v=new ArrayBuffer(this.HEADER_LENGTH+y);let w=new DataView(v),_=0;w.setUint8(_++,this.KINDS.userBroadcastPush),w.setUint8(_++,u.length),w.setUint8(_++,l.length),w.setUint8(_++,a.length),w.setUint8(_++,d.length),w.setUint8(_++,p.length),w.setUint8(_++,n),Array.from(u,C=>w.setUint8(_++,C.charCodeAt(0))),Array.from(l,C=>w.setUint8(_++,C.charCodeAt(0))),Array.from(a,C=>w.setUint8(_++,C.charCodeAt(0))),Array.from(d,C=>w.setUint8(_++,C.charCodeAt(0))),Array.from(p,C=>w.setUint8(_++,C.charCodeAt(0)));var E=new Uint8Array(v.byteLength+r.byteLength);return E.set(new Uint8Array(v),0),E.set(new Uint8Array(r),v.byteLength),E.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,s,a,l,u]=r;return n({join_ref:i,ref:s,topic:a,event:l,payload:u})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2),a=n.getUint8(3),l=n.getUint8(4);let u=this.HEADER_LENGTH+4;const d=r.decode(e.slice(u,u+i));u=u+i;const h=r.decode(e.slice(u,u+s));u=u+s;const p=r.decode(e.slice(u,u+a));u=u+a;const y=e.slice(u,e.byteLength),v=l===this.JSON_ENCODING?JSON.parse(r.decode(y)):y,w={type:this.BROADCAST_EVENT,event:h,payload:v};return a>0&&(w.meta=JSON.parse(p)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:w}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}let VK=class{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Rn;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Rn||(Rn={}));const g7=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,a)=>(s[a]=iwe(a,t,e,i),s),{}):{}},iwe=(t,e,n,r)=>{const i=e.find(l=>l.name===t),s=i==null?void 0:i.type,a=n[t];return s&&!r.includes(s)?UK(s,a):Tk(a)},UK=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return lwe(e,n)}switch(t){case Rn.bool:return swe(e);case Rn.float4:case Rn.float8:case Rn.int2:case Rn.int4:case Rn.int8:case Rn.numeric:case Rn.oid:return awe(e);case Rn.json:case Rn.jsonb:return owe(e);case Rn.timestamp:return cwe(e);case Rn.abstime:case Rn.date:case Rn.daterange:case Rn.int4range:case Rn.int8range:case Rn.money:case Rn.reltime:case Rn.text:case Rn.time:case Rn.timestamptz:case Rn.timetz:case Rn.tsrange:case Rn.tstzrange:return Tk(e);default:return Tk(e)}},Tk=t=>t,swe=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},awe=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},owe=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},lwe=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const a=t.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(l=>UK(e,l))}return t},cwe=t=>typeof t=="string"?t.replace(" ","T"):t,BK=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class ZS{constructor(e,n,r={},i=_k){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var y7;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(y7||(y7={}));class P0{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=P0.syncState(this.state,i,s,a),this.pendingDiffs.forEach(u=>{this.state=P0.syncDiff(this.state,u,s,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=P0.syncDiff(this.state,i,s,a),l())}),this.onJoin((i,s,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:a})}),this.onLeave((i,s,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),a=this.transformState(n),l={},u={};return this.map(s,(d,h)=>{a[d]||(u[d]=h)}),this.map(a,(d,h)=>{const p=s[d];if(p){const y=h.map(E=>E.presence_ref),v=p.map(E=>E.presence_ref),w=h.filter(E=>v.indexOf(E.presence_ref)<0),_=p.filter(E=>y.indexOf(E.presence_ref)<0);w.length>0&&(l[d]=w),_.length>0&&(u[d]=_)}else l[d]=h}),this.syncDiff(s,{joins:l,leaves:u},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(l,u)=>{var d;const h=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(u),h.length>0){const p=e[l].map(v=>v.presence_ref),y=h.filter(v=>p.indexOf(v.presence_ref)<0);e[l].unshift(...y)}r(l,h,u)}),this.map(a,(l,u)=>{let d=e[l];if(!d)return;const h=u.map(p=>p.presence_ref);d=d.filter(p=>h.indexOf(p.presence_ref)<0),e[l]=d,i(l,d,u),d.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var v7;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(v7||(v7={}));var R0;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(R0||(R0={}));var Ql;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ql||(Ql={}));class cj{constructor(e,n={config:{}},r){var i,s;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=ri.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new ZS(this,vo.join,this.params,this.timeout),this.rejoinTimer=new VK(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ri.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ri.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ri.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ri.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ri.errored,this.rejoinTimer.scheduleTimeout())}),this._on(vo.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new P0(this),this.broadcastEndpointURL=BK(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==ri.closed){const{config:{broadcast:a,presence:l,private:u}}=this.params,d=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(v=>v.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[R0.PRESENCE]&&this.bindings[R0.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,p={},y={broadcast:a,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:d,private:u};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(v=>e==null?void 0:e(Ql.CHANNEL_ERROR,v)),this._onClose(()=>e==null?void 0:e(Ql.CLOSED)),this.updateJoinPayload(Object.assign({config:y},p)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:v})=>{var w;if(this.socket.setAuth(),v===void 0){e==null||e(Ql.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,E=(w=_==null?void 0:_.length)!==null&&w!==void 0?w:0,C=[];for(let N=0;N<E;N++){const O=_[N],{filter:{event:R,schema:D,table:P,filter:A}}=O,k=v&&v[N];if(k&&k.event===R&&k.schema===D&&k.table===P&&k.filter===A)C.push(Object.assign(Object.assign({},O),{id:k.id}));else{this.unsubscribe(),this.state=ri.errored,e==null||e(Ql.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(Ql.SUBSCRIBED);return}}).receive("error",v=>{this.state=ri.errored,e==null||e(Ql.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ql.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===ri.joined&&e===R0.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(l.status===202)return{success:!0};let u=l.statusText;try{const d=await l.json();u=d.error||d.message||u}catch{}return Promise.reject(new Error(u))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:a}=e,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,l,u;const d=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&s("ok"),d.receive("ok",()=>s("ok")),d.receive("error",()=>s("error")),d.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ri.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(vo.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new ZS(this,vo.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ri.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new ZS(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>nwe){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const a=e.toLocaleLowerCase(),{close:l,error:u,leave:d,join:h}=vo;if(r&&[l,u,d,h].indexOf(a)>=0&&r!==this._joinRef())return;let y=this._onMessage(a,n,r);if(n&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(v=>{var w,_,E;return((w=v.filter)===null||w===void 0?void 0:w.event)==="*"||((E=(_=v.filter)===null||_===void 0?void 0:_.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===a}).map(v=>v.callback(y,r)):(s=this.bindings[a])===null||s===void 0||s.filter(v=>{var w,_,E,C,N,O;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in v){const R=v.id,D=(w=v.filter)===null||w===void 0?void 0:w.event;return R&&((_=n.ids)===null||_===void 0?void 0:_.includes(R))&&(D==="*"||(D==null?void 0:D.toLocaleLowerCase())===((E=n.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const R=(N=(C=v==null?void 0:v.filter)===null||C===void 0?void 0:C.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return R==="*"||R===((O=n==null?void 0:n.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===a}).map(v=>{if(typeof y=="object"&&"ids"in y){const w=y.data,{schema:_,table:E,commit_timestamp:C,type:N,errors:O}=w;y=Object.assign(Object.assign({},{schema:_,table:E,commit_timestamp:C,eventType:N,new:{},old:{},errors:O}),this._getPayloadRecords(w))}v.callback(y,r)})}_isClosed(){return this.state===ri.closed}_isJoined(){return this.state===ri.joined}_isJoining(){return this.state===ri.joining}_isLeaving(){return this.state===ri.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&cj.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(vo.close,{},e)}_onError(e){this._on(vo.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ri.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=g7(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=g7(e.columns,e.old_record)),n}}const eC=()=>{},fw={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},uwe=[1e3,2e3,5e3,1e4],dwe=1e4,hwe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fwe{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_k,this.transport=null,this.heartbeatIntervalMs=fw.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=eC,this.ref=0,this.reconnectTimer=null,this.vsn=p7,this.logger=eC,this.conn=null,this.sendBuffer=[],this.serializer=new rwe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Ek.websocket}`,this.httpEndpoint=BK(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Qbe.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case sh.connecting:return ah.Connecting;case sh.open:return ah.Open;case sh.closing:return ah.Closing;default:return ah.Closed}}isConnected(){return this.connectionState()===ah.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new cj(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,a=()=>{this.encode(e,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(twe,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},fw.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:a}=n,l=a?`(${a})`:"",u=s.status||"";this.log("receive",`${u} ${r} ${i} ${l}`.trim(),s),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(i,s,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===sh.open||this.conn.readyState===sh.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(vo.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([hwe],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:Zbe};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(vo.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new VK(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},fw.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,a,l,u,d,h,p,y,v;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:_k,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:fw.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:eC,this.vsn=(u=e==null?void 0:e.vsn)!==null&&u!==void 0?u:p7,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=e==null?void 0:e.reconnectAfterMs)!==null&&d!==void 0?d:(w=>uwe[w-1]||dwe),this.vsn){case LK:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:((w,_)=>_(JSON.stringify(w))),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:((w,_)=>_(JSON.parse(w)));break;case ewe:this.encode=(y=e==null?void 0:e.encode)!==null&&y!==void 0?y:this.serializer.encode.bind(this.serializer),this.decode=(v=e==null?void 0:e.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class u2 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function or(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class mwe extends u2{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Sk extends u2{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const uj=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),pwe=()=>Response,Ck=t=>{if(Array.isArray(t))return t.map(n=>Ck(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=Ck(r)}),e},gwe=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ywe=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),tC=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},vwe=(t,e,n)=>qe(void 0,void 0,void 0,function*(){const r=yield pwe();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{const s=t.status||500,a=(i==null?void 0:i.statusCode)||s+"";e(new mwe(tC(i),s,a))}).catch(i=>{e(new Sk(tC(i),i))}):e(new Sk(tC(t),t))}),bwe=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(gwe(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),n))};function tv(t,e,n,r,i,s){return qe(this,void 0,void 0,function*(){return new Promise((a,l)=>{t(n,bwe(e,r,i,s)).then(u=>{if(!u.ok)throw u;return r!=null&&r.noResolveJson?u:u.json()}).then(u=>a(u)).catch(u=>vwe(u,l,r))})})}function sy(t,e,n,r){return qe(this,void 0,void 0,function*(){return tv(t,"GET",e,n,r)})}function go(t,e,n,r,i){return qe(this,void 0,void 0,function*(){return tv(t,"POST",e,r,i,n)})}function Ak(t,e,n,r,i){return qe(this,void 0,void 0,function*(){return tv(t,"PUT",e,r,i,n)})}function wwe(t,e,n,r){return qe(this,void 0,void 0,function*(){return tv(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function dj(t,e,n,r,i){return qe(this,void 0,void 0,function*(){return tv(t,"DELETE",e,r,i,n)})}class xwe{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return qe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(or(e))return{data:null,error:e};throw e}})}}var zK;class _we{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[zK]="BlobDownloadBuilder",this.promise=null}asStream(){return new xwe(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return qe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(or(e))return{data:null,error:e};throw e}})}}zK=Symbol.toStringTag;const Ewe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},b7={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Twe{constructor(e,n={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=uj(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,i){return qe(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},b7),i);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const u=a.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),u&&s.append("metadata",this.encodeMetadata(u)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.has("cacheControl")||s.append("cacheControl",a.cacheControl),u&&!s.has("metadata")&&s.append("metadata",this.encodeMetadata(u))):(s=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,u&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(u))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!a.duplex&&(a.duplex="half")),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const d=this._removeEmptyFolders(n),h=this._getFinalPath(d),p=yield(e=="PUT"?Ak:go)(this.fetch,`${this.url}/object/${h}`,s,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:d,id:p.Id,fullPath:p.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(or(s))return{data:null,error:s};throw s}})}upload(e,n,r){return qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return qe(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",n);try{let u;const d=Object.assign({upsert:b7.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",d.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",d.cacheControl)):(u=r,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType);const p=yield Ak(this.fetch,l.toString(),u,{headers:h});return{data:{path:s,fullPath:p.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(or(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(e,n){return qe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield go(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(this.url+s.url),l=a.searchParams.get("token");if(!l)throw new u2("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}update(e,n,r){return qe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return qe(this,void 0,void 0,function*(){try{return{data:yield go(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(or(i))return{data:null,error:i};throw i}})}copy(e,n,r){return qe(this,void 0,void 0,function*(){try{return{data:{path:(yield go(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(or(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return qe(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield go(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(or(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return qe(this,void 0,void 0,function*(){try{const i=yield go(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(or(i))return{data:null,error:i};throw i}})}download(e,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=s?`?${s}`:"",l=this._getFinalPath(e),u=()=>sy(this.fetch,`${this.url}/${i}/${l}${a}`,{headers:this.headers,noResolveJson:!0});return new _we(u,this.shouldThrowOnError)}info(e){return qe(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield sy(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Ck(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}exists(e){return qe(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield wwe(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r)&&r instanceof Sk){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});u!==""&&i.push(u);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${d}`)}}}remove(e){return qe(this,void 0,void 0,function*(){try{return{data:yield dj(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(or(n))return{data:null,error:n};throw n}})}list(e,n,r){return qe(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Ewe),n),{prefix:e||""});return{data:yield go(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(or(i))return{data:null,error:i};throw i}})}listV2(e,n){return qe(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield go(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const $K="2.86.0",FK={"X-Client-Info":`storage-js/${$K}`};class Swe{constructor(e,n={},r,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},FK),n),this.fetch=uj(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return qe(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield sy(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(or(n))return{data:null,error:n};throw n}})}getBucket(e){return qe(this,void 0,void 0,function*(){try{return{data:yield sy(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(or(n))return{data:null,error:n};throw n}})}createBucket(e){return qe(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield go(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(or(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return qe(this,void 0,void 0,function*(){try{return{data:yield Ak(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(or(r))return{data:null,error:r};throw r}})}emptyBucket(e){return qe(this,void 0,void 0,function*(){try{return{data:yield go(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(or(n))return{data:null,error:n};throw n}})}deleteBucket(e){return qe(this,void 0,void 0,function*(){try{return{data:yield dj(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(or(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var ay=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Cwe(t,e,n){const r=new URL(e,t);if(n)for(const[i,s]of Object.entries(n))s!==void 0&&r.searchParams.set(i,s);return r.toString()}async function Awe(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Nwe(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:s,headers:a}){const l=Cwe(t.baseUrl,r,i),u=await Awe(t.auth),d=await e(l,{method:n,headers:{...s?{"Content-Type":"application/json"}:{},...u,...a},body:s?JSON.stringify(s):void 0}),h=await d.text(),p=(d.headers.get("content-type")||"").includes("application/json"),y=p&&h?JSON.parse(h):h;if(!d.ok){const v=p?y:void 0,w=v==null?void 0:v.error;throw new ay((w==null?void 0:w.message)??`Request failed with status ${d.status}`,{status:d.status,icebergType:w==null?void 0:w.type,icebergCode:w==null?void 0:w.code,details:v})}return{status:d.status,headers:d.headers,data:y}}}}function mw(t){return t.join("")}var kwe=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:mw(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${mw(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${mw(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${mw(t.namespace)}`}),!0}catch(e){if(e instanceof ay&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof ay&&n.status===409)return;throw n}}};function Yf(t){return t.join("")}var Iwe=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Yf(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Yf(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Yf(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Yf(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Yf(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Yf(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof ay&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof ay&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},Owe=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Nwe({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new kwe(this.client,e),this.tableOps=new Iwe(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class jwe{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},FK),n),this.fetch=uj(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return qe(this,void 0,void 0,function*(){try{return{data:yield go(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(or(n))return{data:null,error:n};throw n}})}listBuckets(e){return qe(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield sy(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(or(n))return{data:null,error:n};throw n}})}deleteBucket(e){return qe(this,void 0,void 0,function*(){try{return{data:yield dj(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(or(n))return{data:null,error:n};throw n}})}from(e){if(!ywe(e))throw new u2("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new Owe({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>qe(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const hj={"X-Client-Info":`storage-js/${$K}`,"Content-Type":"application/json"};class HK extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function aa(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class nC extends HK{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Pwe extends HK{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var w7;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(w7||(w7={}));const fj=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Rwe=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},x7=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Dwe=(t,e,n)=>qe(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const i=t.status||500,s=t;if(typeof s.json=="function")s.json().then(a=>{const l=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||i+"";e(new nC(x7(a),i,l))}).catch(()=>{const a=i+"",l=s.statusText||`HTTP ${i} error`;e(new nC(l,i,a))});else{const a=i+"",l=s.statusText||`HTTP ${i} error`;e(new nC(l,i,a))}}else e(new Pwe(x7(t),t))}),Mwe=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(Rwe(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n)):i};function Lwe(t,e,n,r,i,s){return qe(this,void 0,void 0,function*(){return new Promise((a,l)=>{t(n,Mwe(e,r,i,s)).then(u=>{if(!u.ok)throw u;if(r!=null&&r.noResolveJson)return u;const d=u.headers.get("content-type");return!d||!d.includes("application/json")?{}:u.json()}).then(u=>a(u)).catch(u=>Dwe(u,l,r))})})}function oa(t,e,n,r,i){return qe(this,void 0,void 0,function*(){return Lwe(t,"POST",e,r,i,n)})}class Vwe{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hj),n),this.fetch=fj(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return qe(this,void 0,void 0,function*(){try{return{data:(yield oa(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(aa(n))return{data:null,error:n};throw n}})}getIndex(e,n){return qe(this,void 0,void 0,function*(){try{return{data:yield oa(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(aa(r))return{data:null,error:r};throw r}})}listIndexes(e){return qe(this,void 0,void 0,function*(){try{return{data:yield oa(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(aa(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return qe(this,void 0,void 0,function*(){try{return{data:(yield oa(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(aa(r))return{data:null,error:r};throw r}})}}class Uwe{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hj),n),this.fetch=fj(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return qe(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield oa(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(aa(n))return{data:null,error:n};throw n}})}getVectors(e){return qe(this,void 0,void 0,function*(){try{return{data:yield oa(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(aa(n))return{data:null,error:n};throw n}})}listVectors(e){return qe(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield oa(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(aa(n))return{data:null,error:n};throw n}})}queryVectors(e){return qe(this,void 0,void 0,function*(){try{return{data:yield oa(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(aa(n))return{data:null,error:n};throw n}})}deleteVectors(e){return qe(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield oa(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(aa(n))return{data:null,error:n};throw n}})}}class Bwe{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},hj),n),this.fetch=fj(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return qe(this,void 0,void 0,function*(){try{return{data:(yield oa(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(aa(n))return{data:null,error:n};throw n}})}getBucket(e){return qe(this,void 0,void 0,function*(){try{return{data:yield oa(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(aa(n))return{data:null,error:n};throw n}})}listBuckets(){return qe(this,arguments,void 0,function*(e={}){try{return{data:yield oa(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(aa(n))return{data:null,error:n};throw n}})}deleteBucket(e){return qe(this,void 0,void 0,function*(){try{return{data:(yield oa(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(aa(n))return{data:null,error:n};throw n}})}}class zwe extends Bwe{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new $we(this.url,this.headers,e,this.fetch)}createBucket(e){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return qe(this,void 0,void 0,function*(){return n.createBucket.call(this,e)})}getBucket(e){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return qe(this,void 0,void 0,function*(){return n.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return qe(this,arguments,void 0,function*(n={}){return e.listBuckets.call(this,n)})}deleteBucket(e){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return qe(this,void 0,void 0,function*(){return n.deleteBucket.call(this,e)})}}class $we extends Vwe{constructor(e,n,r,i){super(e,n,i),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return qe(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return qe(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return qe(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return qe(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Fwe(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Fwe extends Uwe{constructor(e,n,r,i,s){super(e,n,s),this.vectorBucketName=r,this.indexName=i}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return qe(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return qe(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return qe(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return qe(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return qe(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Hwe extends Swe{constructor(e,n={},r,i){super(e,n,r,i)}from(e){return new Twe(this.url,this.headers,e,this.fetch)}get vectors(){return new zwe(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new jwe(this.url+"/iceberg",this.headers,this.fetch)}}const qwe="2.86.0";let m0="";typeof Deno<"u"?m0="deno":typeof document<"u"?m0="web":typeof navigator<"u"&&navigator.product==="ReactNative"?m0="react-native":m0="node";const Gwe={"X-Client-Info":`supabase-js-${m0}/${qwe}`},Wwe={headers:Gwe},Kwe={schema:"public"},Ywe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Xwe={},Qwe=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Jwe=()=>Headers,Zwe=(t,e,n)=>{const r=Qwe(n),i=Jwe();return async(s,a)=>{var l;const u=(l=await e())!==null&&l!==void 0?l:t;let d=new i(a==null?void 0:a.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${u}`),r(s,Object.assign(Object.assign({},a),{headers:d}))}};function exe(t){return t.endsWith("/")?t:t+"/"}function txe(t,e){var n,r;const{db:i,auth:s,realtime:a,global:l}=t,{db:u,auth:d,realtime:h,global:p}=e,y={db:Object.assign(Object.assign({},u),i),auth:Object.assign(Object.assign({},d),s),realtime:Object.assign(Object.assign({},h),a),storage:{},global:Object.assign(Object.assign(Object.assign({},p),l),{headers:Object.assign(Object.assign({},(n=p==null?void 0:p.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?y.accessToken=t.accessToken:delete y.accessToken,y}function nxe(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(exe(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const qK="2.86.0",lm=30*1e3,Nk=3,rC=Nk*lm,rxe="http://localhost:9999",ixe="supabase.auth.token",sxe={"X-Client-Info":`gotrue-js/${qK}`},kk="X-Supabase-Api-Version",GK={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},axe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,oxe=600*1e3;class oy extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function tt(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class lxe extends oy{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function cxe(t){return tt(t)&&t.name==="AuthApiError"}class oh extends oy{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class pd extends oy{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class ra extends pd{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function uxe(t){return tt(t)&&t.name==="AuthSessionMissingError"}class Xf extends pd{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pw extends pd{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class gw extends pd{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function dxe(t){return tt(t)&&t.name==="AuthImplicitGrantRedirectError"}class _7 extends pd{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ik extends pd{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function iC(t){return tt(t)&&t.name==="AuthRetryableFetchError"}class E7 extends pd{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Ok extends pd{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const s1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),T7=` 	
\r=`.split(""),hxe=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<T7.length;e+=1)t[T7[e].charCodeAt(0)]=-2;for(let e=0;e<s1.length;e+=1)t[s1[e].charCodeAt(0)]=e;return t})();function S7(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(s1[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(s1[r]),e.queuedBits-=6}}function WK(t,e,n){const r=hxe[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function C7(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=a=>{pxe(a,r,n)};for(let a=0;a<t.length;a+=1)WK(t.charCodeAt(a),i,s);return e.join("")}function fxe(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function mxe(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}fxe(r,e)}}function pxe(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Dm(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)WK(t.charCodeAt(i),n,r);return new Uint8Array(e)}function gxe(t){const e=[];return mxe(t,n=>e.push(n)),new Uint8Array(e)}function mh(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>S7(i,n,r)),S7(null,n,r),e.join("")}function yxe(t){return Math.round(Date.now()/1e3)+t}function vxe(){return Symbol("auth-callback")}const Ri=()=>typeof window<"u"&&typeof document<"u",Yd={tested:!1,writable:!1},KK=()=>{if(!Ri())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Yd.tested)return Yd.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Yd.tested=!0,Yd.writable=!0}catch{Yd.tested=!0,Yd.writable=!1}return Yd.writable};function bxe(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const YK=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),wxe=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",cm=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Xd=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},_u=async(t,e)=>{await t.removeItem(e)};class d2{constructor(){this.promise=new d2.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}d2.promiseConstructor=Promise;function sC(t){const e=t.split(".");if(e.length!==3)throw new Ok("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!axe.test(e[r]))throw new Ok("JWT not in base64url format");return{header:JSON.parse(C7(e[0])),payload:JSON.parse(C7(e[1])),signature:Dm(e[2]),raw:{header:e[0],payload:e[1]}}}async function xxe(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function _xe(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await t(s);if(!e(s,null,a)){r(a);return}}catch(a){if(!e(s,a)){i(a);return}}})()})}function Exe(t){return("0"+t.toString(16)).substr(-2)}function Txe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,Exe).join("")}async function Sxe(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function Cxe(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Sxe(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Qf(t,e,n=!1){const r=Txe();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await cm(t,`${e}-code-verifier`,i);const s=await Cxe(r);return[s,r===s?"plain":"s256"]}const Axe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Nxe(t){const e=t.headers.get(kk);if(!e||!e.match(Axe))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function kxe(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Ixe(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Oxe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Jf(t){if(!Oxe.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function aC(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function jxe(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function A7(t){return JSON.parse(JSON.stringify(t))}const th=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Pxe=[502,503,504];async function N7(t){var e;if(!wxe(t))throw new Ik(th(t),0);if(Pxe.includes(t.status))throw new Ik(th(t),t.status);let n;try{n=await t.json()}catch(s){throw new oh(th(s),s)}let r;const i=Nxe(t);if(i&&i.getTime()>=GK["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new E7(th(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new ra}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new E7(th(n),t.status,n.weak_password.reasons);throw new lxe(th(n),t.status||500,r)}const Rxe=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function ct(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[kk]||(s[kk]=GK["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",u=await Dxe(t,e,n+l,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(u):{data:Object.assign({},u),error:null}}async function Dxe(t,e,n,r,i,s){const a=Rxe(e,r,i,s);let l;try{l=await t(n,Object.assign({},a))}catch(u){throw console.error(u),new Ik(th(u),0)}if(l.ok||await N7(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(u){await N7(u)}}function mo(t){var e;let n=null;Vxe(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=yxe(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function k7(t){const e=mo(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ou(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Mxe(t){return{data:t,error:null}}function Lxe(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,a=Up(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},u=Object.assign({},a);return{data:{properties:l,user:u},error:null}}function I7(t){return t}function Vxe(t){return t.access_token&&t.refresh_token&&t.expires_in}const oC=["global","local","others"];class Uxe{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=YK(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=oC[0]){if(oC.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${oC.join(", ")}`);try{return await ct(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(tt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ct(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ou})}catch(r){if(tt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Up(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await ct(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Lxe,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(tt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ct(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ou})}catch(n){if(tt(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,a,l,u;try{const d={nextPage:null,lastPage:0,total:0},h=await ct(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:I7});if(h.error)throw h.error;const p=await h.json(),y=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,v=(u=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return v.length>0&&(v.forEach(w=>{const _=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(w.split(";")[1].split("=")[1]);d[`${E}Page`]=_}),d.total=parseInt(y)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(tt(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Jf(e);try{return await ct(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ou})}catch(n){if(tt(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Jf(e);try{return await ct(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Ou})}catch(r){if(tt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Jf(e);try{return await ct(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ou})}catch(r){if(tt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Jf(e.userId);try{const{data:n,error:r}=await ct(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(tt(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Jf(e.userId),Jf(e.id);try{return{data:await ct(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(tt(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,s,a,l,u;try{const d={nextPage:null,lastPage:0,total:0},h=await ct(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:I7});if(h.error)throw h.error;const p=await h.json(),y=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,v=(u=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return v.length>0&&(v.forEach(w=>{const _=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(w.split(";")[1].split("=")[1]);d[`${E}Page`]=_}),d.total=parseInt(y)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(tt(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(e){try{return await ct(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(tt(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ct(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(tt(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ct(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(tt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await ct(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(tt(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ct(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(tt(n))return{data:null,error:n};throw n}}}function O7(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Zf={debug:!!(globalThis&&KK()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class XK extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Bxe extends XK{}async function zxe(t,e,n){Zf.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Zf.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Zf.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Zf.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Zf.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Bxe(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Zf.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function $xe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function QK(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Fxe(t){return parseInt(t,16)}function Hxe(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function qxe(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:a,notBefore:l,requestId:u,resources:d,scheme:h,uri:p,version:y}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const v=QK(t.address),w=h?`${h}://${r}`:r,_=t.statement?`${t.statement}
`:"",E=`${w} wants you to sign in with your Ethereum account:
${v}

${_}`;let C=`URI: ${p}
Version: ${y}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${s.toISOString()}`;if(i&&(C+=`
Expiration Time: ${i.toISOString()}`),l&&(C+=`
Not Before: ${l.toISOString()}`),u&&(C+=`
Request ID: ${u}`),d){let N=`
Resources:`;for(const O of d){if(!O||typeof O!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${O}`);N+=`
- ${O}`}C+=N}return`${E}
${C}`}class Hr extends Error{constructor({message:e,code:n,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class a1 extends Hr{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function Gxe({error:t,options:e}){var n,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Hr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Hr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Hr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Hr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Hr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Hr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Hr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Hr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(JK(a)){if(s.rp.id!==a)return new Hr({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Hr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Hr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Hr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Hr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Wxe({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Hr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Hr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(JK(r)){if(n.rpId!==r)return new Hr({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Hr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Hr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Hr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Kxe{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Yxe=new Kxe;function Xxe(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=Up(t,["challenge","user","excludeCredentials"]),s=Dm(e).buffer,a=Object.assign(Object.assign({},n),{id:Dm(n.id).buffer}),l=Object.assign(Object.assign({},i),{challenge:s,user:a});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let u=0;u<r.length;u++){const d=r[u];l.excludeCredentials[u]=Object.assign(Object.assign({},d),{id:Dm(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function Qxe(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Up(t,["challenge","allowCredentials"]),i=Dm(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const l=n[a];s.allowCredentials[a]=Object.assign(Object.assign({},l),{id:Dm(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return s}function Jxe(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:mh(new Uint8Array(t.response.attestationObject)),clientDataJSON:mh(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Zxe(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:mh(new Uint8Array(i.authenticatorData)),clientDataJSON:mh(new Uint8Array(i.clientDataJSON)),signature:mh(new Uint8Array(i.signature)),userHandle:i.userHandle?mh(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function JK(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function j7(){var t,e;return!!(Ri()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function e1e(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new a1("Browser returned unexpected credential type",e)}:{data:null,error:new a1("Empty credential response",e)}}catch(e){return{data:null,error:Gxe({error:e,options:t})}}}async function t1e(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new a1("Browser returned unexpected credential type",e)}:{data:null,error:new a1("Empty credential response",e)}}catch(e){return{data:null,error:Wxe({error:e,options:t})}}}const n1e={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},r1e={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function o1(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const s in i){const a=i[s];if(a!==void 0)if(Array.isArray(a))r[s]=a;else if(n(a))r[s]=a;else if(e(a)){const l=r[s];e(l)?r[s]=o1(l,a):r[s]=o1(a)}else r[s]=a}return r}function i1e(t,e){return o1(n1e,t,e||{})}function s1e(t,e){return o1(r1e,t,e||{})}class a1e{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},s){try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:l};const u=i??Yxe.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:d}=a.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${r}`),d.displayName||(d.displayName=d.name)}switch(a.webauthn.type){case"create":{const d=i1e(a.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:h,error:p}=await e1e({publicKey:d,signal:u});return h?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}case"request":{const d=s1e(a.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:h,error:p}=await t1e(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:d,signal:u}));return h?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}}}catch(a){return tt(a)?{data:null,error:a}:{data:null,error:new oh("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new oy("rpId is required for WebAuthn authentication")};try{if(!j7())return{data:null,error:new oh("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!a)return{data:null,error:l};const{webauthn:u}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:u.type,rpId:n,rpOrigins:r,credential_response:u.credential_response}})}catch(a){return tt(a)?{data:null,error:a}:{data:null,error:new oh("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new oy("rpId is required for WebAuthn registration")};try{if(!j7())return{data:null,error:new oh("Browser does not support WebAuthn",null)};const{data:a,error:l}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(h=>{var p;return(p=h.data)===null||p===void 0?void 0:p.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===e&&y.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:l};const{data:u,error:d}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return u?this._verify({factorId:a.id,challengeId:u.challengeId,webauthn:{rpId:n,rpOrigins:r,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:d}}catch(a){return tt(a)?{data:null,error:a}:{data:null,error:new oh("Unexpected error in register",a)}}}}$xe();const o1e={url:rxe,storageKey:ixe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:sxe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function P7(t,e,n){return await n()}const em={};class ly{get jwks(){var e,n;return(n=(e=em[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){em[this.storageKey]=Object.assign(Object.assign({},em[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=em[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){em[this.storageKey]=Object.assign(Object.assign({},em[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},o1e),e);if(this.storageKey=s.storageKey,this.instanceID=(n=ly.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,ly.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Ri()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Uxe({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=YK(s.fetch),this.lock=s.lock||P7,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:Ri()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=zxe:this.lock=P7,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new a1e(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:KK()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=O7(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=O7(this.memoryStorage)),Ri()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${qK}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Ri()&&(n=bxe(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Ri()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),dxe(s)){const u=(e=s.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return tt(n)?this._returnResult({error:n}):this._returnResult({error:new oh("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:mo}),{data:a,error:l}=s;if(l||!a)return this._returnResult({data:{user:null,session:null},error:l});const u=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(s){if(tt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:h,password:p,options:y}=e;let v=null,w=null;this.flowType==="pkce"&&([v,w]=await Qf(this.storage,this.storageKey)),s=await ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:h,password:p,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:v,code_challenge_method:w},xform:mo})}else if("phone"in e){const{phone:h,password:p,options:y}=e;s=await ct(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},channel:(i=y==null?void 0:y.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:mo})}else throw new pw("You must provide either an email or phone number and a password");const{data:a,error:l}=s;if(l||!a)return this._returnResult({data:{user:null,session:null},error:l});const u=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(s){if(tt(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:a,options:l}=e;n=await ct(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:k7})}else if("phone"in e){const{phone:s,password:a,options:l}=e;n=await ct(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:k7})}else throw new pw("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const s=new Xf;return this._returnResult({data:{user:null,session:null},error:s})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(tt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,s,a,l,u,d,h,p,y;let v,w;if("message"in e)v=e.message,w=e.signature;else{const{chain:_,wallet:E,statement:C,options:N}=e;let O;if(Ri())if(typeof E=="object")O=E;else{const M=window;if("ethereum"in M&&typeof M.ethereum=="object"&&"request"in M.ethereum&&typeof M.ethereum.request=="function")O=M.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=E}const R=new URL((n=N==null?void 0:N.url)!==null&&n!==void 0?n:window.location.href),D=await O.request({method:"eth_requestAccounts"}).then(M=>M).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=QK(D[0]);let A=(r=N==null?void 0:N.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!A){const M=await O.request({method:"eth_chainId"});A=Fxe(M)}const k={domain:R.host,address:P,statement:C,uri:R.href,version:"1",chainId:A,nonce:(i=N==null?void 0:N.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(s=N==null?void 0:N.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(l=N==null?void 0:N.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(u=N==null?void 0:N.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(d=N==null?void 0:N.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(h=N==null?void 0:N.signInWithEthereum)===null||h===void 0?void 0:h.resources};v=qxe(k),w=await O.request({method:"personal_sign",params:[Hxe(v),P]})}try{const{data:_,error:E}=await ct(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:w},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:mo});if(E)throw E;if(!_||!_.session||!_.user){const C=new Xf;return this._returnResult({data:{user:null,session:null},error:C})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:E})}catch(_){if(tt(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async signInWithSolana(e){var n,r,i,s,a,l,u,d,h,p,y,v;let w,_;if("message"in e)w=e.message,_=e.signature;else{const{chain:E,wallet:C,statement:N,options:O}=e;let R;if(Ri())if(typeof C=="object")R=C;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))R=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(O!=null&&O.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=C}const D=new URL((n=O==null?void 0:O.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in R&&R.signIn){const P=await R.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O==null?void 0:O.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),N?{statement:N}:null));let A;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")A=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)A=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in A&&"signature"in A&&(typeof A.signedMessage=="string"||A.signedMessage instanceof Uint8Array)&&A.signature instanceof Uint8Array)w=typeof A.signedMessage=="string"?A.signedMessage:new TextDecoder().decode(A.signedMessage),_=A.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in R)||typeof R.signMessage!="function"||!("publicKey"in R)||typeof R!="object"||!R.publicKey||!("toBase58"in R.publicKey)||typeof R.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${D.host} wants you to sign in with your Solana account:`,R.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(i=(r=O==null?void 0:O.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=O==null?void 0:O.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((a=O==null?void 0:O.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((l=O==null?void 0:O.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((u=O==null?void 0:O.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((d=O==null?void 0:O.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((p=(h=O==null?void 0:O.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||p===void 0)&&p.length?["Resources",...O.signInWithSolana.resources.map(A=>`- ${A}`)]:[]].join(`
`);const P=await R.signMessage(new TextEncoder().encode(w),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=P}}try{const{data:E,error:C}=await ct(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:mh(_)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:mo});if(C)throw C;if(!E||!E.session||!E.user){const N=new Xf;return this._returnResult({data:{user:null,session:null},error:N})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:C})}catch(E){if(tt(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(e){const n=await Xd(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:a}=await ct(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:mo});if(await _u(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){const l=new Xf;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:a})}catch(s){if(tt(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:a}=e,l=await ct(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:mo}),{data:u,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!u||!u.session||!u.user){const h=new Xf;return this._returnResult({data:{user:null,session:null},error:h})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:d})}catch(n){if(tt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,s,a;try{if("email"in e){const{email:l,options:u}=e;let d=null,h=null;this.flowType==="pkce"&&([d,h]=await Qf(this.storage,this.storageKey));const{error:p}=await ct(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=u==null?void 0:u.data)!==null&&n!==void 0?n:{},create_user:(r=u==null?void 0:u.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in e){const{phone:l,options:u}=e,{data:d,error:h}=await ct(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=u==null?void 0:u.data)!==null&&i!==void 0?i:{},create_user:(s=u==null?void 0:u.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(a=u==null?void 0:u.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h})}throw new pw("You must provide either an email or phone number.")}catch(l){if(tt(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await ct(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:mo});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const u=a.session,d=a.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:d,session:u},error:null})}catch(i){if(tt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,s,a;try{let l=null,u=null;this.flowType==="pkce"&&([l,u]=await Qf(this.storage,this.storageKey));const d=await ct(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:Mxe});return!((s=d.data)===null||s===void 0)&&s.url&&Ri()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(l){if(tt(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new ra;const{error:i}=await ct(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(tt(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:a}=await ct(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:a,error:l}=await ct(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l})}throw new pw("You must provide either an email or phone number and a type")}catch(n){if(tt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Xd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<rC:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await Xd(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=aC()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=jxe(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ct(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ou}):await this._useSession(async n=>{var r,i,s;const{data:a,error:l}=n;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ra}:await ct(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Ou})})}catch(n){if(tt(n))return uxe(n)&&(await this._removeSession(),await _u(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new ra;const a=i.session;let l=null,u=null;this.flowType==="pkce"&&e.email!=null&&([l,u]=await Qf(this.storage,this.storageKey));const{data:d,error:h}=await ct(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:u}),jwt:a.access_token,xform:Ou});if(h)throw h;return a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(tt(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ra;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:a}=sC(e.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:l,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:u}=await this._getUser(e.access_token);if(u)throw u;s={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if(tt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:l}=n;if(l)throw l;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new ra;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(tt(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Ri())throw new gw("No browser detected.");if(e.error||e.error_description||e.error_code)throw new gw(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new _7("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new gw("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new _7("No code detected.");const{data:N,error:O}=await this._exchangeCodeForSession(e.code);if(O)throw O;const R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:a,expires_in:l,expires_at:u,token_type:d}=e;if(!s||!l||!a||!d)throw new gw("No session defined in URL");const h=Math.round(Date.now()/1e3),p=parseInt(l);let y=h+p;u&&(y=parseInt(u));const v=y-h;v*1e3<=lm&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${p}s`);const w=y-p;h-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,y,h):h-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,y,h);const{data:_,error:E}=await this._getUser(s);if(E)throw E;const C={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:p,expires_at:y,refresh_token:a,token_type:d,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:e.type},error:null})}catch(r){if(tt(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Xd(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({error:s});const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(cxe(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return e!=="others"&&(await this._removeSession(),await _u(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=vxe(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Qf(this.storage,this.storageKey,!0));try{return await ct(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(tt(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(tt(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var a,l,u,d,h;const{data:p,error:y}=s;if(y)throw y;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await ct(this.fetch,"GET",v,{headers:this.headers,jwt:(h=(d=p.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return Ri()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(tt(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:a,provider:l,token:u,access_token:d,nonce:h}=e,p=await ct(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:u,access_token:d,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:mo}),{data:y,error:v}=p;return v?this._returnResult({data:{user:null,session:null},error:v}):!y||!y.session||!y.user?this._returnResult({data:{user:null,session:null},error:new Xf}):(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),this._returnResult({data:y,error:v}))}catch(i){if(tt(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)throw a;return await ct(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(tt(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await _xe(async i=>(i>0&&await xxe(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await ct(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:mo})),(i,s)=>{const a=200*Math.pow(2,i);return s&&iC(s)&&Date.now()+a-r<lm})}catch(r){if(this._debug(n,"error",r),tt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Ri()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Xd(this.storage,this.storageKey);if(i&&this.userStorage){let a=await Xd(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await cm(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:aC()}else if(i&&!i.user&&!i.user){const a=await Xd(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await _u(this.storage,this.storageKey+"-user"),await cm(this.storage,this.storageKey,i)):i.user=aC()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<rC;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${rC}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),iC(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(i.access_token);!l&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new ra;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new d2;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new ra;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={data:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(i,"error",s),tt(s)){const a={data:null,error:s};return iC(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(u){s.push(u)}});if(await Promise.all(a),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await cm(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=A7(i);await cm(this.storage,this.storageKey,s)}else{const i=A7(n);await cm(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await _u(this.storage,this.storageKey),await _u(this.storage,this.storageKey+"-code-verifier"),await _u(this.storage,this.storageKey+"-user"),this.userStorage&&await _u(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ri()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),lm);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/lm);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${lm}ms, refresh threshold is ${Nk} ticks`),i<=Nk&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof XK)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ri()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,a]=await Qf(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(l.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?this._returnResult({data:null,error:s}):await ct(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(tt(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:u,error:d}=await ct(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return d?this._returnResult({data:null,error:d}):(e.factorType==="totp"&&u.type==="totp"&&(!((i=u==null?void 0:u.totp)===null||i===void 0)&&i.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(n){if(tt(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Jxe(e.webauthn.credential_response):Zxe(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:u}=await ct(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:u}))})}catch(n){if(tt(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=await ct(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:l}=a;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Xxe(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Qxe(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(tt(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=sC(r.access_token);let a=null;s.aal&&(a=s.aal);let l=a;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const d=s.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await ct(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new ra})})}catch(n){if(tt(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new ra});const a=await ct(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&Ri()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(tt(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new ra});const a=await ct(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return a.data&&a.data.redirect_url&&Ri()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(tt(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await ct(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new ra})})}catch(e){if(tt(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await ct(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ra})})}catch(n){if(tt(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(l=>l.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+oxe>i)return r;const{data:s,error:a}=await ct(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:v,error:w}=await this.getSession();if(w||!v.session)return this._returnResult({data:null,error:w});r=v.session.access_token}const{header:i,payload:s,signature:a,raw:{header:l,payload:u}}=sC(r);n!=null&&n.allowExpired||kxe(s.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!d){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:s,header:i,signature:a},error:null}}const h=Ixe(i.alg),p=await crypto.subtle.importKey("jwk",d,h,!0,["verify"]);if(!await crypto.subtle.verify(h,p,a,gxe(`${l}.${u}`)))throw new Ok("Invalid JWT signature");return{data:{claims:s,header:i,signature:a},error:null}}catch(r){if(tt(r))return this._returnResult({data:null,error:r});throw r}}}ly.nextInstanceID={};const l1e=ly;class c1e extends l1e{constructor(e){super(e)}}class u1e{constructor(e,n,r){var i,s,a;this.supabaseUrl=e,this.supabaseKey=n;const l=nxe(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:Kwe,realtime:Xwe,auth:Object.assign(Object.assign({},Ywe),{storageKey:u}),global:Wwe},h=txe(r??{},d);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=h.global.headers)!==null&&s!==void 0?s:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=Zwe(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&this.accessToken().then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new Xbe(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new Hwe(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new Gbe(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:a,flowType:l,lock:u,debug:d,throwOnError:h},p,y){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new c1e({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),p),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,flowType:l,lock:u,debug:d,throwOnError:h,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new fwe(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const d1e=(t,e,n)=>new u1e(t,e,n);function h1e(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}h1e()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const f1e="https://hykypgxaegmufdothwbv.supabase.co",m1e="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh5a3lwZ3hhZWdtdWZkb3Rod2J2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1NTE3NzMsImV4cCI6MjA3NzEyNzc3M30.Euzl2vfhHrxhgN-tfg2XftMaX9hEiJOorSJq16n2CRY",jk=d1e(f1e,m1e),id=t=>{const e=(t||"").toLowerCase();return e==="hoc_vien"||e==="student"||e==="hoc-vien"?"/ontap/assets/img/avatar1.webp":"/ontap/assets/img/avatar.webp"},p1e=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=i=>{var a;const s=new Image;s.src=(a=i.target)==null?void 0:a.result,s.onload=()=>{let d=s.width,h=s.height;d>h?d>350&&(h*=350/d,d=350):h>350&&(d*=350/h,h=350);const p=document.createElement("canvas");p.width=d,p.height=h;const y=p.getContext("2d");if(!y){n(new Error("Canvas context not available"));return}y.drawImage(s,0,0,d,h),p.toBlob(v=>{v?e(v):n(new Error("WebP conversion failed"))},"image/webp",.6)},s.onerror=l=>n(l)},r.onerror=i=>n(i)}),g1e=async(t,e)=>{try{const n=await p1e(t),i=`avatars/${`${e}_${Date.now()}.webp`}`,{error:s}=await jk.storage.from("avatars").upload(i,n,{cacheControl:"3600",upsert:!0});if(s)throw console.error("Supabase upload error:",s),s;const{data:a}=jk.storage.from("avatars").getPublicUrl(i);return a.publicUrl}catch(n){throw console.error("Error uploading avatar:",n),n}},y1e=async t=>{try{const e=Ct(Pe,"users",t),n=await td(e);if(n.exists()){const r=n.data();return{id:t,email:r.email,full_name:r.fullName||r.full_name||"Ngi dng",role:(()=>{const i=r.role;return i==="teacher"||i==="giao-vien"||i==="giao_vien"?"giao_vien":i==="student"||i==="hoc-vien"||i==="hoc_vien"?"hoc_vien":i==="manager"||i==="quan-ly"||i==="quan_ly"?"quan_ly":i==="leader"||i==="lanh-dao"||i==="lanh_dao"?"lanh_dao":i==="admin"?"admin":"hoc_vien"})(),photoURL:r.photoURL||id(r.role),birthDate:r.birthDate||"",address:r.address||"",class:r.class||"",phoneNumber:r.phoneNumber||"",courseName:r.courseName||"",courseId:r.courseId||""}}return null}catch(e){throw console.error("Error fetching user profile from Firestore:",e),e}},R7=async(t,e,n,r,i,s,a,l)=>{try{let u=n;i==="n tp"&&r?u=`${n} / ${r}`:i==="Thi th"&&(u=`${n} (Thi th)`),await Ph(_t(Pe,"exam_results"),{studentId:t,licenseId:e,score:s,totalQuestions:a,timeTaken:l,completedAt:fl(),type:i,quizTitle:u})}catch(u){console.error("Error saving exam result to Firestore:",u)}},v1e=async()=>{try{const t=$t(_t(Pe,"courses")),e=await Mn(t),n=[];return e.forEach(r=>{const i=r.data();i.name&&n.push({id:r.id,name:i.name})}),n.sort((r,i)=>r.name.localeCompare(i.name))}catch(t){return console.error("Error fetching courses:",t),[]}},b1e=async t=>{try{if(!t||t.length<3)return[];const e=$t(_t(Pe,"users"),an("email",">=",t),an("email","<=",t+""));return(await Mn(e)).docs.map(r=>{const i=r.data();return{id:r.id,email:i.email,full_name:i.fullName||i.full_name||"Ngi dng",role:(()=>{const s=i.role;return s==="teacher"||s==="giao-vien"?"giao_vien":s==="student"||s==="hoc-vien"?"hoc_vien":s==="manager"||s==="quan-ly"?"quan_ly":s==="leader"||s==="lanh-dao"?"lanh_dao":s||"hoc_vien"})(),photoURL:i.photoURL||id(i.role),birthDate:i.birthDate||"",address:i.address||"",class:i.class||"",phoneNumber:i.phoneNumber||"",courseName:i.courseName||"",courseId:i.courseId||""}})}catch(e){return console.error("Error searching users:",e),[]}},w1e=({userProfile:t})=>{const[e,n]=S.useState([]),[r,i]=S.useState(!0);S.useEffect(()=>{s()},[]);const s=async()=>{i(!0);const B=await Qve();n(B),i(!1)},a=B=>!(t.role==="giao_vien"&&(B.type==="special"||B.type==="attention")),l=async B=>{confirm("Bn c chc chn mun XA VNH VIN thng bo ny? Hnh ng ny s g thng bo khi mn hnh ca tt c ngi dng.")&&(await Jve(B)?(alert(" xa thng bo!"),s()):alert("C li xy ra khi xa."))},u=B=>B?new Date(B*1e3).toLocaleString("vi-VN"):"--",[d,h]=S.useState(!1),[p,y]=S.useState(""),[v,w]=S.useState(""),[_,E]=S.useState("system"),[C,N]=S.useState("all"),[O,R]=S.useState([]),[D,P]=S.useState(""),[A,k]=S.useState([]),[M,V]=S.useState(""),[U,z]=S.useState([]),[$,ne]=S.useState(null),[fe,K]=S.useState(""),[W,ee]=S.useState(null),oe=B=>{if(ee(B),y(B.title),w(B.message),E(B.type),N(B.targetType==="all"&&B.targetRoles&&B.targetRoles.length>0?"role":B.targetType),B.targetType==="class"&&P(B.targetName||""),B.targetType,B.targetRoles&&k(B.targetRoles),B.expiryDate){const X=new Date(B.expiryDate.seconds*1e3);X.toISOString().slice(0,16);const G=X.getTimezoneOffset()*6e4,Q=new Date(X.getTime()-G).toISOString().slice(0,16);K(Q)}else K("");h(!0)};S.useEffect(()=>{d&&C==="class"&&v1e().then(R)},[d,C]),S.useEffect(()=>{if(M.length>2&&C==="user"){const B=setTimeout(async()=>{const X=await b1e(M);z(X)},500);return()=>clearTimeout(B)}},[M,C]);const pe=async B=>{if(B.preventDefault(),!p||!v)return alert("Vui lng nhp tiu  v ni dung");if(C==="class"&&!D)return alert("Vui lng chn lp");if(C==="user"&&!$&&!W)return alert("Vui lng chn ngi nhn");if(C==="role"&&A.length===0)return alert("Vui lng chn t nht mt vai tr");try{if(W){const X={title:p,message:v,type:_,expiryDate:fe?new Date(fe):null};C==="role"&&(X.targetRoles=A),await Zve(W.id,X)?(alert(" cp nht thng bo!"),h(!1),ee(null),s()):alert("Li khi cp nht.")}else{let X=null;C==="class"&&(X=D),C==="user"&&(X=$.id),await YW(p,v,_,C,X,t.id,t.full_name,fe?new Date(fe):null,C==="user"&&$?`${$.full_name} (${$.email})`:void 0,C==="role"?A:void 0),alert(" gi thng bo thnh cng!"),h(!1),s()}y(""),w(""),E("system"),k([]),ee(null),K(""),P(""),ne(null),z([]),V("")}catch(X){console.error(X),alert("Li khi x l thng bo")}};return m.jsxs("div",{className:"p-4 md:p-8 animate-fade-in pb-20 max-w-7xl mx-auto",children:[m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl overflow-hidden min-h-[500px] flex flex-col",children:[m.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-slate-700 bg-gradient-to-r from-teal-500 to-emerald-600 text-white flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-3",children:[m.jsx(l2,{})," Qun L Thng Bo H Thng"]}),m.jsx("p",{className:"text-teal-100 mt-1 opacity-90",children:t.role==="giao_vien"?"Bn c th xem tt c v qun l thng bo thng.":"Bn c ton quyn qun l thng bo."})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs("button",{onClick:async()=>{if(confirm(`CNH BO: Hnh ng ny s xa TT C thng bo trong hp th ring ca TT C hc vin.
Ch gi li thng bo chung (Ton h thng).
Bn c chc chn mun dn dp khng?`)){i(!0);try{const{collection:B,getDocs:X,deleteDoc:G,writeBatch:Q,doc:re}=await $n(async()=>{const{collection:Z,getDocs:ke,deleteDoc:Le,writeBatch:ye,doc:ze}=await Promise.resolve().then(()=>rc);return{collection:Z,getDocs:ke,deleteDoc:Le,writeBatch:ye,doc:ze}},void 0),{db:_e}=await $n(async()=>{const{db:Z}=await Promise.resolve().then(()=>KW);return{db:Z}},void 0),Se=await X(B(_e,"users"));let ce=0;for(const Z of Se.docs){const ke=B(_e,"users",Z.id,"notifications"),Le=await X(ke);if(!Le.empty){const ye=Q(_e);Le.docs.forEach(ze=>{ye.delete(ze.ref),ce++}),await ye.commit()}}alert(` dn dp thnh cng ${ce} thng bo rc t hc vin.`)}catch(B){console.error(B),alert("C li xy ra khi dn dp.")}finally{i(!1)}}},className:"bg-red-100 text-red-600 px-4 py-2 rounded-lg font-bold shadow hover:bg-red-200 transition flex items-center gap-2",title:"Xa tt c thng bo trong hp th hc vin (dng khi b li hin th)",children:[m.jsx(sl,{})," Dn dp rc"]}),m.jsxs("button",{onClick:()=>h(!0),className:"bg-white text-teal-600 px-4 py-2 rounded-lg font-bold shadow hover:bg-teal-50 transition flex items-center gap-2",children:[m.jsx(Iu,{})," To mi"]})]})]}),m.jsx("div",{className:"flex-1 p-6 bg-gray-50 dark:bg-slate-900/50 overflow-x-auto",children:r?m.jsx("div",{className:"text-center py-20 text-gray-500",children:"ang ti d liu..."}):m.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow border border-gray-200 dark:border-slate-700 overflow-hidden min-w-[800px]",children:m.jsxs("table",{className:"w-full text-left text-sm",children:[m.jsx("thead",{className:"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-200 font-bold uppercase",children:m.jsxs("tr",{children:[m.jsx("th",{className:"p-4 w-32",children:"i tng"}),m.jsx("th",{className:"p-4 w-32",children:"Loi"}),m.jsx("th",{className:"p-4",children:"Tiu  & Ni dung"}),m.jsx("th",{className:"p-4 w-40",children:"Ngi to"}),m.jsx("th",{className:"p-4 w-48",children:"Ht hn (Marquee)"}),m.jsx("th",{className:"p-4 w-40",children:"Ngy to"}),m.jsx("th",{className:"p-4 w-32 text-center",children:"Hnh ng"})]})}),m.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-700",children:e.length===0?m.jsx("tr",{children:m.jsx("td",{colSpan:7,className:"p-10 text-center text-gray-500 text-base",children:"H thng cha c thng bo no."})}):e.map(B=>{var G,Q;const X=a(B);return m.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors",children:[m.jsxs("td",{className:"p-4 align-top",children:[m.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-bold whitespace-nowrap border
                                                            ${B.targetType==="all"?"bg-purple-100 text-purple-700 border-purple-200":B.targetType==="class"?"bg-indigo-100 text-indigo-700 border-indigo-200":"bg-pink-100 text-pink-700 border-pink-200"}
                                                        `,children:[B.targetType==="all"&&m.jsxs(m.Fragment,{children:[m.jsx(i7,{})," Tt c"]}),B.targetType==="class"&&m.jsxs(m.Fragment,{children:[m.jsx(_h,{})," Lp"]}),B.targetType==="user"&&m.jsxs(m.Fragment,{children:[m.jsx(n1,{})," C nhn"]})]}),B.targetType!=="all"&&m.jsx("div",{className:"text-xs text-gray-500 mt-1 font-mono break-words max-w-[150px]",children:B.targetName?m.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:B.targetName}):B.targetId})]}),m.jsx("td",{className:"p-4 align-top",children:m.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold whitespace-nowrap
                                                            ${B.type==="special"?"bg-red-100 text-red-600":B.type==="attention"?"bg-orange-100 text-orange-600":"bg-blue-100 text-blue-600"}
                                                        `,children:B.type==="special"?"C BIT":B.type==="attention"?"CH ":"Thng"})}),m.jsxs("td",{className:"p-4 align-top",children:[m.jsx("div",{className:"font-bold text-gray-900 dark:text-white mb-1 text-base",children:B.title}),m.jsx("div",{className:"text-gray-600 dark:text-gray-400 line-clamp-2",children:B.message})]}),m.jsxs("td",{className:"p-4 align-top text-gray-700 dark:text-gray-300 font-medium",children:[B.senderName,m.jsx("div",{className:"text-xs text-gray-400 font-normal",children:B.senderId===t.id?"(Bn)":""})]}),m.jsx("td",{className:"p-4 align-top",children:B.type==="special"||B.type==="attention"?m.jsxs("div",{className:"flex items-center gap-1 text-xs font-mono bg-gray-100 dark:bg-slate-900 px-2 py-1 rounded border whitespace-nowrap",children:[m.jsx(wbe,{className:"text-gray-400"}),u((G=B.expiryDate)==null?void 0:G.seconds)]}):m.jsx("span",{className:"text-gray-400 text-xs",children:"--"})}),m.jsx("td",{className:"p-4 align-top text-gray-500 text-xs whitespace-nowrap",children:u((Q=B.createdAt)==null?void 0:Q.seconds)}),m.jsx("td",{className:"p-4 align-top text-center",children:X?m.jsxs("div",{className:"flex items-center justify-center gap-2",children:[m.jsxs("button",{onClick:()=>oe(B),className:"text-blue-500 hover:text-blue-700 p-2 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors flex items-center gap-1",title:"Sa",children:[m.jsx(ec,{size:14})," ",m.jsx("span",{className:"text-xs font-bold",children:"Sa"})]}),m.jsxs("button",{onClick:()=>l(B.id),className:"text-red-500 hover:text-red-700 p-2 bg-red-50 hover:bg-red-100 rounded-lg transition-colors flex items-center gap-1",title:"Xa vnh vin",children:[m.jsx(sl,{size:14})," ",m.jsx("span",{className:"text-xs font-bold",children:"Xa"})]})]}):m.jsx("div",{className:"text-gray-300 flex justify-center p-2 cursor-not-allowed",title:"Bn khng c quyn xa thng bo cp cao ny",children:m.jsx(lbe,{})})})]},B.id)})})]})})})]}),d&&m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 p-4 backdrop-blur-sm",onClick:()=>h(!1),children:m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl overflow-hidden animate-scale-in",onClick:B=>B.stopPropagation(),children:[m.jsxs("div",{className:"p-6 border-b dark:border-slate-700 bg-gray-50 dark:bg-slate-900 flex justify-between items-center",children:[m.jsx("h2",{className:"text-xl font-bold flex items-center gap-2 text-gray-800 dark:text-white",children:W?m.jsxs(m.Fragment,{children:[m.jsx(ec,{className:"text-blue-600"})," Cp nht thng bo"]}):m.jsxs(m.Fragment,{children:[m.jsx(Iu,{className:"text-teal-600"})," To thng bo mi"]})}),m.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),m.jsxs("form",{onSubmit:pe,className:"p-6 space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300",children:"Gi ti:"}),m.jsxs("div",{className:"flex gap-4",children:[m.jsxs("label",{className:`flex items-center gap-2 p-3 rounded-lg border cursor-pointer flex-1 justify-center transition-all ${C==="all"?"bg-purple-50 border-purple-500 text-purple-700 ring-1 ring-purple-500":"border-gray-200 hover:bg-gray-50"}`,children:[m.jsx("input",{type:"radio",name:"target",value:"all",checked:C==="all",onChange:()=>N("all"),className:"hidden"}),m.jsx(i7,{})," Tt c"]}),m.jsxs("label",{className:`flex items-center gap-2 p-3 rounded-lg border cursor-pointer flex-1 justify-center transition-all ${C==="class"?"bg-indigo-50 border-indigo-500 text-indigo-700 ring-1 ring-indigo-500":"border-gray-200 hover:bg-gray-50"}`,children:[m.jsx("input",{type:"radio",name:"target",value:"class",checked:C==="class",onChange:()=>N("class"),className:"hidden"}),m.jsx(_h,{})," Lp hc"]}),m.jsxs("label",{className:`flex items-center gap-2 p-3 rounded-lg border cursor-pointer flex-1 justify-center transition-all ${C==="role"?"bg-orange-50 border-orange-500 text-orange-700 ring-1 ring-orange-500":"border-gray-200 hover:bg-gray-50"}`,children:[m.jsx("input",{type:"radio",name:"target",value:"role",checked:C==="role",onChange:()=>N("role"),className:"hidden"}),m.jsx(_h,{})," Theo Vai tr"]}),m.jsxs("label",{className:`flex items-center gap-2 p-3 rounded-lg border cursor-pointer flex-1 justify-center transition-all ${C==="user"?"bg-pink-50 border-pink-500 text-pink-700 ring-1 ring-pink-500":"border-gray-200 hover:bg-gray-50"}`,children:[m.jsx("input",{type:"radio",name:"target",value:"user",checked:C==="user",onChange:()=>N("user"),className:"hidden"}),m.jsx(n1,{})," C nhn"]})]})]}),C==="class"&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold mb-1",children:"Chn lp:"}),m.jsxs("select",{className:"w-full p-2 border rounded-lg dark:bg-slate-700",value:D,onChange:B=>P(B.target.value),required:!0,children:[m.jsx("option",{value:"",children:"-- Chn lp --"}),O.map(B=>m.jsxs("option",{value:B.name,children:[B.name," -- (",B.id,")"]},B.id))]})]}),C==="role"&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold mb-2",children:"Chn Vai tr:"}),m.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{id:"hoc_vien",label:"Hc vin"},{id:"giao_vien",label:"Gio vin"},{id:"quan_ly",label:"Qun l"},{id:"lanh_dao",label:"Lnh o"},{id:"admin",label:"Admin"}].map(B=>m.jsxs("label",{className:"flex items-center gap-2 p-2 border rounded hover:bg-gray-50 cursor-pointer",children:[m.jsx("input",{type:"checkbox",value:B.id,checked:A.includes(B.id),onChange:X=>{X.target.checked?k([...A,B.id]):k(A.filter(G=>G!==B.id))},className:"w-4 h-4 text-teal-600"}),m.jsx("span",{children:B.label})]},B.id))})]}),C==="user"&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold mb-1",children:"Tm ngi nhn (Email):"}),m.jsx("input",{className:"w-full p-2 border rounded-lg dark:bg-slate-700",placeholder:"Nhp email...",value:M,onChange:B=>V(B.target.value)}),U.length>0&&m.jsx("div",{className:"mt-2 border rounded max-h-40 overflow-y-auto bg-gray-50 dark:bg-slate-900",children:U.map(B=>m.jsxs("div",{onClick:()=>{ne(B),z([]),V(B.email)},className:"p-2 hover:bg-teal-50 cursor-pointer flex justify-between items-center border-b last:border-0",children:[m.jsx("span",{className:"font-medium",children:B.full_name}),m.jsx("span",{className:"text-xs text-gray-500",children:B.email})]},B.id))}),$&&m.jsxs("div",{className:"mt-2 p-2 bg-green-50 text-green-700 text-sm rounded flex items-center gap-2",children:[m.jsx(lp,{}),"  chn: ",m.jsx("b",{children:$.full_name})," (",$.email,")"]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold mb-1",children:"Tiu :"}),m.jsx("input",{className:"w-full p-2 border rounded-lg dark:bg-slate-700",value:p,onChange:B=>y(B.target.value),required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold mb-1",children:"Ni dung:"}),m.jsx("textarea",{className:"w-full p-2 border rounded-lg dark:bg-slate-700 h-24",value:v,onChange:B=>w(B.target.value),required:!0})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold mb-1",children:"Loi thng bo:"}),m.jsxs("select",{className:"w-full p-2 border rounded-lg dark:bg-slate-700",value:_,onChange:B=>E(B.target.value),children:[m.jsx("option",{value:"system",children:"Thng (Xanh)"}),m.jsx("option",{value:"attention",children:"Ch  (Cam)"}),m.jsx("option",{value:"special",children:"c bit ( - Marquee)"})]})]}),(_==="attention"||_==="special")&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold mb-1",children:"Ht hn chy ch (Marquee):"}),m.jsx("input",{type:"datetime-local",className:"w-full p-2 border rounded-lg dark:bg-slate-700",value:fe,onChange:B=>K(B.target.value),required:!0})]})]}),m.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t dark:border-slate-700 mt-6",children:[m.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-5 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition",children:"Hy"}),m.jsx("button",{type:"submit",className:"px-5 py-2 bg-teal-600 hover:bg-teal-700 text-white rounded-lg font-bold shadow-lg shadow-teal-500/30 transition transform hover:-translate-y-0.5",children:W?"Cp nht":"Gi thng bo"})]})]})]})})]})},D7=t=>{let e;const n=new Set,r=(d,h)=>{const p=typeof d=="function"?d(e):d;if(!Object.is(p,e)){const y=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(v=>v(e,y))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>u,subscribe:d=>(n.add(d),()=>n.delete(d))},u=e=t(r,i,l);return l},x1e=(t=>t?D7(t):D7),_1e=t=>t;function E1e(t,e=_1e){const n=ue.useSyncExternalStore(t.subscribe,ue.useCallback(()=>e(t.getState()),[t,e]),ue.useCallback(()=>e(t.getInitialState()),[t,e]));return ue.useDebugValue(n),n}const M7=t=>{const e=x1e(t),n=r=>E1e(e,r);return Object.assign(n,e),n},T1e=(t=>t?M7(t):M7),je={WELCOME:"welcome",LOGIN:"login",DASHBOARD:"dashboard",LICENSE_SELECTION:"license_selection",NAME_INPUT:"name_input",MODE_SELECTION:"mode_selection",SUBJECT_SELECTION:"subject_selection",IN_QUIZ:"in_quiz",IN_ONLINE_EXAM:"in_online_exam",RESULT:"results",EXAM_RESULT:"exam_result",HISTORY:"history",MY_CLASS:"my_class",CLASS_MANAGEMENT:"class_management",REGISTER:"register",ACCOUNT:"account",NOTIFICATION_MGMT:"notification_mgmt",MAILBOX:"mailbox",THI_TRUC_TUYEN:"thi_truc_tuyen",ONLINE_EXAM_MANAGEMENT:"online_exam_management",ANALYTICS:"analytics"},En=T1e(t=>({appState:je.WELCOME,licenses:[],selectedLicense:null,subjects:[],selectedSubject:null,currentQuiz:null,userAnswers:{},score:0,userName:"",userProfile:null,resumeSessionAvailable:!1,isMobileApp:!1,setAppState:e=>t({appState:e}),setLicenses:e=>t({licenses:e}),setSelectedLicense:e=>t({selectedLicense:e}),setSubjects:e=>t({subjects:e}),setSelectedSubject:e=>t({selectedSubject:e}),setCurrentQuiz:e=>t({currentQuiz:e}),setUserAnswers:e=>t({userAnswers:e}),setScore:e=>t({score:e}),setUserName:e=>t({userName:e}),setUserProfile:e=>t({userProfile:e}),setResumeSessionAvailable:e=>t({resumeSessionAvailable:e}),setIsMobileApp:e=>t({isMobileApp:e}),resetQuizState:()=>t({currentQuiz:null,userAnswers:{},score:0})})),L7=({onStart:t,onLoginClick:e,onRegisterClick:n})=>{const{theme:r}=$i();return m.jsx("div",{className:"text-center p-4 animate-slide-in-right",children:m.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8 md:p-12 max-w-2xl mx-auto relative",children:[r==="tri-an"?m.jsx("img",{src:"https://i.postimg.cc/MH9hVp8S/happy-techers-day.jpg",alt:"Icon Chc mng Ngy Nh gio",className:"h-24 w-24 mx-auto mb-4 rounded-full object-cover"}):r==="noel"?m.jsx(qm,{className:"h-24 w-24 mx-auto text-primary mb-4"}):m.jsx(qm,{className:"h-24 w-24 mx-auto text-primary mb-4"}),m.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-foreground mb-2",children:"ng Dng n tp"}),r==="tri-an"&&m.jsx("p",{className:"text-xl font-semibold text-primary mb-4",children:"Phin bn c bit Tri n Thy C"}),r==="noel"&&m.jsx("p",{className:"text-xl font-semibold text-primary mb-4",children:"Cho n Ging Sinh An Lnh"}),m.jsx("p",{className:"text-lg text-muted-foreground mb-4",children:"Cho mng anh/ch  n vi ng dng n tp, n thi chng ch chuyn mn phng tin thy ni a."}),r==="tri-an"&&m.jsx("p",{className:"text-lg text-muted-foreground mb-8 italic",children:'"Nhn ngy Nh gio Vit Nam 20-11, knh chc qu thy c lun mnh khe, hnh phc v thnh cng trong s nghip trng ngi."'}),m.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[m.jsx("button",{onClick:t,className:"w-full sm:w-auto bg-primary text-primary-foreground font-bold text-lg py-4 px-10 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105",children:"Bt u"}),m.jsx("button",{onClick:e,className:"w-full sm:w-auto bg-secondary text-secondary-foreground font-bold text-lg py-4 px-10 rounded-lg hover:bg-secondary/80 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300",children:"ng nhp"})]}),m.jsx("div",{className:"mt-4",children:m.jsx("button",{onClick:n,className:"text-primary hover:underline font-medium",children:"Cha c ti khon? ng k ngay"})})]})})};/*! Capacitor: https://capacitorjs.com/ - MIT License */const S1e=t=>{const e=new Map;e.set("web",{name:"web"});const n=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},r=(s,a)=>{n.platforms.set(s,a)},i=s=>{n.platforms.has(s)&&(n.currentPlatform=n.platforms.get(s))};return n.addPlatform=r,n.setPlatform=i,n},C1e=t=>t.CapacitorPlatforms=S1e(t),ZK=C1e(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});ZK.addPlatform;ZK.setPlatform;var up;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(up||(up={}));let lC=class extends Error{constructor(e,n){super(e),this.message=e,this.code=n}};const A1e=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},N1e=t=>{var e,n,r,i,s;const a=t.CapacitorCustomPlatform||null,l=t.Capacitor||{},u=l.Plugins=l.Plugins||{},d=t.CapacitorPlatforms,h=()=>a!==null?a.name:A1e(t),p=((e=d==null?void 0:d.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||h,y=()=>p()!=="web",v=((n=d==null?void 0:d.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||y,w=A=>{const k=R.get(A);return!!(k!=null&&k.platforms.has(p())||C(A))},_=((r=d==null?void 0:d.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||w,E=A=>{var k;return(k=l.PluginHeaders)===null||k===void 0?void 0:k.find(M=>M.name===A)},C=((i=d==null?void 0:d.currentPlatform)===null||i===void 0?void 0:i.getPluginHeader)||E,N=A=>t.console.error(A),O=(A,k,M)=>Promise.reject(`${M} does not have an implementation of "${k}".`),R=new Map,D=(A,k={})=>{const M=R.get(A);if(M)return console.warn(`Capacitor plugin "${A}" already registered. Cannot register plugins twice.`),M.proxy;const V=p(),U=C(A);let z;const $=async()=>(!z&&V in k?z=typeof k[V]=="function"?z=await k[V]():z=k[V]:a!==null&&!z&&"web"in k&&(z=typeof k.web=="function"?z=await k.web():z=k.web),z),ne=(pe,B)=>{var X,G;if(U){const Q=U==null?void 0:U.methods.find(re=>B===re.name);if(Q)return Q.rtype==="promise"?re=>l.nativePromise(A,B.toString(),re):(re,_e)=>l.nativeCallback(A,B.toString(),re,_e);if(pe)return(X=pe[B])===null||X===void 0?void 0:X.bind(pe)}else{if(pe)return(G=pe[B])===null||G===void 0?void 0:G.bind(pe);throw new lC(`"${A}" plugin is not implemented on ${V}`,up.Unimplemented)}},fe=pe=>{let B;const X=(...G)=>{const Q=$().then(re=>{const _e=ne(re,pe);if(_e){const Se=_e(...G);return B=Se==null?void 0:Se.remove,Se}else throw new lC(`"${A}.${pe}()" is not implemented on ${V}`,up.Unimplemented)});return pe==="addListener"&&(Q.remove=async()=>B()),Q};return X.toString=()=>`${pe.toString()}() { [capacitor code] }`,Object.defineProperty(X,"name",{value:pe,writable:!1,configurable:!1}),X},K=fe("addListener"),W=fe("removeListener"),ee=(pe,B)=>{const X=K({eventName:pe},B),G=async()=>{const re=await X;W({eventName:pe,callbackId:re},B)},Q=new Promise(re=>X.then(()=>re({remove:G})));return Q.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await G()},Q},oe=new Proxy({},{get(pe,B){switch(B){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return U?ee:K;case"removeListener":return W;default:return fe(B)}}});return u[A]=oe,R.set(A,{name:A,proxy:oe,platforms:new Set([...Object.keys(k),...U?[V]:[]])}),oe},P=((s=d==null?void 0:d.currentPlatform)===null||s===void 0?void 0:s.registerPlugin)||D;return l.convertFileSrc||(l.convertFileSrc=A=>A),l.getPlatform=p,l.handleError=N,l.isNativePlatform=v,l.isPluginAvailable=_,l.pluginMethodNoop=O,l.registerPlugin=P,l.Exception=lC,l.DEBUG=!!l.DEBUG,l.isLoggingEnabled=!!l.isLoggingEnabled,l.platform=l.getPlatform(),l.isNative=l.isNativePlatform(),l},k1e=t=>t.Capacitor=N1e(t),l1=k1e(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),I1e=l1.registerPlugin;l1.Plugins;let $Ve=class{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,n){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(n);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i);const s=async()=>this.removeListener(e,n),a=Promise.resolve({remove:s});return Object.defineProperty(a,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await s()}}),a}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n){const r=this.listeners[e];r&&r.forEach(i=>i(n))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new l1.Exception(e,up.Unimplemented)}unavailable(e="not available"){return new l1.Exception(e,up.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const i=r.indexOf(n);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}};var V7;(function(t){t[t.NONE=0]="NONE",t[t.TOUCH_ID=1]="TOUCH_ID",t[t.FACE_ID=2]="FACE_ID",t[t.FINGERPRINT=3]="FINGERPRINT",t[t.FACE_AUTHENTICATION=4]="FACE_AUTHENTICATION",t[t.IRIS_AUTHENTICATION=5]="IRIS_AUTHENTICATION",t[t.MULTIPLE=6]="MULTIPLE"})(V7||(V7={}));var U7;(function(t){t[t.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",t[t.BIOMETRICS_UNAVAILABLE=1]="BIOMETRICS_UNAVAILABLE",t[t.USER_LOCKOUT=2]="USER_LOCKOUT",t[t.BIOMETRICS_NOT_ENROLLED=3]="BIOMETRICS_NOT_ENROLLED",t[t.USER_TEMPORARY_LOCKOUT=4]="USER_TEMPORARY_LOCKOUT",t[t.AUTHENTICATION_FAILED=10]="AUTHENTICATION_FAILED",t[t.APP_CANCEL=11]="APP_CANCEL",t[t.INVALID_CONTEXT=12]="INVALID_CONTEXT",t[t.NOT_INTERACTIVE=13]="NOT_INTERACTIVE",t[t.PASSCODE_NOT_SET=14]="PASSCODE_NOT_SET",t[t.SYSTEM_CANCEL=15]="SYSTEM_CANCEL",t[t.USER_CANCEL=16]="USER_CANCEL",t[t.USER_FALLBACK=17]="USER_FALLBACK"})(U7||(U7={}));const eY=I1e("NativeBiometric",{web:()=>$n(()=>import("./web-3l-X1ifA.js"),[]).then(t=>new t.NativeBiometricWeb)});/*! Capacitor: https://capacitorjs.com/ - MIT License */const O1e=t=>{const e=new Map;e.set("web",{name:"web"});const n=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},r=(s,a)=>{n.platforms.set(s,a)},i=s=>{n.platforms.has(s)&&(n.currentPlatform=n.platforms.get(s))};return n.addPlatform=r,n.setPlatform=i,n},j1e=t=>t.CapacitorPlatforms=O1e(t),tY=j1e(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});tY.addPlatform;tY.setPlatform;var dp;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(dp||(dp={}));class cC extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const P1e=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},R1e=t=>{var e,n,r,i,s;const a=t.CapacitorCustomPlatform||null,l=t.Capacitor||{},u=l.Plugins=l.Plugins||{},d=t.CapacitorPlatforms,h=()=>a!==null?a.name:P1e(t),p=((e=d==null?void 0:d.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||h,y=()=>p()!=="web",v=((n=d==null?void 0:d.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||y,w=A=>{const k=R.get(A);return!!(k!=null&&k.platforms.has(p())||C(A))},_=((r=d==null?void 0:d.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||w,E=A=>{var k;return(k=l.PluginHeaders)===null||k===void 0?void 0:k.find(M=>M.name===A)},C=((i=d==null?void 0:d.currentPlatform)===null||i===void 0?void 0:i.getPluginHeader)||E,N=A=>t.console.error(A),O=(A,k,M)=>Promise.reject(`${M} does not have an implementation of "${k}".`),R=new Map,D=(A,k={})=>{const M=R.get(A);if(M)return console.warn(`Capacitor plugin "${A}" already registered. Cannot register plugins twice.`),M.proxy;const V=p(),U=C(A);let z;const $=async()=>(!z&&V in k?z=typeof k[V]=="function"?z=await k[V]():z=k[V]:a!==null&&!z&&"web"in k&&(z=typeof k.web=="function"?z=await k.web():z=k.web),z),ne=(pe,B)=>{var X,G;if(U){const Q=U==null?void 0:U.methods.find(re=>B===re.name);if(Q)return Q.rtype==="promise"?re=>l.nativePromise(A,B.toString(),re):(re,_e)=>l.nativeCallback(A,B.toString(),re,_e);if(pe)return(X=pe[B])===null||X===void 0?void 0:X.bind(pe)}else{if(pe)return(G=pe[B])===null||G===void 0?void 0:G.bind(pe);throw new cC(`"${A}" plugin is not implemented on ${V}`,dp.Unimplemented)}},fe=pe=>{let B;const X=(...G)=>{const Q=$().then(re=>{const _e=ne(re,pe);if(_e){const Se=_e(...G);return B=Se==null?void 0:Se.remove,Se}else throw new cC(`"${A}.${pe}()" is not implemented on ${V}`,dp.Unimplemented)});return pe==="addListener"&&(Q.remove=async()=>B()),Q};return X.toString=()=>`${pe.toString()}() { [capacitor code] }`,Object.defineProperty(X,"name",{value:pe,writable:!1,configurable:!1}),X},K=fe("addListener"),W=fe("removeListener"),ee=(pe,B)=>{const X=K({eventName:pe},B),G=async()=>{const re=await X;W({eventName:pe,callbackId:re},B)},Q=new Promise(re=>X.then(()=>re({remove:G})));return Q.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await G()},Q},oe=new Proxy({},{get(pe,B){switch(B){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return U?ee:K;case"removeListener":return W;default:return fe(B)}}});return u[A]=oe,R.set(A,{name:A,proxy:oe,platforms:new Set([...Object.keys(k),...U?[V]:[]])}),oe},P=((s=d==null?void 0:d.currentPlatform)===null||s===void 0?void 0:s.registerPlugin)||D;return l.convertFileSrc||(l.convertFileSrc=A=>A),l.getPlatform=p,l.handleError=N,l.isNativePlatform=v,l.isPluginAvailable=_,l.pluginMethodNoop=O,l.registerPlugin=P,l.Exception=cC,l.DEBUG=!!l.DEBUG,l.isLoggingEnabled=!!l.isLoggingEnabled,l.platform=l.getPlatform(),l.isNative=l.isNativePlatform(),l},D1e=t=>t.Capacitor=R1e(t),hp=D1e(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),mj=hp.registerPlugin;hp.Plugins;class nY{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s),r&&this.sendRetainedArgumentsForEvent(e);const a=async()=>this.removeListener(e,n);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const i=this.listeners[e];if(!i){if(r){let s=this.retainedEventArguments[e];s||(s=[]),s.push(n),this.retainedEventArguments[e]=s}return}i.forEach(s=>s(n))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new hp.Exception(e,dp.Unimplemented)}unavailable(e="not available"){return new hp.Exception(e,dp.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const i=r.indexOf(n);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const B7=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),z7=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class M1e extends nY{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,s]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=z7(i).trim(),s=z7(s).trim(),n[i]=s}),n}async setCookie(e){try{const n=B7(e.key),r=B7(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),a=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${i}; path=${s}; ${a};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}mj("CapacitorCookies",{web:()=>new M1e});const L1e=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>n(i),r.readAsDataURL(t)}),V1e=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(i=>i.toLocaleLowerCase()).reduce((i,s,a)=>(i[s]=t[e[a]],i),{})},U1e=(t,e=!0)=>t?Object.entries(t).reduce((r,i)=>{const[s,a]=i;let l,u;return Array.isArray(a)?(u="",a.forEach(d=>{l=e?encodeURIComponent(d):d,u+=`${s}=${l}&`}),u.slice(0,-1)):(l=e?encodeURIComponent(a):a,u=`${s}=${l}`),`${r}&${u}`},"").substr(1):null,B1e=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),i=V1e(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(i.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[a,l]of Object.entries(t.data||{}))s.set(a,l);n.body=s.toString()}else if(i.includes("multipart/form-data")||t.data instanceof FormData){const s=new FormData;if(t.data instanceof FormData)t.data.forEach((l,u)=>{s.append(u,l)});else for(const l of Object.keys(t.data))s.append(l,t.data[l]);n.body=s;const a=new Headers(n.headers);a.delete("content-type"),n.headers=a}else(i.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class z1e extends nY{async request(e){const n=B1e(e,e.webFetchExtra),r=U1e(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,s=await fetch(i,n),a=s.headers.get("content-type")||"";let{responseType:l="text"}=s.ok?e:{};a.includes("application/json")&&(l="json");let u,d;switch(l){case"arraybuffer":case"blob":d=await s.blob(),u=await L1e(d);break;case"json":u=await s.json();break;case"document":case"text":default:u=await s.text()}const h={};return s.headers.forEach((p,y)=>{h[y]=p}),{data:u,headers:h,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}mj("CapacitorHttp",{web:()=>new z1e});const pj=mj("Preferences",{web:()=>$n(()=>import("./web-qdTClghC.js"),[]).then(t=>new t.PreferencesWeb)}),gj="biometric_credentials",$1e=async()=>{if(!hp.isNativePlatform())return!1;try{return(await eY.isAvailable()).isAvailable}catch{return!1}},F1e=async(t,e)=>{try{await pj.set({key:gj,value:JSON.stringify({email:t,pass:e})}),console.log("Credentials saved for biometric login.")}catch(n){console.error("Error saving credentials:",n)}},H1e=async()=>{const{value:t}=await pj.get({key:gj});return!!t},q1e=async()=>{try{if(!await $1e())throw new Error("Biometric not available");await eY.verifyIdentity({reason:"Chm vn tay  ng nhp",title:"ng nhp",subtitle:"S dng vn tay ca bn",description:"Xc thc  truy cp ti khon  lu"});const{value:n}=await pj.get({key:gj});return n?JSON.parse(n):null}catch(t){return console.error("Biometric verification failed:",t),null}},G1e=async t=>{const e=t.trim();return e.includes("@")?e:`${e}@gmail.com`},W1e=({onBack:t})=>{const[e,n]=S.useState(""),[r,i]=S.useState(""),[s,a]=S.useState(!1),[l,u]=S.useState(null),[d,h]=S.useState(null),[p,y]=S.useState(!1),[v,w]=S.useState(""),[_,E]=S.useState(!1),[C,N]=S.useState(!1);S.useEffect(()=>{O()},[]);const O=async()=>{const A=await H1e();N(A)},R=async()=>{a(!0),u(null);const A=await q1e();if(A)try{await zS(Ji,ek),await ZN(Ji,A.email,A.pass)}catch(k){a(!1),console.error("Bio login failed:",k),u("ng nhp vn tay tht bi (phin ht hn hoc i mt khu).")}else a(!1)},D=async A=>{A.preventDefault(),a(!0),u(null);try{const k=await G1e(e);_?await zS(Ji,ek):await zS(Ji,xO),await ZN(Ji,k,r),_&&await F1e(k,r)}catch(k){console.error("Login failed:",k),k.code==="auth/invalid-email"?u("Tn ng nhp hoc email khng hp l."):k.code==="auth/user-not-found"||k.code==="auth/wrong-password"||k.code==="auth/invalid-credential"?u("Ti khon hoc mt khu khng chnh xc."):u("ng nhp tht bi. Vui lng th li.")}finally{Ji.currentUser||a(!1)}},P=async A=>{if(A.preventDefault(),!!v){a(!0),u(null),h(null);try{await Ume(Ji,v),h(` gi email khi phc n ${v}. Vui lng kim tra hp th (c mc Spam).`),w("")}catch(k){console.error("Reset password failed:",k),k.code==="auth/user-not-found"?u("Email ny cha c ng k."):k.code==="auth/invalid-email"?u("Email khng hp l."):u("Gi email tht bi. Vui lng th li sau.")}finally{a(!1)}}};return p?m.jsxs("div",{className:"w-full max-w-md mx-auto p-4 animate-slide-in-right",children:[m.jsxs("div",{className:"relative text-center mb-10",children:[m.jsx("button",{onClick:()=>{y(!1),u(null),h(null)},className:"absolute left-0 top-1/2 -translate-y-1/2 bg-card/50 p-3 rounded-full shadow-md hover:bg-muted transition-all duration-300",children:m.jsx(kh,{className:"h-10 w-10 text-primary"})}),m.jsx("div",{className:"h-20 w-20 mx-auto text-primary mb-4 flex items-center justify-center bg-primary/10 rounded-full",children:m.jsx(t1,{className:"text-4xl"})}),m.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Khi phc mt khu"}),m.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Nhp email ca bn  nhn lin kt t li mt khu."})]}),m.jsx("div",{className:"bg-card p-8 rounded-2xl shadow-lg",children:m.jsxs("form",{onSubmit:P,children:[l&&m.jsx("p",{className:"bg-destructive/10 text-destructive p-3 rounded-md mb-4 text-center text-sm",children:l}),d&&m.jsx("p",{className:"bg-green-100 text-green-700 p-3 rounded-md mb-4 text-center text-sm",children:d}),m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-2",children:"Email ng k"}),m.jsx("input",{type:"email",value:v,onChange:A=>w(A.target.value),placeholder:"email@example.com",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-colors duration-300",required:!0,autoFocus:!0})]}),m.jsx("button",{type:"submit",disabled:s,className:"w-full bg-primary text-primary-foreground font-bold py-3 px-6 rounded-lg hover:bg-primary/90 transition-all duration-300 disabled:opacity-50",children:s?"ang gi...":"Gi yu cu"})]})})]}):m.jsxs("div",{className:"w-full max-w-md mx-auto p-4 animate-slide-in-right",children:[m.jsxs("div",{className:"relative text-center mb-10",children:[m.jsx("button",{onClick:t,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:m.jsx(kh,{className:"h-10 w-10 text-primary"})}),m.jsx(qm,{className:"h-20 w-20 mx-auto text-primary mb-4"}),m.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"ng nhp"}),m.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Truy cp vo h thng qun l hc tp."})]}),m.jsx("div",{className:"bg-card p-8 rounded-2xl shadow-lg",children:m.jsxs("form",{onSubmit:D,children:[l&&m.jsx("p",{className:"bg-destructive/10 text-destructive p-3 rounded-md mb-4 text-center",children:l}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"account",className:"block text-sm font-medium text-card-foreground mb-2",children:"Ti khon"}),m.jsx("input",{id:"account",type:"text",value:e,onChange:A=>n(A.target.value),placeholder:"Nhp ti khon hoc email",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-colors duration-300",required:!0,autoFocus:!0})]}),m.jsxs("div",{className:"mb-2",children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-card-foreground mb-2",children:"Mt khu"}),m.jsx("input",{id:"password",type:"password",value:r,onChange:A=>i(A.target.value),placeholder:"",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-colors duration-300",required:!0})]}),m.jsx("div",{className:"flex justify-end mb-4",children:m.jsx("button",{type:"button",onClick:()=>y(!0),className:"text-sm text-primary hover:underline",children:"Qun mt khu?"})}),m.jsxs("div",{className:"mb-6 flex items-center gap-2 cursor-pointer",onClick:()=>E(!_),children:[_?m.jsx(gbe,{className:"text-primary text-xl"}):m.jsx(Ibe,{className:"text-gray-400 text-xl"}),m.jsx("span",{className:"text-sm text-muted-foreground select-none",children:"Ghi nh ng nhp"})]}),m.jsx("button",{type:"submit",disabled:s,className:"w-full bg-primary text-primary-foreground font-bold py-3 px-6 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 disabled:opacity-50 disabled:cursor-wait mb-4",children:s?"ang x l...":"ng nhp"}),C&&m.jsx("div",{className:"flex justify-center mt-4",children:m.jsxs("button",{type:"button",onClick:R,disabled:s,className:"flex flex-col items-center gap-2 text-primary hover:text-primary/80 transition-colors",children:[m.jsx("div",{className:"p-3 bg-primary/10 rounded-full",children:m.jsx(Tbe,{className:"text-3xl"})}),m.jsx("span",{className:"text-sm font-medium",children:"ng nhp bng vn tay"})]})})]})})]})},K1e=({onBack:t,onSuccess:e})=>{const[n,r]=S.useState(""),[i,s]=S.useState(""),[a,l]=S.useState(""),[u,d]=S.useState(""),[h,p]=S.useState(""),[y,v]=S.useState(""),[w,_]=S.useState(""),[E,C]=S.useState(!1),[N,O]=S.useState(null),R=async D=>{if(D.preventDefault(),C(!0),O(null),i.length<6){O("Mt khu phi c t nht 6 k t."),C(!1);return}if(i!==a){O("Mt khu xc nhn khng khp."),C(!1);return}try{const A=(await Bme(Ji,n.trim(),i)).user,k=n.split("@")[0].toLowerCase();await W_(Ct(Pe,"users",A.uid),{email:A.email,fullName:u.trim(),phoneNumber:y.trim(),birthDate:w,role:"hoc_vien",class:h.trim(),username:k,createdAt:fl()}),console.log("Registration successful"),e()}catch(P){console.error("Registration failed:",P),P.code==="auth/email-already-in-use"?O("Email ny  c s dng."):P.code==="auth/invalid-email"?O("Email khng hp l."):P.code==="auth/weak-password"?O("Mt khu qu yu."):O("ng k tht bi. Vui lng th li.")}finally{C(!1)}};return m.jsxs("div",{className:"w-full max-w-md mx-auto p-4 animate-slide-in-right",children:[m.jsxs("div",{className:"relative text-center mb-6",children:[m.jsx("button",{onClick:t,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-card/50 p-2 rounded-full shadow-md hover:bg-muted transition-all duration-300",children:m.jsx(kh,{className:"h-8 w-8 text-primary"})}),m.jsx(qm,{className:"h-16 w-16 mx-auto text-primary mb-2"}),m.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"ng K"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"To ti khon hc vin mi"})]}),m.jsx("div",{className:"bg-card p-6 rounded-2xl shadow-lg",children:m.jsxs("form",{onSubmit:R,className:"space-y-4",children:[N&&m.jsx("p",{className:"bg-destructive/10 text-destructive p-3 rounded-md text-sm text-center",children:N}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"H v Tn *"}),m.jsx("input",{type:"text",value:u,onChange:D=>d(D.target.value),required:!0,className:"w-full px-4 py-2 bg-background border border-border rounded-lg focus:ring-2 focus:ring-primary outline-none",placeholder:"Nguyn Vn A"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"Lp Hc *"}),m.jsx("input",{type:"text",value:h,onChange:D=>p(D.target.value),required:!0,className:"w-full px-4 py-2 bg-background border border-border rounded-lg focus:ring-2 focus:ring-primary outline-none",placeholder:"Nhp tn lp (GV s duyt)"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"Ngy sinh"}),m.jsx("input",{type:"date",value:w,onChange:D=>_(D.target.value),className:"w-full px-4 py-2 bg-background border border-border rounded-lg focus:ring-2 focus:ring-primary outline-none"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"ST"}),m.jsx("input",{type:"tel",value:y,onChange:D=>v(D.target.value),className:"w-full px-4 py-2 bg-background border border-border rounded-lg focus:ring-2 focus:ring-primary outline-none",placeholder:"09..."})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"Email *"}),m.jsx("input",{type:"email",value:n,onChange:D=>r(D.target.value),required:!0,className:"w-full px-4 py-2 bg-background border border-border rounded-lg focus:ring-2 focus:ring-primary outline-none",placeholder:"email@example.com"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"Mt khu *"}),m.jsx("input",{type:"password",value:i,onChange:D=>s(D.target.value),required:!0,className:"w-full px-4 py-2 bg-background border border-border rounded-lg focus:ring-2 focus:ring-primary outline-none",placeholder:"t nht 6 k t"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-1",children:"Xc nhn mt khu *"}),m.jsx("input",{type:"password",value:a,onChange:D=>l(D.target.value),required:!0,className:"w-full px-4 py-2 bg-background border border-border rounded-lg focus:ring-2 focus:ring-primary outline-none",placeholder:"Nhp li mt khu"})]}),m.jsx("button",{type:"submit",disabled:E,className:"w-full bg-primary text-primary-foreground font-bold py-3 px-6 rounded-lg hover:bg-primary/90 transition-all duration-300 mt-4 disabled:opacity-50",children:E?"ang to ti khon...":"ng K"})]})})]})},Y1e=(t,e)=>{const n="h-14 w-14 mx-auto text-primary mb-3 object-contain",r="h-14 w-14 mx-auto mb-3 object-cover rounded-full border-2 border-border/20 shadow-sm",i="h-14 w-14 mx-auto mb-3 object-contain drop-shadow-lg",s=t.name.toLowerCase();if(e==="noel")return s.includes("thuyn trng")?m.jsx("img",{src:"/assets/img/hat.png",alt:"Captain Hat",className:i}):s.includes("my trng")?m.jsx("img",{src:"/assets/img/gift4.png",alt:"Chief Engineer",className:i}):s.includes("thy th")?m.jsx("img",{src:"/assets/img/bell.png",alt:"Sailor",className:i}):s.includes("li phng tin")?m.jsx("img",{src:"/assets/img/tree.png",alt:"Helm",className:i}):s.includes("chng ch")?m.jsx("img",{src:"/assets/img/star-gold.png",alt:"Certificate",className:i}):m.jsx("img",{src:"/assets/img/gift5.png",alt:"Default",className:i});if(e==="tri-an")switch(t.id){case"thuyentruong-h1":return m.jsx("img",{src:"https://i.postimg.cc/Vs76y54F/8.jpg",alt:t.name,className:r});case"thuyentruong-h2":return m.jsx("img",{src:"https://i.postimg.cc/Pf6xGNK4/9.jpg",alt:t.name,className:r});case"thuyentruong-h3":return m.jsx("img",{src:"https://i.postimg.cc/Vs76y54W/7.jpg",alt:t.name,className:r});case"thuythu":return m.jsx(SN,{className:n});case"lai-phuong-tien":return m.jsx(qm,{className:n});case"maytruong-h1":return m.jsx("img",{src:"https://i.postimg.cc/zDpm90H6/undefined.jpg",alt:t.name,className:r});case"maytruong-h2":return m.jsx("img",{src:"https://i.postimg.cc/wMwSLjdc/Teachers-day-background-design-art-illustration.jpg",alt:t.name,className:r});case"maytruong-h3":return m.jsx("img",{src:"https://i.postimg.cc/NFdWmjwH/Hinh-thiep.jpg",alt:t.name,className:r});case"thomay":return m.jsx("img",{src:"https://i.postimg.cc/cJYy2WQN/hinh-nen-3.jpg",alt:t.name,className:r});case"caotoc":return m.jsx("img",{src:"https://i.postimg.cc/dQWMQybn/5.jpg",alt:t.name,className:r});case"ven-bien":return m.jsx("img",{src:"https://i.postimg.cc/zDdmDgs0/6.jpg",alt:t.name,className:r});case"antoan-ven-bien":return m.jsx("img",{src:"https://i.postimg.cc/ZYFWdtv0/BOARD.webp",alt:t.name,className:r});case"antoan-xang-dau":return m.jsx("img",{src:"https://i.postimg.cc/T2k82Dzc/4.jpg",alt:t.name,className:r});case"antoan-hoa-chat":return m.jsx("img",{src:"https://i.postimg.cc/mZVx08Ff/World-Teacher-s-Day-Flowers-Border-Pink.jpg",alt:t.name,className:r});default:return s.includes("chng ch")?m.jsx(LM,{className:n}):m.jsx(MM,{className:n})}return s.includes("thuyn trng")?m.jsx(Gle,{className:n}):s.includes("my trng")?m.jsx(qle,{className:n}):s.includes("thy th")?m.jsx(SN,{className:n}):s.includes("li phng tin")?m.jsx(qm,{className:n}):s.includes("chng ch")?m.jsx(LM,{className:n}):m.jsx(MM,{className:n})},X1e=({licenses:t,onSelect:e,onBack:n})=>{const{theme:r}=$i();return m.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right",children:[m.jsxs("div",{className:"relative text-center mb-10",children:[m.jsx("button",{onClick:n,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:m.jsx(kh,{className:"h-10 w-10 text-primary"})}),r==="noel"?m.jsx("img",{src:"/assets/img/tree.png",alt:"Tree",className:"h-20 w-20 mx-auto mb-4 object-contain drop-shadow-lg"}):m.jsx(SN,{className:"h-20 w-20 mx-auto text-primary mb-4"}),m.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Chn Hng Bng"}),m.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Anh/ch vui lng chn hng bng mun n tp v thi th."})]}),m.jsx("div",{className:"bg-card p-6 rounded-2xl shadow-lg",children:m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:t.map(i=>{const s=i.subjects.reduce((a,l)=>a+l.questions.length,0);return m.jsxs("button",{onClick:()=>e(i),className:"group w-full p-4 bg-background rounded-lg text-center hover:bg-primary/10 transition-all duration-300 transform hover:scale-105 focus:ring-4 focus:ring-ring focus:outline-none",children:[Y1e(i,r),m.jsx("h3",{className:"text-md font-bold text-primary",children:i.name}),m.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[i.subjects.length," mn - ",s," cu"]})]},i.id)})})})]})},Q1e=({onNameSubmit:t,onBack:e})=>{const[n,r]=S.useState(""),i=s=>{s.preventDefault();const a=n.trim();t(a||"Hc vin")};return m.jsxs("div",{className:"w-full max-w-md mx-auto p-4 animate-slide-in-right",children:[m.jsxs("div",{className:"text-center mb-10",children:[m.jsx(Fle,{className:"h-20 w-20 mx-auto text-primary mb-4"}),m.jsxs("div",{className:"relative flex justify-center items-center",children:[m.jsx("div",{className:"absolute left-0",children:m.jsx("button",{onClick:e,className:"bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:m.jsx(kh,{className:"h-10 w-10 text-primary"})})}),m.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Thng tin ca anh/ch"})]}),m.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Nhp tn  ti c th lu li tin  hc tp cho anh/ch."})]}),m.jsx("div",{className:"bg-card p-8 rounded-2xl shadow-lg",children:m.jsxs("form",{onSubmit:i,children:[m.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-card-foreground mb-2",children:"Tn ca anh/ch"}),m.jsx("input",{id:"name",type:"text",value:n,onChange:s=>r(s.target.value),placeholder:"V d: Nguyn Vn A (c th b trng)",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-colors duration-300",autoFocus:!0}),m.jsx("button",{type:"submit",className:"mt-6 w-full bg-primary text-primary-foreground font-bold py-3 px-6 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300",children:"Xc nhn"})]})})]})},J1e=({onModeSelect:t,licenseName:e,userName:n,onSwitchLicense:r})=>m.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right",children:[m.jsxs("div",{className:"relative text-center mb-10",children:[m.jsx("div",{className:"absolute right-0 top-0",children:m.jsxs("button",{onClick:r,className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground hover:text-primary transition-all duration-300 py-1 px-2 rounded-md hover:bg-secondary",title:"Chn li hng bng",children:[m.jsx(Hle,{className:"h-4 w-4"}),m.jsx("span",{children:"Chn li hng bng"})]})}),m.jsxs("h1",{className:"text-4xl font-bold text-foreground",children:["Cho anh/ch ",n,"!"]}),m.jsxs("p",{className:"text-lg text-muted-foreground mt-2",children:["Anh/ch ang hc hng bng ",m.jsx("span",{className:"font-semibold text-primary",children:e}),"."]}),m.jsx("p",{className:"text-lg text-muted-foreground mt-1",children:"Hy chn mt ch   bt u."})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("button",{onClick:()=>t("practice"),className:"group bg-card text-card-foreground p-8 rounded-2xl shadow-lg text-center hover:bg-primary/10 transition-all duration-300 transform hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-ring",children:[m.jsx(E4,{className:"h-16 w-16 mx-auto text-primary mb-4 transition-transform group-hover:scale-110"}),m.jsx("h2",{className:"text-2xl font-bold text-card-foreground",children:"n tp"}),m.jsx("p",{className:"text-muted-foreground mt-2",children:"Luyn tp tng mn  nm vng kin thc."})]}),m.jsxs("button",{onClick:()=>t("online_exam"),className:"group bg-card text-card-foreground p-8 rounded-2xl shadow-lg text-center hover:bg-destructive/10 transition-all duration-300 transform hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-ring",children:[m.jsx(Wle,{className:"h-16 w-16 mx-auto text-destructive mb-4 transition-transform group-hover:scale-110"}),m.jsx("h2",{className:"text-2xl font-bold text-card-foreground",children:"Thi th"}),m.jsx("p",{className:"text-muted-foreground mt-2",children:"Lm bi thi 30 cu ngu nhin trong 45 pht."})]})]})]}),$7=t=>{if(!t)return"";const e=new Date(t),n=e.getDate().toString().padStart(2,"0"),r=(e.getMonth()+1).toString().padStart(2,"0"),i=e.getHours().toString().padStart(2,"0"),s=e.getMinutes().toString().padStart(2,"0");return`(${n}/${r} ${i}:${s})`},Z1e=({subjects:t,progress:e,onSelect:n,onBack:r})=>m.jsxs("div",{className:"w-full max-w-2xl mx-auto p-4 animate-slide-in-right",children:[m.jsxs("div",{className:"relative text-center mb-10",children:[m.jsx("button",{onClick:r,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:m.jsx(kh,{className:"h-10 w-10 text-primary"})}),m.jsx(E4,{className:"h-20 w-20 mx-auto text-primary mb-4"}),m.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Chn Mn hc"}),m.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Chn mt mn  bt u n tp."})]}),m.jsx("div",{className:"bg-card p-6 rounded-2xl shadow-lg",children:m.jsx("div",{className:"space-y-3",children:t.map(i=>{const s=e[i.id],a=s&&s.lastScore!==null;return m.jsxs("button",{onClick:()=>n(i),className:"w-full flex items-center justify-between p-5 bg-background rounded-lg text-left hover:bg-primary/10 transition-all duration-300 transform hover:scale-[1.02] focus:ring-4 focus:ring-ring focus:outline-none",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-bold text-primary",children:i.name}),m.jsxs("p",{className:"text-sm text-muted-foreground",children:[i.questions.length," cu hi"]})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[a&&m.jsxs("div",{className:"text-right text-sm",children:[m.jsxs("p",{className:"text-muted-foreground flex items-center justify-end",children:[m.jsx("span",{children:"Ln cui:"}),m.jsxs("span",{className:"font-semibold text-primary ml-1",children:[s.lastScore,"/",i.questions.length]}),s.lastScoreTimestamp&&m.jsx("span",{className:"ml-1.5 text-xs text-muted-foreground/80",children:$7(s.lastScoreTimestamp)})]}),m.jsxs("p",{className:"text-muted-foreground flex items-center justify-end mt-0.5",children:[m.jsx("span",{children:"Cao nht:"}),m.jsxs("span",{className:"font-semibold text-success ml-1",children:[s.highScore,"/",i.questions.length]}),s.highScoreTimestamp&&m.jsx("span",{className:"ml-1.5 text-xs text-muted-foreground/80",children:$7(s.highScoreTimestamp)})]})]}),m.jsx($le,{className:"h-6 w-6 text-muted-foreground"})]})]},i.id)})})})]}),e_e=({quiz:t,onFinish:e,onBack:n,initialIndex:r=0,initialAnswers:i={},onProgressUpdate:s})=>{const[a,l]=S.useState(r),[u,d]=S.useState(i);if(!t.questions||t.questions.length===0)return m.jsxs("div",{className:"w-full max-w-3xl mx-auto p-4 text-center",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:"Cha c cu hi no trong ch  ny."}),m.jsx("button",{onClick:n,className:"bg-primary text-primary-foreground hover:bg-primary/90 py-2 px-4 rounded-lg",children:"Quay li"})]});const h=S.useMemo(()=>t.questions[a],[t.questions,a]);if(!h)return m.jsxs("div",{className:"w-full max-w-3xl mx-auto p-4 text-center",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:"C li xy ra khi ti cu hi."}),m.jsx("button",{onClick:n,className:"bg-primary text-primary-foreground py-2 px-4 rounded-lg",children:"Quay li"})]});const p=S.useMemo(()=>u[h.id]!==void 0,[u,h.id]),y=S.useMemo(()=>u[h.id]||null,[u,h.id]);S.useEffect(()=>{s==null||s(a,0,u)},[a,u]);const v=()=>{e(u)},w=C=>{p||d(N=>({...N,[h.id]:C}))},_=()=>{a===t.questions.length-1?v():l(N=>N+1)},E=a/t.questions.length*100;return m.jsx("div",{className:"w-full max-w-3xl mx-auto p-4 md:p-6 animate-slide-in-right font-quiz-default",children:m.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-6 md:p-8",children:[m.jsxs("div",{className:"mb-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4 relative",children:[m.jsx("button",{onClick:n,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-background/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-card transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:m.jsx(kh,{className:"h-10 w-10"})}),m.jsx("h1",{className:"text-xl font-bold text-foreground text-center flex-grow",children:t.title}),m.jsx("button",{onClick:v,className:"bg-secondary text-secondary-foreground hover:bg-secondary/80 text-sm font-bold py-2 px-4 rounded-lg transition-colors duration-300",children:"Kt thc"})]}),m.jsx("div",{className:"w-full bg-secondary rounded-full h-2.5 mb-2",children:m.jsx("div",{className:"bg-primary h-2.5 rounded-full transition-all duration-500",style:{width:`${E}%`}})}),m.jsx("div",{className:"flex justify-between items-center text-sm text-muted-foreground",children:m.jsxs("span",{children:["Cu ",a+1," / ",t.questions.length]})})]}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-5 text-foreground",children:h.text}),h.image&&m.jsx("div",{className:"mb-6 rounded-lg overflow-hidden",children:m.jsx("img",{src:h.image,alt:"Cu hi",className:"w-full h-auto object-cover max-h-80"})}),m.jsx("div",{className:"space-y-3",children:h.answers.map(C=>{const N=y===C.id;let O="w-full text-left p-4 rounded-lg border-2 transition-all duration-300 flex items-center justify-between text-lg";const R=C.id===h.correctAnswerId;return p?R?O+=" bg-success/10 border-success text-success":N&&!R?O+=" bg-destructive/10 border-destructive text-destructive":O+=" border-border text-muted-foreground":N?O+=" bg-primary/10 border-primary ring-2 ring-primary text-primary-foreground":O+=" bg-background hover:bg-muted border-border text-foreground",m.jsxs("button",{onClick:()=>w(C.id),disabled:p,className:O,children:[m.jsx("span",{className:"flex-grow",children:C.text}),p&&m.jsxs(m.Fragment,{children:[R&&m.jsx(x4,{className:"h-6 w-6 text-success ml-3"}),N&&!R&&m.jsx(_4,{className:"h-6 w-6 text-destructive ml-3"})]})]},C.id)})}),m.jsx("div",{className:"mt-8",children:m.jsx("div",{className:"text-right",children:p?m.jsx("button",{onClick:_,className:"bg-success text-success-foreground font-bold py-3 px-8 rounded-lg hover:bg-success/90 transition-all duration-300 animate-slide-in-right",children:a===t.questions.length-1?"Hon thnh":"Cu tip theo"}):m.jsx("div",{className:"h-[48px]"})})})]})]})})},t_e=t=>{const e=Math.floor(t/60),n=t%60;return`${e.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},n_e=({checked:t,onChange:e})=>m.jsx("div",{onClick:e,className:`w-[14px] h-[14px] border border-[#999] inline-block cursor-pointer bg-white relative ${t?"bg-[#333]":""}`,children:t&&m.jsx("div",{className:"absolute top-[2px] left-[2px] w-[8px] h-[8px] bg-[#333]"})}),r_e=t=>{if(!t)return"---";if(/^\d{2}\/\d{2}\/\d{4}$/.test(t))return t;if(/^\d{4}-\d{2}-\d{2}$/.test(t)){const[e,n,r]=t.split("-");return`${r}/${n}/${e}`}return t},i_e=({quiz:t,onFinish:e,onBack:n,userName:r,userProfile:i,selectedLicense:s,initialIndex:a=0,initialAnswers:l={},initialTime:u,onProgressUpdate:d})=>{const[h,p]=S.useState(a),[y,v]=S.useState(l),[w,_]=S.useState(u!==void 0?u:t.timeLimit??3600),E=S.useMemo(()=>t.questions[h],[t.questions,h]),C=S.useRef(y);S.useEffect(()=>{C.current=y,d==null||d(h,w,y)},[y]),S.useEffect(()=>{d==null||d(h,w,y)},[h]),S.useEffect(()=>{w%5===0&&(d==null||d(h,w,y))},[w]);const N=()=>{window.confirm("Anh/ch c chc chn mun thot khi bi thi khng? Mi tin trnh s b mt.")&&n()},O=S.useCallback(()=>{const P=C.current,A=t.questions.length-Object.keys(P).length,k=A>0?`Anh/ch vn cn ${A} cu cha tr li. Anh/ch c chc chn mun np bi khng?`:"Anh/ch  hon thnh tt c cc cu hi. Anh/ch c mun np bi khng?";window.confirm(k)&&e(P)},[t.questions.length,e]),R=S.useRef(e);S.useEffect(()=>{R.current=e},[e]),S.useEffect(()=>{const P=setInterval(()=>{_(A=>A>0?A-1:0)},1e3);return()=>clearInterval(P)},[]),S.useEffect(()=>{w===0&&(alert(" ht gi lm bi! H thng s t ng np bi ca anh/ch."),R.current(C.current))},[w]);const D=(P,A)=>{v(k=>({...k,[P]:A}))};return m.jsxs("div",{className:"w-full max-w-7xl mx-auto font-sans text-black shadow-lg animate-slide-in-right rounded-md",children:[m.jsx("div",{className:"h-3 bg-yellow-700 rounded-t-md border-b-2 border-yellow-900"}),m.jsxs("div",{className:"bg-white p-4",children:[m.jsxs("div",{className:"flex justify-between items-start pb-4 border-b border-gray-300",children:[m.jsxs("div",{className:"flex gap-4 items-start",children:[m.jsx("img",{src:(i==null?void 0:i.photoURL)||`https://ui-avatars.com/api/?name=${encodeURIComponent(r)}`,alt:"Avatar",className:"w-[100px] h-[130px] border border-gray-300 object-cover p-1 bg-white",onError:P=>{P.target.src="https://i.postimg.cc/8PDn1wfM/favicon.png"}}),m.jsxs("div",{className:"text-sm space-y-1",children:[m.jsx("p",{className:"font-bold text-blue-700 text-lg uppercase",children:(i==null?void 0:i.full_name)||(i==null?void 0:i.fullName)||r||"Hc vin"}),m.jsxs("p",{children:["S bo danh: ",m.jsx("span",{className:"font-semibold text-gray-800",children:((i==null?void 0:i.email)||"").split("@")[0]||"---"})]}),m.jsxs("p",{children:["Ngy sinh: ",m.jsx("span",{className:"font-semibold text-gray-800",children:r_e(i==null?void 0:i.birthDate)})]}),m.jsxs("p",{children:["a ch: ",m.jsx("span",{className:"font-semibold text-gray-800",children:(i==null?void 0:i.address)||"---"})]}),m.jsxs("p",{children:["Lp: ",m.jsx("span",{className:"font-semibold text-gray-800",children:(i==null?void 0:i.class)||(i==null?void 0:i.courseName)||"---"})]}),m.jsxs("p",{children:["Hng bng: ",m.jsx("span",{className:"font-bold text-red-600 border border-red-500 px-1 rounded bg-red-50",children:(s==null?void 0:s.name)||"---"})]})]})]}),m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsxs("div",{className:"bg-[#f0ad4e] text-black p-2 rounded-md text-sm w-48",children:[m.jsx("p",{className:"font-bold",children:"ang thi"}),m.jsx("p",{children:"Thi gian: 45 pht"}),m.jsx("p",{children:"B gi: 0 pht"}),m.jsxs("p",{children:["Cn li: ",m.jsx("span",{className:"font-bold",children:t_e(w)})]})]}),m.jsx("button",{onClick:N,className:"text-sm text-gray-600 hover:text-red-500 font-semibold",children:"Thot"})]})]}),m.jsxs("div",{className:"flex mt-4 gap-4",children:[m.jsxs("div",{className:"flex-1 border border-gray-400 rounded-md p-4 flex flex-col justify-between min-h-[500px]",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-bold mb-4 border-b border-dashed border-gray-400 pb-2",children:"Ni dung cu hi"}),m.jsxs("p",{className:"font-bold text-red-600 mb-2",children:["Cu :",h+1]}),m.jsx("p",{className:"mb-4 font-semibold",children:E.text}),E.image&&m.jsx("div",{className:"mb-4 flex justify-start",children:m.jsx("img",{src:E.image,alt:"Hnh nh cu hi",className:"max-w-full h-auto max-h-60 object-contain border border-gray-300 rounded-md"})}),m.jsx("div",{className:"space-y-4",children:E.answers.map((P,A)=>m.jsxs("div",{className:"flex items-start",children:[m.jsxs("span",{className:"font-bold mr-2 text-gray-700 min-w-[20px]",children:[String.fromCharCode(65+A),"."]}),m.jsx("p",{children:P.text})]},P.id))})]}),m.jsxs("div",{className:"flex justify-center gap-4 mt-8",children:[m.jsxs("button",{onClick:()=>p(P=>Math.max(0,P-1)),disabled:h===0,className:"bg-[#f0ad4e] text-black px-4 py-2 rounded-md border border-gray-400 flex items-center font-semibold hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-5 h-5",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),"Tr li"]}),h<t.questions.length-1&&m.jsxs("button",{onClick:()=>p(P=>Math.min(t.questions.length-1,P+1)),className:"bg-[#f0ad4e] text-black px-4 py-2 rounded-md border border-gray-400 flex items-center font-semibold hover:bg-yellow-500 transition-colors",children:["Tip tc",m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-5 h-5",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})]})]})]}),m.jsxs("div",{className:"w-[200px] flex-none flex flex-col",children:[m.jsx("div",{className:"border border-gray-300 rounded-md",children:m.jsxs("table",{className:"w-full border-collapse text-xs",children:[m.jsx("thead",{className:"sticky top-0 bg-[#f0ad4e] z-10",children:m.jsxs("tr",{children:[m.jsx("th",{className:"border border-gray-400 p-2",children:"Cu"}),m.jsx("th",{className:"border border-gray-400 p-2",children:"a"}),m.jsx("th",{className:"border border-gray-400 p-2",children:"b"}),m.jsx("th",{className:"border border-gray-400 p-2",children:"c"}),m.jsx("th",{className:"border border-gray-400 p-2",children:"d"})]})}),m.jsx("tbody",{children:t.questions.map((P,A)=>m.jsxs("tr",{className:h===A?"bg-cyan-200":"hover:bg-gray-50",children:[m.jsxs("td",{className:`border border-gray-400 p-2 font-bold text-center cursor-pointer whitespace-nowrap ${h===A?"text-black":"text-gray-500"}`,onClick:()=>p(A),children:["Cu ",A+1]}),P.answers.slice(0,4).map(k=>m.jsx("td",{className:"border border-gray-400 p-2 text-center",children:m.jsx(n_e,{checked:y[P.id]===k.id,onChange:()=>D(P.id,k.id)})},k.id))]},P.id))})]})}),m.jsx("div",{className:"text-center mt-4 pt-2 border-t border-gray-200",children:m.jsx("button",{onClick:O,className:"bg-[#337ab7] text-white px-8 py-2 rounded-md font-semibold hover:bg-blue-700 transition-colors w-full",children:"Np bi"})})]})]}),m.jsxs("div",{className:"mt-4 bg-[#005a9c] text-white p-4 rounded-b-md flex items-center gap-4 text-xs",children:[m.jsx("img",{src:"https://i.postimg.cc/8PDn1wfM/favicon.png",alt:"Logo",className:"h-16 w-16 object-contain"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-bold",children:"CNG TY C PHN T VN V GIO DC NINH BNH"}),m.jsx("p",{children:"a ch: ng Triu Vit Vng, phng Hoa L, tnh Ninh Bnh "})]})]})]})]})},s_e=({quiz:t,userAnswers:e,score:n,onRetry:r,onBack:i,userName:s})=>{const[a,l]=S.useState("all"),[u]=S.useState(()=>new Date),d=t.questions.length,h=n>=25,p=S.useMemo(()=>new Intl.DateTimeFormat("vi-VN",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit",year:"numeric"}).format(u),[u]),y=S.useMemo(()=>a==="incorrect"?t.questions.filter(v=>e[v.id]!==v.correctAnswerId):t.questions,[a,t.questions,e]);return m.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right font-quiz-default",children:[m.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8 text-center mb-8",children:[m.jsx(rH,{className:"h-24 w-24 mx-auto text-yellow-400 mb-4"}),m.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Kt qu Thi th"}),m.jsxs("div",{className:"my-4 text-muted-foreground",children:[m.jsxs("p",{className:"text-lg",children:["Th sinh: ",m.jsx("span",{className:"font-bold text-primary",children:s})]}),m.jsxs("p",{className:"text-sm",children:["Hon thnh lc: ",p]})]}),m.jsx("p",{className:`text-2xl font-bold mb-6 ${h?"text-success":"text-destructive"}`,children:h?"Chc mng, anh/ch  T!":"Rt tic, anh/ch KHNG T."}),m.jsxs("div",{className:`inline-block p-6 rounded-xl border ${h?"bg-success/10 border-success/20":"bg-destructive/10 border-destructive/20"}`,children:[m.jsxs("p",{className:`text-5xl font-extrabold ${h?"text-success":"text-destructive"}`,children:[n," / ",d]}),m.jsx("p",{className:"text-lg text-muted-foreground mt-1",children:"S cu ng"})]})]}),m.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8",children:[m.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Xem li bi lm"}),m.jsxs("div",{className:"flex items-center gap-2 mt-4 sm:mt-0",children:[m.jsx("button",{onClick:()=>l("all"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${a==="all"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:"Tt c"}),m.jsxs("button",{onClick:()=>l("incorrect"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${a==="incorrect"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:["Ch cu sai (",t.questions.length-n,")"]})]})]}),m.jsx("div",{className:"space-y-6 max-h-[50vh] overflow-y-auto pr-2",children:y.length>0?y.map((v,w)=>{const _=e[v.id],E=v.correctAnswerId;return m.jsxs("div",{className:"p-4 border-b border-border last:border-b-0",children:[m.jsxs("p",{className:"font-semibold text-lg mb-3 text-foreground",children:[m.jsxs("span",{className:"mr-2",children:["Cu ",t.questions.findIndex(C=>C.id===v.id)+1,":"]}),v.text]}),m.jsx("div",{className:"space-y-2",children:v.answers.map(C=>{const N=C.id===_,O=C.id===E;let R="flex items-center p-3 rounded-md text-sm ";return O?R+="bg-success/10 text-success":N?R+="bg-destructive/10 text-destructive":R+="bg-muted/50 text-muted-foreground",m.jsxs("div",{className:R,children:[O?m.jsx(x4,{className:"h-5 w-5 mr-3 text-success"}):N?m.jsx(_4,{className:"h-5 w-5 mr-3 text-destructive"}):m.jsx("div",{className:"w-5 h-5 mr-3"}),m.jsx("span",{children:C.text})]},C.id)})})]},v.id)}):m.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Tuyt vi! Anh/ch  tr li ng tt c cc cu hi."})})]}),m.jsxs("div",{className:"text-center mt-8 flex flex-col sm:flex-row justify-center items-center gap-4",children:[m.jsx("button",{onClick:i,className:"w-full sm:w-auto bg-primary text-primary-foreground font-bold py-3 px-8 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105",children:"Quay li"}),m.jsx("button",{onClick:r,className:"w-full sm:w-auto bg-secondary text-secondary-foreground font-bold py-3 px-8 rounded-lg hover:bg-muted focus:outline-none focus:ring-4 focus:ring-ring transition-colors duration-300",children:"Lm li bi thi"})]})]})},a_e=({quiz:t,userAnswers:e,score:n,onRetry:r,onBack:i,userName:s})=>{const[a,l]=S.useState("all"),[u]=S.useState(()=>new Date),d=t.questions.length,h=d>0?Math.round(n/d*100):0,p=S.useMemo(()=>new Intl.DateTimeFormat("vi-VN",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit",year:"numeric"}).format(u),[u]),y=S.useMemo(()=>a==="incorrect"?t.questions.filter(v=>e[v.id]!==v.correctAnswerId):t.questions,[a,t.questions,e]);return m.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right font-quiz-default",children:[m.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8 text-center mb-8",children:[m.jsx(rH,{className:"h-24 w-24 mx-auto text-yellow-400 mb-4"}),m.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Kt qu n tp"}),m.jsxs("div",{className:"my-4 text-muted-foreground",children:[m.jsxs("p",{className:"text-lg",children:["Hc vin: ",m.jsx("span",{className:"font-bold text-primary",children:s})]}),m.jsxs("p",{className:"text-sm",children:["Hon thnh lc: ",p]})]}),m.jsxs("div",{className:"bg-primary/10 inline-block p-6 rounded-xl border border-primary/20 mt-4",children:[m.jsxs("p",{className:"text-5xl font-extrabold text-primary",children:[n," / ",d]}),m.jsxs("p",{className:"text-2xl font-semibold text-primary/80 mt-1",children:["(",h,"%)"]})]})]}),m.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8",children:[m.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Xem li bi lm"}),m.jsxs("div",{className:"flex items-center gap-2 mt-4 sm:mt-0",children:[m.jsx("button",{onClick:()=>l("all"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${a==="all"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:"Tt c"}),m.jsxs("button",{onClick:()=>l("incorrect"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${a==="incorrect"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:["Ch cu sai (",t.questions.length-n,")"]})]})]}),m.jsx("div",{className:"space-y-6 max-h-[50vh] overflow-y-auto pr-2",children:y.length>0?y.map((v,w)=>{const _=e[v.id],E=v.correctAnswerId;return m.jsxs("div",{className:"p-4 border-b border-border last:border-b-0",children:[m.jsxs("p",{className:"font-semibold text-lg mb-3 text-foreground",children:[m.jsxs("span",{className:"mr-2",children:["Cu ",t.questions.findIndex(C=>C.id===v.id)+1,":"]}),v.text]}),m.jsx("div",{className:"space-y-2",children:v.answers.map(C=>{const N=C.id===_,O=C.id===E;let R="flex items-center p-3 rounded-md text-sm ";return O?R+="bg-success/10 text-success":N?R+="bg-destructive/10 text-destructive":R+="bg-muted/50 text-muted-foreground",m.jsxs("div",{className:R,children:[O?m.jsx(x4,{className:"h-5 w-5 mr-3 text-success"}):N?m.jsx(_4,{className:"h-5 w-5 mr-3 text-destructive"}):m.jsx("div",{className:"w-5 h-5 mr-3"}),m.jsx("span",{children:C.text})]},C.id)})})]},v.id)}):m.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Tuyt vi! Anh/ch  tr li ng tt c cc cu hi."})})]}),m.jsxs("div",{className:"text-center mt-8 flex flex-col sm:flex-row justify-center items-center gap-4",children:[m.jsx("button",{onClick:i,className:"w-full sm:w-auto bg-primary text-primary-foreground font-bold py-3 px-8 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105",children:"Cc mn khc"}),m.jsx("button",{onClick:r,className:"w-full sm:w-auto bg-secondary text-secondary-foreground font-bold py-3 px-8 rounded-lg hover:bg-muted focus:outline-none focus:ring-4 focus:ring-ring transition-colors duration-300",children:"Lm li"})]})]})},o_e="_card_108q9_3",l_e="_header_108q9_45",c_e="_logoPlaceholder_108q9_69",u_e="_schoolName_108q9_97",d_e="_body_108q9_113",h_e="_cardTitle_108q9_135",f_e="_contentRow_108q9_157",m_e="_photoSection_108q9_169",p_e="_photoWrapper_108q9_179",g_e="_avatar_108q9_195",y_e="_infoSection_108q9_209",v_e="_infoRow_108q9_229",b_e="_label_108q9_239",w_e="_value_108q9_255",x_e="_valueHighlight_108q9_265",__e="_footer_108q9_281",E_e="_barcode_108q9_299",hn={card:o_e,header:l_e,logoPlaceholder:c_e,schoolName:u_e,body:d_e,cardTitle:h_e,contentRow:f_e,photoSection:m_e,photoWrapper:p_e,avatar:g_e,infoSection:y_e,infoRow:v_e,label:b_e,value:w_e,valueHighlight:x_e,footer:__e,barcode:E_e},T_e=t=>{if(!t)return" --/--/----";if(/^\d{2}\/\d{2}\/\d{4}$/.test(t))return t;if(/^\d{4}-\d{2}-\d{2}$/.test(t)){const[e,n,r]=t.split("-");return`${r}/${n}/${e}`}return t},S_e=({user:t})=>{const e=t.role!=="hoc_vien",n=e?"TH GIO VIN":"TH HC VIN",r=e?{background:"linear-gradient(135deg, #b91c1c 0%, #c2410c 100%)",borderBottom:"4px solid #fcd34d"}:{},i=e?{color:"#b91c1c",textShadow:"0px 1px 2px rgba(0,0,0,0.1)"}:{};return m.jsxs("div",{className:hn.card,style:e?{borderColor:"#fcd34d",boxShadow:"0 10px 25px -5px rgba(234, 88, 12, 0.3)"}:{},children:[m.jsxs("div",{className:hn.header,style:r,children:[m.jsx("div",{className:hn.logoPlaceholder,style:e?{color:"#fbbf24",background:"rgba(255,255,255,0.2)"}:{},children:m.jsx(Pbe,{size:20})}),m.jsxs("div",{className:hn.schoolName,style:e?{color:"#fff",fontWeight:"800"}:{},children:["Cng ty C phn",m.jsx("br",{}),"T VN V GIO DC NINH BNH"]})]}),m.jsxs("div",{className:hn.body,children:[m.jsx("h2",{className:hn.cardTitle,style:i,children:n}),m.jsxs("div",{className:hn.contentRow,children:[m.jsx("div",{className:hn.photoSection,children:m.jsx("div",{className:hn.photoWrapper,style:e?{borderColor:"#fcd34d"}:{},children:m.jsx("img",{src:t.photoURL||(e?"/assets/img/avatar.webp.webp":"/assets/img/avatar.webp1.webp"),onError:s=>{const a=s.target;a.onerror=null,a.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(t.full_name||"User")}&background=random&size=150`},alt:"Avatar",className:hn.avatar})})}),m.jsxs("div",{className:hn.infoSection,children:[m.jsxs("div",{className:hn.infoRow,children:[m.jsx("span",{className:hn.label,children:"H tn:"}),m.jsxs("span",{className:`${hn.value} ${hn.valueHighlight}`,style:e?{color:"#b91c1c"}:{},children:[t.full_name||t.fullName||"---",t.isVerified&&m.jsx("span",{style:{marginLeft:"4px",color:"#22c55e",display:"inline-flex",alignItems:"center"},children:m.jsx(lp,{size:14})})]})]}),m.jsxs("div",{className:hn.infoRow,children:[m.jsx("span",{className:hn.label,children:"Ngy sinh: "}),m.jsxs("span",{className:hn.value,children:[" ",T_e(t.birthDate)]})]}),e?m.jsxs("div",{className:hn.infoRow,children:[m.jsx("span",{className:hn.label,children:"Phng: "}),m.jsx("span",{className:hn.value,style:{fontWeight:"bold"},children:" Phng o to - T vn hnh my tu thy"})]}):m.jsxs("div",{className:hn.infoRow,children:[m.jsx("span",{className:hn.label,children:"Lp hc: "}),m.jsx("span",{className:hn.value,children:t.courseName||"Cha vo kha"})]}),m.jsxs("div",{className:hn.infoRow,children:[m.jsx("span",{className:hn.label,children:"a ch:"}),m.jsx("span",{className:hn.value,style:{fontSize:"0.9rem"},children:t.address||"---"})]})]})]})]}),m.jsxs("div",{className:hn.footer,style:e?{background:"#fef2f2",borderTop:"1px dashed #fca5a5"}:{},children:[m.jsx("div",{className:hn.barcode,style:e?{opacity:.8}:{}}),m.jsxs("div",{style:{position:"absolute",bottom:"5px",fontSize:"0.6rem",color:e?"#991b1b":"#718096"},children:["ID: ",t.id?t.id.substring(0,10).toUpperCase():"---"]})]})]})},Zg=({label:t,count:e,color:n})=>m.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-gray-200 dark:border-zinc-800 p-4 rounded-xl shadow-sm flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs text-gray-500 uppercase font-semibold",children:t}),m.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:e})]}),m.jsx("div",{className:`w-3 h-3 rounded-full ${n} animate-pulse`})]}),C_e=({userRole:t})=>{if(!["admin","quan_ly","lanh_dao"].includes(t))return null;const[e,n]=S.useState({total:0,admins:0,teachers:0,students:0}),[r,i]=S.useState(0);return S.useEffect(()=>{if(!Co)return;const s=Ru(Co,"status"),a=Qx(s,l=>{if(!l.exists()){n({total:0,admins:0,teachers:0,students:0});return}const u=l.val();let d=0,h=0,p=0,y=0,v=0;Object.values(u).forEach(w=>{w.state==="online"&&(d++,["admin","quan_ly","lanh_dao"].includes(w.role)?h++:w.role==="giao_vien"?p++:w.role==="guest"?v++:y++)}),n({total:d,admins:h,teachers:p,students:y}),i(v)});return()=>a()},[]),m.jsxs(Nh.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"w-full max-w-4xl mb-4 grid grid-cols-2 md:grid-cols-5 gap-4",children:[m.jsx(Zg,{label:"Trc tuyn",count:e.total,color:"bg-blue-600"}),m.jsx(Zg,{label:"Khch",count:r,color:"bg-gray-500"}),m.jsx(Zg,{label:"Hc vin",count:e.students,color:"bg-green-600"}),m.jsx(Zg,{label:"Gio vin",count:e.teachers,color:"bg-orange-600"}),m.jsx(Zg,{label:"Qun l",count:e.admins,color:"bg-purple-600"})]})};function rY(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=rY(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function sn(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=rY(t))&&(r&&(r+=" "),r+=e);return r}var A_e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function yj(t){if(typeof t!="string")return!1;var e=A_e;return e.includes(t)}var N_e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],k_e=new Set(N_e);function iY(t){return typeof t!="string"?!1:k_e.has(t)}function sY(t){return typeof t=="string"&&t.startsWith("data-")}function pa(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(iY(n)||sY(n))&&(e[n]=t[n]);return e}function fp(t){if(t==null)return null;if(S.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return pa(e)}return typeof t=="object"&&!Array.isArray(t)?pa(t):null}function ws(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(iY(n)||sY(n)||yj(n))&&(e[n]=t[n]);return e}function I_e(t){return t==null?null:S.isValidElement(t)?ws(t.props):typeof t=="object"&&!Array.isArray(t)?ws(t):null}var O_e=["children","width","height","viewBox","className","style","title","desc"];function Pk(){return Pk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pk.apply(null,arguments)}function j_e(t,e){if(t==null)return{};var n,r,i=P_e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function P_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var vj=S.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:s,className:a,style:l,title:u,desc:d}=t,h=j_e(t,O_e),p=s||{width:r,height:i,x:0,y:0},y=sn("recharts-surface",a);return S.createElement("svg",Pk({},ws(h),{className:y,width:r,height:i,style:l,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:e}),S.createElement("title",null,u),S.createElement("desc",null,d),n)}),R_e=["children","className"];function Rk(){return Rk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rk.apply(null,arguments)}function D_e(t,e){if(t==null)return{};var n,r,i=M_e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function M_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var zi=S.forwardRef((t,e)=>{var{children:n,className:r}=t,i=D_e(t,R_e),s=sn("recharts-layer",r);return S.createElement("g",Rk({className:s},ws(i),{ref:e}),n)}),aY=S.createContext(null),L_e=()=>S.useContext(aY);function Dn(t){return function(){return t}}const oY=Math.cos,c1=Math.sin,zo=Math.sqrt,u1=Math.PI,h2=2*u1,Dk=Math.PI,Mk=2*Dk,nh=1e-6,V_e=Mk-nh;function lY(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function U_e(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return lY;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class B_e{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?lY:U_e(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,l=this._y1,u=r-e,d=i-n,h=a-e,p=l-n,y=h*h+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(y>nh)if(!(Math.abs(p*u-d*h)>nh)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let v=r-a,w=i-l,_=u*u+d*d,E=v*v+w*w,C=Math.sqrt(_),N=Math.sqrt(y),O=s*Math.tan((Dk-Math.acos((_+y-E)/(2*C*N)))/2),R=O/N,D=O/C;Math.abs(R-1)>nh&&this._append`L${e+R*h},${n+R*p}`,this._append`A${s},${s},0,0,${+(p*v>h*w)},${this._x1=e+D*u},${this._y1=n+D*d}`}}arc(e,n,r,i,s,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),u=r*Math.sin(i),d=e+l,h=n+u,p=1^a,y=a?i-s:s-i;this._x1===null?this._append`M${d},${h}`:(Math.abs(this._x1-d)>nh||Math.abs(this._y1-h)>nh)&&this._append`L${d},${h}`,r&&(y<0&&(y=y%Mk+Mk),y>V_e?this._append`A${r},${r},0,1,${p},${e-l},${n-u}A${r},${r},0,1,${p},${this._x1=d},${this._y1=h}`:y>nh&&this._append`A${r},${r},0,${+(y>=Dk)},${p},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function bj(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new B_e(e)}function wj(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function cY(t){this._context=t}cY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function f2(t){return new cY(t)}function uY(t){return t[0]}function dY(t){return t[1]}function hY(t,e){var n=Dn(!0),r=null,i=f2,s=null,a=bj(l);t=typeof t=="function"?t:t===void 0?uY:Dn(t),e=typeof e=="function"?e:e===void 0?dY:Dn(e);function l(u){var d,h=(u=wj(u)).length,p,y=!1,v;for(r==null&&(s=i(v=a())),d=0;d<=h;++d)!(d<h&&n(p=u[d],d,u))===y&&((y=!y)?s.lineStart():s.lineEnd()),y&&s.point(+t(p,d,u),+e(p,d,u));if(v)return s=null,v+""||null}return l.x=function(u){return arguments.length?(t=typeof u=="function"?u:Dn(+u),l):t},l.y=function(u){return arguments.length?(e=typeof u=="function"?u:Dn(+u),l):e},l.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Dn(!!u),l):n},l.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),l):i},l.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),l):r},l}function yw(t,e,n){var r=null,i=Dn(!0),s=null,a=f2,l=null,u=bj(d);t=typeof t=="function"?t:t===void 0?uY:Dn(+t),e=typeof e=="function"?e:Dn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?dY:Dn(+n);function d(p){var y,v,w,_=(p=wj(p)).length,E,C=!1,N,O=new Array(_),R=new Array(_);for(s==null&&(l=a(N=u())),y=0;y<=_;++y){if(!(y<_&&i(E=p[y],y,p))===C)if(C=!C)v=y,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),w=y-1;w>=v;--w)l.point(O[w],R[w]);l.lineEnd(),l.areaEnd()}C&&(O[y]=+t(E,y,p),R[y]=+e(E,y,p),l.point(r?+r(E,y,p):O[y],n?+n(E,y,p):R[y]))}if(N)return l=null,N+""||null}function h(){return hY().defined(i).curve(a).context(s)}return d.x=function(p){return arguments.length?(t=typeof p=="function"?p:Dn(+p),r=null,d):t},d.x0=function(p){return arguments.length?(t=typeof p=="function"?p:Dn(+p),d):t},d.x1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Dn(+p),d):r},d.y=function(p){return arguments.length?(e=typeof p=="function"?p:Dn(+p),n=null,d):e},d.y0=function(p){return arguments.length?(e=typeof p=="function"?p:Dn(+p),d):e},d.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Dn(+p),d):n},d.lineX0=d.lineY0=function(){return h().x(t).y(e)},d.lineY1=function(){return h().x(t).y(n)},d.lineX1=function(){return h().x(r).y(e)},d.defined=function(p){return arguments.length?(i=typeof p=="function"?p:Dn(!!p),d):i},d.curve=function(p){return arguments.length?(a=p,s!=null&&(l=a(s)),d):a},d.context=function(p){return arguments.length?(p==null?s=l=null:l=a(s=p),d):s},d}class fY{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function z_e(t){return new fY(t,!0)}function $_e(t){return new fY(t,!1)}const xj={draw(t,e){const n=zo(e/u1);t.moveTo(n,0),t.arc(0,0,n,0,h2)}},F_e={draw(t,e){const n=zo(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},mY=zo(1/3),H_e=mY*2,q_e={draw(t,e){const n=zo(e/H_e),r=n*mY;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},G_e={draw(t,e){const n=zo(e),r=-n/2;t.rect(r,r,n,n)}},W_e=.8908130915292852,pY=c1(u1/10)/c1(7*u1/10),K_e=c1(h2/10)*pY,Y_e=-oY(h2/10)*pY,X_e={draw(t,e){const n=zo(e*W_e),r=K_e*n,i=Y_e*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const a=h2*s/5,l=oY(a),u=c1(a);t.lineTo(u*n,-l*n),t.lineTo(l*r-u*i,u*r+l*i)}t.closePath()}},uC=zo(3),Q_e={draw(t,e){const n=-zo(e/(uC*3));t.moveTo(0,n*2),t.lineTo(-uC*n,-n),t.lineTo(uC*n,-n),t.closePath()}},Va=-.5,Ua=zo(3)/2,Lk=1/zo(12),J_e=(Lk/2+1)*3,Z_e={draw(t,e){const n=zo(e/J_e),r=n/2,i=n*Lk,s=r,a=n*Lk+n,l=-s,u=a;t.moveTo(r,i),t.lineTo(s,a),t.lineTo(l,u),t.lineTo(Va*r-Ua*i,Ua*r+Va*i),t.lineTo(Va*s-Ua*a,Ua*s+Va*a),t.lineTo(Va*l-Ua*u,Ua*l+Va*u),t.lineTo(Va*r+Ua*i,Va*i-Ua*r),t.lineTo(Va*s+Ua*a,Va*a-Ua*s),t.lineTo(Va*l+Ua*u,Va*u-Ua*l),t.closePath()}};function e2e(t,e){let n=null,r=bj(i);t=typeof t=="function"?t:Dn(t||xj),e=typeof e=="function"?e:Dn(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:Dn(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:Dn(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function d1(){}function h1(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function gY(t){this._context=t}gY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:h1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:h1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function t2e(t){return new gY(t)}function yY(t){this._context=t}yY.prototype={areaStart:d1,areaEnd:d1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:h1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function n2e(t){return new yY(t)}function vY(t){this._context=t}vY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:h1(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function r2e(t){return new vY(t)}function bY(t){this._context=t}bY.prototype={areaStart:d1,areaEnd:d1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function i2e(t){return new bY(t)}function F7(t){return t<0?-1:1}function H7(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),l=(s*i+a*r)/(r+i);return(F7(s)+F7(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(l))||0}function q7(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function dC(t,e,n){var r=t._x0,i=t._y0,s=t._x1,a=t._y1,l=(s-r)/3;t._context.bezierCurveTo(r+l,i+l*e,s-l,a-l*n,s,a)}function f1(t){this._context=t}f1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:dC(this,this._t0,q7(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,dC(this,q7(this,n=H7(this,t,e)),n);break;default:dC(this,this._t0,n=H7(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function wY(t){this._context=new xY(t)}(wY.prototype=Object.create(f1.prototype)).point=function(t,e){f1.prototype.point.call(this,e,t)};function xY(t){this._context=t}xY.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function s2e(t){return new f1(t)}function a2e(t){return new wY(t)}function _Y(t){this._context=t}_Y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=G7(t),i=G7(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function G7(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function o2e(t){return new _Y(t)}function m2(t,e){this._context=t,this._t=e}m2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function l2e(t){return new m2(t,.5)}function c2e(t){return new m2(t,0)}function u2e(t){return new m2(t,1)}function Bh(t,e){if((a=t.length)>1)for(var n=1,r,i,s=t[e[0]],a,l=s.length;n<a;++n)for(i=s,s=t[e[n]],r=0;r<l;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Vk(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function d2e(t,e){return t[e]}function h2e(t){const e=[];return e.key=t,e}function f2e(){var t=Dn([]),e=Vk,n=Bh,r=d2e;function i(s){var a=Array.from(t.apply(this,arguments),h2e),l,u=a.length,d=-1,h;for(const p of s)for(l=0,++d;l<u;++l)(a[l][d]=[0,+r(p,a[l].key,d,s)]).data=p;for(l=0,h=wj(e(a));l<u;++l)a[h[l]].index=l;return n(a,h),a}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:Dn(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Dn(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?Vk:typeof s=="function"?s:Dn(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??Bh,i):n},i}function m2e(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,a;i<s;++i){for(a=n=0;n<r;++n)a+=t[n][i][1]||0;if(a)for(n=0;n<r;++n)t[n][i][1]/=a}Bh(t,e)}}function p2e(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var a=0,l=0;a<i;++a)l+=t[a][n][1]||0;r[n][1]+=r[n][0]=-l/2}Bh(t,e)}}function g2e(t,e){if(!(!((a=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,a;r<s;++r){for(var l=0,u=0,d=0;l<a;++l){for(var h=t[e[l]],p=h[r][1]||0,y=h[r-1][1]||0,v=(p-y)/2,w=0;w<l;++w){var _=t[e[w]],E=_[r][1]||0,C=_[r-1][1]||0;v+=E-C}u+=p,d+=v*p}i[r-1][1]+=i[r-1][0]=n,u&&(n-=d/u)}i[r-1][1]+=i[r-1][0]=n,Bh(t,e)}}var hC={},fC={},W7;function y2e(){return W7||(W7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(fC)),fC}var mC={},K7;function EY(){return K7||(K7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(mC)),mC}var pC={},Y7;function _j(){return Y7||(Y7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(pC)),pC}var gC={},yC={},X7;function v2e(){return X7||(X7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(yC)),yC}var Q7;function Ej(){return Q7||(Q7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=v2e(),n=_j();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const s=[],a=i.length;if(a===0)return s;let l=0,u="",d="",h=!1;for(i.charCodeAt(0)===46&&(s.push(""),l++);l<a;){const p=i[l];d?p==="\\"&&l+1<a?(l++,u+=i[l]):p===d?d="":u+=p:h?p==='"'||p==="'"?d=p:p==="]"?(h=!1,s.push(u),u=""):u+=p:p==="["?(h=!0,u&&(s.push(u),u="")):p==="."?u&&(s.push(u),u=""):u+=p,l++}return u&&s.push(u),s}t.toPath=r})(gC)),gC}var J7;function Tj(){return J7||(J7=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=y2e(),n=EY(),r=_j(),i=Ej();function s(l,u,d){if(l==null)return d;switch(typeof u){case"string":{if(e.isUnsafeProperty(u))return d;const h=l[u];return h===void 0?n.isDeepKey(u)?s(l,i.toPath(u),d):d:h}case"number":case"symbol":{typeof u=="number"&&(u=r.toKey(u));const h=l[u];return h===void 0?d:h}default:{if(Array.isArray(u))return a(l,u,d);if(Object.is(u==null?void 0:u.valueOf(),-0)?u="-0":u=String(u),e.isUnsafeProperty(u))return d;const h=l[u];return h===void 0?d:h}}}function a(l,u,d){if(u.length===0)return d;let h=l;for(let p=0;p<u.length;p++){if(h==null||e.isUnsafeProperty(u[p]))return d;h=h[u[p]]}return h===void 0?d:h}t.get=s})(hC)),hC}var vC,Z7;function b2e(){return Z7||(Z7=1,vC=Tj().get),vC}var w2e=b2e();const zh=va(w2e);var x2e=4;function Du(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x2e,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function Er(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,s,a)=>{var l=n[a-1];return typeof l=="string"?i+l+s:l!==void 0?i+Du(l)+s:i+s},"")}var rs=t=>t===0?0:t>0?1:-1,Lo=t=>typeof t=="number"&&t!=+t,Cc=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Ge=t=>(typeof t=="number"||t instanceof Number)&&!Lo(t),wl=t=>Ge(t)||typeof t=="string",_2e=0,cy=t=>{var e=++_2e;return"".concat(t||"").concat(e)},ha=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ge(e)&&typeof e!="string")return r;var s;if(Cc(e)){if(n==null)return r;var a=e.indexOf("%");s=n*parseFloat(e.slice(0,a))/100}else s=+e;return Lo(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},TY=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function Ui(t,e,n){return Ge(t)&&Ge(e)?Du(t+n*(e-t)):e}function SY(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):zh(r,e))===n)}var _i=t=>t===null||typeof t>"u",nv=t=>_i(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function E2e(t){return t!=null}function rv(){}var T2e=["type","size","sizeType"];function Uk(){return Uk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uk.apply(null,arguments)}function e9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function t9(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?e9(Object(n),!0).forEach(function(r){S2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function S2e(t,e,n){return(e=C2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C2e(t){var e=A2e(t,"string");return typeof e=="symbol"?e:e+""}function A2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function N2e(t,e){if(t==null)return{};var n,r,i=k2e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function k2e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var CY={symbolCircle:xj,symbolCross:F_e,symbolDiamond:q_e,symbolSquare:G_e,symbolStar:X_e,symbolTriangle:Q_e,symbolWye:Z_e},I2e=Math.PI/180,O2e=t=>{var e="symbol".concat(nv(t));return CY[e]||xj},j2e=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*I2e;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},P2e=(t,e)=>{CY["symbol".concat(nv(t))]=e},Sj=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=N2e(t,T2e),s=t9(t9({},i),{},{type:e,size:n,sizeType:r}),a="circle";typeof e=="string"&&(a=e);var l=()=>{var y=O2e(a),v=e2e().type(y).size(j2e(n,r,a)),w=v();if(w!==null)return w},{className:u,cx:d,cy:h}=s,p=ws(s);return Ge(d)&&Ge(h)&&Ge(n)?S.createElement("path",Uk({},p,{className:sn("recharts-symbols",u),transform:"translate(".concat(d,", ").concat(h,")"),d:l()})):null};Sj.registerSymbol=P2e;var AY=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,Cj=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(S.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{yj(i)&&(r[i]=(s=>n[i](n,s)))}),r},R2e=(t,e,n)=>r=>(t(e,n,r),null),Aj=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var s=t[i];yj(i)&&typeof s=="function"&&(r||(r={}),r[i]=R2e(s,e,n))}),r};function n9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function D2e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n9(Object(n),!0).forEach(function(r){M2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function M2e(t,e,n){return(e=L2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L2e(t){var e=V2e(t,"string");return typeof e=="symbol"?e:e+""}function V2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function li(t,e){var n=D2e({},t),r=e,i=Object.keys(e),s=i.reduce((a,l)=>(a[l]===void 0&&r[l]!==void 0&&(a[l]=r[l]),a),n);return s}function m1(){return m1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m1.apply(null,arguments)}function r9(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function U2e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r9(Object(n),!0).forEach(function(r){B2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r9(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function B2e(t,e,n){return(e=z2e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z2e(t){var e=$2e(t,"string");return typeof e=="symbol"?e:e+""}function $2e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $a=32,F2e={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function H2e(t){var{data:e,iconType:n,inactiveColor:r}=t,i=$a/2,s=$a/6,a=$a/3,l=e.inactive?r:e.color,u=n??e.type;if(u==="none")return null;if(u==="plainline"){var d;return S.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(d=e.payload)===null||d===void 0?void 0:d.strokeDasharray,x1:0,y1:i,x2:$a,y2:i,className:"recharts-legend-icon"})}if(u==="line")return S.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(i,"h").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*a,",").concat(i,`
            H`).concat($a,"M").concat(2*a,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(a,",").concat(i),className:"recharts-legend-icon"});if(u==="rect")return S.createElement("path",{stroke:"none",fill:l,d:"M0,".concat($a/8,"h").concat($a,"v").concat($a*3/4,"h").concat(-$a,"z"),className:"recharts-legend-icon"});if(S.isValidElement(e.legendIcon)){var h=U2e({},e);return delete h.legendIcon,S.cloneElement(e.legendIcon,h)}return S.createElement(Sj,{fill:l,cx:i,cy:i,size:$a,sizeType:"diameter",type:u})}function q2e(t){var{payload:e,iconSize:n,layout:r,formatter:i,inactiveColor:s,iconType:a}=t,l={x:0,y:0,width:$a,height:$a},u={display:r==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((h,p)=>{var y=h.formatter||i,v=sn({"recharts-legend-item":!0,["legend-item-".concat(p)]:!0,inactive:h.inactive});if(h.type==="none")return null;var w=h.inactive?s:h.color,_=y?y(h.value,h,p):h.value;return S.createElement("li",m1({className:v,style:u,key:"legend-item-".concat(p)},Aj(t,h,p)),S.createElement(vj,{width:n,height:n,viewBox:l,style:d,"aria-label":"".concat(_," legend icon")},S.createElement(H2e,{data:h,iconType:a,inactiveColor:s})),S.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},_))})}var G2e=t=>{var e=li(t,F2e),{payload:n,layout:r,align:i}=e;if(!n||!n.length)return null;var s={padding:0,margin:0,textAlign:r==="horizontal"?i:"left"};return S.createElement("ul",{className:"recharts-default-legend",style:s},S.createElement(q2e,m1({},e,{payload:n})))},bC={},wC={},i9;function W2e(){return i9||(i9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let s=0;s<n.length;s++){const a=n[s],l=r(a);i.has(l)||i.set(l,a)}return Array.from(i.values())}t.uniqBy=e})(wC)),wC}var xC={},s9;function NY(){return s9||(s9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(xC)),xC}var _C={},EC={},TC={},a9;function K2e(){return a9||(a9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(TC)),TC}var o9;function Nj(){return o9||(o9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=K2e();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(EC)),EC}var SC={},l9;function Y2e(){return l9||(l9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(SC)),SC}var c9;function X2e(){return c9||(c9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Nj(),n=Y2e();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(_C)),_C}var CC={},AC={},u9;function Q2e(){return u9||(u9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Tj();function n(r){return function(i){return e.get(i,r)}}t.property=n})(AC)),AC}var NC={},kC={},IC={},OC={},d9;function kY(){return d9||(d9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(OC)),OC}var jC={},h9;function IY(){return h9||(h9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(jC)),jC}var PC={},f9;function OY(){return f9||(f9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(PC)),PC}var m9;function J2e(){return m9||(m9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kY(),n=IY(),r=OY();function i(h,p,y){return typeof y!="function"?i(h,p,()=>{}):s(h,p,function v(w,_,E,C,N,O){const R=y(w,_,E,C,N,O);return R!==void 0?!!R:s(w,_,v,O)},new Map)}function s(h,p,y,v){if(p===h)return!0;switch(typeof p){case"object":return a(h,p,y,v);case"function":return Object.keys(p).length>0?s(h,{...p},y,v):r.eq(h,p);default:return e.isObject(h)?typeof p=="string"?p==="":!0:r.eq(h,p)}}function a(h,p,y,v){if(p==null)return!0;if(Array.isArray(p))return u(h,p,y,v);if(p instanceof Map)return l(h,p,y,v);if(p instanceof Set)return d(h,p,y,v);const w=Object.keys(p);if(h==null||n.isPrimitive(h))return w.length===0;if(w.length===0)return!0;if(v!=null&&v.has(p))return v.get(p)===h;v==null||v.set(p,h);try{for(let _=0;_<w.length;_++){const E=w[_];if(!n.isPrimitive(h)&&!(E in h)||p[E]===void 0&&h[E]!==void 0||p[E]===null&&h[E]!==null||!y(h[E],p[E],E,h,p,v))return!1}return!0}finally{v==null||v.delete(p)}}function l(h,p,y,v){if(p.size===0)return!0;if(!(h instanceof Map))return!1;for(const[w,_]of p.entries()){const E=h.get(w);if(y(E,_,w,h,p,v)===!1)return!1}return!0}function u(h,p,y,v){if(p.length===0)return!0;if(!Array.isArray(h))return!1;const w=new Set;for(let _=0;_<p.length;_++){const E=p[_];let C=!1;for(let N=0;N<h.length;N++){if(w.has(N))continue;const O=h[N];let R=!1;if(y(O,E,_,h,p,v)&&(R=!0),R){w.add(N),C=!0;break}}if(!C)return!1}return!0}function d(h,p,y,v){return p.size===0?!0:h instanceof Set?u([...h],[...p],y,v):!1}t.isMatchWith=i,t.isSetMatch=d})(IC)),IC}var p9;function jY(){return p9||(p9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=J2e();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(kC)),kC}var RC={},DC={},MC={},g9;function Z2e(){return g9||(g9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(MC)),MC}var LC={},y9;function PY(){return y9||(y9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(LC)),LC}var VC={},v9;function RY(){return v9||(v9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",a="[object Symbol]",l="[object Date]",u="[object Map]",d="[object Set]",h="[object Array]",p="[object Function]",y="[object ArrayBuffer]",v="[object Object]",w="[object Error]",_="[object DataView]",E="[object Uint8Array]",C="[object Uint8ClampedArray]",N="[object Uint16Array]",O="[object Uint32Array]",R="[object BigUint64Array]",D="[object Int8Array]",P="[object Int16Array]",A="[object Int32Array]",k="[object BigInt64Array]",M="[object Float32Array]",V="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=y,t.arrayTag=h,t.bigInt64ArrayTag=k,t.bigUint64ArrayTag=R,t.booleanTag=i,t.dataViewTag=_,t.dateTag=l,t.errorTag=w,t.float32ArrayTag=M,t.float64ArrayTag=V,t.functionTag=p,t.int16ArrayTag=P,t.int32ArrayTag=A,t.int8ArrayTag=D,t.mapTag=u,t.numberTag=r,t.objectTag=v,t.regexpTag=e,t.setTag=d,t.stringTag=n,t.symbolTag=a,t.uint16ArrayTag=N,t.uint32ArrayTag=O,t.uint8ArrayTag=E,t.uint8ClampedArrayTag=C})(VC)),VC}var UC={},b9;function eEe(){return b9||(b9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(UC)),UC}var w9;function DY(){return w9||(w9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Z2e(),n=PY(),r=RY(),i=IY(),s=eEe();function a(h,p){return l(h,void 0,h,new Map,p)}function l(h,p,y,v=new Map,w=void 0){const _=w==null?void 0:w(h,p,y,v);if(_!==void 0)return _;if(i.isPrimitive(h))return h;if(v.has(h))return v.get(h);if(Array.isArray(h)){const E=new Array(h.length);v.set(h,E);for(let C=0;C<h.length;C++)E[C]=l(h[C],C,y,v,w);return Object.hasOwn(h,"index")&&(E.index=h.index),Object.hasOwn(h,"input")&&(E.input=h.input),E}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const E=new RegExp(h.source,h.flags);return E.lastIndex=h.lastIndex,E}if(h instanceof Map){const E=new Map;v.set(h,E);for(const[C,N]of h)E.set(C,l(N,C,y,v,w));return E}if(h instanceof Set){const E=new Set;v.set(h,E);for(const C of h)E.add(l(C,void 0,y,v,w));return E}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(s.isTypedArray(h)){const E=new(Object.getPrototypeOf(h)).constructor(h.length);v.set(h,E);for(let C=0;C<h.length;C++)E[C]=l(h[C],C,y,v,w);return E}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const E=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return v.set(h,E),u(E,h,y,v,w),E}if(typeof File<"u"&&h instanceof File){const E=new File([h],h.name,{type:h.type});return v.set(h,E),u(E,h,y,v,w),E}if(typeof Blob<"u"&&h instanceof Blob){const E=new Blob([h],{type:h.type});return v.set(h,E),u(E,h,y,v,w),E}if(h instanceof Error){const E=new h.constructor;return v.set(h,E),E.message=h.message,E.name=h.name,E.stack=h.stack,E.cause=h.cause,u(E,h,y,v,w),E}if(h instanceof Boolean){const E=new Boolean(h.valueOf());return v.set(h,E),u(E,h,y,v,w),E}if(h instanceof Number){const E=new Number(h.valueOf());return v.set(h,E),u(E,h,y,v,w),E}if(h instanceof String){const E=new String(h.valueOf());return v.set(h,E),u(E,h,y,v,w),E}if(typeof h=="object"&&d(h)){const E=Object.create(Object.getPrototypeOf(h));return v.set(h,E),u(E,h,y,v,w),E}return h}function u(h,p,y=h,v,w){const _=[...Object.keys(p),...e.getSymbols(p)];for(let E=0;E<_.length;E++){const C=_[E],N=Object.getOwnPropertyDescriptor(h,C);(N==null||N.writable)&&(h[C]=l(p[C],C,y,v,w))}}function d(h){switch(n.getTag(h)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=a,t.cloneDeepWithImpl=l,t.copyProperties=u})(DC)),DC}var x9;function tEe(){return x9||(x9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DY();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(RC)),RC}var _9;function nEe(){return _9||(_9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jY(),n=tEe();function r(i){return i=n.cloneDeep(i),s=>e.isMatch(s,i)}t.matches=r})(NC)),NC}var BC={},zC={},$C={},E9;function rEe(){return E9||(E9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DY(),n=RY();function r(i,s){return e.cloneDeepWith(i,(a,l,u,d)=>{const h=s==null?void 0:s(a,l,u,d);if(h!==void 0)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const p=new i.constructor(i==null?void 0:i.valueOf());return e.copyProperties(p,i),p}case n.argumentsTag:{const p={};return e.copyProperties(p,i),p.length=i.length,p[Symbol.iterator]=i[Symbol.iterator],p}default:return}})}t.cloneDeepWith=r})($C)),$C}var T9;function iEe(){return T9||(T9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rEe();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(zC)),zC}var FC={},HC={},S9;function MY(){return S9||(S9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(HC)),HC}var qC={},C9;function sEe(){return C9||(C9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=PY();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(qC)),qC}var A9;function aEe(){return A9||(A9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=EY(),n=MY(),r=sEe(),i=Ej();function s(a,l){let u;if(Array.isArray(l)?u=l:typeof l=="string"&&e.isDeepKey(l)&&(a==null?void 0:a[l])==null?u=i.toPath(l):u=[l],u.length===0)return!1;let d=a;for(let h=0;h<u.length;h++){const p=u[h];if((d==null||!Object.hasOwn(d,p))&&!((Array.isArray(d)||r.isArguments(d))&&n.isIndex(p)&&p<d.length))return!1;d=d[p]}return!0}t.has=s})(FC)),FC}var N9;function oEe(){return N9||(N9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jY(),n=_j(),r=iEe(),i=Tj(),s=aEe();function a(l,u){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=n.toKey(l);break}}return u=r.cloneDeep(u),function(d){const h=i.get(d,l);return h===void 0?s.has(d,l):u===void 0?h===void 0:e.isMatch(h,u)}}t.matchesProperty=a})(BC)),BC}var k9;function lEe(){return k9||(k9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=NY(),n=Q2e(),r=nEe(),i=oEe();function s(a){if(a==null)return e.identity;switch(typeof a){case"function":return a;case"object":return Array.isArray(a)&&a.length===2?i.matchesProperty(a[0],a[1]):r.matches(a);case"string":case"symbol":case"number":return n.property(a)}}t.iteratee=s})(CC)),CC}var I9;function cEe(){return I9||(I9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=W2e(),n=NY(),r=X2e(),i=lEe();function s(a,l=n.identity){return r.isArrayLikeObject(a)?e.uniqBy(Array.from(a),i.iteratee(l)):[]}t.uniqBy=s})(bC)),bC}var GC,O9;function uEe(){return O9||(O9=1,GC=cEe().uniqBy),GC}var dEe=uEe();const j9=va(dEe);function LY(t,e,n){return e===!0?j9(t,n):typeof e=="function"?j9(t,e):t}var WC={exports:{}},KC={},YC={exports:{}},XC={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P9;function hEe(){if(P9)return XC;P9=1;var t=Yh();function e(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,a=t.useDebugValue;function l(p,y){var v=y(),w=r({inst:{value:v,getSnapshot:y}}),_=w[0].inst,E=w[1];return s(function(){_.value=v,_.getSnapshot=y,u(_)&&E({inst:_})},[p,v,y]),i(function(){return u(_)&&E({inst:_}),p(function(){u(_)&&E({inst:_})})},[p]),a(v),v}function u(p){var y=p.getSnapshot;p=p.value;try{var v=y();return!n(p,v)}catch{return!0}}function d(p,y){return y()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return XC.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,XC}var R9;function fEe(){return R9||(R9=1,YC.exports=hEe()),YC.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D9;function mEe(){if(D9)return KC;D9=1;var t=Yh(),e=fEe();function n(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,a=t.useEffect,l=t.useMemo,u=t.useDebugValue;return KC.useSyncExternalStoreWithSelector=function(d,h,p,y,v){var w=s(null);if(w.current===null){var _={hasValue:!1,value:null};w.current=_}else _=w.current;w=l(function(){function C(P){if(!N){if(N=!0,O=P,P=y(P),v!==void 0&&_.hasValue){var A=_.value;if(v(A,P))return R=A}return R=P}if(A=R,r(O,P))return A;var k=y(P);return v!==void 0&&v(A,k)?(O=P,A):(O=P,R=k)}var N=!1,O,R,D=p===void 0?null:p;return[function(){return C(h())},D===null?void 0:function(){return C(D())}]},[h,p,y,v]);var E=i(d,w[0],w[1]);return a(function(){_.hasValue=!0,_.value=E},[E]),u(E),E},KC}var M9;function pEe(){return M9||(M9=1,WC.exports=mEe()),WC.exports}var gEe=pEe(),kj=S.createContext(null),yEe=t=>t,Vn=()=>{var t=S.useContext(kj);return t?t.store.dispatch:yEe},ex=()=>{},vEe=()=>ex,bEe=(t,e)=>t===e;function Qe(t){var e=S.useContext(kj);return gEe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:vEe,e?e.store.getState:ex,e?e.store.getState:ex,e?t:ex,bEe)}function wEe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function xEe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function _Ee(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var L9=t=>Array.isArray(t)?t:[t];function EEe(t){const e=Array.isArray(t[0])?t[0]:t;return _Ee(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function TEe(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var SEe=class{constructor(t){this.value=t}deref(){return this.value}},CEe=typeof WeakRef<"u"?WeakRef:SEe,AEe=0,V9=1;function vw(){return{s:AEe,v:void 0,o:null,p:null}}function VY(t,e={}){let n=vw();const{resultEqualityCheck:r}=e;let i,s=0;function a(){var p;let l=n;const{length:u}=arguments;for(let y=0,v=u;y<v;y++){const w=arguments[y];if(typeof w=="function"||typeof w=="object"&&w!==null){let _=l.o;_===null&&(l.o=_=new WeakMap);const E=_.get(w);E===void 0?(l=vw(),_.set(w,l)):l=E}else{let _=l.p;_===null&&(l.p=_=new Map);const E=_.get(w);E===void 0?(l=vw(),_.set(w,l)):l=E}}const d=l;let h;if(l.s===V9)h=l.v;else if(h=t.apply(null,arguments),s++,r){const y=((p=i==null?void 0:i.deref)==null?void 0:p.call(i))??i;y!=null&&r(y,h)&&(h=y,s!==0&&s--),i=typeof h=="object"&&h!==null||typeof h=="function"?new CEe(h):h}return d.s=V9,d.v=h,h}return a.clearCache=()=>{n=vw(),a.resetResultsCount()},a.resultsCount=()=>s,a.resetResultsCount=()=>{s=0},a}function NEe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let s=0,a=0,l,u={},d=i.pop();typeof d=="object"&&(u=d,d=i.pop()),wEe(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const h={...n,...u},{memoize:p,memoizeOptions:y=[],argsMemoize:v=VY,argsMemoizeOptions:w=[]}=h,_=L9(y),E=L9(w),C=EEe(i),N=p(function(){return s++,d.apply(null,arguments)},..._),O=v(function(){a++;const D=TEe(C,arguments);return l=N.apply(null,D),l},...E);return Object.assign(O,{resultFunc:d,memoizedResultFunc:N,dependencies:C,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>l,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:p,argsMemoize:v})};return Object.assign(r,{withTypes:()=>r}),r}var he=NEe(VY),kEe=Object.assign((t,e=he)=>{xEe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((a,l,u)=>(a[n[u]]=l,a),{}))},{withTypes:()=>kEe}),QC={},JC={},ZC={},U9;function IEe(){return U9||(U9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const a=e(r),l=e(i);if(a===l&&a===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?l-a:a-l}return 0};t.compareValues=n})(ZC)),ZC}var eA={},tA={},B9;function UY(){return B9||(B9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(tA)),tA}var z9;function OEe(){return z9||(z9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UY(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,a){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||a!=null&&Object.hasOwn(a,s)}t.isKey=i})(eA)),eA}var $9;function jEe(){return $9||($9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=IEe(),n=OEe(),r=Ej();function i(s,a,l,u){if(s==null)return[];l=u?void 0:l,Array.isArray(s)||(s=Object.values(s)),Array.isArray(a)||(a=a==null?[null]:[a]),a.length===0&&(a=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(v=>String(v));const d=(v,w)=>{let _=v;for(let E=0;E<w.length&&_!=null;++E)_=_[w[E]];return _},h=(v,w)=>w==null||v==null?w:typeof v=="object"&&"key"in v?Object.hasOwn(w,v.key)?w[v.key]:d(w,v.path):typeof v=="function"?v(w):Array.isArray(v)?d(w,v):typeof w=="object"?w[v]:w,p=a.map(v=>(Array.isArray(v)&&v.length===1&&(v=v[0]),v==null||typeof v=="function"||Array.isArray(v)||n.isKey(v)?v:{key:v,path:r.toPath(v)}));return s.map(v=>({original:v,criteria:p.map(w=>h(w,v))})).slice().sort((v,w)=>{for(let _=0;_<p.length;_++){const E=e.compareValues(v.criteria[_],w.criteria[_],l[_]);if(E!==0)return E}return 0}).map(v=>v.original)}t.orderBy=i})(JC)),JC}var nA={},F9;function PEe(){return F9||(F9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],s=Math.floor(r),a=(l,u)=>{for(let d=0;d<l.length;d++){const h=l[d];Array.isArray(h)&&u<s?a(h,u+1):i.push(h)}};return a(n,0),i}t.flatten=e})(nA)),nA}var rA={},H9;function BY(){return H9||(H9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=MY(),n=Nj(),r=kY(),i=OY();function s(a,l,u){return r.isObject(u)&&(typeof l=="number"&&n.isArrayLike(u)&&e.isIndex(l)&&l<u.length||typeof l=="string"&&l in u)?i.eq(u[l],a):!1}t.isIterateeCall=s})(rA)),rA}var q9;function REe(){return q9||(q9=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jEe(),n=PEe(),r=BY();function i(s,...a){const l=a.length;return l>1&&r.isIterateeCall(s,a[0],a[1])?a=[]:l>2&&r.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),e.orderBy(s,n.flatten(a),["asc"])}t.sortBy=i})(QC)),QC}var iA,G9;function DEe(){return G9||(G9=1,iA=REe().sortBy),iA}var MEe=DEe();const p2=va(MEe);var zY=t=>t.legend.settings,LEe=t=>t.legend.size,VEe=t=>t.legend.payload,UEe=he([VEe,zY],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?p2(r,n):r});function BEe(){return Qe(UEe)}var bw=1;function $Y(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=S.useState({height:0,left:0,top:0,width:0}),r=S.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),a={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(a.height-e.height)>bw||Math.abs(a.left-e.left)>bw||Math.abs(a.top-e.top)>bw||Math.abs(a.width-e.width)>bw)&&n({height:a.height,left:a.left,top:a.top,width:a.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function Di(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var zEe=typeof Symbol=="function"&&Symbol.observable||"@@observable",W9=zEe,sA=()=>Math.random().toString(36).substring(7).split("").join("."),$Ee={INIT:`@@redux/INIT${sA()}`,REPLACE:`@@redux/REPLACE${sA()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${sA()}`},p1=$Ee;function Ij(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function FY(t,e,n){if(typeof t!="function")throw new Error(Di(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Di(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Di(1));return n(FY)(t,e)}let r=t,i=e,s=new Map,a=s,l=0,u=!1;function d(){a===s&&(a=new Map,s.forEach((E,C)=>{a.set(C,E)}))}function h(){if(u)throw new Error(Di(3));return i}function p(E){if(typeof E!="function")throw new Error(Di(4));if(u)throw new Error(Di(5));let C=!0;d();const N=l++;return a.set(N,E),function(){if(C){if(u)throw new Error(Di(6));C=!1,d(),a.delete(N),s=null}}}function y(E){if(!Ij(E))throw new Error(Di(7));if(typeof E.type>"u")throw new Error(Di(8));if(typeof E.type!="string")throw new Error(Di(17));if(u)throw new Error(Di(9));try{u=!0,i=r(i,E)}finally{u=!1}return(s=a).forEach(N=>{N()}),E}function v(E){if(typeof E!="function")throw new Error(Di(10));r=E,y({type:p1.REPLACE})}function w(){const E=p;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(Di(11));function N(){const R=C;R.next&&R.next(h())}return N(),{unsubscribe:E(N)}},[W9](){return this}}}return y({type:p1.INIT}),{dispatch:y,subscribe:p,getState:h,replaceReducer:v,[W9]:w}}function FEe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:p1.INIT})>"u")throw new Error(Di(12));if(typeof n(void 0,{type:p1.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Di(13))})}function HY(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const a=e[s];typeof t[a]=="function"&&(n[a]=t[a])}const r=Object.keys(n);let i;try{FEe(n)}catch(s){i=s}return function(a={},l){if(i)throw i;let u=!1;const d={};for(let h=0;h<r.length;h++){const p=r[h],y=n[p],v=a[p],w=y(v,l);if(typeof w>"u")throw l&&l.type,new Error(Di(14));d[p]=w,u=u||w!==v}return u=u||r.length!==Object.keys(a).length,u?d:a}}function g1(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function HEe(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(Di(15))};const a={getState:i.getState,dispatch:(u,...d)=>s(u,...d)},l=t.map(u=>u(a));return s=g1(...l)(i.dispatch),{...i,dispatch:s}}}function qY(t){return Ij(t)&&"type"in t&&typeof t.type=="string"}var GY=Symbol.for("immer-nothing"),K9=Symbol.for("immer-draftable"),xs=Symbol.for("immer-state");function wo(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var da=Object,mp=da.getPrototypeOf,y1="constructor",g2="prototype",Bk="configurable",v1="enumerable",tx="writable",uy="value",Ac=t=>!!t&&!!t[xs];function Vo(t){var e;return t?WY(t)||y2(t)||!!t[K9]||!!((e=t[y1])!=null&&e[K9])||v2(t)||b2(t):!1}var qEe=da[g2][y1].toString(),Y9=new WeakMap;function WY(t){if(!t||!Oj(t))return!1;const e=mp(t);if(e===null||e===da[g2])return!0;const n=da.hasOwnProperty.call(e,y1)&&e[y1];if(n===Object)return!0;if(!um(n))return!1;let r=Y9.get(n);return r===void 0&&(r=Function.toString.call(n),Y9.set(n,r)),r===qEe}function iv(t,e,n=!0){sv(t)===0?(n?Reflect.ownKeys(t):da.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function sv(t){const e=t[xs];return e?e.type_:y2(t)?1:v2(t)?2:b2(t)?3:0}var X9=(t,e,n=sv(t))=>n===2?t.has(e):da[g2].hasOwnProperty.call(t,e),zk=(t,e,n=sv(t))=>n===2?t.get(e):t[e],b1=(t,e,n,r=sv(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function GEe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var y2=Array.isArray,v2=t=>t instanceof Map,b2=t=>t instanceof Set,Oj=t=>typeof t=="object",um=t=>typeof t=="function",aA=t=>typeof t=="boolean",Jl=t=>t.copy_||t.base_,jj=t=>t.modified_?t.copy_:t.base_;function $k(t,e){if(v2(t))return new Map(t);if(b2(t))return new Set(t);if(y2(t))return Array[g2].slice.call(t);const n=WY(t);if(e===!0||e==="class_only"&&!n){const r=da.getOwnPropertyDescriptors(t);delete r[xs];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const a=i[s],l=r[a];l[tx]===!1&&(l[tx]=!0,l[Bk]=!0),(l.get||l.set)&&(r[a]={[Bk]:!0,[tx]:!0,[v1]:l[v1],[uy]:t[a]})}return da.create(mp(t),r)}else{const r=mp(t);if(r!==null&&n)return{...t};const i=da.create(r);return da.assign(i,t)}}function Pj(t,e=!1){return w2(t)||Ac(t)||!Vo(t)||(sv(t)>1&&da.defineProperties(t,{set:ww,add:ww,clear:ww,delete:ww}),da.freeze(t),e&&iv(t,(n,r)=>{Pj(r,!0)},!1)),t}function WEe(){wo(2)}var ww={[uy]:WEe};function w2(t){return t===null||!Oj(t)?!0:da.isFrozen(t)}var w1="MapSet",Fk="Patches",KY={};function pp(t){const e=KY[t];return e||wo(0,t),e}var KEe=t=>!!KY[t],dy,YY=()=>dy,YEe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:KEe(w1)?pp(w1):void 0});function Q9(t,e){e&&(t.patchPlugin_=pp(Fk),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Hk(t){qk(t),t.drafts_.forEach(XEe),t.drafts_=null}function qk(t){t===dy&&(dy=t.parent_)}var J9=t=>dy=YEe(dy,t);function XEe(t){const e=t[xs];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Z9(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[xs].modified_&&(Hk(e),wo(4)),Vo(t)&&(t=eV(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[xs].base_,t,e)}else t=eV(e,n);return QEe(e,t,!0),Hk(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==GY?t:void 0}function eV(t,e){if(w2(e))return e;const n=e[xs];if(!n)return Rj(e,t.handledSet_,t);if(!x2(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);JY(n,t)}return n.copy_}function QEe(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Pj(e,n)}function XY(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var x2=(t,e)=>t.scope_===e,JEe=[];function QY(t,e,n,r){const i=Jl(t),s=t.type_;if(r!==void 0&&zk(i,r,s)===e){b1(i,r,n,s);return}if(!t.draftLocations_){const l=t.draftLocations_=new Map;iv(i,(u,d)=>{if(Ac(d)){const h=l.get(d)||[];h.push(u),l.set(d,h)}})}const a=t.draftLocations_.get(e)??JEe;for(const l of a)b1(i,l,n,s)}function ZEe(t,e,n){t.callbacks_.push(function(i){var l;const s=e;if(!s||!x2(s,i))return;(l=i.mapSetPlugin_)==null||l.fixSetContents(s);const a=jj(s);QY(t,s.draft_??s,a,n),JY(s,i)})}function JY(t,e){var r;if(t.modified_&&!t.finalized_&&(t.type_===3||(((r=t.assigned_)==null?void 0:r.size)??0)>0)){const{patchPlugin_:i}=e;if(i){const s=i.getPath(t);s&&i.generatePatches_(t,s,e)}XY(t)}}function eTe(t,e,n){const{scope_:r}=t;if(Ac(n)){const i=n[xs];x2(i,r)&&i.callbacks_.push(function(){nx(t);const a=jj(i);QY(t,n,a,e)})}else Vo(n)&&t.callbacks_.push(function(){const s=Jl(t);zk(s,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&Rj(zk(t.copy_,e,t.type_),r.handledSet_,r)})}function Rj(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Ac(t)||e.has(t)||!Vo(t)||w2(t)||(e.add(t),iv(t,(r,i)=>{if(Ac(i)){const s=i[xs];if(x2(s,n)){const a=jj(s);b1(t,r,a,t.type_),XY(s)}}else Vo(i)&&Rj(i,e,n)})),t}function tTe(t,e){const n=y2(t),r={type_:n?1:0,scope_:e?e.scope_:YY(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,s=Dj;n&&(i=[r],s=hy);const{revoke:a,proxy:l}=Proxy.revocable(i,s);return r.draft_=l,r.revoke_=a,[l,r]}var Dj={get(t,e){if(e===xs)return t;const n=Jl(t);if(!X9(n,e,t.type_))return nTe(t,n,e);const r=n[e];if(t.finalized_||!Vo(r))return r;if(r===oA(t.base_,e)){nx(t);const i=t.type_===1?+e:e,s=Wk(t.scope_,r,t,i);return t.copy_[i]=s}return r},has(t,e){return e in Jl(t)},ownKeys(t){return Reflect.ownKeys(Jl(t))},set(t,e,n){const r=ZY(Jl(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=oA(Jl(t),e),s=i==null?void 0:i[xs];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(GEe(n,i)&&(n!==void 0||X9(t.base_,e,t.type_)))return!0;nx(t),Gk(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),eTe(t,e,n)),!0},deleteProperty(t,e){return nx(t),oA(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),Gk(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Jl(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[tx]:!0,[Bk]:t.type_!==1||e!=="length",[v1]:r[v1],[uy]:n[e]}},defineProperty(){wo(11)},getPrototypeOf(t){return mp(t.base_)},setPrototypeOf(){wo(12)}},hy={};iv(Dj,(t,e)=>{hy[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}});hy.deleteProperty=function(t,e){return hy.set.call(this,t,e,void 0)};hy.set=function(t,e,n){return Dj.set.call(this,t[0],e,n,t[0])};function oA(t,e){const n=t[xs];return(n?Jl(n):t)[e]}function nTe(t,e,n){var i;const r=ZY(e,n);return r?uy in r?r[uy]:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function ZY(t,e){if(!(e in t))return;let n=mp(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=mp(n)}}function Gk(t){t.modified_||(t.modified_=!0,t.parent_&&Gk(t.parent_))}function nx(t){t.copy_||(t.assigned_=new Map,t.copy_=$k(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var rTe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(um(n)&&!um(r)){const a=r;r=n;const l=this;return function(d=a,...h){return l.produce(d,p=>r.call(this,p,...h))}}um(r)||wo(6),i!==void 0&&!um(i)&&wo(7);let s;if(Vo(n)){const a=J9(this),l=Wk(a,n,void 0);let u=!0;try{s=r(l),u=!1}finally{u?Hk(a):qk(a)}return Q9(a,i),Z9(s,a)}else if(!n||!Oj(n)){if(s=r(n),s===void 0&&(s=n),s===GY&&(s=void 0),this.autoFreeze_&&Pj(s,!0),i){const a=[],l=[];pp(Fk).generateReplacementPatches_(n,s,{patches_:a,inversePatches_:l}),i(a,l)}return s}else wo(1,n)},this.produceWithPatches=(n,r)=>{if(um(n))return(l,...u)=>this.produceWithPatches(l,d=>n(d,...u));let i,s;return[this.produce(n,r,(l,u)=>{i=l,s=u}),i,s]},aA(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),aA(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),aA(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Vo(e)||wo(8),Ac(e)&&(e=Oo(e));const n=J9(this),r=Wk(n,e,void 0);return r[xs].isManual_=!0,qk(n),r}finishDraft(e,n){const r=e&&e[xs];(!r||!r.isManual_)&&wo(9);const{scope_:i}=r;return Q9(i,n),Z9(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const s=n[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(n=n.slice(r+1));const i=pp(Fk).applyPatches_;return Ac(e)?i(e,n):this.produce(e,s=>i(s,n))}};function Wk(t,e,n,r){const[i,s]=v2(e)?pp(w1).proxyMap_(e,n):b2(e)?pp(w1).proxySet_(e,n):tTe(e,n);return((n==null?void 0:n.scope_)??YY()).drafts_.push(i),s.callbacks_=(n==null?void 0:n.callbacks_)??[],s.key_=r,n&&r!==void 0?ZEe(n,s,r):s.callbacks_.push(function(u){var h;(h=u.mapSetPlugin_)==null||h.fixSetContents(s);const{patchPlugin_:d}=u;s.modified_&&d&&d.generatePatches_(s,[],u)}),i}function Oo(t){return Ac(t)||wo(10,t),eX(t)}function eX(t){if(!Vo(t)||w2(t))return t;const e=t[xs];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=$k(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=$k(t,!0);return iv(n,(i,s)=>{b1(n,i,eX(s))},r),e&&(e.finalized_=!1),n}var iTe=new rTe,tX=iTe.produce;function nX(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var sTe=nX(),aTe=nX,oTe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?g1:g1.apply(null,arguments)};function Qa(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(fa(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>qY(r)&&r.type===t,n}var rX=class p0 extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,p0.prototype)}static get[Symbol.species](){return p0}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new p0(...e[0].concat(this)):new p0(...e.concat(this))}};function tV(t){return Vo(t)?tX(t,()=>{}):t}function xw(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function lTe(t){return typeof t=="boolean"}var cTe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let a=new rX;return n&&(lTe(n)?a.push(sTe):a.push(aTe(n.extraArgument))),a},iX="RTK_autoBatch",Jn=()=>t=>({payload:t,meta:{[iX]:!0}}),nV=t=>e=>{setTimeout(e,t)},sX=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,a=!1;const l=new Set,u=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:nV(10):t.type==="callback"?t.queueNotification:nV(t.timeout),d=()=>{a=!1,s&&(s=!1,l.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const p=()=>i&&h(),y=r.subscribe(p);return l.add(h),()=>{y(),l.delete(h)}},dispatch(h){var p;try{return i=!((p=h==null?void 0:h.meta)!=null&&p[iX]),s=!i,s&&(a||(a=!0,u(d))),r.dispatch(h)}finally{i=!0}}})},uTe=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new rX(t);return r&&i.push(sX(typeof r=="object"?r:void 0)),i};function dTe(t){const e=cTe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:a=void 0}=t||{};let l;if(typeof n=="function")l=n;else if(Ij(n))l=HY(n);else throw new Error(fa(1));let u;typeof r=="function"?u=r(e):u=e();let d=g1;i&&(d=oTe({trace:!1,...typeof i=="object"&&i}));const h=HEe(...u),p=uTe(h);let y=typeof a=="function"?a(p):p();const v=d(...y);return FY(l,s,v)}function aX(t){const e={},n=[];let r;const i={addCase(s,a){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(fa(28));if(l in e)throw new Error(fa(29));return e[l]=a,i},addAsyncThunk(s,a){return a.pending&&(e[s.pending.type]=a.pending),a.rejected&&(e[s.rejected.type]=a.rejected),a.fulfilled&&(e[s.fulfilled.type]=a.fulfilled),a.settled&&n.push({matcher:s.settled,reducer:a.settled}),i},addMatcher(s,a){return n.push({matcher:s,reducer:a}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function hTe(t){return typeof t=="function"}function fTe(t,e){let[n,r,i]=aX(e),s;if(hTe(t))s=()=>tV(t());else{const l=tV(t);s=()=>l}function a(l=s(),u){let d=[n[u.type],...r.filter(({matcher:h})=>h(u)).map(({reducer:h})=>h)];return d.filter(h=>!!h).length===0&&(d=[i]),d.reduce((h,p)=>{if(p)if(Ac(h)){const v=p(h,u);return v===void 0?h:v}else{if(Vo(h))return tX(h,y=>p(y,u));{const y=p(h,u);if(y===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return h},l)}return a.getInitialState=s,a}var mTe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",pTe=(t=21)=>{let e="",n=t;for(;n--;)e+=mTe[Math.random()*64|0];return e},gTe=Symbol.for("rtk-slice-createasyncthunk");function yTe(t,e){return`${t}/${e}`}function vTe({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[gTe];return function(i){const{name:s,reducerPath:a=s}=i;if(!s)throw new Error(fa(11));const l=(typeof i.reducers=="function"?i.reducers(wTe()):i.reducers)||{},u=Object.keys(l),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(R,D){const P=typeof R=="string"?R:R.type;if(!P)throw new Error(fa(12));if(P in d.sliceCaseReducersByType)throw new Error(fa(13));return d.sliceCaseReducersByType[P]=D,h},addMatcher(R,D){return d.sliceMatchers.push({matcher:R,reducer:D}),h},exposeAction(R,D){return d.actionCreators[R]=D,h},exposeCaseReducer(R,D){return d.sliceCaseReducersByName[R]=D,h}};u.forEach(R=>{const D=l[R],P={reducerName:R,type:yTe(s,R),createNotation:typeof i.reducers=="function"};_Te(D)?TTe(P,D,h,e):xTe(P,D,h)});function p(){const[R={},D=[],P=void 0]=typeof i.extraReducers=="function"?aX(i.extraReducers):[i.extraReducers],A={...R,...d.sliceCaseReducersByType};return fTe(i.initialState,k=>{for(let M in A)k.addCase(M,A[M]);for(let M of d.sliceMatchers)k.addMatcher(M.matcher,M.reducer);for(let M of D)k.addMatcher(M.matcher,M.reducer);P&&k.addDefaultCase(P)})}const y=R=>R,v=new Map,w=new WeakMap;let _;function E(R,D){return _||(_=p()),_(R,D)}function C(){return _||(_=p()),_.getInitialState()}function N(R,D=!1){function P(k){let M=k[R];return typeof M>"u"&&D&&(M=xw(w,P,C)),M}function A(k=y){const M=xw(v,D,()=>new WeakMap);return xw(M,k,()=>{const V={};for(const[U,z]of Object.entries(i.selectors??{}))V[U]=bTe(z,k,()=>xw(w,k,C),D);return V})}return{reducerPath:R,getSelectors:A,get selectors(){return A(P)},selectSlice:P}}const O={name:s,reducer:E,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:C,...N(a),injectInto(R,{reducerPath:D,...P}={}){const A=D??a;return R.inject({reducerPath:A,reducer:E},P),{...O,...N(A,!0)}}};return O}}function bTe(t,e,n,r){function i(s,...a){let l=e(s);return typeof l>"u"&&r&&(l=n()),t(l,...a)}return i.unwrapped=t,i}var qs=vTe();function wTe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function xTe({type:t,reducerName:e,createNotation:n},r,i){let s,a;if("reducer"in r){if(n&&!ETe(r))throw new Error(fa(17));s=r.reducer,a=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,a?Qa(t,a):Qa(t))}function _Te(t){return t._reducerDefinitionType==="asyncThunk"}function ETe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function TTe({type:t,reducerName:e},n,r,i){if(!i)throw new Error(fa(18));const{payloadCreator:s,fulfilled:a,pending:l,rejected:u,settled:d,options:h}=n,p=i(t,s,h);r.exposeAction(e,p),a&&r.addCase(p.fulfilled,a),l&&r.addCase(p.pending,l),u&&r.addCase(p.rejected,u),d&&r.addMatcher(p.settled,d),r.exposeCaseReducer(e,{fulfilled:a||_w,pending:l||_w,rejected:u||_w,settled:d||_w})}function _w(){}var STe="task",oX="listener",lX="completed",Mj="cancelled",CTe=`task-${Mj}`,ATe=`task-${lX}`,Kk=`${oX}-${Mj}`,NTe=`${oX}-${lX}`,_2=class{constructor(t){oS(this,"name","TaskAbortError");oS(this,"message");this.code=t,this.message=`${STe} ${Mj} (reason: ${t})`}},Lj=(t,e)=>{if(typeof t!="function")throw new TypeError(fa(32))},x1=()=>{},cX=(t,e=x1)=>(t.catch(e),t),uX=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Eh=t=>{if(t.aborted)throw new _2(t.reason)};function dX(t,e){let n=x1;return new Promise((r,i)=>{const s=()=>i(new _2(t.reason));if(t.aborted){s();return}n=uX(t,s),e.finally(()=>n()).then(r,i)}).finally(()=>{n=x1})}var kTe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof _2?"cancelled":"rejected",error:n}}finally{e==null||e()}},_1=t=>e=>cX(dX(t,e).then(n=>(Eh(t),n))),hX=t=>{const e=_1(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Mm}=Object,rV={},E2="listenerMiddleware",ITe=(t,e)=>{const n=r=>uX(t,()=>r.abort(t.reason));return(r,i)=>{Lj(r);const s=new AbortController;n(s);const a=kTe(async()=>{Eh(t),Eh(s.signal);const l=await r({pause:_1(s.signal),delay:hX(s.signal),signal:s.signal});return Eh(s.signal),l},()=>s.abort(ATe));return i!=null&&i.autoJoin&&e.push(a.catch(x1)),{result:_1(t)(a),cancel(){s.abort(CTe)}}}},OTe=(t,e)=>{const n=async(r,i)=>{Eh(e);let s=()=>{};const l=[new Promise((u,d)=>{let h=t({predicate:r,effect:(p,y)=>{y.unsubscribe(),u([p,y.getState(),y.getOriginalState()])}});s=()=>{h(),d()}})];i!=null&&l.push(new Promise(u=>setTimeout(u,i,null)));try{const u=await dX(e,Promise.race(l));return Eh(e),u}finally{s()}};return(r,i)=>cX(n(r,i))},fX=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:s}=t;if(e)i=Qa(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(fa(21));return Lj(s),{predicate:i,type:e,effect:s}},mX=Mm(t=>{const{type:e,predicate:n,effect:r}=fX(t);return{id:pTe(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(fa(22))}}},{withTypes:()=>mX}),iV=(t,e)=>{const{type:n,effect:r,predicate:i}=fX(e);return Array.from(t.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},Yk=t=>{t.pending.forEach(e=>{e.abort(Kk)})},jTe=(t,e)=>()=>{for(const n of e.keys())Yk(n);t.clear()},sV=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},pX=Mm(Qa(`${E2}/add`),{withTypes:()=>pX}),PTe=Qa(`${E2}/removeAll`),gX=Mm(Qa(`${E2}/remove`),{withTypes:()=>gX}),RTe=(...t)=>{console.error(`${E2}/error`,...t)},av=(t={})=>{const e=new Map,n=new Map,r=v=>{const w=n.get(v)??0;n.set(v,w+1)},i=v=>{const w=n.get(v)??1;w===1?n.delete(v):n.set(v,w-1)},{extra:s,onError:a=RTe}=t;Lj(a);const l=v=>(v.unsubscribe=()=>e.delete(v.id),e.set(v.id,v),w=>{v.unsubscribe(),w!=null&&w.cancelActive&&Yk(v)}),u=v=>{const w=iV(e,v)??mX(v);return l(w)};Mm(u,{withTypes:()=>u});const d=v=>{const w=iV(e,v);return w&&(w.unsubscribe(),v.cancelActive&&Yk(w)),!!w};Mm(d,{withTypes:()=>d});const h=async(v,w,_,E)=>{const C=new AbortController,N=OTe(u,C.signal),O=[];try{v.pending.add(C),r(v),await Promise.resolve(v.effect(w,Mm({},_,{getOriginalState:E,condition:(R,D)=>N(R,D).then(Boolean),take:N,delay:hX(C.signal),pause:_1(C.signal),extra:s,signal:C.signal,fork:ITe(C.signal,O),unsubscribe:v.unsubscribe,subscribe:()=>{e.set(v.id,v)},cancelActiveListeners:()=>{v.pending.forEach((R,D,P)=>{R!==C&&(R.abort(Kk),P.delete(R))})},cancel:()=>{C.abort(Kk),v.pending.delete(C)},throwIfCancelled:()=>{Eh(C.signal)}})))}catch(R){R instanceof _2||sV(a,R,{raisedBy:"effect"})}finally{await Promise.all(O),C.abort(NTe),i(v),v.pending.delete(C)}},p=jTe(e,n);return{middleware:v=>w=>_=>{if(!qY(_))return w(_);if(pX.match(_))return u(_.payload);if(PTe.match(_)){p();return}if(gX.match(_))return d(_.payload);let E=v.getState();const C=()=>{if(E===rV)throw new Error(fa(23));return E};let N;try{if(N=w(_),e.size>0){const O=v.getState(),R=Array.from(e.values());for(const D of R){let P=!1;try{P=D.predicate(_,O,E)}catch(A){P=!1,sV(a,A,{raisedBy:"predicate"})}P&&h(D,_,v,C)}}}finally{E=rV}return N},startListening:u,stopListening:d,clearListeners:p}};function fa(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var DTe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},yX=qs({name:"chartLayout",initialState:DTe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,s;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:MTe,setLayout:LTe,setChartSize:VTe,setScale:UTe}=yX.actions,BTe=yX.reducer;function vX(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function nr(t){return Number.isFinite(t)}function xl(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function aV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aV(Object(n),!0).forEach(function(r){zTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zTe(t,e,n){return(e=$Te(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $Te(t){var e=FTe(t,"string");return typeof e=="symbol"?e:e+""}function FTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gn(t,e,n){return _i(t)||_i(e)?n:wl(e)?zh(t,e,n):typeof e=="function"?e(t):n}var HTe=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:s,verticalAlign:a,layout:l}=e;if((l==="vertical"||l==="horizontal"&&a==="middle")&&s!=="center"&&Ge(t[s]))return xm(xm({},t),{},{[s]:t[s]+(r||0)});if((l==="horizontal"||l==="vertical"&&s==="center")&&a!=="middle"&&Ge(t[a]))return xm(xm({},t),{},{[a]:t[a]+(i||0)})}return t},Rc=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",bX=(t,e,n,r)=>{if(r)return t.map(l=>l.coordinate);var i,s,a=t.map(l=>(l.coordinate===e&&(i=!0),l.coordinate===n&&(s=!0),l.coordinate));return i||a.push(e),s||a.push(n),a},wX=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:s,scale:a,realScaleType:l,isCategorical:u,categoricalDomain:d,tickCount:h,ticks:p,niceTicks:y,axisType:v}=t;if(!a)return null;var w=l==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,_=i==="category"&&a.bandwidth?a.bandwidth()/w:0;if(_=v==="angleAxis"&&s&&s.length>=2?rs(s[0]-s[1])*2*_:_,p||y){var E=(p||y||[]).map((C,N)=>{var O=r?r.indexOf(C):C;return{coordinate:a(O)+_,value:C,offset:_,index:N}});return E.filter(C=>!Lo(C.coordinate))}return u&&d?d.map((C,N)=>({coordinate:a(C)+_,value:C,index:N,offset:_})):a.ticks&&h!=null?a.ticks(h).map((C,N)=>({coordinate:a(C)+_,value:C,offset:_,index:N})):a.domain().map((C,N)=>({coordinate:a(C)+_,value:r?r[C]:C,index:N,offset:_}))},oV=1e-4,qTe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-oV,s=Math.max(r[0],r[1])+oV,a=t(e[0]),l=t(e[n-1]);(a<i||a>s||l<i||l>s)&&t.domain([e[0],e[n-1]])}},GTe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var s=0,a=0,l=0;l<n;++l){var u=t[l],d=u==null?void 0:u[i];if(d!=null){var h=d[1],p=d[0],y=Lo(h)?p:h;y>=0?(d[0]=s,d[1]=s+y,s=h):(d[0]=a,d[1]=a+y,a=h)}}}},WTe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var s=0,a=0;a<n;++a){var l=t[a],u=l==null?void 0:l[i];if(u!=null){var d=Lo(u[1])?u[0]:u[1];d>=0?(u[0]=s,u[1]=s+d,s=u[1]):(u[0]=0,u[1]=0)}}}},KTe={sign:GTe,expand:m2e,none:Bh,silhouette:p2e,wiggle:g2e,positive:WTe},YTe=(t,e,n)=>{var r,i=(r=KTe[n])!==null&&r!==void 0?r:Bh,s=f2e().keys(e).value((l,u)=>Number(Gn(l,u,0))).order(Vk).offset(i),a=s(t);return a.forEach((l,u)=>{l.forEach((d,h)=>{var p=Gn(t[h],e[u],0);Array.isArray(p)&&p.length===2&&Ge(p[0])&&Ge(p[1])&&(d[0]=p[0],d[1]=p[1])})}),a};function XTe(t){return t==null?void 0:String(t)}function lV(t){var{axis:e,ticks:n,bandSize:r,entry:i,index:s,dataKey:a}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!_i(i[e.dataKey])){var l=SY(n,"value",i[e.dataKey]);if(l)return l.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var u=Gn(i,_i(a)?e.dataKey:a);return _i(u)?null:e.scale(u)}var QTe=t=>{var e=t.flat(2).filter(Ge);return[Math.min(...e),Math.max(...e)]},JTe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],ZTe=(t,e,n)=>{if(t!=null)return JTe(Object.keys(t).reduce((r,i)=>{var s=t[i];if(!s)return r;var{stackedData:a}=s,l=a.reduce((u,d)=>{var h=vX(d,e,n),p=QTe(h);return!nr(p[0])||!nr(p[1])?u:[Math.min(u[0],p[0]),Math.max(u[1],p[1])]},[1/0,-1/0]);return[Math.min(l[0],r[0]),Math.max(l[1],r[1])]},[1/0,-1/0]))},cV=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,uV=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,E1=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=p2(e,h=>h.coordinate),s=1/0,a=1,l=i.length;a<l;a++){var u=i[a],d=i[a-1];s=Math.min(((u==null?void 0:u.coordinate)||0)-((d==null?void 0:d.coordinate)||0),s)}return s===1/0?0:s}return n?void 0:0};function dV(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:s}=t;return xm(xm({},e),{},{dataKey:n,payload:r,value:i,name:s})}function T2(t,e){if(t)return String(t);if(typeof e=="string")return e}var eSe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},tSe=(t,e)=>e==="centric"?t.angle:t.radius,Dc=t=>t.layout.width,Mc=t=>t.layout.height,nSe=t=>t.layout.scale,xX=t=>t.layout.margin,S2=he(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),C2=he(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),_X="data-recharts-item-index",EX="data-recharts-item-id",ov=60;function hV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ew(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hV(Object(n),!0).forEach(function(r){rSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rSe(t,e,n){return(e=iSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iSe(t){var e=sSe(t,"string");return typeof e=="symbol"?e:e+""}function sSe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var aSe=t=>t.brush.height;function oSe(t){var e=C2(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:ov;return n+i}return n},0)}function lSe(t){var e=C2(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:ov;return n+i}return n},0)}function cSe(t){var e=S2(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function uSe(t){var e=S2(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Si=he([Dc,Mc,xX,aSe,oSe,lSe,cSe,uSe,zY,LEe],(t,e,n,r,i,s,a,l,u,d)=>{var h={left:(n.left||0)+i,right:(n.right||0)+s},p={top:(n.top||0)+a,bottom:(n.bottom||0)+l},y=Ew(Ew({},p),h),v=y.bottom;y.bottom+=r,y=HTe(y,u,d);var w=t-y.left-y.right,_=e-y.top-y.bottom;return Ew(Ew({brushBottom:v},y),{},{width:Math.max(w,0),height:Math.max(_,0)})}),dSe=he(Si,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),TX=he(Dc,Mc,(t,e)=>({x:0,y:0,width:t,height:e})),hSe=S.createContext(null),Gs=()=>S.useContext(hSe)!=null,A2=t=>t.brush,N2=he([A2,Si,xX],(t,e,n)=>({height:t.height,x:Ge(t.x)?t.x:e.left,y:Ge(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:Ge(t.width)?t.width:e.width})),lA={},cA={},uA={},fV;function fSe(){return fV||(fV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:s}={}){let a,l=null;const u=s!=null&&s.includes("leading"),d=s==null||s.includes("trailing"),h=()=>{l!==null&&(n.apply(a,l),a=void 0,l=null)},p=()=>{d&&h(),_()};let y=null;const v=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,p()},r)},w=()=>{y!==null&&(clearTimeout(y),y=null)},_=()=>{w(),a=void 0,l=null},E=()=>{h()},C=function(...N){if(i!=null&&i.aborted)return;a=this,l=N;const O=y==null;v(),u&&O&&h()};return C.schedule=v,C.cancel=_,C.flush=E,i==null||i.addEventListener("abort",_,{once:!0}),C}t.debounce=e})(uA)),uA}var mV;function mSe(){return mV||(mV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=fSe();function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:a=!1,trailing:l=!0,maxWait:u}=s,d=Array(2);a&&(d[0]="leading"),l&&(d[1]="trailing");let h,p=null;const y=e.debounce(function(..._){h=r.apply(this,_),p=null},i,{edges:d}),v=function(..._){return u!=null&&(p===null&&(p=Date.now()),Date.now()-p>=u)?(h=r.apply(this,_),p=Date.now(),y.cancel(),y.schedule(),h):(y.apply(this,_),h)},w=()=>(y.flush(),h);return v.cancel=y.cancel,v.flush=w,v}t.debounce=n})(cA)),cA}var pV;function pSe(){return pV||(pV=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=mSe();function n(r,i=0,s={}){const{leading:a=!0,trailing:l=!0}=s;return e.debounce(r,i,{leading:a,maxWait:i,trailing:l})}t.throttle=n})(lA)),lA}var dA,gV;function gSe(){return gV||(gV=1,dA=pSe().throttle),dA}var ySe=gSe();const vSe=va(ySe);var T1=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;console.warn(n.replace(/%s/g,()=>i[a++]))}},SX=(t,e,n)=>{var{width:r="100%",height:i="100%",aspect:s,maxHeight:a}=n,l=Cc(r)?t:Number(r),u=Cc(i)?e:Number(i);return s&&s>0&&(l?u=l/s:u&&(l=u*s),a&&u!=null&&u>a&&(u=a)),{calculatedWidth:l,calculatedHeight:u}},bSe={width:0,height:0,overflow:"visible"},wSe={width:0,overflowX:"visible"},xSe={height:0,overflowY:"visible"},_Se={},ESe=t=>{var{width:e,height:n}=t,r=Cc(e),i=Cc(n);return r&&i?bSe:r?wSe:i?xSe:_Se};function TSe(t){var{width:e,height:n,aspect:r}=t,i=e,s=n;return i===void 0&&s===void 0?(i="100%",s="100%"):i===void 0?i=r&&r>0?void 0:"100%":s===void 0&&(s=r&&r>0?void 0:"100%"),{width:i,height:s}}function Xk(){return Xk=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xk.apply(null,arguments)}function yV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yV(Object(n),!0).forEach(function(r){SSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SSe(t,e,n){return(e=CSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CSe(t){var e=ASe(t,"string");return typeof e=="symbol"?e:e+""}function ASe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CX=S.createContext({width:-1,height:-1});function NSe(t){return xl(t.width)&&xl(t.height)}function AX(t){var{children:e,width:n,height:r}=t,i=S.useMemo(()=>({width:n,height:r}),[n,r]);return NSe(i)?S.createElement(CX.Provider,{value:i},e):null}var Vj=()=>S.useContext(CX),kSe=S.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:s,minWidth:a=0,minHeight:l,maxHeight:u,children:d,debounce:h=0,id:p,className:y,onResize:v,style:w={}}=t,_=S.useRef(null),E=S.useRef();E.current=v,S.useImperativeHandle(e,()=>_.current);var[C,N]=S.useState({containerWidth:r.width,containerHeight:r.height}),O=S.useCallback((k,M)=>{N(V=>{var U=Math.round(k),z=Math.round(M);return V.containerWidth===U&&V.containerHeight===z?V:{containerWidth:U,containerHeight:z}})},[]);S.useEffect(()=>{if(_.current==null||typeof ResizeObserver>"u")return rv;var k=z=>{var $,{width:ne,height:fe}=z[0].contentRect;O(ne,fe),($=E.current)===null||$===void 0||$.call(E,ne,fe)};h>0&&(k=vSe(k,h,{trailing:!0,leading:!1}));var M=new ResizeObserver(k),{width:V,height:U}=_.current.getBoundingClientRect();return O(V,U),M.observe(_.current),()=>{M.disconnect()}},[O,h]);var{containerWidth:R,containerHeight:D}=C;T1(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:P,calculatedHeight:A}=SX(R,D,{width:i,height:s,aspect:n,maxHeight:u});return T1(P!=null&&P>0||A!=null&&A>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,A,i,s,a,l,n),S.createElement("div",{id:p?"".concat(p):void 0,className:sn("recharts-responsive-container",y),style:vV(vV({},w),{},{width:i,height:s,minWidth:a,minHeight:l,maxHeight:u}),ref:_},S.createElement("div",{style:ESe({width:i,height:s})},S.createElement(AX,{width:P,height:A},d)))}),Qk=S.forwardRef((t,e)=>{var n=Vj();if(xl(n.width)&&xl(n.height))return t.children;var{width:r,height:i}=TSe({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:a}=SX(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return Ge(s)&&Ge(a)?S.createElement(AX,{width:s,height:a},t.children):S.createElement(kSe,Xk({},t,{width:r,height:i,ref:e}))});function NX(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var k2=()=>{var t,e=Gs(),n=Qe(dSe),r=Qe(N2),i=(t=Qe(A2))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},ISe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},kX=()=>{var t;return(t=Qe(Si))!==null&&t!==void 0?t:ISe},Uj=()=>Qe(Dc),Bj=()=>Qe(Mc),OSe=()=>Qe(t=>t.layout.margin),pn=t=>t.layout.layoutType,zp=()=>Qe(pn),jSe=()=>{var t=zp();if(t==="horizontal"||t==="vertical")return t},PSe=()=>{var t=zp();return t!==void 0},I2=t=>{var e=Vn(),n=Gs(),{width:r,height:i}=t,s=Vj(),a=r,l=i;return s&&(a=s.width>0?s.width:r,l=s.height>0?s.height:i),S.useEffect(()=>{!n&&xl(a)&&xl(l)&&e(VTe({width:a,height:l}))},[e,n,a,l]),null},IX=Symbol.for("immer-nothing"),bV=Symbol.for("immer-draftable"),ga=Symbol.for("immer-state");function xo(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var fy=Object.getPrototypeOf;function gp(t){return!!t&&!!t[ga]}function $h(t){var e;return t?OX(t)||Array.isArray(t)||!!t[bV]||!!((e=t.constructor)!=null&&e[bV])||lv(t)||j2(t):!1}var RSe=Object.prototype.constructor.toString(),wV=new WeakMap;function OX(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=wV.get(n);return r===void 0&&(r=Function.toString.call(n),wV.set(n,r)),r===RSe}function S1(t,e,n=!0){O2(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function O2(t){const e=t[ga];return e?e.type_:Array.isArray(t)?1:lv(t)?2:j2(t)?3:0}function Jk(t,e){return O2(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function jX(t,e,n){const r=O2(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function DSe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function lv(t){return t instanceof Map}function j2(t){return t instanceof Set}function rh(t){return t.copy_||t.base_}function Zk(t,e){if(lv(t))return new Map(t);if(j2(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=OX(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[ga];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const a=i[s],l=r[a];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[a]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[a]})}return Object.create(fy(t),r)}else{const r=fy(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function zj(t,e=!1){return P2(t)||gp(t)||!$h(t)||(O2(t)>1&&Object.defineProperties(t,{set:Tw,add:Tw,clear:Tw,delete:Tw}),Object.freeze(t),e&&Object.values(t).forEach(n=>zj(n,!0))),t}function MSe(){xo(2)}var Tw={value:MSe};function P2(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var LSe={};function Fh(t){const e=LSe[t];return e||xo(0,t),e}var my;function PX(){return my}function VSe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function xV(t,e){e&&(Fh("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function eI(t){tI(t),t.drafts_.forEach(USe),t.drafts_=null}function tI(t){t===my&&(my=t.parent_)}function _V(t){return my=VSe(my,t)}function USe(t){const e=t[ga];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function EV(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[ga].modified_&&(eI(e),xo(4)),$h(t)&&(t=C1(e,t),e.parent_||A1(e,t)),e.patches_&&Fh("Patches").generateReplacementPatches_(n[ga].base_,t,e.patches_,e.inversePatches_)):t=C1(e,n,[]),eI(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==IX?t:void 0}function C1(t,e,n){if(P2(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[ga];if(!i)return S1(e,(s,a)=>TV(t,i,e,s,a,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return A1(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let a=s,l=!1;i.type_===3&&(a=new Set(s),s.clear(),l=!0),S1(a,(u,d)=>TV(t,i,s,u,d,n,l),r),A1(t,s,!1),n&&t.patches_&&Fh("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function TV(t,e,n,r,i,s,a){if(i==null||typeof i!="object"&&!a)return;const l=P2(i);if(!(l&&!a)){if(gp(i)){const u=s&&e&&e.type_!==3&&!Jk(e.assigned_,r)?s.concat(r):void 0,d=C1(t,i,u);if(jX(n,r,d),gp(d))t.canAutoFreeze_=!1;else return}else a&&n.add(i);if($h(i)&&!l){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&l)return;C1(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(lv(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&A1(t,i)}}}function A1(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&zj(e,n)}function BSe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:PX(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=$j;n&&(i=[r],s=py);const{revoke:a,proxy:l}=Proxy.revocable(i,s);return r.draft_=l,r.revoke_=a,l}var $j={get(t,e){if(e===ga)return t;const n=rh(t);if(!Jk(n,e))return zSe(t,n,e);const r=n[e];return t.finalized_||!$h(r)?r:r===hA(t.base_,e)?(fA(t),t.copy_[e]=rI(r,t)):r},has(t,e){return e in rh(t)},ownKeys(t){return Reflect.ownKeys(rh(t))},set(t,e,n){const r=RX(rh(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=hA(rh(t),e),s=i==null?void 0:i[ga];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(DSe(n,i)&&(n!==void 0||Jk(t.base_,e)))return!0;fA(t),nI(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return hA(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,fA(t),nI(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=rh(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){xo(11)},getPrototypeOf(t){return fy(t.base_)},setPrototypeOf(){xo(12)}},py={};S1($j,(t,e)=>{py[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});py.deleteProperty=function(t,e){return py.set.call(this,t,e,void 0)};py.set=function(t,e,n){return $j.set.call(this,t[0],e,n,t[0])};function hA(t,e){const n=t[ga];return(n?rh(n):t)[e]}function zSe(t,e,n){var i;const r=RX(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function RX(t,e){if(!(e in t))return;let n=fy(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=fy(n)}}function nI(t){t.modified_||(t.modified_=!0,t.parent_&&nI(t.parent_))}function fA(t){t.copy_||(t.copy_=Zk(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var $Se=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const a=this;return function(u=s,...d){return a.produce(u,h=>n.call(this,h,...d))}}typeof n!="function"&&xo(6),r!==void 0&&typeof r!="function"&&xo(7);let i;if($h(e)){const s=_V(this),a=rI(e,void 0);let l=!0;try{i=n(a),l=!1}finally{l?eI(s):tI(s)}return xV(s,r),EV(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===IX&&(i=void 0),this.autoFreeze_&&zj(i,!0),r){const s=[],a=[];Fh("Patches").generateReplacementPatches_(e,i,s,a),r(s,a)}return i}else xo(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(a,...l)=>this.produceWithPatches(a,u=>e(u,...l));let r,i;return[this.produce(e,n,(a,l)=>{r=a,i=l}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){$h(t)||xo(8),gp(t)&&(t=FSe(t));const e=_V(this),n=rI(t,void 0);return n[ga].isManual_=!0,tI(e),n}finishDraft(t,e){const n=t&&t[ga];(!n||!n.isManual_)&&xo(9);const{scope_:r}=n;return xV(r,e),EV(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=Fh("Patches").applyPatches_;return gp(t)?r(t,e):this.produce(t,i=>r(i,e))}};function rI(t,e){const n=lv(t)?Fh("MapSet").proxyMap_(t,e):j2(t)?Fh("MapSet").proxySet_(t,e):BSe(t,e);return(e?e.scope_:PX()).drafts_.push(n),n}function FSe(t){return gp(t)||xo(10,t),DX(t)}function DX(t){if(!$h(t)||P2(t))return t;const e=t[ga];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Zk(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=Zk(t,!0);return S1(n,(i,s)=>{jX(n,i,DX(s))},r),e&&(e.finalized_=!1),n}var HSe=new $Se;HSe.produce;var qSe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},MX=qs({name:"legend",initialState:qSe,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Jn()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Oo(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:Jn()},removeLegendPayload:{reducer(t,e){var n=Oo(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Jn()}}}),{setLegendSize:SV,setLegendSettings:GSe,addLegendPayload:LX,replaceLegendPayload:VX,removeLegendPayload:UX}=MX.actions,WSe=MX.reducer,KSe=["contextPayload"];function iI(){return iI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iI.apply(null,arguments)}function CV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CV(Object(n),!0).forEach(function(r){YSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function YSe(t,e,n){return(e=XSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XSe(t){var e=QSe(t,"string");return typeof e=="symbol"?e:e+""}function QSe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JSe(t,e){if(t==null)return{};var n,r,i=ZSe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ZSe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function eCe(t){return t.value}function tCe(t){var{contextPayload:e}=t,n=JSe(t,KSe),r=LY(e,t.payloadUniqBy,eCe),i=yp(yp({},n),{},{payload:r});return S.isValidElement(t.content)?S.cloneElement(t.content,i):typeof t.content=="function"?S.createElement(t.content,i):S.createElement(G2e,i)}function nCe(t,e,n,r,i,s){var{layout:a,align:l,verticalAlign:u}=e,d,h;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(l==="center"&&a==="vertical"?d={left:((r||0)-s.width)/2}:d=l==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(u==="middle"?h={top:((i||0)-s.height)/2}:h=u==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),yp(yp({},d),h)}function rCe(t){var e=Vn();return S.useEffect(()=>{e(GSe(t))},[e,t]),null}function iCe(t){var e=Vn();return S.useEffect(()=>(e(SV(t)),()=>{e(SV({width:0,height:0}))}),[e,t]),null}function sCe(t,e,n,r){return t==="vertical"&&Ge(e)?{height:e}:t==="horizontal"?{width:n||r}:null}var aCe={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function BX(t){var e=li(t,aCe),n=BEe(),r=L_e(),i=OSe(),{width:s,height:a,wrapperStyle:l,portal:u}=e,[d,h]=$Y([n]),p=Uj(),y=Bj();if(p==null||y==null)return null;var v=p-((i==null?void 0:i.left)||0)-((i==null?void 0:i.right)||0),w=sCe(e.layout,a,s,v),_=u?l:yp(yp({position:"absolute",width:(w==null?void 0:w.width)||s||"auto",height:(w==null?void 0:w.height)||a||"auto"},nCe(l,e,i,p,y,d)),l),E=u??r;if(E==null||n==null)return null;var C=S.createElement("div",{className:"recharts-legend-wrapper",style:_,ref:h},S.createElement(rCe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!u&&S.createElement(iCe,{width:d.width,height:d.height}),S.createElement(tCe,iI({},e,w,{margin:i,chartWidth:p,chartHeight:y,contextPayload:n})));return yo.createPortal(C,E)}BX.displayName="Legend";function sI(){return sI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sI.apply(null,arguments)}function AV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AV(Object(n),!0).forEach(function(r){oCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oCe(t,e,n){return(e=lCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lCe(t){var e=cCe(t,"string");return typeof e=="symbol"?e:e+""}function cCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uCe(t){return Array.isArray(t)&&wl(t[0])&&wl(t[1])?t.join(" ~ "):t}var dCe=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:s,formatter:a,itemSorter:l,wrapperClassName:u,labelClassName:d,label:h,labelFormatter:p,accessibilityLayer:y=!1}=t,v=()=>{if(s&&s.length){var D={padding:0,margin:0},P=(l?p2(s,l):s).map((A,k)=>{if(A.type==="none")return null;var M=A.formatter||a||uCe,{value:V,name:U}=A,z=V,$=U;if(M){var ne=M(V,U,A,k,s);if(Array.isArray(ne))[z,$]=ne;else if(ne!=null)z=ne;else return null}var fe=mA({display:"block",paddingTop:4,paddingBottom:4,color:A.color||"#000"},r);return S.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(k),style:fe},wl($)?S.createElement("span",{className:"recharts-tooltip-item-name"},$):null,wl($)?S.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,S.createElement("span",{className:"recharts-tooltip-item-value"},z),S.createElement("span",{className:"recharts-tooltip-item-unit"},A.unit||""))});return S.createElement("ul",{className:"recharts-tooltip-item-list",style:D},P)}return null},w=mA({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),_=mA({margin:0},i),E=!_i(h),C=E?h:"",N=sn("recharts-default-tooltip",u),O=sn("recharts-tooltip-label",d);E&&p&&s!==void 0&&s!==null&&(C=p(h,s));var R=y?{role:"status","aria-live":"assertive"}:{};return S.createElement("div",sI({className:N,style:w},R),S.createElement("p",{className:O,style:_},S.isValidElement(C)?C:"".concat(C)),v())},e0="recharts-tooltip-wrapper",hCe={visibility:"hidden"};function fCe(t){var{coordinate:e,translateX:n,translateY:r}=t;return sn(e0,{["".concat(e0,"-right")]:Ge(n)&&e&&Ge(e.x)&&n>=e.x,["".concat(e0,"-left")]:Ge(n)&&e&&Ge(e.x)&&n<e.x,["".concat(e0,"-bottom")]:Ge(r)&&e&&Ge(e.y)&&r>=e.y,["".concat(e0,"-top")]:Ge(r)&&e&&Ge(e.y)&&r<e.y})}function NV(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:a,tooltipDimension:l,viewBox:u,viewBoxDimension:d}=t;if(s&&Ge(s[r]))return s[r];var h=n[r]-l-(i>0?i:0),p=n[r]+i;if(e[r])return a[r]?h:p;var y=u[r];if(y==null)return 0;if(a[r]){var v=h,w=y;return v<w?Math.max(p,y):Math.max(h,y)}if(d==null)return 0;var _=p+l,E=y+d;return _>E?Math.max(h,y):Math.max(p,y)}function mCe(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function pCe(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:s,tooltipBox:a,useTranslate3d:l,viewBox:u}=t,d,h,p;return a.height>0&&a.width>0&&n?(h=NV({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.width,viewBox:u,viewBoxDimension:u.width}),p=NV({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.height,viewBox:u,viewBoxDimension:u.height}),d=mCe({translateX:h,translateY:p,useTranslate3d:l})):d=hCe,{cssProperties:d,cssClasses:fCe({translateX:h,translateY:p,coordinate:n})}}function kV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kV(Object(n),!0).forEach(function(r){aI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aI(t,e,n){return(e=gCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gCe(t){var e=yCe(t,"string");return typeof e=="symbol"?e:e+""}function yCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class vCe extends S.PureComponent{constructor(){super(...arguments),aI(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),aI(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:a,hasPayload:l,isAnimationActive:u,offset:d,position:h,reverseDirection:p,useTranslate3d:y,viewBox:v,wrapperStyle:w,lastBoundingBox:_,innerRef:E,hasPortalFromProps:C}=this.props,{cssClasses:N,cssProperties:O}=pCe({allowEscapeViewBox:n,coordinate:a,offsetTopLeft:d,position:h,reverseDirection:p,tooltipBox:{height:_.height,width:_.width},useTranslate3d:y,viewBox:v}),R=C?{}:Sw(Sw({transition:u&&e?"transform ".concat(r,"ms ").concat(i):void 0},O),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),D=Sw(Sw({},R),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},w);return S.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:N,style:D,ref:E},s)}}var zX=()=>{var t;return(t=Qe(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function oI(){return oI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oI.apply(null,arguments)}function IV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function OV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IV(Object(n),!0).forEach(function(r){bCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bCe(t,e,n){return(e=wCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wCe(t){var e=xCe(t,"string");return typeof e=="symbol"?e:e+""}function xCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jV={curveBasisClosed:n2e,curveBasisOpen:r2e,curveBasis:t2e,curveBumpX:z_e,curveBumpY:$_e,curveLinearClosed:i2e,curveLinear:f2,curveMonotoneX:s2e,curveMonotoneY:a2e,curveNatural:o2e,curveStep:l2e,curveStepAfter:u2e,curveStepBefore:c2e},N1=t=>nr(t.x)&&nr(t.y),PV=t=>t.base!=null&&N1(t.base)&&N1(t),t0=t=>t.x,n0=t=>t.y,_Ce=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(nv(t));return(n==="curveMonotone"||n==="curveBump")&&e?jV["".concat(n).concat(e==="vertical"?"Y":"X")]:jV[n]||f2},ECe=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:s=!1}=t,a=_Ce(e,i),l=s?n.filter(N1):n,u;if(Array.isArray(r)){var d=n.map((v,w)=>OV(OV({},v),{},{base:r[w]}));i==="vertical"?u=yw().y(n0).x1(t0).x0(v=>v.base.x):u=yw().x(t0).y1(n0).y0(v=>v.base.y);var h=u.defined(PV).curve(a),p=s?d.filter(PV):d;return h(p)}i==="vertical"&&Ge(r)?u=yw().y(n0).x1(t0).x0(r):Ge(r)?u=yw().x(t0).y1(n0).y0(r):u=hY().x(t0).y(n0);var y=u.defined(N1).curve(a);return y(l)},Lm=t=>{var{className:e,points:n,path:r,pathRef:i}=t,s=zp();if((!n||!n.length)&&!r)return null;var a={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||s,connectNulls:t.connectNulls},l=n&&n.length?ECe(a):r;return S.createElement("path",oI({},pa(t),Cj(t),{className:sn("recharts-curve",e),d:l===null?void 0:l,ref:i}))},TCe=["x","y","top","left","width","height","className"];function lI(){return lI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lI.apply(null,arguments)}function RV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SCe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RV(Object(n),!0).forEach(function(r){CCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CCe(t,e,n){return(e=ACe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ACe(t){var e=NCe(t,"string");return typeof e=="symbol"?e:e+""}function NCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kCe(t,e){if(t==null)return{};var n,r,i=ICe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ICe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var OCe=(t,e,n,r,i,s)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(s,",").concat(e,"h").concat(n),jCe=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:s=0,height:a=0,className:l}=t,u=kCe(t,TCe),d=SCe({x:e,y:n,top:r,left:i,width:s,height:a},u);return!Ge(e)||!Ge(n)||!Ge(s)||!Ge(a)||!Ge(r)||!Ge(i)?null:S.createElement("path",lI({},ws(d),{className:sn("recharts-cross",l),d:OCe(e,n,s,a,r,i)}))};function PCe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function DV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function MV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DV(Object(n),!0).forEach(function(r){RCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RCe(t,e,n){return(e=DCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DCe(t){var e=MCe(t,"string");return typeof e=="symbol"?e:e+""}function MCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var LCe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),$X=(t,e,n)=>t.map(r=>"".concat(LCe(r)," ").concat(e,"ms ").concat(n)).join(","),VCe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),gy=(t,e)=>Object.keys(e).reduce((n,r)=>MV(MV({},n),{},{[r]:t(r,e[r])}),{});function LV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function si(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LV(Object(n),!0).forEach(function(r){UCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UCe(t,e,n){return(e=BCe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BCe(t){var e=zCe(t,"string");return typeof e=="symbol"?e:e+""}function zCe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var k1=(t,e,n)=>t+(e-t)*n,cI=t=>{var{from:e,to:n}=t;return e!==n},FX=(t,e,n)=>{var r=gy((i,s)=>{if(cI(s)){var[a,l]=t(s.from,s.to,s.velocity);return si(si({},s),{},{from:a,velocity:l})}return s},e);return n<1?gy((i,s)=>cI(s)&&r[i]!=null?si(si({},s),{},{velocity:k1(s.velocity,r[i].velocity,n),from:k1(s.from,r[i].from,n)}):s,e):FX(t,r,n-1)};function $Ce(t,e,n,r,i,s){var a,l=r.reduce((y,v)=>si(si({},y),{},{[v]:{from:t[v],velocity:0,to:e[v]}}),{}),u=()=>gy((y,v)=>v.from,l),d=()=>!Object.values(l).filter(cI).length,h=null,p=y=>{a||(a=y);var v=y-a,w=v/n.dt;l=FX(n,l,w),i(si(si(si({},t),e),u())),a=y,d()||(h=s.setTimeout(p))};return()=>(h=s.setTimeout(p),()=>{var y;(y=h)===null||y===void 0||y()})}function FCe(t,e,n,r,i,s,a){var l=null,u=i.reduce((p,y)=>{var v=t[y],w=e[y];return v==null||w==null?p:si(si({},p),{},{[y]:[v,w]})},{}),d,h=p=>{d||(d=p);var y=(p-d)/r,v=gy((_,E)=>k1(...E,n(y)),u);if(s(si(si(si({},t),e),v)),y<1)l=a.setTimeout(h);else{var w=gy((_,E)=>k1(...E,n(1)),u);s(si(si(si({},t),e),w))}};return()=>(l=a.setTimeout(h),()=>{var p;(p=l)===null||p===void 0||p()})}const HCe=(t,e,n,r,i,s)=>{var a=VCe(t,e);return n==null?()=>(i(si(si({},t),e)),()=>{}):n.isStepper===!0?$Ce(t,e,n,a,i,s):FCe(t,e,n,r,a,i,s)};var I1=1e-4,HX=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],qX=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),VV=(t,e)=>n=>{var r=HX(t,e);return qX(r,n)},qCe=(t,e)=>n=>{var r=HX(t,e),i=[...r.map((s,a)=>s*a).slice(1),0];return qX(i,n)},GCe=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(s=>parseFloat(s));return[i[0],i[1],i[2],i[3]]},WCe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=GCe(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},KCe=(t,e,n,r)=>{var i=VV(t,n),s=VV(e,r),a=qCe(t,n),l=d=>d>1?1:d<0?0:d,u=d=>{for(var h=d>1?1:d,p=h,y=0;y<8;++y){var v=i(p)-h,w=a(p);if(Math.abs(v-h)<I1||w<I1)return s(p);p=l(p-v/w)}return s(p)};return u.isStepper=!1,u},UV=function(){return KCe(...WCe(...arguments))},YCe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,s=(a,l,u)=>{var d=-(a-l)*n,h=u*r,p=u+(d-h)*i/1e3,y=u*i/1e3+a;return Math.abs(y-l)<I1&&Math.abs(p)<I1?[l,0]:[y,p]};return s.isStepper=!0,s.dt=i,s},XCe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return UV(t);case"spring":return YCe();default:if(t.split("(")[0]==="cubic-bezier")return UV(t)}return typeof t=="function"?t:null};function QCe(t){var e,n=()=>null,r=!1,i=null,s=a=>{if(!r){if(Array.isArray(a)){if(!a.length)return;var l=a,[u,...d]=l;if(typeof u=="number"){i=t.setTimeout(s.bind(null,d),u);return}s(u),i=t.setTimeout(s.bind(null,d));return}typeof a=="string"&&(e=a,n(e)),typeof a=="object"&&(e=a,n(e)),typeof a=="function"&&a()}};return{stop:()=>{r=!0},start:a=>{r=!1,i&&(i(),i=null),s(a)},subscribe:a=>(n=a,()=>{n=()=>null}),getTimeoutController:()=>t}}class JCe{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=a=>{a-r>=n?e(a):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{i!=null&&cancelAnimationFrame(i)}}}function ZCe(){return QCe(new JCe)}var eAe=S.createContext(ZCe);function tAe(t,e){var n=S.useContext(eAe);return S.useMemo(()=>e??n(t),[t,e,n])}var nAe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),cv={isSsr:nAe()},rAe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},BV={t:0},pA={t:1};function R2(t){var e=li(t,rAe),{isActive:n,canBegin:r,duration:i,easing:s,begin:a,onAnimationEnd:l,onAnimationStart:u,children:d}=e,h=n==="auto"?!cv.isSsr:n,p=tAe(e.animationId,e.animationManager),[y,v]=S.useState(h?BV:pA),w=S.useRef(null);return S.useEffect(()=>{h||v(pA)},[h]),S.useEffect(()=>{if(!h||!r)return rv;var _=HCe(BV,pA,XCe(s),i,v,p.getTimeoutController()),E=()=>{w.current=_()};return p.start([u,a,E,i,l]),()=>{p.stop(),w.current&&w.current(),l()}},[h,r,i,s,a,u,l,p]),d(y.t)}function D2(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=S.useRef(cy(e)),r=S.useRef(t);return r.current!==t&&(n.current=cy(e),r.current=t),n.current}var iAe=["radius"],sAe=["radius"],zV,$V,FV,HV,qV,GV,WV,KV,YV,XV;function QV(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QV(Object(n),!0).forEach(function(r){aAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QV(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aAe(t,e,n){return(e=oAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oAe(t){var e=lAe(t,"string");return typeof e=="symbol"?e:e+""}function lAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function O1(){return O1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},O1.apply(null,arguments)}function ZV(t,e){if(t==null)return{};var n,r,i=cAe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function cAe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function el(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var eU=(t,e,n,r,i)=>{var s=Du(n),a=Du(r),l=Math.min(Math.abs(s)/2,Math.abs(a)/2),u=a>=0?1:-1,d=s>=0?1:-1,h=a>=0&&s>=0||a<0&&s<0?1:0,p;if(l>0&&i instanceof Array){for(var y=[0,0,0,0],v=0,w=4;v<w;v++)y[v]=i[v]>l?l:i[v];p=Er(zV||(zV=el(["M",",",""])),t,e+u*y[0]),y[0]>0&&(p+=Er($V||($V=el(["A ",",",",0,0,",",",",",""])),y[0],y[0],h,t+d*y[0],e)),p+=Er(FV||(FV=el(["L ",",",""])),t+n-d*y[1],e),y[1]>0&&(p+=Er(HV||(HV=el(["A ",",",",0,0,",`,
        `,",",""])),y[1],y[1],h,t+n,e+u*y[1])),p+=Er(qV||(qV=el(["L ",",",""])),t+n,e+r-u*y[2]),y[2]>0&&(p+=Er(GV||(GV=el(["A ",",",",0,0,",`,
        `,",",""])),y[2],y[2],h,t+n-d*y[2],e+r)),p+=Er(WV||(WV=el(["L ",",",""])),t+d*y[3],e+r),y[3]>0&&(p+=Er(KV||(KV=el(["A ",",",",0,0,",`,
        `,",",""])),y[3],y[3],h,t,e+r-u*y[3])),p+="Z"}else if(l>0&&i===+i&&i>0){var _=Math.min(l,i);p=Er(YV||(YV=el(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+u*_,_,_,h,t+d*_,e,t+n-d*_,e,_,_,h,t+n,e+u*_,t+n,e+r-u*_,_,_,h,t+n-d*_,e+r,t+d*_,e+r,_,_,h,t,e+r-u*_)}else p=Er(XV||(XV=el(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return p},tU={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},GX=t=>{var e=li(t,tU),n=S.useRef(null),[r,i]=S.useState(-1);S.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var W=n.current.getTotalLength();W&&i(W)}catch{}},[]);var{x:s,y:a,width:l,height:u,radius:d,className:h}=e,{animationEasing:p,animationDuration:y,animationBegin:v,isAnimationActive:w,isUpdateAnimationActive:_}=e,E=S.useRef(l),C=S.useRef(u),N=S.useRef(s),O=S.useRef(a),R=S.useMemo(()=>({x:s,y:a,width:l,height:u,radius:d}),[s,a,l,u,d]),D=D2(R,"rectangle-");if(s!==+s||a!==+a||l!==+l||u!==+u||l===0||u===0)return null;var P=sn("recharts-rectangle",h);if(!_){var A=ws(e),{radius:k}=A,M=ZV(A,iAe);return S.createElement("path",O1({},M,{x:Du(s),y:Du(a),width:Du(l),height:Du(u),radius:typeof d=="number"?d:void 0,className:P,d:eU(s,a,l,u,d)}))}var V=E.current,U=C.current,z=N.current,$=O.current,ne="0px ".concat(r===-1?1:r,"px"),fe="".concat(r,"px 0px"),K=$X(["strokeDasharray"],y,typeof p=="string"?p:tU.animationEasing);return S.createElement(R2,{animationId:D,key:D,canBegin:r>0,duration:y,easing:p,isActive:_,begin:v},W=>{var ee=Ui(V,l,W),oe=Ui(U,u,W),pe=Ui(z,s,W),B=Ui($,a,W);n.current&&(E.current=ee,C.current=oe,N.current=pe,O.current=B);var X;w?W>0?X={transition:K,strokeDasharray:fe}:X={strokeDasharray:ne}:X={strokeDasharray:fe};var G=ws(e),{radius:Q}=G,re=ZV(G,sAe);return S.createElement("path",O1({},re,{radius:typeof d=="number"?d:void 0,className:P,d:eU(pe,B,ee,oe,d),ref:n,style:JV(JV({},X),e.style)}))})};function nU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rU(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nU(Object(n),!0).forEach(function(r){uAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uAe(t,e,n){return(e=dAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dAe(t){var e=hAe(t,"string");return typeof e=="symbol"?e:e+""}function hAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var j1=Math.PI/180,fAe=t=>t*180/Math.PI,Qr=(t,e,n,r)=>({x:t+Math.cos(-j1*r)*n,y:e+Math.sin(-j1*r)*n}),WX=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},mAe=(t,e)=>{var{x:n,y:r}=t,{x:i,y:s}=e;return Math.sqrt((n-i)**2+(r-s)**2)},pAe=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:s}=e,a=mAe({x:n,y:r},{x:i,y:s});if(a<=0)return{radius:a,angle:0};var l=(n-i)/a,u=Math.acos(l);return r>s&&(u=2*Math.PI-u),{radius:a,angle:fAe(u),angleInRadian:u}},gAe=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:e-s*360,endAngle:n-s*360}},yAe=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),s=Math.floor(r/360),a=Math.min(i,s);return t+a*360},vAe=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:s}=pAe({x:n,y:r},e),{innerRadius:a,outerRadius:l}=e;if(i<a||i>l||i===0)return null;var{startAngle:u,endAngle:d}=gAe(e),h=s,p;if(u<=d){for(;h>d;)h-=360;for(;h<u;)h+=360;p=h>=u&&h<=d}else{for(;h>u;)h-=360;for(;h<d;)h+=360;p=h>=d&&h<=u}return p?rU(rU({},e),{},{radius:i,angle:yAe(h,e)}):null};function KX(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:s}=t,a=Qr(e,n,r,i),l=Qr(e,n,r,s);return{points:[a,l],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}var iU,sU,aU,oU,lU,cU,uU;function uI(){return uI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uI.apply(null,arguments)}function ph(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var bAe=(t,e)=>{var n=rs(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},Cw=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:s,isExternal:a,cornerRadius:l,cornerIsExternal:u}=t,d=l*(a?1:-1)+r,h=Math.asin(l/d)/j1,p=u?i:i+s*h,y=Qr(e,n,d,p),v=Qr(e,n,r,p),w=u?i-s*h:i,_=Qr(e,n,d*Math.cos(h*j1),w);return{center:y,circleTangency:v,lineTangency:_,theta:h}},YX=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:a}=t,l=bAe(s,a),u=s+l,d=Qr(e,n,i,s),h=Qr(e,n,i,u),p=Er(iU||(iU=ph(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),d.x,d.y,i,i,+(Math.abs(l)>180),+(s>u),h.x,h.y);if(r>0){var y=Qr(e,n,r,s),v=Qr(e,n,r,u);p+=Er(sU||(sU=ph(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),v.x,v.y,r,r,+(Math.abs(l)>180),+(s<=u),y.x,y.y)}else p+=Er(aU||(aU=ph(["L ",","," Z"])),e,n);return p},wAe=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:a,cornerIsExternal:l,startAngle:u,endAngle:d}=t,h=rs(d-u),{circleTangency:p,lineTangency:y,theta:v}=Cw({cx:e,cy:n,radius:i,angle:u,sign:h,cornerRadius:s,cornerIsExternal:l}),{circleTangency:w,lineTangency:_,theta:E}=Cw({cx:e,cy:n,radius:i,angle:d,sign:-h,cornerRadius:s,cornerIsExternal:l}),C=l?Math.abs(u-d):Math.abs(u-d)-v-E;if(C<0)return a?Er(oU||(oU=ph(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),y.x,y.y,s,s,s*2,s,s,-s*2):YX({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:u,endAngle:d});var N=Er(lU||(lU=ph(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),y.x,y.y,s,s,+(h<0),p.x,p.y,i,i,+(C>180),+(h<0),w.x,w.y,s,s,+(h<0),_.x,_.y);if(r>0){var{circleTangency:O,lineTangency:R,theta:D}=Cw({cx:e,cy:n,radius:r,angle:u,sign:h,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),{circleTangency:P,lineTangency:A,theta:k}=Cw({cx:e,cy:n,radius:r,angle:d,sign:-h,isExternal:!0,cornerRadius:s,cornerIsExternal:l}),M=l?Math.abs(u-d):Math.abs(u-d)-D-k;if(M<0&&s===0)return"".concat(N,"L").concat(e,",").concat(n,"Z");N+=Er(cU||(cU=ph(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),A.x,A.y,s,s,+(h<0),P.x,P.y,r,r,+(M>180),+(h>0),O.x,O.y,s,s,+(h<0),R.x,R.y)}else N+=Er(uU||(uU=ph(["L",",","Z"])),e,n);return N},xAe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},XX=t=>{var e=li(t,xAe),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:a,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:h,className:p}=e;if(s<i||d===h)return null;var y=sn("recharts-sector",p),v=s-i,w=ha(a,v,0,!0),_;return w>0&&Math.abs(d-h)<360?_=wAe({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(w,v/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:h}):_=YX({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:d,endAngle:h}),S.createElement("path",uI({},ws(e),{className:y,d:_}))};function _Ae(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(AY(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:s,outerRadius:a,angle:l}=e,u=Qr(r,i,s,l),d=Qr(r,i,a,l);return[{x:u.x,y:u.y},{x:d.x,y:d.y}]}return KX(e)}}var gA={},yA={},vA={},dU;function EAe(){return dU||(dU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=UY();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(vA)),vA}var hU;function TAe(){return hU||(hU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=EAe();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(yA)),yA}var fU;function SAe(){return fU||(fU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BY(),n=TAe();function r(i,s,a){a&&typeof a!="number"&&e.isIterateeCall(i,s,a)&&(s=a=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),a=a===void 0?i<s?1:-1:n.toFinite(a);const l=Math.max(Math.ceil((s-i)/(a||1)),0),u=new Array(l);for(let d=0;d<l;d++)u[d]=i,i+=a;return u}t.range=r})(gA)),gA}var bA,mU;function CAe(){return mU||(mU=1,bA=SAe().range),bA}var AAe=CAe();const QX=va(AAe);function qu(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function NAe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Fj(t){let e,n,r;t.length!==2?(e=qu,n=(l,u)=>qu(t(l),u),r=(l,u)=>t(l)-u):(e=t===qu||t===NAe?t:kAe,n=t,r=t);function i(l,u,d=0,h=l.length){if(d<h){if(e(u,u)!==0)return h;do{const p=d+h>>>1;n(l[p],u)<0?d=p+1:h=p}while(d<h)}return d}function s(l,u,d=0,h=l.length){if(d<h){if(e(u,u)!==0)return h;do{const p=d+h>>>1;n(l[p],u)<=0?d=p+1:h=p}while(d<h)}return d}function a(l,u,d=0,h=l.length){const p=i(l,u,d,h-1);return p>d&&r(l[p-1],u)>-r(l[p],u)?p-1:p}return{left:i,center:a,right:s}}function kAe(){return 0}function JX(t){return t===null?NaN:+t}function*IAe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const OAe=Fj(qu),uv=OAe.right;Fj(JX).center;class pU extends Map{constructor(e,n=RAe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(gU(this,e))}has(e){return super.has(gU(this,e))}set(e,n){return super.set(jAe(this,e),n)}delete(e){return super.delete(PAe(this,e))}}function gU({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function jAe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function PAe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function RAe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function DAe(t=qu){if(t===qu)return ZX;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function ZX(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const MAe=Math.sqrt(50),LAe=Math.sqrt(10),VAe=Math.sqrt(2);function P1(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=MAe?10:s>=LAe?5:s>=VAe?2:1;let l,u,d;return i<0?(d=Math.pow(10,-i)/a,l=Math.round(t*d),u=Math.round(e*d),l/d<t&&++l,u/d>e&&--u,d=-d):(d=Math.pow(10,i)*a,l=Math.round(t/d),u=Math.round(e/d),l*d<t&&++l,u*d>e&&--u),u<l&&.5<=n&&n<2?P1(t,e,n*2):[l,u,d]}function dI(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,a]=r?P1(e,t,n):P1(t,e,n);if(!(s>=i))return[];const l=s-i+1,u=new Array(l);if(r)if(a<0)for(let d=0;d<l;++d)u[d]=(s-d)/-a;else for(let d=0;d<l;++d)u[d]=(s-d)*a;else if(a<0)for(let d=0;d<l;++d)u[d]=(i+d)/-a;else for(let d=0;d<l;++d)u[d]=(i+d)*a;return u}function hI(t,e,n){return e=+e,t=+t,n=+n,P1(t,e,n)[2]}function fI(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?hI(e,t,n):hI(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function yU(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function vU(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function eQ(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?ZX:DAe(i);r>n;){if(r-n>600){const u=r-n+1,d=e-n+1,h=Math.log(u),p=.5*Math.exp(2*h/3),y=.5*Math.sqrt(h*p*(u-p)/u)*(d-u/2<0?-1:1),v=Math.max(n,Math.floor(e-d*p/u+y)),w=Math.min(r,Math.floor(e+(u-d)*p/u+y));eQ(t,e,v,w,i)}const s=t[e];let a=n,l=r;for(r0(t,n,e),i(t[r],s)>0&&r0(t,n,r);a<l;){for(r0(t,a,l),++a,--l;i(t[a],s)<0;)++a;for(;i(t[l],s)>0;)--l}i(t[n],s)===0?r0(t,n,l):(++l,r0(t,l,r)),l<=e&&(n=l+1),e<=l&&(r=l-1)}return t}function r0(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function UAe(t,e,n){if(t=Float64Array.from(IAe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return vU(t);if(e>=1)return yU(t);var r,i=(r-1)*e,s=Math.floor(i),a=yU(eQ(t,s).subarray(0,s+1)),l=vU(t.subarray(s+1));return a+(l-a)*(i-s)}}function BAe(t,e,n=JX){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),a=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return a+(l-a)*(i-s)}}function zAe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function eo(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Lc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const mI=Symbol("implicit");function Hj(){var t=new pU,e=[],n=[],r=mI;function i(s){let a=t.get(s);if(a===void 0){if(r!==mI)return r;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new pU;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Hj(e,n).unknown(r)},eo.apply(i,arguments),i}function qj(){var t=Hj().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,a,l=!1,u=0,d=0,h=.5;delete t.unknown;function p(){var y=e().length,v=i<r,w=v?i:r,_=v?r:i;s=(_-w)/Math.max(1,y-u+d*2),l&&(s=Math.floor(s)),w+=(_-w-s*(y-u))*h,a=s*(1-u),l&&(w=Math.round(w),a=Math.round(a));var E=zAe(y).map(function(C){return w+s*C});return n(v?E.reverse():E)}return t.domain=function(y){return arguments.length?(e(y),p()):e()},t.range=function(y){return arguments.length?([r,i]=y,r=+r,i=+i,p()):[r,i]},t.rangeRound=function(y){return[r,i]=y,r=+r,i=+i,l=!0,p()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(y){return arguments.length?(l=!!y,p()):l},t.padding=function(y){return arguments.length?(u=Math.min(1,d=+y),p()):u},t.paddingInner=function(y){return arguments.length?(u=Math.min(1,y),p()):u},t.paddingOuter=function(y){return arguments.length?(d=+y,p()):d},t.align=function(y){return arguments.length?(h=Math.max(0,Math.min(1,y)),p()):h},t.copy=function(){return qj(e(),[r,i]).round(l).paddingInner(u).paddingOuter(d).align(h)},eo.apply(p(),arguments)}function tQ(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return tQ(e())},t}function $Ae(){return tQ(qj.apply(null,arguments).paddingInner(1))}function Gj(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function nQ(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function dv(){}var yy=.7,R1=1/yy,Vm="\\s*([+-]?\\d+)\\s*",vy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",gl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",FAe=/^#([0-9a-f]{3,8})$/,HAe=new RegExp(`^rgb\\(${Vm},${Vm},${Vm}\\)$`),qAe=new RegExp(`^rgb\\(${gl},${gl},${gl}\\)$`),GAe=new RegExp(`^rgba\\(${Vm},${Vm},${Vm},${vy}\\)$`),WAe=new RegExp(`^rgba\\(${gl},${gl},${gl},${vy}\\)$`),KAe=new RegExp(`^hsl\\(${vy},${gl},${gl}\\)$`),YAe=new RegExp(`^hsla\\(${vy},${gl},${gl},${vy}\\)$`),bU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gj(dv,by,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:wU,formatHex:wU,formatHex8:XAe,formatHsl:QAe,formatRgb:xU,toString:xU});function wU(){return this.rgb().formatHex()}function XAe(){return this.rgb().formatHex8()}function QAe(){return rQ(this).formatHsl()}function xU(){return this.rgb().formatRgb()}function by(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=FAe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?_U(e):n===3?new zs(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Aw(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Aw(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=HAe.exec(t))?new zs(e[1],e[2],e[3],1):(e=qAe.exec(t))?new zs(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=GAe.exec(t))?Aw(e[1],e[2],e[3],e[4]):(e=WAe.exec(t))?Aw(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=KAe.exec(t))?SU(e[1],e[2]/100,e[3]/100,1):(e=YAe.exec(t))?SU(e[1],e[2]/100,e[3]/100,e[4]):bU.hasOwnProperty(t)?_U(bU[t]):t==="transparent"?new zs(NaN,NaN,NaN,0):null}function _U(t){return new zs(t>>16&255,t>>8&255,t&255,1)}function Aw(t,e,n,r){return r<=0&&(t=e=n=NaN),new zs(t,e,n,r)}function JAe(t){return t instanceof dv||(t=by(t)),t?(t=t.rgb(),new zs(t.r,t.g,t.b,t.opacity)):new zs}function pI(t,e,n,r){return arguments.length===1?JAe(t):new zs(t,e,n,r??1)}function zs(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Gj(zs,pI,nQ(dv,{brighter(t){return t=t==null?R1:Math.pow(R1,t),new zs(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?yy:Math.pow(yy,t),new zs(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new zs(Th(this.r),Th(this.g),Th(this.b),D1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:EU,formatHex:EU,formatHex8:ZAe,formatRgb:TU,toString:TU}));function EU(){return`#${gh(this.r)}${gh(this.g)}${gh(this.b)}`}function ZAe(){return`#${gh(this.r)}${gh(this.g)}${gh(this.b)}${gh((isNaN(this.opacity)?1:this.opacity)*255)}`}function TU(){const t=D1(this.opacity);return`${t===1?"rgb(":"rgba("}${Th(this.r)}, ${Th(this.g)}, ${Th(this.b)}${t===1?")":`, ${t})`}`}function D1(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Th(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function gh(t){return t=Th(t),(t<16?"0":"")+t.toString(16)}function SU(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new _o(t,e,n,r)}function rQ(t){if(t instanceof _o)return new _o(t.h,t.s,t.l,t.opacity);if(t instanceof dv||(t=by(t)),!t)return new _o;if(t instanceof _o)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,l=s-i,u=(s+i)/2;return l?(e===s?a=(n-r)/l+(n<r)*6:n===s?a=(r-e)/l+2:a=(e-n)/l+4,l/=u<.5?s+i:2-s-i,a*=60):l=u>0&&u<1?0:a,new _o(a,l,u,t.opacity)}function eNe(t,e,n,r){return arguments.length===1?rQ(t):new _o(t,e,n,r??1)}function _o(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Gj(_o,eNe,nQ(dv,{brighter(t){return t=t==null?R1:Math.pow(R1,t),new _o(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?yy:Math.pow(yy,t),new _o(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new zs(wA(t>=240?t-240:t+120,i,r),wA(t,i,r),wA(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new _o(CU(this.h),Nw(this.s),Nw(this.l),D1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=D1(this.opacity);return`${t===1?"hsl(":"hsla("}${CU(this.h)}, ${Nw(this.s)*100}%, ${Nw(this.l)*100}%${t===1?")":`, ${t})`}`}}));function CU(t){return t=(t||0)%360,t<0?t+360:t}function Nw(t){return Math.max(0,Math.min(1,t||0))}function wA(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Wj=t=>()=>t;function tNe(t,e){return function(n){return t+n*e}}function nNe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function rNe(t){return(t=+t)==1?iQ:function(e,n){return n-e?nNe(e,n,t):Wj(isNaN(e)?n:e)}}function iQ(t,e){var n=e-t;return n?tNe(t,n):Wj(isNaN(t)?e:t)}const AU=(function t(e){var n=rNe(e);function r(i,s){var a=n((i=pI(i)).r,(s=pI(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),d=iQ(i.opacity,s.opacity);return function(h){return i.r=a(h),i.g=l(h),i.b=u(h),i.opacity=d(h),i+""}}return r.gamma=t,r})(1);function iNe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function sNe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function aNe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=$p(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(l){for(a=0;a<r;++a)s[a]=i[a](l);return s}}function oNe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function M1(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function lNe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=$p(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var gI=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xA=new RegExp(gI.source,"g");function cNe(t){return function(){return t}}function uNe(t){return function(e){return t(e)+""}}function dNe(t,e){var n=gI.lastIndex=xA.lastIndex=0,r,i,s,a=-1,l=[],u=[];for(t=t+"",e=e+"";(r=gI.exec(t))&&(i=xA.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),l[a]?l[a]+=s:l[++a]=s),(r=r[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,u.push({i:a,x:M1(r,i)})),n=xA.lastIndex;return n<e.length&&(s=e.slice(n),l[a]?l[a]+=s:l[++a]=s),l.length<2?u[0]?uNe(u[0].x):cNe(e):(e=u.length,function(d){for(var h=0,p;h<e;++h)l[(p=u[h]).i]=p.x(d);return l.join("")})}function $p(t,e){var n=typeof e,r;return e==null||n==="boolean"?Wj(e):(n==="number"?M1:n==="string"?(r=by(e))?(e=r,AU):dNe:e instanceof by?AU:e instanceof Date?oNe:sNe(e)?iNe:Array.isArray(e)?aNe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?lNe:M1)(t,e)}function Kj(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function hNe(t,e){e===void 0&&(e=t,t=$p);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(a){var l=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return s[l](a-l)}}function fNe(t){return function(){return t}}function L1(t){return+t}var NU=[0,1];function vs(t){return t}function yI(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:fNe(isNaN(e)?NaN:.5)}function mNe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function pNe(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=yI(i,r),s=n(a,s)):(r=yI(r,i),s=n(s,a)),function(l){return s(r(l))}}function gNe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=yI(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(l){var u=uv(t,l,1,r)-1;return s[u](i[u](l))}}function hv(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function M2(){var t=NU,e=NU,n=$p,r,i,s,a=vs,l,u,d;function h(){var y=Math.min(t.length,e.length);return a!==vs&&(a=mNe(t[0],t[y-1])),l=y>2?gNe:pNe,u=d=null,p}function p(y){return y==null||isNaN(y=+y)?s:(u||(u=l(t.map(r),e,n)))(r(a(y)))}return p.invert=function(y){return a(i((d||(d=l(e,t.map(r),M1)))(y)))},p.domain=function(y){return arguments.length?(t=Array.from(y,L1),h()):t.slice()},p.range=function(y){return arguments.length?(e=Array.from(y),h()):e.slice()},p.rangeRound=function(y){return e=Array.from(y),n=Kj,h()},p.clamp=function(y){return arguments.length?(a=y?!0:vs,h()):a!==vs},p.interpolate=function(y){return arguments.length?(n=y,h()):n},p.unknown=function(y){return arguments.length?(s=y,p):s},function(y,v){return r=y,i=v,h()}}function Yj(){return M2()(vs,vs)}function yNe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function V1(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function vp(t){return t=V1(Math.abs(t)),t?t[1]:NaN}function vNe(t,e){return function(n,r){for(var i=n.length,s=[],a=0,l=t[0],u=0;i>0&&l>0&&(u+l+1>r&&(l=Math.max(1,r-u)),s.push(n.substring(i-=l,i+l)),!((u+=l+1)>r));)l=t[a=(a+1)%t.length];return s.reverse().join(e)}}function bNe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var wNe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function wy(t){if(!(e=wNe.exec(t)))throw new Error("invalid format: "+t);var e;return new Xj({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}wy.prototype=Xj.prototype;function Xj(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Xj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function xNe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var sQ;function _Ne(t,e){var n=V1(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(sQ=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+V1(t,Math.max(0,e+s-1))[0]}function kU(t,e){var n=V1(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const IU={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:yNe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>kU(t*100,e),r:kU,s:_Ne,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function OU(t){return t}var jU=Array.prototype.map,PU=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ENe(t){var e=t.grouping===void 0||t.thousands===void 0?OU:vNe(jU.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?OU:bNe(jU.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function d(p){p=wy(p);var y=p.fill,v=p.align,w=p.sign,_=p.symbol,E=p.zero,C=p.width,N=p.comma,O=p.precision,R=p.trim,D=p.type;D==="n"?(N=!0,D="g"):IU[D]||(O===void 0&&(O=12),R=!0,D="g"),(E||y==="0"&&v==="=")&&(E=!0,y="0",v="=");var P=_==="$"?n:_==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",A=_==="$"?r:/[%p]/.test(D)?a:"",k=IU[D],M=/[defgprs%]/.test(D);O=O===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,O)):Math.max(0,Math.min(20,O));function V(U){var z=P,$=A,ne,fe,K;if(D==="c")$=k(U)+$,U="";else{U=+U;var W=U<0||1/U<0;if(U=isNaN(U)?u:k(Math.abs(U),O),R&&(U=xNe(U)),W&&+U==0&&w!=="+"&&(W=!1),z=(W?w==="("?w:l:w==="-"||w==="("?"":w)+z,$=(D==="s"?PU[8+sQ/3]:"")+$+(W&&w==="("?")":""),M){for(ne=-1,fe=U.length;++ne<fe;)if(K=U.charCodeAt(ne),48>K||K>57){$=(K===46?i+U.slice(ne+1):U.slice(ne))+$,U=U.slice(0,ne);break}}}N&&!E&&(U=e(U,1/0));var ee=z.length+U.length+$.length,oe=ee<C?new Array(C-ee+1).join(y):"";switch(N&&E&&(U=e(oe+U,oe.length?C-$.length:1/0),oe=""),v){case"<":U=z+U+$+oe;break;case"=":U=z+oe+U+$;break;case"^":U=oe.slice(0,ee=oe.length>>1)+z+U+$+oe.slice(ee);break;default:U=oe+z+U+$;break}return s(U)}return V.toString=function(){return p+""},V}function h(p,y){var v=d((p=wy(p),p.type="f",p)),w=Math.max(-8,Math.min(8,Math.floor(vp(y)/3)))*3,_=Math.pow(10,-w),E=PU[8+w/3];return function(C){return v(_*C)+E}}return{format:d,formatPrefix:h}}var kw,Qj,aQ;TNe({thousands:",",grouping:[3],currency:["$",""]});function TNe(t){return kw=ENe(t),Qj=kw.format,aQ=kw.formatPrefix,kw}function SNe(t){return Math.max(0,-vp(Math.abs(t)))}function CNe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(vp(e)/3)))*3-vp(Math.abs(t)))}function ANe(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,vp(e)-vp(t))+1}function oQ(t,e,n,r){var i=fI(t,e,n),s;switch(r=wy(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=CNe(i,a))&&(r.precision=s),aQ(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=ANe(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=SNe(i))&&(r.precision=s-(r.type==="%")*2);break}}return Qj(r)}function gd(t){var e=t.domain;return t.ticks=function(n){var r=e();return dI(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return oQ(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],l=r[s],u,d,h=10;for(l<a&&(d=a,a=l,l=d,d=i,i=s,s=d);h-- >0;){if(d=hI(a,l,n),d===u)return r[i]=a,r[s]=l,e(r);if(d>0)a=Math.floor(a/d)*d,l=Math.ceil(l/d)*d;else if(d<0)a=Math.ceil(a*d)/d,l=Math.floor(l*d)/d;else break;u=d}return t},t}function lQ(){var t=Yj();return t.copy=function(){return hv(t,lQ())},eo.apply(t,arguments),gd(t)}function cQ(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,L1),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return cQ(t).unknown(e)},t=arguments.length?Array.from(t,L1):[0,1],gd(n)}function uQ(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),t[n]=e.floor(i),t[r]=e.ceil(s),t}function RU(t){return Math.log(t)}function DU(t){return Math.exp(t)}function NNe(t){return-Math.log(-t)}function kNe(t){return-Math.exp(-t)}function INe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function ONe(t){return t===10?INe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function jNe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function MU(t){return(e,n)=>-t(-e,n)}function Jj(t){const e=t(RU,DU),n=e.domain;let r=10,i,s;function a(){return i=jNe(r),s=ONe(r),n()[0]<0?(i=MU(i),s=MU(s),t(NNe,kNe)):t(RU,DU),e}return e.base=function(l){return arguments.length?(r=+l,a()):r},e.domain=function(l){return arguments.length?(n(l),a()):n()},e.ticks=l=>{const u=n();let d=u[0],h=u[u.length-1];const p=h<d;p&&([d,h]=[h,d]);let y=i(d),v=i(h),w,_;const E=l==null?10:+l;let C=[];if(!(r%1)&&v-y<E){if(y=Math.floor(y),v=Math.ceil(v),d>0){for(;y<=v;++y)for(w=1;w<r;++w)if(_=y<0?w/s(-y):w*s(y),!(_<d)){if(_>h)break;C.push(_)}}else for(;y<=v;++y)for(w=r-1;w>=1;--w)if(_=y>0?w/s(-y):w*s(y),!(_<d)){if(_>h)break;C.push(_)}C.length*2<E&&(C=dI(d,h,E))}else C=dI(y,v,Math.min(v-y,E)).map(s);return p?C.reverse():C},e.tickFormat=(l,u)=>{if(l==null&&(l=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=wy(u)).precision==null&&(u.trim=!0),u=Qj(u)),l===1/0)return u;const d=Math.max(1,r*l/e.ticks().length);return h=>{let p=h/s(Math.round(i(h)));return p*r<r-.5&&(p*=r),p<=d?u(h):""}},e.nice=()=>n(uQ(n(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),e}function dQ(){const t=Jj(M2()).domain([1,10]);return t.copy=()=>hv(t,dQ()).base(t.base()),eo.apply(t,arguments),t}function LU(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function VU(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Zj(t){var e=1,n=t(LU(e),VU(e));return n.constant=function(r){return arguments.length?t(LU(e=+r),VU(e)):e},gd(n)}function hQ(){var t=Zj(M2());return t.copy=function(){return hv(t,hQ()).constant(t.constant())},eo.apply(t,arguments)}function UU(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function PNe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function RNe(t){return t<0?-t*t:t*t}function e5(t){var e=t(vs,vs),n=1;function r(){return n===1?t(vs,vs):n===.5?t(PNe,RNe):t(UU(n),UU(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},gd(e)}function t5(){var t=e5(M2());return t.copy=function(){return hv(t,t5()).exponent(t.exponent())},eo.apply(t,arguments),t}function DNe(){return t5.apply(null,arguments).exponent(.5)}function BU(t){return Math.sign(t)*t*t}function MNe(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function fQ(){var t=Yj(),e=[0,1],n=!1,r;function i(s){var a=MNe(t(s));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(s){return t.invert(BU(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,L1)).map(BU)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return fQ(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},eo.apply(i,arguments),gd(i)}function mQ(){var t=[],e=[],n=[],r;function i(){var a=0,l=Math.max(1,e.length);for(n=new Array(l-1);++a<l;)n[a-1]=BAe(t,a/l);return s}function s(a){return a==null||isNaN(a=+a)?r:e[uv(n,a)]}return s.invertExtent=function(a){var l=e.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(qu),i()},s.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return mQ().domain(t).range(e).unknown(r)},eo.apply(s,arguments)}function pQ(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function a(u){return u!=null&&u<=u?i[uv(r,u,0,n)]:s}function l(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*e-(u-n)*t)/(n+1);return a}return a.domain=function(u){return arguments.length?([t,e]=u,t=+t,e=+e,l()):[t,e]},a.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,l()):i.slice()},a.invertExtent=function(u){var d=i.indexOf(u);return d<0?[NaN,NaN]:d<1?[t,r[0]]:d>=n?[r[n-1],e]:[r[d-1],r[d]]},a.unknown=function(u){return arguments.length&&(s=u),a},a.thresholds=function(){return r.slice()},a.copy=function(){return pQ().domain([t,e]).range(i).unknown(s)},eo.apply(gd(a),arguments)}function gQ(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[uv(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var a=e.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return gQ().domain(t).range(e).unknown(n)},eo.apply(i,arguments)}const _A=new Date,EA=new Date;function ci(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const a=i(s),l=i.ceil(s);return s-a<l-s?a:l},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,l)=>{const u=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return u;let d;do u.push(d=new Date(+s)),e(s,l),t(s);while(d<s&&s<a);return u},i.filter=s=>ci(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;e(a,-1),!s(a););else for(;--l>=0;)for(;e(a,1),!s(a););}),n&&(i.count=(s,a)=>(_A.setTime(+s),EA.setTime(+a),t(_A),t(EA),Math.floor(n(_A,EA))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const U1=ci(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);U1.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ci(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):U1);U1.range;const oc=1e3,Ga=oc*60,lc=Ga*60,Nc=lc*24,n5=Nc*7,zU=Nc*30,TA=Nc*365,yh=ci(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*oc)},(t,e)=>(e-t)/oc,t=>t.getUTCSeconds());yh.range;const r5=ci(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*oc)},(t,e)=>{t.setTime(+t+e*Ga)},(t,e)=>(e-t)/Ga,t=>t.getMinutes());r5.range;const i5=ci(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ga)},(t,e)=>(e-t)/Ga,t=>t.getUTCMinutes());i5.range;const s5=ci(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*oc-t.getMinutes()*Ga)},(t,e)=>{t.setTime(+t+e*lc)},(t,e)=>(e-t)/lc,t=>t.getHours());s5.range;const a5=ci(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*lc)},(t,e)=>(e-t)/lc,t=>t.getUTCHours());a5.range;const fv=ci(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ga)/Nc,t=>t.getDate()-1);fv.range;const L2=ci(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Nc,t=>t.getUTCDate()-1);L2.range;const yQ=ci(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Nc,t=>Math.floor(t/Nc));yQ.range;function af(t){return ci(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ga)/n5)}const V2=af(0),B1=af(1),LNe=af(2),VNe=af(3),bp=af(4),UNe=af(5),BNe=af(6);V2.range;B1.range;LNe.range;VNe.range;bp.range;UNe.range;BNe.range;function of(t){return ci(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/n5)}const U2=of(0),z1=of(1),zNe=of(2),$Ne=of(3),wp=of(4),FNe=of(5),HNe=of(6);U2.range;z1.range;zNe.range;$Ne.range;wp.range;FNe.range;HNe.range;const o5=ci(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());o5.range;const l5=ci(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());l5.range;const kc=ci(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());kc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ci(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});kc.range;const Ic=ci(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ic.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ci(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ic.range;function vQ(t,e,n,r,i,s){const a=[[yh,1,oc],[yh,5,5*oc],[yh,15,15*oc],[yh,30,30*oc],[s,1,Ga],[s,5,5*Ga],[s,15,15*Ga],[s,30,30*Ga],[i,1,lc],[i,3,3*lc],[i,6,6*lc],[i,12,12*lc],[r,1,Nc],[r,2,2*Nc],[n,1,n5],[e,1,zU],[e,3,3*zU],[t,1,TA]];function l(d,h,p){const y=h<d;y&&([d,h]=[h,d]);const v=p&&typeof p.range=="function"?p:u(d,h,p),w=v?v.range(d,+h+1):[];return y?w.reverse():w}function u(d,h,p){const y=Math.abs(h-d)/p,v=Fj(([,,E])=>E).right(a,y);if(v===a.length)return t.every(fI(d/TA,h/TA,p));if(v===0)return U1.every(Math.max(fI(d,h,p),1));const[w,_]=a[y/a[v-1][2]<a[v][2]/y?v-1:v];return w.every(_)}return[l,u]}const[qNe,GNe]=vQ(Ic,l5,U2,yQ,a5,i5),[WNe,KNe]=vQ(kc,o5,V2,fv,s5,r5);function SA(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function CA(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function i0(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function YNe(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,a=t.shortDays,l=t.months,u=t.shortMonths,d=s0(i),h=a0(i),p=s0(s),y=a0(s),v=s0(a),w=a0(a),_=s0(l),E=a0(l),C=s0(u),N=a0(u),O={a:W,A:ee,b:oe,B:pe,c:null,d:WU,e:WU,f:vke,g:Nke,G:Ike,H:pke,I:gke,j:yke,L:bQ,m:bke,M:wke,p:B,q:X,Q:XU,s:QU,S:xke,u:_ke,U:Eke,V:Tke,w:Ske,W:Cke,x:null,X:null,y:Ake,Y:kke,Z:Oke,"%":YU},R={a:G,A:Q,b:re,B:_e,c:null,d:KU,e:KU,f:Dke,g:qke,G:Wke,H:jke,I:Pke,j:Rke,L:xQ,m:Mke,M:Lke,p:Se,q:ce,Q:XU,s:QU,S:Vke,u:Uke,U:Bke,V:zke,w:$ke,W:Fke,x:null,X:null,y:Hke,Y:Gke,Z:Kke,"%":YU},D={a:V,A:U,b:z,B:$,c:ne,d:qU,e:qU,f:dke,g:HU,G:FU,H:GU,I:GU,j:oke,L:uke,m:ake,M:lke,p:M,q:ske,Q:fke,s:mke,S:cke,u:eke,U:tke,V:nke,w:ZNe,W:rke,x:fe,X:K,y:HU,Y:FU,Z:ike,"%":hke};O.x=P(n,O),O.X=P(r,O),O.c=P(e,O),R.x=P(n,R),R.X=P(r,R),R.c=P(e,R);function P(Z,ke){return function(Le){var ye=[],ze=-1,Ae=0,Ze=Z.length,rt,it,Ke;for(Le instanceof Date||(Le=new Date(+Le));++ze<Ze;)Z.charCodeAt(ze)===37&&(ye.push(Z.slice(Ae,ze)),(it=$U[rt=Z.charAt(++ze)])!=null?rt=Z.charAt(++ze):it=rt==="e"?" ":"0",(Ke=ke[rt])&&(rt=Ke(Le,it)),ye.push(rt),Ae=ze+1);return ye.push(Z.slice(Ae,ze)),ye.join("")}}function A(Z,ke){return function(Le){var ye=i0(1900,void 0,1),ze=k(ye,Z,Le+="",0),Ae,Ze;if(ze!=Le.length)return null;if("Q"in ye)return new Date(ye.Q);if("s"in ye)return new Date(ye.s*1e3+("L"in ye?ye.L:0));if(ke&&!("Z"in ye)&&(ye.Z=0),"p"in ye&&(ye.H=ye.H%12+ye.p*12),ye.m===void 0&&(ye.m="q"in ye?ye.q:0),"V"in ye){if(ye.V<1||ye.V>53)return null;"w"in ye||(ye.w=1),"Z"in ye?(Ae=CA(i0(ye.y,0,1)),Ze=Ae.getUTCDay(),Ae=Ze>4||Ze===0?z1.ceil(Ae):z1(Ae),Ae=L2.offset(Ae,(ye.V-1)*7),ye.y=Ae.getUTCFullYear(),ye.m=Ae.getUTCMonth(),ye.d=Ae.getUTCDate()+(ye.w+6)%7):(Ae=SA(i0(ye.y,0,1)),Ze=Ae.getDay(),Ae=Ze>4||Ze===0?B1.ceil(Ae):B1(Ae),Ae=fv.offset(Ae,(ye.V-1)*7),ye.y=Ae.getFullYear(),ye.m=Ae.getMonth(),ye.d=Ae.getDate()+(ye.w+6)%7)}else("W"in ye||"U"in ye)&&("w"in ye||(ye.w="u"in ye?ye.u%7:"W"in ye?1:0),Ze="Z"in ye?CA(i0(ye.y,0,1)).getUTCDay():SA(i0(ye.y,0,1)).getDay(),ye.m=0,ye.d="W"in ye?(ye.w+6)%7+ye.W*7-(Ze+5)%7:ye.w+ye.U*7-(Ze+6)%7);return"Z"in ye?(ye.H+=ye.Z/100|0,ye.M+=ye.Z%100,CA(ye)):SA(ye)}}function k(Z,ke,Le,ye){for(var ze=0,Ae=ke.length,Ze=Le.length,rt,it;ze<Ae;){if(ye>=Ze)return-1;if(rt=ke.charCodeAt(ze++),rt===37){if(rt=ke.charAt(ze++),it=D[rt in $U?ke.charAt(ze++):rt],!it||(ye=it(Z,Le,ye))<0)return-1}else if(rt!=Le.charCodeAt(ye++))return-1}return ye}function M(Z,ke,Le){var ye=d.exec(ke.slice(Le));return ye?(Z.p=h.get(ye[0].toLowerCase()),Le+ye[0].length):-1}function V(Z,ke,Le){var ye=v.exec(ke.slice(Le));return ye?(Z.w=w.get(ye[0].toLowerCase()),Le+ye[0].length):-1}function U(Z,ke,Le){var ye=p.exec(ke.slice(Le));return ye?(Z.w=y.get(ye[0].toLowerCase()),Le+ye[0].length):-1}function z(Z,ke,Le){var ye=C.exec(ke.slice(Le));return ye?(Z.m=N.get(ye[0].toLowerCase()),Le+ye[0].length):-1}function $(Z,ke,Le){var ye=_.exec(ke.slice(Le));return ye?(Z.m=E.get(ye[0].toLowerCase()),Le+ye[0].length):-1}function ne(Z,ke,Le){return k(Z,e,ke,Le)}function fe(Z,ke,Le){return k(Z,n,ke,Le)}function K(Z,ke,Le){return k(Z,r,ke,Le)}function W(Z){return a[Z.getDay()]}function ee(Z){return s[Z.getDay()]}function oe(Z){return u[Z.getMonth()]}function pe(Z){return l[Z.getMonth()]}function B(Z){return i[+(Z.getHours()>=12)]}function X(Z){return 1+~~(Z.getMonth()/3)}function G(Z){return a[Z.getUTCDay()]}function Q(Z){return s[Z.getUTCDay()]}function re(Z){return u[Z.getUTCMonth()]}function _e(Z){return l[Z.getUTCMonth()]}function Se(Z){return i[+(Z.getUTCHours()>=12)]}function ce(Z){return 1+~~(Z.getUTCMonth()/3)}return{format:function(Z){var ke=P(Z+="",O);return ke.toString=function(){return Z},ke},parse:function(Z){var ke=A(Z+="",!1);return ke.toString=function(){return Z},ke},utcFormat:function(Z){var ke=P(Z+="",R);return ke.toString=function(){return Z},ke},utcParse:function(Z){var ke=A(Z+="",!0);return ke.toString=function(){return Z},ke}}}var $U={"-":"",_:" ",0:"0"},Ci=/^\s*\d+/,XNe=/^%/,QNe=/[\\^$*+?|[\]().{}]/g;function Yt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function JNe(t){return t.replace(QNe,"\\$&")}function s0(t){return new RegExp("^(?:"+t.map(JNe).join("|")+")","i")}function a0(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function ZNe(t,e,n){var r=Ci.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function eke(t,e,n){var r=Ci.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function tke(t,e,n){var r=Ci.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function nke(t,e,n){var r=Ci.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function rke(t,e,n){var r=Ci.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function FU(t,e,n){var r=Ci.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function HU(t,e,n){var r=Ci.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ike(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function ske(t,e,n){var r=Ci.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function ake(t,e,n){var r=Ci.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function qU(t,e,n){var r=Ci.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function oke(t,e,n){var r=Ci.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function GU(t,e,n){var r=Ci.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function lke(t,e,n){var r=Ci.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function cke(t,e,n){var r=Ci.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function uke(t,e,n){var r=Ci.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function dke(t,e,n){var r=Ci.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function hke(t,e,n){var r=XNe.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function fke(t,e,n){var r=Ci.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function mke(t,e,n){var r=Ci.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function WU(t,e){return Yt(t.getDate(),e,2)}function pke(t,e){return Yt(t.getHours(),e,2)}function gke(t,e){return Yt(t.getHours()%12||12,e,2)}function yke(t,e){return Yt(1+fv.count(kc(t),t),e,3)}function bQ(t,e){return Yt(t.getMilliseconds(),e,3)}function vke(t,e){return bQ(t,e)+"000"}function bke(t,e){return Yt(t.getMonth()+1,e,2)}function wke(t,e){return Yt(t.getMinutes(),e,2)}function xke(t,e){return Yt(t.getSeconds(),e,2)}function _ke(t){var e=t.getDay();return e===0?7:e}function Eke(t,e){return Yt(V2.count(kc(t)-1,t),e,2)}function wQ(t){var e=t.getDay();return e>=4||e===0?bp(t):bp.ceil(t)}function Tke(t,e){return t=wQ(t),Yt(bp.count(kc(t),t)+(kc(t).getDay()===4),e,2)}function Ske(t){return t.getDay()}function Cke(t,e){return Yt(B1.count(kc(t)-1,t),e,2)}function Ake(t,e){return Yt(t.getFullYear()%100,e,2)}function Nke(t,e){return t=wQ(t),Yt(t.getFullYear()%100,e,2)}function kke(t,e){return Yt(t.getFullYear()%1e4,e,4)}function Ike(t,e){var n=t.getDay();return t=n>=4||n===0?bp(t):bp.ceil(t),Yt(t.getFullYear()%1e4,e,4)}function Oke(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Yt(e/60|0,"0",2)+Yt(e%60,"0",2)}function KU(t,e){return Yt(t.getUTCDate(),e,2)}function jke(t,e){return Yt(t.getUTCHours(),e,2)}function Pke(t,e){return Yt(t.getUTCHours()%12||12,e,2)}function Rke(t,e){return Yt(1+L2.count(Ic(t),t),e,3)}function xQ(t,e){return Yt(t.getUTCMilliseconds(),e,3)}function Dke(t,e){return xQ(t,e)+"000"}function Mke(t,e){return Yt(t.getUTCMonth()+1,e,2)}function Lke(t,e){return Yt(t.getUTCMinutes(),e,2)}function Vke(t,e){return Yt(t.getUTCSeconds(),e,2)}function Uke(t){var e=t.getUTCDay();return e===0?7:e}function Bke(t,e){return Yt(U2.count(Ic(t)-1,t),e,2)}function _Q(t){var e=t.getUTCDay();return e>=4||e===0?wp(t):wp.ceil(t)}function zke(t,e){return t=_Q(t),Yt(wp.count(Ic(t),t)+(Ic(t).getUTCDay()===4),e,2)}function $ke(t){return t.getUTCDay()}function Fke(t,e){return Yt(z1.count(Ic(t)-1,t),e,2)}function Hke(t,e){return Yt(t.getUTCFullYear()%100,e,2)}function qke(t,e){return t=_Q(t),Yt(t.getUTCFullYear()%100,e,2)}function Gke(t,e){return Yt(t.getUTCFullYear()%1e4,e,4)}function Wke(t,e){var n=t.getUTCDay();return t=n>=4||n===0?wp(t):wp.ceil(t),Yt(t.getUTCFullYear()%1e4,e,4)}function Kke(){return"+0000"}function YU(){return"%"}function XU(t){return+t}function QU(t){return Math.floor(+t/1e3)}var tm,EQ,TQ;Yke({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Yke(t){return tm=YNe(t),EQ=tm.format,tm.parse,TQ=tm.utcFormat,tm.utcParse,tm}function Xke(t){return new Date(t)}function Qke(t){return t instanceof Date?+t:+new Date(+t)}function c5(t,e,n,r,i,s,a,l,u,d){var h=Yj(),p=h.invert,y=h.domain,v=d(".%L"),w=d(":%S"),_=d("%I:%M"),E=d("%I %p"),C=d("%a %d"),N=d("%b %d"),O=d("%B"),R=d("%Y");function D(P){return(u(P)<P?v:l(P)<P?w:a(P)<P?_:s(P)<P?E:r(P)<P?i(P)<P?C:N:n(P)<P?O:R)(P)}return h.invert=function(P){return new Date(p(P))},h.domain=function(P){return arguments.length?y(Array.from(P,Qke)):y().map(Xke)},h.ticks=function(P){var A=y();return t(A[0],A[A.length-1],P??10)},h.tickFormat=function(P,A){return A==null?D:d(A)},h.nice=function(P){var A=y();return(!P||typeof P.range!="function")&&(P=e(A[0],A[A.length-1],P??10)),P?y(uQ(A,P)):h},h.copy=function(){return hv(h,c5(t,e,n,r,i,s,a,l,u,d))},h}function Jke(){return eo.apply(c5(WNe,KNe,kc,o5,V2,fv,s5,r5,yh,EQ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Zke(){return eo.apply(c5(qNe,GNe,Ic,l5,U2,L2,a5,i5,yh,TQ).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function B2(){var t=0,e=1,n,r,i,s,a=vs,l=!1,u;function d(p){return p==null||isNaN(p=+p)?u:a(i===0?.5:(p=(s(p)-n)*i,l?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([t,e]=p,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),d):[t,e]},d.clamp=function(p){return arguments.length?(l=!!p,d):l},d.interpolator=function(p){return arguments.length?(a=p,d):a};function h(p){return function(y){var v,w;return arguments.length?([v,w]=y,a=p(v,w),d):[a(0),a(1)]}}return d.range=h($p),d.rangeRound=h(Kj),d.unknown=function(p){return arguments.length?(u=p,d):u},function(p){return s=p,n=p(t),r=p(e),i=n===r?0:1/(r-n),d}}function yd(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function SQ(){var t=gd(B2()(vs));return t.copy=function(){return yd(t,SQ())},Lc.apply(t,arguments)}function CQ(){var t=Jj(B2()).domain([1,10]);return t.copy=function(){return yd(t,CQ()).base(t.base())},Lc.apply(t,arguments)}function AQ(){var t=Zj(B2());return t.copy=function(){return yd(t,AQ()).constant(t.constant())},Lc.apply(t,arguments)}function u5(){var t=e5(B2());return t.copy=function(){return yd(t,u5()).exponent(t.exponent())},Lc.apply(t,arguments)}function eIe(){return u5.apply(null,arguments).exponent(.5)}function NQ(){var t=[],e=vs;function n(r){if(r!=null&&!isNaN(r=+r))return e((uv(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(qu),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>UAe(t,s/r))},n.copy=function(){return NQ(e).domain(t)},Lc.apply(n,arguments)}function z2(){var t=0,e=.5,n=1,r=1,i,s,a,l,u,d=vs,h,p=!1,y;function v(_){return isNaN(_=+_)?y:(_=.5+((_=+h(_))-s)*(r*_<r*s?l:u),d(p?Math.max(0,Math.min(1,_)):_))}v.domain=function(_){return arguments.length?([t,e,n]=_,i=h(t=+t),s=h(e=+e),a=h(n=+n),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),r=s<i?-1:1,v):[t,e,n]},v.clamp=function(_){return arguments.length?(p=!!_,v):p},v.interpolator=function(_){return arguments.length?(d=_,v):d};function w(_){return function(E){var C,N,O;return arguments.length?([C,N,O]=E,d=hNe(_,[C,N,O]),v):[d(0),d(.5),d(1)]}}return v.range=w($p),v.rangeRound=w(Kj),v.unknown=function(_){return arguments.length?(y=_,v):y},function(_){return h=_,i=_(t),s=_(e),a=_(n),l=i===s?0:.5/(s-i),u=s===a?0:.5/(a-s),r=s<i?-1:1,v}}function kQ(){var t=gd(z2()(vs));return t.copy=function(){return yd(t,kQ())},Lc.apply(t,arguments)}function IQ(){var t=Jj(z2()).domain([.1,1,10]);return t.copy=function(){return yd(t,IQ()).base(t.base())},Lc.apply(t,arguments)}function OQ(){var t=Zj(z2());return t.copy=function(){return yd(t,OQ()).constant(t.constant())},Lc.apply(t,arguments)}function d5(){var t=e5(z2());return t.copy=function(){return yd(t,d5()).exponent(t.exponent())},Lc.apply(t,arguments)}function tIe(){return d5.apply(null,arguments).exponent(.5)}const g0=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:qj,scaleDiverging:kQ,scaleDivergingLog:IQ,scaleDivergingPow:d5,scaleDivergingSqrt:tIe,scaleDivergingSymlog:OQ,scaleIdentity:cQ,scaleImplicit:mI,scaleLinear:lQ,scaleLog:dQ,scaleOrdinal:Hj,scalePoint:$Ae,scalePow:t5,scaleQuantile:mQ,scaleQuantize:pQ,scaleRadial:fQ,scaleSequential:SQ,scaleSequentialLog:CQ,scaleSequentialPow:u5,scaleSequentialQuantile:NQ,scaleSequentialSqrt:eIe,scaleSequentialSymlog:AQ,scaleSqrt:DNe,scaleSymlog:hQ,scaleThreshold:gQ,scaleTime:Jke,scaleUtc:Zke,tickFormat:oQ},Symbol.toStringTag,{value:"Module"}));var Vc=t=>t.chartData,$2=he([Vc],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),jQ=(t,e,n,r)=>r?$2(t):Vc(t),nIe=(t,e,n)=>n?$2(t):Vc(t);function sd(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(nr(e)&&nr(n))return!0}return!1}function JU(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function PQ(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,s;if(nr(n))i=n;else if(typeof n=="function")return;if(nr(r))s=r;else if(typeof r=="function")return;var a=[i,s];if(sd(a))return a}}function rIe(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(sd(r))return JU(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,s]=t,a,l;if(i==="auto")e!=null&&(a=Math.min(...e));else if(Ge(i))a=i;else if(typeof i=="function")try{e!=null&&(a=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&cV.test(i)){var u=cV.exec(i);if(u==null||u[1]==null||e==null)a=void 0;else{var d=+u[1];a=e[0]-d}}else a=e==null?void 0:e[0];if(s==="auto")e!=null&&(l=Math.max(...e));else if(Ge(s))l=s;else if(typeof s=="function")try{e!=null&&(l=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&uV.test(s)){var h=uV.exec(s);if(h==null||h[1]==null||e==null)l=void 0;else{var p=+h[1];l=e[1]+p}}else l=e==null?void 0:e[1];var y=[a,l];if(sd(y))return e==null?y:JU(y,e,n)}}}var Fp=1e9,iIe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},f5,tr=!0,Ja="[DecimalError] ",Sh=Ja+"Invalid argument: ",h5=Ja+"Exponent out of range: ",Hp=Math.floor,ih=Math.pow,sIe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,la,vi=1e7,Hn=7,RQ=9007199254740991,$1=Hp(RQ/Hn),Fe={};Fe.absoluteValue=Fe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Fe.comparedTo=Fe.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};Fe.decimalPlaces=Fe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Hn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Fe.dividedBy=Fe.div=function(t){return mc(this,new this.constructor(t))};Fe.dividedToIntegerBy=Fe.idiv=function(t){var e=this,n=e.constructor;return jn(mc(e,new n(t),0,1),n.precision)};Fe.equals=Fe.eq=function(t){return!this.cmp(t)};Fe.exponent=function(){return Jr(this)};Fe.greaterThan=Fe.gt=function(t){return this.cmp(t)>0};Fe.greaterThanOrEqualTo=Fe.gte=function(t){return this.cmp(t)>=0};Fe.isInteger=Fe.isint=function(){return this.e>this.d.length-2};Fe.isNegative=Fe.isneg=function(){return this.s<0};Fe.isPositive=Fe.ispos=function(){return this.s>0};Fe.isZero=function(){return this.s===0};Fe.lessThan=Fe.lt=function(t){return this.cmp(t)<0};Fe.lessThanOrEqualTo=Fe.lte=function(t){return this.cmp(t)<1};Fe.logarithm=Fe.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(la))throw Error(Ja+"NaN");if(n.s<1)throw Error(Ja+(n.s?"NaN":"-Infinity"));return n.eq(la)?new r(0):(tr=!1,e=mc(xy(n,s),xy(t,s),s),tr=!0,jn(e,i))};Fe.minus=Fe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?LQ(e,t):DQ(e,(t.s=-t.s,t))};Fe.modulo=Fe.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Ja+"NaN");return n.s?(tr=!1,e=mc(n,t,0,1).times(t),tr=!0,n.minus(e)):jn(new r(n),i)};Fe.naturalExponential=Fe.exp=function(){return MQ(this)};Fe.naturalLogarithm=Fe.ln=function(){return xy(this)};Fe.negated=Fe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Fe.plus=Fe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?DQ(e,t):LQ(e,(t.s=-t.s,t))};Fe.precision=Fe.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Sh+t);if(e=Jr(i)+1,r=i.d.length-1,n=r*Hn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Fe.squareRoot=Fe.sqrt=function(){var t,e,n,r,i,s,a,l=this,u=l.constructor;if(l.s<1){if(!l.s)return new u(0);throw Error(Ja+"NaN")}for(t=Jr(l),tr=!1,i=Math.sqrt(+l),i==0||i==1/0?(e=al(l.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Hp((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new u(e)):r=new u(i.toString()),n=u.precision,i=a=n+3;;)if(s=r,r=s.plus(mc(l,s,a+2)).times(.5),al(s.d).slice(0,a)===(e=al(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(jn(s,n+1,0),s.times(s).eq(l)){r=s;break}}else if(e!="9999")break;a+=4}return tr=!0,jn(r,n)};Fe.times=Fe.mul=function(t){var e,n,r,i,s,a,l,u,d,h=this,p=h.constructor,y=h.d,v=(t=new p(t)).d;if(!h.s||!t.s)return new p(0);for(t.s*=h.s,n=h.e+t.e,u=y.length,d=v.length,u<d&&(s=y,y=v,v=s,a=u,u=d,d=a),s=[],a=u+d,r=a;r--;)s.push(0);for(r=d;--r>=0;){for(e=0,i=u+r;i>r;)l=s[i]+v[r]*y[i-r-1]+e,s[i--]=l%vi|0,e=l/vi|0;s[i]=(s[i]+e)%vi|0}for(;!s[--a];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,tr?jn(t,p.precision):t};Fe.toDecimalPlaces=Fe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(_l(t,0,Fp),e===void 0?e=r.rounding:_l(e,0,8),jn(n,t+Jr(n)+1,e))};Fe.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Hh(r,!0):(_l(t,0,Fp),e===void 0?e=i.rounding:_l(e,0,8),r=jn(new i(r),t+1,e),n=Hh(r,!0,t+1)),n};Fe.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?Hh(i):(_l(t,0,Fp),e===void 0?e=s.rounding:_l(e,0,8),r=jn(new s(i),t+Jr(i)+1,e),n=Hh(r.abs(),!1,t+Jr(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Fe.toInteger=Fe.toint=function(){var t=this,e=t.constructor;return jn(new e(t),Jr(t)+1,e.rounding)};Fe.toNumber=function(){return+this};Fe.toPower=Fe.pow=function(t){var e,n,r,i,s,a,l=this,u=l.constructor,d=12,h=+(t=new u(t));if(!t.s)return new u(la);if(l=new u(l),!l.s){if(t.s<1)throw Error(Ja+"Infinity");return l}if(l.eq(la))return l;if(r=u.precision,t.eq(la))return jn(l,r);if(e=t.e,n=t.d.length-1,a=e>=n,s=l.s,a){if((n=h<0?-h:h)<=RQ){for(i=new u(la),e=Math.ceil(r/Hn+4),tr=!1;n%2&&(i=i.times(l),eB(i.d,e)),n=Hp(n/2),n!==0;)l=l.times(l),eB(l.d,e);return tr=!0,t.s<0?new u(la).div(i):jn(i,r)}}else if(s<0)throw Error(Ja+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,tr=!1,i=t.times(xy(l,r+d)),tr=!0,i=MQ(i),i.s=s,i};Fe.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=Jr(i),r=Hh(i,n<=s.toExpNeg||n>=s.toExpPos)):(_l(t,1,Fp),e===void 0?e=s.rounding:_l(e,0,8),i=jn(new s(i),t,e),n=Jr(i),r=Hh(i,t<=n||n<=s.toExpNeg,t)),r};Fe.toSignificantDigits=Fe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(_l(t,1,Fp),e===void 0?e=r.rounding:_l(e,0,8)),jn(new r(n),t,e)};Fe.toString=Fe.valueOf=Fe.val=Fe.toJSON=Fe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Jr(t),n=t.constructor;return Hh(t,e<=n.toExpNeg||e>=n.toExpPos)};function DQ(t,e){var n,r,i,s,a,l,u,d,h=t.constructor,p=h.precision;if(!t.s||!e.s)return e.s||(e=new h(t)),tr?jn(e,p):e;if(u=t.d,d=e.d,a=t.e,i=e.e,u=u.slice(),s=a-i,s){for(s<0?(r=u,s=-s,l=d.length):(r=d,i=a,l=u.length),a=Math.ceil(p/Hn),l=a>l?a+1:l+1,s>l&&(s=l,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(l=u.length,s=d.length,l-s<0&&(s=l,r=d,d=u,u=r),n=0;s;)n=(u[--s]=u[s]+d[s]+n)/vi|0,u[s]%=vi;for(n&&(u.unshift(n),++i),l=u.length;u[--l]==0;)u.pop();return e.d=u,e.e=i,tr?jn(e,p):e}function _l(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Sh+t)}function al(t){var e,n,r,i=t.length-1,s="",a=t[0];if(i>0){for(s+=a,e=1;e<i;e++)r=t[e]+"",n=Hn-r.length,n&&(s+=Tu(n)),s+=r;a=t[e],r=a+"",n=Hn-r.length,n&&(s+=Tu(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var mc=(function(){function t(r,i){var s,a=0,l=r.length;for(r=r.slice();l--;)s=r[l]*i+a,r[l]=s%vi|0,a=s/vi|0;return a&&r.unshift(a),r}function e(r,i,s,a){var l,u;if(s!=a)u=s>a?1:-1;else for(l=u=0;l<s;l++)if(r[l]!=i[l]){u=r[l]>i[l]?1:-1;break}return u}function n(r,i,s){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*vi+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,a){var l,u,d,h,p,y,v,w,_,E,C,N,O,R,D,P,A,k,M=r.constructor,V=r.s==i.s?1:-1,U=r.d,z=i.d;if(!r.s)return new M(r);if(!i.s)throw Error(Ja+"Division by zero");for(u=r.e-i.e,A=z.length,D=U.length,v=new M(V),w=v.d=[],d=0;z[d]==(U[d]||0);)++d;if(z[d]>(U[d]||0)&&--u,s==null?N=s=M.precision:a?N=s+(Jr(r)-Jr(i))+1:N=s,N<0)return new M(0);if(N=N/Hn+2|0,d=0,A==1)for(h=0,z=z[0],N++;(d<D||h)&&N--;d++)O=h*vi+(U[d]||0),w[d]=O/z|0,h=O%z|0;else{for(h=vi/(z[0]+1)|0,h>1&&(z=t(z,h),U=t(U,h),A=z.length,D=U.length),R=A,_=U.slice(0,A),E=_.length;E<A;)_[E++]=0;k=z.slice(),k.unshift(0),P=z[0],z[1]>=vi/2&&++P;do h=0,l=e(z,_,A,E),l<0?(C=_[0],A!=E&&(C=C*vi+(_[1]||0)),h=C/P|0,h>1?(h>=vi&&(h=vi-1),p=t(z,h),y=p.length,E=_.length,l=e(p,_,y,E),l==1&&(h--,n(p,A<y?k:z,y))):(h==0&&(l=h=1),p=z.slice()),y=p.length,y<E&&p.unshift(0),n(_,p,E),l==-1&&(E=_.length,l=e(z,_,A,E),l<1&&(h++,n(_,A<E?k:z,E))),E=_.length):l===0&&(h++,_=[0]),w[d++]=h,l&&_[0]?_[E++]=U[R]||0:(_=[U[R]],E=1);while((R++<D||_[0]!==void 0)&&N--)}return w[0]||w.shift(),v.e=u,jn(v,a?s+Jr(v)+1:s)}})();function MQ(t,e){var n,r,i,s,a,l,u=0,d=0,h=t.constructor,p=h.precision;if(Jr(t)>16)throw Error(h5+Jr(t));if(!t.s)return new h(la);for(tr=!1,l=p,a=new h(.03125);t.abs().gte(.1);)t=t.times(a),d+=5;for(r=Math.log(ih(2,d))/Math.LN10*2+5|0,l+=r,n=i=s=new h(la),h.precision=l;;){if(i=jn(i.times(t),l),n=n.times(++u),a=s.plus(mc(i,n,l)),al(a.d).slice(0,l)===al(s.d).slice(0,l)){for(;d--;)s=jn(s.times(s),l);return h.precision=p,e==null?(tr=!0,jn(s,p)):s}s=a}}function Jr(t){for(var e=t.e*Hn,n=t.d[0];n>=10;n/=10)e++;return e}function AA(t,e,n){if(e>t.LN10.sd())throw tr=!0,n&&(t.precision=n),Error(Ja+"LN10 precision limit exceeded");return jn(new t(t.LN10),e)}function Tu(t){for(var e="";t--;)e+="0";return e}function xy(t,e){var n,r,i,s,a,l,u,d,h,p=1,y=10,v=t,w=v.d,_=v.constructor,E=_.precision;if(v.s<1)throw Error(Ja+(v.s?"NaN":"-Infinity"));if(v.eq(la))return new _(0);if(e==null?(tr=!1,d=E):d=e,v.eq(10))return e==null&&(tr=!0),AA(_,d);if(d+=y,_.precision=d,n=al(w),r=n.charAt(0),s=Jr(v),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)v=v.times(t),n=al(v.d),r=n.charAt(0),p++;s=Jr(v),r>1?(v=new _("0."+n),s++):v=new _(r+"."+n.slice(1))}else return u=AA(_,d+2,E).times(s+""),v=xy(new _(r+"."+n.slice(1)),d-y).plus(u),_.precision=E,e==null?(tr=!0,jn(v,E)):v;for(l=a=v=mc(v.minus(la),v.plus(la),d),h=jn(v.times(v),d),i=3;;){if(a=jn(a.times(h),d),u=l.plus(mc(a,new _(i),d)),al(u.d).slice(0,d)===al(l.d).slice(0,d))return l=l.times(2),s!==0&&(l=l.plus(AA(_,d+2,E).times(s+""))),l=mc(l,new _(p),d),_.precision=E,e==null?(tr=!0,jn(l,E)):l;l=u,i+=2}}function ZU(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Hp(n/Hn),t.d=[],r=(n+1)%Hn,n<0&&(r+=Hn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Hn;r<i;)t.d.push(+e.slice(r,r+=Hn));e=e.slice(r),r=Hn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),tr&&(t.e>$1||t.e<-$1))throw Error(h5+n)}else t.s=0,t.e=0,t.d=[0];return t}function jn(t,e,n){var r,i,s,a,l,u,d,h,p=t.d;for(a=1,s=p[0];s>=10;s/=10)a++;if(r=e-a,r<0)r+=Hn,i=e,d=p[h=0];else{if(h=Math.ceil((r+1)/Hn),s=p.length,h>=s)return t;for(d=s=p[h],a=1;s>=10;s/=10)a++;r%=Hn,i=r-Hn+a}if(n!==void 0&&(s=ih(10,a-i-1),l=d/s%10|0,u=e<0||p[h+1]!==void 0||d%s,u=n<4?(l||u)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||u||n==6&&(r>0?i>0?d/ih(10,a-i):0:p[h-1])%10&1||n==(t.s<0?8:7))),e<1||!p[0])return u?(s=Jr(t),p.length=1,e=e-s-1,p[0]=ih(10,(Hn-e%Hn)%Hn),t.e=Hp(-e/Hn)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(r==0?(p.length=h,s=1,h--):(p.length=h+1,s=ih(10,Hn-r),p[h]=i>0?(d/ih(10,a-i)%ih(10,i)|0)*s:0),u)for(;;)if(h==0){(p[0]+=s)==vi&&(p[0]=1,++t.e);break}else{if(p[h]+=s,p[h]!=vi)break;p[h--]=0,s=1}for(r=p.length;p[--r]===0;)p.pop();if(tr&&(t.e>$1||t.e<-$1))throw Error(h5+Jr(t));return t}function LQ(t,e){var n,r,i,s,a,l,u,d,h,p,y=t.constructor,v=y.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new y(t),tr?jn(e,v):e;if(u=t.d,p=e.d,r=e.e,d=t.e,u=u.slice(),a=d-r,a){for(h=a<0,h?(n=u,a=-a,l=p.length):(n=p,r=d,l=u.length),i=Math.max(Math.ceil(v/Hn),l)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=u.length,l=p.length,h=i<l,h&&(l=i),i=0;i<l;i++)if(u[i]!=p[i]){h=u[i]<p[i];break}a=0}for(h&&(n=u,u=p,p=n,e.s=-e.s),l=u.length,i=p.length-l;i>0;--i)u[l++]=0;for(i=p.length;i>a;){if(u[--i]<p[i]){for(s=i;s&&u[--s]===0;)u[s]=vi-1;--u[s],u[i]+=vi}u[i]-=p[i]}for(;u[--l]===0;)u.pop();for(;u[0]===0;u.shift())--r;return u[0]?(e.d=u,e.e=r,tr?jn(e,v):e):new y(0)}function Hh(t,e,n){var r,i=Jr(t),s=al(t.d),a=s.length;return e?(n&&(r=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+Tu(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Tu(-i-1)+s,n&&(r=n-a)>0&&(s+=Tu(r))):i>=a?(s+=Tu(i+1-a),n&&(r=n-i-1)>0&&(s=s+"."+Tu(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(s+="."),s+=Tu(r))),t.s<0?"-"+s:s}function eB(t,e){if(t.length>e)return t.length=e,!0}function VQ(t){var e,n,r;function i(s){var a=this;if(!(a instanceof i))return new i(s);if(a.constructor=i,s instanceof i){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Sh+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return ZU(a,s.toString())}else if(typeof s!="string")throw Error(Sh+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,sIe.test(s))ZU(a,s);else throw Error(Sh+s)}if(i.prototype=Fe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=VQ,i.config=i.set=aIe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function aIe(t){if(!t||typeof t!="object")throw Error(Ja+"Object expected");var e,n,r,i=["precision",1,Fp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Hp(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Sh+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Sh+n+": "+r);return this}var f5=VQ(iIe);la=new f5(1);const fn=f5;var oIe=t=>t,UQ={},BQ=t=>t===UQ,tB=t=>function e(){return arguments.length===0||arguments.length===1&&BQ(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},zQ=(t,e)=>t===1?e:tB(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(a=>a!==UQ).length;return s>=t?e(...r):zQ(t-s,tB(function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];var d=r.map(h=>BQ(h)?l.shift():h);return e(...d,...l)}))}),lIe=t=>zQ(t.length,t),vI=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},cIe=lIe((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),uIe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return oIe;var i=n.reverse(),s=i[0],a=i.slice(1);return function(){return a.reduce((l,u)=>u(l),s(...arguments))}};function $Q(t){var e;return t===0?e=1:e=Math.floor(new fn(t).abs().log(10).toNumber())+1,e}function FQ(t,e,n){for(var r=new fn(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var HQ=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},qQ=(t,e,n)=>{if(t.lte(0))return new fn(0);var r=$Q(t.toNumber()),i=new fn(10).pow(r),s=t.div(i),a=r!==1?.05:.1,l=new fn(Math.ceil(s.div(a).toNumber())).add(n).mul(a),u=l.mul(i);return e?new fn(u.toNumber()):new fn(Math.ceil(u.toNumber()))},dIe=(t,e,n)=>{var r=new fn(1),i=new fn(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new fn(10).pow($Q(t)-1),i=new fn(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new fn(Math.floor(t)))}else t===0?i=new fn(Math.floor((e-1)/2)):n||(i=new fn(Math.floor(t)));var a=Math.floor((e-1)/2),l=uIe(cIe(u=>i.add(new fn(u-a).mul(r)).toNumber()),vI);return l(0,e)},GQ=function(e,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new fn(0),tickMin:new fn(0),tickMax:new fn(0)};var a=qQ(new fn(n).sub(e).div(r-1),i,s),l;e<=0&&n>=0?l=new fn(0):(l=new fn(e).add(n).div(2),l=l.sub(new fn(l).mod(a)));var u=Math.ceil(l.sub(e).div(a).toNumber()),d=Math.ceil(new fn(n).sub(l).div(a).toNumber()),h=u+d+1;return h>r?GQ(e,n,r,i,s+1):(h<r&&(d=n>0?d+(r-h):d,u=n>0?u:u+(r-h)),{step:a,tickMin:l.sub(new fn(u).mul(a)),tickMax:l.add(new fn(d).mul(a))})},hIe=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),[l,u]=HQ([n,r]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...vI(0,i-1).map(()=>1/0)]:[...vI(0,i-1).map(()=>-1/0),u];return n>r?d.reverse():d}if(l===u)return dIe(l,i,s);var{step:h,tickMin:p,tickMax:y}=GQ(l,u,a,s,0),v=FQ(p,y.add(new fn(.1).mul(h)),h);return n>r?v.reverse():v},fIe=function(e,n){var[r,i]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,l]=HQ([r,i]);if(a===-1/0||l===1/0)return[r,i];if(a===l)return[a];var u=Math.max(n,2),d=qQ(new fn(l).sub(a).div(u-1),s,0),h=[...FQ(new fn(a),new fn(l),d),l];return s===!1&&(h=h.map(p=>Math.round(p))),r>i?h.reverse():h},mIe=t=>t.rootProps.barCategoryGap,mv=t=>t.rootProps.stackOffset,WQ=t=>t.rootProps.reverseStackOrder,m5=t=>t.options.chartName,p5=t=>t.rootProps.syncId,KQ=t=>t.rootProps.syncMethod,g5=t=>t.options.eventEmitter,pIe=t=>t.rootProps.baseValue,Bi={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},tc={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ia={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},F2=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},gIe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:tc.angleAxisId,includeHidden:!1,name:void 0,reversed:tc.reversed,scale:tc.scale,tick:tc.tick,tickCount:void 0,ticks:void 0,type:tc.type,unit:void 0},yIe={allowDataOverflow:ia.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ia.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ia.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ia.scale,tick:ia.tick,tickCount:ia.tickCount,ticks:void 0,type:ia.type,unit:void 0},vIe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:tc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:tc.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:tc.scale,tick:tc.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},bIe={allowDataOverflow:ia.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ia.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ia.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ia.scale,tick:ia.tick,tickCount:ia.tickCount,ticks:void 0,type:"category",unit:void 0},y5=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?vIe:gIe,v5=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?bIe:yIe,H2=t=>t.polarOptions,b5=he([Dc,Mc,Si],WX),YQ=he([H2,b5],(t,e)=>{if(t!=null)return ha(t.innerRadius,e,0)}),XQ=he([H2,b5],(t,e)=>{if(t!=null)return ha(t.outerRadius,e,e*.8)}),wIe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},QQ=he([H2],wIe);he([y5,QQ],F2);var JQ=he([b5,YQ,XQ],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});he([v5,JQ],F2);var ZQ=he([pn,H2,YQ,XQ,Dc,Mc],(t,e,n,r,i,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:a,cy:l,startAngle:u,endAngle:d}=e;return{cx:ha(a,i,i/2),cy:ha(l,s,s/2),innerRadius:n,outerRadius:r,startAngle:u,endAngle:d,clockWise:!1}}}),rr=(t,e)=>e,pv=(t,e,n)=>n;function w5(t){return t==null?void 0:t.id}function eJ(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:s}=n,a=new Map;return t.forEach(l=>{var u,d=(u=l.data)!==null&&u!==void 0?u:r;if(!(d==null||d.length===0)){var h=w5(l);d.forEach((p,y)=>{var v=s==null||i?y:String(Gn(p,s,null)),w=Gn(p,l.dataKey,0),_;a.has(v)?_=a.get(v):_={},Object.assign(_,{[h]:w}),a.set(v,_)})}}),Array.from(a.values())}function x5(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var q2=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function G2(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function xIe(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var ui=t=>{var e=pn(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},qp=t=>t.tooltip.settings.axisId;function nB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function F1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nB(Object(n),!0).forEach(function(r){_Ie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _Ie(t,e,n){return(e=EIe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EIe(t){var e=TIe(t,"string");return typeof e=="symbol"?e:e+""}function TIe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bI=[0,"auto"],mi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},tJ=(t,e)=>t.cartesianAxis.xAxis[e],Uc=(t,e)=>{var n=tJ(t,e);return n??mi},pi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:bI,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:ov},nJ=(t,e)=>t.cartesianAxis.yAxis[e],Bc=(t,e)=>{var n=nJ(t,e);return n??pi},SIe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},_5=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??SIe},dr=(t,e,n)=>{switch(e){case"xAxis":return Uc(t,n);case"yAxis":return Bc(t,n);case"zAxis":return _5(t,n);case"angleAxis":return y5(t,n);case"radiusAxis":return v5(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},CIe=(t,e,n)=>{switch(e){case"xAxis":return Uc(t,n);case"yAxis":return Bc(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},gv=(t,e,n)=>{switch(e){case"xAxis":return Uc(t,n);case"yAxis":return Bc(t,n);case"angleAxis":return y5(t,n);case"radiusAxis":return v5(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},rJ=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function E5(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var iJ=t=>t.graphicalItems.cartesianItems,AIe=he([rr,pv],E5),T5=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),yv=he([iJ,dr,AIe],T5,{memoizeOptions:{resultEqualityCheck:G2}}),sJ=he([yv],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(x5)),aJ=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),NIe=he([yv],aJ),S5=t=>t.map(e=>e.data).filter(Boolean).flat(1),kIe=he([yv],S5,{memoizeOptions:{resultEqualityCheck:G2}}),C5=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},A5=he([kIe,jQ],C5),N5=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Gn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:Gn(i,r)}))):t.map(r=>({value:r})),W2=he([A5,dr,yv],N5);function oJ(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function rx(t){if(wl(t)||t instanceof Date){var e=Number(t);if(nr(e))return e}}function rB(t){if(Array.isArray(t)){var e=[rx(t[0]),rx(t[1])];return sd(e)?e:void 0}var n=rx(t);if(n!=null)return[n,n]}function Oc(t){return t.map(rx).filter(E2e)}function IIe(t,e,n){return!n||typeof e!="number"||Lo(e)?[]:n.length?Oc(n.flatMap(r=>{var i=Gn(t,r.dataKey),s,a;if(Array.isArray(i)?[s,a]=i:s=a=i,!(!nr(s)||!nr(a)))return[e-s,e+a]})):[]}var di=t=>{var e=ui(t),n=qp(t);return gv(t,e,n)},vv=he([di],t=>t==null?void 0:t.dataKey),OIe=he([sJ,jQ,di],eJ),lJ=(t,e,n,r)=>{var i={},s=e.reduce((a,l)=>{if(l.stackId==null)return a;var u=a[l.stackId];return u==null&&(u=[]),u.push(l),a[l.stackId]=u,a},i);return Object.fromEntries(Object.entries(s).map(a=>{var[l,u]=a,d=r?[...u].reverse():u,h=d.map(w5);return[l,{stackedData:YTe(t,h,n),graphicalItems:d}]}))},cJ=he([OIe,sJ,mv,WQ],lJ),uJ=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:s}=e;if(r==null&&n!=="zAxis"){var a=ZTe(t,i,s);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},jIe=he([dr],t=>t.allowDataOverflow),k5=t=>{var e;if(t==null||!("domain"in t))return bI;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=Oc(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:bI},I5=he([dr],k5),O5=he([I5,jIe],PQ),PIe=he([cJ,Vc,rr,O5],uJ,{memoizeOptions:{resultEqualityCheck:q2}}),K2=t=>t.errorBars,RIe=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>oJ(n,r)),H1=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),a=Math.min(...s),l=Math.max(...s);return[a,l]}},j5=(t,e,n,r,i)=>{var s,a;if(n.length>0&&t.forEach(l=>{n.forEach(u=>{var d,h,p=(d=r[u.id])===null||d===void 0?void 0:d.filter(C=>oJ(i,C)),y=Gn(l,(h=e.dataKey)!==null&&h!==void 0?h:u.dataKey),v=IIe(l,y,p);if(v.length>=2){var w=Math.min(...v),_=Math.max(...v);(s==null||w<s)&&(s=w),(a==null||_>a)&&(a=_)}var E=rB(y);E!=null&&(s=s==null?E[0]:Math.min(s,E[0]),a=a==null?E[1]:Math.max(a,E[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(l=>{var u=rB(Gn(l,e.dataKey));u!=null&&(s=s==null?u[0]:Math.min(s,u[0]),a=a==null?u[1]:Math.max(a,u[1]))}),nr(s)&&nr(a))return[s,a]},DIe=he([A5,dr,NIe,K2,rr],j5,{memoizeOptions:{resultEqualityCheck:q2}});function MIe(t){var{value:e}=t;if(wl(e)||e instanceof Date)return e}var LIe=(t,e,n)=>{var r=t.map(MIe).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&TY(r))?QX(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},dJ=t=>t.referenceElements.dots,Gp=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),VIe=he([dJ,rr,pv],Gp),hJ=t=>t.referenceElements.areas,UIe=he([hJ,rr,pv],Gp),fJ=t=>t.referenceElements.lines,BIe=he([fJ,rr,pv],Gp),mJ=(t,e)=>{if(t!=null){var n=Oc(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},zIe=he(VIe,rr,mJ),pJ=(t,e)=>{if(t!=null){var n=Oc(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},$Ie=he([UIe,rr],pJ);function FIe(t){var e;if(t.x!=null)return Oc([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:Oc(n)}function HIe(t){var e;if(t.y!=null)return Oc([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:Oc(n)}var gJ=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?FIe(r):HIe(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},qIe=he([BIe,rr],gJ),GIe=he(zIe,qIe,$Ie,(t,e,n)=>H1(t,n,e)),P5=(t,e,n,r,i,s,a,l)=>{if(n!=null)return n;var u=a==="vertical"&&l==="xAxis"||a==="horizontal"&&l==="yAxis",d=u?H1(r,s,i):H1(s,i);return rIe(e,d,t.allowDataOverflow)},WIe=he([dr,I5,O5,PIe,DIe,GIe,pn,rr],P5,{memoizeOptions:{resultEqualityCheck:q2}}),KIe=[0,1],R5=(t,e,n,r,i,s,a)=>{if(!((t==null||n==null||n.length===0)&&a===void 0)){var{dataKey:l,type:u}=t,d=Rc(e,s);if(d&&l==null){var h;return QX(0,(h=n==null?void 0:n.length)!==null&&h!==void 0?h:0)}return u==="category"?LIe(r,t,d):i==="expand"?KIe:a}},D5=he([dr,pn,A5,W2,mv,rr,WIe],R5),yJ=(t,e,n,r,i)=>{if(t!=null){var{scale:s,type:a}=t;if(s==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":a==="category"?"band":"linear";if(typeof s=="string"){var l="scale".concat(nv(s));return l in g0?l:"point"}}},Wp=he([dr,pn,rJ,m5,rr],yJ);function YIe(t){if(t!=null){if(t in g0)return g0[t]();var e="scale".concat(nv(t));if(e in g0)return g0[e]()}}function M5(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=YIe(e);if(i!=null){var s=i.domain(n).range(r);return qTe(s),s}}}var L5=(t,e,n)=>{var r=k5(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&sd(t))return hIe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&sd(t))return fIe(t,e.tickCount,e.allowDecimals)}},V5=he([D5,gv,Wp],L5),U5=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&sd(e)&&Array.isArray(n)&&n.length>0){var i=e[0],s=n[0],a=e[1],l=n[n.length-1];return[Math.min(i,s),Math.max(a,l)]}return e},XIe=he([dr,D5,V5,rr],U5),QIe=he(W2,dr,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Oc(t.map(p=>p.value))).sort((p,y)=>p-y),i=r[0],s=r[r.length-1];if(i==null||s==null)return 1/0;var a=s-i;if(a===0)return 1/0;for(var l=0;l<r.length-1;l++){var u=r[l],d=r[l+1];if(!(u==null||d==null)){var h=d-u;n=Math.min(n,h)}}return n/a}}),vJ=he(QIe,pn,mIe,Si,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!nr(t))return 0;var s=e==="vertical"?r.height:r.width;if(i==="gap")return t*s/2;if(i==="no-gap"){var a=ha(n,t*s),l=t*s/2;return l-a-(l-a)/s*a}return 0}),JIe=(t,e,n)=>{var r=Uc(t,e);return r==null||typeof r.padding!="string"?0:vJ(t,"xAxis",e,n,r.padding)},ZIe=(t,e,n)=>{var r=Bc(t,e);return r==null||typeof r.padding!="string"?0:vJ(t,"yAxis",e,n,r.padding)},e4e=he(Uc,JIe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),t4e=he(Bc,ZIe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),n4e=he([Si,e4e,N2,A2,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),r4e=he([Si,pn,t4e,N2,A2,(t,e,n)=>n],(t,e,n,r,i,s)=>{var{padding:a}=i;return s?[r.height-a.bottom,a.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),bv=(t,e,n,r)=>{var i;switch(e){case"xAxis":return n4e(t,n,r);case"yAxis":return r4e(t,n,r);case"zAxis":return(i=_5(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return QQ(t);case"radiusAxis":return JQ(t,n);default:return}},bJ=he([dr,bv],F2),Y2=he([dr,Wp,XIe,bJ],M5);he([yv,K2,rr],RIe);function wJ(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var X2=(t,e)=>e,Q2=(t,e,n)=>n,i4e=he(S2,X2,Q2,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(wJ)),s4e=he(C2,X2,Q2,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(wJ)),xJ=(t,e)=>({width:t.width,height:e.height}),a4e=(t,e)=>{var n=typeof e.width=="number"?e.width:ov;return{width:n,height:t.height}},o4e=he(Si,Uc,xJ),l4e=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},c4e=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},u4e=he(Mc,Si,i4e,X2,Q2,(t,e,n,r,i)=>{var s={},a;return n.forEach(l=>{var u=xJ(e,l);a==null&&(a=l4e(e,r,t));var d=r==="top"&&!i||r==="bottom"&&i;s[l.id]=a-Number(d)*u.height,a+=(d?-1:1)*u.height}),s}),d4e=he(Dc,Si,s4e,X2,Q2,(t,e,n,r,i)=>{var s={},a;return n.forEach(l=>{var u=a4e(e,l);a==null&&(a=c4e(e,r,t));var d=r==="left"&&!i||r==="right"&&i;s[l.id]=a-Number(d)*u.width,a+=(d?-1:1)*u.width}),s}),h4e=(t,e)=>{var n=Uc(t,e);if(n!=null)return u4e(t,n.orientation,n.mirror)},f4e=he([Si,Uc,h4e,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),m4e=(t,e)=>{var n=Bc(t,e);if(n!=null)return d4e(t,n.orientation,n.mirror)},p4e=he([Si,Bc,m4e,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),g4e=he(Si,Bc,(t,e)=>{var n=typeof e.width=="number"?e.width:ov;return{width:n,height:t.height}}),_J=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:a}=n,l=Rc(t,r),u=e.map(d=>d.value);if(a&&l&&s==="category"&&i&&TY(u))return u}},B5=he([pn,W2,dr,rr],_J),EJ=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,a=Rc(t,r);if(a&&(i==="number"||s!=="auto"))return e.map(l=>l.value)}},z5=he([pn,W2,gv,rr],EJ),iB=he([pn,CIe,Wp,Y2,B5,z5,bv,V5,rr],(t,e,n,r,i,s,a,l,u)=>{if(e!=null){var d=Rc(t,u);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:u,categoricalDomain:s,duplicateDomain:i,isCategorical:d,niceTicks:l,range:a,realScaleType:n,scale:r}}}),y4e=(t,e,n,r,i,s,a,l,u)=>{if(!(e==null||r==null)){var d=Rc(t,u),{type:h,ticks:p,tickCount:y}=e,v=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,w=h==="category"&&r.bandwidth?r.bandwidth()/v:0;w=u==="angleAxis"&&s!=null&&s.length>=2?rs(s[0]-s[1])*2*w:w;var _=p||i;if(_){var E=_.map((C,N)=>{var O=a?a.indexOf(C):C;return{index:N,coordinate:r(O)+w,value:C,offset:w}});return E.filter(C=>nr(C.coordinate))}return d&&l?l.map((C,N)=>({coordinate:r(C)+w,value:C,index:N,offset:w})).filter(C=>nr(C.coordinate)):r.ticks?r.ticks(y).map(C=>({coordinate:r(C)+w,value:C,offset:w})):r.domain().map((C,N)=>({coordinate:r(C)+w,value:a?a[C]:C,index:N,offset:w}))}},TJ=he([pn,gv,Wp,Y2,V5,bv,B5,z5,rr],y4e),v4e=(t,e,n,r,i,s,a)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var l=Rc(t,a),{tickCount:u}=e,d=0;return d=a==="angleAxis"&&(r==null?void 0:r.length)>=2?rs(r[0]-r[1])*2*d:d,l&&s?s.map((h,p)=>({coordinate:n(h)+d,value:h,index:p,offset:d})):n.ticks?n.ticks(u).map(h=>({coordinate:n(h)+d,value:h,offset:d})):n.domain().map((h,p)=>({coordinate:n(h)+d,value:i?i[h]:h,index:p,offset:d}))}},SJ=he([pn,gv,Y2,bv,B5,z5,rr],v4e),CJ=he(dr,Y2,(t,e)=>{if(!(t==null||e==null))return F1(F1({},t),{},{scale:e})}),b4e=he([dr,Wp,D5,bJ],M5);he((t,e,n)=>_5(t,n),b4e,(t,e)=>{if(!(t==null||e==null))return F1(F1({},t),{},{scale:e})});var w4e=he([pn,S2,C2],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),AJ=t=>t.options.defaultTooltipEventType,NJ=t=>t.options.validateTooltipEventTypes;function kJ(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function $5(t,e){var n=AJ(t),r=NJ(t);return kJ(e,n,r)}function x4e(t){return Qe(e=>$5(e,t))}var IJ=(t,e)=>{var n,r=Number(e);if(!(Lo(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},_4e=t=>t.tooltip.settings,ju={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},E4e={itemInteraction:{click:ju,hover:ju},axisInteraction:{click:ju,hover:ju},keyboardInteraction:ju,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},OJ=qs({name:"tooltip",initialState:E4e,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Jn()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Oo(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:Jn()},removeTooltipEntrySettings:{reducer(t,e){var n=Oo(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Jn()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:T4e,replaceTooltipEntrySettings:S4e,removeTooltipEntrySettings:C4e,setTooltipSettingsState:A4e,setActiveMouseOverItemIndex:jJ,mouseLeaveItem:N4e,mouseLeaveChart:PJ,setActiveClickItemIndex:k4e,setMouseOverAxisIndex:RJ,setMouseClickAxisIndex:I4e,setSyncInteraction:wI,setKeyboardInteraction:xI}=OJ.actions,O4e=OJ.reducer;function sB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Iw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sB(Object(n),!0).forEach(function(r){j4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function j4e(t,e,n){return(e=P4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P4e(t){var e=R4e(t,"string");return typeof e=="symbol"?e:e+""}function R4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function D4e(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function M4e(t){return t.index!=null}var DJ=(t,e,n,r)=>{if(e==null)return ju;var i=D4e(t,e,n);if(i==null)return ju;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(M4e(i)){if(s)return Iw(Iw({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return Iw(Iw({},ju),{},{coordinate:i.coordinate})};function L4e(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function V4e(t,e){var n=L4e(t),r=e[0],i=e[1];if(n===void 0)return!1;var s=Math.min(r,i),a=Math.max(r,i);return n>=s&&n<=a}function U4e(t,e,n){if(n==null||e==null)return!0;var r=Gn(t,e);return r==null||!sd(n)?!0:V4e(r,n)}var F5=(t,e,n,r)=>{var i=t==null?void 0:t.index;if(i==null)return null;var s=Number(i);if(!nr(s))return i;var a=0,l=1/0;e.length>0&&(l=e.length-1);var u=Math.max(a,Math.min(s,l)),d=e[u];return d==null||U4e(d,n,r)?String(u):null},MJ=(t,e,n,r,i,s,a,l)=>{if(!(s==null||l==null)){var u=a[0],d=u==null?void 0:l(u.positions,s);if(d!=null)return d;var h=i==null?void 0:i[Number(s)];if(h)switch(n){case"horizontal":return{x:h.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:h.coordinate}}}},LJ=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var s=t.tooltipItemPayloads[0];return s!=null?[s]:[]}return t.tooltipItemPayloads.filter(a=>{var l;return((l=a.settings)===null||l===void 0?void 0:l.graphicalItemId)===i})},wv=t=>t.options.tooltipPayloadSearcher,Kp=t=>t.tooltip;function aB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aB(Object(n),!0).forEach(function(r){B4e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function B4e(t,e,n){return(e=z4e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z4e(t){var e=$4e(t,"string");return typeof e=="symbol"?e:e+""}function $4e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function F4e(t,e){return t??e}var VJ=(t,e,n,r,i,s,a)=>{if(!(e==null||s==null)){var{chartData:l,computedData:u,dataStartIndex:d,dataEndIndex:h}=n,p=[];return t.reduce((y,v)=>{var w,{dataDefinedOnItem:_,settings:E}=v,C=F4e(_,l),N=Array.isArray(C)?vX(C,d,h):C,O=(w=E==null?void 0:E.dataKey)!==null&&w!==void 0?w:r,R=E==null?void 0:E.nameKey,D;if(r&&Array.isArray(N)&&!Array.isArray(N[0])&&a==="axis"?D=SY(N,r,i):D=s(N,e,u,R),Array.isArray(D))D.forEach(A=>{var k=oB(oB({},E),{},{name:A.name,unit:A.unit,color:void 0,fill:void 0});y.push(dV({tooltipEntrySettings:k,dataKey:A.dataKey,payload:A.payload,value:Gn(A.payload,A.dataKey),name:A.name}))});else{var P;y.push(dV({tooltipEntrySettings:E,dataKey:O,payload:D,value:Gn(D,O),name:(P=Gn(D,R))!==null&&P!==void 0?P:E==null?void 0:E.name}))}return y},p)}},H5=he([di,pn,rJ,m5,ui],yJ),H4e=he([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),q4e=he([ui,qp],E5),Yp=he([H4e,di,q4e],T5,{memoizeOptions:{resultEqualityCheck:G2}}),G4e=he([Yp],t=>t.filter(x5)),W4e=he([Yp],S5,{memoizeOptions:{resultEqualityCheck:G2}}),Xp=he([W4e,Vc],C5),K4e=he([G4e,Vc,di],eJ),q5=he([Xp,di,Yp],N5),UJ=he([di],k5),Y4e=he([di],t=>t.allowDataOverflow),BJ=he([UJ,Y4e],PQ),X4e=he([Yp],t=>t.filter(x5)),Q4e=he([K4e,X4e,mv,WQ],lJ),J4e=he([Q4e,Vc,ui,BJ],uJ),Z4e=he([Yp],aJ),eOe=he([Xp,di,Z4e,K2,ui],j5,{memoizeOptions:{resultEqualityCheck:q2}}),tOe=he([dJ,ui,qp],Gp),nOe=he([tOe,ui],mJ),rOe=he([hJ,ui,qp],Gp),iOe=he([rOe,ui],pJ),sOe=he([fJ,ui,qp],Gp),aOe=he([sOe,ui],gJ),oOe=he([nOe,aOe,iOe],H1),lOe=he([di,UJ,BJ,J4e,eOe,oOe,pn,ui],P5),xv=he([di,pn,Xp,q5,mv,ui,lOe],R5),cOe=he([xv,di,H5],L5),uOe=he([di,xv,cOe,ui],U5),zJ=t=>{var e=ui(t),n=qp(t),r=!1;return bv(t,e,n,r)},$J=he([di,zJ],F2),FJ=he([di,H5,uOe,$J],M5),dOe=he([pn,q5,di,ui],_J),hOe=he([pn,q5,di,ui],EJ),fOe=(t,e,n,r,i,s,a,l)=>{if(e){var{type:u}=e,d=Rc(t,l);if(r){var h=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,p=u==="category"&&r.bandwidth?r.bandwidth()/h:0;return p=l==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?rs(i[0]-i[1])*2*p:p,d&&a?a.map((y,v)=>({coordinate:r(y)+p,value:y,index:v,offset:p})):r.domain().map((y,v)=>({coordinate:r(y)+p,value:s?s[y]:y,index:v,offset:p}))}}},zc=he([pn,di,H5,FJ,zJ,dOe,hOe,ui],fOe),G5=he([AJ,NJ,_4e],(t,e,n)=>kJ(n.shared,t,e)),HJ=t=>t.tooltip.settings.trigger,W5=t=>t.tooltip.settings.defaultIndex,_v=he([Kp,G5,HJ,W5],DJ),xp=he([_v,Xp,vv,xv],F5),qJ=he([zc,xp],IJ),GJ=he([_v],t=>{if(t)return t.dataKey}),mOe=he([_v],t=>{if(t)return t.graphicalItemId}),WJ=he([Kp,G5,HJ,W5],LJ),pOe=he([Dc,Mc,pn,Si,zc,W5,WJ,wv],MJ),gOe=he([_v,pOe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),yOe=he([_v],t=>{var e;return(e=t==null?void 0:t.active)!==null&&e!==void 0?e:!1}),vOe=he([WJ,xp,Vc,vv,qJ,wv,G5],VJ),bOe=he([vOe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function lB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lB(Object(n),!0).forEach(function(r){wOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wOe(t,e,n){return(e=xOe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xOe(t){var e=_Oe(t,"string");return typeof e=="symbol"?e:e+""}function _Oe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var EOe=()=>Qe(di),TOe=()=>{var t=EOe(),e=Qe(zc),n=Qe(FJ);return E1(!t||!n?void 0:cB(cB({},t),{},{scale:n}),e)};function uB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uB(Object(n),!0).forEach(function(r){SOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SOe(t,e,n){return(e=COe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function COe(t){var e=AOe(t,"string");return typeof e=="symbol"?e:e+""}function AOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NOe=(t,e,n,r)=>{var i=e.find(s=>s&&s.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},kOe=(t,e,n,r)=>{var i=e.find(d=>d&&d.index===n);if(i){if(t==="centric"){var s=i.coordinate,{radius:a}=r;return nm(nm(nm({},r),Qr(r.cx,r.cy,a,s)),{},{angle:s,radius:a})}var l=i.coordinate,{angle:u}=r;return nm(nm(nm({},r),Qr(r.cx,r.cy,l,u)),{},{angle:u,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function IOe(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var KJ=(t,e,n,r,i)=>{var s,a=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(a<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var l=0;l<a;l++){var u,d,h,p,y,v=l>0?(u=n[l-1])===null||u===void 0?void 0:u.coordinate:(d=n[a-1])===null||d===void 0?void 0:d.coordinate,w=(h=n[l])===null||h===void 0?void 0:h.coordinate,_=l>=a-1?(p=n[0])===null||p===void 0?void 0:p.coordinate:(y=n[l+1])===null||y===void 0?void 0:y.coordinate,E=void 0;if(!(v==null||w==null||_==null))if(rs(w-v)!==rs(_-w)){var C=[];if(rs(_-w)===rs(i[1]-i[0])){E=_;var N=w+i[1]-i[0];C[0]=Math.min(N,(N+v)/2),C[1]=Math.max(N,(N+v)/2)}else{E=v;var O=_+i[1]-i[0];C[0]=Math.min(w,(O+w)/2),C[1]=Math.max(w,(O+w)/2)}var R=[Math.min(w,(E+w)/2),Math.max(w,(E+w)/2)];if(t>R[0]&&t<=R[1]||t>=C[0]&&t<=C[1]){var D;return(D=n[l])===null||D===void 0?void 0:D.index}}else{var P=Math.min(v,_),A=Math.max(v,_);if(t>(P+w)/2&&t<=(A+w)/2){var k;return(k=n[l])===null||k===void 0?void 0:k.index}}}else if(e)for(var M=0;M<a;M++){var V=e[M];if(V!=null){var U=e[M+1],z=e[M-1];if(M===0&&U!=null&&t<=(V.coordinate+U.coordinate)/2||M===a-1&&z!=null&&t>(V.coordinate+z.coordinate)/2||M>0&&M<a-1&&z!=null&&U!=null&&t>(V.coordinate+z.coordinate)/2&&t<=(V.coordinate+U.coordinate)/2)return V.index}}return-1},YJ=()=>Qe(m5),K5=(t,e)=>e,XJ=(t,e,n)=>n,Y5=(t,e,n,r)=>r,OOe=he(zc,t=>p2(t,e=>e.coordinate)),X5=he([Kp,K5,XJ,Y5],DJ),Q5=he([X5,Xp,vv,xv],F5),jOe=(t,e,n)=>{if(e!=null){var r=Kp(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},QJ=he([Kp,K5,XJ,Y5],LJ),q1=he([Dc,Mc,pn,Si,zc,Y5,QJ,wv],MJ),POe=he([X5,q1],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),JJ=he([zc,Q5],IJ),ROe=he([QJ,Q5,Vc,vv,JJ,wv,K5],VJ),DOe=he([X5,Q5],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),MOe=(t,e,n,r,i,s,a)=>{if(!(!t||!n||!r||!i)&&IOe(t,a)){var l=eSe(t,e),u=KJ(l,s,i,n,r),d=NOe(e,i,u,t);return{activeIndex:String(u),activeCoordinate:d}}},LOe=(t,e,n,r,i,s,a)=>{if(!(!t||!r||!i||!s||!n)){var l=vAe(t,n);if(l){var u=tSe(l,e),d=KJ(u,a,s,r,i),h=kOe(e,s,d,l);return{activeIndex:String(d),activeCoordinate:h}}}},VOe=(t,e,n,r,i,s,a,l)=>{if(!(!t||!e||!r||!i||!s))return e==="horizontal"||e==="vertical"?MOe(t,e,r,i,s,a,l):LOe(t,e,n,r,i,s,a)},UOe=he(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),BOe=he(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(Bi)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:xIe}});function dB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dB(Object(n),!0).forEach(function(r){zOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zOe(t,e,n){return(e=$Oe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $Oe(t){var e=FOe(t,"string");return typeof e=="symbol"?e:e+""}function FOe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var HOe={},qOe={zIndexMap:Object.values(Bi).reduce((t,e)=>hB(hB({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),HOe)},GOe=new Set(Object.values(Bi));function WOe(t){return GOe.has(t)}var ZJ=qs({name:"zIndex",initialState:qOe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Jn()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!WOe(n)&&delete t.zIndexMap[n])},prepare:Jn()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:Jn()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:Jn()}}}),{registerZIndexPortal:KOe,unregisterZIndexPortal:YOe,registerZIndexPortalElement:XOe,unregisterZIndexPortalElement:QOe}=ZJ.actions,JOe=ZJ.reducer;function $o(t){var{zIndex:e,children:n}=t,r=PSe(),i=r&&e!==void 0&&e!==0,s=Gs(),a=Vn();S.useLayoutEffect(()=>i?(a(KOe({zIndex:e})),()=>{a(YOe({zIndex:e}))}):rv,[a,e,i]);var l=Qe(u=>UOe(u,e,s));return i?l?yo.createPortal(n,l):null:n}function _I(){return _I=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_I.apply(null,arguments)}function fB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ow(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fB(Object(n),!0).forEach(function(r){ZOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZOe(t,e,n){return(e=eje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eje(t){var e=tje(t,"string");return typeof e=="symbol"?e:e+""}function tje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nje(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return S.isValidElement(e)?S.cloneElement(e,r):S.createElement(n,r)}function rje(t){var e,{coordinate:n,payload:r,index:i,offset:s,tooltipAxisBandSize:a,layout:l,cursor:u,tooltipEventType:d,chartName:h}=t,p=n,y=r,v=i;if(!u||!p||h!=="ScatterChart"&&d!=="axis")return null;var w,_,E;if(h==="ScatterChart")w=p,_=jCe,E=Bi.cursorLine;else if(h==="BarChart")w=PCe(l,p,s,a),_=GX,E=Bi.cursorRectangle;else if(l==="radial"&&AY(p)){var{cx:C,cy:N,radius:O,startAngle:R,endAngle:D}=KX(p);w={cx:C,cy:N,startAngle:R,endAngle:D,innerRadius:O,outerRadius:O},_=XX,E=Bi.cursorLine}else w={points:_Ae(l,p,s)},_=Lm,E=Bi.cursorLine;var P=typeof u=="object"&&"className"in u?u.className:void 0,A=Ow(Ow(Ow(Ow({stroke:"#ccc",pointerEvents:"none"},s),w),fp(u)),{},{payload:y,payloadIndex:v,className:sn("recharts-tooltip-cursor",P)});return S.createElement($o,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:E},S.createElement(nje,{cursor:u,cursorComp:_,cursorProps:A}))}function ije(t){var e=TOe(),n=kX(),r=zp(),i=YJ();return e==null||n==null||r==null||i==null?null:S.createElement(rje,_I({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var eZ=S.createContext(null),sje=()=>S.useContext(eZ),NA={exports:{}},mB;function aje(){return mB||(mB=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(u,d,h){this.fn=u,this.context=d,this.once=h||!1}function s(u,d,h,p,y){if(typeof h!="function")throw new TypeError("The listener must be a function");var v=new i(h,p||u,y),w=n?n+d:d;return u._events[w]?u._events[w].fn?u._events[w]=[u._events[w],v]:u._events[w].push(v):(u._events[w]=v,u._eventsCount++),u}function a(u,d){--u._eventsCount===0?u._events=new r:delete u._events[d]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],h,p;if(this._eventsCount===0)return d;for(p in h=this._events)e.call(h,p)&&d.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},l.prototype.listeners=function(d){var h=n?n+d:d,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,v=p.length,w=new Array(v);y<v;y++)w[y]=p[y].fn;return w},l.prototype.listenerCount=function(d){var h=n?n+d:d,p=this._events[h];return p?p.fn?1:p.length:0},l.prototype.emit=function(d,h,p,y,v,w){var _=n?n+d:d;if(!this._events[_])return!1;var E=this._events[_],C=arguments.length,N,O;if(E.fn){switch(E.once&&this.removeListener(d,E.fn,void 0,!0),C){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,h),!0;case 3:return E.fn.call(E.context,h,p),!0;case 4:return E.fn.call(E.context,h,p,y),!0;case 5:return E.fn.call(E.context,h,p,y,v),!0;case 6:return E.fn.call(E.context,h,p,y,v,w),!0}for(O=1,N=new Array(C-1);O<C;O++)N[O-1]=arguments[O];E.fn.apply(E.context,N)}else{var R=E.length,D;for(O=0;O<R;O++)switch(E[O].once&&this.removeListener(d,E[O].fn,void 0,!0),C){case 1:E[O].fn.call(E[O].context);break;case 2:E[O].fn.call(E[O].context,h);break;case 3:E[O].fn.call(E[O].context,h,p);break;case 4:E[O].fn.call(E[O].context,h,p,y);break;default:if(!N)for(D=1,N=new Array(C-1);D<C;D++)N[D-1]=arguments[D];E[O].fn.apply(E[O].context,N)}}return!0},l.prototype.on=function(d,h,p){return s(this,d,h,p,!1)},l.prototype.once=function(d,h,p){return s(this,d,h,p,!0)},l.prototype.removeListener=function(d,h,p,y){var v=n?n+d:d;if(!this._events[v])return this;if(!h)return a(this,v),this;var w=this._events[v];if(w.fn)w.fn===h&&(!y||w.once)&&(!p||w.context===p)&&a(this,v);else{for(var _=0,E=[],C=w.length;_<C;_++)(w[_].fn!==h||y&&!w[_].once||p&&w[_].context!==p)&&E.push(w[_]);E.length?this._events[v]=E.length===1?E[0]:E:a(this,v)}return this},l.prototype.removeAllListeners=function(d){var h;return d?(h=n?n+d:d,this._events[h]&&a(this,h)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(NA)),NA.exports}var oje=aje();const lje=va(oje);var _y=new lje,EI="recharts.syncEvent.tooltip",pB="recharts.syncEvent.brush";function tZ(t,e){if(e){var n=Number.parseInt(e,10);if(!Lo(n))return t==null?void 0:t[n]}}var cje={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},nZ=qs({name:"options",initialState:cje,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),uje=nZ.reducer,{createEventEmitter:dje}=nZ.actions;function hje(t){return t.tooltip.syncInteraction}var fje={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},rZ=qs({name:"chartData",initialState:fje,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:gB,setDataStartEndIndexes:mje,setComputedData:qVe}=rZ.actions,pje=rZ.reducer,gje=["x","y"];function yB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yB(Object(n),!0).forEach(function(r){yje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yje(t,e,n){return(e=vje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vje(t){var e=bje(t,"string");return typeof e=="symbol"?e:e+""}function bje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wje(t,e){if(t==null)return{};var n,r,i=xje(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function xje(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function _je(){var t=Qe(p5),e=Qe(g5),n=Vn(),r=Qe(KQ),i=Qe(zc),s=zp(),a=k2(),l=Qe(u=>u.rootProps.className);S.useEffect(()=>{if(t==null)return rv;var u=(d,h,p)=>{if(e!==p&&t===d){if(r==="index"){var y;if(a&&h!==null&&h!==void 0&&(y=h.payload)!==null&&y!==void 0&&y.coordinate&&h.payload.sourceViewBox){var v=h.payload.coordinate,{x:w,y:_}=v,E=wje(v,gje),{x:C,y:N,width:O,height:R}=h.payload.sourceViewBox,D=rm(rm({},E),{},{x:a.x+(O?(w-C)/O:0)*a.width,y:a.y+(R?(_-N)/R:0)*a.height});n(rm(rm({},h),{},{payload:rm(rm({},h.payload),{},{coordinate:D})}))}else n(h);return}if(i!=null){var P;if(typeof r=="function"){var A={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},k=r(i,A);P=i[k]}else r==="value"&&(P=i.find(K=>String(K.value)===h.payload.label));var{coordinate:M}=h.payload;if(P==null||h.payload.active===!1||M==null||a==null){n(wI({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:V,y:U}=M,z=Math.min(V,a.x+a.width),$=Math.min(U,a.y+a.height),ne={x:s==="horizontal"?P.coordinate:z,y:s==="horizontal"?$:P.coordinate},fe=wI({active:h.payload.active,coordinate:ne,dataKey:h.payload.dataKey,index:String(P.index),label:h.payload.label,sourceViewBox:h.payload.sourceViewBox,graphicalItemId:h.payload.graphicalItemId});n(fe)}}};return _y.on(EI,u),()=>{_y.off(EI,u)}},[l,n,e,t,r,i,s,a])}function Eje(){var t=Qe(p5),e=Qe(g5),n=Vn();S.useEffect(()=>{if(t==null)return rv;var r=(i,s,a)=>{e!==a&&t===i&&n(mje(s))};return _y.on(pB,r),()=>{_y.off(pB,r)}},[n,e,t])}function Tje(){var t=Vn();S.useEffect(()=>{t(dje())},[t]),_je(),Eje()}function Sje(t,e,n,r,i,s){var a=Qe(v=>jOe(v,t,e)),l=Qe(g5),u=Qe(p5),d=Qe(KQ),h=Qe(hje),p=h==null?void 0:h.active,y=k2();S.useEffect(()=>{if(!p&&u!=null&&l!=null){var v=wI({active:s,coordinate:n,dataKey:a,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:y,graphicalItemId:void 0});_y.emit(EI,u,v,l)}},[p,n,a,i,r,l,u,d,s,y])}function vB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vB(Object(n),!0).forEach(function(r){Cje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cje(t,e,n){return(e=Aje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Aje(t){var e=Nje(t,"string");return typeof e=="symbol"?e:e+""}function Nje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kje(t){return t.dataKey}function Ije(t,e){return S.isValidElement(t)?S.cloneElement(t,e):typeof t=="function"?S.createElement(t,e):S.createElement(dCe,e)}var wB=[],Oje={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function TI(t){var e,n,r=li(t,Oje),{active:i,allowEscapeViewBox:s,animationDuration:a,animationEasing:l,content:u,filterNull:d,isAnimationActive:h,offset:p,payloadUniqBy:y,position:v,reverseDirection:w,useTranslate3d:_,wrapperStyle:E,cursor:C,shared:N,trigger:O,defaultIndex:R,portal:D,axisId:P}=r,A=Vn(),k=typeof R=="number"?String(R):R;S.useEffect(()=>{A(A4e({shared:N,trigger:O,axisId:P,active:i,defaultIndex:k}))},[A,N,O,P,i,k]);var M=k2(),V=zX(),U=x4e(N),{activeIndex:z,isActive:$}=(e=Qe(Se=>DOe(Se,U,O,k)))!==null&&e!==void 0?e:{},ne=Qe(Se=>ROe(Se,U,O,k)),fe=Qe(Se=>JJ(Se,U,O,k)),K=Qe(Se=>POe(Se,U,O,k)),W=ne,ee=sje(),oe=(n=i??$)!==null&&n!==void 0?n:!1,[pe,B]=$Y([W,oe]),X=U==="axis"?fe:void 0;Sje(U,O,K,X,z,oe);var G=D??ee;if(G==null||M==null||U==null)return null;var Q=W??wB;oe||(Q=wB),d&&Q.length&&(Q=LY(Q.filter(Se=>Se.value!=null&&(Se.hide!==!0||r.includeHidden)),y,kje));var re=Q.length>0,_e=S.createElement(vCe,{allowEscapeViewBox:s,animationDuration:a,animationEasing:l,isAnimationActive:h,active:oe,coordinate:K,hasPayload:re,offset:p,position:v,reverseDirection:w,useTranslate3d:_,viewBox:M,wrapperStyle:E,lastBoundingBox:pe,innerRef:B,hasPortalFromProps:!!D},Ije(u,bB(bB({},r),{},{payload:Q,label:X,active:oe,activeIndex:z,coordinate:K,accessibilityLayer:V})));return S.createElement(S.Fragment,null,yo.createPortal(_e,G),oe&&S.createElement(ije,{cursor:C,tooltipEventType:U,coordinate:K,payload:Q,index:z}))}var J2=t=>null;J2.displayName="Cell";function jje(t,e,n){return(e=Pje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pje(t){var e=Rje(t,"string");return typeof e=="symbol"?e:e+""}function Rje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Dje{constructor(e){jje(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function xB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mje(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xB(Object(n),!0).forEach(function(r){Lje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lje(t,e,n){return(e=Vje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vje(t){var e=Uje(t,"string");return typeof e=="symbol"?e:e+""}function Uje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Bje={cacheSize:2e3,enableCache:!0},iZ=Mje({},Bje),_B=new Dje(iZ.cacheSize),zje={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},EB="recharts_measurement_span";function $je(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",s=e.fontStyle||"",a=e.letterSpacing||"",l=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(a,"|").concat(l)}var TB=(t,e)=>{try{var n=document.getElementById(EB);n||(n=document.createElement("span"),n.setAttribute("id",EB),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,zje,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},D0=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||cv.isSsr)return{width:0,height:0};if(!iZ.enableCache)return TB(e,n);var r=$je(e,n),i=_B.get(r);if(i)return i;var s=TB(e,n);return _B.set(r,s),s},sZ;function Fje(t,e,n){return(e=Hje(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hje(t){var e=qje(t,"string");return typeof e=="symbol"?e:e+""}function qje(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var SB=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,CB=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Gje=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Wje=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Kje={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Yje=["cm","mm","pt","pc","in","Q","px"];function Xje(t){return Yje.includes(t)}var _m="NaN";function Qje(t,e){return t*Kje[e]}class Li{static parse(e){var n,[,r,i]=(n=Wje.exec(e))!==null&&n!==void 0?n:[];return r==null?Li.NaN:new Li(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Lo(e)&&(this.unit=""),n!==""&&!Gje.test(n)&&(this.num=NaN,this.unit=""),Xje(n)&&(this.num=Qje(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Li(NaN,""):new Li(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Li(NaN,""):new Li(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Li(NaN,""):new Li(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Li(NaN,""):new Li(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Lo(this.num)}}sZ=Li;Fje(Li,"NaN",new sZ(NaN,""));function aZ(t){if(t==null||t.includes(_m))return _m;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,s]=(n=SB.exec(e))!==null&&n!==void 0?n:[],a=Li.parse(r??""),l=Li.parse(s??""),u=i==="*"?a.multiply(l):a.divide(l);if(u.isNaN())return _m;e=e.replace(SB,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,[,h,p,y]=(d=CB.exec(e))!==null&&d!==void 0?d:[],v=Li.parse(h??""),w=Li.parse(y??""),_=p==="+"?v.add(w):v.subtract(w);if(_.isNaN())return _m;e=e.replace(CB,_.toString())}return e}var AB=/\(([^()]*)\)/;function Jje(t){for(var e=t,n;(n=AB.exec(e))!=null;){var[,r]=n;e=e.replace(AB,aZ(r))}return e}function Zje(t){var e=t.replace(/\s+/g,"");return e=Jje(e),e=aZ(e),e}function e5e(t){try{return Zje(t)}catch{return _m}}function kA(t){var e=e5e(t.slice(5,-1));return e===_m?"":e}var t5e=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],n5e=["dx","dy","angle","className","breakAll"];function SI(){return SI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SI.apply(null,arguments)}function NB(t,e){if(t==null)return{};var n,r,i=r5e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function r5e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var oZ=/[ \f\n\r\t\v\u2028\u2029]+/,lZ=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];_i(e)||(n?i=e.toString().split(""):i=e.toString().split(oZ));var s=i.map(l=>({word:l,width:D0(l,r).width})),a=n?0:D0("",r).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}};function i5e(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var cZ=(t,e,n,r)=>t.reduce((i,s)=>{var{word:a,width:l}=s,u=i[i.length-1];if(u&&l!=null&&(e==null||r||u.width+l+n<Number(e)))u.words.push(a),u.width+=l+n;else{var d={words:[a],width:l};i.push(d)}return i},[]),uZ=t=>t.reduce((e,n)=>e.width>n.width?e:n),s5e="",kB=(t,e,n,r,i,s,a,l)=>{var u=t.slice(0,e),d=lZ({breakAll:n,style:r,children:u+s5e});if(!d)return[!1,[]];var h=cZ(d.wordsWithComputedWidth,s,a,l),p=h.length>i||uZ(h).width>Number(s);return[p,h]},a5e=(t,e,n,r,i)=>{var{maxLines:s,children:a,style:l,breakAll:u}=t,d=Ge(s),h=String(a),p=cZ(e,r,n,i);if(!d||i)return p;var y=p.length>s||uZ(p).width>Number(r);if(!y)return p;for(var v=0,w=h.length-1,_=0,E;v<=w&&_<=h.length-1;){var C=Math.floor((v+w)/2),N=C-1,[O,R]=kB(h,N,u,l,s,r,n,i),[D]=kB(h,C,u,l,s,r,n,i);if(!O&&!D&&(v=C+1),O&&D&&(w=C-1),!O&&D){E=R;break}_++}return E||p},IB=t=>{var e=_i(t)?[]:t.toString().split(oZ);return[{words:e,width:void 0}]},o5e=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:a}=t;if((e||n)&&!cv.isSsr){var l,u,d=lZ({breakAll:s,children:r,style:i});if(d){var{wordsWithComputedWidth:h,spaceWidth:p}=d;l=h,u=p}else return IB(r);return a5e({breakAll:s,children:r,maxLines:a,style:i},l,u,e,!!n)}return IB(r)},dZ="#808080",l5e={angle:0,breakAll:!1,capHeight:"0.71em",fill:dZ,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Z2=S.forwardRef((t,e)=>{var n=li(t,l5e),{x:r,y:i,lineHeight:s,capHeight:a,fill:l,scaleToFit:u,textAnchor:d,verticalAnchor:h}=n,p=NB(n,t5e),y=S.useMemo(()=>o5e({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:u,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,u,p.style,p.width]),{dx:v,dy:w,angle:_,className:E,breakAll:C}=p,N=NB(p,n5e);if(!wl(r)||!wl(i)||y.length===0)return null;var O=Number(r)+(Ge(v)?v:0),R=Number(i)+(Ge(w)?w:0);if(!nr(O)||!nr(R))return null;var D;switch(h){case"start":D=kA("calc(".concat(a,")"));break;case"middle":D=kA("calc(".concat((y.length-1)/2," * -").concat(s," + (").concat(a," / 2))"));break;default:D=kA("calc(".concat(y.length-1," * -").concat(s,")"));break}var P=[];if(u){var A=y[0].width,{width:k}=p;P.push("scale(".concat(Ge(k)&&Ge(A)?k/A:1,")"))}return _&&P.push("rotate(".concat(_,", ").concat(O,", ").concat(R,")")),P.length&&(N.transform=P.join(" ")),S.createElement("text",SI({},ws(N),{ref:e,x:O,y:R,className:sn("recharts-text",E),textAnchor:d,fill:l.includes("url")?dZ:l}),y.map((M,V)=>{var U=M.words.join(C?"":" ");return S.createElement("tspan",{x:O,dy:V===0?D:s,key:"".concat(U,"-").concat(V)},U)}))});Z2.displayName="Text";var c5e=["labelRef"],u5e=["content"];function OB(t,e){if(t==null)return{};var n,r,i=d5e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function d5e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function jB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ir(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jB(Object(n),!0).forEach(function(r){h5e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function h5e(t,e,n){return(e=f5e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f5e(t){var e=m5e(t,"string");return typeof e=="symbol"?e:e+""}function m5e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nc(){return nc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nc.apply(null,arguments)}var hZ=S.createContext(null),p5e=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:s,height:a,children:l}=t,u=S.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:s,height:a}),[e,n,r,i,s,a]);return S.createElement(hZ.Provider,{value:u},l)},fZ=()=>{var t=S.useContext(hZ),e=k2();return t||NX(e)},g5e=S.createContext(null),y5e=()=>{var t=S.useContext(g5e),e=Qe(ZQ);return t||e},v5e=t=>{var{value:e,formatter:n}=t,r=_i(t.children)?e:t.children;return typeof n=="function"?n(r):r},J5=t=>t!=null&&typeof t=="function",b5e=(t,e)=>{var n=rs(e-t),r=Math.min(Math.abs(e-t),360);return n*r},w5e=(t,e,n,r,i)=>{var{offset:s,className:a}=t,{cx:l,cy:u,innerRadius:d,outerRadius:h,startAngle:p,endAngle:y,clockWise:v}=i,w=(d+h)/2,_=b5e(p,y),E=_>=0?1:-1,C,N;switch(e){case"insideStart":C=p+E*s,N=v;break;case"insideEnd":C=y-E*s,N=!v;break;case"end":C=y+E*s,N=v;break;default:throw new Error("Unsupported position ".concat(e))}N=_<=0?N:!N;var O=Qr(l,u,w,C),R=Qr(l,u,w,C+(N?1:-1)*359),D="M".concat(O.x,",").concat(O.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(N?0:1,`,
    `).concat(R.x,",").concat(R.y),P=_i(t.id)?cy("recharts-radial-line-"):t.id;return S.createElement("text",nc({},r,{dominantBaseline:"central",className:sn("recharts-radial-bar-label",a)}),S.createElement("defs",null,S.createElement("path",{id:P,d:D})),S.createElement("textPath",{xlinkHref:"#".concat(P)},n))},x5e=(t,e,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:a,startAngle:l,endAngle:u}=t,d=(l+u)/2;if(n==="outside"){var{x:h,y:p}=Qr(r,i,a+e,d);return{x:h,y:p,textAnchor:h>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var y=(s+a)/2,{x:v,y:w}=Qr(r,i,y,d);return{x:v,y:w,textAnchor:"middle",verticalAnchor:"middle"}},CI=t=>"cx"in t&&Ge(t.cx),_5e=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,s;n!=null&&!CI(n)&&(s=n);var{x:a,y:l,upperWidth:u,lowerWidth:d,height:h}=e,p=a,y=a+(u-d)/2,v=(p+y)/2,w=(u+d)/2,_=p+u/2,E=h>=0?1:-1,C=E*r,N=E>0?"end":"start",O=E>0?"start":"end",R=u>=0?1:-1,D=R*r,P=R>0?"end":"start",A=R>0?"start":"end";if(i==="top"){var k={x:p+u/2,y:l-C,textAnchor:"middle",verticalAnchor:N};return Ir(Ir({},k),s?{height:Math.max(l-s.y,0),width:u}:{})}if(i==="bottom"){var M={x:y+d/2,y:l+h+C,textAnchor:"middle",verticalAnchor:O};return Ir(Ir({},M),s?{height:Math.max(s.y+s.height-(l+h),0),width:d}:{})}if(i==="left"){var V={x:v-D,y:l+h/2,textAnchor:P,verticalAnchor:"middle"};return Ir(Ir({},V),s?{width:Math.max(V.x-s.x,0),height:h}:{})}if(i==="right"){var U={x:v+w+D,y:l+h/2,textAnchor:A,verticalAnchor:"middle"};return Ir(Ir({},U),s?{width:Math.max(s.x+s.width-U.x,0),height:h}:{})}var z=s?{width:w,height:h}:{};return i==="insideLeft"?Ir({x:v+D,y:l+h/2,textAnchor:A,verticalAnchor:"middle"},z):i==="insideRight"?Ir({x:v+w-D,y:l+h/2,textAnchor:P,verticalAnchor:"middle"},z):i==="insideTop"?Ir({x:p+u/2,y:l+C,textAnchor:"middle",verticalAnchor:O},z):i==="insideBottom"?Ir({x:y+d/2,y:l+h-C,textAnchor:"middle",verticalAnchor:N},z):i==="insideTopLeft"?Ir({x:p+D,y:l+C,textAnchor:A,verticalAnchor:O},z):i==="insideTopRight"?Ir({x:p+u-D,y:l+C,textAnchor:P,verticalAnchor:O},z):i==="insideBottomLeft"?Ir({x:y+D,y:l+h-C,textAnchor:A,verticalAnchor:N},z):i==="insideBottomRight"?Ir({x:y+d-D,y:l+h-C,textAnchor:P,verticalAnchor:N},z):i&&typeof i=="object"&&(Ge(i.x)||Cc(i.x))&&(Ge(i.y)||Cc(i.y))?Ir({x:a+ha(i.x,w),y:l+ha(i.y,h),textAnchor:"end",verticalAnchor:"end"},z):Ir({x:_,y:l+h/2,textAnchor:"middle",verticalAnchor:"middle"},z)},E5e={angle:0,offset:5,zIndex:Bi.label,position:"middle",textBreakAll:!1};function Su(t){var e=li(t,E5e),{viewBox:n,position:r,value:i,children:s,content:a,className:l="",textBreakAll:u,labelRef:d}=e,h=y5e(),p=fZ(),y=r==="center"?p:h??p,v,w,_;if(n==null?v=y:CI(n)?v=n:v=NX(n),!v||_i(i)&&_i(s)&&!S.isValidElement(a)&&typeof a!="function")return null;var E=Ir(Ir({},e),{},{viewBox:v});if(S.isValidElement(a)){var{labelRef:C}=E,N=OB(E,c5e);return S.cloneElement(a,N)}if(typeof a=="function"){var{content:O}=E,R=OB(E,u5e);if(w=S.createElement(a,R),S.isValidElement(w))return w}else w=v5e(e);var D=ws(e);if(CI(v)){if(r==="insideStart"||r==="insideEnd"||r==="end")return w5e(e,r,w,D,v);_=x5e(v,e.offset,e.position)}else _=_5e(e,v);return S.createElement($o,{zIndex:e.zIndex},S.createElement(Z2,nc({ref:d,className:sn("recharts-label",l)},D,_,{textAnchor:i5e(D.textAnchor)?D.textAnchor:_.textAnchor,breakAll:u}),w))}Su.displayName="Label";var T5e=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?S.createElement(Su,nc({key:"label-implicit"},r)):wl(t)?S.createElement(Su,nc({key:"label-implicit",value:t},r)):S.isValidElement(t)?t.type===Su?S.cloneElement(t,Ir({key:"label-implicit"},r)):S.createElement(Su,nc({key:"label-implicit",content:t},r)):J5(t)?S.createElement(Su,nc({key:"label-implicit",content:t},r)):t&&typeof t=="object"?S.createElement(Su,nc({},t,{key:"label-implicit"},r)):null};function S5e(t){var{label:e,labelRef:n}=t,r=fZ();return T5e(e,r,n)||null}var IA={},OA={},PB;function C5e(){return PB||(PB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(OA)),OA}var jA={},RB;function A5e(){return RB||(RB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(jA)),jA}var DB;function N5e(){return DB||(DB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=C5e(),n=A5e(),r=Nj();function i(s){if(r.isArrayLike(s))return e.last(n.toArray(s))}t.last=i})(IA)),IA}var PA,MB;function k5e(){return MB||(MB=1,PA=N5e().last),PA}var I5e=k5e();const O5e=va(I5e);var j5e=["valueAccessor"],P5e=["dataKey","clockWise","id","textBreakAll","zIndex"];function G1(){return G1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},G1.apply(null,arguments)}function LB(t,e){if(t==null)return{};var n,r,i=R5e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function R5e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var D5e=t=>Array.isArray(t.value)?O5e(t.value):t.value,mZ=S.createContext(void 0),M5e=mZ.Provider,pZ=S.createContext(void 0),L5e=pZ.Provider;function V5e(){return S.useContext(mZ)}function U5e(){return S.useContext(pZ)}function ix(t){var{valueAccessor:e=D5e}=t,n=LB(t,j5e),{dataKey:r,clockWise:i,id:s,textBreakAll:a,zIndex:l}=n,u=LB(n,P5e),d=V5e(),h=U5e(),p=d||h;return!p||!p.length?null:S.createElement($o,{zIndex:l??Bi.label},S.createElement(zi,{className:"recharts-label-list"},p.map((y,v)=>{var w,_=_i(r)?e(y,v):Gn(y&&y.payload,r),E=_i(s)?{}:{id:"".concat(s,"-").concat(v)};return S.createElement(Su,G1({key:"label-".concat(v)},ws(y),u,E,{fill:(w=n.fill)!==null&&w!==void 0?w:y.fill,parentViewBox:y.parentViewBox,value:_,textBreakAll:a,viewBox:y.viewBox,index:v,zIndex:0}))})))}ix.displayName="LabelList";function gZ(t){var{label:e}=t;return e?e===!0?S.createElement(ix,{key:"labelList-implicit"}):S.isValidElement(e)||J5(e)?S.createElement(ix,{key:"labelList-implicit",content:e}):typeof e=="object"?S.createElement(ix,G1({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function AI(){return AI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AI.apply(null,arguments)}var yZ=t=>{var{cx:e,cy:n,r,className:i}=t,s=sn("recharts-dot",i);return Ge(e)&&Ge(n)&&Ge(r)?S.createElement("circle",AI({},pa(t),Cj(t),{className:s,cx:e,cy:n,r})):null},vZ=t=>t.graphicalItems.polarItems,B5e=he([rr,pv],E5),eE=he([vZ,dr,B5e],T5),z5e=he([eE],S5),tE=he([z5e,$2],C5),$5e=he([tE,dr,eE],N5);he([tE,dr,eE],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(i=>{var s,a=Gn(r,(s=e.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:a,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:Gn(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var VB=()=>{},F5e=he([tE,dr,eE,K2,rr],j5),H5e=he([dr,I5,O5,VB,F5e,VB,pn,rr],P5),bZ=he([dr,pn,tE,$5e,mv,rr,H5e],R5),q5e=he([bZ,dr,Wp],L5);he([dr,bZ,q5e,rr],U5);var G5e={radiusAxis:{},angleAxis:{}},wZ=qs({name:"polarAxis",initialState:G5e,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:GVe,removeRadiusAxis:WVe,addAngleAxis:KVe,removeAngleAxis:YVe}=wZ.actions,W5e=wZ.reducer;function UB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function BB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UB(Object(n),!0).forEach(function(r){K5e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function K5e(t,e,n){return(e=Y5e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y5e(t){var e=X5e(t,"string");return typeof e=="symbol"?e:e+""}function X5e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Q5e=(t,e)=>e,Z5=he([vZ,Q5e],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),J5e=[],eP=(t,e,n)=>(n==null?void 0:n.length)===0?J5e:n,xZ=he([$2,Z5,eP],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var i;if((e==null?void 0:e.data)!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(s=>BB(BB({},e.presentationProps),s.props))),i!=null)return i}}),Z5e=he([xZ,Z5,eP],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,i)=>{var s,a=Gn(r,e.nameKey,e.name),l;return n!=null&&(s=n[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?l=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?l=r.fill:l=e.fill,{value:T2(a,e.dataKey),color:l,payload:r,type:e.legendType}})}),ePe=he([xZ,Z5,eP,Si],(t,e,n,r)=>{if(!(e==null||t==null))return lRe({offset:r,pieSettings:e,displayedData:t,cells:n})}),RA={exports:{}},xn={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zB;function tPe(){if(zB)return xn;zB=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),v=Symbol.for("react.client.reference");function w(_){if(typeof _=="object"&&_!==null){var E=_.$$typeof;switch(E){case t:switch(_=_.type,_){case n:case i:case r:case u:case d:case y:return _;default:switch(_=_&&_.$$typeof,_){case a:case l:case p:case h:return _;case s:return _;default:return E}}case e:return E}}}return xn.ContextConsumer=s,xn.ContextProvider=a,xn.Element=t,xn.ForwardRef=l,xn.Fragment=n,xn.Lazy=p,xn.Memo=h,xn.Portal=e,xn.Profiler=i,xn.StrictMode=r,xn.Suspense=u,xn.SuspenseList=d,xn.isContextConsumer=function(_){return w(_)===s},xn.isContextProvider=function(_){return w(_)===a},xn.isElement=function(_){return typeof _=="object"&&_!==null&&_.$$typeof===t},xn.isForwardRef=function(_){return w(_)===l},xn.isFragment=function(_){return w(_)===n},xn.isLazy=function(_){return w(_)===p},xn.isMemo=function(_){return w(_)===h},xn.isPortal=function(_){return w(_)===e},xn.isProfiler=function(_){return w(_)===i},xn.isStrictMode=function(_){return w(_)===r},xn.isSuspense=function(_){return w(_)===u},xn.isSuspenseList=function(_){return w(_)===d},xn.isValidElementType=function(_){return typeof _=="string"||typeof _=="function"||_===n||_===i||_===r||_===u||_===d||typeof _=="object"&&_!==null&&(_.$$typeof===p||_.$$typeof===h||_.$$typeof===a||_.$$typeof===s||_.$$typeof===l||_.$$typeof===v||_.getModuleId!==void 0)},xn.typeOf=w,xn}var $B;function nPe(){return $B||($B=1,RA.exports=tPe()),RA.exports}var rPe=nPe(),FB=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",HB=null,DA=null,_Z=t=>{if(t===HB&&Array.isArray(DA))return DA;var e=[];return S.Children.forEach(t,n=>{_i(n)||(rPe.isFragment(n)?e=e.concat(_Z(n.props.children)):e.push(n))}),DA=e,HB=t,e};function EZ(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>FB(i)):r=[FB(e)],_Z(t).forEach(i=>{var s=zh(i,"type.displayName")||zh(i,"type.name");s&&r.indexOf(s)!==-1&&n.push(i)}),n}var TZ=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,MA={},qB;function iPe(){return qB||(qB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const s=n[Symbol.toStringTag];return s==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${s}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(MA)),MA}var LA,GB;function sPe(){return GB||(GB=1,LA=iPe().isPlainObject),LA}var aPe=sPe();const oPe=va(aPe);var WB,KB,YB,XB,QB;function JB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ZB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JB(Object(n),!0).forEach(function(r){lPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lPe(t,e,n){return(e=cPe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cPe(t){var e=uPe(t,"string");return typeof e=="symbol"?e:e+""}function uPe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function W1(){return W1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},W1.apply(null,arguments)}function o0(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var ez=(t,e,n,r,i)=>{var s=n-r,a;return a=Er(WB||(WB=o0(["M ",",",""])),t,e),a+=Er(KB||(KB=o0(["L ",",",""])),t+n,e),a+=Er(YB||(YB=o0(["L ",",",""])),t+n-s/2,e+i),a+=Er(XB||(XB=o0(["L ",",",""])),t+n-s/2-r,e+i),a+=Er(QB||(QB=o0(["L ",","," Z"])),t,e),a},dPe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},hPe=t=>{var e=li(t,dPe),{x:n,y:r,upperWidth:i,lowerWidth:s,height:a,className:l}=e,{animationEasing:u,animationDuration:d,animationBegin:h,isUpdateAnimationActive:p}=e,y=S.useRef(null),[v,w]=S.useState(-1),_=S.useRef(i),E=S.useRef(s),C=S.useRef(a),N=S.useRef(n),O=S.useRef(r),R=D2(t,"trapezoid-");if(S.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var ne=y.current.getTotalLength();ne&&w(ne)}catch{}},[]),n!==+n||r!==+r||i!==+i||s!==+s||a!==+a||i===0&&s===0||a===0)return null;var D=sn("recharts-trapezoid",l);if(!p)return S.createElement("g",null,S.createElement("path",W1({},ws(e),{className:D,d:ez(n,r,i,s,a)})));var P=_.current,A=E.current,k=C.current,M=N.current,V=O.current,U="0px ".concat(v===-1?1:v,"px"),z="".concat(v,"px 0px"),$=$X(["strokeDasharray"],d,u);return S.createElement(R2,{animationId:R,key:R,canBegin:v>0,duration:d,easing:u,isActive:p,begin:h},ne=>{var fe=Ui(P,i,ne),K=Ui(A,s,ne),W=Ui(k,a,ne),ee=Ui(M,n,ne),oe=Ui(V,r,ne);y.current&&(_.current=fe,E.current=K,C.current=W,N.current=ee,O.current=oe);var pe=ne>0?{transition:$,strokeDasharray:z}:{strokeDasharray:U};return S.createElement("path",W1({},ws(e),{className:D,d:ez(ee,oe,fe,K,W),ref:y,style:ZB(ZB({},pe),e.style)}))})},fPe=["option","shapeType","activeClassName"];function mPe(t,e){if(t==null)return{};var n,r,i=pPe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function pPe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function tz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function K1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tz(Object(n),!0).forEach(function(r){gPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gPe(t,e,n){return(e=yPe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yPe(t){var e=vPe(t,"string");return typeof e=="symbol"?e:e+""}function vPe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bPe(t,e){return K1(K1({},e),t)}function wPe(t,e){return t==="symbols"}function nz(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return S.createElement(GX,n);case"trapezoid":return S.createElement(hPe,n);case"sector":return S.createElement(XX,n);case"symbols":if(wPe(e))return S.createElement(Sj,n);break;case"curve":return S.createElement(Lm,n);default:return null}}function xPe(t){return S.isValidElement(t)?t.props:t}function _Pe(t){var{option:e,shapeType:n,activeClassName:r="recharts-active-shape"}=t,i=mPe(t,fPe),s;if(S.isValidElement(e))s=S.cloneElement(e,K1(K1({},i),xPe(e)));else if(typeof e=="function")s=e(i,i.index);else if(oPe(e)&&typeof e!="boolean"){var a=bPe(e,i);s=S.createElement(nz,{shapeType:n,elementProps:a})}else{var l=i;s=S.createElement(nz,{shapeType:n,elementProps:l})}return i.isActive?S.createElement(zi,{className:r},s):s}var EPe=(t,e,n)=>{var r=Vn();return(i,s)=>a=>{t==null||t(i,s,a),r(jJ({activeIndex:String(s),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}},TPe=t=>{var e=Vn();return(n,r)=>i=>{t==null||t(n,r,i),e(N4e())}},SPe=(t,e,n)=>{var r=Vn();return(i,s)=>a=>{t==null||t(i,s,a),r(k4e({activeIndex:String(s),activeDataKey:e,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:n}))}};function SZ(t){var{tooltipEntrySettings:e}=t,n=Vn(),r=Gs(),i=S.useRef(null);return S.useLayoutEffect(()=>{r||(i.current===null?n(T4e(e)):i.current!==e&&n(S4e({prev:i.current,next:e})),i.current=e)},[e,n,r]),S.useLayoutEffect(()=>()=>{i.current&&(n(C4e(i.current)),i.current=null)},[n]),null}function CPe(t){var{legendPayload:e}=t,n=Vn(),r=Gs(),i=S.useRef(null);return S.useLayoutEffect(()=>{r||(i.current===null?n(LX(e)):i.current!==e&&n(VX({prev:i.current,next:e})),i.current=e)},[n,r,e]),S.useLayoutEffect(()=>()=>{i.current&&(n(UX(i.current)),i.current=null)},[n]),null}function APe(t){var{legendPayload:e}=t,n=Vn(),r=Qe(pn),i=S.useRef(null);return S.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(i.current===null?n(LX(e)):i.current!==e&&n(VX({prev:i.current,next:e})),i.current=e)},[n,r,e]),S.useLayoutEffect(()=>()=>{i.current&&(n(UX(i.current)),i.current=null)},[n]),null}var VA,NPe=()=>{var[t]=S.useState(()=>cy("uid-"));return t},kPe=(VA=Sre.useId)!==null&&VA!==void 0?VA:NPe;function IPe(t,e){var n=kPe();return e||(t?"".concat(t,"-").concat(n):n)}var OPe=S.createContext(void 0),CZ=t=>{var{id:e,type:n,children:r}=t,i=IPe("recharts-".concat(n),e);return S.createElement(OPe.Provider,{value:i},r(i))},jPe={cartesianItems:[],polarItems:[]},AZ=qs({name:"graphicalItems",initialState:jPe,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Jn()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Oo(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:Jn()},removeCartesianGraphicalItem:{reducer(t,e){var n=Oo(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Jn()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Jn()},removePolarGraphicalItem:{reducer(t,e){var n=Oo(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Jn()}}}),{addCartesianGraphicalItem:PPe,replaceCartesianGraphicalItem:RPe,removeCartesianGraphicalItem:DPe,addPolarGraphicalItem:MPe,removePolarGraphicalItem:LPe}=AZ.actions,VPe=AZ.reducer,UPe=t=>{var e=Vn(),n=S.useRef(null);return S.useLayoutEffect(()=>{n.current===null?e(PPe(t)):n.current!==t&&e(RPe({prev:n.current,next:t})),n.current=t},[e,t]),S.useLayoutEffect(()=>()=>{n.current&&(e(DPe(n.current)),n.current=null)},[e]),null},BPe=S.memo(UPe);function zPe(t){var e=Vn();return S.useLayoutEffect(()=>(e(MPe(t)),()=>{e(LPe(t))}),[e,t]),null}var $Pe=["key"],FPe=["onMouseEnter","onClick","onMouseLeave"],HPe=["id"],qPe=["id"];function rz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rz(Object(n),!0).forEach(function(r){GPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function GPe(t,e,n){return(e=WPe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WPe(t){var e=KPe(t,"string");return typeof e=="symbol"?e:e+""}function KPe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ad(){return ad=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ad.apply(null,arguments)}function nE(t,e){if(t==null)return{};var n,r,i=YPe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function YPe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function XPe(t){var e=S.useMemo(()=>EZ(t.children,J2),[t.children]),n=Qe(r=>Z5e(r,t.id,e));return n==null?null:S.createElement(APe,{legendPayload:n})}var QPe=S.memo(t=>{var{dataKey:e,nameKey:n,sectors:r,stroke:i,strokeWidth:s,fill:a,name:l,hide:u,tooltipType:d,id:h}=t,p={dataDefinedOnItem:r.map(y=>y.tooltipPayload),positions:r.map(y=>y.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:a,dataKey:e,nameKey:n,name:T2(l,e),hide:u,type:d,color:a,unit:"",graphicalItemId:h}};return S.createElement(SZ,{tooltipEntrySettings:p})}),JPe=(t,e)=>t>e?"start":t<e?"end":"middle",ZPe=(t,e,n)=>ha(typeof e=="function"?e(t):e,n,n*.8),eRe=(t,e,n)=>{var{top:r,left:i,width:s,height:a}=e,l=WX(s,a),u=i+ha(t.cx,s,s/2),d=r+ha(t.cy,a,a/2),h=ha(t.innerRadius,l,0),p=ZPe(n,t.outerRadius,l),y=t.maxRadius||Math.sqrt(s*s+a*a)/2;return{cx:u,cy:d,innerRadius:h,outerRadius:p,maxRadius:y}},tRe=(t,e)=>{var n=rs(e-t),r=Math.min(Math.abs(e-t),360);return n*r};function nRe(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var rRe=(t,e)=>{if(S.isValidElement(t))return S.cloneElement(t,e);if(typeof t=="function")return t(e);var n=sn("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:r}=e,i=nE(e,$Pe);return S.createElement(Lm,ad({},i,{type:"linear",className:n}))},iRe=(t,e,n)=>{if(S.isValidElement(t))return S.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),S.isValidElement(r)))return r;var i=sn("recharts-pie-label-text",nRe(t));return S.createElement(Z2,ad({},e,{alignmentBaseline:"middle",className:i}),r)};function sRe(t){var{sectors:e,props:n,showLabels:r}=t,{label:i,labelLine:s,dataKey:a}=n;if(!r||!i||!e)return null;var l=pa(n),u=fp(i),d=fp(s),h=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,p=e.map((y,v)=>{var w=(y.startAngle+y.endAngle)/2,_=Qr(y.cx,y.cy,y.outerRadius+h,w),E=Tr(Tr(Tr(Tr({},l),y),{},{stroke:"none"},u),{},{index:v,textAnchor:JPe(_.x,y.cx)},_),C=Tr(Tr(Tr(Tr({},l),y),{},{fill:"none",stroke:y.fill},d),{},{index:v,points:[Qr(y.cx,y.cy,y.outerRadius,w),_],key:"line"});return S.createElement($o,{zIndex:Bi.label,key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(v)},S.createElement(zi,null,s&&rRe(s,C),iRe(i,E,Gn(y,a))))});return S.createElement(zi,{className:"recharts-pie-labels"},p)}function aRe(t){var{sectors:e,props:n,showLabels:r}=t,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?S.createElement(gZ,{label:i}):S.createElement(sRe,{sectors:e,props:n,showLabels:r})}function oRe(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:i,shape:s,id:a}=t,l=Qe(xp),u=Qe(GJ),d=Qe(mOe),{onMouseEnter:h,onClick:p,onMouseLeave:y}=i,v=nE(i,FPe),w=EPe(h,i.dataKey,a),_=TPe(y),E=SPe(p,i.dataKey,a);return e==null||e.length===0?null:S.createElement(S.Fragment,null,e.map((C,N)=>{if((C==null?void 0:C.startAngle)===0&&(C==null?void 0:C.endAngle)===0&&e.length!==1)return null;var O=d==null||d===a,R=String(N)===l&&(u==null||i.dataKey===u)&&O,D=l?r:null,P=n&&R?n:D,A=Tr(Tr({},C),{},{stroke:C.stroke,tabIndex:-1,[_X]:N,[EX]:a});return S.createElement(zi,ad({key:"sector-".concat(C==null?void 0:C.startAngle,"-").concat(C==null?void 0:C.endAngle,"-").concat(C.midAngle,"-").concat(N),tabIndex:-1,className:"recharts-pie-sector"},Aj(v,C,N),{onMouseEnter:w(C,N),onMouseLeave:_(C,N),onClick:E(C,N)}),S.createElement(_Pe,ad({option:s??P,index:N,shapeType:"sector",isActive:R},A)))}))}function lRe(t){var e,{pieSettings:n,displayedData:r,cells:i,offset:s}=t,{cornerRadius:a,startAngle:l,endAngle:u,dataKey:d,nameKey:h,tooltipType:p}=n,y=Math.abs(n.minAngle),v=tRe(l,u),w=Math.abs(v),_=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,E=r.filter(P=>Gn(P,d,0)!==0).length,C=(w>=360?E:E-1)*_,N=w-E*y-C,O=r.reduce((P,A)=>{var k=Gn(A,d,0);return P+(Ge(k)?k:0)},0),R;if(O>0){var D;R=r.map((P,A)=>{var k=Gn(P,d,0),M=Gn(P,h,A),V=eRe(n,s,P),U=(Ge(k)?k:0)/O,z,$=Tr(Tr({},P),i&&i[A]&&i[A].props);A?z=D.endAngle+rs(v)*_*(k!==0?1:0):z=l;var ne=z+rs(v)*((k!==0?y:0)+U*N),fe=(z+ne)/2,K=(V.innerRadius+V.outerRadius)/2,W=[{name:M,value:k,payload:$,dataKey:d,type:p,graphicalItemId:n.id}],ee=Qr(V.cx,V.cy,K,fe);return D=Tr(Tr(Tr(Tr({},n.presentationProps),{},{percent:U,cornerRadius:typeof a=="string"?parseFloat(a):a,name:M,tooltipPayload:W,midAngle:fe,middleRadius:K,tooltipPosition:ee},$),V),{},{value:k,dataKey:d,startAngle:z,endAngle:ne,payload:$,paddingAngle:rs(v)*_}),D})}return R}function cRe(t){var{showLabels:e,sectors:n,children:r}=t,i=S.useMemo(()=>!e||!n?[]:n.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[n,e]);return S.createElement(L5e,{value:e?i:void 0},r)}function uRe(t){var{props:e,previousSectorsRef:n,id:r}=t,{sectors:i,isAnimationActive:s,animationBegin:a,animationDuration:l,animationEasing:u,activeShape:d,inactiveShape:h,onAnimationStart:p,onAnimationEnd:y}=e,v=D2(e,"recharts-pie-"),w=n.current,[_,E]=S.useState(!1),C=S.useCallback(()=>{typeof y=="function"&&y(),E(!1)},[y]),N=S.useCallback(()=>{typeof p=="function"&&p(),E(!0)},[p]);return S.createElement(cRe,{showLabels:!_,sectors:i},S.createElement(R2,{animationId:v,begin:a,duration:l,isActive:s,easing:u,onAnimationStart:N,onAnimationEnd:C,key:v},O=>{var R=[],D=i&&i[0],P=D==null?void 0:D.startAngle;return i==null||i.forEach((A,k)=>{var M=w&&w[k],V=k>0?zh(A,"paddingAngle",0):0;if(M){var U=Ui(M.endAngle-M.startAngle,A.endAngle-A.startAngle,O),z=Tr(Tr({},A),{},{startAngle:P+V,endAngle:P+U+V});R.push(z),P=z.endAngle}else{var{endAngle:$,startAngle:ne}=A,fe=Ui(0,$-ne,O),K=Tr(Tr({},A),{},{startAngle:P+V,endAngle:P+fe+V});R.push(K),P=K.endAngle}}),n.current=R,S.createElement(zi,null,S.createElement(oRe,{sectors:R,activeShape:d,inactiveShape:h,allOtherPieProps:e,shape:e.shape,id:r}))}),S.createElement(aRe,{showLabels:!_,sectors:i,props:e}),e.children)}var dRe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Bi.area};function hRe(t){var{id:e}=t,n=nE(t,HPe),{hide:r,className:i,rootTabIndex:s}=t,a=S.useMemo(()=>EZ(t.children,J2),[t.children]),l=Qe(h=>ePe(h,e,a)),u=S.useRef(null),d=sn("recharts-pie",i);return r||l==null?(u.current=null,S.createElement(zi,{tabIndex:s,className:d})):S.createElement($o,{zIndex:t.zIndex},S.createElement(QPe,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:l,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType,id:e}),S.createElement(zi,{tabIndex:s,className:d},S.createElement(uRe,{props:Tr(Tr({},n),{},{sectors:l}),previousSectorsRef:u,id:e})))}function NZ(t){var e=li(t,dRe),{id:n}=e,r=nE(e,qPe),i=pa(r);return S.createElement(CZ,{id:n,type:"pie"},s=>S.createElement(S.Fragment,null,S.createElement(zPe,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),S.createElement(XPe,ad({},r,{id:s})),S.createElement(hRe,ad({},r,{id:s}))))}NZ.displayName="Pie";var fRe=["points"];function iz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iz(Object(n),!0).forEach(function(r){mRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mRe(t,e,n){return(e=pRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pRe(t){var e=gRe(t,"string");return typeof e=="symbol"?e:e+""}function gRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Y1(){return Y1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Y1.apply(null,arguments)}function yRe(t,e){if(t==null)return{};var n,r,i=vRe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function vRe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function bRe(t){var{option:e,dotProps:n,className:r}=t;if(S.isValidElement(e))return S.cloneElement(e,n);if(typeof e=="function")return e(n);var i=sn(r,typeof e!="boolean"?e.className:""),s=n??{},{points:a}=s,l=yRe(s,fRe);return S.createElement(yZ,Y1({},l,{className:i}))}function wRe(t,e){return t==null?!1:e?!0:t.length===1}function xRe(t){var{points:e,dot:n,className:r,dotClassName:i,dataKey:s,baseProps:a,needClip:l,clipPathId:u,zIndex:d=Bi.scatter}=t;if(!wRe(e,n))return null;var h=TZ(n),p=I_e(n),y=e.map((w,_)=>{var E,C,N=UA(UA(UA({r:3},a),p),{},{index:_,cx:(E=w.x)!==null&&E!==void 0?E:void 0,cy:(C=w.y)!==null&&C!==void 0?C:void 0,dataKey:s,value:w.value,payload:w.payload,points:e});return S.createElement(bRe,{key:"dot-".concat(_),option:n,dotProps:N,className:i})}),v={};return l&&u!=null&&(v.clipPath="url(#clipPath-".concat(h?"":"dots-").concat(u,")")),S.createElement($o,{zIndex:d},S.createElement(zi,Y1({className:r},v),y))}function sz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function az(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sz(Object(n),!0).forEach(function(r){_Re(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _Re(t,e,n){return(e=ERe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ERe(t){var e=TRe(t,"string");return typeof e=="symbol"?e:e+""}function TRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kZ=0,SRe={xAxis:{},yAxis:{},zAxis:{}},IZ=qs({name:"cartesianAxis",initialState:SRe,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Jn()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:Jn()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Jn()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Jn()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:Jn()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Jn()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Jn()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:Jn()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Jn()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&r===s[1]&&r!==i.width&&Math.abs(r-s[0])<=1)return;var a=[...s,r].slice(-3);t.yAxis[n]=az(az({},t.yAxis[n]),{},{width:r,widthHistory:a})}}}}),{addXAxis:CRe,replaceXAxis:ARe,removeXAxis:NRe,addYAxis:kRe,replaceYAxis:IRe,removeYAxis:ORe,addZAxis:XVe,replaceZAxis:QVe,removeZAxis:JVe,updateYAxisWidth:jRe}=IZ.actions,PRe=IZ.reducer,RRe=he([Si],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),DRe=he([RRe,Dc,Mc],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),tP=()=>Qe(DRe),MRe=()=>Qe(bOe);function oz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function BA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oz(Object(n),!0).forEach(function(r){LRe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LRe(t,e,n){return(e=VRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VRe(t){var e=URe(t,"string");return typeof e=="symbol"?e:e+""}function URe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var BRe=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:i,dataKey:s,clipPath:a}=t;if(i===!1||e.x==null||e.y==null)return null;var l={index:n,dataKey:s,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},u=BA(BA(BA({},l),fp(i)),Cj(i)),d;return S.isValidElement(i)?d=S.cloneElement(i,u):typeof i=="function"?d=i(u):d=S.createElement(yZ,u),S.createElement(zi,{className:"recharts-active-dot",clipPath:a},d)};function lz(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:i,clipPath:s,zIndex:a=Bi.activeDot}=t,l=Qe(xp),u=MRe();if(e==null||u==null)return null;var d=e.find(h=>u.includes(h.payload));return _i(d)?null:S.createElement($o,{zIndex:a},S.createElement(BRe,{point:d,childIndex:Number(l),mainColor:n,dataKey:i,activeDot:r,clipPath:s}))}var OZ=t=>{var{chartData:e}=t,n=Vn(),r=Gs();return S.useEffect(()=>r?()=>{}:(n(gB(e)),()=>{n(gB(void 0))}),[e,n,r]),null},cz={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},jZ=qs({name:"brush",initialState:cz,reducers:{setBrushSettings(t,e){return e.payload==null?cz:e.payload}}}),{setBrushSettings:ZVe}=jZ.actions,zRe=jZ.reducer;function $Re(t,e,n){return(e=FRe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FRe(t){var e=HRe(t,"string");return typeof e=="symbol"?e:e+""}function HRe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class nP{static create(e){return new nP(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}default:return this.scale(e)}if(n){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}$Re(nP,"EPS",1e-4);function qRe(t){return(t%180+180)%180}var GRe=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=qRe(i),a=s*Math.PI/180,l=Math.atan(r/n),u=a>l&&a<Math.PI-l?r/Math.sin(a):n/Math.cos(a);return Math.abs(u)},WRe={dots:[],areas:[],lines:[]},PZ=qs({name:"referenceElements",initialState:WRe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Oo(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Oo(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Oo(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:eUe,removeDot:tUe,addArea:nUe,removeArea:rUe,addLine:iUe,removeLine:sUe}=PZ.actions,KRe=PZ.reducer,YRe=S.createContext(void 0),XRe=t=>{var{children:e}=t,[n]=S.useState("".concat(cy("recharts"),"-clip")),r=tP();if(r==null)return null;var{x:i,y:s,width:a,height:l}=r;return S.createElement(YRe.Provider,{value:n},S.createElement("defs",null,S.createElement("clipPath",{id:n},S.createElement("rect",{x:i,y:s,height:l,width:a}))),e)};function RZ(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function QRe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return GRe(r,n)}function JRe(t,e,n){var r=n==="width",{x:i,y:s,width:a,height:l}=t;return e===1?{start:r?i:s,end:r?i+a:s+l}:{start:r?i+a:s+l,end:r?i:s}}function Ey(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function ZRe(t,e){return RZ(t,e+1)}function e3e(t,e,n,r,i){for(var s=(r||[]).slice(),{start:a,end:l}=e,u=0,d=1,h=a,p=function(){var w=r==null?void 0:r[u];if(w===void 0)return{v:RZ(r,d)};var _=u,E,C=()=>(E===void 0&&(E=n(w,_)),E),N=w.coordinate,O=u===0||Ey(t,N,C,h,l);O||(u=0,h=a,d+=1),O&&(h=N+t*(C()/2+i),u+=d)},y;d<=s.length;)if(y=p(),y)return y.v;return[]}function t3e(t,e,n,r,i){var s=(r||[]).slice(),a=s.length;if(a===0)return[];for(var{start:l,end:u}=e,d=1;d<=a;d++){for(var h=(a-1)%d,p=l,y=!0,v=function(){var N=r[w],O=w,R,D=()=>(R===void 0&&(R=n(N,O)),R),P=N.coordinate,A=w===h||Ey(t,P,D,p,u);if(!A)return y=!1,1;A&&(p=P+t*(D()/2+i))},w=h;w<a&&!v();w+=d);if(y){for(var _=[],E=h;E<a;E+=d)_.push(r[E]);return _}}return[]}function uz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uz(Object(n),!0).forEach(function(r){n3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function n3e(t,e,n){return(e=r3e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r3e(t){var e=i3e(t,"string");return typeof e=="symbol"?e:e+""}function i3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function s3e(t,e,n,r,i){for(var s=(r||[]).slice(),a=s.length,{start:l}=e,{end:u}=e,d=function(y){var v=s[y],w,_=()=>(w===void 0&&(w=n(v,y)),w);if(y===a-1){var E=t*(v.coordinate+t*_()/2-u);s[y]=v=Xi(Xi({},v),{},{tickCoord:E>0?v.coordinate-E*t:v.coordinate})}else s[y]=v=Xi(Xi({},v),{},{tickCoord:v.coordinate});if(v.tickCoord!=null){var C=Ey(t,v.tickCoord,_,l,u);C&&(u=v.tickCoord-t*(_()/2+i),s[y]=Xi(Xi({},v),{},{isShow:!0}))}},h=a-1;h>=0;h--)d(h);return s}function a3e(t,e,n,r,i,s){var a=(r||[]).slice(),l=a.length,{start:u,end:d}=e;if(s){var h=r[l-1],p=n(h,l-1),y=t*(h.coordinate+t*p/2-d);if(a[l-1]=h=Xi(Xi({},h),{},{tickCoord:y>0?h.coordinate-y*t:h.coordinate}),h.tickCoord!=null){var v=Ey(t,h.tickCoord,()=>p,u,d);v&&(d=h.tickCoord-t*(p/2+i),a[l-1]=Xi(Xi({},h),{},{isShow:!0}))}}for(var w=s?l-1:l,_=function(N){var O=a[N],R,D=()=>(R===void 0&&(R=n(O,N)),R);if(N===0){var P=t*(O.coordinate-t*D()/2-u);a[N]=O=Xi(Xi({},O),{},{tickCoord:P<0?O.coordinate-P*t:O.coordinate})}else a[N]=O=Xi(Xi({},O),{},{tickCoord:O.coordinate});if(O.tickCoord!=null){var A=Ey(t,O.tickCoord,D,u,d);A&&(u=O.tickCoord+t*(D()/2+i),a[N]=Xi(Xi({},O),{},{isShow:!0}))}},E=0;E<w;E++)_(E);return a}function rP(t,e,n){var{tick:r,ticks:i,viewBox:s,minTickGap:a,orientation:l,interval:u,tickFormatter:d,unit:h,angle:p}=t;if(!i||!i.length||!r)return[];if(Ge(u)||cv.isSsr){var y;return(y=ZRe(i,Ge(u)?u:0))!==null&&y!==void 0?y:[]}var v=[],w=l==="top"||l==="bottom"?"width":"height",_=h&&w==="width"?D0(h,{fontSize:e,letterSpacing:n}):{width:0,height:0},E=(O,R)=>{var D=typeof d=="function"?d(O.value,R):O.value;return w==="width"?QRe(D0(D,{fontSize:e,letterSpacing:n}),_,p):D0(D,{fontSize:e,letterSpacing:n})[w]},C=i.length>=2?rs(i[1].coordinate-i[0].coordinate):1,N=JRe(s,C,w);return u==="equidistantPreserveStart"?e3e(C,N,E,i,a):u==="equidistantPreserveEnd"?t3e(C,N,E,i,a):(u==="preserveStart"||u==="preserveStartEnd"?v=a3e(C,N,E,i,a,u==="preserveStartEnd"):v=s3e(C,N,E,i,a),v.filter(O=>O.isShow))}var o3e=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=t,a=0;if(e){Array.from(e).forEach(h=>{if(h){var p=h.getBoundingClientRect();p.width>a&&(a=p.width)}});var l=n?n.getBoundingClientRect().width:0,u=i+s,d=a+u+l+(n?r:0);return Math.round(d)}return 0},l3e=["axisLine","width","height","className","hide","ticks","axisType"];function c3e(t,e){if(t==null)return{};var n,r,i=u3e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function u3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function qh(){return qh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qh.apply(null,arguments)}function dz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Gr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dz(Object(n),!0).forEach(function(r){d3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function d3e(t,e,n){return(e=h3e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h3e(t){var e=f3e(t,"string");return typeof e=="symbol"?e:e+""}function f3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pc={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Bi.axis};function m3e(t){var{x:e,y:n,width:r,height:i,orientation:s,mirror:a,axisLine:l,otherSvgProps:u}=t;if(!l)return null;var d=Gr(Gr(Gr({},u),pa(l)),{},{fill:"none"});if(s==="top"||s==="bottom"){var h=+(s==="top"&&!a||s==="bottom"&&a);d=Gr(Gr({},d),{},{x1:e,y1:n+h*i,x2:e+r,y2:n+h*i})}else{var p=+(s==="left"&&!a||s==="right"&&a);d=Gr(Gr({},d),{},{x1:e+p*r,y1:n,x2:e+p*r,y2:n+i})}return S.createElement("line",qh({},d,{className:sn("recharts-cartesian-axis-line",zh(l,"className"))}))}function p3e(t,e,n,r,i,s,a,l,u){var d,h,p,y,v,w,_=l?-1:1,E=t.tickSize||a,C=Ge(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":d=h=t.coordinate,y=n+ +!l*i,p=y-_*E,w=p-_*u,v=C;break;case"left":p=y=t.coordinate,h=e+ +!l*r,d=h-_*E,v=d-_*u,w=C;break;case"right":p=y=t.coordinate,h=e+ +l*r,d=h+_*E,v=d+_*u,w=C;break;default:d=h=t.coordinate,y=n+ +l*i,p=y+_*E,w=p+_*u,v=C;break}return{line:{x1:d,y1:p,x2:h,y2:y},tick:{x:v,y:w}}}function g3e(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function y3e(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function v3e(t){var{option:e,tickProps:n,value:r}=t,i,s=sn(n.className,"recharts-cartesian-axis-tick-value");if(S.isValidElement(e))i=S.cloneElement(e,Gr(Gr({},n),{},{className:s}));else if(typeof e=="function")i=e(Gr(Gr({},n),{},{className:s}));else{var a="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(a=sn(a,e==null?void 0:e.className)),i=S.createElement(Z2,qh({},n,{className:a}),r)}return i}var b3e=S.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:s,tickFormatter:a,unit:l,padding:u,tickTextProps:d,orientation:h,mirror:p,x:y,y:v,width:w,height:_,tickSize:E,tickMargin:C,fontSize:N,letterSpacing:O,getTicksConfig:R,events:D,axisType:P}=t,A=rP(Gr(Gr({},R),{},{ticks:n}),N,O),k=g3e(h,p),M=y3e(h,p),V=pa(R),U=fp(r),z={};typeof i=="object"&&(z=i);var $=Gr(Gr({},V),{},{fill:"none"},z),ne=A.map(W=>Gr({entry:W},p3e(W,y,v,w,_,h,E,p,C))),fe=ne.map(W=>{var{entry:ee,line:oe}=W;return S.createElement(zi,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(ee.value,"-").concat(ee.coordinate,"-").concat(ee.tickCoord)},i&&S.createElement("line",qh({},$,oe,{className:sn("recharts-cartesian-axis-tick-line",zh(i,"className"))})))}),K=ne.map((W,ee)=>{var{entry:oe,tick:pe}=W,B=Gr(Gr(Gr(Gr({textAnchor:k,verticalAnchor:M},V),{},{stroke:"none",fill:s},U),pe),{},{index:ee,payload:oe,visibleTicksCount:A.length,tickFormatter:a,padding:u},d);return S.createElement(zi,qh({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(oe.value,"-").concat(oe.coordinate,"-").concat(oe.tickCoord)},Aj(D,oe,ee)),r&&S.createElement(v3e,{option:r,tickProps:B,value:"".concat(typeof a=="function"?a(oe.value,ee):oe.value).concat(l||"")}))});return S.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(P,"-ticks")},K.length>0&&S.createElement($o,{zIndex:Bi.label},S.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(P,"-tick-labels"),ref:e},K)),fe.length>0&&S.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(P,"-tick-lines")},fe))}),w3e=S.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:s,hide:a,ticks:l,axisType:u}=t,d=c3e(t,l3e),[h,p]=S.useState(""),[y,v]=S.useState(""),w=S.useRef(null);S.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var E;return o3e({ticks:w.current,label:(E=t.labelRef)===null||E===void 0?void 0:E.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var _=S.useCallback(E=>{if(E){var C=E.getElementsByClassName("recharts-cartesian-axis-tick-value");w.current=C;var N=C[0];if(N){var O=window.getComputedStyle(N),R=O.fontSize,D=O.letterSpacing;(R!==h||D!==y)&&(p(R),v(D))}}},[h,y]);return a||r!=null&&r<=0||i!=null&&i<=0?null:S.createElement($o,{zIndex:t.zIndex},S.createElement(zi,{className:sn("recharts-cartesian-axis",s)},S.createElement(m3e,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:pa(t)}),S.createElement(b3e,{ref:_,axisType:u,events:d,fontSize:h,getTicksConfig:t,height:t.height,letterSpacing:y,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:l,unit:t.unit,width:t.width,x:t.x,y:t.y}),S.createElement(p5e,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},S.createElement(S5e,{label:t.label,labelRef:t.labelRef}),t.children)))}),iP=S.forwardRef((t,e)=>{var n=li(t,pc);return S.createElement(w3e,qh({},n,{ref:e}))});iP.displayName="CartesianAxis";var x3e=["x1","y1","x2","y2","key"],_3e=["offset"],E3e=["xAxisId","yAxisId"],T3e=["xAxisId","yAxisId"];function hz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function es(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hz(Object(n),!0).forEach(function(r){S3e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function S3e(t,e,n){return(e=C3e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C3e(t){var e=A3e(t,"string");return typeof e=="symbol"?e:e+""}function A3e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vh(){return vh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vh.apply(null,arguments)}function X1(t,e){if(t==null)return{};var n,r,i=N3e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function N3e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var k3e=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:s,height:a,ry:l}=t;return S.createElement("rect",{x:r,y:i,ry:l,width:s,height:a,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function DZ(t){var{option:e,lineItemProps:n}=t,r;if(S.isValidElement(e))r=S.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:s,y1:a,x2:l,y2:u,key:d}=n,h=X1(n,x3e),p=(i=pa(h))!==null&&i!==void 0?i:{},{offset:y}=p,v=X1(p,_3e);r=S.createElement("line",vh({},v,{x1:s,y1:a,x2:l,y2:u,fill:"none",key:d}))}return r}function I3e(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:a}=t,l=X1(t,E3e),u=i.map((d,h)=>{var p=es(es({},l),{},{x1:e,y1:d,x2:e+n,y2:d,key:"line-".concat(h),index:h});return S.createElement(DZ,{key:"line-".concat(h),option:r,lineItemProps:p})});return S.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}function O3e(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:s,yAxisId:a}=t,l=X1(t,T3e),u=i.map((d,h)=>{var p=es(es({},l),{},{x1:d,y1:e,x2:d,y2:e+n,key:"line-".concat(h),index:h});return S.createElement(DZ,{option:r,lineItemProps:p,key:"line-".concat(h)})});return S.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}function j3e(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:s,height:a,horizontalPoints:l,horizontal:u=!0}=t;if(!u||!e||!e.length||l==null)return null;var d=l.map(p=>Math.round(p+i-i)).sort((p,y)=>p-y);i!==d[0]&&d.unshift(0);var h=d.map((p,y)=>{var v=!d[y+1],w=v?i+a-p:d[y+1]-p;if(w<=0)return null;var _=y%e.length;return S.createElement("rect",{key:"react-".concat(y),y:p,x:r,height:w,width:s,stroke:"none",fill:e[_],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function P3e(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:s,width:a,height:l,verticalPoints:u}=t;if(!e||!n||!n.length)return null;var d=u.map(p=>Math.round(p+i-i)).sort((p,y)=>p-y);i!==d[0]&&d.unshift(0);var h=d.map((p,y)=>{var v=!d[y+1],w=v?i+a-p:d[y+1]-p;if(w<=0)return null;var _=y%n.length;return S.createElement("rect",{key:"react-".concat(y),x:p,y:s,width:w,height:l,stroke:"none",fill:n[_],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var R3e=(t,e)=>{var{xAxis:n,width:r,height:i,offset:s}=t;return bX(rP(es(es(es({},pc),n),{},{ticks:wX(n),viewBox:{x:0,y:0,width:r,height:i}})),s.left,s.left+s.width,e)},D3e=(t,e)=>{var{yAxis:n,width:r,height:i,offset:s}=t;return bX(rP(es(es(es({},pc),n),{},{ticks:wX(n),viewBox:{x:0,y:0,width:r,height:i}})),s.top,s.top+s.height,e)},M3e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Bi.grid};function sP(t){var e=Uj(),n=Bj(),r=kX(),i=es(es({},li(t,M3e)),{},{x:Ge(t.x)?t.x:r.left,y:Ge(t.y)?t.y:r.top,width:Ge(t.width)?t.width:r.width,height:Ge(t.height)?t.height:r.height}),{xAxisId:s,yAxisId:a,x:l,y:u,width:d,height:h,syncWithTicks:p,horizontalValues:y,verticalValues:v}=i,w=Gs(),_=Qe(M=>iB(M,"xAxis",s,w)),E=Qe(M=>iB(M,"yAxis",a,w));if(!xl(d)||!xl(h)||!Ge(l)||!Ge(u))return null;var C=i.verticalCoordinatesGenerator||R3e,N=i.horizontalCoordinatesGenerator||D3e,{horizontalPoints:O,verticalPoints:R}=i;if((!O||!O.length)&&typeof N=="function"){var D=y&&y.length,P=N({yAxis:E?es(es({},E),{},{ticks:D?y:E.ticks}):void 0,width:e??d,height:n??h,offset:r},D?!0:p);T1(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(O=P)}if((!R||!R.length)&&typeof C=="function"){var A=v&&v.length,k=C({xAxis:_?es(es({},_),{},{ticks:A?v:_.ticks}):void 0,width:e??d,height:n??h,offset:r},A?!0:p);T1(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof k,"]")),Array.isArray(k)&&(R=k)}return S.createElement($o,{zIndex:i.zIndex},S.createElement("g",{className:"recharts-cartesian-grid"},S.createElement(k3e,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),S.createElement(j3e,vh({},i,{horizontalPoints:O})),S.createElement(P3e,vh({},i,{verticalPoints:R})),S.createElement(I3e,vh({},i,{offset:r,horizontalPoints:O,xAxis:_,yAxis:E})),S.createElement(O3e,vh({},i,{offset:r,verticalPoints:R,xAxis:_,yAxis:E}))))}sP.displayName="CartesianGrid";var L3e={},MZ=qs({name:"errorBars",initialState:L3e,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:aUe,replaceErrorBar:oUe,removeErrorBar:lUe}=MZ.actions,V3e=MZ.reducer;function LZ(t,e){var n,r,i=Qe(d=>Uc(d,t)),s=Qe(d=>Bc(d,e)),a=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:mi.allowDataOverflow,l=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:pi.allowDataOverflow,u=a||l;return{needClip:u,needClipX:a,needClipY:l}}function U3e(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=tP(),{needClipX:s,needClipY:a,needClip:l}=LZ(e,n);if(!l||!i)return null;var{x:u,y:d,width:h,height:p}=i;return S.createElement("clipPath",{id:"clipPath-".concat(r)},S.createElement("rect",{x:s?u:u-h/2,y:a?d:d-p/2,width:s?h:h*2,height:a?p:p*2}))}function B3e(t){var e=fp(t),n=3,r=2;if(e!=null){var{r:i,strokeWidth:s}=e,a=Number(i),l=Number(s);return(Number.isNaN(a)||a<0)&&(a=n),(Number.isNaN(l)||l<0)&&(l=r),{r:a,strokeWidth:l}}return{r:n,strokeWidth:r}}var zA={exports:{}},$A={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fz;function z3e(){if(fz)return $A;fz=1;var t=Yh();function e(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,s=t.useEffect,a=t.useMemo,l=t.useDebugValue;return $A.useSyncExternalStoreWithSelector=function(u,d,h,p,y){var v=i(null);if(v.current===null){var w={hasValue:!1,value:null};v.current=w}else w=v.current;v=a(function(){function E(D){if(!C){if(C=!0,N=D,D=p(D),y!==void 0&&w.hasValue){var P=w.value;if(y(P,D))return O=P}return O=D}if(P=O,n(N,D))return P;var A=p(D);return y!==void 0&&y(P,A)?(N=D,P):(N=D,O=A)}var C=!1,N,O,R=h===void 0?null:h;return[function(){return E(d())},R===null?void 0:function(){return E(R())}]},[d,h,p,y]);var _=r(u,v[0],v[1]);return s(function(){w.hasValue=!0,w.value=_},[_]),l(_),_},$A}var mz;function $3e(){return mz||(mz=1,zA.exports=z3e()),zA.exports}$3e();function F3e(t){t()}function H3e(){let t=null,e=null;return{clear(){t=null,e=null},notify(){F3e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var pz={notify(){},get:()=>[]};function q3e(t,e){let n,r=pz,i=0,s=!1;function a(_){h();const E=r.subscribe(_);let C=!1;return()=>{C||(C=!0,E(),p())}}function l(){r.notify()}function u(){w.onStateChange&&w.onStateChange()}function d(){return s}function h(){i++,n||(n=t.subscribe(u),r=H3e())}function p(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=pz)}function y(){s||(s=!0,h())}function v(){s&&(s=!1,p())}const w={addNestedSub:a,notifyNestedSubs:l,handleChangeWrapper:u,isSubscribed:d,trySubscribe:y,tryUnsubscribe:v,getListeners:()=>r};return w}var G3e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",W3e=G3e(),K3e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Y3e=K3e(),X3e=()=>W3e||Y3e?S.useLayoutEffect:S.useEffect,Q3e=X3e();function gz(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function J3e(t,e){if(gz(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!gz(t[n[i]],e[n[i]]))return!1;return!0}var FA=Symbol.for("react-redux-context"),HA=typeof globalThis<"u"?globalThis:{};function Z3e(){if(!S.createContext)return{};const t=HA[FA]??(HA[FA]=new Map);let e=t.get(S.createContext);return e||(e=S.createContext(null),t.set(S.createContext,e)),e}var e6e=Z3e();function t6e(t){const{children:e,context:n,serverState:r,store:i}=t,s=S.useMemo(()=>{const u=q3e(i);return{store:i,subscription:u,getServerState:r?()=>r:void 0}},[i,r]),a=S.useMemo(()=>i.getState(),[i]);Q3e(()=>{const{subscription:u}=s;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),a!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[s,a]);const l=n||e6e;return S.createElement(l.Provider,{value:s},e)}var n6e=t6e,r6e=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function i6e(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function aP(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(r6e.has(r)){if(t[r]==null&&e[r]==null)continue;if(!J3e(t[r],e[r]))return!1}else if(!i6e(t[r],e[r]))return!1;return!0}function oP(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:kZ}function lP(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:kZ}var VZ=(t,e,n)=>CJ(t,"xAxis",oP(t,e),n),UZ=(t,e,n)=>SJ(t,"xAxis",oP(t,e),n),BZ=(t,e,n)=>CJ(t,"yAxis",lP(t,e),n),zZ=(t,e,n)=>SJ(t,"yAxis",lP(t,e),n),s6e=he([pn,VZ,BZ,UZ,zZ],(t,e,n,r,i)=>Rc(t,"xAxis")?E1(e,r,!1):E1(n,i,!1)),a6e=(t,e)=>e,$Z=he([iJ,a6e],(t,e)=>t.filter(n=>n.type==="area").find(n=>n.id===e)),FZ=t=>{var e=pn(t),n=Rc(e,"xAxis");return n?"yAxis":"xAxis"},o6e=(t,e)=>{var n=FZ(t);return n==="yAxis"?lP(t,e):oP(t,e)},l6e=(t,e,n)=>cJ(t,FZ(t),o6e(t,e),n),c6e=he([$Z,l6e],(t,e)=>{var n;if(!(t==null||e==null)){var{stackId:r}=t,i=w5(t);if(!(r==null||i==null)){var s=(n=e[r])===null||n===void 0?void 0:n.stackedData,a=s==null?void 0:s.find(l=>l.key===i);if(a!=null)return a.map(l=>[l[0],l[1]])}}}),u6e=he([pn,VZ,BZ,UZ,zZ,c6e,nIe,s6e,$Z,pIe],(t,e,n,r,i,s,a,l,u,d)=>{var{chartData:h,dataStartIndex:p,dataEndIndex:y}=a;if(!(u==null||t!=="horizontal"&&t!=="vertical"||e==null||n==null||r==null||i==null||r.length===0||i.length===0||l==null)){var{data:v}=u,w;if(v&&v.length>0?w=v:w=h==null?void 0:h.slice(p,y+1),w!=null)return k6e({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataStartIndex:p,areaSettings:u,stackedData:s,displayedData:w,chartBaseValue:d,bandSize:l})}}),d6e=["id"],h6e=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function Ch(){return Ch=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ch.apply(null,arguments)}function HZ(t,e){if(t==null)return{};var n,r,i=f6e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function f6e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function yz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Em(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yz(Object(n),!0).forEach(function(r){m6e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function m6e(t,e,n){return(e=p6e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p6e(t){var e=g6e(t,"string");return typeof e=="symbol"?e:e+""}function g6e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Q1(t,e){return t&&t!=="none"?t:e}var y6e=t=>{var{dataKey:e,name:n,stroke:r,fill:i,legendType:s,hide:a}=t;return[{inactive:a,dataKey:e,type:s,color:Q1(r,i),value:T2(n,e),payload:t}]},v6e=S.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:s,name:a,hide:l,unit:u,tooltipType:d,id:h}=t,p={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:s,dataKey:e,nameKey:void 0,name:T2(a,e),hide:l,type:d,color:Q1(r,s),unit:u,graphicalItemId:h}};return S.createElement(SZ,{tooltipEntrySettings:p})});function b6e(t){var{clipPathId:e,points:n,props:r}=t,{needClip:i,dot:s,dataKey:a}=r,l=pa(r);return S.createElement(xRe,{points:n,dot:s,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:a,baseProps:l,needClip:i,clipPathId:e})}function w6e(t){var{showLabels:e,children:n,points:r}=t,i=r.map(s=>{var a,l,u={x:(a=s.x)!==null&&a!==void 0?a:0,y:(l=s.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Em(Em({},u),{},{value:s.value,payload:s.payload,parentViewBox:void 0,viewBox:u,fill:void 0})});return S.createElement(M5e,{value:e?i:void 0},n)}function vz(t){var{points:e,baseLine:n,needClip:r,clipPathId:i,props:s}=t,{layout:a,type:l,stroke:u,connectNulls:d,isRange:h}=s,{id:p}=s,y=HZ(s,d6e),v=pa(y),w=ws(y);return S.createElement(S.Fragment,null,(e==null?void 0:e.length)>1&&S.createElement(zi,{clipPath:r?"url(#clipPath-".concat(i,")"):void 0},S.createElement(Lm,Ch({},w,{id:p,points:e,connectNulls:d,type:l,baseLine:n,layout:a,stroke:"none",className:"recharts-area-area"})),u!=="none"&&S.createElement(Lm,Ch({},v,{className:"recharts-area-curve",layout:a,type:l,connectNulls:d,fill:"none",points:e})),u!=="none"&&h&&S.createElement(Lm,Ch({},v,{className:"recharts-area-curve",layout:a,type:l,connectNulls:d,fill:"none",points:n}))),S.createElement(b6e,{points:e,props:y,clipPathId:i}))}function x6e(t){var e,n,{alpha:r,baseLine:i,points:s,strokeWidth:a}=t,l=(e=s[0])===null||e===void 0?void 0:e.y,u=(n=s[s.length-1])===null||n===void 0?void 0:n.y;if(!nr(l)||!nr(u))return null;var d=r*Math.abs(l-u),h=Math.max(...s.map(p=>p.x||0));return Ge(i)?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(...i.map(p=>p.x||0),h)),Ge(h)?S.createElement("rect",{x:0,y:l<u?l:l-d,width:h+(a?parseInt("".concat(a),10):1),height:Math.floor(d)}):null}function _6e(t){var e,n,{alpha:r,baseLine:i,points:s,strokeWidth:a}=t,l=(e=s[0])===null||e===void 0?void 0:e.x,u=(n=s[s.length-1])===null||n===void 0?void 0:n.x;if(!nr(l)||!nr(u))return null;var d=r*Math.abs(l-u),h=Math.max(...s.map(p=>p.y||0));return Ge(i)?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(...i.map(p=>p.y||0),h)),Ge(h)?S.createElement("rect",{x:l<u?l:l-d,y:0,width:d,height:Math.floor(h+(a?parseInt("".concat(a),10):1))}):null}function E6e(t){var{alpha:e,layout:n,points:r,baseLine:i,strokeWidth:s}=t;return n==="vertical"?S.createElement(x6e,{alpha:e,points:r,baseLine:i,strokeWidth:s}):S.createElement(_6e,{alpha:e,points:r,baseLine:i,strokeWidth:s})}function T6e(t){var{needClip:e,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:s}=t,{points:a,baseLine:l,isAnimationActive:u,animationBegin:d,animationDuration:h,animationEasing:p,onAnimationStart:y,onAnimationEnd:v}=r,w=S.useMemo(()=>({points:a,baseLine:l}),[a,l]),_=D2(w,"recharts-area-"),E=jSe(),[C,N]=S.useState(!1),O=!C,R=S.useCallback(()=>{typeof v=="function"&&v(),N(!1)},[v]),D=S.useCallback(()=>{typeof y=="function"&&y(),N(!0)},[y]);if(E==null)return null;var P=i.current,A=s.current;return S.createElement(w6e,{showLabels:O,points:a},r.children,S.createElement(R2,{animationId:_,begin:d,duration:h,isActive:u,easing:p,onAnimationEnd:R,onAnimationStart:D,key:_},k=>{if(P){var M=P.length/a.length,V=k===1?a:a.map((z,$)=>{var ne=Math.floor($*M);if(P[ne]){var fe=P[ne];return Em(Em({},z),{},{x:Ui(fe.x,z.x,k),y:Ui(fe.y,z.y,k)})}return z}),U;return Ge(l)?U=Ui(A,l,k):_i(l)||Lo(l)?U=Ui(A,0,k):U=l.map((z,$)=>{var ne=Math.floor($*M);if(Array.isArray(A)&&A[ne]){var fe=A[ne];return Em(Em({},z),{},{x:Ui(fe.x,z.x,k),y:Ui(fe.y,z.y,k)})}return z}),k>0&&(i.current=V,s.current=U),S.createElement(vz,{points:V,baseLine:U,needClip:e,clipPathId:n,props:r})}return k>0&&(i.current=a,s.current=l),S.createElement(zi,null,u&&S.createElement("defs",null,S.createElement("clipPath",{id:"animationClipPath-".concat(n)},S.createElement(E6e,{alpha:k,points:a,baseLine:l,layout:E,strokeWidth:r.strokeWidth}))),S.createElement(zi,{clipPath:"url(#animationClipPath-".concat(n,")")},S.createElement(vz,{points:a,baseLine:l,needClip:e,clipPathId:n,props:r})))}),S.createElement(gZ,{label:r.label}))}function S6e(t){var{needClip:e,clipPathId:n,props:r}=t,i=S.useRef(null),s=S.useRef();return S.createElement(T6e,{needClip:e,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:s})}class C6e extends S.PureComponent{render(){var{hide:e,dot:n,points:r,className:i,top:s,left:a,needClip:l,xAxisId:u,yAxisId:d,width:h,height:p,id:y,baseLine:v,zIndex:w}=this.props;if(e)return null;var _=sn("recharts-area",i),E=y,{r:C,strokeWidth:N}=B3e(n),O=TZ(n),R=C*2+N,D=l?"url(#clipPath-".concat(O?"":"dots-").concat(E,")"):void 0;return S.createElement($o,{zIndex:w},S.createElement(zi,{className:_},l&&S.createElement("defs",null,S.createElement(U3e,{clipPathId:E,xAxisId:u,yAxisId:d}),!O&&S.createElement("clipPath",{id:"clipPath-dots-".concat(E)},S.createElement("rect",{x:a-R/2,y:s-R/2,width:h+R,height:p+R}))),S.createElement(S6e,{needClip:l,clipPathId:E,props:this.props})),S.createElement(lz,{points:r,mainColor:Q1(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:D}),this.props.isRange&&Array.isArray(v)&&S.createElement(lz,{points:v,mainColor:Q1(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:D}))}}var qZ={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:Bi.area};function A6e(t){var e,n=li(t,qZ),{activeDot:r,animationBegin:i,animationDuration:s,animationEasing:a,connectNulls:l,dot:u,fill:d,fillOpacity:h,hide:p,isAnimationActive:y,legendType:v,stroke:w,xAxisId:_,yAxisId:E}=n,C=HZ(n,h6e),N=zp(),O=YJ(),{needClip:R}=LZ(_,E),D=Gs(),{points:P,isRange:A,baseLine:k}=(e=Qe(ne=>u6e(ne,t.id,D)))!==null&&e!==void 0?e:{},M=tP();if(N!=="horizontal"&&N!=="vertical"||M==null||O!=="AreaChart"&&O!=="ComposedChart")return null;var{height:V,width:U,x:z,y:$}=M;return!P||!P.length?null:S.createElement(C6e,Ch({},C,{activeDot:r,animationBegin:i,animationDuration:s,animationEasing:a,baseLine:k,connectNulls:l,dot:u,fill:d,fillOpacity:h,height:V,hide:p,layout:N,isAnimationActive:y==="auto"?!cv.isSsr:y,isRange:A,legendType:v,needClip:R,points:P,stroke:w,width:U,left:z,top:$,xAxisId:_,yAxisId:E}))}var N6e=(t,e,n,r,i)=>{var s=n??e;if(Ge(s))return s;var a=t==="horizontal"?i:r,l=a.scale.domain();if(a.type==="number"){var u=Math.max(l[0],l[1]),d=Math.min(l[0],l[1]);return s==="dataMin"?d:s==="dataMax"||u<0?u:Math.max(Math.min(l[0],l[1]),0)}return s==="dataMin"?l[0]:s==="dataMax"?l[1]:l[0]};function k6e(t){var{areaSettings:{connectNulls:e,baseValue:n,dataKey:r},stackedData:i,layout:s,chartBaseValue:a,xAxis:l,yAxis:u,displayedData:d,dataStartIndex:h,xAxisTicks:p,yAxisTicks:y,bandSize:v}=t,w=i&&i.length,_=N6e(s,a,n,l,u),E=s==="horizontal",C=!1,N=d.map((R,D)=>{var P,A,k;if(w)k=i[h+D];else{var M=Gn(R,r);Array.isArray(M)?(k=M,C=!0):k=[_,M]}var V=(P=(A=k)===null||A===void 0?void 0:A[1])!==null&&P!==void 0?P:null,U=V==null||w&&!e&&Gn(R,r)==null;return E?{x:lV({axis:l,ticks:p,bandSize:v,entry:R,index:D}),y:U?null:u.scale(V),value:k,payload:R}:{x:U?null:l.scale(V),y:lV({axis:u,ticks:y,bandSize:v,entry:R,index:D}),value:k,payload:R}}),O;return w||C?O=N.map(R=>{var D=Array.isArray(R.value)?R.value[0]:null;return E?{x:R.x,y:D!=null&&R.y!=null?u.scale(D):null,payload:R.payload}:{x:D!=null?l.scale(D):null,y:R.y,payload:R.payload}}):O=E?u.scale(_):l.scale(_),{points:N,baseLine:O,isRange:C}}function I6e(t){var e=li(t,qZ),n=Gs();return S.createElement(CZ,{id:e.id,type:"area"},r=>S.createElement(S.Fragment,null,S.createElement(CPe,{legendPayload:y6e(e)}),S.createElement(v6e,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),S.createElement(BPe,{type:"area",id:r,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:XTe(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:n,connectNulls:e.connectNulls}),S.createElement(A6e,Ch({},e,{id:r}))))}var J1=S.memo(I6e,aP);J1.displayName="Area";var O6e=["domain","range"],j6e=["domain","range"];function bz(t,e){if(t==null)return{};var n,r,i=P6e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function P6e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function wz(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function GZ(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=bz(t,O6e),{domain:s,range:a}=e,l=bz(e,j6e);return!wz(n,s)||!wz(r,a)?!1:aP(i,l)}var R6e=["dangerouslySetInnerHTML","ticks","scale"],D6e=["id","scale"];function NI(){return NI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},NI.apply(null,arguments)}function xz(t,e){if(t==null)return{};var n,r,i=M6e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function M6e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function L6e(t){var e=Vn(),n=S.useRef(null);return S.useLayoutEffect(()=>{n.current===null?e(CRe(t)):n.current!==t&&e(ARe({prev:n.current,next:t})),n.current=t},[t,e]),S.useLayoutEffect(()=>()=>{n.current&&(e(NRe(n.current)),n.current=null)},[e]),null}var V6e=t=>{var{xAxisId:e,className:n}=t,r=Qe(TX),i=Gs(),s="xAxis",a=Qe(C=>TJ(C,s,e,i)),l=Qe(C=>o4e(C,e)),u=Qe(C=>f4e(C,e)),d=Qe(C=>tJ(C,e));if(l==null||u==null||d==null)return null;var{dangerouslySetInnerHTML:h,ticks:p,scale:y}=t,v=xz(t,R6e),{id:w,scale:_}=d,E=xz(d,D6e);return S.createElement(iP,NI({},v,E,{x:u.x,y:u.y,width:l.width,height:l.height,className:sn("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:a,axisType:s}))},U6e={allowDataOverflow:mi.allowDataOverflow,allowDecimals:mi.allowDecimals,allowDuplicatedCategory:mi.allowDuplicatedCategory,angle:mi.angle,axisLine:pc.axisLine,height:mi.height,hide:!1,includeHidden:mi.includeHidden,interval:mi.interval,minTickGap:mi.minTickGap,mirror:mi.mirror,orientation:mi.orientation,padding:mi.padding,reversed:mi.reversed,scale:mi.scale,tick:mi.tick,tickCount:mi.tickCount,tickLine:pc.tickLine,tickSize:pc.tickSize,type:mi.type,xAxisId:0},B6e=t=>{var e=li(t,U6e);return S.createElement(S.Fragment,null,S.createElement(L6e,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),S.createElement(V6e,e))},cP=S.memo(B6e,GZ);cP.displayName="XAxis";var z6e=["dangerouslySetInnerHTML","ticks","scale"],$6e=["id","scale"];function kI(){return kI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kI.apply(null,arguments)}function _z(t,e){if(t==null)return{};var n,r,i=F6e(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function F6e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function H6e(t){var e=Vn(),n=S.useRef(null);return S.useLayoutEffect(()=>{n.current===null?e(kRe(t)):n.current!==t&&e(IRe({prev:n.current,next:t})),n.current=t},[t,e]),S.useLayoutEffect(()=>()=>{n.current&&(e(ORe(n.current)),n.current=null)},[e]),null}var q6e=t=>{var{yAxisId:e,className:n,width:r,label:i}=t,s=S.useRef(null),a=S.useRef(null),l=Qe(TX),u=Gs(),d=Vn(),h="yAxis",p=Qe(P=>g4e(P,e)),y=Qe(P=>p4e(P,e)),v=Qe(P=>TJ(P,h,e,u)),w=Qe(P=>nJ(P,e));if(S.useLayoutEffect(()=>{if(!(r!=="auto"||!p||J5(i)||S.isValidElement(i)||w==null)){var P=s.current;if(P){var A=P.getCalculatedWidth();Math.round(p.width)!==Math.round(A)&&d(jRe({id:e,width:A}))}}},[v,p,d,i,e,r,w]),p==null||y==null||w==null)return null;var{dangerouslySetInnerHTML:_,ticks:E,scale:C}=t,N=_z(t,z6e),{id:O,scale:R}=w,D=_z(w,$6e);return S.createElement(iP,kI({},N,D,{ref:s,labelRef:a,x:y.x,y:y.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:p.width,height:p.height,className:sn("recharts-".concat(h," ").concat(h),n),viewBox:l,ticks:v,axisType:h}))},G6e={allowDataOverflow:pi.allowDataOverflow,allowDecimals:pi.allowDecimals,allowDuplicatedCategory:pi.allowDuplicatedCategory,angle:pi.angle,axisLine:pc.axisLine,hide:!1,includeHidden:pi.includeHidden,interval:pi.interval,minTickGap:pi.minTickGap,mirror:pi.mirror,orientation:pi.orientation,padding:pi.padding,reversed:pi.reversed,scale:pi.scale,tick:pi.tick,tickCount:pi.tickCount,tickLine:pc.tickLine,tickSize:pc.tickSize,type:pi.type,width:pi.width,yAxisId:0},W6e=t=>{var e=li(t,G6e);return S.createElement(S.Fragment,null,S.createElement(H6e,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),S.createElement(q6e,e))},uP=S.memo(W6e,GZ);uP.displayName="YAxis";var K6e=(t,e)=>e,dP=he([K6e,pn,ZQ,ui,$J,zc,OOe,Si],VOe),hP=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},WZ=Qa("mouseClick"),KZ=av();KZ.startListening({actionCreator:WZ,effect:(t,e)=>{var n=t.payload,r=dP(e.getState(),hP(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(I4e({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var II=Qa("mouseMove"),YZ=av(),jw=null;YZ.startListening({actionCreator:II,effect:(t,e)=>{var n=t.payload;jw!==null&&cancelAnimationFrame(jw);var r=hP(n);jw=requestAnimationFrame(()=>{var i=e.getState(),s=$5(i,i.tooltip.settings.shared);if(s==="axis"){var a=dP(i,r);(a==null?void 0:a.activeIndex)!=null?e.dispatch(RJ({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):e.dispatch(PJ())}jw=null})}});function Y6e(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var Ez={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},XZ=qs({name:"rootProps",initialState:Ez,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:Ez.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),X6e=XZ.reducer,{updateOptions:Q6e}=XZ.actions,QZ=qs({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:J6e}=QZ.actions,Z6e=QZ.reducer,JZ=Qa("keyDown"),ZZ=Qa("focus"),fP=av();fP.startListening({actionCreator:JZ,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var a=F5(i,Xp(n),vv(n),xv(n)),l=a==null?-1:Number(a);if(!(!Number.isFinite(l)||l<0)){var u=zc(n);if(s==="Enter"){var d=q1(n,"axis","hover",String(i.index));e.dispatch(xI({active:!i.active,activeIndex:i.index,activeCoordinate:d}));return}var h=w4e(n),p=h==="left-to-right"?1:-1,y=s==="ArrowRight"?1:-1,v=l+y*p;if(!(u==null||v>=u.length||v<0)){var w=q1(n,"axis","hover",String(v));e.dispatch(xI({active:!0,activeIndex:v.toString(),activeCoordinate:w}))}}}}}});fP.startListening({actionCreator:ZZ,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",a=q1(n,"axis","hover",String(s));e.dispatch(xI({active:!0,activeIndex:s,activeCoordinate:a}))}}}});var Ba=Qa("externalEvent"),eee=av(),qA=new Map;eee.startListening({actionCreator:Ba,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,s=qA.get(i);s!==void 0&&cancelAnimationFrame(s);var a=requestAnimationFrame(()=>{try{var l=e.getState(),u={activeCoordinate:gOe(l),activeDataKey:GJ(l),activeIndex:xp(l),activeLabel:qJ(l),activeTooltipIndex:xp(l),isTooltipActive:yOe(l)};n(u,r)}finally{qA.delete(i)}});qA.set(i,a)}}});var eDe=he([Kp],t=>t.tooltipItemPayloads),tDe=he([eDe,wv,(t,e)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(l=>l.settings.graphicalItemId===r);if(i!=null){var{positions:s}=i;if(s!=null){var a=e(s,n);return a}}}),tee=Qa("touchMove"),nee=av();nee.startListening({actionCreator:tee,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=$5(r,r.tooltip.settings.shared);if(i==="axis"){var s=n.touches[0];if(s==null)return;var a=dP(r,hP({clientX:s.clientX,clientY:s.clientY,currentTarget:n.currentTarget}));(a==null?void 0:a.activeIndex)!=null&&e.dispatch(RJ({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var l,u=n.touches[0];if(document.elementFromPoint==null||u==null)return;var d=document.elementFromPoint(u.clientX,u.clientY);if(!d||!d.getAttribute)return;var h=d.getAttribute(_X),p=(l=d.getAttribute(EX))!==null&&l!==void 0?l:void 0,y=Yp(r).find(_=>_.id===p);if(h==null||y==null||p==null)return;var{dataKey:v}=y,w=tDe(r,h,p);e.dispatch(jJ({activeDataKey:v,activeIndex:h,activeCoordinate:w,activeGraphicalItemId:p}))}}}});var nDe=HY({brush:zRe,cartesianAxis:PRe,chartData:pje,errorBars:V3e,graphicalItems:VPe,layout:BTe,legend:WSe,options:uje,polarAxis:W5e,polarOptions:Z6e,referenceElements:KRe,rootProps:X6e,tooltip:O4e,zIndex:JOe}),rDe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return dTe({reducer:nDe,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([KZ.middleware,YZ.middleware,fP.middleware,eee.middleware,nee.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(sX({type:"raf"}))},devTools:{serialize:{replacer:Y6e},name:"recharts-".concat(n)}})};function ree(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=Gs(),s=S.useRef(null);if(i)return n;s.current==null&&(s.current=rDe(e,r));var a=kj;return S.createElement(n6e,{context:a,store:s.current},n)}function iDe(t){var{layout:e,margin:n}=t,r=Vn(),i=Gs();return S.useEffect(()=>{i||(r(LTe(e)),r(MTe(n)))},[r,i,e,n]),null}var iee=S.memo(iDe,aP);function see(t){var e=Vn();return S.useEffect(()=>{e(Q6e(t))},[e,t]),null}function Tz(t){var{zIndex:e,isPanorama:n}=t,r=S.useRef(null),i=Vn();return S.useLayoutEffect(()=>(r.current&&i(XOe({zIndex:e,element:r.current,isPanorama:n})),()=>{i(QOe({zIndex:e,isPanorama:n}))}),[i,e,n]),S.createElement("g",{tabIndex:-1,ref:r})}function Sz(t){var{children:e,isPanorama:n}=t,r=Qe(BOe);if(!r||r.length===0)return e;var i=r.filter(a=>a<0),s=r.filter(a=>a>0);return S.createElement(S.Fragment,null,i.map(a=>S.createElement(Tz,{key:a,zIndex:a,isPanorama:n})),e,s.map(a=>S.createElement(Tz,{key:a,zIndex:a,isPanorama:n})))}var sDe=["children"];function aDe(t,e){if(t==null)return{};var n,r,i=oDe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function oDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Z1(){return Z1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Z1.apply(null,arguments)}var lDe={width:"100%",height:"100%",display:"block"},cDe=S.forwardRef((t,e)=>{var n=Uj(),r=Bj(),i=zX();if(!xl(n)||!xl(r))return null;var{children:s,otherAttributes:a,title:l,desc:u}=t,d,h;return a!=null&&(typeof a.tabIndex=="number"?d=a.tabIndex:d=i?0:void 0,typeof a.role=="string"?h=a.role:h=i?"application":void 0),S.createElement(vj,Z1({},a,{title:l,desc:u,role:h,tabIndex:d,width:n,height:r,style:lDe,ref:e}),s)}),uDe=t=>{var{children:e}=t,n=Qe(N2);if(!n)return null;var{width:r,height:i,y:s,x:a}=n;return S.createElement(vj,{width:r,height:i,x:a,y:s},e)},Cz=S.forwardRef((t,e)=>{var{children:n}=t,r=aDe(t,sDe),i=Gs();return i?S.createElement(uDe,null,S.createElement(Sz,{isPanorama:!0},n)):S.createElement(cDe,Z1({ref:e},r),S.createElement(Sz,{isPanorama:!1},n))});function dDe(){var t=Vn(),[e,n]=S.useState(null),r=Qe(nSe);return S.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),s=i.width/e.offsetWidth;nr(s)&&s!==r&&t(UTe(s))}},[e,t,r]),n}function Az(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hDe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Az(Object(n),!0).forEach(function(r){fDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Az(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fDe(t,e,n){return(e=mDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mDe(t){var e=pDe(t,"string");return typeof e=="symbol"?e:e+""}function pDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gh(){return Gh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gh.apply(null,arguments)}var gDe=()=>(Tje(),null);function e_(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var yDe=S.forwardRef((t,e)=>{var n,r,i=S.useRef(null),[s,a]=S.useState({containerWidth:e_((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:e_((r=t.style)===null||r===void 0?void 0:r.height)}),l=S.useCallback((d,h)=>{a(p=>{var y=Math.round(d),v=Math.round(h);return p.containerWidth===y&&p.containerHeight===v?p:{containerWidth:y,containerHeight:v}})},[]),u=S.useCallback(d=>{if(typeof e=="function"&&e(d),d!=null&&typeof ResizeObserver<"u"){var{width:h,height:p}=d.getBoundingClientRect();l(h,p);var y=w=>{var{width:_,height:E}=w[0].contentRect;l(_,E)},v=new ResizeObserver(y);v.observe(d),i.current=v}},[e,l]);return S.useEffect(()=>()=>{var d=i.current;d!=null&&d.disconnect()},[l]),S.createElement(S.Fragment,null,S.createElement(I2,{width:s.containerWidth,height:s.containerHeight}),S.createElement("div",Gh({ref:u},t)))}),vDe=S.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,s]=S.useState({containerWidth:e_(n),containerHeight:e_(r)}),a=S.useCallback((u,d)=>{s(h=>{var p=Math.round(u),y=Math.round(d);return h.containerWidth===p&&h.containerHeight===y?h:{containerWidth:p,containerHeight:y}})},[]),l=S.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null){var{width:d,height:h}=u.getBoundingClientRect();a(d,h)}},[e,a]);return S.createElement(S.Fragment,null,S.createElement(I2,{width:i.containerWidth,height:i.containerHeight}),S.createElement("div",Gh({ref:l},t)))}),bDe=S.forwardRef((t,e)=>{var{width:n,height:r}=t;return S.createElement(S.Fragment,null,S.createElement(I2,{width:n,height:r}),S.createElement("div",Gh({ref:e},t)))}),wDe=S.forwardRef((t,e)=>{var{width:n,height:r}=t;return Cc(n)||Cc(r)?S.createElement(vDe,Gh({},t,{ref:e})):S.createElement(bDe,Gh({},t,{ref:e}))});function xDe(t){return t===!0?yDe:wDe}var _De=S.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:a,onDoubleClick:l,onMouseDown:u,onMouseEnter:d,onMouseLeave:h,onMouseMove:p,onMouseUp:y,onTouchEnd:v,onTouchMove:w,onTouchStart:_,style:E,width:C,responsive:N,dispatchTouchEvents:O=!0}=t,R=S.useRef(null),D=Vn(),[P,A]=S.useState(null),[k,M]=S.useState(null),V=dDe(),U=Vj(),z=(U==null?void 0:U.width)>0?U.width:C,$=(U==null?void 0:U.height)>0?U.height:i,ne=S.useCallback(Z=>{V(Z),typeof e=="function"&&e(Z),A(Z),M(Z),Z!=null&&(R.current=Z)},[V,e,A,M]),fe=S.useCallback(Z=>{D(WZ(Z)),D(Ba({handler:s,reactEvent:Z}))},[D,s]),K=S.useCallback(Z=>{D(II(Z)),D(Ba({handler:d,reactEvent:Z}))},[D,d]),W=S.useCallback(Z=>{D(PJ()),D(Ba({handler:h,reactEvent:Z}))},[D,h]),ee=S.useCallback(Z=>{D(II(Z)),D(Ba({handler:p,reactEvent:Z}))},[D,p]),oe=S.useCallback(()=>{D(ZZ())},[D]),pe=S.useCallback(Z=>{D(JZ(Z.key))},[D]),B=S.useCallback(Z=>{D(Ba({handler:a,reactEvent:Z}))},[D,a]),X=S.useCallback(Z=>{D(Ba({handler:l,reactEvent:Z}))},[D,l]),G=S.useCallback(Z=>{D(Ba({handler:u,reactEvent:Z}))},[D,u]),Q=S.useCallback(Z=>{D(Ba({handler:y,reactEvent:Z}))},[D,y]),re=S.useCallback(Z=>{D(Ba({handler:_,reactEvent:Z}))},[D,_]),_e=S.useCallback(Z=>{O&&D(tee(Z)),D(Ba({handler:w,reactEvent:Z}))},[D,O,w]),Se=S.useCallback(Z=>{D(Ba({handler:v,reactEvent:Z}))},[D,v]),ce=xDe(N);return S.createElement(eZ.Provider,{value:P},S.createElement(aY.Provider,{value:k},S.createElement(ce,{width:z??(E==null?void 0:E.width),height:$??(E==null?void 0:E.height),className:sn("recharts-wrapper",r),style:hDe({position:"relative",cursor:"default",width:z,height:$},E),onClick:fe,onContextMenu:B,onDoubleClick:X,onFocus:oe,onKeyDown:pe,onMouseDown:G,onMouseEnter:K,onMouseLeave:W,onMouseMove:ee,onMouseUp:Q,onTouchEnd:Se,onTouchMove:_e,onTouchStart:re,ref:ne},S.createElement(gDe,null),n)))}),EDe=["width","height","responsive","children","className","style","compact","title","desc"];function TDe(t,e){if(t==null)return{};var n,r,i=SDe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function SDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var aee=S.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:s,className:a,style:l,compact:u,title:d,desc:h}=t,p=TDe(t,EDe),y=pa(p);return u?S.createElement(S.Fragment,null,S.createElement(I2,{width:n,height:r}),S.createElement(Cz,{otherAttributes:y,title:d,desc:h},s)):S.createElement(_De,{className:a,style:l,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},S.createElement(Cz,{otherAttributes:y,title:d,desc:h,ref:e},S.createElement(XRe,null,s)))});function OI(){return OI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OI.apply(null,arguments)}var CDe={top:5,right:5,bottom:5,left:5},ADe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:CDe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},NDe=S.forwardRef(function(e,n){var r,i=li(e.categoricalChartProps,ADe),{chartName:s,defaultTooltipEventType:a,validateTooltipEventTypes:l,tooltipPayloadSearcher:u,categoricalChartProps:d}=e,h={chartName:s,defaultTooltipEventType:a,validateTooltipEventTypes:l,tooltipPayloadSearcher:u,eventEmitter:void 0};return S.createElement(ree,{preloadedState:{options:h},reduxStoreName:(r=d.id)!==null&&r!==void 0?r:s},S.createElement(OZ,{chartData:d.data}),S.createElement(iee,{layout:i.layout,margin:i.margin}),S.createElement(see,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),S.createElement(aee,OI({},i,{ref:n})))});function kDe(t){var e=Vn();return S.useEffect(()=>{e(J6e(t))},[e,t]),null}var IDe=["layout"];function jI(){return jI=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jI.apply(null,arguments)}function ODe(t,e){if(t==null)return{};var n,r,i=jDe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function jDe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var PDe={top:5,right:5,bottom:5,left:5},oee={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:PDe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},RDe=S.forwardRef(function(e,n){var r,i=li(e.categoricalChartProps,oee),{layout:s}=i,a=ODe(i,IDe),{chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:h}=e,p={chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:h,eventEmitter:void 0};return S.createElement(ree,{preloadedState:{options:p},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:l},S.createElement(OZ,{chartData:i.data}),S.createElement(iee,{layout:s,margin:i.margin}),S.createElement(see,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),S.createElement(kDe,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),S.createElement(aee,jI({},a,{ref:n})))});function Nz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kz(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nz(Object(n),!0).forEach(function(r){DDe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function DDe(t,e,n){return(e=MDe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MDe(t){var e=LDe(t,"string");return typeof e=="symbol"?e:e+""}function LDe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VDe=["item"],UDe=kz(kz({},oee),{},{layout:"centric",startAngle:0,endAngle:360}),BDe=S.forwardRef((t,e)=>{var n=li(t,UDe);return S.createElement(RDe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:VDe,tooltipPayloadSearcher:tZ,categoricalChartProps:n,ref:e})}),zDe=["axis"],lee=S.forwardRef((t,e)=>S.createElement(NDe,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:zDe,tooltipPayloadSearcher:tZ,categoricalChartProps:t,ref:e}));const $De=({userRole:t})=>{if(!["admin","quan_ly","lanh_dao"].includes(t))return null;const e=En(C=>C.setAppState),[n,r]=S.useState(!1),[i,s]=S.useState(!1),[a,l]=S.useState("7d"),[u,d]=S.useState([]),[h,p]=S.useState(null),[y,v]=S.useState(!1),[w,_]=S.useState(null);if(S.useEffect(()=>{r(!0)},[]),S.useEffect(()=>{n&&(async()=>{v(!0);try{const N=await fetch("/api/analytics",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dateRange:a})});if(N.ok){const O=await N.json();d(O.chart),p(O.metrics)}else{const O=await N.text();console.error("Failed to fetch analytics:",O),_("Li kt ni API: "+N.status);try{const R=JSON.parse(O);R.error&&_(R.error)}catch{}d([]),p(null)}}catch(N){console.error("Error fetching analytics:",N),_(N.message||"Li khng xc nh")}finally{v(!1)}})()},[a,n]),!n)return null;const E=C=>{const N=Math.floor(C/60),O=Math.floor(C%60);return`${N}m ${O}s`};return m.jsx(Nh.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-4xl mb-4",children:m.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl shadow-xl border border-gray-100 dark:border-zinc-800 overflow-hidden transition-all duration-300",children:[m.jsxs("div",{className:"px-6 py-4 border-b border-gray-100 dark:border-zinc-800 flex justify-between items-center bg-gradient-to-r from-gray-50 to-white dark:from-zinc-900 dark:to-zinc-900 cursor-pointer",onClick:()=>s(!i),children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:m.jsx(r7,{className:"text-blue-600 dark:text-blue-400"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"Tng quan truy cp"}),m.jsx("p",{className:"text-xs text-gray-500",children:a==="7d"?"7 ngy qua":a==="30d"?"30 ngy qua":"Hm nay"})]})]}),m.jsxs("div",{className:"flex items-center gap-3",onClick:C=>C.stopPropagation(),children:[m.jsx("button",{onClick:C=>{C.stopPropagation(),e(je.ANALYTICS)},className:"text-xs font-medium text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors px-3 py-1.5 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:"Xem chi tit"}),m.jsxs("select",{value:a,onChange:C=>l(C.target.value),className:"text-xs border-none bg-gray-100 dark:bg-zinc-800 rounded-lg px-3 py-1.5 text-gray-600 dark:text-gray-300 focus:ring-0 cursor-pointer hover:bg-gray-200 transition-colors outline-none",children:[m.jsx("option",{value:"7d",children:"7 ngy qua"}),m.jsx("option",{value:"30d",children:"30 ngy qua"}),m.jsx("option",{value:"today",children:"Hm nay"})]}),m.jsx("button",{onClick:()=>s(!i),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:i?m.jsx(vbe,{}):m.jsx(ybe,{})})]})]}),m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-6 bg-white dark:bg-zinc-900 relative",children:[y&&m.jsx("div",{className:"absolute inset-0 bg-white/50 dark:bg-zinc-900/50 z-10 flex items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}),w&&m.jsxs("div",{className:"absolute inset-0 bg-white/90 dark:bg-zinc-900/90 z-10 flex flex-col items-center justify-center text-red-500 p-4 text-center",children:[m.jsx("p",{className:"font-bold",children:"Khng th ti d liu"}),m.jsx("p",{className:"text-sm",children:w}),m.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Vui lng kim tra quyn truy cp Service Account"})]}),m.jsx(Pw,{icon:m.jsx(_h,{className:"text-blue-500"}),label:"Ngi dng mi",value:h?h.newUsers.toLocaleString():"...",trend:"--",trendUp:!0,color:"bg-blue-50 dark:bg-blue-900/20"}),m.jsx(Pw,{icon:m.jsx(Dbe,{className:"text-green-500"}),label:"Thi gian TB",value:h?E(h.avgSessionDuration):"...",trend:"--",trendUp:!0,color:"bg-green-50 dark:bg-green-900/20"}),m.jsx(Pw,{icon:m.jsx(Sbe,{className:"text-purple-500"}),label:"Phin truy cp",value:h?h.totalSessions.toLocaleString():"...",trend:"--",trendUp:!0,color:"bg-purple-50 dark:bg-purple-900/20"}),m.jsx(Pw,{icon:m.jsx(r7,{className:"text-orange-500"}),label:"T l thot",value:h?`${h.bounceRate.toFixed(1)}%`:"...",trend:"--",trendUp:!1,color:"bg-orange-50 dark:bg-orange-900/20"})]}),m.jsx(pF,{children:i&&m.jsx(Nh.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden border-t border-gray-100 dark:border-zinc-800",children:m.jsxs("div",{className:"p-6 h-[350px] w-full bg-gray-50/30 dark:bg-zinc-900/30 relative",children:[y&&m.jsx("div",{className:"absolute inset-0 bg-white/50 dark:bg-zinc-900/50 z-10 flex items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}),w&&m.jsxs("div",{className:"absolute inset-0 bg-white/90 dark:bg-zinc-900/90 z-10 flex flex-col items-center justify-center text-red-500 p-4 text-center",children:[m.jsx("p",{className:"font-bold",children:"Khng th ti d liu"}),m.jsx("p",{className:"text-sm",children:w}),m.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Vui lng kim tra quyn truy cp Service Account"})]}),m.jsx(Qk,{width:"100%",height:"100%",children:m.jsxs(lee,{data:u,margin:{top:10,right:10,left:0,bottom:0},children:[m.jsxs("defs",{children:[m.jsxs("linearGradient",{id:"colorVisits",x1:"0",y1:"0",x2:"0",y2:"1",children:[m.jsx("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.3}),m.jsx("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:0})]}),m.jsxs("linearGradient",{id:"colorUsers",x1:"0",y1:"0",x2:"0",y2:"1",children:[m.jsx("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.3}),m.jsx("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:0})]})]}),m.jsx(sP,{strokeDasharray:"3 3",vertical:!1,stroke:"#E5E7EB",opacity:.5}),m.jsx(cP,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#6B7280",fontSize:12},dy:10,interval:a==="30d"?4:0}),m.jsx(uP,{axisLine:!1,tickLine:!1,tick:{fill:"#6B7280",fontSize:12}}),m.jsx(TI,{contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.9)",borderRadius:"12px",border:"none",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"}}),m.jsx(J1,{type:"monotone",dataKey:"visits",stroke:"#3B82F6",strokeWidth:3,fillOpacity:1,fill:"url(#colorVisits)",name:"Lt truy cp",animationDuration:1e3}),m.jsx(J1,{type:"monotone",dataKey:"users",stroke:"#10B981",strokeWidth:3,fillOpacity:1,fill:"url(#colorUsers)",name:"Ngi dng",animationDuration:1e3})]})})]})})})]})})},Pw=({icon:t,label:e,value:n,trend:r,trendUp:i,color:s})=>m.jsxs("div",{className:`p-4 rounded-xl ${s} transition-all duration-300 hover:shadow-md`,children:[m.jsxs("div",{className:"flex justify-between items-start mb-2",children:[m.jsx("div",{className:"p-2 bg-white dark:bg-zinc-800 rounded-lg shadow-sm",children:t}),m.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${i?"text-green-600 bg-green-100":"text-red-600 bg-red-100"}`,children:r})]}),m.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-1",children:n}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:e})]}),FDe=({userProfile:t,onStart:e,onHistoryClick:n,onClassClick:r,onOnlineExamClick:i})=>{const{theme:s}=$i();return m.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 animate-slide-in-right",children:[m.jsx($De,{userRole:t.role}),m.jsx(C_e,{userRole:t.role}),m.jsxs("div",{className:"w-full max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-4 items-center",children:[m.jsx("div",{className:"flex flex-col items-center",children:m.jsx(S_e,{user:t})}),m.jsxs("div",{className:"bg-card/90 backdrop-blur-sm p-6 rounded-2xl shadow-xl border border-border",children:[m.jsxs("h1",{className:"text-3xl font-bold text-primary mb-6 text-center",children:["Xin cho, ",t.full_name||"Hc vin","!"]}),m.jsx("p",{className:"text-muted-foreground text-center mb-8",children:"Chc bn c mt bui n tp hiu qu v t kt qu cao."}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("button",{onClick:e,className:"w-full bg-primary text-primary-foreground font-bold text-lg py-4 px-6 rounded-xl hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-3 shadow-lg",children:[m.jsx(E4,{className:"w-8 h-8"}),m.jsx("span",{children:"Vo n Tp / Thi Th"})]}),["admin","quan_ly","lanh_dao","giao_vien"].includes(t.role)&&m.jsxs("button",{onClick:i,className:"w-full bg-blue-600 text-white font-bold text-lg py-4 px-6 rounded-xl hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-3 shadow-lg",children:[m.jsx(Ble,{className:"w-8 h-8"}),m.jsx("span",{children:"Qun l Thi Trc Tuyn"})]})]})]})]})]})},t_=async t=>{try{const e=$t(_t(Pe,"exam_results"),an("studentId","==",t));return(await Mn(e)).docs.map(i=>{const s=i.data(),a=s.submitted_at||s.completedAt,l=a?a.toDate():new Date;return{id:i.id,...s,userId:s.studentId,completedAt:l}}).sort((i,s)=>s.completedAt.getTime()-i.completedAt.getTime())}catch(e){return console.error("Error fetching exam history:",e),[]}},HDe=({userProfile:t,onBack:e})=>{const[n,r]=S.useState([]),[i,s]=S.useState(!0),[a,l]=S.useState({});S.useEffect(()=>{(async()=>{const y=await t_(t.id);y.sort((w,_)=>_.completedAt.getTime()-w.completedAt.getTime()),r(y),s(!1);const v=Array.from(new Set(y.filter(w=>w.roomId).map(w=>w.roomId)));if(v.length>0){const w={};await Promise.all(v.map(async _=>{try{const{doc:E,getDoc:C}=await $n(async()=>{const{doc:R,getDoc:D}=await Promise.resolve().then(()=>rc);return{doc:R,getDoc:D}},void 0),{db:N}=await $n(async()=>{const{db:R}=await Promise.resolve().then(()=>KW);return{db:R}},void 0),O=await C(E(N,"exam_rooms",_));O.exists()&&(w[_]=O.data())}catch(E){console.error(`Error fetching room ${_}`,E)}})),l(w)}})()},[t.id]);const u=p=>p.roomId?"Thi Trc Tuyn":p.quizId==="exam-quiz"||p.quizId==="thithu2"||p.type==="Thi th"?"Thi th":"n tp",d=p=>{switch(p){case"Thi Trc Tuyn":return"bg-red-100 text-red-800 border-red-200";case"Thi th":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}},h=p=>{if(p.roomId&&a[p.roomId]){const y=a[p.roomId];return`Phng thi ${y.name} / ${y.course_name||"T do"} / ${y.license_name||""}`}return p.quizTitle||(p.roomId?`Phng thi ${p.roomId}`:p.type)};return m.jsxs("div",{className:"w-full max-w-5xl mx-auto p-4 animate-slide-in-right",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsxs("h1",{className:"text-2xl font-bold text-foreground flex items-center gap-2",children:[m.jsx(j0,{className:"text-primary"}),"Lch s n tp & Thi"]}),m.jsx("button",{onClick:e,className:"bg-secondary text-secondary-foreground px-4 py-2 rounded-lg hover:bg-secondary/80 transition-colors shadow-sm",children:"Quay li"})]}),i?m.jsx("div",{className:"text-center p-8",children:m.jsx("p",{className:"text-muted-foreground",children:"ang ti d liu..."})}):n.length===0?m.jsx("div",{className:"text-center p-8 bg-card rounded-xl shadow-sm border border-border",children:m.jsx("p",{className:"text-muted-foreground",children:"Cha c lch s lm bi no."})}):m.jsx("div",{className:"bg-white dark:bg-card rounded-xl shadow-sm border border-border overflow-hidden",children:m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full text-left border-collapse",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"bg-muted/50 border-b border-border text-xs uppercase text-muted-foreground",children:[m.jsx("th",{className:"p-4 font-semibold",children:"Loi"}),m.jsx("th",{className:"p-4 font-semibold",children:"Bi thi"}),m.jsx("th",{className:"p-4 font-semibold text-center",children:"im s"}),m.jsx("th",{className:"p-4 font-semibold",children:"Gi np"})," ",m.jsx("th",{className:"p-4 font-semibold",children:"Ngy np"})]})}),m.jsx("tbody",{className:"divide-y divide-border",children:n.map(p=>{const y=u(p);return m.jsxs("tr",{className:"hover:bg-muted/30 transition-colors",children:[m.jsx("td",{className:"p-4 align-middle",children:m.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium border ${d(y)}`,children:y})}),m.jsx("td",{className:"p-4 align-middle font-medium text-foreground",children:h(p)}),m.jsxs("td",{className:"p-4 align-middle text-center",children:[m.jsx("span",{className:"font-bold text-primary",children:p.score}),m.jsxs("span",{className:"text-muted-foreground text-sm",children:[" / ",p.totalQuestions]})]}),m.jsx("td",{className:"p-4 align-middle text-sm",children:new Date(p.completedAt).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})}),m.jsx("td",{className:"p-4 align-middle text-sm text-muted-foreground",children:new Date(p.completedAt).toLocaleDateString("vi-VN")})]},p.id)})})]})})})]})},qDe=t=>{if(!t)return"Thnh vin";const e=t.toLowerCase().trim();return{admin:"Qun tr vin",quan_ly:"Qun l",lanh_dao:"Lnh o",giao_vien:"Gio vin",hoc_vien:"Hc vin",phu_huynh:"Ph huynh"}[e]||t},GDe=({userProfile:t,onBack:e})=>{const[n,r]=S.useState(null),[i,s]=S.useState([]),[a,l]=S.useState([]),[u,d]=S.useState(!0),[h,p]=S.useState("grid"),[y,v]=S.useState({}),[w,_]=S.useState("");return S.useEffect(()=>{let E,C,N;return(async()=>{if(!t.id)return;const R=Ct(Pe,"users",t.id),D=await td(R);if(!D.exists()){d(!1);return}const A=D.data().courseId;if(!A){d(!1);return}const k=Ct(Pe,"courses",A);E=ko(k,M=>{if(M.exists()){const V={id:M.id,...M.data()};if(r(V),V.licenseId&&$n(async()=>{const{fetchLicenses:U}=await Promise.resolve().then(()=>FP);return{fetchLicenses:U}},void 0).then(({fetchLicenses:U})=>{U().then(z=>{const $=z.find(ne=>ne.id===V.licenseId);$&&_($.name)})}),C&&C(),V.teacherIds&&V.teacherIds.length>0)try{const U=[...new Set(V.teacherIds.filter(z=>z&&z.trim()!==""))].slice(0,10);if(U.length>0){const z=$t(_t(Pe,"users"),an(U_(),"in",U));C=ko(z,$=>{s($.docs.map(ne=>{const fe=ne.data();return{uid:ne.id,...fe,photoURL:fe.photoURL||id(fe.role)}}))})}else s([])}catch(U){console.error("Error creating teacher query:",U),s([])}else s([]);if(N)d(!1);else{const U=$t(_t(Pe,"users"),an("courseId","==",A),an("role","==","hoc_vien"));N=ko(U,async z=>{const $=z.docs.map(fe=>{const K=fe.data();return{uid:fe.id,...K,photoURL:K.photoURL||id(K.role)}});l($);const ne={};await Promise.all($.map(async fe=>{try{const K=await t_(fe.uid);if(K&&K.length>0){const W=K[0];ne[fe.uid]={type:W.quizTitle||W.type||"Bi thi",time:W.completedAt?W.completedAt.toLocaleString("vi-VN"):"--",score:`${W.score}/${W.totalQuestions} cu`}}else ne[fe.uid]={type:"--",time:"--",score:"--"}}catch(K){console.error(`Error fetching history for ${fe.uid}`,K),ne[fe.uid]={type:"Li",time:"--",score:"--"}}})),v(ne),d(!1)})}}else r(null),d(!1)})})(),()=>{E&&E(),C&&C(),N&&N()}},[t.id]),u?m.jsx("div",{className:"flex justify-center items-center h-screen",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600"})}):n?m.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 animate-slide-in-right",children:[m.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[m.jsxs("div",{children:[m.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-sm text-gray-500 hover:text-blue-600 mb-2 transition-colors font-medium",children:[m.jsx(Pm,{})," Quay li Dashboard"]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-2 rounded-lg",children:m.jsx(fh,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-cyan-500",children:n.name}),m.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-0.5",children:n.description||"Cha c m t"}),w&&m.jsxs("div",{className:"mt-2 inline-flex items-center gap-1.5 bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-xs font-bold border border-yellow-200",children:[m.jsx(e1,{}),m.jsxs("span",{children:["Chng ch: ",w]})]})]})]})]}),m.jsxs("div",{className:"flex gap-4",children:[m.jsxs("div",{className:"bg-white dark:bg-slate-800 px-4 py-2 rounded-xl shadow-sm border border-gray-100 dark:border-slate-700 flex items-center gap-3",children:[m.jsx("div",{className:"bg-green-100 p-2 rounded-full text-green-600",children:m.jsx(Rm,{})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-xs text-gray-500",children:"Gio vin"}),m.jsx("p",{className:"font-bold text-lg",children:i.length})]})]}),m.jsxs("div",{className:"bg-white dark:bg-slate-800 px-4 py-2 rounded-xl shadow-sm border border-gray-100 dark:border-slate-700 flex items-center gap-3",children:[m.jsx("div",{className:"bg-blue-100 p-2 rounded-full text-blue-600",children:m.jsx(_h,{})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-xs text-gray-500",children:"Hc vin"}),m.jsx("p",{className:"font-bold text-lg",children:a.length})]})]})]})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[m.jsx("div",{className:"lg:col-span-1 space-y-6",children:m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-slate-700 p-5 sticky top-20",children:[m.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2 text-gray-800 dark:text-white border-b pb-3 border-gray-100 dark:border-slate-700",children:[m.jsx(Rm,{className:"text-green-500"})," i ng Gio vin"]}),m.jsxs("div",{className:"space-y-3",children:[i.map(E=>m.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 dark:hover:bg-slate-700/50 rounded-lg transition-colors group cursor-pointer",children:[m.jsxs("div",{className:"relative",children:[m.jsx("img",{src:E.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(E.fullName)}&background=random`,alt:E.fullName,className:"w-10 h-10 rounded-full object-cover border border-gray-200 dark:border-slate-600 group-hover:scale-105 transition-transform"}),n.headTeacherId===E.uid&&m.jsx("div",{className:"absolute -top-1 -right-1 bg-yellow-400 text-white rounded-full p-0.5 border-2 border-white",children:m.jsx(e1,{size:10})})]}),m.jsxs("div",{className:"min-w-0 flex-1",children:[m.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-gray-100 truncate",children:E.fullName}),m.jsx("p",{className:"text-[11px] text-gray-400",children:qDe(E.role)}),n.headTeacherId===E.uid&&m.jsx("span",{className:"inline-flex items-center text-[10px] font-bold text-yellow-600",children:" GV Ch Nhim"})]})]},E.uid)),i.length===0&&m.jsx("p",{className:"text-sm text-gray-500 italic text-center py-4",children:"Cha c thng tin gio vin."})]})]})}),m.jsx("div",{className:"lg:col-span-3",children:m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-slate-700 p-6 min-h-[500px]",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[m.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-700 rounded-lg p-1",children:[m.jsx("button",{onClick:()=>p("grid"),className:`p-1.5 rounded ${h==="grid"?"bg-white dark:bg-slate-600 shadow text-blue-600":"text-gray-500 hover:text-blue-500"}`,title:"Dng li",children:m.jsx(iK,{})}),m.jsx("button",{onClick:()=>p("list"),className:`p-1.5 rounded ${h==="list"?"bg-white dark:bg-slate-600 shadow text-blue-600":"text-gray-500 hover:text-blue-500"}`,title:"Dng danh sch",children:m.jsx(eK,{})})]}),m.jsxs("span",{className:"text-sm px-2 py-0.5 bg-blue-100 text-blue-700 rounded-full font-medium",children:[a.length," thnh vin"]})]}),a.length===0?m.jsxs("div",{className:"text-center py-20 flex flex-col items-center",children:[m.jsx("div",{className:"bg-gray-100 dark:bg-slate-700 p-6 rounded-full mb-4",children:m.jsx(_h,{className:"text-gray-300 w-12 h-12"})}),m.jsx("p",{className:"text-gray-500 font-medium",children:"Lp cha c hc vin no khc."})]}):h==="grid"?m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-5",children:a.map(E=>m.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/30 rounded-xl p-4 border border-gray-100 dark:border-slate-700 hover:shadow-md hover:border-blue-200 dark:hover:border-blue-500/30 transition-all duration-300 group relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-bl from-blue-100 to-transparent -mr-8 -mt-8 rounded-full opacity-50 group-hover:scale-150 transition-transform"}),m.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[m.jsxs("div",{className:"relative",children:[m.jsx("img",{src:E.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(E.fullName)}&background=random`,alt:E.fullName,className:"w-14 h-14 rounded-full object-cover border-2 border-white dark:border-slate-600 shadow-sm group-hover:border-blue-500 transition-colors"}),m.jsx("div",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 bg-green-500 border-2 border-white rounded-full"})]}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h4",{className:"font-bold text-gray-900 dark:text-gray-100 truncate group-hover:text-blue-600 transition-colors text-base",children:E.fullName}),m.jsxs("div",{className:"space-y-1.5 mt-2",children:[m.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1.5 bg-white dark:bg-slate-800 px-2 py-1 rounded border border-gray-100 dark:border-slate-600 w-fit",children:[m.jsx("span",{children:""})," ",E.birthDate||"--/--"]}),m.jsxs("p",{className:"text-xs text-gray-500 truncate flex items-center gap-1.5",title:E.address,children:[m.jsx("span",{children:""})," ",E.address||"Cha cp nht"]})]}),E.uid===t.id&&m.jsx("div",{className:"mt-2",children:m.jsx("span",{className:"text-[10px] font-bold text-teal-600 bg-teal-50 border border-teal-100 px-2 py-0.5 rounded-full",children:"L ti"})})]})]})]},E.uid))}):m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full text-sm text-left",children:[m.jsx("thead",{className:"text-xs text-gray-500 uppercase bg-gray-50 dark:bg-slate-700 dark:text-gray-300",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-4 py-3 rounded-l-lg",children:"Hc vin"}),m.jsx("th",{className:"px-4 py-3",children:"Ngy sinh"}),m.jsx("th",{className:"px-4 py-3",children:"Bi lm gn nht"}),m.jsx("th",{className:"px-4 py-3",children:"Thi gian"}),m.jsx("th",{className:"px-4 py-3 rounded-r-lg",children:"im"})]})}),m.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-700",children:a.map(E=>{const C=y[E.uid]||{type:"--",time:"--",score:"--"};return m.jsxs("tr",{className:"bg-white dark:bg-slate-800 hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors",children:[m.jsxs("td",{className:"px-4 py-3 font-medium text-gray-900 dark:text-white flex items-center gap-3",children:[m.jsx("img",{src:E.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(E.fullName)}`,className:"w-8 h-8 rounded-full border border-gray-200"}),m.jsxs("div",{children:[m.jsx("p",{children:E.fullName}),E.uid===t.id&&m.jsx("span",{className:"text-[10px] font-bold text-teal-600 border border-teal-100 bg-teal-50 px-1 rounded",children:"Ti"})]})]}),m.jsx("td",{className:"px-4 py-3 text-gray-500",children:E.birthDate||"--"}),m.jsx("td",{className:"px-4 py-3",children:m.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold
                                                        ${C.type.includes("n")?"bg-blue-100 text-blue-700":C.type.includes("Th")?"bg-purple-100 text-purple-700":C.type==="--"?"bg-gray-100 text-gray-500":"bg-red-100 text-red-700"}`,children:C.type})}),m.jsx("td",{className:"px-4 py-3 text-gray-500",children:C.time}),m.jsx("td",{className:"px-4 py-3 font-bold text-teal-600",children:C.score})]},E.uid)})})]})})]})})]})]}):m.jsxs("div",{className:"w-full max-w-5xl mx-auto p-4 animate-slide-in-right",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3 bg-clip-text text-transparent bg-gradient-to-r from-teal-600 to-emerald-600",children:[m.jsx(fh,{className:"text-teal-600"})," Lp Ca Ti"]}),m.jsx("button",{onClick:e,className:"bg-gray-200 dark:bg-slate-700 text-gray-800 dark:text-gray-200 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-slate-600 transition-colors",children:"Quay li"})]}),m.jsx("div",{className:"text-center p-12 bg-white dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 shadow-sm",children:m.jsx("p",{className:"text-gray-500",children:"Bn cha c phn lp."})})]})},WDe=t=>{switch(t){case"admin":return"Qun tr vin";case"lanh_dao":return"Lnh o";case"quan_ly":return"Qun l";case"giao_vien":return"Gio vin";case"hoc_vien":return"Hc vin";default:return t}},GA=t=>t==="admin"?10:t==="lanh_dao"?5:t==="quan_ly"?2:t==="giao_vien"?1:0,_n=t=>(t||"").toLowerCase(),KDe=({userProfile:t,onBack:e})=>{var Sd,Gc;const[n,r]=S.useState([]),[i,s]=S.useState(null),[a,l]=S.useState(!0),[u,d]=S.useState({}),[h,p]=S.useState(!0),[y,v]=S.useState([]),[w,_]=S.useState([]),[E,C]=S.useState([]),[N,O]=S.useState([]),[R,D]=S.useState({}),[P,A]=S.useState(!1),[k,M]=S.useState(!1),[V,U]=S.useState(""),[z,$]=S.useState(""),[ne,fe]=S.useState(!1),[K,W]=S.useState(!1),[ee,oe]=S.useState(new Set),[pe,B]=S.useState(!1),[X,G]=S.useState(!1),[Q,re]=S.useState(null),[_e,Se]=S.useState([]),[ce,Z]=S.useState(!1),[ke,Le]=S.useState({}),[ye,ze]=S.useState(!1),[Ae,Ze]=S.useState(null),[rt,it]=S.useState(!1),[Ke,lt]=S.useState(!1),[xt,Sr]=S.useState(!1),[Un,hr]=S.useState(""),[Ht,fr]=S.useState(""),[ei,cs]=S.useState(!1),[se,Ie]=S.useState(!1),[mt,gn]=S.useState(null),[Ft,ti]=S.useState(""),[Kn,hi]=S.useState(""),[Qt,$c]=S.useState("system"),[Ss,us]=S.useState(""),[ds,xa]=S.useState(!1),[Cn,Fi]=S.useState("list"),[et,qt]=S.useState([]),[mr,pr]=S.useState(!1),[sr,An]=S.useState(null),[Cr,hs]=S.useState(""),[gr,Mr]=S.useState(""),[Ai,Lr]=S.useState(""),[Fc,Cs]=S.useState(""),[Hi,yr]=S.useState(10),[Pn,qi]=S.useState(1),[Ws,rg]=S.useState("fullName"),[Nl,xd]=S.useState("asc"),Ks=GA(t.role)>=2,_a=["admin","quan_ly","lanh_dao","giao_vien"].includes(t.role),Ea=GA(t.role)>=2,As=GA(t.role)>=2,fs=q=>q.roomId?"Thi Trc Tuyn":q.quizId==="exam-quiz"||q.quizId==="thithu2"||q.type==="Thi th"||q.quizTitle&&q.quizTitle.includes("Thi th")?"Thi th":"n tp",Ta=q=>{switch(q){case"Thi Trc Tuyn":return"bg-red-100 text-red-800 border-red-200";case"Thi th":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}},vr=q=>{if(q.roomId&&ke[q.roomId]){const xe=ke[q.roomId];return`Phng thi ${xe.name} / ${xe.course_name||"T do"} / ${xe.license_name||""}`}return q.quizTitle||(q.roomId?`Phng thi ${q.roomId}`:q.type)};S.useEffect(()=>{(async()=>{try{const xe=$t(_t(Pe,"courses")),$e=(await Mn(xe)).docs.map(Nn=>({id:Nn.id,...Nn.data()}));r($e);const We=new Set($e.map(Nn=>Nn.headTeacherId).filter(Boolean)),cn={};for(const Nn of Array.from(We))if(Nn)try{const ar=await td(Ct(Pe,"users",Nn));ar.exists()&&(cn[Nn]=ar.data().fullName)}catch{}d(cn)}catch(xe){console.error(xe)}finally{l(!1)}})(),$n(async()=>{const{fetchLicenses:xe}=await Promise.resolve().then(()=>FP);return{fetchLicenses:xe}},void 0).then(({fetchLicenses:xe})=>{xe().then(qt).catch(console.error)})},[t]),S.useEffect(()=>{if(!i)return;let q,xe;if(i.teacherIds&&i.teacherIds.length>0)try{const $e=[...new Set(i.teacherIds.filter(We=>We&&We.trim()!==""))].slice(0,10);if($e.length>0){const We=$t(_t(Pe,"users"),an(U_(),"in",$e));q=ko(We,cn=>{_(cn.docs.map(Nn=>{const ar=Nn.data();return{uid:Nn.id,...ar,photoURL:ar.photoURL||id(ar.role)}}))})}else _([])}catch($e){console.error("Teacher fetch error:",$e),_([])}else _([]);const Ve=$t(_t(Pe,"users"),an("courseId","==",i.id));return xe=ko(Ve,async $e=>{const We=$e.docs.map(Nn=>{const ar=Nn.data();return{uid:Nn.id,...ar,photoURL:ar.photoURL||id(ar.role)}});v(We);const cn={};await Promise.all(We.map(async Nn=>{try{const ar=await t_(Nn.uid);if(ar&&ar.length>0){const Ca=ar[0];cn[Nn.uid]={type:Ca.quizTitle||Ca.type||"Bi thi",time:Ca.completedAt?Ca.completedAt.toLocaleString("vi-VN"):"--",score:`${Ca.score}/${Ca.totalQuestions} cu`,rawDate:Ca.completedAt}}else cn[Nn.uid]={type:"--",time:"--",score:"--"}}catch{cn[Nn.uid]={type:"Li",time:"--",score:"--"}}})),D(cn)}),()=>{q&&q(),xe&&xe()}},[i]);const kl=S.useMemo(()=>{let q=[...y];if(V){const xe=V.toLowerCase();q=q.filter(Ve=>{var $e,We,cn;return(($e=Ve.fullName)==null?void 0:$e.toLowerCase().includes(xe))||((We=Ve.email)==null?void 0:We.toLowerCase().includes(xe))||((cn=Ve.phoneNumber)==null?void 0:cn.includes(xe))})}return q.sort((xe,Ve)=>{let $e=xe[Ws],We=Ve[Ws];return Ws==="status"&&($e=xe.isVerified||xe.courseId?1:0,We=Ve.isVerified||Ve.courseId?1:0),$e||($e=""),We||(We=""),$e<We?Nl==="asc"?-1:1:$e>We?Nl==="asc"?1:-1:0}),q},[y,V,Ws,Nl]),Sa=Math.ceil(kl.length/Hi),Ys=kl.slice((Pn-1)*Hi,Pn*Hi),Gi=q=>{Ws===q?xd(xe=>xe==="asc"?"desc":"asc"):(rg(q),xd("asc"))},to=q=>Ws!==q?m.jsx(rK,{className:"ml-1 text-gray-300 inline"}):Nl==="asc"?m.jsx(nK,{className:"ml-1 text-blue-500 inline"}):m.jsx(tK,{className:"ml-1 text-blue-500 inline"});S.useEffect(()=>{P&&(async()=>{const xe=$t(_t(Pe,"users"),an("role","in",["hoc_vien"])),$e=(await Mn(xe)).docs.map(We=>({uid:We.id,...We.data()}));C($e.filter(We=>We.courseId!==(i==null?void 0:i.id)||!We.courseId))})()},[P,i]),S.useEffect(()=>{k&&(async()=>{const xe=$t(_t(Pe,"users"),an("role","in",["giao_vien","admin","quan_ly","lanh_dao"])),$e=(await Mn(xe)).docs.map(We=>({uid:We.id,...We.data()}));O($e.filter(We=>!((i==null?void 0:i.teacherIds)||[]).includes(We.uid)))})()},[k,i]),S.useEffect(()=>{X&&Q&&(Z(!0),(async()=>{const xe=await t_(Q.uid);xe.sort(($e,We)=>We.completedAt.getTime()-$e.completedAt.getTime()),Se(xe);const Ve=Array.from(new Set(xe.filter($e=>$e.roomId).map($e=>$e.roomId)));if(Ve.length>0){const $e={};await Promise.all(Ve.map(async We=>{try{const cn=await td(Ct(Pe,"exam_rooms",We));cn.exists()&&($e[We]=cn.data())}catch{}})),Le($e)}Z(!1)})())},[X,Q]);const _d=async q=>{q.preventDefault();try{await Ph(_t(Pe,"courses"),{name:Un,description:Ht,teacherIds:[],createdAt:fl(),createdBy:t.id,licenseId:Fc}),Sr(!1),hr(""),fr(""),Cs(""),window.location.reload()}catch(xe){console.error(xe)}},Ed=async q=>{if(q.preventDefault(),!!sr)try{if(await jr(Ct(Pe,"courses",sr.id),{name:Cr,description:gr,licenseId:Ai}),sr.licenseId!==Ai){const xe=$t(_t(Pe,"users"),an("courseId","==",sr.id)),$e=(await Mn(xe)).docs.map(We=>jr(Ct(Pe,"users",We.id),{defaultLicenseId:Ai||null}));await Promise.all($e)}alert("Cp nht lp hc thnh cng!"),r(xe=>xe.map(Ve=>Ve.id===sr.id?{...Ve,name:Cr,description:gr,licenseId:Ai}:Ve)),(i==null?void 0:i.id)===sr.id&&s(xe=>xe?{...xe,name:Cr,description:gr,licenseId:Ai}:null),pr(!1)}catch(xe){console.error(xe),alert("Li khi cp nht lp.")}},hf=async q=>{if(confirm("Bn c chc chn mun xa lp ny? Hnh ng ny khng th hon tc!"))try{const xe=$t(_t(Pe,"users"),an("courseId","==",q)),$e=(await Mn(xe)).docs.map(We=>jr(Ct(Pe,"users",We.id),{courseId:null,courseName:null,class:null,isVerified:!1}));await Promise.all($e),await $n(async()=>{const{deleteDoc:We}=await Promise.resolve().then(()=>rc);return{deleteDoc:We}},void 0).then(({deleteDoc:We})=>We(Ct(Pe,"courses",q))),r(We=>We.filter(cn=>cn.id!==q)),alert(" xa lp hc!"),(i==null?void 0:i.id)===q&&s(null)}catch(xe){console.error(xe),alert("Li khi xa lp.")}},Hc=(q,xe)=>{xe.stopPropagation(),An(q),hs(q.name),Mr(q.description||""),Lr(q.licenseId||""),pr(!0)},ms=async q=>{if(!i)return;const xe=E.find(Ve=>Ve.uid===q);if(xe&&xe.courseId){alert(`Hc vin ny ang hc lp ${xe.courseName||xe.courseId}. Vui lng xa khi lp c trc khi thm vo lp mi.`);return}fe(!0);try{await jr(Ct(Pe,"users",q),{courseId:i.id,courseName:i.name,class:i.name,isVerified:!0,defaultLicenseId:i.licenseId||null,updatedAt:fl()}),C(Ve=>Ve.filter($e=>$e.uid!==q)),alert(` thm hc vin vo lp ${i.name}`)}catch(Ve){console.error(Ve),alert("Li khi thm hc vin.")}finally{fe(!1)}},br=async q=>{if(i){W(!0);try{const xe=Ct(Pe,"courses",i.id);await jr(xe,{teacherIds:XN(q),...ei?{headTeacherId:q}:{}}),O(Ve=>Ve.filter($e=>$e.uid!==q)),ei&&s(Ve=>Ve?{...Ve,headTeacherId:q}:null),s(Ve=>Ve?{...Ve,teacherIds:[...Ve.teacherIds||[],q]}:null)}catch(xe){console.error(xe)}finally{W(!1)}}},Vr=async q=>{if(i&&confirm("Bn c chc chn xo gio vin ny khi lp?"))try{const xe=Ct(Pe,"courses",i.id);await jr(xe,{teacherIds:fO(q),...i.headTeacherId===q?{headTeacherId:null}:{}}),s(Ve=>Ve?{...Ve,teacherIds:(Ve.teacherIds||[]).filter($e=>$e!==q),headTeacherId:Ve.headTeacherId===q?void 0:Ve.headTeacherId}:null)}catch(xe){console.error("Error removing teacher:",xe)}},no=async q=>{if(confirm("Bn c chc chn mun xa hc vin ny khi lp?"))try{await jr(Ct(Pe,"users",q),{courseId:null,courseName:null,class:null,isVerified:!1})}catch(xe){console.error(xe)}},Td=q=>{const xe=new Set(ee);xe.has(q)?xe.delete(q):xe.add(q),oe(xe)},Jt=q=>{if(ee.size===q.length&&q.length>0)oe(new Set);else{const xe=new Set(q.map(Ve=>Ve.uid));oe(xe)}},Il=async()=>{if(!(ee.size===0||!i)&&confirm(`Bn c chc mun thm ${ee.size} hc vin vo lp ${i.name}?`)){B(!0);try{const q=Array.from(ee).map(async xe=>{if(!E.find(cn=>cn.uid===xe))return;const $e=Ct(Pe,"users",xe);await jr($e,{courseId:i.id,courseName:i.name,isVerified:!0,defaultLicenseId:i.licenseId||null,class:i.name,updatedAt:fl()});const We=Ct(Pe,"courses",i.id);await jr(We,{students:XN(xe)})});await Promise.all(q),alert(` thm thnh cng ${ee.size} hc vin!`),A(!1),oe(new Set)}catch(q){console.error(q),alert("C li xy ra khi thm nhiu hc vin.")}finally{B(!1)}}},Ns=(q,xe,Ve)=>{gn({type:q,id:xe,name:Ve}),ti(""),hi(""),Ie(!0)},Ol=async q=>{if(q.preventDefault(),!(!mt||!t.id)){xa(!0);try{const xe=Ss?new Date(Ss):null,Ve=Qt==="special"||Qt==="attention",$e=Ve?"all":mt.type,We=Ve?null:mt.id;await YW(Ft,Kn,Qt,$e,We,t.id,t.full_name,xe),alert("Gi thng bo thnh cng!"),Ie(!1)}catch(xe){console.error(xe),alert("Li khi gi thng bo. C th thiu Index Firestore.")}finally{xa(!1)}}},Ni=async(q,xe)=>{var $e;const Ve=prompt(`Nhp mt khu mi cho hc vin ${xe}:`,"123456");if(Ve!==null){if(!Ve||Ve.length<6){alert("Mt khu phi c t nht 6 k t.");return}try{const We=await(($e=Ji.currentUser)==null?void 0:$e.getIdToken());if(!We){alert("Li xc thc.");return}const cn=await fetch("/api/admin/reset-password",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${We}`},body:JSON.stringify({targetUserId:q,newPassword:Ve})}),Nn=await cn.json();cn.ok?alert(` i mt khu cho ${xe} thnh cng!`):alert(`Li: ${Nn.error}`)}catch(We){console.error(We),alert("Li kt ni.")}}},qc=async()=>{if(Ae){it(!0);try{const q=xe=>xe===void 0?null:xe;await jr(Ct(Pe,"users",Ae.uid),{fullName:q(Ae.fullName),birthDate:q(Ae.birthDate),email:q(Ae.email),phoneNumber:q(Ae.phoneNumber),address:q(Ae.address),cccd:q(Ae.cccd),cccdDate:q(Ae.cccdDate),cccdPlace:q(Ae.cccdPlace),class:q(Ae.class),courseCode:q(Ae.courseCode),role:q(Ae.role)}),alert(" cp nht thng tin hc vin!"),ze(!1),lt(!1)}catch(q){console.error("Error updating user:",q),alert("Li khi cp nht thng tin.")}finally{it(!1)}}};return i?m.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 animate-slide-in-right relative",children:[m.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 rounded-2xl p-6 mb-8 text-white shadow-lg relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20",children:m.jsx(fh,{className:"w-32 h-32 transform rotate-12"})}),m.jsxs("div",{className:"relative z-10",children:[m.jsxs("button",{onClick:e,className:"absolute top-0 left-0 bg-white/20 hover:bg-white/30 text-white px-3 py-1 rounded text-sm transition flex items-center gap-1 backdrop-blur-sm",children:[m.jsx(Pm,{})," Quay li Dashboard"]}),m.jsxs("div",{className:"mt-8",children:[m.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[m.jsx("div",{className:"p-3 bg-white/20 rounded-xl backdrop-blur-md",children:m.jsx(yk,{className:"w-8 h-8"})}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:i.name}),m.jsx("p",{className:"opacity-90",children:i.description||"Cha c m t"})]})]}),i.licenseId&&m.jsxs("div",{className:"inline-flex items-center gap-2 bg-yellow-400 text-black px-3 py-1 rounded-full text-sm font-bold shadow-sm mt-2",children:[m.jsx(e1,{}),((Sd=et.find(q=>q.id===i.licenseId))==null?void 0:Sd.name)||i.licenseId]})]})]})]}),P&&yo.createPortal(m.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 p-4",onClick:()=>A(!1),children:m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl p-6 h-[80vh] flex flex-col relative",onClick:q=>q.stopPropagation(),children:[m.jsx("button",{onClick:()=>A(!1),className:"absolute top-4 right-4 bg-gray-100 dark:bg-slate-700 p-2 rounded-full border border-gray-200 dark:border-slate-600",children:m.jsx(wm,{})}),m.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[m.jsxs("span",{className:"text-gray-800 dark:text-white",children:["Thm Hc Vin vo ",i.name]}),i.licenseId&&m.jsxs("span",{className:"text-xs px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full border border-yellow-200",children:["Hng: ",((Gc=et.find(q=>q.id===i.licenseId))==null?void 0:Gc.name)||i.licenseId]})]}),m.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[m.jsxs("div",{className:"relative flex-1",children:[m.jsx(vk,{className:"absolute left-3 top-3 text-gray-400"}),m.jsx("input",{className:"w-full pl-10 pr-4 py-2 border rounded-lg dark:bg-slate-700 focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Tm kim tn, email, st...",value:V,onChange:q=>U(q.target.value)})]}),m.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 dark:bg-blue-900/30 rounded-lg border border-blue-100 dark:border-blue-800 px-4 cursor-pointer",onClick:()=>p(!h),children:[m.jsx("input",{type:"checkbox",checked:h,onChange:q=>p(q.target.checked),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),m.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-200 cursor-pointer select-none",children:"Ch hin hc vin cha c lp"})]})]}),m.jsxs("div",{className:"grid grid-cols-12 gap-2 text-xs font-bold text-gray-500 uppercase px-3 pb-2 border-b border-gray-100 dark:border-slate-700 items-center",children:[m.jsx("div",{className:"col-span-1 flex justify-center",children:m.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-blue-600 focus:ring-blue-500",checked:E.filter(q=>{const xe=_n(q.fullName).includes(_n(V))||_n(q.email).includes(_n(V))||_n(q.phoneNumber).includes(_n(V)),Ve=h?!q.courseId:!0;return xe&&Ve}).length>0&&ee.size===E.filter(q=>{const xe=_n(q.fullName).includes(_n(V))||_n(q.email).includes(_n(V))||_n(q.phoneNumber).includes(_n(V)),Ve=h?!q.courseId:!0;return xe&&Ve}).length,onChange:()=>Jt(E.filter(q=>{const xe=_n(q.fullName).includes(_n(V))||_n(q.email).includes(_n(V))||_n(q.phoneNumber).includes(_n(V)),Ve=h?!q.courseId:!0;return xe&&Ve}))})}),m.jsx("div",{className:"col-span-4",children:"Hc vin"}),m.jsx("div",{className:"col-span-2",children:"Ngy sinh/ST"}),m.jsx("div",{className:"col-span-2",children:"a ch"}),m.jsx("div",{className:"col-span-2",children:"Lp (T in)"}),m.jsx("div",{className:"col-span-1 text-center",children:"Thao tc"})]}),m.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2 mt-2",children:E.filter(q=>{const xe=_n(q.fullName).includes(_n(V))||_n(q.email).includes(_n(V))||_n(q.phoneNumber).includes(_n(V)),Ve=h?!q.courseId:!0;return xe&&Ve}).map(q=>m.jsxs("div",{className:`grid grid-cols-12 gap-2 items-center p-3 rounded-lg border transition ${ee.has(q.uid)?"bg-blue-50 border-blue-200 dark:bg-blue-900/20 dark:border-blue-800":"bg-gray-50 border-transparent hover:bg-gray-100 dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[m.jsx("div",{className:"col-span-1 flex justify-center",children:m.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded text-blue-600 focus:ring-blue-500",checked:ee.has(q.uid),onChange:()=>Td(q.uid)})}),m.jsxs("div",{className:"col-span-4 flex items-center gap-3 overflow-hidden",children:[m.jsx("img",{src:q.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(q.fullName)}`,onError:xe=>{xe.currentTarget.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(q.fullName)}`},className:"w-10 h-10 rounded-full border border-gray-200 flex-shrink-0"}),m.jsxs("div",{className:"min-w-0",children:[m.jsx("p",{className:"font-bold text-sm truncate text-gray-900 dark:text-white",title:q.fullName,children:q.fullName}),m.jsx("p",{className:"text-xs text-gray-500 truncate",title:q.email,children:q.email})]})]}),m.jsxs("div",{className:"col-span-2 text-sm text-gray-700 dark:text-gray-300",children:[m.jsx("div",{className:"text-xs text-gray-500",children:q.birthDate||"--/--/----"}),m.jsx("div",{className:"font-medium",children:q.phoneNumber||"---"})]}),m.jsx("div",{className:"col-span-2 text-sm text-gray-700 dark:text-gray-300",children:m.jsx("p",{className:"line-clamp-2 text-xs",title:q.address||q.cccdPlace,children:q.address||q.cccdPlace||"---"})}),m.jsxs("div",{className:"col-span-2 text-sm",children:[m.jsx("div",{className:"text-xs text-gray-900 dark:text-gray-100 font-medium truncate",title:q.class,children:q.class||"---"}),q.courseName&&m.jsxs("div",{className:"text-[10px] text-yellow-600 bg-yellow-50 px-1 rounded inline-block mt-1 truncate max-w-full",children:["ang hc: ",q.courseName]})]}),m.jsx("div",{className:"col-span-1 flex justify-center",children:m.jsx("button",{onClick:()=>ms(q.uid),disabled:ne,className:"bg-blue-600 text-white p-2 rounded hover:bg-blue-700 disabled:opacity-50 shadow-sm transition-transform active:scale-95",title:"Thm vo lp",children:m.jsx(Iu,{})})})]},q.uid))}),ee.size>0&&m.jsx("div",{className:"absolute bottom-6 right-6 left-6 flex justify-center z-10 animate-bounce-in",children:m.jsx("button",{onClick:Il,disabled:pe,className:"bg-blue-600 text-white px-8 py-3 rounded-full shadow-xl hover:bg-blue-700 hover:scale-105 transition flex items-center gap-2 font-bold text-lg disabled:opacity-70 disabled:scale-100",children:pe?m.jsx(m.Fragment,{children:"Adding..."}):m.jsxs(m.Fragment,{children:[m.jsx(Iu,{})," Thm ",ee.size," hc vin"]})})})]})}),document.body),k&&yo.createPortal(m.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 p-4",onClick:()=>M(!1),children:m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl p-6 h-[80vh] flex flex-col relative",onClick:q=>q.stopPropagation(),children:[m.jsx("button",{onClick:()=>M(!1),className:"absolute top-4 right-4 bg-gray-100 p-2 rounded-full",children:m.jsx(wm,{})}),m.jsx("h2",{className:"text-xl font-bold mb-4",children:"Thm Gio Vin"}),m.jsxs("div",{className:"flex items-center gap-2 p-2 bg-yellow-50 rounded mb-4",children:[m.jsx("input",{type:"checkbox",checked:ei,onChange:q=>cs(q.target.checked),className:"w-5 h-5 text-yellow-600"}),m.jsx("label",{className:"text-sm font-medium",children:"t lm GVCN"})]}),m.jsxs("div",{className:"relative mb-4",children:[m.jsx(vk,{className:"absolute left-3 top-3 text-gray-400"}),m.jsx("input",{className:"w-full pl-10 pr-4 py-2 border rounded dark:bg-slate-700",placeholder:"Tm kim gio vin...",value:z,onChange:q=>$(q.target.value)})]}),m.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2",children:N.filter(q=>_n(q.fullName).includes(_n(z))||_n(q.email).includes(_n(z))).map(q=>m.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 dark:bg-slate-700/50 rounded-lg hover:bg-gray-100 transition",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("img",{src:q.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(q.fullName)}`,onError:xe=>{xe.currentTarget.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(q.fullName)}`},className:"w-10 h-10 rounded-full"}),m.jsxs("div",{children:[m.jsx("p",{className:"font-bold text-sm",children:q.fullName}),m.jsx("p",{className:"text-xs text-gray-500",children:q.email})]})]}),m.jsx("button",{onClick:()=>br(q.uid),disabled:K,className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 disabled:opacity-50 text-sm",children:"Thm"})]},q.uid))})]})}),document.body),X&&Q&&yo.createPortal(m.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 p-4",onClick:()=>G(!1),children:m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-5xl p-6 h-[80vh] flex flex-col relative",onClick:q=>q.stopPropagation(),children:[m.jsx("button",{onClick:()=>G(!1),className:"absolute top-4 right-4 bg-gray-100 dark:bg-slate-700 p-2 rounded-full",children:m.jsx(wm,{})}),m.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[m.jsx(j0,{className:"text-blue-500"})," Lch s lm bi: ",m.jsx("span",{className:"text-blue-600",children:Q.fullName})]}),m.jsx("div",{className:"flex-1 overflow-y-auto",children:ce?m.jsx("div",{className:"p-10 text-center text-gray-500",children:"ang ti lch s..."}):_e.length===0?m.jsx("div",{className:"p-10 text-center text-gray-500 italic",children:"Hc vin ny cha lm bi thi no."}):m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[m.jsx("thead",{className:"bg-gray-50 dark:bg-slate-700 sticky top-0 text-gray-500 uppercase text-xs",children:m.jsxs("tr",{children:[m.jsx("th",{className:"p-4 font-semibold",children:"Loi"}),m.jsx("th",{className:"p-4 font-semibold",children:"Bi thi"}),m.jsx("th",{className:"p-4 font-semibold text-center",children:"im s"}),m.jsx("th",{className:"p-4 font-semibold",children:"Gi np"}),m.jsx("th",{className:"p-4 font-semibold",children:"Ngy np"})]})}),m.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-700",children:_e.map(q=>{const xe=fs(q);return m.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors",children:[m.jsx("td",{className:"p-4 align-middle",children:m.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-bold border ${Ta(xe)}`,children:xe})}),m.jsx("td",{className:"p-4 align-middle font-medium text-gray-900 dark:text-gray-100",children:vr(q)}),m.jsxs("td",{className:"p-4 align-middle text-center",children:[m.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:q.score}),m.jsxs("span",{className:"text-gray-400 text-xs",children:[" / ",q.totalQuestions]})]}),m.jsx("td",{className:"p-4 align-middle text-gray-500",children:new Date(q.completedAt).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})}),m.jsx("td",{className:"p-4 align-middle text-gray-500",children:new Date(q.completedAt).toLocaleDateString("vi-VN")})]},q.id)})})]})})})]})}),document.body),ye&&Ae&&yo.createPortal(m.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 p-4",onClick:()=>ze(!1),children:m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl p-6 relative animate-scale-up max-h-[90vh] overflow-y-auto",onClick:q=>q.stopPropagation(),children:[m.jsx("button",{onClick:()=>{ze(!1),lt(!1)},className:"absolute top-4 right-4 bg-gray-100 dark:bg-slate-700 p-2 rounded-full hover:bg-gray-200 transition",children:m.jsx(wm,{})}),m.jsx("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2 text-blue-700 dark:text-blue-400",children:Ke?m.jsxs(m.Fragment,{children:[m.jsx(ec,{className:"text-yellow-500"})," Cp Nht Thng Tin"]}):m.jsxs(m.Fragment,{children:[m.jsx(Rm,{className:"text-blue-500"})," H S Hc Vin"]})}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"H v Tn"}),m.jsx("input",{className:`w-full p-2.5 border rounded-lg dark:bg-slate-700 ${Ke?"focus:ring-2 focus:ring-blue-500":"bg-gray-50 border-transparent cursor-default"}`,value:Ae.fullName,readOnly:!Ke,onChange:q=>Ze({...Ae,fullName:q.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"Ngy sinh"}),m.jsx("input",{type:"date",className:`w-full p-2.5 border rounded-lg dark:bg-slate-700 ${Ke?"focus:ring-2 focus:ring-blue-500":"bg-gray-50 border-transparent cursor-default"}`,value:Ae.birthDate||"",readOnly:!Ke,onChange:q=>Ze({...Ae,birthDate:q.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"Lp hc (Kha hc)"}),m.jsx("input",{className:"w-full p-2.5 border rounded-lg dark:bg-slate-700 bg-gray-50 border-transparent cursor-default",value:Ae.courseName||Ae.courseCode||"--",readOnly:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"Ngy cp CCCD"}),m.jsx("input",{type:Ke?"date":"text",className:`w-full p-2.5 border rounded-lg dark:bg-slate-700 ${Ke?"focus:ring-2 focus:ring-blue-500":"bg-gray-50 border-transparent cursor-default"}`,value:Ae.cccdDate||"",readOnly:!Ke,onChange:q=>Ze({...Ae,cccdDate:q.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"a ch"}),m.jsx("input",{className:`w-full p-2.5 border rounded-lg dark:bg-slate-700 ${Ke?"focus:ring-2 focus:ring-blue-500":"bg-gray-50 border-transparent cursor-default"}`,value:Ae.address||"",readOnly:!Ke,onChange:q=>Ze({...Ae,address:q.target.value})})]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"S in thoi"}),m.jsx("input",{className:`w-full p-2.5 border rounded-lg dark:bg-slate-700 ${Ke?"focus:ring-2 focus:ring-blue-500":"bg-gray-50 border-transparent cursor-default"}`,value:Ae.phoneNumber||"",readOnly:!Ke,onChange:q=>Ze({...Ae,phoneNumber:q.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"Lp hc (t in)"}),m.jsx("input",{className:`w-full p-2.5 border rounded-lg dark:bg-slate-700 ${Ke?"focus:ring-2 focus:ring-blue-500":"bg-gray-50 border-transparent cursor-default"}`,value:Ae.class||"",placeholder:"V d: Th my k2",readOnly:!Ke,onChange:q=>Ze({...Ae,class:q.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"S CCCD"}),m.jsx("input",{className:`w-full p-2.5 border rounded-lg dark:bg-slate-700 ${Ke?"focus:ring-2 focus:ring-blue-500":"bg-gray-50 border-transparent cursor-default"}`,value:Ae.cccd||"",readOnly:!Ke,onChange:q=>Ze({...Ae,cccd:q.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"Ni cp"}),m.jsx("input",{className:`w-full p-2.5 border rounded-lg dark:bg-slate-700 ${Ke?"focus:ring-2 focus:ring-blue-500":"bg-gray-50 border-transparent cursor-default"}`,value:Ae.cccdPlace||"",readOnly:!Ke,onChange:q=>Ze({...Ae,cccdPlace:q.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-semibold mb-1 text-gray-700 dark:text-gray-300",children:"Vai tr"}),m.jsxs("select",{className:`w-full p-2.5 border rounded-lg dark:bg-slate-700 ${Ke?"focus:ring-2 focus:ring-blue-500":"bg-gray-50 border-transparent cursor-default appearance-none pointer-events-none"}`,value:Ae.role,disabled:!Ke,onChange:q=>Ze({...Ae,role:q.target.value}),children:[m.jsx("option",{value:"hoc_vien",children:"Hc vin"}),m.jsx("option",{value:"student",children:"Hc sinh"}),m.jsx("option",{value:"teacher",children:"Gio vin"})]})]})]})]}),m.jsx("div",{className:"flex justify-end gap-3 mt-8 pt-4 border-t border-gray-100 dark:border-slate-700",children:Ke?m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:()=>lt(!1),className:"px-4 py-2 bg-gray-100 rounded-lg hover:bg-gray-200 text-gray-700 font-medium",children:"Hy b"}),m.jsxs("button",{onClick:qc,disabled:rt,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 shadow-lg font-medium transition-transform active:scale-95",children:[m.jsx(sj,{})," ",rt?"ang lu...":"Lu Thay i"]})]}):m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:()=>ze(!1),className:"px-4 py-2 bg-gray-100 rounded-lg hover:bg-gray-200 text-gray-700 font-medium",children:"ng"}),m.jsxs("button",{onClick:()=>lt(!0),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2 shadow-lg font-medium transition-transform active:scale-95",children:[m.jsx(ec,{})," Chnh sa"]})]})})]})}),document.body),se&&mt&&yo.createPortal(m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] p-4",onClick:()=>Ie(!1),children:m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-6 w-full max-w-md animate-scale-up",onClick:q=>q.stopPropagation(),children:[m.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[m.jsx(aw,{className:"text-yellow-500"})," Gi Thng Bo"]}),m.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["To: ",m.jsx("span",{className:"font-bold text-blue-600",children:mt.name})]}),m.jsxs("form",{onSubmit:Ol,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Loi thng bo"}),m.jsxs("select",{className:"w-full px-4 py-2 border rounded-lg dark:bg-slate-700 outline-none focus:ring-2 focus:ring-blue-500",value:Qt,onChange:q=>$c(q.target.value),children:[m.jsx("option",{value:"system",children:"Bnh thng"}),["admin","lanh_dao","quan_ly"].includes(t.role)&&m.jsxs(m.Fragment,{children:[m.jsx("option",{value:"attention",children:" Ch  (Chy ch vng)"}),m.jsx("option",{value:"special",children:" C BIT (Chy ch )"})]})]})]}),(Qt==="special"||Qt==="attention")&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Hiu lc chy ch n"}),m.jsx("input",{type:"datetime-local",className:"w-full px-4 py-2 border rounded-lg dark:bg-slate-700 outline-none focus:ring-2 focus:ring-blue-500",value:Ss,onChange:q=>us(q.target.value),required:!0}),m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sau thi gian ny, thng bo s ngng chy ngang mn hnh."})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tiu "}),m.jsx("input",{className:"w-full px-4 py-2 border rounded-lg dark:bg-slate-700 focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Tiu ...",value:Ft,onChange:q=>ti(q.target.value),required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tin nhn"}),m.jsx("textarea",{className:"w-full px-4 py-2 border rounded-lg dark:bg-slate-700 h-24 focus:ring-2 focus:ring-blue-500 outline-none resize-none",placeholder:"Ni dung...",value:Kn,onChange:q=>hi(q.target.value),required:!0})]}),m.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[m.jsx("button",{type:"button",onClick:()=>Ie(!1),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Hy"}),m.jsx("button",{type:"submit",disabled:ds,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 shadow-lg font-medium",children:ds?"ang gi...":"Gi Ngay"})]})]})]})}),document.body),m.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[m.jsxs("div",{children:[m.jsxs("button",{onClick:()=>s(null),className:"flex items-center gap-2 text-sm text-gray-500 hover:text-blue-600 mb-2 transition-colors font-medium",children:[m.jsx(Pm,{})," Quay li danh sch"]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-2 rounded-lg",children:m.jsx(fh,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-cyan-500",children:i.name}),m.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-0.5",children:i.description})]})]})]}),m.jsx("div",{className:"flex gap-4",children:m.jsxs("button",{onClick:()=>Ns("class",i.name,i.name),className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-4 py-2 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition flex items-center gap-2 font-medium",children:[m.jsx(aw,{})," Thng bo c lp"]})})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[m.jsx("div",{className:"lg:col-span-1 space-y-6",children:m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-slate-700 p-5 sticky top-20",children:[m.jsxs("div",{className:"flex justify-between items-center border-b pb-3 border-gray-100 dark:border-slate-700 mb-4",children:[m.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2 text-gray-800 dark:text-white",children:[m.jsx(Rm,{className:"text-green-500"})," Gio vin"]}),Ea&&m.jsx("button",{onClick:()=>M(!0),className:"text-green-600 hover:bg-green-50 p-1.5 rounded-full transition-colors",children:m.jsx(Iu,{size:14})})]}),m.jsxs("div",{className:"space-y-3",children:[w.map(q=>m.jsxs("div",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 dark:hover:bg-slate-700/50 rounded-lg transition-colors group relative cursor-pointer",children:[m.jsxs("div",{className:"relative",children:[m.jsx("img",{src:q.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(q.fullName)}`,onError:xe=>{xe.currentTarget.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(q.fullName)}`},className:"w-10 h-10 rounded-full border border-gray-200"}),i.headTeacherId===q.uid&&m.jsx("div",{className:"absolute -top-1 -right-1 bg-yellow-400 text-white rounded-full p-0.5 border-2 border-white",children:m.jsx(e1,{size:10})})]}),m.jsxs("div",{className:"min-w-0 flex-1",children:[m.jsx("p",{className:"font-medium text-sm truncate text-gray-900 dark:text-gray-100",children:q.fullName}),m.jsx("p",{className:"text-[11px] text-gray-400 truncate",children:WDe(q.role)}),i.headTeacherId===q.uid&&m.jsx("span",{className:"text-[10px] font-bold text-yellow-600 bg-yellow-50 px-1.5 py-0.5 rounded border border-yellow-200 mt-1 inline-block",children:"GVCN"})]}),As&&m.jsx("button",{onClick:xe=>{xe.stopPropagation(),Vr(q.uid)},className:"text-gray-400 hover:text-red-500 hover:bg-red-50 p-1.5 rounded opacity-0 group-hover:opacity-100 transition-all absolute right-2",title:"Xa gio vin",children:m.jsx(sl,{size:12})})]},q.uid)),w.length===0&&m.jsx("p",{className:"text-sm text-gray-500 italic text-center py-4",children:"Cha c gio vin."})]})]})}),m.jsx("div",{className:"lg:col-span-3",children:m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-slate-700 p-6 min-h-[500px]",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-100 dark:border-slate-700",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("h3",{className:"font-bold text-xl flex items-center gap-2 text-gray-800 dark:text-white",children:[m.jsx(_h,{className:"text-blue-500"})," Hc vin (",y.length,")"]}),m.jsxs("div",{className:"flex bg-gray-100 dark:bg-slate-700 rounded-lg p-1 ml-4",children:[m.jsx("button",{onClick:()=>Fi("grid"),className:`p-1.5 rounded ${Cn==="grid"?"bg-white dark:bg-slate-600 shadow text-blue-600":"text-gray-500 hover:text-blue-500"}`,title:"Dng li",children:m.jsx(iK,{})}),m.jsx("button",{onClick:()=>Fi("list"),className:`p-1.5 rounded ${Cn==="list"?"bg-white dark:bg-slate-600 shadow text-blue-600":"text-gray-500 hover:text-blue-500"}`,title:"Dng danh sch",children:m.jsx(eK,{})})]})]}),_a&&m.jsxs("button",{onClick:()=>A(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg shadow hover:bg-blue-700 hover:shadow-lg transition flex items-center gap-2 text-sm font-medium",children:[m.jsx(Iu,{})," Thm Hc Vin"]})]}),Cn==="grid"?m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:Ys.map(q=>{const xe=R[q.uid]||{score:"--"};return m.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/30 rounded-xl p-4 border border-gray-100 dark:border-slate-700 hover:shadow-md hover:border-blue-200 dark:hover:border-blue-500/30 transition-all duration-300 group relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-bl from-blue-100 to-transparent -mr-8 -mt-8 rounded-full opacity-50 group-hover:scale-150 transition-transform"}),m.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[m.jsx("div",{className:"relative",children:m.jsx("img",{src:q.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(q.fullName)}&background=random`,onError:Ve=>{Ve.currentTarget.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(q.fullName)}&background=random`},alt:q.fullName,className:"w-14 h-14 rounded-full object-cover border-2 border-white dark:border-slate-600 shadow-sm group-hover:border-blue-500 transition-colors"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("h4",{className:"font-bold text-gray-900 dark:text-gray-100 truncate group-hover:text-blue-600 transition-colors text-base flex items-center gap-1",children:[q.fullName,(q.isVerified||q.courseId)&&m.jsx(lp,{className:"text-green-500 text-xs shrink-0"})]}),m.jsx("p",{className:"text-xs text-gray-500 truncate",children:q.email}),m.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100 dark:border-slate-600 text-xs",children:m.jsxs("div",{className:"flex justify-between text-gray-500",children:[m.jsx("span",{children:"Kt qu mi:"}),m.jsx("span",{className:"font-bold text-teal-600",children:xe.score})]})}),m.jsxs("div",{className:"flex gap-2 mt-3 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[m.jsx("button",{onClick:()=>Ns("user",q.uid,q.fullName),className:"text-yellow-600 bg-yellow-50 hover:bg-yellow-100 p-1.5 rounded text-xs flex items-center gap-1",title:"Nhn tin",children:m.jsx(aw,{})}),m.jsx("button",{onClick:()=>{Ze(q),ze(!0)},className:"text-blue-600 bg-blue-50 hover:bg-blue-100 p-1.5 rounded text-xs flex items-center gap-1",title:"Sa thng tin",children:m.jsx(ec,{})}),_a&&m.jsx("button",{onClick:()=>Ni(q.uid,q.fullName),className:"text-yellow-600 bg-yellow-50 hover:bg-yellow-100 p-1.5 rounded text-xs flex items-center gap-1",title:"Reset Mt khu",children:m.jsx(t1,{})}),m.jsx("button",{onClick:()=>{re(q),G(!0)},className:"text-purple-600 bg-purple-50 hover:bg-purple-100 p-1.5 rounded text-xs flex items-center gap-1",title:"Xem lch s",children:m.jsx(j0,{})}),_a&&m.jsx("button",{onClick:()=>no(q.uid),className:"text-red-600 bg-red-50 hover:bg-red-100 p-1.5 rounded text-xs flex items-center gap-1",title:"Xa",children:m.jsx(sl,{})})]})]})]})]},q.uid)})}):m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full text-left text-sm",children:[m.jsx("thead",{className:"text-xs text-gray-500 uppercase bg-gray-50 dark:bg-slate-700 dark:text-gray-300 select-none",children:m.jsxs("tr",{children:[m.jsx("th",{onClick:()=>Gi("fullName"),className:"px-4 py-3 rounded-l-lg cursor-pointer hover:bg-gray-200 transition",children:m.jsxs("div",{className:"flex items-center",children:["Hc vin ",to("fullName")]})}),m.jsx("th",{onClick:()=>Gi("birthDate"),className:"px-4 py-3 cursor-pointer hover:bg-gray-200 transition",children:m.jsxs("div",{className:"flex items-center",children:["Ngy sinh ",to("birthDate")]})}),m.jsx("th",{onClick:()=>Gi("recentExam"),className:"px-4 py-3 cursor-pointer hover:bg-gray-200 transition",children:m.jsxs("div",{className:"flex items-center",children:["Bi lm gn nht ",to("recentExam")]})}),m.jsx("th",{onClick:()=>Gi("time"),className:"px-4 py-3 cursor-pointer hover:bg-gray-200 transition",children:m.jsxs("div",{className:"flex items-center",children:["Thi gian ",to("time")]})}),m.jsx("th",{onClick:()=>Gi("score"),className:"px-4 py-3 cursor-pointer hover:bg-gray-200 transition",children:m.jsxs("div",{className:"flex items-center",children:["im ",to("score")]})}),m.jsx("th",{className:"px-4 py-3 text-center rounded-r-lg",children:"Hnh ng"})]})}),m.jsxs("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-700",children:[Ys.map(q=>{const xe=R[q.uid]||{type:"--",time:"--",score:"--"};return m.jsxs("tr",{className:"group hover:bg-gray-50 dark:hover:bg-slate-700/30 transition-colors",children:[m.jsxs("td",{className:"px-4 py-3 font-medium text-gray-900 dark:text-white flex items-center gap-3",children:[m.jsx("img",{src:q.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(q.fullName)}`,onError:Ve=>{Ve.currentTarget.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(q.fullName)}`},className:"w-8 h-8 rounded-full border border-gray-200"}),m.jsxs("div",{children:[m.jsxs("p",{className:"flex items-center gap-1",children:[q.fullName,(q.isVerified||q.courseId)&&m.jsx(lp,{className:"text-green-500 text-xs"})]}),m.jsx("p",{className:"text-xs text-gray-500 font-normal",children:q.email})]})]}),m.jsx("td",{className:"px-4 py-3 text-gray-500",children:q.birthDate||"--"}),m.jsx("td",{className:"px-4 py-3",children:m.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold
                                                        ${xe.type.includes("n")?"bg-blue-100 text-blue-700":xe.type.includes("Th")?"bg-purple-100 text-purple-700":xe.type==="--"?"bg-gray-100 text-gray-500":"bg-red-100 text-red-700"}`,children:xe.type})}),m.jsx("td",{className:"px-4 py-3 text-gray-500",children:xe.time}),m.jsx("td",{className:"px-4 py-3 font-bold text-teal-600",children:xe.score}),m.jsx("td",{className:"px-4 py-3 text-center",children:m.jsxs("div",{className:"flex items-center justify-center gap-2 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[m.jsx("button",{onClick:()=>Ns("user",q.uid,q.fullName),className:"text-yellow-500 hover:bg-yellow-50 p-2 rounded-lg transition",title:"Gi tin nhn",children:m.jsx(aw,{})}),m.jsx("button",{onClick:()=>{Ze(q),ze(!0)},className:"text-blue-500 hover:bg-blue-50 p-2 rounded-lg transition",title:"Sa thng tin",children:m.jsx(ec,{})}),_a&&m.jsx("button",{onClick:()=>Ni(q.uid,q.fullName),className:"text-yellow-500 hover:bg-yellow-50 p-2 rounded-lg transition",title:"Reset Mt khu",children:m.jsx(t1,{})}),m.jsx("button",{onClick:()=>{re(q),G(!0)},className:"text-purple-500 hover:bg-purple-50 p-2 rounded-lg transition",title:"Xem lch s thi",children:m.jsx(j0,{})}),_a&&m.jsx("button",{onClick:()=>no(q.uid),className:"text-red-400 hover:text-red-600 hover:bg-red-50 p-2 rounded-lg transition",title:"Xa khi lp",children:m.jsx(sl,{})})]})})]},q.uid)}),y.length===0&&m.jsx("tr",{children:m.jsx("td",{colSpan:6,className:"text-center py-10 text-gray-400 italic",children:"Lp cha c hc vin no."})})]})]})}),Sa>1&&m.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-6 pt-4 border-t border-gray-100 dark:border-slate-700 gap-4",children:[m.jsxs("div",{className:"text-sm text-gray-500",children:["Hin th trang ",m.jsx("span",{className:"font-bold text-gray-900 dark:text-gray-200",children:Pn})," / ",m.jsx("span",{className:"font-semibold",children:Sa}),m.jsx("span",{className:"mx-2",children:"|"}),"Tng ",m.jsx("span",{className:"font-bold text-blue-600",children:kl.length})," kt qu"]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("select",{className:"border border-gray-300 dark:border-slate-600 rounded-md text-sm p-1.5 focus:ring-2 focus:ring-blue-500 outline-none bg-white dark:bg-slate-700 text-gray-700 dark:text-gray-200",value:Hi,onChange:q=>{yr(Number(q.target.value)),qi(1)},children:[m.jsx("option",{value:5,children:"5 / trang"}),m.jsx("option",{value:10,children:"10 / trang"}),m.jsx("option",{value:20,children:"20 / trang"}),m.jsx("option",{value:50,children:"50 / trang"})]}),m.jsxs("div",{className:"flex gap-1",children:[m.jsx("button",{onClick:()=>qi(1),disabled:Pn===1,className:"px-3 py-1.5 border border-gray-300 rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition text-sm",children:"u"}),m.jsx("button",{onClick:()=>qi(q=>Math.max(1,q-1)),disabled:Pn===1,className:"px-3 py-1.5 border border-gray-300 rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition text-sm",children:"Trc"}),m.jsx("button",{onClick:()=>qi(q=>Math.min(Sa,q+1)),disabled:Pn===Sa,className:"px-3 py-1.5 border border-gray-300 rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition text-sm",children:"Sau"}),m.jsx("button",{onClick:()=>qi(Sa),disabled:Pn===Sa,className:"px-3 py-1.5 border border-gray-300 rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition text-sm",children:"Cui"})]})]})]})]})})]})]}):m.jsxs("div",{className:"w-full max-w-6xl mx-auto p-4 animate-slide-in-right relative",children:[xt&&yo.createPortal(m.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 p-4",children:m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md p-6",children:[m.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800 dark:text-white",children:"To Lp Hc Mi"}),m.jsxs("form",{onSubmit:_d,className:"space-y-4",children:[m.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",placeholder:"Tn lp",value:Un,onChange:q=>hr(q.target.value),required:!0}),m.jsxs("div",{className:"mb-2",children:[m.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Hng bng (Mc nh)"}),m.jsxs("select",{className:"w-full p-2 border rounded dark:bg-slate-700",value:Fc,onChange:q=>Cs(q.target.value),children:[m.jsx("option",{value:"",children:"-- Chn hng bng --"}),et.map(q=>m.jsx("option",{value:q.id,children:q.name},q.id))]}),m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hc vin s t ng c gn hng bng ny khi n tp."})]}),m.jsx("textarea",{className:"w-full p-2 border rounded dark:bg-slate-700",placeholder:"M t",value:Ht,onChange:q=>fr(q.target.value)}),m.jsxs("div",{className:"flex justify-end gap-2",children:[m.jsx("button",{type:"button",onClick:()=>Sr(!1),className:"px-4 py-2 bg-gray-200 rounded",children:"Hy"}),m.jsx("button",{type:"submit",className:"px-4 py-2 bg-teal-600 text-white rounded",children:"To"})]})]})]})}),document.body),mr&&sr&&yo.createPortal(m.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 p-4",children:m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md p-6",children:[m.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800 dark:text-white",children:"Chnh Sa Lp Hc"}),m.jsxs("form",{onSubmit:Ed,className:"space-y-4",children:[m.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",placeholder:"Tn lp",value:Cr,onChange:q=>hs(q.target.value),required:!0}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Hng bng mc nh"}),m.jsxs("select",{className:"w-full p-2 border rounded dark:bg-slate-700",value:Ai,onChange:q=>Lr(q.target.value),children:[m.jsx("option",{value:"",children:"-- Khng chn --"}),et.map(q=>m.jsx("option",{value:q.id,children:q.name},q.id))]})]}),m.jsx("textarea",{className:"w-full p-2 border rounded dark:bg-slate-700",placeholder:"M t",value:gr,onChange:q=>Mr(q.target.value)}),m.jsxs("div",{className:"flex justify-end gap-2",children:[m.jsx("button",{type:"button",onClick:()=>pr(!1),className:"px-4 py-2 bg-gray-200 rounded",children:"Hy"}),m.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Lu Thay i"})]})]})]})}),document.body),m.jsxs("div",{className:"flex justify-between items-center mb-8",children:[m.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3 bg-clip-text text-transparent bg-gradient-to-r from-teal-600 to-emerald-600",children:[m.jsx(fh,{className:"text-teal-600"})," Qun l Lp hc"]}),m.jsx("button",{onClick:e,className:"bg-gray-200 dark:bg-slate-700 text-gray-800 dark:text-gray-200 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-slate-600 transition-colors",children:"Back Dashboard"})]}),a?m.jsx("div",{className:"p-20 text-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600 mx-auto"})}):n.length===0?m.jsxs("div",{className:"text-center p-12 bg-white dark:bg-slate-800 rounded-xl border border-gray-200 dark:border-slate-700 shadow-sm",children:[m.jsx(fh,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),m.jsx("h3",{className:"text-xl font-bold text-gray-700 dark:text-gray-200 mb-2",children:"Cha c lp hc no"}),Ks&&m.jsx("button",{onClick:()=>Sr(!0),className:"bg-teal-600 text-white px-6 py-2 rounded-lg hover:bg-teal-700 transition",children:"To Lp Ngay"})]}):m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[Ks&&m.jsxs("div",{onClick:()=>Sr(!0),className:"bg-gradient-to-br from-teal-500 to-emerald-500 rounded-xl shadow-lg p-6 flex flex-col justify-center items-center text-white cursor-pointer hover:shadow-xl hover:scale-[1.02] transition-all duration-300 group",children:[m.jsx("div",{className:"bg-white/20 p-4 rounded-full mb-3 group-hover:bg-white/30 transition-colors",children:m.jsx(Iu,{className:"w-8 h-8"})}),m.jsx("h3",{className:"font-bold text-lg",children:"Thm Lp Mi"})]}),n.map(q=>{var $e;const xe=["admin","quan_ly","lanh_dao"].includes(t.role)||t.role==="giao_vien"&&(q.headTeacherId===t.id||(q.teacherIds||[]).includes(t.id)),Ve=["admin","quan_ly","lanh_dao"].includes(t.role);return m.jsxs("div",{onClick:()=>s(q),className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-200 dark:border-slate-700 overflow-hidden cursor-pointer hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group flex flex-col relative",children:[(xe||Ve)&&m.jsxs("div",{className:"absolute top-2 right-2 z-10 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[xe&&m.jsx("button",{onClick:We=>Hc(q,We),className:"p-2 bg-white/90 text-blue-600 rounded-full shadow-sm hover:bg-blue-50",title:"Sa lp",children:m.jsx(ec,{})}),Ve&&m.jsx("button",{onClick:We=>{We.stopPropagation(),hf(q.id)},className:"p-2 bg-white/90 text-red-600 rounded-full shadow-sm hover:bg-red-50",title:"Xa lp",children:m.jsx(sl,{})})]}),m.jsxs("div",{className:"h-32 bg-gradient-to-r from-blue-600 to-cyan-500 relative flex items-center justify-center overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 bg-black/10 group-hover:bg-transparent transition-colors"}),m.jsx(yk,{className:"text-white/30 w-20 h-20 transform -rotate-12 group-hover:scale-110 transition-transform duration-500"}),m.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/60 to-transparent",children:[m.jsx("h3",{className:"font-bold text-xl text-white truncate",children:q.name}),q.licenseId&&m.jsx("span",{className:"text-xs text-yellow-300 font-mono bg-black/30 px-1 rounded ml-2",children:(($e=et.find(We=>We.id===q.licenseId))==null?void 0:$e.name)||q.licenseId})]})]}),m.jsxs("div",{className:"p-5 flex-1 flex flex-col",children:[m.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-2 mb-4 flex-1",children:q.description||"Cha c m t kha hc."}),m.jsxs("div",{className:"flex justify-between items-center text-sm font-medium pt-4 border-t border-gray-100 dark:border-slate-700",children:[m.jsxs("span",{className:`flex items-center gap-1 ${q.headTeacherId?"text-blue-600 font-bold":"text-gray-500"}`,children:[m.jsx(Rm,{})," GVCN: ",q.headTeacherId?u[q.headTeacherId]||"...":"Cha c"]}),m.jsxs("span",{className:"text-blue-600 group-hover:underline flex items-center gap-1",children:["Chi tit ",m.jsx(Pm,{className:"rotate-180"})]})]})]})]},q.id)})]})]})},WA=[{id:"admin",name:"Qun tr vin"},{id:"lanh_dao",name:"Lnh o"},{id:"quan_ly",name:"Qun l"},{id:"giao_vien",name:"Gio vin"},{id:"hoc_vien",name:"Hc vin"}],YDe=["giao_vien","lanh_dao","quan_ly"],XDe=({userProfile:t,onBack:e,onNavigate:n})=>{var cs;const[r,i]=S.useState(t),[s,a]=S.useState(!1),l=t.role!=="hoc_vien",[u,d]=S.useState([]),[h,p]=S.useState(!1),[y,v]=S.useState(""),[w,_]=S.useState("all"),[E,C]=S.useState("all"),[N,O]=S.useState("all"),[R,D]=S.useState(null),[P,A]=S.useState(!1),[k,M]=S.useState(!1),[V,U]=S.useState(null),[z,$]=S.useState(10),[ne,fe]=S.useState(1),[K,W]=S.useState("createdAt"),[ee,oe]=S.useState("desc"),[pe,B]=S.useState(!1),[X,G]=S.useState(""),[Q,re]=S.useState(""),[_e,Se]=S.useState(""),[ce,Z]=S.useState(!1);S.useEffect(()=>{l&&Ze()},[l]);const ke=S.useMemo(()=>{let se=u;if(w==="staff"?se=se.filter(Ie=>YDe.includes(Ie.role)):w==="hoc_vien"&&(se=se.filter(Ie=>Ie.role==="hoc_vien")),E==="verified"?se=se.filter(Ie=>Ie.isVerified||Ie.courseId):E==="unverified"&&(se=se.filter(Ie=>!Ie.isVerified&&!Ie.courseId)),N!=="all"&&(N==="no_class"?se=se.filter(Ie=>!Ie.courseId&&!Ie.courseName):se=se.filter(Ie=>Ie.courseName===N)),y.trim()){const Ie=y.toLowerCase();se=se.filter(mt=>mt.fullName.toLowerCase().includes(Ie)||mt.email.toLowerCase().includes(Ie)||mt.phoneNumber&&mt.phoneNumber.includes(Ie))}return se.sort((Ie,mt)=>{let gn=Ie[K],Ft=mt[K];return gn||(gn=""),Ft||(Ft=""),gn<Ft?ee==="asc"?-1:1:gn>Ft?ee==="asc"?1:-1:0}),se},[u,w,E,N,y,K,ee]),Le=Math.ceil(ke.length/z),ye=ke.slice((ne-1)*z,ne*z),ze=se=>{K===se?oe(Ie=>Ie==="asc"?"desc":"asc"):(W(se),oe("asc"))},Ae=se=>K!==se?m.jsx(rK,{className:"ml-1 text-gray-300 inline"}):ee==="asc"?m.jsx(nK,{className:"ml-1 text-blue-500 inline"}):m.jsx(tK,{className:"ml-1 text-blue-500 inline"}),Ze=async()=>{p(!0);try{const se=$t(_t(Pe,"users"),Do("createdAt","desc")),mt=(await Mn(se)).docs.map(gn=>{const Ft=gn.data();return{id:gn.id,...Ft,photoURL:Ft.photoURL||id(Ft.photoURL?void 0:Ft.role)}});d(mt)}catch(se){console.error("Error fetching users:",se)}finally{p(!1)}},rt=async se=>{se.preventDefault(),a(!0);try{const Ie=mt=>mt===void 0?null:mt;await jr(Ct(Pe,"users",t.id),{fullName:Ie(r.full_name),full_name:Ie(r.full_name),phoneNumber:Ie(r.phoneNumber),birthDate:Ie(r.birthDate),address:Ie(r.address),cccd:Ie(r.cccd),cccdDate:Ie(r.cccdDate),cccdPlace:Ie(r.cccdPlace),class:Ie(r.class)}),alert("Cp nht thng tin thnh cng!")}catch(Ie){console.error(Ie),alert("Li khi lu thng tin.")}finally{a(!1)}},it=async se=>{if(confirm("Bn c chc chn mun xa ti khon ny?"))try{await K_(Ct(Pe,"users",se)),d(Ie=>Ie.filter(mt=>mt.id!==se))}catch(Ie){console.error(Ie),alert("Li khi xa.")}},Ke=async se=>{if(se.preventDefault(),!!R)try{const Ie=mt=>mt===void 0?null:mt;await jr(Ct(Pe,"users",R.id),{fullName:R.fullName,phoneNumber:Ie(R.phoneNumber),birthDate:Ie(R.birthDate),role:R.role,class:Ie(R.class),cccd:Ie(R.cccd),cccdDate:Ie(R.cccdDate),cccdPlace:Ie(R.cccdPlace),address:Ie(R.address)}),alert(" cp nht!"),A(!1),Ze()}catch(Ie){console.error(Ie),alert("Li khi lu.")}},lt=async(se,Ie)=>{var gn;const mt=prompt(`Nhp mt khu mi cho ${Ie}:`,"123456");if(mt!==null){if(!mt||mt.length<6){alert("Mt khu phi c t nht 6 k t.");return}try{const Ft=await((gn=Ji.currentUser)==null?void 0:gn.getIdToken());if(!Ft){alert("Li xc thc: Khng tm thy token admin.");return}const ti=await fetch("/api/admin/reset-password",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ft}`},body:JSON.stringify({targetUserId:se,newPassword:mt})}),Kn=await ti.json();ti.ok?alert(` i mt khu cho ${Ie} thnh cng!`):alert(`Li: ${Kn.error||"Khng xc nh"}`)}catch(Ft){console.error("Reset password error:",Ft),alert("Li kt ni n server.")}}},xt=se=>{var Ie;return((Ie=WA.find(mt=>mt.id===se))==null?void 0:Ie.name)||se},Sr=async se=>{if(se.preventDefault(),Q!==_e){alert("Mt khu mi khng khp!");return}if(Q.length<6){alert("Mt khu mi phi c t nht 6 k t.");return}Z(!0);try{const Ie=Ji.currentUser;if(!Ie||!Ie.email){alert("Li xc thc.");return}const mt=nf.credential(Ie.email,X);await Vme(Ie,mt),await zme(Ie,Q),alert("i mt khu thnh cng!"),B(!1),G(""),re(""),Se("")}catch(Ie){console.error("Change password error:",Ie),Ie.code==="auth/wrong-password"||Ie.code==="auth/invalid-credential"?alert("Mt khu c khng ng."):Ie.code==="auth/weak-password"?alert("Mt khu qu yu."):alert("Li khi i mt khu: "+Ie.message)}finally{Z(!1)}},[Un,hr]=S.useState(!1),Ht=ue.useRef(null),fr=()=>{var se;(se=Ht.current)==null||se.click()},ei=async se=>{var mt;const Ie=(mt=se.target.files)==null?void 0:mt[0];if(Ie){if(!Ie.type.startsWith("image/")){alert("Vui lng chn file nh!");return}try{hr(!0);const gn=await g1e(Ie,t.id);await jr(Ct(Pe,"users",t.id),{photoURL:gn}),i(Ft=>({...Ft,photoURL:gn})),alert("Ti nh i din thnh cng!")}catch(gn){console.error("Upload failed:",gn),alert("C li xy ra khi ti nh.")}finally{hr(!1),Ht.current&&(Ht.current.value="")}}};return m.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 animate-slide-in-right pb-20",children:[m.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[m.jsx("button",{onClick:e,className:"p-2 bg-gray-100 dark:bg-slate-700 rounded-full hover:bg-gray-200",children:m.jsx(Pm,{})}),m.jsxs("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[m.jsx(n1,{})," Ti khon ca ti"]})]}),m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md p-6 mb-8 border border-gray-100 dark:border-slate-700",children:[m.jsx("h2",{className:"text-lg font-bold mb-4 text-blue-600 border-b pb-2",children:"Thng tin c nhn"}),m.jsxs("div",{className:"flex flex-col items-center mb-6",children:[m.jsxs("div",{className:"relative group cursor-pointer",onClick:fr,children:[m.jsxs("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-gray-200 dark:border-slate-600 shadow-lg relative",children:[m.jsx("img",{src:r.photoURL||id(r.role),alt:"Avatar",className:"w-full h-full object-cover"}),Un&&m.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:m.jsx("div",{className:"w-8 h-8 border-4 border-white border-t-transparent rounded-full animate-spin"})})]}),m.jsx("div",{className:"absolute bottom-1 right-1 bg-white dark:bg-slate-700 p-2 rounded-full shadow-md text-gray-600 dark:text-gray-200 group-hover:bg-blue-500 group-hover:text-white transition-colors",children:m.jsx(mbe,{size:16})}),m.jsx("input",{type:"file",ref:Ht,className:"hidden",accept:"image/*",onChange:ei})]}),m.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Chm  i nh i din"})]}),m.jsxs("form",{onSubmit:rt,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"H v Tn"}),m.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:r.full_name||r.fullName||"",onChange:se=>i({...r,full_name:se.target.value,fullName:se.target.value}),required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Email (Khng i)"}),m.jsx("input",{className:"w-full p-2 border rounded bg-gray-50 dark:bg-slate-900 text-gray-500",value:r.email||"",readOnly:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Ngy sinh"}),m.jsx("input",{type:"date",className:"w-full p-2 border rounded dark:bg-slate-700",value:r.birthDate||"",onChange:se=>i({...r,birthDate:se.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"S in thoi"}),m.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:r.phoneNumber||"",onChange:se=>i({...r,phoneNumber:se.target.value})})]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"S CCCD"}),m.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:r.cccd||"",onChange:se=>i({...r,cccd:se.target.value})})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Ngy cp"}),m.jsx("input",{type:"date",className:"w-full p-2 border rounded dark:bg-slate-700",value:r.cccdDate||"",onChange:se=>i({...r,cccdDate:se.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Ni cp"}),m.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:r.cccdPlace||"",onChange:se=>i({...r,cccdPlace:se.target.value})})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"a ch / Qu qun"}),m.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:r.address||"",onChange:se=>i({...r,address:se.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Lp hc (t in)"}),m.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:r.class||"",onChange:se=>i({...r,class:se.target.value}),placeholder:"VD: Th my K2"})]})]}),m.jsxs("div",{className:"md:col-span-2 flex justify-end mt-4 gap-3",children:[m.jsxs("button",{type:"button",onClick:()=>B(!0),className:"flex items-center gap-2 bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition shadow-md",children:[m.jsx(s7,{})," i mt khu"]}),m.jsxs("button",{type:"submit",disabled:s,className:"flex items-center gap-2 bg-teal-600 text-white px-6 py-2 rounded-lg hover:bg-teal-700 transition shadow-md disabled:opacity-50",children:[m.jsx(sj,{})," ",s?"ang lu...":"Cp nht thng tin"]})]})]})]}),l&&m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md p-6 border border-gray-100 dark:border-slate-700 animate-fade-in-up",children:[m.jsxs("h2",{className:"text-lg font-bold mb-4 text-orange-600 border-b pb-2 flex items-center justify-between",children:[m.jsx("span",{children:"Qun l ngi dng"}),m.jsx("span",{className:"text-xs font-normal text-gray-500 bg-gray-100 rounded-full px-2 py-1",children:"Admin/Lnh o/QL/GV"})]}),m.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[m.jsxs("div",{className:"relative flex-1",children:[m.jsx(vk,{className:"absolute left-3 top-3 text-gray-400"}),m.jsx("input",{className:"w-full pl-10 pr-4 py-2 border rounded-full dark:bg-slate-700 outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Tm hc vin, gio vin...",value:y,onChange:se=>v(se.target.value)})]}),m.jsxs("div",{className:"relative",children:[m.jsxs("select",{className:"appearance-none bg-white dark:bg-slate-700 border hover:border-blue-500 px-4 py-2 pr-8 rounded-full shadow-sm outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer",value:E,onChange:se=>C(se.target.value),children:[m.jsx("option",{value:"all",children:"Tt c trng thi"}),m.jsx("option",{value:"verified",children:" xc thc (Vo lp)"}),m.jsx("option",{value:"unverified",children:"Cha xc thc"})]}),m.jsx(JS,{className:"absolute right-3 top-3 text-gray-400 pointer-events-none text-xs"})]}),m.jsxs("div",{className:"relative",children:[m.jsxs("select",{className:"appearance-none bg-white dark:bg-slate-700 border hover:border-blue-500 px-4 py-2 pr-8 rounded-full shadow-sm outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer max-w-[200px]",value:N,onChange:se=>O(se.target.value),children:[m.jsx("option",{value:"all",children:"Tt c lp hc"}),m.jsx("option",{value:"no_class",children:"Cha vo lp"}),Array.from(new Set(u.map(se=>se.courseName).filter(Boolean))).sort().map(se=>m.jsx("option",{value:se,children:se},se))]}),m.jsx(JS,{className:"absolute right-3 top-3 text-gray-400 pointer-events-none text-xs"})]}),m.jsxs("div",{className:"relative",children:[m.jsxs("select",{className:"appearance-none bg-white dark:bg-slate-700 border hover:border-blue-500 px-4 py-2 pr-8 rounded-full shadow-sm outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer",value:w,onChange:se=>_(se.target.value),children:[m.jsx("option",{value:"all",children:"Tt c vai tr"}),m.jsx("option",{value:"hoc_vien",children:"Hc vin"}),m.jsx("option",{value:"staff",children:"Nhn s (GV/QL/Admin)"})]}),m.jsx(JS,{className:"absolute right-3 top-3 text-gray-400 pointer-events-none text-xs"})]})]}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full text-left border-collapse min-w-[800px]",children:[m.jsx("thead",{className:"bg-gray-50 dark:bg-slate-900 text-sm uppercase text-gray-500 font-bold",children:m.jsxs("tr",{children:[m.jsxs("th",{className:"p-3 border-b dark:border-slate-700 cursor-pointer hover:bg-gray-100 transition",onClick:()=>ze("fullName"),children:["H v Tn ",Ae("fullName")]}),m.jsxs("th",{className:"p-3 border-b dark:border-slate-700 cursor-pointer hover:bg-gray-100 transition",onClick:()=>ze("class"),children:["Lp hc ",Ae("class")]}),m.jsxs("th",{className:"p-3 border-b dark:border-slate-700 cursor-pointer hover:bg-gray-100 transition",onClick:()=>ze("email"),children:["Lin h ",Ae("email")]}),m.jsxs("th",{className:"p-3 border-b dark:border-slate-700 cursor-pointer hover:bg-gray-100 transition",onClick:()=>ze("role"),children:["Vai tr ",Ae("role")]}),m.jsx("th",{className:"p-3 border-b dark:border-slate-700 text-center",children:"Thao tc"})]})}),m.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-700",children:h?m.jsx("tr",{children:m.jsx("td",{colSpan:5,className:"p-4 text-center",children:"ang ti..."})}):ye.length===0?m.jsx("tr",{children:m.jsx("td",{colSpan:5,className:"p-4 text-center italic text-gray-500",children:"Khng tm thy ngi dng."})}):ye.map(se=>m.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50 transition",children:[m.jsx("td",{className:"p-3 font-medium text-gray-900 dark:text-white cursor-pointer group",onClick:()=>{U(se),M(!0)},children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("img",{src:se.photoURL,alt:se.fullName,className:"w-9 h-9 rounded-full object-cover border border-gray-200 dark:border-gray-600 shadow-sm",onError:Ie=>{Ie.currentTarget.src="https://ui-avatars.com/api/?name="+se.fullName}}),m.jsx("div",{className:"flex flex-col",children:m.jsx("div",{className:"flex items-center gap-1",children:se.role==="hoc_vien"&&(se.isVerified||se.courseId)?m.jsxs("span",{className:"flex items-center gap-1 text-blue-600 font-semibold group-hover:underline",children:[se.fullName," ",m.jsx(lp,{className:"text-blue-500 text-xs"})]}):se.role==="giao_vien"?m.jsx("span",{className:"font-bold text-yellow-600 dark:text-yellow-400 group-hover:underline",children:se.fullName}):se.role==="quan_ly"||se.role==="lanh_dao"?m.jsx("span",{className:"font-bold text-red-600 dark:text-red-400 group-hover:underline",children:se.fullName}):se.role==="admin"?m.jsx("span",{className:"font-bold text-purple-600 dark:text-purple-400 group-hover:underline",children:se.fullName}):m.jsx("span",{className:"group-hover:underline",children:se.fullName})})}),m.jsx(ZW,{className:"opacity-0 group-hover:opacity-100 text-gray-400 text-xs ml-auto"})]})}),m.jsx("td",{className:"p-3 text-sm",children:se.courseName||se.courseId?m.jsxs("span",{className:"cursor-pointer text-blue-600 hover:underline hover:text-blue-800 flex items-center gap-1",onClick:Ie=>{Ie.stopPropagation(),n("class_management")},title:"i ti qun l lp",children:[se.courseName||se.courseId," ",m.jsx(obe,{className:"text-xs"})]}):m.jsx("span",{className:"text-gray-400",children:"--"})}),m.jsxs("td",{className:"p-3 text-sm",children:[m.jsx("div",{children:se.email}),m.jsx("div",{className:"text-xs text-gray-500",children:se.phoneNumber})]}),m.jsx("td",{className:"p-3",children:m.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${se.role==="hoc_vien"?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"}`,children:xt(se.role)})}),m.jsxs("td",{className:"p-3 flex justify-center gap-2",children:[m.jsx("button",{onClick:()=>{D(se),A(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Sa thng tin",children:m.jsx(ec,{})}),t.role==="admin"&&m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:()=>lt(se.id,se.fullName),className:"p-2 text-yellow-600 hover:bg-yellow-50 rounded",title:"i mt khu",children:m.jsx(t1,{})}),m.jsx("button",{onClick:()=>it(se.id),className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Xa ti khon",children:m.jsx(sl,{})})]})]})]},se.id))})]})}),Le>1&&m.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-6 pt-4 border-t border-gray-100 dark:border-slate-700 gap-4",children:[m.jsxs("div",{className:"text-sm text-gray-500",children:["Hin th trang ",m.jsx("span",{className:"font-bold text-gray-900 dark:text-gray-200",children:ne})," / ",m.jsx("span",{className:"font-semibold",children:Le}),m.jsx("span",{className:"mx-2",children:"|"}),"Tng ",m.jsx("span",{className:"font-bold text-blue-600",children:ke.length})," kt qu"]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("select",{className:"border border-gray-300 dark:border-slate-600 rounded-md text-sm p-1.5 focus:ring-2 focus:ring-blue-500 outline-none bg-white dark:bg-slate-700 text-gray-700 dark:text-gray-200",value:z,onChange:se=>{$(Number(se.target.value)),fe(1)},children:[m.jsx("option",{value:5,children:"5 / trang"}),m.jsx("option",{value:10,children:"10 / trang"}),m.jsx("option",{value:20,children:"20 / trang"}),m.jsx("option",{value:50,children:"50 / trang"})]}),m.jsxs("div",{className:"flex gap-1",children:[m.jsx("button",{onClick:()=>fe(1),disabled:ne===1,className:"px-3 py-1.5 border border-gray-300 rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition text-sm",children:"u"}),m.jsx("button",{onClick:()=>fe(se=>Math.max(1,se-1)),disabled:ne===1,className:"px-3 py-1.5 border border-gray-300 rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition text-sm",children:"Trc"}),m.jsx("button",{onClick:()=>fe(se=>Math.min(Le,se+1)),disabled:ne===Le,className:"px-3 py-1.5 border border-gray-300 rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition text-sm",children:"Sau"}),m.jsx("button",{onClick:()=>fe(Le),disabled:ne===Le,className:"px-3 py-1.5 border border-gray-300 rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition text-sm",children:"Cui"})]})]})]})]}),P&&R&&m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:()=>A(!1),children:m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl p-6 relative max-h-[90vh] overflow-y-auto",onClick:se=>se.stopPropagation(),children:[m.jsxs("h2",{className:"text-lg font-bold mb-4",children:["Sa ti khon: ",R.fullName]}),m.jsxs("form",{onSubmit:Ke,className:"space-y-4",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold mb-1",children:"H tn"}),m.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:R.fullName,onChange:se=>D({...R,fullName:se.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold mb-1",children:"ST"}),m.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:R.phoneNumber||"",onChange:se=>D({...R,phoneNumber:se.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold mb-1",children:"Ngy sinh"}),m.jsx("input",{type:"date",className:"w-full p-2 border rounded dark:bg-slate-700",value:R.birthDate||"",onChange:se=>D({...R,birthDate:se.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold mb-1",children:"Lp hc (t in)"}),m.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:R.class||"",onChange:se=>D({...R,class:se.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold mb-1",children:"CCCD"}),m.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:R.cccd||"",onChange:se=>D({...R,cccd:se.target.value})})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold mb-1",children:"a ch"}),m.jsx("input",{className:"w-full p-2 border rounded dark:bg-slate-700",value:R.address||"",onChange:se=>D({...R,address:se.target.value})})]}),m.jsxs("div",{className:"col-span-2",children:[m.jsx("label",{className:"block text-sm font-bold mb-1",children:"Vai tr"}),m.jsx("select",{className:"w-full p-2 border rounded dark:bg-slate-700",value:R.role,onChange:se=>D({...R,role:se.target.value}),children:WA.map(se=>m.jsx("option",{value:se.id,children:se.name},se.id))})]})]}),m.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[m.jsx("button",{type:"button",onClick:()=>A(!1),className:"px-4 py-2 bg-gray-200 rounded",children:"Hy"}),m.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Lu"})]})]})]})}),k&&V&&m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:()=>M(!1),children:m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-0 relative overflow-hidden animate-bounce-in",onClick:se=>se.stopPropagation(),children:[m.jsxs("div",{className:"h-32 bg-gradient-to-r from-blue-500 to-cyan-500 relative",children:[m.jsx("button",{onClick:()=>M(!1),className:"absolute top-4 right-4 bg-black/20 text-white p-2 rounded-full hover:bg-black/40",children:m.jsx(wm,{})}),m.jsx("div",{className:"absolute -bottom-10 left-6",children:m.jsx("img",{src:V.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(V.fullName)}`,className:"w-24 h-24 rounded-full border-4 border-white dark:border-slate-800 shadow-md bg-white"})})]}),m.jsxs("div",{className:"pt-12 px-6 pb-6",children:[m.jsxs("div",{className:"flex justify-between items-start mb-4",children:[m.jsxs("div",{children:[m.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[V.fullName,V.isVerified&&m.jsx(lp,{className:"text-blue-500 text-lg"})]}),m.jsx("p",{className:"text-gray-500 text-sm font-medium uppercase tracking-wide",children:((cs=WA.find(se=>se.id===V.role))==null?void 0:cs.name)||V.role})]}),m.jsxs("button",{onClick:()=>{D(V),M(!1),A(!0)},className:"flex items-center gap-2 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 px-4 py-2 rounded-full font-bold hover:bg-blue-200 dark:hover:bg-blue-900/50 transition",children:[m.jsx(ec,{})," Sa"]})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-slate-700/50 rounded-lg",children:[m.jsx("p",{className:"text-xs text-gray-400 uppercase font-bold",children:"Lp hc"}),m.jsx("p",{className:"font-semibold",children:V.courseName||V.class||"Cha c"})]}),m.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-slate-700/50 rounded-lg",children:[m.jsx("p",{className:"text-xs text-gray-400 uppercase font-bold",children:"Ngy sinh"}),m.jsx("p",{className:"font-semibold",children:V.birthDate||"--/--/----"})]}),m.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-slate-700/50 rounded-lg",children:[m.jsx("p",{className:"text-xs text-gray-400 uppercase font-bold",children:"S in thoi"}),m.jsx("p",{className:"font-semibold",children:V.phoneNumber||"---"})]}),m.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-slate-700/50 rounded-lg",children:[m.jsx("p",{className:"text-xs text-gray-400 uppercase font-bold",children:"Email"}),m.jsx("p",{className:"font-semibold text-sm truncate",title:V.email,children:V.email})]})]}),m.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-slate-700/50 rounded-lg",children:[m.jsx("p",{className:"text-xs text-gray-400 uppercase font-bold",children:"a ch"}),m.jsx("p",{className:"font-semibold text-sm",children:V.address||V.cccdPlace||"---"})]}),V.cccd&&m.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-slate-700/50 rounded-lg flex justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs text-gray-400 uppercase font-bold",children:"CCCD"}),m.jsx("p",{className:"font-semibold text-sm",children:V.cccd})]}),V.cccdDate&&m.jsxs("div",{className:"text-right",children:[m.jsx("p",{className:"text-xs text-gray-400 uppercase font-bold",children:"Ngy cp"}),m.jsx("p",{className:"font-semibold text-sm",children:V.cccdDate})]})]})]})]})]})}),pe&&m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:()=>B(!1),children:m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md p-6 relative",onClick:se=>se.stopPropagation(),children:[m.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2 text-gray-800 dark:text-white",children:[m.jsx(s7,{className:"text-blue-600"})," i mt khu"]}),m.jsxs("form",{onSubmit:Sr,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold mb-1 dark:text-gray-300",children:"Mt khu c"}),m.jsx("input",{type:"password",className:"w-full p-2 border rounded dark:bg-slate-700 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",value:X,onChange:se=>G(se.target.value),required:!0,placeholder:"Nhp mt khu hin ti"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold mb-1 dark:text-gray-300",children:"Mt khu mi"}),m.jsx("input",{type:"password",className:"w-full p-2 border rounded dark:bg-slate-700 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",value:Q,onChange:se=>re(se.target.value),required:!0,placeholder:"t nht 6 k t",minLength:6})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold mb-1 dark:text-gray-300",children:"Xc nhn mt khu mi"}),m.jsx("input",{type:"password",className:"w-full p-2 border rounded dark:bg-slate-700 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none",value:_e,onChange:se=>Se(se.target.value),required:!0,placeholder:"Nhp li mt khu mi"})]}),m.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[m.jsx("button",{type:"button",onClick:()=>B(!1),className:"px-4 py-2 bg-gray-200 dark:bg-slate-700 dark:text-white rounded hover:bg-gray-300 dark:hover:bg-slate-600 transition",children:"Hy"}),m.jsx("button",{type:"submit",disabled:ce,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition disabled:opacity-50 flex items-center gap-2",children:ce?"ang x l...":"i mt khu"})]})]})]})})]})};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QDe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),JDe=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Iz=t=>{const e=JDe(t);return e.charAt(0).toUpperCase()+e.slice(1)},cee=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),ZDe=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eMe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tMe=S.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:a,...l},u)=>S.createElement("svg",{ref:u,...eMe,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:cee("lucide",i),...!s&&!ZDe(l)&&{"aria-hidden":"true"},...l},[...a.map(([d,h])=>S.createElement(d,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=(t,e)=>{const n=S.forwardRef(({className:r,...i},s)=>S.createElement(tMe,{ref:s,iconNode:e,className:cee(`lucide-${QDe(Iz(t))}`,`lucide-${t}`,r),...i}));return n.displayName=Iz(t),n};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nMe=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],rMe=ir("book-open",nMe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iMe=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],sMe=ir("check",iMe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aMe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],oMe=ir("chevron-left",aMe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lMe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],cMe=ir("circle-alert",lMe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uMe=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],dMe=ir("circle-check-big",uMe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hMe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],fMe=ir("clock",hMe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mMe=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Oz=ir("graduation-cap",mMe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pMe=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],gMe=ir("history",pMe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yMe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],vMe=ir("image",yMe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bMe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],wMe=ir("info",bMe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xMe=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],_Me=ir("log-out",xMe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EMe=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],TMe=ir("mail",EMe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SMe=[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]],jz=ir("newspaper",SMe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CMe=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],AMe=ir("phone",CMe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NMe=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],kMe=ir("school",NMe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IMe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],OMe=ir("search",IMe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jMe=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Pz=ir("send",jMe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PMe=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],RMe=ir("settings",PMe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DMe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],MMe=ir("smile",DMe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LMe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Rz=ir("trash-2",LMe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VMe=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],UMe=ir("triangle-alert",VMe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BMe=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],zMe=ir("user-cog",BMe);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Me=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Dz=ir("video",$Me);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FMe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],HMe=ir("x",FMe);/*!
* sweetalert2 v11.26.4
* Released under the MIT License.
*/function uee(t,e,n){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function qMe(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Mz(t,e){return t.get(uee(t,e))}function GMe(t,e,n){qMe(t,e),e.set(t,n)}function WMe(t,e,n){return t.set(uee(t,e),n),n}const KMe=100,at={},YMe=()=>{at.previousActiveElement instanceof HTMLElement?(at.previousActiveElement.focus(),at.previousActiveElement=null):document.body&&document.body.focus()},XMe=t=>new Promise(e=>{if(!t)return e();const n=window.scrollX,r=window.scrollY;at.restoreFocusTimeout=setTimeout(()=>{YMe(),e()},KMe),window.scrollTo(n,r)}),dee="swal2-",QMe=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],ve=QMe.reduce((t,e)=>(t[e]=dee+e,t),{}),JMe=["success","warning","info","question","error"],n_=JMe.reduce((t,e)=>(t[e]=dee+e,t),{}),hee="SweetAlert2:",mP=t=>t.charAt(0).toUpperCase()+t.slice(1),_s=t=>{console.warn(`${hee} ${typeof t=="object"?t.join(" "):t}`)},lf=t=>{console.error(`${hee} ${t}`)},Lz=[],ZMe=t=>{Lz.includes(t)||(Lz.push(t),_s(t))},fee=(t,e=null)=>{ZMe(`"${t}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},rE=t=>typeof t=="function"?t():t,pP=t=>t&&typeof t.toPromise=="function",Ev=t=>pP(t)?t.toPromise():Promise.resolve(t),gP=t=>t&&Promise.resolve(t)===t,Es=()=>document.body.querySelector(`.${ve.container}`),Tv=t=>{const e=Es();return e?e.querySelector(t):null},ba=t=>Tv(`.${t}`),Kt=()=>ba(ve.popup),Qp=()=>ba(ve.icon),e8e=()=>ba(ve["icon-content"]),mee=()=>ba(ve.title),yP=()=>ba(ve["html-container"]),pee=()=>ba(ve.image),vP=()=>ba(ve["progress-steps"]),iE=()=>ba(ve["validation-message"]),El=()=>Tv(`.${ve.actions} .${ve.confirm}`),Jp=()=>Tv(`.${ve.actions} .${ve.cancel}`),cf=()=>Tv(`.${ve.actions} .${ve.deny}`),t8e=()=>ba(ve["input-label"]),Zp=()=>Tv(`.${ve.loader}`),Sv=()=>ba(ve.actions),gee=()=>ba(ve.footer),sE=()=>ba(ve["timer-progress-bar"]),bP=()=>ba(ve.close),n8e=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,wP=()=>{const t=Kt();if(!t)return[];const e=t.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(e).sort((s,a)=>{const l=parseInt(s.getAttribute("tabindex")||"0"),u=parseInt(a.getAttribute("tabindex")||"0");return l>u?1:l<u?-1:0}),r=t.querySelectorAll(n8e),i=Array.from(r).filter(s=>s.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(i))].filter(s=>Fs(s))},xP=()=>gc(document.body,ve.shown)&&!gc(document.body,ve["toast-shown"])&&!gc(document.body,ve["no-backdrop"]),aE=()=>{const t=Kt();return t?gc(t,ve.toast):!1},r8e=()=>{const t=Kt();return t?t.hasAttribute("data-loading"):!1},wa=(t,e)=>{if(t.textContent="",e){const r=new DOMParser().parseFromString(e,"text/html"),i=r.querySelector("head");i&&Array.from(i.childNodes).forEach(a=>{t.appendChild(a)});const s=r.querySelector("body");s&&Array.from(s.childNodes).forEach(a=>{a instanceof HTMLVideoElement||a instanceof HTMLAudioElement?t.appendChild(a.cloneNode(!0)):t.appendChild(a)})}},gc=(t,e)=>{if(!e)return!1;const n=e.split(/\s+/);for(let r=0;r<n.length;r++)if(!t.classList.contains(n[r]))return!1;return!0},i8e=(t,e)=>{Array.from(t.classList).forEach(n=>{!Object.values(ve).includes(n)&&!Object.values(n_).includes(n)&&!Object.values(e.showClass||{}).includes(n)&&t.classList.remove(n)})},ya=(t,e,n)=>{if(i8e(t,e),!e.customClass)return;const r=e.customClass[n];if(r){if(typeof r!="string"&&!r.forEach){_s(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof r}"`);return}nn(t,r)}},oE=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return t.querySelector(`.${ve.popup} > .${ve[e]}`);case"checkbox":return t.querySelector(`.${ve.popup} > .${ve.checkbox} input`);case"radio":return t.querySelector(`.${ve.popup} > .${ve.radio} input:checked`)||t.querySelector(`.${ve.popup} > .${ve.radio} input:first-child`);case"range":return t.querySelector(`.${ve.popup} > .${ve.range} input`);default:return t.querySelector(`.${ve.popup} > .${ve.input}`)}},yee=t=>{if(t.focus(),t.type!=="file"){const e=t.value;t.value="",t.value=e}},vee=(t,e,n)=>{!t||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(r=>{Array.isArray(t)?t.forEach(i=>{n?i.classList.add(r):i.classList.remove(r)}):n?t.classList.add(r):t.classList.remove(r)}))},nn=(t,e)=>{vee(t,e,!0)},Za=(t,e)=>{vee(t,e,!1)},Mu=(t,e)=>{const n=Array.from(t.children);for(let r=0;r<n.length;r++){const i=n[r];if(i instanceof HTMLElement&&gc(i,e))return i}},Ah=(t,e,n)=>{n===`${parseInt(`${n}`)}`&&(n=parseInt(n)),n||parseInt(`${n}`)===0?t.style.setProperty(e,typeof n=="number"?`${n}px`:n):t.style.removeProperty(e)},Ti=(t,e="flex")=>{t&&(t.style.display=e)},ls=t=>{t&&(t.style.display="none")},_P=(t,e="block")=>{t&&new MutationObserver(()=>{Cv(t,t.innerHTML,e)}).observe(t,{childList:!0,subtree:!0})},Vz=(t,e,n,r)=>{const i=t.querySelector(e);i&&i.style.setProperty(n,r)},Cv=(t,e,n="flex")=>{e?Ti(t,n):ls(t)},Fs=t=>!!(t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),s8e=()=>!Fs(El())&&!Fs(cf())&&!Fs(Jp()),PI=t=>t.scrollHeight>t.clientHeight,a8e=(t,e)=>{let n=t;for(;n&&n!==e;){if(PI(n))return!0;n=n.parentElement}return!1},bee=t=>{const e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("animation-duration")||"0"),r=parseFloat(e.getPropertyValue("transition-duration")||"0");return n>0||r>0},EP=(t,e=!1)=>{const n=sE();n&&Fs(n)&&(e&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${t/1e3}s linear`,n.style.width="0%"},10))},o8e=()=>{const t=sE();if(!t)return;const e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const n=parseInt(window.getComputedStyle(t).width),r=e/n*100;t.style.width=`${r}%`},l8e=()=>typeof window>"u"||typeof document>"u",c8e=`
 <div aria-labelledby="${ve.title}" aria-describedby="${ve["html-container"]}" class="${ve.popup}" tabindex="-1">
   <button type="button" class="${ve.close}"></button>
   <ul class="${ve["progress-steps"]}"></ul>
   <div class="${ve.icon}"></div>
   <img class="${ve.image}" />
   <h2 class="${ve.title}" id="${ve.title}"></h2>
   <div class="${ve["html-container"]}" id="${ve["html-container"]}"></div>
   <input class="${ve.input}" id="${ve.input}" />
   <input type="file" class="${ve.file}" />
   <div class="${ve.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${ve.select}" id="${ve.select}"></select>
   <div class="${ve.radio}"></div>
   <label class="${ve.checkbox}">
     <input type="checkbox" id="${ve.checkbox}" />
     <span class="${ve.label}"></span>
   </label>
   <textarea class="${ve.textarea}" id="${ve.textarea}"></textarea>
   <div class="${ve["validation-message"]}" id="${ve["validation-message"]}"></div>
   <div class="${ve.actions}">
     <div class="${ve.loader}"></div>
     <button type="button" class="${ve.confirm}"></button>
     <button type="button" class="${ve.deny}"></button>
     <button type="button" class="${ve.cancel}"></button>
   </div>
   <div class="${ve.footer}"></div>
   <div class="${ve["timer-progress-bar-container"]}">
     <div class="${ve["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),u8e=()=>{const t=Es();return t?(t.remove(),Za([document.documentElement,document.body],[ve["no-backdrop"],ve["toast-shown"],ve["has-column"]]),!0):!1},Qd=()=>{at.currentInstance.resetValidationMessage()},d8e=()=>{const t=Kt(),e=Mu(t,ve.input),n=Mu(t,ve.file),r=t.querySelector(`.${ve.range} input`),i=t.querySelector(`.${ve.range} output`),s=Mu(t,ve.select),a=t.querySelector(`.${ve.checkbox} input`),l=Mu(t,ve.textarea);e.oninput=Qd,n.onchange=Qd,s.onchange=Qd,a.onchange=Qd,l.oninput=Qd,r.oninput=()=>{Qd(),i.value=r.value},r.onchange=()=>{Qd(),i.value=r.value}},h8e=t=>typeof t=="string"?document.querySelector(t):t,f8e=t=>{const e=Kt();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")},m8e=t=>{window.getComputedStyle(t).direction==="rtl"&&(nn(Es(),ve.rtl),at.isRTL=!0)},p8e=t=>{const e=u8e();if(l8e()){lf("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=ve.container,e&&nn(n,ve["no-transition"]),wa(n,c8e),n.dataset.swal2Theme=t.theme;const r=h8e(t.target);r.appendChild(n),t.topLayer&&(n.setAttribute("popover",""),n.showPopover()),f8e(t),m8e(r),d8e()},TP=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):typeof t=="object"?g8e(t,e):t&&wa(e,t)},g8e=(t,e)=>{t.jquery?y8e(e,t):wa(e,t.toString())},y8e=(t,e)=>{if(t.textContent="",0 in e)for(let n=0;n in e;n++)t.appendChild(e[n].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},v8e=(t,e)=>{const n=Sv(),r=Zp();!n||!r||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?ls(n):Ti(n),ya(n,e,"actions"),b8e(n,r,e),wa(r,e.loaderHtml||""),ya(r,e,"loader"))};function b8e(t,e,n){const r=El(),i=cf(),s=Jp();!r||!i||!s||(YA(r,"confirm",n),YA(i,"deny",n),YA(s,"cancel",n),w8e(r,i,s,n),n.reverseButtons&&(n.toast?(t.insertBefore(s,r),t.insertBefore(i,r)):(t.insertBefore(s,e),t.insertBefore(i,e),t.insertBefore(r,e))))}function w8e(t,e,n,r){if(!r.buttonsStyling){Za([t,e,n],ve.styled);return}nn([t,e,n],ve.styled),r.confirmButtonColor&&t.style.setProperty("--swal2-confirm-button-background-color",r.confirmButtonColor),r.denyButtonColor&&e.style.setProperty("--swal2-deny-button-background-color",r.denyButtonColor),r.cancelButtonColor&&n.style.setProperty("--swal2-cancel-button-background-color",r.cancelButtonColor),KA(t),KA(e),KA(n)}function KA(t){const e=window.getComputedStyle(t);if(e.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const n=e.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");t.style.setProperty("--swal2-action-button-focus-box-shadow",e.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${n}`))}function YA(t,e,n){const r=mP(e);Cv(t,n[`show${r}Button`],"inline-block"),wa(t,n[`${e}ButtonText`]||""),t.setAttribute("aria-label",n[`${e}ButtonAriaLabel`]||""),t.className=ve[e],ya(t,n,`${e}Button`)}const x8e=(t,e)=>{const n=bP();n&&(wa(n,e.closeButtonHtml||""),ya(n,e,"closeButton"),Cv(n,e.showCloseButton),n.setAttribute("aria-label",e.closeButtonAriaLabel||""))},_8e=(t,e)=>{const n=Es();n&&(E8e(n,e.backdrop),T8e(n,e.position),S8e(n,e.grow),ya(n,e,"container"))};function E8e(t,e){typeof e=="string"?t.style.background=e:e||nn([document.documentElement,document.body],ve["no-backdrop"])}function T8e(t,e){e&&(e in ve?nn(t,ve[e]):(_s('The "position" parameter is not valid, defaulting to "center"'),nn(t,ve.center)))}function S8e(t,e){e&&nn(t,ve[`grow-${e}`])}var Ln={innerParams:new WeakMap,domCache:new WeakMap};const C8e=["input","file","range","select","radio","checkbox","textarea"],A8e=(t,e)=>{const n=Kt();if(!n)return;const r=Ln.innerParams.get(t),i=!r||e.input!==r.input;C8e.forEach(s=>{const a=Mu(n,ve[s]);a&&(I8e(s,e.inputAttributes),a.className=ve[s],i&&ls(a))}),e.input&&(i&&N8e(e),O8e(e))},N8e=t=>{if(!t.input)return;if(!Or[t.input]){lf(`Unexpected type of input! Expected ${Object.keys(Or).join(" | ")}, got "${t.input}"`);return}const e=wee(t.input);if(!e)return;const n=Or[t.input](e,t);Ti(e),t.inputAutoFocus&&setTimeout(()=>{yee(n)})},k8e=t=>{for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;["id","type","value","style"].includes(n)||t.removeAttribute(n)}},I8e=(t,e)=>{const n=Kt();if(!n)return;const r=oE(n,t);if(r){k8e(r);for(const i in e)r.setAttribute(i,e[i])}},O8e=t=>{if(!t.input)return;const e=wee(t.input);e&&ya(e,t,"input")},SP=(t,e)=>{!t.placeholder&&e.inputPlaceholder&&(t.placeholder=e.inputPlaceholder)},Av=(t,e,n)=>{if(n.inputLabel){const r=document.createElement("label"),i=ve["input-label"];r.setAttribute("for",t.id),r.className=i,typeof n.customClass=="object"&&nn(r,n.customClass.inputLabel),r.innerText=n.inputLabel,e.insertAdjacentElement("beforebegin",r)}},wee=t=>{const e=Kt();if(e)return Mu(e,ve[t]||ve.input)},r_=(t,e)=>{["string","number"].includes(typeof e)?t.value=`${e}`:gP(e)||_s(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},Or={};Or.text=Or.email=Or.password=Or.number=Or.tel=Or.url=Or.search=Or.date=Or["datetime-local"]=Or.time=Or.week=Or.month=(t,e)=>(r_(t,e.inputValue),Av(t,t,e),SP(t,e),t.type=e.input,t);Or.file=(t,e)=>(Av(t,t,e),SP(t,e),t);Or.range=(t,e)=>{const n=t.querySelector("input"),r=t.querySelector("output");return r_(n,e.inputValue),n.type=e.input,r_(r,e.inputValue),Av(n,t,e),t};Or.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const n=document.createElement("option");wa(n,e.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,t.appendChild(n)}return Av(t,t,e),t};Or.radio=t=>(t.textContent="",t);Or.checkbox=(t,e)=>{const n=oE(Kt(),"checkbox");n.value="1",n.checked=!!e.inputValue;const r=t.querySelector("span");return wa(r,e.inputPlaceholder||e.inputLabel),n};Or.textarea=(t,e)=>{r_(t,e.inputValue),SP(t,e),Av(t,t,e);const n=r=>parseInt(window.getComputedStyle(r).marginLeft)+parseInt(window.getComputedStyle(r).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const r=parseInt(window.getComputedStyle(Kt()).width),i=()=>{if(!document.body.contains(t))return;const s=t.offsetWidth+n(t);s>r?Kt().style.width=`${s}px`:Ah(Kt(),"width",e.width)};new MutationObserver(i).observe(t,{attributes:!0,attributeFilter:["style"]})}}),t};const j8e=(t,e)=>{const n=yP();n&&(_P(n),ya(n,e,"htmlContainer"),e.html?(TP(e.html,n),Ti(n,"block")):e.text?(n.textContent=e.text,Ti(n,"block")):ls(n),A8e(t,e))},P8e=(t,e)=>{const n=gee();n&&(_P(n),Cv(n,!!e.footer,"block"),e.footer&&TP(e.footer,n),ya(n,e,"footer"))},R8e=(t,e)=>{const n=Ln.innerParams.get(t),r=Qp();if(!r)return;if(n&&e.icon===n.icon){Bz(r,e),Uz(r,e);return}if(!e.icon&&!e.iconHtml){ls(r);return}if(e.icon&&Object.keys(n_).indexOf(e.icon)===-1){lf(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),ls(r);return}Ti(r),Bz(r,e),Uz(r,e),nn(r,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",xee)},Uz=(t,e)=>{for(const[n,r]of Object.entries(n_))e.icon!==n&&Za(t,r);nn(t,e.icon&&n_[e.icon]),L8e(t,e),xee(),ya(t,e,"icon")},xee=()=>{const t=Kt();if(!t)return;const e=window.getComputedStyle(t).getPropertyValue("background-color"),n=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let r=0;r<n.length;r++)n[r].style.backgroundColor=e},D8e=t=>`
  ${t.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${t.animation?'<div class="swal2-success-fix"></div>':""}
  ${t.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,M8e=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Bz=(t,e)=>{if(!e.icon&&!e.iconHtml)return;let n=t.innerHTML,r="";e.iconHtml?r=zz(e.iconHtml):e.icon==="success"?(r=D8e(e),n=n.replace(/ style=".*?"/g,"")):e.icon==="error"?r=M8e:e.icon&&(r=zz({question:"?",warning:"!",info:"i"}[e.icon])),n.trim()!==r.trim()&&wa(t,r)},L8e=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Vz(t,n,"background-color",e.iconColor);Vz(t,".swal2-success-ring","border-color",e.iconColor)}},zz=t=>`<div class="${ve["icon-content"]}">${t}</div>`,V8e=(t,e)=>{const n=pee();if(n){if(!e.imageUrl){ls(n);return}Ti(n,""),n.setAttribute("src",e.imageUrl),n.setAttribute("alt",e.imageAlt||""),Ah(n,"width",e.imageWidth),Ah(n,"height",e.imageHeight),n.className=ve.image,ya(n,e,"image")}};let CP=!1,_ee=0,Eee=0,Tee=0,See=0;const U8e=t=>{t.addEventListener("mousedown",i_),document.body.addEventListener("mousemove",s_),t.addEventListener("mouseup",a_),t.addEventListener("touchstart",i_),document.body.addEventListener("touchmove",s_),t.addEventListener("touchend",a_)},B8e=t=>{t.removeEventListener("mousedown",i_),document.body.removeEventListener("mousemove",s_),t.removeEventListener("mouseup",a_),t.removeEventListener("touchstart",i_),document.body.removeEventListener("touchmove",s_),t.removeEventListener("touchend",a_)},i_=t=>{const e=Kt();if(t.target===e||Qp().contains(t.target)){CP=!0;const n=Cee(t);_ee=n.clientX,Eee=n.clientY,Tee=parseInt(e.style.insetInlineStart)||0,See=parseInt(e.style.insetBlockStart)||0,nn(e,"swal2-dragging")}},s_=t=>{const e=Kt();if(CP){let{clientX:n,clientY:r}=Cee(t);const i=n-_ee;e.style.insetInlineStart=`${Tee+(at.isRTL?-i:i)}px`,e.style.insetBlockStart=`${See+(r-Eee)}px`}},a_=()=>{const t=Kt();CP=!1,Za(t,"swal2-dragging")},Cee=t=>{let e=0,n=0;return t.type.startsWith("mouse")?(e=t.clientX,n=t.clientY):t.type.startsWith("touch")&&(e=t.touches[0].clientX,n=t.touches[0].clientY),{clientX:e,clientY:n}},z8e=(t,e)=>{const n=Es(),r=Kt();if(!(!n||!r)){if(e.toast){Ah(n,"width",e.width),r.style.width="100%";const i=Zp();i&&r.insertBefore(i,Qp())}else Ah(r,"width",e.width);Ah(r,"padding",e.padding),e.color&&(r.style.color=e.color),e.background&&(r.style.background=e.background),ls(iE()),$8e(r,e),e.draggable&&!e.toast?(nn(r,ve.draggable),U8e(r)):(Za(r,ve.draggable),B8e(r))}},$8e=(t,e)=>{const n=e.showClass||{};t.className=`${ve.popup} ${Fs(t)?n.popup:""}`,e.toast?(nn([document.documentElement,document.body],ve["toast-shown"]),nn(t,ve.toast)):nn(t,ve.modal),ya(t,e,"popup"),typeof e.customClass=="string"&&nn(t,e.customClass),e.icon&&nn(t,ve[`icon-${e.icon}`])},F8e=(t,e)=>{const n=vP();if(!n)return;const{progressSteps:r,currentProgressStep:i}=e;if(!r||r.length===0||i===void 0){ls(n);return}Ti(n),n.textContent="",i>=r.length&&_s("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach((s,a)=>{const l=H8e(s);if(n.appendChild(l),a===i&&nn(l,ve["active-progress-step"]),a!==r.length-1){const u=q8e(e);n.appendChild(u)}})},H8e=t=>{const e=document.createElement("li");return nn(e,ve["progress-step"]),wa(e,t),e},q8e=t=>{const e=document.createElement("li");return nn(e,ve["progress-step-line"]),t.progressStepsDistance&&Ah(e,"width",t.progressStepsDistance),e},G8e=(t,e)=>{const n=mee();n&&(_P(n),Cv(n,!!(e.title||e.titleText),"block"),e.title&&TP(e.title,n),e.titleText&&(n.innerText=e.titleText),ya(n,e,"title"))},Aee=(t,e)=>{z8e(t,e),_8e(t,e),F8e(t,e),R8e(t,e),V8e(t,e),G8e(t,e),x8e(t,e),j8e(t,e),v8e(t,e),P8e(t,e);const n=Kt();typeof e.didRender=="function"&&n&&e.didRender(n),at.eventEmitter.emit("didRender",n)},W8e=()=>Fs(Kt()),Nee=()=>{var t;return(t=El())===null||t===void 0?void 0:t.click()},K8e=()=>{var t;return(t=cf())===null||t===void 0?void 0:t.click()},Y8e=()=>{var t;return(t=Jp())===null||t===void 0?void 0:t.click()},eg=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),kee=t=>{t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1)},X8e=(t,e,n)=>{kee(t),e.toast||(t.keydownHandler=r=>J8e(e,r,n),t.keydownTarget=e.keydownListenerCapture?window:Kt(),t.keydownListenerCapture=e.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)},RI=(t,e)=>{var n;const r=wP();if(r.length){t=t+e,t===-2&&(t=r.length-1),t===r.length?t=0:t===-1&&(t=r.length-1),r[t].focus();return}(n=Kt())===null||n===void 0||n.focus()},Iee=["ArrowRight","ArrowDown"],Q8e=["ArrowLeft","ArrowUp"],J8e=(t,e,n)=>{t&&(e.isComposing||e.keyCode===229||(t.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?Z8e(e,t):e.key==="Tab"?eLe(e):[...Iee,...Q8e].includes(e.key)?tLe(e.key):e.key==="Escape"&&nLe(e,t,n)))},Z8e=(t,e)=>{if(!rE(e.allowEnterKey))return;const n=oE(Kt(),e.input);if(t.target&&n&&t.target instanceof HTMLElement&&t.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(e.input))return;Nee(),t.preventDefault()}},eLe=t=>{const e=t.target,n=wP();let r=-1;for(let i=0;i<n.length;i++)if(e===n[i]){r=i;break}t.shiftKey?RI(r,-1):RI(r,1),t.stopPropagation(),t.preventDefault()},tLe=t=>{const e=Sv(),n=El(),r=cf(),i=Jp();if(!e||!n||!r||!i)return;const s=[n,r,i];if(document.activeElement instanceof HTMLElement&&!s.includes(document.activeElement))return;const a=Iee.includes(t)?"nextElementSibling":"previousElementSibling";let l=document.activeElement;if(l){for(let u=0;u<e.children.length;u++){if(l=l[a],!l)return;if(l instanceof HTMLButtonElement&&Fs(l))break}l instanceof HTMLButtonElement&&l.focus()}},nLe=(t,e,n)=>{t.preventDefault(),rE(e.allowEscapeKey)&&n(eg.esc)};var _p={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const rLe=()=>{const t=Es();Array.from(document.body.children).forEach(n=>{n.contains(t)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},Oee=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},jee=typeof window<"u"&&!!window.GestureEvent,iLe=()=>{if(jee&&!gc(document.body,ve.iosfix)){const t=document.body.scrollTop;document.body.style.top=`${t*-1}px`,nn(document.body,ve.iosfix),sLe()}},sLe=()=>{const t=Es();if(!t)return;let e;t.ontouchstart=n=>{e=aLe(n)},t.ontouchmove=n=>{e&&(n.preventDefault(),n.stopPropagation())}},aLe=t=>{const e=t.target,n=Es(),r=yP();return!n||!r||oLe(t)||lLe(t)?!1:e===n||!PI(n)&&e instanceof HTMLElement&&!a8e(e,r)&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(PI(r)&&r.contains(e))},oLe=t=>t.touches&&t.touches.length&&t.touches[0].touchType==="stylus",lLe=t=>t.touches&&t.touches.length>1,cLe=()=>{if(gc(document.body,ve.iosfix)){const t=parseInt(document.body.style.top,10);Za(document.body,ve.iosfix),document.body.style.top="",document.body.scrollTop=t*-1}},uLe=()=>{const t=document.createElement("div");t.className=ve["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e};let Um=null;const dLe=t=>{Um===null&&(document.body.scrollHeight>window.innerHeight||t==="scroll")&&(Um=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Um+uLe()}px`)},hLe=()=>{Um!==null&&(document.body.style.paddingRight=`${Um}px`,Um=null)};function Pee(t,e,n,r){aE()?$z(t,r):(XMe(n).then(()=>$z(t,r)),kee(at)),jee?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),xP()&&(hLe(),cLe(),Oee()),fLe()}function fLe(){Za([document.documentElement,document.body],[ve.shown,ve["height-auto"],ve["no-backdrop"],ve["toast-shown"]])}function Lu(t){t=pLe(t);const e=_p.swalPromiseResolve.get(this),n=mLe(this);this.isAwaitingPromise?t.isDismissed||(Nv(this),e(t)):n&&e(t)}const mLe=t=>{const e=Kt();if(!e)return!1;const n=Ln.innerParams.get(t);if(!n||gc(e,n.hideClass.popup))return!1;Za(e,n.showClass.popup),nn(e,n.hideClass.popup);const r=Es();return Za(r,n.showClass.backdrop),nn(r,n.hideClass.backdrop),gLe(t,e,n),!0};function Ree(t){const e=_p.swalPromiseReject.get(this);Nv(this),e&&e(t)}const Nv=t=>{t.isAwaitingPromise&&(delete t.isAwaitingPromise,Ln.innerParams.get(t)||t._destroy())},pLe=t=>typeof t>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),gLe=(t,e,n)=>{var r;const i=Es(),s=bee(e);typeof n.willClose=="function"&&n.willClose(e),(r=at.eventEmitter)===null||r===void 0||r.emit("willClose",e),s?yLe(t,e,i,n.returnFocus,n.didClose):Pee(t,i,n.returnFocus,n.didClose)},yLe=(t,e,n,r,i)=>{at.swalCloseEventFinishedCallback=Pee.bind(null,t,n,r,i);const s=function(a){if(a.target===e){var l;(l=at.swalCloseEventFinishedCallback)===null||l===void 0||l.call(at),delete at.swalCloseEventFinishedCallback,e.removeEventListener("animationend",s),e.removeEventListener("transitionend",s)}};e.addEventListener("animationend",s),e.addEventListener("transitionend",s)},$z=(t,e)=>{setTimeout(()=>{var n;typeof e=="function"&&e.bind(t.params)(),(n=at.eventEmitter)===null||n===void 0||n.emit("didClose"),t._destroy&&t._destroy()})},Ep=t=>{let e=Kt();if(e||new rl,e=Kt(),!e)return;const n=Zp();aE()?ls(Qp()):vLe(e,t),Ti(n),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},vLe=(t,e)=>{const n=Sv(),r=Zp();!n||!r||(!e&&Fs(El())&&(e=El()),Ti(n),e&&(ls(e),r.setAttribute("data-button-to-replace",e.className),n.insertBefore(r,e)),nn([t,n],ve.loading))},bLe=(t,e)=>{e.input==="select"||e.input==="radio"?TLe(t,e):["text","email","number","tel","textarea"].some(n=>n===e.input)&&(pP(e.inputValue)||gP(e.inputValue))&&(Ep(El()),SLe(t,e))},wLe=(t,e)=>{const n=t.getInput();if(!n)return null;switch(e.input){case"checkbox":return xLe(n);case"radio":return _Le(n);case"file":return ELe(n);default:return e.inputAutoTrim?n.value.trim():n.value}},xLe=t=>t.checked?1:0,_Le=t=>t.checked?t.value:null,ELe=t=>t.files&&t.files.length?t.getAttribute("multiple")!==null?t.files:t.files[0]:null,TLe=(t,e)=>{const n=Kt();if(!n)return;const r=i=>{e.input==="select"?CLe(n,o_(i),e):e.input==="radio"&&ALe(n,o_(i),e)};pP(e.inputOptions)||gP(e.inputOptions)?(Ep(El()),Ev(e.inputOptions).then(i=>{t.hideLoading(),r(i)})):typeof e.inputOptions=="object"?r(e.inputOptions):lf(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},SLe=(t,e)=>{const n=t.getInput();n&&(ls(n),Ev(e.inputValue).then(r=>{n.value=e.input==="number"?`${parseFloat(r)||0}`:`${r}`,Ti(n),n.focus(),t.hideLoading()}).catch(r=>{lf(`Error in inputValue promise: ${r}`),n.value="",Ti(n),n.focus(),t.hideLoading()}))};function CLe(t,e,n){const r=Mu(t,ve.select);if(!r)return;const i=(s,a,l)=>{const u=document.createElement("option");u.value=l,wa(u,a),u.selected=Dee(l,n.inputValue),s.appendChild(u)};e.forEach(s=>{const a=s[0],l=s[1];if(Array.isArray(l)){const u=document.createElement("optgroup");u.label=a,u.disabled=!1,r.appendChild(u),l.forEach(d=>i(u,d[1],d[0]))}else i(r,l,a)}),r.focus()}function ALe(t,e,n){const r=Mu(t,ve.radio);if(!r)return;e.forEach(s=>{const a=s[0],l=s[1],u=document.createElement("input"),d=document.createElement("label");u.type="radio",u.name=ve.radio,u.value=a,Dee(a,n.inputValue)&&(u.checked=!0);const h=document.createElement("span");wa(h,l),h.className=ve.label,d.appendChild(u),d.appendChild(h),r.appendChild(d)});const i=r.querySelectorAll("input");i.length&&i[0].focus()}const o_=t=>{const e=[];return t instanceof Map?t.forEach((n,r)=>{let i=n;typeof i=="object"&&(i=o_(i)),e.push([r,i])}):Object.keys(t).forEach(n=>{let r=t[n];typeof r=="object"&&(r=o_(r)),e.push([n,r])}),e},Dee=(t,e)=>!!e&&e.toString()===t.toString(),NLe=t=>{const e=Ln.innerParams.get(t);t.disableButtons(),e.input?Mee(t,"confirm"):NP(t,!0)},kLe=t=>{const e=Ln.innerParams.get(t);t.disableButtons(),e.returnInputValueOnDeny?Mee(t,"deny"):AP(t,!1)},ILe=(t,e)=>{t.disableButtons(),e(eg.cancel)},Mee=(t,e)=>{const n=Ln.innerParams.get(t);if(!n.input){lf(`The "input" parameter is needed to be set when using returnInputValueOn${mP(e)}`);return}const r=t.getInput(),i=wLe(t,n);n.inputValidator?OLe(t,i,e):r&&!r.checkValidity()?(t.enableButtons(),t.showValidationMessage(n.validationMessage||r.validationMessage)):e==="deny"?AP(t,i):NP(t,i)},OLe=(t,e,n)=>{const r=Ln.innerParams.get(t);t.disableInput(),Promise.resolve().then(()=>Ev(r.inputValidator(e,r.validationMessage))).then(s=>{t.enableButtons(),t.enableInput(),s?t.showValidationMessage(s):n==="deny"?AP(t,e):NP(t,e)})},AP=(t,e)=>{const n=Ln.innerParams.get(t||void 0);n.showLoaderOnDeny&&Ep(cf()),n.preDeny?(t.isAwaitingPromise=!0,Promise.resolve().then(()=>Ev(n.preDeny(e,n.validationMessage))).then(i=>{i===!1?(t.hideLoading(),Nv(t)):t.close({isDenied:!0,value:typeof i>"u"?e:i})}).catch(i=>Lee(t||void 0,i))):t.close({isDenied:!0,value:e})},Fz=(t,e)=>{t.close({isConfirmed:!0,value:e})},Lee=(t,e)=>{t.rejectPromise(e)},NP=(t,e)=>{const n=Ln.innerParams.get(t||void 0);n.showLoaderOnConfirm&&Ep(),n.preConfirm?(t.resetValidationMessage(),t.isAwaitingPromise=!0,Promise.resolve().then(()=>Ev(n.preConfirm(e,n.validationMessage))).then(i=>{Fs(iE())||i===!1?(t.hideLoading(),Nv(t)):Fz(t,typeof i>"u"?e:i)}).catch(i=>Lee(t||void 0,i))):Fz(t,e)};function l_(){const t=Ln.innerParams.get(this);if(!t)return;const e=Ln.domCache.get(this);ls(e.loader),aE()?t.icon&&Ti(Qp()):jLe(e),Za([e.popup,e.actions],ve.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const jLe=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?Ti(e[0],"inline-block"):s8e()&&ls(t.actions)};function Vee(){const t=Ln.innerParams.get(this),e=Ln.domCache.get(this);return e?oE(e.popup,t.input):null}function Uee(t,e,n){const r=Ln.domCache.get(t);e.forEach(i=>{r[i].disabled=n})}function Bee(t,e){const n=Kt();if(!(!n||!t))if(t.type==="radio"){const r=n.querySelectorAll(`[name="${ve.radio}"]`);for(let i=0;i<r.length;i++)r[i].disabled=e}else t.disabled=e}function zee(){Uee(this,["confirmButton","denyButton","cancelButton"],!1)}function $ee(){Uee(this,["confirmButton","denyButton","cancelButton"],!0)}function Fee(){Bee(this.getInput(),!1)}function Hee(){Bee(this.getInput(),!0)}function qee(t){const e=Ln.domCache.get(this),n=Ln.innerParams.get(this);wa(e.validationMessage,t),e.validationMessage.className=ve["validation-message"],n.customClass&&n.customClass.validationMessage&&nn(e.validationMessage,n.customClass.validationMessage),Ti(e.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",ve["validation-message"]),yee(r),nn(r,ve.inputerror))}function Gee(){const t=Ln.domCache.get(this);t.validationMessage&&ls(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),Za(e,ve.inputerror))}const Bm={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},PLe=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],RLe={allowEnterKey:void 0},DLe=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Wee=t=>Object.prototype.hasOwnProperty.call(Bm,t),Kee=t=>PLe.indexOf(t)!==-1,Yee=t=>RLe[t],MLe=t=>{Wee(t)||_s(`Unknown parameter "${t}"`)},LLe=t=>{DLe.includes(t)&&_s(`The parameter "${t}" is incompatible with toasts`)},VLe=t=>{const e=Yee(t);e&&fee(t,e)},Xee=t=>{t.backdrop===!1&&t.allowOutsideClick&&_s('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),t.theme&&!["light","dark","auto","minimal","borderless","bootstrap-4","bootstrap-4-light","bootstrap-4-dark","bootstrap-5","bootstrap-5-light","bootstrap-5-dark","material-ui","material-ui-light","material-ui-dark","embed-iframe","bulma","bulma-light","bulma-dark"].includes(t.theme)&&_s(`Invalid theme "${t.theme}"`);for(const e in t)MLe(e),t.toast&&LLe(e),VLe(e)};function Qee(t){const e=Es(),n=Kt(),r=Ln.innerParams.get(this);if(!n||gc(n,r.hideClass.popup)){_s("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const i=ULe(t),s=Object.assign({},r,i);Xee(s),e.dataset.swal2Theme=s.theme,Aee(this,s),Ln.innerParams.set(this,s),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const ULe=t=>{const e={};return Object.keys(t).forEach(n=>{Kee(n)?e[n]=t[n]:_s(`Invalid parameter to update: ${n}`)}),e};function Jee(){const t=Ln.domCache.get(this),e=Ln.innerParams.get(this);if(!e){Zee(this);return}t.popup&&at.swalCloseEventFinishedCallback&&(at.swalCloseEventFinishedCallback(),delete at.swalCloseEventFinishedCallback),typeof e.didDestroy=="function"&&e.didDestroy(),at.eventEmitter.emit("didDestroy"),BLe(this)}const BLe=t=>{Zee(t),delete t.params,delete at.keydownHandler,delete at.keydownTarget,delete at.currentInstance},Zee=t=>{t.isAwaitingPromise?(XA(Ln,t),t.isAwaitingPromise=!0):(XA(_p,t),XA(Ln,t),delete t.isAwaitingPromise,delete t.disableButtons,delete t.enableButtons,delete t.getInput,delete t.disableInput,delete t.enableInput,delete t.hideLoading,delete t.disableLoading,delete t.showValidationMessage,delete t.resetValidationMessage,delete t.close,delete t.closePopup,delete t.closeModal,delete t.closeToast,delete t.rejectPromise,delete t.update,delete t._destroy)},XA=(t,e)=>{for(const n in t)t[n].delete(e)};var zLe=Object.freeze({__proto__:null,_destroy:Jee,close:Lu,closeModal:Lu,closePopup:Lu,closeToast:Lu,disableButtons:$ee,disableInput:Hee,disableLoading:l_,enableButtons:zee,enableInput:Fee,getInput:Vee,handleAwaitingPromise:Nv,hideLoading:l_,rejectPromise:Ree,resetValidationMessage:Gee,showValidationMessage:qee,update:Qee});const $Le=(t,e,n)=>{t.toast?FLe(t,e,n):(qLe(e),GLe(e),WLe(t,e,n))},FLe=(t,e,n)=>{e.popup.onclick=()=>{t&&(HLe(t)||t.timer||t.input)||n(eg.close)}},HLe=t=>!!(t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton);let c_=!1;const qLe=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=()=>{},e.target===t.container&&(c_=!0)}}},GLe=t=>{t.container.onmousedown=e=>{e.target===t.container&&e.preventDefault(),t.popup.onmouseup=function(n){t.popup.onmouseup=()=>{},(n.target===t.popup||n.target instanceof HTMLElement&&t.popup.contains(n.target))&&(c_=!0)}}},WLe=(t,e,n)=>{e.container.onclick=r=>{if(c_){c_=!1;return}r.target===e.container&&rE(t.allowOutsideClick)&&n(eg.backdrop)}},KLe=t=>typeof t=="object"&&t.jquery,Hz=t=>t instanceof Element||KLe(t),YLe=t=>{const e={};return typeof t[0]=="object"&&!Hz(t[0])?Object.assign(e,t[0]):["title","html","icon"].forEach((n,r)=>{const i=t[r];typeof i=="string"||Hz(i)?e[n]=i:i!==void 0&&lf(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof i}`)}),e};function XLe(...t){return new this(...t)}function QLe(t){class e extends this{_main(r,i){return super._main(r,Object.assign({},t,i))}}return e}const JLe=()=>at.timeout&&at.timeout.getTimerLeft(),ete=()=>{if(at.timeout)return o8e(),at.timeout.stop()},tte=()=>{if(at.timeout){const t=at.timeout.start();return EP(t),t}},ZLe=()=>{const t=at.timeout;return t&&(t.running?ete():tte())},e7e=t=>{if(at.timeout){const e=at.timeout.increase(t);return EP(e,!0),e}},t7e=()=>!!(at.timeout&&at.timeout.isRunning());let qz=!1;const DI={};function n7e(t="data-swal-template"){DI[t]=this,qz||(document.body.addEventListener("click",r7e),qz=!0)}const r7e=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const n in DI){const r=e.getAttribute(n);if(r){DI[n].fire({template:r});return}}};class i7e{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,n){const r=this._getHandlersByEventName(e);r.includes(n)||r.push(n)}once(e,n){const r=(...i)=>{this.removeListener(e,r),n.apply(this,i)};this.on(e,r)}emit(e,...n){this._getHandlersByEventName(e).forEach(r=>{try{r.apply(this,n)}catch(i){console.error(i)}})}removeListener(e,n){const r=this._getHandlersByEventName(e),i=r.indexOf(n);i>-1&&r.splice(i,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}}at.eventEmitter=new i7e;const s7e=(t,e)=>{at.eventEmitter.on(t,e)},a7e=(t,e)=>{at.eventEmitter.once(t,e)},o7e=(t,e)=>{if(!t){at.eventEmitter.reset();return}e?at.eventEmitter.removeListener(t,e):at.eventEmitter.removeAllListeners(t)};var l7e=Object.freeze({__proto__:null,argsToParams:YLe,bindClickHandler:n7e,clickCancel:Y8e,clickConfirm:Nee,clickDeny:K8e,enableLoading:Ep,fire:XLe,getActions:Sv,getCancelButton:Jp,getCloseButton:bP,getConfirmButton:El,getContainer:Es,getDenyButton:cf,getFocusableElements:wP,getFooter:gee,getHtmlContainer:yP,getIcon:Qp,getIconContent:e8e,getImage:pee,getInputLabel:t8e,getLoader:Zp,getPopup:Kt,getProgressSteps:vP,getTimerLeft:JLe,getTimerProgressBar:sE,getTitle:mee,getValidationMessage:iE,increaseTimer:e7e,isDeprecatedParameter:Yee,isLoading:r8e,isTimerRunning:t7e,isUpdatableParameter:Kee,isValidParameter:Wee,isVisible:W8e,mixin:QLe,off:o7e,on:s7e,once:a7e,resumeTimer:tte,showLoading:Ep,stopTimer:ete,toggleTimer:ZLe});class c7e{constructor(e,n){this.callback=e,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const n=this.running;return n&&this.stop(),this.remaining+=e,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const nte=["swal-title","swal-html","swal-footer"],u7e=t=>{const e=typeof t.template=="string"?document.querySelector(t.template):t.template;if(!e)return{};const n=e.content;return v7e(n),Object.assign(d7e(n),h7e(n),f7e(n),m7e(n),p7e(n),g7e(n),y7e(n,nte))},d7e=t=>{const e={};return Array.from(t.querySelectorAll("swal-param")).forEach(r=>{Wh(r,["name","value"]);const i=r.getAttribute("name"),s=r.getAttribute("value");!i||!s||(typeof Bm[i]=="boolean"?e[i]=s!=="false":typeof Bm[i]=="object"?e[i]=JSON.parse(s):e[i]=s)}),e},h7e=t=>{const e={};return Array.from(t.querySelectorAll("swal-function-param")).forEach(r=>{const i=r.getAttribute("name"),s=r.getAttribute("value");!i||!s||(e[i]=new Function(`return ${s}`)())}),e},f7e=t=>{const e={};return Array.from(t.querySelectorAll("swal-button")).forEach(r=>{Wh(r,["type","color","aria-label"]);const i=r.getAttribute("type");!i||!["confirm","cancel","deny"].includes(i)||(e[`${i}ButtonText`]=r.innerHTML,e[`show${mP(i)}Button`]=!0,r.hasAttribute("color")&&(e[`${i}ButtonColor`]=r.getAttribute("color")),r.hasAttribute("aria-label")&&(e[`${i}ButtonAriaLabel`]=r.getAttribute("aria-label")))}),e},m7e=t=>{const e={},n=t.querySelector("swal-image");return n&&(Wh(n,["src","width","height","alt"]),n.hasAttribute("src")&&(e.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(e.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(e.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(e.imageAlt=n.getAttribute("alt")||void 0)),e},p7e=t=>{const e={},n=t.querySelector("swal-icon");return n&&(Wh(n,["type","color"]),n.hasAttribute("type")&&(e.icon=n.getAttribute("type")),n.hasAttribute("color")&&(e.iconColor=n.getAttribute("color")),e.iconHtml=n.innerHTML),e},g7e=t=>{const e={},n=t.querySelector("swal-input");n&&(Wh(n,["type","label","placeholder","value"]),e.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(e.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(e.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(e.inputValue=n.getAttribute("value")));const r=Array.from(t.querySelectorAll("swal-input-option"));return r.length&&(e.inputOptions={},r.forEach(i=>{Wh(i,["value"]);const s=i.getAttribute("value");if(!s)return;const a=i.innerHTML;e.inputOptions[s]=a})),e},y7e=(t,e)=>{const n={};for(const r in e){const i=e[r],s=t.querySelector(i);s&&(Wh(s,[]),n[i.replace(/^swal-/,"")]=s.innerHTML.trim())}return n},v7e=t=>{const e=nte.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(t.children).forEach(n=>{const r=n.tagName.toLowerCase();e.includes(r)||_s(`Unrecognized element <${r}>`)})},Wh=(t,e)=>{Array.from(t.attributes).forEach(n=>{e.indexOf(n.name)===-1&&_s([`Unrecognized attribute "${n.name}" on <${t.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},rte=10,b7e=t=>{const e=Es(),n=Kt();typeof t.willOpen=="function"&&t.willOpen(n),at.eventEmitter.emit("willOpen",n);const i=window.getComputedStyle(document.body).overflowY;_7e(e,n,t),setTimeout(()=>{w7e(e,n)},rte),xP()&&(x7e(e,t.scrollbarPadding,i),rLe()),!aE()&&!at.previousActiveElement&&(at.previousActiveElement=document.activeElement),typeof t.didOpen=="function"&&setTimeout(()=>t.didOpen(n)),at.eventEmitter.emit("didOpen",n)},u_=t=>{const e=Kt();if(t.target!==e)return;const n=Es();e.removeEventListener("animationend",u_),e.removeEventListener("transitionend",u_),n.style.overflowY="auto",Za(n,ve["no-transition"])},w7e=(t,e)=>{bee(e)?(t.style.overflowY="hidden",e.addEventListener("animationend",u_),e.addEventListener("transitionend",u_)):t.style.overflowY="auto"},x7e=(t,e,n)=>{iLe(),e&&n!=="hidden"&&dLe(n),setTimeout(()=>{t.scrollTop=0})},_7e=(t,e,n)=>{nn(t,n.showClass.backdrop),n.animation?(e.style.setProperty("opacity","0","important"),Ti(e,"grid"),setTimeout(()=>{nn(e,n.showClass.popup),e.style.removeProperty("opacity")},rte)):Ti(e,"grid"),nn([document.documentElement,document.body],ve.shown),n.heightAuto&&n.backdrop&&!n.toast&&nn([document.documentElement,document.body],ve["height-auto"])};var Gz={email:(t,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function E7e(t){t.inputValidator||(t.input==="email"&&(t.inputValidator=Gz.email),t.input==="url"&&(t.inputValidator=Gz.url))}function T7e(t){(!t.target||typeof t.target=="string"&&!document.querySelector(t.target)||typeof t.target!="string"&&!t.target.appendChild)&&(_s('Target parameter is not valid, defaulting to "body"'),t.target="body")}function S7e(t){E7e(t),t.showLoaderOnConfirm&&!t.preConfirm&&_s(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),T7e(t),typeof t.title=="string"&&(t.title=t.title.split(`
`).join("<br />")),p8e(t)}let nl;var Rw=new WeakMap;class Dr{constructor(...e){if(GMe(this,Rw,void 0),typeof window>"u")return;nl=this;const n=Object.freeze(this.constructor.argsToParams(e));this.params=n,this.isAwaitingPromise=!1,WMe(Rw,this,this._main(nl.params))}_main(e,n={}){if(Xee(Object.assign({},n,e)),at.currentInstance){const s=_p.swalPromiseResolve.get(at.currentInstance),{isAwaitingPromise:a}=at.currentInstance;at.currentInstance._destroy(),a||s({isDismissed:!0}),xP()&&Oee()}at.currentInstance=nl;const r=A7e(e,n);S7e(r),Object.freeze(r),at.timeout&&(at.timeout.stop(),delete at.timeout),clearTimeout(at.restoreFocusTimeout);const i=N7e(nl);return Aee(nl,r),Ln.innerParams.set(nl,r),C7e(nl,i,r)}then(e){return Mz(Rw,this).then(e)}finally(e){return Mz(Rw,this).finally(e)}}const C7e=(t,e,n)=>new Promise((r,i)=>{const s=a=>{t.close({isDismissed:!0,dismiss:a,isConfirmed:!1,isDenied:!1})};_p.swalPromiseResolve.set(t,r),_p.swalPromiseReject.set(t,i),e.confirmButton.onclick=()=>{NLe(t)},e.denyButton.onclick=()=>{kLe(t)},e.cancelButton.onclick=()=>{ILe(t,s)},e.closeButton.onclick=()=>{s(eg.close)},$Le(n,e,s),X8e(at,n,s),bLe(t,n),b7e(n),k7e(at,n,s),I7e(e,n),setTimeout(()=>{e.container.scrollTop=0})}),A7e=(t,e)=>{const n=u7e(t),r=Object.assign({},Bm,e,n,t);return r.showClass=Object.assign({},Bm.showClass,r.showClass),r.hideClass=Object.assign({},Bm.hideClass,r.hideClass),r.animation===!1&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},N7e=t=>{const e={popup:Kt(),container:Es(),actions:Sv(),confirmButton:El(),denyButton:cf(),cancelButton:Jp(),loader:Zp(),closeButton:bP(),validationMessage:iE(),progressSteps:vP()};return Ln.domCache.set(t,e),e},k7e=(t,e,n)=>{const r=sE();ls(r),e.timer&&(t.timeout=new c7e(()=>{n("timer"),delete t.timeout},e.timer),e.timerProgressBar&&(Ti(r),ya(r,e,"timerProgressBar"),setTimeout(()=>{t.timeout&&t.timeout.running&&EP(e.timer)})))},I7e=(t,e)=>{if(!e.toast){if(!rE(e.allowEnterKey)){fee("allowEnterKey"),P7e();return}O7e(t)||j7e(t,e)||RI(-1,1)}},O7e=t=>{const e=Array.from(t.popup.querySelectorAll("[autofocus]"));for(const n of e)if(n instanceof HTMLElement&&Fs(n))return n.focus(),!0;return!1},j7e=(t,e)=>e.focusDeny&&Fs(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&Fs(t.cancelButton)?(t.cancelButton.focus(),!0):e.focusConfirm&&Fs(t.confirmButton)?(t.confirmButton.focus(),!0):!1,P7e=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};Dr.prototype.disableButtons=$ee;Dr.prototype.enableButtons=zee;Dr.prototype.getInput=Vee;Dr.prototype.disableInput=Hee;Dr.prototype.enableInput=Fee;Dr.prototype.hideLoading=l_;Dr.prototype.disableLoading=l_;Dr.prototype.showValidationMessage=qee;Dr.prototype.resetValidationMessage=Gee;Dr.prototype.close=Lu;Dr.prototype.closePopup=Lu;Dr.prototype.closeModal=Lu;Dr.prototype.closeToast=Lu;Dr.prototype.rejectPromise=Ree;Dr.prototype.update=Qee;Dr.prototype._destroy=Jee;Object.assign(Dr,l7e);Object.keys(zLe).forEach(t=>{Dr[t]=function(...e){return nl&&nl[t]?nl[t](...e):null}});Dr.DismissReason=eg;Dr.version="11.26.4";const rl=Dr;rl.default=rl;typeof document<"u"&&(function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch{n.innerText=e}})(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.15s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}100%{transform:translate3d(0, 0, 0) scale(1);opacity:1}}@keyframes swal2-hide{0%{transform:translate3d(0, 0, 0) scale(1);opacity:1}100%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const ite="usage_config",ste="settings",fo={guest:{limit:5,period:"daily",isEnabled:!0,showAds:!0,message:"Bn  s dng ht {limit} lt lm th min ph trong ngy. Vui lng ng nhp  tip tc n tp! Mi chi tit lin h phng o to-Cng ty CP T vn v Gio dc Ninh Bnh. ST: 022 96 282 969"},free_user:{limit:10,period:"daily",isEnabled:!0,showAds:!0,message:"Bn  ht {limit} lt lm bi min ph hm nay. Hy ng k lp hc  m kha ton b tnh nng v n tp khng gii hn. Mi chi tit lin h phng o to-Cng ty CP T vn v Gio dc Ninh Bnh. ST: 022 96 282 969"},verified_user:{limit:50,period:"daily",isEnabled:!1,showAds:!1,message:"Ti khon lp ca bn  t gii hn {limit} lt truy cp. Vui lng lin h gio vin hoc admin  c h tr."},vip_user:{limit:100,period:"daily",isEnabled:!1,showAds:!1,message:"Ti khon VIP ca bn  ht {limit} lt s dng. Vui lng gia hn hoc lin h h tr."},teacher:{limit:9999,period:"daily",isEnabled:!1,showAds:!1,message:"Gii hn gio vin."},manager:{limit:9999,period:"daily",isEnabled:!1,showAds:!1,message:"Gii hn cn b qun l."},admin:{limit:9999,period:"daily",isEnabled:!1,showAds:!1,message:"Gii hn Admin."}},kP=async()=>{try{const t=Ct(Pe,ste,ite),e=await td(t);if(e.exists()){const n=e.data();return{...fo,guest:{...fo.guest,...n.guest||{}},free_user:{...fo.free_user,...n.free_user||{}},verified_user:{...fo.verified_user,...n.verified_user||{}},vip_user:{...fo.vip_user,...n.vip_user||{}},teacher:{...fo.teacher,...n.teacher||{}},manager:{...fo.manager,...n.manager||{}},admin:{...fo.admin,...n.admin||{}}}}else return console.log("Initializing default usage config..."),await W_(t,fo),fo}catch(t){return console.error("Error fetching usage config:",t),fo}},R7e=async t=>{try{const e=Ct(Pe,ste,ite);await W_(e,t)}catch(e){throw console.error("Error saving usage config:",e),e}},D7e=({onClose:t})=>{const[e,n]=S.useState(null),[r,i]=S.useState(!0),[s,a]=S.useState(!1),[l,u]=S.useState("guest"),[d,h]=S.useState(null),[p,y]=S.useState(!1),[v,w]=S.useState(!1);S.useEffect(()=>{_()},[]);const _=async()=>{i(!0);const P=await kP();n(P),i(!1)},E=async()=>{if(e){a(!0);try{await R7e(e),rl.fire({title:"Thnh cng!",text:"Cu hnh  c lu.",icon:"success",timer:1500,showConfirmButton:!1})}catch{rl.fire("Li","Khng th lu cu hnh","error")}finally{a(!1)}}},C=(P,A,k)=>{!e||P==="system"||n({...e,[P]:{...e[P],[A]:k}})};if(r)return m.jsx("div",{className:"p-8 text-center",children:"ang ti cu hnh..."});if(!e)return m.jsx("div",{className:"p-8 text-center text-red-500",children:"Li ti d liu"});const N=[{id:"guest",label:"Khch Vng Lai",icon:n1,color:"text-gray-500"},{id:"free_user",label:"Thnh Vin T Do",icon:sK,color:"text-green-500"},{id:"verified_user",label:"Hc Vin Lp",icon:Vbe,color:"text-blue-500"},{id:"vip_user",label:"Thnh Vin VIP",icon:Lbe,color:"text-yellow-500"},{id:"teacher",label:"Gio Vin",icon:yk,color:"text-purple-500"},{id:"manager",label:"Cn B Qun L",icon:Rm,color:"text-red-500"},{id:"admin",label:"Qun Tr Vin",icon:Rbe,color:"text-indigo-600"},{id:"system",label:"H Thng & D Liu",icon:jbe,color:"text-gray-600"}],O=async()=>{y(!0);try{const P=await Mn(_t(Pe,"courses")),A=new Set(P.docs.map(U=>U.id)),k=$t(_t(Pe,"users"),an("courseId","!=",null)),M=await Mn(k);let V=0;M.forEach(U=>{const z=U.data();z.courseId&&!A.has(z.courseId)&&V++}),h(V),V===0&&rl.fire("Tt","D liu sch s! Khng c hc vin li.","success")}catch(P){console.error(P),rl.fire("Li","Khng th qut d liu","error")}finally{y(!1)}},R=async()=>{if(d){w(!0);try{const P=await Mn(_t(Pe,"courses")),A=new Set(P.docs.map(z=>z.id)),k=$t(_t(Pe,"users"),an("courseId","!=",null)),M=await Mn(k),V=mO(Pe);let U=0;M.forEach(z=>{const $=z.data();if($.courseId&&!A.has($.courseId)){const ne=Ct(Pe,"users",z.id);V.update(ne,{courseId:null,courseName:null,class:null,isVerified:!1}),U++}}),U>0&&(await V.commit(),h(0),rl.fire("Thnh cng",` sa li cho ${U} hc vin!`,"success"))}catch(P){console.error(P),rl.fire("Li","Khng th sa d liu","error")}finally{w(!1)}}},D=l==="system"?{isEnabled:!1}:e[l];return m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 backdrop-blur-sm animate-fade-in",children:m.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-4xl overflow-hidden flex flex-col max-h-[90vh]",children:[m.jsxs("div",{className:"p-5 bg-gradient-to-r from-purple-600 to-indigo-600 text-white flex justify-between items-center",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(xbe,{className:"text-2xl animate-spin-slow"}),m.jsx("h2",{className:"text-xl font-bold",children:"Cu Hnh Gii Hn & Quyn Truy Cp"})]}),m.jsx("button",{onClick:t,className:"text-white/80 hover:text-white text-2xl",children:""})]}),m.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[m.jsx("div",{className:"w-1/3 bg-gray-50 dark:bg-slate-900 border-r dark:border-slate-700 overflow-y-auto",children:N.map(P=>m.jsxs("button",{onClick:()=>u(P.id),className:`w-full text-left p-4 border-b dark:border-slate-700 flex items-center gap-3 transition-colors ${l===P.id?"bg-white dark:bg-slate-800 border-l-4 border-l-purple-500 shadow-sm":"hover:bg-gray-100 dark:hover:bg-slate-800 text-gray-500 dark:text-gray-400"}`,children:[m.jsx(P.icon,{className:`text-xl ${l===P.id?P.color:""}`}),m.jsxs("div",{children:[m.jsx("div",{className:`font-bold ${l===P.id?"text-gray-800 dark:text-white":""}`,children:P.label}),m.jsx("div",{className:"text-xs mt-1",children:m.jsx("div",{className:"text-xs mt-1",children:P.id==="system"?m.jsx("span",{className:"text-blue-600 font-bold",children:"Cng c qun tr"}):e[P.id].isEnabled?m.jsxs("span",{className:"text-green-600 font-bold",children:["Limit: ",e[P.id].limit," (",e[P.id].period==="daily"?"Ngy":"Tun",")"]}):m.jsx("span",{className:"text-gray-400",children:"Khng gii hn (Tt)"})})})]})]},P.id))}),m.jsxs("div",{className:"w-2/3 p-6 overflow-y-auto bg-white dark:bg-slate-800",children:[m.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[m.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[ue.createElement(N.find(P=>P.id===l).icon,{className:N.find(P=>P.id===l).color}),N.find(P=>P.id===l).label]}),l!=="system"&&m.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[m.jsx("input",{type:"checkbox",checked:D.isEnabled,onChange:P=>C(l,"isEnabled",P.target.checked),className:"sr-only peer"}),m.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:peer-focus:ring-purple-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-purple-600"}),m.jsx("span",{className:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-300",children:D.isEnabled?"ang bt gii hn":"Khng gii hn (Tt)"})]})]}),l==="system"?m.jsx("div",{className:"space-y-6 animate-fade-in-up",children:m.jsxs("div",{className:"p-6 bg-orange-50 dark:bg-slate-700/50 rounded-xl border border-orange-200 dark:border-slate-600",children:[m.jsxs("h4",{className:"font-bold text-lg mb-2 text-orange-800 dark:text-orange-400 flex items-center gap-2",children:[m.jsx(hbe,{})," Dn dp d liu rc"]}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:'Tm v sa cc ti khon hc vin vn cn lin kt vi lp hc  b xa (Orphaned Data). Li ny khin hc vin hin th " xc thc" nhng thng tin lp khng tn ti.'}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("button",{onClick:O,disabled:p||v,className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:p?"ang qut...":"1. Qut li"}),d!==null&&d>0&&m.jsxs("div",{className:"flex items-center gap-4 animate-fade-in",children:[m.jsxs("span",{className:"font-bold text-red-500",children:["Tm thy ",d," ti khon li!"]}),m.jsx("button",{onClick:R,disabled:v,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700 disabled:opacity-50",children:v?"ang sa...":"2. Sa ngay"})]}),d===0&&m.jsx("span",{className:"text-green-600 font-bold animate-fade-in",children:"Khng c li no!"})]})]})}):m.jsxs(m.Fragment,{children:[D.isEnabled&&m.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold mb-1 dark:text-gray-300",children:"S lt ti a"}),m.jsx("input",{type:"number",value:D.limit,onChange:P=>C(l,"limit",parseInt(P.target.value)||0),className:"w-full p-2 border rounded-lg dark:bg-slate-700 focus:ring-2 focus:ring-purple-500 outline-none"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold mb-1 dark:text-gray-300",children:"Chu k reset"}),m.jsxs("select",{value:D.period,onChange:P=>C(l,"period",P.target.value),className:"w-full p-2 border rounded-lg dark:bg-slate-700 focus:ring-2 focus:ring-purple-500 outline-none",children:[m.jsx("option",{value:"daily",children:"Hng Ngy (00:00)"}),m.jsx("option",{value:"weekly",children:"Hng Tun (Th 2)"})]})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold mb-1 dark:text-gray-300",children:"Tin nhn bo chn"}),m.jsx("textarea",{rows:3,value:D.message,onChange:P=>C(l,"message",P.target.value),className:"w-full p-3 border rounded-lg dark:bg-slate-700 focus:ring-2 focus:ring-purple-500 outline-none",placeholder:"Nhp tin nhn..."}),m.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[" Mo: Dng ",m.jsx("code",{children:"{limit}"}),"  hin th s lt t ng."]})]})]}),m.jsxs("div",{className:"mt-6 flex items-center justify-between bg-orange-50 dark:bg-slate-700/50 p-3 rounded-lg border border-orange-200 dark:border-slate-600",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-bold text-orange-700 dark:text-orange-400 text-sm",children:"Hin th Qung Co (Google Adsense)"}),m.jsx("p",{className:"text-xs text-orange-600/80 dark:text-gray-400",children:"Bt  hin qung co cho nhm ny (Khng ph thuc gii hn)."})]}),m.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[m.jsx("input",{type:"checkbox",checked:D.showAds,onChange:P=>C(l,"showAds",P.target.checked),className:"sr-only peer"}),m.jsx("div",{className:"w-9 h-5 bg-gray-300 peer-focus:outline-none rounded-full peer dark:bg-gray-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-orange-500"})]})]}),!D.isEnabled&&m.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-700/50 rounded-xl border border-dashed border-gray-300 dark:border-slate-600 text-center text-gray-500",children:[m.jsx(M7e,{className:"text-4xl mx-auto mb-2 text-green-500 opacity-50"}),m.jsx("p",{children:"Ngi dng thuc nhm ny c truy cp khng gii hn."})]})]})]}),m.jsxs("div",{className:"p-5 border-t dark:border-slate-700 bg-gray-50 dark:bg-slate-700/50 flex justify-end gap-3",children:[m.jsx("button",{onClick:t,className:"px-6 py-2 rounded-lg font-medium text-gray-600 hover:bg-gray-200 dark:text-gray-300 dark:hover:bg-slate-600 transition-colors",children:"ng"}),m.jsx("button",{onClick:E,disabled:s,className:"px-8 py-2 rounded-lg font-bold text-white bg-gradient-to-r from-purple-600 to-indigo-600 hover:shadow-lg hover:scale-105 transition-all flex items-center gap-2 disabled:opacity-50",children:s?"ang lu...":m.jsxs(m.Fragment,{children:[m.jsx(sj,{})," Lu Cu Hnh"]})})]})]})]})})},M7e=({className:t})=>m.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 512 512",className:t,xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628 0z"})}),L7e=`
# Changelog

## [v3.7.0] - 2025-12-16
###  Tnh nng mi
- **H thng Thi Trc Tuyn (Online Exam):**
  - Tch hp hon ton module Thi Trc Tuyn vo h thng.
  - Thm trang ch thi (\`/thitructuyen\`) vi giao din mi.
  - H tr hc vin ng nhp v tham gia phng thi bng m phng.
  - Gio vin/Qun l c th truy cp trang Qun l thi t TopNavbar.

###  Giao din & Tri nghim
- **iu hng:**
  - Thm nt "Thi trc tuyn" vo thanh TopNavbar (ng dng n tp).
  - Thm lin kt "Thi trc tuyn" vo Menu chnh v Footer (Trang ch).
  - Cp nht Sitemap  h tr SEO cho trang thi.
- **Trang Thi Trc Tuyn:**
  - Cp nht thng tin Footer v Logo n v.
  - Ti u ha lung ng nhp v chuyn hng ngi dng.

###  K thut
- Cu hnh script build  h tr deploy ng thi c Next.js v React app ln Vercel.
- Dn dp code qun l thi c khi h thng Next.js  trnh xung t.
- Sa cc li giao din v logic nh khc.

---

## [v3.6.0] - 2024-12-15
###  Tnh nng
- Cp nht giao din Dashboard.
- Ti u ha hiu nng ti trang.
`,V7e=({onClose:t})=>m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:m.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full max-w-2xl max-h-[80vh] rounded-xl shadow-2xl flex flex-col overflow-hidden animate-in fade-in zoom-in duration-200",children:[m.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-slate-900/50",children:[m.jsx("h2",{className:"text-lg font-bold text-gray-800 dark:text-white flex items-center gap-2",children:" Lch s cp nht"}),m.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-200 dark:hover:bg-slate-700 rounded-full transition-colors text-gray-500 dark:text-gray-400",children:m.jsx(HMe,{size:20})})]}),m.jsx("div",{className:"flex-1 overflow-y-auto p-6 text-gray-700 dark:text-gray-300 prose dark:prose-invert max-w-none",children:m.jsx("pre",{className:"whitespace-pre-wrap font-sans",children:L7e})}),m.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-slate-900/50 flex justify-end",children:m.jsx("button",{onClick:t,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"ng"})})]})}),ate=S.createContext({user:null,loading:!0}),lE=()=>S.useContext(ate),U7e=({children:t})=>{const[e,n]=S.useState(null),[r,i]=S.useState(!0);return S.useEffect(()=>{const s=SG(Ji,a=>{n(a),i(!1)});return()=>s()},[]),m.jsx(ate.Provider,{value:{user:e,loading:r},children:t})},B7e=()=>{const{user:t}=lE(),{userProfile:e}=En(v=>v),[n,r]=S.useState([]),[i,s]=S.useState(!1),[a,l]=S.useState(0),u=S.useRef(null);S.useEffect(()=>{const v=w=>{u.current&&!u.current.contains(w.target)&&s(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),S.useEffect(()=>{t&&e&&Yve(t.uid,void 0,e.role).then(v=>{const w=v.map(_=>({id:_.id,title:_.title,body:_.message,link:void 0,timestamp:_.createdAt?new Date(_.createdAt.seconds*1e3):new Date,read:_.read||!1,type:_.type}));r(w),l(w.filter(_=>!_.read).length)})},[t,e]),S.useEffect(()=>{if(!t||!e)return;const v=$t(_t(Pe,"notifications"),an("targetType","==","all"),Do("createdAt","desc"),hl(10)),w=ko(v,C=>{C.docChanges().forEach(N=>{if(N.type==="added"){const O=N.doc.data();if(O.targetRoles&&Array.isArray(O.targetRoles)&&O.targetRoles.length>0&&(!e.role||!O.targetRoles.includes(e.role)))return;r(R=>{var A;if(R.some(k=>k.id===N.doc.id))return R;const D={id:N.doc.id,title:O.title,body:O.message,link:void 0,timestamp:O.createdAt?new Date(O.createdAt.seconds*1e3):new Date,read:((A=O.readBy)==null?void 0:A.includes(t.uid))||!1,type:O.type};return Date.now()-D.timestamp.getTime()<1e4&&!D.read&&Fa(D.title,{description:D.body,duration:5e3}),[D,...R].sort((k,M)=>M.timestamp.getTime()-k.timestamp.getTime())})}})}),_=$t(_t(Pe,"users",t.uid,"notifications"),Do("createdAt","desc"),hl(10)),E=ko(_,C=>{C.docChanges().forEach(N=>{if(N.type==="added"){const O=N.doc.data();r(R=>{if(R.some(A=>A.id===N.doc.id))return R;const D={id:N.doc.id,title:O.title,body:O.message,link:void 0,timestamp:O.createdAt?new Date(O.createdAt.seconds*1e3):new Date,read:O.read||!1,type:O.type};return Date.now()-D.timestamp.getTime()<1e4&&!D.read&&Fa(D.title,{description:D.body,duration:5e3}),[D,...R].sort((A,k)=>k.timestamp.getTime()-A.timestamp.getTime())})}})});return()=>{w(),E()}},[t,e]),S.useEffect(()=>{l(n.filter(v=>!v.read).length)},[n]);const d=()=>{s(!i)},h=async()=>{if(!t||a===0)return;r(w=>w.map(_=>({..._,read:!0}))),l(0);const v=n.filter(w=>!w.read).map(w=>w.id);for(const w of v)await Xve(w,t.uid)},p=async(v,w)=>{v.stopPropagation(),t&&(r(_=>_.filter(E=>E.id!==w)),await e7(w,t.uid))},y=async()=>{if(!t)return;const v=n.filter(w=>w.read&&w.type!=="special"&&w.type!=="attention").map(w=>w.id);if(v.length===0){Fa.info("Khng c thng bo  c no  xa.");return}r(w=>w.filter(_=>!_.read||_.type==="special"||_.type==="attention"));for(const w of v)await e7(w,t.uid);Fa.success(` xa ${v.length} thng bo  c.`)};return m.jsxs("div",{className:"relative",ref:u,children:[m.jsxs("button",{onClick:d,className:"relative p-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-full transition-colors",title:"Thng bo",children:[m.jsx(ube,{className:`text-xl ${a>0?"text-yellow-500 animate-swing":""}`}),a>0&&m.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/4 -translate-y-1/4 bg-red-600 rounded-full",children:a})]}),i&&m.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white dark:bg-slate-800 rounded-xl shadow-2xl overflow-hidden z-50 border border-gray-200 dark:border-gray-700 animate-fade-in-down",children:[m.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-slate-900 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[m.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white",children:"Thng bo"}),m.jsxs("div",{className:"flex gap-3 text-xs",children:[m.jsxs("span",{className:"text-blue-500 cursor-pointer hover:underline flex items-center gap-1",onClick:h,title:"nh du tt c l  c",children:[m.jsx(pbe,{}),"  c"]}),m.jsxs("span",{className:"text-red-500 cursor-pointer hover:underline flex items-center gap-1",onClick:y,title:"Xa cc thng bo  c",children:[m.jsx(sl,{})," Xa  c"]})]})]}),m.jsx("div",{className:"max-h-96 overflow-y-auto",children:n.length===0?m.jsx("div",{className:"p-8 text-center text-gray-400",children:m.jsx("p",{children:"Khng c thng bo mi"})}):n.map(v=>m.jsxs("div",{className:`p-3 border-b border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors group relative ${v.read?"":"bg-blue-50 dark:bg-blue-900/10"}`,children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{className:"flex-1 pr-6",children:[m.jsxs("p",{className:`text-sm text-gray-800 dark:text-gray-100 mb-1 ${v.read?"font-medium":"font-bold"}`,children:[!v.read&&m.jsx(bbe,{className:"inline-block text-[8px] text-blue-500 mr-1 mb-0.5"}),v.title]}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:v.body})]}),v.type!=="special"&&v.type!=="attention"&&m.jsx("button",{onClick:w=>p(w,v.id),className:"absolute top-3 right-3 text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity p-1",title:"Xa thng bo",children:m.jsx(sl,{size:12})})]}),m.jsxs("div",{className:"flex justify-between items-center mt-2",children:[m.jsx("span",{className:"text-xs text-gray-400",children:v.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),v.link&&m.jsx("a",{href:v.link,className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Xem chi tit"})]})]},v.id))})]})]})},z7e=({userProfile:t,onNavigate:e,onLogout:n})=>{const[r,i]=S.useState(!1),[s,a]=S.useState(!1);return m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"fixed top-0 left-0 right-0 h-16 bg-white dark:bg-slate-900 border-b border-gray-200 dark:border-gray-800 z-40 px-4 shadow-sm flex items-center justify-between transition-colors duration-300",children:[m.jsxs("div",{className:"flex items-center gap-1 md:gap-4 overflow-x-auto no-scrollbar",children:[m.jsxs("button",{onClick:()=>e("dashboard"),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap",children:[m.jsx(rMe,{size:18,className:"text-blue-600 dark:text-blue-400"}),m.jsx("span",{className:"font-semibold text-sm md:text-base",children:"n tp"})]}),m.jsxs("button",{onClick:()=>{t?["admin","quan_ly","lanh_dao","giao_vien"].includes(t.role)?e("online_exam_management"):e("thi_truc_tuyen"):window.location.href="/thitructuyen"},className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap",children:[m.jsx(jz,{size:18,className:"text-red-600 dark:text-red-400"}),m.jsx("span",{className:"font-semibold text-sm md:text-base",children:"Thi trc tuyn"})]}),m.jsxs("a",{href:"/",className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap decoration-0",children:[m.jsx(jz,{size:18,className:"text-teal-600 dark:text-teal-400"}),m.jsx("span",{className:"font-medium text-sm md:text-base",children:"Tin tc"})]}),m.jsxs("button",{onClick:()=>e("account"),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap",children:[m.jsx(zMe,{size:18,className:"text-orange-600 dark:text-orange-400"}),m.jsx("span",{className:"font-medium text-sm md:text-base",children:"Ti khon"})]}),m.jsxs("button",{onClick:()=>e("mailbox"),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap",children:[m.jsx(TMe,{size:18,className:"text-pink-600 dark:text-pink-400"}),m.jsx("span",{className:"font-medium text-sm md:text-base",children:"Hp th"})]}),t&&m.jsxs(m.Fragment,{children:[["admin","lanh_dao","quan_ly","giao_vien"].includes(t.role)?m.jsxs("button",{onClick:()=>e("class_management"),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap",children:[m.jsx(kMe,{size:18,className:"text-indigo-600 dark:text-indigo-400"}),m.jsx("span",{className:"font-medium text-sm md:text-base",children:"Qun l lp"})]}):m.jsxs("button",{onClick:()=>e("my_class"),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap",children:[m.jsx(Oz,{size:18,className:"text-green-600 dark:text-green-400"}),m.jsx("span",{className:"font-medium text-sm md:text-base",children:"Lp ca ti"})]}),["admin","lanh_dao","quan_ly","giao_vien"].includes(t.role)&&m.jsxs("button",{onClick:()=>e("notification_mgmt"),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap border-l border-gray-200 dark:border-gray-700 ml-2 pl-4",children:[m.jsx(UMe,{size:18,className:"text-red-500 animate-pulse-slow"}),m.jsx("span",{className:"font-bold text-sm md:text-base text-red-600 dark:text-red-400",children:"Qun l TB"})]}),t.role==="admin"&&m.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap border-l border-gray-200 dark:border-gray-700 ml-2 pl-4",children:[m.jsx(RMe,{size:18,className:"text-purple-600 animate-spin-slow"}),m.jsx("span",{className:"font-bold text-sm md:text-base text-purple-600 dark:text-purple-400",children:"Cu hnh"})]}),m.jsxs("button",{onClick:()=>e("history"),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors whitespace-nowrap",children:[m.jsx(gMe,{size:18,className:"text-purple-600 dark:text-purple-400"}),m.jsx("span",{className:"font-medium text-sm md:text-base",children:"Lch s"})]})]})]}),m.jsx("div",{className:"flex items-center gap-3 md:gap-4 ml-4 flex-shrink-0",children:t?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"mr-2",children:m.jsx(B7e,{})}),m.jsx("div",{className:"hidden md:flex flex-col items-end mr-4",children:m.jsx("button",{onClick:()=>a(!0),className:"text-xs font-medium text-gray-500 hover:text-blue-600 transition-colors",children:"v3.7.0"})}),m.jsxs("div",{className:"hidden md:flex flex-col items-end",children:[m.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Xin cho,"}),m.jsx("span",{className:"text-sm font-bold text-gray-800 dark:text-white max-w-[150px] truncate",children:t.isVerified||t.courseId?m.jsxs("span",{className:`flex items-center gap-1 font-bold ${t.role==="giao_vien"?"text-yellow-600 dark:text-yellow-400":t.role==="quan_ly"||t.role==="lanh_dao"?"text-red-600 dark:text-red-400":t.role==="admin"?"text-purple-600 dark:text-purple-400":"text-blue-600"}`,children:[t.full_name||t.fullName||"---",t.role==="hoc_vien"&&m.jsx(dMe,{size:14,className:"text-green-500"})]}):m.jsx("span",{className:`font-bold ${t.role==="giao_vien"?"text-yellow-600 dark:text-yellow-400":t.role==="quan_ly"||t.role==="lanh_dao"?"text-red-600 dark:text-red-400":t.role==="admin"?"text-purple-600 dark:text-purple-400":"text-gray-800 dark:text-white"}`,children:t.full_name||t.fullName||"---"})})]}),m.jsx("div",{className:"md:hidden text-gray-700 dark:text-gray-200",children:m.jsx(Oz,{size:20})}),m.jsx("div",{className:"h-8 w-[1px] bg-gray-300 dark:bg-gray-700 mx-1"}),m.jsxs("button",{onClick:n,className:"group flex items-center gap-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 px-3 py-2 rounded-full transition-colors",title:"ng xut",children:[m.jsx(_Me,{size:18,className:"group-hover:translate-x-1 transition-transform"}),m.jsx("span",{className:"hidden md:inline font-medium text-sm",children:"Thot"})]})]}):m.jsx("button",{onClick:()=>e("login"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold text-sm transition-colors shadow-md",children:"ng nhp"})})]}),r&&m.jsx(D7e,{onClose:()=>i(!1)}),s&&m.jsx(V7e,{onClose:()=>a(!1)})]})},cE=0,vd=1,tg=2,ote=4;function Wz(t){return()=>t}function $7e(t){t()}function lte(t,e){return n=>t(e(n))}function Kz(t,e){return()=>t(e)}function F7e(t,e){return n=>t(e,n)}function IP(t){return t!==void 0}function H7e(...t){return()=>{t.map($7e)}}function ng(){}function uE(t,e){return e(t),t}function q7e(t,e){return e(t)}function Wn(...t){return t}function on(t,e){return t(vd,e)}function At(t,e){t(cE,e)}function OP(t){t(tg)}function Zn(t){return t(ote)}function Je(t,e){return on(t,F7e(e,cE))}function jo(t,e){const n=t(vd,r=>{n(),e(r)});return n}function Yz(t){let e,n;return r=>i=>{e=i,n&&clearTimeout(n),n=setTimeout(()=>{r(e)},t)}}function cte(t,e){return t===e}function qn(t=cte){let e;return n=>r=>{t(e,r)||(e=r,n(r))}}function dt(t){return e=>n=>{t(n)&&e(n)}}function Ue(t){return e=>lte(e,t)}function il(t){return e=>()=>{e(t)}}function Ne(t,...e){const n=G7e(...e);return(r,i)=>{switch(r){case tg:OP(t);return;case vd:return on(t,n(i))}}}function ol(t,e){return n=>r=>{n(e=t(e,r))}}function Kh(t){return e=>n=>{t>0?t--:e(n)}}function cc(t){let e=null,n;return r=>i=>{e=i,!n&&(n=setTimeout(()=>{n=void 0,r(e)},t))}}function Nt(...t){const e=new Array(t.length);let n=0,r=null;const i=Math.pow(2,t.length)-1;return t.forEach((s,a)=>{const l=Math.pow(2,a);on(s,u=>{const d=n;n=n|l,e[a]=u,d!==i&&n===i&&r&&(r(),r=null)})}),s=>a=>{const l=()=>{s([a].concat(e))};n===i?l():r=l}}function G7e(...t){return e=>t.reduceRight(q7e,e)}function W7e(t){let e,n;const r=()=>e==null?void 0:e();return function(i,s){switch(i){case vd:return s?n===s?void 0:(r(),n=s,e=on(t,s),e):(r(),ng);case tg:r(),n=null;return}}}function Oe(t){let e=t;const n=Bt();return(r,i)=>{switch(r){case cE:e=i;break;case vd:{i(e);break}case ote:return e}return n(r,i)}}function is(t,e){return uE(Oe(e),n=>Je(t,n))}function Bt(){const t=[];return(e,n)=>{switch(e){case cE:t.slice().forEach(r=>{r(n)});return;case tg:t.splice(0,t.length);return;case vd:return t.push(n),()=>{const r=t.indexOf(n);r>-1&&t.splice(r,1)}}}}function ma(t){return uE(Bt(),e=>Je(t,e))}function Xt(t,e=[],{singleton:n}={singleton:!0}){return{constructor:t,dependencies:e,id:K7e(),singleton:n}}const K7e=()=>Symbol();function Y7e(t){const e=new Map,n=({constructor:r,dependencies:i,id:s,singleton:a})=>{if(a&&e.has(s))return e.get(s);const l=r(i.map(u=>n(u)));return a&&e.set(s,l),l};return n(t)}function Yr(...t){const e=Bt(),n=new Array(t.length);let r=0;const i=Math.pow(2,t.length)-1;return t.forEach((s,a)=>{const l=Math.pow(2,a);on(s,u=>{n[a]=u,r=r|l,r===i&&At(e,n)})}),function(s,a){switch(s){case tg:{OP(e);return}case vd:return r===i&&a(n),on(e,a)}}}function ut(t,e=cte){return Ne(t,qn(e))}function MI(...t){return function(e,n){switch(e){case tg:return;case vd:return H7e(...t.map(r=>on(r,n)))}}}var Hs=(t=>(t[t.DEBUG=0]="DEBUG",t[t.INFO=1]="INFO",t[t.WARN=2]="WARN",t[t.ERROR=3]="ERROR",t))(Hs||{});const X7e={0:"debug",3:"error",1:"log",2:"warn"},Q7e=()=>typeof globalThis>"u"?window:globalThis,bd=Xt(()=>{const t=Oe(3);return{log:Oe((e,n,r=1)=>{var i;const s=(i=Q7e().VIRTUOSO_LOG_LEVEL)!=null?i:Zn(t);r>=s&&console[X7e[r]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",e,n)}),logLevel:t}},[],{singleton:!0});function uf(t,e,n){return jP(t,e,n).callbackRef}function jP(t,e,n){const r=ue.useRef(null);let i=a=>{};const s=ue.useMemo(()=>typeof ResizeObserver<"u"?new ResizeObserver(a=>{const l=()=>{const u=a[0].target;u.offsetParent!==null&&t(u)};n?l():requestAnimationFrame(l)}):null,[t,n]);return i=a=>{a&&e?(s==null||s.observe(a),r.current=a):(r.current&&(s==null||s.unobserve(r.current)),r.current=null)},{callbackRef:i,ref:r}}function J7e(t,e,n,r,i,s,a,l,u){const d=ue.useCallback(h=>{const p=Z7e(h.children,e,l?"offsetWidth":"offsetHeight",i);let y=h.parentElement;for(;!y.dataset.virtuosoScroller;)y=y.parentElement;const v=y.lastElementChild.dataset.viewportType==="window";let w;v&&(w=y.ownerDocument.defaultView);const _=a?l?a.scrollLeft:a.scrollTop:v?l?w.scrollX||w.document.documentElement.scrollLeft:w.scrollY||w.document.documentElement.scrollTop:l?y.scrollLeft:y.scrollTop,E=a?l?a.scrollWidth:a.scrollHeight:v?l?w.document.documentElement.scrollWidth:w.document.documentElement.scrollHeight:l?y.scrollWidth:y.scrollHeight,C=a?l?a.offsetWidth:a.offsetHeight:v?l?w.innerWidth:w.innerHeight:l?y.offsetWidth:y.offsetHeight;r({scrollHeight:E,scrollTop:Math.max(_,0),viewportHeight:C}),s==null||s(l?Xz("column-gap",getComputedStyle(h).columnGap,i):Xz("row-gap",getComputedStyle(h).rowGap,i)),p!==null&&t(p)},[t,e,i,s,a,r,l]);return jP(d,n,u)}function Z7e(t,e,n,r){const i=t.length;if(i===0)return null;const s=[];for(let a=0;a<i;a++){const l=t.item(a);if(l.dataset.index===void 0)continue;const u=parseInt(l.dataset.index),d=parseFloat(l.dataset.knownSize),h=e(l,n);if(h===0&&r("Zero-sized element, this should not happen",{child:l},Hs.ERROR),h===d)continue;const p=s[s.length-1];s.length===0||p.size!==h||p.endIndex!==u-1?s.push({endIndex:u,size:h,startIndex:u}):s[s.length-1].endIndex++}return s}function Xz(t,e,n){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&n(`${t} was not resolved to pixel value correctly`,e,Hs.WARN),e==="normal"?0:parseInt(e??"0",10)}function ute(t,e,n){const r=ue.useRef(null),i=ue.useCallback(u=>{if(!(u!=null&&u.offsetParent))return;const d=u.getBoundingClientRect(),h=d.width;let p,y;if(e){const v=e.getBoundingClientRect(),w=d.top-v.top;y=v.height-Math.max(0,w),p=w+e.scrollTop}else{const v=a.current.ownerDocument.defaultView;y=v.innerHeight-Math.max(0,d.top),p=d.top+v.scrollY}r.current={offsetTop:p,visibleHeight:y,visibleWidth:h},t(r.current)},[t,e]),{callbackRef:s,ref:a}=jP(i,!0,n),l=ue.useCallback(()=>{i(a.current)},[i,a]);return ue.useEffect(()=>{var u;if(e){e.addEventListener("scroll",l);const d=new ResizeObserver(()=>{requestAnimationFrame(l)});return d.observe(e),()=>{e.removeEventListener("scroll",l),d.unobserve(e)}}else{const d=(u=a.current)==null?void 0:u.ownerDocument.defaultView;return d==null||d.addEventListener("scroll",l),d==null||d.addEventListener("resize",l),()=>{d==null||d.removeEventListener("scroll",l),d==null||d.removeEventListener("resize",l)}}},[l,e,a]),s}const Ts=Xt(()=>{const t=Bt(),e=Bt(),n=Oe(0),r=Bt(),i=Oe(0),s=Bt(),a=Bt(),l=Oe(0),u=Oe(0),d=Oe(0),h=Oe(0),p=Bt(),y=Bt(),v=Oe(!1),w=Oe(!1),_=Oe(!1);return Je(Ne(t,Ue(({scrollTop:E})=>E)),e),Je(Ne(t,Ue(({scrollHeight:E})=>E)),a),Je(e,i),{deviation:n,fixedFooterHeight:d,fixedHeaderHeight:u,footerHeight:h,headerHeight:l,horizontalDirection:w,scrollBy:y,scrollContainerState:t,scrollHeight:a,scrollingInProgress:v,scrollTo:p,scrollTop:e,skipAnimationFrameInResizeObserver:_,smoothScrollTargetReached:r,statefulScrollTop:i,viewportHeight:s}},[],{singleton:!0}),Ty={lvl:0};function dte(t,e){const n=t.length;if(n===0)return[];let{index:r,value:i}=e(t[0]);const s=[];for(let a=1;a<n;a++){const{index:l,value:u}=e(t[a]);s.push({end:l-1,start:r,value:i}),r=l,i=u}return s.push({end:1/0,start:r,value:i}),s}function Sn(t){return t===Ty}function Sy(t,e){if(!Sn(t))return e===t.k?t.v:e<t.k?Sy(t.l,e):Sy(t.r,e)}function Uo(t,e,n="k"){if(Sn(t))return[-1/0,void 0];if(Number(t[n])===e)return[t.k,t.v];if(Number(t[n])<e){const r=Uo(t.r,e,n);return r[0]===-1/0?[t.k,t.v]:r}return Uo(t.l,e,n)}function ca(t,e,n){return Sn(t)?mte(e,n,1):e===t.k?ai(t,{k:e,v:n}):e<t.k?Qz(ai(t,{l:ca(t.l,e,n)})):Qz(ai(t,{r:ca(t.r,e,n)}))}function zm(){return Ty}function $m(t,e,n){if(Sn(t))return[];const r=Uo(t,e)[0];return e9e(VI(t,r,n))}function LI(t,e){if(Sn(t))return Ty;const{k:n,l:r,r:i}=t;if(e===n){if(Sn(r))return i;if(Sn(i))return r;{const[s,a]=fte(r);return sx(ai(t,{k:s,l:hte(r),v:a}))}}else return e<n?sx(ai(t,{l:LI(r,e)})):sx(ai(t,{r:LI(i,e)}))}function bh(t){return Sn(t)?[]:[...bh(t.l),{k:t.k,v:t.v},...bh(t.r)]}function VI(t,e,n){if(Sn(t))return[];const{k:r,l:i,r:s,v:a}=t;let l=[];return r>e&&(l=l.concat(VI(i,e,n))),r>=e&&r<=n&&l.push({k:r,v:a}),r<=n&&(l=l.concat(VI(s,e,n))),l}function sx(t){const{l:e,lvl:n,r}=t;if(r.lvl>=n-1&&e.lvl>=n-1)return t;if(n>r.lvl+1){if(QA(e))return pte(ai(t,{lvl:n-1}));if(!Sn(e)&&!Sn(e.r))return ai(e.r,{l:ai(e,{r:e.r.l}),lvl:n,r:ai(t,{l:e.r.r,lvl:n-1})});throw new Error("Unexpected empty nodes")}else{if(QA(t))return UI(ai(t,{lvl:n-1}));if(!Sn(r)&&!Sn(r.l)){const i=r.l,s=QA(i)?r.lvl-1:r.lvl;return ai(i,{l:ai(t,{lvl:n-1,r:i.l}),lvl:i.lvl+1,r:UI(ai(r,{l:i.r,lvl:s}))})}else throw new Error("Unexpected empty nodes")}}function ai(t,e){return mte(e.k!==void 0?e.k:t.k,e.v!==void 0?e.v:t.v,e.lvl!==void 0?e.lvl:t.lvl,e.l!==void 0?e.l:t.l,e.r!==void 0?e.r:t.r)}function hte(t){return Sn(t.r)?t.l:sx(ai(t,{r:hte(t.r)}))}function QA(t){return Sn(t)||t.lvl>t.r.lvl}function fte(t){return Sn(t.r)?[t.k,t.v]:fte(t.r)}function mte(t,e,n,r=Ty,i=Ty){return{k:t,l:r,lvl:n,r:i,v:e}}function Qz(t){return UI(pte(t))}function pte(t){const{l:e}=t;return!Sn(e)&&e.lvl===t.lvl?ai(e,{r:ai(t,{l:e.r})}):t}function UI(t){const{lvl:e,r:n}=t;return!Sn(n)&&!Sn(n.r)&&n.lvl===e&&n.r.lvl===e?ai(n,{l:ai(t,{r:n.l}),lvl:e+1}):t}function e9e(t){return dte(t,({k:e,v:n})=>({index:e,value:n}))}function gte(t,e){return!!(t&&t.startIndex===e.startIndex&&t.endIndex===e.endIndex)}function Cy(t,e){return!!(t&&t[0]===e[0]&&t[1]===e[1])}const PP=Xt(()=>({recalcInProgress:Oe(!1)}),[],{singleton:!0});function yte(t,e,n){return t[d_(t,e,n)]}function d_(t,e,n,r=0){let i=t.length-1;for(;r<=i;){const s=Math.floor((r+i)/2),a=t[s],l=n(a,e);if(l===0)return s;if(l===-1){if(i-r<2)return s-1;i=s-1}else{if(i===r)return s;r=s+1}}throw new Error(`Failed binary finding record in array - ${t.join(",")}, searched for ${e}`)}function t9e(t,e,n,r){const i=d_(t,e,r),s=d_(t,n,r,i);return t.slice(i,s+1)}function od(t,e){return Math.round(t.getBoundingClientRect()[e])}function dE(t){return!Sn(t.groupOffsetTree)}function RP({index:t},e){return e===t?0:e<t?-1:1}function n9e(){return{groupIndices:[],groupOffsetTree:zm(),lastIndex:0,lastOffset:0,lastSize:0,offsetTree:[],sizeTree:zm()}}function r9e(t,e){let n=Sn(t)?0:1/0;for(const r of e){const{endIndex:i,size:s,startIndex:a}=r;if(n=Math.min(n,a),Sn(t)){t=ca(t,0,s);continue}const l=$m(t,a-1,i+1);if(l.some(u9e(r)))continue;let u=!1,d=!1;for(const{end:h,start:p,value:y}of l)u?(i>=p||s===y)&&(t=LI(t,p)):(d=y!==s,u=!0),h>i&&i>=p&&y!==s&&(t=ca(t,i+1,y));d&&(t=ca(t,a,s))}return[t,n]}function i9e(t){return typeof t.groupIndex<"u"}function s9e({offset:t},e){return e===t?0:e<t?-1:1}function Ay(t,e,n){if(e.length===0)return 0;const{index:r,offset:i,size:s}=yte(e,t,RP),a=t-r,l=s*a+(a-1)*n+i;return l>0?l+n:l}function vte(t,e){if(!dE(e))return t;let n=0;for(;e.groupIndices[n]<=t+n;)n++;return t+n}function bte(t,e,n){if(i9e(t))return e.groupIndices[t.groupIndex]+1;{const r=t.index==="LAST"?n:t.index;let i=vte(r,e);return i=Math.max(0,i,Math.min(n,i)),i}}function a9e(t,e,n,r=0){return r>0&&(e=Math.max(e,yte(t,r,RP).offset)),dte(t9e(t,e,n,s9e),c9e)}function o9e(t,[e,n,r,i]){e.length>0&&r("received item sizes",e,Hs.DEBUG);const s=t.sizeTree;let a=s,l=0;if(n.length>0&&Sn(s)&&e.length===2){const y=e[0].size,v=e[1].size;a=n.reduce((w,_)=>ca(ca(w,_,y),_+1,v),a)}else[a,l]=r9e(a,e);if(a===s)return t;const{lastIndex:u,lastOffset:d,lastSize:h,offsetTree:p}=BI(t.offsetTree,l,a,i);return{groupIndices:n,groupOffsetTree:n.reduce((y,v)=>ca(y,v,Ay(v,p,i)),zm()),lastIndex:u,lastOffset:d,lastSize:h,offsetTree:p,sizeTree:a}}function l9e(t){return bh(t).map(({k:e,v:n},r,i)=>{const s=i[r+1];return{endIndex:s?s.k-1:1/0,size:n,startIndex:e}})}function Jz(t,e){let n=0,r=0;for(;n<t;)n+=e[r+1]-e[r]-1,r++;return r-(n===t?0:1)}function BI(t,e,n,r){let i=t,s=0,a=0,l=0,u=0;if(e!==0){u=d_(i,e-1,RP),l=i[u].offset;const d=Uo(n,e-1);s=d[0],a=d[1],i.length&&i[u].size===Uo(n,e)[1]&&(u-=1),i=i.slice(0,u+1)}else i=[];for(const{start:d,value:h}of $m(n,e,1/0)){const p=d-s,y=p*a+l+p*r;i.push({index:d,offset:y,size:h}),s=d,l=y,a=h}return{lastIndex:s,lastOffset:l,lastSize:a,offsetTree:i}}function c9e(t){return{index:t.index,value:t}}function u9e(t){const{endIndex:e,size:n,startIndex:r}=t;return i=>i.start===r&&(i.end===e||i.end===1/0)&&i.value===n}const d9e={offsetHeight:"height",offsetWidth:"width"},Al=Xt(([{log:t},{recalcInProgress:e}])=>{const n=Bt(),r=Bt(),i=is(r,0),s=Bt(),a=Bt(),l=Oe(0),u=Oe([]),d=Oe(void 0),h=Oe(void 0),p=Oe(void 0),y=Oe(void 0),v=Oe((A,k)=>od(A,d9e[k])),w=Oe(void 0),_=Oe(0),E=n9e(),C=is(Ne(n,Nt(u,t,_),ol(o9e,E),qn()),E),N=is(Ne(u,qn(),ol((A,k)=>({current:k,prev:A.current}),{current:[],prev:[]}),Ue(({prev:A})=>A)),[]);Je(Ne(u,dt(A=>A.length>0),Nt(C,_),Ue(([A,k,M])=>{const V=A.reduce((U,z,$)=>ca(U,z,Ay(z,k.offsetTree,M)||$),zm());return{...k,groupIndices:A,groupOffsetTree:V}})),C),Je(Ne(r,Nt(C),dt(([A,{lastIndex:k}])=>A<k),Ue(([A,{lastIndex:k,lastSize:M}])=>[{endIndex:k,size:M,startIndex:A}])),n),Je(d,h);const O=is(Ne(d,Ue(A=>A===void 0)),!0);Je(Ne(h,dt(A=>A!==void 0&&Sn(Zn(C).sizeTree)),Ue(A=>{const k=Zn(p),M=Zn(u).length>0;return k?M?[{endIndex:0,size:k,startIndex:0},{endIndex:1,size:A,startIndex:1}]:[]:[{endIndex:0,size:A,startIndex:0}]})),n),Je(Ne(y,dt(A=>A!==void 0&&A.length>0&&Sn(Zn(C).sizeTree)),Ue(A=>{const k=[];let M=A[0],V=0;for(let U=1;U<A.length;U++){const z=A[U];z!==M&&(k.push({endIndex:U-1,size:M,startIndex:V}),M=z,V=U)}return k.push({endIndex:A.length-1,size:M,startIndex:V}),k})),n),Je(Ne(u,Nt(p,h),dt(([,A,k])=>A!==void 0&&k!==void 0),Ue(([A,k,M])=>{const V=[];for(let U=0;U<A.length;U++){const z=A[U],$=A[U+1];V.push({startIndex:z,endIndex:z,size:k}),$!==void 0&&V.push({startIndex:z+1,endIndex:$-1,size:M})}return V})),n);const R=ma(Ne(n,Nt(C),ol(({sizes:A},[k,M])=>({changed:M!==A,sizes:M}),{changed:!1,sizes:E}),Ue(A=>A.changed)));on(Ne(l,ol((A,k)=>({diff:A.prev-k,prev:k}),{diff:0,prev:0}),Ue(A=>A.diff)),A=>{const{groupIndices:k}=Zn(C);if(A>0)At(e,!0),At(s,A+Jz(A,k));else if(A<0){const M=Zn(N);M.length>0&&(A-=Jz(-A,M)),At(a,A)}}),on(Ne(l,Nt(t)),([A,k])=>{A<0&&k("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:l},Hs.ERROR)});const D=ma(s);Je(Ne(s,Nt(C),Ue(([A,k])=>{const M=k.groupIndices.length>0,V=[],U=k.lastSize;if(M){const z=Sy(k.sizeTree,0);let $=0,ne=0;for(;$<A;){const K=k.groupIndices[ne],W=k.groupIndices.length===ne+1?1/0:k.groupIndices[ne+1]-K-1;V.push({endIndex:K,size:z,startIndex:K}),V.push({endIndex:K+1+W-1,size:U,startIndex:K+1}),ne++,$+=W+1}const fe=bh(k.sizeTree);return $!==A&&fe.shift(),fe.reduce((K,{k:W,v:ee})=>{let oe=K.ranges;return K.prevSize!==0&&(oe=[...K.ranges,{endIndex:W+A-1,size:K.prevSize,startIndex:K.prevIndex}]),{prevIndex:W+A,prevSize:ee,ranges:oe}},{prevIndex:A,prevSize:0,ranges:V}).ranges}return bh(k.sizeTree).reduce((z,{k:$,v:ne})=>({prevIndex:$+A,prevSize:ne,ranges:[...z.ranges,{endIndex:$+A-1,size:z.prevSize,startIndex:z.prevIndex}]}),{prevIndex:0,prevSize:U,ranges:[]}).ranges})),n);const P=ma(Ne(a,Nt(C,_),Ue(([A,{offsetTree:k},M])=>{const V=-A;return Ay(V,k,M)})));return Je(Ne(a,Nt(C,_),Ue(([A,k,M])=>{if(k.groupIndices.length>0){if(Sn(k.sizeTree))return k;let V=zm();const U=Zn(N);let z=0,$=0,ne=0;for(;z<-A;){ne=U[$];const fe=U[$+1]-ne-1;$++,z+=fe+1}if(V=bh(k.sizeTree).reduce((fe,{k:K,v:W})=>ca(fe,Math.max(0,K+A),W),V),z!==-A){const fe=Sy(k.sizeTree,ne);V=ca(V,0,fe);const K=Uo(k.sizeTree,-A+1)[1];V=ca(V,1,K)}return{...k,sizeTree:V,...BI(k.offsetTree,0,V,M)}}else{const V=bh(k.sizeTree).reduce((U,{k:z,v:$})=>ca(U,Math.max(0,z+A),$),zm());return{...k,sizeTree:V,...BI(k.offsetTree,0,V,M)}}})),C),{beforeUnshiftWith:D,data:w,defaultItemSize:h,firstItemIndex:l,fixedItemSize:d,fixedGroupSize:p,gap:_,groupIndices:u,heightEstimates:y,itemSize:v,listRefresh:R,shiftWith:a,shiftWithOffset:P,sizeRanges:n,sizes:C,statefulTotalCount:i,totalCount:r,trackItemSizes:O,unshiftWith:s}},Wn(bd,PP),{singleton:!0});function h9e(t){return t.reduce((e,n)=>(e.groupIndices.push(e.totalCount),e.totalCount+=n+1,e),{groupIndices:[],totalCount:0})}const wte=Xt(([{groupIndices:t,sizes:e,totalCount:n},{headerHeight:r,scrollTop:i}])=>{const s=Bt(),a=Bt(),l=ma(Ne(s,Ue(h9e)));return Je(Ne(l,Ue(u=>u.totalCount)),n),Je(Ne(l,Ue(u=>u.groupIndices)),t),Je(Ne(Yr(i,e,r),dt(([u,d])=>dE(d)),Ue(([u,d,h])=>Uo(d.groupOffsetTree,Math.max(u-h,0),"v")[0]),qn(),Ue(u=>[u])),a),{groupCounts:s,topItemsIndexes:a}},Wn(Al,Ts)),wd=Xt(([{log:t}])=>{const e=Oe(!1),n=ma(Ne(e,dt(r=>r),qn()));return on(e,r=>{r&&Zn(t)("props updated",{},Hs.DEBUG)}),{didMount:n,propsReady:e}},Wn(bd),{singleton:!0}),f9e=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function xte(t){const e=typeof t=="number"?{index:t}:t;return e.align||(e.align="start"),(!e.behavior||!f9e)&&(e.behavior="auto"),e.offset||(e.offset=0),e}const kv=Xt(([{gap:t,listRefresh:e,sizes:n,totalCount:r},{fixedFooterHeight:i,fixedHeaderHeight:s,footerHeight:a,headerHeight:l,scrollingInProgress:u,scrollTo:d,smoothScrollTargetReached:h,viewportHeight:p},{log:y}])=>{const v=Bt(),w=Bt(),_=Oe(0);let E=null,C=null,N=null;function O(){E&&(E(),E=null),N&&(N(),N=null),C&&(clearTimeout(C),C=null),At(u,!1)}return Je(Ne(v,Nt(n,p,r,_,l,a,y),Nt(t,s,i),Ue(([[R,D,P,A,k,M,V,U],z,$,ne])=>{const fe=xte(R),{align:K,behavior:W,offset:ee}=fe,oe=A-1,pe=bte(fe,D,oe);let B=Ay(pe,D.offsetTree,z)+M;K==="end"?(B+=$+Uo(D.sizeTree,pe)[1]-P+ne,pe===oe&&(B+=V)):K==="center"?B+=($+Uo(D.sizeTree,pe)[1]-P+ne)/2:B-=k,ee&&(B+=ee);const X=G=>{O(),G?(U("retrying to scroll to",{location:R},Hs.DEBUG),At(v,R)):(At(w,!0),U("list did not change, scroll successful",{},Hs.DEBUG))};if(O(),W==="smooth"){let G=!1;N=on(e,Q=>{G=G||Q}),E=jo(h,()=>{X(G)})}else E=jo(Ne(e,m9e(150)),X);return C=setTimeout(()=>{O()},1200),At(u,!0),U("scrolling from index to",{behavior:W,index:pe,top:B},Hs.DEBUG),{behavior:W,top:B}})),d),{scrollTargetReached:w,scrollToIndex:v,topListHeight:_}},Wn(Al,Ts,bd),{singleton:!0});function m9e(t){return e=>{const n=setTimeout(()=>{e(!1)},t);return r=>{r&&(e(!0),clearTimeout(n))}}}function DP(t,e){t==0?e():requestAnimationFrame(()=>{DP(t-1,e)})}function MP(t,e){const n=e-1;return typeof t=="number"?t:t.index==="LAST"?n:t.index}const Iv=Xt(([{defaultItemSize:t,listRefresh:e,sizes:n},{scrollTop:r},{scrollTargetReached:i,scrollToIndex:s},{didMount:a}])=>{const l=Oe(!0),u=Oe(0),d=Oe(!0);return Je(Ne(a,Nt(u),dt(([h,p])=>!!p),il(!1)),l),Je(Ne(a,Nt(u),dt(([h,p])=>!!p),il(!1)),d),on(Ne(Yr(e,a),Nt(l,n,t,d),dt(([[,h],p,{sizeTree:y},v,w])=>h&&(!Sn(y)||IP(v))&&!p&&!w),Nt(u)),([,h])=>{jo(i,()=>{At(d,!0)}),DP(4,()=>{jo(r,()=>{At(l,!0)}),At(s,h)})}),{initialItemFinalLocationReached:d,initialTopMostItemIndex:u,scrolledToInitialItem:l}},Wn(Al,Ts,kv,wd),{singleton:!0});function _te(t,e){return Math.abs(t-e)<1.01}const Ny="up",M0="down",p9e="none",g9e={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollHeight:0,scrollTop:0,viewportHeight:0}},y9e=0,Ov=Xt(([{footerHeight:t,headerHeight:e,scrollBy:n,scrollContainerState:r,scrollTop:i,viewportHeight:s}])=>{const a=Oe(!1),l=Oe(!0),u=Bt(),d=Bt(),h=Oe(4),p=Oe(y9e),y=is(Ne(MI(Ne(ut(i),Kh(1),il(!0)),Ne(ut(i),Kh(1),il(!1),Yz(100))),qn()),!1),v=is(Ne(MI(Ne(n,il(!0)),Ne(n,il(!1),Yz(200))),qn()),!1);Je(Ne(Yr(ut(i),ut(p)),Ue(([N,O])=>N<=O),qn()),l),Je(Ne(l,cc(50)),d);const w=ma(Ne(Yr(r,ut(s),ut(e),ut(t),ut(h)),ol((N,[{scrollHeight:O,scrollTop:R},D,P,A,k])=>{const M=R+D-O>-k,V={scrollHeight:O,scrollTop:R,viewportHeight:D};if(M){let z,$;return R>N.state.scrollTop?(z="SCROLLED_DOWN",$=N.state.scrollTop-R):(z="SIZE_DECREASED",$=N.state.scrollTop-R||N.scrollTopDelta),{atBottom:!0,atBottomBecause:z,scrollTopDelta:$,state:V}}let U;return V.scrollHeight>N.state.scrollHeight?U="SIZE_INCREASED":D<N.state.viewportHeight?U="VIEWPORT_HEIGHT_DECREASING":R<N.state.scrollTop?U="SCROLLING_UPWARDS":U="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:U,state:V}},g9e),qn((N,O)=>N&&N.atBottom===O.atBottom))),_=is(Ne(r,ol((N,{scrollHeight:O,scrollTop:R,viewportHeight:D})=>{if(_te(N.scrollHeight,O))return{changed:!1,jump:0,scrollHeight:O,scrollTop:R};{const P=O-(R+D)<1;return N.scrollTop!==R&&P?{changed:!0,jump:N.scrollTop-R,scrollHeight:O,scrollTop:R}:{changed:!0,jump:0,scrollHeight:O,scrollTop:R}}},{changed:!1,jump:0,scrollHeight:0,scrollTop:0}),dt(N=>N.changed),Ue(N=>N.jump)),0);Je(Ne(w,Ue(N=>N.atBottom)),a),Je(Ne(a,cc(50)),u);const E=Oe(M0);Je(Ne(r,Ue(({scrollTop:N})=>N),qn(),ol((N,O)=>Zn(v)?{direction:N.direction,prevScrollTop:O}:{direction:O<N.prevScrollTop?Ny:M0,prevScrollTop:O},{direction:M0,prevScrollTop:0}),Ue(N=>N.direction)),E),Je(Ne(r,cc(50),il(p9e)),E);const C=Oe(0);return Je(Ne(y,dt(N=>!N),il(0)),C),Je(Ne(i,cc(100),Nt(y),dt(([N,O])=>!!O),ol(([N,O],[R])=>[O,R],[0,0]),Ue(([N,O])=>O-N)),C),{atBottomState:w,atBottomStateChange:u,atBottomThreshold:h,atTopStateChange:d,atTopThreshold:p,isAtBottom:a,isAtTop:l,isScrolling:y,lastJumpDueToItemResize:_,scrollDirection:E,scrollVelocity:C}},Wn(Ts)),ky="top",Iy="bottom",Zz="none";function e$(t,e,n){return typeof t=="number"?n===Ny&&e===ky||n===M0&&e===Iy?t:0:n===Ny?e===ky?t.main:t.reverse:e===Iy?t.main:t.reverse}function t$(t,e){var n;return typeof t=="number"?t:(n=t[e])!=null?n:0}const LP=Xt(([{deviation:t,fixedHeaderHeight:e,headerHeight:n,scrollTop:r,viewportHeight:i}])=>{const s=Bt(),a=Oe(0),l=Oe(0),u=Oe(0),d=is(Ne(Yr(ut(r),ut(i),ut(n),ut(s,Cy),ut(u),ut(a),ut(e),ut(t),ut(l)),Ue(([h,p,y,[v,w],_,E,C,N,O])=>{const R=h-N,D=E+C,P=Math.max(y-R,0);let A=Zz;const k=t$(O,ky),M=t$(O,Iy);return v-=N,v+=y+C,w+=y+C,w-=N,v>h+D-k&&(A=Ny),w<h-P+p+M&&(A=M0),A!==Zz?[Math.max(R-y-e$(_,ky,A)-k,0),R-P-C+p+e$(_,Iy,A)+M]:null}),dt(h=>h!=null),qn(Cy)),[0,0]);return{increaseViewportBy:l,listBoundary:s,overscan:u,topListHeight:a,visibleRange:d}},Wn(Ts),{singleton:!0});function v9e(t,e,n){if(dE(e)){const r=vte(t,e);return[{index:Uo(e.groupOffsetTree,r)[0],offset:0,size:0},{data:n==null?void 0:n[0],index:r,offset:0,size:0}]}return[{data:n==null?void 0:n[0],index:t,offset:0,size:0}]}const JA={bottom:0,firstItemIndex:0,items:[],offsetBottom:0,offsetTop:0,top:0,topItems:[],topListHeight:0,totalCount:0};function ax(t,e,n,r,i,s){const{lastIndex:a,lastOffset:l,lastSize:u}=i;let d=0,h=0;if(t.length>0){d=t[0].offset;const _=t[t.length-1];h=_.offset+_.size}const p=n-a,y=l+p*u+(p-1)*r,v=d,w=y-h;return{bottom:h,firstItemIndex:s,items:n$(t,i,s),offsetBottom:w,offsetTop:d,top:v,topItems:n$(e,i,s),topListHeight:e.reduce((_,E)=>E.size+_,0),totalCount:n}}function Ete(t,e,n,r,i,s){let a=0;if(n.groupIndices.length>0)for(const h of n.groupIndices){if(h-a>=t)break;a++}const l=t+a,u=MP(e,l),d=Array.from({length:l}).map((h,p)=>({data:s[p+u],index:p+u,offset:0,size:0}));return ax(d,[],l,i,n,r)}function n$(t,e,n){if(t.length===0)return[];if(!dE(e))return t.map(d=>({...d,index:d.index+n,originalIndex:d.index}));const r=t[0].index,i=t[t.length-1].index,s=[],a=$m(e.groupOffsetTree,r,i);let l,u=0;for(const d of t){(!l||l.end<d.index)&&(l=a.shift(),u=e.groupIndices.indexOf(l.start));let h;d.index===l.start?h={index:u,type:"group"}:h={groupIndex:u,index:d.index-(u+1)+n},s.push({...h,data:d.data,offset:d.offset,originalIndex:d.index,size:d.size})}return s}function r$(t,e){var n;return t===void 0?0:typeof t=="number"?t:(n=t[e])!=null?n:0}const df=Xt(([{data:t,firstItemIndex:e,gap:n,sizes:r,totalCount:i},s,{listBoundary:a,topListHeight:l,visibleRange:u},{initialTopMostItemIndex:d,scrolledToInitialItem:h},{topListHeight:p},y,{didMount:v},{recalcInProgress:w}])=>{const _=Oe([]),E=Oe(0),C=Bt(),N=Oe(0);Je(s.topItemsIndexes,_);const O=is(Ne(Yr(v,w,ut(u,Cy),ut(i),ut(r),ut(d),h,ut(_),ut(e),ut(n),ut(N),t),dt(([A,k,,M,,,,,,,,V])=>{const U=V&&V.length!==M;return A&&!k&&!U}),Ue(([,,[A,k],M,V,U,z,$,ne,fe,K,W])=>{var ee,oe,pe,B;const X=V,{offsetTree:G,sizeTree:Q}=X,re=Zn(E);if(M===0)return{...JA,totalCount:M};if(A===0&&k===0)return re===0?{...JA,totalCount:M}:Ete(re,U,V,ne,fe,W||[]);if(Sn(Q))return re>0?null:ax(v9e(MP(U,M),X,W),[],M,fe,X,ne);const _e=[];if($.length>0){const ze=$[0],Ae=$[$.length-1];let Ze=0;for(const rt of $m(Q,ze,Ae)){const it=rt.value,Ke=Math.max(rt.start,ze),lt=Math.min(rt.end,Ae);for(let xt=Ke;xt<=lt;xt++)_e.push({data:W==null?void 0:W[xt],index:xt,offset:Ze,size:it}),Ze+=it}}if(!z)return ax([],_e,M,fe,X,ne);const Se=$.length>0?$[$.length-1]+1:0,ce=a9e(G,A,k,Se);if(ce.length===0)return null;const Z=M-1,ke=uE([],ze=>{for(const Ae of ce){const Ze=Ae.value;let rt=Ze.offset,it=Ae.start;const Ke=Ze.size;if(Ze.offset<A){it+=Math.floor((A-Ze.offset+fe)/(Ke+fe));const xt=it-Ae.start;rt+=xt*Ke+xt*fe}it<Se&&(rt+=(Se-it)*Ke,it=Se);const lt=Math.min(Ae.end,Z);for(let xt=it;xt<=lt&&!(rt>=k);xt++)ze.push({data:W==null?void 0:W[xt],index:xt,offset:rt,size:Ke}),rt+=Ke+fe}}),Le=r$(K,ky),ye=r$(K,Iy);if(ke.length>0&&(Le>0||ye>0)){const ze=ke[0],Ae=ke[ke.length-1];if(Le>0&&ze.index>Se){const Ze=Math.min(Le,ze.index-Se),rt=[];let it=ze.offset;for(let Ke=ze.index-1;Ke>=ze.index-Ze;Ke--){const lt=(oe=(ee=$m(Q,Ke,Ke)[0])==null?void 0:ee.value)!=null?oe:ze.size;it-=lt+fe,rt.unshift({data:W==null?void 0:W[Ke],index:Ke,offset:it,size:lt})}ke.unshift(...rt)}if(ye>0&&Ae.index<Z){const Ze=Math.min(ye,Z-Ae.index);let rt=Ae.offset+Ae.size+fe;for(let it=Ae.index+1;it<=Ae.index+Ze;it++){const Ke=(B=(pe=$m(Q,it,it)[0])==null?void 0:pe.value)!=null?B:Ae.size;ke.push({data:W==null?void 0:W[it],index:it,offset:rt,size:Ke}),rt+=Ke+fe}}}return ax(ke,_e,M,fe,X,ne)}),dt(A=>A!==null),qn()),JA);Je(Ne(t,dt(IP),Ue(A=>A==null?void 0:A.length)),i),Je(Ne(O,Ue(A=>A.topListHeight)),p),Je(p,l),Je(Ne(O,Ue(A=>[A.top,A.bottom])),a),Je(Ne(O,Ue(A=>A.items)),C);const R=ma(Ne(O,dt(({items:A})=>A.length>0),Nt(i,t),dt(([{items:A},k])=>A[A.length-1].originalIndex===k-1),Ue(([,A,k])=>[A-1,k]),qn(Cy),Ue(([A])=>A))),D=ma(Ne(O,cc(200),dt(({items:A,topItems:k})=>A.length>0&&A[0].originalIndex===k.length),Ue(({items:A})=>A[0].index),qn())),P=ma(Ne(O,dt(({items:A})=>A.length>0),Ue(({items:A})=>{let k=0,M=A.length-1;for(;A[k].type==="group"&&k<M;)k++;for(;A[M].type==="group"&&M>k;)M--;return{endIndex:A[M].index,startIndex:A[k].index}}),qn(gte)));return{endReached:R,initialItemCount:E,itemsRendered:C,listState:O,minOverscanItemCount:N,rangeChanged:P,startReached:D,topItemsIndexes:_,...y}},Wn(Al,wte,LP,Iv,kv,Ov,wd,PP),{singleton:!0}),Tte=Xt(([{fixedFooterHeight:t,fixedHeaderHeight:e,footerHeight:n,headerHeight:r},{listState:i}])=>{const s=Bt(),a=is(Ne(Yr(n,t,r,e,i),Ue(([l,u,d,h,p])=>l+u+d+h+p.offsetBottom+p.bottom)),0);return Je(ut(a),s),{totalListHeight:a,totalListHeightChanged:s}},Wn(Ts,df),{singleton:!0}),b9e=Xt(([{viewportHeight:t},{totalListHeight:e}])=>{const n=Oe(!1),r=is(Ne(Yr(n,t,e),dt(([i])=>i),Ue(([,i,s])=>Math.max(0,i-s)),cc(0),qn()),0);return{alignToBottom:n,paddingTopAddition:r}},Wn(Ts,Tte),{singleton:!0}),Ste=Xt(()=>({context:Oe(null)})),w9e=({itemBottom:t,itemTop:e,locationParams:{align:n,behavior:r,...i},viewportBottom:s,viewportTop:a})=>e<a?{...i,align:n??"start",behavior:r}:t>s?{...i,align:n??"end",behavior:r}:null,Cte=Xt(([{gap:t,sizes:e,totalCount:n},{fixedFooterHeight:r,fixedHeaderHeight:i,headerHeight:s,scrollingInProgress:a,scrollTop:l,viewportHeight:u},{scrollToIndex:d}])=>{const h=Bt();return Je(Ne(h,Nt(e,u,n,s,i,r,l),Nt(t),Ue(([[p,y,v,w,_,E,C,N],O])=>{const{align:R,behavior:D,calculateViewLocation:P=w9e,done:A,...k}=p,M=bte(p,y,w-1),V=Ay(M,y.offsetTree,O)+_+E,U=V+Uo(y.sizeTree,M)[1],z=N+E,$=N+v-C,ne=P({itemBottom:U,itemTop:V,locationParams:{align:R,behavior:D,...k},viewportBottom:$,viewportTop:z});return ne?A&&jo(Ne(a,dt(fe=>!fe),Kh(Zn(a)?1:2)),A):A&&A(),ne}),dt(p=>p!==null)),d),{scrollIntoView:h}},Wn(Al,Ts,kv,df,bd),{singleton:!0});function i$(t){return t?t==="smooth"?"smooth":"auto":!1}const x9e=(t,e)=>typeof t=="function"?i$(t(e)):e&&i$(t),_9e=Xt(([{listRefresh:t,totalCount:e,fixedItemSize:n,data:r},{atBottomState:i,isAtBottom:s},{scrollToIndex:a},{scrolledToInitialItem:l},{didMount:u,propsReady:d},{log:h},{scrollingInProgress:p},{context:y},{scrollIntoView:v}])=>{const w=Oe(!1),_=Bt();let E=null;function C(D){At(a,{align:"end",behavior:D,index:"LAST"})}on(Ne(Yr(Ne(ut(e),Kh(1)),u),Nt(ut(w),s,l,p),Ue(([[D,P],A,k,M,V])=>{let U=P&&M,z="auto";return U&&(z=x9e(A,k||V),U=U&&!!z),{followOutputBehavior:z,shouldFollow:U,totalCount:D}}),dt(({shouldFollow:D})=>D)),({followOutputBehavior:D,totalCount:P})=>{E&&(E(),E=null),Zn(n)?requestAnimationFrame(()=>{Zn(h)("following output to ",{totalCount:P},Hs.DEBUG),C(D)}):E=jo(t,()=>{Zn(h)("following output to ",{totalCount:P},Hs.DEBUG),C(D),E=null})});function N(D){const P=jo(i,A=>{D&&!A.atBottom&&A.notAtBottomBecause==="SIZE_INCREASED"&&!E&&(Zn(h)("scrolling to bottom due to increased size",{},Hs.DEBUG),C("auto"))});setTimeout(P,100)}on(Ne(Yr(ut(w),e,d),dt(([D,,P])=>D&&P),ol(({value:D},[,P])=>({refreshed:D===P,value:P}),{refreshed:!1,value:0}),dt(({refreshed:D})=>D),Nt(w,e)),([,D])=>{Zn(l)&&N(D!==!1)}),on(_,()=>{N(Zn(w)!==!1)}),on(Yr(ut(w),i),([D,P])=>{D&&!P.atBottom&&P.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&C("auto")});const O=Oe(null),R=Bt();return Je(MI(Ne(ut(r),Ue(D=>{var P;return(P=D==null?void 0:D.length)!=null?P:0})),Ne(ut(e))),R),on(Ne(Yr(Ne(R,Kh(1)),u),Nt(ut(O),l,p,y),Ue(([[D,P],A,k,M,V])=>P&&k&&(A==null?void 0:A({context:V,totalCount:D,scrollingInProgress:M}))),dt(D=>!!D),cc(0)),D=>{E&&(E(),E=null),Zn(n)?requestAnimationFrame(()=>{Zn(h)("scrolling into view",{}),At(v,D)}):E=jo(t,()=>{Zn(h)("scrolling into view",{}),At(v,D),E=null})}),{autoscrollToBottom:_,followOutput:w,scrollIntoViewOnChange:O}},Wn(Al,Ov,kv,Iv,wd,bd,Ts,Ste,Cte)),E9e=Xt(([{data:t,firstItemIndex:e,gap:n,sizes:r},{initialTopMostItemIndex:i},{initialItemCount:s,listState:a},{didMount:l}])=>(Je(Ne(l,Nt(s),dt(([,u])=>u!==0),Nt(i,r,e,n,t),Ue(([[,u],d,h,p,y,v=[]])=>Ete(u,d,h,p,y,v))),a),{}),Wn(Al,Iv,df,wd),{singleton:!0}),T9e=Xt(([{didMount:t},{scrollTo:e},{listState:n}])=>{const r=Oe(0);return on(Ne(t,Nt(r),dt(([,i])=>i!==0),Ue(([,i])=>({top:i}))),i=>{jo(Ne(n,Kh(1),dt(s=>s.items.length>1)),()=>{requestAnimationFrame(()=>{At(e,i)})})}),{initialScrollTop:r}},Wn(wd,Ts,df),{singleton:!0}),Ate=Xt(([{scrollVelocity:t}])=>{const e=Oe(!1),n=Bt(),r=Oe(!1);return Je(Ne(t,Nt(r,e,n),dt(([i,s])=>!!s),Ue(([i,s,a,l])=>{const{enter:u,exit:d}=s;if(a){if(d(i,l))return!1}else if(u(i,l))return!0;return a}),qn()),e),on(Ne(Yr(e,t,n),Nt(r)),([[i,s,a],l])=>{i&&l&&l.change&&l.change(s,a)}),{isSeeking:e,scrollSeekConfiguration:r,scrollSeekRangeChanged:n,scrollVelocity:t}},Wn(Ov),{singleton:!0}),VP=Xt(([{scrollContainerState:t,scrollTo:e}])=>{const n=Bt(),r=Bt(),i=Bt(),s=Oe(!1),a=Oe(void 0);return Je(Ne(Yr(n,r),Ue(([{scrollHeight:l,scrollTop:u,viewportHeight:d},{offsetTop:h}])=>({scrollHeight:l,scrollTop:Math.max(0,u-h),viewportHeight:d}))),t),Je(Ne(e,Nt(r),Ue(([l,{offsetTop:u}])=>({...l,top:l.top+u}))),i),{customScrollParent:a,useWindowScroll:s,windowScrollContainerState:n,windowScrollTo:i,windowViewportRect:r}},Wn(Ts)),S9e=Xt(([{sizeRanges:t,sizes:e},{headerHeight:n,scrollTop:r},{initialTopMostItemIndex:i},{didMount:s},{useWindowScroll:a,windowScrollContainerState:l,windowViewportRect:u}])=>{const d=Bt(),h=Oe(void 0),p=Oe(null),y=Oe(null);return Je(l,p),Je(u,y),on(Ne(d,Nt(e,r,a,p,y,n)),([v,w,_,E,C,N,O])=>{const R=l9e(w.sizeTree);E&&C!==null&&N!==null&&(_=C.scrollTop-N.offsetTop),_-=O,v({ranges:R,scrollTop:_})}),Je(Ne(h,dt(IP),Ue(C9e)),i),Je(Ne(s,Nt(h),dt(([,v])=>v!==void 0),qn(),Ue(([,v])=>v.ranges)),t),{getState:d,restoreStateFrom:h}},Wn(Al,Ts,Iv,wd,VP));function C9e(t){return{align:"start",index:0,offset:t.scrollTop}}const A9e=Xt(([{topItemsIndexes:t}])=>{const e=Oe(0);return Je(Ne(e,dt(n=>n>=0),Ue(n=>Array.from({length:n}).map((r,i)=>i))),t),{topItemCount:e}},Wn(df));function Nte(t){let e=!1,n;return()=>(e||(e=!0,n=t()),n)}const N9e=Nte(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),k9e=Xt(([{deviation:t,scrollBy:e,scrollingInProgress:n,scrollTop:r},{isAtBottom:i,isScrolling:s,lastJumpDueToItemResize:a,scrollDirection:l},{listState:u},{beforeUnshiftWith:d,gap:h,shiftWithOffset:p,sizes:y},{log:v},{recalcInProgress:w}])=>{const _=ma(Ne(u,Nt(a),ol(([,C,N,O],[{bottom:R,items:D,offsetBottom:P,totalCount:A},k])=>{const M=R+P;let V=0;return N===A&&C.length>0&&D.length>0&&(D[0].originalIndex===0&&C[0].originalIndex===0||(V=M-O,V!==0&&(V+=k))),[V,D,A,M]},[0,[],0,0]),dt(([C])=>C!==0),Nt(r,l,n,i,v,w),dt(([,C,N,O,,,R])=>!R&&!O&&C!==0&&N===Ny),Ue(([[C],,,,,N])=>(N("Upward scrolling compensation",{amount:C},Hs.DEBUG),C))));function E(C){C>0?(At(e,{behavior:"auto",top:-C}),At(t,0)):(At(t,0),At(e,{behavior:"auto",top:-C}))}return on(Ne(_,Nt(t,s)),([C,N,O])=>{O&&N9e()?At(t,N-C):E(-C)}),on(Ne(Yr(is(s,!1),t,w),dt(([C,N,O])=>!C&&!O&&N!==0),Ue(([C,N])=>N),cc(1)),E),Je(Ne(p,Ue(C=>({top:-C}))),e),on(Ne(d,Nt(y,h),Ue(([C,{groupIndices:N,lastSize:O,sizeTree:R},D])=>{function P(A){return A*(O+D)}if(N.length===0)return P(C);{let A=0;const k=Sy(R,0);let M=0,V=0;for(;M<C;){M++,A+=k;let U=N.length===V+1?1/0:N[V+1]-N[V]-1;M+U>C&&(A-=k,U=C-M+1),M+=U,A+=P(U),V++}return A}})),C=>{At(t,C),requestAnimationFrame(()=>{At(e,{top:C}),requestAnimationFrame(()=>{At(t,0),At(w,!1)})})}),{deviation:t}},Wn(Ts,Ov,df,Al,bd,PP)),I9e=Xt(([t,e,n,r,i,s,a,l,u,d,h])=>({...t,...e,...n,...r,...i,...s,...a,...l,...u,...d,...h}),Wn(LP,E9e,wd,Ate,Tte,T9e,b9e,VP,Cte,bd,Ste)),kte=Xt(([{data:t,defaultItemSize:e,firstItemIndex:n,fixedItemSize:r,fixedGroupSize:i,gap:s,groupIndices:a,heightEstimates:l,itemSize:u,sizeRanges:d,sizes:h,statefulTotalCount:p,totalCount:y,trackItemSizes:v},{initialItemFinalLocationReached:w,initialTopMostItemIndex:_,scrolledToInitialItem:E},C,N,O,R,{scrollToIndex:D},P,{topItemCount:A},{groupCounts:k},M])=>{const{listState:V,minOverscanItemCount:U,topItemsIndexes:z,rangeChanged:$,...ne}=R;return Je($,M.scrollSeekRangeChanged),Je(Ne(M.windowViewportRect,Ue(fe=>fe.visibleHeight)),C.viewportHeight),{data:t,defaultItemHeight:e,firstItemIndex:n,fixedItemHeight:r,fixedGroupHeight:i,gap:s,groupCounts:k,heightEstimates:l,initialItemFinalLocationReached:w,initialTopMostItemIndex:_,scrolledToInitialItem:E,sizeRanges:d,topItemCount:A,topItemsIndexes:z,totalCount:y,...O,groupIndices:a,itemSize:u,listState:V,minOverscanItemCount:U,scrollToIndex:D,statefulTotalCount:p,trackItemSizes:v,rangeChanged:$,...ne,...M,...C,sizes:h,...N}},Wn(Al,Iv,Ts,S9e,_9e,df,kv,k9e,A9e,wte,I9e));function O9e(t,e){const n={},r={};let i=0;const s=t.length;for(;i<s;)r[t[i]]=1,i+=1;for(const a in e)Object.hasOwn(r,a)||(n[a]=e[a]);return n}const Dw=typeof document<"u"?ue.useLayoutEffect:ue.useEffect;function Ite(t,e,n){const r=Object.keys(e.required||{}),i=Object.keys(e.optional||{}),s=Object.keys(e.methods||{}),a=Object.keys(e.events||{}),l=ue.createContext({});function u(E,C){E.propsReady&&At(E.propsReady,!1);for(const N of r){const O=E[e.required[N]];At(O,C[N])}for(const N of i)if(N in C){const O=E[e.optional[N]];At(O,C[N])}E.propsReady&&At(E.propsReady,!0)}function d(E){return s.reduce((C,N)=>(C[N]=O=>{const R=E[e.methods[N]];At(R,O)},C),{})}function h(E){return a.reduce((C,N)=>(C[N]=W7e(E[e.events[N]]),C),{})}const p=ue.forwardRef((E,C)=>{const{children:N,...O}=E,[R]=ue.useState(()=>uE(Y7e(t),A=>{u(A,O)})),[D]=ue.useState(Kz(h,R));Dw(()=>{for(const A of a)A in O&&on(D[A],O[A]);return()=>{Object.values(D).map(OP)}},[O,D,R]),Dw(()=>{u(R,O)}),ue.useImperativeHandle(C,Wz(d(R)));const P=n;return m.jsx(l.Provider,{value:R,children:n?m.jsx(P,{...O9e([...r,...i,...a],O),children:N}):N})}),y=E=>{const C=ue.useContext(l);return ue.useCallback(N=>{At(C[E],N)},[C,E])},v=E=>{const C=ue.useContext(l)[E],N=ue.useCallback(O=>on(C,O),[C]);return ue.useSyncExternalStore(N,()=>Zn(C),()=>Zn(C))},w=E=>{const C=ue.useContext(l)[E],[N,O]=ue.useState(Kz(Zn,C));return Dw(()=>on(C,R=>{R!==N&&O(Wz(R))}),[C,N]),N},_=ue.version.startsWith("18")?v:w;return{Component:p,useEmitter:(E,C)=>{const N=ue.useContext(l)[E];Dw(()=>on(N,C),[C,N])},useEmitterValue:_,usePublisher:y}}const Ote=ue.createContext(void 0),jte=ue.createContext(void 0),Pte=typeof document<"u"?ue.useLayoutEffect:ue.useEffect;function ZA(t){return"self"in t}function j9e(t){return"body"in t}function Rte(t,e,n,r=ng,i,s){const a=ue.useRef(null),l=ue.useRef(null),u=ue.useRef(null),d=ue.useCallback(y=>{let v,w,_;const E=y.target;if(j9e(E)||ZA(E)){const N=ZA(E)?E:E.defaultView;_=s?N.scrollX:N.scrollY,v=s?N.document.documentElement.scrollWidth:N.document.documentElement.scrollHeight,w=s?N.innerWidth:N.innerHeight}else _=s?E.scrollLeft:E.scrollTop,v=s?E.scrollWidth:E.scrollHeight,w=s?E.offsetWidth:E.offsetHeight;const C=()=>{t({scrollHeight:v,scrollTop:Math.max(_,0),viewportHeight:w})};y.suppressFlushSync?C():nH.flushSync(C),l.current!==null&&(_===l.current||_<=0||_===v-w)&&(l.current=null,e(!0),u.current&&(clearTimeout(u.current),u.current=null))},[t,e,s]);ue.useEffect(()=>{const y=i||a.current;return r(i||a.current),d({suppressFlushSync:!0,target:y}),y.addEventListener("scroll",d,{passive:!0}),()=>{r(null),y.removeEventListener("scroll",d)}},[a,d,n,r,i]);function h(y){const v=a.current;if(!v||(s?"offsetWidth"in v&&v.offsetWidth===0:"offsetHeight"in v&&v.offsetHeight===0))return;const w=y.behavior==="smooth";let _,E,C;ZA(v)?(E=Math.max(od(v.document.documentElement,s?"width":"height"),s?v.document.documentElement.scrollWidth:v.document.documentElement.scrollHeight),_=s?v.innerWidth:v.innerHeight,C=s?window.scrollX:window.scrollY):(E=v[s?"scrollWidth":"scrollHeight"],_=od(v,s?"width":"height"),C=v[s?"scrollLeft":"scrollTop"]);const N=E-_;if(y.top=Math.ceil(Math.max(Math.min(N,y.top),0)),_te(_,E)||y.top===C){t({scrollHeight:E,scrollTop:C,viewportHeight:_}),w&&e(!0);return}w?(l.current=y.top,u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{u.current=null,l.current=null,e(!0)},1e3)):l.current=null,s&&(y={behavior:y.behavior,left:y.top}),v.scrollTo(y)}function p(y){s&&(y={behavior:y.behavior,left:y.top}),a.current.scrollBy(y)}return{scrollByCallback:p,scrollerRef:a,scrollToCallback:h}}const eN="-webkit-sticky",s$="sticky",UP=Nte(()=>{if(typeof document>"u")return s$;const t=document.createElement("div");return t.style.position=eN,t.style.position===eN?eN:s$});function BP(t){return t}const P9e=Xt(()=>{const t=Oe(l=>`Item ${l}`),e=Oe(l=>`Group ${l}`),n=Oe({}),r=Oe(BP),i=Oe("div"),s=Oe(ng),a=(l,u=null)=>is(Ne(n,Ue(d=>d[l]),qn()),u);return{components:n,computeItemKey:r,EmptyPlaceholder:a("EmptyPlaceholder"),FooterComponent:a("Footer"),GroupComponent:a("Group","div"),groupContent:e,HeaderComponent:a("Header"),HeaderFooterTag:i,ItemComponent:a("Item","div"),itemContent:t,ListComponent:a("List","div"),ScrollerComponent:a("Scroller","div"),scrollerRef:s,ScrollSeekPlaceholder:a("ScrollSeekPlaceholder"),TopItemListComponent:a("TopItemList")}}),R9e=Xt(([t,e])=>({...t,...e}),Wn(kte,P9e)),D9e=({height:t})=>m.jsx("div",{style:{height:t}}),M9e={overflowAnchor:"none",position:UP(),zIndex:1},Dte={overflowAnchor:"none"},L9e={...Dte,display:"inline-block",height:"100%"},a$=ue.memo(function({showTopList:t=!1}){const e=bt("listState"),n=Wa("sizeRanges"),r=bt("useWindowScroll"),i=bt("customScrollParent"),s=Wa("windowScrollContainerState"),a=Wa("scrollContainerState"),l=i||r?s:a,u=bt("itemContent"),d=bt("context"),h=bt("groupContent"),p=bt("trackItemSizes"),y=bt("itemSize"),v=bt("log"),w=Wa("gap"),_=bt("horizontalDirection"),{callbackRef:E}=J7e(n,y,p,t?ng:l,v,w,i,_,bt("skipAnimationFrameInResizeObserver")),[C,N]=ue.useState(0);zP("deviation",ne=>{C!==ne&&N(ne)});const O=bt("EmptyPlaceholder"),R=bt("ScrollSeekPlaceholder")||D9e,D=bt("ListComponent"),P=bt("ItemComponent"),A=bt("GroupComponent"),k=bt("computeItemKey"),M=bt("isSeeking"),V=bt("groupIndices").length>0,U=bt("alignToBottom"),z=bt("initialItemFinalLocationReached"),$=t?{}:{boxSizing:"border-box",..._?{display:"inline-block",height:"100%",marginLeft:C!==0?C:U?"auto":0,paddingLeft:e.offsetTop,paddingRight:e.offsetBottom,whiteSpace:"nowrap"}:{marginTop:C!==0?C:U?"auto":0,paddingBottom:e.offsetBottom,paddingTop:e.offsetTop},...z?{}:{visibility:"hidden"}};return!t&&e.totalCount===0&&O?m.jsx(O,{...ts(O,d)}):m.jsx(D,{...ts(D,d),"data-testid":t?"virtuoso-top-item-list":"virtuoso-item-list",ref:E,style:$,children:(t?e.topItems:e.items).map(ne=>{const fe=ne.originalIndex,K=k(fe+e.firstItemIndex,ne.data,d);return M?S.createElement(R,{...ts(R,d),height:ne.size,index:ne.index,key:K,type:ne.type||"item",...ne.type==="group"?{}:{groupIndex:ne.groupIndex}}):ne.type==="group"?S.createElement(A,{...ts(A,d),"data-index":fe,"data-item-index":ne.index,"data-known-size":ne.size,key:K,style:M9e},h(ne.index,d)):S.createElement(P,{...ts(P,d),...z9e(P,ne.data),"data-index":fe,"data-item-group-index":ne.groupIndex,"data-item-index":ne.index,"data-known-size":ne.size,key:K,style:_?L9e:Dte},V?u(ne.index,ne.groupIndex,ne.data,d):u(ne.index,ne.data,d))})})}),V9e={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},U9e={outline:"none",overflowX:"auto",position:"relative"},hE=t=>({height:"100%",position:"absolute",top:0,width:"100%",...t?{display:"flex",flexDirection:"column"}:{}}),B9e={position:UP(),top:0,width:"100%",zIndex:1};function ts(t,e){if(typeof t!="string")return{context:e}}function z9e(t,e){return{item:typeof t=="string"?void 0:e}}const $9e=ue.memo(function(){const t=bt("HeaderComponent"),e=Wa("headerHeight"),n=bt("HeaderFooterTag"),r=uf(ue.useMemo(()=>s=>{e(od(s,"height"))},[e]),!0,bt("skipAnimationFrameInResizeObserver")),i=bt("context");return t?m.jsx(n,{ref:r,children:m.jsx(t,{...ts(t,i)})}):null}),F9e=ue.memo(function(){const t=bt("FooterComponent"),e=Wa("footerHeight"),n=bt("HeaderFooterTag"),r=uf(ue.useMemo(()=>s=>{e(od(s,"height"))},[e]),!0,bt("skipAnimationFrameInResizeObserver")),i=bt("context");return t?m.jsx(n,{ref:r,children:m.jsx(t,{...ts(t,i)})}):null});function Mte({useEmitter:t,useEmitterValue:e,usePublisher:n}){return ue.memo(function({children:r,style:i,context:s,...a}){const l=n("scrollContainerState"),u=e("ScrollerComponent"),d=n("smoothScrollTargetReached"),h=e("scrollerRef"),p=e("horizontalDirection")||!1,{scrollByCallback:y,scrollerRef:v,scrollToCallback:w}=Rte(l,d,u,h,void 0,p);return t("scrollTo",w),t("scrollBy",y),m.jsx(u,{"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,ref:v,style:{...p?U9e:V9e,...i},tabIndex:0,...a,...ts(u,s),children:r})})}function Lte({useEmitter:t,useEmitterValue:e,usePublisher:n}){return ue.memo(function({children:r,style:i,context:s,...a}){const l=n("windowScrollContainerState"),u=e("ScrollerComponent"),d=n("smoothScrollTargetReached"),h=e("totalListHeight"),p=e("deviation"),y=e("customScrollParent"),v=ue.useRef(null),w=e("scrollerRef"),{scrollByCallback:_,scrollerRef:E,scrollToCallback:C}=Rte(l,d,u,w,y);return Pte(()=>{var N;return E.current=y||((N=v.current)==null?void 0:N.ownerDocument.defaultView),()=>{E.current=null}},[E,y]),t("windowScrollTo",C),t("scrollBy",_),m.jsx(u,{ref:v,"data-virtuoso-scroller":!0,style:{position:"relative",...i,...h!==0?{height:h+p}:{}},...a,...ts(u,s),children:r})})}const H9e=({children:t})=>{const e=ue.useContext(Ote),n=Wa("viewportHeight"),r=Wa("fixedItemHeight"),i=bt("alignToBottom"),s=bt("horizontalDirection"),a=ue.useMemo(()=>lte(n,u=>od(u,s?"width":"height")),[n,s]),l=uf(a,!0,bt("skipAnimationFrameInResizeObserver"));return ue.useEffect(()=>{e&&(n(e.viewportHeight),r(e.itemHeight))},[e,n,r]),m.jsx("div",{"data-viewport-type":"element",ref:l,style:hE(i),children:t})},q9e=({children:t})=>{const e=ue.useContext(Ote),n=Wa("windowViewportRect"),r=Wa("fixedItemHeight"),i=bt("customScrollParent"),s=ute(n,i,bt("skipAnimationFrameInResizeObserver")),a=bt("alignToBottom");return ue.useEffect(()=>{e&&(r(e.itemHeight),n({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:100}))},[e,n,r]),m.jsx("div",{"data-viewport-type":"window",ref:s,style:hE(a),children:t})},G9e=({children:t})=>{const e=bt("TopItemListComponent")||"div",n=bt("headerHeight"),r={...B9e,marginTop:`${n}px`},i=bt("context");return m.jsx(e,{style:r,...ts(e,i),children:t})},W9e=ue.memo(function(t){const e=bt("useWindowScroll"),n=bt("topItemsIndexes").length>0,r=bt("customScrollParent"),i=bt("context");return m.jsxs(r||e?X9e:Y9e,{...t,context:i,children:[n&&m.jsx(G9e,{children:m.jsx(a$,{showTopList:!0})}),m.jsxs(r||e?q9e:H9e,{children:[m.jsx($9e,{}),m.jsx(a$,{}),m.jsx(F9e,{})]})]})}),{Component:K9e,useEmitter:zP,useEmitterValue:bt,usePublisher:Wa}=Ite(R9e,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",scrollIntoViewOnChange:"scrollIntoViewOnChange",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",minOverscanItemCount:"minOverscanItemCount",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedGroupHeight:"fixedGroupHeight",fixedItemHeight:"fixedItemHeight",heightEstimates:"heightEstimates",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"HeaderFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",horizontalDirection:"horizontalDirection",skipAnimationFrameInResizeObserver:"skipAnimationFrameInResizeObserver"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},W9e),Y9e=Mte({useEmitter:zP,useEmitterValue:bt,usePublisher:Wa}),X9e=Lte({useEmitter:zP,useEmitterValue:bt,usePublisher:Wa}),Q9e=K9e,J9e=Xt(()=>{const t=Oe(d=>m.jsxs("td",{children:["Item $",d]})),e=Oe(null),n=Oe(d=>m.jsxs("td",{colSpan:1e3,children:["Group ",d]})),r=Oe(null),i=Oe(null),s=Oe({}),a=Oe(BP),l=Oe(ng),u=(d,h=null)=>is(Ne(s,Ue(p=>p[d]),qn()),h);return{components:s,computeItemKey:a,context:e,EmptyPlaceholder:u("EmptyPlaceholder"),FillerRow:u("FillerRow"),fixedFooterContent:i,fixedHeaderContent:r,itemContent:t,groupContent:n,ScrollerComponent:u("Scroller","div"),scrollerRef:l,ScrollSeekPlaceholder:u("ScrollSeekPlaceholder"),TableBodyComponent:u("TableBody","tbody"),TableComponent:u("Table","table"),TableFooterComponent:u("TableFoot","tfoot"),TableHeadComponent:u("TableHead","thead"),TableRowComponent:u("TableRow","tr"),GroupComponent:u("Group","tr")}});Wn(kte,J9e);UP();const o$={bottom:0,itemHeight:0,items:[],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},Z9e={bottom:0,itemHeight:0,items:[{index:0}],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},{ceil:l$,floor:h_,max:L0,min:tN,round:c$}=Math;function u$(t,e,n){return Array.from({length:e-t+1}).map((r,i)=>({data:n===null?null:n[i+t],index:i+t}))}function eVe(t){return{...Z9e,items:t}}function Mw(t,e){return t&&t.width===e.width&&t.height===e.height}function tVe(t,e){return t&&t.column===e.column&&t.row===e.row}const nVe=Xt(([{increaseViewportBy:t,listBoundary:e,overscan:n,visibleRange:r},{footerHeight:i,headerHeight:s,scrollBy:a,scrollContainerState:l,scrollTo:u,scrollTop:d,smoothScrollTargetReached:h,viewportHeight:p},y,v,{didMount:w,propsReady:_},{customScrollParent:E,useWindowScroll:C,windowScrollContainerState:N,windowScrollTo:O,windowViewportRect:R},D])=>{const P=Oe(0),A=Oe(0),k=Oe(o$),M=Oe({height:0,width:0}),V=Oe({height:0,width:0}),U=Bt(),z=Bt(),$=Oe(0),ne=Oe(null),fe=Oe({column:0,row:0}),K=Bt(),W=Bt(),ee=Oe(!1),oe=Oe(0),pe=Oe(!0),B=Oe(!1),X=Oe(!1);on(Ne(w,Nt(oe),dt(([ce,Z])=>!!Z)),()=>{At(pe,!1)}),on(Ne(Yr(w,pe,V,M,oe,B),dt(([ce,Z,ke,Le,,ye])=>ce&&!Z&&ke.height!==0&&Le.height!==0&&!ye)),([,,,,ce])=>{At(B,!0),DP(1,()=>{At(U,ce)}),jo(Ne(d),()=>{At(e,[0,0]),At(pe,!0)})}),Je(Ne(W,dt(ce=>ce!=null&&ce.scrollTop>0),il(0)),A),on(Ne(w,Nt(W),dt(([,ce])=>ce!=null)),([,ce])=>{ce&&(At(M,ce.viewport),At(V,ce.item),At(fe,ce.gap),ce.scrollTop>0&&(At(ee,!0),jo(Ne(d,Kh(1)),Z=>{At(ee,!1)}),At(u,{top:ce.scrollTop})))}),Je(Ne(M,Ue(({height:ce})=>ce)),p),Je(Ne(Yr(ut(M,Mw),ut(V,Mw),ut(fe,(ce,Z)=>ce&&ce.column===Z.column&&ce.row===Z.row),ut(d)),Ue(([ce,Z,ke,Le])=>({gap:ke,item:Z,scrollTop:Le,viewport:ce}))),K),Je(Ne(Yr(ut(P),r,ut(fe,tVe),ut(V,Mw),ut(M,Mw),ut(ne),ut(A),ut(ee),ut(pe),ut(oe)),dt(([,,,,,,,ce])=>!ce),Ue(([ce,[Z,ke],Le,ye,ze,Ae,Ze,,rt,it])=>{const{column:Ke,row:lt}=Le,{height:xt,width:Sr}=ye,{width:Un}=ze;if(Ze===0&&(ce===0||Un===0))return o$;if(Sr===0){const gn=MP(it,ce),Ft=gn+Math.max(Ze-1,0);return eVe(u$(gn,Ft,Ae))}const hr=Vte(Un,Sr,Ke);let Ht,fr;rt?Z===0&&ke===0&&Ze>0?(Ht=0,fr=Ze-1):(Ht=hr*h_((Z+lt)/(xt+lt)),fr=hr*l$((ke+lt)/(xt+lt))-1,fr=tN(ce-1,L0(fr,hr-1)),Ht=tN(fr,L0(0,Ht))):(Ht=0,fr=-1);const ei=u$(Ht,fr,Ae),{bottom:cs,top:se}=d$(ze,Le,ye,ei),Ie=l$(ce/hr),mt=Ie*xt+(Ie-1)*lt-cs;return{bottom:cs,itemHeight:xt,items:ei,itemWidth:Sr,offsetBottom:mt,offsetTop:se,top:se}})),k),Je(Ne(ne,dt(ce=>ce!==null),Ue(ce=>ce.length)),P),Je(Ne(Yr(M,V,k,fe),dt(([ce,Z,{items:ke}])=>ke.length>0&&Z.height!==0&&ce.height!==0),Ue(([ce,Z,{items:ke},Le])=>{const{bottom:ye,top:ze}=d$(ce,Le,Z,ke);return[ze,ye]}),qn(Cy)),e);const G=Oe(!1);Je(Ne(d,Nt(G),Ue(([ce,Z])=>Z||ce!==0)),G);const Q=ma(Ne(Yr(k,P),dt(([{items:ce}])=>ce.length>0),Nt(G),dt(([[ce,Z],ke])=>{const Le=ce.items[ce.items.length-1].index===Z-1;return(ke||ce.bottom>0&&ce.itemHeight>0&&ce.offsetBottom===0&&ce.items.length===Z)&&Le}),Ue(([[,ce]])=>ce-1),qn())),re=ma(Ne(ut(k),dt(({items:ce})=>ce.length>0&&ce[0].index===0),il(0),qn())),_e=ma(Ne(ut(k),Nt(ee),dt(([{items:ce},Z])=>ce.length>0&&!Z),Ue(([{items:ce}])=>({endIndex:ce[ce.length-1].index,startIndex:ce[0].index})),qn(gte),cc(0)));Je(_e,v.scrollSeekRangeChanged),Je(Ne(U,Nt(M,V,P,fe),Ue(([ce,Z,ke,Le,ye])=>{const ze=xte(ce),{align:Ae,behavior:Ze,offset:rt}=ze;let it=ze.index;it==="LAST"&&(it=Le-1),it=L0(0,it,tN(Le-1,it));let Ke=zI(Z,ye,ke,it);return Ae==="end"?Ke=c$(Ke-Z.height+ke.height):Ae==="center"&&(Ke=c$(Ke-Z.height/2+ke.height/2)),rt&&(Ke+=rt),{behavior:Ze,top:Ke}})),u);const Se=is(Ne(k,Ue(ce=>ce.offsetBottom+ce.bottom)),0);return Je(Ne(R,Ue(ce=>({height:ce.visibleHeight,width:ce.visibleWidth}))),M),{customScrollParent:E,data:ne,deviation:$,footerHeight:i,gap:fe,headerHeight:s,increaseViewportBy:t,initialItemCount:A,itemDimensions:V,overscan:n,restoreStateFrom:W,scrollBy:a,scrollContainerState:l,scrollHeight:z,scrollTo:u,scrollToIndex:U,scrollTop:d,smoothScrollTargetReached:h,totalCount:P,useWindowScroll:C,viewportDimensions:M,windowScrollContainerState:N,windowScrollTo:O,windowViewportRect:R,...v,gridState:k,horizontalDirection:X,initialTopMostItemIndex:oe,totalListHeight:Se,...y,endReached:Q,propsReady:_,rangeChanged:_e,startReached:re,stateChanged:K,stateRestoreInProgress:ee,...D}},Wn(LP,Ts,Ov,Ate,wd,VP,bd));function Vte(t,e,n){return L0(1,h_((t+n)/(h_(e)+n)))}function d$(t,e,n,r){const{height:i}=n;if(i===void 0||r.length===0)return{bottom:0,top:0};const s=zI(t,e,n,r[0].index);return{bottom:zI(t,e,n,r[r.length-1].index)+i,top:s}}function zI(t,e,n,r){const i=Vte(t.width,n.width,e.column),s=h_(r/i),a=s*n.height+L0(0,s-1)*e.row;return a>0?a+e.row:a}const rVe=Xt(()=>{const t=Oe(p=>`Item ${p}`),e=Oe({}),n=Oe(null),r=Oe("virtuoso-grid-item"),i=Oe("virtuoso-grid-list"),s=Oe(BP),a=Oe("div"),l=Oe(ng),u=(p,y=null)=>is(Ne(e,Ue(v=>v[p]),qn()),y),d=Oe(!1),h=Oe(!1);return Je(ut(h),d),{components:e,computeItemKey:s,context:n,FooterComponent:u("Footer"),HeaderComponent:u("Header"),headerFooterTag:a,itemClassName:r,ItemComponent:u("Item","div"),itemContent:t,listClassName:i,ListComponent:u("List","div"),readyStateChanged:d,reportReadyState:h,ScrollerComponent:u("Scroller","div"),scrollerRef:l,ScrollSeekPlaceholder:u("ScrollSeekPlaceholder","div")}}),iVe=Xt(([t,e])=>({...t,...e}),Wn(nVe,rVe)),sVe=ue.memo(function(){const t=Qn("gridState"),e=Qn("listClassName"),n=Qn("itemClassName"),r=Qn("itemContent"),i=Qn("computeItemKey"),s=Qn("isSeeking"),a=Ka("scrollHeight"),l=Qn("ItemComponent"),u=Qn("ListComponent"),d=Qn("ScrollSeekPlaceholder"),h=Qn("context"),p=Ka("itemDimensions"),y=Ka("gap"),v=Qn("log"),w=Qn("stateRestoreInProgress"),_=Ka("reportReadyState"),E=uf(ue.useMemo(()=>C=>{const N=C.parentElement.parentElement.scrollHeight;a(N);const O=C.firstChild;if(O){const{height:R,width:D}=O.getBoundingClientRect();p({height:R,width:D})}y({column:h$("column-gap",getComputedStyle(C).columnGap,v),row:h$("row-gap",getComputedStyle(C).rowGap,v)})},[a,p,y,v]),!0,!1);return Pte(()=>{t.itemHeight>0&&t.itemWidth>0&&_(!0)},[t]),w?null:m.jsx(u,{className:e,ref:E,...ts(u,h),"data-testid":"virtuoso-item-list",style:{paddingBottom:t.offsetBottom,paddingTop:t.offsetTop},children:t.items.map(C=>{const N=i(C.index,C.data,h);return s?m.jsx(d,{...ts(d,h),height:t.itemHeight,index:C.index,width:t.itemWidth},N):S.createElement(l,{...ts(l,h),className:n,"data-index":C.index,key:N},r(C.index,C.data,h))})})}),aVe=ue.memo(function(){const t=Qn("HeaderComponent"),e=Ka("headerHeight"),n=Qn("headerFooterTag"),r=uf(ue.useMemo(()=>s=>{e(od(s,"height"))},[e]),!0,!1),i=Qn("context");return t?m.jsx(n,{ref:r,children:m.jsx(t,{...ts(t,i)})}):null}),oVe=ue.memo(function(){const t=Qn("FooterComponent"),e=Ka("footerHeight"),n=Qn("headerFooterTag"),r=uf(ue.useMemo(()=>s=>{e(od(s,"height"))},[e]),!0,!1),i=Qn("context");return t?m.jsx(n,{ref:r,children:m.jsx(t,{...ts(t,i)})}):null}),lVe=({children:t})=>{const e=ue.useContext(jte),n=Ka("itemDimensions"),r=Ka("viewportDimensions"),i=uf(ue.useMemo(()=>s=>{r(s.getBoundingClientRect())},[r]),!0,!1);return ue.useEffect(()=>{e&&(r({height:e.viewportHeight,width:e.viewportWidth}),n({height:e.itemHeight,width:e.itemWidth}))},[e,r,n]),m.jsx("div",{ref:i,style:hE(!1),children:t})},cVe=({children:t})=>{const e=ue.useContext(jte),n=Ka("windowViewportRect"),r=Ka("itemDimensions"),i=Qn("customScrollParent"),s=ute(n,i,!1);return ue.useEffect(()=>{e&&(r({height:e.itemHeight,width:e.itemWidth}),n({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:e.viewportWidth}))},[e,n,r]),m.jsx("div",{ref:s,style:hE(!1),children:t})},uVe=ue.memo(function({...t}){const e=Qn("useWindowScroll"),n=Qn("customScrollParent"),r=n||e?hVe:dVe,i=n||e?cVe:lVe,s=Qn("context");return m.jsx(r,{...t,...ts(r,s),children:m.jsxs(i,{children:[m.jsx(aVe,{}),m.jsx(sVe,{}),m.jsx(oVe,{})]})})}),{useEmitter:Ute,useEmitterValue:Qn,usePublisher:Ka}=Ite(iVe,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},uVe),dVe=Mte({useEmitter:Ute,useEmitterValue:Qn,usePublisher:Ka}),hVe=Lte({useEmitter:Ute,useEmitterValue:Qn,usePublisher:Ka});function h$(t,e,n){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&n(`${t} was not resolved to pixel value correctly`,e,Hs.WARN),e==="normal"?0:parseInt(e??"0",10)}const fVe=({userProfile:t,onBack:e})=>{const[n,r]=S.useState(null),[i,s]=S.useState(""),[a,l]=S.useState(!1),[u,d]=S.useState(!1),h=S.useRef(null),[p,y]=S.useState(!1),[v,w]=S.useState([]),[_,E]=S.useState([]),[C,N]=S.useState([]),[O,R]=S.useState(!1);S.useRef(null);const[D,P]=S.useState("");S.useRef(null),S.useEffect(()=>{y(["admin","quan_ly","giao_vien"].includes(t.role))},[t.role]),S.useEffect(()=>{if(!p){const ee={id:"admin_support",name:"Ban Qun Tr",role:"admin",photoURL:"/assets/img/avatar.webp.webp",lastMessage:"Cho bn, chng ti c th gip g?",isOnline:!0};E([ee]),N([ee]);return}(async()=>{R(!0);try{const ee=$t(_t(Pe,"users"),hl(100)),oe=await Mn(ee),pe=[];oe.forEach(B=>{const X=B.data();B.id!==t.id&&pe.push({id:B.id,name:X.full_name||X.fullName||"Ngi dng",photoURL:X.photoURL||`https://ui-avatars.com/api/?name=${encodeURIComponent(X.full_name||"User")}&background=random`,role:X.role||"hoc_vien",lastMessage:"",lastMessageTime:"",unreadCount:0})}),E(pe)}catch(ee){console.error("Error fetching users:",ee)}finally{R(!1)}})()},[p,t.id]),S.useEffect(()=>{if(p)if(D.trim()){const W=D.toLowerCase();N(_.filter(ee=>ee.name.toLowerCase().includes(W)))}else{const W=_.filter(ee=>ee.lastMessage||ee.unreadCount);N(W)}},[D,_,p]),S.useEffect(()=>{if(!n)return;const W=[t.id,n.id].sort().join("_"),ee=$t(_t(Pe,"messages"),an("conversationId","==",W),an("visibleTo","array-contains",t.id),Do("timestamp","desc"),hl(50)),oe=ko(ee,X=>{const G=[];X.forEach(Q=>{const re=Q.data();G.push({id:Q.id,senderId:re.senderId,senderName:"",content:re.content,timestamp:re.timestamp?re.timestamp.toDate():new Date,status:"sent"})}),w(G.reverse())}),pe=Ru(Co,`typing/${W}/${n.id}`),B=Qx(pe,X=>{d(X.exists()&&X.val()===!0)});return()=>{oe(),B()}},[n,t.id]),S.useEffect(()=>{const W=Ru(Co,"status"),ee=Qx(W,oe=>{if(oe.exists()){const pe=oe.val();E(B=>B.map(X=>{var G;return{...X,isOnline:((G=pe[X.id])==null?void 0:G.state)==="online"}}))}});return()=>ee()},[]);const A=W=>{if(s(W.target.value),!n)return;const ee=[t.id,n.id].sort().join("_"),oe=Ru(Co,`typing/${ee}/${t.id}`);a||(l(!0),rj(oe,!0)),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{l(!1),ZL(oe)},2e3)},k=async(W,ee)=>{W==null||W.preventDefault();const oe=ee||i;if(!(!oe.trim()||!n)){if(!ee){s(""),l(!1);const pe=[t.id,n.id].sort().join("_");ZL(Ru(Co,`typing/${pe}/${t.id}`)),h.current&&clearTimeout(h.current)}try{const pe=[t.id,n.id].sort().join("_");await Ph(_t(Pe,"messages"),{senderId:t.id,receiverId:n.id,content:oe,timestamp:fl(),visibleTo:[t.id,n.id],conversationId:pe}),E(B=>{const X=[...B],G=X.findIndex(Q=>Q.id===n.id);if(G>-1){const Q={...X[G]};Q.lastMessage=oe===""?" gi mt like":oe,Q.lastMessageTime="Va xong",X.splice(G,1),X.unshift(Q)}return X})}catch(pe){console.error("Error sending message:",pe),alert("Li gi tin nhn")}}},M=async W=>{if(confirm("Bn c chc mun xa tin nhn ny  pha bn?"))try{await jr(Ct(Pe,"messages",W),{visibleTo:fO(t.id)})}catch(ee){console.error("Error deleting:",ee)}},[V,U]=S.useState(null),[z,$]=S.useState(!1),ne=S.useRef(null),fe=async()=>{if(!n||!V||z)return;$(!0);const W=[t.id,n.id].sort().join("_");try{const ee=$t(_t(Pe,"messages"),an("conversationId","==",W),an("visibleTo","array-contains",t.id),Do("timestamp","desc"),Yq(V),hl(20)),oe=await Mn(ee);if(oe.empty)U(null);else{const pe=[];oe.forEach(B=>{const X=B.data();pe.push({id:B.id,senderId:X.senderId,senderName:"",content:X.content,timestamp:X.timestamp?X.timestamp.toDate():new Date,status:"sent"})}),U(oe.docs[oe.docs.length-1]),w(B=>[...pe.reverse(),...B])}}catch(ee){console.error("Error loading more:",ee)}finally{$(!1)}},K=W=>{var oe;const ee=(oe=W.target.files)==null?void 0:oe[0];ee&&k(void 0,`[ gi nh: ${ee.name}]`)};return m.jsxs("div",{className:"w-full h-[calc(100vh-64px)] bg-white dark:bg-black flex",children:[m.jsxs("div",{className:`w-full md:w-[360px] border-r border-gray-200 dark:border-gray-800 flex flex-col bg-white dark:bg-black ${n?"hidden md:flex":"flex"}`,children:[m.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-teal-500 bg-clip-text text-transparent",children:"Chat"}),m.jsx("div",{className:"flex gap-2",children:m.jsx("button",{className:"p-2 rounded-full bg-gray-100 dark:bg-zinc-800 hover:bg-gray-200 dark:hover:bg-zinc-700 transition-colors",children:m.jsx(Dz,{size:20,className:"text-gray-600 dark:text-gray-300"})})})]}),p&&m.jsxs("div",{className:"relative",children:[m.jsx(OMe,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:18}),m.jsx("input",{type:"text",value:D,onChange:W=>P(W.target.value),placeholder:"Tm ngi dng...",className:"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-zinc-800 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all font-medium text-gray-700 dark:text-gray-200"})]})]}),m.jsx("div",{className:"flex-1 overflow-y-auto px-2",children:O?m.jsx("div",{className:"flex justify-center p-4",children:m.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-blue-600 border-t-transparent rounded-full"})}):m.jsxs(m.Fragment,{children:[p&&!D&&C.length===0&&m.jsxs("div",{className:"text-center p-8 text-gray-500 text-sm",children:[m.jsx("p",{children:"Cha c cuc tr chuyn no."}),m.jsx("p",{className:"mt-1",children:"Tm kim  bt u chat!"})]}),C.map(W=>m.jsxs(Nh.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>r(W),className:`p-3 rounded-xl flex items-center gap-3 cursor-pointer transition-all mb-1 ${(n==null?void 0:n.id)===W.id?"bg-blue-50 dark:bg-blue-900/20":"hover:bg-gray-100 dark:hover:bg-zinc-800"}`,children:[m.jsxs("div",{className:"relative",children:[m.jsx("img",{src:W.photoURL,alt:W.name,className:"w-12 h-12 rounded-full object-cover border border-gray-100 dark:border-gray-800"}),W.isOnline&&m.jsx("div",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 bg-green-500 border-2 border-white dark:border-black rounded-full"})]}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:W.name}),m.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[m.jsx("span",{className:`truncate max-w-[140px] ${W.unreadCount?"font-bold text-gray-900 dark:text-gray-100":""}`,children:W.lastMessage||(W.role==="admin"?"H tr trc tuyn":"Bt u tr chuyn")}),W.lastMessageTime&&m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"text-xs",children:""}),m.jsx("span",{className:"text-xs",children:W.lastMessageTime})]})]})]}),W.unreadCount?m.jsx("div",{className:"w-5 h-5 bg-blue-600 rounded-full flex items-center justify-center shadow-sm",children:m.jsx("span",{className:"text-[10px] font-bold text-white",children:W.unreadCount})}):null]},W.id))]})})]}),m.jsx("div",{className:`flex-1 flex flex-col bg-white dark:bg-black transition-all ${n?"flex":"hidden md:flex items-center justify-center"}`,children:n?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-800 flex items-center justify-between bg-white/80 dark:bg-black/80 backdrop-blur-md sticky top-0 z-10 shadow-sm",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("button",{onClick:()=>r(null),className:"md:hidden p-2 -ml-2 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-full",children:m.jsx(oMe,{size:24,className:"text-blue-600"})}),m.jsxs("div",{className:"relative",children:[m.jsx("img",{src:n.photoURL,alt:"Avt",className:"w-10 h-10 rounded-full border border-gray-200 dark:border-gray-700 object-cover"}),n.isOnline&&m.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white dark:border-black rounded-full"})]}),m.jsxs("div",{children:[m.jsx("h2",{className:"font-bold text-gray-900 dark:text-gray-100 leading-tight",children:n.name}),m.jsx("span",{className:`text-xs font-medium flex items-center gap-1 ${n.isOnline?"text-green-600":"text-gray-500"}`,children:n.isOnline?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"})," ang hot ng"]}):"Ngoi tuyn"})]})]}),m.jsxs("div",{className:"flex items-center gap-4 text-blue-600",children:[m.jsx(AMe,{size:24,className:"cursor-pointer hover:opacity-80 disabled-opacity"}),m.jsx(Dz,{size:24,className:"cursor-pointer hover:opacity-80 disabled-opacity"}),m.jsx(wMe,{size:24,className:"cursor-pointer hover:opacity-80"})]})]}),!1,m.jsx("div",{className:"flex-1 p-4 bg-white dark:bg-black overflow-hidden",children:m.jsx(Q9e,{ref:ne,style:{height:"100%"},data:v,startReached:fe,initialTopMostItemIndex:v.length-1,followOutput:"auto",alignToBottom:!0,itemContent:(W,ee)=>{var B;const oe=ee.senderId===t.id,pe=!oe&&(W===v.length-1||((B=v[W+1])==null?void 0:B.senderId)!==ee.senderId);return m.jsxs(Nh.div,{layout:!0,initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},className:`flex gap-2 group mb-2 ${oe?"justify-end":"justify-start"}`,children:[!oe&&m.jsx("div",{className:"w-8 flex flex-col justify-end",children:pe?m.jsx("img",{src:n.photoURL,className:"w-8 h-8 rounded-full border border-gray-200 object-cover"}):m.jsx("div",{className:"w-8"})}),oe&&m.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex items-center mr-2",children:m.jsx("button",{onClick:()=>M(ee.id),className:"p-1.5 text-gray-400 hover:text-red-500 bg-gray-50 dark:bg-zinc-800 rounded-full",title:"Xa  pha ti",children:m.jsx(Rz,{size:14})})}),!oe&&m.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex items-center order-last ml-2",children:m.jsx("button",{onClick:()=>M(ee.id),className:"p-1.5 text-gray-400 hover:text-red-500 bg-gray-50 dark:bg-zinc-800 rounded-full",title:"Xa  pha ti",children:m.jsx(Rz,{size:14})})}),m.jsxs("div",{className:"flex flex-col items-end",children:[m.jsx("div",{className:`px-4 py-2 text-[15px] leading-relaxed break-words shadow-sm ${oe?"bg-blue-600 text-white rounded-2xl rounded-tr-md":"bg-gray-100 dark:bg-zinc-800 text-gray-900 dark:text-gray-100 rounded-2xl rounded-tl-md border border-gray-200 dark:border-gray-700"}`,children:ee.content}),oe&&m.jsxs("div",{className:"flex items-center justify-end text-[10px] text-gray-400 mt-1 mr-1 gap-1 h-3",children:[ee.status==="sending"&&m.jsx(fMe,{size:10,className:"animate-spin"}),ee.status==="sent"&&m.jsx(sMe,{size:12,className:"text-blue-500"}),ee.status==="error"&&m.jsx(cMe,{size:12,className:"text-red-500"})]})]})]})},components:{Header:()=>m.jsxs("div",{className:"py-4",children:[z&&m.jsx("div",{className:"text-center text-xs text-gray-400",children:"ang ti tin c hn..."}),!z&&!V&&m.jsxs("div",{className:"flex flex-col items-center mt-4 mb-8 opacity-60",children:[m.jsx("img",{src:n.photoURL,className:"w-20 h-20 rounded-full mb-4 object-cover shadow-lg border-2 border-white"}),m.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:n.name}),m.jsx("p",{className:"text-sm text-gray-500",children:p?"Thng tin hc vin / ng nghip":"Ban Qun Tr H Thng"})]})]}),Footer:()=>u?m.jsx("div",{className:"flex justify-start mb-2 ml-10 mt-2",children:m.jsxs("div",{className:"bg-gray-100 dark:bg-zinc-800 px-4 py-3 rounded-2xl rounded-tl-md flex gap-1 items-center",children:[m.jsx("span",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),m.jsx("span",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),m.jsx("span",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})}):null}})}),m.jsxs("div",{className:"p-3 bg-white dark:bg-black flex items-center gap-2 border-t border-gray-100 dark:border-gray-800 relative",children:[!1,m.jsxs("button",{className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-zinc-800 rounded-full transition-colors relative",children:[m.jsx(vMe,{size:20}),m.jsx("input",{type:"file",accept:"image/*",className:"absolute inset-0 opacity-0 cursor-pointer",onChange:K})]}),m.jsxs("form",{onSubmit:k,className:"flex-1 flex items-center gap-2 bg-gray-100 dark:bg-zinc-800 rounded-full px-4 py-2",children:[m.jsx("input",{type:"text",placeholder:"Nhp tin nhn...",value:i,onChange:A,className:"flex-1 bg-transparent border-none focus:ring-0 text-gray-800 dark:text-white placeholder-gray-500",disabled:!1}),m.jsx("button",{type:"button",onClick:()=>s(W=>W+""),className:"text-gray-400 hover:text-yellow-500 transition-colors",children:m.jsx(MMe,{size:20})})]}),i.trim()?m.jsx("button",{onClick:k,className:"p-3 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-lg transition-transform active:scale-95 flex items-center justify-center",children:m.jsx(Pz,{size:18,className:"translate-x-0.5 translate-y-0.5"})}):m.jsx("button",{onClick:()=>k(void 0,""),className:"p-3 text-blue-600 hover:bg-blue-50 dark:hover:bg-zinc-800 rounded-full transition-colors",children:m.jsx("span",{className:"text-xl",children:""})})]})]}):m.jsxs("div",{className:"flex flex-col items-center justify-center h-full opacity-50",children:[m.jsx("div",{className:"w-24 h-24 bg-gray-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mb-4",children:m.jsx(Pz,{size:40,className:"text-blue-600 -ml-1 mt-1"})}),m.jsx("h3",{className:"text-xl font-bold dark:text-white",children:"Cho mng n vi Chat"}),m.jsx("p",{className:"text-gray-500 mt-2",children:"Chn mt cuc hi thoi t danh sch bn tri"})]})})]})};let Lw=null;const $P=async()=>Lw||(Lw=await kP(),Lw),fE=(t,e)=>{if(!e)return{param:t.guest,type:"guest"};const n=e.role;return n==="admin"?{param:t.admin,type:"admin"}:["lanh_dao","quan_ly"].includes(n)?{param:t.manager,type:"manager"}:n==="giao_vien"?{param:t.teacher,type:"teacher"}:e.isVip?{param:t.vip_user,type:"vip"}:e.class&&e.class.length>0||e.isVerified?{param:t.verified_user,type:"verified"}:{param:t.free_user,type:"free"}},Bte=t=>{const e=new Date;if(t==="daily")return e.toLocaleDateString("vi-VN");{const n=e.getDay()||7;return n!==1?e.setHours(-24*(n-1)):e.setHours(0,0,0,0),`W-${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()}`}},f$=async t=>{const e=await $P(),{param:n}=fE(e,t);if(!n.isEnabled)return"ALLOWED";const i=`${t?`usage_user_${t.id}`:"usage_guest"}_${n.period}`,s=Bte(n.period);let a={date:s,count:0};const l=localStorage.getItem(i);if(l)try{const u=JSON.parse(l);u.date===s&&(a=u)}catch(u){console.error("Error parsing usage data",u)}return console.log(`[Usage Check] ${i} - Used: ${a.count}/${n.limit}`),a.count>=n.limit?"BLOCKED":"ALLOWED"},m$=async t=>{const e=await $P(),{param:n}=fE(e,t);if(!n.isEnabled)return;const i=`${t?`usage_user_${t.id}`:"usage_guest"}_${n.period}`,s=Bte(n.period);let a={date:s,count:0};const l=localStorage.getItem(i);if(l)try{const u=JSON.parse(l);u.date===s&&(a=u)}catch{}a.count++,console.log(`[Usage] Incremented usage for ${i}: ${a.count}`),localStorage.setItem(i,JSON.stringify(a))},p$=async(t,e)=>{const n=await $P(),{param:r,type:i}=fE(n,t),s=r.message.replace("{limit}",r.limit.toString()),a=i==="guest";rl.fire({title:"Ht lt lm bi!",text:s,icon:"warning",showCancelButton:!0,confirmButtonText:a?"ng nhp ngay":"Lin h thy",cancelButtonText:"ng",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"}).then(l=>{l.isConfirmed&&(a?e():window.open("https://zalo.me/02296282969","_blank"))})},mVe=({userProfile:t})=>{const[e,n]=S.useState(!1);S.useEffect(()=>{(async()=>{try{const u=await kP(),{param:d}=fE(u,t);d.showAds?(n(!0),r(),a()):(n(!1),i(),s())}catch(u){console.error("Error checking AdSense config:",u)}})()},[t]);const r=()=>{if(document.getElementById("google-adsense-script"))return;const u=document.createElement("script");u.id="google-adsense-script",u.async=!0,u.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6121118706628509",u.crossOrigin="anonymous",document.head.appendChild(u),console.log(" Google AdSense Script Loaded (Allowed for this role)")},i=()=>{const l=document.getElementById("google-adsense-script");l&&(l.remove(),console.log(" Google AdSense Script Removed (Blocked for this role)"))},s=()=>{if(document.getElementById("adsense-blocker-style"))return;const l=document.createElement("style");l.id="adsense-blocker-style",l.innerHTML=`
            .adsbygoogle, .google-auto-placed, ins.adsbygoogle {
                display: none !important;
                visibility: hidden !important;
                height: 0 !important;
                width: 0 !important;
                overflow: hidden !important;
                position: absolute !important;
                pointer-events: none !important;
                z-index: -9999 !important;
            }
        `,document.head.appendChild(l),console.log(" AdSense Blocker Style Injected")},a=()=>{const l=document.getElementById("adsense-blocker-style");l&&(l.remove(),console.log(" AdSense Blocker Style Removed"))};return null},pVe=({userProfile:t,currentScreen:e,onNavigate:n,onLogout:r})=>{const[i,s]=S.useState(!1),a=S.useRef(null);S.useEffect(()=>{const y=v=>{a.current&&!a.current.contains(v.target)&&s(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]);const l=y=>!!(y==="dashboard"&&(e==="dashboard"||e.startsWith("in_"))||y==="account"&&e==="account"),u=y=>{n(y),s(!1)},d=[{name:"Tin tc",icon:Cbe,action:()=>window.location.href="/",active:!1,key:"news"},{name:"n tp",icon:dbe,action:()=>u("dashboard"),active:l("dashboard"),key:"dashboard"},{name:"Ti khon",icon:Mbe,action:()=>u("account"),active:l("account"),key:"account"}],h=[];t&&(h.push({name:"Lch s thi",icon:j0,action:()=>u("history"),color:"text-purple-600"}),["admin","lanh_dao","quan_ly","giao_vien"].includes(t.role)?(h.push({name:"Qun l lp",icon:fh,action:()=>u("class_management"),color:"text-indigo-600"}),h.push({name:"Qun l TB",icon:l2,action:()=>u("notification_mgmt"),color:"text-red-500"})):h.push({name:"Lp ca ti",icon:sK,action:()=>u("my_class"),color:"text-green-600"}));const p=()=>s(!i);return m.jsxs(m.Fragment,{children:[m.jsx("div",{ref:a,className:`fixed bottom-24 right-4 z-[10000] md:hidden transition-all duration-300 origin-bottom-right ${i?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-90 translate-y-4 pointer-events-none"}`,children:m.jsx("div",{className:"bg-white/95 dark:bg-slate-900/95 backdrop-blur-xl border border-white/20 shadow-2xl rounded-2xl p-4 w-56 flex flex-col gap-2",children:t?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"text-xs font-semibold text-gray-400 dark:text-gray-500 mb-2 uppercase tracking-wider border-b border-gray-200 dark:border-gray-700 pb-2",children:"Menu m rng"}),h.map((y,v)=>{const w=y.icon;return m.jsxs("button",{onClick:()=>{y.action(),s(!1)},className:"flex items-center gap-3 w-full p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors group",children:[m.jsx("div",{className:`p-2 rounded-lg bg-gray-50 dark:bg-slate-800 group-hover:bg-white dark:group-hover:bg-slate-700 shadow-sm ${y.color}`,children:m.jsx(w,{})}),m.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:y.name})]},v)}),m.jsx("div",{className:"h-px bg-gray-200 dark:bg-gray-700 my-1"}),m.jsxs("button",{onClick:()=>{r(),s(!1)},className:"flex items-center gap-3 w-full p-2 rounded-xl hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 transition-colors",children:[m.jsx("div",{className:"p-2 rounded-lg bg-red-100 dark:bg-red-900/30",children:m.jsx(kbe,{})}),m.jsx("span",{className:"text-sm font-medium",children:"ng xut"})]})]}):m.jsx("button",{onClick:()=>{u("login"),s(!1)},className:"w-full py-2 bg-blue-600 text-white rounded-xl font-bold hover:bg-blue-700 transition",children:"ng nhp ngay"})})}),m.jsx("div",{className:"fixed bottom-4 left-4 right-4 z-[9999] md:hidden animate-fade-in-up",children:m.jsxs("div",{className:"bg-white/90 dark:bg-slate-900/90 backdrop-blur-lg border border-white/20 shadow-2xl rounded-2xl p-2 flex justify-between items-center relative overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent skew-x-12 animate-shine pointer-events-none"}),d.map(y=>{const v=y.icon,w=y.active;return m.jsxs("button",{onClick:y.action,className:`relative flex flex-col items-center justify-center w-full py-2 transition-all duration-300 group ${w?"-translate-y-1":""}`,children:[w&&m.jsx("div",{className:"absolute top-1 w-10 h-10 bg-indigo-500/20 rounded-full blur-md"}),m.jsx(v,{className:`text-2xl mb-1 transition-all duration-300 drop-shadow-sm ${w?"text-indigo-600 dark:text-indigo-400 scale-110 filter drop-shadow-[0_2px_4px_rgba(79,70,229,0.3)]":"text-gray-400 dark:text-gray-500 group-hover:text-gray-600 dark:group-hover:text-gray-300"}`}),m.jsx("span",{className:`text-[10px] font-bold transition-all duration-300 ${w?"text-indigo-600 dark:text-indigo-400 opacity-100":"text-gray-400 dark:text-gray-500 opacity-80 group-hover:opacity-100"}`,children:y.name}),w&&m.jsx("span",{className:"absolute -bottom-1 w-1 h-1 bg-indigo-600 rounded-full"})]},y.key)}),m.jsxs("button",{onClick:p,className:`relative flex flex-col items-center justify-center w-full py-2 transition-all duration-300 group ${i?"-translate-y-1":""}`,children:[i&&m.jsx("div",{className:"absolute top-1 w-10 h-10 bg-orange-500/20 rounded-full blur-md"}),i?m.jsx(wm,{className:"text-2xl mb-1 text-orange-600 dark:text-orange-400 scale-110 transition-all duration-300"}):m.jsx(cbe,{className:"text-2xl mb-1 text-gray-400 dark:text-gray-500 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-all duration-300"}),m.jsx("span",{className:`text-[10px] font-bold transition-all duration-300 ${i?"text-orange-600 dark:text-orange-400 opacity-100":"text-gray-400 dark:text-gray-500 opacity-80 group-hover:opacity-100"}`,children:"Thm"})]})]})})]})},g$=()=>{const{user:t}=lE(),[e,n]=S.useState(""),[r,i]=S.useState(""),[s,a]=S.useState(""),[l,u]=S.useState(!1),d=async h=>{h.preventDefault(),a(""),u(!0);try{let p=e;p.includes("@")||(p=`${e}@thitructuyen.vn`),await ZN(Ji,p,r)}catch(p){console.error(p),a("Tn ng nhp hoc mt khu khng ng.")}finally{u(!1)}};return m.jsxs("div",{className:"min-h-screen flex flex-col font-sans text-[#333]",children:[m.jsx("div",{className:"bg-white",children:m.jsxs("div",{className:"w-full h-[150px] bg-cover bg-center relative",style:{backgroundImage:"url('/ontap/assets/img/banner_thitructuyen.jpg')"},children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400 to-blue-200 opacity-50"}),m.jsx("div",{className:"container mx-auto h-full flex items-center px-4 relative z-10",children:m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("img",{src:"/ontap/assets/img/logo_viwa.png",alt:"Logo",className:"h-24 w-24 object-contain",onError:h=>h.currentTarget.src="https://via.placeholder.com/100?text=LOGO"}),m.jsxs("div",{className:"text-blue-800 uppercase font-bold drop-shadow-sm",children:[m.jsx("h1",{className:"text-3xl",children:"CNG TY CP T VN V GIO DC NINH BNH"}),m.jsx("h2",{className:"text-xl text-red-600 mt-1",children:"NINH BINH CONSULTING AND EDUCATION JOINT STOCK COMPANY"})]})]})})]})}),m.jsx("div",{className:"flex-grow bg-white flex justify-center pt-10 pb-20",children:m.jsx("div",{className:"w-full max-w-4xl px-4",children:t?m.jsxs("div",{className:"max-w-md mx-auto",children:[m.jsxs("div",{className:"text-center mb-6",children:[m.jsx("h2",{className:"text-xl font-bold text-blue-700 uppercase",children:"Khu vc Thi Trc Tuyn"}),m.jsxs("p",{className:"text-gray-600 mt-2",children:["Xin cho, ",m.jsx("strong",{className:"text-blue-900",children:t.displayName||t.email})]})]}),m.jsxs("fieldset",{className:"border border-gray-300 p-6 rounded-sm shadow-sm bg-blue-50/30",children:[m.jsx("legend",{className:"px-2 text-blue-800 font-bold text-sm bg-white border border-gray-200 rounded shadow-sm",children:"Vo Phng Thi"}),m.jsxs("div",{className:"space-y-4 mt-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"M phng thi (Room ID):"}),m.jsx("input",{type:"text",placeholder:"Nhp m phng do gim th cung cp...",className:"w-full border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:border-blue-400 rounded-sm shadow-inner"})]}),m.jsxs("button",{className:"w-full bg-[#2962ff] text-white px-4 py-2.5 text-sm font-bold rounded-sm hover:bg-blue-700 transition-all shadow-md flex justify-center items-center gap-2",children:[m.jsx("span",{children:"VO THI NGAY"}),m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})]})]}),m.jsx("div",{className:"mt-6 text-center",children:m.jsx("a",{href:"/",className:"text-sm text-gray-500 hover:text-blue-600 hover:underline",children:" Quay li Trang ch"})})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"text-center mb-8 text-sm text-gray-700 space-y-1",children:[m.jsx("p",{children:"Vui lng nhp ti khon v mt khu  ng nhp."}),m.jsx("p",{children:"Nu bn cha c ti khon hoc qun mt khu vui lng lin h gim th coi thi!"}),m.jsxs("p",{children:["Nu bn mun tra kt qu hc tp, hy vo ",m.jsx("a",{href:"/ontap",className:"text-blue-600 font-bold hover:underline",children:"TRA CU IM"})]}),m.jsxs("p",{children:["Nu bn mun n tp hoc thi th, hy vo ",m.jsx("a",{href:"/ontap",className:"text-blue-600 font-bold hover:underline",children:"THI TH"})]})]}),m.jsx("div",{className:"max-w-md mx-auto",children:m.jsxs("fieldset",{className:"border border-gray-300 p-6 rounded-sm shadow-sm",children:[m.jsx("legend",{className:"px-2 text-gray-700 font-bold text-sm",children:"Thng tin ng nhp"}),m.jsxs("form",{onSubmit:d,className:"space-y-4 mt-2",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("label",{className:"w-32 text-sm font-bold text-gray-700",children:"Tn ng nhp:"}),m.jsx("input",{type:"text",value:e,onChange:h=>n(h.target.value),className:"flex-1 border border-gray-300 px-2 py-1.5 text-sm focus:outline-none focus:border-blue-400 rounded-sm",required:!0})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("label",{className:"w-32 text-sm font-bold text-gray-700",children:"Mt khu:"}),m.jsx("input",{type:"password",value:r,onChange:h=>i(h.target.value),className:"flex-1 border border-gray-300 px-2 py-1.5 text-sm focus:outline-none focus:border-blue-400 rounded-sm",required:!0})]}),s&&m.jsx("p",{className:"text-red-500 text-xs text-center",children:s}),m.jsx("div",{className:"flex justify-end mt-6",children:m.jsx("button",{type:"submit",disabled:l,className:"bg-[#2962ff] text-white px-6 py-1.5 text-sm font-bold rounded-sm hover:bg-blue-700 transition-colors shadow-sm",children:l?"ang x l...":"ng nhp"})})]})]})})]})})}),m.jsxs("div",{className:"bg-[#0d47a1] text-white py-4 text-center text-xs space-y-1",children:[m.jsx("div",{className:"flex justify-center mb-2",children:m.jsx("img",{src:"/ontap/assets/img/logo_viwa_white.png",alt:"Logo Footer",className:"h-16 w-16 object-contain opacity-80",onError:h=>h.currentTarget.style.display="none"})}),m.jsx("p",{className:"uppercase font-bold",children:"Cng ty c phn T vn v Gio dc Ninh Bnh"}),m.jsx("p",{children:"ng Triu Vit Vng - Phng Hoa L - Tnh Ninh Bnh"}),m.jsx("p",{children:"022.96.282.969"}),m.jsx("p",{children:"ninhbinheduco.jsc@gmail.com"}),m.jsx("p",{children:"giaoducninhbinh@daotaothuyenvien.com"})]})]})},gVe=({userProfile:t,onBack:e})=>{const[n,r]=S.useState([]),[i,s]=S.useState(!1),[a,l]=S.useState(!1),[u,d]=S.useState(""),[h,p]=S.useState(45),[y,v]=S.useState(""),[w,_]=S.useState(""),[E,C]=S.useState([]);S.useEffect(()=>{N(),$n(async()=>{const{fetchLicenses:P}=await Promise.resolve().then(()=>FP);return{fetchLicenses:P}},void 0).then(({fetchLicenses:P})=>{P().then(C)})},[]);const N=async()=>{s(!0);try{let P;["admin","quan_ly","lanh_dao"].includes(t.role)?P=$t(_t(Pe,"exam_rooms"),Do("created_at","desc")):P=$t(_t(Pe,"exam_rooms"),an("teacher_id","==",t.id),Do("created_at","desc"));const k=(await Mn(P)).docs.map(M=>({id:M.id,...M.data()}));r(k)}catch(P){console.error("Error fetching rooms:",P),Fa.error("Li ti danh sch phng thi.")}finally{s(!1)}},O=async P=>{if(P.preventDefault(),!u||!w){Fa.error("Vui lng in y  thng tin.");return}const A=E.find(k=>k.id===w);try{await Ph(_t(Pe,"exam_rooms"),{room_name:u,license_id:w,license_name:(A==null?void 0:A.name)||"Unknown",teacher_id:t.id,teacher_name:t.full_name,status:"waiting",duration:Number(h),password:y||null,created_at:fl(),is_paused:!1}),Fa.success("To phng thi thnh cng!"),l(!1),d(""),v(""),N()}catch(k){console.error(k),Fa.error("Li khi to phng.")}},R=async(P,A)=>{try{await jr(Ct(Pe,"exam_rooms",P),{status:A}),Fa.success(` chuyn trng thi sang ${A}`),N()}catch{Fa.error("Li cp nht trng thi.")}},D=async P=>{if(confirm("Bn c chc chn mun xa phng thi ny?"))try{await K_(Ct(Pe,"exam_rooms",P)),Fa.success(" xa phng thi."),r(A=>A.filter(k=>k.id!==P))}catch{Fa.error("Li khi xa.")}};return m.jsxs("div",{className:"p-6 max-w-7xl mx-auto font-sans text-gray-800",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h1",{className:"text-2xl font-bold text-blue-800",children:"Qun l Thi Trc Tuyn"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"Quay li"}),m.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2",children:[m.jsx(Iu,{})," To Phng Thi"]})]})]}),m.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:m.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tn Phng"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hng Bng"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gio Vin"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trng Thi"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hnh ng"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i?m.jsx("tr",{children:m.jsx("td",{colSpan:5,className:"text-center py-4",children:"ang ti..."})}):n.length===0?m.jsx("tr",{children:m.jsx("td",{colSpan:5,className:"text-center py-4 text-gray-500",children:"Cha c phng thi no."})}):n.map(P=>m.jsxs("tr",{children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:P.room_name}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:P.license_name}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:P.teacher_name}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                                            ${P.status==="waiting"?"bg-yellow-100 text-yellow-800":P.status==="in_progress"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:P.status==="waiting"?"ang ch":P.status==="in_progress"?"ang thi":"Kt thc"})}),m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium flex gap-2",children:[P.status==="waiting"&&m.jsx("button",{onClick:()=>R(P.id,"in_progress"),className:"text-green-600 hover:text-green-900",title:"Bt u",children:m.jsx(Nbe,{})}),P.status==="in_progress"&&m.jsx("button",{onClick:()=>R(P.id,"finished"),className:"text-red-600 hover:text-red-900",title:"Kt thc",children:m.jsx(Obe,{})}),m.jsx("button",{onClick:()=>D(P.id),className:"text-gray-600 hover:text-red-600",title:"Xa",children:m.jsx(sl,{})})]})]},P.id))})]})}),a&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white p-6 rounded-lg w-full max-w-md",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:"To Phng Thi Mi"}),m.jsxs("form",{onSubmit:O,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tn phng thi"}),m.jsx("input",{type:"text",value:u,onChange:P=>d(P.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"V d: Thi th M1 - Ln 1",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Hng bng"}),m.jsxs("select",{value:w,onChange:P=>_(P.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0,children:[m.jsx("option",{value:"",children:"-- Chn hng bng --"}),E.map(P=>m.jsx("option",{value:P.id,children:P.name},P.id))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Thi gian lm bi (pht)"}),m.jsx("input",{type:"number",value:h,onChange:P=>p(Number(P.target.value)),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",min:"1"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mt khu (Ty chn)"}),m.jsx("input",{type:"text",value:y,onChange:P=>v(P.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:" trng nu khng cn mt khu"})]}),m.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[m.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:"Hy"}),m.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"To phng"})]})]})]})})]})},yVe=({onBack:t})=>{const[e,n]=S.useState("7d"),[r,i]=S.useState(null),[s,a]=S.useState(!1),[l,u]=S.useState(null);S.useEffect(()=>{(async()=>{a(!0);try{const p=await fetch("/api/analytics",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dateRange:e})});if(p.ok){const y=await p.json();i(y)}else u("Failed to fetch data")}catch(p){console.error(p),u("Error connecting to server")}finally{a(!1)}})()},[e]);const d=["#0088FE","#00C49F","#FFBB28","#FF8042"];return m.jsxs(Nh.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"container mx-auto px-4 py-8 pb-24",children:[m.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4",children:[m.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[m.jsx("button",{onClick:t,className:"p-3 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-full transition-colors shadow-sm bg-white dark:bg-zinc-900",children:m.jsx(Pm,{className:"text-xl text-gray-600 dark:text-gray-300"})}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Thng k chi tit"}),m.jsx("p",{className:"text-sm text-gray-500",children:"Phn tch d liu truy cp website"})]})]}),m.jsxs("div",{className:"flex items-center gap-2 bg-white dark:bg-zinc-900 p-1.5 rounded-xl shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsx(fbe,{className:"text-gray-400 ml-2"}),m.jsxs("select",{value:e,onChange:h=>n(h.target.value),className:"bg-transparent border-none text-sm font-medium text-gray-700 dark:text-gray-200 focus:ring-0 cursor-pointer outline-none",children:[m.jsx("option",{value:"7d",children:"7 ngy qua"}),m.jsx("option",{value:"30d",children:"30 ngy qua"}),m.jsx("option",{value:"today",children:"Hm nay"})]})]})]}),s&&!r&&m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),r&&m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[m.jsx(Vw,{label:"Ngi dng mi",value:r.metrics.newUsers,color:"blue"}),m.jsx(Vw,{label:"Phin truy cp",value:r.metrics.totalSessions,color:"purple"}),m.jsx(Vw,{label:"Thi gian TB",value:`${Math.floor(r.metrics.avgSessionDuration/60)}m ${Math.floor(r.metrics.avgSessionDuration%60)}s`,color:"green"}),m.jsx(Vw,{label:"T l thot",value:`${r.metrics.bounceRate.toFixed(1)}%`,color:"orange"})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsx("h3",{className:"text-lg font-bold mb-6 text-gray-800 dark:text-white",children:"Xu hng truy cp"}),m.jsx("div",{className:"h-[300px]",children:m.jsx(Qk,{width:"100%",height:"100%",children:m.jsxs(lee,{data:r.chart,children:[m.jsx("defs",{children:m.jsxs("linearGradient",{id:"colorVisitsPage",x1:"0",y1:"0",x2:"0",y2:"1",children:[m.jsx("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.3}),m.jsx("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:0})]})}),m.jsx(sP,{strokeDasharray:"3 3",vertical:!1,opacity:.3}),m.jsx(cP,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#9CA3AF"},dy:10}),m.jsx(uP,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#9CA3AF"}}),m.jsx(TI,{contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.1)"}}),m.jsx(J1,{type:"monotone",dataKey:"visits",stroke:"#3B82F6",strokeWidth:3,fillOpacity:1,fill:"url(#colorVisitsPage)",name:"Lt truy cp"})]})})})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("h3",{className:"text-lg font-bold mb-4 text-gray-800 dark:text-white flex items-center gap-2",children:[m.jsx(Ebe,{className:"text-blue-500"})," Trang c xem nhiu nht"]}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"text-left text-xs font-semibold text-gray-500 border-b border-gray-100 dark:border-zinc-800",children:[m.jsx("th",{className:"pb-3 pl-2",children:"Tiu  trang"}),m.jsx("th",{className:"pb-3 text-right pr-2",children:"Lt xem"})]})}),m.jsx("tbody",{children:r.topPages.map((h,p)=>m.jsxs("tr",{className:"border-b border-gray-50 dark:border-zinc-800/50 last:border-none hover:bg-gray-50 dark:hover:bg-zinc-800/50 transition-colors",children:[m.jsx("td",{className:"py-3 pl-2 text-sm text-gray-700 dark:text-gray-300 truncate max-w-[200px]",title:h.name,children:h.name}),m.jsx("td",{className:"py-3 pr-2 text-right text-sm font-bold text-gray-800 dark:text-white",children:h.value.toLocaleString()})]},p))})]})})]}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("h3",{className:"text-lg font-bold mb-4 text-gray-800 dark:text-white flex items-center gap-2",children:[m.jsx(_be,{className:"text-purple-500"})," Thit b"]}),m.jsx("div",{className:"h-[200px] flex items-center justify-center",children:m.jsx(Qk,{width:"100%",height:"100%",children:m.jsxs(BDe,{children:[m.jsx(NZ,{data:r.devices,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:r.devices.map((h,p)=>m.jsx(J2,{fill:d[p%d.length]},`cell-${p}`))}),m.jsx(TI,{}),m.jsx(BX,{verticalAlign:"bottom",height:36})]})})})]}),m.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-800",children:[m.jsxs("h3",{className:"text-lg font-bold mb-4 text-gray-800 dark:text-white flex items-center gap-2",children:[m.jsx(Abe,{className:"text-red-500"})," a im (Top 5)"]}),m.jsx("div",{className:"space-y-3",children:r.cities.slice(0,5).map((h,p)=>m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:h.name}),m.jsxs("div",{className:"flex items-center gap-3 flex-1 justify-end",children:[m.jsx("div",{className:"w-24 h-2 bg-gray-100 dark:bg-zinc-800 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${h.value/r.cities[0].value*100}%`}})}),m.jsx("span",{className:"text-xs font-bold w-8 text-right",children:h.value})]})]},p))})]})]})]})]})]})},Vw=({label:t,value:e,color:n})=>{const r={blue:"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400",green:"bg-green-50 text-green-600 dark:bg-green-900/20 dark:text-green-400",purple:"bg-purple-50 text-purple-600 dark:bg-purple-900/20 dark:text-purple-400",orange:"bg-orange-50 text-orange-600 dark:bg-orange-900/20 dark:text-orange-400"};return m.jsxs("div",{className:"bg-white dark:bg-zinc-900 p-4 rounded-2xl border border-gray-100 dark:border-zinc-800 shadow-sm",children:[m.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:t}),m.jsx("p",{className:`text-xl font-bold ${r[n].split(" ")[1]}`,children:e})]})},vVe=(t,e)=>{const n=r=>{const i=r.match(/(\d+)$/);return i?parseInt(i[1],10):0};return n(t.id)-n(e.id)},zte=async()=>{const{data:t,error:e}=await jk.from("licenses").select(`
      id,
      name,
      display_order,
      subjects (
        id,
        name,
        display_order,
        questions (
          *,
          answers (
            id,
            text
          )
        )
      )
    `).order("display_order",{ascending:!0}).order("display_order",{foreignTable:"subjects",ascending:!0});if(e)throw console.error("Error fetching data from Supabase:",e),e;return t.map(r=>({id:r.id,name:r.name,subjects:r.subjects.map(i=>({id:i.id,name:i.name,questions:i.questions.sort(vVe).map(s=>({id:s.id,text:s.text,image:s.image,correctAnswerId:s.correct_answer_id,answers:s.answers.map(a=>({id:a.id,text:a.text}))}))}))}))},FP=Object.freeze(Object.defineProperty({__proto__:null,fetchLicenses:zte},Symbol.toStringTag,{value:"Module"})),bVe=()=>{const{user:t}=lE(),e=En(n=>n.userProfile);S.useEffect(()=>{if(!Co)return;const n=Ru(Co,".info/connected");let r,i;if(t&&e)r=Ru(Co,"/status/"+t.uid),i={state:"online",last_changed:QS(),role:e.role||"unknown",name:e.full_name||e.fullName||"User",photoURL:e.photoURL||"",device:"web"};else{let a=localStorage.getItem("guest_session_id");a||(a="guest_"+Math.random().toString(36).substr(2,9),localStorage.setItem("guest_session_id",a)),r=Ru(Co,"/status/"+a),i={state:"online",last_changed:QS(),role:"guest",name:"Khch",device:"web"}}const s=Qx(n,a=>{if(a.val()===!1)return;const l={state:"offline",last_changed:QS()};Dve(r).set(l).then(()=>{rj(r,i)})});return()=>{s()}},[t,e])};var Uw={},y$;function wVe(){if(y$)return Uw;y$=1;function t(s){if(typeof window>"u")return;const a=document.createElement("style");return a.setAttribute("type","text/css"),a.innerHTML=s,document.head.appendChild(a),s}Object.defineProperty(Uw,"__esModule",{value:!0});var e=Yh();function n(s){return s&&typeof s=="object"&&"default"in s?s:{default:s}}var r=n(e);t(`.rfm-marquee-container {
  overflow-x: hidden;
  display: flex;
  flex-direction: row;
  position: relative;
  width: var(--width);
  transform: var(--transform);
}
.rfm-marquee-container:hover div {
  animation-play-state: var(--pause-on-hover);
}
.rfm-marquee-container:active div {
  animation-play-state: var(--pause-on-click);
}

.rfm-overlay {
  position: absolute;
  width: 100%;
  height: 100%;
}
.rfm-overlay::before, .rfm-overlay::after {
  background: linear-gradient(to right, var(--gradient-color), rgba(255, 255, 255, 0));
  content: "";
  height: 100%;
  position: absolute;
  width: var(--gradient-width);
  z-index: 2;
  pointer-events: none;
  touch-action: none;
}
.rfm-overlay::after {
  right: 0;
  top: 0;
  transform: rotateZ(180deg);
}
.rfm-overlay::before {
  left: 0;
  top: 0;
}

.rfm-marquee {
  flex: 0 0 auto;
  min-width: var(--min-width);
  z-index: 1;
  display: flex;
  flex-direction: row;
  align-items: center;
  animation: scroll var(--duration) linear var(--delay) var(--iteration-count);
  animation-play-state: var(--play);
  animation-delay: var(--delay);
  animation-direction: var(--direction);
}
@keyframes scroll {
  0% {
    transform: translateX(0%);
  }
  100% {
    transform: translateX(-100%);
  }
}

.rfm-initial-child-container {
  flex: 0 0 auto;
  display: flex;
  min-width: auto;
  flex-direction: row;
  align-items: center;
}

.rfm-child {
  transform: var(--transform);
}`);const i=e.forwardRef(function({style:a={},className:l="",autoFill:u=!1,play:d=!0,pauseOnHover:h=!1,pauseOnClick:p=!1,direction:y="left",speed:v=50,delay:w=0,loop:_=0,gradient:E=!1,gradientColor:C="white",gradientWidth:N=200,onFinish:O,onCycleComplete:R,onMount:D,children:P},A){const[k,M]=e.useState(0),[V,U]=e.useState(0),[z,$]=e.useState(1),[ne,fe]=e.useState(!1),K=e.useRef(null),W=A||K,ee=e.useRef(null),oe=e.useCallback(()=>{if(ee.current&&W.current){const _e=W.current.getBoundingClientRect(),Se=ee.current.getBoundingClientRect();let ce=_e.width,Z=Se.width;(y==="up"||y==="down")&&(ce=_e.height,Z=Se.height),$(u&&ce&&Z&&Z<ce?Math.ceil(ce/Z):1),M(ce),U(Z)}},[u,W,y]);e.useEffect(()=>{if(ne&&(oe(),ee.current&&W.current)){const _e=new ResizeObserver(()=>oe());return _e.observe(W.current),_e.observe(ee.current),()=>{_e&&_e.disconnect()}}},[oe,W,ne]),e.useEffect(()=>{oe()},[oe,P]),e.useEffect(()=>{fe(!0)},[]),e.useEffect(()=>{typeof D=="function"&&D()},[]);const pe=e.useMemo(()=>u?V*z/v:V<k?k/v:V/v,[u,k,V,z,v]),B=e.useMemo(()=>Object.assign(Object.assign({},a),{"--pause-on-hover":!d||h?"paused":"running","--pause-on-click":!d||h&&!p||p?"paused":"running","--width":y==="up"||y==="down"?"100vh":"100%","--transform":y==="up"?"rotate(-90deg)":y==="down"?"rotate(90deg)":"none"}),[a,d,h,p,y]),X=e.useMemo(()=>({"--gradient-color":C,"--gradient-width":typeof N=="number"?`${N}px`:N}),[C,N]),G=e.useMemo(()=>({"--play":d?"running":"paused","--direction":y==="left"?"normal":"reverse","--duration":`${pe}s`,"--delay":`${w}s`,"--iteration-count":_?`${_}`:"infinite","--min-width":u?"auto":"100%"}),[d,y,pe,w,_,u]),Q=e.useMemo(()=>({"--transform":y==="up"?"rotate(90deg)":y==="down"?"rotate(-90deg)":"none"}),[y]),re=e.useCallback(_e=>[...Array(Number.isFinite(_e)&&_e>=0?_e:0)].map((Se,ce)=>r.default.createElement(e.Fragment,{key:ce},e.Children.map(P,Z=>r.default.createElement("div",{style:Q,className:"rfm-child"},Z)))),[Q,P]);return ne?r.default.createElement("div",{ref:W,style:B,className:"rfm-marquee-container "+l},E&&r.default.createElement("div",{style:X,className:"rfm-overlay"}),r.default.createElement("div",{className:"rfm-marquee",style:G,onAnimationIteration:R,onAnimationEnd:O},r.default.createElement("div",{className:"rfm-initial-child-container",ref:ee},e.Children.map(P,_e=>r.default.createElement("div",{style:Q,className:"rfm-child"},_e))),re(z-1)),r.default.createElement("div",{className:"rfm-marquee",style:G},re(z))):null});return Uw.default=i,Uw}var xVe=wVe();const _Ve=va(xVe),EVe=()=>{const[t,e]=S.useState([]),{user:n}=lE(),{userProfile:r}=En(s=>s),i=async()=>{const s=await XW(n==null?void 0:n.uid,r==null?void 0:r.role);e(s)};return S.useEffect(()=>{i();const s=setInterval(i,300*1e3);return()=>clearInterval(s)},[n,r]),S.useEffect(()=>{const s=$t(_t(Pe,"notifications"),an("targetType","==","all"),an("type","in",["special","attention"])),a=ko(s,()=>{i()});let l=()=>{};if(n){const u=$t(_t(Pe,"users",n.uid,"notifications"),an("type","in",["special","attention"]));l=ko(u,()=>{i()})}return()=>{a(),l()}},[n]),t.length===0?null:m.jsx("div",{className:"w-full z-30 sticky top-16",children:t.map(s=>m.jsxs("div",{className:`
                        w-full py-2 px-4 flex items-center shadow-md
                        ${s.type==="special"?"bg-gradient-to-r from-red-600 to-red-700 text-white":"bg-gradient-to-r from-amber-400 to-orange-500 text-gray-900"}
                    `,children:[m.jsxs("div",{className:"flex-shrink-0 mr-4 font-bold flex items-center gap-2 uppercase tracking-wider text-sm",children:[s.type==="special"?m.jsx(l2,{className:"animate-pulse"}):m.jsx(ZW,{}),s.type==="special"?"Thng bo khn":"Ch "]}),m.jsxs(_Ve,{gradient:!1,speed:50,className:"flex-1 font-medium text-sm md:text-base",children:[m.jsxs("span",{className:"mx-4",children:[s.title,": ",s.message]}),m.jsx("span",{className:"mx-4",children:" | "}),m.jsxs("span",{className:"mx-4",children:[s.title,": ",s.message]})]})]},s.id))})},TVe=()=>{bVe();const t=En(G=>G.appState),e=En(G=>G.setAppState),n=En(G=>G.licenses),r=En(G=>G.setLicenses),i=En(G=>G.selectedLicense),s=En(G=>G.setSelectedLicense),a=En(G=>G.subjects),l=En(G=>G.setSubjects),u=En(G=>G.selectedSubject),d=En(G=>G.setSelectedSubject),h=En(G=>G.currentQuiz),p=En(G=>G.setCurrentQuiz),y=En(G=>G.userAnswers),v=En(G=>G.setUserAnswers),w=En(G=>G.score),_=En(G=>G.setScore),E=En(G=>G.userName),C=En(G=>G.setUserName),N=En(G=>G.userProfile),O=En(G=>G.setUserProfile),R=En(G=>G.resumeSessionAvailable),D=En(G=>G.setResumeSessionAvailable),P=En(G=>G.isMobileApp),A=En(G=>G.setIsMobileApp);S.useEffect(()=>{const Q=new URLSearchParams(window.location.search).get("mode")==="app",re=hp.isNativePlatform();console.log("DEBUG: Checking Platform Mode"),console.log("- URL Search:",window.location.search),console.log("- isTestMode:",Q),console.log("- isNative:",re),re||Q?(console.log("SETTING MOBILE APP MODE: TRUE"),A(!0)):(console.log("SETTING MOBILE APP MODE: FALSE"),A(!1))},[]),S.useEffect(()=>{(async()=>{try{const Q=await zte();r(Q)}catch(Q){console.error("Error loading licenses:",Q)}})()},[]),S.useEffect(()=>{if(window.location.pathname==="/thitructuyen"){e(je.THI_TRUC_TUYEN);return}const Q=SG(Ji,async re=>{if(re){$n(async()=>{const{onSnapshot:Se,doc:ce}=await Promise.resolve().then(()=>rc);return{onSnapshot:Se,doc:ce}},void 0).then(({onSnapshot:Se,doc:ce})=>{Se(ce(Pe,"users",re.uid),Z=>{if(Z.exists()){const ke={id:Z.id,...Z.data()};O(ke),C(ke.full_name||re.displayName||"")}})});let _e=null;try{_e=await y1e(re.uid)}catch(Se){console.error(" Critical: Could not fetch user profile (Network/Permission):",Se)}if(_e===null){console.log(" User Profile missing for Auth UID:",re.uid,"- Creating default profile...");const Se={id:re.uid,full_name:re.displayName||"Ngi dng mi",email:re.email||"",role:"hoc_vien",photoURL:re.photoURL||"",isVerified:!1};try{const{setDoc:ce,doc:Z}=await $n(async()=>{const{setDoc:ke,doc:Le}=await Promise.resolve().then(()=>rc);return{setDoc:ke,doc:Le}},void 0);await ce(Z(Pe,"users",re.uid),Se,{merge:!0}),_e=Se,O(_e),C(_e.full_name),console.log(" Created default profile successfully.")}catch(ce){console.error(" Failed to create default profile:",ce)}}$n(async()=>{const{initializeFCM:Se}=await import("./fcmClient-CfvGtCgW.js");return{initializeFCM:Se}},[]).then(({initializeFCM:Se})=>{Se(re.uid)}),$n(async()=>{const{loadSession:Se,getLicensePreference:ce}=await import("./sessionService-CxCtOUx6.js");return{loadSession:Se,getLicensePreference:ce}},[]).then(({loadSession:Se,getLicensePreference:ce})=>{const Z=Se(re.uid);if(Z){console.log("Restoring session...",Z),p(Z.quiz),v(Z.userAnswers),s(Z.selectedLicense),d(Z.selectedSubject),Z.mode==="online_exam"?e(je.IN_ONLINE_EXAM):e(je.IN_QUIZ);return}(async()=>{if(_e!=null&&_e.defaultLicenseId){const ye=n.find(ze=>ze.id===_e.defaultLicenseId);if(ye){s(ye),e(je.MODE_SELECTION);return}}if(_e!=null&&_e.courseId)try{const ye=Ct(Pe,"courses",_e.courseId),ze=await td(ye);if(ze.exists()){const Ae=ze.data();if(Ae.licenseId){const Ze=n.find(rt=>rt.id===Ae.licenseId);if(Ze){s(Ze),e(je.MODE_SELECTION),$n(async()=>{const{updateDoc:rt}=await Promise.resolve().then(()=>rc);return{updateDoc:rt}},void 0).then(({updateDoc:rt})=>{rt(Ct(Pe,"users",re.uid),{defaultLicenseId:Ae.licenseId}).catch(it=>console.error("Self-heal error:",it))});return}}}}catch(ye){console.error("Error in auth fallback:",ye)}const Le=ce();if(Le){const ye=n.find(ze=>ze.id===Le);ye&&s(ye),e(je.DASHBOARD)}else e(je.DASHBOARD)})()})}else O(null),C(""),e(je.WELCOME)});return()=>{Q()}},[n]);const k=S.useCallback((G,Q,re,_e,Se)=>{!_e||!N||$n(async()=>{const{saveSession:ce}=await import("./sessionService-CxCtOUx6.js");return{saveSession:ce}},[]).then(({saveSession:ce})=>{ce(N.id,_e,Se,re,G,Q,i,u)})},[i,u,N]);S.useEffect(()=>{if(t===je.IN_QUIZ||t===je.IN_ONLINE_EXAM){D(!1);return}N&&$n(async()=>{const{loadSession:G}=await import("./sessionService-CxCtOUx6.js");return{loadSession:G}},[]).then(({loadSession:G})=>{const Q=G(N.id);D(!!Q)})},[t,N]);const M=()=>{$n(async()=>{const{loadSession:G}=await import("./sessionService-CxCtOUx6.js");return{loadSession:G}},[]).then(({loadSession:G})=>{if(!N)return;const Q=G(N.id);Q&&(p(Q.quiz),v(Q.userAnswers),s(Q.selectedLicense),d(Q.selectedSubject),Q.mode==="online_exam"?e(je.IN_ONLINE_EXAM):e(je.IN_QUIZ))})},V=async()=>{if(N){if(N.defaultLicenseId){const G=n.find(Q=>Q.id===N.defaultLicenseId);if(G){s(G),e(je.MODE_SELECTION);return}}else if(N.courseId)try{const G=Ct(Pe,"courses",N.courseId),Q=await td(G);if(Q.exists()){const re=Q.data();if(re.licenseId){const _e=n.find(Se=>Se.id===re.licenseId);if(_e){s(_e),e(je.MODE_SELECTION),$n(async()=>{const{updateDoc:Se}=await Promise.resolve().then(()=>rc);return{updateDoc:Se}},void 0).then(({updateDoc:Se})=>{Se(Ct(Pe,"users",N.id),{defaultLicenseId:re.licenseId}).catch(ce=>console.error("Self-heal failed:",ce))});return}}}}catch(G){console.error("Error in license fallback:",G)}$n(async()=>{const{getLicensePreference:G}=await import("./sessionService-CxCtOUx6.js");return{getLicensePreference:G}},[]).then(({getLicensePreference:G})=>{const Q=G();Q&&n.find(re=>re.id===Q)?(s(n.find(re=>re.id===Q)),e(je.DASHBOARD)):e(je.LICENSE_SELECTION)})}else e(je.LICENSE_SELECTION)},U=()=>{e(je.LOGIN)},z=()=>{e(je.REGISTER)},$=async G=>{s(G),$n(async()=>{const{saveLicensePreference:Q}=await import("./sessionService-CxCtOUx6.js");return{saveLicensePreference:Q}},[]).then(({saveLicensePreference:Q})=>{Q(G.id)}),e(N?je.MODE_SELECTION:je.NAME_INPUT)},ne=G=>{C(G),e(je.MODE_SELECTION)},fe=async()=>{if(!i)return;if(await f$(N)!=="ALLOWED"){await p$(N,()=>e(je.LOGIN));return}await m$(N);const Q=[];i.subjects.forEach(ce=>{Q.push(...ce.questions)});const _e=[...Q].sort(()=>.5-Math.random()).slice(0,30),Se={id:`exam_${Date.now()}`,title:`Thi Th - ${i.name}`,questions:_e,timeLimit:2700};p(Se),v({}),_(0),localStorage.removeItem("ontap_quiz_session"),e(je.IN_ONLINE_EXAM)},K=async G=>{G==="practice"?i&&(l(i.subjects),e(je.SUBJECT_SELECTION)):G==="online_exam"&&fe()},W=async G=>{if(await f$(N)!=="ALLOWED"){await p$(N,()=>e(je.LOGIN));return}await m$(N),d(G);const re={id:G.id,title:G.name,questions:G.questions,timeLimit:0};p(re),v({}),localStorage.removeItem("ontap_quiz_session"),e(je.IN_QUIZ)},ee=G=>{if(h){$n(async()=>{const{clearSession:re}=await import("./sessionService-CxCtOUx6.js");return{clearSession:re}},[]).then(({clearSession:re})=>re()),D(!1);let Q=0;if(h.questions.forEach(re=>{G[re.id]===re.correctAnswerId&&Q++}),_(Q),v(G),t===je.IN_ONLINE_EXAM)N&&R7(N.id,i.id,i.name,null,"Thi th",Q,30,h.timeLimit-0),e(je.EXAM_RESULT);else{if(N&&i){const re=u?u.name:null;R7(N.id,i.id,i.name,re,"n tp",Q,h.questions.length,0)}e(je.RESULT)}}},oe=()=>{t===je.EXAM_RESULT?fe():u&&i&&W(u)},pe=G=>{G==="dashboard"?e(N?je.DASHBOARD:je.WELCOME):G==="history"?e(je.HISTORY):G==="login"?e(je.LOGIN):G==="my_class"?e(je.MY_CLASS):G==="class_management"?e(je.CLASS_MANAGEMENT):G==="account"?e(N?je.ACCOUNT:je.LOGIN):G==="notification_mgmt"?e(je.NOTIFICATION_MGMT):G==="online_exam_management"?e(je.ONLINE_EXAM_MANAGEMENT):G==="mailbox"&&e(je.MAILBOX)},B=async()=>{$n(async()=>{const{clearSession:G}=await import("./sessionService-CxCtOUx6.js");return{clearSession:G}},[]).then(({clearSession:G})=>G()),await Ji.signOut()},X=m.jsx(pF,{mode:"wait",children:m.jsx(Nh.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"w-full h-full",children:(()=>{switch(t){case je.THI_TRUC_TUYEN:return m.jsx(g$,{});case je.WELCOME:return m.jsx(L7,{onStart:V,onLoginClick:U,onRegisterClick:z});case je.LOGIN:return m.jsx(W1e,{onBack:()=>e(je.WELCOME)});case je.REGISTER:return m.jsx(K1e,{onBack:()=>e(je.WELCOME),onSuccess:()=>e(je.DASHBOARD)});case je.LICENSE_SELECTION:return m.jsx(X1e,{licenses:n,onSelect:$,onBack:()=>e(je.WELCOME)});case je.NAME_INPUT:return m.jsx(Q1e,{onNameSubmit:ne,onBack:()=>e(je.LICENSE_SELECTION)});case je.MODE_SELECTION:return m.jsx(J1e,{onModeSelect:K,licenseName:(i==null?void 0:i.name)||"",userName:E,onSwitchLicense:()=>e(je.LICENSE_SELECTION)});case je.SUBJECT_SELECTION:return m.jsx(Z1e,{subjects:a,progress:{},onSelect:W,onBack:()=>e(je.MODE_SELECTION)});case je.IN_QUIZ:return h?m.jsx(e_e,{quiz:h,onFinish:ee,onBack:()=>e(je.SUBJECT_SELECTION),initialAnswers:y,initialIndex:(()=>{try{const G=localStorage.getItem("ontap_quiz_session");return G?JSON.parse(G).currentQuestionIndex:0}catch{return 0}})(),onProgressUpdate:(G,Q,re)=>k(G,Q,re,h,"practice")}):null;case je.IN_ONLINE_EXAM:return h?m.jsx(i_e,{quiz:h,onFinish:ee,onBack:()=>e(je.MODE_SELECTION),userName:E,userProfile:N,selectedLicense:i,initialAnswers:y,initialIndex:(()=>{try{const G=localStorage.getItem("ontap_quiz_session");return G?JSON.parse(G).currentQuestionIndex:0}catch{return 0}})(),initialTime:(()=>{try{const G=localStorage.getItem("ontap_quiz_session");return G?JSON.parse(G).timeLeft:void 0}catch{return}})(),onProgressUpdate:(G,Q,re)=>k(G,Q,re,h,"online_exam")}):null;case je.RESULT:return h?m.jsx(a_e,{quiz:h,userAnswers:y,score:w,onRetry:oe,onBack:()=>e(je.SUBJECT_SELECTION),userName:E}):null;case je.EXAM_RESULT:return h?m.jsx(s_e,{quiz:h,userAnswers:y,score:w,onRetry:oe,onBack:()=>e(je.MODE_SELECTION),userName:E}):null;case je.DASHBOARD:return m.jsx(FDe,{userProfile:N,onStart:()=>e(je.LICENSE_SELECTION),onHistoryClick:()=>e(je.HISTORY),onClassClick:()=>pe(N.role==="hoc_vien"?"my_class":"class_management"),onOnlineExamClick:()=>e(je.ONLINE_EXAM_MANAGEMENT)});case je.HISTORY:return m.jsx(HDe,{userProfile:N,onBack:()=>e(je.DASHBOARD)});case je.MY_CLASS:return m.jsx(GDe,{userProfile:N,onBack:()=>e(je.DASHBOARD)});case je.CLASS_MANAGEMENT:return m.jsx(KDe,{userProfile:N,onBack:()=>e(je.DASHBOARD)});case je.ACCOUNT:return m.jsx(XDe,{userProfile:N,onBack:()=>e(je.DASHBOARD),onNavigate:pe});case je.NOTIFICATION_MGMT:return N?m.jsx(w1e,{userProfile:N}):null;case je.ONLINE_EXAM_MANAGEMENT:return N?m.jsx(gVe,{userProfile:N,onBack:()=>e(je.DASHBOARD)}):null;case je.MAILBOX:return N?m.jsx(fVe,{userProfile:N,onBack:()=>e(je.DASHBOARD)}):null;case je.ANALYTICS:return m.jsx(yVe,{onBack:()=>e(je.DASHBOARD)});default:return m.jsx(L7,{onStart:V,onLoginClick:U,onRegisterClick:z})}})()},t)});return t===je.THI_TRUC_TUYEN?m.jsx(g$,{}):m.jsxs("div",{className:`min-h-screen bg-background text-foreground font-sans transition-colors duration-300 ${P?"pb-16":"pt-16"}`,children:[m.jsx(Ube,{}),m.jsx(Ule,{position:"top-right",richColors:!0,expand:!0}),R&&m.jsxs("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-yellow-400 text-black px-6 py-3 rounded-full shadow-xl z-50 animate-bounce cursor-pointer hover:bg-yellow-500 font-bold flex items-center gap-2",onClick:M,children:[m.jsx("span",{children:" Bn ang c bi thi lm d!"}),m.jsx("span",{className:"underline",children:"Lm tip ngay"})]}),m.jsx(mVe,{userProfile:N}),!P&&m.jsxs(m.Fragment,{children:[m.jsx(z7e,{userProfile:N,onNavigate:pe,onLogout:B}),m.jsx(EVe,{})]}),X,P&&m.jsx(pVe,{userProfile:N,currentScreen:t,onNavigate:pe,onLogout:B})]})},SVe=()=>m.jsxs(x$,{children:[m.jsx(Xle,{}),m.jsx(TVe,{}),m.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:m.jsx(Yle,{})})]}),$te=document.getElementById("root");if(!$te)throw new Error("Could not find root element to mount to");const CVe=jre.createRoot($te);CVe.render(m.jsx(ue.StrictMode,{children:m.jsx(U7e,{children:m.jsx(x$,{children:m.jsx(SVe,{})})})}));export{hp as C,$Ve as W,nY as a,Pe as b,XN as c,Ct as d,mj as r,jr as u};
