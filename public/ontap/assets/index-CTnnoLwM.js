function zS(s,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in s)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(s,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function Mg(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function BS(s){if(Object.prototype.hasOwnProperty.call(s,"__esModule"))return s;var e=s.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(s).forEach(function(r){var a=Object.getOwnPropertyDescriptor(s,r);Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:function(){return s[r]}})}),t}var pm={exports:{}},Fl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jv;function qS(){if(Jv)return Fl;Jv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var m in a)m!=="key"&&(l[m]=a[m])}else l=a;return a=l.ref,{$$typeof:s,type:r,key:c,ref:a!==void 0?a:null,props:l}}return Fl.Fragment=e,Fl.jsx=t,Fl.jsxs=t,Fl}var Xv;function HS(){return Xv||(Xv=1,pm.exports=qS()),pm.exports}var _=HS(),ym={exports:{}},xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wv;function $S(){if(Wv)return xe;Wv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),x=Symbol.iterator;function A(P){return P===null||typeof P!="object"?null:(P=x&&P[x]||P["@@iterator"],typeof P=="function"?P:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,U={};function K(P,Z,le){this.props=P,this.context=Z,this.refs=U,this.updater=le||k}K.prototype.isReactComponent={},K.prototype.setState=function(P,Z){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,Z,"setState")},K.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function te(){}te.prototype=K.prototype;function F(P,Z,le){this.props=P,this.context=Z,this.refs=U,this.updater=le||k}var ne=F.prototype=new te;ne.constructor=F,D(ne,K.prototype),ne.isPureReactComponent=!0;var W=Array.isArray;function re(){}var C={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function I(P,Z,le){var ce=le.ref;return{$$typeof:s,type:P,key:Z,ref:ce!==void 0?ce:null,props:le}}function V(P,Z){return I(P.type,Z,P.props)}function j(P){return typeof P=="object"&&P!==null&&P.$$typeof===s}function L(P){var Z={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(le){return Z[le]})}var N=/\/+/g;function it(P,Z){return typeof P=="object"&&P!==null&&P.key!=null?L(""+P.key):Z.toString(36)}function bt(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(re,re):(P.status="pending",P.then(function(Z){P.status==="pending"&&(P.status="fulfilled",P.value=Z)},function(Z){P.status==="pending"&&(P.status="rejected",P.reason=Z)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function Y(P,Z,le,ce,Ee){var Ae=typeof P;(Ae==="undefined"||Ae==="boolean")&&(P=null);var De=!1;if(P===null)De=!0;else switch(Ae){case"bigint":case"string":case"number":De=!0;break;case"object":switch(P.$$typeof){case s:case e:De=!0;break;case b:return De=P._init,Y(De(P._payload),Z,le,ce,Ee)}}if(De)return Ee=Ee(P),De=ce===""?"."+it(P,0):ce,W(Ee)?(le="",De!=null&&(le=De.replace(N,"$&/")+"/"),Y(Ee,Z,le,"",function(Fs){return Fs})):Ee!=null&&(j(Ee)&&(Ee=V(Ee,le+(Ee.key==null||P&&P.key===Ee.key?"":(""+Ee.key).replace(N,"$&/")+"/")+De)),Z.push(Ee)),1;De=0;var pt=ce===""?".":ce+":";if(W(P))for(var at=0;at<P.length;at++)ce=P[at],Ae=pt+it(ce,at),De+=Y(ce,Z,le,Ae,Ee);else if(at=A(P),typeof at=="function")for(P=at.call(P),at=0;!(ce=P.next()).done;)ce=ce.value,Ae=pt+it(ce,at++),De+=Y(ce,Z,le,Ae,Ee);else if(Ae==="object"){if(typeof P.then=="function")return Y(bt(P),Z,le,ce,Ee);throw Z=String(P),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return De}function ue(P,Z,le){if(P==null)return P;var ce=[],Ee=0;return Y(P,ce,"","",function(Ae){return Z.call(le,Ae,Ee++)}),ce}function ye(P){if(P._status===-1){var Z=P._result;Z=Z(),Z.then(function(le){(P._status===0||P._status===-1)&&(P._status=1,P._result=le)},function(le){(P._status===0||P._status===-1)&&(P._status=2,P._result=le)}),P._status===-1&&(P._status=0,P._result=Z)}if(P._status===1)return P._result.default;throw P._result}var je=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},qe={map:ue,forEach:function(P,Z,le){ue(P,function(){Z.apply(this,arguments)},le)},count:function(P){var Z=0;return ue(P,function(){Z++}),Z},toArray:function(P){return ue(P,function(Z){return Z})||[]},only:function(P){if(!j(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return xe.Activity=E,xe.Children=qe,xe.Component=K,xe.Fragment=t,xe.Profiler=a,xe.PureComponent=F,xe.StrictMode=r,xe.Suspense=g,xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,xe.__COMPILER_RUNTIME={__proto__:null,c:function(P){return C.H.useMemoCache(P)}},xe.cache=function(P){return function(){return P.apply(null,arguments)}},xe.cacheSignal=function(){return null},xe.cloneElement=function(P,Z,le){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ce=D({},P.props),Ee=P.key;if(Z!=null)for(Ae in Z.key!==void 0&&(Ee=""+Z.key),Z)!R.call(Z,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&Z.ref===void 0||(ce[Ae]=Z[Ae]);var Ae=arguments.length-2;if(Ae===1)ce.children=le;else if(1<Ae){for(var De=Array(Ae),pt=0;pt<Ae;pt++)De[pt]=arguments[pt+2];ce.children=De}return I(P.type,Ee,ce)},xe.createContext=function(P){return P={$$typeof:c,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:l,_context:P},P},xe.createElement=function(P,Z,le){var ce,Ee={},Ae=null;if(Z!=null)for(ce in Z.key!==void 0&&(Ae=""+Z.key),Z)R.call(Z,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(Ee[ce]=Z[ce]);var De=arguments.length-2;if(De===1)Ee.children=le;else if(1<De){for(var pt=Array(De),at=0;at<De;at++)pt[at]=arguments[at+2];Ee.children=pt}if(P&&P.defaultProps)for(ce in De=P.defaultProps,De)Ee[ce]===void 0&&(Ee[ce]=De[ce]);return I(P,Ae,Ee)},xe.createRef=function(){return{current:null}},xe.forwardRef=function(P){return{$$typeof:m,render:P}},xe.isValidElement=j,xe.lazy=function(P){return{$$typeof:b,_payload:{_status:-1,_result:P},_init:ye}},xe.memo=function(P,Z){return{$$typeof:p,type:P,compare:Z===void 0?null:Z}},xe.startTransition=function(P){var Z=C.T,le={};C.T=le;try{var ce=P(),Ee=C.S;Ee!==null&&Ee(le,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(re,je)}catch(Ae){je(Ae)}finally{Z!==null&&le.types!==null&&(Z.types=le.types),C.T=Z}},xe.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},xe.use=function(P){return C.H.use(P)},xe.useActionState=function(P,Z,le){return C.H.useActionState(P,Z,le)},xe.useCallback=function(P,Z){return C.H.useCallback(P,Z)},xe.useContext=function(P){return C.H.useContext(P)},xe.useDebugValue=function(){},xe.useDeferredValue=function(P,Z){return C.H.useDeferredValue(P,Z)},xe.useEffect=function(P,Z){return C.H.useEffect(P,Z)},xe.useEffectEvent=function(P){return C.H.useEffectEvent(P)},xe.useId=function(){return C.H.useId()},xe.useImperativeHandle=function(P,Z,le){return C.H.useImperativeHandle(P,Z,le)},xe.useInsertionEffect=function(P,Z){return C.H.useInsertionEffect(P,Z)},xe.useLayoutEffect=function(P,Z){return C.H.useLayoutEffect(P,Z)},xe.useMemo=function(P,Z){return C.H.useMemo(P,Z)},xe.useOptimistic=function(P,Z){return C.H.useOptimistic(P,Z)},xe.useReducer=function(P,Z,le){return C.H.useReducer(P,Z,le)},xe.useRef=function(P){return C.H.useRef(P)},xe.useState=function(P){return C.H.useState(P)},xe.useSyncExternalStore=function(P,Z,le){return C.H.useSyncExternalStore(P,Z,le)},xe.useTransition=function(){return C.H.useTransition()},xe.version="19.2.0",xe}var Zv;function Pg(){return Zv||(Zv=1,ym.exports=$S()),ym.exports}var ie=Pg();const FS=Mg(ie);var _m={exports:{}},Gl={},vm={exports:{}},bm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e0;function GS(){return e0||(e0=1,(function(s){function e(Y,ue){var ye=Y.length;Y.push(ue);e:for(;0<ye;){var je=ye-1>>>1,qe=Y[je];if(0<a(qe,ue))Y[je]=ue,Y[ye]=qe,ye=je;else break e}}function t(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var ue=Y[0],ye=Y.pop();if(ye!==ue){Y[0]=ye;e:for(var je=0,qe=Y.length,P=qe>>>1;je<P;){var Z=2*(je+1)-1,le=Y[Z],ce=Z+1,Ee=Y[ce];if(0>a(le,ye))ce<qe&&0>a(Ee,le)?(Y[je]=Ee,Y[ce]=ye,je=ce):(Y[je]=le,Y[Z]=ye,je=Z);else if(ce<qe&&0>a(Ee,ye))Y[je]=Ee,Y[ce]=ye,je=ce;else break e}}return ue}function a(Y,ue){var ye=Y.sortIndex-ue.sortIndex;return ye!==0?ye:Y.id-ue.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var c=Date,m=c.now();s.unstable_now=function(){return c.now()-m}}var g=[],p=[],b=1,E=null,x=3,A=!1,k=!1,D=!1,U=!1,K=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function ne(Y){for(var ue=t(p);ue!==null;){if(ue.callback===null)r(p);else if(ue.startTime<=Y)r(p),ue.sortIndex=ue.expirationTime,e(g,ue);else break;ue=t(p)}}function W(Y){if(D=!1,ne(Y),!k)if(t(g)!==null)k=!0,re||(re=!0,L());else{var ue=t(p);ue!==null&&bt(W,ue.startTime-Y)}}var re=!1,C=-1,R=5,I=-1;function V(){return U?!0:!(s.unstable_now()-I<R)}function j(){if(U=!1,re){var Y=s.unstable_now();I=Y;var ue=!0;try{e:{k=!1,D&&(D=!1,te(C),C=-1),A=!0;var ye=x;try{t:{for(ne(Y),E=t(g);E!==null&&!(E.expirationTime>Y&&V());){var je=E.callback;if(typeof je=="function"){E.callback=null,x=E.priorityLevel;var qe=je(E.expirationTime<=Y);if(Y=s.unstable_now(),typeof qe=="function"){E.callback=qe,ne(Y),ue=!0;break t}E===t(g)&&r(g),ne(Y)}else r(g);E=t(g)}if(E!==null)ue=!0;else{var P=t(p);P!==null&&bt(W,P.startTime-Y),ue=!1}}break e}finally{E=null,x=ye,A=!1}ue=void 0}}finally{ue?L():re=!1}}}var L;if(typeof F=="function")L=function(){F(j)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,it=N.port2;N.port1.onmessage=j,L=function(){it.postMessage(null)}}else L=function(){K(j,0)};function bt(Y,ue){C=K(function(){Y(s.unstable_now())},ue)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Y){Y.callback=null},s.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Y?Math.floor(1e3/Y):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_next=function(Y){switch(x){case 1:case 2:case 3:var ue=3;break;default:ue=x}var ye=x;x=ue;try{return Y()}finally{x=ye}},s.unstable_requestPaint=function(){U=!0},s.unstable_runWithPriority=function(Y,ue){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ye=x;x=Y;try{return ue()}finally{x=ye}},s.unstable_scheduleCallback=function(Y,ue,ye){var je=s.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?je+ye:je):ye=je,Y){case 1:var qe=-1;break;case 2:qe=250;break;case 5:qe=1073741823;break;case 4:qe=1e4;break;default:qe=5e3}return qe=ye+qe,Y={id:b++,callback:ue,priorityLevel:Y,startTime:ye,expirationTime:qe,sortIndex:-1},ye>je?(Y.sortIndex=ye,e(p,Y),t(g)===null&&Y===t(p)&&(D?(te(C),C=-1):D=!0,bt(W,ye-je))):(Y.sortIndex=qe,e(g,Y),k||A||(k=!0,re||(re=!0,L()))),Y},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(Y){var ue=x;return function(){var ye=x;x=ue;try{return Y.apply(this,arguments)}finally{x=ye}}}})(bm)),bm}var t0;function KS(){return t0||(t0=1,vm.exports=GS()),vm.exports}var wm={exports:{}},an={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n0;function QS(){if(n0)return an;n0=1;var s=Pg();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,p,b){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:g,containerInfo:p,implementation:b}}var c=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,an.createPortal=function(g,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(g,p,null,b)},an.flushSync=function(g){var p=c.T,b=r.p;try{if(c.T=null,r.p=2,g)return g()}finally{c.T=p,r.p=b,r.d.f()}},an.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(g,p))},an.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},an.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var b=p.as,E=m(b,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?r.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:x,fetchPriority:A}):b==="script"&&r.d.X(g,{crossOrigin:E,integrity:x,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},an.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=m(p.as,p.crossOrigin);r.d.M(g,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(g)},an.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,E=m(b,p.crossOrigin);r.d.L(g,b,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},an.preloadModule=function(g,p){if(typeof g=="string")if(p){var b=m(p.as,p.crossOrigin);r.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(g)},an.requestFormReset=function(g){r.d.r(g)},an.unstable_batchedUpdates=function(g,p){return g(p)},an.useFormState=function(g,p,b){return c.H.useFormState(g,p,b)},an.useFormStatus=function(){return c.H.useHostTransitionStatus()},an.version="19.2.0",an}var s0;function YS(){if(s0)return wm.exports;s0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),wm.exports=QS(),wm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r0;function JS(){if(r0)return Gl;r0=1;var s=KS(),e=Pg(),t=YS();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(l(n)!==n)throw Error(r(188))}function p(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(r(188));return i!==n?null:n}for(var o=n,u=i;;){var d=o.return;if(d===null)break;var f=d.alternate;if(f===null){if(u=d.return,u!==null){o=u;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===o)return g(d),n;if(f===u)return g(d),i;f=f.sibling}throw Error(r(188))}if(o.return!==u.return)o=d,u=f;else{for(var v=!1,T=d.child;T;){if(T===o){v=!0,o=d,u=f;break}if(T===u){v=!0,u=d,o=f;break}T=T.sibling}if(!v){for(T=f.child;T;){if(T===o){v=!0,o=f,u=d;break}if(T===u){v=!0,u=f,o=d;break}T=T.sibling}if(!v)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:i}function b(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=b(n),i!==null)return i;n=n.sibling}return null}var E=Object.assign,x=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),F=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function L(n){return n===null||typeof n!="object"?null:(n=j&&n[j]||n["@@iterator"],typeof n=="function"?n:null)}var N=Symbol.for("react.client.reference");function it(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===N?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case D:return"Fragment";case K:return"Profiler";case U:return"StrictMode";case W:return"Suspense";case re:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case k:return"Portal";case F:return n.displayName||"Context";case te:return(n._context.displayName||"Context")+".Consumer";case ne:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case C:return i=n.displayName||null,i!==null?i:it(n.type)||"Memo";case R:i=n._payload,n=n._init;try{return it(n(i))}catch{}}return null}var bt=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},je=[],qe=-1;function P(n){return{current:n}}function Z(n){0>qe||(n.current=je[qe],je[qe]=null,qe--)}function le(n,i){qe++,je[qe]=n.current,n.current=i}var ce=P(null),Ee=P(null),Ae=P(null),De=P(null);function pt(n,i){switch(le(Ae,i),le(Ee,n),le(ce,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?vv(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=vv(i),n=bv(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Z(ce),le(ce,n)}function at(){Z(ce),Z(Ee),Z(Ae)}function Fs(n){n.memoizedState!==null&&le(De,n);var i=ce.current,o=bv(i,n.type);i!==o&&(le(Ee,n),le(ce,o))}function vr(n){Ee.current===n&&(Z(ce),Z(Ee)),De.current===n&&(Z(De),Bl._currentValue=ye)}var ke,_e;function lt(n){if(ke===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);ke=i&&i[1]||"",_e=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ke+n+_e}var yt=!1;function Qt(n,i){if(!n||yt)return"";yt=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(Q){var $=Q}Reflect.construct(n,[],ee)}else{try{ee.call()}catch(Q){$=Q}n.call(ee.prototype)}}else{try{throw Error()}catch(Q){$=Q}(ee=n())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(Q){if(Q&&$&&typeof Q.stack=="string")return[Q.stack,$.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=u.DetermineComponentFrameRoot(),v=f[0],T=f[1];if(v&&T){var O=v.split(`
`),H=T.split(`
`);for(d=u=0;u<O.length&&!O[u].includes("DetermineComponentFrameRoot");)u++;for(;d<H.length&&!H[d].includes("DetermineComponentFrameRoot");)d++;if(u===O.length||d===H.length)for(u=O.length-1,d=H.length-1;1<=u&&0<=d&&O[u]!==H[d];)d--;for(;1<=u&&0<=d;u--,d--)if(O[u]!==H[d]){if(u!==1||d!==1)do if(u--,d--,0>d||O[u]!==H[d]){var J=`
`+O[u].replace(" at new "," at ");return n.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",n.displayName)),J}while(1<=u&&0<=d);break}}}finally{yt=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?lt(o):""}function Vn(n,i){switch(n.tag){case 26:case 27:case 5:return lt(n.type);case 16:return lt("Lazy");case 13:return n.child!==i&&i!==null?lt("Suspense Fallback"):lt("Suspense");case 19:return lt("SuspenseList");case 0:case 15:return Qt(n.type,!1);case 11:return Qt(n.type.render,!1);case 1:return Qt(n.type,!0);case 31:return lt("Activity");default:return""}}function gs(n){try{var i="",o=null;do i+=Vn(n,o),o=n,n=n.return;while(n);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var st=Object.prototype.hasOwnProperty,Lt=s.unstable_scheduleCallback,br=s.unstable_cancelCallback,yd=s.unstable_shouldYield,Du=s.unstable_requestPaint,dn=s.unstable_now,Ti=s.unstable_getCurrentPriorityLevel,$o=s.unstable_ImmediatePriority,Fo=s.unstable_UserBlockingPriority,wr=s.unstable_NormalPriority,_d=s.unstable_LowPriority,Mu=s.unstable_IdlePriority,Pu=s.log,Vu=s.unstable_setDisableYieldValue,Xn=null,Yt=null;function Un(n){if(typeof Pu=="function"&&Vu(n),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(Xn,n)}catch{}}var wt=Math.clz32?Math.clz32:Lu,Uu=Math.log,pa=Math.LN2;function Lu(n){return n>>>=0,n===0?32:31-(Uu(n)/pa|0)|0}var ps=256,Si=262144,Rt=4194304;function ys(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function _s(n,i,o){var u=n.pendingLanes;if(u===0)return 0;var d=0,f=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var T=u&134217727;return T!==0?(u=T&~f,u!==0?d=ys(u):(v&=T,v!==0?d=ys(v):o||(o=T&~n,o!==0&&(d=ys(o))))):(T=u&~f,T!==0?d=ys(T):v!==0?d=ys(v):o||(o=u&~n,o!==0&&(d=ys(o)))),d===0?0:i!==0&&i!==d&&(i&f)===0&&(f=d&-d,o=i&-i,f>=o||f===32&&(o&4194048)!==0)?i:d}function Wn(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function vd(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zu(){var n=Rt;return Rt<<=1,(Rt&62914560)===0&&(Rt=4194304),n}function vs(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function Ai(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function bd(n,i,o,u,d,f){var v=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var T=n.entanglements,O=n.expirationTimes,H=n.hiddenUpdates;for(o=v&~o;0<o;){var J=31-wt(o),ee=1<<J;T[J]=0,O[J]=-1;var $=H[J];if($!==null)for(H[J]=null,J=0;J<$.length;J++){var Q=$[J];Q!==null&&(Q.lane&=-536870913)}o&=~ee}u!==0&&xi(n,u,0),f!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=f&~(v&~i))}function xi(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var u=31-wt(i);n.entangledLanes|=i,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function Go(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var u=31-wt(o),d=1<<u;d&i|n[u]&i&&(n[u]|=i),o&=~d}}function Ko(n,i){var o=i&-i;return o=(o&42)!==0?1:Ri(o),(o&(n.suspendedLanes|i))!==0?0:o}function Ri(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Gs(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Bu(){var n=ue.p;return n!==0?n:(n=window.event,n===void 0?32:Hv(n.type))}function Zn(n,i){var o=ue.p;try{return ue.p=n,i()}finally{ue.p=o}}var es=Math.random().toString(36).slice(2),Ct="__reactFiber$"+es,$t="__reactProps$"+es,bs="__reactContainer$"+es,ya="__reactEvents$"+es,wd="__reactListeners$"+es,qu="__reactHandles$"+es,Hu="__reactResources$"+es,ws="__reactMarker$"+es;function _a(n){delete n[Ct],delete n[$t],delete n[ya],delete n[wd],delete n[qu]}function Es(n){var i=n[Ct];if(i)return i;for(var o=n.parentNode;o;){if(i=o[bs]||o[Ct]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=Rv(n);n!==null;){if(o=n[Ct])return o;n=Rv(n)}return i}n=o,o=n.parentNode}return null}function Ln(n){if(n=n[Ct]||n[bs]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function An(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function Ts(n){var i=n[Hu];return i||(i=n[Hu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function It(n){n[ws]=!0}var Qo=new Set,Yo={};function Ss(n,i){As(n,i),As(n+"Capture",i)}function As(n,i){for(Yo[n]=i,n=0;n<i.length;n++)Qo.add(i[n])}var Jo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xo={},Wo={};function $u(n){return st.call(Wo,n)?!0:st.call(Xo,n)?!1:Jo.test(n)?Wo[n]=!0:(Xo[n]=!0,!1)}function va(n,i,o){if($u(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function xn(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function Nt(n,i,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+u)}}function Ft(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Er(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Zo(n,i,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var d=u.get,f=u.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(v){o=""+v,f.call(this,v)}}),Object.defineProperty(n,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Je(n){if(!n._valueTracker){var i=Er(n)?"checked":"value";n._valueTracker=Zo(n,i,""+n[i])}}function Ci(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return n&&(u=Er(n)?n.checked?"true":"false":n.value),n=u,n!==o?(i.setValue(n),!0):!1}function xs(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Ii=/[\n"\\]/g;function yn(n){return n.replace(Ii,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ba(n,i,o,u,d,f,v,T){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),i!=null?v==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Ft(i)):n.value!==""+Ft(i)&&(n.value=""+Ft(i)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),i!=null?el(n,v,Ft(i)):o!=null?el(n,v,Ft(o)):u!=null&&n.removeAttribute("value"),d==null&&f!=null&&(n.defaultChecked=!!f),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+Ft(T):n.removeAttribute("name")}function Fu(n,i,o,u,d,f,v,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(n.type=f),i!=null||o!=null){if(!(f!=="submit"&&f!=="reset"||i!=null)){Je(n);return}o=o!=null?""+Ft(o):"",i=i!=null?""+Ft(i):o,T||i===n.value||(n.value=i),n.defaultValue=i}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=T?n.checked:!!u,n.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),Je(n)}function el(n,i,o){i==="number"&&xs(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Tr(n,i,o,u){if(n=n.options,i){i={};for(var d=0;d<o.length;d++)i["$"+o[d]]=!0;for(o=0;o<n.length;o++)d=i.hasOwnProperty("$"+n[o].value),n[o].selected!==d&&(n[o].selected=d),d&&u&&(n[o].defaultSelected=!0)}else{for(o=""+Ft(o),i=null,d=0;d<n.length;d++){if(n[d].value===o){n[d].selected=!0,u&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function Gu(n,i,o){if(i!=null&&(i=""+Ft(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+Ft(o):""}function Sr(n,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(r(92));if(bt(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=Ft(i),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),Je(n)}function _n(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var Ku=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tl(n,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":u?n.setProperty(i,o):typeof o!="number"||o===0||Ku.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function nl(n,i,o){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var d in i)u=i[d],i.hasOwnProperty(d)&&o[d]!==u&&tl(n,d,u)}else for(var f in i)i.hasOwnProperty(f)&&tl(n,f,i[f])}function wa(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ar=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ea(n){return Ar.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ts(){}var sl=null;function zn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var xr=null,Rs=null;function Ni(n){var i=Ln(n);if(i&&(n=i.stateNode)){var o=n[$t]||null;e:switch(n=i.stateNode,i.type){case"input":if(ba(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+yn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==n&&u.form===n.form){var d=u[$t]||null;if(!d)throw Error(r(90));ba(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===n.form&&Ci(u)}break e;case"textarea":Gu(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Tr(n,!!o.multiple,i,!1)}}}var Ta=!1;function Rr(n,i,o){if(Ta)return n(i,o);Ta=!0;try{var u=n(i);return u}finally{if(Ta=!1,(xr!==null||Rs!==null)&&(Bc(),xr&&(i=xr,n=Rs,Rs=xr=null,Ni(i),n)))for(i=0;i<n.length;i++)Ni(n[i])}}function ns(n,i){var o=n.stateNode;if(o===null)return null;var u=o[$t]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,i,typeof o));return o}var Bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Oi=!1;if(Bn)try{var Ze={};Object.defineProperty(Ze,"passive",{get:function(){Oi=!0}}),window.addEventListener("test",Ze,Ze),window.removeEventListener("test",Ze,Ze)}catch{Oi=!1}var Cs=null,rl=null,ki=null;function il(){if(ki)return ki;var n,i=rl,o=i.length,u,d="value"in Cs?Cs.value:Cs.textContent,f=d.length;for(n=0;n<o&&i[n]===d[n];n++);var v=o-n;for(u=1;u<=v&&i[o-u]===d[f-u];u++);return ki=d.slice(n,1<u?1-u:void 0)}function ji(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Ks(){return!0}function ss(){return!1}function Jt(n){function i(o,u,d,f,v){this._reactName=o,this._targetInst=d,this.type=u,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(o=n[T],this[T]=o?o(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Ks:ss,this.isPropagationStopped=ss,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ks)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ks)},persist:function(){},isPersistent:Ks}),i}var Qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Is=Jt(Qs),Cr=E({},Qs,{view:0,detail:0}),al=Jt(Cr),Ir,Sa,Ns,Aa=E({},Cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ns&&(Ns&&n.type==="mousemove"?(Ir=n.screenX-Ns.screenX,Sa=n.screenY-Ns.screenY):Sa=Ir=0,Ns=n),Ir)},movementY:function(n){return"movementY"in n?n.movementY:Sa}}),ol=Jt(Aa),Di=E({},Aa,{dataTransfer:0}),Yu=Jt(Di),Ju=E({},Cr,{relatedTarget:0}),Mi=Jt(Ju),ll=E({},Qs,{animationName:0,elapsedTime:0,pseudoElement:0}),Xu=Jt(ll),xa=E({},Qs,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Wu=Jt(xa),Zu=E({},Qs,{data:0}),Os=Jt(Zu),ec={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sc(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=nc[n])?!!i[n]:!1}function Nr(){return sc}var fn=E({},Cr,{key:function(n){if(n.key){var i=ec[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=ji(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?tc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nr,charCode:function(n){return n.type==="keypress"?ji(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ji(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),rc=Jt(fn),ic=E({},Aa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ys=Jt(ic),h=E({},Cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nr}),y=Jt(h),w=E({},Qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=Jt(w),B=E({},Aa,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),G=Jt(B),ae=E({},Qs,{newState:0,oldState:0}),Ie=Jt(ae),Et=[9,13,27,32],Qe=Bn&&"CompositionEvent"in window,ht=null;Bn&&"documentMode"in document&&(ht=document.documentMode);var qn=Bn&&"TextEvent"in window&&!ht,ks=Bn&&(!Qe||ht&&8<ht&&11>=ht),rs=" ",is=!1;function Pi(n,i){switch(n){case"keyup":return Et.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ra(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ca=!1;function c1(n,i){switch(n){case"compositionend":return Ra(i);case"keypress":return i.which!==32?null:(is=!0,rs);case"textInput":return n=i.data,n===rs&&is?null:n;default:return null}}function h1(n,i){if(Ca)return n==="compositionend"||!Qe&&Pi(n,i)?(n=il(),ki=rl=Cs=null,Ca=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return ks&&i.locale!=="ko"?null:i.data;default:return null}}var d1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Np(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!d1[n.type]:i==="textarea"}function Op(n,i,o,u){xr?Rs?Rs.push(u):Rs=[u]:xr=u,i=Qc(i,"onChange"),0<i.length&&(o=new Is("onChange","change",null,o,u),n.push({event:o,listeners:i}))}var ul=null,cl=null;function f1(n){fv(n,0)}function ac(n){var i=An(n);if(Ci(i))return n}function kp(n,i){if(n==="change")return i}var jp=!1;if(Bn){var Ed;if(Bn){var Td="oninput"in document;if(!Td){var Dp=document.createElement("div");Dp.setAttribute("oninput","return;"),Td=typeof Dp.oninput=="function"}Ed=Td}else Ed=!1;jp=Ed&&(!document.documentMode||9<document.documentMode)}function Mp(){ul&&(ul.detachEvent("onpropertychange",Pp),cl=ul=null)}function Pp(n){if(n.propertyName==="value"&&ac(cl)){var i=[];Op(i,cl,n,zn(n)),Rr(f1,i)}}function m1(n,i,o){n==="focusin"?(Mp(),ul=i,cl=o,ul.attachEvent("onpropertychange",Pp)):n==="focusout"&&Mp()}function g1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ac(cl)}function p1(n,i){if(n==="click")return ac(i)}function y1(n,i){if(n==="input"||n==="change")return ac(i)}function _1(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Rn=typeof Object.is=="function"?Object.is:_1;function hl(n,i){if(Rn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var d=o[u];if(!st.call(i,d)||!Rn(n[d],i[d]))return!1}return!0}function Vp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Up(n,i){var o=Vp(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=i&&u>=i)return{node:o,offset:i-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Vp(o)}}function Lp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Lp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function zp(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=xs(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=xs(n.document)}return i}function Sd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var v1=Bn&&"documentMode"in document&&11>=document.documentMode,Ia=null,Ad=null,dl=null,xd=!1;function Bp(n,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;xd||Ia==null||Ia!==xs(u)||(u=Ia,"selectionStart"in u&&Sd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),dl&&hl(dl,u)||(dl=u,u=Qc(Ad,"onSelect"),0<u.length&&(i=new Is("onSelect","select",null,i,o),n.push({event:i,listeners:u}),i.target=Ia)))}function Vi(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var Na={animationend:Vi("Animation","AnimationEnd"),animationiteration:Vi("Animation","AnimationIteration"),animationstart:Vi("Animation","AnimationStart"),transitionrun:Vi("Transition","TransitionRun"),transitionstart:Vi("Transition","TransitionStart"),transitioncancel:Vi("Transition","TransitionCancel"),transitionend:Vi("Transition","TransitionEnd")},Rd={},qp={};Bn&&(qp=document.createElement("div").style,"AnimationEvent"in window||(delete Na.animationend.animation,delete Na.animationiteration.animation,delete Na.animationstart.animation),"TransitionEvent"in window||delete Na.transitionend.transition);function Ui(n){if(Rd[n])return Rd[n];if(!Na[n])return n;var i=Na[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in qp)return Rd[n]=i[o];return n}var Hp=Ui("animationend"),$p=Ui("animationiteration"),Fp=Ui("animationstart"),b1=Ui("transitionrun"),w1=Ui("transitionstart"),E1=Ui("transitioncancel"),Gp=Ui("transitionend"),Kp=new Map,Cd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cd.push("scrollEnd");function as(n,i){Kp.set(n,i),Ss(i,[n])}var oc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Hn=[],Oa=0,Id=0;function lc(){for(var n=Oa,i=Id=Oa=0;i<n;){var o=Hn[i];Hn[i++]=null;var u=Hn[i];Hn[i++]=null;var d=Hn[i];Hn[i++]=null;var f=Hn[i];if(Hn[i++]=null,u!==null&&d!==null){var v=u.pending;v===null?d.next=d:(d.next=v.next,v.next=d),u.pending=d}f!==0&&Qp(o,d,f)}}function uc(n,i,o,u){Hn[Oa++]=n,Hn[Oa++]=i,Hn[Oa++]=o,Hn[Oa++]=u,Id|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Nd(n,i,o,u){return uc(n,i,o,u),cc(n)}function Li(n,i){return uc(n,null,null,i),cc(n)}function Qp(n,i,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var d=!1,f=n.return;f!==null;)f.childLanes|=o,u=f.alternate,u!==null&&(u.childLanes|=o),f.tag===22&&(n=f.stateNode,n===null||n._visibility&1||(d=!0)),n=f,f=f.return;return n.tag===3?(f=n.stateNode,d&&i!==null&&(d=31-wt(o),n=f.hiddenUpdates,u=n[d],u===null?n[d]=[i]:u.push(i),i.lane=o|536870912),f):null}function cc(n){if(50<Dl)throw Dl=0,zf=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var ka={};function T1(n,i,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(n,i,o,u){return new T1(n,i,o,u)}function Od(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Js(n,i){var o=n.alternate;return o===null?(o=Cn(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Yp(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function hc(n,i,o,u,d,f){var v=0;if(u=n,typeof n=="function")Od(n)&&(v=1);else if(typeof n=="string")v=CS(n,o,ce.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=Cn(31,o,i,d),n.elementType=I,n.lanes=f,n;case D:return zi(o.children,d,f,i);case U:v=8,d|=24;break;case K:return n=Cn(12,o,i,d|2),n.elementType=K,n.lanes=f,n;case W:return n=Cn(13,o,i,d),n.elementType=W,n.lanes=f,n;case re:return n=Cn(19,o,i,d),n.elementType=re,n.lanes=f,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case F:v=10;break e;case te:v=9;break e;case ne:v=11;break e;case C:v=14;break e;case R:v=16,u=null;break e}v=29,o=Error(r(130,n===null?"null":typeof n,"")),u=null}return i=Cn(v,o,i,d),i.elementType=n,i.type=u,i.lanes=f,i}function zi(n,i,o,u){return n=Cn(7,n,u,i),n.lanes=o,n}function kd(n,i,o){return n=Cn(6,n,null,i),n.lanes=o,n}function Jp(n){var i=Cn(18,null,null,0);return i.stateNode=n,i}function jd(n,i,o){return i=Cn(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Xp=new WeakMap;function $n(n,i){if(typeof n=="object"&&n!==null){var o=Xp.get(n);return o!==void 0?o:(i={value:n,source:i,stack:gs(i)},Xp.set(n,i),i)}return{value:n,source:i,stack:gs(i)}}var ja=[],Da=0,dc=null,fl=0,Fn=[],Gn=0,Or=null,js=1,Ds="";function Xs(n,i){ja[Da++]=fl,ja[Da++]=dc,dc=n,fl=i}function Wp(n,i,o){Fn[Gn++]=js,Fn[Gn++]=Ds,Fn[Gn++]=Or,Or=n;var u=js;n=Ds;var d=32-wt(u)-1;u&=~(1<<d),o+=1;var f=32-wt(i)+d;if(30<f){var v=d-d%5;f=(u&(1<<v)-1).toString(32),u>>=v,d-=v,js=1<<32-wt(i)+d|o<<d|u,Ds=f+n}else js=1<<f|o<<d|u,Ds=n}function Dd(n){n.return!==null&&(Xs(n,1),Wp(n,1,0))}function Md(n){for(;n===dc;)dc=ja[--Da],ja[Da]=null,fl=ja[--Da],ja[Da]=null;for(;n===Or;)Or=Fn[--Gn],Fn[Gn]=null,Ds=Fn[--Gn],Fn[Gn]=null,js=Fn[--Gn],Fn[Gn]=null}function Zp(n,i){Fn[Gn++]=js,Fn[Gn++]=Ds,Fn[Gn++]=Or,js=i.id,Ds=i.overflow,Or=n}var Xt=null,ut=null,ze=!1,kr=null,Kn=!1,Pd=Error(r(519));function jr(n){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ml($n(i,n)),Pd}function ey(n){var i=n.stateNode,o=n.type,u=n.memoizedProps;switch(i[Ct]=n,i[$t]=u,o){case"dialog":Pe("cancel",i),Pe("close",i);break;case"iframe":case"object":case"embed":Pe("load",i);break;case"video":case"audio":for(o=0;o<Pl.length;o++)Pe(Pl[o],i);break;case"source":Pe("error",i);break;case"img":case"image":case"link":Pe("error",i),Pe("load",i);break;case"details":Pe("toggle",i);break;case"input":Pe("invalid",i),Fu(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Pe("invalid",i);break;case"textarea":Pe("invalid",i),Sr(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||yv(i.textContent,o)?(u.popover!=null&&(Pe("beforetoggle",i),Pe("toggle",i)),u.onScroll!=null&&Pe("scroll",i),u.onScrollEnd!=null&&Pe("scrollend",i),u.onClick!=null&&(i.onclick=ts),i=!0):i=!1,i||jr(n,!0)}function ty(n){for(Xt=n.return;Xt;)switch(Xt.tag){case 5:case 31:case 13:Kn=!1;return;case 27:case 3:Kn=!0;return;default:Xt=Xt.return}}function Ma(n){if(n!==Xt)return!1;if(!ze)return ty(n),ze=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||tm(n.type,n.memoizedProps)),o=!o),o&&ut&&jr(n),ty(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));ut=xv(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));ut=xv(n)}else i===27?(i=ut,Kr(n.type)?(n=am,am=null,ut=n):ut=i):ut=Xt?Yn(n.stateNode.nextSibling):null;return!0}function Bi(){ut=Xt=null,ze=!1}function Vd(){var n=kr;return n!==null&&(En===null?En=n:En.push.apply(En,n),kr=null),n}function ml(n){kr===null?kr=[n]:kr.push(n)}var Ud=P(null),qi=null,Ws=null;function Dr(n,i,o){le(Ud,i._currentValue),i._currentValue=o}function Zs(n){n._currentValue=Ud.current,Z(Ud)}function Ld(n,i,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===o)break;n=n.return}}function zd(n,i,o,u){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var f=d.dependencies;if(f!==null){var v=d.child;f=f.firstContext;e:for(;f!==null;){var T=f;f=d;for(var O=0;O<i.length;O++)if(T.context===i[O]){f.lanes|=o,T=f.alternate,T!==null&&(T.lanes|=o),Ld(f.return,o,n),u||(v=null);break e}f=T.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(r(341));v.lanes|=o,f=v.alternate,f!==null&&(f.lanes|=o),Ld(v,o,n),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===n){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function Pa(n,i,o,u){n=null;for(var d=i,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var T=d.type;Rn(d.pendingProps.value,v.value)||(n!==null?n.push(T):n=[T])}}else if(d===De.current){if(v=d.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(Bl):n=[Bl])}d=d.return}n!==null&&zd(i,n,o,u),i.flags|=262144}function fc(n){for(n=n.firstContext;n!==null;){if(!Rn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Hi(n){qi=n,Ws=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Wt(n){return ny(qi,n)}function mc(n,i){return qi===null&&Hi(n),ny(n,i)}function ny(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Ws===null){if(n===null)throw Error(r(308));Ws=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Ws=Ws.next=i;return o}var S1=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},A1=s.unstable_scheduleCallback,x1=s.unstable_NormalPriority,Ot={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bd(){return{controller:new S1,data:new Map,refCount:0}}function gl(n){n.refCount--,n.refCount===0&&A1(x1,function(){n.controller.abort()})}var pl=null,qd=0,Va=0,Ua=null;function R1(n,i){if(pl===null){var o=pl=[];qd=0,Va=Gf(),Ua={status:"pending",value:void 0,then:function(u){o.push(u)}}}return qd++,i.then(sy,sy),i}function sy(){if(--qd===0&&pl!==null){Ua!==null&&(Ua.status="fulfilled");var n=pl;pl=null,Va=0,Ua=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function C1(n,i){var o=[],u={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return n.then(function(){u.status="fulfilled",u.value=i;for(var d=0;d<o.length;d++)(0,o[d])(i)},function(d){for(u.status="rejected",u.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),u}var ry=Y.S;Y.S=function(n,i){B_=dn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&R1(n,i),ry!==null&&ry(n,i)};var $i=P(null);function Hd(){var n=$i.current;return n!==null?n:rt.pooledCache}function gc(n,i){i===null?le($i,$i.current):le($i,i.pool)}function iy(){var n=Hd();return n===null?null:{parent:Ot._currentValue,pool:n}}var La=Error(r(460)),$d=Error(r(474)),pc=Error(r(542)),yc={then:function(){}};function ay(n){return n=n.status,n==="fulfilled"||n==="rejected"}function oy(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(ts,ts),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,uy(n),n;default:if(typeof i.status=="string")i.then(ts,ts);else{if(n=rt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(u){if(i.status==="pending"){var d=i;d.status="fulfilled",d.value=u}},function(u){if(i.status==="pending"){var d=i;d.status="rejected",d.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,uy(n),n}throw Gi=i,La}}function Fi(n){try{var i=n._init;return i(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Gi=o,La):o}}var Gi=null;function ly(){if(Gi===null)throw Error(r(459));var n=Gi;return Gi=null,n}function uy(n){if(n===La||n===pc)throw Error(r(483))}var za=null,yl=0;function _c(n){var i=yl;return yl+=1,za===null&&(za=[]),oy(za,n,i)}function _l(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function vc(n,i){throw i.$$typeof===x?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function cy(n){function i(z,M){if(n){var q=z.deletions;q===null?(z.deletions=[M],z.flags|=16):q.push(M)}}function o(z,M){if(!n)return null;for(;M!==null;)i(z,M),M=M.sibling;return null}function u(z){for(var M=new Map;z!==null;)z.key!==null?M.set(z.key,z):M.set(z.index,z),z=z.sibling;return M}function d(z,M){return z=Js(z,M),z.index=0,z.sibling=null,z}function f(z,M,q){return z.index=q,n?(q=z.alternate,q!==null?(q=q.index,q<M?(z.flags|=67108866,M):q):(z.flags|=67108866,M)):(z.flags|=1048576,M)}function v(z){return n&&z.alternate===null&&(z.flags|=67108866),z}function T(z,M,q,X){return M===null||M.tag!==6?(M=kd(q,z.mode,X),M.return=z,M):(M=d(M,q),M.return=z,M)}function O(z,M,q,X){var ve=q.type;return ve===D?J(z,M,q.props.children,X,q.key):M!==null&&(M.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===R&&Fi(ve)===M.type)?(M=d(M,q.props),_l(M,q),M.return=z,M):(M=hc(q.type,q.key,q.props,null,z.mode,X),_l(M,q),M.return=z,M)}function H(z,M,q,X){return M===null||M.tag!==4||M.stateNode.containerInfo!==q.containerInfo||M.stateNode.implementation!==q.implementation?(M=jd(q,z.mode,X),M.return=z,M):(M=d(M,q.children||[]),M.return=z,M)}function J(z,M,q,X,ve){return M===null||M.tag!==7?(M=zi(q,z.mode,X,ve),M.return=z,M):(M=d(M,q),M.return=z,M)}function ee(z,M,q){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=kd(""+M,z.mode,q),M.return=z,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case A:return q=hc(M.type,M.key,M.props,null,z.mode,q),_l(q,M),q.return=z,q;case k:return M=jd(M,z.mode,q),M.return=z,M;case R:return M=Fi(M),ee(z,M,q)}if(bt(M)||L(M))return M=zi(M,z.mode,q,null),M.return=z,M;if(typeof M.then=="function")return ee(z,_c(M),q);if(M.$$typeof===F)return ee(z,mc(z,M),q);vc(z,M)}return null}function $(z,M,q,X){var ve=M!==null?M.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return ve!==null?null:T(z,M,""+q,X);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case A:return q.key===ve?O(z,M,q,X):null;case k:return q.key===ve?H(z,M,q,X):null;case R:return q=Fi(q),$(z,M,q,X)}if(bt(q)||L(q))return ve!==null?null:J(z,M,q,X,null);if(typeof q.then=="function")return $(z,M,_c(q),X);if(q.$$typeof===F)return $(z,M,mc(z,q),X);vc(z,q)}return null}function Q(z,M,q,X,ve){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return z=z.get(q)||null,T(M,z,""+X,ve);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case A:return z=z.get(X.key===null?q:X.key)||null,O(M,z,X,ve);case k:return z=z.get(X.key===null?q:X.key)||null,H(M,z,X,ve);case R:return X=Fi(X),Q(z,M,q,X,ve)}if(bt(X)||L(X))return z=z.get(q)||null,J(M,z,X,ve,null);if(typeof X.then=="function")return Q(z,M,q,_c(X),ve);if(X.$$typeof===F)return Q(z,M,q,mc(M,X),ve);vc(M,X)}return null}function de(z,M,q,X){for(var ve=null,Ge=null,me=M,Oe=M=0,Ue=null;me!==null&&Oe<q.length;Oe++){me.index>Oe?(Ue=me,me=null):Ue=me.sibling;var Ke=$(z,me,q[Oe],X);if(Ke===null){me===null&&(me=Ue);break}n&&me&&Ke.alternate===null&&i(z,me),M=f(Ke,M,Oe),Ge===null?ve=Ke:Ge.sibling=Ke,Ge=Ke,me=Ue}if(Oe===q.length)return o(z,me),ze&&Xs(z,Oe),ve;if(me===null){for(;Oe<q.length;Oe++)me=ee(z,q[Oe],X),me!==null&&(M=f(me,M,Oe),Ge===null?ve=me:Ge.sibling=me,Ge=me);return ze&&Xs(z,Oe),ve}for(me=u(me);Oe<q.length;Oe++)Ue=Q(me,z,Oe,q[Oe],X),Ue!==null&&(n&&Ue.alternate!==null&&me.delete(Ue.key===null?Oe:Ue.key),M=f(Ue,M,Oe),Ge===null?ve=Ue:Ge.sibling=Ue,Ge=Ue);return n&&me.forEach(function(Wr){return i(z,Wr)}),ze&&Xs(z,Oe),ve}function be(z,M,q,X){if(q==null)throw Error(r(151));for(var ve=null,Ge=null,me=M,Oe=M=0,Ue=null,Ke=q.next();me!==null&&!Ke.done;Oe++,Ke=q.next()){me.index>Oe?(Ue=me,me=null):Ue=me.sibling;var Wr=$(z,me,Ke.value,X);if(Wr===null){me===null&&(me=Ue);break}n&&me&&Wr.alternate===null&&i(z,me),M=f(Wr,M,Oe),Ge===null?ve=Wr:Ge.sibling=Wr,Ge=Wr,me=Ue}if(Ke.done)return o(z,me),ze&&Xs(z,Oe),ve;if(me===null){for(;!Ke.done;Oe++,Ke=q.next())Ke=ee(z,Ke.value,X),Ke!==null&&(M=f(Ke,M,Oe),Ge===null?ve=Ke:Ge.sibling=Ke,Ge=Ke);return ze&&Xs(z,Oe),ve}for(me=u(me);!Ke.done;Oe++,Ke=q.next())Ke=Q(me,z,Oe,Ke.value,X),Ke!==null&&(n&&Ke.alternate!==null&&me.delete(Ke.key===null?Oe:Ke.key),M=f(Ke,M,Oe),Ge===null?ve=Ke:Ge.sibling=Ke,Ge=Ke);return n&&me.forEach(function(LS){return i(z,LS)}),ze&&Xs(z,Oe),ve}function nt(z,M,q,X){if(typeof q=="object"&&q!==null&&q.type===D&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case A:e:{for(var ve=q.key;M!==null;){if(M.key===ve){if(ve=q.type,ve===D){if(M.tag===7){o(z,M.sibling),X=d(M,q.props.children),X.return=z,z=X;break e}}else if(M.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===R&&Fi(ve)===M.type){o(z,M.sibling),X=d(M,q.props),_l(X,q),X.return=z,z=X;break e}o(z,M);break}else i(z,M);M=M.sibling}q.type===D?(X=zi(q.props.children,z.mode,X,q.key),X.return=z,z=X):(X=hc(q.type,q.key,q.props,null,z.mode,X),_l(X,q),X.return=z,z=X)}return v(z);case k:e:{for(ve=q.key;M!==null;){if(M.key===ve)if(M.tag===4&&M.stateNode.containerInfo===q.containerInfo&&M.stateNode.implementation===q.implementation){o(z,M.sibling),X=d(M,q.children||[]),X.return=z,z=X;break e}else{o(z,M);break}else i(z,M);M=M.sibling}X=jd(q,z.mode,X),X.return=z,z=X}return v(z);case R:return q=Fi(q),nt(z,M,q,X)}if(bt(q))return de(z,M,q,X);if(L(q)){if(ve=L(q),typeof ve!="function")throw Error(r(150));return q=ve.call(q),be(z,M,q,X)}if(typeof q.then=="function")return nt(z,M,_c(q),X);if(q.$$typeof===F)return nt(z,M,mc(z,q),X);vc(z,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,M!==null&&M.tag===6?(o(z,M.sibling),X=d(M,q),X.return=z,z=X):(o(z,M),X=kd(q,z.mode,X),X.return=z,z=X),v(z)):o(z,M)}return function(z,M,q,X){try{yl=0;var ve=nt(z,M,q,X);return za=null,ve}catch(me){if(me===La||me===pc)throw me;var Ge=Cn(29,me,null,z.mode);return Ge.lanes=X,Ge.return=z,Ge}finally{}}}var Ki=cy(!0),hy=cy(!1),Mr=!1;function Fd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gd(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Pr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Vr(n,i,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ye&2)!==0){var d=u.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),u.pending=i,i=cc(n),Qp(n,null,o),i}return uc(n,u,i,o),cc(n)}function vl(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,Go(n,o)}}function Kd(n,i){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var d=null,f=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};f===null?d=f=v:f=f.next=v,o=o.next}while(o!==null);f===null?d=f=i:f=f.next=i}else d=f=i;o={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var Qd=!1;function bl(){if(Qd){var n=Ua;if(n!==null)throw n}}function wl(n,i,o,u){Qd=!1;var d=n.updateQueue;Mr=!1;var f=d.firstBaseUpdate,v=d.lastBaseUpdate,T=d.shared.pending;if(T!==null){d.shared.pending=null;var O=T,H=O.next;O.next=null,v===null?f=H:v.next=H,v=O;var J=n.alternate;J!==null&&(J=J.updateQueue,T=J.lastBaseUpdate,T!==v&&(T===null?J.firstBaseUpdate=H:T.next=H,J.lastBaseUpdate=O))}if(f!==null){var ee=d.baseState;v=0,J=H=O=null,T=f;do{var $=T.lane&-536870913,Q=$!==T.lane;if(Q?(Ve&$)===$:(u&$)===$){$!==0&&$===Va&&(Qd=!0),J!==null&&(J=J.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var de=n,be=T;$=i;var nt=o;switch(be.tag){case 1:if(de=be.payload,typeof de=="function"){ee=de.call(nt,ee,$);break e}ee=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=be.payload,$=typeof de=="function"?de.call(nt,ee,$):de,$==null)break e;ee=E({},ee,$);break e;case 2:Mr=!0}}$=T.callback,$!==null&&(n.flags|=64,Q&&(n.flags|=8192),Q=d.callbacks,Q===null?d.callbacks=[$]:Q.push($))}else Q={lane:$,tag:T.tag,payload:T.payload,callback:T.callback,next:null},J===null?(H=J=Q,O=ee):J=J.next=Q,v|=$;if(T=T.next,T===null){if(T=d.shared.pending,T===null)break;Q=T,T=Q.next,Q.next=null,d.lastBaseUpdate=Q,d.shared.pending=null}}while(!0);J===null&&(O=ee),d.baseState=O,d.firstBaseUpdate=H,d.lastBaseUpdate=J,f===null&&(d.shared.lanes=0),qr|=v,n.lanes=v,n.memoizedState=ee}}function dy(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function fy(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)dy(o[n],i)}var Ba=P(null),bc=P(0);function my(n,i){n=lr,le(bc,n),le(Ba,i),lr=n|i.baseLanes}function Yd(){le(bc,lr),le(Ba,Ba.current)}function Jd(){lr=bc.current,Z(Ba),Z(bc)}var In=P(null),Qn=null;function Ur(n){var i=n.alternate;le(Tt,Tt.current&1),le(In,n),Qn===null&&(i===null||Ba.current!==null||i.memoizedState!==null)&&(Qn=n)}function Xd(n){le(Tt,Tt.current),le(In,n),Qn===null&&(Qn=n)}function gy(n){n.tag===22?(le(Tt,Tt.current),le(In,n),Qn===null&&(Qn=n)):Lr()}function Lr(){le(Tt,Tt.current),le(In,In.current)}function Nn(n){Z(In),Qn===n&&(Qn=null),Z(Tt)}var Tt=P(0);function wc(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||rm(o)||im(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var er=0,Ne=null,et=null,kt=null,Ec=!1,qa=!1,Qi=!1,Tc=0,El=0,Ha=null,I1=0;function _t(){throw Error(r(321))}function Wd(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!Rn(n[o],i[o]))return!1;return!0}function Zd(n,i,o,u,d,f){return er=f,Ne=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Y.H=n===null||n.memoizedState===null?Wy:gf,Qi=!1,f=o(u,d),Qi=!1,qa&&(f=yy(i,o,u,d)),py(n),f}function py(n){Y.H=Al;var i=et!==null&&et.next!==null;if(er=0,kt=et=Ne=null,Ec=!1,El=0,Ha=null,i)throw Error(r(300));n===null||jt||(n=n.dependencies,n!==null&&fc(n)&&(jt=!0))}function yy(n,i,o,u){Ne=n;var d=0;do{if(qa&&(Ha=null),El=0,qa=!1,25<=d)throw Error(r(301));if(d+=1,kt=et=null,n.updateQueue!=null){var f=n.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}Y.H=Zy,f=i(o,u)}while(qa);return f}function N1(){var n=Y.H,i=n.useState()[0];return i=typeof i.then=="function"?Tl(i):i,n=n.useState()[0],(et!==null?et.memoizedState:null)!==n&&(Ne.flags|=1024),i}function ef(){var n=Tc!==0;return Tc=0,n}function tf(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function nf(n){if(Ec){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ec=!1}er=0,kt=et=Ne=null,qa=!1,El=Tc=0,Ha=null}function mn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Ne.memoizedState=kt=n:kt=kt.next=n,kt}function St(){if(et===null){var n=Ne.alternate;n=n!==null?n.memoizedState:null}else n=et.next;var i=kt===null?Ne.memoizedState:kt.next;if(i!==null)kt=i,et=n;else{if(n===null)throw Ne.alternate===null?Error(r(467)):Error(r(310));et=n,n={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},kt===null?Ne.memoizedState=kt=n:kt=kt.next=n}return kt}function Sc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tl(n){var i=El;return El+=1,Ha===null&&(Ha=[]),n=oy(Ha,n,i),i=Ne,(kt===null?i.memoizedState:kt.next)===null&&(i=i.alternate,Y.H=i===null||i.memoizedState===null?Wy:gf),n}function Ac(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Tl(n);if(n.$$typeof===F)return Wt(n)}throw Error(r(438,String(n)))}function sf(n){var i=null,o=Ne.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=Ne.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(d){return d.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Sc(),Ne.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),u=0;u<n;u++)o[u]=V;return i.index++,o}function tr(n,i){return typeof i=="function"?i(n):i}function xc(n){var i=St();return rf(i,et,n)}function rf(n,i,o){var u=n.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var d=n.baseQueue,f=u.pending;if(f!==null){if(d!==null){var v=d.next;d.next=f.next,f.next=v}i.baseQueue=d=f,u.pending=null}if(f=n.baseState,d===null)n.memoizedState=f;else{i=d.next;var T=v=null,O=null,H=i,J=!1;do{var ee=H.lane&-536870913;if(ee!==H.lane?(Ve&ee)===ee:(er&ee)===ee){var $=H.revertLane;if($===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ee===Va&&(J=!0);else if((er&$)===$){H=H.next,$===Va&&(J=!0);continue}else ee={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(T=O=ee,v=f):O=O.next=ee,Ne.lanes|=$,qr|=$;ee=H.action,Qi&&o(f,ee),f=H.hasEagerState?H.eagerState:o(f,ee)}else $={lane:ee,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(T=O=$,v=f):O=O.next=$,Ne.lanes|=ee,qr|=ee;H=H.next}while(H!==null&&H!==i);if(O===null?v=f:O.next=T,!Rn(f,n.memoizedState)&&(jt=!0,J&&(o=Ua,o!==null)))throw o;n.memoizedState=f,n.baseState=v,n.baseQueue=O,u.lastRenderedState=f}return d===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function af(n){var i=St(),o=i.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var u=o.dispatch,d=o.pending,f=i.memoizedState;if(d!==null){o.pending=null;var v=d=d.next;do f=n(f,v.action),v=v.next;while(v!==d);Rn(f,i.memoizedState)||(jt=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),o.lastRenderedState=f}return[f,u]}function _y(n,i,o){var u=Ne,d=St(),f=ze;if(f){if(o===void 0)throw Error(r(407));o=o()}else o=i();var v=!Rn((et||d).memoizedState,o);if(v&&(d.memoizedState=o,jt=!0),d=d.queue,uf(wy.bind(null,u,d,n),[n]),d.getSnapshot!==i||v||kt!==null&&kt.memoizedState.tag&1){if(u.flags|=2048,$a(9,{destroy:void 0},by.bind(null,u,d,o,i),null),rt===null)throw Error(r(349));f||(er&127)!==0||vy(u,i,o)}return o}function vy(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=Ne.updateQueue,i===null?(i=Sc(),Ne.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function by(n,i,o,u){i.value=o,i.getSnapshot=u,Ey(i)&&Ty(n)}function wy(n,i,o){return o(function(){Ey(i)&&Ty(n)})}function Ey(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!Rn(n,o)}catch{return!0}}function Ty(n){var i=Li(n,2);i!==null&&Tn(i,n,2)}function of(n){var i=mn();if(typeof n=="function"){var o=n;if(n=o(),Qi){Un(!0);try{o()}finally{Un(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:n},i}function Sy(n,i,o,u){return n.baseState=o,rf(n,et,typeof u=="function"?u:tr)}function O1(n,i,o,u,d){if(Ic(n))throw Error(r(485));if(n=i.action,n!==null){var f={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};Y.T!==null?o(!0):f.isTransition=!1,u(f),o=i.pending,o===null?(f.next=i.pending=f,Ay(i,f)):(f.next=o.next,i.pending=o.next=f)}}function Ay(n,i){var o=i.action,u=i.payload,d=n.state;if(i.isTransition){var f=Y.T,v={};Y.T=v;try{var T=o(d,u),O=Y.S;O!==null&&O(v,T),xy(n,i,T)}catch(H){lf(n,i,H)}finally{f!==null&&v.types!==null&&(f.types=v.types),Y.T=f}}else try{f=o(d,u),xy(n,i,f)}catch(H){lf(n,i,H)}}function xy(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Ry(n,i,u)},function(u){return lf(n,i,u)}):Ry(n,i,o)}function Ry(n,i,o){i.status="fulfilled",i.value=o,Cy(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,Ay(n,o)))}function lf(n,i,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,Cy(i),i=i.next;while(i!==u)}n.action=null}function Cy(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function Iy(n,i){return i}function Ny(n,i){if(ze){var o=rt.formState;if(o!==null){e:{var u=Ne;if(ze){if(ut){t:{for(var d=ut,f=Kn;d.nodeType!==8;){if(!f){d=null;break t}if(d=Yn(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){ut=Yn(d.nextSibling),u=d.data==="F!";break e}}jr(u)}u=!1}u&&(i=o[0])}}return o=mn(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Iy,lastRenderedState:i},o.queue=u,o=Yy.bind(null,Ne,u),u.dispatch=o,u=of(!1),f=mf.bind(null,Ne,!1,u.queue),u=mn(),d={state:i,dispatch:null,action:n,pending:null},u.queue=d,o=O1.bind(null,Ne,d,f,o),d.dispatch=o,u.memoizedState=n,[i,o,!1]}function Oy(n){var i=St();return ky(i,et,n)}function ky(n,i,o){if(i=rf(n,i,Iy)[0],n=xc(tr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=Tl(i)}catch(v){throw v===La?pc:v}else u=i;i=St();var d=i.queue,f=d.dispatch;return o!==i.memoizedState&&(Ne.flags|=2048,$a(9,{destroy:void 0},k1.bind(null,d,o),null)),[u,f,n]}function k1(n,i){n.action=i}function jy(n){var i=St(),o=et;if(o!==null)return ky(i,o,n);St(),i=i.memoizedState,o=St();var u=o.queue.dispatch;return o.memoizedState=n,[i,u,!1]}function $a(n,i,o,u){return n={tag:n,create:o,deps:u,inst:i,next:null},i=Ne.updateQueue,i===null&&(i=Sc(),Ne.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,i.lastEffect=n),n}function Dy(){return St().memoizedState}function Rc(n,i,o,u){var d=mn();Ne.flags|=n,d.memoizedState=$a(1|i,{destroy:void 0},o,u===void 0?null:u)}function Cc(n,i,o,u){var d=St();u=u===void 0?null:u;var f=d.memoizedState.inst;et!==null&&u!==null&&Wd(u,et.memoizedState.deps)?d.memoizedState=$a(i,f,o,u):(Ne.flags|=n,d.memoizedState=$a(1|i,f,o,u))}function My(n,i){Rc(8390656,8,n,i)}function uf(n,i){Cc(2048,8,n,i)}function j1(n){Ne.flags|=4;var i=Ne.updateQueue;if(i===null)i=Sc(),Ne.updateQueue=i,i.events=[n];else{var o=i.events;o===null?i.events=[n]:o.push(n)}}function Py(n){var i=St().memoizedState;return j1({ref:i,nextImpl:n}),function(){if((Ye&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function Vy(n,i){return Cc(4,2,n,i)}function Uy(n,i){return Cc(4,4,n,i)}function Ly(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function zy(n,i,o){o=o!=null?o.concat([n]):null,Cc(4,4,Ly.bind(null,i,n),o)}function cf(){}function By(n,i){var o=St();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&Wd(i,u[1])?u[0]:(o.memoizedState=[n,i],n)}function qy(n,i){var o=St();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&Wd(i,u[1]))return u[0];if(u=n(),Qi){Un(!0);try{n()}finally{Un(!1)}}return o.memoizedState=[u,i],u}function hf(n,i,o){return o===void 0||(er&1073741824)!==0&&(Ve&261930)===0?n.memoizedState=i:(n.memoizedState=o,n=H_(),Ne.lanes|=n,qr|=n,o)}function Hy(n,i,o,u){return Rn(o,i)?o:Ba.current!==null?(n=hf(n,o,u),Rn(n,i)||(jt=!0),n):(er&42)===0||(er&1073741824)!==0&&(Ve&261930)===0?(jt=!0,n.memoizedState=o):(n=H_(),Ne.lanes|=n,qr|=n,i)}function $y(n,i,o,u,d){var f=ue.p;ue.p=f!==0&&8>f?f:8;var v=Y.T,T={};Y.T=T,mf(n,!1,i,o);try{var O=d(),H=Y.S;if(H!==null&&H(T,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var J=C1(O,u);Sl(n,i,J,jn(n))}else Sl(n,i,u,jn(n))}catch(ee){Sl(n,i,{then:function(){},status:"rejected",reason:ee},jn())}finally{ue.p=f,v!==null&&T.types!==null&&(v.types=T.types),Y.T=v}}function D1(){}function df(n,i,o,u){if(n.tag!==5)throw Error(r(476));var d=Fy(n).queue;$y(n,d,i,ye,o===null?D1:function(){return Gy(n),o(u)})}function Fy(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:ye},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Gy(n){var i=Fy(n);i.next===null&&(i=n.alternate.memoizedState),Sl(n,i.next.queue,{},jn())}function ff(){return Wt(Bl)}function Ky(){return St().memoizedState}function Qy(){return St().memoizedState}function M1(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=jn();n=Pr(o);var u=Vr(i,n,o);u!==null&&(Tn(u,i,o),vl(u,i,o)),i={cache:Bd()},n.payload=i;return}i=i.return}}function P1(n,i,o){var u=jn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Ic(n)?Jy(i,o):(o=Nd(n,i,o,u),o!==null&&(Tn(o,n,u),Xy(o,i,u)))}function Yy(n,i,o){var u=jn();Sl(n,i,o,u)}function Sl(n,i,o,u){var d={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Ic(n))Jy(i,d);else{var f=n.alternate;if(n.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var v=i.lastRenderedState,T=f(v,o);if(d.hasEagerState=!0,d.eagerState=T,Rn(T,v))return uc(n,i,d,0),rt===null&&lc(),!1}catch{}finally{}if(o=Nd(n,i,d,u),o!==null)return Tn(o,n,u),Xy(o,i,u),!0}return!1}function mf(n,i,o,u){if(u={lane:2,revertLane:Gf(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ic(n)){if(i)throw Error(r(479))}else i=Nd(n,o,u,2),i!==null&&Tn(i,n,2)}function Ic(n){var i=n.alternate;return n===Ne||i!==null&&i===Ne}function Jy(n,i){qa=Ec=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function Xy(n,i,o){if((o&4194048)!==0){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,Go(n,o)}}var Al={readContext:Wt,use:Ac,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useLayoutEffect:_t,useInsertionEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useSyncExternalStore:_t,useId:_t,useHostTransitionStatus:_t,useFormState:_t,useActionState:_t,useOptimistic:_t,useMemoCache:_t,useCacheRefresh:_t};Al.useEffectEvent=_t;var Wy={readContext:Wt,use:Ac,useCallback:function(n,i){return mn().memoizedState=[n,i===void 0?null:i],n},useContext:Wt,useEffect:My,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,Rc(4194308,4,Ly.bind(null,i,n),o)},useLayoutEffect:function(n,i){return Rc(4194308,4,n,i)},useInsertionEffect:function(n,i){Rc(4,2,n,i)},useMemo:function(n,i){var o=mn();i=i===void 0?null:i;var u=n();if(Qi){Un(!0);try{n()}finally{Un(!1)}}return o.memoizedState=[u,i],u},useReducer:function(n,i,o){var u=mn();if(o!==void 0){var d=o(i);if(Qi){Un(!0);try{o(i)}finally{Un(!1)}}}else d=i;return u.memoizedState=u.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},u.queue=n,n=n.dispatch=P1.bind(null,Ne,n),[u.memoizedState,n]},useRef:function(n){var i=mn();return n={current:n},i.memoizedState=n},useState:function(n){n=of(n);var i=n.queue,o=Yy.bind(null,Ne,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:cf,useDeferredValue:function(n,i){var o=mn();return hf(o,n,i)},useTransition:function(){var n=of(!1);return n=$y.bind(null,Ne,n.queue,!0,!1),mn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var u=Ne,d=mn();if(ze){if(o===void 0)throw Error(r(407));o=o()}else{if(o=i(),rt===null)throw Error(r(349));(Ve&127)!==0||vy(u,i,o)}d.memoizedState=o;var f={value:o,getSnapshot:i};return d.queue=f,My(wy.bind(null,u,f,n),[n]),u.flags|=2048,$a(9,{destroy:void 0},by.bind(null,u,f,o,i),null),o},useId:function(){var n=mn(),i=rt.identifierPrefix;if(ze){var o=Ds,u=js;o=(u&~(1<<32-wt(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=Tc++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=I1++,i="_"+i+"r_"+o.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:ff,useFormState:Ny,useActionState:Ny,useOptimistic:function(n){var i=mn();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=mf.bind(null,Ne,!0,o),o.dispatch=i,[n,i]},useMemoCache:sf,useCacheRefresh:function(){return mn().memoizedState=M1.bind(null,Ne)},useEffectEvent:function(n){var i=mn(),o={impl:n};return i.memoizedState=o,function(){if((Ye&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},gf={readContext:Wt,use:Ac,useCallback:By,useContext:Wt,useEffect:uf,useImperativeHandle:zy,useInsertionEffect:Vy,useLayoutEffect:Uy,useMemo:qy,useReducer:xc,useRef:Dy,useState:function(){return xc(tr)},useDebugValue:cf,useDeferredValue:function(n,i){var o=St();return Hy(o,et.memoizedState,n,i)},useTransition:function(){var n=xc(tr)[0],i=St().memoizedState;return[typeof n=="boolean"?n:Tl(n),i]},useSyncExternalStore:_y,useId:Ky,useHostTransitionStatus:ff,useFormState:Oy,useActionState:Oy,useOptimistic:function(n,i){var o=St();return Sy(o,et,n,i)},useMemoCache:sf,useCacheRefresh:Qy};gf.useEffectEvent=Py;var Zy={readContext:Wt,use:Ac,useCallback:By,useContext:Wt,useEffect:uf,useImperativeHandle:zy,useInsertionEffect:Vy,useLayoutEffect:Uy,useMemo:qy,useReducer:af,useRef:Dy,useState:function(){return af(tr)},useDebugValue:cf,useDeferredValue:function(n,i){var o=St();return et===null?hf(o,n,i):Hy(o,et.memoizedState,n,i)},useTransition:function(){var n=af(tr)[0],i=St().memoizedState;return[typeof n=="boolean"?n:Tl(n),i]},useSyncExternalStore:_y,useId:Ky,useHostTransitionStatus:ff,useFormState:jy,useActionState:jy,useOptimistic:function(n,i){var o=St();return et!==null?Sy(o,et,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:sf,useCacheRefresh:Qy};Zy.useEffectEvent=Py;function pf(n,i,o,u){i=n.memoizedState,o=o(u,i),o=o==null?i:E({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var yf={enqueueSetState:function(n,i,o){n=n._reactInternals;var u=jn(),d=Pr(u);d.payload=i,o!=null&&(d.callback=o),i=Vr(n,d,u),i!==null&&(Tn(i,n,u),vl(i,n,u))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var u=jn(),d=Pr(u);d.tag=1,d.payload=i,o!=null&&(d.callback=o),i=Vr(n,d,u),i!==null&&(Tn(i,n,u),vl(i,n,u))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=jn(),u=Pr(o);u.tag=2,i!=null&&(u.callback=i),i=Vr(n,u,o),i!==null&&(Tn(i,n,o),vl(i,n,o))}};function e_(n,i,o,u,d,f,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,f,v):i.prototype&&i.prototype.isPureReactComponent?!hl(o,u)||!hl(d,f):!0}function t_(n,i,o,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==n&&yf.enqueueReplaceState(i,i.state,null)}function Yi(n,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(n=n.defaultProps){o===i&&(o=E({},o));for(var d in n)o[d]===void 0&&(o[d]=n[d])}return o}function n_(n){oc(n)}function s_(n){console.error(n)}function r_(n){oc(n)}function Nc(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function i_(n,i,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function _f(n,i,o){return o=Pr(o),o.tag=3,o.payload={element:null},o.callback=function(){Nc(n,i)},o}function a_(n){return n=Pr(n),n.tag=3,n}function o_(n,i,o,u){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var f=u.value;n.payload=function(){return d(f)},n.callback=function(){i_(i,o,u)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){i_(i,o,u),typeof d!="function"&&(Hr===null?Hr=new Set([this]):Hr.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function V1(n,i,o,u,d){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&Pa(i,o,d,!0),o=In.current,o!==null){switch(o.tag){case 31:case 13:return Qn===null?qc():o.alternate===null&&vt===0&&(vt=3),o.flags&=-257,o.flags|=65536,o.lanes=d,u===yc?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),Hf(n,u,d)),!1;case 22:return o.flags|=65536,u===yc?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),Hf(n,u,d)),!1}throw Error(r(435,o.tag))}return Hf(n,u,d),qc(),!1}if(ze)return i=In.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=d,u!==Pd&&(n=Error(r(422),{cause:u}),ml($n(n,o)))):(u!==Pd&&(i=Error(r(423),{cause:u}),ml($n(i,o))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,u=$n(u,o),d=_f(n.stateNode,u,d),Kd(n,d),vt!==4&&(vt=2)),!1;var f=Error(r(520),{cause:u});if(f=$n(f,o),jl===null?jl=[f]:jl.push(f),vt!==4&&(vt=2),i===null)return!0;u=$n(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=d&-d,o.lanes|=n,n=_f(o.stateNode,u,n),Kd(o,n),!1;case 1:if(i=o.type,f=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Hr===null||!Hr.has(f))))return o.flags|=65536,d&=-d,o.lanes|=d,d=a_(d),o_(d,n,o,u),Kd(o,d),!1}o=o.return}while(o!==null);return!1}var vf=Error(r(461)),jt=!1;function Zt(n,i,o,u){i.child=n===null?hy(i,null,o,u):Ki(i,n.child,o,u)}function l_(n,i,o,u,d){o=o.render;var f=i.ref;if("ref"in u){var v={};for(var T in u)T!=="ref"&&(v[T]=u[T])}else v=u;return Hi(i),u=Zd(n,i,o,v,f,d),T=ef(),n!==null&&!jt?(tf(n,i,d),nr(n,i,d)):(ze&&T&&Dd(i),i.flags|=1,Zt(n,i,u,d),i.child)}function u_(n,i,o,u,d){if(n===null){var f=o.type;return typeof f=="function"&&!Od(f)&&f.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=f,c_(n,i,f,u,d)):(n=hc(o.type,null,u,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(f=n.child,!Rf(n,d)){var v=f.memoizedProps;if(o=o.compare,o=o!==null?o:hl,o(v,u)&&n.ref===i.ref)return nr(n,i,d)}return i.flags|=1,n=Js(f,u),n.ref=i.ref,n.return=i,i.child=n}function c_(n,i,o,u,d){if(n!==null){var f=n.memoizedProps;if(hl(f,u)&&n.ref===i.ref)if(jt=!1,i.pendingProps=u=f,Rf(n,d))(n.flags&131072)!==0&&(jt=!0);else return i.lanes=n.lanes,nr(n,i,d)}return bf(n,i,o,u,d)}function h_(n,i,o,u){var d=u.children,f=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(f=f!==null?f.baseLanes|o:o,n!==null){for(u=i.child=n.child,d=0;u!==null;)d=d|u.lanes|u.childLanes,u=u.sibling;u=d&~f}else u=0,i.child=null;return d_(n,i,f,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&gc(i,f!==null?f.cachePool:null),f!==null?my(i,f):Yd(),gy(i);else return u=i.lanes=536870912,d_(n,i,f!==null?f.baseLanes|o:o,o,u)}else f!==null?(gc(i,f.cachePool),my(i,f),Lr(),i.memoizedState=null):(n!==null&&gc(i,null),Yd(),Lr());return Zt(n,i,d,o),i.child}function xl(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function d_(n,i,o,u,d){var f=Hd();return f=f===null?null:{parent:Ot._currentValue,pool:f},i.memoizedState={baseLanes:o,cachePool:f},n!==null&&gc(i,null),Yd(),gy(i),n!==null&&Pa(n,i,u,!0),i.childLanes=d,null}function Oc(n,i){return i=jc({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function f_(n,i,o){return Ki(i,n.child,null,o),n=Oc(i,i.pendingProps),n.flags|=2,Nn(i),i.memoizedState=null,n}function U1(n,i,o){var u=i.pendingProps,d=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(ze){if(u.mode==="hidden")return n=Oc(i,u),i.lanes=536870912,xl(null,n);if(Xd(i),(n=ut)?(n=Av(n,Kn),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Or!==null?{id:js,overflow:Ds}:null,retryLane:536870912,hydrationErrors:null},o=Jp(n),o.return=i,i.child=o,Xt=i,ut=null)):n=null,n===null)throw jr(i);return i.lanes=536870912,null}return Oc(i,u)}var f=n.memoizedState;if(f!==null){var v=f.dehydrated;if(Xd(i),d)if(i.flags&256)i.flags&=-257,i=f_(n,i,o);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(r(558));else if(jt||Pa(n,i,o,!1),d=(o&n.childLanes)!==0,jt||d){if(u=rt,u!==null&&(v=Ko(u,o),v!==0&&v!==f.retryLane))throw f.retryLane=v,Li(n,v),Tn(u,n,v),vf;qc(),i=f_(n,i,o)}else n=f.treeContext,ut=Yn(v.nextSibling),Xt=i,ze=!0,kr=null,Kn=!1,n!==null&&Zp(i,n),i=Oc(i,u),i.flags|=4096;return i}return n=Js(n.child,{mode:u.mode,children:u.children}),n.ref=i.ref,i.child=n,n.return=i,n}function kc(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function bf(n,i,o,u,d){return Hi(i),o=Zd(n,i,o,u,void 0,d),u=ef(),n!==null&&!jt?(tf(n,i,d),nr(n,i,d)):(ze&&u&&Dd(i),i.flags|=1,Zt(n,i,o,d),i.child)}function m_(n,i,o,u,d,f){return Hi(i),i.updateQueue=null,o=yy(i,u,o,d),py(n),u=ef(),n!==null&&!jt?(tf(n,i,f),nr(n,i,f)):(ze&&u&&Dd(i),i.flags|=1,Zt(n,i,o,f),i.child)}function g_(n,i,o,u,d){if(Hi(i),i.stateNode===null){var f=ka,v=o.contextType;typeof v=="object"&&v!==null&&(f=Wt(v)),f=new o(u,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=yf,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=u,f.state=i.memoizedState,f.refs={},Fd(i),v=o.contextType,f.context=typeof v=="object"&&v!==null?Wt(v):ka,f.state=i.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(pf(i,o,v,u),f.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&yf.enqueueReplaceState(f,f.state,null),wl(i,u,f,d),bl(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(n===null){f=i.stateNode;var T=i.memoizedProps,O=Yi(o,T);f.props=O;var H=f.context,J=o.contextType;v=ka,typeof J=="object"&&J!==null&&(v=Wt(J));var ee=o.getDerivedStateFromProps;J=typeof ee=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,J||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||H!==v)&&t_(i,f,u,v),Mr=!1;var $=i.memoizedState;f.state=$,wl(i,u,f,d),bl(),H=i.memoizedState,T||$!==H||Mr?(typeof ee=="function"&&(pf(i,o,ee,u),H=i.memoizedState),(O=Mr||e_(i,o,O,u,$,H,v))?(J||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=H),f.props=u,f.state=H,f.context=v,u=O):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{f=i.stateNode,Gd(n,i),v=i.memoizedProps,J=Yi(o,v),f.props=J,ee=i.pendingProps,$=f.context,H=o.contextType,O=ka,typeof H=="object"&&H!==null&&(O=Wt(H)),T=o.getDerivedStateFromProps,(H=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==ee||$!==O)&&t_(i,f,u,O),Mr=!1,$=i.memoizedState,f.state=$,wl(i,u,f,d),bl();var Q=i.memoizedState;v!==ee||$!==Q||Mr||n!==null&&n.dependencies!==null&&fc(n.dependencies)?(typeof T=="function"&&(pf(i,o,T,u),Q=i.memoizedState),(J=Mr||e_(i,o,J,u,$,Q,O)||n!==null&&n.dependencies!==null&&fc(n.dependencies))?(H||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(u,Q,O),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(u,Q,O)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===n.memoizedProps&&$===n.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&$===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=Q),f.props=u,f.state=Q,f.context=O,u=J):(typeof f.componentDidUpdate!="function"||v===n.memoizedProps&&$===n.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&$===n.memoizedState||(i.flags|=1024),u=!1)}return f=u,kc(n,i),u=(i.flags&128)!==0,f||u?(f=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,n!==null&&u?(i.child=Ki(i,n.child,null,d),i.child=Ki(i,null,o,d)):Zt(n,i,o,d),i.memoizedState=f.state,n=i.child):n=nr(n,i,d),n}function p_(n,i,o,u){return Bi(),i.flags|=256,Zt(n,i,o,u),i.child}var wf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ef(n){return{baseLanes:n,cachePool:iy()}}function Tf(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=kn),n}function y_(n,i,o){var u=i.pendingProps,d=!1,f=(i.flags&128)!==0,v;if((v=f)||(v=n!==null&&n.memoizedState===null?!1:(Tt.current&2)!==0),v&&(d=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,n===null){if(ze){if(d?Ur(i):Lr(),(n=ut)?(n=Av(n,Kn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Or!==null?{id:js,overflow:Ds}:null,retryLane:536870912,hydrationErrors:null},o=Jp(n),o.return=i,i.child=o,Xt=i,ut=null)):n=null,n===null)throw jr(i);return im(n)?i.lanes=32:i.lanes=536870912,null}var T=u.children;return u=u.fallback,d?(Lr(),d=i.mode,T=jc({mode:"hidden",children:T},d),u=zi(u,d,o,null),T.return=i,u.return=i,T.sibling=u,i.child=T,u=i.child,u.memoizedState=Ef(o),u.childLanes=Tf(n,v,o),i.memoizedState=wf,xl(null,u)):(Ur(i),Sf(i,T))}var O=n.memoizedState;if(O!==null&&(T=O.dehydrated,T!==null)){if(f)i.flags&256?(Ur(i),i.flags&=-257,i=Af(n,i,o)):i.memoizedState!==null?(Lr(),i.child=n.child,i.flags|=128,i=null):(Lr(),T=u.fallback,d=i.mode,u=jc({mode:"visible",children:u.children},d),T=zi(T,d,o,null),T.flags|=2,u.return=i,T.return=i,u.sibling=T,i.child=u,Ki(i,n.child,null,o),u=i.child,u.memoizedState=Ef(o),u.childLanes=Tf(n,v,o),i.memoizedState=wf,i=xl(null,u));else if(Ur(i),im(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var H=v.dgst;v=H,u=Error(r(419)),u.stack="",u.digest=v,ml({value:u,source:null,stack:null}),i=Af(n,i,o)}else if(jt||Pa(n,i,o,!1),v=(o&n.childLanes)!==0,jt||v){if(v=rt,v!==null&&(u=Ko(v,o),u!==0&&u!==O.retryLane))throw O.retryLane=u,Li(n,u),Tn(v,n,u),vf;rm(T)||qc(),i=Af(n,i,o)}else rm(T)?(i.flags|=192,i.child=n.child,i=null):(n=O.treeContext,ut=Yn(T.nextSibling),Xt=i,ze=!0,kr=null,Kn=!1,n!==null&&Zp(i,n),i=Sf(i,u.children),i.flags|=4096);return i}return d?(Lr(),T=u.fallback,d=i.mode,O=n.child,H=O.sibling,u=Js(O,{mode:"hidden",children:u.children}),u.subtreeFlags=O.subtreeFlags&65011712,H!==null?T=Js(H,T):(T=zi(T,d,o,null),T.flags|=2),T.return=i,u.return=i,u.sibling=T,i.child=u,xl(null,u),u=i.child,T=n.child.memoizedState,T===null?T=Ef(o):(d=T.cachePool,d!==null?(O=Ot._currentValue,d=d.parent!==O?{parent:O,pool:O}:d):d=iy(),T={baseLanes:T.baseLanes|o,cachePool:d}),u.memoizedState=T,u.childLanes=Tf(n,v,o),i.memoizedState=wf,xl(n.child,u)):(Ur(i),o=n.child,n=o.sibling,o=Js(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,n!==null&&(v=i.deletions,v===null?(i.deletions=[n],i.flags|=16):v.push(n)),i.child=o,i.memoizedState=null,o)}function Sf(n,i){return i=jc({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function jc(n,i){return n=Cn(22,n,null,i),n.lanes=0,n}function Af(n,i,o){return Ki(i,n.child,null,o),n=Sf(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function __(n,i,o){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),Ld(n.return,i,o)}function xf(n,i,o,u,d,f){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:d,treeForkCount:f}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=o,v.tailMode=d,v.treeForkCount=f)}function v_(n,i,o){var u=i.pendingProps,d=u.revealOrder,f=u.tail;u=u.children;var v=Tt.current,T=(v&2)!==0;if(T?(v=v&1|2,i.flags|=128):v&=1,le(Tt,v),Zt(n,i,u,o),u=ze?fl:0,!T&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&__(n,o,i);else if(n.tag===19)__(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(d){case"forwards":for(o=i.child,d=null;o!==null;)n=o.alternate,n!==null&&wc(n)===null&&(d=o),o=o.sibling;o=d,o===null?(d=i.child,i.child=null):(d=o.sibling,o.sibling=null),xf(i,!1,d,o,f,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&wc(n)===null){i.child=d;break}n=d.sibling,d.sibling=o,o=d,d=n}xf(i,!0,o,null,f,u);break;case"together":xf(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function nr(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),qr|=i.lanes,(o&i.childLanes)===0)if(n!==null){if(Pa(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,o=Js(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=Js(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function Rf(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&fc(n)))}function L1(n,i,o){switch(i.tag){case 3:pt(i,i.stateNode.containerInfo),Dr(i,Ot,n.memoizedState.cache),Bi();break;case 27:case 5:Fs(i);break;case 4:pt(i,i.stateNode.containerInfo);break;case 10:Dr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Xd(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Ur(i),i.flags|=128,null):(o&i.child.childLanes)!==0?y_(n,i,o):(Ur(i),n=nr(n,i,o),n!==null?n.sibling:null);Ur(i);break;case 19:var d=(n.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(Pa(n,i,o,!1),u=(o&i.childLanes)!==0),d){if(u)return v_(n,i,o);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),le(Tt,Tt.current),u)break;return null;case 22:return i.lanes=0,h_(n,i,o,i.pendingProps);case 24:Dr(i,Ot,n.memoizedState.cache)}return nr(n,i,o)}function b_(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)jt=!0;else{if(!Rf(n,o)&&(i.flags&128)===0)return jt=!1,L1(n,i,o);jt=(n.flags&131072)!==0}else jt=!1,ze&&(i.flags&1048576)!==0&&Wp(i,fl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(n=Fi(i.elementType),i.type=n,typeof n=="function")Od(n)?(u=Yi(n,u),i.tag=1,i=g_(null,i,n,u,o)):(i.tag=0,i=bf(null,i,n,u,o));else{if(n!=null){var d=n.$$typeof;if(d===ne){i.tag=11,i=l_(null,i,n,u,o);break e}else if(d===C){i.tag=14,i=u_(null,i,n,u,o);break e}}throw i=it(n)||n,Error(r(306,i,""))}}return i;case 0:return bf(n,i,i.type,i.pendingProps,o);case 1:return u=i.type,d=Yi(u,i.pendingProps),g_(n,i,u,d,o);case 3:e:{if(pt(i,i.stateNode.containerInfo),n===null)throw Error(r(387));u=i.pendingProps;var f=i.memoizedState;d=f.element,Gd(n,i),wl(i,u,null,o);var v=i.memoizedState;if(u=v.cache,Dr(i,Ot,u),u!==f.cache&&zd(i,[Ot],o,!0),bl(),u=v.element,f.isDehydrated)if(f={element:u,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=p_(n,i,u,o);break e}else if(u!==d){d=$n(Error(r(424)),i),ml(d),i=p_(n,i,u,o);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(ut=Yn(n.firstChild),Xt=i,ze=!0,kr=null,Kn=!0,o=hy(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Bi(),u===d){i=nr(n,i,o);break e}Zt(n,i,u,o)}i=i.child}return i;case 26:return kc(n,i),n===null?(o=Ov(i.type,null,i.pendingProps,null))?i.memoizedState=o:ze||(o=i.type,n=i.pendingProps,u=Yc(Ae.current).createElement(o),u[Ct]=i,u[$t]=n,en(u,o,n),It(u),i.stateNode=u):i.memoizedState=Ov(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Fs(i),n===null&&ze&&(u=i.stateNode=Cv(i.type,i.pendingProps,Ae.current),Xt=i,Kn=!0,d=ut,Kr(i.type)?(am=d,ut=Yn(u.firstChild)):ut=d),Zt(n,i,i.pendingProps.children,o),kc(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&ze&&((d=u=ut)&&(u=gS(u,i.type,i.pendingProps,Kn),u!==null?(i.stateNode=u,Xt=i,ut=Yn(u.firstChild),Kn=!1,d=!0):d=!1),d||jr(i)),Fs(i),d=i.type,f=i.pendingProps,v=n!==null?n.memoizedProps:null,u=f.children,tm(d,f)?u=null:v!==null&&tm(d,v)&&(i.flags|=32),i.memoizedState!==null&&(d=Zd(n,i,N1,null,null,o),Bl._currentValue=d),kc(n,i),Zt(n,i,u,o),i.child;case 6:return n===null&&ze&&((n=o=ut)&&(o=pS(o,i.pendingProps,Kn),o!==null?(i.stateNode=o,Xt=i,ut=null,n=!0):n=!1),n||jr(i)),null;case 13:return y_(n,i,o);case 4:return pt(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=Ki(i,null,u,o):Zt(n,i,u,o),i.child;case 11:return l_(n,i,i.type,i.pendingProps,o);case 7:return Zt(n,i,i.pendingProps,o),i.child;case 8:return Zt(n,i,i.pendingProps.children,o),i.child;case 12:return Zt(n,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Dr(i,i.type,u.value),Zt(n,i,u.children,o),i.child;case 9:return d=i.type._context,u=i.pendingProps.children,Hi(i),d=Wt(d),u=u(d),i.flags|=1,Zt(n,i,u,o),i.child;case 14:return u_(n,i,i.type,i.pendingProps,o);case 15:return c_(n,i,i.type,i.pendingProps,o);case 19:return v_(n,i,o);case 31:return U1(n,i,o);case 22:return h_(n,i,o,i.pendingProps);case 24:return Hi(i),u=Wt(Ot),n===null?(d=Hd(),d===null&&(d=rt,f=Bd(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=o),d=f),i.memoizedState={parent:u,cache:d},Fd(i),Dr(i,Ot,d)):((n.lanes&o)!==0&&(Gd(n,i),wl(i,null,null,o),bl()),d=n.memoizedState,f=i.memoizedState,d.parent!==u?(d={parent:u,cache:u},i.memoizedState=d,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=d),Dr(i,Ot,u)):(u=f.cache,Dr(i,Ot,u),u!==d.cache&&zd(i,[Ot],o,!0))),Zt(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function sr(n){n.flags|=4}function Cf(n,i,o,u,d){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(d&335544128)===d)if(n.stateNode.complete)n.flags|=8192;else if(K_())n.flags|=8192;else throw Gi=yc,$d}else n.flags&=-16777217}function w_(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Pv(i))if(K_())n.flags|=8192;else throw Gi=yc,$d}function Dc(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?zu():536870912,n.lanes|=i,Qa|=i)}function Rl(n,i){if(!ze)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function ct(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(i)for(var d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=u,n.childLanes=o,i}function z1(n,i,o){var u=i.pendingProps;switch(Md(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(i),null;case 1:return ct(i),null;case 3:return o=i.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Zs(Ot),at(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Ma(i)?sr(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Vd())),ct(i),null;case 26:var d=i.type,f=i.memoizedState;return n===null?(sr(i),f!==null?(ct(i),w_(i,f)):(ct(i),Cf(i,d,null,u,o))):f?f!==n.memoizedState?(sr(i),ct(i),w_(i,f)):(ct(i),i.flags&=-16777217):(n=n.memoizedProps,n!==u&&sr(i),ct(i),Cf(i,d,n,u,o)),null;case 27:if(vr(i),o=Ae.current,d=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&sr(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return ct(i),null}n=ce.current,Ma(i)?ey(i):(n=Cv(d,u,o),i.stateNode=n,sr(i))}return ct(i),null;case 5:if(vr(i),d=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&sr(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return ct(i),null}if(f=ce.current,Ma(i))ey(i);else{var v=Yc(Ae.current);switch(f){case 1:f=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:f=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":f=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":f=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":f=v.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof u.is=="string"?v.createElement("select",{is:u.is}):v.createElement("select"),u.multiple?f.multiple=!0:u.size&&(f.size=u.size);break;default:f=typeof u.is=="string"?v.createElement(d,{is:u.is}):v.createElement(d)}}f[Ct]=i,f[$t]=u;e:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)f.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break e;for(;v.sibling===null;){if(v.return===null||v.return===i)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=f;e:switch(en(f,d,u),d){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&sr(i)}}return ct(i),Cf(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,o),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==u&&sr(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(n=Ae.current,Ma(i)){if(n=i.stateNode,o=i.memoizedProps,u=null,d=Xt,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}n[Ct]=i,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||yv(n.nodeValue,o)),n||jr(i,!0)}else n=Yc(n).createTextNode(u),n[Ct]=i,i.stateNode=n}return ct(i),null;case 31:if(o=i.memoizedState,n===null||n.memoizedState!==null){if(u=Ma(i),o!==null){if(n===null){if(!u)throw Error(r(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Ct]=i}else Bi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ct(i),n=!1}else o=Vd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return i.flags&256?(Nn(i),i):(Nn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return ct(i),null;case 13:if(u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=Ma(i),u!==null&&u.dehydrated!==null){if(n===null){if(!d)throw Error(r(318));if(d=i.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[Ct]=i}else Bi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ct(i),d=!1}else d=Vd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return i.flags&256?(Nn(i),i):(Nn(i),null)}return Nn(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=i.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool),f=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(f=u.memoizedState.cachePool.pool),f!==d&&(u.flags|=2048)),o!==n&&o&&(i.child.flags|=8192),Dc(i,i.updateQueue),ct(i),null);case 4:return at(),n===null&&Jf(i.stateNode.containerInfo),ct(i),null;case 10:return Zs(i.type),ct(i),null;case 19:if(Z(Tt),u=i.memoizedState,u===null)return ct(i),null;if(d=(i.flags&128)!==0,f=u.rendering,f===null)if(d)Rl(u,!1);else{if(vt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(f=wc(n),f!==null){for(i.flags|=128,Rl(u,!1),n=f.updateQueue,i.updateQueue=n,Dc(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)Yp(o,n),o=o.sibling;return le(Tt,Tt.current&1|2),ze&&Xs(i,u.treeForkCount),i.child}n=n.sibling}u.tail!==null&&dn()>Lc&&(i.flags|=128,d=!0,Rl(u,!1),i.lanes=4194304)}else{if(!d)if(n=wc(f),n!==null){if(i.flags|=128,d=!0,n=n.updateQueue,i.updateQueue=n,Dc(i,n),Rl(u,!0),u.tail===null&&u.tailMode==="hidden"&&!f.alternate&&!ze)return ct(i),null}else 2*dn()-u.renderingStartTime>Lc&&o!==536870912&&(i.flags|=128,d=!0,Rl(u,!1),i.lanes=4194304);u.isBackwards?(f.sibling=i.child,i.child=f):(n=u.last,n!==null?n.sibling=f:i.child=f,u.last=f)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=dn(),n.sibling=null,o=Tt.current,le(Tt,d?o&1|2:o&1),ze&&Xs(i,u.treeForkCount),n):(ct(i),null);case 22:case 23:return Nn(i),Jd(),u=i.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(ct(i),i.subtreeFlags&6&&(i.flags|=8192)):ct(i),o=i.updateQueue,o!==null&&Dc(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),n!==null&&Z($i),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Zs(Ot),ct(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function B1(n,i){switch(Md(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Zs(Ot),at(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return vr(i),null;case 31:if(i.memoizedState!==null){if(Nn(i),i.alternate===null)throw Error(r(340));Bi()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(Nn(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Bi()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Z(Tt),null;case 4:return at(),null;case 10:return Zs(i.type),null;case 22:case 23:return Nn(i),Jd(),n!==null&&Z($i),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return Zs(Ot),null;case 25:return null;default:return null}}function E_(n,i){switch(Md(i),i.tag){case 3:Zs(Ot),at();break;case 26:case 27:case 5:vr(i);break;case 4:at();break;case 31:i.memoizedState!==null&&Nn(i);break;case 13:Nn(i);break;case 19:Z(Tt);break;case 10:Zs(i.type);break;case 22:case 23:Nn(i),Jd(),n!==null&&Z($i);break;case 24:Zs(Ot)}}function Cl(n,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var d=u.next;o=d;do{if((o.tag&n)===n){u=void 0;var f=o.create,v=o.inst;u=f(),v.destroy=u}o=o.next}while(o!==d)}}catch(T){We(i,i.return,T)}}function zr(n,i,o){try{var u=i.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var f=d.next;u=f;do{if((u.tag&n)===n){var v=u.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,d=i;var O=o,H=T;try{H()}catch(J){We(d,O,J)}}}u=u.next}while(u!==f)}}catch(J){We(i,i.return,J)}}function T_(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{fy(i,o)}catch(u){We(n,n.return,u)}}}function S_(n,i,o){o.props=Yi(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){We(n,i,u)}}function Il(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(d){We(n,i,d)}}function Ms(n,i){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(d){We(n,i,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){We(n,i,d)}else o.current=null}function A_(n){var i=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(d){We(n,n.return,d)}}function If(n,i,o){try{var u=n.stateNode;uS(u,n.type,o,i),u[$t]=i}catch(d){We(n,n.return,d)}}function x_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Kr(n.type)||n.tag===4}function Nf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||x_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Kr(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Of(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=ts));else if(u!==4&&(u===27&&Kr(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(Of(n,i,o),n=n.sibling;n!==null;)Of(n,i,o),n=n.sibling}function Mc(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(u!==4&&(u===27&&Kr(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Mc(n,i,o),n=n.sibling;n!==null;)Mc(n,i,o),n=n.sibling}function R_(n){var i=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,d=i.attributes;d.length;)i.removeAttributeNode(d[0]);en(i,u,o),i[Ct]=n,i[$t]=o}catch(f){We(n,n.return,f)}}var rr=!1,Dt=!1,kf=!1,C_=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function q1(n,i){if(n=n.containerInfo,Zf=nh,n=zp(n),Sd(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var d=u.anchorOffset,f=u.focusNode;u=u.focusOffset;try{o.nodeType,f.nodeType}catch{o=null;break e}var v=0,T=-1,O=-1,H=0,J=0,ee=n,$=null;t:for(;;){for(var Q;ee!==o||d!==0&&ee.nodeType!==3||(T=v+d),ee!==f||u!==0&&ee.nodeType!==3||(O=v+u),ee.nodeType===3&&(v+=ee.nodeValue.length),(Q=ee.firstChild)!==null;)$=ee,ee=Q;for(;;){if(ee===n)break t;if($===o&&++H===d&&(T=v),$===f&&++J===u&&(O=v),(Q=ee.nextSibling)!==null)break;ee=$,$=ee.parentNode}ee=Q}o=T===-1||O===-1?null:{start:T,end:O}}else o=null}o=o||{start:0,end:0}}else o=null;for(em={focusedElem:n,selectionRange:o},nh=!1,Gt=i;Gt!==null;)if(i=Gt,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Gt=n;else for(;Gt!==null;){switch(i=Gt,f=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)d=n[o],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&f!==null){n=void 0,o=i,d=f.memoizedProps,f=f.memoizedState,u=o.stateNode;try{var de=Yi(o.type,d);n=u.getSnapshotBeforeUpdate(de,f),u.__reactInternalSnapshotBeforeUpdate=n}catch(be){We(o,o.return,be)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)sm(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":sm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,Gt=n;break}Gt=i.return}}function I_(n,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ar(n,o),u&4&&Cl(5,o);break;case 1:if(ar(n,o),u&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(v){We(o,o.return,v)}else{var d=Yi(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(d,i,n.__reactInternalSnapshotBeforeUpdate)}catch(v){We(o,o.return,v)}}u&64&&T_(o),u&512&&Il(o,o.return);break;case 3:if(ar(n,o),u&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{fy(n,i)}catch(v){We(o,o.return,v)}}break;case 27:i===null&&u&4&&R_(o);case 26:case 5:ar(n,o),i===null&&u&4&&A_(o),u&512&&Il(o,o.return);break;case 12:ar(n,o);break;case 31:ar(n,o),u&4&&k_(n,o);break;case 13:ar(n,o),u&4&&j_(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=X1.bind(null,o),yS(n,o))));break;case 22:if(u=o.memoizedState!==null||rr,!u){i=i!==null&&i.memoizedState!==null||Dt,d=rr;var f=Dt;rr=u,(Dt=i)&&!f?or(n,o,(o.subtreeFlags&8772)!==0):ar(n,o),rr=d,Dt=f}break;case 30:break;default:ar(n,o)}}function N_(n){var i=n.alternate;i!==null&&(n.alternate=null,N_(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&_a(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var dt=null,vn=!1;function ir(n,i,o){for(o=o.child;o!==null;)O_(n,i,o),o=o.sibling}function O_(n,i,o){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(Xn,o)}catch{}switch(o.tag){case 26:Dt||Ms(o,i),ir(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Dt||Ms(o,i);var u=dt,d=vn;Kr(o.type)&&(dt=o.stateNode,vn=!1),ir(n,i,o),Ul(o.stateNode),dt=u,vn=d;break;case 5:Dt||Ms(o,i);case 6:if(u=dt,d=vn,dt=null,ir(n,i,o),dt=u,vn=d,dt!==null)if(vn)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(o.stateNode)}catch(f){We(o,i,f)}else try{dt.removeChild(o.stateNode)}catch(f){We(o,i,f)}break;case 18:dt!==null&&(vn?(n=dt,Tv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),no(n)):Tv(dt,o.stateNode));break;case 4:u=dt,d=vn,dt=o.stateNode.containerInfo,vn=!0,ir(n,i,o),dt=u,vn=d;break;case 0:case 11:case 14:case 15:zr(2,o,i),Dt||zr(4,o,i),ir(n,i,o);break;case 1:Dt||(Ms(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&S_(o,i,u)),ir(n,i,o);break;case 21:ir(n,i,o);break;case 22:Dt=(u=Dt)||o.memoizedState!==null,ir(n,i,o),Dt=u;break;default:ir(n,i,o)}}function k_(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{no(n)}catch(o){We(i,i.return,o)}}}function j_(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{no(n)}catch(o){We(i,i.return,o)}}function H1(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new C_),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new C_),i;default:throw Error(r(435,n.tag))}}function Pc(n,i){var o=H1(n);i.forEach(function(u){if(!o.has(u)){o.add(u);var d=W1.bind(null,n,u);u.then(d,d)}})}function bn(n,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var d=o[u],f=n,v=i,T=v;e:for(;T!==null;){switch(T.tag){case 27:if(Kr(T.type)){dt=T.stateNode,vn=!1;break e}break;case 5:dt=T.stateNode,vn=!1;break e;case 3:case 4:dt=T.stateNode.containerInfo,vn=!0;break e}T=T.return}if(dt===null)throw Error(r(160));O_(f,v,d),dt=null,vn=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)D_(i,n),i=i.sibling}var os=null;function D_(n,i){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:bn(i,n),wn(n),u&4&&(zr(3,n,n.return),Cl(3,n),zr(5,n,n.return));break;case 1:bn(i,n),wn(n),u&512&&(Dt||o===null||Ms(o,o.return)),u&64&&rr&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var d=os;if(bn(i,n),wn(n),u&512&&(Dt||o===null||Ms(o,o.return)),u&4){var f=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,d=d.ownerDocument||d;t:switch(u){case"title":f=d.getElementsByTagName("title")[0],(!f||f[ws]||f[Ct]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(u),d.head.insertBefore(f,d.querySelector("head > title"))),en(f,u,o),f[Ct]=n,It(f),u=f;break e;case"link":var v=Dv("link","href",d).get(u+(o.href||""));if(v){for(var T=0;T<v.length;T++)if(f=v[T],f.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&f.getAttribute("rel")===(o.rel==null?null:o.rel)&&f.getAttribute("title")===(o.title==null?null:o.title)&&f.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(T,1);break t}}f=d.createElement(u),en(f,u,o),d.head.appendChild(f);break;case"meta":if(v=Dv("meta","content",d).get(u+(o.content||""))){for(T=0;T<v.length;T++)if(f=v[T],f.getAttribute("content")===(o.content==null?null:""+o.content)&&f.getAttribute("name")===(o.name==null?null:o.name)&&f.getAttribute("property")===(o.property==null?null:o.property)&&f.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&f.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(T,1);break t}}f=d.createElement(u),en(f,u,o),d.head.appendChild(f);break;default:throw Error(r(468,u))}f[Ct]=n,It(f),u=f}n.stateNode=u}else Mv(d,n.type,n.stateNode);else n.stateNode=jv(d,u,n.memoizedProps);else f!==u?(f===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):f.count--,u===null?Mv(d,n.type,n.stateNode):jv(d,u,n.memoizedProps)):u===null&&n.stateNode!==null&&If(n,n.memoizedProps,o.memoizedProps)}break;case 27:bn(i,n),wn(n),u&512&&(Dt||o===null||Ms(o,o.return)),o!==null&&u&4&&If(n,n.memoizedProps,o.memoizedProps);break;case 5:if(bn(i,n),wn(n),u&512&&(Dt||o===null||Ms(o,o.return)),n.flags&32){d=n.stateNode;try{_n(d,"")}catch(de){We(n,n.return,de)}}u&4&&n.stateNode!=null&&(d=n.memoizedProps,If(n,d,o!==null?o.memoizedProps:d)),u&1024&&(kf=!0);break;case 6:if(bn(i,n),wn(n),u&4){if(n.stateNode===null)throw Error(r(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(de){We(n,n.return,de)}}break;case 3:if(Wc=null,d=os,os=Jc(i.containerInfo),bn(i,n),os=d,wn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{no(i.containerInfo)}catch(de){We(n,n.return,de)}kf&&(kf=!1,M_(n));break;case 4:u=os,os=Jc(n.stateNode.containerInfo),bn(i,n),wn(n),os=u;break;case 12:bn(i,n),wn(n);break;case 31:bn(i,n),wn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Pc(n,u)));break;case 13:bn(i,n),wn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Uc=dn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Pc(n,u)));break;case 22:d=n.memoizedState!==null;var O=o!==null&&o.memoizedState!==null,H=rr,J=Dt;if(rr=H||d,Dt=J||O,bn(i,n),Dt=J,rr=H,wn(n),u&8192)e:for(i=n.stateNode,i._visibility=d?i._visibility&-2:i._visibility|1,d&&(o===null||O||rr||Dt||Ji(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){O=o=i;try{if(f=O.stateNode,d)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=O.stateNode;var ee=O.memoizedProps.style,$=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;T.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(de){We(O,O.return,de)}}}else if(i.tag===6){if(o===null){O=i;try{O.stateNode.nodeValue=d?"":O.memoizedProps}catch(de){We(O,O.return,de)}}}else if(i.tag===18){if(o===null){O=i;try{var Q=O.stateNode;d?Sv(Q,!0):Sv(O.stateNode,!1)}catch(de){We(O,O.return,de)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Pc(n,o))));break;case 19:bn(i,n),wn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Pc(n,u)));break;case 30:break;case 21:break;default:bn(i,n),wn(n)}}function wn(n){var i=n.flags;if(i&2){try{for(var o,u=n.return;u!==null;){if(x_(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var d=o.stateNode,f=Nf(n);Mc(n,f,d);break;case 5:var v=o.stateNode;o.flags&32&&(_n(v,""),o.flags&=-33);var T=Nf(n);Mc(n,T,v);break;case 3:case 4:var O=o.stateNode.containerInfo,H=Nf(n);Of(n,H,O);break;default:throw Error(r(161))}}catch(J){We(n,n.return,J)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function M_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;M_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function ar(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)I_(n,i.alternate,i),i=i.sibling}function Ji(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:zr(4,i,i.return),Ji(i);break;case 1:Ms(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&S_(i,i.return,o),Ji(i);break;case 27:Ul(i.stateNode);case 26:case 5:Ms(i,i.return),Ji(i);break;case 22:i.memoizedState===null&&Ji(i);break;case 30:Ji(i);break;default:Ji(i)}n=n.sibling}}function or(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,d=n,f=i,v=f.flags;switch(f.tag){case 0:case 11:case 15:or(d,f,o),Cl(4,f);break;case 1:if(or(d,f,o),u=f,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(H){We(u,u.return,H)}if(u=f,d=u.updateQueue,d!==null){var T=u.stateNode;try{var O=d.shared.hiddenCallbacks;if(O!==null)for(d.shared.hiddenCallbacks=null,d=0;d<O.length;d++)dy(O[d],T)}catch(H){We(u,u.return,H)}}o&&v&64&&T_(f),Il(f,f.return);break;case 27:R_(f);case 26:case 5:or(d,f,o),o&&u===null&&v&4&&A_(f),Il(f,f.return);break;case 12:or(d,f,o);break;case 31:or(d,f,o),o&&v&4&&k_(d,f);break;case 13:or(d,f,o),o&&v&4&&j_(d,f);break;case 22:f.memoizedState===null&&or(d,f,o),Il(f,f.return);break;case 30:break;default:or(d,f,o)}i=i.sibling}}function jf(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&gl(o))}function Df(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&gl(n))}function ls(n,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)P_(n,i,o,u),i=i.sibling}function P_(n,i,o,u){var d=i.flags;switch(i.tag){case 0:case 11:case 15:ls(n,i,o,u),d&2048&&Cl(9,i);break;case 1:ls(n,i,o,u);break;case 3:ls(n,i,o,u),d&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&gl(n)));break;case 12:if(d&2048){ls(n,i,o,u),n=i.stateNode;try{var f=i.memoizedProps,v=f.id,T=f.onPostCommit;typeof T=="function"&&T(v,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(O){We(i,i.return,O)}}else ls(n,i,o,u);break;case 31:ls(n,i,o,u);break;case 13:ls(n,i,o,u);break;case 23:break;case 22:f=i.stateNode,v=i.alternate,i.memoizedState!==null?f._visibility&2?ls(n,i,o,u):Nl(n,i):f._visibility&2?ls(n,i,o,u):(f._visibility|=2,Fa(n,i,o,u,(i.subtreeFlags&10256)!==0||!1)),d&2048&&jf(v,i);break;case 24:ls(n,i,o,u),d&2048&&Df(i.alternate,i);break;default:ls(n,i,o,u)}}function Fa(n,i,o,u,d){for(d=d&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var f=n,v=i,T=o,O=u,H=v.flags;switch(v.tag){case 0:case 11:case 15:Fa(f,v,T,O,d),Cl(8,v);break;case 23:break;case 22:var J=v.stateNode;v.memoizedState!==null?J._visibility&2?Fa(f,v,T,O,d):Nl(f,v):(J._visibility|=2,Fa(f,v,T,O,d)),d&&H&2048&&jf(v.alternate,v);break;case 24:Fa(f,v,T,O,d),d&&H&2048&&Df(v.alternate,v);break;default:Fa(f,v,T,O,d)}i=i.sibling}}function Nl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,u=i,d=u.flags;switch(u.tag){case 22:Nl(o,u),d&2048&&jf(u.alternate,u);break;case 24:Nl(o,u),d&2048&&Df(u.alternate,u);break;default:Nl(o,u)}i=i.sibling}}var Ol=8192;function Ga(n,i,o){if(n.subtreeFlags&Ol)for(n=n.child;n!==null;)V_(n,i,o),n=n.sibling}function V_(n,i,o){switch(n.tag){case 26:Ga(n,i,o),n.flags&Ol&&n.memoizedState!==null&&IS(o,os,n.memoizedState,n.memoizedProps);break;case 5:Ga(n,i,o);break;case 3:case 4:var u=os;os=Jc(n.stateNode.containerInfo),Ga(n,i,o),os=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Ol,Ol=16777216,Ga(n,i,o),Ol=u):Ga(n,i,o));break;default:Ga(n,i,o)}}function U_(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function kl(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Gt=u,z_(u,n)}U_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)L_(n),n=n.sibling}function L_(n){switch(n.tag){case 0:case 11:case 15:kl(n),n.flags&2048&&zr(9,n,n.return);break;case 3:kl(n);break;case 12:kl(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Vc(n)):kl(n);break;default:kl(n)}}function Vc(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Gt=u,z_(u,n)}U_(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:zr(8,i,i.return),Vc(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Vc(i));break;default:Vc(i)}n=n.sibling}}function z_(n,i){for(;Gt!==null;){var o=Gt;switch(o.tag){case 0:case 11:case 15:zr(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:gl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Gt=u;else e:for(o=n;Gt!==null;){u=Gt;var d=u.sibling,f=u.return;if(N_(u),u===o){Gt=null;break e}if(d!==null){d.return=f,Gt=d;break e}Gt=f}}}var $1={getCacheForType:function(n){var i=Wt(Ot),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o},cacheSignal:function(){return Wt(Ot).controller.signal}},F1=typeof WeakMap=="function"?WeakMap:Map,Ye=0,rt=null,Me=null,Ve=0,Xe=0,On=null,Br=!1,Ka=!1,Mf=!1,lr=0,vt=0,qr=0,Xi=0,Pf=0,kn=0,Qa=0,jl=null,En=null,Vf=!1,Uc=0,B_=0,Lc=1/0,zc=null,Hr=null,zt=0,$r=null,Ya=null,ur=0,Uf=0,Lf=null,q_=null,Dl=0,zf=null;function jn(){return(Ye&2)!==0&&Ve!==0?Ve&-Ve:Y.T!==null?Gf():Bu()}function H_(){if(kn===0)if((Ve&536870912)===0||ze){var n=Si;Si<<=1,(Si&3932160)===0&&(Si=262144),kn=n}else kn=536870912;return n=In.current,n!==null&&(n.flags|=32),kn}function Tn(n,i,o){(n===rt&&(Xe===2||Xe===9)||n.cancelPendingCommit!==null)&&(Ja(n,0),Fr(n,Ve,kn,!1)),Ai(n,o),((Ye&2)===0||n!==rt)&&(n===rt&&((Ye&2)===0&&(Xi|=o),vt===4&&Fr(n,Ve,kn,!1)),Ps(n))}function $_(n,i,o){if((Ye&6)!==0)throw Error(r(327));var u=!o&&(i&127)===0&&(i&n.expiredLanes)===0||Wn(n,i),d=u?Q1(n,i):qf(n,i,!0),f=u;do{if(d===0){Ka&&!u&&Fr(n,i,0,!1);break}else{if(o=n.current.alternate,f&&!G1(o)){d=qf(n,i,!1),f=!1;continue}if(d===2){if(f=i,n.errorRecoveryDisabledLanes&f)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var T=n;d=jl;var O=T.current.memoizedState.isDehydrated;if(O&&(Ja(T,v).flags|=256),v=qf(T,v,!1),v!==2){if(Mf&&!O){T.errorRecoveryDisabledLanes|=f,Xi|=f,d=4;break e}f=En,En=d,f!==null&&(En===null?En=f:En.push.apply(En,f))}d=v}if(f=!1,d!==2)continue}}if(d===1){Ja(n,0),Fr(n,i,0,!0);break}e:{switch(u=n,f=d,f){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Fr(u,i,kn,!Br);break e;case 2:En=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(d=Uc+300-dn(),10<d)){if(Fr(u,i,kn,!Br),_s(u,0,!0)!==0)break e;ur=i,u.timeoutHandle=wv(F_.bind(null,u,o,En,zc,Vf,i,kn,Xi,Qa,Br,f,"Throttled",-0,0),d);break e}F_(u,o,En,zc,Vf,i,kn,Xi,Qa,Br,f,null,-0,0)}}break}while(!0);Ps(n)}function F_(n,i,o,u,d,f,v,T,O,H,J,ee,$,Q){if(n.timeoutHandle=-1,ee=i.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ts},V_(i,f,ee);var de=(f&62914560)===f?Uc-dn():(f&4194048)===f?B_-dn():0;if(de=NS(ee,de),de!==null){ur=f,n.cancelPendingCommit=de(Z_.bind(null,n,i,f,o,u,d,v,T,O,J,ee,null,$,Q)),Fr(n,f,v,!H);return}}Z_(n,i,f,o,u,d,v,T,O)}function G1(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var d=o[u],f=d.getSnapshot;d=d.value;try{if(!Rn(f(),d))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Fr(n,i,o,u){i&=~Pf,i&=~Xi,n.suspendedLanes|=i,n.pingedLanes&=~i,u&&(n.warmLanes|=i),u=n.expirationTimes;for(var d=i;0<d;){var f=31-wt(d),v=1<<f;u[f]=-1,d&=~v}o!==0&&xi(n,o,i)}function Bc(){return(Ye&6)===0?(Ml(0),!1):!0}function Bf(){if(Me!==null){if(Xe===0)var n=Me.return;else n=Me,Ws=qi=null,nf(n),za=null,yl=0,n=Me;for(;n!==null;)E_(n.alternate,n),n=n.return;Me=null}}function Ja(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,dS(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),ur=0,Bf(),rt=n,Me=o=Js(n.current,null),Ve=i,Xe=0,On=null,Br=!1,Ka=Wn(n,i),Mf=!1,Qa=kn=Pf=Xi=qr=vt=0,En=jl=null,Vf=!1,(i&8)!==0&&(i|=i&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=i;0<u;){var d=31-wt(u),f=1<<d;i|=n[d],u&=~f}return lr=i,lc(),o}function G_(n,i){Ne=null,Y.H=Al,i===La||i===pc?(i=ly(),Xe=3):i===$d?(i=ly(),Xe=4):Xe=i===vf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,On=i,Me===null&&(vt=1,Nc(n,$n(i,n.current)))}function K_(){var n=In.current;return n===null?!0:(Ve&4194048)===Ve?Qn===null:(Ve&62914560)===Ve||(Ve&536870912)!==0?n===Qn:!1}function Q_(){var n=Y.H;return Y.H=Al,n===null?Al:n}function Y_(){var n=Y.A;return Y.A=$1,n}function qc(){vt=4,Br||(Ve&4194048)!==Ve&&In.current!==null||(Ka=!0),(qr&134217727)===0&&(Xi&134217727)===0||rt===null||Fr(rt,Ve,kn,!1)}function qf(n,i,o){var u=Ye;Ye|=2;var d=Q_(),f=Y_();(rt!==n||Ve!==i)&&(zc=null,Ja(n,i)),i=!1;var v=vt;e:do try{if(Xe!==0&&Me!==null){var T=Me,O=On;switch(Xe){case 8:Bf(),v=6;break e;case 3:case 2:case 9:case 6:In.current===null&&(i=!0);var H=Xe;if(Xe=0,On=null,Xa(n,T,O,H),o&&Ka){v=0;break e}break;default:H=Xe,Xe=0,On=null,Xa(n,T,O,H)}}K1(),v=vt;break}catch(J){G_(n,J)}while(!0);return i&&n.shellSuspendCounter++,Ws=qi=null,Ye=u,Y.H=d,Y.A=f,Me===null&&(rt=null,Ve=0,lc()),v}function K1(){for(;Me!==null;)J_(Me)}function Q1(n,i){var o=Ye;Ye|=2;var u=Q_(),d=Y_();rt!==n||Ve!==i?(zc=null,Lc=dn()+500,Ja(n,i)):Ka=Wn(n,i);e:do try{if(Xe!==0&&Me!==null){i=Me;var f=On;t:switch(Xe){case 1:Xe=0,On=null,Xa(n,i,f,1);break;case 2:case 9:if(ay(f)){Xe=0,On=null,X_(i);break}i=function(){Xe!==2&&Xe!==9||rt!==n||(Xe=7),Ps(n)},f.then(i,i);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:ay(f)?(Xe=0,On=null,X_(i)):(Xe=0,On=null,Xa(n,i,f,7));break;case 5:var v=null;switch(Me.tag){case 26:v=Me.memoizedState;case 5:case 27:var T=Me;if(v?Pv(v):T.stateNode.complete){Xe=0,On=null;var O=T.sibling;if(O!==null)Me=O;else{var H=T.return;H!==null?(Me=H,Hc(H)):Me=null}break t}}Xe=0,On=null,Xa(n,i,f,5);break;case 6:Xe=0,On=null,Xa(n,i,f,6);break;case 8:Bf(),vt=6;break e;default:throw Error(r(462))}}Y1();break}catch(J){G_(n,J)}while(!0);return Ws=qi=null,Y.H=u,Y.A=d,Ye=o,Me!==null?0:(rt=null,Ve=0,lc(),vt)}function Y1(){for(;Me!==null&&!yd();)J_(Me)}function J_(n){var i=b_(n.alternate,n,lr);n.memoizedProps=n.pendingProps,i===null?Hc(n):Me=i}function X_(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=m_(o,i,i.pendingProps,i.type,void 0,Ve);break;case 11:i=m_(o,i,i.pendingProps,i.type.render,i.ref,Ve);break;case 5:nf(i);default:E_(o,i),i=Me=Yp(i,lr),i=b_(o,i,lr)}n.memoizedProps=n.pendingProps,i===null?Hc(n):Me=i}function Xa(n,i,o,u){Ws=qi=null,nf(i),za=null,yl=0;var d=i.return;try{if(V1(n,d,i,o,Ve)){vt=1,Nc(n,$n(o,n.current)),Me=null;return}}catch(f){if(d!==null)throw Me=d,f;vt=1,Nc(n,$n(o,n.current)),Me=null;return}i.flags&32768?(ze||u===1?n=!0:Ka||(Ve&536870912)!==0?n=!1:(Br=n=!0,(u===2||u===9||u===3||u===6)&&(u=In.current,u!==null&&u.tag===13&&(u.flags|=16384))),W_(i,n)):Hc(i)}function Hc(n){var i=n;do{if((i.flags&32768)!==0){W_(i,Br);return}n=i.return;var o=z1(i.alternate,i,lr);if(o!==null){Me=o;return}if(i=i.sibling,i!==null){Me=i;return}Me=i=n}while(i!==null);vt===0&&(vt=5)}function W_(n,i){do{var o=B1(n.alternate,n);if(o!==null){o.flags&=32767,Me=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){Me=n;return}Me=n=o}while(n!==null);vt=6,Me=null}function Z_(n,i,o,u,d,f,v,T,O){n.cancelPendingCommit=null;do $c();while(zt!==0);if((Ye&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(f=i.lanes|i.childLanes,f|=Id,bd(n,o,f,v,T,O),n===rt&&(Me=rt=null,Ve=0),Ya=i,$r=n,ur=o,Uf=f,Lf=d,q_=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Z1(wr,function(){return rv(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=Y.T,Y.T=null,d=ue.p,ue.p=2,v=Ye,Ye|=4;try{q1(n,i,o)}finally{Ye=v,ue.p=d,Y.T=u}}zt=1,ev(),tv(),nv()}}function ev(){if(zt===1){zt=0;var n=$r,i=Ya,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null;var u=ue.p;ue.p=2;var d=Ye;Ye|=4;try{D_(i,n);var f=em,v=zp(n.containerInfo),T=f.focusedElem,O=f.selectionRange;if(v!==T&&T&&T.ownerDocument&&Lp(T.ownerDocument.documentElement,T)){if(O!==null&&Sd(T)){var H=O.start,J=O.end;if(J===void 0&&(J=H),"selectionStart"in T)T.selectionStart=H,T.selectionEnd=Math.min(J,T.value.length);else{var ee=T.ownerDocument||document,$=ee&&ee.defaultView||window;if($.getSelection){var Q=$.getSelection(),de=T.textContent.length,be=Math.min(O.start,de),nt=O.end===void 0?be:Math.min(O.end,de);!Q.extend&&be>nt&&(v=nt,nt=be,be=v);var z=Up(T,be),M=Up(T,nt);if(z&&M&&(Q.rangeCount!==1||Q.anchorNode!==z.node||Q.anchorOffset!==z.offset||Q.focusNode!==M.node||Q.focusOffset!==M.offset)){var q=ee.createRange();q.setStart(z.node,z.offset),Q.removeAllRanges(),be>nt?(Q.addRange(q),Q.extend(M.node,M.offset)):(q.setEnd(M.node,M.offset),Q.addRange(q))}}}}for(ee=[],Q=T;Q=Q.parentNode;)Q.nodeType===1&&ee.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ee.length;T++){var X=ee[T];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}nh=!!Zf,em=Zf=null}finally{Ye=d,ue.p=u,Y.T=o}}n.current=i,zt=2}}function tv(){if(zt===2){zt=0;var n=$r,i=Ya,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=Y.T,Y.T=null;var u=ue.p;ue.p=2;var d=Ye;Ye|=4;try{I_(n,i.alternate,i)}finally{Ye=d,ue.p=u,Y.T=o}}zt=3}}function nv(){if(zt===4||zt===3){zt=0,Du();var n=$r,i=Ya,o=ur,u=q_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?zt=5:(zt=0,Ya=$r=null,sv(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(Hr=null),Gs(o),i=i.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(Xn,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=Y.T,d=ue.p,ue.p=2,Y.T=null;try{for(var f=n.onRecoverableError,v=0;v<u.length;v++){var T=u[v];f(T.value,{componentStack:T.stack})}}finally{Y.T=i,ue.p=d}}(ur&3)!==0&&$c(),Ps(n),d=n.pendingLanes,(o&261930)!==0&&(d&42)!==0?n===zf?Dl++:(Dl=0,zf=n):Dl=0,Ml(0)}}function sv(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,gl(i)))}function $c(){return ev(),tv(),nv(),rv()}function rv(){if(zt!==5)return!1;var n=$r,i=Uf;Uf=0;var o=Gs(ur),u=Y.T,d=ue.p;try{ue.p=32>o?32:o,Y.T=null,o=Lf,Lf=null;var f=$r,v=ur;if(zt=0,Ya=$r=null,ur=0,(Ye&6)!==0)throw Error(r(331));var T=Ye;if(Ye|=4,L_(f.current),P_(f,f.current,v,o),Ye=T,Ml(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(Xn,f)}catch{}return!0}finally{ue.p=d,Y.T=u,sv(n,i)}}function iv(n,i,o){i=$n(o,i),i=_f(n.stateNode,i,2),n=Vr(n,i,2),n!==null&&(Ai(n,2),Ps(n))}function We(n,i,o){if(n.tag===3)iv(n,n,o);else for(;i!==null;){if(i.tag===3){iv(i,n,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Hr===null||!Hr.has(u))){n=$n(o,n),o=a_(2),u=Vr(i,o,2),u!==null&&(o_(o,u,i,n),Ai(u,2),Ps(u));break}}i=i.return}}function Hf(n,i,o){var u=n.pingCache;if(u===null){u=n.pingCache=new F1;var d=new Set;u.set(i,d)}else d=u.get(i),d===void 0&&(d=new Set,u.set(i,d));d.has(o)||(Mf=!0,d.add(o),n=J1.bind(null,n,i,o),i.then(n,n))}function J1(n,i,o){var u=n.pingCache;u!==null&&u.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,rt===n&&(Ve&o)===o&&(vt===4||vt===3&&(Ve&62914560)===Ve&&300>dn()-Uc?(Ye&2)===0&&Ja(n,0):Pf|=o,Qa===Ve&&(Qa=0)),Ps(n)}function av(n,i){i===0&&(i=zu()),n=Li(n,i),n!==null&&(Ai(n,i),Ps(n))}function X1(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),av(n,o)}function W1(n,i){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,d=n.memoizedState;d!==null&&(o=d.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(i),av(n,o)}function Z1(n,i){return Lt(n,i)}var Fc=null,Wa=null,$f=!1,Gc=!1,Ff=!1,Gr=0;function Ps(n){n!==Wa&&n.next===null&&(Wa===null?Fc=Wa=n:Wa=Wa.next=n),Gc=!0,$f||($f=!0,tS())}function Ml(n,i){if(!Ff&&Gc){Ff=!0;do for(var o=!1,u=Fc;u!==null;){if(n!==0){var d=u.pendingLanes;if(d===0)var f=0;else{var v=u.suspendedLanes,T=u.pingedLanes;f=(1<<31-wt(42|n)+1)-1,f&=d&~(v&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(o=!0,cv(u,f))}else f=Ve,f=_s(u,u===rt?f:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(f&3)===0||Wn(u,f)||(o=!0,cv(u,f));u=u.next}while(o);Ff=!1}}function eS(){ov()}function ov(){Gc=$f=!1;var n=0;Gr!==0&&hS()&&(n=Gr);for(var i=dn(),o=null,u=Fc;u!==null;){var d=u.next,f=lv(u,i);f===0?(u.next=null,o===null?Fc=d:o.next=d,d===null&&(Wa=o)):(o=u,(n!==0||(f&3)!==0)&&(Gc=!0)),u=d}zt!==0&&zt!==5||Ml(n),Gr!==0&&(Gr=0)}function lv(n,i){for(var o=n.suspendedLanes,u=n.pingedLanes,d=n.expirationTimes,f=n.pendingLanes&-62914561;0<f;){var v=31-wt(f),T=1<<v,O=d[v];O===-1?((T&o)===0||(T&u)!==0)&&(d[v]=vd(T,i)):O<=i&&(n.expiredLanes|=T),f&=~T}if(i=rt,o=Ve,o=_s(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===i&&(Xe===2||Xe===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&br(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Wn(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(u!==null&&br(u),Gs(o)){case 2:case 8:o=Fo;break;case 32:o=wr;break;case 268435456:o=Mu;break;default:o=wr}return u=uv.bind(null,n),o=Lt(o,u),n.callbackPriority=i,n.callbackNode=o,i}return u!==null&&u!==null&&br(u),n.callbackPriority=2,n.callbackNode=null,2}function uv(n,i){if(zt!==0&&zt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if($c()&&n.callbackNode!==o)return null;var u=Ve;return u=_s(n,n===rt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:($_(n,u,i),lv(n,dn()),n.callbackNode!=null&&n.callbackNode===o?uv.bind(null,n):null)}function cv(n,i){if($c())return null;$_(n,i,!0)}function tS(){fS(function(){(Ye&6)!==0?Lt($o,eS):ov()})}function Gf(){if(Gr===0){var n=Va;n===0&&(n=ps,ps<<=1,(ps&261888)===0&&(ps=256)),Gr=n}return Gr}function hv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ea(""+n)}function dv(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function nS(n,i,o,u,d){if(i==="submit"&&o&&o.stateNode===d){var f=hv((d[$t]||null).action),v=u.submitter;v&&(i=(i=v[$t]||null)?hv(i.formAction):v.getAttribute("formAction"),i!==null&&(f=i,v=null));var T=new Is("action","action",null,u,d);n.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Gr!==0){var O=v?dv(d,v):new FormData(d);df(o,{pending:!0,data:O,method:d.method,action:f},null,O)}}else typeof f=="function"&&(T.preventDefault(),O=v?dv(d,v):new FormData(d),df(o,{pending:!0,data:O,method:d.method,action:f},f,O))},currentTarget:d}]})}}for(var Kf=0;Kf<Cd.length;Kf++){var Qf=Cd[Kf],sS=Qf.toLowerCase(),rS=Qf[0].toUpperCase()+Qf.slice(1);as(sS,"on"+rS)}as(Hp,"onAnimationEnd"),as($p,"onAnimationIteration"),as(Fp,"onAnimationStart"),as("dblclick","onDoubleClick"),as("focusin","onFocus"),as("focusout","onBlur"),as(b1,"onTransitionRun"),as(w1,"onTransitionStart"),as(E1,"onTransitionCancel"),as(Gp,"onTransitionEnd"),As("onMouseEnter",["mouseout","mouseover"]),As("onMouseLeave",["mouseout","mouseover"]),As("onPointerEnter",["pointerout","pointerover"]),As("onPointerLeave",["pointerout","pointerover"]),Ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ss("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pl));function fv(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],d=u.event;u=u.listeners;e:{var f=void 0;if(i)for(var v=u.length-1;0<=v;v--){var T=u[v],O=T.instance,H=T.currentTarget;if(T=T.listener,O!==f&&d.isPropagationStopped())break e;f=T,d.currentTarget=H;try{f(d)}catch(J){oc(J)}d.currentTarget=null,f=O}else for(v=0;v<u.length;v++){if(T=u[v],O=T.instance,H=T.currentTarget,T=T.listener,O!==f&&d.isPropagationStopped())break e;f=T,d.currentTarget=H;try{f(d)}catch(J){oc(J)}d.currentTarget=null,f=O}}}}function Pe(n,i){var o=i[ya];o===void 0&&(o=i[ya]=new Set);var u=n+"__bubble";o.has(u)||(mv(i,n,2,!1),o.add(u))}function Yf(n,i,o){var u=0;i&&(u|=4),mv(o,n,u,i)}var Kc="_reactListening"+Math.random().toString(36).slice(2);function Jf(n){if(!n[Kc]){n[Kc]=!0,Qo.forEach(function(o){o!=="selectionchange"&&(iS.has(o)||Yf(o,!1,n),Yf(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Kc]||(i[Kc]=!0,Yf("selectionchange",!1,i))}}function mv(n,i,o,u){switch(Hv(i)){case 2:var d=jS;break;case 8:d=DS;break;default:d=hm}o=d.bind(null,i,o,n),d=void 0,!Oi||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),u?d!==void 0?n.addEventListener(i,o,{capture:!0,passive:d}):n.addEventListener(i,o,!0):d!==void 0?n.addEventListener(i,o,{passive:d}):n.addEventListener(i,o,!1)}function Xf(n,i,o,u,d){var f=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var T=u.stateNode.containerInfo;if(T===d)break;if(v===4)for(v=u.return;v!==null;){var O=v.tag;if((O===3||O===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;T!==null;){if(v=Es(T),v===null)return;if(O=v.tag,O===5||O===6||O===26||O===27){u=f=v;continue e}T=T.parentNode}}u=u.return}Rr(function(){var H=f,J=zn(o),ee=[];e:{var $=Kp.get(n);if($!==void 0){var Q=Is,de=n;switch(n){case"keypress":if(ji(o)===0)break e;case"keydown":case"keyup":Q=rc;break;case"focusin":de="focus",Q=Mi;break;case"focusout":de="blur",Q=Mi;break;case"beforeblur":case"afterblur":Q=Mi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=ol;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Yu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=y;break;case Hp:case $p:case Fp:Q=Xu;break;case Gp:Q=S;break;case"scroll":case"scrollend":Q=al;break;case"wheel":Q=G;break;case"copy":case"cut":case"paste":Q=Wu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Ys;break;case"toggle":case"beforetoggle":Q=Ie}var be=(i&4)!==0,nt=!be&&(n==="scroll"||n==="scrollend"),z=be?$!==null?$+"Capture":null:$;be=[];for(var M=H,q;M!==null;){var X=M;if(q=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||q===null||z===null||(X=ns(M,z),X!=null&&be.push(Vl(M,X,q))),nt)break;M=M.return}0<be.length&&($=new Q($,de,null,o,J),ee.push({event:$,listeners:be}))}}if((i&7)===0){e:{if($=n==="mouseover"||n==="pointerover",Q=n==="mouseout"||n==="pointerout",$&&o!==sl&&(de=o.relatedTarget||o.fromElement)&&(Es(de)||de[bs]))break e;if((Q||$)&&($=J.window===J?J:($=J.ownerDocument)?$.defaultView||$.parentWindow:window,Q?(de=o.relatedTarget||o.toElement,Q=H,de=de?Es(de):null,de!==null&&(nt=l(de),be=de.tag,de!==nt||be!==5&&be!==27&&be!==6)&&(de=null)):(Q=null,de=H),Q!==de)){if(be=ol,X="onMouseLeave",z="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(be=Ys,X="onPointerLeave",z="onPointerEnter",M="pointer"),nt=Q==null?$:An(Q),q=de==null?$:An(de),$=new be(X,M+"leave",Q,o,J),$.target=nt,$.relatedTarget=q,X=null,Es(J)===H&&(be=new be(z,M+"enter",de,o,J),be.target=q,be.relatedTarget=nt,X=be),nt=X,Q&&de)t:{for(be=aS,z=Q,M=de,q=0,X=z;X;X=be(X))q++;X=0;for(var ve=M;ve;ve=be(ve))X++;for(;0<q-X;)z=be(z),q--;for(;0<X-q;)M=be(M),X--;for(;q--;){if(z===M||M!==null&&z===M.alternate){be=z;break t}z=be(z),M=be(M)}be=null}else be=null;Q!==null&&gv(ee,$,Q,be,!1),de!==null&&nt!==null&&gv(ee,nt,de,be,!0)}}e:{if($=H?An(H):window,Q=$.nodeName&&$.nodeName.toLowerCase(),Q==="select"||Q==="input"&&$.type==="file")var Ge=kp;else if(Np($))if(jp)Ge=y1;else{Ge=g1;var me=m1}else Q=$.nodeName,!Q||Q.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?H&&wa(H.elementType)&&(Ge=kp):Ge=p1;if(Ge&&(Ge=Ge(n,H))){Op(ee,Ge,o,J);break e}me&&me(n,$,H),n==="focusout"&&H&&$.type==="number"&&H.memoizedProps.value!=null&&el($,"number",$.value)}switch(me=H?An(H):window,n){case"focusin":(Np(me)||me.contentEditable==="true")&&(Ia=me,Ad=H,dl=null);break;case"focusout":dl=Ad=Ia=null;break;case"mousedown":xd=!0;break;case"contextmenu":case"mouseup":case"dragend":xd=!1,Bp(ee,o,J);break;case"selectionchange":if(v1)break;case"keydown":case"keyup":Bp(ee,o,J)}var Oe;if(Qe)e:{switch(n){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else Ca?Pi(n,o)&&(Ue="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Ue="onCompositionStart");Ue&&(ks&&o.locale!=="ko"&&(Ca||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&Ca&&(Oe=il()):(Cs=J,rl="value"in Cs?Cs.value:Cs.textContent,Ca=!0)),me=Qc(H,Ue),0<me.length&&(Ue=new Os(Ue,n,null,o,J),ee.push({event:Ue,listeners:me}),Oe?Ue.data=Oe:(Oe=Ra(o),Oe!==null&&(Ue.data=Oe)))),(Oe=qn?c1(n,o):h1(n,o))&&(Ue=Qc(H,"onBeforeInput"),0<Ue.length&&(me=new Os("onBeforeInput","beforeinput",null,o,J),ee.push({event:me,listeners:Ue}),me.data=Oe)),nS(ee,n,H,o,J)}fv(ee,i)})}function Vl(n,i,o){return{instance:n,listener:i,currentTarget:o}}function Qc(n,i){for(var o=i+"Capture",u=[];n!==null;){var d=n,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=ns(n,o),d!=null&&u.unshift(Vl(n,d,f)),d=ns(n,i),d!=null&&u.push(Vl(n,d,f))),n.tag===3)return u;n=n.return}return[]}function aS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function gv(n,i,o,u,d){for(var f=i._reactName,v=[];o!==null&&o!==u;){var T=o,O=T.alternate,H=T.stateNode;if(T=T.tag,O!==null&&O===u)break;T!==5&&T!==26&&T!==27||H===null||(O=H,d?(H=ns(o,f),H!=null&&v.unshift(Vl(o,H,O))):d||(H=ns(o,f),H!=null&&v.push(Vl(o,H,O)))),o=o.return}v.length!==0&&n.push({event:i,listeners:v})}var oS=/\r\n?/g,lS=/\u0000|\uFFFD/g;function pv(n){return(typeof n=="string"?n:""+n).replace(oS,`
`).replace(lS,"")}function yv(n,i){return i=pv(i),pv(n)===i}function tt(n,i,o,u,d,f){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||_n(n,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&_n(n,""+u);break;case"className":xn(n,"class",u);break;case"tabIndex":xn(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":xn(n,o,u);break;case"style":nl(n,u,f);break;case"data":if(i!=="object"){xn(n,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ea(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(o==="formAction"?(i!=="input"&&tt(n,i,"name",d.name,d,null),tt(n,i,"formEncType",d.formEncType,d,null),tt(n,i,"formMethod",d.formMethod,d,null),tt(n,i,"formTarget",d.formTarget,d,null)):(tt(n,i,"encType",d.encType,d,null),tt(n,i,"method",d.method,d,null),tt(n,i,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Ea(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=ts);break;case"onScroll":u!=null&&Pe("scroll",n);break;case"onScrollEnd":u!=null&&Pe("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Ea(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Pe("beforetoggle",n),Pe("toggle",n),va(n,"popover",u);break;case"xlinkActuate":Nt(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Nt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Nt(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Nt(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Nt(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Nt(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Nt(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Nt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Nt(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":va(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Qu.get(o)||o,va(n,o,u))}}function Wf(n,i,o,u,d,f){switch(o){case"style":nl(n,u,f);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof u=="string"?_n(n,u):(typeof u=="number"||typeof u=="bigint")&&_n(n,""+u);break;case"onScroll":u!=null&&Pe("scroll",n);break;case"onScrollEnd":u!=null&&Pe("scrollend",n);break;case"onClick":u!=null&&(n.onclick=ts);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yo.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),i=o.slice(2,d?o.length-7:void 0),f=n[$t]||null,f=f!=null?f[o]:null,typeof f=="function"&&n.removeEventListener(i,f,d),typeof u=="function")){typeof f!="function"&&f!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,u,d);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):va(n,o,u)}}}function en(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",n),Pe("load",n);var u=!1,d=!1,f;for(f in o)if(o.hasOwnProperty(f)){var v=o[f];if(v!=null)switch(f){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:tt(n,i,f,v,o,null)}}d&&tt(n,i,"srcSet",o.srcSet,o,null),u&&tt(n,i,"src",o.src,o,null);return;case"input":Pe("invalid",n);var T=f=v=d=null,O=null,H=null;for(u in o)if(o.hasOwnProperty(u)){var J=o[u];if(J!=null)switch(u){case"name":d=J;break;case"type":v=J;break;case"checked":O=J;break;case"defaultChecked":H=J;break;case"value":f=J;break;case"defaultValue":T=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,i));break;default:tt(n,i,u,J,o,null)}}Fu(n,f,T,O,H,v,d,!1);return;case"select":Pe("invalid",n),u=v=f=null;for(d in o)if(o.hasOwnProperty(d)&&(T=o[d],T!=null))switch(d){case"value":f=T;break;case"defaultValue":v=T;break;case"multiple":u=T;default:tt(n,i,d,T,o,null)}i=f,o=v,n.multiple=!!u,i!=null?Tr(n,!!u,i,!1):o!=null&&Tr(n,!!u,o,!0);return;case"textarea":Pe("invalid",n),f=d=u=null;for(v in o)if(o.hasOwnProperty(v)&&(T=o[v],T!=null))switch(v){case"value":u=T;break;case"defaultValue":d=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:tt(n,i,v,T,o,null)}Sr(n,u,d,f);return;case"option":for(O in o)if(o.hasOwnProperty(O)&&(u=o[O],u!=null))switch(O){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:tt(n,i,O,u,o,null)}return;case"dialog":Pe("beforetoggle",n),Pe("toggle",n),Pe("cancel",n),Pe("close",n);break;case"iframe":case"object":Pe("load",n);break;case"video":case"audio":for(u=0;u<Pl.length;u++)Pe(Pl[u],n);break;case"image":Pe("error",n),Pe("load",n);break;case"details":Pe("toggle",n);break;case"embed":case"source":case"link":Pe("error",n),Pe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(u=o[H],u!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:tt(n,i,H,u,o,null)}return;default:if(wa(i)){for(J in o)o.hasOwnProperty(J)&&(u=o[J],u!==void 0&&Wf(n,i,J,u,o,void 0));return}}for(T in o)o.hasOwnProperty(T)&&(u=o[T],u!=null&&tt(n,i,T,u,o,null))}function uS(n,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,v=null,T=null,O=null,H=null,J=null;for(Q in o){var ee=o[Q];if(o.hasOwnProperty(Q)&&ee!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":O=ee;default:u.hasOwnProperty(Q)||tt(n,i,Q,null,u,ee)}}for(var $ in u){var Q=u[$];if(ee=o[$],u.hasOwnProperty($)&&(Q!=null||ee!=null))switch($){case"type":f=Q;break;case"name":d=Q;break;case"checked":H=Q;break;case"defaultChecked":J=Q;break;case"value":v=Q;break;case"defaultValue":T=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(r(137,i));break;default:Q!==ee&&tt(n,i,$,Q,u,ee)}}ba(n,v,T,O,H,J,f,d);return;case"select":Q=v=T=$=null;for(f in o)if(O=o[f],o.hasOwnProperty(f)&&O!=null)switch(f){case"value":break;case"multiple":Q=O;default:u.hasOwnProperty(f)||tt(n,i,f,null,u,O)}for(d in u)if(f=u[d],O=o[d],u.hasOwnProperty(d)&&(f!=null||O!=null))switch(d){case"value":$=f;break;case"defaultValue":T=f;break;case"multiple":v=f;default:f!==O&&tt(n,i,d,f,u,O)}i=T,o=v,u=Q,$!=null?Tr(n,!!o,$,!1):!!u!=!!o&&(i!=null?Tr(n,!!o,i,!0):Tr(n,!!o,o?[]:"",!1));return;case"textarea":Q=$=null;for(T in o)if(d=o[T],o.hasOwnProperty(T)&&d!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:tt(n,i,T,null,u,d)}for(v in u)if(d=u[v],f=o[v],u.hasOwnProperty(v)&&(d!=null||f!=null))switch(v){case"value":$=d;break;case"defaultValue":Q=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==f&&tt(n,i,v,d,u,f)}Gu(n,$,Q);return;case"option":for(var de in o)if($=o[de],o.hasOwnProperty(de)&&$!=null&&!u.hasOwnProperty(de))switch(de){case"selected":n.selected=!1;break;default:tt(n,i,de,null,u,$)}for(O in u)if($=u[O],Q=o[O],u.hasOwnProperty(O)&&$!==Q&&($!=null||Q!=null))switch(O){case"selected":n.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:tt(n,i,O,$,u,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in o)$=o[be],o.hasOwnProperty(be)&&$!=null&&!u.hasOwnProperty(be)&&tt(n,i,be,null,u,$);for(H in u)if($=u[H],Q=o[H],u.hasOwnProperty(H)&&$!==Q&&($!=null||Q!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,i));break;default:tt(n,i,H,$,u,Q)}return;default:if(wa(i)){for(var nt in o)$=o[nt],o.hasOwnProperty(nt)&&$!==void 0&&!u.hasOwnProperty(nt)&&Wf(n,i,nt,void 0,u,$);for(J in u)$=u[J],Q=o[J],!u.hasOwnProperty(J)||$===Q||$===void 0&&Q===void 0||Wf(n,i,J,$,u,Q);return}}for(var z in o)$=o[z],o.hasOwnProperty(z)&&$!=null&&!u.hasOwnProperty(z)&&tt(n,i,z,null,u,$);for(ee in u)$=u[ee],Q=o[ee],!u.hasOwnProperty(ee)||$===Q||$==null&&Q==null||tt(n,i,ee,$,u,Q)}function _v(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var d=o[u],f=d.transferSize,v=d.initiatorType,T=d.duration;if(f&&T&&_v(v)){for(v=0,T=d.responseEnd,u+=1;u<o.length;u++){var O=o[u],H=O.startTime;if(H>T)break;var J=O.transferSize,ee=O.initiatorType;J&&_v(ee)&&(O=O.responseEnd,v+=J*(O<T?1:(T-H)/(O-H)))}if(--u,i+=8*(f+v)/(d.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Zf=null,em=null;function Yc(n){return n.nodeType===9?n:n.ownerDocument}function vv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bv(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function tm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var nm=null;function hS(){var n=window.event;return n&&n.type==="popstate"?n===nm?!1:(nm=n,!0):(nm=null,!1)}var wv=typeof setTimeout=="function"?setTimeout:void 0,dS=typeof clearTimeout=="function"?clearTimeout:void 0,Ev=typeof Promise=="function"?Promise:void 0,fS=typeof queueMicrotask=="function"?queueMicrotask:typeof Ev<"u"?function(n){return Ev.resolve(null).then(n).catch(mS)}:wv;function mS(n){setTimeout(function(){throw n})}function Kr(n){return n==="head"}function Tv(n,i){var o=i,u=0;do{var d=o.nextSibling;if(n.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(d),no(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Ul(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Ul(o);for(var f=o.firstChild;f;){var v=f.nextSibling,T=f.nodeName;f[ws]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&f.rel.toLowerCase()==="stylesheet"||o.removeChild(f),f=v}}else o==="body"&&Ul(n.ownerDocument.body);o=d}while(o);no(i)}function Sv(n,i){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function sm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":sm(o),_a(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function gS(n,i,o,u){for(;n.nodeType===1;){var d=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[ws])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(f=n.getAttribute("rel"),f==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(f!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(f=n.getAttribute("src"),(f!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===f)return n}else return n;if(n=Yn(n.nextSibling),n===null)break}return null}function pS(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Yn(n.nextSibling),n===null))return null;return n}function Av(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Yn(n.nextSibling),n===null))return null;return n}function rm(n){return n.data==="$?"||n.data==="$~"}function im(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function yS(n,i){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Yn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var am=null;function xv(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(i===0)return Yn(n.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}n=n.nextSibling}return null}function Rv(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return n;i--}else o!=="/$"&&o!=="/&"||i++}n=n.previousSibling}return null}function Cv(n,i,o){switch(i=Yc(o),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Ul(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);_a(n)}var Jn=new Map,Iv=new Set;function Jc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var cr=ue.d;ue.d={f:_S,r:vS,D:bS,C:wS,L:ES,m:TS,X:AS,S:SS,M:xS};function _S(){var n=cr.f(),i=Bc();return n||i}function vS(n){var i=Ln(n);i!==null&&i.tag===5&&i.type==="form"?Gy(i):cr.r(n)}var Za=typeof document>"u"?null:document;function Nv(n,i,o){var u=Za;if(u&&typeof i=="string"&&i){var d=yn(i);d='link[rel="'+n+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),Iv.has(d)||(Iv.add(d),n={rel:n,crossOrigin:o,href:i},u.querySelector(d)===null&&(i=u.createElement("link"),en(i,"link",n),It(i),u.head.appendChild(i)))}}function bS(n){cr.D(n),Nv("dns-prefetch",n,null)}function wS(n,i){cr.C(n,i),Nv("preconnect",n,i)}function ES(n,i,o){cr.L(n,i,o);var u=Za;if(u&&n&&i){var d='link[rel="preload"][as="'+yn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+yn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+yn(o.imageSizes)+'"]')):d+='[href="'+yn(n)+'"]';var f=d;switch(i){case"style":f=eo(n);break;case"script":f=to(n)}Jn.has(f)||(n=E({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),Jn.set(f,n),u.querySelector(d)!==null||i==="style"&&u.querySelector(Ll(f))||i==="script"&&u.querySelector(zl(f))||(i=u.createElement("link"),en(i,"link",n),It(i),u.head.appendChild(i)))}}function TS(n,i){cr.m(n,i);var o=Za;if(o&&n){var u=i&&typeof i.as=="string"?i.as:"script",d='link[rel="modulepreload"][as="'+yn(u)+'"][href="'+yn(n)+'"]',f=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=to(n)}if(!Jn.has(f)&&(n=E({rel:"modulepreload",href:n},i),Jn.set(f,n),o.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(zl(f)))return}u=o.createElement("link"),en(u,"link",n),It(u),o.head.appendChild(u)}}}function SS(n,i,o){cr.S(n,i,o);var u=Za;if(u&&n){var d=Ts(u).hoistableStyles,f=eo(n);i=i||"default";var v=d.get(f);if(!v){var T={loading:0,preload:null};if(v=u.querySelector(Ll(f)))T.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":i},o),(o=Jn.get(f))&&om(n,o);var O=v=u.createElement("link");It(O),en(O,"link",n),O._p=new Promise(function(H,J){O.onload=H,O.onerror=J}),O.addEventListener("load",function(){T.loading|=1}),O.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Xc(v,i,u)}v={type:"stylesheet",instance:v,count:1,state:T},d.set(f,v)}}}function AS(n,i){cr.X(n,i);var o=Za;if(o&&n){var u=Ts(o).hoistableScripts,d=to(n),f=u.get(d);f||(f=o.querySelector(zl(d)),f||(n=E({src:n,async:!0},i),(i=Jn.get(d))&&lm(n,i),f=o.createElement("script"),It(f),en(f,"link",n),o.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},u.set(d,f))}}function xS(n,i){cr.M(n,i);var o=Za;if(o&&n){var u=Ts(o).hoistableScripts,d=to(n),f=u.get(d);f||(f=o.querySelector(zl(d)),f||(n=E({src:n,async:!0,type:"module"},i),(i=Jn.get(d))&&lm(n,i),f=o.createElement("script"),It(f),en(f,"link",n),o.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},u.set(d,f))}}function Ov(n,i,o,u){var d=(d=Ae.current)?Jc(d):null;if(!d)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=eo(o.href),o=Ts(d).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=eo(o.href);var f=Ts(d).hoistableStyles,v=f.get(n);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(n,v),(f=d.querySelector(Ll(n)))&&!f._p&&(v.instance=f,v.state.loading=5),Jn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Jn.set(n,o),f||RS(d,n,o,v.state))),i&&u===null)throw Error(r(528,""));return v}if(i&&u!==null)throw Error(r(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=to(o),o=Ts(d).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function eo(n){return'href="'+yn(n)+'"'}function Ll(n){return'link[rel="stylesheet"]['+n+"]"}function kv(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function RS(n,i,o,u){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=n.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),en(i,"link",o),It(i),n.head.appendChild(i))}function to(n){return'[src="'+yn(n)+'"]'}function zl(n){return"script[async]"+n}function jv(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=n.querySelector('style[data-href~="'+yn(o.href)+'"]');if(u)return i.instance=u,It(u),u;var d=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),It(u),en(u,"style",d),Xc(u,o.precedence,n),i.instance=u;case"stylesheet":d=eo(o.href);var f=n.querySelector(Ll(d));if(f)return i.state.loading|=4,i.instance=f,It(f),f;u=kv(o),(d=Jn.get(d))&&om(u,d),f=(n.ownerDocument||n).createElement("link"),It(f);var v=f;return v._p=new Promise(function(T,O){v.onload=T,v.onerror=O}),en(f,"link",u),i.state.loading|=4,Xc(f,o.precedence,n),i.instance=f;case"script":return f=to(o.src),(d=n.querySelector(zl(f)))?(i.instance=d,It(d),d):(u=o,(d=Jn.get(f))&&(u=E({},o),lm(u,d)),n=n.ownerDocument||n,d=n.createElement("script"),It(d),en(d,"link",u),n.head.appendChild(d),i.instance=d);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Xc(u,o.precedence,n));return i.instance}function Xc(n,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,f=d,v=0;v<u.length;v++){var T=u[v];if(T.dataset.precedence===i)f=T;else if(f!==d)break}f?f.parentNode.insertBefore(n,f.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function om(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function lm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Wc=null;function Dv(n,i,o){if(Wc===null){var u=new Map,d=Wc=new Map;d.set(o,u)}else d=Wc,u=d.get(o),u||(u=new Map,d.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),d=0;d<o.length;d++){var f=o[d];if(!(f[ws]||f[Ct]||n==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(i)||"";v=n+v;var T=u.get(v);T?T.push(f):u.set(v,[f])}}return u}function Mv(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function CS(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Pv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function IS(n,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var d=eo(u.href),f=i.querySelector(Ll(d));if(f){i=f._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Zc.bind(n),i.then(n,n)),o.state.loading|=4,o.instance=f,It(f);return}f=i.ownerDocument||i,u=kv(u),(d=Jn.get(d))&&om(u,d),f=f.createElement("link"),It(f);var v=f;v._p=new Promise(function(T,O){v.onload=T,v.onerror=O}),en(f,"link",u),o.instance=f}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Zc.bind(n),i.addEventListener("load",o),i.addEventListener("error",o))}}var um=0;function NS(n,i){return n.stylesheets&&n.count===0&&th(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&th(n,n.stylesheets),n.unsuspend){var f=n.unsuspend;n.unsuspend=null,f()}},6e4+i);0<n.imgBytes&&um===0&&(um=62500*cS());var d=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&th(n,n.stylesheets),n.unsuspend)){var f=n.unsuspend;n.unsuspend=null,f()}},(n.imgBytes>um?50:800)+i);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(d)}}:null}function Zc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)th(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var eh=null;function th(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,eh=new Map,i.forEach(OS,n),eh=null,Zc.call(n))}function OS(n,i){if(!(i.state.loading&4)){var o=eh.get(n);if(o)var u=o.get(null);else{o=new Map,eh.set(n,o);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var v=d[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),u=v)}u&&o.set(null,u)}d=i.instance,v=d.getAttribute("data-precedence"),f=o.get(v)||u,f===u&&o.set(null,d),o.set(v,d),this.count++,u=Zc.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),f?f.parentNode.insertBefore(d,f.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),i.state.loading|=4}}var Bl={$$typeof:F,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function kS(n,i,o,u,d,f,v,T,O){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vs(0),this.hiddenUpdates=vs(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function Vv(n,i,o,u,d,f,v,T,O,H,J,ee){return n=new kS(n,i,o,v,O,H,J,ee,T),i=1,f===!0&&(i|=24),f=Cn(3,null,null,i),n.current=f,f.stateNode=n,i=Bd(),i.refCount++,n.pooledCache=i,i.refCount++,f.memoizedState={element:u,isDehydrated:o,cache:i},Fd(f),n}function Uv(n){return n?(n=ka,n):ka}function Lv(n,i,o,u,d,f){d=Uv(d),u.context===null?u.context=d:u.pendingContext=d,u=Pr(i),u.payload={element:o},f=f===void 0?null:f,f!==null&&(u.callback=f),o=Vr(n,u,i),o!==null&&(Tn(o,n,i),vl(o,n,i))}function zv(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function cm(n,i){zv(n,i),(n=n.alternate)&&zv(n,i)}function Bv(n){if(n.tag===13||n.tag===31){var i=Li(n,67108864);i!==null&&Tn(i,n,67108864),cm(n,67108864)}}function qv(n){if(n.tag===13||n.tag===31){var i=jn();i=Ri(i);var o=Li(n,i);o!==null&&Tn(o,n,i),cm(n,i)}}var nh=!0;function jS(n,i,o,u){var d=Y.T;Y.T=null;var f=ue.p;try{ue.p=2,hm(n,i,o,u)}finally{ue.p=f,Y.T=d}}function DS(n,i,o,u){var d=Y.T;Y.T=null;var f=ue.p;try{ue.p=8,hm(n,i,o,u)}finally{ue.p=f,Y.T=d}}function hm(n,i,o,u){if(nh){var d=dm(u);if(d===null)Xf(n,i,u,sh,o),$v(n,u);else if(PS(d,n,i,o,u))u.stopPropagation();else if($v(n,u),i&4&&-1<MS.indexOf(n)){for(;d!==null;){var f=Ln(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=ys(f.pendingLanes);if(v!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var O=1<<31-wt(v);T.entanglements[1]|=O,v&=~O}Ps(f),(Ye&6)===0&&(Lc=dn()+500,Ml(0))}}break;case 31:case 13:T=Li(f,2),T!==null&&Tn(T,f,2),Bc(),cm(f,2)}if(f=dm(u),f===null&&Xf(n,i,u,sh,o),f===d)break;d=f}d!==null&&u.stopPropagation()}else Xf(n,i,u,null,o)}}function dm(n){return n=zn(n),fm(n)}var sh=null;function fm(n){if(sh=null,n=Es(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=c(i),n!==null)return n;n=null}else if(o===31){if(n=m(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return sh=n,null}function Hv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ti()){case $o:return 2;case Fo:return 8;case wr:case _d:return 32;case Mu:return 268435456;default:return 32}default:return 32}}var mm=!1,Qr=null,Yr=null,Jr=null,ql=new Map,Hl=new Map,Xr=[],MS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $v(n,i){switch(n){case"focusin":case"focusout":Qr=null;break;case"dragenter":case"dragleave":Yr=null;break;case"mouseover":case"mouseout":Jr=null;break;case"pointerover":case"pointerout":ql.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hl.delete(i.pointerId)}}function $l(n,i,o,u,d,f){return n===null||n.nativeEvent!==f?(n={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:f,targetContainers:[d]},i!==null&&(i=Ln(i),i!==null&&Bv(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function PS(n,i,o,u,d){switch(i){case"focusin":return Qr=$l(Qr,n,i,o,u,d),!0;case"dragenter":return Yr=$l(Yr,n,i,o,u,d),!0;case"mouseover":return Jr=$l(Jr,n,i,o,u,d),!0;case"pointerover":var f=d.pointerId;return ql.set(f,$l(ql.get(f)||null,n,i,o,u,d)),!0;case"gotpointercapture":return f=d.pointerId,Hl.set(f,$l(Hl.get(f)||null,n,i,o,u,d)),!0}return!1}function Fv(n){var i=Es(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){n.blockedOn=i,Zn(n.priority,function(){qv(o)});return}}else if(i===31){if(i=m(o),i!==null){n.blockedOn=i,Zn(n.priority,function(){qv(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function rh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=dm(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);sl=u,o.target.dispatchEvent(u),sl=null}else return i=Ln(o),i!==null&&Bv(i),n.blockedOn=o,!1;i.shift()}return!0}function Gv(n,i,o){rh(n)&&o.delete(i)}function VS(){mm=!1,Qr!==null&&rh(Qr)&&(Qr=null),Yr!==null&&rh(Yr)&&(Yr=null),Jr!==null&&rh(Jr)&&(Jr=null),ql.forEach(Gv),Hl.forEach(Gv)}function ih(n,i){n.blockedOn===i&&(n.blockedOn=null,mm||(mm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,VS)))}var ah=null;function Kv(n){ah!==n&&(ah=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){ah===n&&(ah=null);for(var i=0;i<n.length;i+=3){var o=n[i],u=n[i+1],d=n[i+2];if(typeof u!="function"){if(fm(u||o)===null)continue;break}var f=Ln(o);f!==null&&(n.splice(i,3),i-=3,df(f,{pending:!0,data:d,method:o.method,action:u},u,d))}}))}function no(n){function i(O){return ih(O,n)}Qr!==null&&ih(Qr,n),Yr!==null&&ih(Yr,n),Jr!==null&&ih(Jr,n),ql.forEach(i),Hl.forEach(i);for(var o=0;o<Xr.length;o++){var u=Xr[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Xr.length&&(o=Xr[0],o.blockedOn===null);)Fv(o),o.blockedOn===null&&Xr.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var d=o[u],f=o[u+1],v=d[$t]||null;if(typeof f=="function")v||Kv(o);else if(v){var T=null;if(f&&f.hasAttribute("formAction")){if(d=f,v=f[$t]||null)T=v.formAction;else if(fm(d)!==null)continue}else T=v.action;typeof T=="function"?o[u+1]=T:(o.splice(u,3),u-=3),Kv(o)}}}function Qv(){function n(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(v){return d=v})},focusReset:"manual",scroll:"manual"})}function i(){d!==null&&(d(),d=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,d=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),d!==null&&(d(),d=null)}}}function gm(n){this._internalRoot=n}oh.prototype.render=gm.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var o=i.current,u=jn();Lv(o,u,n,i,null,null)},oh.prototype.unmount=gm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Lv(n.current,2,null,n,null,null),Bc(),i[bs]=null}};function oh(n){this._internalRoot=n}oh.prototype.unstable_scheduleHydration=function(n){if(n){var i=Bu();n={blockedOn:null,target:n,priority:i};for(var o=0;o<Xr.length&&i!==0&&i<Xr[o].priority;o++);Xr.splice(o,0,n),o===0&&Fv(n)}};var Yv=e.version;if(Yv!=="19.2.0")throw Error(r(527,Yv,"19.2.0"));ue.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=p(i),n=n!==null?b(n):null,n=n===null?null:n.stateNode,n};var US={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lh.isDisabled&&lh.supportsFiber)try{Xn=lh.inject(US),Yt=lh}catch{}}return Gl.createRoot=function(n,i){if(!a(n))throw Error(r(299));var o=!1,u="",d=n_,f=s_,v=r_;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=Vv(n,1,!1,null,null,o,u,null,d,f,v,Qv),n[bs]=i.current,Jf(n),new gm(i)},Gl.hydrateRoot=function(n,i,o){if(!a(n))throw Error(r(299));var u=!1,d="",f=n_,v=s_,T=r_,O=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(f=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.formState!==void 0&&(O=o.formState)),i=Vv(n,1,!0,i,o??null,u,d,O,f,v,T,Qv),i.context=Uv(null),o=i.current,u=jn(),u=Ri(u),d=Pr(u),d.callback=null,Vr(o,d,u),o=u,i.current.lanes=o,Ai(i,o),Ps(i),n[bs]=i.current,Jf(n),new oh(i)},Gl.version="19.2.0",Gl}var i0;function XS(){if(i0)return _m.exports;i0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),_m.exports=JS(),_m.exports}var WS=XS();const ZS=Mg(WS);var Fm=function(s,e){return Fm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])},Fm(s,e)};function hw(s,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Fm(s,e);function t(){this.constructor=s}s.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Dh=function(){return Dh=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Dh.apply(this,arguments)};function Do(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(s);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(s,r[a])&&(t[r[a]]=s[r[a]]);return t}function dw(s,e,t,r){var a=arguments.length,l=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(s,e,t,r);else for(var m=s.length-1;m>=0;m--)(c=s[m])&&(l=(a<3?c(l):a>3?c(e,t,l):c(e,t))||l);return a>3&&l&&Object.defineProperty(e,t,l),l}function fw(s,e){return function(t,r){e(t,r,s)}}function mw(s,e,t,r,a,l){function c(K){if(K!==void 0&&typeof K!="function")throw new TypeError("Function expected");return K}for(var m=r.kind,g=m==="getter"?"get":m==="setter"?"set":"value",p=!e&&s?r.static?s:s.prototype:null,b=e||(p?Object.getOwnPropertyDescriptor(p,r.name):{}),E,x=!1,A=t.length-1;A>=0;A--){var k={};for(var D in r)k[D]=D==="access"?{}:r[D];for(var D in r.access)k.access[D]=r.access[D];k.addInitializer=function(K){if(x)throw new TypeError("Cannot add initializers after decoration has completed");l.push(c(K||null))};var U=(0,t[A])(m==="accessor"?{get:b.get,set:b.set}:b[g],k);if(m==="accessor"){if(U===void 0)continue;if(U===null||typeof U!="object")throw new TypeError("Object expected");(E=c(U.get))&&(b.get=E),(E=c(U.set))&&(b.set=E),(E=c(U.init))&&a.unshift(E)}else(E=c(U))&&(m==="field"?a.unshift(E):b[g]=E)}p&&Object.defineProperty(p,r.name,b),x=!0}function gw(s,e,t){for(var r=arguments.length>2,a=0;a<e.length;a++)t=r?e[a].call(s,t):e[a].call(s);return r?t:void 0}function pw(s){return typeof s=="symbol"?s:"".concat(s)}function yw(s,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(s,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function _w(s,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(s,e)}function fe(s,e,t,r){function a(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function m(b){try{p(r.next(b))}catch(E){c(E)}}function g(b){try{p(r.throw(b))}catch(E){c(E)}}function p(b){b.done?l(b.value):a(b.value).then(m,g)}p((r=r.apply(s,e||[])).next())})}function vw(s,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=m(0),c.throw=m(1),c.return=m(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function m(p){return function(b){return g([p,b])}}function g(p){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(t=0)),t;)try{if(r=1,a&&(l=p[0]&2?a.return:p[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,p[1])).done)return l;switch(a=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,a=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){t.label=p[1];break}if(p[0]===6&&t.label<l[1]){t.label=l[1],l=p;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(p);break}l[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(s,t)}catch(b){p=[6,b],a=0}finally{r=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var Zh=Object.create?(function(s,e,t,r){r===void 0&&(r=t);var a=Object.getOwnPropertyDescriptor(e,t);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(s,r,a)}):(function(s,e,t,r){r===void 0&&(r=t),s[r]=e[t]});function bw(s,e){for(var t in s)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Zh(e,s,t)}function Mh(s){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&s[e],r=0;if(t)return t.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&r>=s.length&&(s=void 0),{value:s&&s[r++],done:!s}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vg(s,e){var t=typeof Symbol=="function"&&s[Symbol.iterator];if(!t)return s;var r=t.call(s),a,l=[],c;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)l.push(a.value)}catch(m){c={error:m}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(c)throw c.error}}return l}function ww(){for(var s=[],e=0;e<arguments.length;e++)s=s.concat(Vg(arguments[e]));return s}function Ew(){for(var s=0,e=0,t=arguments.length;e<t;e++)s+=arguments[e].length;for(var r=Array(s),a=0,e=0;e<t;e++)for(var l=arguments[e],c=0,m=l.length;c<m;c++,a++)r[a]=l[c];return r}function Tw(s,e,t){if(t||arguments.length===2)for(var r=0,a=e.length,l;r<a;r++)(l||!(r in e))&&(l||(l=Array.prototype.slice.call(e,0,r)),l[r]=e[r]);return s.concat(l||Array.prototype.slice.call(e))}function To(s){return this instanceof To?(this.v=s,this):new To(s)}function Sw(s,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(s,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),m("next"),m("throw"),m("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(A){return function(k){return Promise.resolve(k).then(A,E)}}function m(A,k){r[A]&&(a[A]=function(D){return new Promise(function(U,K){l.push([A,D,U,K])>1||g(A,D)})},k&&(a[A]=k(a[A])))}function g(A,k){try{p(r[A](k))}catch(D){x(l[0][3],D)}}function p(A){A.value instanceof To?Promise.resolve(A.value.v).then(b,E):x(l[0][2],A)}function b(A){g("next",A)}function E(A){g("throw",A)}function x(A,k){A(k),l.shift(),l.length&&g(l[0][0],l[0][1])}}function Aw(s){var e,t;return e={},r("next"),r("throw",function(a){throw a}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(a,l){e[a]=s[a]?function(c){return(t=!t)?{value:To(s[a](c)),done:!1}:l?l(c):c}:l}}function xw(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=s[Symbol.asyncIterator],t;return e?e.call(s):(s=typeof Mh=="function"?Mh(s):s[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(l){t[l]=s[l]&&function(c){return new Promise(function(m,g){c=s[l](c),a(m,g,c.done,c.value)})}}function a(l,c,m,g){Promise.resolve(g).then(function(p){l({value:p,done:m})},c)}}function Rw(s,e){return Object.defineProperty?Object.defineProperty(s,"raw",{value:e}):s.raw=e,s}var eA=Object.create?(function(s,e){Object.defineProperty(s,"default",{enumerable:!0,value:e})}):function(s,e){s.default=e},Gm=function(s){return Gm=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},Gm(s)};function Cw(s){if(s&&s.__esModule)return s;var e={};if(s!=null)for(var t=Gm(s),r=0;r<t.length;r++)t[r]!=="default"&&Zh(e,s,t[r]);return eA(e,s),e}function Iw(s){return s&&s.__esModule?s:{default:s}}function Nw(s,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(s):r?r.value:e.get(s)}function Ow(s,e,t,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!a:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(s,t):a?a.value=t:e.set(s,t),t}function kw(s,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof s=="function"?e===s:s.has(e)}function jw(s,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,a;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],t&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(l){return Promise.reject(l)}}),s.stack.push({value:e,dispose:r,async:t})}else t&&s.stack.push({async:!0});return e}var tA=typeof SuppressedError=="function"?SuppressedError:function(s,e,t){var r=new Error(t);return r.name="SuppressedError",r.error=s,r.suppressed=e,r};function Dw(s){function e(l){s.error=s.hasError?new tA(l,s.error,"An error was suppressed during disposal."):l,s.hasError=!0}var t,r=0;function a(){for(;t=s.stack.pop();)try{if(!t.async&&r===1)return r=0,s.stack.push(t),Promise.resolve().then(a);if(t.dispose){var l=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(l).then(a,function(c){return e(c),a()})}else r|=1}catch(c){e(c)}if(r===1)return s.hasError?Promise.reject(s.error):Promise.resolve();if(s.hasError)throw s.error}return a()}function Mw(s,e){return typeof s=="string"&&/^\.\.?\//.test(s)?s.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,r,a,l,c){return r?e?".jsx":".js":a&&(!l||!c)?t:a+l+"."+c.toLowerCase()+"js"}):s}const nA={__extends:hw,__assign:Dh,__rest:Do,__decorate:dw,__param:fw,__esDecorate:mw,__runInitializers:gw,__propKey:pw,__setFunctionName:yw,__metadata:_w,__awaiter:fe,__generator:vw,__createBinding:Zh,__exportStar:bw,__values:Mh,__read:Vg,__spread:ww,__spreadArrays:Ew,__spreadArray:Tw,__await:To,__asyncGenerator:Sw,__asyncDelegator:Aw,__asyncValues:xw,__makeTemplateObject:Rw,__importStar:Cw,__importDefault:Iw,__classPrivateFieldGet:Nw,__classPrivateFieldSet:Ow,__classPrivateFieldIn:kw,__addDisposableResource:jw,__disposeResources:Dw,__rewriteRelativeImportExtension:Mw},sA=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:jw,get __assign(){return Dh},__asyncDelegator:Aw,__asyncGenerator:Sw,__asyncValues:xw,__await:To,__awaiter:fe,__classPrivateFieldGet:Nw,__classPrivateFieldIn:kw,__classPrivateFieldSet:Ow,__createBinding:Zh,__decorate:dw,__disposeResources:Dw,__esDecorate:mw,__exportStar:bw,__extends:hw,__generator:vw,__importDefault:Iw,__importStar:Cw,__makeTemplateObject:Rw,__metadata:_w,__param:fw,__propKey:pw,__read:Vg,__rest:Do,__rewriteRelativeImportExtension:Mw,__runInitializers:gw,__setFunctionName:yw,__spread:ww,__spreadArray:Tw,__spreadArrays:Ew,__values:Mh,default:nA},Symbol.toStringTag,{value:"Module"})),rA=s=>s?(...e)=>s(...e):(...e)=>fetch(...e);class Ug extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class iA extends Ug{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class a0 extends Ug{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class o0 extends Ug{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Km;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Km||(Km={}));class aA{constructor(e,{headers:t={},customFetch:r,region:a=Km.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=rA(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return fe(this,arguments,void 0,function*(t,r={}){var a;let l,c;try{const{headers:m,method:g,body:p,signal:b,timeout:E}=r;let x={},{region:A}=r;A||(A=this.region);const k=new URL(`${this.url}/${t}`);A&&A!=="any"&&(x["x-region"]=A,k.searchParams.set("forceFunctionRegion",A));let D;p&&(m&&!Object.prototype.hasOwnProperty.call(m,"Content-Type")||!m)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",D=p):typeof p=="string"?(x["Content-Type"]="text/plain",D=p):typeof FormData<"u"&&p instanceof FormData?D=p:(x["Content-Type"]="application/json",D=JSON.stringify(p)):D=p;let U=b;E&&(c=new AbortController,l=setTimeout(()=>c.abort(),E),b?(U=c.signal,b.addEventListener("abort",()=>c.abort())):U=c.signal);const K=yield this.fetch(k.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),m),body:D,signal:U}).catch(W=>{throw new iA(W)}),te=K.headers.get("x-relay-error");if(te&&te==="true")throw new a0(K);if(!K.ok)throw new o0(K);let F=((a=K.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),ne;return F==="application/json"?ne=yield K.json():F==="application/octet-stream"||F==="application/pdf"?ne=yield K.blob():F==="text/event-stream"?ne=K:F==="multipart/form-data"?ne=yield K.formData():ne=yield K.text(),{data:ne,error:null,response:K}}catch(m){return{data:null,error:m,response:m instanceof o0||m instanceof a0?m.context:void 0}}finally{l&&clearTimeout(l)}})}}var on={};const Mo=BS(sA);var uh={},ch={},hh={},dh={},fh={},mh={},l0;function Pw(){if(l0)return mh;l0=1,Object.defineProperty(mh,"__esModule",{value:!0});class s extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return mh.default=s,mh}var u0;function Vw(){if(u0)return fh;u0=1,Object.defineProperty(fh,"__esModule",{value:!0});const e=Mo.__importDefault(Pw());class t{constructor(a){var l,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(c=a.isMaybeSingle)!==null&&c!==void 0?c:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let m=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var p,b,E,x;let A=null,k=null,D=null,U=g.status,K=g.statusText;if(g.ok){if(this.method!=="HEAD"){const W=await g.text();W===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?k=W:k=JSON.parse(W))}const F=(b=this.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),ne=(E=g.headers.get("content-range"))===null||E===void 0?void 0:E.split("/");F&&ne&&ne.length>1&&(D=parseInt(ne[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(A={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,D=null,U=406,K="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const F=await g.text();try{A=JSON.parse(F),Array.isArray(A)&&g.status===404&&(k=[],A=null,U=200,K="OK")}catch{g.status===404&&F===""?(U=204,K="No Content"):A={message:F}}if(A&&this.isMaybeSingle&&(!((x=A==null?void 0:A.details)===null||x===void 0)&&x.includes("0 rows"))&&(A=null,U=200,K="OK"),A&&this.shouldThrowOnError)throw new e.default(A)}return{error:A,data:k,count:D,status:U,statusText:K}});return this.shouldThrowOnError||(m=m.catch(g=>{var p,b,E,x,A,k;let D="";const U=g==null?void 0:g.cause;if(U){const K=(p=U==null?void 0:U.message)!==null&&p!==void 0?p:"",te=(b=U==null?void 0:U.code)!==null&&b!==void 0?b:"";D=`${(E=g==null?void 0:g.name)!==null&&E!==void 0?E:"FetchError"}: ${g==null?void 0:g.message}`,D+=`

Caused by: ${(x=U==null?void 0:U.name)!==null&&x!==void 0?x:"Error"}: ${K}`,te&&(D+=` (${te})`),U!=null&&U.stack&&(D+=`
${U.stack}`)}else D=(A=g==null?void 0:g.stack)!==null&&A!==void 0?A:"";return{error:{message:`${(k=g==null?void 0:g.name)!==null&&k!==void 0?k:"FetchError"}: ${g==null?void 0:g.message}`,details:D,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),m.then(a,l)}returns(){return this}overrideTypes(){return this}}return fh.default=t,fh}var c0;function Uw(){if(c0)return dh;c0=1,Object.defineProperty(dh,"__esModule",{value:!0});const e=Mo.__importDefault(Vw());class t extends e.default{select(a){let l=!1;const c=(a??"*").split("").map(m=>/\s/.test(m)&&!l?"":(m==='"'&&(l=!l),m)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:l=!0,nullsFirst:c,foreignTable:m,referencedTable:g=m}={}){const p=g?`${g}.order`:"order",b=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${b?`${b},`:""}${a}.${l?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:c=l}={}){const m=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(m,`${a}`),this}range(a,l,{foreignTable:c,referencedTable:m=c}={}){const g=typeof m>"u"?"offset":`${m}.offset`,p=typeof m>"u"?"limit":`${m}.limit`;return this.url.searchParams.set(g,`${a}`),this.url.searchParams.set(p,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:l=!1,settings:c=!1,buffers:m=!1,wal:g=!1,format:p="text"}={}){var b;const E=[a?"analyze":null,l?"verbose":null,c?"settings":null,m?"buffers":null,g?"wal":null].filter(Boolean).join("|"),x=(b=this.headers.get("Accept"))!==null&&b!==void 0?b:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${x}"; options=${E};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return dh.default=t,dh}var h0;function Lg(){if(h0)return hh;h0=1,Object.defineProperty(hh,"__esModule",{value:!0});const e=Mo.__importDefault(Uw()),t=new RegExp("[,()]");class r extends e.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}regexMatch(l,c){return this.url.searchParams.append(l,`match.${c}`),this}regexIMatch(l,c){return this.url.searchParams.append(l,`imatch.${c}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}isDistinct(l,c){return this.url.searchParams.append(l,`isdistinct.${c}`),this}in(l,c){const m=Array.from(new Set(c)).map(g=>typeof g=="string"&&t.test(g)?`"${g}"`:`${g}`).join(",");return this.url.searchParams.append(l,`in.(${m})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:m,type:g}={}){let p="";g==="plain"?p="pl":g==="phrase"?p="ph":g==="websearch"&&(p="w");const b=m===void 0?"":`(${m})`;return this.url.searchParams.append(l,`${p}fts${b}.${c}`),this}match(l){return Object.entries(l).forEach(([c,m])=>{this.url.searchParams.append(c,`eq.${m}`)}),this}not(l,c,m){return this.url.searchParams.append(l,`not.${c}.${m}`),this}or(l,{foreignTable:c,referencedTable:m=c}={}){const g=m?`${m}.or`:"or";return this.url.searchParams.append(g,`(${l})`),this}filter(l,c,m){return this.url.searchParams.append(l,`${c}.${m}`),this}}return hh.default=r,hh}var d0;function Lw(){if(d0)return ch;d0=1,Object.defineProperty(ch,"__esModule",{value:!0});const e=Mo.__importDefault(Lg());class t{constructor(a,{headers:l={},schema:c,fetch:m}){this.url=a,this.headers=new Headers(l),this.schema=c,this.fetch=m}select(a,l){const{head:c=!1,count:m}=l??{},g=c?"HEAD":"GET";let p=!1;const b=(a??"*").split("").map(E=>/\s/.test(E)&&!p?"":(E==='"'&&(p=!p),E)).join("");return this.url.searchParams.set("select",b),m&&this.headers.append("Prefer",`count=${m}`),new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:l,defaultToNull:c=!0}={}){var m;const g="POST";if(l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const p=a.reduce((b,E)=>b.concat(Object.keys(E)),[]);if(p.length>0){const b=[...new Set(p)].map(E=>`"${E}"`);this.url.searchParams.set("columns",b.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}upsert(a,{onConflict:l,ignoreDuplicates:c=!1,count:m,defaultToNull:g=!0}={}){var p;const b="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),m&&this.headers.append("Prefer",`count=${m}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const E=a.reduce((x,A)=>x.concat(Object.keys(A)),[]);if(E.length>0){const x=[...new Set(E)].map(A=>`"${A}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:b,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(a,{count:l}={}){var c;const m="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:a}={}){var l;const c="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return ch.default=t,ch}var f0;function oA(){if(f0)return uh;f0=1,Object.defineProperty(uh,"__esModule",{value:!0});const s=Mo,e=s.__importDefault(Lw()),t=s.__importDefault(Lg());class r{constructor(l,{headers:c={},schema:m,fetch:g}={}){this.url=l,this.headers=new Headers(c),this.schemaName=m,this.fetch=g}from(l){if(!l||typeof l!="string"||l.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const c=new URL(`${this.url}/${l}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new r(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,c={},{head:m=!1,get:g=!1,count:p}={}){var b;let E;const x=new URL(`${this.url}/rpc/${l}`);let A;m||g?(E=m?"HEAD":"GET",Object.entries(c).filter(([D,U])=>U!==void 0).map(([D,U])=>[D,Array.isArray(U)?`{${U.join(",")}}`:`${U}`]).forEach(([D,U])=>{x.searchParams.append(D,U)})):(E="POST",A=c);const k=new Headers(this.headers);return p&&k.set("Prefer",`count=${p}`),new t.default({method:E,url:x,headers:k,schema:this.schemaName,body:A,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}}return uh.default=r,uh}var m0;function lA(){if(m0)return on;m0=1,Object.defineProperty(on,"__esModule",{value:!0}),on.PostgrestError=on.PostgrestBuilder=on.PostgrestTransformBuilder=on.PostgrestFilterBuilder=on.PostgrestQueryBuilder=on.PostgrestClient=void 0;const s=Mo,e=s.__importDefault(oA());on.PostgrestClient=e.default;const t=s.__importDefault(Lw());on.PostgrestQueryBuilder=t.default;const r=s.__importDefault(Lg());on.PostgrestFilterBuilder=r.default;const a=s.__importDefault(Uw());on.PostgrestTransformBuilder=a.default;const l=s.__importDefault(Vw());on.PostgrestBuilder=l.default;const c=s.__importDefault(Pw());return on.PostgrestError=c.default,on.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:c.default},on}var zw=lA();const Bw=Mg(zw),uA=zS({__proto__:null,default:Bw},[zw]),{PostgrestClient:cA,PostgrestQueryBuilder:vj,PostgrestFilterBuilder:bj,PostgrestTransformBuilder:wj,PostgrestBuilder:Ej,PostgrestError:Tj}=Bw||uA;class hA{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,a=parseInt(r.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const dA="2.86.0",fA=`realtime-js/${dA}`,qw="1.0.0",mA="2.0.0",g0=qw,Qm=1e4,gA=1e3,pA=100;var na;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(na||(na={}));var Bt;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(Bt||(Bt={}));var hs;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(hs||(hs={}));var Ym;(function(s){s.websocket="websocket"})(Ym||(Ym={}));var sa;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(sa||(sa={}));class yA{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r;const a=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var t,r;const a=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:{},c=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,t,r){var a,l;const c=e.topic,m=(a=e.ref)!==null&&a!==void 0?a:"",g=(l=e.join_ref)!==null&&l!==void 0?l:"",p=e.payload.event,b=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},E=Object.keys(b).length===0?"":JSON.stringify(b);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`ref length ${m.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(E.length>255)throw new Error(`metadata length ${E.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+m.length+c.length+p.length+E.length,A=new ArrayBuffer(this.HEADER_LENGTH+x);let k=new DataView(A),D=0;k.setUint8(D++,this.KINDS.userBroadcastPush),k.setUint8(D++,g.length),k.setUint8(D++,m.length),k.setUint8(D++,c.length),k.setUint8(D++,p.length),k.setUint8(D++,E.length),k.setUint8(D++,t),Array.from(g,K=>k.setUint8(D++,K.charCodeAt(0))),Array.from(m,K=>k.setUint8(D++,K.charCodeAt(0))),Array.from(c,K=>k.setUint8(D++,K.charCodeAt(0))),Array.from(p,K=>k.setUint8(D++,K.charCodeAt(0))),Array.from(E,K=>k.setUint8(D++,K.charCodeAt(0)));var U=new Uint8Array(A.byteLength+r.byteLength);return U.set(new Uint8Array(A),0),U.set(new Uint8Array(r),A.byteLength),U.buffer}decode(e,t){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return t(r)}if(typeof e=="string"){const r=JSON.parse(e),[a,l,c,m,g]=r;return t({join_ref:a,ref:l,topic:c,event:m,payload:g})}return t({})}_binaryDecode(e){const t=new DataView(e),r=t.getUint8(0),a=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,a)}}_decodeUserBroadcast(e,t,r){const a=t.getUint8(1),l=t.getUint8(2),c=t.getUint8(3),m=t.getUint8(4);let g=this.HEADER_LENGTH+4;const p=r.decode(e.slice(g,g+a));g=g+a;const b=r.decode(e.slice(g,g+l));g=g+l;const E=r.decode(e.slice(g,g+c));g=g+c;const x=e.slice(g,e.byteLength),A=m===this.JSON_ENCODING?JSON.parse(r.decode(x)):x,k={type:this.BROADCAST_EVENT,event:b,payload:A};return c>0&&(k.meta=JSON.parse(E)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:k}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>t.includes(r)))}}class Hw{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ot;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(ot||(ot={}));const p0=(s,e,t={})=>{var r;const a=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((l,c)=>(l[c]=_A(c,s,e,a),l),{}):{}},_A=(s,e,t,r)=>{const a=e.find(m=>m.name===s),l=a==null?void 0:a.type,c=t[s];return l&&!r.includes(l)?$w(l,c):Jm(c)},$w=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return EA(e,t)}switch(s){case ot.bool:return vA(e);case ot.float4:case ot.float8:case ot.int2:case ot.int4:case ot.int8:case ot.numeric:case ot.oid:return bA(e);case ot.json:case ot.jsonb:return wA(e);case ot.timestamp:return TA(e);case ot.abstime:case ot.date:case ot.daterange:case ot.int4range:case ot.int8range:case ot.money:case ot.reltime:case ot.text:case ot.time:case ot.timestamptz:case ot.timetz:case ot.tsrange:case ot.tstzrange:return Jm(e);default:return Jm(e)}},Jm=s=>s,vA=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},bA=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},wA=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},EA=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,r=s[t];if(s[0]==="{"&&r==="}"){let l;const c=s.slice(1,t);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(m=>$w(e,m))}return s},TA=s=>typeof s=="string"?s.replace(" ","T"):s,Fw=s=>{const e=new URL(s);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Em{constructor(e,t,r={},a=Qm){this.channel=e,this.event=t,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var y0;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(y0||(y0={}));class tu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:l,onLeave:c,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=tu.syncState(this.state,a,l,c),this.pendingDiffs.forEach(g=>{this.state=tu.syncDiff(this.state,g,l,c)}),this.pendingDiffs=[],m()}),this.channel._on(r.diff,{},a=>{const{onJoin:l,onLeave:c,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=tu.syncDiff(this.state,a,l,c),m())}),this.onJoin((a,l,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:c})}),this.onLeave((a,l,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,a){const l=this.cloneDeep(e),c=this.transformState(t),m={},g={};return this.map(l,(p,b)=>{c[p]||(g[p]=b)}),this.map(c,(p,b)=>{const E=l[p];if(E){const x=b.map(U=>U.presence_ref),A=E.map(U=>U.presence_ref),k=b.filter(U=>A.indexOf(U.presence_ref)<0),D=E.filter(U=>x.indexOf(U.presence_ref)<0);k.length>0&&(m[p]=k),D.length>0&&(g[p]=D)}else m[p]=b}),this.syncDiff(l,{joins:m,leaves:g},r,a)}static syncDiff(e,t,r,a){const{joins:l,leaves:c}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(l,(m,g)=>{var p;const b=(p=e[m])!==null&&p!==void 0?p:[];if(e[m]=this.cloneDeep(g),b.length>0){const E=e[m].map(A=>A.presence_ref),x=b.filter(A=>E.indexOf(A.presence_ref)<0);e[m].unshift(...x)}r(m,b,g)}),this.map(c,(m,g)=>{let p=e[m];if(!p)return;const b=g.map(E=>E.presence_ref);p=p.filter(E=>b.indexOf(E.presence_ref)<0),e[m]=p,a(m,p,g),p.length===0&&delete e[m]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const a=e[r];return"metas"in a?t[r]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):t[r]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _0;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(_0||(_0={}));var nu;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(nu||(nu={}));var hr;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(hr||(hr={}));class zg{constructor(e,t={config:{}},r){var a,l;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Bt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Em(this,hs.join,this.params,this.timeout),this.rejoinTimer=new Hw(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Bt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Bt.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=Bt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(hs.reply,{},(c,m)=>{this._trigger(this._replyEventName(m),c)}),this.presence=new tu(this),this.broadcastEndpointURL=Fw(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Bt.closed){const{config:{broadcast:c,presence:m,private:g}}=this.params,p=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(A=>A.filter))!==null&&a!==void 0?a:[],b=!!this.bindings[nu.PRESENCE]&&this.bindings[nu.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,E={},x={broadcast:c,presence:Object.assign(Object.assign({},m),{enabled:b}),postgres_changes:p,private:g};this.socket.accessTokenValue&&(E.access_token=this.socket.accessTokenValue),this._onError(A=>e==null?void 0:e(hr.CHANNEL_ERROR,A)),this._onClose(()=>e==null?void 0:e(hr.CLOSED)),this.updateJoinPayload(Object.assign({config:x},E)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:A})=>{var k;if(this.socket.setAuth(),A===void 0){e==null||e(hr.SUBSCRIBED);return}else{const D=this.bindings.postgres_changes,U=(k=D==null?void 0:D.length)!==null&&k!==void 0?k:0,K=[];for(let te=0;te<U;te++){const F=D[te],{filter:{event:ne,schema:W,table:re,filter:C}}=F,R=A&&A[te];if(R&&R.event===ne&&R.schema===W&&R.table===re&&R.filter===C)K.push(Object.assign(Object.assign({},F),{id:R.id}));else{this.unsubscribe(),this.state=Bt.errored,e==null||e(hr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=K,e&&e(hr.SUBSCRIBED);return}}).receive("error",A=>{this.state=Bt.errored,e==null||e(hr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(A).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(hr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===Bt.joined&&e===nu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var a;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);if(m.status===202)return{success:!0};let g=m.statusText;try{const p=await m.json();g=p.error||p.message||g}catch{}return Promise.reject(new Error(g))}async send(e,t={}){var r,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=e,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=p.body)===null||a===void 0?void 0:a.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,m,g;const p=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(m=(c=this.params)===null||c===void 0?void 0:c.config)===null||m===void 0?void 0:m.broadcast)===null||g===void 0)&&g.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Bt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(hs.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new Em(this,hs.leave,{},e),r.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Bt.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const a=new AbortController,l=setTimeout(()=>a.abort(),r),c=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(l),c}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Em(this,e,t,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>pA){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var a,l;const c=e.toLocaleLowerCase(),{close:m,error:g,leave:p,join:b}=hs;if(r&&[m,g,p,b].indexOf(c)>=0&&r!==this._joinRef())return;let x=this._onMessage(c,t,r);if(t&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(A=>{var k,D,U;return((k=A.filter)===null||k===void 0?void 0:k.event)==="*"||((U=(D=A.filter)===null||D===void 0?void 0:D.event)===null||U===void 0?void 0:U.toLocaleLowerCase())===c}).map(A=>A.callback(x,r)):(l=this.bindings[c])===null||l===void 0||l.filter(A=>{var k,D,U,K,te,F;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in A){const ne=A.id,W=(k=A.filter)===null||k===void 0?void 0:k.event;return ne&&((D=t.ids)===null||D===void 0?void 0:D.includes(ne))&&(W==="*"||(W==null?void 0:W.toLocaleLowerCase())===((U=t.data)===null||U===void 0?void 0:U.type.toLocaleLowerCase()))}else{const ne=(te=(K=A==null?void 0:A.filter)===null||K===void 0?void 0:K.event)===null||te===void 0?void 0:te.toLocaleLowerCase();return ne==="*"||ne===((F=t==null?void 0:t.event)===null||F===void 0?void 0:F.toLocaleLowerCase())}else return A.type.toLocaleLowerCase()===c}).map(A=>{if(typeof x=="object"&&"ids"in x){const k=x.data,{schema:D,table:U,commit_timestamp:K,type:te,errors:F}=k;x=Object.assign(Object.assign({},{schema:D,table:U,commit_timestamp:K,eventType:te,new:{},old:{},errors:F}),this._getPayloadRecords(k))}A.callback(x,r)})}_isClosed(){return this.state===Bt.closed}_isJoined(){return this.state===Bt.joined}_isJoining(){return this.state===Bt.joining}_isLeaving(){return this.state===Bt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const a=e.toLocaleLowerCase(),l={type:a,filter:t,callback:r};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===r&&zg.isEqual(a.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(hs.close,{},e)}_onError(e){this._on(hs.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Bt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=p0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=p0(e.columns,e.old_record)),t}}const Tm=()=>{},gh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},SA=[1e3,2e3,5e3,1e4],AA=1e4,xA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class RA{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Qm,this.transport=null,this.heartbeatIntervalMs=gh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Tm,this.ref=0,this.reconnectTimer=null,this.vsn=g0,this.logger=Tm,this.conn=null,this.sendBuffer=[],this.serializer=new yA,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Ym.websocket}`,this.httpEndpoint=Fw(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=hA.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case na.connecting:return sa.Connecting;case na.open:return sa.Open;case na.closing:return sa.Closing;default:return sa.Closed}}isConnected(){return this.connectionState()===sa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===r);if(a)return a;{const l=new zg(`realtime:${e}`,t,this);return this.channels.push(l),l}}push(e){const{topic:t,event:r,payload:a,ref:l}=e,c=()=>{this.encode(e,m=>{var g;(g=this.conn)===null||g===void 0||g.send(m)})};this.log("push",`${t} ${r} (${l})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(gA,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},gh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:l,ref:c}=t,m=c?`(${c})`:"",g=l.status||"";this.log("receive",`${g} ${r} ${a} ${m}`.trim(),l),this.channels.filter(p=>p._isMember(r)).forEach(p=>p._trigger(a,l,c)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===na.open||this.conn.readyState===na.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(hs.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${r}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([xA],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const a={access_token:t,version:fA};t&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(hs.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Hw(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},gh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,a,l,c,m,g,p,b,E,x,A;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Qm,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:gh.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(m=e==null?void 0:e.heartbeatCallback)!==null&&m!==void 0?m:Tm,this.vsn=(g=e==null?void 0:e.vsn)!==null&&g!==void 0?g:g0,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:(k=>SA[k-1]||AA),this.vsn){case qw:this.encode=(b=e==null?void 0:e.encode)!==null&&b!==void 0?b:((k,D)=>D(JSON.stringify(k))),this.decode=(E=e==null?void 0:e.decode)!==null&&E!==void 0?E:((k,D)=>D(JSON.parse(k)));break;case mA:this.encode=(x=e==null?void 0:e.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(A=e==null?void 0:e.decode)!==null&&A!==void 0?A:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class ed extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ft(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class CA extends ed{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Xm extends ed{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const Bg=s=>s?(...e)=>s(...e):(...e)=>fetch(...e),IA=()=>Response,Wm=s=>{if(Array.isArray(s))return s.map(t=>Wm(t));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([t,r])=>{const a=t.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=Wm(r)}),e},NA=s=>{if(typeof s!="object"||s===null)return!1;const e=Object.getPrototypeOf(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},OA=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s),Sm=s=>{var e;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(e=s.error)===null||e===void 0?void 0:e.message)||JSON.stringify(s)},kA=(s,e,t)=>fe(void 0,void 0,void 0,function*(){const r=yield IA();s instanceof r&&!(t!=null&&t.noResolveJson)?s.json().then(a=>{const l=s.status||500,c=(a==null?void 0:a.statusCode)||l+"";e(new CA(Sm(a),l,c))}).catch(a=>{e(new Xm(Sm(a),a))}):e(new Xm(Sm(s),s))}),jA=(s,e,t,r)=>{const a={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"||!r?a:(NA(r)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(r)):a.body=r,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),t))};function Tu(s,e,t,r,a,l){return fe(this,void 0,void 0,function*(){return new Promise((c,m)=>{s(t,jA(e,r,a,l)).then(g=>{if(!g.ok)throw g;return r!=null&&r.noResolveJson?g:g.json()}).then(g=>c(g)).catch(g=>kA(g,m,r))})})}function cu(s,e,t,r){return fe(this,void 0,void 0,function*(){return Tu(s,"GET",e,t,r)})}function cs(s,e,t,r,a){return fe(this,void 0,void 0,function*(){return Tu(s,"POST",e,r,a,t)})}function Zm(s,e,t,r,a){return fe(this,void 0,void 0,function*(){return Tu(s,"PUT",e,r,a,t)})}function DA(s,e,t,r){return fe(this,void 0,void 0,function*(){return Tu(s,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function qg(s,e,t,r,a){return fe(this,void 0,void 0,function*(){return Tu(s,"DELETE",e,r,a,t)})}class MA{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return fe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ft(e))return{data:null,error:e};throw e}})}}var Gw;class PA{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Gw]="BlobDownloadBuilder",this.promise=null}asStream(){return new MA(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return fe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ft(e))return{data:null,error:e};throw e}})}}Gw=Symbol.toStringTag;const VA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},v0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class UA{constructor(e,t={},r,a){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=Bg(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,a){return fe(this,void 0,void 0,function*(){try{let l;const c=Object.assign(Object.assign({},v0),a);let m=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const g=c.metadata;typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),g&&l.append("metadata",this.encodeMetadata(g)),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),g&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(g))):(l=r,m["cache-control"]=`max-age=${c.cacheControl}`,m["content-type"]=c.contentType,g&&(m["x-metadata"]=this.toBase64(this.encodeMetadata(g))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),a!=null&&a.headers&&(m=Object.assign(Object.assign({},m),a.headers));const p=this._removeEmptyFolders(t),b=this._getFinalPath(p),E=yield(e=="PUT"?Zm:cs)(this.fetch,`${this.url}/object/${b}`,l,Object.assign({headers:m},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:p,id:E.Id,fullPath:E.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ft(l))return{data:null,error:l};throw l}})}upload(e,t,r){return fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,a){return fe(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),c=this._getFinalPath(l),m=new URL(this.url+`/object/upload/sign/${c}`);m.searchParams.set("token",t);try{let g;const p=Object.assign({upsert:v0.upsert},a),b=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&r instanceof Blob?(g=new FormData,g.append("cacheControl",p.cacheControl),g.append("",r)):typeof FormData<"u"&&r instanceof FormData?(g=r,g.append("cacheControl",p.cacheControl)):(g=r,b["cache-control"]=`max-age=${p.cacheControl}`,b["content-type"]=p.contentType);const E=yield Zm(this.fetch,m.toString(),g,{headers:b});return{data:{path:l,fullPath:E.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(ft(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(e,t){return fe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const a=Object.assign({},this.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const l=yield cs(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),c=new URL(this.url+l.url),m=c.searchParams.get("token");if(!m)throw new ed("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:m},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}})}update(e,t,r){return fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return fe(this,void 0,void 0,function*(){try{return{data:yield cs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}})}copy(e,t,r){return fe(this,void 0,void 0,function*(){try{return{data:{path:(yield cs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,r){return fe(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield cs(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const c=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,r){return fe(this,void 0,void 0,function*(){try{const a=yield cs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}})}download(e,t){const a=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),c=l?`?${l}`:"",m=this._getFinalPath(e),g=()=>cu(this.fetch,`${this.url}/${a}/${m}${c}`,{headers:this.headers,noResolveJson:!0});return new PA(g,this.shouldThrowOnError)}info(e){return fe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield cu(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Wm(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}})}exists(e){return fe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield DA(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ft(r)&&r instanceof Xm){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),a=[],l=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";l!==""&&a.push(l);const m=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",g=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});g!==""&&a.push(g);let p=a.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${r}${p}`)}}}remove(e){return fe(this,void 0,void 0,function*(){try{return{data:yield qg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}})}list(e,t,r){return fe(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},VA),t),{prefix:e||""});return{data:yield cs(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}})}listV2(e,t){return fe(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield cs(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Kw="2.86.0",Qw={"X-Client-Info":`storage-js/${Kw}`};class LA{constructor(e,t={},r,a){this.shouldThrowOnError=!1;const l=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Qw),t),this.fetch=Bg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return fe(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield cu(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}})}getBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield cu(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}})}createBucket(e){return fe(this,arguments,void 0,function*(t,r={public:!1}){try{return{data:yield cs(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}})}updateBucket(e,t){return fe(this,void 0,void 0,function*(){try{return{data:yield Zm(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}})}emptyBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield cs(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}})}deleteBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield qg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}var hu=class extends Error{constructor(s,e){var t;super(s),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function zA(s,e,t){const r=new URL(e,s);if(t)for(const[a,l]of Object.entries(t))l!==void 0&&r.searchParams.set(a,l);return r.toString()}async function BA(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function qA(s){const e=s.fetchImpl??globalThis.fetch;return{async request({method:t,path:r,query:a,body:l,headers:c}){const m=zA(s.baseUrl,r,a),g=await BA(s.auth),p=await e(m,{method:t,headers:{...l?{"Content-Type":"application/json"}:{},...g,...c},body:l?JSON.stringify(l):void 0}),b=await p.text(),E=(p.headers.get("content-type")||"").includes("application/json"),x=E&&b?JSON.parse(b):b;if(!p.ok){const A=E?x:void 0,k=A==null?void 0:A.error;throw new hu((k==null?void 0:k.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:k==null?void 0:k.type,icebergCode:k==null?void 0:k.code,details:A})}return{status:p.status,headers:p.headers,data:x}}}}function ph(s){return s.join("")}var HA=class{constructor(s,e=""){this.client=s,this.prefix=e}async listNamespaces(s){const e=s?{parent:ph(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(s,e){const t={namespace:s.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ph(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ph(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ph(s.namespace)}`}),!0}catch(e){if(e instanceof hu&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(s,e){try{return await this.createNamespace(s,e)}catch(t){if(t instanceof hu&&t.status===409)return;throw t}}};function so(s){return s.join("")}var $A=class{constructor(s,e="",t){this.client=s,this.prefix=e,this.accessDelegation=t}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${so(s.namespace)}/tables`})).data.identifiers}async createTable(s,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${so(s.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(s,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${so(s.namespace)}/tables/${s.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(s,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${so(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(s){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${so(s.namespace)}/tables/${s.name}`,headers:e})).data.metadata}async tableExists(s){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${so(s.namespace)}/tables/${s.name}`,headers:e}),!0}catch(t){if(t instanceof hu&&t.status===404)return!1;throw t}}async createTableIfNotExists(s,e){try{return await this.createTable(s,e)}catch(t){if(t instanceof hu&&t.status===409)return await this.loadTable({namespace:s.namespace,name:e.name});throw t}}},FA=class{constructor(s){var r;let e="v1";s.catalogName&&(e+=`/${s.catalogName}`);const t=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=qA({baseUrl:t,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=(r=s.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new HA(this.client,e),this.tableOps=new $A(this.client,e,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,e){return this.namespaceOps.createNamespace(s,e)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,e){return this.tableOps.createTable(s,e)}async updateTable(s,e){return this.tableOps.updateTable(s,e)}async dropTable(s,e){await this.tableOps.dropTable(s,e)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,e){return this.namespaceOps.createNamespaceIfNotExists(s,e)}async createTableIfNotExists(s,e){return this.tableOps.createTableIfNotExists(s,e)}};class GA{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Qw),t),this.fetch=Bg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield cs(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}})}listBuckets(e){return fe(this,void 0,void 0,function*(){try{const t=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&t.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&t.set("sortOrder",e.sortOrder),e!=null&&e.search&&t.set("search",e.search);const r=t.toString(),a=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield cu(this.fetch,a,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}})}deleteBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield qg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}})}from(e){if(!OA(e))throw new ed("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new FA({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>fe(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const Hg={"X-Client-Info":`storage-js/${Kw}`,"Content-Type":"application/json"};class Yw extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Mn(s){return typeof s=="object"&&s!==null&&"__isStorageVectorsError"in s}class Am extends Yw{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class KA extends Yw{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var b0;(function(s){s.InternalError="InternalError",s.S3VectorConflictException="S3VectorConflictException",s.S3VectorNotFoundException="S3VectorNotFoundException",s.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",s.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",s.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(b0||(b0={}));const $g=s=>s?(...e)=>s(...e):(...e)=>fetch(...e),QA=s=>{if(typeof s!="object"||s===null)return!1;const e=Object.getPrototypeOf(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},w0=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),YA=(s,e,t)=>fe(void 0,void 0,void 0,function*(){if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!(t!=null&&t.noResolveJson)){const a=s.status||500,l=s;if(typeof l.json=="function")l.json().then(c=>{const m=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||a+"";e(new Am(w0(c),a,m))}).catch(()=>{const c=a+"",m=l.statusText||`HTTP ${a} error`;e(new Am(m,a,c))});else{const c=a+"",m=l.statusText||`HTTP ${a} error`;e(new Am(m,a,c))}}else e(new KA(w0(s),s))}),JA=(s,e,t,r)=>{const a={method:s,headers:(e==null?void 0:e.headers)||{}};return r?(QA(r)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(r)):a.body=r,Object.assign(Object.assign({},a),t)):a};function XA(s,e,t,r,a,l){return fe(this,void 0,void 0,function*(){return new Promise((c,m)=>{s(t,JA(e,r,a,l)).then(g=>{if(!g.ok)throw g;if(r!=null&&r.noResolveJson)return g;const p=g.headers.get("content-type");return!p||!p.includes("application/json")?{}:g.json()}).then(g=>c(g)).catch(g=>YA(g,m,r))})})}function Pn(s,e,t,r,a){return fe(this,void 0,void 0,function*(){return XA(s,"POST",e,r,a,t)})}class WA{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Hg),t),this.fetch=$g(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return fe(this,void 0,void 0,function*(){try{return{data:(yield Pn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}})}getIndex(e,t){return fe(this,void 0,void 0,function*(){try{return{data:yield Pn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mn(r))return{data:null,error:r};throw r}})}listIndexes(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Pn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return fe(this,void 0,void 0,function*(){try{return{data:(yield Pn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mn(r))return{data:null,error:r};throw r}})}}class ZA{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Hg),t),this.fetch=$g(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return fe(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Pn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}})}getVectors(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Pn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}})}listVectors(e){return fe(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Pn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}})}queryVectors(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Pn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}})}deleteVectors(e){return fe(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Pn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}})}}class ex{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Hg),t),this.fetch=$g(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:(yield Pn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}})}getBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Pn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}})}listBuckets(){return fe(this,arguments,void 0,function*(e={}){try{return{data:yield Pn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:(yield Pn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}})}}class tx extends ex{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new nx(this.url,this.headers,e,this.fetch)}createBucket(e){const t=Object.create(null,{createBucket:{get:()=>super.createBucket}});return fe(this,void 0,void 0,function*(){return t.createBucket.call(this,e)})}getBucket(e){const t=Object.create(null,{getBucket:{get:()=>super.getBucket}});return fe(this,void 0,void 0,function*(){return t.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return fe(this,arguments,void 0,function*(t={}){return e.listBuckets.call(this,t)})}deleteBucket(e){const t=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return fe(this,void 0,void 0,function*(){return t.deleteBucket.call(this,e)})}}class nx extends WA{constructor(e,t,r,a){super(e,t,a),this.vectorBucketName=r}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return fe(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return fe(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return fe(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return fe(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new sx(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class sx extends ZA{constructor(e,t,r,a,l){super(e,t,l),this.vectorBucketName=r,this.indexName=a}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return fe(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return fe(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return fe(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return fe(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return fe(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class rx extends LA{constructor(e,t={},r,a){super(e,t,r,a)}from(e){return new UA(this.url,this.headers,e,this.fetch)}get vectors(){return new tx(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new GA(this.url+"/iceberg",this.headers,this.fetch)}}const ix="2.86.0";let Ql="";typeof Deno<"u"?Ql="deno":typeof document<"u"?Ql="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ql="react-native":Ql="node";const ax={"X-Client-Info":`supabase-js-${Ql}/${ix}`},ox={headers:ax},lx={schema:"public"},ux={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},cx={},hx=s=>s?(...e)=>s(...e):(...e)=>fetch(...e),dx=()=>Headers,fx=(s,e,t)=>{const r=hx(t),a=dx();return async(l,c)=>{var m;const g=(m=await e())!==null&&m!==void 0?m:s;let p=new a(c==null?void 0:c.headers);return p.has("apikey")||p.set("apikey",s),p.has("Authorization")||p.set("Authorization",`Bearer ${g}`),r(l,Object.assign(Object.assign({},c),{headers:p}))}};function mx(s){return s.endsWith("/")?s:s+"/"}function gx(s,e){var t,r;const{db:a,auth:l,realtime:c,global:m}=s,{db:g,auth:p,realtime:b,global:E}=e,x={db:Object.assign(Object.assign({},g),a),auth:Object.assign(Object.assign({},p),l),realtime:Object.assign(Object.assign({},b),c),storage:{},global:Object.assign(Object.assign(Object.assign({},E),m),{headers:Object.assign(Object.assign({},(t=E==null?void 0:E.headers)!==null&&t!==void 0?t:{}),(r=m==null?void 0:m.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return s.accessToken?x.accessToken=s.accessToken:delete x.accessToken,x}function px(s){const e=s==null?void 0:s.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(mx(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Jw="2.86.0",uo=30*1e3,eg=3,xm=eg*uo,yx="http://localhost:9999",_x="supabase.auth.token",vx={"X-Client-Info":`gotrue-js/${Jw}`},tg="X-Supabase-Api-Version",Xw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},bx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,wx=600*1e3;class du extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function ge(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class Ex extends du{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function Tx(s){return ge(s)&&s.name==="AuthApiError"}class ra extends du{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class wi extends du{constructor(e,t,r,a){super(e,r,a),this.name=t,this.status=r}}class Dn extends wi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Sx(s){return ge(s)&&s.name==="AuthSessionMissingError"}class ro extends wi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class yh extends wi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class _h extends wi{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ax(s){return ge(s)&&s.name==="AuthImplicitGrantRedirectError"}class E0 extends wi{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ng extends wi{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Rm(s){return ge(s)&&s.name==="AuthRetryableFetchError"}class T0 extends wi{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class sg extends wi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ph="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),S0=` 	
\r=`.split(""),xx=(()=>{const s=new Array(128);for(let e=0;e<s.length;e+=1)s[e]=-1;for(let e=0;e<S0.length;e+=1)s[S0[e].charCodeAt(0)]=-2;for(let e=0;e<Ph.length;e+=1)s[Ph[e].charCodeAt(0)]=e;return s})();function A0(s,e,t){if(s!==null)for(e.queue=e.queue<<8|s,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Ph[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Ph[r]),e.queuedBits-=6}}function Ww(s,e,t){const r=xx[s];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function x0(s){const e=[],t=c=>{e.push(String.fromCodePoint(c))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=c=>{Ix(c,r,t)};for(let c=0;c<s.length;c+=1)Ww(s.charCodeAt(c),a,l);return e.join("")}function Rx(s,e){if(s<=127){e(s);return}else if(s<=2047){e(192|s>>6),e(128|s&63);return}else if(s<=65535){e(224|s>>12),e(128|s>>6&63),e(128|s&63);return}else if(s<=1114111){e(240|s>>18),e(128|s>>12&63),e(128|s>>6&63),e(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function Cx(s,e){for(let t=0;t<s.length;t+=1){let r=s.charCodeAt(t);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(s.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}Rx(r,e)}}function Ix(s,e,t){if(e.utf8seq===0){if(s<=127){t(s);return}for(let r=1;r<6;r+=1)if((s>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=s&31;else if(e.utf8seq===3)e.codepoint=s&15;else if(e.utf8seq===4)e.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|s&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function yo(s){const e=[],t={queue:0,queuedBits:0},r=a=>{e.push(a)};for(let a=0;a<s.length;a+=1)Ww(s.charCodeAt(a),t,r);return new Uint8Array(e)}function Nx(s){const e=[];return Cx(s,t=>e.push(t)),new Uint8Array(e)}function ia(s){const e=[],t={queue:0,queuedBits:0},r=a=>{e.push(a)};return s.forEach(a=>A0(a,t,r)),A0(null,t,r),e.join("")}function Ox(s){return Math.round(Date.now()/1e3)+s}function kx(){return Symbol("auth-callback")}const tn=()=>typeof window<"u"&&typeof document<"u",Wi={tested:!1,writable:!1},Zw=()=>{if(!tn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Wi.tested)return Wi.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Wi.tested=!0,Wi.writable=!0}catch{Wi.tested=!0,Wi.writable=!1}return Wi.writable};function jx(s){const e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return t.searchParams.forEach((r,a)=>{e[a]=r}),e}const eE=s=>s?(...e)=>s(...e):(...e)=>fetch(...e),Dx=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",co=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},Zi=async(s,e)=>{const t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Zr=async(s,e)=>{await s.removeItem(e)};let tE=class nE{constructor(){this.promise=new nE.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}};tE.promiseConstructor=Promise;function Cm(s){const e=s.split(".");if(e.length!==3)throw new sg("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!bx.test(e[r]))throw new sg("JWT not in base64url format");return{header:JSON.parse(x0(e[0])),payload:JSON.parse(x0(e[1])),signature:yo(e[2]),raw:{header:e[0],payload:e[1]}}}async function Mx(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function Px(s,e){return new Promise((r,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await s(l);if(!e(l,null,c)){r(c);return}}catch(c){if(!e(l,c)){a(c);return}}})()})}function Vx(s){return("0"+s.toString(16)).substr(-2)}function Ux(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let a="";for(let l=0;l<56;l++)a+=t.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(e),Array.from(e,Vx).join("")}async function Lx(s){const t=new TextEncoder().encode(s),r=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(r);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function zx(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const t=await Lx(s);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function io(s,e,t=!1){const r=Ux();let a=r;t&&(a+="/PASSWORD_RECOVERY"),await co(s,`${e}-code-verifier`,a);const l=await zx(r);return[l,r===l?"plain":"s256"]}const Bx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function qx(s){const e=s.headers.get(tg);if(!e||!e.match(Bx))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Hx(s){if(!s)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(s<=e)throw new Error("JWT has expired")}function $x(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Fx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ao(s){if(!Fx.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Im(){const s={};return new Proxy(s,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Gx(s,e){return new Proxy(s,{get:(t,r,a)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const l=r.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,r,a)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,r,a)}})}function R0(s){return JSON.parse(JSON.stringify(s))}const ea=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Kx=[502,503,504];async function C0(s){var e;if(!Dx(s))throw new ng(ea(s),0);if(Kx.includes(s.status))throw new ng(ea(s),s.status);let t;try{t=await s.json()}catch(l){throw new ra(ea(l),l)}let r;const a=qx(s);if(a&&a.getTime()>=Xw["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new T0(ea(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Dn}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new T0(ea(t),s.status,t.weak_password.reasons);throw new Ex(ea(t),s.status||500,r)}const Qx=(s,e,t,r)=>{const a={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),t))};async function Te(s,e,t,r){var a;const l=Object.assign({},r==null?void 0:r.headers);l[tg]||(l[tg]=Xw["2024-01-01"].name),r!=null&&r.jwt&&(l.Authorization=`Bearer ${r.jwt}`);const c=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(c.redirect_to=r.redirectTo);const m=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",g=await Yx(s,e,t+m,{headers:l,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(g):{data:Object.assign({},g),error:null}}async function Yx(s,e,t,r,a,l){const c=Qx(e,r,a,l);let m;try{m=await s(t,Object.assign({},c))}catch(g){throw console.error(g),new ng(ea(g),0)}if(m.ok||await C0(m),r!=null&&r.noResolveJson)return m;try{return await m.json()}catch(g){await C0(g)}}function us(s){var e;let t=null;Wx(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=Ox(s.expires_in)));const r=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:r},error:null}}function I0(s){const e=us(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=s.weak_password),e}function ti(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function Jx(s){return{data:s,error:null}}function Xx(s){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:a,verification_type:l}=s,c=Do(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:e,email_otp:t,hashed_token:r,redirect_to:a,verification_type:l},g=Object.assign({},c);return{data:{properties:m,user:g},error:null}}function N0(s){return s}function Wx(s){return s.access_token&&s.refresh_token&&s.expires_in}const Nm=["global","local","others"];class Zx{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=eE(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Nm[0]){if(Nm.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Nm.join(", ")}`);try{return await Te(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Te(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ti})}catch(r){if(ge(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Do(e,["options"]),a=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await Te(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Xx,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ge(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Te(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ti})}catch(t){if(ge(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,a,l,c,m,g;try{const p={nextPage:null,lastPage:0,total:0},b=await Te(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:N0});if(b.error)throw b.error;const E=await b.json(),x=(c=b.headers.get("x-total-count"))!==null&&c!==void 0?c:0,A=(g=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&g!==void 0?g:[];return A.length>0&&(A.forEach(k=>{const D=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),U=JSON.parse(k.split(";")[1].split("=")[1]);p[`${U}Page`]=D}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},E),p),error:null}}catch(p){if(ge(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){ao(e);try{return await Te(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ti})}catch(t){if(ge(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){ao(e);try{return await Te(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ti})}catch(r){if(ge(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){ao(e);try{return await Te(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ti})}catch(r){if(ge(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){ao(e.userId);try{const{data:t,error:r}=await Te(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:r}}catch(t){if(ge(t))return{data:null,error:t};throw t}}async _deleteFactor(e){ao(e.userId),ao(e.id);try{return{data:await Te(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ge(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,a,l,c,m,g;try{const p={nextPage:null,lastPage:0,total:0},b=await Te(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:N0});if(b.error)throw b.error;const E=await b.json(),x=(c=b.headers.get("x-total-count"))!==null&&c!==void 0?c:0,A=(g=(m=b.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&g!==void 0?g:[];return A.length>0&&(A.forEach(k=>{const D=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),U=JSON.parse(k.split(";")[1].split("=")[1]);p[`${U}Page`]=D}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},E),p),error:null}}catch(p){if(ge(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await Te(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ge(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Te(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ge(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Te(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ge(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Te(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(ge(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Te(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ge(t))return{data:null,error:t};throw t}}}function O0(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}const oo={debug:!!(globalThis&&Zw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class sE extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class e2 extends sE{}async function t2(s,e,t){oo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),oo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){oo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,a.name);try{return await t()}finally{oo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,a.name)}}else{if(e===0)throw oo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new e2(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(oo.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function n2(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function rE(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function s2(s){return parseInt(s,16)}function r2(s){const e=new TextEncoder().encode(s);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function i2(s){var e;const{chainId:t,domain:r,expirationTime:a,issuedAt:l=new Date,nonce:c,notBefore:m,requestId:g,resources:p,scheme:b,uri:E,version:x}=s;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!E)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((e=s.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const A=rE(s.address),k=b?`${b}://${r}`:r,D=s.statement?`${s.statement}
`:"",U=`${k} wants you to sign in with your Ethereum account:
${A}

${D}`;let K=`URI: ${E}
Version: ${x}
Chain ID: ${t}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(a&&(K+=`
Expiration Time: ${a.toISOString()}`),m&&(K+=`
Not Before: ${m.toISOString()}`),g&&(K+=`
Request ID: ${g}`),p){let te=`
Resources:`;for(const F of p){if(!F||typeof F!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${F}`);te+=`
- ${F}`}K+=te}return`${U}
${K}`}class Pt extends Error{constructor({message:e,code:t,cause:r,name:a}){var l;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(l=a??(r instanceof Error?r.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=t}}class Vh extends Pt{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function a2({error:s,options:e}){var t,r,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Pt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((t=l.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Pt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(e.mediation==="conditional"&&((r=l.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Pt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Pt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new Pt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new Pt({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return l.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new Pt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new Pt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const c=window.location.hostname;if(iE(c)){if(l.rp.id!==c)return new Pt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new Pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Pt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new Pt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new Pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function o2({error:s,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Pt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new Pt({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const r=window.location.hostname;if(iE(r)){if(t.rpId!==r)return new Pt({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new Pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new Pt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new Pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class l2{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const u2=new l2;function c2(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:e,user:t,excludeCredentials:r}=s,a=Do(s,["challenge","user","excludeCredentials"]),l=yo(e).buffer,c=Object.assign(Object.assign({},t),{id:yo(t.id).buffer}),m=Object.assign(Object.assign({},a),{challenge:l,user:c});if(r&&r.length>0){m.excludeCredentials=new Array(r.length);for(let g=0;g<r.length;g++){const p=r[g];m.excludeCredentials[g]=Object.assign(Object.assign({},p),{id:yo(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return m}function h2(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:e,allowCredentials:t}=s,r=Do(s,["challenge","allowCredentials"]),a=yo(e).buffer,l=Object.assign(Object.assign({},r),{challenge:a});if(t&&t.length>0){l.allowCredentials=new Array(t.length);for(let c=0;c<t.length;c++){const m=t[c];l.allowCredentials[c]=Object.assign(Object.assign({},m),{id:yo(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return l}function d2(s){var e;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const t=s;return{id:s.id,rawId:s.id,response:{attestationObject:ia(new Uint8Array(s.response.attestationObject)),clientDataJSON:ia(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function f2(s){var e;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const t=s,r=s.getClientExtensionResults(),a=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:ia(new Uint8Array(a.authenticatorData)),clientDataJSON:ia(new Uint8Array(a.clientDataJSON)),signature:ia(new Uint8Array(a.signature)),userHandle:a.userHandle?ia(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function iE(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function k0(){var s,e;return!!(tn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function m2(s){try{const e=await navigator.credentials.create(s);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Vh("Browser returned unexpected credential type",e)}:{data:null,error:new Vh("Empty credential response",e)}}catch(e){return{data:null,error:a2({error:e,options:s})}}}async function g2(s){try{const e=await navigator.credentials.get(s);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Vh("Browser returned unexpected credential type",e)}:{data:null,error:new Vh("Empty credential response",e)}}catch(e){return{data:null,error:o2({error:e,options:s})}}}const p2={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},y2={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Uh(...s){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),t=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),r={};for(const a of s)if(a)for(const l in a){const c=a[l];if(c!==void 0)if(Array.isArray(c))r[l]=c;else if(t(c))r[l]=c;else if(e(c)){const m=r[l];e(m)?r[l]=Uh(m,c):r[l]=Uh(c)}else r[l]=c}return r}function _2(s,e){return Uh(p2,s,e||{})}function v2(s,e){return Uh(y2,s,e||{})}class b2{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:a},l){try{const{data:c,error:m}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!c)return{data:null,error:m};const g=a??u2.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:p}=c.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${r}`),p.displayName||(p.displayName=p.name)}switch(c.webauthn.type){case"create":{const p=_2(c.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:b,error:E}=await m2({publicKey:p,signal:g});return b?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:b}},error:null}:{data:null,error:E}}case"request":{const p=v2(c.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:b,error:E}=await g2(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:p,signal:g}));return b?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:b}},error:null}:{data:null,error:E}}}}catch(c){return ge(c)?{data:null,error:c}:{data:null,error:new ra("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!t)return{data:null,error:new du("rpId is required for WebAuthn authentication")};try{if(!k0())return{data:null,error:new ra("Browser does not support WebAuthn",null)};const{data:c,error:m}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:a},{request:l});if(!c)return{data:null,error:m};const{webauthn:g}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:g.type,rpId:t,rpOrigins:r,credential_response:g.credential_response}})}catch(c){return ge(c)?{data:null,error:c}:{data:null,error:new ra("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!t)return{data:null,error:new du("rpId is required for WebAuthn registration")};try{if(!k0())return{data:null,error:new ra("Browser does not support WebAuthn",null)};const{data:c,error:m}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(b=>{var E;return(E=b.data)===null||E===void 0?void 0:E.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===e&&x.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b==null?void 0:b.id}):void 0),{data:null,error:m};const{data:g,error:p}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:a},{create:l});return g?this._verify({factorId:c.id,challengeId:g.challengeId,webauthn:{rpId:t,rpOrigins:r,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:p}}catch(c){return ge(c)?{data:null,error:c}:{data:null,error:new ra("Unexpected error in register",c)}}}}n2();const w2={url:yx,storageKey:_x,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:vx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function j0(s,e,t){return await t()}const lo={};class fu{get jwks(){var e,t;return(t=(e=lo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){lo[this.storageKey]=Object.assign(Object.assign({},lo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=lo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){lo[this.storageKey]=Object.assign(Object.assign({},lo[this.storageKey]),{cachedAt:e})}constructor(e){var t,r,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},w2),e);if(this.storageKey=l.storageKey,this.instanceID=(t=fu.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,fu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&tn()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new Zx({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=eE(l.fetch),this.lock=l.lock||j0,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:tn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=t2:this.lock=j0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new b2(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:Zw()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=O0(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=O0(this.memoryStorage)),tn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Jw}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},r="none";if(tn()&&(t=jx(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),tn()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:l}=await this._getSessionFromURL(t,r);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),Ax(l)){const g=(e=l.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:m}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",m),await this._saveSession(c),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ge(t)?this._returnResult({error:t}):this._returnResult({error:new ra("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,a;try{const l=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:us}),{data:c,error:m}=l;if(m||!c)return this._returnResult({data:{user:null,session:null},error:m});const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(l){if(ge(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var t,r,a;try{let l;if("email"in e){const{email:b,password:E,options:x}=e;let A=null,k=null;this.flowType==="pkce"&&([A,k]=await io(this.storage,this.storageKey)),l=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:b,password:E,data:(t=x==null?void 0:x.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:A,code_challenge_method:k},xform:us})}else if("phone"in e){const{phone:b,password:E,options:x}=e;l=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:E,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},channel:(a=x==null?void 0:x.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:us})}else throw new yh("You must provide either an email or phone number and a password");const{data:c,error:m}=l;if(m||!c)return this._returnResult({data:{user:null,session:null},error:m});const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(l){if(ge(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let t;if("email"in e){const{email:l,password:c,options:m}=e;t=await Te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:I0})}else if("phone"in e){const{phone:l,password:c,options:m}=e;t=await Te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:I0})}else throw new yh("You must provide either an email or phone number and a password");const{data:r,error:a}=t;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!r||!r.session||!r.user){const l=new ro;return this._returnResult({data:{user:null,session:null},error:l})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(t){if(ge(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,r,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,a,l,c,m,g,p,b,E,x;let A,k;if("message"in e)A=e.message,k=e.signature;else{const{chain:D,wallet:U,statement:K,options:te}=e;let F;if(tn())if(typeof U=="object")F=U;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")F=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof U!="object"||!(te!=null&&te.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=U}const ne=new URL((t=te==null?void 0:te.url)!==null&&t!==void 0?t:window.location.href),W=await F.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!W||W.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const re=rE(W[0]);let C=(r=te==null?void 0:te.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!C){const I=await F.request({method:"eth_chainId"});C=s2(I)}const R={domain:ne.host,address:re,statement:K,uri:ne.href,version:"1",chainId:C,nonce:(a=te==null?void 0:te.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(l=te==null?void 0:te.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(m=te==null?void 0:te.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(g=te==null?void 0:te.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(p=te==null?void 0:te.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(b=te==null?void 0:te.signInWithEthereum)===null||b===void 0?void 0:b.resources};A=i2(R),k=await F.request({method:"personal_sign",params:[r2(A),re]})}try{const{data:D,error:U}=await Te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:A,signature:k},!((E=e.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:us});if(U)throw U;if(!D||!D.session||!D.user){const K=new ro;return this._returnResult({data:{user:null,session:null},error:K})}return D.session&&(await this._saveSession(D.session),await this._notifyAllSubscribers("SIGNED_IN",D.session)),this._returnResult({data:Object.assign({},D),error:U})}catch(D){if(ge(D))return this._returnResult({data:{user:null,session:null},error:D});throw D}}async signInWithSolana(e){var t,r,a,l,c,m,g,p,b,E,x,A;let k,D;if("message"in e)k=e.message,D=e.signature;else{const{chain:U,wallet:K,statement:te,options:F}=e;let ne;if(tn())if(typeof K=="object")ne=K;else{const re=window;if("solana"in re&&typeof re.solana=="object"&&("signIn"in re.solana&&typeof re.solana.signIn=="function"||"signMessage"in re.solana&&typeof re.solana.signMessage=="function"))ne=re.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof K!="object"||!(F!=null&&F.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ne=K}const W=new URL((t=F==null?void 0:F.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in ne&&ne.signIn){const re=await ne.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},F==null?void 0:F.signInWithSolana),{version:"1",domain:W.host,uri:W.href}),te?{statement:te}:null));let C;if(Array.isArray(re)&&re[0]&&typeof re[0]=="object")C=re[0];else if(re&&typeof re=="object"&&"signedMessage"in re&&"signature"in re)C=re;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)k=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),D=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ne)||typeof ne.signMessage!="function"||!("publicKey"in ne)||typeof ne!="object"||!ne.publicKey||!("toBase58"in ne.publicKey)||typeof ne.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${W.host} wants you to sign in with your Solana account:`,ne.publicKey.toBase58(),...te?["",te,""]:[""],"Version: 1",`URI: ${W.href}`,`Issued At: ${(a=(r=F==null?void 0:F.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=F==null?void 0:F.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${F.signInWithSolana.notBefore}`]:[],...!((c=F==null?void 0:F.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${F.signInWithSolana.expirationTime}`]:[],...!((m=F==null?void 0:F.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${F.signInWithSolana.chainId}`]:[],...!((g=F==null?void 0:F.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${F.signInWithSolana.nonce}`]:[],...!((p=F==null?void 0:F.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${F.signInWithSolana.requestId}`]:[],...!((E=(b=F==null?void 0:F.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||E===void 0)&&E.length?["Resources",...F.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const re=await ne.signMessage(new TextEncoder().encode(k),"utf8");if(!re||!(re instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");D=re}}try{const{data:U,error:K}=await Te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:ia(D)},!((x=e.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(A=e.options)===null||A===void 0?void 0:A.captchaToken}}:null),xform:us});if(K)throw K;if(!U||!U.session||!U.user){const te=new ro;return this._returnResult({data:{user:null,session:null},error:te})}return U.session&&(await this._saveSession(U.session),await this._notifyAllSubscribers("SIGNED_IN",U.session)),this._returnResult({data:Object.assign({},U),error:K})}catch(U){if(ge(U))return this._returnResult({data:{user:null,session:null},error:U});throw U}}async _exchangeCodeForSession(e){const t=await Zi(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(t??"").split("/");try{const{data:l,error:c}=await Te(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:us});if(await Zr(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const m=new ro;return this._returnResult({data:{user:null,session:null,redirectType:null},error:m})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:c})}catch(l){if(ge(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:t,provider:r,token:a,access_token:l,nonce:c}=e,m=await Te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:us}),{data:g,error:p}=m;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!g||!g.session||!g.user){const b=new ro;return this._returnResult({data:{user:null,session:null},error:b})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:p})}catch(t){if(ge(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,r,a,l,c;try{if("email"in e){const{email:m,options:g}=e;let p=null,b=null;this.flowType==="pkce"&&([p,b]=await io(this.storage,this.storageKey));const{error:E}=await Te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(t=g==null?void 0:g.data)!==null&&t!==void 0?t:{},create_user:(r=g==null?void 0:g.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:p,code_challenge_method:b},redirectTo:g==null?void 0:g.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:E})}if("phone"in e){const{phone:m,options:g}=e,{data:p,error:b}=await Te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(a=g==null?void 0:g.data)!==null&&a!==void 0?a:{},create_user:(l=g==null?void 0:g.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(c=g==null?void 0:g.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:b})}throw new yh("You must provide either an email or phone number.")}catch(m){if(ge(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async verifyOtp(e){var t,r;try{let a,l;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,l=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:c,error:m}=await Te(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:us});if(m)throw m;if(!c)throw new Error("An error occurred on token verification.");const g=c.session,p=c.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(a){if(ge(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var t,r,a,l,c;try{let m=null,g=null;this.flowType==="pkce"&&([m,g]=await io(this.storage,this.storageKey));const p=await Te(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:m,code_challenge_method:g}),headers:this.headers,xform:Jx});return!((l=p.data)===null||l===void 0)&&l.url&&tn()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(m){if(ge(m))return this._returnResult({data:null,error:m});throw m}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Dn;const{error:a}=await Te(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(ge(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:a,options:l}=e,{error:c}=await Te(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:r,type:a,options:l}=e,{data:c,error:m}=await Te(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:m})}throw new yh("You must provide either an email or phone number and a type")}catch(t){if(ge(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Zi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<xm:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const c=await Zi(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=Im()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=Gx(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ti}):await this._useSession(async t=>{var r,a,l;const{data:c,error:m}=t;if(m)throw m;return!(!((r=c.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Dn}:await Te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:ti})})}catch(t){if(ge(t))return Sx(t)&&(await this._removeSession(),await Zr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:a,error:l}=r;if(l)throw l;if(!a.session)throw new Dn;const c=a.session;let m=null,g=null;this.flowType==="pkce"&&e.email!=null&&([m,g]=await io(this.storage,this.storageKey));const{data:p,error:b}=await Te(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:m,code_challenge_method:g}),jwt:c.access_token,xform:ti});if(b)throw b;return c.user=p.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(r){if(ge(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Dn;const t=Date.now()/1e3;let r=t,a=!0,l=null;const{payload:c}=Cm(e.access_token);if(c.exp&&(r=c.exp,a=r<=t),a){const{data:m,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!m)return{data:{user:null,session:null},error:null};l=m}else{const{data:m,error:g}=await this._getUser(e.access_token);if(g)throw g;l={access_token:e.access_token,refresh_token:e.refresh_token,user:m.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(t){if(ge(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:c,error:m}=t;if(m)throw m;e=(r=c.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Dn;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(ge(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!tn())throw new _h("No browser detected.");if(e.error||e.error_description||e.error_code)throw new _h(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new E0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new _h("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new E0("No code detected.");const{data:te,error:F}=await this._exchangeCodeForSession(e.code);if(F)throw F;const ne=new URL(window.location.href);return ne.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ne.toString()),{data:{session:te.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:l,refresh_token:c,expires_in:m,expires_at:g,token_type:p}=e;if(!l||!m||!c||!p)throw new _h("No session defined in URL");const b=Math.round(Date.now()/1e3),E=parseInt(m);let x=b+E;g&&(x=parseInt(g));const A=x-b;A*1e3<=uo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${A}s, should have been closer to ${E}s`);const k=x-E;b-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,x,b):b-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,x,b);const{data:D,error:U}=await this._getUser(l);if(U)throw U;const K={provider_token:r,provider_refresh_token:a,access_token:l,expires_in:E,expires_at:x,refresh_token:c,token_type:p,user:D.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:K,redirectType:e.type},error:null})}catch(r){if(ge(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Zi(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:a,error:l}=t;if(l)return this._returnResult({error:l});const c=(r=a.session)===null||r===void 0?void 0:r.access_token;if(c){const{error:m}=await this.admin.signOut(c,e);if(m&&!(Tx(m)&&(m.status===404||m.status===401||m.status===403)))return this._returnResult({error:m})}return e!=="others"&&(await this._removeSession(),await Zr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=kx(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,a;try{const{data:{session:l},error:c}=t;if(c)throw c;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,t={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await io(this.storage,this.storageKey,!0));try{return await Te(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(l){if(ge(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(ge(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:a}=await this._useSession(async l=>{var c,m,g,p,b;const{data:E,error:x}=l;if(x)throw x;const A=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(m=e.options)===null||m===void 0?void 0:m.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await Te(this.fetch,"GET",A,{headers:this.headers,jwt:(b=(p=E.session)===null||p===void 0?void 0:p.access_token)!==null&&b!==void 0?b:void 0})});if(a)throw a;return tn()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(ge(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:a,data:{session:l}}=t;if(a)throw a;const{options:c,provider:m,token:g,access_token:p,nonce:b}=e,E=await Te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=l==null?void 0:l.access_token)!==null&&r!==void 0?r:void 0,body:{provider:m,id_token:g,access_token:p,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:us}),{data:x,error:A}=E;return A?this._returnResult({data:{user:null,session:null},error:A}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new ro}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:A}))}catch(a){if(ge(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,a;const{data:l,error:c}=t;if(c)throw c;return await Te(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(r=l.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(ge(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await Px(async a=>(a>0&&await Mx(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await Te(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:us})),(a,l)=>{const c=200*Math.pow(2,a);return l&&Rm(l)&&Date.now()+c-r<uo})}catch(r){if(this._debug(t,"error",r),ge(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),tn()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await Zi(this.storage,this.storageKey);if(a&&this.userStorage){let c=await Zi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await co(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:Im()}else if(a&&!a.user&&!a.user){const c=await Zi(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(a.user=c.user,await Zr(this.storage,this.storageKey+"-user"),await co(this.storage,this.storageKey,a)):a.user=Im()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const l=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<xm;if(this._debug(r,`session has${l?"":" not"} expired with margin of ${xm}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),Rm(c)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:m}=await this._getUser(a.access_token);!m&&(c!=null&&c.user)?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(r,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Dn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new tE;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new Dn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const m={data:l.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(l){if(this._debug(a,"error",l),ge(l)){const c={data:null,error:l};return Rm(l)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(c),c}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,r=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(e,t)}catch(g){l.push(g)}});if(await Promise.all(c),l.length>0){for(let m=0;m<l.length;m+=1)console.error(l[m]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await co(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const l=R0(a);await co(this.storage,this.storageKey,l)}else{const a=R0(t);await co(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Zr(this.storage,this.storageKey),await Zr(this.storage,this.storageKey+"-code-verifier"),await Zr(this.storage,this.storageKey+"-user"),this.userStorage&&await Zr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&tn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),uo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-e)/uo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${uo}ms, refresh threshold is ${eg} ticks`),a<=eg&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof sE)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!tn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const a=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[l,c]=await io(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(m.toString())}if(r!=null&&r.queryParams){const l=new URLSearchParams(r.queryParams);a.push(l.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:a,error:l}=t;return l?this._returnResult({data:null,error:l}):await Te(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(ge(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,a;const{data:l,error:c}=t;if(c)return this._returnResult({data:null,error:c});const m=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:g,error:p}=await Te(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&g.type==="totp"&&(!((a=g==null?void 0:g.totp)===null||a===void 0)&&a.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(t){if(ge(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:a,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?d2(e.webauthn.credential_response):f2(e.webauthn.credential_response)})}:{code:e.code}),{data:m,error:g}=await Te(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),this._returnResult({data:m,error:g}))})}catch(t){if(ge(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:a,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=await Te(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});if(c.error)return c;const{data:m}=c;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:c2(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:h2(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(ge(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:r},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Cm(r.access_token);let c=null;l.aal&&(c=l.aal);let m=c;((t=(e=r.user.factors)===null||e===void 0?void 0:e.filter(b=>b.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(m="aal2");const p=l.amr||[];return{data:{currentLevel:c,nextLevel:m,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:r},error:a}=t;return a?this._returnResult({data:null,error:a}):r?await Te(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Dn})})}catch(t){if(ge(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:a},error:l}=r;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Dn});const c=await Te(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return c.data&&c.data.redirect_url&&tn()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(ge(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:a},error:l}=r;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Dn});const c=await Te(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return c.data&&c.data.redirect_url&&tn()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(ge(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;return r?this._returnResult({data:null,error:r}):t?await Te(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Dn})})}catch(e){if(ge(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:r},error:a}=t;return a?this._returnResult({data:null,error:a}):r?(await Te(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Dn})})}catch(t){if(ge(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(m=>m.kid===e);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(m=>m.kid===e),r&&this.jwks_cached_at+wx>a)return r;const{data:l,error:c}=await Te(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,r=l.keys.find(m=>m.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:A,error:k}=await this.getSession();if(k||!A.session)return this._returnResult({data:null,error:k});r=A.session.access_token}const{header:a,payload:l,signature:c,raw:{header:m,payload:g}}=Cm(r);t!=null&&t.allowExpired||Hx(l.exp);const p=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!p){const{error:A}=await this.getUser(r);if(A)throw A;return{data:{claims:l,header:a,signature:c},error:null}}const b=$x(a.alg),E=await crypto.subtle.importKey("jwk",p,b,!0,["verify"]);if(!await crypto.subtle.verify(b,E,c,Nx(`${m}.${g}`)))throw new sg("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(r){if(ge(r))return this._returnResult({data:null,error:r});throw r}}}fu.nextInstanceID={};const E2=fu;class T2 extends E2{constructor(e){super(e)}}class S2{constructor(e,t,r){var a,l,c;this.supabaseUrl=e,this.supabaseKey=t;const m=px(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const g=`sb-${m.hostname.split(".")[0]}-auth-token`,p={db:lx,realtime:cx,auth:Object.assign(Object.assign({},ux),{storageKey:g}),global:ox},b=gx(r??{},p);this.storageKey=(a=b.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=b.global.headers)!==null&&l!==void 0?l:{},b.accessToken?(this.accessToken=b.accessToken,this.auth=new Proxy({},{get:(E,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=b.auth)!==null&&c!==void 0?c:{},this.headers,b.global.fetch),this.fetch=fx(t,this._getAccessToken.bind(this),b.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},b.realtime)),this.accessToken&&this.accessToken().then(E=>this.realtime.setAuth(E)).catch(E=>console.warn("Failed to set initial Realtime auth token:",E)),this.rest=new cA(new URL("rest/v1",m).href,{headers:this.headers,schema:b.db.schema,fetch:this.fetch}),this.storage=new rx(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),b.accessToken||this._listenForAuthEvents()}get functions(){return new aA(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:a,userStorage:l,storageKey:c,flowType:m,lock:g,debug:p,throwOnError:b},E,x){const A={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new T2({url:this.authUrl.href,headers:Object.assign(Object.assign({},A),E),storageKey:c,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:a,userStorage:l,flowType:m,lock:g,debug:p,throwOnError:b,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(k=>k.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new RA(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const A2=(s,e,t)=>new S2(s,e,t);function x2(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const e=s.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}x2()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const R2="https://hykypgxaegmufdothwbv.supabase.co",C2="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh5a3lwZ3hhZWdtdWZkb3Rod2J2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1NTE3NzMsImV4cCI6MjA3NzEyNzc3M30.Euzl2vfhHrxhgN-tfg2XftMaX9hEiJOorSJq16n2CRY",rg=A2(R2,C2,{auth:{storageKey:"sb-hykypgxaegmufdothwbv-auth-token",persistSession:!0,autoRefreshToken:!0}}),I2=()=>{};var D0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let a=s.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},N2=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const a=s[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=s[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=s[t++],c=s[t++],m=s[t++],g=((a&7)<<18|(l&63)<<12|(c&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const l=s[t++],c=s[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},oE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<s.length;a+=3){const l=s[a],c=a+1<s.length,m=c?s[a+1]:0,g=a+2<s.length,p=g?s[a+2]:0,b=l>>2,E=(l&3)<<4|m>>4;let x=(m&15)<<2|p>>6,A=p&63;g||(A=64,c||(x=64)),r.push(t[b],t[E],t[x],t[A])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(aE(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):N2(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<s.length;){const l=t[s.charAt(a++)],m=a<s.length?t[s.charAt(a)]:0;++a;const p=a<s.length?t[s.charAt(a)]:64;++a;const E=a<s.length?t[s.charAt(a)]:64;if(++a,l==null||m==null||p==null||E==null)throw new O2;const x=l<<2|m>>4;if(r.push(x),p!==64){const A=m<<4&240|p>>2;if(r.push(A),E!==64){const k=p<<6&192|E;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class O2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const k2=function(s){const e=aE(s);return oE.encodeByteArray(e,!0)},Lh=function(s){return k2(s).replace(/\./g,"")},lE=function(s){try{return oE.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2=()=>j2().__FIREBASE_DEFAULTS__,M2=()=>{if(typeof process>"u"||typeof D0>"u")return;const s=D0.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},P2=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&lE(s[1]);return e&&JSON.parse(e)},td=()=>{try{return I2()||D2()||M2()||P2()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},uE=s=>{var e,t;return(t=(e=td())==null?void 0:e.emulatorHosts)==null?void 0:t[s]},V2=s=>{const e=uE(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},cE=()=>{var s;return(s=td())==null?void 0:s.config},hE=s=>{var e;return(e=td())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function dE(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Lh(JSON.stringify(t)),Lh(JSON.stringify(c)),""].join(".")}const su={};function z2(){const s={prod:[],emulator:[]};for(const e of Object.keys(su))su[e]?s.emulator.push(e):s.prod.push(e);return s}function B2(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let M0=!1;function fE(s,e){if(typeof window>"u"||typeof document>"u"||!Po(window.location.host)||su[s]===e||su[s]||M0)return;su[s]=e;function t(x){return`__firebase__banner__${x}`}const r="__firebase__banner",l=z2().prod.length>0;function c(){const x=document.getElementById(r);x&&x.remove()}function m(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function g(x,A){x.setAttribute("width","24"),x.setAttribute("id",A),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function p(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{M0=!0,c()},x}function b(x,A){x.setAttribute("id",A),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function E(){const x=B2(r),A=t("text"),k=document.getElementById(A)||document.createElement("span"),D=t("learnmore"),U=document.getElementById(D)||document.createElement("a"),K=t("preprendIcon"),te=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const F=x.element;m(F),b(U,D);const ne=p();g(te,K),F.append(te,k,U,ne),document.body.appendChild(F)}l?(k.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function q2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function H2(){var e;const s=(e=td())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function F2(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function G2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function K2(){const s=hn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function Q2(){return!H2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Y2(){try{return typeof indexedDB=="object"}catch{return!1}}function J2(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2="FirebaseError";class yr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=X2,Object.setPrototypeOf(this,yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Su.prototype.create)}}class Su{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?W2(l,r):"Error",m=`${this.serviceName}: ${c} (${a}).`;return new yr(a,m,r)}}function W2(s,e){return s.replace(Z2,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const Z2=/\{\$([^}]+)}/g;function eR(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function ca(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=s[a],c=e[a];if(P0(l)&&P0(c)){if(!ca(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function P0(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(s){const e=[];for(const[t,r]of Object.entries(s))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Yl(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Jl(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function tR(s,e){const t=new nR(s,e);return t.subscribe.bind(t)}class nR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");sR(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=Om),a.error===void 0&&(a.error=Om),a.complete===void 0&&(a.complete=Om);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sR(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Om(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(s){return s&&s._delegate?s._delegate:s}class ha{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new U2;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(r)return null;throw a}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aR(e))try{this.getOrInitializeService({instanceIdentifier:ta})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=ta){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ta){return this.instances.has(e)}getOptions(e=ta){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,c]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);r===m&&c.resolve(a)}return a}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(r)??new Set;a.add(e),this.onInitCallbacks.set(r,a);const l=this.instances.get(r);return l&&e(l,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:iR(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ta){return this.component?this.component.multipleInstances?e:ta:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iR(s){return s===ta?void 0:s}function aR(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new rR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Le||(Le={}));const lR={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},uR=Le.INFO,cR={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},hR=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),a=cR[e];if(a)console[a](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fg{constructor(e){this.name=e,this._logLevel=uR,this._logHandler=hR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const dR=(s,e)=>e.some(t=>s instanceof t);let V0,U0;function fR(){return V0||(V0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mR(){return U0||(U0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mE=new WeakMap,ig=new WeakMap,gE=new WeakMap,km=new WeakMap,Gg=new WeakMap;function gR(s){const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("success",l),s.removeEventListener("error",c)},l=()=>{t(li(s.result)),a()},c=()=>{r(s.error),a()};s.addEventListener("success",l),s.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&mE.set(t,s)}).catch(()=>{}),Gg.set(e,s),e}function pR(s){if(ig.has(s))return;const e=new Promise((t,r)=>{const a=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",c),s.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{r(s.error||new DOMException("AbortError","AbortError")),a()};s.addEventListener("complete",l),s.addEventListener("error",c),s.addEventListener("abort",c)});ig.set(s,e)}let ag={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return ig.get(s);if(e==="objectStoreNames")return s.objectStoreNames||gE.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return li(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function yR(s){ag=s(ag)}function _R(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(jm(this),e,...t);return gE.set(r,e.sort?e.sort():[e]),li(r)}:mR().includes(s)?function(...e){return s.apply(jm(this),e),li(mE.get(this))}:function(...e){return li(s.apply(jm(this),e))}}function vR(s){return typeof s=="function"?_R(s):(s instanceof IDBTransaction&&pR(s),dR(s,fR())?new Proxy(s,ag):s)}function li(s){if(s instanceof IDBRequest)return gR(s);if(km.has(s))return km.get(s);const e=vR(s);return e!==s&&(km.set(s,e),Gg.set(e,s)),e}const jm=s=>Gg.get(s);function bR(s,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(s,e),m=li(c);return r&&c.addEventListener("upgradeneeded",g=>{r(li(c.result),g.oldVersion,g.newVersion,li(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const wR=["get","getKey","getAll","getAllKeys","count"],ER=["put","add","delete","clear"],Dm=new Map;function L0(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Dm.get(e))return Dm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=ER.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||wR.includes(t)))return;const l=async function(c,...m){const g=this.transaction(c,a?"readwrite":"readonly");let p=g.store;return r&&(p=p.index(m.shift())),(await Promise.all([p[t](...m),a&&g.done]))[0]};return Dm.set(e,l),l}yR(s=>({...s,get:(e,t,r)=>L0(e,t)||s.get(e,t,r),has:(e,t)=>!!L0(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(SR(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function SR(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const og="@firebase/app",z0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr=new Fg("@firebase/app"),AR="@firebase/app-compat",xR="@firebase/analytics-compat",RR="@firebase/analytics",CR="@firebase/app-check-compat",IR="@firebase/app-check",NR="@firebase/auth",OR="@firebase/auth-compat",kR="@firebase/database",jR="@firebase/data-connect",DR="@firebase/database-compat",MR="@firebase/functions",PR="@firebase/functions-compat",VR="@firebase/installations",UR="@firebase/installations-compat",LR="@firebase/messaging",zR="@firebase/messaging-compat",BR="@firebase/performance",qR="@firebase/performance-compat",HR="@firebase/remote-config",$R="@firebase/remote-config-compat",FR="@firebase/storage",GR="@firebase/storage-compat",KR="@firebase/firestore",QR="@firebase/ai",YR="@firebase/firestore-compat",JR="firebase",XR="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="[DEFAULT]",WR={[og]:"fire-core",[AR]:"fire-core-compat",[RR]:"fire-analytics",[xR]:"fire-analytics-compat",[IR]:"fire-app-check",[CR]:"fire-app-check-compat",[NR]:"fire-auth",[OR]:"fire-auth-compat",[kR]:"fire-rtdb",[jR]:"fire-data-connect",[DR]:"fire-rtdb-compat",[MR]:"fire-fn",[PR]:"fire-fn-compat",[VR]:"fire-iid",[UR]:"fire-iid-compat",[LR]:"fire-fcm",[zR]:"fire-fcm-compat",[BR]:"fire-perf",[qR]:"fire-perf-compat",[HR]:"fire-rc",[$R]:"fire-rc-compat",[FR]:"fire-gcs",[GR]:"fire-gcs-compat",[KR]:"fire-fst",[YR]:"fire-fst-compat",[QR]:"fire-vertex","fire-js":"fire-js",[JR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mu=new Map,ZR=new Map,ug=new Map;function B0(s,e){try{s.container.addComponent(e)}catch(t){mr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function So(s){const e=s.name;if(ug.has(e))return mr.debug(`There were multiple attempts to register component ${e}.`),!1;ug.set(e,s);for(const t of mu.values())B0(t,s);for(const t of ZR.values())B0(t,s);return!0}function Kg(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function ds(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ui=new Su("app","Firebase",eC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ha("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ui.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=XR;function pE(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r={name:lg,automaticDataCollectionEnabled:!0,...e},a=r.name;if(typeof a!="string"||!a)throw ui.create("bad-app-name",{appName:String(a)});if(t||(t=cE()),!t)throw ui.create("no-options");const l=mu.get(a);if(l){if(ca(t,l.options)&&ca(r,l.config))return l;throw ui.create("duplicate-app",{appName:a})}const c=new oR(a);for(const g of ug.values())c.addComponent(g);const m=new tC(t,r,c);return mu.set(a,m),m}function Qg(s=lg){const e=mu.get(s);if(!e&&s===lg&&cE())return pE();if(!e)throw ui.create("no-app",{appName:s});return e}function nC(){return Array.from(mu.values())}function ci(s,e,t){let r=WR[s]??s;t&&(r+=`-${t}`);const a=r.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${r}" with version "${e}":`];a&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mr.warn(c.join(" "));return}So(new ha(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="firebase-heartbeat-database",rC=1,gu="firebase-heartbeat-store";let Mm=null;function yE(){return Mm||(Mm=bR(sC,rC,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(gu)}catch(t){console.warn(t)}}}}).catch(s=>{throw ui.create("idb-open",{originalErrorMessage:s.message})})),Mm}async function iC(s){try{const t=(await yE()).transaction(gu),r=await t.objectStore(gu).get(_E(s));return await t.done,r}catch(e){if(e instanceof yr)mr.warn(e.message);else{const t=ui.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});mr.warn(t.message)}}}async function q0(s,e){try{const r=(await yE()).transaction(gu,"readwrite");await r.objectStore(gu).put(e,_E(s)),await r.done}catch(t){if(t instanceof yr)mr.warn(t.message);else{const r=ui.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});mr.warn(r.message)}}}function _E(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=1024,oC=30;class lC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new cC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=H0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>oC){const c=hC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){mr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=H0(),{heartbeatsToSend:r,unsentEntries:a}=uC(this._heartbeatsCache.heartbeats),l=Lh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return mr.warn(t),""}}}function H0(){return new Date().toISOString().substring(0,10)}function uC(s,e=aC){const t=[];let r=s.slice();for(const a of s){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),$0(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),$0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class cC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Y2()?J2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await iC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return q0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return q0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function $0(s){return Lh(JSON.stringify({version:2,heartbeats:s})).length}function hC(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(s){So(new ha("platform-logger",e=>new TR(e),"PRIVATE")),So(new ha("heartbeat",e=>new lC(e),"PRIVATE")),ci(og,z0,s),ci(og,z0,"esm2020"),ci("fire-js","")}dC("");var fC="firebase",mC="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ci(fC,mC,"app");function vE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gC=vE,bE=new Su("auth","Firebase",vE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh=new Fg("@firebase/auth");function pC(s,...e){zh.logLevel<=Le.WARN&&zh.warn(`Auth (${Vo}): ${s}`,...e)}function Ah(s,...e){zh.logLevel<=Le.ERROR&&zh.error(`Auth (${Vo}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(s,...e){throw Yg(s,...e)}function zs(s,...e){return Yg(s,...e)}function wE(s,e,t){const r={...gC(),[e]:t};return new Su("auth","Firebase",r).create(e,{appName:s.name})}function hi(s){return wE(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Yg(s,...e){if(typeof s!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(t,...r)}return bE.create(s,...e)}function Se(s,e,...t){if(!s)throw Yg(e,...t)}function dr(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Ah(e),new Error(e)}function gr(s,e){s||dr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function yC(){return F0()==="http:"||F0()==="https:"}function F0(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yC()||F2()||"connection"in navigator)?navigator.onLine:!0}function vC(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,t){this.shortDelay=e,this.longDelay=t,gr(t>e,"Short delay should be less than long delay!"),this.isMobile=q2()||G2()}get(){return _C()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(s,e){gr(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;dr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;dr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;dr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],EC=new xu(3e4,6e4);function ma(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Ei(s,e,t,r,a={}){return TE(s,a,async()=>{let l={},c={};r&&(e==="GET"?c=r:l={body:JSON.stringify(r)});const m=Au({key:s.config.apiKey,...c}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const p={method:e,headers:g,...l};return $2()||(p.referrerPolicy="no-referrer"),s.emulatorConfig&&Po(s.emulatorConfig.host)&&(p.credentials="include"),EE.fetch()(await SE(s,s.config.apiHost,t,m),p)})}async function TE(s,e,t){s._canInitEmulator=!1;const r={...bC,...e};try{const a=new SC(s),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw vh(s,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const m=l.ok?c.errorMessage:c.error.message,[g,p]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw vh(s,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw vh(s,"email-already-in-use",c);if(g==="USER_DISABLED")throw vh(s,"user-disabled",c);const b=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw wE(s,b,p);ms(s,b)}}catch(a){if(a instanceof yr)throw a;ms(s,"network-request-failed",{message:String(a)})}}async function nd(s,e,t,r,a={}){const l=await Ei(s,e,t,r,a);return"mfaPendingCredential"in l&&ms(s,"multi-factor-auth-required",{_serverResponse:l}),l}async function SE(s,e,t,r){const a=`${e}${t}?${r}`,l=s,c=l.config.emulator?Jg(s.config,a):`${s.config.apiScheme}://${a}`;return wC.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function TC(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class SC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(zs(this.auth,"network-request-failed")),EC.get())})}}function vh(s,e,t){const r={appName:s.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=zs(s,e,r);return a.customData._tokenResponse=t,a}function G0(s){return s!==void 0&&s.enterprise!==void 0}class AC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return TC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function xC(s,e){return Ei(s,"GET","/v2/recaptchaConfig",ma(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RC(s,e){return Ei(s,"POST","/v1/accounts:delete",e)}async function Bh(s,e){return Ei(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function CC(s,e=!1){const t=_r(s),r=await t.getIdToken(e),a=Xg(r);Se(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:r,authTime:ru(Pm(a.auth_time)),issuedAtTime:ru(Pm(a.iat)),expirationTime:ru(Pm(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Pm(s){return Number(s)*1e3}function Xg(s){const[e,t,r]=s.split(".");if(e===void 0||t===void 0||r===void 0)return Ah("JWT malformed, contained fewer than 3 sections"),null;try{const a=lE(t);return a?JSON.parse(a):(Ah("Failed to decode base64 JWT payload"),null)}catch(a){return Ah("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function K0(s){const e=Xg(s);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pu(s,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof yr&&IC(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function IC({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ru(this.lastLoginAt),this.creationTime=ru(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qh(s){var E;const e=s.auth,t=await s.getIdToken(),r=await pu(s,Bh(e,{idToken:t}));Se(r==null?void 0:r.users.length,e,"internal-error");const a=r.users[0];s._notifyReloadListener(a);const l=(E=a.providerUserInfo)!=null&&E.length?AE(a.providerUserInfo):[],c=kC(s.providerData,l),m=s.isAnonymous,g=!(s.email&&a.passwordHash)&&!(c!=null&&c.length),p=m?g:!1,b={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new hg(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(s,b)}async function OC(s){const e=_r(s);await qh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kC(s,e){return[...s.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function AE(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jC(s,e){const t=await TE(s,{},async()=>{const r=Au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=s.config,c=await SE(s,a,"/v1/token",`key=${l}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return s.emulatorConfig&&Po(s.emulatorConfig.host)&&(g.credentials="include"),EE.fetch()(c,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function DC(s,e){return Ei(s,"POST","/v2/accounts:revokeToken",ma(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):K0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=K0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await jC(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,c=new _o;return r&&(Se(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(Se(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Se(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _o,this.toJSON())}_performRefresh(){return dr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(s,e){Se(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class fs{constructor({uid:e,auth:t,stsTokenManager:r,...a}){this.providerId="firebase",this.proactiveRefresh=new NC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new hg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await pu(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return CC(this,e)}reload(){return OC(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await qh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ds(this.auth.app))return Promise.reject(hi(this.auth));const e=await this.getIdToken();return await pu(this,RC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:E,emailVerified:x,isAnonymous:A,providerData:k,stsTokenManager:D}=t;Se(E&&D,e,"internal-error");const U=_o.fromJSON(this.name,D);Se(typeof E=="string",e,"internal-error"),ei(r,e.name),ei(a,e.name),Se(typeof x=="boolean",e,"internal-error"),Se(typeof A=="boolean",e,"internal-error"),ei(l,e.name),ei(c,e.name),ei(m,e.name),ei(g,e.name),ei(p,e.name),ei(b,e.name);const K=new fs({uid:E,auth:e,email:a,emailVerified:x,displayName:r,isAnonymous:A,photoURL:c,phoneNumber:l,tenantId:m,stsTokenManager:U,createdAt:p,lastLoginAt:b});return k&&Array.isArray(k)&&(K.providerData=k.map(te=>({...te}))),g&&(K._redirectEventId=g),K}static async _fromIdTokenResponse(e,t,r=!1){const a=new _o;a.updateFromServerResponse(t);const l=new fs({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await qh(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];Se(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?AE(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),m=new _o;m.updateFromIdToken(r);const g=new fs({uid:a.localId,auth:e,stsTokenManager:m,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new hg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0=new Map;function fr(s){gr(s instanceof Function,"Expected a class definition");let e=Q0.get(s);return e?(gr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,Q0.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}xE.type="NONE";const Y0=xE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(s,e,t){return`firebase:${s}:${e}:${t}`}class vo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=xh(this.userKey,a.apiKey,l),this.fullPersistenceKey=xh("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Bh(this.auth,{idToken:e}).catch(()=>{});return t?fs._fromGetAccountInfoResponse(this.auth,t,e):null}return fs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new vo(fr(Y0),e,r);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||fr(Y0);const c=xh(r,e.config.apiKey,e.name);let m=null;for(const p of t)try{const b=await p._get(c);if(b){let E;if(typeof b=="string"){const x=await Bh(e,{idToken:b}).catch(()=>{});if(!x)break;E=await fs._fromGetAccountInfoResponse(e,x,b)}else E=fs._fromJSON(e,b);p!==l&&(m=E),l=p;break}}catch{}const g=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new vo(l,e,r):(l=g[0],m&&await l._set(c,m.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new vo(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(RE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kE(e))return"Blackberry";if(jE(e))return"Webos";if(CE(e))return"Safari";if((e.includes("chrome/")||IE(e))&&!e.includes("edge/"))return"Chrome";if(OE(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function RE(s=hn()){return/firefox\//i.test(s)}function CE(s=hn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function IE(s=hn()){return/crios\//i.test(s)}function NE(s=hn()){return/iemobile/i.test(s)}function OE(s=hn()){return/android/i.test(s)}function kE(s=hn()){return/blackberry/i.test(s)}function jE(s=hn()){return/webos/i.test(s)}function Wg(s=hn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function MC(s=hn()){var e;return Wg(s)&&!!((e=window.navigator)!=null&&e.standalone)}function PC(){return K2()&&document.documentMode===10}function DE(s=hn()){return Wg(s)||OE(s)||jE(s)||kE(s)||/windows phone/i.test(s)||NE(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(s,e=[]){let t;switch(s){case"Browser":t=J0(hn());break;case"Worker":t=`${J0(hn())}-${s}`;break;default:t=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Vo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((c,m)=>{try{const g=e(l);c(g)}catch(g){m(g)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UC(s,e={}){return Ei(s,"GET","/v2/passwordPolicy",ma(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=6;class zC{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??LC,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new X0(this),this.idTokenSubscription=new X0(this),this.beforeStateQueue=new VC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=fr(t)),this._initializationPromise=this.queue(async()=>{var r,a,l;if(!this._deleted&&(this.persistenceManager=await vo.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Bh(this,{idToken:e}),r=await fs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(ds(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(m,m))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,m=r==null?void 0:r._redirectEventId,g=await this.tryRedirectSignIn(e);(!c||c===m)&&(g!=null&&g.user)&&(r=g.user,a=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await qh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ds(this.app))return Promise.reject(hi(this));const t=e?_r(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ds(this.app)?Promise.reject(hi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ds(this.app)?Promise.reject(hi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await UC(this),t=new zC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Su("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await DC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&fr(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await vo.create(this,[fr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(m,this,"internal-error"),m.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,r,a);return()=>{c=!0,g()}}else{const g=e.addObserver(t);return()=>{c=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ME(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(ds(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&pC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Uo(s){return _r(s)}class X0{constructor(e){this.auth=e,this.observer=null,this.addObserver=tR(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qC(s){sd=s}function PE(s){return sd.loadJS(s)}function HC(){return sd.recaptchaEnterpriseScript}function $C(){return sd.gapiScript}function FC(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class GC{constructor(){this.enterprise=new KC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class KC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const QC="recaptcha-enterprise",VE="NO_RECAPTCHA";class YC{constructor(e){this.type=QC,this.auth=Uo(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,m)=>{xC(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const p=new AC(g);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,c(p.siteKey)}}).catch(g=>{m(g)})})}function a(l,c,m){const g=window.grecaptcha;G0(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(p=>{c(p)}).catch(()=>{c(VE)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new GC().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{r(this.auth).then(m=>{if(!t&&G0(window.grecaptcha))a(m,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let g=HC();g.length!==0&&(g+=m),PE(g).then(()=>{a(m,l,c)}).catch(p=>{c(p)})}}).catch(m=>{c(m)})})}}async function W0(s,e,t,r=!1,a=!1){const l=new YC(s);let c;if(a)c=VE;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,p=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:c}):Object.assign(m,{captchaResponse:c}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Z0(s,e,t,r,a){var l;if((l=s._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await W0(s,e,t,t==="getOobCode");return r(s,c)}else return r(s,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await W0(s,e,t,t==="getOobCode");return r(s,m)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(s,e){const t=Kg(s,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(ca(l,e??{}))return a;ms(a,"already-initialized")}return t.initialize({options:e})}function XC(s,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(fr);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function WC(s,e,t){const r=Uo(s);Se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=UE(e),{host:c,port:m}=ZC(e),g=m===null?"":`:${m}`,p={url:`${l}//${c}${g}/`},b=Object.freeze({host:c,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Se(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Se(ca(p,r.config.emulator)&&ca(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,Po(c)?(dE(`${l}//${c}${g}`),fE("Auth",!0)):eI()}function UE(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function ZC(s){const e=UE(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:eb(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:eb(c)}}}function eb(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function eI(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return dr("not implemented")}_getIdTokenResponse(e){return dr("not implemented")}_linkToIdToken(e,t){return dr("not implemented")}_getReauthenticationResolver(e){return dr("not implemented")}}async function tI(s,e){return Ei(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nI(s,e){return nd(s,"POST","/v1/accounts:signInWithPassword",ma(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sI(s,e){return nd(s,"POST","/v1/accounts:signInWithEmailLink",ma(s,e))}async function rI(s,e){return nd(s,"POST","/v1/accounts:signInWithEmailLink",ma(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu extends Zg{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new yu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new yu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Z0(e,t,"signInWithPassword",nI);case"emailLink":return sI(e,{email:this._email,oobCode:this._password});default:ms(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Z0(e,r,"signUpPassword",tI);case"emailLink":return rI(e,{idToken:t,email:this._email,oobCode:this._password});default:ms(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bo(s,e){return nd(s,"POST","/v1/accounts:signInWithIdp",ma(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI="http://localhost";class da extends Zg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new da(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ms("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a,...l}=t;if(!r||!a)return null;const c=new da(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return bo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,bo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,bo(e,t)}buildRequest(){const e={requestUri:iI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Au(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function oI(s){const e=Yl(Jl(s)).link,t=e?Yl(Jl(e)).deep_link_id:null,r=Yl(Jl(s)).deep_link_id;return(r?Yl(Jl(r)).link:null)||r||t||e||s}class ep{constructor(e){const t=Yl(Jl(e)),r=t.apiKey??null,a=t.oobCode??null,l=aI(t.mode??null);Se(r&&a&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=oI(e);try{return new ep(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(){this.providerId=Lo.PROVIDER_ID}static credential(e,t){return yu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=ep.parseLink(t);return Se(r,"argument-error"),yu._fromEmailAndCode(e,r.code,r.tenantId)}}Lo.PROVIDER_ID="password";Lo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Lo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends LE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends Ru{constructor(){super("facebook.com")}static credential(e){return da._fromParams({providerId:ni.PROVIDER_ID,signInMethod:ni.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ni.credentialFromTaggedObject(e)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ni.credential(e.oauthAccessToken)}catch{return null}}}ni.FACEBOOK_SIGN_IN_METHOD="facebook.com";ni.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si extends Ru{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return da._fromParams({providerId:si.PROVIDER_ID,signInMethod:si.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return si.credentialFromTaggedObject(e)}static credentialFromError(e){return si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return si.credential(t,r)}catch{return null}}}si.GOOGLE_SIGN_IN_METHOD="google.com";si.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri extends Ru{constructor(){super("github.com")}static credential(e){return da._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ri.credentialFromTaggedObject(e)}static credentialFromError(e){return ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ri.credential(e.oauthAccessToken)}catch{return null}}}ri.GITHUB_SIGN_IN_METHOD="github.com";ri.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii extends Ru{constructor(){super("twitter.com")}static credential(e,t){return da._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ii.credential(t,r)}catch{return null}}}ii.TWITTER_SIGN_IN_METHOD="twitter.com";ii.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await fs._fromIdTokenResponse(e,r,a),c=tb(r);return new Ao({user:l,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=tb(r);return new Ao({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function tb(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh extends yr{constructor(e,t,r,a){super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Hh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new Hh(e,t,r,a)}}function zE(s,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Hh._fromErrorAndOperation(s,l,e,r):l})}async function lI(s,e,t=!1){const r=await pu(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Ao._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uI(s,e,t=!1){const{auth:r}=s;if(ds(r.app))return Promise.reject(hi(r));const a="reauthenticate";try{const l=await pu(s,zE(r,a,e,s),t);Se(l.idToken,r,"internal-error");const c=Xg(l.idToken);Se(c,r,"internal-error");const{sub:m}=c;return Se(s.uid===m,r,"user-mismatch"),Ao._forOperation(s,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ms(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BE(s,e,t=!1){if(ds(s.app))return Promise.reject(hi(s));const r="signIn",a=await zE(s,r,e),l=await Ao._fromIdTokenResponse(s,r,a);return t||await s._updateCurrentUser(l.user),l}async function cI(s,e){return BE(Uo(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hI(s){const e=Uo(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function dI(s,e,t){return ds(s.app)?Promise.reject(hi(s)):cI(_r(s),Lo.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&hI(s),r})}function fI(s,e,t,r){return _r(s).onIdTokenChanged(e,t,r)}function mI(s,e,t){return _r(s).beforeAuthStateChanged(e,t)}function gI(s,e,t,r){return _r(s).onAuthStateChanged(e,t,r)}const $h="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem($h,"1"),this.storage.removeItem($h),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI=1e3,yI=10;class HE extends qE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=DE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,m,g)=>{this.notifyListeners(c,g)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);PC()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,yI):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},pI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}HE.type="LOCAL";const _I=HE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E extends qE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}$E.type="SESSION";const FE=$E;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new rd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const m=Array.from(c).map(async p=>p(t.origin,l)),g=await vI(m);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(s="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((m,g)=>{const p=tp("",20);a.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(E){const x=E;if(x.data.eventId===p)switch(x.data.status){case"ack":clearTimeout(b),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(x.data.response);break;default:clearTimeout(b),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(){return window}function wI(s){Bs().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(){return typeof Bs().WorkerGlobalScope<"u"&&typeof Bs().importScripts=="function"}async function EI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function TI(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function SI(){return GE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="firebaseLocalStorageDb",AI=1,Fh="firebaseLocalStorage",QE="fbase_key";class Cu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function id(s,e){return s.transaction([Fh],e?"readwrite":"readonly").objectStore(Fh)}function xI(){const s=indexedDB.deleteDatabase(KE);return new Cu(s).toPromise()}function dg(){const s=indexedDB.open(KE,AI);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Fh,{keyPath:QE})}catch(a){t(a)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Fh)?e(r):(r.close(),await xI(),e(await dg()))})})}async function nb(s,e,t){const r=id(s,!0).put({[QE]:e,value:t});return new Cu(r).toPromise()}async function RI(s,e){const t=id(s,!1).get(e),r=await new Cu(t).toPromise();return r===void 0?null:r.value}function sb(s,e){const t=id(s,!0).delete(e);return new Cu(t).toPromise()}const CI=800,II=3;class YE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>II)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rd._getInstance(SI()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await EI(),!this.activeServiceWorker)return;this.sender=new bI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||TI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dg();return await nb(e,$h,"1"),await sb(e,$h),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>nb(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>RI(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>sb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=id(a,!1).getAll();return new Cu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}YE.type="LOCAL";const NI=YE;new xu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(s,e){return e?fr(e):(Se(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np extends Zg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return bo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function kI(s){return BE(s.auth,new np(s),s.bypassAuthState)}function jI(s){const{auth:e,user:t}=s;return Se(t,e,"internal-error"),uI(t,new np(s),s.bypassAuthState)}async function DI(s){const{auth:e,user:t}=s;return Se(t,e,"internal-error"),lI(t,new np(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:c,type:m}=e;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kI;case"linkViaPopup":case"linkViaRedirect":return DI;case"reauthViaPopup":case"reauthViaRedirect":return jI;default:ms(this.auth,"internal-error")}}resolve(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=new xu(2e3,1e4);class po extends JE{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,po.currentPopupAction&&po.currentPopupAction.cancel(),po.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){gr(this.filter.length===1,"Popup operations only handle one event");const e=tp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(zs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(zs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,po.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,MI.get())};e()}}po.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI="pendingRedirect",Rh=new Map;class VI extends JE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Rh.get(this.auth._key());if(!e){try{const r=await UI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Rh.set(this.auth._key(),e)}return this.bypassAuthState||Rh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function UI(s,e){const t=BI(e),r=zI(s);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function LI(s,e){Rh.set(s._key(),e)}function zI(s){return fr(s._redirectPersistence)}function BI(s){return xh(PI,s.config.apiKey,s.name)}async function qI(s,e,t=!1){if(ds(s.app))return Promise.reject(hi(s));const r=Uo(s),a=OI(r,e),c=await new VI(r,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI=600*1e3;class $I{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!FI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!XE(e)){const a=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(zs(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HI&&this.cachedEventUids.clear(),this.cachedEventUids.has(rb(e))}saveEventToCache(e){this.cachedEventUids.add(rb(e)),this.lastProcessedEventTime=Date.now()}}function rb(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function XE({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function FI(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XE(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GI(s,e={}){return Ei(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QI=/^https?/;async function YI(s){if(s.config.emulator)return;const{authorizedDomains:e}=await GI(s);for(const t of e)try{if(JI(t))return}catch{}ms(s,"unauthorized-domain")}function JI(s){const e=cg(),{protocol:t,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const c=new URL(s);return c.hostname===""&&r===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!QI.test(t))return!1;if(KI.test(s))return r===s;const a=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=new xu(3e4,6e4);function ib(){const s=Bs().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function WI(s){return new Promise((e,t)=>{var a,l,c;function r(){ib(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ib(),t(zs(s,"network-request-failed"))},timeout:XI.get()})}if((l=(a=Bs().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Bs().gapi)!=null&&c.load)r();else{const m=FC("iframefcb");return Bs()[m]=()=>{gapi.load?r():t(zs(s,"network-request-failed"))},PE(`${$C()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw Ch=null,e})}let Ch=null;function ZI(s){return Ch=Ch||WI(s),Ch}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=new xu(5e3,15e3),tN="__/auth/iframe",nN="emulator/auth/iframe",sN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iN(s){const e=s.config;Se(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?Jg(e,nN):`https://${s.config.authDomain}/${tN}`,r={apiKey:e.apiKey,appName:s.name,v:Vo},a=rN.get(s.config.apiHost);a&&(r.eid=a);const l=s._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${Au(r).slice(1)}`}async function aN(s){const e=await ZI(s),t=Bs().gapi;return Se(t,s,"internal-error"),e.open({where:document.body,url:iN(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sN,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=zs(s,"network-request-failed"),m=Bs().setTimeout(()=>{l(c)},eN.get());function g(){Bs().clearTimeout(m),a(r)}r.ping(g).then(g,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lN=500,uN=600,cN="_blank",hN="http://localhost";class ab{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dN(s,e,t,r=lN,a=uN){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g={...oN,width:r.toString(),height:a.toString(),top:l,left:c},p=hn().toLowerCase();t&&(m=IE(p)?cN:t),RE(p)&&(e=e||hN,g.scrollbars="yes");const b=Object.entries(g).reduce((x,[A,k])=>`${x}${A}=${k},`,"");if(MC(p)&&m!=="_self")return fN(e||"",m),new ab(null);const E=window.open(e||"",m,b);Se(E,s,"popup-blocked");try{E.focus()}catch{}return new ab(E)}function fN(s,e){const t=document.createElement("a");t.href=s,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN="__/auth/handler",gN="emulator/auth/handler",pN=encodeURIComponent("fac");async function ob(s,e,t,r,a,l){Se(s.config.authDomain,s,"auth-domain-config-required"),Se(s.config.apiKey,s,"invalid-api-key");const c={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:r,v:Vo,eventId:a};if(e instanceof LE){e.setDefaultLanguage(s.languageCode),c.providerId=e.providerId||"",eR(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,E]of Object.entries({}))c[b]=E}if(e instanceof Ru){const b=e.getScopes().filter(E=>E!=="");b.length>0&&(c.scopes=b.join(","))}s.tenantId&&(c.tid=s.tenantId);const m=c;for(const b of Object.keys(m))m[b]===void 0&&delete m[b];const g=await s._getAppCheckToken(),p=g?`#${pN}=${encodeURIComponent(g)}`:"";return`${yN(s)}?${Au(m).slice(1)}${p}`}function yN({config:s}){return s.emulator?Jg(s,gN):`https://${s.authDomain}/${mN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="webStorageSupport";class _N{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=FE,this._completeRedirectFn=qI,this._overrideRedirectResult=LI}async _openPopup(e,t,r,a){var c;gr((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await ob(e,t,r,cg(),a);return dN(e,l,tp())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await ob(e,t,r,cg(),a);return wI(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(gr(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await aN(e),r=new $I(e);return t.register("authEvent",a=>(Se(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Vm,{type:Vm},a=>{var c;const l=(c=a==null?void 0:a[0])==null?void 0:c[Vm];l!==void 0&&t(!!l),ms(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=YI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return DE()||CE()||Wg()}}const vN=_N;var lb="@firebase/auth",ub="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function EN(s){So(new ha("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:m}=r.options;Se(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:c,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ME(s)},p=new BC(r,a,l,g);return XC(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),So(new ha("auth-internal",e=>{const t=Uo(e.getProvider("auth").getImmediate());return(r=>new bN(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ci(lb,ub,wN(s)),ci(lb,ub,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=300,SN=hE("authIdTokenMaxAge")||TN;let cb=null;const AN=s=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>SN)return;const a=t==null?void 0:t.token;cb!==a&&(cb=a,await fetch(s,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function xN(s=Qg()){const e=Kg(s,"auth");if(e.isInitialized())return e.getImmediate();const t=JC(s,{popupRedirectResolver:vN,persistence:[NI,_I,FE]}),r=hE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=AN(l.toString());mI(t,c,()=>c(t.currentUser)),fI(t,m=>c(m))}}const a=uE("auth");return a&&WC(t,`http://${a}`),t}function RN(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}qC({loadJS(s){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=a=>{const l=zs("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",RN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});EN("Browser");var hb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var di,WE;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,R){function I(){}I.prototype=R.prototype,C.F=R.prototype,C.prototype=new I,C.prototype.constructor=C,C.D=function(V,j,L){for(var N=Array(arguments.length-2),it=2;it<arguments.length;it++)N[it-2]=arguments[it];return R.prototype[j].apply(V,N)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,R,I){I||(I=0);const V=Array(16);if(typeof R=="string")for(var j=0;j<16;++j)V[j]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(j=0;j<16;++j)V[j]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=C.g[0],I=C.g[1],j=C.g[2];let L=C.g[3],N;N=R+(L^I&(j^L))+V[0]+3614090360&4294967295,R=I+(N<<7&4294967295|N>>>25),N=L+(j^R&(I^j))+V[1]+3905402710&4294967295,L=R+(N<<12&4294967295|N>>>20),N=j+(I^L&(R^I))+V[2]+606105819&4294967295,j=L+(N<<17&4294967295|N>>>15),N=I+(R^j&(L^R))+V[3]+3250441966&4294967295,I=j+(N<<22&4294967295|N>>>10),N=R+(L^I&(j^L))+V[4]+4118548399&4294967295,R=I+(N<<7&4294967295|N>>>25),N=L+(j^R&(I^j))+V[5]+1200080426&4294967295,L=R+(N<<12&4294967295|N>>>20),N=j+(I^L&(R^I))+V[6]+2821735955&4294967295,j=L+(N<<17&4294967295|N>>>15),N=I+(R^j&(L^R))+V[7]+4249261313&4294967295,I=j+(N<<22&4294967295|N>>>10),N=R+(L^I&(j^L))+V[8]+1770035416&4294967295,R=I+(N<<7&4294967295|N>>>25),N=L+(j^R&(I^j))+V[9]+2336552879&4294967295,L=R+(N<<12&4294967295|N>>>20),N=j+(I^L&(R^I))+V[10]+4294925233&4294967295,j=L+(N<<17&4294967295|N>>>15),N=I+(R^j&(L^R))+V[11]+2304563134&4294967295,I=j+(N<<22&4294967295|N>>>10),N=R+(L^I&(j^L))+V[12]+1804603682&4294967295,R=I+(N<<7&4294967295|N>>>25),N=L+(j^R&(I^j))+V[13]+4254626195&4294967295,L=R+(N<<12&4294967295|N>>>20),N=j+(I^L&(R^I))+V[14]+2792965006&4294967295,j=L+(N<<17&4294967295|N>>>15),N=I+(R^j&(L^R))+V[15]+1236535329&4294967295,I=j+(N<<22&4294967295|N>>>10),N=R+(j^L&(I^j))+V[1]+4129170786&4294967295,R=I+(N<<5&4294967295|N>>>27),N=L+(I^j&(R^I))+V[6]+3225465664&4294967295,L=R+(N<<9&4294967295|N>>>23),N=j+(R^I&(L^R))+V[11]+643717713&4294967295,j=L+(N<<14&4294967295|N>>>18),N=I+(L^R&(j^L))+V[0]+3921069994&4294967295,I=j+(N<<20&4294967295|N>>>12),N=R+(j^L&(I^j))+V[5]+3593408605&4294967295,R=I+(N<<5&4294967295|N>>>27),N=L+(I^j&(R^I))+V[10]+38016083&4294967295,L=R+(N<<9&4294967295|N>>>23),N=j+(R^I&(L^R))+V[15]+3634488961&4294967295,j=L+(N<<14&4294967295|N>>>18),N=I+(L^R&(j^L))+V[4]+3889429448&4294967295,I=j+(N<<20&4294967295|N>>>12),N=R+(j^L&(I^j))+V[9]+568446438&4294967295,R=I+(N<<5&4294967295|N>>>27),N=L+(I^j&(R^I))+V[14]+3275163606&4294967295,L=R+(N<<9&4294967295|N>>>23),N=j+(R^I&(L^R))+V[3]+4107603335&4294967295,j=L+(N<<14&4294967295|N>>>18),N=I+(L^R&(j^L))+V[8]+1163531501&4294967295,I=j+(N<<20&4294967295|N>>>12),N=R+(j^L&(I^j))+V[13]+2850285829&4294967295,R=I+(N<<5&4294967295|N>>>27),N=L+(I^j&(R^I))+V[2]+4243563512&4294967295,L=R+(N<<9&4294967295|N>>>23),N=j+(R^I&(L^R))+V[7]+1735328473&4294967295,j=L+(N<<14&4294967295|N>>>18),N=I+(L^R&(j^L))+V[12]+2368359562&4294967295,I=j+(N<<20&4294967295|N>>>12),N=R+(I^j^L)+V[5]+4294588738&4294967295,R=I+(N<<4&4294967295|N>>>28),N=L+(R^I^j)+V[8]+2272392833&4294967295,L=R+(N<<11&4294967295|N>>>21),N=j+(L^R^I)+V[11]+1839030562&4294967295,j=L+(N<<16&4294967295|N>>>16),N=I+(j^L^R)+V[14]+4259657740&4294967295,I=j+(N<<23&4294967295|N>>>9),N=R+(I^j^L)+V[1]+2763975236&4294967295,R=I+(N<<4&4294967295|N>>>28),N=L+(R^I^j)+V[4]+1272893353&4294967295,L=R+(N<<11&4294967295|N>>>21),N=j+(L^R^I)+V[7]+4139469664&4294967295,j=L+(N<<16&4294967295|N>>>16),N=I+(j^L^R)+V[10]+3200236656&4294967295,I=j+(N<<23&4294967295|N>>>9),N=R+(I^j^L)+V[13]+681279174&4294967295,R=I+(N<<4&4294967295|N>>>28),N=L+(R^I^j)+V[0]+3936430074&4294967295,L=R+(N<<11&4294967295|N>>>21),N=j+(L^R^I)+V[3]+3572445317&4294967295,j=L+(N<<16&4294967295|N>>>16),N=I+(j^L^R)+V[6]+76029189&4294967295,I=j+(N<<23&4294967295|N>>>9),N=R+(I^j^L)+V[9]+3654602809&4294967295,R=I+(N<<4&4294967295|N>>>28),N=L+(R^I^j)+V[12]+3873151461&4294967295,L=R+(N<<11&4294967295|N>>>21),N=j+(L^R^I)+V[15]+530742520&4294967295,j=L+(N<<16&4294967295|N>>>16),N=I+(j^L^R)+V[2]+3299628645&4294967295,I=j+(N<<23&4294967295|N>>>9),N=R+(j^(I|~L))+V[0]+4096336452&4294967295,R=I+(N<<6&4294967295|N>>>26),N=L+(I^(R|~j))+V[7]+1126891415&4294967295,L=R+(N<<10&4294967295|N>>>22),N=j+(R^(L|~I))+V[14]+2878612391&4294967295,j=L+(N<<15&4294967295|N>>>17),N=I+(L^(j|~R))+V[5]+4237533241&4294967295,I=j+(N<<21&4294967295|N>>>11),N=R+(j^(I|~L))+V[12]+1700485571&4294967295,R=I+(N<<6&4294967295|N>>>26),N=L+(I^(R|~j))+V[3]+2399980690&4294967295,L=R+(N<<10&4294967295|N>>>22),N=j+(R^(L|~I))+V[10]+4293915773&4294967295,j=L+(N<<15&4294967295|N>>>17),N=I+(L^(j|~R))+V[1]+2240044497&4294967295,I=j+(N<<21&4294967295|N>>>11),N=R+(j^(I|~L))+V[8]+1873313359&4294967295,R=I+(N<<6&4294967295|N>>>26),N=L+(I^(R|~j))+V[15]+4264355552&4294967295,L=R+(N<<10&4294967295|N>>>22),N=j+(R^(L|~I))+V[6]+2734768916&4294967295,j=L+(N<<15&4294967295|N>>>17),N=I+(L^(j|~R))+V[13]+1309151649&4294967295,I=j+(N<<21&4294967295|N>>>11),N=R+(j^(I|~L))+V[4]+4149444226&4294967295,R=I+(N<<6&4294967295|N>>>26),N=L+(I^(R|~j))+V[11]+3174756917&4294967295,L=R+(N<<10&4294967295|N>>>22),N=j+(R^(L|~I))+V[2]+718787259&4294967295,j=L+(N<<15&4294967295|N>>>17),N=I+(L^(j|~R))+V[9]+3951481745&4294967295,C.g[0]=C.g[0]+R&4294967295,C.g[1]=C.g[1]+(j+(N<<21&4294967295|N>>>11))&4294967295,C.g[2]=C.g[2]+j&4294967295,C.g[3]=C.g[3]+L&4294967295}r.prototype.v=function(C,R){R===void 0&&(R=C.length);const I=R-this.blockSize,V=this.C;let j=this.h,L=0;for(;L<R;){if(j==0)for(;L<=I;)a(this,C,L),L+=this.blockSize;if(typeof C=="string"){for(;L<R;)if(V[j++]=C.charCodeAt(L++),j==this.blockSize){a(this,V),j=0;break}}else for(;L<R;)if(V[j++]=C[L++],j==this.blockSize){a(this,V),j=0;break}}this.h=j,this.o+=R},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var R=1;R<C.length-8;++R)C[R]=0;R=this.o*8;for(var I=C.length-8;I<C.length;++I)C[I]=R&255,R/=256;for(this.v(C),C=Array(16),R=0,I=0;I<4;++I)for(let V=0;V<32;V+=8)C[R++]=this.g[I]>>>V&255;return C};function l(C,R){var I=m;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=R(C)}function c(C,R){this.h=R;const I=[];let V=!0;for(let j=C.length-1;j>=0;j--){const L=C[j]|0;V&&L==R||(I[j]=L,V=!1)}this.g=I}var m={};function g(C){return-128<=C&&C<128?l(C,function(R){return new c([R|0],R<0?-1:0)}):new c([C|0],C<0?-1:0)}function p(C){if(isNaN(C)||!isFinite(C))return E;if(C<0)return U(p(-C));const R=[];let I=1;for(let V=0;C>=I;V++)R[V]=C/I|0,I*=4294967296;return new c(R,0)}function b(C,R){if(C.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(C.charAt(0)=="-")return U(b(C.substring(1),R));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=p(Math.pow(R,8));let V=E;for(let L=0;L<C.length;L+=8){var j=Math.min(8,C.length-L);const N=parseInt(C.substring(L,L+j),R);j<8?(j=p(Math.pow(R,j)),V=V.j(j).add(p(N))):(V=V.j(I),V=V.add(p(N)))}return V}var E=g(0),x=g(1),A=g(16777216);s=c.prototype,s.m=function(){if(D(this))return-U(this).m();let C=0,R=1;for(let I=0;I<this.g.length;I++){const V=this.i(I);C+=(V>=0?V:4294967296+V)*R,R*=4294967296}return C},s.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(k(this))return"0";if(D(this))return"-"+U(this).toString(C);const R=p(Math.pow(C,6));var I=this;let V="";for(;;){const j=ne(I,R).g;I=K(I,j.j(R));let L=((I.g.length>0?I.g[0]:I.h)>>>0).toString(C);if(I=j,k(I))return L+V;for(;L.length<6;)L="0"+L;V=L+V}},s.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function k(C){if(C.h!=0)return!1;for(let R=0;R<C.g.length;R++)if(C.g[R]!=0)return!1;return!0}function D(C){return C.h==-1}s.l=function(C){return C=K(this,C),D(C)?-1:k(C)?0:1};function U(C){const R=C.g.length,I=[];for(let V=0;V<R;V++)I[V]=~C.g[V];return new c(I,~C.h).add(x)}s.abs=function(){return D(this)?U(this):this},s.add=function(C){const R=Math.max(this.g.length,C.g.length),I=[];let V=0;for(let j=0;j<=R;j++){let L=V+(this.i(j)&65535)+(C.i(j)&65535),N=(L>>>16)+(this.i(j)>>>16)+(C.i(j)>>>16);V=N>>>16,L&=65535,N&=65535,I[j]=N<<16|L}return new c(I,I[I.length-1]&-2147483648?-1:0)};function K(C,R){return C.add(U(R))}s.j=function(C){if(k(this)||k(C))return E;if(D(this))return D(C)?U(this).j(U(C)):U(U(this).j(C));if(D(C))return U(this.j(U(C)));if(this.l(A)<0&&C.l(A)<0)return p(this.m()*C.m());const R=this.g.length+C.g.length,I=[];for(var V=0;V<2*R;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(let j=0;j<C.g.length;j++){const L=this.i(V)>>>16,N=this.i(V)&65535,it=C.i(j)>>>16,bt=C.i(j)&65535;I[2*V+2*j]+=N*bt,te(I,2*V+2*j),I[2*V+2*j+1]+=L*bt,te(I,2*V+2*j+1),I[2*V+2*j+1]+=N*it,te(I,2*V+2*j+1),I[2*V+2*j+2]+=L*it,te(I,2*V+2*j+2)}for(C=0;C<R;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=R;C<2*R;C++)I[C]=0;return new c(I,0)};function te(C,R){for(;(C[R]&65535)!=C[R];)C[R+1]+=C[R]>>>16,C[R]&=65535,R++}function F(C,R){this.g=C,this.h=R}function ne(C,R){if(k(R))throw Error("division by zero");if(k(C))return new F(E,E);if(D(C))return R=ne(U(C),R),new F(U(R.g),U(R.h));if(D(R))return R=ne(C,U(R)),new F(U(R.g),R.h);if(C.g.length>30){if(D(C)||D(R))throw Error("slowDivide_ only works with positive integers.");for(var I=x,V=R;V.l(C)<=0;)I=W(I),V=W(V);var j=re(I,1),L=re(V,1);for(V=re(V,2),I=re(I,2);!k(V);){var N=L.add(V);N.l(C)<=0&&(j=j.add(I),L=N),V=re(V,1),I=re(I,1)}return R=K(C,j.j(R)),new F(j,R)}for(j=E;C.l(R)>=0;){for(I=Math.max(1,Math.floor(C.m()/R.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),L=p(I),N=L.j(R);D(N)||N.l(C)>0;)I-=V,L=p(I),N=L.j(R);k(L)&&(L=x),j=j.add(L),C=K(C,N)}return new F(j,C)}s.B=function(C){return ne(this,C).h},s.and=function(C){const R=Math.max(this.g.length,C.g.length),I=[];for(let V=0;V<R;V++)I[V]=this.i(V)&C.i(V);return new c(I,this.h&C.h)},s.or=function(C){const R=Math.max(this.g.length,C.g.length),I=[];for(let V=0;V<R;V++)I[V]=this.i(V)|C.i(V);return new c(I,this.h|C.h)},s.xor=function(C){const R=Math.max(this.g.length,C.g.length),I=[];for(let V=0;V<R;V++)I[V]=this.i(V)^C.i(V);return new c(I,this.h^C.h)};function W(C){const R=C.g.length+1,I=[];for(let V=0;V<R;V++)I[V]=C.i(V)<<1|C.i(V-1)>>>31;return new c(I,C.h)}function re(C,R){const I=R>>5;R%=32;const V=C.g.length-I,j=[];for(let L=0;L<V;L++)j[L]=R>0?C.i(L+I)>>>R|C.i(L+I+1)<<32-R:C.i(L+I);return new c(j,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,WE=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=b,di=c}).apply(typeof hb<"u"?hb:typeof self<"u"?self:typeof window<"u"?window:{});var bh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZE,Xl,eT,Ih,fg,tT,nT,sT;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof bh=="object"&&bh];for(var y=0;y<h.length;++y){var w=h[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function a(h,y){if(y)e:{var w=r;h=h.split(".");for(var S=0;S<h.length-1;S++){var B=h[S];if(!(B in w))break e;w=w[B]}h=h[h.length-1],S=w[h],y=y(S),y!=S&&y!=null&&e(w,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var w=[],S;for(S in y)Object.prototype.hasOwnProperty.call(y,S)&&w.push([S,y[S]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function m(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,w){return h.call.apply(h.bind,arguments)}function p(h,y,w){return p=g,p.apply(null,arguments)}function b(h,y){var w=Array.prototype.slice.call(arguments,1);return function(){var S=w.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function E(h,y){function w(){}w.prototype=y.prototype,h.Z=y.prototype,h.prototype=new w,h.prototype.constructor=h,h.Ob=function(S,B,G){for(var ae=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)ae[Ie-2]=arguments[Ie];return y.prototype[B].apply(S,ae)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function A(h){const y=h.length;if(y>0){const w=Array(y);for(let S=0;S<y;S++)w[S]=h[S];return w}return[]}function k(h,y){for(let S=1;S<arguments.length;S++){const B=arguments[S];var w=typeof B;if(w=w!="object"?w:B?Array.isArray(B)?"array":w:"null",w=="array"||w=="object"&&typeof B.length=="number"){w=h.length||0;const G=B.length||0;h.length=w+G;for(let ae=0;ae<G;ae++)h[w+ae]=B[ae]}else h.push(B)}}class D{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function U(h){c.setTimeout(()=>{throw h},0)}function K(){var h=C;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class te{constructor(){this.h=this.g=null}add(y,w){const S=F.get();S.set(y,w),this.h?this.h.next=S:this.g=S,this.h=S}}var F=new D(()=>new ne,h=>h.reset());class ne{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let W,re=!1,C=new te,R=()=>{const h=Promise.resolve(void 0);W=()=>{h.then(I)}};function I(){for(var h;h=K();){try{h.h.call(h.g)}catch(w){U(w)}var y=F;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}re=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};c.addEventListener("test",w,y),c.removeEventListener("test",w,y)}catch{}return h})();function N(h){return/^[\s\xa0]*$/.test(h)}function it(h,y){j.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(it,j),it.prototype.init=function(h,y){const w=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(w=="mouseover"?y=h.fromElement:w=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&it.Z.h.call(this)},it.prototype.h=function(){it.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var bt="closure_listenable_"+(Math.random()*1e6|0),Y=0;function ue(h,y,w,S,B){this.listener=h,this.proxy=null,this.src=y,this.type=w,this.capture=!!S,this.ha=B,this.key=++Y,this.da=this.fa=!1}function ye(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function je(h,y,w){for(const S in h)y.call(w,h[S],S,h)}function qe(h,y){for(const w in h)y.call(void 0,h[w],w,h)}function P(h){const y={};for(const w in h)y[w]=h[w];return y}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(h,y){let w,S;for(let B=1;B<arguments.length;B++){S=arguments[B];for(w in S)h[w]=S[w];for(let G=0;G<Z.length;G++)w=Z[G],Object.prototype.hasOwnProperty.call(S,w)&&(h[w]=S[w])}}function ce(h){this.src=h,this.g={},this.h=0}ce.prototype.add=function(h,y,w,S,B){const G=h.toString();h=this.g[G],h||(h=this.g[G]=[],this.h++);const ae=Ae(h,y,S,B);return ae>-1?(y=h[ae],w||(y.fa=!1)):(y=new ue(y,this.src,G,!!S,B),y.fa=w,h.push(y)),y};function Ee(h,y){const w=y.type;if(w in h.g){var S=h.g[w],B=Array.prototype.indexOf.call(S,y,void 0),G;(G=B>=0)&&Array.prototype.splice.call(S,B,1),G&&(ye(y),h.g[w].length==0&&(delete h.g[w],h.h--))}}function Ae(h,y,w,S){for(let B=0;B<h.length;++B){const G=h[B];if(!G.da&&G.listener==y&&G.capture==!!w&&G.ha==S)return B}return-1}var De="closure_lm_"+(Math.random()*1e6|0),pt={};function at(h,y,w,S,B){if(Array.isArray(y)){for(let G=0;G<y.length;G++)at(h,y[G],w,S,B);return null}return w=gs(w),h&&h[bt]?h.J(y,w,m(S)?!!S.capture:!1,B):Fs(h,y,w,!1,S,B)}function Fs(h,y,w,S,B,G){if(!y)throw Error("Invalid event type");const ae=m(B)?!!B.capture:!!B;let Ie=Qt(h);if(Ie||(h[De]=Ie=new ce(h)),w=Ie.add(y,w,S,ae,G),w.proxy)return w;if(S=vr(),w.proxy=S,S.src=h,S.listener=w,h.addEventListener)L||(B=ae),B===void 0&&(B=!1),h.addEventListener(y.toString(),S,B);else if(h.attachEvent)h.attachEvent(lt(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return w}function vr(){function h(w){return y.call(h.src,h.listener,w)}const y=yt;return h}function ke(h,y,w,S,B){if(Array.isArray(y))for(var G=0;G<y.length;G++)ke(h,y[G],w,S,B);else S=m(S)?!!S.capture:!!S,w=gs(w),h&&h[bt]?(h=h.i,G=String(y).toString(),G in h.g&&(y=h.g[G],w=Ae(y,w,S,B),w>-1&&(ye(y[w]),Array.prototype.splice.call(y,w,1),y.length==0&&(delete h.g[G],h.h--)))):h&&(h=Qt(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ae(y,w,S,B)),(w=h>-1?y[h]:null)&&_e(w))}function _e(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[bt])Ee(y.i,h);else{var w=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(w,S,h.capture):y.detachEvent?y.detachEvent(lt(w),S):y.addListener&&y.removeListener&&y.removeListener(S),(w=Qt(y))?(Ee(w,h),w.h==0&&(w.src=null,y[De]=null)):ye(h)}}}function lt(h){return h in pt?pt[h]:pt[h]="on"+h}function yt(h,y){if(h.da)h=!0;else{y=new it(y,this);const w=h.listener,S=h.ha||h.src;h.fa&&_e(h),h=w.call(S,y)}return h}function Qt(h){return h=h[De],h instanceof ce?h:null}var Vn="__closure_events_fn_"+(Math.random()*1e9>>>0);function gs(h){return typeof h=="function"?h:(h[Vn]||(h[Vn]=function(y){return h.handleEvent(y)}),h[Vn])}function st(){V.call(this),this.i=new ce(this),this.M=this,this.G=null}E(st,V),st.prototype[bt]=!0,st.prototype.removeEventListener=function(h,y,w,S){ke(this,h,y,w,S)};function Lt(h,y){var w,S=h.G;if(S)for(w=[];S;S=S.G)w.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new j(y,h);else if(y instanceof j)y.target=y.target||h;else{var B=y;y=new j(S,h),le(y,B)}B=!0;let G,ae;if(w)for(ae=w.length-1;ae>=0;ae--)G=y.g=w[ae],B=br(G,S,!0,y)&&B;if(G=y.g=h,B=br(G,S,!0,y)&&B,B=br(G,S,!1,y)&&B,w)for(ae=0;ae<w.length;ae++)G=y.g=w[ae],B=br(G,S,!1,y)&&B}st.prototype.N=function(){if(st.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const w=h.g[y];for(let S=0;S<w.length;S++)ye(w[S]);delete h.g[y],h.h--}}this.G=null},st.prototype.J=function(h,y,w,S){return this.i.add(String(h),y,!1,w,S)},st.prototype.K=function(h,y,w,S){return this.i.add(String(h),y,!0,w,S)};function br(h,y,w,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let B=!0;for(let G=0;G<y.length;++G){const ae=y[G];if(ae&&!ae.da&&ae.capture==w){const Ie=ae.listener,Et=ae.ha||ae.src;ae.fa&&Ee(h.i,ae),B=Ie.call(Et,S)!==!1&&B}}return B&&!S.defaultPrevented}function yd(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function Du(h){h.g=yd(()=>{h.g=null,h.i&&(h.i=!1,Du(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class dn extends V{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Du(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ti(h){V.call(this),this.h=h,this.g={}}E(Ti,V);var $o=[];function Fo(h){je(h.g,function(y,w){this.g.hasOwnProperty(w)&&_e(y)},h),h.g={}}Ti.prototype.N=function(){Ti.Z.N.call(this),Fo(this)},Ti.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wr=c.JSON.stringify,_d=c.JSON.parse,Mu=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Pu(){}function Vu(){}var Xn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Yt(){j.call(this,"d")}E(Yt,j);function Un(){j.call(this,"c")}E(Un,j);var wt={},Uu=null;function pa(){return Uu=Uu||new st}wt.Ia="serverreachability";function Lu(h){j.call(this,wt.Ia,h)}E(Lu,j);function ps(h){const y=pa();Lt(y,new Lu(y))}wt.STAT_EVENT="statevent";function Si(h,y){j.call(this,wt.STAT_EVENT,h),this.stat=y}E(Si,j);function Rt(h){const y=pa();Lt(y,new Si(y,h))}wt.Ja="timingevent";function ys(h,y){j.call(this,wt.Ja,h),this.size=y}E(ys,j);function _s(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function Wn(){this.g=!0}Wn.prototype.ua=function(){this.g=!1};function vd(h,y,w,S,B,G){h.info(function(){if(h.g)if(G){var ae="",Ie=G.split("&");for(let Qe=0;Qe<Ie.length;Qe++){var Et=Ie[Qe].split("=");if(Et.length>1){const ht=Et[0];Et=Et[1];const qn=ht.split("_");ae=qn.length>=2&&qn[1]=="type"?ae+(ht+"="+Et+"&"):ae+(ht+"=redacted&")}}}else ae=null;else ae=G;return"XMLHTTP REQ ("+S+") [attempt "+B+"]: "+y+`
`+w+`
`+ae})}function zu(h,y,w,S,B,G,ae){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+B+"]: "+y+`
`+w+`
`+G+" "+ae})}function vs(h,y,w,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+bd(h,w)+(S?" "+S:"")})}function Ai(h,y){h.info(function(){return"TIMEOUT: "+y})}Wn.prototype.info=function(){};function bd(h,y){if(!h.g)return y;if(!y)return null;try{const G=JSON.parse(y);if(G){for(h=0;h<G.length;h++)if(Array.isArray(G[h])){var w=G[h];if(!(w.length<2)){var S=w[1];if(Array.isArray(S)&&!(S.length<1)){var B=S[0];if(B!="noop"&&B!="stop"&&B!="close")for(let ae=1;ae<S.length;ae++)S[ae]=""}}}}return wr(G)}catch{return y}}var xi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Go={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ko;function Ri(){}E(Ri,Pu),Ri.prototype.g=function(){return new XMLHttpRequest},Ko=new Ri;function Gs(h){return encodeURIComponent(String(h))}function Bu(h){var y=1;h=h.split(":");const w=[];for(;y>0&&h.length;)w.push(h.shift()),y--;return h.length&&w.push(h.join(":")),w}function Zn(h,y,w,S){this.j=h,this.i=y,this.l=w,this.S=S||1,this.V=new Ti(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new es}function es(){this.i=null,this.g="",this.h=!1}var Ct={},$t={};function bs(h,y,w){h.M=1,h.A=Ci(Nt(y)),h.u=w,h.R=!0,ya(h,null)}function ya(h,y){h.F=Date.now(),ws(h),h.B=Nt(h.A);var w=h.B,S=h.S;Array.isArray(S)||(S=[String(S)]),wa(w.i,"t",S),h.C=0,w=h.j.L,h.h=new es,h.g=nc(h.j,w?y:null,!h.u),h.P>0&&(h.O=new dn(p(h.Y,h,h.g),h.P)),y=h.V,w=h.g,S=h.ba;var B="readystatechange";Array.isArray(B)||(B&&($o[0]=B.toString()),B=$o);for(let G=0;G<B.length;G++){const ae=at(w,B[G],S||y.handleEvent,!1,y.h||y);if(!ae)break;y.g[ae.key]=ae}y=h.J?P(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),ps(),vd(h.i,h.v,h.B,h.l,h.S,h.u)}Zn.prototype.ba=function(h){h=h.target;const y=this.O;y&&ss(h)==3?y.j():this.Y(h)},Zn.prototype.Y=function(h){try{if(h==this.g)e:{const Ie=ss(this.g),Et=this.g.ya(),Qe=this.g.ca();if(!(Ie<3)&&(Ie!=3||this.g&&(this.h.h||this.g.la()||Jt(this.g)))){this.K||Ie!=4||Et==7||(Et==8||Qe<=0?ps(3):ps(2)),Es(this);var y=this.g.ca();this.X=y;var w=wd(this);if(this.o=y==200,zu(this.i,this.v,this.B,this.l,this.S,Ie,y),this.o){if(this.U&&!this.L){t:{if(this.g){var S,B=this.g;if((S=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(S)){var G=S;break t}}G=null}if(h=G)vs(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ts(this,h);else{this.o=!1,this.m=3,Rt(12),An(this),Ln(this);break e}}if(this.R){h=!0;let ht;for(;!this.K&&this.C<w.length;)if(ht=Hu(this,w),ht==$t){Ie==4&&(this.m=4,Rt(14),h=!1),vs(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==Ct){this.m=4,Rt(15),vs(this.i,this.l,w,"[Invalid Chunk]"),h=!1;break}else vs(this.i,this.l,ht,null),Ts(this,ht);if(qu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ie!=4||w.length!=0||this.h.h||(this.m=1,Rt(16),h=!1),this.o=this.o&&h,!h)vs(this.i,this.l,w,"[Invalid Chunked Response]"),An(this),Ln(this);else if(w.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),ll(ae),ae.P=!0,Rt(11))}}else vs(this.i,this.l,w,null),Ts(this,w);Ie==4&&An(this),this.o&&!this.K&&(Ie==4?Wu(this.j,this):(this.o=!1,ws(this)))}else Qs(this.g),y==400&&w.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),An(this),Ln(this)}}}catch{}finally{}};function wd(h){if(!qu(h))return h.g.la();const y=Jt(h.g);if(y==="")return"";let w="";const S=y.length,B=ss(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return An(h),Ln(h),"";h.h.i=new c.TextDecoder}for(let G=0;G<S;G++)h.h.h=!0,w+=h.h.i.decode(y[G],{stream:!(B&&G==S-1)});return y.length=0,h.h.g+=w,h.C=0,h.h.g}function qu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Hu(h,y){var w=h.C,S=y.indexOf(`
`,w);return S==-1?$t:(w=Number(y.substring(w,S)),isNaN(w)?Ct:(S+=1,S+w>y.length?$t:(y=y.slice(S,S+w),h.C=S+w,y)))}Zn.prototype.cancel=function(){this.K=!0,An(this)};function ws(h){h.T=Date.now()+h.H,_a(h,h.H)}function _a(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=_s(p(h.aa,h),y)}function Es(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Zn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ai(this.i,this.B),this.M!=2&&(ps(),Rt(17)),An(this),this.m=2,Ln(this)):_a(this,this.T-h)};function Ln(h){h.j.I==0||h.K||Wu(h.j,h)}function An(h){Es(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Fo(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Ts(h,y){try{var w=h.j;if(w.I!=0&&(w.g==h||As(w.h,h))){if(!h.L&&As(w.h,h)&&w.I==3){try{var S=w.Ba.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var B=S;if(B[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<h.F)xa(w),Ir(w);else break e;Mi(w),Rt(18)}}else w.xa=B[1],0<w.xa-w.K&&B[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=_s(p(w.Va,w),6e3));Ss(w.h)<=1&&w.ta&&(w.ta=void 0)}else Os(w,11)}else if((h.L||w.g==h)&&xa(w),!N(y))for(B=w.Ba.g.parse(y),y=0;y<B.length;y++){let Qe=B[y];const ht=Qe[0];if(!(ht<=w.K))if(w.K=ht,Qe=Qe[1],w.I==2)if(Qe[0]=="c"){w.M=Qe[1],w.ba=Qe[2];const qn=Qe[3];qn!=null&&(w.ka=qn,w.j.info("VER="+w.ka));const ks=Qe[4];ks!=null&&(w.za=ks,w.j.info("SVER="+w.za));const rs=Qe[5];rs!=null&&typeof rs=="number"&&rs>0&&(S=1.5*rs,w.O=S,w.j.info("backChannelRequestTimeoutMs_="+S)),S=w;const is=h.g;if(is){const Pi=is.g?is.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pi){var G=S.h;G.g||Pi.indexOf("spdy")==-1&&Pi.indexOf("quic")==-1&&Pi.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(Jo(G,G.h),G.h=null))}if(S.G){const Ra=is.g?is.g.getResponseHeader("X-HTTP-Session-Id"):null;Ra&&(S.wa=Ra,Je(S.J,S.G,Ra))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-h.F,w.j.info("Handshake RTT: "+w.T+"ms")),S=w;var ae=h;if(S.na=tc(S,S.L?S.ba:null,S.W),ae.L){Xo(S.h,ae);var Ie=ae,Et=S.O;Et&&(Ie.H=Et),Ie.D&&(Es(Ie),ws(Ie)),S.g=ae}else Ju(S);w.i.length>0&&Ns(w)}else Qe[0]!="stop"&&Qe[0]!="close"||Os(w,7);else w.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Os(w,7):al(w):Qe[0]!="noop"&&w.l&&w.l.qa(Qe),w.A=0)}}ps(4)}catch{}}var It=class{constructor(h,y){this.g=h,this.map=y}};function Qo(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Yo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ss(h){return h.h?1:h.g?h.g.size:0}function As(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Jo(h,y){h.g?h.g.add(y):h.h=y}function Xo(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Qo.prototype.cancel=function(){if(this.i=Wo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Wo(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const w of h.g.values())y=y.concat(w.G);return y}return A(h.i)}var $u=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function va(h,y){if(h){h=h.split("&");for(let w=0;w<h.length;w++){const S=h[w].indexOf("=");let B,G=null;S>=0?(B=h[w].substring(0,S),G=h[w].substring(S+1)):B=h[w],y(B,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function xn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof xn?(this.l=h.l,Ft(this,h.j),this.o=h.o,this.g=h.g,Er(this,h.u),this.h=h.h,Zo(this,Qu(h.i)),this.m=h.m):h&&(y=String(h).match($u))?(this.l=!1,Ft(this,y[1]||"",!0),this.o=xs(y[2]||""),this.g=xs(y[3]||"",!0),Er(this,y[4]),this.h=xs(y[5]||"",!0),Zo(this,y[6]||"",!0),this.m=xs(y[7]||"")):(this.l=!1,this.i=new Sr(null,this.l))}xn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Ii(y,ba,!0),":");var w=this.g;return(w||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Ii(y,ba,!0),"@"),h.push(Gs(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&h.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(Ii(w,w.charAt(0)=="/"?el:Fu,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",Ii(w,Gu)),h.join("")},xn.prototype.resolve=function(h){const y=Nt(this);let w=!!h.j;w?Ft(y,h.j):w=!!h.o,w?y.o=h.o:w=!!h.g,w?y.g=h.g:w=h.u!=null;var S=h.h;if(w)Er(y,h.u);else if(w=!!h.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var B=y.h.lastIndexOf("/");B!=-1&&(S=y.h.slice(0,B+1)+S)}if(B=S,B==".."||B==".")S="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){S=B.lastIndexOf("/",0)==0,B=B.split("/");const G=[];for(let ae=0;ae<B.length;){const Ie=B[ae++];Ie=="."?S&&ae==B.length&&G.push(""):Ie==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),S&&ae==B.length&&G.push("")):(G.push(Ie),S=!0)}S=G.join("/")}else S=B}return w?y.h=S:w=h.i.toString()!=="",w?Zo(y,Qu(h.i)):w=!!h.m,w&&(y.m=h.m),y};function Nt(h){return new xn(h)}function Ft(h,y,w){h.j=w?xs(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Er(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Zo(h,y,w){y instanceof Sr?(h.i=y,Ea(h.i,h.l)):(w||(y=Ii(y,Tr)),h.i=new Sr(y,h.l))}function Je(h,y,w){h.i.set(y,w)}function Ci(h){return Je(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function xs(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ii(h,y,w){return typeof h=="string"?(h=encodeURI(h).replace(y,yn),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function yn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var ba=/[#\/\?@]/g,Fu=/[#\?:]/g,el=/[#\?]/g,Tr=/[#\?@]/g,Gu=/#/g;function Sr(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function _n(h){h.g||(h.g=new Map,h.h=0,h.i&&va(h.i,function(y,w){h.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}s=Sr.prototype,s.add=function(h,y){_n(this),this.i=null,h=Ar(this,h);let w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(y),this.h+=1,this};function Ku(h,y){_n(h),y=Ar(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function tl(h,y){return _n(h),y=Ar(h,y),h.g.has(y)}s.forEach=function(h,y){_n(this),this.g.forEach(function(w,S){w.forEach(function(B){h.call(y,B,S,this)},this)},this)};function nl(h,y){_n(h);let w=[];if(typeof y=="string")tl(h,y)&&(w=w.concat(h.g.get(Ar(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)w=w.concat(h[y]);return w}s.set=function(h,y){return _n(this),this.i=null,h=Ar(this,h),tl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=nl(this,h),h.length>0?String(h[0]):y):y};function wa(h,y,w){Ku(h,y),w.length>0&&(h.i=null,h.g.set(Ar(h,y),A(w)),h.h+=w.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let S=0;S<y.length;S++){var w=y[S];const B=Gs(w);w=nl(this,w);for(let G=0;G<w.length;G++){let ae=B;w[G]!==""&&(ae+="="+Gs(w[G])),h.push(ae)}}return this.i=h.join("&")};function Qu(h){const y=new Sr;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Ar(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Ea(h,y){y&&!h.j&&(_n(h),h.i=null,h.g.forEach(function(w,S){const B=S.toLowerCase();S!=B&&(Ku(this,S),wa(this,B,w))},h)),h.j=y}function ts(h,y){const w=new Wn;if(c.Image){const S=new Image;S.onload=b(zn,w,"TestLoadImage: loaded",!0,y,S),S.onerror=b(zn,w,"TestLoadImage: error",!1,y,S),S.onabort=b(zn,w,"TestLoadImage: abort",!1,y,S),S.ontimeout=b(zn,w,"TestLoadImage: timeout",!1,y,S),c.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function sl(h,y){const w=new Wn,S=new AbortController,B=setTimeout(()=>{S.abort(),zn(w,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(G=>{clearTimeout(B),G.ok?zn(w,"TestPingServer: ok",!0,y):zn(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),zn(w,"TestPingServer: error",!1,y)})}function zn(h,y,w,S,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),S(w)}catch{}}function xr(){this.g=new Mu}function Rs(h){this.i=h.Sb||null,this.h=h.ab||!1}E(Rs,Pu),Rs.prototype.g=function(){return new Ni(this.i,this.h)};function Ni(h,y){st.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Ni,st),s=Ni.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,ns(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Rr(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ns(this)),this.g&&(this.readyState=3,ns(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ta(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ta(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Rr(this):ns(this),this.readyState==3&&Ta(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Rr(this))},s.Na=function(h){this.g&&(this.response=h,Rr(this))},s.ga=function(){this.g&&Rr(this)};function Rr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ns(h)}s.setRequestHeader=function(h,y){this.A.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=y.next();return h.join(`\r
`)};function ns(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ni.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Bn(h){let y="";return je(h,function(w,S){y+=S,y+=":",y+=w,y+=`\r
`}),y}function Oi(h,y,w){e:{for(S in w){var S=!1;break e}S=!0}S||(w=Bn(w),typeof h=="string"?w!=null&&Gs(w):Je(h,y,w))}function Ze(h){st.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Ze,st);var Cs=/^https?$/i,rl=["POST","PUT"];s=Ze.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,y,w,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ko.g(),this.g.onreadystatechange=x(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(G){ki(this,G);return}if(h=w||"",w=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var B in S)w.set(B,S[B]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const G of S.keys())w.set(G,S.get(G));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(w.keys()).find(G=>G.toLowerCase()=="content-type"),B=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(rl,y,void 0)>=0)||S||B||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ae]of w)this.g.setRequestHeader(G,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(G){ki(this,G)}};function ki(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,il(h),Ks(h)}function il(h){h.A||(h.A=!0,Lt(h,"complete"),Lt(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Lt(this,"complete"),Lt(this,"abort"),Ks(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ks(this,!0)),Ze.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?ji(this):this.Xa())},s.Xa=function(){ji(this)};function ji(h){if(h.h&&typeof l<"u"){if(h.v&&ss(h)==4)setTimeout(h.Ca.bind(h),0);else if(Lt(h,"readystatechange"),ss(h)==4){h.h=!1;try{const G=h.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var S;if(S=G===0){let ae=String(h.D).match($u)[1]||null;!ae&&c.self&&c.self.location&&(ae=c.self.location.protocol.slice(0,-1)),S=!Cs.test(ae?ae.toLowerCase():"")}w=S}if(w)Lt(h,"complete"),Lt(h,"success");else{h.o=6;try{var B=ss(h)>2?h.g.statusText:""}catch{B=""}h.l=B+" ["+h.ca()+"]",il(h)}}finally{Ks(h)}}}}function Ks(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const w=h.g;h.g=null,y||Lt(h,"ready");try{w.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function ss(h){return h.g?h.g.readyState:0}s.ca=function(){try{return ss(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),_d(y)}};function Jt(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Qs(h){const y={};h=(h.g&&ss(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(N(h[S]))continue;var w=Bu(h[S]);const B=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const G=y[B]||[];y[B]=G,G.push(w)}qe(y,function(S){return S.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Is(h,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||y}function Cr(h){this.za=0,this.i=[],this.j=new Wn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Is("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Is("baseRetryDelayMs",5e3,h),this.Za=Is("retryDelaySeedMs",1e4,h),this.Ta=Is("forwardChannelMaxRetries",2,h),this.va=Is("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Qo(h&&h.concurrentRequestLimit),this.Ba=new xr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Cr.prototype,s.ka=8,s.I=1,s.connect=function(h,y,w,S){Rt(0),this.W=h,this.H=y||{},w&&S!==void 0&&(this.H.OSID=w,this.H.OAID=S),this.F=this.X,this.J=tc(this,null,this.W),Ns(this)};function al(h){if(Sa(h),h.I==3){var y=h.V++,w=Nt(h.J);if(Je(w,"SID",h.M),Je(w,"RID",y),Je(w,"TYPE","terminate"),Di(h,w),y=new Zn(h,h.j,y),y.M=2,y.A=Ci(Nt(w)),w=!1,c.navigator&&c.navigator.sendBeacon)try{w=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!w&&c.Image&&(new Image().src=y.A,w=!0),w||(y.g=nc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),ws(y)}ec(h)}function Ir(h){h.g&&(ll(h),h.g.cancel(),h.g=null)}function Sa(h){Ir(h),h.v&&(c.clearTimeout(h.v),h.v=null),xa(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Ns(h){if(!Yo(h.h)&&!h.m){h.m=!0;var y=h.Ea;W||R(),re||(W(),re=!0),C.add(y,h),h.D=0}}function Aa(h,y){return Ss(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=_s(p(h.Ea,h,y),Zu(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const B=new Zn(this,this.j,h);let G=this.o;if(this.U&&(G?(G=P(G),le(G,this.U)):G=this.U),this.u!==null||this.R||(B.J=G,G=null),this.S)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var S=this.i[w];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,y>4096){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=Yu(this,B,y),w=Nt(this.J),Je(w,"RID",h),Je(w,"CVER",22),this.G&&Je(w,"X-HTTP-Session-Id",this.G),Di(this,w),G&&(this.R?y="headers="+Gs(Bn(G))+"&"+y:this.u&&Oi(w,this.u,G)),Jo(this.h,B),this.Ra&&Je(w,"TYPE","init"),this.S?(Je(w,"$req",y),Je(w,"SID","null"),B.U=!0,bs(B,w,null)):bs(B,w,y),this.I=2}}else this.I==3&&(h?ol(this,h):this.i.length==0||Yo(this.h)||ol(this))};function ol(h,y){var w;y?w=y.l:w=h.V++;const S=Nt(h.J);Je(S,"SID",h.M),Je(S,"RID",w),Je(S,"AID",h.K),Di(h,S),h.u&&h.o&&Oi(S,h.u,h.o),w=new Zn(h,h.j,w,h.D+1),h.u===null&&(w.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Yu(h,w,1e3),w.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Jo(h.h,w),bs(w,S,y)}function Di(h,y){h.H&&je(h.H,function(w,S){Je(y,S,w)}),h.l&&je({},function(w,S){Je(y,S,w)})}function Yu(h,y,w){w=Math.min(h.i.length,w);const S=h.l?p(h.l.Ka,h.l,h):null;e:{var B=h.i;let Ie=-1;for(;;){const Et=["count="+w];Ie==-1?w>0?(Ie=B[0].g,Et.push("ofs="+Ie)):Ie=0:Et.push("ofs="+Ie);let Qe=!0;for(let ht=0;ht<w;ht++){var G=B[ht].g;const qn=B[ht].map;if(G-=Ie,G<0)Ie=Math.max(0,B[ht].g-100),Qe=!1;else try{G="req"+G+"_"||"";try{var ae=qn instanceof Map?qn:Object.entries(qn);for(const[ks,rs]of ae){let is=rs;m(rs)&&(is=wr(rs)),Et.push(G+ks+"="+encodeURIComponent(is))}}catch(ks){throw Et.push(G+"type="+encodeURIComponent("_badmap")),ks}}catch{S&&S(qn)}}if(Qe){ae=Et.join("&");break e}}ae=void 0}return h=h.i.splice(0,w),y.G=h,ae}function Ju(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;W||R(),re||(W(),re=!0),C.add(y,h),h.A=0}}function Mi(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=_s(p(h.Da,h),Zu(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Xu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=_s(p(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),Ir(this),Xu(this))};function ll(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Xu(h){h.g=new Zn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Nt(h.na);Je(y,"RID","rpc"),Je(y,"SID",h.M),Je(y,"AID",h.K),Je(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Je(y,"TO",h.ia),Je(y,"TYPE","xmlhttp"),Di(h,y),h.u&&h.o&&Oi(y,h.u,h.o),h.O&&(h.g.H=h.O);var w=h.g;h=h.ba,w.M=1,w.A=Ci(Nt(y)),w.u=null,w.R=!0,ya(w,h)}s.Va=function(){this.C!=null&&(this.C=null,Ir(this),Mi(this),Rt(19))};function xa(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Wu(h,y){var w=null;if(h.g==y){xa(h),ll(h),h.g=null;var S=2}else if(As(h.h,y))w=y.G,Xo(h.h,y),S=1;else return;if(h.I!=0){if(y.o)if(S==1){w=y.u?y.u.length:0,y=Date.now()-y.F;var B=h.D;S=pa(),Lt(S,new ys(S,w)),Ns(h)}else Ju(h);else if(B=y.m,B==3||B==0&&y.X>0||!(S==1&&Aa(h,y)||S==2&&Mi(h)))switch(w&&w.length>0&&(y=h.h,y.i=y.i.concat(w)),B){case 1:Os(h,5);break;case 4:Os(h,10);break;case 3:Os(h,6);break;default:Os(h,2)}}}function Zu(h,y){let w=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(w*=2),w*y}function Os(h,y){if(h.j.info("Error code "+y),y==2){var w=p(h.bb,h),S=h.Ua;const B=!S;S=new xn(S||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ft(S,"https"),Ci(S),B?ts(S.toString(),w):sl(S.toString(),w)}else Rt(2);h.I=0,h.l&&h.l.pa(y),ec(h),Sa(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function ec(h){if(h.I=0,h.ja=[],h.l){const y=Wo(h.h);(y.length!=0||h.i.length!=0)&&(k(h.ja,y),k(h.ja,h.i),h.h.i.length=0,A(h.i),h.i.length=0),h.l.oa()}}function tc(h,y,w){var S=w instanceof xn?Nt(w):new xn(w);if(S.g!="")y&&(S.g=y+"."+S.g),Er(S,S.u);else{var B=c.location;S=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;const G=new xn(null);S&&Ft(G,S),y&&(G.g=y),B&&Er(G,B),w&&(G.h=w),S=G}return w=h.G,y=h.wa,w&&y&&Je(S,w,y),Je(S,"VER",h.ka),Di(h,S),S}function nc(h,y,w){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new Ze(new Rs({ab:w})):new Ze(h.ma),y.Fa(h.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function sc(){}s=sc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Nr(){}Nr.prototype.g=function(h,y){return new fn(h,y)};function fn(h,y){st.call(this),this.g=new Cr(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!N(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!N(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Ys(this)}E(fn,st),fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){al(this.g)},fn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.v&&(w={},w.__data__=wr(h),h=w);y.i.push(new It(y.Ya++,h)),y.I==3&&Ns(y)},fn.prototype.N=function(){this.g.l=null,delete this.j,al(this.g),delete this.g,fn.Z.N.call(this)};function rc(h){Yt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const w in y){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(rc,Yt);function ic(){Un.call(this),this.status=1}E(ic,Un);function Ys(h){this.g=h}E(Ys,sc),Ys.prototype.ra=function(){Lt(this.g,"a")},Ys.prototype.qa=function(h){Lt(this.g,new rc(h))},Ys.prototype.pa=function(h){Lt(this.g,new ic)},Ys.prototype.oa=function(){Lt(this.g,"b")},Nr.prototype.createWebChannel=Nr.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,sT=function(){return new Nr},nT=function(){return pa()},tT=wt,fg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xi.NO_ERROR=0,xi.TIMEOUT=8,xi.HTTP_ERROR=6,Ih=xi,Go.COMPLETE="complete",eT=Go,Vu.EventType=Xn,Xn.OPEN="a",Xn.CLOSE="b",Xn.ERROR="c",Xn.MESSAGE="d",st.prototype.listen=st.prototype.J,Xl=Vu,Ze.prototype.listenOnce=Ze.prototype.K,Ze.prototype.getLastError=Ze.prototype.Ha,Ze.prototype.getLastErrorCode=Ze.prototype.ya,Ze.prototype.getStatus=Ze.prototype.ca,Ze.prototype.getResponseJson=Ze.prototype.La,Ze.prototype.getResponseText=Ze.prototype.la,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Fa,ZE=Ze}).apply(typeof bh<"u"?bh:typeof self<"u"?self:typeof window<"u"?window:{});const db="@firebase/firestore",fb="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=new Fg("@firebase/firestore");function ho(){return fa.logLevel}function he(s,...e){if(fa.logLevel<=Le.DEBUG){const t=e.map(sp);fa.debug(`Firestore (${zo}): ${s}`,...t)}}function pr(s,...e){if(fa.logLevel<=Le.ERROR){const t=e.map(sp);fa.error(`Firestore (${zo}): ${s}`,...t)}}function xo(s,...e){if(fa.logLevel<=Le.WARN){const t=e.map(sp);fa.warn(`Firestore (${zo}): ${s}`,...t)}}function sp(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(s,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,rT(s,r,t)}function rT(s,e,t){let r=`FIRESTORE (${zo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw pr(r),new Error(r)}function gt(s,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,s||rT(e,a,r)}function $e(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends yr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(un.UNAUTHENTICATED)))}shutdown(){}}class IN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class NN{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){gt(this.o===void 0,42304);let r=this.i;const a=g=>this.i!==r?(r=this.i,t(g)):Promise.resolve();let l=new oa;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new oa,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await a(this.currentUser)}))},m=g=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new oa)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(gt(typeof r.accessToken=="string",31837,{l:r}),new iT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return gt(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class ON{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class kN{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new ON(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class mb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ds(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){gt(this.o===void 0,3512);const r=l=>{l.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,he("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new mb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(gt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new mb(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=DN(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function Be(s,e){return s<e?-1:s>e?1:0}function mg(s,e){const t=Math.min(s.length,e.length);for(let r=0;r<t;r++){const a=s.charAt(r),l=e.charAt(r);if(a!==l)return Um(a)===Um(l)?Be(a,l):Um(a)?1:-1}return Be(s.length,e.length)}const MN=55296,PN=57343;function Um(s){const e=s.charCodeAt(0);return e>=MN&&e<=PN}function Ro(s,e,t){return s.length===e.length&&s.every(((r,a)=>t(r,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb="__name__";class Vs{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ce(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Vs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vs?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=Vs.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Be(e.length,t.length)}static compareSegments(e,t){const r=Vs.isNumericId(e),a=Vs.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?Vs.extractNumericId(e).compare(Vs.extractNumericId(t)):mg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return di.fromString(e.substring(4,e.length-2))}}class mt extends Vs{construct(e,t,r){return new mt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new mt(t)}static emptyPath(){return new mt([])}}const VN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gn extends Vs{construct(e,t,r){return new gn(e,t,r)}static isValidIdentifier(e){return VN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gb}static keyField(){return new gn([gb])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new pe(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new pe(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new pe(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,a+=2}else m==="`"?(c=!c,a++):m!=="."||c?(r+=m,a++):(l(),a++)}if(l(),c)throw new pe(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gn(t)}static emptyPath(){return new gn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(mt.fromString(e))}static fromName(e){return new we(mt.fromString(e).popFirst(5))}static empty(){return new we(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new mt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(s,e,t){if(!t)throw new pe(oe.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function LN(s,e,t,r){if(e===!0&&r===!0)throw new pe(oe.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function pb(s){if(!we.isDocumentKey(s))throw new pe(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function zN(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function BN(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ce(12329,{type:typeof s})}function gg(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new pe(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=BN(s);throw new pe(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(s,e){const t={typeString:s};return e&&(t.value=e),t}function Iu(s,e){if(!zN(s))throw new pe(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){t=`JSON missing required field: '${r}'`;break}const c=s[r];if(a&&typeof c!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new pe(oe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb=-62135596800,_b=1e6;class Vt{static now(){return Vt.fromMillis(Date.now())}static fromDate(e){return Vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*_b);return new Vt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<yb)throw new pe(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_b}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Iu(e,Vt._jsonSchema))return new Vt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-yb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Vt._jsonSchemaVersion="firestore/timestamp/1.0",Vt._jsonSchema={type:Ut("string",Vt._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new Vt(0,0))}static max(){return new Re(new Vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=-1;function qN(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,a=Re.fromTimestamp(r===1e9?new Vt(t+1,0):new Vt(t,r));return new gi(a,we.empty(),e)}function HN(s){return new gi(s.readTime,s.key,_u)}class gi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new gi(Re.min(),we.empty(),_u)}static max(){return new gi(Re.max(),we.empty(),_u)}}function $N(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(s.documentKey,e.documentKey),t!==0?t:Be(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ad(s){if(s.code!==oe.FAILED_PRECONDITION||s.message!==FN)throw s;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,r)=>{t(e)}))}static reject(e){return new se(((t,r)=>{r(e)}))}static waitFor(e){return new se(((t,r)=>{let a=0,l=0,c=!1;e.forEach((m=>{++a,m.next((()=>{++l,c&&l===a&&t()}),(g=>r(g)))})),c=!0,l===a&&t()}))}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next((a=>a?se.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new se(((r,a)=>{const l=e.length,c=new Array(l);let m=0;for(let g=0;g<l;g++){const p=g;t(e[p]).next((b=>{c[p]=b,++m,m===l&&r(c)}),(b=>a(b)))}}))}static doWhile(e,t){return new se(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}function KN(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Bo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}od.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=-1;function ld(s){return s==null}function pg(s){return s===0&&1/s==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="";function YN(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=vb(e)),e=JN(s.get(t),e);return vb(e)}function JN(s,e){let t=e;const r=s.length;for(let a=0;a<r;a++){const l=s.charAt(a);switch(l){case"\0":t+="";break;case aT:t+="";break;default:t+=l}}return t}function vb(s){return s+aT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Nu(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function XN(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,t){this.comparator=e,this.root=t||nn.EMPTY}insert(e,t){return new xt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(e){return new xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wh(this.root,e,this.comparator,!1)}getReverseIterator(){return new wh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wh(this.root,e,this.comparator,!0)}}class wh{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??nn.RED,this.left=a??nn.EMPTY,this.right=l??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new nn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return nn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.comparator=e,this.data=new xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wb(this.data.getIterator())}getIteratorFrom(e){return new wb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Ht)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ht(this.comparator);return t.data=e,t}}class wb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.fields=e,e.sort(gn.comparator)}static empty(){return new ai([])}unionWith(e){let t=new Ht(gn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ai(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ro(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new oT("Invalid base64 string: "+l):l}})(e);return new sn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new sn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const WN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pi(s){if(gt(!!s,39018),typeof s=="string"){let e=0;const t=WN.exec(s);if(gt(!!t,46558,{timestamp:s}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:At(s.seconds),nanos:At(s.nanos)}}function At(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function yi(s){return typeof s=="string"?sn.fromBase64String(s):sn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="server_timestamp",uT="__type__",cT="__previous_value__",hT="__local_write_time__";function ip(s){var t,r;return((r=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[uT])==null?void 0:r.stringValue)===lT}function ud(s){const e=s.mapValue.fields[cT];return ip(e)?ud(e):e}function vu(s){const e=pi(s.mapValue.fields[hT].timestampValue);return new Vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e,t,r,a,l,c,m,g,p,b){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=b}}const Gh="(default)";class bu{constructor(e,t){this.projectId=e,this.database=t||Gh}static empty(){return new bu("","")}get isDefaultDatabase(){return this.database===Gh}isEqual(e){return e instanceof bu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO="__type__",tO="__max__",Eh={mapValue:{}},nO="__vector__",yg="value";function _i(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?ip(s)?4:rO(s)?9007199254740991:sO(s)?10:11:Ce(28295,{value:s})}function Hs(s,e){if(s===e)return!0;const t=_i(s);if(t!==_i(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return vu(s).isEqual(vu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=pi(a.timestampValue),m=pi(l.timestampValue);return c.seconds===m.seconds&&c.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(a,l){return yi(a.bytesValue).isEqual(yi(l.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(a,l){return At(a.geoPointValue.latitude)===At(l.geoPointValue.latitude)&&At(a.geoPointValue.longitude)===At(l.geoPointValue.longitude)})(s,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return At(a.integerValue)===At(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=At(a.doubleValue),m=At(l.doubleValue);return c===m?pg(c)===pg(m):isNaN(c)&&isNaN(m)}return!1})(s,e);case 9:return Ro(s.arrayValue.values||[],e.arrayValue.values||[],Hs);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},m=l.mapValue.fields||{};if(bb(c)!==bb(m))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(m[g]===void 0||!Hs(c[g],m[g])))return!1;return!0})(s,e);default:return Ce(52216,{left:s})}}function wu(s,e){return(s.values||[]).find((t=>Hs(t,e)))!==void 0}function Co(s,e){if(s===e)return 0;const t=_i(s),r=_i(e);if(t!==r)return Be(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(s.booleanValue,e.booleanValue);case 2:return(function(l,c){const m=At(l.integerValue||l.doubleValue),g=At(c.integerValue||c.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,e);case 3:return Eb(s.timestampValue,e.timestampValue);case 4:return Eb(vu(s),vu(e));case 5:return mg(s.stringValue,e.stringValue);case 6:return(function(l,c){const m=yi(l),g=yi(c);return m.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(l,c){const m=l.split("/"),g=c.split("/");for(let p=0;p<m.length&&p<g.length;p++){const b=Be(m[p],g[p]);if(b!==0)return b}return Be(m.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(l,c){const m=Be(At(l.latitude),At(c.latitude));return m!==0?m:Be(At(l.longitude),At(c.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Tb(s.arrayValue,e.arrayValue);case 10:return(function(l,c){var x,A,k,D;const m=l.fields||{},g=c.fields||{},p=(x=m[yg])==null?void 0:x.arrayValue,b=(A=g[yg])==null?void 0:A.arrayValue,E=Be(((k=p==null?void 0:p.values)==null?void 0:k.length)||0,((D=b==null?void 0:b.values)==null?void 0:D.length)||0);return E!==0?E:Tb(p,b)})(s.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Eh.mapValue&&c===Eh.mapValue)return 0;if(l===Eh.mapValue)return 1;if(c===Eh.mapValue)return-1;const m=l.fields||{},g=Object.keys(m),p=c.fields||{},b=Object.keys(p);g.sort(),b.sort();for(let E=0;E<g.length&&E<b.length;++E){const x=mg(g[E],b[E]);if(x!==0)return x;const A=Co(m[g[E]],p[b[E]]);if(A!==0)return A}return Be(g.length,b.length)})(s.mapValue,e.mapValue);default:throw Ce(23264,{he:t})}}function Eb(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Be(s,e);const t=pi(s),r=pi(e),a=Be(t.seconds,r.seconds);return a!==0?a:Be(t.nanos,r.nanos)}function Tb(s,e){const t=s.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=Co(t[a],r[a]);if(l)return l}return Be(t.length,r.length)}function Io(s){return _g(s)}function _g(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const r=pi(t);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return yi(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return we.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=_g(l);return r+"]"})(s.arrayValue):"mapValue"in s?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${_g(t.fields[c])}`;return a+"}"})(s.mapValue):Ce(61005,{value:s})}function Nh(s){switch(_i(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ud(s);return e?16+Nh(e):16;case 5:return 2*s.stringValue.length;case 6:return yi(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+Nh(l)),0)})(s.arrayValue);case 10:case 11:return(function(r){let a=0;return Nu(r.fields,((l,c)=>{a+=l.length+Nh(c)})),a})(s.mapValue);default:throw Ce(13486,{value:s})}}function vg(s){return!!s&&"integerValue"in s}function ap(s){return!!s&&"arrayValue"in s}function Sb(s){return!!s&&"nullValue"in s}function Ab(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Lm(s){return!!s&&"mapValue"in s}function sO(s){var t,r;return((r=(((t=s==null?void 0:s.mapValue)==null?void 0:t.fields)||{})[eO])==null?void 0:r.stringValue)===nO}function iu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Nu(s.mapValue.fields,((t,r)=>e.mapValue.fields[t]=iu(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=iu(s.arrayValue.values[t]);return e}return{...s}}function rO(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===tO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this.value=e}static empty(){return new Us({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Lm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=iu(t)}setAll(e){let t=gn.emptyPath(),r={},a=[];e.forEach(((c,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,r,a),r={},a=[],t=m.popLast()}c?r[m.lastSegment()]=iu(c):a.push(m.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());Lm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Lm(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){Nu(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new Us(iu(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,t,r,a,l,c,m){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=m}static newInvalidDocument(e){return new cn(e,0,Re.min(),Re.min(),Re.min(),Us.empty(),0)}static newFoundDocument(e,t,r,a){return new cn(e,1,t,Re.min(),r,a,0)}static newNoDocument(e,t){return new cn(e,2,t,Re.min(),Re.min(),Us.empty(),0)}static newUnknownDocument(e,t){return new cn(e,3,t,Re.min(),Re.min(),Us.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Us.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Us.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,t){this.position=e,this.inclusive=t}}function xb(s,e,t){let r=0;for(let a=0;a<s.position.length;a++){const l=e[a],c=s.position[a];if(l.field.isKeyField()?r=we.comparator(we.fromName(c.referenceValue),t.key):r=Co(c,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function Rb(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Hs(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,t="asc"){this.field=e,this.dir=t}}function iO(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{}class qt extends dT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new oO(e,t,r):t==="array-contains"?new cO(e,r):t==="in"?new hO(e,r):t==="not-in"?new dO(e,r):t==="array-contains-any"?new fO(e,r):new qt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new lO(e,r):new uO(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Co(t,this.value)):t!==null&&_i(this.value)===_i(t)&&this.matchesComparison(Co(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $s extends dT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new $s(e,t)}matches(e){return fT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function fT(s){return s.op==="and"}function mT(s){return aO(s)&&fT(s)}function aO(s){for(const e of s.filters)if(e instanceof $s)return!1;return!0}function bg(s){if(s instanceof qt)return s.field.canonicalString()+s.op.toString()+Io(s.value);if(mT(s))return s.filters.map((e=>bg(e))).join(",");{const e=s.filters.map((t=>bg(t))).join(",");return`${s.op}(${e})`}}function gT(s,e){return s instanceof qt?(function(r,a){return a instanceof qt&&r.op===a.op&&r.field.isEqual(a.field)&&Hs(r.value,a.value)})(s,e):s instanceof $s?(function(r,a){return a instanceof $s&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,c,m)=>l&&gT(c,a.filters[m])),!0):!1})(s,e):void Ce(19439)}function pT(s){return s instanceof qt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Io(t.value)}`})(s):s instanceof $s?(function(t){return t.op.toString()+" {"+t.getFilters().map(pT).join(" ,")+"}"})(s):"Filter"}class oO extends qt{constructor(e,t,r){super(e,t,r),this.key=we.fromName(r.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class lO extends qt{constructor(e,t){super(e,"in",t),this.keys=yT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class uO extends qt{constructor(e,t){super(e,"not-in",t),this.keys=yT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function yT(s,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>we.fromName(r.referenceValue)))}class cO extends qt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ap(t)&&wu(t.arrayValue,this.value)}}class hO extends qt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&wu(this.value.arrayValue,t)}}class dO extends qt{constructor(e,t){super(e,"not-in",t)}matches(e){if(wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!wu(this.value.arrayValue,t)}}class fO extends qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ap(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>wu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e,t=null,r=[],a=[],l=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=m,this.Te=null}}function Cb(s,e=null,t=[],r=[],a=null,l=null,c=null){return new mO(s,e,t,r,a,l,c)}function op(s){const e=$e(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>bg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),ld(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Io(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Io(r))).join(",")),e.Te=t}return e.Te}function lp(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!iO(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!gT(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Rb(s.startAt,e.startAt)&&Rb(s.endAt,e.endAt)}function wg(s){return we.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,t=null,r=[],a=[],l=null,c="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function gO(s,e,t,r,a,l,c,m){return new cd(s,e,t,r,a,l,c,m)}function up(s){return new cd(s)}function Ib(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function pO(s){return s.collectionGroup!==null}function au(s){const e=$e(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let m=new Ht(gn.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Qh(l,r))})),t.has(gn.keyField().canonicalString())||e.Ie.push(new Qh(gn.keyField(),r))}return e.Ie}function qs(s){const e=$e(s);return e.Ee||(e.Ee=yO(e,au(s))),e.Ee}function yO(s,e){if(s.limitType==="F")return Cb(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Qh(a.field,l)}));const t=s.endAt?new Kh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Kh(s.startAt.position,s.startAt.inclusive):null;return Cb(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function Eg(s,e,t){return new cd(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function hd(s,e){return lp(qs(s),qs(e))&&s.limitType===e.limitType}function _T(s){return`${op(qs(s))}|lt:${s.limitType}`}function fo(s){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>pT(a))).join(", ")}]`),ld(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>Io(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>Io(a))).join(",")),`Target(${r})`})(qs(s))}; limitType=${s.limitType})`}function dd(s,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):we.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(s,e)&&(function(r,a){for(const l of au(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(s,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(s,e)&&(function(r,a){return!(r.startAt&&!(function(c,m,g){const p=xb(c,m,g);return c.inclusive?p<=0:p<0})(r.startAt,au(r),a)||r.endAt&&!(function(c,m,g){const p=xb(c,m,g);return c.inclusive?p>=0:p>0})(r.endAt,au(r),a))})(s,e)}function _O(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function vT(s){return(e,t)=>{let r=!1;for(const a of au(s)){const l=vO(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function vO(s,e,t){const r=s.field.isKeyField()?we.comparator(e.key,t.key):(function(l,c,m){const g=c.data.field(l),p=m.data.field(l);return g!==null&&p!==null?Co(g,p):Ce(42886)})(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return Ce(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Nu(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return XN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=new xt(we.comparator);function vi(){return bO}const bT=new xt(we.comparator);function Wl(...s){let e=bT;for(const t of s)e=e.insert(t.key,t);return e}function wO(s){let e=bT;return s.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function aa(){return ou()}function wT(){return ou()}function ou(){return new ga((s=>s.toString()),((s,e)=>s.isEqual(e)))}const EO=new Ht(we.comparator);function Fe(...s){let e=EO;for(const t of s)e=e.add(t);return e}const TO=new Ht(Be);function SO(){return TO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pg(e)?"-0":e}}function xO(s){return{integerValue:""+s}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(){this._=void 0}}function RO(s,e,t){return s instanceof Tg?(function(a,l){const c={fields:{[uT]:{stringValue:lT},[hT]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&ip(l)&&(l=ud(l)),l&&(c.fields[cT]=l),{mapValue:c}})(t,e):s instanceof Yh?ET(s,e):s instanceof Jh?TT(s,e):(function(a,l){const c=IO(a,l),m=Nb(c)+Nb(a.Ae);return vg(c)&&vg(a.Ae)?xO(m):AO(a.serializer,m)})(s,e)}function CO(s,e,t){return s instanceof Yh?ET(s,e):s instanceof Jh?TT(s,e):t}function IO(s,e){return s instanceof Sg?(function(r){return vg(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class Tg extends fd{}class Yh extends fd{constructor(e){super(),this.elements=e}}function ET(s,e){const t=ST(e);for(const r of s.elements)t.some((a=>Hs(a,r)))||t.push(r);return{arrayValue:{values:t}}}class Jh extends fd{constructor(e){super(),this.elements=e}}function TT(s,e){let t=ST(e);for(const r of s.elements)t=t.filter((a=>!Hs(a,r)));return{arrayValue:{values:t}}}class Sg extends fd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Nb(s){return At(s.integerValue||s.doubleValue)}function ST(s){return ap(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function NO(s,e){return s.field.isEqual(e.field)&&(function(r,a){return r instanceof Yh&&a instanceof Yh||r instanceof Jh&&a instanceof Jh?Ro(r.elements,a.elements,Hs):r instanceof Sg&&a instanceof Sg?Hs(r.Ae,a.Ae):r instanceof Tg&&a instanceof Tg})(s.transform,e.transform)}class la{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new la}static exists(e){return new la(void 0,e)}static updateTime(e){return new la(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Oh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class cp{}function AT(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new kO(s.key,la.none()):new hp(s.key,s.data,la.none());{const t=s.data,r=Us.empty();let a=new Ht(gn.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new md(s.key,r,new ai(a.toArray()),la.none())}}function OO(s,e,t){s instanceof hp?(function(a,l,c){const m=a.value.clone(),g=kb(a.fieldTransforms,l,c.transformResults);m.setAll(g),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(s,e,t):s instanceof md?(function(a,l,c){if(!Oh(a.precondition,l))return void l.convertToUnknownDocument(c.version);const m=kb(a.fieldTransforms,l,c.transformResults),g=l.data;g.setAll(xT(a)),g.setAll(m),l.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(s,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function lu(s,e,t,r){return s instanceof hp?(function(l,c,m,g){if(!Oh(l.precondition,c))return m;const p=l.value.clone(),b=jb(l.fieldTransforms,g,c);return p.setAll(b),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(s,e,t,r):s instanceof md?(function(l,c,m,g){if(!Oh(l.precondition,c))return m;const p=jb(l.fieldTransforms,g,c),b=c.data;return b.setAll(xT(l)),b.setAll(p),c.convertToFoundDocument(c.version,b).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(s,e,t,r):(function(l,c,m){return Oh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):m})(s,e,t)}function Ob(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Ro(r,a,((l,c)=>NO(l,c)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class hp extends cp{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class md extends cp{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function xT(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}})),e}function kb(s,e,t){const r=new Map;gt(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let a=0;a<t.length;a++){const l=s[a],c=l.transform,m=e.data.field(l.field);r.set(l.field,CO(c,m,t[a]))}return r}function jb(s,e,t){const r=new Map;for(const a of s){const l=a.transform,c=t.data.field(a.field);r.set(a.field,RO(l,c,e))}return r}class kO extends cp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&OO(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=lu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=lu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=wT();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let m=this.applyToLocalView(c,l.mutatedFields);m=t.has(a.key)?null:m;const g=AT(c,m);g!==null&&r.set(a.key,g),c.isValidDocument()||c.convertToNoDocument(Re.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Fe())}isEqual(e){return this.batchId===e.batchId&&Ro(this.mutations,e.mutations,((t,r)=>Ob(t,r)))&&Ro(this.baseMutations,e.baseMutations,((t,r)=>Ob(t,r)))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt,He;function RT(s){if(s===void 0)return pr("GRPC error has no .code"),oe.UNKNOWN;switch(s){case Mt.OK:return oe.OK;case Mt.CANCELLED:return oe.CANCELLED;case Mt.UNKNOWN:return oe.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return oe.INTERNAL;case Mt.UNAVAILABLE:return oe.UNAVAILABLE;case Mt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Mt.NOT_FOUND:return oe.NOT_FOUND;case Mt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Mt.ABORTED:return oe.ABORTED;case Mt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Mt.DATA_LOSS:return oe.DATA_LOSS;default:return Ce(39323,{code:s})}}(He=Mt||(Mt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO=new di([4294967295,4294967295],0);function Db(s){const e=PO().encode(s),t=new WE;return t.update(e),new Uint8Array(t.digest())}function Mb(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new di([t,r],0),new di([a,l],0)]}class dp{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Zl(`Invalid padding: ${t}`);if(r<0)throw new Zl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Zl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=di.fromNumber(this.ge)}ye(e,t,r){let a=e.add(t.multiply(di.fromNumber(r)));return a.compare(VO)===1&&(a=new di([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Db(e),[r,a]=Mb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);if(!this.we(c))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new dp(l,a,t);return r.forEach((m=>c.insert(m))),c}insert(e){if(this.ge===0)return;const t=Db(e),[r,a]=Mb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(r,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Ou.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new gd(Re.min(),a,new xt(Be),vi(),Fe())}}class Ou{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ou(r,t,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,t,r,a){this.be=e,this.removedTargetIds=t,this.key=r,this.De=a}}class CT{constructor(e,t){this.targetId=e,this.Ce=t}}class IT{constructor(e,t,r=sn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class Pb{constructor(){this.ve=0,this.Fe=Vb(),this.Me=sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),t=Fe(),r=Fe();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:Ce(38017,{changeType:l})}})),new Ou(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Vb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,gt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class UO{constructor(e){this.Ge=e,this.ze=new Map,this.je=vi(),this.Je=Th(),this.He=Th(),this.Ye=new xt(Be)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,r=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(wg(l))if(r===0){const c=new we(l.path);this.et(t,c,cn.newNoDocument(c,Re.min()))}else gt(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const m=this.ut(e),g=m?this.ct(m,e,c):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let c,m;try{c=yi(r).toUint8Array()}catch(g){if(g instanceof oT)return xo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new dp(c,a,l)}catch(g){return xo(g instanceof Zl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const c=this.Ge.ht(),m=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const m=this.ot(c);if(m){if(l.current&&wg(m.target)){const g=new we(m.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,cn.newNoDocument(g,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let r=Fe();this.He.forEach(((l,c)=>{let m=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new gd(e,t,this.Ye,this.je,r);return this.je=vi(),this.Je=Th(),this.He=Th(),this.Ye=new xt(Be),a}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Pb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ht(Be),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ht(Be),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Pb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Th(){return new xt(we.comparator)}function Vb(){return new xt(we.comparator)}const LO={asc:"ASCENDING",desc:"DESCENDING"},zO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BO={and:"AND",or:"OR"};class qO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ag(s,e){return s.useProto3Json||ld(e)?e:{value:e}}function HO(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $O(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function wo(s){return gt(!!s,49232),Re.fromTimestamp((function(t){const r=pi(t);return new Vt(r.seconds,r.nanos)})(s))}function FO(s,e){return xg(s,e).canonicalString()}function xg(s,e){const t=(function(a){return new mt(["projects",a.projectId,"databases",a.database])})(s).child("documents");return e===void 0?t:t.child(e)}function NT(s){const e=mt.fromString(s);return gt(MT(e),10190,{key:e.toString()}),e}function zm(s,e){const t=NT(e);if(t.get(1)!==s.databaseId.projectId)throw new pe(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new pe(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new we(kT(t))}function OT(s,e){return FO(s.databaseId,e)}function GO(s){const e=NT(s);return e.length===4?mt.emptyPath():kT(e)}function Ub(s){return new mt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function kT(s){return gt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function KO(s,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ce(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,b){return p.useProto3Json?(gt(b===void 0||typeof b=="string",58123),sn.fromBase64String(b||"")):(gt(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),sn.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&(function(p){const b=p.code===void 0?oe.UNKNOWN:RT(p.code);return new pe(b,p.message||"")})(c);t=new IT(r,a,l,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=zm(s,r.document.name),l=wo(r.document.updateTime),c=r.document.createTime?wo(r.document.createTime):Re.min(),m=new Us({mapValue:{fields:r.document.fields}}),g=cn.newFoundDocument(a,l,c,m),p=r.targetIds||[],b=r.removedTargetIds||[];t=new kh(p,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=zm(s,r.document),l=r.readTime?wo(r.readTime):Re.min(),c=cn.newNoDocument(a,l),m=r.removedTargetIds||[];t=new kh([],m,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=zm(s,r.document),l=r.removedTargetIds||[];t=new kh([],l,a,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new MO(a,l),m=r.targetId;t=new CT(m,c)}}return t}function QO(s,e){return{documents:[OT(s,e.path)]}}function YO(s,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=OT(s,a);const l=(function(p){if(p.length!==0)return DT($s.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((b=>(function(x){return{field:mo(x.field),direction:WO(x.dir)}})(b)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const m=Ag(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:a}}function JO(s){let e=GO(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){gt(r===1,65062);const b=t.from[0];b.allDescendants?a=b.collectionId:e=e.child(b.collectionId)}let l=[];t.where&&(l=(function(E){const x=jT(E);return x instanceof $s&&mT(x)?x.getFilters():[x]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((x=>(function(k){return new Qh(go(k.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(x)))})(t.orderBy));let m=null;t.limit&&(m=(function(E){let x;return x=typeof E=="object"?E.value:E,ld(x)?null:x})(t.limit));let g=null;t.startAt&&(g=(function(E){const x=!!E.before,A=E.values||[];return new Kh(A,x)})(t.startAt));let p=null;return t.endAt&&(p=(function(E){const x=!E.before,A=E.values||[];return new Kh(A,x)})(t.endAt)),gO(e,a,c,l,m,"F",g,p)}function XO(s,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function jT(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=go(t.unaryFilter.field);return qt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=go(t.unaryFilter.field);return qt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=go(t.unaryFilter.field);return qt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=go(t.unaryFilter.field);return qt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(s):s.fieldFilter!==void 0?(function(t){return qt.create(go(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return $s.create(t.compositeFilter.filters.map((r=>jT(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(t.compositeFilter.op))})(s):Ce(30097,{filter:s})}function WO(s){return LO[s]}function ZO(s){return zO[s]}function e5(s){return BO[s]}function mo(s){return{fieldPath:s.canonicalString()}}function go(s){return gn.fromServerFormat(s.fieldPath)}function DT(s){return s instanceof qt?(function(t){if(t.op==="=="){if(Ab(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NAN"}};if(Sb(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ab(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NOT_NAN"}};if(Sb(t.value))return{unaryFilter:{field:mo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mo(t.field),op:ZO(t.op),value:t.value}}})(s):s instanceof $s?(function(t){const r=t.getFilters().map((a=>DT(a)));return r.length===1?r[0]:{compositeFilter:{op:e5(t.op),filters:r}}})(s):Ce(54877,{filter:s})}function MT(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,t,r,a,l=Re.min(),c=Re.min(),m=sn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new oi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new oi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e){this.yt=e}}function n5(s){const e=JO({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Eg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(){this.Cn=new r5}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(gi.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(gi.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class r5{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new Ht(mt.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new Ht(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},PT=41943040;class Sn{static withCacheSize(e){return new Sn(e,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(PT,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new No(0)}static cr(){return new No(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="LruGarbageCollector",i5=1048576;function Bb([s,e],[t,r]){const a=Be(s,t);return a===0?Be(e,r):a}class a5{constructor(e){this.Ir=e,this.buffer=new Ht(Bb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Bb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class o5{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(zb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Bo(t)?he(zb,"Ignoring IndexedDB error during garbage collection: ",t):await ad(t)}await this.Vr(3e5)}))}}class l5{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(od.ce);const r=new a5(t);return this.mr.forEachTarget(e,(a=>r.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>r.Ar(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(Lb)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lb):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,a,l,c,m,g,p;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,c=Date.now(),this.nthSequenceNumber(e,a)))).next((E=>(r=E,m=Date.now(),this.removeTargets(e,r,t)))).next((E=>(l=E,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((E=>(p=Date.now(),ho()<=Le.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-b}ms
	Determined least recently used ${a} in `+(m-c)+`ms
	Removed ${l} targets in `+(g-m)+`ms
	Removed ${E} documents in `+(p-g)+`ms
Total Duration: ${p-b}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E}))))}}function u5(s,e){return new l5(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(){this.changes=new ga((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&lu(r.mutation,a,ai.empty(),Vt.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Fe()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Fe()){const a=aa();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let c=Wl();return l.forEach(((m,g)=>{c=c.insert(m,g.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=aa();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Fe())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,m)=>{t.set(c,m)}))}))}computeViews(e,t,r,a){let l=vi();const c=ou(),m=(function(){return ou()})();return t.forEach(((g,p)=>{const b=r.get(p.key);a.has(p.key)&&(b===void 0||b.mutation instanceof md)?l=l.insert(p.key,p):b!==void 0?(c.set(p.key,b.mutation.getFieldMask()),lu(b.mutation,p,b.mutation.getFieldMask(),Vt.now())):c.set(p.key,ai.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((p,b)=>c.set(p,b))),t.forEach(((p,b)=>m.set(p,new h5(b,c.get(p)??null)))),m)))}recalculateAndSaveOverlays(e,t){const r=ou();let a=new xt(((c,m)=>c-m)),l=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const m of c)m.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let b=r.get(g)||ai.empty();b=m.applyToLocalView(p,b),r.set(g,b);const E=(a.get(m.batchId)||Fe()).add(g);a=a.insert(m.batchId,E)}))})).next((()=>{const c=[],m=a.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),p=g.key,b=g.value,E=wT();b.forEach((x=>{if(!l.has(x)){const A=AT(t.get(x),r.get(x));A!==null&&E.set(x,A),l=l.add(x)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,E))}return se.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return(function(c){return we.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pO(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):se.resolve(aa());let m=_u,g=l;return c.next((p=>se.forEach(p,((b,E)=>(m<E.largestBatchId&&(m=E.largestBatchId),l.get(b)?se.resolve():this.remoteDocumentCache.getEntry(e,b).next((x=>{g=g.insert(b,x)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,g,p,Fe()))).next((b=>({batchId:m,changes:wO(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((r=>{let a=Wl();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let c=Wl();return this.indexManager.getCollectionParents(e,l).next((m=>se.forEach(m,(g=>{const p=(function(E,x){return new cd(x,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,r,a).next((b=>{b.forEach(((E,x)=>{c=c.insert(E,x)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((c=>{l.forEach(((g,p)=>{const b=p.getKey();c.get(b)===null&&(c=c.insert(b,cn.newInvalidDocument(b)))}));let m=Wl();return c.forEach(((g,p)=>{const b=l.get(g);b!==void 0&&lu(b.mutation,p,ai.empty(),Vt.now()),dd(t,p)&&(m=m.insert(g,p))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return se.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:wo(a.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:n5(a.bundledQuery),readTime:wo(a.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(){this.overlays=new xt(we.comparator),this.qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=aa();return se.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.St(e,t,l)})),se.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.qr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const a=aa(),l=t.length+1,c=new we(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const g=m.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&g.largestBatchId>r&&a.set(g.getKey(),g)}return se.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new xt(((p,b)=>p-b));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let b=l.get(p.largestBatchId);b===null&&(b=aa(),l=l.insert(p.largestBatchId,b)),b.set(p.getKey(),p)}}const m=aa(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,b)=>m.set(p,b))),!(m.size()>=a)););return se.resolve(m)}St(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(r.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new DO(t,r));let l=this.qr.get(t);l===void 0&&(l=Fe(),this.qr.set(t,l)),this.qr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(){this.Qr=new Ht(Kt.$r),this.Ur=new Ht(Kt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Kt(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Kt(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new we(new mt([])),r=new Kt(t,e),a=new Kt(t,e+1),l=[];return this.Ur.forEachInRange([r,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new we(new mt([])),r=new Kt(t,e),a=new Kt(t,e+1);let l=Fe();return this.Ur.forEachInRange([r,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Kt(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Kt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return we.comparator(e.key,t.key)||Be(e.Yr,t.Yr)}static Kr(e,t){return Be(e.Yr,t.Yr)||we.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ht(Kt.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new jO(l,t,r,a);this.mutationQueue.push(c);for(const m of a)this.Zr=this.Zr.add(new Kt(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return se.resolve(c)}lookupMutationBatch(e,t){return se.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.ei(r),l=a<0?0:a;return se.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?QN:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Kt(t,0),a=new Kt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([r,a],(c=>{const m=this.Xr(c.Yr);l.push(m)})),se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ht(Be);return t.forEach((a=>{const l=new Kt(a,0),c=new Kt(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(m=>{r=r.add(m.Yr)}))})),se.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;we.isDocumentKey(l)||(l=l.child(""));const c=new Kt(new we(l),0);let m=new Ht(Be);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!r.isPrefixOf(p)&&(p.length===a&&(m=m.add(g.Yr)),!0)}),c),se.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((r=>{const a=this.Xr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){gt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return se.forEach(t.mutations,(a=>{const l=new Kt(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Kt(t,0),a=this.Zr.firstAfterOrEqual(r);return se.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(e){this.ri=e,this.docs=(function(){return new xt(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():cn.newInvalidDocument(t))}getEntries(e,t){let r=vi();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():cn.newInvalidDocument(a))})),se.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=vi();const c=t.path,m=new we(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:p,value:{document:b}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||$N(HN(b),r)<=0||(a.has(b.key)||dd(t,b))&&(l=l.insert(b.key,b.mutableCopy()))}return se.resolve(l)}getAllFromCollectionGroup(e,t,r,a){Ce(9500)}ii(e,t){return se.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new _5(this)}getSize(e){return se.resolve(this.size)}}class _5 extends c5{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(r)})),se.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(e){this.persistence=e,this.si=new ga((t=>op(t)),lp),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new fp,this.targetCount=0,this.ai=No.ur()}forEachTarget(e,t){return this.si.forEach(((r,a)=>t(a))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),se.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new No(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Pr(t),se.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.si.forEach(((c,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)})),se.waitFor(l).next((()=>a))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),se.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),se.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e,t){this.ui={},this.overlays={},this.ci=new od(0),this.li=!1,this.li=!0,this.hi=new g5,this.referenceDelegate=e(this),this.Pi=new v5(this),this.indexManager=new s5,this.remoteDocumentCache=(function(a){return new y5(a)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new t5(t),this.Ii=new f5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new m5,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new p5(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){he("MemoryPersistence","Starting transaction:",e);const a=new b5(this.ci.next());return this.referenceDelegate.Ei(),r(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return se.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class b5 extends GN{constructor(e){super(),this.currentSequenceNumber=e}}class mp{constructor(e){this.persistence=e,this.Ri=new fp,this.Vi=null}static mi(e){return new mp(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(r=>{const a=we.fromPath(r);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Re.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Xh{constructor(e,t){this.persistence=e,this.pi=new ga((r=>YN(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=u5(this,t)}static mi(e,t){return new Xh(e,t)}Ei(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return se.forEach(this.pi,((r,a)=>this.br(e,r,a).next((l=>l?se.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((m=>{m||(r++,l.removeEntry(c,Re.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),se.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nh(e.data.value)),t}br(e,t,r){return se.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return se.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=a}static As(e,t){let r=Fe(),a=Fe();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new gp(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Q2()?8:KN(hn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new w5;return this.Ss(e,t,c).next((m=>{if(l.result=m,this.Vs)return this.bs(e,t,c,m.size)}))})).next((()=>l.result))}bs(e,t,r,a){return r.documentReadCount<this.fs?(ho()<=Le.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",fo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(ho()<=Le.DEBUG&&he("QueryEngine","Query:",fo(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.gs*a?(ho()<=Le.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",fo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qs(t))):se.resolve())}ys(e,t){if(Ib(t))return se.resolve(null);let r=qs(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Eg(t,null,"F"),r=qs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const c=Fe(...l);return this.ps.getDocuments(e,c).next((m=>this.indexManager.getMinOffset(e,r).next((g=>{const p=this.Ds(t,m);return this.Cs(t,p,c,g.readTime)?this.ys(e,Eg(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,r,a){return Ib(t)||a.isEqual(Re.min())?se.resolve(null):this.ps.getDocuments(e,r).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,r,a)?se.resolve(null):(ho()<=Le.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),fo(t)),this.vs(e,c,t,qN(a,_u)).next((m=>m)))}))}Ds(e,t){let r=new Ht(vT(e));return t.forEach(((a,l)=>{dd(e,l)&&(r=r.add(l))})),r}Cs(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,r){return ho()<=Le.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",fo(t)),this.ps.getDocumentsMatchingQuery(e,t,gi.min(),r)}vs(e,t,r,a){return this.ps.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="LocalStore",T5=3e8;class S5{constructor(e,t,r,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new xt(Be),this.xs=new ga((l=>op(l)),lp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new d5(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function A5(s,e,t,r){return new S5(s,e,t,r)}async function UT(s,e){const t=$e(s);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],m=[];let g=Fe();for(const p of a){c.push(p.batchId);for(const b of p.mutations)g=g.add(b.key)}for(const p of l){m.push(p.batchId);for(const b of p.mutations)g=g.add(b.key)}return t.localDocuments.getDocuments(r,g).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:m})))}))}))}function LT(s){const e=$e(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function x5(s,e){const t=$e(s),r=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const m=[];e.targetChanges.forEach(((b,E)=>{const x=a.get(E);if(!x)return;m.push(t.Pi.removeMatchingKeys(l,b.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,b.addedDocuments,E))));let A=x.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?A=A.withResumeToken(sn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):b.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(b.resumeToken,r)),a=a.insert(E,A),(function(D,U,K){return D.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=T5?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(x,A,b)&&m.push(t.Pi.updateTargetData(l,A))}));let g=vi(),p=Fe();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,b))})),m.push(R5(l,c,e.documentUpdates).next((b=>{g=b.ks,p=b.qs}))),!r.isEqual(Re.min())){const b=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,r)));m.push(b)}return se.waitFor(m).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,p))).next((()=>g))})).then((l=>(t.Ms=a,l)))}function R5(s,e,t){let r=Fe(),a=Fe();return t.forEach((l=>r=r.add(l))),e.getEntries(s,r).next((l=>{let c=vi();return t.forEach(((m,g)=>{const p=l.get(m);g.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(m)),g.isNoDocument()&&g.version.isEqual(Re.min())?(e.removeEntry(m,g.readTime),c=c.insert(m,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),c=c.insert(m,g)):he(pp,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",g.version)})),{ks:c,qs:a}}))}function C5(s,e){const t=$e(s);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.Pi.getTargetData(r,e).next((l=>l?(a=l,se.resolve(a)):t.Pi.allocateTargetId(r).next((c=>(a=new oi(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.Ms.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Rg(s,e,t){const r=$e(s),a=r.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Bo(c))throw c;he(pp,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(a.target)}function qb(s,e,t){const r=$e(s);let a=Re.min(),l=Fe();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,b){const E=$e(g),x=E.xs.get(b);return x!==void 0?se.resolve(E.Ms.get(x)):E.Pi.getTargetData(p,b)})(r,c,qs(e)).next((m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,m.targetId).next((g=>{l=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?a:Re.min(),t?l:Fe()))).next((m=>(I5(r,_O(e),m),{documents:m,Qs:l})))))}function I5(s,e,t){let r=s.Os.get(e)||Re.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),s.Os.set(e,r)}class Hb{constructor(){this.activeTargetIds=SO()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class N5{constructor(){this.Mo=new Hb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Hb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b="ConnectivityMonitor";class Fb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he($b,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he($b,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sh=null;function Cg(){return Sh===null?Sh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Sh++,"0x"+Sh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="RestConnection",k5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class j5{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${a}`,this.Wo=this.databaseId.database===Gh?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Go(e,t,r,a,l){const c=Cg(),m=this.zo(e,t.toUriEncodedString());he(Bm,`Sending RPC '${e}' ${c}:`,m,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,a,l);const{host:p}=new URL(m),b=Po(p);return this.Jo(e,m,g,r,b).then((E=>(he(Bm,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw xo(Bm,`RPC '${e}' ${c} failed with error: `,E,"url: ",m,"request:",r),E}))}Ho(e,t,r,a,l,c){return this.Go(e,t,r,a,l)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+zo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const r=k5[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class M5 extends j5{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,a,l){const c=Cg();return new Promise(((m,g)=>{const p=new ZE;p.setWithCredentials(!0),p.listenOnce(eT.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Ih.NO_ERROR:const E=p.getResponseJson();he(ln,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),m(E);break;case Ih.TIMEOUT:he(ln,`RPC '${e}' ${c} timed out`),g(new pe(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Ih.HTTP_ERROR:const x=p.getStatus();if(he(ln,`RPC '${e}' ${c} failed with status:`,x,"response text:",p.getResponseText()),x>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const k=A==null?void 0:A.error;if(k&&k.status&&k.message){const D=(function(K){const te=K.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(te)>=0?te:oe.UNKNOWN})(k.status);g(new pe(D,k.message))}else g(new pe(oe.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new pe(oe.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{he(ln,`RPC '${e}' ${c} completed.`)}}));const b=JSON.stringify(a);he(ln,`RPC '${e}' ${c} sending request:`,a),p.send(t,"POST",b,r,15)}))}T_(e,t,r){const a=Cg(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=sT(),m=nT(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const b=l.join("");he(ln,`Creating RPC '${e}' stream ${a}: ${b}`,g);const E=c.createWebChannel(b,g);this.I_(E);let x=!1,A=!1;const k=new D5({Yo:U=>{A?he(ln,`Not sending because RPC '${e}' stream ${a} is closed:`,U):(x||(he(ln,`Opening RPC '${e}' stream ${a} transport.`),E.open(),x=!0),he(ln,`RPC '${e}' stream ${a} sending:`,U),E.send(U))},Zo:()=>E.close()}),D=(U,K,te)=>{U.listen(K,(F=>{try{te(F)}catch(ne){setTimeout((()=>{throw ne}),0)}}))};return D(E,Xl.EventType.OPEN,(()=>{A||(he(ln,`RPC '${e}' stream ${a} transport opened.`),k.o_())})),D(E,Xl.EventType.CLOSE,(()=>{A||(A=!0,he(ln,`RPC '${e}' stream ${a} transport closed`),k.a_(),this.E_(E))})),D(E,Xl.EventType.ERROR,(U=>{A||(A=!0,xo(ln,`RPC '${e}' stream ${a} transport errored. Name:`,U.name,"Message:",U.message),k.a_(new pe(oe.UNAVAILABLE,"The operation could not be completed")))})),D(E,Xl.EventType.MESSAGE,(U=>{var K;if(!A){const te=U.data[0];gt(!!te,16349);const F=te,ne=(F==null?void 0:F.error)||((K=F[0])==null?void 0:K.error);if(ne){he(ln,`RPC '${e}' stream ${a} received error:`,ne);const W=ne.status;let re=(function(I){const V=Mt[I];if(V!==void 0)return RT(V)})(W),C=ne.message;re===void 0&&(re=oe.INTERNAL,C="Unknown error status: "+W+" with message "+ne.message),A=!0,k.a_(new pe(re,C)),E.close()}else he(ln,`RPC '${e}' stream ${a} received:`,te),k.u_(te)}})),D(m,tT.STAT_EVENT,(U=>{U.stat===fg.PROXY?he(ln,`RPC '${e}' stream ${a} detected buffering proxy`):U.stat===fg.NOPROXY&&he(ln,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function qm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(s){return new qO(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-r);a>0&&he("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="PersistentStream";class P5{constructor(e,t,r,a,l,c,m,g){this.Mi=e,this.S_=r,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new BT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(pr(t.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.D_===t&&this.G_(r,a)}),(r=>{e((()=>{const a=new pe(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(a)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{r((()=>this.z_(a)))})),this.stream.onMessage((a=>{r((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(Gb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(he(Gb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class V5 extends P5{constructor(e,t,r,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=KO(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Re.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Re.min():c.readTime?wo(c.readTime):Re.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Ub(this.serializer),t.addTarget=(function(l,c){let m;const g=c.target;if(m=wg(g)?{documents:QO(l,g)}:{query:YO(l,g).ft},m.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){m.resumeToken=$O(l,c.resumeToken);const p=Ag(l,c.expectedCount);p!==null&&(m.expectedCount=p)}else if(c.snapshotVersion.compareTo(Re.min())>0){m.readTime=HO(l,c.snapshotVersion.toTimestamp());const p=Ag(l,c.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,e);const r=XO(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Ub(this.serializer),t.removeTarget=e,this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{}class L5 extends U5{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new pe(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,xg(t,r),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pe(oe.UNKNOWN,l.toString())}))}Ho(e,t,r,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,m])=>this.connection.Ho(e,xg(t,r),a,c,m,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(oe.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class z5{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(pr(t),this.aa=!1):he("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo="RemoteStore";class B5{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{ju(this)&&(he(Oo,"Restarting streams for network reachability change."),await(async function(g){const p=$e(g);p.Ea.add(4),await ku(p),p.Ra.set("Unknown"),p.Ea.delete(4),await pd(p)})(this))}))})),this.Ra=new z5(r,a)}}async function pd(s){if(ju(s))for(const e of s.da)await e(!0)}async function ku(s){for(const e of s.da)await e(!1)}function qT(s,e){const t=$e(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),bp(t)?vp(t):qo(t).O_()&&_p(t,e))}function yp(s,e){const t=$e(s),r=qo(t);t.Ia.delete(e),r.O_()&&HT(t,e),t.Ia.size===0&&(r.O_()?r.L_():ju(t)&&t.Ra.set("Unknown"))}function _p(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}qo(s).Y_(e)}function HT(s,e){s.Va.Ue(e),qo(s).Z_(e)}function vp(s){s.Va=new UO({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),qo(s).start(),s.Ra.ua()}function bp(s){return ju(s)&&!qo(s).x_()&&s.Ia.size>0}function ju(s){return $e(s).Ea.size===0}function $T(s){s.Va=void 0}async function q5(s){s.Ra.set("Online")}async function H5(s){s.Ia.forEach(((e,t)=>{_p(s,e)}))}async function $5(s,e){$T(s),bp(s)?(s.Ra.ha(e),vp(s)):s.Ra.set("Unknown")}async function F5(s,e,t){if(s.Ra.set("Online"),e instanceof IT&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const m of l.targetIds)a.Ia.has(m)&&(await a.remoteSyncer.rejectListen(m,c),a.Ia.delete(m),a.Va.removeTarget(m))})(s,e)}catch(r){he(Oo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Kb(s,r)}else if(e instanceof kh?s.Va.Ze(e):e instanceof CT?s.Va.st(e):s.Va.tt(e),!t.isEqual(Re.min()))try{const r=await LT(s.localStore);t.compareTo(r)>=0&&await(function(l,c){const m=l.Va.Tt(c);return m.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const b=l.Ia.get(p);b&&l.Ia.set(p,b.withResumeToken(g.resumeToken,c))}})),m.targetMismatches.forEach(((g,p)=>{const b=l.Ia.get(g);if(!b)return;l.Ia.set(g,b.withResumeToken(sn.EMPTY_BYTE_STRING,b.snapshotVersion)),HT(l,g);const E=new oi(b.target,g,p,b.sequenceNumber);_p(l,E)})),l.remoteSyncer.applyRemoteEvent(m)})(s,t)}catch(r){he(Oo,"Failed to raise snapshot:",r),await Kb(s,r)}}async function Kb(s,e,t){if(!Bo(e))throw e;s.Ea.add(1),await ku(s),s.Ra.set("Offline"),t||(t=()=>LT(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{he(Oo,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await pd(s)}))}async function Qb(s,e){const t=$e(s);t.asyncQueue.verifyOperationInProgress(),he(Oo,"RemoteStore received new credentials");const r=ju(t);t.Ea.add(3),await ku(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await pd(t)}async function G5(s,e){const t=$e(s);e?(t.Ea.delete(2),await pd(t)):e||(t.Ea.add(2),await ku(t),t.Ra.set("Unknown"))}function qo(s){return s.ma||(s.ma=(function(t,r,a){const l=$e(t);return l.sa(),new V5(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(s.datastore,s.asyncQueue,{Xo:q5.bind(null,s),t_:H5.bind(null,s),r_:$5.bind(null,s),H_:F5.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),bp(s)?vp(s):s.Ra.set("Unknown")):(await s.ma.stop(),$T(s))}))),s.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new oa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const c=Date.now()+r,m=new wp(e,t,c,a,l);return m.start(r),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function FT(s,e){if(pr("AsyncQueue",`${e}: ${s}`),Bo(s))return new pe(oe.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{static emptySet(e){return new Eo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||we.comparator(t.key,r.key):(t,r)=>we.comparator(t.key,r.key),this.keyedMap=Wl(),this.sortedSet=new xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Eo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Eo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(){this.ga=new xt(we.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class ko{constructor(e,t,r,a,l,c,m,g,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,a,l){const c=[];return t.forEach((m=>{c.push({type:0,doc:m})})),new ko(e,t,Eo.emptySet(t),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Q5{constructor(){this.queries=Jb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const a=$e(t),l=a.queries;a.queries=Jb(),l.forEach(((c,m)=>{for(const g of m.Sa)g.onError(r)}))})(this,new pe(oe.ABORTED,"Firestore shutting down"))}}function Jb(){return new ga((s=>_T(s)),hd)}async function Y5(s,e){const t=$e(s);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(r=2):(l=new K5,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const m=FT(c,`Initialization of query '${fo(e.query)}' failed`);return void e.onError(m)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Ep(t)}async function J5(s,e){const t=$e(s),r=e.query;let a=3;const l=t.queries.get(r);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function X5(s,e){const t=$e(s);let r=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const m of c.Sa)m.Fa(a)&&(r=!0);c.wa=a}}r&&Ep(t)}function W5(s,e,t){const r=$e(s),a=r.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);r.queries.delete(e)}function Ep(s){s.Ca.forEach((e=>{e.next()}))}var Ig,Xb;(Xb=Ig||(Ig={})).Ma="default",Xb.Cache="cache";class Z5{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new ko(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ko.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ig.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e){this.key=e}}class KT{constructor(e){this.key=e}}class ek{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Fe(),this.mutatedKeys=Fe(),this.eu=vT(e),this.tu=new Eo(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Yb,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,m=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((b,E)=>{const x=a.get(b),A=dd(this.query,E)?E:null,k=!!x&&this.mutatedKeys.has(x.key),D=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let U=!1;x&&A?x.data.isEqual(A.data)?k!==D&&(r.track({type:3,doc:A}),U=!0):this.su(x,A)||(r.track({type:2,doc:A}),U=!0,(g&&this.eu(A,g)>0||p&&this.eu(A,p)<0)&&(m=!0)):!x&&A?(r.track({type:0,doc:A}),U=!0):x&&!A&&(r.track({type:1,doc:x}),U=!0,(g||p)&&(m=!0)),U&&(A?(c=c.add(A),l=D?l.add(b):l.delete(b)):(c=c.delete(b),l=l.delete(b)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const b=this.query.limitType==="F"?c.last():c.first();c=c.delete(b.key),l=l.delete(b.key),r.track({type:1,doc:b})}return{tu:c,iu:r,Cs:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((b,E)=>(function(A,k){const D=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:U})}};return D(A)-D(k)})(b.type,E.type)||this.eu(b.doc,E.doc))),this.ou(r),a=a??!1;const m=t&&!a?this._u():[],g=this.Xa.size===0&&this.current&&!a?1:0,p=g!==this.Za;return this.Za=g,c.length!==0||p?{snapshot:new ko(this.query,e.tu,l,c,e.mutatedKeys,g===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Yb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Fe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new KT(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new GT(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Fe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ko.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Tp="SyncEngine";class tk{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class nk{constructor(e){this.key=e,this.hu=!1}}class sk{constructor(e,t,r,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ga((m=>_T(m)),hd),this.Iu=new Map,this.Eu=new Set,this.du=new xt(we.comparator),this.Au=new Map,this.Ru=new fp,this.Vu={},this.mu=new Map,this.fu=No.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rk(s,e,t=!0){const r=WT(s);let a;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await QT(r,e,t,!0),a}async function ik(s,e){const t=WT(s);await QT(t,e,!0,!1)}async function QT(s,e,t,r){const a=await C5(s.localStore,qs(e)),l=a.targetId,c=s.sharedClientState.addLocalQueryTarget(l,t);let m;return r&&(m=await ak(s,e,l,c==="current",a.resumeToken)),s.isPrimaryClient&&t&&qT(s.remoteStore,a),m}async function ak(s,e,t,r,a){s.pu=(E,x,A)=>(async function(D,U,K,te){let F=U.view.ru(K);F.Cs&&(F=await qb(D.localStore,U.query,!1).then((({documents:C})=>U.view.ru(C,F))));const ne=te&&te.targetChanges.get(U.targetId),W=te&&te.targetMismatches.get(U.targetId)!=null,re=U.view.applyChanges(F,D.isPrimaryClient,ne,W);return Zb(D,U.targetId,re.au),re.snapshot})(s,E,x,A);const l=await qb(s.localStore,e,!0),c=new ek(e,l.Qs),m=c.ru(l.documents),g=Ou.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",a),p=c.applyChanges(m,s.isPrimaryClient,g);Zb(s,t,p.au);const b=new tk(e,t,c);return s.Tu.set(e,b),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),p.snapshot}async function ok(s,e,t){const r=$e(s),a=r.Tu.get(e),l=r.Iu.get(a.targetId);if(l.length>1)return r.Iu.set(a.targetId,l.filter((c=>!hd(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Rg(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&yp(r.remoteStore,a.targetId),Ng(r,a.targetId)})).catch(ad)):(Ng(r,a.targetId),await Rg(r.localStore,a.targetId,!0))}async function lk(s,e){const t=$e(s),r=t.Tu.get(e),a=t.Iu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),yp(t.remoteStore,r.targetId))}async function YT(s,e){const t=$e(s);try{const r=await x5(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(gt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?gt(c.hu,14607):a.removedDocuments.size>0&&(gt(c.hu,42227),c.hu=!1))})),await XT(t,r,e)}catch(r){await ad(r)}}function Wb(s,e,t){const r=$e(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Tu.forEach(((l,c)=>{const m=c.view.va(e);m.snapshot&&a.push(m.snapshot)})),(function(c,m){const g=$e(c);g.onlineState=m;let p=!1;g.queries.forEach(((b,E)=>{for(const x of E.Sa)x.va(m)&&(p=!0)})),p&&Ep(g)})(r.eventManager,e),a.length&&r.Pu.H_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function uk(s,e,t){const r=$e(s);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Au.get(e),l=a&&a.key;if(l){let c=new xt(we.comparator);c=c.insert(l,cn.newNoDocument(l,Re.min()));const m=Fe().add(l),g=new gd(Re.min(),new Map,new xt(Be),c,m);await YT(r,g),r.du=r.du.remove(l),r.Au.delete(e),Sp(r)}else await Rg(r.localStore,e,!1).then((()=>Ng(r,e,t))).catch(ad)}function Ng(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),t&&s.Pu.yu(r,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||JT(s,r)}))}function JT(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&(yp(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),Sp(s))}function Zb(s,e,t){for(const r of t)r instanceof GT?(s.Ru.addReference(r.key,e),ck(s,r)):r instanceof KT?(he(Tp,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||JT(s,r.key)):Ce(19791,{wu:r})}function ck(s,e){const t=e.key,r=t.path.canonicalString();s.du.get(t)||s.Eu.has(r)||(he(Tp,"New document in limbo: "+t),s.Eu.add(r),Sp(s))}function Sp(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new we(mt.fromString(e)),r=s.fu.next();s.Au.set(r,new nk(t)),s.du=s.du.insert(t,r),qT(s.remoteStore,new oi(qs(up(t.path)),r,"TargetPurposeLimboResolution",od.ce))}}async function XT(s,e,t){const r=$e(s),a=[],l=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{c.push(r.pu(g,e,t).then((p=>{var b;if((p||t)&&r.isPrimaryClient){const E=p?!p.fromCache:(b=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:b.current;r.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(p){a.push(p);const E=gp.As(g.targetId,p);l.push(E)}})))})),await Promise.all(c),r.Pu.H_(a),await(async function(g,p){const b=$e(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>se.forEach(p,(x=>se.forEach(x.Es,(A=>b.persistence.referenceDelegate.addReference(E,x.targetId,A))).next((()=>se.forEach(x.ds,(A=>b.persistence.referenceDelegate.removeReference(E,x.targetId,A)))))))))}catch(E){if(!Bo(E))throw E;he(pp,"Failed to update sequence numbers: "+E)}for(const E of p){const x=E.targetId;if(!E.fromCache){const A=b.Ms.get(x),k=A.snapshotVersion,D=A.withLastLimboFreeSnapshotVersion(k);b.Ms=b.Ms.insert(x,D)}}})(r.localStore,l))}async function hk(s,e){const t=$e(s);if(!t.currentUser.isEqual(e)){he(Tp,"User change. New user:",e.toKey());const r=await UT(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((m=>{m.forEach((g=>{g.reject(new pe(oe.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await XT(t,r.Ls)}}function dk(s,e){const t=$e(s),r=t.Au.get(e);if(r&&r.hu)return Fe().add(r.key);{let a=Fe();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const m=t.Tu.get(c);a=a.unionWith(m.view.nu)}return a}}function WT(s){const e=$e(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=YT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uk.bind(null,e),e.Pu.H_=X5.bind(null,e.eventManager),e.Pu.yu=W5.bind(null,e.eventManager),e}class Wh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zT(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return A5(this.persistence,new E5,e.initialUser,this.serializer)}Cu(e){return new VT(mp.mi,this.serializer)}Du(e){return new N5}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wh.provider={build:()=>new Wh};class fk extends Wh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){gt(this.persistence.referenceDelegate instanceof Xh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new o5(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new VT((r=>Xh.mi(r,t)),this.serializer)}}class Og{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Wb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=hk.bind(null,this.syncEngine),await G5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Q5})()}createDatastore(e){const t=zT(e.databaseInfo.databaseId),r=(function(l){return new M5(l)})(e.databaseInfo);return(function(l,c,m,g){return new L5(l,c,m,g)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,c,m){return new B5(r,a,l,c,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>Wb(this.syncEngine,t,0)),(function(){return Fb.v()?new Fb:new O5})())}createSyncEngine(e,t){return(function(a,l,c,m,g,p,b){const E=new sk(a,l,c,m,g,p);return b&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=$e(a);he(Oo,"RemoteStore shutting down."),l.Ea.add(5),await ku(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Og.provider={build:()=>new Og};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi="FirestoreClient";class gk{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=un.UNAUTHENTICATED,this.clientId=rp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{he(bi,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(he(bi,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new oa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=FT(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Hm(s,e){s.asyncQueue.verifyOperationInProgress(),he(bi,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener((async a=>{r.isEqual(a)||(await UT(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function ew(s,e){s.asyncQueue.verifyOperationInProgress();const t=await pk(s);he(bi,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((r=>Qb(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,a)=>Qb(e.remoteStore,a))),s._onlineComponents=e}async function pk(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){he(bi,"Using user provided OfflineComponentProvider");try{await Hm(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===oe.FAILED_PRECONDITION||a.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;xo("Error using user provided cache. Falling back to memory cache: "+t),await Hm(s,new Wh)}}else he(bi,"Using default OfflineComponentProvider"),await Hm(s,new fk(void 0));return s._offlineComponents}async function yk(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(he(bi,"Using user provided OnlineComponentProvider"),await ew(s,s._uninitializedComponentsProvider._online)):(he(bi,"Using default OnlineComponentProvider"),await ew(s,new Og))),s._onlineComponents}async function _k(s){const e=await yk(s),t=e.eventManager;return t.onListen=rk.bind(null,e.syncEngine),t.onUnlisten=ok.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ik.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=lk.bind(null,e.syncEngine),t}function vk(s,e,t={}){const r=new oa;return s.asyncQueue.enqueueAndForget((async()=>(function(l,c,m,g,p){const b=new mk({next:x=>{b.Nu(),c.enqueueAndForget((()=>J5(l,E)));const A=x.docs.has(m);!A&&x.fromCache?p.reject(new pe(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&x.fromCache&&g&&g.source==="server"?p.reject(new pe(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(x)},error:x=>p.reject(x)}),E=new Z5(up(m.path),b,{includeMetadataChanges:!0,qa:!0});return Y5(l,E)})(await _k(s),s.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="firestore.googleapis.com",nw=!0;class sw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=e1,this.ssl=nw}else this.host=e.host,this.ssl=e.ssl??nw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=PT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<i5)throw new pe(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new pe(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new pe(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new pe(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ap{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new CN;switch(r.type){case"firstParty":return new kN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=tw.get(t);r&&(he("ComponentProvider","Removing Datastore"),tw.delete(t),r.terminate())})(this),Promise.resolve()}}function bk(s,e,t,r={}){var p;s=gg(s,Ap);const a=Po(e),l=s._getSettings(),c={...l,emulatorOptions:s._getEmulatorOptions()},m=`${e}:${t}`;a&&(dE(`https://${m}`),fE("Firestore",!0)),l.host!==e1&&l.host!==m&&xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:m,ssl:a,emulatorOptions:r};if(!ca(g,c)&&(s._setSettings(g),r.mockUserToken)){let b,E;if(typeof r.mockUserToken=="string")b=r.mockUserToken,E=un.MOCK_USER;else{b=L2(r.mockUserToken,(p=s._app)==null?void 0:p.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new pe(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new un(x)}s._authCredentials=new IN(new iT(b,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xp(this.firestore,e,this._query)}}class pn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pn(this.firestore,e,this._key)}toJSON(){return{type:pn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Iu(t,pn._jsonSchema))return new pn(e,r||null,new we(mt.fromString(t.referencePath)))}}pn._jsonSchemaVersion="firestore/documentReference/1.0",pn._jsonSchema={type:Ut("string",pn._jsonSchemaVersion),referencePath:Ut("string")};class Eu extends xp{constructor(e,t,r){super(e,t,up(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new we(e))}withConverter(e){return new Eu(this.firestore,e,this._path)}}function wk(s,e,...t){if(s=_r(s),arguments.length===1&&(e=rp.newId()),UN("doc","path",e),s instanceof Ap){const r=mt.fromString(e,...t);return pb(r),new pn(s,null,new we(r))}{if(!(s instanceof pn||s instanceof Eu))throw new pe(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(mt.fromString(e,...t));return pb(r),new pn(s.firestore,s instanceof Eu?s.converter:null,new we(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="AsyncQueue";class iw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new BT(this,"async_queue_retry"),this._c=()=>{const r=qm();r&&he(rw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=qm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=qm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new oa;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Bo(e))throw e;he(rw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,pr("INTERNAL UNHANDLED ERROR: ",aw(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=wp.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Ce(47125,{Pc:aw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function aw(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class t1 extends Ap{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new iw,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new iw(e),this._firestoreClient=void 0,await e}}}function Ek(s,e){const t=typeof s=="object"?s:Qg(),r=typeof s=="string"?s:Gh,a=Kg(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=V2("firestore");l&&bk(a,...l)}return a}function Tk(s){if(s._terminated)throw new pe(oe.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||Sk(s),s._firestoreClient}function Sk(s){var r,a,l;const e=s._freezeSettings(),t=(function(m,g,p,b){return new ZN(m,g,p,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,ZT(b.experimentalLongPollingOptions),b.useFetchStreams,b.isUsingEmulator)})(s._databaseId,((r=s._app)==null?void 0:r.options.appId)||"",s._persistenceKey,e);s._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new gk(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ls(sn.fromBase64String(e))}catch(t){throw new pe(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ls(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ls._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Iu(e,Ls._jsonSchema))return Ls.fromBase64String(e.bytes)}}Ls._jsonSchemaVersion="firestore/bytes/1.0",Ls._jsonSchema={type:Ut("string",Ls._jsonSchemaVersion),bytes:Ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:fi._jsonSchemaVersion}}static fromJSON(e){if(Iu(e,fi._jsonSchema))return new fi(e.latitude,e.longitude)}}fi._jsonSchemaVersion="firestore/geoPoint/1.0",fi._jsonSchema={type:Ut("string",fi._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:mi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Iu(e,mi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new mi(e.vectorValues);throw new pe(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mi._jsonSchemaVersion="firestore/vectorValue/1.0",mi._jsonSchema={type:Ut("string",mi._jsonSchemaVersion),vectorValues:Ut("object")};const Ak=new RegExp("[~\\*/\\[\\]]");function xk(s,e,t){if(e.search(Ak)>=0)throw ow(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s);try{return new n1(...e.split("."))._internalPath}catch{throw ow(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s)}}function ow(s,e,t,r,a){let l=`Function ${e}() called with invalid data`;l+=". ";let c="";return new pe(oe.INVALID_ARGUMENT,l+s+c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Rk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(r1("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Rk extends s1{data(){return super.data()}}function r1(s,e){return typeof e=="string"?xk(s,e):e instanceof n1?e._internalPath:e._delegate._internalPath}class Ck{convertValue(e,t="none"){switch(_i(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Nu(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){var r,a,l;const t=(l=(a=(r=e.fields)==null?void 0:r[yg].arrayValue)==null?void 0:a.values)==null?void 0:l.map((c=>At(c.doubleValue)));return new mi(t)}convertGeoPoint(e){return new fi(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ud(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(vu(e));default:return null}}convertTimestamp(e){const t=pi(e);return new Vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=mt.fromString(e);gt(MT(r),9688,{name:e});const a=new bu(r.get(1),r.get(3)),l=new we(r.popFirst(5));return a.isEqual(t)||pr(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}class eu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ua extends s1{constructor(e,t,r,a,l,c){super(e,t,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new jh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(r1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ua._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ua._jsonSchemaVersion="firestore/documentSnapshot/1.0",ua._jsonSchema={type:Ut("string",ua._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class jh extends ua{data(e={}){return super.data(e)}}class uu{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new eu(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new jh(this._firestore,this._userDataWriter,r.key,r,new eu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((m=>{const g=new jh(a._firestore,a._userDataWriter,m.doc.key,m.doc,new eu(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const g=new jh(a._firestore,a._userDataWriter,m.doc.key,m.doc,new eu(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,b=-1;return m.type!==0&&(p=c.indexOf(m.doc.key),c=c.delete(m.doc.key)),m.type!==1&&(c=c.add(m.doc),b=c.indexOf(m.doc.key)),{type:Ik(m.type),doc:g,oldIndex:p,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=uu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=rp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Ik(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(s){s=gg(s,pn);const e=gg(s.firestore,t1);return vk(Tk(e),s._key).then((t=>kk(e,s,t)))}uu._jsonSchemaVersion="firestore/querySnapshot/1.0",uu._jsonSchema={type:Ut("string",uu._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class Ok extends Ck{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ls(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,t)}}function kk(s,e,t){const r=t.docs.get(e._key),a=new Ok(s);return new ua(s,a,e._key,r,new eu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){zo=a})(Vo),So(new ha("firestore",((r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),m=new t1(new NN(r.getProvider("auth-internal")),new jN(c,r.getProvider("app-check-internal")),(function(p,b){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new pe(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bu(p.options.projectId,b)})(c,a),c);return l={useFetchStreams:t,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),ci(db,fb,e),ci(db,fb,"esm2020")})();const jk={apiKey:"AIzaSyDll7h-FpzCVml2vy8KeMPA6xExGUda_NE",authDomain:"thi-tnd.firebaseapp.com",projectId:"thi-tnd",storageBucket:"thi-tnd.firebasestorage.app",messagingSenderId:"107125875663",appId:"1:107125875663:web:0e1a632779f51340c828ba",databaseURL:"https://thi-tnd-default-rtdb.asia-southeast1.firebasedatabase.app"},i1=nC().length?Qg():pE(jk),kg=xN(i1),Dk=Ek(i1),a1=ie.createContext(void 0),Mk=({children:s})=>{const[e,t]=ie.useState("noel");ie.useEffect(()=>{const l=localStorage.getItem("app-theme")||"noel";t(l),document.documentElement.setAttribute("data-theme",l)},[]);const r=a=>{t(a),document.documentElement.setAttribute("data-theme",a),localStorage.setItem("app-theme",a)};return _.jsx(a1.Provider,{value:{theme:e,setTheme:r},children:s})},rn=()=>{const s=ie.useContext(a1);if(s===void 0)throw new Error("useTheme must be used within a ThemeProvider");return s},Pk=s=>{const{theme:e}=rn();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/8PDn1wfM/favicon.png",alt:"Online Exam Icon",...s}):e==="noel"?_.jsx("img",{src:"/assets/img/gift3.png",alt:"Gift Icon",...s,className:"h-16 w-16 object-contain"}):_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:_.jsx("path",{fillRule:"evenodd",d:"M3.75 4.5a3 3 0 00-3 3v10.5a3 3 0 003 3h16.5a3 3 0 003-3V7.5a3 3 0 00-3-3H3.75zm.75 4.5a.75.75 0 01.75-.75h13.5a.75.75 0 010 1.5H5.25a.75.75 0 01-.75-.75zm0 3.75a.75.75 0 01.75-.75h6a.75.75 0 010 1.5h-6a.75.75 0 01-.75-.75zm0 2.25a.75.75 0 01.75-.75h3a.75.75 0 010 1.5h-3a.75.75 0 01-.75-.75z",clipRule:"evenodd"})})},Vk=s=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Uk=s=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:[_.jsx("path",{d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm.25 4.5a.75.75 0 00-1.5 0v5.337a2.25 2.25 0 00-1.5 2.063v.75a.75.75 0 001.5 0v-.75a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 001.5 0v-.75a2.25 2.25 0 00-1.5-2.063V6.75z"}),_.jsx("path",{d:"M6.163 15.25a.75.75 0 011.06-1.06l1.25 1.25a.75.75 0 01-1.06 1.06l-1.25-1.25zm10.617 0a.75.75 0 011.06 1.06l-1.25 1.25a.75.75 0 01-1.06 1.06l1.25-1.25z"})]}),Rp=s=>{const{theme:e}=rn();return e==="noel"?_.jsx("img",{src:"/assets/img/ball.png",alt:"Check",...s,className:`${s.className} object-contain`}):_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:_.jsx("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z",clipRule:"evenodd"})})},Cp=s=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:_.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z",clipRule:"evenodd"})}),Lk=s=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:_.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 6a.75.75 0 00-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 000-1.5h-3.75V6z",clipRule:"evenodd"})}),Ho=s=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:_.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-4.28 9.22a.75.75 0 000 1.06l3 3a.75.75 0 101.06-1.06L10.81 12l1.47-1.47a.75.75 0 10-1.06-1.06l-3 3z",clipRule:"evenodd"})}),zk=s=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:_.jsx("path",{fillRule:"evenodd",d:"M16.28 11.47a.75.75 0 010 1.06l-3 3a.75.75 0 01-1.06-1.06L14.44 12l-2.22-2.22a.75.75 0 011.06-1.06l3 3z",clipRule:"evenodd"})}),o1=s=>{const{theme:e}=rn();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/J0JwWn5p/Mattahan-Buuf-One-of-those-ugly-pens-you-just-find-lying-around-128.png",alt:"Pen Icon",...s}):e==="noel"?_.jsx("img",{src:"/assets/img/celebrate.png",alt:"Santa",...s,className:`${s.className} object-contain`}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:[_.jsx("path",{d:"M12.75 12.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"}),_.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM9 12a3 3 0 116 0 3 3 0 01-6 0zm-2.121 4.212a.75.75 0 01.688-1.228 5.253 5.253 0 018.866 0 .75.75 0 11-.688 1.228 3.753 3.753 0 00-7.49 0z",clipRule:"evenodd"})]})},Bk=s=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:_.jsx("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-4.5a.75.75 0 000 1.5h6a.75.75 0 00.75-.75V4.5a.75.75 0 00-1.5 0v2.253a9 9 0 00-15.06 4.042.75.75 0 00.75.75h1.5a.75.75 0 00.75-.75zM19.245 13.941a7.5 7.5 0 01-12.548 3.364l-1.903-1.903h4.5a.75.75 0 000-1.5h-6a.75.75 0 00-.75.75v6a.75.75 0 001.5 0v-2.253a9 9 0 0015.06-4.042.75.75 0 00-.75-.75h-1.5a.75.75 0 00-.75.75z",clipRule:"evenodd"})}),jo=s=>{const{theme:e}=rn();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/xjbVmxDW/Oxygen-Icons-org-Oxygen-Categories-applications-education-university-256.png",alt:"Graduation Cap Icon",...s}):e==="noel"?_.jsx("img",{src:"/assets/img/home.png",alt:"Home Icon",...s,className:`${s.className} object-contain`}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:[_.jsx("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm0 2a8 8 0 100 16 8 8 0 000-16zm0 3a5 5 0 110 10 5 5 0 010-10zm0 2a3 3 0 100 6 3 3 0 000-6z"}),_.jsx("path",{d:"M12 3v2m0 14v2M3 12h2m14 0h-2m-8-8L6.414 5.414m11.172 11.172L16.243 15.12m0-9.706l-1.121 1.121M5.414 17.586L6.536 16.464"})]})},jg=s=>{const{theme:e}=rn();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/66GxZjxN/school-114359.png",alt:"School Bag Icon",...s}):e==="noel"?_.jsx("img",{src:"/assets/img/bell.png",alt:"Bell Icon",...s,className:`${s.className} object-contain`}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:[_.jsx("path",{d:"M12 2a1 1 0 011 1v7.683a4.502 4.502 0 012.722 2.054 3 3 0 01-1.33 3.963 3.003 3.003 0 01-4.783-3.963A4.502 4.502 0 0111 10.683V3a1 1 0 011-1zm-3.5 10a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm7 0a1.5 1.5 0 100 3 1.5 1.5 0 000-3z"}),_.jsx("path",{d:"M12 22a8.956 8.956 0 01-6-2.583V18h12v1.417A8.956 8.956 0 0112 22z"})]})},qk=s=>{const{theme:e}=rn();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/h47RmyWN/Mattahan-Buuf-They-reply-technosorcery-128.png",alt:"Wrench Icon",...s}):e==="noel"?_.jsx("img",{src:"/assets/img/gift4.png",alt:"Gift Icon",...s,className:`${s.className} object-contain`}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:[_.jsx("path",{fillRule:"evenodd",d:"M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.981A10.503 10.503 0 0112 21a10.5 10.5 0 01-10.5-10.5c0-4.368 2.667-8.162 6.43-9.742a.75.75 0 01.819.162z",clipRule:"evenodd"}),_.jsx("path",{d:"M12.75 9a.75.75 0 00-1.5 0v2.25H9a.75.75 0 000 1.5h2.25V15a.75.75 0 001.5 0v-2.25H15a.75.75 0 000-1.5h-2.25V9z"})]})},Hk=s=>{const{theme:e}=rn();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/zvWm1BFk/book-512x512-35977.png",alt:"Book Icon",...s}):e==="noel"?_.jsx("img",{src:"/assets/img/hat.png",alt:"Hat Icon",...s,className:`${s.className} object-contain`}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:[_.jsx("path",{d:"M12 2L3 8v2h18V8l-9-6zm-1.5 10a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm3 0a1.5 1.5 0 100 3 1.5 1.5 0 000-3z"}),_.jsx("path",{d:"M4 14v6h16v-6H4zm6 2h4v2h-4v-2z"})]})},lw=s=>{const{theme:e}=rn();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/2yvpf67d/Mattahan-Buuf-A-Proper-Journal-Icon-128.png",alt:"Journal Icon",...s}):e==="noel"?_.jsx("img",{src:"/assets/img/gift5.png",alt:"Gift Icon",...s,className:`${s.className} object-contain`}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:[_.jsx("path",{fillRule:"evenodd",d:"M12 2a10 10 0 100 20 10 10 0 000-20zM4 12a8 8 0 1116 0 8 8 0 01-16 0z",clipRule:"evenodd"}),_.jsx("path",{d:"M16.95 7.05l-1.414 1.414-2.122-2.122 1.414-1.414 2.122 2.122zm-9.9 9.9l1.414-1.414 2.122 2.122-1.414 1.414-2.122-2.122zm9.9 0l-1.414-1.414-2.122 2.122 1.414 1.414 2.122-2.122zm-9.9-9.9l1.414 1.414-2.122 2.122L5.636 9.172l2.122-2.122z"})]})},uw=s=>{const{theme:e}=rn();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/2yvpf67d/Mattahan-Buuf-A-Proper-Journal-Icon-128.png",alt:"Journal Icon",...s}):e==="noel"?_.jsx("img",{src:"/assets/img/star-gold.png",alt:"Star Icon",...s,className:`${s.className} object-contain`}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:[_.jsx("path",{fillRule:"evenodd",d:"M8.25 2.25A.75.75 0 019 3v.257a3.75 3.75 0 013 0V3a.75.75 0 011.5 0v.257a3.75 3.75 0 013 0V3a.75.75 0 01.75.75h-.008v.016c.361.32.622.754.74 1.232A23.953 23.953 0 0112 6c-2.305 0-4.52-.42-6.502-1.195a2.5 2.5 0 01.74-1.232H6a.75.75 0 01.75-.75h1.5zm-2.784 4.542a25.474 25.474 0 0013.068 0 .75.75 0 01.443.923 23.92 23.92 0 01-13.954 0 .75.75 0 01.443-.923zM8.25 10.5a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5a.75.75 0 01.75-.75zm3.75 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5a.75.75 0 01.75-.75zm3.75 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5a.75.75 0 01.75-.75z",clipRule:"evenodd"}),_.jsx("path",{d:"M4.145 9.421a.75.75 0 01.558-.923 25.483 25.483 0 0114.594 0 .75.75 0 01.558.923l-.36.99a25.01 25.01 0 01-14.832 0l-.36-.99z"}),_.jsx("path",{fillRule:"evenodd",d:"M3 15.75A2.25 2.25 0 015.25 13.5h13.5A2.25 2.25 0 0121 15.75v3A2.25 2.25 0 0118.75 21H5.25A2.25 2.25 0 013 18.75v-3z",clipRule:"evenodd"})]})},l1=s=>{const{theme:e}=rn();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/xjbVmxDW/Oxygen-Icons-org-Oxygen-Categories-applications-education-university-256.png",alt:"Graduation Cap Icon",...s}):e==="noel"?_.jsx("img",{src:"/assets/img/star-gold.png",alt:"Gold Star Icon",...s,className:`${s.className} object-contain`}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:[_.jsx("path",{fillRule:"evenodd",d:"M11.25 4.5A.75.75 0 0112 5.25v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0111.25 4.5zM12.75 6a.75.75 0 00-1.5 0v1.5a.75.75 0 001.5 0V6zM11.25 7.5A.75.75 0 0112 8.25v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0111.25 7.5zM12.75 9a.75.75 0 00-1.5 0v1.5a.75.75 0 001.5 0V9z",clipRule:"evenodd"}),_.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM6.262 6.072a8.25 8.25 0 1011.476 11.476A8.25 8.25 0 006.262 6.072zM12 18.75a.75.75 0 01-.75-.75V15a.75.75 0 011.5 0v3a.75.75 0 01-.75.75z",clipRule:"evenodd"}),_.jsx("path",{d:"M14.25 12a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})]})},Ip=s=>{const{theme:e}=rn();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/FFJXSWXv/study-learning-knowledge-education-book-notebook-icon-256768.png",alt:"Book and Glasses Icon",...s}):e==="noel"?_.jsx("img",{src:"/assets/img/gift1.png",alt:"Gift Icon",...s,className:`${s.className} object-contain`}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:[_.jsx("path",{d:"M11.25 4.533A9.708 9.708 0 006 3.75c-1.052 0-2.062.18-3 .512V17.25a8.987 8.987 0 013.75-.82V9.75a.75.75 0 011.5 0v7.5a.75.75 0 01-1.5 0V15a6.726 6.726 0 00-3-.585V18.75C3.393 18.932 3.69 19.1 4 19.29c2.023.784 4.18 1.093 6.364 1.294a.75.75 0 00.872-.725V4.534z"}),_.jsx("path",{d:"M12.75 4.533V19.86a.75.75 0 00.872.725 49.33 49.33 0 006.364-1.294c.31-.19.607-.358.914-.54V5.25c-1.084-.308-2.18-.46-3.25-.46-1.637 0-3.235.32-4.75.922V4.534z"})]})},Dg=s=>{const{theme:e}=rn();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/kG8rd4vv/Limpa-Curriculum-Vitae-Education-256.png",alt:"Blackboard Icon",...s}):e==="noel"?_.jsx("img",{src:"/assets/img/gift2.png",alt:"Gift Icon",...s,className:`${s.className} object-contain`}):_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...s,children:_.jsx("path",{fillRule:"evenodd",d:"M2.25 6a3 3 0 013-3h13.5a3 3 0 013 3v12a3 3 0 01-3-3H5.25a3 3 0 01-3-3V6zm3.75 3a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H7.5a.75.75 0 01-.75-.75zM7.5 12a.75.75 0 000 1.5h6a.75.75 0 000-1.5h-6z",clipRule:"evenodd"})})},$k=s=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...s,children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})}),Fk=({onStart:s,onLoginClick:e})=>{const{theme:t}=rn();return _.jsx("div",{className:"text-center p-4 animate-slide-in-right",children:_.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8 md:p-12 max-w-2xl mx-auto relative",children:[t==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/MH9hVp8S/happy-techers-day.jpg",alt:"Icon Chc mng Ngy Nh gio",className:"h-24 w-24 mx-auto mb-4 rounded-full object-cover"}):t==="noel"?_.jsx(jo,{className:"h-24 w-24 mx-auto text-primary mb-4"}):_.jsx(jo,{className:"h-24 w-24 mx-auto text-primary mb-4"}),_.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-foreground mb-2",children:"ng Dng n tp"}),t==="tri-an"&&_.jsx("p",{className:"text-xl font-semibold text-primary mb-4",children:"Phin bn c bit Tri n Thy C"}),t==="noel"&&_.jsx("p",{className:"text-xl font-semibold text-primary mb-4",children:"Cho n Ging Sinh An Lnh"}),_.jsx("p",{className:"text-lg text-muted-foreground mb-4",children:"Cho mng anh/ch  n vi ng dng n tp, n thi chng ch chuyn mn phng tin thy ni a."}),t==="tri-an"&&_.jsx("p",{className:"text-lg text-muted-foreground mb-8 italic",children:'"Nhn ngy Nh gio Vit Nam 20-11, knh chc qu thy c lun mnh khe, hnh phc v thnh cng trong s nghip trng ngi."'}),_.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[_.jsx("button",{onClick:s,className:"w-full sm:w-auto bg-primary text-primary-foreground font-bold text-lg py-4 px-10 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105",children:"Bt u"}),_.jsx("button",{onClick:e,className:"w-full sm:w-auto bg-secondary text-secondary-foreground font-bold text-lg py-4 px-10 rounded-lg hover:bg-secondary/80 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300",children:"ng nhp"})]})]})})},Gk=(s,e)=>{const t="h-14 w-14 mx-auto text-primary mb-3 object-contain",r="h-14 w-14 mx-auto mb-3 object-cover rounded-full border-2 border-border/20 shadow-sm",a="h-14 w-14 mx-auto mb-3 object-contain drop-shadow-lg",l=s.name.toLowerCase();if(e==="noel")return l.includes("thuyn trng")?_.jsx("img",{src:"/assets/img/hat.png",alt:"Captain Hat",className:a}):l.includes("my trng")?_.jsx("img",{src:"/assets/img/gift4.png",alt:"Chief Engineer",className:a}):l.includes("thy th")?_.jsx("img",{src:"/assets/img/bell.png",alt:"Sailor",className:a}):l.includes("li phng tin")?_.jsx("img",{src:"/assets/img/tree.png",alt:"Helm",className:a}):l.includes("chng ch")?_.jsx("img",{src:"/assets/img/star-gold.png",alt:"Certificate",className:a}):_.jsx("img",{src:"/assets/img/gift5.png",alt:"Default",className:a});if(e==="tri-an")switch(s.id){case"thuyentruong-h1":return _.jsx("img",{src:"https://i.postimg.cc/Vs76y54F/8.jpg",alt:s.name,className:r});case"thuyentruong-h2":return _.jsx("img",{src:"https://i.postimg.cc/Pf6xGNK4/9.jpg",alt:s.name,className:r});case"thuyentruong-h3":return _.jsx("img",{src:"https://i.postimg.cc/Vs76y54W/7.jpg",alt:s.name,className:r});case"thuythu":return _.jsx(jg,{className:t});case"lai-phuong-tien":return _.jsx(jo,{className:t});case"maytruong-h1":return _.jsx("img",{src:"https://i.postimg.cc/zDpm90H6/undefined.jpg",alt:s.name,className:r});case"maytruong-h2":return _.jsx("img",{src:"https://i.postimg.cc/wMwSLjdc/Teachers-day-background-design-art-illustration.jpg",alt:s.name,className:r});case"maytruong-h3":return _.jsx("img",{src:"https://i.postimg.cc/NFdWmjwH/Hinh-thiep.jpg",alt:s.name,className:r});case"thomay":return _.jsx("img",{src:"https://i.postimg.cc/cJYy2WQN/hinh-nen-3.jpg",alt:s.name,className:r});case"caotoc":return _.jsx("img",{src:"https://i.postimg.cc/dQWMQybn/5.jpg",alt:s.name,className:r});case"ven-bien":return _.jsx("img",{src:"https://i.postimg.cc/zDdmDgs0/6.jpg",alt:s.name,className:r});case"antoan-ven-bien":return _.jsx("img",{src:"https://i.postimg.cc/ZYFWdtv0/BOARD.webp",alt:s.name,className:r});case"antoan-xang-dau":return _.jsx("img",{src:"https://i.postimg.cc/T2k82Dzc/4.jpg",alt:s.name,className:r});case"antoan-hoa-chat":return _.jsx("img",{src:"https://i.postimg.cc/mZVx08Ff/World-Teacher-s-Day-Flowers-Border-Pink.jpg",alt:s.name,className:r});default:return l.includes("chng ch")?_.jsx(uw,{className:t}):_.jsx(lw,{className:t})}return l.includes("thuyn trng")?_.jsx(Hk,{className:t}):l.includes("my trng")?_.jsx(qk,{className:t}):l.includes("thy th")?_.jsx(jg,{className:t}):l.includes("li phng tin")?_.jsx(jo,{className:t}):l.includes("chng ch")?_.jsx(uw,{className:t}):_.jsx(lw,{className:t})},Kk=({licenses:s,onSelect:e,onBack:t})=>{const{theme:r}=rn();return _.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right",children:[_.jsxs("div",{className:"relative text-center mb-10",children:[_.jsx("button",{onClick:t,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:_.jsx(Ho,{className:"h-10 w-10 text-primary"})}),r==="noel"?_.jsx("img",{src:"/assets/img/tree.png",alt:"Tree",className:"h-20 w-20 mx-auto mb-4 object-contain drop-shadow-lg"}):_.jsx(jg,{className:"h-20 w-20 mx-auto text-primary mb-4"}),_.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Chn Hng Bng"}),_.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Anh/ch vui lng chn hng bng mun n tp v thi th."})]}),_.jsx("div",{className:"bg-card p-6 rounded-2xl shadow-lg",children:_.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:s.map(a=>{const l=a.subjects.reduce((c,m)=>c+m.questions.length,0);return _.jsxs("button",{onClick:()=>e(a),className:"group w-full p-4 bg-background rounded-lg text-center hover:bg-primary/10 transition-all duration-300 transform hover:scale-105 focus:ring-4 focus:ring-ring focus:outline-none",children:[Gk(a,r),_.jsx("h3",{className:"text-md font-bold text-primary",children:a.name}),_.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[a.subjects.length," mn - ",l," cu"]})]},a.id)})})})]})},Qk=({onNameSubmit:s,onBack:e})=>{const[t,r]=ie.useState(""),a=l=>{l.preventDefault();const c=t.trim();s(c||"Hc vin")};return _.jsxs("div",{className:"w-full max-w-md mx-auto p-4 animate-slide-in-right",children:[_.jsxs("div",{className:"text-center mb-10",children:[_.jsx(o1,{className:"h-20 w-20 mx-auto text-primary mb-4"}),_.jsxs("div",{className:"relative flex justify-center items-center",children:[_.jsx("div",{className:"absolute left-0",children:_.jsx("button",{onClick:e,className:"bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:_.jsx(Ho,{className:"h-10 w-10 text-primary"})})}),_.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Thng tin ca anh/ch"})]}),_.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Nhp tn  ti c th lu li tin  hc tp cho anh/ch."})]}),_.jsx("div",{className:"bg-card p-8 rounded-2xl shadow-lg",children:_.jsxs("form",{onSubmit:a,children:[_.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-card-foreground mb-2",children:"Tn ca anh/ch"}),_.jsx("input",{id:"name",type:"text",value:t,onChange:l=>r(l.target.value),placeholder:"V d: Nguyn Vn A (c th b trng)",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-colors duration-300",autoFocus:!0}),_.jsx("button",{type:"submit",className:"mt-6 w-full bg-primary text-primary-foreground font-bold py-3 px-6 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300",children:"Xc nhn"})]})})]})},Yk=({onModeSelect:s,licenseName:e,userName:t,onSwitchLicense:r})=>_.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right",children:[_.jsxs("div",{className:"relative text-center mb-10",children:[_.jsx("div",{className:"absolute right-0 top-0",children:_.jsxs("button",{onClick:r,className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground hover:text-primary transition-all duration-300 py-1 px-2 rounded-md hover:bg-secondary",title:"Chn li hng bng",children:[_.jsx(Bk,{className:"h-4 w-4"}),_.jsx("span",{children:"Chn li hng bng"})]})}),_.jsxs("h1",{className:"text-4xl font-bold text-foreground",children:["Cho anh/ch ",t,"!"]}),_.jsxs("p",{className:"text-lg text-muted-foreground mt-2",children:["Anh/ch ang hc hng bng ",_.jsx("span",{className:"font-semibold text-primary",children:e}),"."]}),_.jsx("p",{className:"text-lg text-muted-foreground mt-1",children:"Hy chn mt ch   bt u."})]}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[_.jsxs("button",{onClick:()=>s("practice"),className:"group bg-card text-card-foreground p-8 rounded-2xl shadow-lg text-center hover:bg-primary/10 transition-all duration-300 transform hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-ring",children:[_.jsx(Ip,{className:"h-16 w-16 mx-auto text-primary mb-4 transition-transform group-hover:scale-110"}),_.jsx("h2",{className:"text-2xl font-bold text-card-foreground",children:"n tp"}),_.jsx("p",{className:"text-muted-foreground mt-2",children:"Luyn tp tng mn  nm vng kin thc."})]}),_.jsxs("button",{onClick:()=>s("exam"),className:"group bg-card text-card-foreground p-8 rounded-2xl shadow-lg text-center hover:bg-destructive/10 transition-all duration-300 transform hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-ring",children:[_.jsx(Dg,{className:"h-16 w-16 mx-auto text-destructive mb-4 transition-transform group-hover:scale-110"}),_.jsx("h2",{className:"text-2xl font-bold text-card-foreground",children:"Thi th"}),_.jsx("p",{className:"text-muted-foreground mt-2",children:"Lm bi thi 30 cu ngu nhin trong 45 pht."})]}),_.jsxs("button",{onClick:()=>s("online_exam"),className:"group bg-card text-card-foreground p-8 rounded-2xl shadow-lg text-center hover:bg-green-500/10 transition-all duration-300 transform hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-ring",children:[_.jsx(Pk,{className:"h-16 w-16 mx-auto text-green-500 mb-4 transition-transform group-hover:scale-110"}),_.jsx("h2",{className:"text-2xl font-bold text-card-foreground",children:"Thi th 2"}),_.jsx("p",{className:"text-muted-foreground mt-2",children:"Lm bi thi 30 cu ngu nhin trong 60 pht vi giao din m phng."})]})]})]}),cw=s=>{if(!s)return"";const e=new Date(s),t=e.getDate().toString().padStart(2,"0"),r=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getHours().toString().padStart(2,"0"),l=e.getMinutes().toString().padStart(2,"0");return`(${t}/${r} ${a}:${l})`},Jk=({subjects:s,progress:e,onSelect:t,onBack:r})=>_.jsxs("div",{className:"w-full max-w-2xl mx-auto p-4 animate-slide-in-right",children:[_.jsxs("div",{className:"relative text-center mb-10",children:[_.jsx("button",{onClick:r,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:_.jsx(Ho,{className:"h-10 w-10 text-primary"})}),_.jsx(Ip,{className:"h-20 w-20 mx-auto text-primary mb-4"}),_.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Chn Mn hc"}),_.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Chn mt mn  bt u n tp."})]}),_.jsx("div",{className:"bg-card p-6 rounded-2xl shadow-lg",children:_.jsx("div",{className:"space-y-3",children:s.map(a=>{const l=e[a.id],c=l&&l.lastScore!==null;return _.jsxs("button",{onClick:()=>t(a),className:"w-full flex items-center justify-between p-5 bg-background rounded-lg text-left hover:bg-primary/10 transition-all duration-300 transform hover:scale-[1.02] focus:ring-4 focus:ring-ring focus:outline-none",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"text-lg font-bold text-primary",children:a.name}),_.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.questions.length," cu hi"]})]}),_.jsxs("div",{className:"flex items-center gap-4",children:[c&&_.jsxs("div",{className:"text-right text-sm",children:[_.jsxs("p",{className:"text-muted-foreground flex items-center justify-end",children:[_.jsx("span",{children:"Ln cui:"}),_.jsxs("span",{className:"font-semibold text-primary ml-1",children:[l.lastScore,"/",a.questions.length]}),l.lastScoreTimestamp&&_.jsx("span",{className:"ml-1.5 text-xs text-muted-foreground/80",children:cw(l.lastScoreTimestamp)})]}),_.jsxs("p",{className:"text-muted-foreground flex items-center justify-end mt-0.5",children:[_.jsx("span",{children:"Cao nht:"}),_.jsxs("span",{className:"font-semibold text-success ml-1",children:[l.highScore,"/",a.questions.length]}),l.highScoreTimestamp&&_.jsx("span",{className:"ml-1.5 text-xs text-muted-foreground/80",children:cw(l.highScoreTimestamp)})]})]}),_.jsx(zk,{className:"h-6 w-6 text-muted-foreground"})]})]},a.id)})})})]}),Xk=({quiz:s,onFinish:e,onBack:t})=>{const[r,a]=ie.useState(0),[l,c]=ie.useState({}),m=ie.useMemo(()=>s.questions[r],[s.questions,r]),g=ie.useMemo(()=>l[m.id]!==void 0,[l,m.id]),p=ie.useMemo(()=>l[m.id]||null,[l,m.id]),b=()=>{e(l)},E=k=>{g||c(D=>({...D,[m.id]:k}))},x=()=>{r===s.questions.length-1?b():a(D=>D+1)},A=r/s.questions.length*100;return _.jsx("div",{className:"w-full max-w-3xl mx-auto p-4 md:p-6 animate-slide-in-right font-quiz-default",children:_.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-6 md:p-8",children:[_.jsxs("div",{className:"mb-6",children:[_.jsxs("div",{className:"flex justify-between items-center mb-4 relative",children:[_.jsx("button",{onClick:t,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-background/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-card transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:_.jsx(Ho,{className:"h-10 w-10"})}),_.jsx("h1",{className:"text-xl font-bold text-foreground text-center flex-grow",children:s.title}),_.jsx("button",{onClick:b,className:"bg-secondary text-secondary-foreground hover:bg-secondary/80 text-sm font-bold py-2 px-4 rounded-lg transition-colors duration-300",children:"Kt thc"})]}),_.jsx("div",{className:"w-full bg-secondary rounded-full h-2.5 mb-2",children:_.jsx("div",{className:"bg-primary h-2.5 rounded-full transition-all duration-500",style:{width:`${A}%`}})}),_.jsx("div",{className:"flex justify-between items-center text-sm text-muted-foreground",children:_.jsxs("span",{children:["Cu ",r+1," / ",s.questions.length]})})]}),_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-5 text-foreground",children:m.text}),m.image&&_.jsx("div",{className:"mb-6 rounded-lg overflow-hidden",children:_.jsx("img",{src:m.image,alt:"Cu hi",className:"w-full h-auto object-cover max-h-80"})}),_.jsx("div",{className:"space-y-3",children:m.answers.map(k=>{const D=p===k.id;let U="w-full text-left p-4 rounded-lg border-2 transition-all duration-300 flex items-center justify-between text-lg";const K=k.id===m.correctAnswerId;return g?K?U+=" bg-success/10 border-success text-success":D&&!K?U+=" bg-destructive/10 border-destructive text-destructive":U+=" border-border text-muted-foreground":D?U+=" bg-primary/10 border-primary ring-2 ring-primary text-primary-foreground":U+=" bg-background hover:bg-muted border-border text-foreground",_.jsxs("button",{onClick:()=>E(k.id),disabled:g,className:U,children:[_.jsx("span",{className:"flex-grow",children:k.text}),g&&_.jsxs(_.Fragment,{children:[K&&_.jsx(Rp,{className:"h-6 w-6 text-success ml-3"}),D&&!K&&_.jsx(Cp,{className:"h-6 w-6 text-destructive ml-3"})]})]},k.id)})}),_.jsx("div",{className:"mt-8",children:_.jsx("div",{className:"text-right",children:g?_.jsx("button",{onClick:x,className:"bg-success text-success-foreground font-bold py-3 px-8 rounded-lg hover:bg-success/90 transition-all duration-300 animate-slide-in-right",children:r===s.questions.length-1?"Hon thnh":"Cu tip theo"}):_.jsx("div",{className:"h-[48px]"})})})]})]})})},Wk=({quiz:s,userAnswers:e,score:t,onRetry:r,onBack:a,userName:l})=>{const[c,m]=ie.useState("all"),[g]=ie.useState(()=>new Date),p=s.questions.length,b=p>0?Math.round(t/p*100):0,E=ie.useMemo(()=>new Intl.DateTimeFormat("vi-VN",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit",year:"numeric"}).format(g),[g]),x=ie.useMemo(()=>c==="incorrect"?s.questions.filter(A=>e[A.id]!==A.correctAnswerId):s.questions,[c,s.questions,e]);return _.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right font-quiz-default",children:[_.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8 text-center mb-8",children:[_.jsx(l1,{className:"h-24 w-24 mx-auto text-yellow-400 mb-4"}),_.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Kt qu n tp"}),_.jsxs("div",{className:"my-4 text-muted-foreground",children:[_.jsxs("p",{className:"text-lg",children:["Hc vin: ",_.jsx("span",{className:"font-bold text-primary",children:l})]}),_.jsxs("p",{className:"text-sm",children:["Hon thnh lc: ",E]})]}),_.jsxs("div",{className:"bg-primary/10 inline-block p-6 rounded-xl border border-primary/20 mt-4",children:[_.jsxs("p",{className:"text-5xl font-extrabold text-primary",children:[t," / ",p]}),_.jsxs("p",{className:"text-2xl font-semibold text-primary/80 mt-1",children:["(",b,"%)"]})]})]}),_.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8",children:[_.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6",children:[_.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Xem li bi lm"}),_.jsxs("div",{className:"flex items-center gap-2 mt-4 sm:mt-0",children:[_.jsx("button",{onClick:()=>m("all"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${c==="all"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:"Tt c"}),_.jsxs("button",{onClick:()=>m("incorrect"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${c==="incorrect"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:["Ch cu sai (",s.questions.length-t,")"]})]})]}),_.jsx("div",{className:"space-y-6 max-h-[50vh] overflow-y-auto pr-2",children:x.length>0?x.map((A,k)=>{const D=e[A.id],U=A.correctAnswerId;return _.jsxs("div",{className:"p-4 border-b border-border last:border-b-0",children:[_.jsxs("p",{className:"font-semibold text-lg mb-3 text-foreground",children:[_.jsxs("span",{className:"mr-2",children:["Cu ",s.questions.findIndex(K=>K.id===A.id)+1,":"]}),A.text]}),_.jsx("div",{className:"space-y-2",children:A.answers.map(K=>{const te=K.id===D,F=K.id===U;let ne="flex items-center p-3 rounded-md text-sm ";return F?ne+="bg-success/10 text-success":te?ne+="bg-destructive/10 text-destructive":ne+="bg-muted/50 text-muted-foreground",_.jsxs("div",{className:ne,children:[F?_.jsx(Rp,{className:"h-5 w-5 mr-3 text-success"}):te?_.jsx(Cp,{className:"h-5 w-5 mr-3 text-destructive"}):_.jsx("div",{className:"w-5 h-5 mr-3"}),_.jsx("span",{children:K.text})]},K.id)})})]},A.id)}):_.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Tuyt vi! Anh/ch  tr li ng tt c cc cu hi."})})]}),_.jsxs("div",{className:"text-center mt-8 flex flex-col sm:flex-row justify-center items-center gap-4",children:[_.jsx("button",{onClick:a,className:"w-full sm:w-auto bg-primary text-primary-foreground font-bold py-3 px-8 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105",children:"Cc mn khc"}),_.jsx("button",{onClick:r,className:"w-full sm:w-auto bg-secondary text-secondary-foreground font-bold py-3 px-8 rounded-lg hover:bg-muted focus:outline-none focus:ring-4 focus:ring-ring transition-colors duration-300",children:"Lm li"})]})]})},Zk=s=>{const e=Math.floor(s/60),t=s%60;return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},ej=({quiz:s,onFinish:e,onBack:t,initialAnswers:r={},onAnswerChange:a,startTime:l})=>{const[c,m]=ie.useState(0),[g,p]=ie.useState(r),b=()=>{if(!l||!s.timeLimit)return s.timeLimit;const F=Math.floor((Date.now()-l)/1e3);return Math.max(0,s.timeLimit-F)},[E,x]=ie.useState(b()),A=ie.useMemo(()=>s.questions[c],[s.questions,c]),k=ie.useRef(g);ie.useEffect(()=>{k.current=g,a&&a(g)},[g,a]);const D=ie.useCallback(()=>{const F=k.current,ne=s.questions.length-Object.keys(F).length,W=ne>0?`Anh/ch vn cn ${ne} cu cha tr li. Anh/ch c chc chn mun np bi khng?`:"Anh/ch  hon thnh tt c cc cu hi. Anh/ch c mun np bi khng?";window.confirm(W)&&e(F)},[s.questions.length,e]);ie.useEffect(()=>{if(E===void 0)return;const F=setInterval(()=>{x(ne=>ne?ne-1:0)},1e3);return()=>clearInterval(F)},[]);const U=ie.useRef(e);ie.useEffect(()=>{U.current=e},[e]),ie.useEffect(()=>{E===0&&(alert(" ht gi lm bi! H thng s t ng np bi ca anh/ch."),U.current(k.current))},[E]);const K=F=>{p(ne=>({...ne,[A.id]:F}))},te=Object.keys(g).length/s.questions.length*100;return _.jsx("div",{className:"w-full max-w-3xl mx-auto p-4 md:p-6 animate-slide-in-right font-quiz-default",children:_.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-6 md:p-8",children:[_.jsxs("div",{className:"mb-6",children:[_.jsxs("div",{className:"flex justify-between items-center mb-4 relative",children:[_.jsx("button",{onClick:t,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-background/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-card transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:_.jsx(Ho,{className:"h-10 w-10"})}),_.jsx("h1",{className:"text-xl font-bold text-foreground text-center flex-grow",children:s.title}),_.jsx("button",{onClick:D,className:"bg-primary text-primary-foreground hover:bg-primary/90 text-sm font-bold py-2 px-4 rounded-lg transition-colors duration-300",children:"Np bi"})]}),_.jsx("div",{className:"w-full bg-secondary rounded-full h-2.5 mb-2",children:_.jsx("div",{className:"bg-primary h-2.5 rounded-full transition-all duration-500",style:{width:`${te}%`}})}),_.jsxs("div",{className:"flex justify-between items-center text-sm text-muted-foreground",children:[_.jsxs("span",{children:["Cu ",c+1," / ",s.questions.length]}),E!==void 0&&_.jsxs("div",{className:"flex items-center font-semibold text-destructive",children:[_.jsx(Lk,{className:"h-5 w-5 mr-1"}),_.jsx("span",{children:Zk(E)})]})]})]}),_.jsxs("div",{className:"mb-6 border-b border-border pb-6",children:[_.jsx("h3",{className:"text-sm font-semibold text-muted-foreground mb-3",children:"Danh sch cu hi:"}),_.jsx("div",{className:"flex flex-wrap gap-2",children:s.questions.map((F,ne)=>{const W=ne===c,re=g[F.id]!==void 0;let C="w-8 h-8 rounded-md flex items-center justify-center font-bold text-xs transition-all duration-200 ";return W?C+="bg-primary text-primary-foreground scale-110 shadow-lg ring-2 ring-ring":re?C+="bg-success text-success-foreground hover:bg-success/80":C+="bg-secondary text-secondary-foreground hover:bg-muted",_.jsx("button",{className:C,onClick:()=>m(ne),children:ne+1},F.id)})})]}),_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-5 text-foreground",children:A.text}),A.image&&_.jsx("div",{className:"mb-6 rounded-lg overflow-hidden",children:_.jsx("img",{src:A.image,alt:"Cu hi",className:"w-full h-auto object-cover max-h-80"})}),_.jsx("div",{className:"space-y-3",children:A.answers.map(F=>{const ne=g[A.id]===F.id;let W="w-full text-left p-4 rounded-lg border-2 transition-all duration-300 flex items-center justify-between text-lg";return ne?W+=" bg-primary/10 border-primary ring-2 ring-primary text-foreground":W+=" bg-background hover:bg-muted border-border text-foreground",_.jsx("button",{onClick:()=>K(F.id),className:W,children:_.jsx("span",{children:F.text})},F.id)})}),_.jsx("div",{className:"mt-8",children:_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("button",{onClick:()=>m(F=>F-1),disabled:c===0,className:"bg-secondary text-secondary-foreground font-bold py-3 px-8 rounded-lg hover:bg-muted disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300",children:"Cu trc"}),_.jsx("button",{onClick:()=>m(F=>F+1),disabled:c===s.questions.length-1,className:"bg-primary text-primary-foreground font-bold py-3 px-8 rounded-lg hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300",children:"Cu tip"})]})})]})]})})},tj=({quiz:s,userAnswers:e,score:t,onRetry:r,onBack:a,userName:l})=>{const[c,m]=ie.useState("all"),[g]=ie.useState(()=>new Date),p=s.questions.length,b=t>=25,E=ie.useMemo(()=>new Intl.DateTimeFormat("vi-VN",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit",year:"numeric"}).format(g),[g]),x=ie.useMemo(()=>c==="incorrect"?s.questions.filter(A=>e[A.id]!==A.correctAnswerId):s.questions,[c,s.questions,e]);return _.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right font-quiz-default",children:[_.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8 text-center mb-8",children:[_.jsx(l1,{className:"h-24 w-24 mx-auto text-yellow-400 mb-4"}),_.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Kt qu Thi th"}),_.jsxs("div",{className:"my-4 text-muted-foreground",children:[_.jsxs("p",{className:"text-lg",children:["Th sinh: ",_.jsx("span",{className:"font-bold text-primary",children:l})]}),_.jsxs("p",{className:"text-sm",children:["Hon thnh lc: ",E]})]}),_.jsx("p",{className:`text-2xl font-bold mb-6 ${b?"text-success":"text-destructive"}`,children:b?"Chc mng, anh/ch  T!":"Rt tic, anh/ch KHNG T."}),_.jsxs("div",{className:`inline-block p-6 rounded-xl border ${b?"bg-success/10 border-success/20":"bg-destructive/10 border-destructive/20"}`,children:[_.jsxs("p",{className:`text-5xl font-extrabold ${b?"text-success":"text-destructive"}`,children:[t," / ",p]}),_.jsx("p",{className:"text-lg text-muted-foreground mt-1",children:"S cu ng"})]})]}),_.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8",children:[_.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6",children:[_.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Xem li bi lm"}),_.jsxs("div",{className:"flex items-center gap-2 mt-4 sm:mt-0",children:[_.jsx("button",{onClick:()=>m("all"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${c==="all"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:"Tt c"}),_.jsxs("button",{onClick:()=>m("incorrect"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${c==="incorrect"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:["Ch cu sai (",s.questions.length-t,")"]})]})]}),_.jsx("div",{className:"space-y-6 max-h-[50vh] overflow-y-auto pr-2",children:x.length>0?x.map((A,k)=>{const D=e[A.id],U=A.correctAnswerId;return _.jsxs("div",{className:"p-4 border-b border-border last:border-b-0",children:[_.jsxs("p",{className:"font-semibold text-lg mb-3 text-foreground",children:[_.jsxs("span",{className:"mr-2",children:["Cu ",s.questions.findIndex(K=>K.id===A.id)+1,":"]}),A.text]}),_.jsx("div",{className:"space-y-2",children:A.answers.map(K=>{const te=K.id===D,F=K.id===U;let ne="flex items-center p-3 rounded-md text-sm ";return F?ne+="bg-success/10 text-success":te?ne+="bg-destructive/10 text-destructive":ne+="bg-muted/50 text-muted-foreground",_.jsxs("div",{className:ne,children:[F?_.jsx(Rp,{className:"h-5 w-5 mr-3 text-success"}):te?_.jsx(Cp,{className:"h-5 w-5 mr-3 text-destructive"}):_.jsx("div",{className:"w-5 h-5 mr-3"}),_.jsx("span",{children:K.text})]},K.id)})})]},A.id)}):_.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Tuyt vi! Anh/ch  tr li ng tt c cc cu hi."})})]}),_.jsxs("div",{className:"text-center mt-8 flex flex-col sm:flex-row justify-center items-center gap-4",children:[_.jsx("button",{onClick:a,className:"w-full sm:w-auto bg-primary text-primary-foreground font-bold py-3 px-8 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105",children:"Quay li"}),_.jsx("button",{onClick:r,className:"w-full sm:w-auto bg-secondary text-secondary-foreground font-bold py-3 px-8 rounded-lg hover:bg-muted focus:outline-none focus:ring-4 focus:ring-ring transition-colors duration-300",children:"Lm li bi thi"})]})]})},nj=s=>{const e=Math.floor(s/60),t=s%60;return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},$m=({id:s,name:e,checked:t,onChange:r})=>_.jsxs("div",{className:"relative flex items-center justify-center w-5 h-5 flex-shrink-0",children:[_.jsx("input",{type:"radio",id:s,name:e,checked:t,onChange:r,className:"appearance-none h-4 w-4 border-2 border-gray-400 rounded-full cursor-pointer"}),t&&_.jsx("div",{className:"absolute h-2 w-2 bg-blue-600 rounded-full"})]}),sj=({quiz:s,onFinish:e,onBack:t,userName:r,selectedLicense:a,initialAnswers:l={},onAnswerChange:c,startTime:m})=>{const[g,p]=ie.useState(0),[b,E]=ie.useState(l),x=()=>{if(!m||!s.timeLimit)return s.timeLimit??3600;const W=Math.floor((Date.now()-m)/1e3);return Math.max(0,(s.timeLimit??3600)-W)},[A,k]=ie.useState(x()),D=ie.useMemo(()=>s.questions[g],[s.questions,g]),U=ie.useRef(b);ie.useEffect(()=>{U.current=b,c&&c(b)},[b,c]);const K=()=>{window.confirm("Anh/ch c chc chn mun thot khi bi thi khng? Mi tin trnh s b mt.")&&t()},te=ie.useCallback(()=>{const W=U.current,re=s.questions.length-Object.keys(W).length,C=re>0?`Anh/ch vn cn ${re} cu cha tr li. Anh/ch c chc chn mun np bi khng?`:"Anh/ch  hon thnh tt c cc cu hi. Anh/ch c mun np bi khng?";window.confirm(C)&&e(W)},[s.questions.length,e]),F=ie.useRef(e);ie.useEffect(()=>{F.current=e},[e]),ie.useEffect(()=>{const W=setInterval(()=>{k(re=>re>0?re-1:0)},1e3);return()=>clearInterval(W)},[]),ie.useEffect(()=>{A===0&&(alert(" ht gi lm bi! H thng s t ng np bi ca anh/ch."),F.current(U.current))},[A]);const ne=(W,re)=>{E(C=>({...C,[W]:re}))};return _.jsxs("div",{className:"w-full max-w-7xl mx-auto font-sans text-black shadow-lg animate-slide-in-right rounded-md",children:[_.jsx("div",{className:"h-3 bg-yellow-700 rounded-t-md border-b-2 border-yellow-900"}),_.jsxs("div",{className:"bg-white p-4",children:[_.jsxs("div",{className:"flex justify-between items-start pb-4 border-b border-gray-300",children:[_.jsxs("div",{className:"flex gap-4 items-center",children:[_.jsx("img",{src:"https://i.postimg.cc/8PDn1wfM/favicon.png",alt:"Avatar",className:"w-20 h-[100px] border border-gray-300 object-contain p-1"}),_.jsxs("div",{className:"text-sm",children:[_.jsx("p",{children:"S bo danh:"}),_.jsx("p",{children:"Ngy sinh:"}),_.jsxs("p",{className:"mt-2",children:["H tn: ",_.jsx("span",{className:"font-bold text-blue-700",children:r||"Hc vin"})]}),_.jsxs("p",{children:["Hng bng: ",_.jsx("span",{className:"font-bold text-blue-700",children:(a==null?void 0:a.name)||"Thuyn trng hng ba - T3"})]})]})]}),_.jsxs("div",{className:"flex items-start gap-4",children:[_.jsxs("div",{className:"bg-[#f0ad4e] text-black p-2 rounded-md text-sm w-48",children:[_.jsx("p",{className:"font-bold",children:"ang thi"}),_.jsx("p",{children:"Thi gian: 45 pht"}),_.jsx("p",{children:"B gi: 0 pht"}),_.jsxs("p",{children:["Cn li: ",_.jsx("span",{className:"font-bold",children:nj(A)})]})]}),_.jsx("button",{onClick:K,className:"text-sm text-gray-600 hover:text-red-500 font-semibold",children:"Thot"})]})]}),_.jsxs("div",{className:"flex mt-4 gap-4",children:[_.jsxs("div",{className:"w-[60%] border border-gray-400 rounded-md p-4 flex flex-col justify-between min-h-[500px]",children:[_.jsxs("div",{children:[_.jsx("p",{className:"font-bold mb-4 border-b border-dashed border-gray-400 pb-2",children:"Ni dung cu hi"}),_.jsxs("p",{className:"font-bold text-red-600 mb-2",children:["Cu :",g+1]}),_.jsx("p",{className:"mb-4 font-semibold",children:D.text}),D.image&&_.jsx("div",{className:"mb-4 flex justify-start",children:_.jsx("img",{src:D.image,alt:"Hnh nh cu hi",className:"max-w-full h-auto max-h-60 object-contain border border-gray-300 rounded-md"})}),_.jsx("div",{className:"space-y-4",children:D.answers.map((W,re)=>_.jsxs("label",{htmlFor:`q_main_${W.id}`,className:"flex items-center cursor-pointer",children:[_.jsx($m,{id:`q_main_${W.id}`,name:`q_main_${D.id}`,checked:b[D.id]===W.id,onChange:()=>ne(D.id,W.id)}),_.jsxs("span",{className:"ml-3 flex",children:[_.jsxs("span",{className:"font-bold mr-1 text-gray-700",children:[String.fromCharCode(97+re),"."]}),_.jsx("p",{children:W.text})]})]},W.id))})]}),_.jsxs("div",{className:"flex justify-center gap-4 mt-8",children:[_.jsxs("button",{onClick:()=>p(W=>Math.max(0,W-1)),disabled:g===0,className:"bg-[#f0ad4e] text-black px-4 py-2 rounded-md border border-gray-400 flex items-center font-semibold hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-5 h-5",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),"Tr li"]}),_.jsxs("button",{onClick:()=>p(W=>Math.min(s.questions.length-1,W+1)),disabled:g===s.questions.length-1,className:"bg-[#f0ad4e] text-black px-4 py-2 rounded-md border border-gray-400 flex items-center font-semibold hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Tip tc",_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-5 h-5",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})]})]})]}),_.jsx("div",{className:"w-[40%]",children:_.jsxs("div",{className:"flex gap-2",children:[_.jsxs("table",{className:"w-1/2 border-collapse text-xs",children:[_.jsx("thead",{children:_.jsxs("tr",{className:"bg-[#f0ad4e]",children:[_.jsx("th",{className:"border border-gray-400 p-1",children:"Cu"}),_.jsx("th",{className:"border border-gray-400 p-1",children:"a"}),_.jsx("th",{className:"border border-gray-400 p-1",children:"b"}),_.jsx("th",{className:"border border-gray-400 p-1",children:"c"}),_.jsx("th",{className:"border border-gray-400 p-1",children:"d"})]})}),_.jsx("tbody",{children:s.questions.slice(0,15).map((W,re)=>_.jsxs("tr",{className:g===re?"bg-cyan-200":"",children:[_.jsx("td",{className:`border border-gray-400 p-1 font-bold text-center cursor-pointer ${g===re?"text-black":"text-gray-500"}`,onClick:()=>p(re),children:re+1}),W.answers.slice(0,4).map(C=>_.jsx("td",{className:"border border-gray-400 p-1 text-center",children:_.jsx($m,{id:`grid_q_${W.id}_${C.id}`,name:`grid_q_${W.id}`,checked:b[W.id]===C.id,onChange:()=>ne(W.id,C.id)})},C.id))]},W.id))})]}),_.jsxs("div",{className:"w-1/2",children:[_.jsxs("table",{className:"w-full border-collapse text-xs",children:[_.jsx("thead",{children:_.jsxs("tr",{className:"bg-[#f0ad4e]",children:[_.jsx("th",{className:"border border-gray-400 p-1",children:"Cu"}),_.jsx("th",{className:"border border-gray-400 p-1",children:"a"}),_.jsx("th",{className:"border border-gray-400 p-1",children:"b"}),_.jsx("th",{className:"border border-gray-400 p-1",children:"c"}),_.jsx("th",{className:"border border-gray-400 p-1",children:"d"})]})}),_.jsx("tbody",{children:s.questions.slice(15,30).map((W,re)=>{const C=re+15;return _.jsxs("tr",{className:g===C?"bg-cyan-200":"",children:[_.jsx("td",{className:`border border-gray-400 p-1 font-bold text-center cursor-pointer ${g===C?"text-black":"text-gray-500"}`,onClick:()=>p(C),children:C+1}),W.answers.slice(0,4).map(R=>_.jsx("td",{className:"border border-gray-400 p-1 text-center",children:_.jsx($m,{id:`grid_q_${W.id}_${R.id}`,name:`grid_q_${W.id}`,checked:b[W.id]===R.id,onChange:()=>ne(W.id,R.id)})},R.id))]},W.id)})})]}),_.jsx("div",{className:"text-center mt-4",children:_.jsx("button",{onClick:te,className:"bg-[#337ab7] text-white mt-4 px-8 py-2 rounded-md font-semibold hover:bg-blue-700 transition-colors",children:"Np bi"})})]})]})})]}),_.jsxs("div",{className:"mt-4 bg-[#005a9c] text-white p-4 rounded-b-md flex items-center gap-4 text-xs",children:[_.jsx("img",{src:"https://i.postimg.cc/8PDn1wfM/favicon.png",alt:"Logo",className:"h-16 w-16 object-contain"}),_.jsxs("div",{children:[_.jsx("p",{className:"font-bold",children:"CNG TY C PHN T VN V GIO DC NINH BNH"}),_.jsx("p",{children:"a ch: ng Triu Vit Vng, phng Hoa L, tnh Ninh Bnh "})]})]})]})]})},rj=[{name:"noel",label:"Ging Sinh",color:"bg-[#8B0000]"},{name:"modern",label:"Hin i",color:"bg-indigo-600"},{name:"classic",label:"C in",color:"bg-[#6F6049]"},{name:"sunrise",label:"Bnh Minh",color:"bg-orange-500"},{name:"tri-an",label:"Tri n",color:"bg-red-400"}],ij=()=>{const[s,e]=ie.useState(!1),{theme:t,setTheme:r}=rn(),a=l=>{r(l),e(!1)};return _.jsxs("div",{className:"relative",children:[s&&_.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-40 rounded-lg border border-border bg-card p-2 shadow-2xl flex flex-col gap-1 animate-slide-in-right",children:rj.map(l=>_.jsxs("button",{onClick:()=>a(l.name),className:`w-full text-left px-3 py-2 text-sm font-semibold rounded-md flex items-center gap-3 transition-colors ${t===l.name?"bg-primary/20 text-primary":"text-card-foreground hover:bg-secondary"}`,children:[_.jsx("span",{className:`w-4 h-4 rounded-full ${l.color} border border-white/20`}),l.label]},l.name))}),_.jsx("button",{onClick:()=>e(!s),className:"flex h-10 w-10 items-center justify-center rounded-lg bg-secondary text-secondary-foreground shadow-sm transition-colors hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring","aria-label":"Change theme",children:_.jsx(Uk,{className:"h-6 w-6"})})]})},aj=({onVersionClick:s})=>{const{theme:e}=rn();let t="Phin bn v3.4.0 - Chc anh/ch n thi hiu qu!";return e==="tri-an"?t="Phin bn v3.4.0 - Knh tng Qu Thy C!":e==="noel"&&(t="Phin bn v3.4.0 - Ging sinh an lnh, rn rng ting nhc!"),_.jsxs("footer",{className:"fixed bottom-0 left-0 right-0 z-40 flex h-14 w-full items-center justify-between border-t border-border bg-card/80 px-4 backdrop-blur-sm sm:px-6",children:[_.jsx("button",{onClick:s,className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:t}),_.jsx(ij,{})]})},oj=({onBack:s})=>{const[e,t]=ie.useState(""),[r,a]=ie.useState(""),[l,c]=ie.useState(!1),[m,g]=ie.useState(null),p=async b=>{b.preventDefault(),c(!0),g(null);let E=e.trim();E.toLowerCase()==="admin"&&(E="admin@onthihanghai.local");try{await dI(kg,E,r)}catch(x){console.error("Login error:",x),g("Ti khon hoc mt khu khng chnh xc.")}c(!1)};return _.jsxs("div",{className:"w-full max-w-md mx-auto p-4 animate-slide-in-right",children:[_.jsxs("div",{className:"relative text-center mb-10",children:[_.jsx("button",{onClick:s,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:_.jsx(Ho,{className:"h-10 w-10 text-primary"})}),_.jsx(jo,{className:"h-20 w-20 mx-auto text-primary mb-4"}),_.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"ng nhp"}),_.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Truy cp vo h thng qun l hc tp."})]}),_.jsx("div",{className:"bg-card p-8 rounded-2xl shadow-lg",children:_.jsxs("form",{onSubmit:p,children:[m&&_.jsx("p",{className:"bg-destructive/10 text-destructive p-3 rounded-md mb-4 text-center",children:m}),_.jsxs("div",{className:"mb-4",children:[_.jsx("label",{htmlFor:"account",className:"block text-sm font-medium text-card-foreground mb-2",children:"Ti khon"}),_.jsx("input",{id:"account",type:"text",value:e,onChange:b=>t(b.target.value),placeholder:"Nhp ti khon hoc email",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-colors duration-300",required:!0,autoFocus:!0})]}),_.jsxs("div",{className:"mb-6",children:[_.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-card-foreground mb-2",children:"Mt khu"}),_.jsx("input",{id:"password",type:"password",value:r,onChange:b=>a(b.target.value),placeholder:"",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-colors duration-300",required:!0})]}),_.jsx("button",{type:"submit",disabled:l,className:"w-full bg-primary text-primary-foreground font-bold py-3 px-6 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 disabled:opacity-50 disabled:cursor-wait",children:l?"ang x l...":"ng nhp"})]})})]})},lj=({userProfile:s})=>{const e=s.role==="admin",t=()=>{alert("Ti khon ca anh/ch khng c quyn truy cp chc nng ny.")};return _.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right",children:[_.jsxs("div",{className:"relative text-center mb-10",children:[_.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Bng iu khin"}),_.jsxs("p",{className:"text-lg text-muted-foreground mt-2",children:["Cho mng tr li, ",s.email,"!"]})]}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[_.jsxs("button",{className:"group bg-card text-card-foreground p-8 rounded-2xl shadow-lg text-center hover:bg-primary/10 transition-all duration-300 transform hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-ring",children:[_.jsx(Ip,{className:"h-16 w-16 mx-auto text-primary mb-4 transition-transform group-hover:scale-110"}),_.jsx("h2",{className:"text-xl font-bold text-card-foreground",children:"Qun l Lp hc"}),_.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:"To, xem v qun l cc lp hc ca anh/ch."})]}),_.jsxs("button",{className:"group bg-card text-card-foreground p-8 rounded-2xl shadow-lg text-center hover:bg-primary/10 transition-all duration-300 transform hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-ring",children:[_.jsx(Dg,{className:"h-16 w-16 mx-auto text-primary mb-4 transition-transform group-hover:scale-110"}),_.jsx("h2",{className:"text-xl font-bold text-card-foreground",children:"Qun l Hc vin"}),_.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:"Thm, xa v xem tin  ca hc vin trong lp."})]}),_.jsxs("button",{onClick:e?void 0:t,disabled:!e,className:`group bg-card text-card-foreground p-8 rounded-2xl shadow-lg text-center transition-all duration-300 focus:outline-none \r
                               disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none\r
                               hover:bg-primary/10 transform hover:-translate-y-2 focus:ring-4 focus:ring-ring`,children:[_.jsx(Dg,{className:"h-16 w-16 mx-auto text-primary mb-4 transition-transform group-hover:scale-110"}),_.jsx("h2",{className:"text-xl font-bold text-card-foreground",children:"Qun l Gio vin"}),_.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:"To v qun l ti khon cho cc gio vin khc (ch Admin)."})]})]})]})},uj={admin:"Qun tr vin",teacher:"Gio vin",student:"Hc vin"},cj=({userProfile:s,onLogout:e})=>_.jsx("header",{className:"w-full max-w-4xl mx-auto bg-card/80 backdrop-blur-sm p-4 rounded-xl shadow-md mb-8 sticky top-4 z-10",children:_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx(o1,{className:"h-10 w-10 text-primary"}),_.jsxs("div",{children:[_.jsx("p",{className:"font-bold text-foreground",children:s.email}),_.jsx("p",{className:"text-sm text-muted-foreground font-medium bg-secondary text-secondary-foreground px-2 py-0.5 rounded-full inline-block",children:uj[s.role]})]})]}),_.jsxs("div",{className:"flex gap-2",children:[_.jsxs("a",{href:"/",className:"bg-secondary text-secondary-foreground font-semibold text-sm py-2 px-4 rounded-lg hover:bg-secondary/80 transition-colors duration-300 flex items-center",children:[_.jsx("span",{className:"mr-1",children:""})," V trang ch"]}),_.jsx("button",{onClick:e,className:"bg-destructive text-destructive-foreground font-semibold text-sm py-2 px-4 rounded-lg hover:bg-destructive/90 focus:outline-none focus:ring-4 focus:ring-ring transition-colors duration-300",children:"ng xut"})]})]})}),hj=({onClose:s})=>_.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm",onClick:s,children:_.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-6 md:p-8 max-w-2xl w-full m-4 animate-slide-in-right",onClick:e=>e.stopPropagation(),children:[_.jsxs("div",{className:"flex justify-between items-center mb-4",children:[_.jsxs("h2",{className:"text-2xl font-bold text-foreground flex items-center gap-2",children:[_.jsx($k,{className:"h-6 w-6"}),"Lch s cp nht"]}),_.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-secondary transition-colors","aria-label":"ng",children:_.jsx(Vk,{className:"h-6 w-6"})})]}),_.jsxs("div",{className:"text-sm text-left text-muted-foreground max-h-[70vh] overflow-y-auto pr-2 space-y-4",children:[_.jsxs("div",{children:[_.jsx("p",{className:"font-semibold text-foreground",children:_.jsx("strong",{children:"Phin bn v3.4.0 (Cp nht m nhc):"})}),_.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[_.jsxs("li",{children:[" ",_.jsx("strong",{children:"Nhc nn Jingle Bells:"})," T ng pht nhc Ging sinh vui nhn khi m ng dng (vi Theme Noel)."]}),_.jsxs("li",{children:[" ",_.jsx("strong",{children:"iu khin nhc:"})," Nt Bt/Tt nhc tin li  gc mn hnh."]}),_.jsxs("li",{children:[" ",_.jsx("strong",{children:"Hnh nn mi:"})," Cp nht hnh nn Ging sinh cht lng cao."]})]})]}),_.jsxs("div",{children:[_.jsx("p",{className:"font-semibold text-foreground",children:_.jsx("strong",{children:"Phin bn v3.3.1 (Cp nht giao din):"})}),_.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[_.jsxs("li",{children:[" ",_.jsx("strong",{children:"Theme Noel  Rc:"})," Chuyn i theme Ging Sinh sang tng mu  ch o (Red Tone) cho c nn v biu tng."]}),_.jsxs("li",{children:[" ",_.jsx("strong",{children:"Nn  ru vang:"})," S dng mu nn  m sang trng kt hp vi cc icon  ti to hiu ng ni bt."]})]})]}),_.jsxs("div",{children:[_.jsx("p",{className:"font-semibold text-foreground",children:_.jsx("strong",{children:"Phin bn v3.3.0 (Cp nht Ging Sinh):"})}),_.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[_.jsxs("li",{children:[" ",_.jsx("strong",{children:"Giao din mi:"}),' Ra mt ch  "Ging Sinh" (Noel) vi tng mu Xanh -  - Vng m p.']}),_.jsxs("li",{children:[" ",_.jsx("strong",{children:"Ch  mc nh:"})," ng dng t ng chuyn sang giao din Ging Sinh  cho n ma l hi."]}),_.jsxs("li",{children:[" ",_.jsx("strong",{children:"Ci tin UI:"})," Ti u ha  tng phn cho ch  nn ti (dark mode) ca theme mi."]})]})]})]})]})}),dj=()=>{const s=["gift1.png","bell.png","star-gold.png","ball.png","gift2.png","gift3.png","gift4.png","gift5.png"];return _.jsxs(_.Fragment,{children:[_.jsx("style",{dangerouslySetInnerHTML:{__html:`
        /* === PHN 5: HIU NG TUYT & QU RI === */
        .snowflakes {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 9999;
        }
        
        .snowflake {
            color: #fff;
            font-size: 1.2em;
            font-family: Arial, sans-serif;
            text-shadow: 0 0 3px rgba(255,255,255,0.8); /* Tuyt pht sng nh */
            position: fixed;
            top: -10%;
            z-index: 9999;
            user-select: none;
            cursor: default;
            animation-name: snowflakes-fall, snowflakes-shake;
            animation-timing-function: linear, ease-in-out;
            animation-iteration-count: infinite, infinite;
            animation-play-state: running, running;
        }

        .snowflake-img img {
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.3));
            width: 30px; 
            height: auto;
            opacity: 0.9;
        }

        @keyframes snowflakes-fall {
            0% { top: -10%; }
            100% { top: 100%; }
        }
        @keyframes snowflakes-shake {
            0% { transform: translateX(0px) rotate(0deg); }
            50% { transform: translateX(80px) rotate(180deg); }
            100% { transform: translateX(0px) rotate(360deg); }
        }

        /* Cu hnh ri ngu nhin */
        .snowflake:nth-of-type(1) { left: 1%; animation-duration: 12s, 4s; animation-delay: 0s, 0s; }
        .snowflake:nth-of-type(2) { left: 5%; animation-duration: 15s, 6s; animation-delay: 1s, 1s; }
        .snowflake:nth-of-type(3) { left: 10%; animation-duration: 10s, 3s; animation-delay: 2s, 0.5s; }
        .snowflake:nth-of-type(4) { left: 15%; animation-duration: 18s, 5s; animation-delay: 4s, 2s; }
        .snowflake:nth-of-type(5) { left: 20%; animation-duration: 11s, 4s; animation-delay: 2s, 2s; }
        .snowflake:nth-of-type(6) { left: 25%; animation-duration: 14s, 7s; animation-delay: 6s, 3s; }
        .snowflake:nth-of-type(7) { left: 30%; animation-duration: 16s, 5s; animation-delay: 3s, 2s; }
        .snowflake:nth-of-type(8) { left: 35%; animation-duration: 13s, 4s; animation-delay: 1s, 1s; }
        .snowflake:nth-of-type(9) { left: 40%; animation-duration: 17s, 6s; animation-delay: 0s, 0s; }
        .snowflake:nth-of-type(10) { left: 45%; animation-duration: 9s, 3s; animation-delay: 5s, 1.5s; }
        .snowflake:nth-of-type(11) { left: 50%; animation-duration: 14s, 5s; animation-delay: 2s, 3s; }
        .snowflake:nth-of-type(12) { left: 55%; animation-duration: 11s, 4s; animation-delay: 4s, 1s; }
        .snowflake:nth-of-type(13) { left: 60%; animation-duration: 19s, 7s; animation-delay: 1s, 2s; }
        .snowflake:nth-of-type(14) { left: 65%; animation-duration: 12s, 3s; animation-delay: 3s, 0s; }
        .snowflake:nth-of-type(15) { left: 70%; animation-duration: 15s, 6s; animation-delay: 5s, 4s; }
        .snowflake:nth-of-type(16) { left: 75%; animation-duration: 10s, 4s; animation-delay: 0s, 2s; }
        .snowflake:nth-of-type(17) { left: 80%; animation-duration: 16s, 5s; animation-delay: 2s, 1s; }
        .snowflake:nth-of-type(18) { left: 85%; animation-duration: 13s, 4s; animation-delay: 4s, 3s; }
        .snowflake:nth-of-type(19) { left: 90%; animation-duration: 18s, 6s; animation-delay: 1s, 2s; }
        .snowflake:nth-of-type(20) { left: 95%; animation-duration: 11s, 3s; animation-delay: 3s, 0s; }
        
        .snowflake:nth-of-type(21) { left: 2%; animation-duration: 13s, 5s; animation-delay: 5s, 1s; }
        .snowflake:nth-of-type(22) { left: 8%; animation-duration: 10s, 3s; animation-delay: 2s, 4s; }
        .snowflake:nth-of-type(23) { left: 12%; animation-duration: 16s, 6s; animation-delay: 1s, 2s; }
        .snowflake:nth-of-type(24) { left: 18%; animation-duration: 12s, 4s; animation-delay: 6s, 0s; }
        .snowflake:nth-of-type(25) { left: 22%; animation-duration: 14s, 5s; animation-delay: 0s, 3s; }
        .snowflake:nth-of-type(26) { left: 28%; animation-duration: 11s, 3s; animation-delay: 4s, 2s; }
        .snowflake:nth-of-type(27) { left: 32%; animation-duration: 19s, 7s; animation-delay: 2s, 1s; }
        .snowflake:nth-of-type(28) { left: 38%; animation-duration: 15s, 6s; animation-delay: 5s, 5s; }
        .snowflake:nth-of-type(29) { left: 42%; animation-duration: 12s, 4s; animation-delay: 1s, 0s; }
        .snowflake:nth-of-type(30) { left: 48%; animation-duration: 17s, 5s; animation-delay: 3s, 2s; }
        .snowflake:nth-of-type(31) { left: 52%; animation-duration: 9s, 3s; animation-delay: 0s, 3s; }
        .snowflake:nth-of-type(32) { left: 58%; animation-duration: 14s, 6s; animation-delay: 4s, 1s; }
        .snowflake:nth-of-type(33) { left: 62%; animation-duration: 11s, 4s; animation-delay: 2s, 4s; }
        .snowflake:nth-of-type(34) { left: 68%; animation-duration: 16s, 5s; animation-delay: 6s, 0s; }
        .snowflake:nth-of-type(35) { left: 72%; animation-duration: 13s, 3s; animation-delay: 1s, 2s; }
        .snowflake:nth-of-type(36) { left: 78%; animation-duration: 18s, 7s; animation-delay: 5s, 1s; }
        .snowflake:nth-of-type(37) { left: 82%; animation-duration: 10s, 4s; animation-delay: 2s, 3s; }
        .snowflake:nth-of-type(38) { left: 88%; animation-duration: 15s, 6s; animation-delay: 4s, 0s; }
        .snowflake:nth-of-type(39) { left: 92%; animation-duration: 12s, 5s; animation-delay: 0s, 2s; }
        .snowflake:nth-of-type(40) { left: 98%; animation-duration: 17s, 4s; animation-delay: 3s, 5s; }

        .snowflake:nth-child(odd) { animation-direction: normal; }
        .snowflake:nth-child(even) { animation-direction: alternate; }

        @media (max-width: 768px) {
            .snowflake { font-size: 1em; }
            .snowflake-img img { width: 20px; }
        }
      `}}),_.jsxs("div",{className:"snowflakes","aria-hidden":"true",children:[Array.from({length:100}).map((e,t)=>_.jsxs("div",{className:"snowflake",children:[["","",""][t%3]," "]},`snow-${t}`)),Array.from({length:8}).map((e,t)=>{const r=s[t%s.length];return _.jsx("div",{className:"snowflake snowflake-img",children:_.jsx("img",{src:`/assets/img/${r}`,alt:"",style:{width:"25px",height:"auto"}})},`img-${t}`)})]})]})},fj=()=>{const[s,e]=ie.useState(!1),t=ie.useRef(null);ie.useEffect(()=>{(async()=>{if(t.current)try{t.current.volume=.5,await t.current.play(),e(!0)}catch(l){console.log("Trnh duyt chn t ng pht nhc, ngi dng cn tng tc th cng:",l),e(!1)}})()},[]);const r=()=>{t.current&&(s?t.current.pause():t.current.play().catch(a=>console.error("Khng th pht nhc:",a)),e(!s))};return _.jsxs("div",{className:"fixed bottom-4 left-4 z-50 animate-bounce-slow",children:[_.jsx("audio",{ref:t,src:"/music/jingle-bells.mp3",loop:!0}),_.jsx("button",{onClick:r,className:`
          flex items-center justify-center w-12 h-12 rounded-full border-2 border-white shadow-lg transition-all duration-300 overflow-hidden
          ${s?"bg-red-600 hover:bg-red-700 animate-spin-slow":"bg-gray-600 hover:bg-gray-700"}
        `,title:s?"Tt nhc Ging sinh":"Bt nhc Ging sinh",children:s?_.jsx("img",{src:"/assets/img/bell.png",alt:"Playing",className:"w-8 h-8 object-contain"}):_.jsx("img",{src:"/assets/img/MusicPlayer.png",alt:"Muted",className:"w-8 h-8 object-contain opacity-50 grayscale"})})]})},mj=({user:s})=>_.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden mb-8 border border-slate-200 max-w-2xl mx-auto",children:[_.jsx("div",{className:"bg-blue-600 text-white p-4 text-center",children:_.jsx("h3",{className:"m-0 text-xl uppercase tracking-wider font-bold",children:"Th D Thi"})}),_.jsxs("div",{className:"p-6",children:[_.jsxs("div",{className:"flex justify-between mb-3 border-b border-dashed border-slate-200 pb-2 last:border-0 last:mb-0",children:[_.jsx("span",{className:"font-semibold text-slate-500",children:"H v tn:"}),_.jsx("span",{className:"font-bold text-slate-800 text-right",children:s.fullName||"---"})]}),_.jsxs("div",{className:"flex justify-between mb-3 border-b border-dashed border-slate-200 pb-2 last:border-0 last:mb-0",children:[_.jsx("span",{className:"font-semibold text-slate-500",children:"Ngy sinh:"}),_.jsx("span",{className:"font-bold text-slate-800 text-right",children:s.birthDate||"---"})]}),_.jsxs("div",{className:"flex justify-between mb-3 border-b border-dashed border-slate-200 pb-2 last:border-0 last:mb-0",children:[_.jsx("span",{className:"font-semibold text-slate-500",children:"a ch:"}),_.jsx("span",{className:"font-bold text-slate-800 text-right",children:s.address||"---"})]}),_.jsxs("div",{className:"flex justify-between mb-3 border-b border-dashed border-slate-200 pb-2 last:border-0 last:mb-0",children:[_.jsx("span",{className:"font-semibold text-slate-500",children:"Lp / Kha:"}),_.jsxs("span",{className:"font-bold text-slate-800 text-right",children:[s.class?`${s.class}`:"",s.class&&s.courseName?" - ":"",s.courseName?`${s.courseName}`:"Cha vo kha"]})]})]})]}),gj=(s,e)=>{const t=r=>{const a=r.match(/(\d+)$/);return a?parseInt(a[1],10):0};return t(s.id)-t(e.id)},pj=async()=>{const{data:s,error:e}=await rg.from("licenses").select(`
      id,
      name,
      display_order,
      subjects (
        id,
        name,
        display_order,
        questions (
          *,
          answers (
            id,
            text
          )
        )
      )
    `).order("display_order",{ascending:!0}).order("display_order",{foreignTable:"subjects",ascending:!0});if(e)throw console.error("Error fetching data from Supabase:",e),e;return s.map(r=>({id:r.id,name:r.name,subjects:r.subjects.map(a=>({id:a.id,name:a.name,questions:a.questions.sort(gj).map(l=>({id:l.id,text:l.text,image:l.image,correctAnswerId:l.correct_answer_id,answers:l.answers.map(c=>({id:c.id,text:c.text}))}))}))}))},Kl=s=>[...s].sort(()=>Math.random()-.5),yj=()=>{const[s,e]=ie.useState("welcome"),[t,r]=ie.useState([]),[a,l]=ie.useState(!0),[c,m]=ie.useState(null),[g,p]=ie.useState(!1),{theme:b}=rn(),[E,x]=ie.useState(null),[A,k]=ie.useState(null),[D,U]=ie.useState(null),[K,te]=ie.useState(""),[F,ne]=ie.useState({}),[W,re]=ie.useState(null),[C,R]=ie.useState({}),[I,V]=ie.useState(0),[j,L]=ie.useState(void 0);ie.useEffect(()=>{const ke=gI(kg,async _e=>{if(_e){const lt=await _e.getIdToken(),{data:{session:yt},error:Qt}=await rg.auth.setSession({access_token:lt,refresh_token:_e.refreshToken||lt});Qt?console.error("Supabase session sync error:",Qt):x(yt);try{const Vn=wk(Dk,"users",_e.uid),gs=await Nk(Vn);if(gs.exists()){const st=gs.data();k({id:_e.uid,email:_e.email||"",role:st.role||"student",fullName:st.fullName,birthDate:st.birthDate,address:st.address,class:st.class,courseName:st.courseName})}else k({id:_e.uid,email:_e.email||"",role:"student",fullName:_e.displayName||"Hc vin"})}catch(Vn){console.error("Error fetching profile:",Vn)}}else x(null),k(null),await rg.auth.signOut();l(!1)});return()=>ke()},[]),ie.useEffect(()=>{(async()=>{try{const _e=await pj();r(_e),m(null)}catch(_e){console.error(_e),m("Khng th ti c b  thi. Vui lng kim tra li kt ni mng v lm mi trang.")}finally{l(!1)}})()},[]),ie.useEffect(()=>{if(!E&&D&&K){const ke=`progress_${K}_${D.id}`,_e=localStorage.getItem(ke);ne(_e?JSON.parse(_e):{})}},[E,D,K]),ie.useEffect(()=>{E&&A&&A.role==="student"&&(s==="welcome"||s==="login")&&e("license_selection")},[E,A,s]),ie.useEffect(()=>{if(E!=null&&E.user&&A){const ke={appState:s,selectedLicense:D,currentQuiz:W,userAnswers:C,score:I,quizStartTime:j,userName:K};localStorage.setItem(`ontap_state_${E.user.id}`,JSON.stringify(ke))}},[E,A,s,D,W,C,I,j,K]),ie.useEffect(()=>{if(E!=null&&E.user){const ke=localStorage.getItem(`ontap_state_${E.user.id}`);if(ke)try{const _e=JSON.parse(ke);_e.selectedLicense&&U(_e.selectedLicense),_e.userName&&te(_e.userName),_e.currentQuiz&&re(_e.currentQuiz),_e.userAnswers&&R(_e.userAnswers),_e.score&&V(_e.score),_e.quizStartTime&&L(_e.quizStartTime),_e.appState&&_e.appState!=="welcome"&&e(_e.appState)}catch(_e){console.error("Failed to restore state",_e)}}},[E]);const N=(ke,_e)=>{if(E)return;const lt=`progress_${K}_${D.id}`,yt={...F},Qt=yt[ke]||{lastScore:null,lastScoreTimestamp:null,highScore:0,highScoreTimestamp:null},Vn=Date.now();Qt.lastScore=_e,Qt.lastScoreTimestamp=Vn;const gs=Qt.highScore??0;_e>=gs&&(Qt.highScore=_e,Qt.highScoreTimestamp=Vn),yt[ke]=Qt,ne(yt),localStorage.setItem(lt,JSON.stringify(yt))},it=ie.useCallback(()=>e("license_selection"),[]),bt=ie.useCallback(()=>e("login"),[]),Y=ie.useCallback(ke=>{U(ke),e("name_input")},[]),ue=ie.useCallback(ke=>{te(ke),e("mode_selection")},[]),ye=async()=>{E!=null&&E.user&&localStorage.removeItem(`ontap_state_${E.user.id}`),await kg.signOut(),e("welcome"),U(null),te(""),ne({}),L(void 0)},je=ie.useCallback(()=>{if(!D)return;const ke=D.subjects.flatMap(yt=>yt.questions),_e=Kl(ke).slice(0,30),lt={id:"exam-quiz",title:`Thi th hng ${D.name}`,questions:_e.map(yt=>({...yt,answers:Kl(yt.answers)})),timeLimit:2700};re(lt),R({}),V(0),L(Date.now()),e("in_quiz")},[D]),qe=ie.useCallback(()=>{if(!D)return;const ke=D.subjects.flatMap(yt=>yt.questions),_e=Kl(ke).slice(0,30),lt={id:"online-exam-quiz",title:`Thi Online hng ${D.name}`,questions:_e.map(yt=>({...yt,answers:Kl(yt.answers)})),timeLimit:2700};re(lt),R({}),V(0),L(Date.now()),e("in_online_exam")},[D]),P=ie.useCallback(ke=>{ke==="practice"?e("subject_selection"):ke==="exam"?je():ke==="online_exam"&&qe()},[je,qe]),Z=ie.useCallback(ke=>{const _e={id:ke.id,title:`n tp: ${ke.name}`,questions:ke.questions.map(lt=>({...lt,answers:Kl(lt.answers)}))};re(_e),R({}),V(0),L(void 0),e("in_quiz")},[]),le=ie.useCallback(ke=>{if(!W)return;let _e=0;W.questions.forEach(lt=>{ke[lt.id]===lt.correctAnswerId&&_e++}),R(ke),V(_e),W.id!=="exam-quiz"&&W.id!=="online-exam-quiz"&&N(W.id,_e),e("results")},[W,N]),ce=ie.useCallback(()=>{re(null),R({}),V(0),L(void 0),e("mode_selection")},[]),Ee=ie.useCallback(()=>{re(null),R({}),V(0),e("subject_selection")},[]),Ae=ie.useCallback(()=>{W&&W.id!=="exam-quiz"&&W.id!=="online-exam-quiz"?Ee():ce()},[W,Ee,ce]),De=ie.useCallback(()=>{W&&(R({}),V(0),W.id==="exam-quiz"?je():W.id==="online-exam-quiz"?qe():e("in_quiz"))},[W,je,qe]),pt=ie.useCallback(()=>{U(null),te(""),ne({}),e("welcome")},[]),at=ie.useCallback(()=>{te(""),ne({}),e("license_selection")},[]),Fs=ie.useCallback(()=>{U(null),te(""),re(null),R({}),V(0),ne({}),L(void 0),e("license_selection")},[]),vr=()=>{if(a)return _.jsx("div",{className:"text-center p-4 animate-slide-in-right",children:_.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8 md:p-12 max-w-2xl mx-auto",children:[b==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/MH9hVp8S/happy-techers-day.jpg",alt:"Icon Chc mng Ngy Nh gio",className:"h-24 w-24 mx-auto mb-4 animate-pulse rounded-full object-cover"}):_.jsx(jo,{className:"h-24 w-24 mx-auto text-primary mb-4 animate-pulse"}),_.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-foreground mb-2",children:"ng Dng n Tp"}),b==="tri-an"&&_.jsx("p",{className:"text-xl font-semibold text-primary mb-4",children:"Knh mng ngy Nh gio Vit Nam"}),_.jsx("p",{className:"text-lg text-muted-foreground",children:"H thng ang ti b  thi mi nht, vui lng ch trong giy lt..."})]})});if(c)return _.jsx("div",{className:"text-center p-4 animate-slide-in-right",children:_.jsxs("div",{className:"bg-destructive/20 border-2 border-destructive/50 rounded-2xl shadow-xl p-8 md:p-12 max-w-2xl mx-auto",children:[_.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-destructive-foreground mb-4",children:" xy ra li"}),_.jsx("p",{className:"text-lg text-destructive-foreground/80",children:c})]})});if(E&&A&&A.role!=="student")return _.jsx(lj,{userProfile:A});switch(s){case"welcome":return _.jsx(Fk,{onStart:it,onLoginClick:bt});case"login":return _.jsx(oj,{onBack:pt});case"license_selection":return _.jsx(Kk,{licenses:t,onSelect:Y,onBack:pt});case"name_input":return E&&A?(te(A.fullName||A.email||"Hc vin"),e("mode_selection"),null):_.jsx(Qk,{onNameSubmit:ue,onBack:at});case"mode_selection":return _.jsx(Yk,{onModeSelect:P,licenseName:(D==null?void 0:D.name)||"",userName:K||((A==null?void 0:A.fullName)??""),onSwitchLicense:Fs});case"subject_selection":return _.jsx(Jk,{subjects:(D==null?void 0:D.subjects)||[],progress:F,onSelect:Z,onBack:()=>e("mode_selection")});case"in_quiz":return W?W.timeLimit!==void 0?_.jsx(ej,{quiz:W,onFinish:le,onBack:Ae,initialAnswers:C,onAnswerChange:R,startTime:j}):_.jsx(Xk,{quiz:W,onFinish:le,onBack:Ae}):null;case"in_online_exam":return W?_.jsx(sj,{quiz:W,onFinish:le,onBack:ce,userName:K||((A==null?void 0:A.fullName)??""),selectedLicense:D,initialAnswers:C,onAnswerChange:R,startTime:j}):null;case"results":return W?W.id==="exam-quiz"||W.id==="online-exam-quiz"?_.jsx(tj,{quiz:W,userAnswers:C,score:I,onRetry:De,onBack:ce,userName:K||((A==null?void 0:A.fullName)??"")}):_.jsx(Wk,{quiz:W,userAnswers:C,score:I,onRetry:De,onBack:Ee,userName:K||((A==null?void 0:A.fullName)??"")}):null;default:return null}};return _.jsxs("div",{className:"min-h-screen flex flex-col items-center text-foreground p-4 pb-20 transition-colors duration-500",children:[b==="noel"&&_.jsx(dj,{}),b==="noel"&&_.jsx(fj,{})," ",E&&A&&_.jsx(cj,{userProfile:A,onLogout:ye}),E&&A&&A.role==="student"&&s!=="in_quiz"&&s!=="in_online_exam"&&_.jsx(mj,{user:A}),_.jsx("main",{className:"w-full max-w-7xl mx-auto flex-grow flex flex-col justify-center",children:vr()}),g&&_.jsx(hj,{onClose:()=>p(!1)}),_.jsx(aj,{onVersionClick:()=>p(!0)})]})},u1=document.getElementById("root");if(!u1)throw new Error("Could not find root element to mount to");const _j=ZS.createRoot(u1);_j.render(_.jsx(FS.StrictMode,{children:_.jsx(Mk,{children:_.jsx(yj,{})})}));
