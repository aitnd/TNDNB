function FA(r,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in r)){const l=Object.getOwnPropertyDescriptor(s,a);l&&Object.defineProperty(r,a,l.get?l:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function ep(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function GA(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(s){var a=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:function(){return r[s]}})}),t}var Um={exports:{}},tu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T0;function KA(){if(T0)return tu;T0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:r,type:s,key:c,ref:a!==void 0?a:null,props:l}}return tu.Fragment=e,tu.jsx=t,tu.jsxs=t,tu}var S0;function QA(){return S0||(S0=1,Um.exports=KA()),Um.exports}var _=QA(),Lm={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A0;function YA(){if(A0)return Ce;A0=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),A=Symbol.iterator;function S(V){return V===null||typeof V!="object"?null:(V=A&&V[A]||V["@@iterator"],typeof V=="function"?V:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,P={};function G(V,ee,le){this.props=V,this.context=ee,this.refs=P,this.updater=le||k}G.prototype.isReactComponent={},G.prototype.setState=function(V,ee){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,ee,"setState")},G.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function J(){}J.prototype=G.prototype;function $(V,ee,le){this.props=V,this.context=ee,this.refs=P,this.updater=le||k}var se=$.prototype=new J;se.constructor=$,j(se,G.prototype),se.isPureReactComponent=!0;var Z=Array.isArray;function ae(){}var C={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function I(V,ee,le){var ce=le.ref;return{$$typeof:r,type:V,key:ee,ref:ce!==void 0?ce:null,props:le}}function U(V,ee){return I(V.type,ee,V.props)}function D(V){return typeof V=="object"&&V!==null&&V.$$typeof===r}function L(V){var ee={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(le){return ee[le]})}var N=/\/+/g;function it(V,ee){return typeof V=="object"&&V!==null&&V.key!=null?L(""+V.key):ee.toString(36)}function Tt(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(ae,ae):(V.status="pending",V.then(function(ee){V.status==="pending"&&(V.status="fulfilled",V.value=ee)},function(ee){V.status==="pending"&&(V.status="rejected",V.reason=ee)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Y(V,ee,le,ce,Ee){var Re=typeof V;(Re==="undefined"||Re==="boolean")&&(V=null);var Pe=!1;if(V===null)Pe=!0;else switch(Re){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(V.$$typeof){case r:case e:Pe=!0;break;case b:return Pe=V._init,Y(Pe(V._payload),ee,le,ce,Ee)}}if(Pe)return Ee=Ee(V),Pe=ce===""?"."+it(V,0):ce,Z(Ee)?(le="",Pe!=null&&(le=Pe.replace(N,"$&/")+"/"),Y(Ee,ee,le,"",function(Yr){return Yr})):Ee!=null&&(D(Ee)&&(Ee=U(Ee,le+(Ee.key==null||V&&V.key===Ee.key?"":(""+Ee.key).replace(N,"$&/")+"/")+Pe)),ee.push(Ee)),1;Pe=0;var vt=ce===""?".":ce+":";if(Z(V))for(var at=0;at<V.length;at++)ce=V[at],Re=vt+it(ce,at),Pe+=Y(ce,ee,le,Re,Ee);else if(at=S(V),typeof at=="function")for(V=at.call(V),at=0;!(ce=V.next()).done;)ce=ce.value,Re=vt+it(ce,at++),Pe+=Y(ce,ee,le,Re,Ee);else if(Re==="object"){if(typeof V.then=="function")return Y(Tt(V),ee,le,ce,Ee);throw ee=String(V),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function ue(V,ee,le){if(V==null)return V;var ce=[],Ee=0;return Y(V,ce,"","",function(Re){return ee.call(le,Re,Ee++)}),ce}function _e(V){if(V._status===-1){var ee=V._result;ee=ee(),ee.then(function(le){(V._status===0||V._status===-1)&&(V._status=1,V._result=le)},function(le){(V._status===0||V._status===-1)&&(V._status=2,V._result=le)}),V._status===-1&&(V._status=0,V._result=ee)}if(V._status===1)return V._result.default;throw V._result}var De=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},$e={map:ue,forEach:function(V,ee,le){ue(V,function(){ee.apply(this,arguments)},le)},count:function(V){var ee=0;return ue(V,function(){ee++}),ee},toArray:function(V){return ue(V,function(ee){return ee})||[]},only:function(V){if(!D(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Ce.Activity=E,Ce.Children=$e,Ce.Component=G,Ce.Fragment=t,Ce.Profiler=a,Ce.PureComponent=$,Ce.StrictMode=s,Ce.Suspense=g,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(V){return C.H.useMemoCache(V)}},Ce.cache=function(V){return function(){return V.apply(null,arguments)}},Ce.cacheSignal=function(){return null},Ce.cloneElement=function(V,ee,le){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var ce=j({},V.props),Ee=V.key;if(ee!=null)for(Re in ee.key!==void 0&&(Ee=""+ee.key),ee)!R.call(ee,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&ee.ref===void 0||(ce[Re]=ee[Re]);var Re=arguments.length-2;if(Re===1)ce.children=le;else if(1<Re){for(var Pe=Array(Re),vt=0;vt<Re;vt++)Pe[vt]=arguments[vt+2];ce.children=Pe}return I(V.type,Ee,ce)},Ce.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},Ce.createElement=function(V,ee,le){var ce,Ee={},Re=null;if(ee!=null)for(ce in ee.key!==void 0&&(Re=""+ee.key),ee)R.call(ee,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(Ee[ce]=ee[ce]);var Pe=arguments.length-2;if(Pe===1)Ee.children=le;else if(1<Pe){for(var vt=Array(Pe),at=0;at<Pe;at++)vt[at]=arguments[at+2];Ee.children=vt}if(V&&V.defaultProps)for(ce in Pe=V.defaultProps,Pe)Ee[ce]===void 0&&(Ee[ce]=Pe[ce]);return I(V,Re,Ee)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(V){return{$$typeof:f,render:V}},Ce.isValidElement=D,Ce.lazy=function(V){return{$$typeof:b,_payload:{_status:-1,_result:V},_init:_e}},Ce.memo=function(V,ee){return{$$typeof:p,type:V,compare:ee===void 0?null:ee}},Ce.startTransition=function(V){var ee=C.T,le={};C.T=le;try{var ce=V(),Ee=C.S;Ee!==null&&Ee(le,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(ae,De)}catch(Re){De(Re)}finally{ee!==null&&le.types!==null&&(ee.types=le.types),C.T=ee}},Ce.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Ce.use=function(V){return C.H.use(V)},Ce.useActionState=function(V,ee,le){return C.H.useActionState(V,ee,le)},Ce.useCallback=function(V,ee){return C.H.useCallback(V,ee)},Ce.useContext=function(V){return C.H.useContext(V)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(V,ee){return C.H.useDeferredValue(V,ee)},Ce.useEffect=function(V,ee){return C.H.useEffect(V,ee)},Ce.useEffectEvent=function(V){return C.H.useEffectEvent(V)},Ce.useId=function(){return C.H.useId()},Ce.useImperativeHandle=function(V,ee,le){return C.H.useImperativeHandle(V,ee,le)},Ce.useInsertionEffect=function(V,ee){return C.H.useInsertionEffect(V,ee)},Ce.useLayoutEffect=function(V,ee){return C.H.useLayoutEffect(V,ee)},Ce.useMemo=function(V,ee){return C.H.useMemo(V,ee)},Ce.useOptimistic=function(V,ee){return C.H.useOptimistic(V,ee)},Ce.useReducer=function(V,ee,le){return C.H.useReducer(V,ee,le)},Ce.useRef=function(V){return C.H.useRef(V)},Ce.useState=function(V){return C.H.useState(V)},Ce.useSyncExternalStore=function(V,ee,le){return C.H.useSyncExternalStore(V,ee,le)},Ce.useTransition=function(){return C.H.useTransition()},Ce.version="19.2.0",Ce}var x0;function tp(){return x0||(x0=1,Lm.exports=YA()),Lm.exports}var ie=tp();const XA=ep(ie);var zm={exports:{}},nu={},Bm={exports:{}},qm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R0;function JA(){return R0||(R0=1,(function(r){function e(Y,ue){var _e=Y.length;Y.push(ue);e:for(;0<_e;){var De=_e-1>>>1,$e=Y[De];if(0<a($e,ue))Y[De]=ue,Y[_e]=$e,_e=De;else break e}}function t(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var ue=Y[0],_e=Y.pop();if(_e!==ue){Y[0]=_e;e:for(var De=0,$e=Y.length,V=$e>>>1;De<V;){var ee=2*(De+1)-1,le=Y[ee],ce=ee+1,Ee=Y[ce];if(0>a(le,_e))ce<$e&&0>a(Ee,le)?(Y[De]=Ee,Y[ce]=_e,De=ce):(Y[De]=le,Y[ee]=_e,De=ee);else if(ce<$e&&0>a(Ee,_e))Y[De]=Ee,Y[ce]=_e,De=ce;else break e}}return ue}function a(Y,ue){var _e=Y.sortIndex-ue.sortIndex;return _e!==0?_e:Y.id-ue.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();r.unstable_now=function(){return c.now()-f}}var g=[],p=[],b=1,E=null,A=3,S=!1,k=!1,j=!1,P=!1,G=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function se(Y){for(var ue=t(p);ue!==null;){if(ue.callback===null)s(p);else if(ue.startTime<=Y)s(p),ue.sortIndex=ue.expirationTime,e(g,ue);else break;ue=t(p)}}function Z(Y){if(j=!1,se(Y),!k)if(t(g)!==null)k=!0,ae||(ae=!0,L());else{var ue=t(p);ue!==null&&Tt(Z,ue.startTime-Y)}}var ae=!1,C=-1,R=5,I=-1;function U(){return P?!0:!(r.unstable_now()-I<R)}function D(){if(P=!1,ae){var Y=r.unstable_now();I=Y;var ue=!0;try{e:{k=!1,j&&(j=!1,J(C),C=-1),S=!0;var _e=A;try{t:{for(se(Y),E=t(g);E!==null&&!(E.expirationTime>Y&&U());){var De=E.callback;if(typeof De=="function"){E.callback=null,A=E.priorityLevel;var $e=De(E.expirationTime<=Y);if(Y=r.unstable_now(),typeof $e=="function"){E.callback=$e,se(Y),ue=!0;break t}E===t(g)&&s(g),se(Y)}else s(g);E=t(g)}if(E!==null)ue=!0;else{var V=t(p);V!==null&&Tt(Z,V.startTime-Y),ue=!1}}break e}finally{E=null,A=_e,S=!1}ue=void 0}}finally{ue?L():ae=!1}}}var L;if(typeof $=="function")L=function(){$(D)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,it=N.port2;N.port1.onmessage=D,L=function(){it.postMessage(null)}}else L=function(){G(D,0)};function Tt(Y,ue){C=G(function(){Y(r.unstable_now())},ue)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Y){Y.callback=null},r.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Y?Math.floor(1e3/Y):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_next=function(Y){switch(A){case 1:case 2:case 3:var ue=3;break;default:ue=A}var _e=A;A=ue;try{return Y()}finally{A=_e}},r.unstable_requestPaint=function(){P=!0},r.unstable_runWithPriority=function(Y,ue){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var _e=A;A=Y;try{return ue()}finally{A=_e}},r.unstable_scheduleCallback=function(Y,ue,_e){var De=r.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?De+_e:De):_e=De,Y){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=_e+$e,Y={id:b++,callback:ue,priorityLevel:Y,startTime:_e,expirationTime:$e,sortIndex:-1},_e>De?(Y.sortIndex=_e,e(p,Y),t(g)===null&&Y===t(p)&&(j?(J(C),C=-1):j=!0,Tt(Z,_e-De))):(Y.sortIndex=$e,e(g,Y),k||S||(k=!0,ae||(ae=!0,L()))),Y},r.unstable_shouldYield=U,r.unstable_wrapCallback=function(Y){var ue=A;return function(){var _e=A;A=ue;try{return Y.apply(this,arguments)}finally{A=_e}}}})(qm)),qm}var C0;function WA(){return C0||(C0=1,Bm.exports=JA()),Bm.exports}var Hm={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I0;function ZA(){if(I0)return on;I0=1;var r=tp();function e(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(g,p,b){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:g,containerInfo:p,implementation:b}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,on.createPortal=function(g,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(g,p,null,b)},on.flushSync=function(g){var p=c.T,b=s.p;try{if(c.T=null,s.p=2,g)return g()}finally{c.T=p,s.p=b,s.d.f()}},on.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},on.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},on.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var b=p.as,E=f(b,p.crossOrigin),A=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:S}):b==="script"&&s.d.X(g,{crossOrigin:E,integrity:A,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},on.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=f(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},on.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,E=f(b,p.crossOrigin);s.d.L(g,b,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},on.preloadModule=function(g,p){if(typeof g=="string")if(p){var b=f(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},on.requestFormReset=function(g){s.d.r(g)},on.unstable_batchedUpdates=function(g,p){return g(p)},on.useFormState=function(g,p,b){return c.H.useFormState(g,p,b)},on.useFormStatus=function(){return c.H.useHostTransitionStatus()},on.version="19.2.0",on}var N0;function ex(){if(N0)return Hm.exports;N0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Hm.exports=ZA(),Hm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O0;function tx(){if(O0)return nu;O0=1;var r=WA(),e=tp(),t=ex();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,o=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(o=i.return),n=i.return;while(n)}return i.tag===3?o:null}function c(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function f(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function g(n){if(l(n)!==n)throw Error(s(188))}function p(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(s(188));return i!==n?null:n}for(var o=n,u=i;;){var d=o.return;if(d===null)break;var m=d.alternate;if(m===null){if(u=d.return,u!==null){o=u;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===o)return g(d),n;if(m===u)return g(d),i;m=m.sibling}throw Error(s(188))}if(o.return!==u.return)o=d,u=m;else{for(var v=!1,T=d.child;T;){if(T===o){v=!0,o=d,u=m;break}if(T===u){v=!0,u=d,o=m;break}T=T.sibling}if(!v){for(T=m.child;T;){if(T===o){v=!0,o=m,u=d;break}if(T===u){v=!0,u=m,o=d;break}T=T.sibling}if(!v)throw Error(s(189))}}if(o.alternate!==u)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?n:i}function b(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=b(n),i!==null)return i;n=n.sibling}return null}var E=Object.assign,A=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),J=Symbol.for("react.consumer"),$=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function L(n){return n===null||typeof n!="object"?null:(n=D&&n[D]||n["@@iterator"],typeof n=="function"?n:null)}var N=Symbol.for("react.client.reference");function it(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===N?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case j:return"Fragment";case G:return"Profiler";case P:return"StrictMode";case Z:return"Suspense";case ae:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case k:return"Portal";case $:return n.displayName||"Context";case J:return(n._context.displayName||"Context")+".Consumer";case se:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case C:return i=n.displayName||null,i!==null?i:it(n.type)||"Memo";case R:i=n._payload,n=n._init;try{return it(n(i))}catch{}}return null}var Tt=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},De=[],$e=-1;function V(n){return{current:n}}function ee(n){0>$e||(n.current=De[$e],De[$e]=null,$e--)}function le(n,i){$e++,De[$e]=n.current,n.current=i}var ce=V(null),Ee=V(null),Re=V(null),Pe=V(null);function vt(n,i){switch(le(Re,i),le(Ee,n),le(ce,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?Gv(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=Gv(i),n=Kv(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ee(ce),le(ce,n)}function at(){ee(ce),ee(Ee),ee(Re)}function Yr(n){n.memoizedState!==null&&le(Pe,n);var i=ce.current,o=Kv(i,n.type);i!==o&&(le(Ee,n),le(ce,o))}function As(n){Ee.current===n&&(ee(ce),ee(Ee)),Pe.current===n&&(ee(Pe),Jl._currentValue=_e)}var xs,ke;function pe(n){if(xs===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);xs=i&&i[1]||"",ke=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xs+n+ke}var bt=!1;function mt(n,i){if(!n||bt)return"";bt=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Q){var F=Q}Reflect.construct(n,[],ne)}else{try{ne.call()}catch(Q){F=Q}n.call(ne.prototype)}}else{try{throw Error()}catch(Q){F=Q}(ne=n())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(Q){if(Q&&F&&typeof Q.stack=="string")return[Q.stack,F.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),v=m[0],T=m[1];if(v&&T){var O=v.split(`
`),H=T.split(`
`);for(d=u=0;u<O.length&&!O[u].includes("DetermineComponentFrameRoot");)u++;for(;d<H.length&&!H[d].includes("DetermineComponentFrameRoot");)d++;if(u===O.length||d===H.length)for(u=O.length-1,d=H.length-1;1<=u&&0<=d&&O[u]!==H[d];)d--;for(;1<=u&&0<=d;u--,d--)if(O[u]!==H[d]){if(u!==1||d!==1)do if(u--,d--,0>d||O[u]!==H[d]){var X=`
`+O[u].replace(" at new "," at ");return n.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",n.displayName)),X}while(1<=u&&0<=d);break}}}finally{bt=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?pe(o):""}function fn(n,i){switch(n.tag){case 26:case 27:case 5:return pe(n.type);case 16:return pe("Lazy");case 13:return n.child!==i&&i!==null?pe("Suspense Fallback"):pe("Suspense");case 19:return pe("SuspenseList");case 0:case 15:return mt(n.type,!1);case 11:return mt(n.type.render,!1);case 1:return mt(n.type,!0);case 31:return pe("Activity");default:return""}}function Un(n){try{var i="",o=null;do i+=fn(n,o),o=n,n=n.return;while(n);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var ht=Object.prototype.hasOwnProperty,ot=r.unstable_scheduleCallback,Rs=r.unstable_cancelCallback,Ld=r.unstable_shouldYield,Fu=r.unstable_requestPaint,mn=r.unstable_now,Ci=r.unstable_getCurrentPriorityLevel,el=r.unstable_ImmediatePriority,tl=r.unstable_UserBlockingPriority,Cs=r.unstable_NormalPriority,zd=r.unstable_LowPriority,Gu=r.unstable_IdlePriority,Ku=r.log,Qu=r.unstable_setDisableYieldValue,er=null,Yt=null;function Ln(n){if(typeof Ku=="function"&&Qu(n),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(er,n)}catch{}}var St=Math.clz32?Math.clz32:Xu,Yu=Math.log,Sa=Math.LN2;function Xu(n){return n>>>=0,n===0?32:31-(Yu(n)/Sa|0)|0}var br=256,Ii=262144,It=4194304;function wr(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Er(n,i,o){var u=n.pendingLanes;if(u===0)return 0;var d=0,m=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var T=u&134217727;return T!==0?(u=T&~m,u!==0?d=wr(u):(v&=T,v!==0?d=wr(v):o||(o=T&~n,o!==0&&(d=wr(o))))):(T=u&~m,T!==0?d=wr(T):v!==0?d=wr(v):o||(o=u&~n,o!==0&&(d=wr(o)))),d===0?0:i!==0&&i!==d&&(i&m)===0&&(m=d&-d,o=i&-i,m>=o||m===32&&(o&4194048)!==0)?i:d}function tr(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Bd(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ju(){var n=It;return It<<=1,(It&62914560)===0&&(It=4194304),n}function Tr(n){for(var i=[],o=0;31>o;o++)i.push(n);return i}function Ni(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function qd(n,i,o,u,d,m){var v=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var T=n.entanglements,O=n.expirationTimes,H=n.hiddenUpdates;for(o=v&~o;0<o;){var X=31-St(o),ne=1<<X;T[X]=0,O[X]=-1;var F=H[X];if(F!==null)for(H[X]=null,X=0;X<F.length;X++){var Q=F[X];Q!==null&&(Q.lane&=-536870913)}o&=~ne}u!==0&&Oi(n,u,0),m!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=m&~(v&~i))}function Oi(n,i,o){n.pendingLanes|=i,n.suspendedLanes&=~i;var u=31-St(i);n.entangledLanes|=i,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function nl(n,i){var o=n.entangledLanes|=i;for(n=n.entanglements;o;){var u=31-St(o),d=1<<u;d&i|n[u]&i&&(n[u]|=i),o&=~d}}function rl(n,i){var o=i&-i;return o=(o&42)!==0?1:ki(o),(o&(n.suspendedLanes|i))!==0?0:o}function ki(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Xr(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Wu(){var n=ue.p;return n!==0?n:(n=window.event,n===void 0?32:p0(n.type))}function nr(n,i){var o=ue.p;try{return ue.p=n,i()}finally{ue.p=o}}var rr=Math.random().toString(36).slice(2),Nt="__reactFiber$"+rr,Ft="__reactProps$"+rr,Sr="__reactContainer$"+rr,Aa="__reactEvents$"+rr,Hd="__reactListeners$"+rr,Zu="__reactHandles$"+rr,ec="__reactResources$"+rr,Ar="__reactMarker$"+rr;function xa(n){delete n[Nt],delete n[Ft],delete n[Aa],delete n[Hd],delete n[Zu]}function xr(n){var i=n[Nt];if(i)return i;for(var o=n.parentNode;o;){if(i=o[Sr]||o[Nt]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(n=e0(n);n!==null;){if(o=n[Nt])return o;n=e0(n)}return i}n=o,o=n.parentNode}return null}function zn(n){if(n=n[Nt]||n[Sr]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function xn(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function Rr(n){var i=n[ec];return i||(i=n[ec]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ot(n){n[Ar]=!0}var sl=new Set,il={};function Cr(n,i){Ir(n,i),Ir(n+"Capture",i)}function Ir(n,i){for(il[n]=i,n=0;n<i.length;n++)sl.add(i[n])}var al=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ol={},ll={};function tc(n){return ht.call(ll,n)?!0:ht.call(ol,n)?!1:al.test(n)?ll[n]=!0:(ol[n]=!0,!1)}function Ra(n,i,o){if(tc(i))if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+o)}}function Rn(n,i,o){if(o===null)n.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+o)}}function kt(n,i,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(i,o,""+u)}}function Gt(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Is(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ul(n,i,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var d=u.get,m=u.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return d.call(this)},set:function(v){o=""+v,m.call(this,v)}}),Object.defineProperty(n,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Je(n){if(!n._valueTracker){var i=Is(n)?"checked":"value";n._valueTracker=ul(n,i,""+n[i])}}function ji(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return n&&(u=Is(n)?n.checked?"true":"false":n.value),n=u,n!==o?(i.setValue(n),!0):!1}function Nr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Di=/[\n"\\]/g;function yn(n){return n.replace(Di,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ca(n,i,o,u,d,m,v,T){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),i!=null?v==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+Gt(i)):n.value!==""+Gt(i)&&(n.value=""+Gt(i)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),i!=null?cl(n,v,Gt(i)):o!=null?cl(n,v,Gt(o)):u!=null&&n.removeAttribute("value"),d==null&&m!=null&&(n.defaultChecked=!!m),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+Gt(T):n.removeAttribute("name")}function nc(n,i,o,u,d,m,v,T){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),i!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){Je(n);return}o=o!=null?""+Gt(o):"",i=i!=null?""+Gt(i):o,T||i===n.value||(n.value=i),n.defaultValue=i}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=T?n.checked:!!u,n.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),Je(n)}function cl(n,i,o){i==="number"&&Nr(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Ns(n,i,o,u){if(n=n.options,i){i={};for(var d=0;d<o.length;d++)i["$"+o[d]]=!0;for(o=0;o<n.length;o++)d=i.hasOwnProperty("$"+n[o].value),n[o].selected!==d&&(n[o].selected=d),d&&u&&(n[o].defaultSelected=!0)}else{for(o=""+Gt(o),i=null,d=0;d<n.length;d++){if(n[d].value===o){n[d].selected=!0,u&&(n[d].defaultSelected=!0);return}i!==null||n[d].disabled||(i=n[d])}i!==null&&(i.selected=!0)}}function rc(n,i,o){if(i!=null&&(i=""+Gt(i),i!==n.value&&(n.value=i),o==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=o!=null?""+Gt(o):""}function Os(n,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(s(92));if(Tt(u)){if(1<u.length)throw Error(s(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=Gt(i),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),Je(n)}function _n(n,i){if(i){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=i;return}}n.textContent=i}var sc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hl(n,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":u?n.setProperty(i,o):typeof o!="number"||o===0||sc.has(i)?i==="float"?n.cssFloat=o:n[i]=(""+o).trim():n[i]=o+"px"}function dl(n,i,o){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var d in i)u=i[d],i.hasOwnProperty(d)&&o[d]!==u&&hl(n,d,u)}else for(var m in i)i.hasOwnProperty(m)&&hl(n,m,i[m])}function Ia(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ic=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ks=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Na(n){return ks.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function sr(){}var fl=null;function Bn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var js=null,Or=null;function Pi(n){var i=zn(n);if(i&&(n=i.stateNode)){var o=n[Ft]||null;e:switch(n=i.stateNode,i.type){case"input":if(Ca(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+yn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==n&&u.form===n.form){var d=u[Ft]||null;if(!d)throw Error(s(90));Ca(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===n.form&&ji(u)}break e;case"textarea":rc(n,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Ns(n,!!o.multiple,i,!1)}}}var Oa=!1;function Ds(n,i,o){if(Oa)return n(i,o);Oa=!0;try{var u=n(i);return u}finally{if(Oa=!1,(js!==null||Or!==null)&&(Wc(),js&&(i=js,n=Or,Or=js=null,Pi(i),n)))for(i=0;i<n.length;i++)Pi(n[i])}}function ir(n,i){var o=n.stateNode;if(o===null)return null;var u=o[Ft]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(s(231,i,typeof o));return o}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mi=!1;if(qn)try{var et={};Object.defineProperty(et,"passive",{get:function(){Mi=!0}}),window.addEventListener("test",et,et),window.removeEventListener("test",et,et)}catch{Mi=!1}var kr=null,ml=null,Vi=null;function gl(){if(Vi)return Vi;var n,i=ml,o=i.length,u,d="value"in kr?kr.value:kr.textContent,m=d.length;for(n=0;n<o&&i[n]===d[n];n++);var v=o-n;for(u=1;u<=v&&i[o-u]===d[m-u];u++);return Vi=d.slice(n,1<u?1-u:void 0)}function Ui(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Jr(){return!0}function ar(){return!1}function Xt(n){function i(o,u,d,m,v){this._reactName=o,this._targetInst=d,this.type=u,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(o=n[T],this[T]=o?o(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Jr:ar,this.isPropagationStopped=ar,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Jr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Jr)},persist:function(){},isPersistent:Jr}),i}var Wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jr=Xt(Wr),Ps=E({},Wr,{view:0,detail:0}),pl=Xt(Ps),Ms,ka,Dr,ja=E({},Ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Dr&&(Dr&&n.type==="mousemove"?(Ms=n.screenX-Dr.screenX,ka=n.screenY-Dr.screenY):ka=Ms=0,Dr=n),Ms)},movementY:function(n){return"movementY"in n?n.movementY:ka}}),yl=Xt(ja),Li=E({},ja,{dataTransfer:0}),ac=Xt(Li),oc=E({},Ps,{relatedTarget:0}),zi=Xt(oc),_l=E({},Wr,{animationName:0,elapsedTime:0,pseudoElement:0}),lc=Xt(_l),Da=E({},Wr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),uc=Xt(Da),cc=E({},Wr,{data:0}),Pr=Xt(cc),hc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mc(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=fc[n])?!!i[n]:!1}function Vs(){return mc}var gn=E({},Ps,{key:function(n){if(n.key){var i=hc[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Ui(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?dc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vs,charCode:function(n){return n.type==="keypress"?Ui(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ui(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),gc=Xt(gn),pc=E({},ja,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zr=Xt(pc),h=E({},Ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vs}),y=Xt(h),w=E({},Wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),x=Xt(w),B=E({},ja,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),K=Xt(B),oe=E({},Wr,{newState:0,oldState:0}),Ne=Xt(oe),At=[9,13,27,32],Qe=qn&&"CompositionEvent"in window,gt=null;qn&&"documentMode"in document&&(gt=document.documentMode);var Hn=qn&&"TextEvent"in window&&!gt,Mr=qn&&(!Qe||gt&&8<gt&&11>=gt),or=" ",lr=!1;function Bi(n,i){switch(n){case"keyup":return At.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pa(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ma=!1;function g1(n,i){switch(n){case"compositionend":return Pa(i);case"keypress":return i.which!==32?null:(lr=!0,or);case"textInput":return n=i.data,n===or&&lr?null:n;default:return null}}function p1(n,i){if(Ma)return n==="compositionend"||!Qe&&Bi(n,i)?(n=gl(),Vi=ml=kr=null,Ma=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Mr&&i.locale!=="ko"?null:i.data;default:return null}}var y1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ry(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!y1[n.type]:i==="textarea"}function sy(n,i,o,u){js?Or?Or.push(u):Or=[u]:js=u,i=ih(i,"onChange"),0<i.length&&(o=new jr("onChange","change",null,o,u),n.push({event:o,listeners:i}))}var vl=null,bl=null;function _1(n){zv(n,0)}function yc(n){var i=xn(n);if(ji(i))return n}function iy(n,i){if(n==="change")return i}var ay=!1;if(qn){var $d;if(qn){var Fd="oninput"in document;if(!Fd){var oy=document.createElement("div");oy.setAttribute("oninput","return;"),Fd=typeof oy.oninput=="function"}$d=Fd}else $d=!1;ay=$d&&(!document.documentMode||9<document.documentMode)}function ly(){vl&&(vl.detachEvent("onpropertychange",uy),bl=vl=null)}function uy(n){if(n.propertyName==="value"&&yc(bl)){var i=[];sy(i,bl,n,Bn(n)),Ds(_1,i)}}function v1(n,i,o){n==="focusin"?(ly(),vl=i,bl=o,vl.attachEvent("onpropertychange",uy)):n==="focusout"&&ly()}function b1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return yc(bl)}function w1(n,i){if(n==="click")return yc(i)}function E1(n,i){if(n==="input"||n==="change")return yc(i)}function T1(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Cn=typeof Object.is=="function"?Object.is:T1;function wl(n,i){if(Cn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var o=Object.keys(n),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var d=o[u];if(!ht.call(i,d)||!Cn(n[d],i[d]))return!1}return!0}function cy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function hy(n,i){var o=cy(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=i&&u>=i)return{node:o,offset:i-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=cy(o)}}function dy(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?dy(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function fy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Nr(n.document);i instanceof n.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)n=i.contentWindow;else break;i=Nr(n.document)}return i}function Gd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var S1=qn&&"documentMode"in document&&11>=document.documentMode,Va=null,Kd=null,El=null,Qd=!1;function my(n,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Qd||Va==null||Va!==Nr(u)||(u=Va,"selectionStart"in u&&Gd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),El&&wl(El,u)||(El=u,u=ih(Kd,"onSelect"),0<u.length&&(i=new jr("onSelect","select",null,i,o),n.push({event:i,listeners:u}),i.target=Va)))}function qi(n,i){var o={};return o[n.toLowerCase()]=i.toLowerCase(),o["Webkit"+n]="webkit"+i,o["Moz"+n]="moz"+i,o}var Ua={animationend:qi("Animation","AnimationEnd"),animationiteration:qi("Animation","AnimationIteration"),animationstart:qi("Animation","AnimationStart"),transitionrun:qi("Transition","TransitionRun"),transitionstart:qi("Transition","TransitionStart"),transitioncancel:qi("Transition","TransitionCancel"),transitionend:qi("Transition","TransitionEnd")},Yd={},gy={};qn&&(gy=document.createElement("div").style,"AnimationEvent"in window||(delete Ua.animationend.animation,delete Ua.animationiteration.animation,delete Ua.animationstart.animation),"TransitionEvent"in window||delete Ua.transitionend.transition);function Hi(n){if(Yd[n])return Yd[n];if(!Ua[n])return n;var i=Ua[n],o;for(o in i)if(i.hasOwnProperty(o)&&o in gy)return Yd[n]=i[o];return n}var py=Hi("animationend"),yy=Hi("animationiteration"),_y=Hi("animationstart"),A1=Hi("transitionrun"),x1=Hi("transitionstart"),R1=Hi("transitioncancel"),vy=Hi("transitionend"),by=new Map,Xd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xd.push("scrollEnd");function ur(n,i){by.set(n,i),Cr(i,[n])}var _c=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},$n=[],La=0,Jd=0;function vc(){for(var n=La,i=Jd=La=0;i<n;){var o=$n[i];$n[i++]=null;var u=$n[i];$n[i++]=null;var d=$n[i];$n[i++]=null;var m=$n[i];if($n[i++]=null,u!==null&&d!==null){var v=u.pending;v===null?d.next=d:(d.next=v.next,v.next=d),u.pending=d}m!==0&&wy(o,d,m)}}function bc(n,i,o,u){$n[La++]=n,$n[La++]=i,$n[La++]=o,$n[La++]=u,Jd|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Wd(n,i,o,u){return bc(n,i,o,u),wc(n)}function $i(n,i){return bc(n,null,null,i),wc(n)}function wy(n,i,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var d=!1,m=n.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(d=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,d&&i!==null&&(d=31-St(o),n=m.hiddenUpdates,u=n[d],u===null?n[d]=[i]:u.push(i),i.lane=o|536870912),m):null}function wc(n){if(50<$l)throw $l=0,lm=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var za={};function C1(n,i,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(n,i,o,u){return new C1(n,i,o,u)}function Zd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function es(n,i){var o=n.alternate;return o===null?(o=In(n.tag,i,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=i,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,i=n.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Ey(n,i){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Ec(n,i,o,u,d,m){var v=0;if(u=n,typeof n=="function")Zd(n)&&(v=1);else if(typeof n=="string")v=jA(n,o,ce.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=In(31,o,i,d),n.elementType=I,n.lanes=m,n;case j:return Fi(o.children,d,m,i);case P:v=8,d|=24;break;case G:return n=In(12,o,i,d|2),n.elementType=G,n.lanes=m,n;case Z:return n=In(13,o,i,d),n.elementType=Z,n.lanes=m,n;case ae:return n=In(19,o,i,d),n.elementType=ae,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case $:v=10;break e;case J:v=9;break e;case se:v=11;break e;case C:v=14;break e;case R:v=16,u=null;break e}v=29,o=Error(s(130,n===null?"null":typeof n,"")),u=null}return i=In(v,o,i,d),i.elementType=n,i.type=u,i.lanes=m,i}function Fi(n,i,o,u){return n=In(7,n,u,i),n.lanes=o,n}function ef(n,i,o){return n=In(6,n,null,i),n.lanes=o,n}function Ty(n){var i=In(18,null,null,0);return i.stateNode=n,i}function tf(n,i,o){return i=In(4,n.children!==null?n.children:[],n.key,i),i.lanes=o,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Sy=new WeakMap;function Fn(n,i){if(typeof n=="object"&&n!==null){var o=Sy.get(n);return o!==void 0?o:(i={value:n,source:i,stack:Un(i)},Sy.set(n,i),i)}return{value:n,source:i,stack:Un(i)}}var Ba=[],qa=0,Tc=null,Tl=0,Gn=[],Kn=0,Us=null,Vr=1,Ur="";function ts(n,i){Ba[qa++]=Tl,Ba[qa++]=Tc,Tc=n,Tl=i}function Ay(n,i,o){Gn[Kn++]=Vr,Gn[Kn++]=Ur,Gn[Kn++]=Us,Us=n;var u=Vr;n=Ur;var d=32-St(u)-1;u&=~(1<<d),o+=1;var m=32-St(i)+d;if(30<m){var v=d-d%5;m=(u&(1<<v)-1).toString(32),u>>=v,d-=v,Vr=1<<32-St(i)+d|o<<d|u,Ur=m+n}else Vr=1<<m|o<<d|u,Ur=n}function nf(n){n.return!==null&&(ts(n,1),Ay(n,1,0))}function rf(n){for(;n===Tc;)Tc=Ba[--qa],Ba[qa]=null,Tl=Ba[--qa],Ba[qa]=null;for(;n===Us;)Us=Gn[--Kn],Gn[Kn]=null,Ur=Gn[--Kn],Gn[Kn]=null,Vr=Gn[--Kn],Gn[Kn]=null}function xy(n,i){Gn[Kn++]=Vr,Gn[Kn++]=Ur,Gn[Kn++]=Us,Vr=i.id,Ur=i.overflow,Us=n}var Jt=null,dt=null,He=!1,Ls=null,Qn=!1,sf=Error(s(519));function zs(n){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Sl(Fn(i,n)),sf}function Ry(n){var i=n.stateNode,o=n.type,u=n.memoizedProps;switch(i[Nt]=n,i[Ft]=u,o){case"dialog":Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":case"embed":Ve("load",i);break;case"video":case"audio":for(o=0;o<Gl.length;o++)Ve(Gl[o],i);break;case"source":Ve("error",i);break;case"img":case"image":case"link":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"input":Ve("invalid",i),nc(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ve("invalid",i);break;case"textarea":Ve("invalid",i),Os(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||$v(i.textContent,o)?(u.popover!=null&&(Ve("beforetoggle",i),Ve("toggle",i)),u.onScroll!=null&&Ve("scroll",i),u.onScrollEnd!=null&&Ve("scrollend",i),u.onClick!=null&&(i.onclick=sr),i=!0):i=!1,i||zs(n,!0)}function Cy(n){for(Jt=n.return;Jt;)switch(Jt.tag){case 5:case 31:case 13:Qn=!1;return;case 27:case 3:Qn=!0;return;default:Jt=Jt.return}}function Ha(n){if(n!==Jt)return!1;if(!He)return Cy(n),He=!0,!1;var i=n.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Tm(n.type,n.memoizedProps)),o=!o),o&&dt&&zs(n),Cy(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));dt=Zv(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));dt=Zv(n)}else i===27?(i=dt,ei(n.type)?(n=Cm,Cm=null,dt=n):dt=i):dt=Jt?Xn(n.stateNode.nextSibling):null;return!0}function Gi(){dt=Jt=null,He=!1}function af(){var n=Ls;return n!==null&&(En===null?En=n:En.push.apply(En,n),Ls=null),n}function Sl(n){Ls===null?Ls=[n]:Ls.push(n)}var of=V(null),Ki=null,ns=null;function Bs(n,i,o){le(of,i._currentValue),i._currentValue=o}function rs(n){n._currentValue=of.current,ee(of)}function lf(n,i,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),n===o)break;n=n.return}}function uf(n,i,o,u){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var m=d.dependencies;if(m!==null){var v=d.child;m=m.firstContext;e:for(;m!==null;){var T=m;m=d;for(var O=0;O<i.length;O++)if(T.context===i[O]){m.lanes|=o,T=m.alternate,T!==null&&(T.lanes|=o),lf(m.return,o,n),u||(v=null);break e}m=T.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(s(341));v.lanes|=o,m=v.alternate,m!==null&&(m.lanes|=o),lf(v,o,n),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===n){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function $a(n,i,o,u){n=null;for(var d=i,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var T=d.type;Cn(d.pendingProps.value,v.value)||(n!==null?n.push(T):n=[T])}}else if(d===Pe.current){if(v=d.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(Jl):n=[Jl])}d=d.return}n!==null&&uf(i,n,o,u),i.flags|=262144}function Sc(n){for(n=n.firstContext;n!==null;){if(!Cn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Qi(n){Ki=n,ns=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Wt(n){return Iy(Ki,n)}function Ac(n,i){return Ki===null&&Qi(n),Iy(n,i)}function Iy(n,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},ns===null){if(n===null)throw Error(s(308));ns=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else ns=ns.next=i;return o}var I1=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){i.aborted=!0,n.forEach(function(o){return o()})}},N1=r.unstable_scheduleCallback,O1=r.unstable_NormalPriority,jt={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cf(){return{controller:new I1,data:new Map,refCount:0}}function Al(n){n.refCount--,n.refCount===0&&N1(O1,function(){n.controller.abort()})}var xl=null,hf=0,Fa=0,Ga=null;function k1(n,i){if(xl===null){var o=xl=[];hf=0,Fa=mm(),Ga={status:"pending",value:void 0,then:function(u){o.push(u)}}}return hf++,i.then(Ny,Ny),i}function Ny(){if(--hf===0&&xl!==null){Ga!==null&&(Ga.status="fulfilled");var n=xl;xl=null,Fa=0,Ga=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function j1(n,i){var o=[],u={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return n.then(function(){u.status="fulfilled",u.value=i;for(var d=0;d<o.length;d++)(0,o[d])(i)},function(d){for(u.status="rejected",u.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),u}var Oy=Y.S;Y.S=function(n,i){mv=mn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&k1(n,i),Oy!==null&&Oy(n,i)};var Yi=V(null);function df(){var n=Yi.current;return n!==null?n:st.pooledCache}function xc(n,i){i===null?le(Yi,Yi.current):le(Yi,i.pool)}function ky(){var n=df();return n===null?null:{parent:jt._currentValue,pool:n}}var Ka=Error(s(460)),ff=Error(s(474)),Rc=Error(s(542)),Cc={then:function(){}};function jy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Dy(n,i,o){switch(o=n[o],o===void 0?n.push(i):o!==i&&(i.then(sr,sr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,My(n),n;default:if(typeof i.status=="string")i.then(sr,sr);else{if(n=st,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(u){if(i.status==="pending"){var d=i;d.status="fulfilled",d.value=u}},function(u){if(i.status==="pending"){var d=i;d.status="rejected",d.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,My(n),n}throw Ji=i,Ka}}function Xi(n){try{var i=n._init;return i(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Ji=o,Ka):o}}var Ji=null;function Py(){if(Ji===null)throw Error(s(459));var n=Ji;return Ji=null,n}function My(n){if(n===Ka||n===Rc)throw Error(s(483))}var Qa=null,Rl=0;function Ic(n){var i=Rl;return Rl+=1,Qa===null&&(Qa=[]),Dy(Qa,n,i)}function Cl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Nc(n,i){throw i.$$typeof===A?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Vy(n){function i(z,M){if(n){var q=z.deletions;q===null?(z.deletions=[M],z.flags|=16):q.push(M)}}function o(z,M){if(!n)return null;for(;M!==null;)i(z,M),M=M.sibling;return null}function u(z){for(var M=new Map;z!==null;)z.key!==null?M.set(z.key,z):M.set(z.index,z),z=z.sibling;return M}function d(z,M){return z=es(z,M),z.index=0,z.sibling=null,z}function m(z,M,q){return z.index=q,n?(q=z.alternate,q!==null?(q=q.index,q<M?(z.flags|=67108866,M):q):(z.flags|=67108866,M)):(z.flags|=1048576,M)}function v(z){return n&&z.alternate===null&&(z.flags|=67108866),z}function T(z,M,q,W){return M===null||M.tag!==6?(M=ef(q,z.mode,W),M.return=z,M):(M=d(M,q),M.return=z,M)}function O(z,M,q,W){var ve=q.type;return ve===j?X(z,M,q.props.children,W,q.key):M!==null&&(M.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===R&&Xi(ve)===M.type)?(M=d(M,q.props),Cl(M,q),M.return=z,M):(M=Ec(q.type,q.key,q.props,null,z.mode,W),Cl(M,q),M.return=z,M)}function H(z,M,q,W){return M===null||M.tag!==4||M.stateNode.containerInfo!==q.containerInfo||M.stateNode.implementation!==q.implementation?(M=tf(q,z.mode,W),M.return=z,M):(M=d(M,q.children||[]),M.return=z,M)}function X(z,M,q,W,ve){return M===null||M.tag!==7?(M=Fi(q,z.mode,W,ve),M.return=z,M):(M=d(M,q),M.return=z,M)}function ne(z,M,q){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=ef(""+M,z.mode,q),M.return=z,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case S:return q=Ec(M.type,M.key,M.props,null,z.mode,q),Cl(q,M),q.return=z,q;case k:return M=tf(M,z.mode,q),M.return=z,M;case R:return M=Xi(M),ne(z,M,q)}if(Tt(M)||L(M))return M=Fi(M,z.mode,q,null),M.return=z,M;if(typeof M.then=="function")return ne(z,Ic(M),q);if(M.$$typeof===$)return ne(z,Ac(z,M),q);Nc(z,M)}return null}function F(z,M,q,W){var ve=M!==null?M.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return ve!==null?null:T(z,M,""+q,W);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return q.key===ve?O(z,M,q,W):null;case k:return q.key===ve?H(z,M,q,W):null;case R:return q=Xi(q),F(z,M,q,W)}if(Tt(q)||L(q))return ve!==null?null:X(z,M,q,W,null);if(typeof q.then=="function")return F(z,M,Ic(q),W);if(q.$$typeof===$)return F(z,M,Ac(z,q),W);Nc(z,q)}return null}function Q(z,M,q,W,ve){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return z=z.get(q)||null,T(M,z,""+W,ve);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case S:return z=z.get(W.key===null?q:W.key)||null,O(M,z,W,ve);case k:return z=z.get(W.key===null?q:W.key)||null,H(M,z,W,ve);case R:return W=Xi(W),Q(z,M,q,W,ve)}if(Tt(W)||L(W))return z=z.get(q)||null,X(M,z,W,ve,null);if(typeof W.then=="function")return Q(z,M,q,Ic(W),ve);if(W.$$typeof===$)return Q(z,M,q,Ac(M,W),ve);Nc(M,W)}return null}function fe(z,M,q,W){for(var ve=null,Ge=null,ge=M,je=M=0,Le=null;ge!==null&&je<q.length;je++){ge.index>je?(Le=ge,ge=null):Le=ge.sibling;var Ke=F(z,ge,q[je],W);if(Ke===null){ge===null&&(ge=Le);break}n&&ge&&Ke.alternate===null&&i(z,ge),M=m(Ke,M,je),Ge===null?ve=Ke:Ge.sibling=Ke,Ge=Ke,ge=Le}if(je===q.length)return o(z,ge),He&&ts(z,je),ve;if(ge===null){for(;je<q.length;je++)ge=ne(z,q[je],W),ge!==null&&(M=m(ge,M,je),Ge===null?ve=ge:Ge.sibling=ge,Ge=ge);return He&&ts(z,je),ve}for(ge=u(ge);je<q.length;je++)Le=Q(ge,z,je,q[je],W),Le!==null&&(n&&Le.alternate!==null&&ge.delete(Le.key===null?je:Le.key),M=m(Le,M,je),Ge===null?ve=Le:Ge.sibling=Le,Ge=Le);return n&&ge.forEach(function(ii){return i(z,ii)}),He&&ts(z,je),ve}function we(z,M,q,W){if(q==null)throw Error(s(151));for(var ve=null,Ge=null,ge=M,je=M=0,Le=null,Ke=q.next();ge!==null&&!Ke.done;je++,Ke=q.next()){ge.index>je?(Le=ge,ge=null):Le=ge.sibling;var ii=F(z,ge,Ke.value,W);if(ii===null){ge===null&&(ge=Le);break}n&&ge&&ii.alternate===null&&i(z,ge),M=m(ii,M,je),Ge===null?ve=ii:Ge.sibling=ii,Ge=ii,ge=Le}if(Ke.done)return o(z,ge),He&&ts(z,je),ve;if(ge===null){for(;!Ke.done;je++,Ke=q.next())Ke=ne(z,Ke.value,W),Ke!==null&&(M=m(Ke,M,je),Ge===null?ve=Ke:Ge.sibling=Ke,Ge=Ke);return He&&ts(z,je),ve}for(ge=u(ge);!Ke.done;je++,Ke=q.next())Ke=Q(ge,z,je,Ke.value,W),Ke!==null&&(n&&Ke.alternate!==null&&ge.delete(Ke.key===null?je:Ke.key),M=m(Ke,M,je),Ge===null?ve=Ke:Ge.sibling=Ke,Ge=Ke);return n&&ge.forEach(function($A){return i(z,$A)}),He&&ts(z,je),ve}function rt(z,M,q,W){if(typeof q=="object"&&q!==null&&q.type===j&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case S:e:{for(var ve=q.key;M!==null;){if(M.key===ve){if(ve=q.type,ve===j){if(M.tag===7){o(z,M.sibling),W=d(M,q.props.children),W.return=z,z=W;break e}}else if(M.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===R&&Xi(ve)===M.type){o(z,M.sibling),W=d(M,q.props),Cl(W,q),W.return=z,z=W;break e}o(z,M);break}else i(z,M);M=M.sibling}q.type===j?(W=Fi(q.props.children,z.mode,W,q.key),W.return=z,z=W):(W=Ec(q.type,q.key,q.props,null,z.mode,W),Cl(W,q),W.return=z,z=W)}return v(z);case k:e:{for(ve=q.key;M!==null;){if(M.key===ve)if(M.tag===4&&M.stateNode.containerInfo===q.containerInfo&&M.stateNode.implementation===q.implementation){o(z,M.sibling),W=d(M,q.children||[]),W.return=z,z=W;break e}else{o(z,M);break}else i(z,M);M=M.sibling}W=tf(q,z.mode,W),W.return=z,z=W}return v(z);case R:return q=Xi(q),rt(z,M,q,W)}if(Tt(q))return fe(z,M,q,W);if(L(q)){if(ve=L(q),typeof ve!="function")throw Error(s(150));return q=ve.call(q),we(z,M,q,W)}if(typeof q.then=="function")return rt(z,M,Ic(q),W);if(q.$$typeof===$)return rt(z,M,Ac(z,q),W);Nc(z,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,M!==null&&M.tag===6?(o(z,M.sibling),W=d(M,q),W.return=z,z=W):(o(z,M),W=ef(q,z.mode,W),W.return=z,z=W),v(z)):o(z,M)}return function(z,M,q,W){try{Rl=0;var ve=rt(z,M,q,W);return Qa=null,ve}catch(ge){if(ge===Ka||ge===Rc)throw ge;var Ge=In(29,ge,null,z.mode);return Ge.lanes=W,Ge.return=z,Ge}finally{}}}var Wi=Vy(!0),Uy=Vy(!1),qs=!1;function mf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gf(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Hs(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function $s(n,i,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ye&2)!==0){var d=u.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),u.pending=i,i=wc(n),wy(n,null,o),i}return bc(n,u,i,o),wc(n)}function Il(n,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,nl(n,o)}}function pf(n,i){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var d=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?d=m=v:m=m.next=v,o=o.next}while(o!==null);m===null?d=m=i:m=m.next=i}else d=m=i;o={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=i:n.next=i,o.lastBaseUpdate=i}var yf=!1;function Nl(){if(yf){var n=Ga;if(n!==null)throw n}}function Ol(n,i,o,u){yf=!1;var d=n.updateQueue;qs=!1;var m=d.firstBaseUpdate,v=d.lastBaseUpdate,T=d.shared.pending;if(T!==null){d.shared.pending=null;var O=T,H=O.next;O.next=null,v===null?m=H:v.next=H,v=O;var X=n.alternate;X!==null&&(X=X.updateQueue,T=X.lastBaseUpdate,T!==v&&(T===null?X.firstBaseUpdate=H:T.next=H,X.lastBaseUpdate=O))}if(m!==null){var ne=d.baseState;v=0,X=H=O=null,T=m;do{var F=T.lane&-536870913,Q=F!==T.lane;if(Q?(Ue&F)===F:(u&F)===F){F!==0&&F===Fa&&(yf=!0),X!==null&&(X=X.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var fe=n,we=T;F=i;var rt=o;switch(we.tag){case 1:if(fe=we.payload,typeof fe=="function"){ne=fe.call(rt,ne,F);break e}ne=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=we.payload,F=typeof fe=="function"?fe.call(rt,ne,F):fe,F==null)break e;ne=E({},ne,F);break e;case 2:qs=!0}}F=T.callback,F!==null&&(n.flags|=64,Q&&(n.flags|=8192),Q=d.callbacks,Q===null?d.callbacks=[F]:Q.push(F))}else Q={lane:F,tag:T.tag,payload:T.payload,callback:T.callback,next:null},X===null?(H=X=Q,O=ne):X=X.next=Q,v|=F;if(T=T.next,T===null){if(T=d.shared.pending,T===null)break;Q=T,T=Q.next,Q.next=null,d.lastBaseUpdate=Q,d.shared.pending=null}}while(!0);X===null&&(O=ne),d.baseState=O,d.firstBaseUpdate=H,d.lastBaseUpdate=X,m===null&&(d.shared.lanes=0),Ys|=v,n.lanes=v,n.memoizedState=ne}}function Ly(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function zy(n,i){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Ly(o[n],i)}var Ya=V(null),Oc=V(0);function By(n,i){n=ds,le(Oc,n),le(Ya,i),ds=n|i.baseLanes}function _f(){le(Oc,ds),le(Ya,Ya.current)}function vf(){ds=Oc.current,ee(Ya),ee(Oc)}var Nn=V(null),Yn=null;function Fs(n){var i=n.alternate;le(xt,xt.current&1),le(Nn,n),Yn===null&&(i===null||Ya.current!==null||i.memoizedState!==null)&&(Yn=n)}function bf(n){le(xt,xt.current),le(Nn,n),Yn===null&&(Yn=n)}function qy(n){n.tag===22?(le(xt,xt.current),le(Nn,n),Yn===null&&(Yn=n)):Gs()}function Gs(){le(xt,xt.current),le(Nn,Nn.current)}function On(n){ee(Nn),Yn===n&&(Yn=null),ee(xt)}var xt=V(0);function kc(n){for(var i=n;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||xm(o)||Rm(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ss=0,Oe=null,tt=null,Dt=null,jc=!1,Xa=!1,Zi=!1,Dc=0,kl=0,Ja=null,D1=0;function wt(){throw Error(s(321))}function wf(n,i){if(i===null)return!1;for(var o=0;o<i.length&&o<n.length;o++)if(!Cn(n[o],i[o]))return!1;return!0}function Ef(n,i,o,u,d,m){return ss=m,Oe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Y.H=n===null||n.memoizedState===null?A_:Vf,Zi=!1,m=o(u,d),Zi=!1,Xa&&(m=$y(i,o,u,d)),Hy(n),m}function Hy(n){Y.H=Pl;var i=tt!==null&&tt.next!==null;if(ss=0,Dt=tt=Oe=null,jc=!1,kl=0,Ja=null,i)throw Error(s(300));n===null||Pt||(n=n.dependencies,n!==null&&Sc(n)&&(Pt=!0))}function $y(n,i,o,u){Oe=n;var d=0;do{if(Xa&&(Ja=null),kl=0,Xa=!1,25<=d)throw Error(s(301));if(d+=1,Dt=tt=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Y.H=x_,m=i(o,u)}while(Xa);return m}function P1(){var n=Y.H,i=n.useState()[0];return i=typeof i.then=="function"?jl(i):i,n=n.useState()[0],(tt!==null?tt.memoizedState:null)!==n&&(Oe.flags|=1024),i}function Tf(){var n=Dc!==0;return Dc=0,n}function Sf(n,i,o){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~o}function Af(n){if(jc){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}jc=!1}ss=0,Dt=tt=Oe=null,Xa=!1,kl=Dc=0,Ja=null}function pn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?Oe.memoizedState=Dt=n:Dt=Dt.next=n,Dt}function Rt(){if(tt===null){var n=Oe.alternate;n=n!==null?n.memoizedState:null}else n=tt.next;var i=Dt===null?Oe.memoizedState:Dt.next;if(i!==null)Dt=i,tt=n;else{if(n===null)throw Oe.alternate===null?Error(s(467)):Error(s(310));tt=n,n={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Dt===null?Oe.memoizedState=Dt=n:Dt=Dt.next=n}return Dt}function Pc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jl(n){var i=kl;return kl+=1,Ja===null&&(Ja=[]),n=Dy(Ja,n,i),i=Oe,(Dt===null?i.memoizedState:Dt.next)===null&&(i=i.alternate,Y.H=i===null||i.memoizedState===null?A_:Vf),n}function Mc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return jl(n);if(n.$$typeof===$)return Wt(n)}throw Error(s(438,String(n)))}function xf(n){var i=null,o=Oe.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=Oe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(d){return d.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Pc(),Oe.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(n),u=0;u<n;u++)o[u]=U;return i.index++,o}function is(n,i){return typeof i=="function"?i(n):i}function Vc(n){var i=Rt();return Rf(i,tt,n)}function Rf(n,i,o){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=o;var d=n.baseQueue,m=u.pending;if(m!==null){if(d!==null){var v=d.next;d.next=m.next,m.next=v}i.baseQueue=d=m,u.pending=null}if(m=n.baseState,d===null)n.memoizedState=m;else{i=d.next;var T=v=null,O=null,H=i,X=!1;do{var ne=H.lane&-536870913;if(ne!==H.lane?(Ue&ne)===ne:(ss&ne)===ne){var F=H.revertLane;if(F===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ne===Fa&&(X=!0);else if((ss&F)===F){H=H.next,F===Fa&&(X=!0);continue}else ne={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(T=O=ne,v=m):O=O.next=ne,Oe.lanes|=F,Ys|=F;ne=H.action,Zi&&o(m,ne),m=H.hasEagerState?H.eagerState:o(m,ne)}else F={lane:ne,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(T=O=F,v=m):O=O.next=F,Oe.lanes|=ne,Ys|=ne;H=H.next}while(H!==null&&H!==i);if(O===null?v=m:O.next=T,!Cn(m,n.memoizedState)&&(Pt=!0,X&&(o=Ga,o!==null)))throw o;n.memoizedState=m,n.baseState=v,n.baseQueue=O,u.lastRenderedState=m}return d===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Cf(n){var i=Rt(),o=i.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=n;var u=o.dispatch,d=o.pending,m=i.memoizedState;if(d!==null){o.pending=null;var v=d=d.next;do m=n(m,v.action),v=v.next;while(v!==d);Cn(m,i.memoizedState)||(Pt=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),o.lastRenderedState=m}return[m,u]}function Fy(n,i,o){var u=Oe,d=Rt(),m=He;if(m){if(o===void 0)throw Error(s(407));o=o()}else o=i();var v=!Cn((tt||d).memoizedState,o);if(v&&(d.memoizedState=o,Pt=!0),d=d.queue,Of(Qy.bind(null,u,d,n),[n]),d.getSnapshot!==i||v||Dt!==null&&Dt.memoizedState.tag&1){if(u.flags|=2048,Wa(9,{destroy:void 0},Ky.bind(null,u,d,o,i),null),st===null)throw Error(s(349));m||(ss&127)!==0||Gy(u,i,o)}return o}function Gy(n,i,o){n.flags|=16384,n={getSnapshot:i,value:o},i=Oe.updateQueue,i===null?(i=Pc(),Oe.updateQueue=i,i.stores=[n]):(o=i.stores,o===null?i.stores=[n]:o.push(n))}function Ky(n,i,o,u){i.value=o,i.getSnapshot=u,Yy(i)&&Xy(n)}function Qy(n,i,o){return o(function(){Yy(i)&&Xy(n)})}function Yy(n){var i=n.getSnapshot;n=n.value;try{var o=i();return!Cn(n,o)}catch{return!0}}function Xy(n){var i=$i(n,2);i!==null&&Tn(i,n,2)}function If(n){var i=pn();if(typeof n=="function"){var o=n;if(n=o(),Zi){Ln(!0);try{o()}finally{Ln(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:n},i}function Jy(n,i,o,u){return n.baseState=o,Rf(n,tt,typeof u=="function"?u:is)}function M1(n,i,o,u,d){if(zc(n))throw Error(s(485));if(n=i.action,n!==null){var m={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};Y.T!==null?o(!0):m.isTransition=!1,u(m),o=i.pending,o===null?(m.next=i.pending=m,Wy(i,m)):(m.next=o.next,i.pending=o.next=m)}}function Wy(n,i){var o=i.action,u=i.payload,d=n.state;if(i.isTransition){var m=Y.T,v={};Y.T=v;try{var T=o(d,u),O=Y.S;O!==null&&O(v,T),Zy(n,i,T)}catch(H){Nf(n,i,H)}finally{m!==null&&v.types!==null&&(m.types=v.types),Y.T=m}}else try{m=o(d,u),Zy(n,i,m)}catch(H){Nf(n,i,H)}}function Zy(n,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){e_(n,i,u)},function(u){return Nf(n,i,u)}):e_(n,i,o)}function e_(n,i,o){i.status="fulfilled",i.value=o,t_(i),n.state=o,i=n.pending,i!==null&&(o=i.next,o===i?n.pending=null:(o=o.next,i.next=o,Wy(n,o)))}function Nf(n,i,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,t_(i),i=i.next;while(i!==u)}n.action=null}function t_(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function n_(n,i){return i}function r_(n,i){if(He){var o=st.formState;if(o!==null){e:{var u=Oe;if(He){if(dt){t:{for(var d=dt,m=Qn;d.nodeType!==8;){if(!m){d=null;break t}if(d=Xn(d.nextSibling),d===null){d=null;break t}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){dt=Xn(d.nextSibling),u=d.data==="F!";break e}}zs(u)}u=!1}u&&(i=o[0])}}return o=pn(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n_,lastRenderedState:i},o.queue=u,o=E_.bind(null,Oe,u),u.dispatch=o,u=If(!1),m=Mf.bind(null,Oe,!1,u.queue),u=pn(),d={state:i,dispatch:null,action:n,pending:null},u.queue=d,o=M1.bind(null,Oe,d,m,o),d.dispatch=o,u.memoizedState=n,[i,o,!1]}function s_(n){var i=Rt();return i_(i,tt,n)}function i_(n,i,o){if(i=Rf(n,i,n_)[0],n=Vc(is)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=jl(i)}catch(v){throw v===Ka?Rc:v}else u=i;i=Rt();var d=i.queue,m=d.dispatch;return o!==i.memoizedState&&(Oe.flags|=2048,Wa(9,{destroy:void 0},V1.bind(null,d,o),null)),[u,m,n]}function V1(n,i){n.action=i}function a_(n){var i=Rt(),o=tt;if(o!==null)return i_(i,o,n);Rt(),i=i.memoizedState,o=Rt();var u=o.queue.dispatch;return o.memoizedState=n,[i,u,!1]}function Wa(n,i,o,u){return n={tag:n,create:o,deps:u,inst:i,next:null},i=Oe.updateQueue,i===null&&(i=Pc(),Oe.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,i.lastEffect=n),n}function o_(){return Rt().memoizedState}function Uc(n,i,o,u){var d=pn();Oe.flags|=n,d.memoizedState=Wa(1|i,{destroy:void 0},o,u===void 0?null:u)}function Lc(n,i,o,u){var d=Rt();u=u===void 0?null:u;var m=d.memoizedState.inst;tt!==null&&u!==null&&wf(u,tt.memoizedState.deps)?d.memoizedState=Wa(i,m,o,u):(Oe.flags|=n,d.memoizedState=Wa(1|i,m,o,u))}function l_(n,i){Uc(8390656,8,n,i)}function Of(n,i){Lc(2048,8,n,i)}function U1(n){Oe.flags|=4;var i=Oe.updateQueue;if(i===null)i=Pc(),Oe.updateQueue=i,i.events=[n];else{var o=i.events;o===null?i.events=[n]:o.push(n)}}function u_(n){var i=Rt().memoizedState;return U1({ref:i,nextImpl:n}),function(){if((Ye&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function c_(n,i){return Lc(4,2,n,i)}function h_(n,i){return Lc(4,4,n,i)}function d_(n,i){if(typeof i=="function"){n=n();var o=i(n);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function f_(n,i,o){o=o!=null?o.concat([n]):null,Lc(4,4,d_.bind(null,i,n),o)}function kf(){}function m_(n,i){var o=Rt();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&wf(i,u[1])?u[0]:(o.memoizedState=[n,i],n)}function g_(n,i){var o=Rt();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&wf(i,u[1]))return u[0];if(u=n(),Zi){Ln(!0);try{n()}finally{Ln(!1)}}return o.memoizedState=[u,i],u}function jf(n,i,o){return o===void 0||(ss&1073741824)!==0&&(Ue&261930)===0?n.memoizedState=i:(n.memoizedState=o,n=pv(),Oe.lanes|=n,Ys|=n,o)}function p_(n,i,o,u){return Cn(o,i)?o:Ya.current!==null?(n=jf(n,o,u),Cn(n,i)||(Pt=!0),n):(ss&42)===0||(ss&1073741824)!==0&&(Ue&261930)===0?(Pt=!0,n.memoizedState=o):(n=pv(),Oe.lanes|=n,Ys|=n,i)}function y_(n,i,o,u,d){var m=ue.p;ue.p=m!==0&&8>m?m:8;var v=Y.T,T={};Y.T=T,Mf(n,!1,i,o);try{var O=d(),H=Y.S;if(H!==null&&H(T,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var X=j1(O,u);Dl(n,i,X,Dn(n))}else Dl(n,i,u,Dn(n))}catch(ne){Dl(n,i,{then:function(){},status:"rejected",reason:ne},Dn())}finally{ue.p=m,v!==null&&T.types!==null&&(v.types=T.types),Y.T=v}}function L1(){}function Df(n,i,o,u){if(n.tag!==5)throw Error(s(476));var d=__(n).queue;y_(n,d,i,_e,o===null?L1:function(){return v_(n),o(u)})}function __(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:_e},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:o},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function v_(n){var i=__(n);i.next===null&&(i=n.alternate.memoizedState),Dl(n,i.next.queue,{},Dn())}function Pf(){return Wt(Jl)}function b_(){return Rt().memoizedState}function w_(){return Rt().memoizedState}function z1(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var o=Dn();n=Hs(o);var u=$s(i,n,o);u!==null&&(Tn(u,i,o),Il(u,i,o)),i={cache:cf()},n.payload=i;return}i=i.return}}function B1(n,i,o){var u=Dn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},zc(n)?T_(i,o):(o=Wd(n,i,o,u),o!==null&&(Tn(o,n,u),S_(o,i,u)))}function E_(n,i,o){var u=Dn();Dl(n,i,o,u)}function Dl(n,i,o,u){var d={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(zc(n))T_(i,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var v=i.lastRenderedState,T=m(v,o);if(d.hasEagerState=!0,d.eagerState=T,Cn(T,v))return bc(n,i,d,0),st===null&&vc(),!1}catch{}finally{}if(o=Wd(n,i,d,u),o!==null)return Tn(o,n,u),S_(o,i,u),!0}return!1}function Mf(n,i,o,u){if(u={lane:2,revertLane:mm(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},zc(n)){if(i)throw Error(s(479))}else i=Wd(n,o,u,2),i!==null&&Tn(i,n,2)}function zc(n){var i=n.alternate;return n===Oe||i!==null&&i===Oe}function T_(n,i){Xa=jc=!0;var o=n.pending;o===null?i.next=i:(i.next=o.next,o.next=i),n.pending=i}function S_(n,i,o){if((o&4194048)!==0){var u=i.lanes;u&=n.pendingLanes,o|=u,i.lanes=o,nl(n,o)}}var Pl={readContext:Wt,use:Mc,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useLayoutEffect:wt,useInsertionEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useSyncExternalStore:wt,useId:wt,useHostTransitionStatus:wt,useFormState:wt,useActionState:wt,useOptimistic:wt,useMemoCache:wt,useCacheRefresh:wt};Pl.useEffectEvent=wt;var A_={readContext:Wt,use:Mc,useCallback:function(n,i){return pn().memoizedState=[n,i===void 0?null:i],n},useContext:Wt,useEffect:l_,useImperativeHandle:function(n,i,o){o=o!=null?o.concat([n]):null,Uc(4194308,4,d_.bind(null,i,n),o)},useLayoutEffect:function(n,i){return Uc(4194308,4,n,i)},useInsertionEffect:function(n,i){Uc(4,2,n,i)},useMemo:function(n,i){var o=pn();i=i===void 0?null:i;var u=n();if(Zi){Ln(!0);try{n()}finally{Ln(!1)}}return o.memoizedState=[u,i],u},useReducer:function(n,i,o){var u=pn();if(o!==void 0){var d=o(i);if(Zi){Ln(!0);try{o(i)}finally{Ln(!1)}}}else d=i;return u.memoizedState=u.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},u.queue=n,n=n.dispatch=B1.bind(null,Oe,n),[u.memoizedState,n]},useRef:function(n){var i=pn();return n={current:n},i.memoizedState=n},useState:function(n){n=If(n);var i=n.queue,o=E_.bind(null,Oe,i);return i.dispatch=o,[n.memoizedState,o]},useDebugValue:kf,useDeferredValue:function(n,i){var o=pn();return jf(o,n,i)},useTransition:function(){var n=If(!1);return n=y_.bind(null,Oe,n.queue,!0,!1),pn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,o){var u=Oe,d=pn();if(He){if(o===void 0)throw Error(s(407));o=o()}else{if(o=i(),st===null)throw Error(s(349));(Ue&127)!==0||Gy(u,i,o)}d.memoizedState=o;var m={value:o,getSnapshot:i};return d.queue=m,l_(Qy.bind(null,u,m,n),[n]),u.flags|=2048,Wa(9,{destroy:void 0},Ky.bind(null,u,m,o,i),null),o},useId:function(){var n=pn(),i=st.identifierPrefix;if(He){var o=Ur,u=Vr;o=(u&~(1<<32-St(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=Dc++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=D1++,i="_"+i+"r_"+o.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:Pf,useFormState:r_,useActionState:r_,useOptimistic:function(n){var i=pn();i.memoizedState=i.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Mf.bind(null,Oe,!0,o),o.dispatch=i,[n,i]},useMemoCache:xf,useCacheRefresh:function(){return pn().memoizedState=z1.bind(null,Oe)},useEffectEvent:function(n){var i=pn(),o={impl:n};return i.memoizedState=o,function(){if((Ye&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},Vf={readContext:Wt,use:Mc,useCallback:m_,useContext:Wt,useEffect:Of,useImperativeHandle:f_,useInsertionEffect:c_,useLayoutEffect:h_,useMemo:g_,useReducer:Vc,useRef:o_,useState:function(){return Vc(is)},useDebugValue:kf,useDeferredValue:function(n,i){var o=Rt();return p_(o,tt.memoizedState,n,i)},useTransition:function(){var n=Vc(is)[0],i=Rt().memoizedState;return[typeof n=="boolean"?n:jl(n),i]},useSyncExternalStore:Fy,useId:b_,useHostTransitionStatus:Pf,useFormState:s_,useActionState:s_,useOptimistic:function(n,i){var o=Rt();return Jy(o,tt,n,i)},useMemoCache:xf,useCacheRefresh:w_};Vf.useEffectEvent=u_;var x_={readContext:Wt,use:Mc,useCallback:m_,useContext:Wt,useEffect:Of,useImperativeHandle:f_,useInsertionEffect:c_,useLayoutEffect:h_,useMemo:g_,useReducer:Cf,useRef:o_,useState:function(){return Cf(is)},useDebugValue:kf,useDeferredValue:function(n,i){var o=Rt();return tt===null?jf(o,n,i):p_(o,tt.memoizedState,n,i)},useTransition:function(){var n=Cf(is)[0],i=Rt().memoizedState;return[typeof n=="boolean"?n:jl(n),i]},useSyncExternalStore:Fy,useId:b_,useHostTransitionStatus:Pf,useFormState:a_,useActionState:a_,useOptimistic:function(n,i){var o=Rt();return tt!==null?Jy(o,tt,n,i):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:xf,useCacheRefresh:w_};x_.useEffectEvent=u_;function Uf(n,i,o,u){i=n.memoizedState,o=o(u,i),o=o==null?i:E({},i,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Lf={enqueueSetState:function(n,i,o){n=n._reactInternals;var u=Dn(),d=Hs(u);d.payload=i,o!=null&&(d.callback=o),i=$s(n,d,u),i!==null&&(Tn(i,n,u),Il(i,n,u))},enqueueReplaceState:function(n,i,o){n=n._reactInternals;var u=Dn(),d=Hs(u);d.tag=1,d.payload=i,o!=null&&(d.callback=o),i=$s(n,d,u),i!==null&&(Tn(i,n,u),Il(i,n,u))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var o=Dn(),u=Hs(o);u.tag=2,i!=null&&(u.callback=i),i=$s(n,u,o),i!==null&&(Tn(i,n,o),Il(i,n,o))}};function R_(n,i,o,u,d,m,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,v):i.prototype&&i.prototype.isPureReactComponent?!wl(o,u)||!wl(d,m):!0}function C_(n,i,o,u){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==n&&Lf.enqueueReplaceState(i,i.state,null)}function ea(n,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(n=n.defaultProps){o===i&&(o=E({},o));for(var d in n)o[d]===void 0&&(o[d]=n[d])}return o}function I_(n){_c(n)}function N_(n){console.error(n)}function O_(n){_c(n)}function Bc(n,i){try{var o=n.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function k_(n,i,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function zf(n,i,o){return o=Hs(o),o.tag=3,o.payload={element:null},o.callback=function(){Bc(n,i)},o}function j_(n){return n=Hs(n),n.tag=3,n}function D_(n,i,o,u){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var m=u.value;n.payload=function(){return d(m)},n.callback=function(){k_(i,o,u)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){k_(i,o,u),typeof d!="function"&&(Xs===null?Xs=new Set([this]):Xs.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function q1(n,i,o,u,d){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&$a(i,o,d,!0),o=Nn.current,o!==null){switch(o.tag){case 31:case 13:return Yn===null?Zc():o.alternate===null&&Et===0&&(Et=3),o.flags&=-257,o.flags|=65536,o.lanes=d,u===Cc?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),hm(n,u,d)),!1;case 22:return o.flags|=65536,u===Cc?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),hm(n,u,d)),!1}throw Error(s(435,o.tag))}return hm(n,u,d),Zc(),!1}if(He)return i=Nn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=d,u!==sf&&(n=Error(s(422),{cause:u}),Sl(Fn(n,o)))):(u!==sf&&(i=Error(s(423),{cause:u}),Sl(Fn(i,o))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,u=Fn(u,o),d=zf(n.stateNode,u,d),pf(n,d),Et!==4&&(Et=2)),!1;var m=Error(s(520),{cause:u});if(m=Fn(m,o),Hl===null?Hl=[m]:Hl.push(m),Et!==4&&(Et=2),i===null)return!0;u=Fn(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,n=d&-d,o.lanes|=n,n=zf(o.stateNode,u,n),pf(o,n),!1;case 1:if(i=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Xs===null||!Xs.has(m))))return o.flags|=65536,d&=-d,o.lanes|=d,d=j_(d),D_(d,n,o,u),pf(o,d),!1}o=o.return}while(o!==null);return!1}var Bf=Error(s(461)),Pt=!1;function Zt(n,i,o,u){i.child=n===null?Uy(i,null,o,u):Wi(i,n.child,o,u)}function P_(n,i,o,u,d){o=o.render;var m=i.ref;if("ref"in u){var v={};for(var T in u)T!=="ref"&&(v[T]=u[T])}else v=u;return Qi(i),u=Ef(n,i,o,v,m,d),T=Tf(),n!==null&&!Pt?(Sf(n,i,d),as(n,i,d)):(He&&T&&nf(i),i.flags|=1,Zt(n,i,u,d),i.child)}function M_(n,i,o,u,d){if(n===null){var m=o.type;return typeof m=="function"&&!Zd(m)&&m.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=m,V_(n,i,m,u,d)):(n=Ec(o.type,null,u,i,i.mode,d),n.ref=i.ref,n.return=i,i.child=n)}if(m=n.child,!Yf(n,d)){var v=m.memoizedProps;if(o=o.compare,o=o!==null?o:wl,o(v,u)&&n.ref===i.ref)return as(n,i,d)}return i.flags|=1,n=es(m,u),n.ref=i.ref,n.return=i,i.child=n}function V_(n,i,o,u,d){if(n!==null){var m=n.memoizedProps;if(wl(m,u)&&n.ref===i.ref)if(Pt=!1,i.pendingProps=u=m,Yf(n,d))(n.flags&131072)!==0&&(Pt=!0);else return i.lanes=n.lanes,as(n,i,d)}return qf(n,i,o,u,d)}function U_(n,i,o,u){var d=u.children,m=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,n!==null){for(u=i.child=n.child,d=0;u!==null;)d=d|u.lanes|u.childLanes,u=u.sibling;u=d&~m}else u=0,i.child=null;return L_(n,i,m,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&xc(i,m!==null?m.cachePool:null),m!==null?By(i,m):_f(),qy(i);else return u=i.lanes=536870912,L_(n,i,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(xc(i,m.cachePool),By(i,m),Gs(),i.memoizedState=null):(n!==null&&xc(i,null),_f(),Gs());return Zt(n,i,d,o),i.child}function Ml(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function L_(n,i,o,u,d){var m=df();return m=m===null?null:{parent:jt._currentValue,pool:m},i.memoizedState={baseLanes:o,cachePool:m},n!==null&&xc(i,null),_f(),qy(i),n!==null&&$a(n,i,u,!0),i.childLanes=d,null}function qc(n,i){return i=$c({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function z_(n,i,o){return Wi(i,n.child,null,o),n=qc(i,i.pendingProps),n.flags|=2,On(i),i.memoizedState=null,n}function H1(n,i,o){var u=i.pendingProps,d=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(He){if(u.mode==="hidden")return n=qc(i,u),i.lanes=536870912,Ml(null,n);if(bf(i),(n=dt)?(n=Wv(n,Qn),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Us!==null?{id:Vr,overflow:Ur}:null,retryLane:536870912,hydrationErrors:null},o=Ty(n),o.return=i,i.child=o,Jt=i,dt=null)):n=null,n===null)throw zs(i);return i.lanes=536870912,null}return qc(i,u)}var m=n.memoizedState;if(m!==null){var v=m.dehydrated;if(bf(i),d)if(i.flags&256)i.flags&=-257,i=z_(n,i,o);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(s(558));else if(Pt||$a(n,i,o,!1),d=(o&n.childLanes)!==0,Pt||d){if(u=st,u!==null&&(v=rl(u,o),v!==0&&v!==m.retryLane))throw m.retryLane=v,$i(n,v),Tn(u,n,v),Bf;Zc(),i=z_(n,i,o)}else n=m.treeContext,dt=Xn(v.nextSibling),Jt=i,He=!0,Ls=null,Qn=!1,n!==null&&xy(i,n),i=qc(i,u),i.flags|=4096;return i}return n=es(n.child,{mode:u.mode,children:u.children}),n.ref=i.ref,i.child=n,n.return=i,n}function Hc(n,i){var o=i.ref;if(o===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(n===null||n.ref!==o)&&(i.flags|=4194816)}}function qf(n,i,o,u,d){return Qi(i),o=Ef(n,i,o,u,void 0,d),u=Tf(),n!==null&&!Pt?(Sf(n,i,d),as(n,i,d)):(He&&u&&nf(i),i.flags|=1,Zt(n,i,o,d),i.child)}function B_(n,i,o,u,d,m){return Qi(i),i.updateQueue=null,o=$y(i,u,o,d),Hy(n),u=Tf(),n!==null&&!Pt?(Sf(n,i,m),as(n,i,m)):(He&&u&&nf(i),i.flags|=1,Zt(n,i,o,m),i.child)}function q_(n,i,o,u,d){if(Qi(i),i.stateNode===null){var m=za,v=o.contextType;typeof v=="object"&&v!==null&&(m=Wt(v)),m=new o(u,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Lf,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=u,m.state=i.memoizedState,m.refs={},mf(i),v=o.contextType,m.context=typeof v=="object"&&v!==null?Wt(v):za,m.state=i.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(Uf(i,o,v,u),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&Lf.enqueueReplaceState(m,m.state,null),Ol(i,u,m,d),Nl(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(n===null){m=i.stateNode;var T=i.memoizedProps,O=ea(o,T);m.props=O;var H=m.context,X=o.contextType;v=za,typeof X=="object"&&X!==null&&(v=Wt(X));var ne=o.getDerivedStateFromProps;X=typeof ne=="function"||typeof m.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,X||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T||H!==v)&&C_(i,m,u,v),qs=!1;var F=i.memoizedState;m.state=F,Ol(i,u,m,d),Nl(),H=i.memoizedState,T||F!==H||qs?(typeof ne=="function"&&(Uf(i,o,ne,u),H=i.memoizedState),(O=qs||R_(i,o,O,u,F,H,v))?(X||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=H),m.props=u,m.state=H,m.context=v,u=O):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{m=i.stateNode,gf(n,i),v=i.memoizedProps,X=ea(o,v),m.props=X,ne=i.pendingProps,F=m.context,H=o.contextType,O=za,typeof H=="object"&&H!==null&&(O=Wt(H)),T=o.getDerivedStateFromProps,(H=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==ne||F!==O)&&C_(i,m,u,O),qs=!1,F=i.memoizedState,m.state=F,Ol(i,u,m,d),Nl();var Q=i.memoizedState;v!==ne||F!==Q||qs||n!==null&&n.dependencies!==null&&Sc(n.dependencies)?(typeof T=="function"&&(Uf(i,o,T,u),Q=i.memoizedState),(X=qs||R_(i,o,X,u,F,Q,O)||n!==null&&n.dependencies!==null&&Sc(n.dependencies))?(H||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,Q,O),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,Q,O)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&F===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&F===n.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=Q),m.props=u,m.state=Q,m.context=O,u=X):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&F===n.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&F===n.memoizedState||(i.flags|=1024),u=!1)}return m=u,Hc(n,i),u=(i.flags&128)!==0,m||u?(m=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,n!==null&&u?(i.child=Wi(i,n.child,null,d),i.child=Wi(i,null,o,d)):Zt(n,i,o,d),i.memoizedState=m.state,n=i.child):n=as(n,i,d),n}function H_(n,i,o,u){return Gi(),i.flags|=256,Zt(n,i,o,u),i.child}var Hf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $f(n){return{baseLanes:n,cachePool:ky()}}function Ff(n,i,o){return n=n!==null?n.childLanes&~o:0,i&&(n|=jn),n}function $_(n,i,o){var u=i.pendingProps,d=!1,m=(i.flags&128)!==0,v;if((v=m)||(v=n!==null&&n.memoizedState===null?!1:(xt.current&2)!==0),v&&(d=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,n===null){if(He){if(d?Fs(i):Gs(),(n=dt)?(n=Wv(n,Qn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Us!==null?{id:Vr,overflow:Ur}:null,retryLane:536870912,hydrationErrors:null},o=Ty(n),o.return=i,i.child=o,Jt=i,dt=null)):n=null,n===null)throw zs(i);return Rm(n)?i.lanes=32:i.lanes=536870912,null}var T=u.children;return u=u.fallback,d?(Gs(),d=i.mode,T=$c({mode:"hidden",children:T},d),u=Fi(u,d,o,null),T.return=i,u.return=i,T.sibling=u,i.child=T,u=i.child,u.memoizedState=$f(o),u.childLanes=Ff(n,v,o),i.memoizedState=Hf,Ml(null,u)):(Fs(i),Gf(i,T))}var O=n.memoizedState;if(O!==null&&(T=O.dehydrated,T!==null)){if(m)i.flags&256?(Fs(i),i.flags&=-257,i=Kf(n,i,o)):i.memoizedState!==null?(Gs(),i.child=n.child,i.flags|=128,i=null):(Gs(),T=u.fallback,d=i.mode,u=$c({mode:"visible",children:u.children},d),T=Fi(T,d,o,null),T.flags|=2,u.return=i,T.return=i,u.sibling=T,i.child=u,Wi(i,n.child,null,o),u=i.child,u.memoizedState=$f(o),u.childLanes=Ff(n,v,o),i.memoizedState=Hf,i=Ml(null,u));else if(Fs(i),Rm(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var H=v.dgst;v=H,u=Error(s(419)),u.stack="",u.digest=v,Sl({value:u,source:null,stack:null}),i=Kf(n,i,o)}else if(Pt||$a(n,i,o,!1),v=(o&n.childLanes)!==0,Pt||v){if(v=st,v!==null&&(u=rl(v,o),u!==0&&u!==O.retryLane))throw O.retryLane=u,$i(n,u),Tn(v,n,u),Bf;xm(T)||Zc(),i=Kf(n,i,o)}else xm(T)?(i.flags|=192,i.child=n.child,i=null):(n=O.treeContext,dt=Xn(T.nextSibling),Jt=i,He=!0,Ls=null,Qn=!1,n!==null&&xy(i,n),i=Gf(i,u.children),i.flags|=4096);return i}return d?(Gs(),T=u.fallback,d=i.mode,O=n.child,H=O.sibling,u=es(O,{mode:"hidden",children:u.children}),u.subtreeFlags=O.subtreeFlags&65011712,H!==null?T=es(H,T):(T=Fi(T,d,o,null),T.flags|=2),T.return=i,u.return=i,u.sibling=T,i.child=u,Ml(null,u),u=i.child,T=n.child.memoizedState,T===null?T=$f(o):(d=T.cachePool,d!==null?(O=jt._currentValue,d=d.parent!==O?{parent:O,pool:O}:d):d=ky(),T={baseLanes:T.baseLanes|o,cachePool:d}),u.memoizedState=T,u.childLanes=Ff(n,v,o),i.memoizedState=Hf,Ml(n.child,u)):(Fs(i),o=n.child,n=o.sibling,o=es(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,n!==null&&(v=i.deletions,v===null?(i.deletions=[n],i.flags|=16):v.push(n)),i.child=o,i.memoizedState=null,o)}function Gf(n,i){return i=$c({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function $c(n,i){return n=In(22,n,null,i),n.lanes=0,n}function Kf(n,i,o){return Wi(i,n.child,null,o),n=Gf(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function F_(n,i,o){n.lanes|=i;var u=n.alternate;u!==null&&(u.lanes|=i),lf(n.return,i,o)}function Qf(n,i,o,u,d,m){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:d,treeForkCount:m}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=o,v.tailMode=d,v.treeForkCount=m)}function G_(n,i,o){var u=i.pendingProps,d=u.revealOrder,m=u.tail;u=u.children;var v=xt.current,T=(v&2)!==0;if(T?(v=v&1|2,i.flags|=128):v&=1,le(xt,v),Zt(n,i,u,o),u=He?Tl:0,!T&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&F_(n,o,i);else if(n.tag===19)F_(n,o,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(d){case"forwards":for(o=i.child,d=null;o!==null;)n=o.alternate,n!==null&&kc(n)===null&&(d=o),o=o.sibling;o=d,o===null?(d=i.child,i.child=null):(d=o.sibling,o.sibling=null),Qf(i,!1,d,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,d=i.child,i.child=null;d!==null;){if(n=d.alternate,n!==null&&kc(n)===null){i.child=d;break}n=d.sibling,d.sibling=o,o=d,d=n}Qf(i,!0,o,null,m,u);break;case"together":Qf(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function as(n,i,o){if(n!==null&&(i.dependencies=n.dependencies),Ys|=i.lanes,(o&i.childLanes)===0)if(n!==null){if($a(n,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,o=es(n,n.pendingProps),i.child=o,o.return=i;n.sibling!==null;)n=n.sibling,o=o.sibling=es(n,n.pendingProps),o.return=i;o.sibling=null}return i.child}function Yf(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Sc(n)))}function $1(n,i,o){switch(i.tag){case 3:vt(i,i.stateNode.containerInfo),Bs(i,jt,n.memoizedState.cache),Gi();break;case 27:case 5:Yr(i);break;case 4:vt(i,i.stateNode.containerInfo);break;case 10:Bs(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,bf(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Fs(i),i.flags|=128,null):(o&i.child.childLanes)!==0?$_(n,i,o):(Fs(i),n=as(n,i,o),n!==null?n.sibling:null);Fs(i);break;case 19:var d=(n.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||($a(n,i,o,!1),u=(o&i.childLanes)!==0),d){if(u)return G_(n,i,o);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),le(xt,xt.current),u)break;return null;case 22:return i.lanes=0,U_(n,i,o,i.pendingProps);case 24:Bs(i,jt,n.memoizedState.cache)}return as(n,i,o)}function K_(n,i,o){if(n!==null)if(n.memoizedProps!==i.pendingProps)Pt=!0;else{if(!Yf(n,o)&&(i.flags&128)===0)return Pt=!1,$1(n,i,o);Pt=(n.flags&131072)!==0}else Pt=!1,He&&(i.flags&1048576)!==0&&Ay(i,Tl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(n=Xi(i.elementType),i.type=n,typeof n=="function")Zd(n)?(u=ea(n,u),i.tag=1,i=q_(null,i,n,u,o)):(i.tag=0,i=qf(null,i,n,u,o));else{if(n!=null){var d=n.$$typeof;if(d===se){i.tag=11,i=P_(null,i,n,u,o);break e}else if(d===C){i.tag=14,i=M_(null,i,n,u,o);break e}}throw i=it(n)||n,Error(s(306,i,""))}}return i;case 0:return qf(n,i,i.type,i.pendingProps,o);case 1:return u=i.type,d=ea(u,i.pendingProps),q_(n,i,u,d,o);case 3:e:{if(vt(i,i.stateNode.containerInfo),n===null)throw Error(s(387));u=i.pendingProps;var m=i.memoizedState;d=m.element,gf(n,i),Ol(i,u,null,o);var v=i.memoizedState;if(u=v.cache,Bs(i,jt,u),u!==m.cache&&uf(i,[jt],o,!0),Nl(),u=v.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=H_(n,i,u,o);break e}else if(u!==d){d=Fn(Error(s(424)),i),Sl(d),i=H_(n,i,u,o);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(dt=Xn(n.firstChild),Jt=i,He=!0,Ls=null,Qn=!0,o=Uy(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Gi(),u===d){i=as(n,i,o);break e}Zt(n,i,u,o)}i=i.child}return i;case 26:return Hc(n,i),n===null?(o=s0(i.type,null,i.pendingProps,null))?i.memoizedState=o:He||(o=i.type,n=i.pendingProps,u=ah(Re.current).createElement(o),u[Nt]=i,u[Ft]=n,en(u,o,n),Ot(u),i.stateNode=u):i.memoizedState=s0(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Yr(i),n===null&&He&&(u=i.stateNode=t0(i.type,i.pendingProps,Re.current),Jt=i,Qn=!0,d=dt,ei(i.type)?(Cm=d,dt=Xn(u.firstChild)):dt=d),Zt(n,i,i.pendingProps.children,o),Hc(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&He&&((d=u=dt)&&(u=bA(u,i.type,i.pendingProps,Qn),u!==null?(i.stateNode=u,Jt=i,dt=Xn(u.firstChild),Qn=!1,d=!0):d=!1),d||zs(i)),Yr(i),d=i.type,m=i.pendingProps,v=n!==null?n.memoizedProps:null,u=m.children,Tm(d,m)?u=null:v!==null&&Tm(d,v)&&(i.flags|=32),i.memoizedState!==null&&(d=Ef(n,i,P1,null,null,o),Jl._currentValue=d),Hc(n,i),Zt(n,i,u,o),i.child;case 6:return n===null&&He&&((n=o=dt)&&(o=wA(o,i.pendingProps,Qn),o!==null?(i.stateNode=o,Jt=i,dt=null,n=!0):n=!1),n||zs(i)),null;case 13:return $_(n,i,o);case 4:return vt(i,i.stateNode.containerInfo),u=i.pendingProps,n===null?i.child=Wi(i,null,u,o):Zt(n,i,u,o),i.child;case 11:return P_(n,i,i.type,i.pendingProps,o);case 7:return Zt(n,i,i.pendingProps,o),i.child;case 8:return Zt(n,i,i.pendingProps.children,o),i.child;case 12:return Zt(n,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Bs(i,i.type,u.value),Zt(n,i,u.children,o),i.child;case 9:return d=i.type._context,u=i.pendingProps.children,Qi(i),d=Wt(d),u=u(d),i.flags|=1,Zt(n,i,u,o),i.child;case 14:return M_(n,i,i.type,i.pendingProps,o);case 15:return V_(n,i,i.type,i.pendingProps,o);case 19:return G_(n,i,o);case 31:return H1(n,i,o);case 22:return U_(n,i,o,i.pendingProps);case 24:return Qi(i),u=Wt(jt),n===null?(d=df(),d===null&&(d=st,m=cf(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=o),d=m),i.memoizedState={parent:u,cache:d},mf(i),Bs(i,jt,d)):((n.lanes&o)!==0&&(gf(n,i),Ol(i,null,null,o),Nl()),d=n.memoizedState,m=i.memoizedState,d.parent!==u?(d={parent:u,cache:u},i.memoizedState=d,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=d),Bs(i,jt,u)):(u=m.cache,Bs(i,jt,u),u!==d.cache&&uf(i,[jt],o,!0))),Zt(n,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function os(n){n.flags|=4}function Xf(n,i,o,u,d){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(d&335544128)===d)if(n.stateNode.complete)n.flags|=8192;else if(bv())n.flags|=8192;else throw Ji=Cc,ff}else n.flags&=-16777217}function Q_(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!u0(i))if(bv())n.flags|=8192;else throw Ji=Cc,ff}function Fc(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Ju():536870912,n.lanes|=i,no|=i)}function Vl(n,i){if(!He)switch(n.tailMode){case"hidden":i=n.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function ft(n){var i=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(i)for(var d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=u,n.childLanes=o,i}function F1(n,i,o){var u=i.pendingProps;switch(rf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(i),null;case 1:return ft(i),null;case 3:return o=i.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),rs(jt),at(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Ha(i)?os(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,af())),ft(i),null;case 26:var d=i.type,m=i.memoizedState;return n===null?(os(i),m!==null?(ft(i),Q_(i,m)):(ft(i),Xf(i,d,null,u,o))):m?m!==n.memoizedState?(os(i),ft(i),Q_(i,m)):(ft(i),i.flags&=-16777217):(n=n.memoizedProps,n!==u&&os(i),ft(i),Xf(i,d,n,u,o)),null;case 27:if(As(i),o=Re.current,d=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&os(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return ft(i),null}n=ce.current,Ha(i)?Ry(i):(n=t0(d,u,o),i.stateNode=n,os(i))}return ft(i),null;case 5:if(As(i),d=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==u&&os(i);else{if(!u){if(i.stateNode===null)throw Error(s(166));return ft(i),null}if(m=ce.current,Ha(i))Ry(i);else{var v=ah(Re.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?v.createElement("select",{is:u.is}):v.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?v.createElement(d,{is:u.is}):v.createElement(d)}}m[Nt]=i,m[Ft]=u;e:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break e;for(;v.sibling===null;){if(v.return===null||v.return===i)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=m;e:switch(en(m,d,u),d){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&os(i)}}return ft(i),Xf(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,o),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==u&&os(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(s(166));if(n=Re.current,Ha(i)){if(n=i.stateNode,o=i.memoizedProps,u=null,d=Jt,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}n[Nt]=i,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||$v(n.nodeValue,o)),n||zs(i,!0)}else n=ah(n).createTextNode(u),n[Nt]=i,i.stateNode=n}return ft(i),null;case 31:if(o=i.memoizedState,n===null||n.memoizedState!==null){if(u=Ha(i),o!==null){if(n===null){if(!u)throw Error(s(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[Nt]=i}else Gi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ft(i),n=!1}else o=af(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return i.flags&256?(On(i),i):(On(i),null);if((i.flags&128)!==0)throw Error(s(558))}return ft(i),null;case 13:if(u=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=Ha(i),u!==null&&u.dehydrated!==null){if(n===null){if(!d)throw Error(s(318));if(d=i.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[Nt]=i}else Gi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ft(i),d=!1}else d=af(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return i.flags&256?(On(i),i):(On(i),null)}return On(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=i.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==d&&(u.flags|=2048)),o!==n&&o&&(i.child.flags|=8192),Fc(i,i.updateQueue),ft(i),null);case 4:return at(),n===null&&_m(i.stateNode.containerInfo),ft(i),null;case 10:return rs(i.type),ft(i),null;case 19:if(ee(xt),u=i.memoizedState,u===null)return ft(i),null;if(d=(i.flags&128)!==0,m=u.rendering,m===null)if(d)Vl(u,!1);else{if(Et!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(m=kc(n),m!==null){for(i.flags|=128,Vl(u,!1),n=m.updateQueue,i.updateQueue=n,Fc(i,n),i.subtreeFlags=0,n=o,o=i.child;o!==null;)Ey(o,n),o=o.sibling;return le(xt,xt.current&1|2),He&&ts(i,u.treeForkCount),i.child}n=n.sibling}u.tail!==null&&mn()>Xc&&(i.flags|=128,d=!0,Vl(u,!1),i.lanes=4194304)}else{if(!d)if(n=kc(m),n!==null){if(i.flags|=128,d=!0,n=n.updateQueue,i.updateQueue=n,Fc(i,n),Vl(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!He)return ft(i),null}else 2*mn()-u.renderingStartTime>Xc&&o!==536870912&&(i.flags|=128,d=!0,Vl(u,!1),i.lanes=4194304);u.isBackwards?(m.sibling=i.child,i.child=m):(n=u.last,n!==null?n.sibling=m:i.child=m,u.last=m)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=mn(),n.sibling=null,o=xt.current,le(xt,d?o&1|2:o&1),He&&ts(i,u.treeForkCount),n):(ft(i),null);case 22:case 23:return On(i),vf(),u=i.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(ft(i),i.subtreeFlags&6&&(i.flags|=8192)):ft(i),o=i.updateQueue,o!==null&&Fc(i,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),n!==null&&ee(Yi),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),rs(jt),ft(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function G1(n,i){switch(rf(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return rs(jt),at(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return As(i),null;case 31:if(i.memoizedState!==null){if(On(i),i.alternate===null)throw Error(s(340));Gi()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(On(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Gi()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return ee(xt),null;case 4:return at(),null;case 10:return rs(i.type),null;case 22:case 23:return On(i),vf(),n!==null&&ee(Yi),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return rs(jt),null;case 25:return null;default:return null}}function Y_(n,i){switch(rf(i),i.tag){case 3:rs(jt),at();break;case 26:case 27:case 5:As(i);break;case 4:at();break;case 31:i.memoizedState!==null&&On(i);break;case 13:On(i);break;case 19:ee(xt);break;case 10:rs(i.type);break;case 22:case 23:On(i),vf(),n!==null&&ee(Yi);break;case 24:rs(jt)}}function Ul(n,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var d=u.next;o=d;do{if((o.tag&n)===n){u=void 0;var m=o.create,v=o.inst;u=m(),v.destroy=u}o=o.next}while(o!==d)}}catch(T){Ze(i,i.return,T)}}function Ks(n,i,o){try{var u=i.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var m=d.next;u=m;do{if((u.tag&n)===n){var v=u.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,d=i;var O=o,H=T;try{H()}catch(X){Ze(d,O,X)}}}u=u.next}while(u!==m)}}catch(X){Ze(i,i.return,X)}}function X_(n){var i=n.updateQueue;if(i!==null){var o=n.stateNode;try{zy(i,o)}catch(u){Ze(n,n.return,u)}}}function J_(n,i,o){o.props=ea(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){Ze(n,i,u)}}function Ll(n,i){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(d){Ze(n,i,d)}}function Lr(n,i){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(d){Ze(n,i,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){Ze(n,i,d)}else o.current=null}function W_(n){var i=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(d){Ze(n,n.return,d)}}function Jf(n,i,o){try{var u=n.stateNode;mA(u,n.type,o,i),u[Ft]=i}catch(d){Ze(n,n.return,d)}}function Z_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ei(n.type)||n.tag===4}function Wf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Z_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ei(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Zf(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(n),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=sr));else if(u!==4&&(u===27&&ei(n.type)&&(o=n.stateNode,i=null),n=n.child,n!==null))for(Zf(n,i,o),n=n.sibling;n!==null;)Zf(n,i,o),n=n.sibling}function Gc(n,i,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,i?o.insertBefore(n,i):o.appendChild(n);else if(u!==4&&(u===27&&ei(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Gc(n,i,o),n=n.sibling;n!==null;)Gc(n,i,o),n=n.sibling}function ev(n){var i=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,d=i.attributes;d.length;)i.removeAttributeNode(d[0]);en(i,u,o),i[Nt]=n,i[Ft]=o}catch(m){Ze(n,n.return,m)}}var ls=!1,Mt=!1,em=!1,tv=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function K1(n,i){if(n=n.containerInfo,wm=fh,n=fy(n),Gd(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var d=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var v=0,T=-1,O=-1,H=0,X=0,ne=n,F=null;t:for(;;){for(var Q;ne!==o||d!==0&&ne.nodeType!==3||(T=v+d),ne!==m||u!==0&&ne.nodeType!==3||(O=v+u),ne.nodeType===3&&(v+=ne.nodeValue.length),(Q=ne.firstChild)!==null;)F=ne,ne=Q;for(;;){if(ne===n)break t;if(F===o&&++H===d&&(T=v),F===m&&++X===u&&(O=v),(Q=ne.nextSibling)!==null)break;ne=F,F=ne.parentNode}ne=Q}o=T===-1||O===-1?null:{start:T,end:O}}else o=null}o=o||{start:0,end:0}}else o=null;for(Em={focusedElem:n,selectionRange:o},fh=!1,Kt=i;Kt!==null;)if(i=Kt,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Kt=n;else for(;Kt!==null;){switch(i=Kt,m=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)d=n[o],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=i,d=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var fe=ea(o.type,d);n=u.getSnapshotBeforeUpdate(fe,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(we){Ze(o,o.return,we)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,o=n.nodeType,o===9)Am(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Am(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,Kt=n;break}Kt=i.return}}function nv(n,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:cs(n,o),u&4&&Ul(5,o);break;case 1:if(cs(n,o),u&4)if(n=o.stateNode,i===null)try{n.componentDidMount()}catch(v){Ze(o,o.return,v)}else{var d=ea(o.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(d,i,n.__reactInternalSnapshotBeforeUpdate)}catch(v){Ze(o,o.return,v)}}u&64&&X_(o),u&512&&Ll(o,o.return);break;case 3:if(cs(n,o),u&64&&(n=o.updateQueue,n!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{zy(n,i)}catch(v){Ze(o,o.return,v)}}break;case 27:i===null&&u&4&&ev(o);case 26:case 5:cs(n,o),i===null&&u&4&&W_(o),u&512&&Ll(o,o.return);break;case 12:cs(n,o);break;case 31:cs(n,o),u&4&&iv(n,o);break;case 13:cs(n,o),u&4&&av(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=nA.bind(null,o),EA(n,o))));break;case 22:if(u=o.memoizedState!==null||ls,!u){i=i!==null&&i.memoizedState!==null||Mt,d=ls;var m=Mt;ls=u,(Mt=i)&&!m?hs(n,o,(o.subtreeFlags&8772)!==0):cs(n,o),ls=d,Mt=m}break;case 30:break;default:cs(n,o)}}function rv(n){var i=n.alternate;i!==null&&(n.alternate=null,rv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&xa(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var pt=null,vn=!1;function us(n,i,o){for(o=o.child;o!==null;)sv(n,i,o),o=o.sibling}function sv(n,i,o){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(er,o)}catch{}switch(o.tag){case 26:Mt||Lr(o,i),us(n,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Mt||Lr(o,i);var u=pt,d=vn;ei(o.type)&&(pt=o.stateNode,vn=!1),us(n,i,o),Ql(o.stateNode),pt=u,vn=d;break;case 5:Mt||Lr(o,i);case 6:if(u=pt,d=vn,pt=null,us(n,i,o),pt=u,vn=d,pt!==null)if(vn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(o.stateNode)}catch(m){Ze(o,i,m)}else try{pt.removeChild(o.stateNode)}catch(m){Ze(o,i,m)}break;case 18:pt!==null&&(vn?(n=pt,Xv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),co(n)):Xv(pt,o.stateNode));break;case 4:u=pt,d=vn,pt=o.stateNode.containerInfo,vn=!0,us(n,i,o),pt=u,vn=d;break;case 0:case 11:case 14:case 15:Ks(2,o,i),Mt||Ks(4,o,i),us(n,i,o);break;case 1:Mt||(Lr(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&J_(o,i,u)),us(n,i,o);break;case 21:us(n,i,o);break;case 22:Mt=(u=Mt)||o.memoizedState!==null,us(n,i,o),Mt=u;break;default:us(n,i,o)}}function iv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{co(n)}catch(o){Ze(i,i.return,o)}}}function av(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{co(n)}catch(o){Ze(i,i.return,o)}}function Q1(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new tv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new tv),i;default:throw Error(s(435,n.tag))}}function Kc(n,i){var o=Q1(n);i.forEach(function(u){if(!o.has(u)){o.add(u);var d=rA.bind(null,n,u);u.then(d,d)}})}function bn(n,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var d=o[u],m=n,v=i,T=v;e:for(;T!==null;){switch(T.tag){case 27:if(ei(T.type)){pt=T.stateNode,vn=!1;break e}break;case 5:pt=T.stateNode,vn=!1;break e;case 3:case 4:pt=T.stateNode.containerInfo,vn=!0;break e}T=T.return}if(pt===null)throw Error(s(160));sv(m,v,d),pt=null,vn=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)ov(i,n),i=i.sibling}var cr=null;function ov(n,i){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:bn(i,n),wn(n),u&4&&(Ks(3,n,n.return),Ul(3,n),Ks(5,n,n.return));break;case 1:bn(i,n),wn(n),u&512&&(Mt||o===null||Lr(o,o.return)),u&64&&ls&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var d=cr;if(bn(i,n),wn(n),u&512&&(Mt||o===null||Lr(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,d=d.ownerDocument||d;t:switch(u){case"title":m=d.getElementsByTagName("title")[0],(!m||m[Ar]||m[Nt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(u),d.head.insertBefore(m,d.querySelector("head > title"))),en(m,u,o),m[Nt]=n,Ot(m),u=m;break e;case"link":var v=o0("link","href",d).get(u+(o.href||""));if(v){for(var T=0;T<v.length;T++)if(m=v[T],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(T,1);break t}}m=d.createElement(u),en(m,u,o),d.head.appendChild(m);break;case"meta":if(v=o0("meta","content",d).get(u+(o.content||""))){for(T=0;T<v.length;T++)if(m=v[T],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(T,1);break t}}m=d.createElement(u),en(m,u,o),d.head.appendChild(m);break;default:throw Error(s(468,u))}m[Nt]=n,Ot(m),u=m}n.stateNode=u}else l0(d,n.type,n.stateNode);else n.stateNode=a0(d,u,n.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?l0(d,n.type,n.stateNode):a0(d,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Jf(n,n.memoizedProps,o.memoizedProps)}break;case 27:bn(i,n),wn(n),u&512&&(Mt||o===null||Lr(o,o.return)),o!==null&&u&4&&Jf(n,n.memoizedProps,o.memoizedProps);break;case 5:if(bn(i,n),wn(n),u&512&&(Mt||o===null||Lr(o,o.return)),n.flags&32){d=n.stateNode;try{_n(d,"")}catch(fe){Ze(n,n.return,fe)}}u&4&&n.stateNode!=null&&(d=n.memoizedProps,Jf(n,d,o!==null?o.memoizedProps:d)),u&1024&&(em=!0);break;case 6:if(bn(i,n),wn(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(fe){Ze(n,n.return,fe)}}break;case 3:if(uh=null,d=cr,cr=oh(i.containerInfo),bn(i,n),cr=d,wn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{co(i.containerInfo)}catch(fe){Ze(n,n.return,fe)}em&&(em=!1,lv(n));break;case 4:u=cr,cr=oh(n.stateNode.containerInfo),bn(i,n),wn(n),cr=u;break;case 12:bn(i,n),wn(n);break;case 31:bn(i,n),wn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Kc(n,u)));break;case 13:bn(i,n),wn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Yc=mn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Kc(n,u)));break;case 22:d=n.memoizedState!==null;var O=o!==null&&o.memoizedState!==null,H=ls,X=Mt;if(ls=H||d,Mt=X||O,bn(i,n),Mt=X,ls=H,wn(n),u&8192)e:for(i=n.stateNode,i._visibility=d?i._visibility&-2:i._visibility|1,d&&(o===null||O||ls||Mt||ta(n)),o=null,i=n;;){if(i.tag===5||i.tag===26){if(o===null){O=o=i;try{if(m=O.stateNode,d)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=O.stateNode;var ne=O.memoizedProps.style,F=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;T.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(fe){Ze(O,O.return,fe)}}}else if(i.tag===6){if(o===null){O=i;try{O.stateNode.nodeValue=d?"":O.memoizedProps}catch(fe){Ze(O,O.return,fe)}}}else if(i.tag===18){if(o===null){O=i;try{var Q=O.stateNode;d?Jv(Q,!0):Jv(O.stateNode,!1)}catch(fe){Ze(O,O.return,fe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Kc(n,o))));break;case 19:bn(i,n),wn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Kc(n,u)));break;case 30:break;case 21:break;default:bn(i,n),wn(n)}}function wn(n){var i=n.flags;if(i&2){try{for(var o,u=n.return;u!==null;){if(Z_(u)){o=u;break}u=u.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var d=o.stateNode,m=Wf(n);Gc(n,m,d);break;case 5:var v=o.stateNode;o.flags&32&&(_n(v,""),o.flags&=-33);var T=Wf(n);Gc(n,T,v);break;case 3:case 4:var O=o.stateNode.containerInfo,H=Wf(n);Zf(n,H,O);break;default:throw Error(s(161))}}catch(X){Ze(n,n.return,X)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function lv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;lv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function cs(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)nv(n,i.alternate,i),i=i.sibling}function ta(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Ks(4,i,i.return),ta(i);break;case 1:Lr(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&J_(i,i.return,o),ta(i);break;case 27:Ql(i.stateNode);case 26:case 5:Lr(i,i.return),ta(i);break;case 22:i.memoizedState===null&&ta(i);break;case 30:ta(i);break;default:ta(i)}n=n.sibling}}function hs(n,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,d=n,m=i,v=m.flags;switch(m.tag){case 0:case 11:case 15:hs(d,m,o),Ul(4,m);break;case 1:if(hs(d,m,o),u=m,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(H){Ze(u,u.return,H)}if(u=m,d=u.updateQueue,d!==null){var T=u.stateNode;try{var O=d.shared.hiddenCallbacks;if(O!==null)for(d.shared.hiddenCallbacks=null,d=0;d<O.length;d++)Ly(O[d],T)}catch(H){Ze(u,u.return,H)}}o&&v&64&&X_(m),Ll(m,m.return);break;case 27:ev(m);case 26:case 5:hs(d,m,o),o&&u===null&&v&4&&W_(m),Ll(m,m.return);break;case 12:hs(d,m,o);break;case 31:hs(d,m,o),o&&v&4&&iv(d,m);break;case 13:hs(d,m,o),o&&v&4&&av(d,m);break;case 22:m.memoizedState===null&&hs(d,m,o),Ll(m,m.return);break;case 30:break;default:hs(d,m,o)}i=i.sibling}}function tm(n,i){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Al(o))}function nm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Al(n))}function hr(n,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)uv(n,i,o,u),i=i.sibling}function uv(n,i,o,u){var d=i.flags;switch(i.tag){case 0:case 11:case 15:hr(n,i,o,u),d&2048&&Ul(9,i);break;case 1:hr(n,i,o,u);break;case 3:hr(n,i,o,u),d&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Al(n)));break;case 12:if(d&2048){hr(n,i,o,u),n=i.stateNode;try{var m=i.memoizedProps,v=m.id,T=m.onPostCommit;typeof T=="function"&&T(v,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(O){Ze(i,i.return,O)}}else hr(n,i,o,u);break;case 31:hr(n,i,o,u);break;case 13:hr(n,i,o,u);break;case 23:break;case 22:m=i.stateNode,v=i.alternate,i.memoizedState!==null?m._visibility&2?hr(n,i,o,u):zl(n,i):m._visibility&2?hr(n,i,o,u):(m._visibility|=2,Za(n,i,o,u,(i.subtreeFlags&10256)!==0||!1)),d&2048&&tm(v,i);break;case 24:hr(n,i,o,u),d&2048&&nm(i.alternate,i);break;default:hr(n,i,o,u)}}function Za(n,i,o,u,d){for(d=d&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=n,v=i,T=o,O=u,H=v.flags;switch(v.tag){case 0:case 11:case 15:Za(m,v,T,O,d),Ul(8,v);break;case 23:break;case 22:var X=v.stateNode;v.memoizedState!==null?X._visibility&2?Za(m,v,T,O,d):zl(m,v):(X._visibility|=2,Za(m,v,T,O,d)),d&&H&2048&&tm(v.alternate,v);break;case 24:Za(m,v,T,O,d),d&&H&2048&&nm(v.alternate,v);break;default:Za(m,v,T,O,d)}i=i.sibling}}function zl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=n,u=i,d=u.flags;switch(u.tag){case 22:zl(o,u),d&2048&&tm(u.alternate,u);break;case 24:zl(o,u),d&2048&&nm(u.alternate,u);break;default:zl(o,u)}i=i.sibling}}var Bl=8192;function eo(n,i,o){if(n.subtreeFlags&Bl)for(n=n.child;n!==null;)cv(n,i,o),n=n.sibling}function cv(n,i,o){switch(n.tag){case 26:eo(n,i,o),n.flags&Bl&&n.memoizedState!==null&&DA(o,cr,n.memoizedState,n.memoizedProps);break;case 5:eo(n,i,o);break;case 3:case 4:var u=cr;cr=oh(n.stateNode.containerInfo),eo(n,i,o),cr=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Bl,Bl=16777216,eo(n,i,o),Bl=u):eo(n,i,o));break;default:eo(n,i,o)}}function hv(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function ql(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Kt=u,fv(u,n)}hv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)dv(n),n=n.sibling}function dv(n){switch(n.tag){case 0:case 11:case 15:ql(n),n.flags&2048&&Ks(9,n,n.return);break;case 3:ql(n);break;case 12:ql(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,Qc(n)):ql(n);break;default:ql(n)}}function Qc(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Kt=u,fv(u,n)}hv(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Ks(8,i,i.return),Qc(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Qc(i));break;default:Qc(i)}n=n.sibling}}function fv(n,i){for(;Kt!==null;){var o=Kt;switch(o.tag){case 0:case 11:case 15:Ks(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Al(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Kt=u;else e:for(o=n;Kt!==null;){u=Kt;var d=u.sibling,m=u.return;if(rv(u),u===o){Kt=null;break e}if(d!==null){d.return=m,Kt=d;break e}Kt=m}}}var Y1={getCacheForType:function(n){var i=Wt(jt),o=i.data.get(n);return o===void 0&&(o=n(),i.data.set(n,o)),o},cacheSignal:function(){return Wt(jt).controller.signal}},X1=typeof WeakMap=="function"?WeakMap:Map,Ye=0,st=null,Me=null,Ue=0,We=0,kn=null,Qs=!1,to=!1,rm=!1,ds=0,Et=0,Ys=0,na=0,sm=0,jn=0,no=0,Hl=null,En=null,im=!1,Yc=0,mv=0,Xc=1/0,Jc=null,Xs=null,Bt=0,Js=null,ro=null,fs=0,am=0,om=null,gv=null,$l=0,lm=null;function Dn(){return(Ye&2)!==0&&Ue!==0?Ue&-Ue:Y.T!==null?mm():Wu()}function pv(){if(jn===0)if((Ue&536870912)===0||He){var n=Ii;Ii<<=1,(Ii&3932160)===0&&(Ii=262144),jn=n}else jn=536870912;return n=Nn.current,n!==null&&(n.flags|=32),jn}function Tn(n,i,o){(n===st&&(We===2||We===9)||n.cancelPendingCommit!==null)&&(so(n,0),Ws(n,Ue,jn,!1)),Ni(n,o),((Ye&2)===0||n!==st)&&(n===st&&((Ye&2)===0&&(na|=o),Et===4&&Ws(n,Ue,jn,!1)),zr(n))}function yv(n,i,o){if((Ye&6)!==0)throw Error(s(327));var u=!o&&(i&127)===0&&(i&n.expiredLanes)===0||tr(n,i),d=u?Z1(n,i):cm(n,i,!0),m=u;do{if(d===0){to&&!u&&Ws(n,i,0,!1);break}else{if(o=n.current.alternate,m&&!J1(o)){d=cm(n,i,!1),m=!1;continue}if(d===2){if(m=i,n.errorRecoveryDisabledLanes&m)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var T=n;d=Hl;var O=T.current.memoizedState.isDehydrated;if(O&&(so(T,v).flags|=256),v=cm(T,v,!1),v!==2){if(rm&&!O){T.errorRecoveryDisabledLanes|=m,na|=m,d=4;break e}m=En,En=d,m!==null&&(En===null?En=m:En.push.apply(En,m))}d=v}if(m=!1,d!==2)continue}}if(d===1){so(n,0),Ws(n,i,0,!0);break}e:{switch(u=n,m=d,m){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Ws(u,i,jn,!Qs);break e;case 2:En=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(d=Yc+300-mn(),10<d)){if(Ws(u,i,jn,!Qs),Er(u,0,!0)!==0)break e;fs=i,u.timeoutHandle=Qv(_v.bind(null,u,o,En,Jc,im,i,jn,na,no,Qs,m,"Throttled",-0,0),d);break e}_v(u,o,En,Jc,im,i,jn,na,no,Qs,m,null,-0,0)}}break}while(!0);zr(n)}function _v(n,i,o,u,d,m,v,T,O,H,X,ne,F,Q){if(n.timeoutHandle=-1,ne=i.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:sr},cv(i,m,ne);var fe=(m&62914560)===m?Yc-mn():(m&4194048)===m?mv-mn():0;if(fe=PA(ne,fe),fe!==null){fs=m,n.cancelPendingCommit=fe(xv.bind(null,n,i,m,o,u,d,v,T,O,X,ne,null,F,Q)),Ws(n,m,v,!H);return}}xv(n,i,m,o,u,d,v,T,O)}function J1(n){for(var i=n;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var d=o[u],m=d.getSnapshot;d=d.value;try{if(!Cn(m(),d))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ws(n,i,o,u){i&=~sm,i&=~na,n.suspendedLanes|=i,n.pingedLanes&=~i,u&&(n.warmLanes|=i),u=n.expirationTimes;for(var d=i;0<d;){var m=31-St(d),v=1<<m;u[m]=-1,d&=~v}o!==0&&Oi(n,o,i)}function Wc(){return(Ye&6)===0?(Fl(0),!1):!0}function um(){if(Me!==null){if(We===0)var n=Me.return;else n=Me,ns=Ki=null,Af(n),Qa=null,Rl=0,n=Me;for(;n!==null;)Y_(n.alternate,n),n=n.return;Me=null}}function so(n,i){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,yA(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),fs=0,um(),st=n,Me=o=es(n.current,null),Ue=i,We=0,kn=null,Qs=!1,to=tr(n,i),rm=!1,no=jn=sm=na=Ys=Et=0,En=Hl=null,im=!1,(i&8)!==0&&(i|=i&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=i;0<u;){var d=31-St(u),m=1<<d;i|=n[d],u&=~m}return ds=i,vc(),o}function vv(n,i){Oe=null,Y.H=Pl,i===Ka||i===Rc?(i=Py(),We=3):i===ff?(i=Py(),We=4):We=i===Bf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,kn=i,Me===null&&(Et=1,Bc(n,Fn(i,n.current)))}function bv(){var n=Nn.current;return n===null?!0:(Ue&4194048)===Ue?Yn===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?n===Yn:!1}function wv(){var n=Y.H;return Y.H=Pl,n===null?Pl:n}function Ev(){var n=Y.A;return Y.A=Y1,n}function Zc(){Et=4,Qs||(Ue&4194048)!==Ue&&Nn.current!==null||(to=!0),(Ys&134217727)===0&&(na&134217727)===0||st===null||Ws(st,Ue,jn,!1)}function cm(n,i,o){var u=Ye;Ye|=2;var d=wv(),m=Ev();(st!==n||Ue!==i)&&(Jc=null,so(n,i)),i=!1;var v=Et;e:do try{if(We!==0&&Me!==null){var T=Me,O=kn;switch(We){case 8:um(),v=6;break e;case 3:case 2:case 9:case 6:Nn.current===null&&(i=!0);var H=We;if(We=0,kn=null,io(n,T,O,H),o&&to){v=0;break e}break;default:H=We,We=0,kn=null,io(n,T,O,H)}}W1(),v=Et;break}catch(X){vv(n,X)}while(!0);return i&&n.shellSuspendCounter++,ns=Ki=null,Ye=u,Y.H=d,Y.A=m,Me===null&&(st=null,Ue=0,vc()),v}function W1(){for(;Me!==null;)Tv(Me)}function Z1(n,i){var o=Ye;Ye|=2;var u=wv(),d=Ev();st!==n||Ue!==i?(Jc=null,Xc=mn()+500,so(n,i)):to=tr(n,i);e:do try{if(We!==0&&Me!==null){i=Me;var m=kn;t:switch(We){case 1:We=0,kn=null,io(n,i,m,1);break;case 2:case 9:if(jy(m)){We=0,kn=null,Sv(i);break}i=function(){We!==2&&We!==9||st!==n||(We=7),zr(n)},m.then(i,i);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:jy(m)?(We=0,kn=null,Sv(i)):(We=0,kn=null,io(n,i,m,7));break;case 5:var v=null;switch(Me.tag){case 26:v=Me.memoizedState;case 5:case 27:var T=Me;if(v?u0(v):T.stateNode.complete){We=0,kn=null;var O=T.sibling;if(O!==null)Me=O;else{var H=T.return;H!==null?(Me=H,eh(H)):Me=null}break t}}We=0,kn=null,io(n,i,m,5);break;case 6:We=0,kn=null,io(n,i,m,6);break;case 8:um(),Et=6;break e;default:throw Error(s(462))}}eA();break}catch(X){vv(n,X)}while(!0);return ns=Ki=null,Y.H=u,Y.A=d,Ye=o,Me!==null?0:(st=null,Ue=0,vc(),Et)}function eA(){for(;Me!==null&&!Ld();)Tv(Me)}function Tv(n){var i=K_(n.alternate,n,ds);n.memoizedProps=n.pendingProps,i===null?eh(n):Me=i}function Sv(n){var i=n,o=i.alternate;switch(i.tag){case 15:case 0:i=B_(o,i,i.pendingProps,i.type,void 0,Ue);break;case 11:i=B_(o,i,i.pendingProps,i.type.render,i.ref,Ue);break;case 5:Af(i);default:Y_(o,i),i=Me=Ey(i,ds),i=K_(o,i,ds)}n.memoizedProps=n.pendingProps,i===null?eh(n):Me=i}function io(n,i,o,u){ns=Ki=null,Af(i),Qa=null,Rl=0;var d=i.return;try{if(q1(n,d,i,o,Ue)){Et=1,Bc(n,Fn(o,n.current)),Me=null;return}}catch(m){if(d!==null)throw Me=d,m;Et=1,Bc(n,Fn(o,n.current)),Me=null;return}i.flags&32768?(He||u===1?n=!0:to||(Ue&536870912)!==0?n=!1:(Qs=n=!0,(u===2||u===9||u===3||u===6)&&(u=Nn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Av(i,n)):eh(i)}function eh(n){var i=n;do{if((i.flags&32768)!==0){Av(i,Qs);return}n=i.return;var o=F1(i.alternate,i,ds);if(o!==null){Me=o;return}if(i=i.sibling,i!==null){Me=i;return}Me=i=n}while(i!==null);Et===0&&(Et=5)}function Av(n,i){do{var o=G1(n.alternate,n);if(o!==null){o.flags&=32767,Me=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(n=n.sibling,n!==null)){Me=n;return}Me=n=o}while(n!==null);Et=6,Me=null}function xv(n,i,o,u,d,m,v,T,O){n.cancelPendingCommit=null;do th();while(Bt!==0);if((Ye&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(m=i.lanes|i.childLanes,m|=Jd,qd(n,o,m,v,T,O),n===st&&(Me=st=null,Ue=0),ro=i,Js=n,fs=o,am=m,om=d,gv=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,sA(Cs,function(){return Ov(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=Y.T,Y.T=null,d=ue.p,ue.p=2,v=Ye,Ye|=4;try{K1(n,i,o)}finally{Ye=v,ue.p=d,Y.T=u}}Bt=1,Rv(),Cv(),Iv()}}function Rv(){if(Bt===1){Bt=0;var n=Js,i=ro,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null;var u=ue.p;ue.p=2;var d=Ye;Ye|=4;try{ov(i,n);var m=Em,v=fy(n.containerInfo),T=m.focusedElem,O=m.selectionRange;if(v!==T&&T&&T.ownerDocument&&dy(T.ownerDocument.documentElement,T)){if(O!==null&&Gd(T)){var H=O.start,X=O.end;if(X===void 0&&(X=H),"selectionStart"in T)T.selectionStart=H,T.selectionEnd=Math.min(X,T.value.length);else{var ne=T.ownerDocument||document,F=ne&&ne.defaultView||window;if(F.getSelection){var Q=F.getSelection(),fe=T.textContent.length,we=Math.min(O.start,fe),rt=O.end===void 0?we:Math.min(O.end,fe);!Q.extend&&we>rt&&(v=rt,rt=we,we=v);var z=hy(T,we),M=hy(T,rt);if(z&&M&&(Q.rangeCount!==1||Q.anchorNode!==z.node||Q.anchorOffset!==z.offset||Q.focusNode!==M.node||Q.focusOffset!==M.offset)){var q=ne.createRange();q.setStart(z.node,z.offset),Q.removeAllRanges(),we>rt?(Q.addRange(q),Q.extend(M.node,M.offset)):(q.setEnd(M.node,M.offset),Q.addRange(q))}}}}for(ne=[],Q=T;Q=Q.parentNode;)Q.nodeType===1&&ne.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ne.length;T++){var W=ne[T];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}fh=!!wm,Em=wm=null}finally{Ye=d,ue.p=u,Y.T=o}}n.current=i,Bt=2}}function Cv(){if(Bt===2){Bt=0;var n=Js,i=ro,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=Y.T,Y.T=null;var u=ue.p;ue.p=2;var d=Ye;Ye|=4;try{nv(n,i.alternate,i)}finally{Ye=d,ue.p=u,Y.T=o}}Bt=3}}function Iv(){if(Bt===4||Bt===3){Bt=0,Fu();var n=Js,i=ro,o=fs,u=gv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Bt=5:(Bt=0,ro=Js=null,Nv(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(Xs=null),Xr(o),i=i.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(er,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=Y.T,d=ue.p,ue.p=2,Y.T=null;try{for(var m=n.onRecoverableError,v=0;v<u.length;v++){var T=u[v];m(T.value,{componentStack:T.stack})}}finally{Y.T=i,ue.p=d}}(fs&3)!==0&&th(),zr(n),d=n.pendingLanes,(o&261930)!==0&&(d&42)!==0?n===lm?$l++:($l=0,lm=n):$l=0,Fl(0)}}function Nv(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Al(i)))}function th(){return Rv(),Cv(),Iv(),Ov()}function Ov(){if(Bt!==5)return!1;var n=Js,i=am;am=0;var o=Xr(fs),u=Y.T,d=ue.p;try{ue.p=32>o?32:o,Y.T=null,o=om,om=null;var m=Js,v=fs;if(Bt=0,ro=Js=null,fs=0,(Ye&6)!==0)throw Error(s(331));var T=Ye;if(Ye|=4,dv(m.current),uv(m,m.current,v,o),Ye=T,Fl(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(er,m)}catch{}return!0}finally{ue.p=d,Y.T=u,Nv(n,i)}}function kv(n,i,o){i=Fn(o,i),i=zf(n.stateNode,i,2),n=$s(n,i,2),n!==null&&(Ni(n,2),zr(n))}function Ze(n,i,o){if(n.tag===3)kv(n,n,o);else for(;i!==null;){if(i.tag===3){kv(i,n,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Xs===null||!Xs.has(u))){n=Fn(o,n),o=j_(2),u=$s(i,o,2),u!==null&&(D_(o,u,i,n),Ni(u,2),zr(u));break}}i=i.return}}function hm(n,i,o){var u=n.pingCache;if(u===null){u=n.pingCache=new X1;var d=new Set;u.set(i,d)}else d=u.get(i),d===void 0&&(d=new Set,u.set(i,d));d.has(o)||(rm=!0,d.add(o),n=tA.bind(null,n,i,o),i.then(n,n))}function tA(n,i,o){var u=n.pingCache;u!==null&&u.delete(i),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,st===n&&(Ue&o)===o&&(Et===4||Et===3&&(Ue&62914560)===Ue&&300>mn()-Yc?(Ye&2)===0&&so(n,0):sm|=o,no===Ue&&(no=0)),zr(n)}function jv(n,i){i===0&&(i=Ju()),n=$i(n,i),n!==null&&(Ni(n,i),zr(n))}function nA(n){var i=n.memoizedState,o=0;i!==null&&(o=i.retryLane),jv(n,o)}function rA(n,i){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,d=n.memoizedState;d!==null&&(o=d.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(i),jv(n,o)}function sA(n,i){return ot(n,i)}var nh=null,ao=null,dm=!1,rh=!1,fm=!1,Zs=0;function zr(n){n!==ao&&n.next===null&&(ao===null?nh=ao=n:ao=ao.next=n),rh=!0,dm||(dm=!0,aA())}function Fl(n,i){if(!fm&&rh){fm=!0;do for(var o=!1,u=nh;u!==null;){if(n!==0){var d=u.pendingLanes;if(d===0)var m=0;else{var v=u.suspendedLanes,T=u.pingedLanes;m=(1<<31-St(42|n)+1)-1,m&=d&~(v&~T),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,Vv(u,m))}else m=Ue,m=Er(u,u===st?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||tr(u,m)||(o=!0,Vv(u,m));u=u.next}while(o);fm=!1}}function iA(){Dv()}function Dv(){rh=dm=!1;var n=0;Zs!==0&&pA()&&(n=Zs);for(var i=mn(),o=null,u=nh;u!==null;){var d=u.next,m=Pv(u,i);m===0?(u.next=null,o===null?nh=d:o.next=d,d===null&&(ao=o)):(o=u,(n!==0||(m&3)!==0)&&(rh=!0)),u=d}Bt!==0&&Bt!==5||Fl(n),Zs!==0&&(Zs=0)}function Pv(n,i){for(var o=n.suspendedLanes,u=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var v=31-St(m),T=1<<v,O=d[v];O===-1?((T&o)===0||(T&u)!==0)&&(d[v]=Bd(T,i)):O<=i&&(n.expiredLanes|=T),m&=~T}if(i=st,o=Ue,o=Er(n,n===i?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===i&&(We===2||We===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Rs(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||tr(n,o)){if(i=o&-o,i===n.callbackPriority)return i;switch(u!==null&&Rs(u),Xr(o)){case 2:case 8:o=tl;break;case 32:o=Cs;break;case 268435456:o=Gu;break;default:o=Cs}return u=Mv.bind(null,n),o=ot(o,u),n.callbackPriority=i,n.callbackNode=o,i}return u!==null&&u!==null&&Rs(u),n.callbackPriority=2,n.callbackNode=null,2}function Mv(n,i){if(Bt!==0&&Bt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(th()&&n.callbackNode!==o)return null;var u=Ue;return u=Er(n,n===st?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(yv(n,u,i),Pv(n,mn()),n.callbackNode!=null&&n.callbackNode===o?Mv.bind(null,n):null)}function Vv(n,i){if(th())return null;yv(n,i,!0)}function aA(){_A(function(){(Ye&6)!==0?ot(el,iA):Dv()})}function mm(){if(Zs===0){var n=Fa;n===0&&(n=br,br<<=1,(br&261888)===0&&(br=256)),Zs=n}return Zs}function Uv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Na(""+n)}function Lv(n,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,n.id&&o.setAttribute("form",n.id),i.parentNode.insertBefore(o,i),n=new FormData(n),o.parentNode.removeChild(o),n}function oA(n,i,o,u,d){if(i==="submit"&&o&&o.stateNode===d){var m=Uv((d[Ft]||null).action),v=u.submitter;v&&(i=(i=v[Ft]||null)?Uv(i.formAction):v.getAttribute("formAction"),i!==null&&(m=i,v=null));var T=new jr("action","action",null,u,d);n.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Zs!==0){var O=v?Lv(d,v):new FormData(d);Df(o,{pending:!0,data:O,method:d.method,action:m},null,O)}}else typeof m=="function"&&(T.preventDefault(),O=v?Lv(d,v):new FormData(d),Df(o,{pending:!0,data:O,method:d.method,action:m},m,O))},currentTarget:d}]})}}for(var gm=0;gm<Xd.length;gm++){var pm=Xd[gm],lA=pm.toLowerCase(),uA=pm[0].toUpperCase()+pm.slice(1);ur(lA,"on"+uA)}ur(py,"onAnimationEnd"),ur(yy,"onAnimationIteration"),ur(_y,"onAnimationStart"),ur("dblclick","onDoubleClick"),ur("focusin","onFocus"),ur("focusout","onBlur"),ur(A1,"onTransitionRun"),ur(x1,"onTransitionStart"),ur(R1,"onTransitionCancel"),ur(vy,"onTransitionEnd"),Ir("onMouseEnter",["mouseout","mouseover"]),Ir("onMouseLeave",["mouseout","mouseover"]),Ir("onPointerEnter",["pointerout","pointerover"]),Ir("onPointerLeave",["pointerout","pointerover"]),Cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Cr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gl));function zv(n,i){i=(i&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],d=u.event;u=u.listeners;e:{var m=void 0;if(i)for(var v=u.length-1;0<=v;v--){var T=u[v],O=T.instance,H=T.currentTarget;if(T=T.listener,O!==m&&d.isPropagationStopped())break e;m=T,d.currentTarget=H;try{m(d)}catch(X){_c(X)}d.currentTarget=null,m=O}else for(v=0;v<u.length;v++){if(T=u[v],O=T.instance,H=T.currentTarget,T=T.listener,O!==m&&d.isPropagationStopped())break e;m=T,d.currentTarget=H;try{m(d)}catch(X){_c(X)}d.currentTarget=null,m=O}}}}function Ve(n,i){var o=i[Aa];o===void 0&&(o=i[Aa]=new Set);var u=n+"__bubble";o.has(u)||(Bv(i,n,2,!1),o.add(u))}function ym(n,i,o){var u=0;i&&(u|=4),Bv(o,n,u,i)}var sh="_reactListening"+Math.random().toString(36).slice(2);function _m(n){if(!n[sh]){n[sh]=!0,sl.forEach(function(o){o!=="selectionchange"&&(cA.has(o)||ym(o,!1,n),ym(o,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[sh]||(i[sh]=!0,ym("selectionchange",!1,i))}}function Bv(n,i,o,u){switch(p0(i)){case 2:var d=UA;break;case 8:d=LA;break;default:d=jm}o=d.bind(null,i,o,n),d=void 0,!Mi||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),u?d!==void 0?n.addEventListener(i,o,{capture:!0,passive:d}):n.addEventListener(i,o,!0):d!==void 0?n.addEventListener(i,o,{passive:d}):n.addEventListener(i,o,!1)}function vm(n,i,o,u,d){var m=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var T=u.stateNode.containerInfo;if(T===d)break;if(v===4)for(v=u.return;v!==null;){var O=v.tag;if((O===3||O===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;T!==null;){if(v=xr(T),v===null)return;if(O=v.tag,O===5||O===6||O===26||O===27){u=m=v;continue e}T=T.parentNode}}u=u.return}Ds(function(){var H=m,X=Bn(o),ne=[];e:{var F=by.get(n);if(F!==void 0){var Q=jr,fe=n;switch(n){case"keypress":if(Ui(o)===0)break e;case"keydown":case"keyup":Q=gc;break;case"focusin":fe="focus",Q=zi;break;case"focusout":fe="blur",Q=zi;break;case"beforeblur":case"afterblur":Q=zi;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=yl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=ac;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=y;break;case py:case yy:case _y:Q=lc;break;case vy:Q=x;break;case"scroll":case"scrollend":Q=pl;break;case"wheel":Q=K;break;case"copy":case"cut":case"paste":Q=uc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Zr;break;case"toggle":case"beforetoggle":Q=Ne}var we=(i&4)!==0,rt=!we&&(n==="scroll"||n==="scrollend"),z=we?F!==null?F+"Capture":null:F;we=[];for(var M=H,q;M!==null;){var W=M;if(q=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||q===null||z===null||(W=ir(M,z),W!=null&&we.push(Kl(M,W,q))),rt)break;M=M.return}0<we.length&&(F=new Q(F,fe,null,o,X),ne.push({event:F,listeners:we}))}}if((i&7)===0){e:{if(F=n==="mouseover"||n==="pointerover",Q=n==="mouseout"||n==="pointerout",F&&o!==fl&&(fe=o.relatedTarget||o.fromElement)&&(xr(fe)||fe[Sr]))break e;if((Q||F)&&(F=X.window===X?X:(F=X.ownerDocument)?F.defaultView||F.parentWindow:window,Q?(fe=o.relatedTarget||o.toElement,Q=H,fe=fe?xr(fe):null,fe!==null&&(rt=l(fe),we=fe.tag,fe!==rt||we!==5&&we!==27&&we!==6)&&(fe=null)):(Q=null,fe=H),Q!==fe)){if(we=yl,W="onMouseLeave",z="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(we=Zr,W="onPointerLeave",z="onPointerEnter",M="pointer"),rt=Q==null?F:xn(Q),q=fe==null?F:xn(fe),F=new we(W,M+"leave",Q,o,X),F.target=rt,F.relatedTarget=q,W=null,xr(X)===H&&(we=new we(z,M+"enter",fe,o,X),we.target=q,we.relatedTarget=rt,W=we),rt=W,Q&&fe)t:{for(we=hA,z=Q,M=fe,q=0,W=z;W;W=we(W))q++;W=0;for(var ve=M;ve;ve=we(ve))W++;for(;0<q-W;)z=we(z),q--;for(;0<W-q;)M=we(M),W--;for(;q--;){if(z===M||M!==null&&z===M.alternate){we=z;break t}z=we(z),M=we(M)}we=null}else we=null;Q!==null&&qv(ne,F,Q,we,!1),fe!==null&&rt!==null&&qv(ne,rt,fe,we,!0)}}e:{if(F=H?xn(H):window,Q=F.nodeName&&F.nodeName.toLowerCase(),Q==="select"||Q==="input"&&F.type==="file")var Ge=iy;else if(ry(F))if(ay)Ge=E1;else{Ge=b1;var ge=v1}else Q=F.nodeName,!Q||Q.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?H&&Ia(H.elementType)&&(Ge=iy):Ge=w1;if(Ge&&(Ge=Ge(n,H))){sy(ne,Ge,o,X);break e}ge&&ge(n,F,H),n==="focusout"&&H&&F.type==="number"&&H.memoizedProps.value!=null&&cl(F,"number",F.value)}switch(ge=H?xn(H):window,n){case"focusin":(ry(ge)||ge.contentEditable==="true")&&(Va=ge,Kd=H,El=null);break;case"focusout":El=Kd=Va=null;break;case"mousedown":Qd=!0;break;case"contextmenu":case"mouseup":case"dragend":Qd=!1,my(ne,o,X);break;case"selectionchange":if(S1)break;case"keydown":case"keyup":my(ne,o,X)}var je;if(Qe)e:{switch(n){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else Ma?Bi(n,o)&&(Le="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Le="onCompositionStart");Le&&(Mr&&o.locale!=="ko"&&(Ma||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&Ma&&(je=gl()):(kr=X,ml="value"in kr?kr.value:kr.textContent,Ma=!0)),ge=ih(H,Le),0<ge.length&&(Le=new Pr(Le,n,null,o,X),ne.push({event:Le,listeners:ge}),je?Le.data=je:(je=Pa(o),je!==null&&(Le.data=je)))),(je=Hn?g1(n,o):p1(n,o))&&(Le=ih(H,"onBeforeInput"),0<Le.length&&(ge=new Pr("onBeforeInput","beforeinput",null,o,X),ne.push({event:ge,listeners:Le}),ge.data=je)),oA(ne,n,H,o,X)}zv(ne,i)})}function Kl(n,i,o){return{instance:n,listener:i,currentTarget:o}}function ih(n,i){for(var o=i+"Capture",u=[];n!==null;){var d=n,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=ir(n,o),d!=null&&u.unshift(Kl(n,d,m)),d=ir(n,i),d!=null&&u.push(Kl(n,d,m))),n.tag===3)return u;n=n.return}return[]}function hA(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function qv(n,i,o,u,d){for(var m=i._reactName,v=[];o!==null&&o!==u;){var T=o,O=T.alternate,H=T.stateNode;if(T=T.tag,O!==null&&O===u)break;T!==5&&T!==26&&T!==27||H===null||(O=H,d?(H=ir(o,m),H!=null&&v.unshift(Kl(o,H,O))):d||(H=ir(o,m),H!=null&&v.push(Kl(o,H,O)))),o=o.return}v.length!==0&&n.push({event:i,listeners:v})}var dA=/\r\n?/g,fA=/\u0000|\uFFFD/g;function Hv(n){return(typeof n=="string"?n:""+n).replace(dA,`
`).replace(fA,"")}function $v(n,i){return i=Hv(i),Hv(n)===i}function nt(n,i,o,u,d,m){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||_n(n,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&_n(n,""+u);break;case"className":Rn(n,"class",u);break;case"tabIndex":Rn(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Rn(n,o,u);break;case"style":dl(n,u,m);break;case"data":if(i!=="object"){Rn(n,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Na(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(i!=="input"&&nt(n,i,"name",d.name,d,null),nt(n,i,"formEncType",d.formEncType,d,null),nt(n,i,"formMethod",d.formMethod,d,null),nt(n,i,"formTarget",d.formTarget,d,null)):(nt(n,i,"encType",d.encType,d,null),nt(n,i,"method",d.method,d,null),nt(n,i,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Na(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=sr);break;case"onScroll":u!=null&&Ve("scroll",n);break;case"onScrollEnd":u!=null&&Ve("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Na(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Ve("beforetoggle",n),Ve("toggle",n),Ra(n,"popover",u);break;case"xlinkActuate":kt(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":kt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":kt(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":kt(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":kt(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":kt(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":kt(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":kt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":kt(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Ra(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=ic.get(o)||o,Ra(n,o,u))}}function bm(n,i,o,u,d,m){switch(o){case"style":dl(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(s(60));n.innerHTML=o}}break;case"children":typeof u=="string"?_n(n,u):(typeof u=="number"||typeof u=="bigint")&&_n(n,""+u);break;case"onScroll":u!=null&&Ve("scroll",n);break;case"onScrollEnd":u!=null&&Ve("scrollend",n);break;case"onClick":u!=null&&(n.onclick=sr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!il.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),i=o.slice(2,d?o.length-7:void 0),m=n[Ft]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(i,m,d),typeof u=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(i,u,d);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Ra(n,o,u)}}}function en(n,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",n),Ve("load",n);var u=!1,d=!1,m;for(m in o)if(o.hasOwnProperty(m)){var v=o[m];if(v!=null)switch(m){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:nt(n,i,m,v,o,null)}}d&&nt(n,i,"srcSet",o.srcSet,o,null),u&&nt(n,i,"src",o.src,o,null);return;case"input":Ve("invalid",n);var T=m=v=d=null,O=null,H=null;for(u in o)if(o.hasOwnProperty(u)){var X=o[u];if(X!=null)switch(u){case"name":d=X;break;case"type":v=X;break;case"checked":O=X;break;case"defaultChecked":H=X;break;case"value":m=X;break;case"defaultValue":T=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,i));break;default:nt(n,i,u,X,o,null)}}nc(n,m,T,O,H,v,d,!1);return;case"select":Ve("invalid",n),u=v=m=null;for(d in o)if(o.hasOwnProperty(d)&&(T=o[d],T!=null))switch(d){case"value":m=T;break;case"defaultValue":v=T;break;case"multiple":u=T;default:nt(n,i,d,T,o,null)}i=m,o=v,n.multiple=!!u,i!=null?Ns(n,!!u,i,!1):o!=null&&Ns(n,!!u,o,!0);return;case"textarea":Ve("invalid",n),m=d=u=null;for(v in o)if(o.hasOwnProperty(v)&&(T=o[v],T!=null))switch(v){case"value":u=T;break;case"defaultValue":d=T;break;case"children":m=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:nt(n,i,v,T,o,null)}Os(n,u,d,m);return;case"option":for(O in o)if(o.hasOwnProperty(O)&&(u=o[O],u!=null))switch(O){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:nt(n,i,O,u,o,null)}return;case"dialog":Ve("beforetoggle",n),Ve("toggle",n),Ve("cancel",n),Ve("close",n);break;case"iframe":case"object":Ve("load",n);break;case"video":case"audio":for(u=0;u<Gl.length;u++)Ve(Gl[u],n);break;case"image":Ve("error",n),Ve("load",n);break;case"details":Ve("toggle",n);break;case"embed":case"source":case"link":Ve("error",n),Ve("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(u=o[H],u!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:nt(n,i,H,u,o,null)}return;default:if(Ia(i)){for(X in o)o.hasOwnProperty(X)&&(u=o[X],u!==void 0&&bm(n,i,X,u,o,void 0));return}}for(T in o)o.hasOwnProperty(T)&&(u=o[T],u!=null&&nt(n,i,T,u,o,null))}function mA(n,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,v=null,T=null,O=null,H=null,X=null;for(Q in o){var ne=o[Q];if(o.hasOwnProperty(Q)&&ne!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":O=ne;default:u.hasOwnProperty(Q)||nt(n,i,Q,null,u,ne)}}for(var F in u){var Q=u[F];if(ne=o[F],u.hasOwnProperty(F)&&(Q!=null||ne!=null))switch(F){case"type":m=Q;break;case"name":d=Q;break;case"checked":H=Q;break;case"defaultChecked":X=Q;break;case"value":v=Q;break;case"defaultValue":T=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:Q!==ne&&nt(n,i,F,Q,u,ne)}}Ca(n,v,T,O,H,X,m,d);return;case"select":Q=v=T=F=null;for(m in o)if(O=o[m],o.hasOwnProperty(m)&&O!=null)switch(m){case"value":break;case"multiple":Q=O;default:u.hasOwnProperty(m)||nt(n,i,m,null,u,O)}for(d in u)if(m=u[d],O=o[d],u.hasOwnProperty(d)&&(m!=null||O!=null))switch(d){case"value":F=m;break;case"defaultValue":T=m;break;case"multiple":v=m;default:m!==O&&nt(n,i,d,m,u,O)}i=T,o=v,u=Q,F!=null?Ns(n,!!o,F,!1):!!u!=!!o&&(i!=null?Ns(n,!!o,i,!0):Ns(n,!!o,o?[]:"",!1));return;case"textarea":Q=F=null;for(T in o)if(d=o[T],o.hasOwnProperty(T)&&d!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:nt(n,i,T,null,u,d)}for(v in u)if(d=u[v],m=o[v],u.hasOwnProperty(v)&&(d!=null||m!=null))switch(v){case"value":F=d;break;case"defaultValue":Q=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==m&&nt(n,i,v,d,u,m)}rc(n,F,Q);return;case"option":for(var fe in o)if(F=o[fe],o.hasOwnProperty(fe)&&F!=null&&!u.hasOwnProperty(fe))switch(fe){case"selected":n.selected=!1;break;default:nt(n,i,fe,null,u,F)}for(O in u)if(F=u[O],Q=o[O],u.hasOwnProperty(O)&&F!==Q&&(F!=null||Q!=null))switch(O){case"selected":n.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:nt(n,i,O,F,u,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in o)F=o[we],o.hasOwnProperty(we)&&F!=null&&!u.hasOwnProperty(we)&&nt(n,i,we,null,u,F);for(H in u)if(F=u[H],Q=o[H],u.hasOwnProperty(H)&&F!==Q&&(F!=null||Q!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,i));break;default:nt(n,i,H,F,u,Q)}return;default:if(Ia(i)){for(var rt in o)F=o[rt],o.hasOwnProperty(rt)&&F!==void 0&&!u.hasOwnProperty(rt)&&bm(n,i,rt,void 0,u,F);for(X in u)F=u[X],Q=o[X],!u.hasOwnProperty(X)||F===Q||F===void 0&&Q===void 0||bm(n,i,X,F,u,Q);return}}for(var z in o)F=o[z],o.hasOwnProperty(z)&&F!=null&&!u.hasOwnProperty(z)&&nt(n,i,z,null,u,F);for(ne in u)F=u[ne],Q=o[ne],!u.hasOwnProperty(ne)||F===Q||F==null&&Q==null||nt(n,i,ne,F,u,Q)}function Fv(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function gA(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var d=o[u],m=d.transferSize,v=d.initiatorType,T=d.duration;if(m&&T&&Fv(v)){for(v=0,T=d.responseEnd,u+=1;u<o.length;u++){var O=o[u],H=O.startTime;if(H>T)break;var X=O.transferSize,ne=O.initiatorType;X&&Fv(ne)&&(O=O.responseEnd,v+=X*(O<T?1:(T-H)/(O-H)))}if(--u,i+=8*(m+v)/(d.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var wm=null,Em=null;function ah(n){return n.nodeType===9?n:n.ownerDocument}function Gv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Kv(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Tm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Sm=null;function pA(){var n=window.event;return n&&n.type==="popstate"?n===Sm?!1:(Sm=n,!0):(Sm=null,!1)}var Qv=typeof setTimeout=="function"?setTimeout:void 0,yA=typeof clearTimeout=="function"?clearTimeout:void 0,Yv=typeof Promise=="function"?Promise:void 0,_A=typeof queueMicrotask=="function"?queueMicrotask:typeof Yv<"u"?function(n){return Yv.resolve(null).then(n).catch(vA)}:Qv;function vA(n){setTimeout(function(){throw n})}function ei(n){return n==="head"}function Xv(n,i){var o=i,u=0;do{var d=o.nextSibling;if(n.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(d),co(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Ql(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,Ql(o);for(var m=o.firstChild;m;){var v=m.nextSibling,T=m.nodeName;m[Ar]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=v}}else o==="body"&&Ql(n.ownerDocument.body);o=d}while(o);co(i)}function Jv(n,i){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function Am(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Am(o),xa(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function bA(n,i,o,u){for(;n.nodeType===1;){var d=o;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Ar])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Xn(n.nextSibling),n===null)break}return null}function wA(n,i,o){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Xn(n.nextSibling),n===null))return null;return n}function Wv(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Xn(n.nextSibling),n===null))return null;return n}function xm(n){return n.data==="$?"||n.data==="$~"}function Rm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function EA(n,i){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Xn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var Cm=null;function Zv(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(i===0)return Xn(n.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}n=n.nextSibling}return null}function e0(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return n;i--}else o!=="/$"&&o!=="/&"||i++}n=n.previousSibling}return null}function t0(n,i,o){switch(i=ah(o),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Ql(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);xa(n)}var Jn=new Map,n0=new Set;function oh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ms=ue.d;ue.d={f:TA,r:SA,D:AA,C:xA,L:RA,m:CA,X:NA,S:IA,M:OA};function TA(){var n=ms.f(),i=Wc();return n||i}function SA(n){var i=zn(n);i!==null&&i.tag===5&&i.type==="form"?v_(i):ms.r(n)}var oo=typeof document>"u"?null:document;function r0(n,i,o){var u=oo;if(u&&typeof i=="string"&&i){var d=yn(i);d='link[rel="'+n+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),n0.has(d)||(n0.add(d),n={rel:n,crossOrigin:o,href:i},u.querySelector(d)===null&&(i=u.createElement("link"),en(i,"link",n),Ot(i),u.head.appendChild(i)))}}function AA(n){ms.D(n),r0("dns-prefetch",n,null)}function xA(n,i){ms.C(n,i),r0("preconnect",n,i)}function RA(n,i,o){ms.L(n,i,o);var u=oo;if(u&&n&&i){var d='link[rel="preload"][as="'+yn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+yn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+yn(o.imageSizes)+'"]')):d+='[href="'+yn(n)+'"]';var m=d;switch(i){case"style":m=lo(n);break;case"script":m=uo(n)}Jn.has(m)||(n=E({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:n,as:i},o),Jn.set(m,n),u.querySelector(d)!==null||i==="style"&&u.querySelector(Yl(m))||i==="script"&&u.querySelector(Xl(m))||(i=u.createElement("link"),en(i,"link",n),Ot(i),u.head.appendChild(i)))}}function CA(n,i){ms.m(n,i);var o=oo;if(o&&n){var u=i&&typeof i.as=="string"?i.as:"script",d='link[rel="modulepreload"][as="'+yn(u)+'"][href="'+yn(n)+'"]',m=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=uo(n)}if(!Jn.has(m)&&(n=E({rel:"modulepreload",href:n},i),Jn.set(m,n),o.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Xl(m)))return}u=o.createElement("link"),en(u,"link",n),Ot(u),o.head.appendChild(u)}}}function IA(n,i,o){ms.S(n,i,o);var u=oo;if(u&&n){var d=Rr(u).hoistableStyles,m=lo(n);i=i||"default";var v=d.get(m);if(!v){var T={loading:0,preload:null};if(v=u.querySelector(Yl(m)))T.loading=5;else{n=E({rel:"stylesheet",href:n,"data-precedence":i},o),(o=Jn.get(m))&&Im(n,o);var O=v=u.createElement("link");Ot(O),en(O,"link",n),O._p=new Promise(function(H,X){O.onload=H,O.onerror=X}),O.addEventListener("load",function(){T.loading|=1}),O.addEventListener("error",function(){T.loading|=2}),T.loading|=4,lh(v,i,u)}v={type:"stylesheet",instance:v,count:1,state:T},d.set(m,v)}}}function NA(n,i){ms.X(n,i);var o=oo;if(o&&n){var u=Rr(o).hoistableScripts,d=uo(n),m=u.get(d);m||(m=o.querySelector(Xl(d)),m||(n=E({src:n,async:!0},i),(i=Jn.get(d))&&Nm(n,i),m=o.createElement("script"),Ot(m),en(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(d,m))}}function OA(n,i){ms.M(n,i);var o=oo;if(o&&n){var u=Rr(o).hoistableScripts,d=uo(n),m=u.get(d);m||(m=o.querySelector(Xl(d)),m||(n=E({src:n,async:!0,type:"module"},i),(i=Jn.get(d))&&Nm(n,i),m=o.createElement("script"),Ot(m),en(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(d,m))}}function s0(n,i,o,u){var d=(d=Re.current)?oh(d):null;if(!d)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=lo(o.href),o=Rr(d).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=lo(o.href);var m=Rr(d).hoistableStyles,v=m.get(n);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,v),(m=d.querySelector(Yl(n)))&&!m._p&&(v.instance=m,v.state.loading=5),Jn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Jn.set(n,o),m||kA(d,n,o,v.state))),i&&u===null)throw Error(s(528,""));return v}if(i&&u!==null)throw Error(s(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=uo(o),o=Rr(d).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function lo(n){return'href="'+yn(n)+'"'}function Yl(n){return'link[rel="stylesheet"]['+n+"]"}function i0(n){return E({},n,{"data-precedence":n.precedence,precedence:null})}function kA(n,i,o,u){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=n.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),en(i,"link",o),Ot(i),n.head.appendChild(i))}function uo(n){return'[src="'+yn(n)+'"]'}function Xl(n){return"script[async]"+n}function a0(n,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=n.querySelector('style[data-href~="'+yn(o.href)+'"]');if(u)return i.instance=u,Ot(u),u;var d=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Ot(u),en(u,"style",d),lh(u,o.precedence,n),i.instance=u;case"stylesheet":d=lo(o.href);var m=n.querySelector(Yl(d));if(m)return i.state.loading|=4,i.instance=m,Ot(m),m;u=i0(o),(d=Jn.get(d))&&Im(u,d),m=(n.ownerDocument||n).createElement("link"),Ot(m);var v=m;return v._p=new Promise(function(T,O){v.onload=T,v.onerror=O}),en(m,"link",u),i.state.loading|=4,lh(m,o.precedence,n),i.instance=m;case"script":return m=uo(o.src),(d=n.querySelector(Xl(m)))?(i.instance=d,Ot(d),d):(u=o,(d=Jn.get(m))&&(u=E({},o),Nm(u,d)),n=n.ownerDocument||n,d=n.createElement("script"),Ot(d),en(d,"link",u),n.head.appendChild(d),i.instance=d);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,lh(u,o.precedence,n));return i.instance}function lh(n,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,m=d,v=0;v<u.length;v++){var T=u[v];if(T.dataset.precedence===i)m=T;else if(m!==d)break}m?m.parentNode.insertBefore(n,m.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(n,i.firstChild))}function Im(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Nm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var uh=null;function o0(n,i,o){if(uh===null){var u=new Map,d=uh=new Map;d.set(o,u)}else d=uh,u=d.get(o),u||(u=new Map,d.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),d=0;d<o.length;d++){var m=o[d];if(!(m[Ar]||m[Nt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(i)||"";v=n+v;var T=u.get(v);T?T.push(m):u.set(v,[m])}}return u}function l0(n,i,o){n=n.ownerDocument||n,n.head.insertBefore(o,i==="title"?n.querySelector("head > title"):null)}function jA(n,i,o){if(o===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function u0(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function DA(n,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var d=lo(u.href),m=i.querySelector(Yl(d));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=ch.bind(n),i.then(n,n)),o.state.loading|=4,o.instance=m,Ot(m);return}m=i.ownerDocument||i,u=i0(u),(d=Jn.get(d))&&Im(u,d),m=m.createElement("link"),Ot(m);var v=m;v._p=new Promise(function(T,O){v.onload=T,v.onerror=O}),en(m,"link",u),o.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=ch.bind(n),i.addEventListener("load",o),i.addEventListener("error",o))}}var Om=0;function PA(n,i){return n.stylesheets&&n.count===0&&dh(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&dh(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+i);0<n.imgBytes&&Om===0&&(Om=62500*gA());var d=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&dh(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>Om?50:800)+i);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(d)}}:null}function ch(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)dh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var hh=null;function dh(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,hh=new Map,i.forEach(MA,n),hh=null,ch.call(n))}function MA(n,i){if(!(i.state.loading&4)){var o=hh.get(n);if(o)var u=o.get(null);else{o=new Map,hh.set(n,o);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var v=d[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),u=v)}u&&o.set(null,u)}d=i.instance,v=d.getAttribute("data-precedence"),m=o.get(v)||u,m===u&&o.set(null,d),o.set(v,d),this.count++,u=ch.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),m?m.parentNode.insertBefore(d,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),i.state.loading|=4}}var Jl={$$typeof:$,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function VA(n,i,o,u,d,m,v,T,O){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Tr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tr(0),this.hiddenUpdates=Tr(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function c0(n,i,o,u,d,m,v,T,O,H,X,ne){return n=new VA(n,i,o,v,O,H,X,ne,T),i=1,m===!0&&(i|=24),m=In(3,null,null,i),n.current=m,m.stateNode=n,i=cf(),i.refCount++,n.pooledCache=i,i.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:i},mf(m),n}function h0(n){return n?(n=za,n):za}function d0(n,i,o,u,d,m){d=h0(d),u.context===null?u.context=d:u.pendingContext=d,u=Hs(i),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=$s(n,u,i),o!==null&&(Tn(o,n,i),Il(o,n,i))}function f0(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<i?o:i}}function km(n,i){f0(n,i),(n=n.alternate)&&f0(n,i)}function m0(n){if(n.tag===13||n.tag===31){var i=$i(n,67108864);i!==null&&Tn(i,n,67108864),km(n,67108864)}}function g0(n){if(n.tag===13||n.tag===31){var i=Dn();i=ki(i);var o=$i(n,i);o!==null&&Tn(o,n,i),km(n,i)}}var fh=!0;function UA(n,i,o,u){var d=Y.T;Y.T=null;var m=ue.p;try{ue.p=2,jm(n,i,o,u)}finally{ue.p=m,Y.T=d}}function LA(n,i,o,u){var d=Y.T;Y.T=null;var m=ue.p;try{ue.p=8,jm(n,i,o,u)}finally{ue.p=m,Y.T=d}}function jm(n,i,o,u){if(fh){var d=Dm(u);if(d===null)vm(n,i,u,mh,o),y0(n,u);else if(BA(d,n,i,o,u))u.stopPropagation();else if(y0(n,u),i&4&&-1<zA.indexOf(n)){for(;d!==null;){var m=zn(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=wr(m.pendingLanes);if(v!==0){var T=m;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var O=1<<31-St(v);T.entanglements[1]|=O,v&=~O}zr(m),(Ye&6)===0&&(Xc=mn()+500,Fl(0))}}break;case 31:case 13:T=$i(m,2),T!==null&&Tn(T,m,2),Wc(),km(m,2)}if(m=Dm(u),m===null&&vm(n,i,u,mh,o),m===d)break;d=m}d!==null&&u.stopPropagation()}else vm(n,i,u,null,o)}}function Dm(n){return n=Bn(n),Pm(n)}var mh=null;function Pm(n){if(mh=null,n=xr(n),n!==null){var i=l(n);if(i===null)n=null;else{var o=i.tag;if(o===13){if(n=c(i),n!==null)return n;n=null}else if(o===31){if(n=f(i),n!==null)return n;n=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return mh=n,null}function p0(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ci()){case el:return 2;case tl:return 8;case Cs:case zd:return 32;case Gu:return 268435456;default:return 32}default:return 32}}var Mm=!1,ti=null,ni=null,ri=null,Wl=new Map,Zl=new Map,si=[],zA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function y0(n,i){switch(n){case"focusin":case"focusout":ti=null;break;case"dragenter":case"dragleave":ni=null;break;case"mouseover":case"mouseout":ri=null;break;case"pointerover":case"pointerout":Wl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zl.delete(i.pointerId)}}function eu(n,i,o,u,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[d]},i!==null&&(i=zn(i),i!==null&&m0(i)),n):(n.eventSystemFlags|=u,i=n.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),n)}function BA(n,i,o,u,d){switch(i){case"focusin":return ti=eu(ti,n,i,o,u,d),!0;case"dragenter":return ni=eu(ni,n,i,o,u,d),!0;case"mouseover":return ri=eu(ri,n,i,o,u,d),!0;case"pointerover":var m=d.pointerId;return Wl.set(m,eu(Wl.get(m)||null,n,i,o,u,d)),!0;case"gotpointercapture":return m=d.pointerId,Zl.set(m,eu(Zl.get(m)||null,n,i,o,u,d)),!0}return!1}function _0(n){var i=xr(n.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){n.blockedOn=i,nr(n.priority,function(){g0(o)});return}}else if(i===31){if(i=f(o),i!==null){n.blockedOn=i,nr(n.priority,function(){g0(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function gh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var o=Dm(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);fl=u,o.target.dispatchEvent(u),fl=null}else return i=zn(o),i!==null&&m0(i),n.blockedOn=o,!1;i.shift()}return!0}function v0(n,i,o){gh(n)&&o.delete(i)}function qA(){Mm=!1,ti!==null&&gh(ti)&&(ti=null),ni!==null&&gh(ni)&&(ni=null),ri!==null&&gh(ri)&&(ri=null),Wl.forEach(v0),Zl.forEach(v0)}function ph(n,i){n.blockedOn===i&&(n.blockedOn=null,Mm||(Mm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,qA)))}var yh=null;function b0(n){yh!==n&&(yh=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){yh===n&&(yh=null);for(var i=0;i<n.length;i+=3){var o=n[i],u=n[i+1],d=n[i+2];if(typeof u!="function"){if(Pm(u||o)===null)continue;break}var m=zn(o);m!==null&&(n.splice(i,3),i-=3,Df(m,{pending:!0,data:d,method:o.method,action:u},u,d))}}))}function co(n){function i(O){return ph(O,n)}ti!==null&&ph(ti,n),ni!==null&&ph(ni,n),ri!==null&&ph(ri,n),Wl.forEach(i),Zl.forEach(i);for(var o=0;o<si.length;o++){var u=si[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<si.length&&(o=si[0],o.blockedOn===null);)_0(o),o.blockedOn===null&&si.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var d=o[u],m=o[u+1],v=d[Ft]||null;if(typeof m=="function")v||b0(o);else if(v){var T=null;if(m&&m.hasAttribute("formAction")){if(d=m,v=m[Ft]||null)T=v.formAction;else if(Pm(d)!==null)continue}else T=v.action;typeof T=="function"?o[u+1]=T:(o.splice(u,3),u-=3),b0(o)}}}function w0(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return d=v})},focusReset:"manual",scroll:"manual"})}function i(){d!==null&&(d(),d=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,d=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),d!==null&&(d(),d=null)}}}function Vm(n){this._internalRoot=n}_h.prototype.render=Vm.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var o=i.current,u=Dn();d0(o,u,n,i,null,null)},_h.prototype.unmount=Vm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;d0(n.current,2,null,n,null,null),Wc(),i[Sr]=null}};function _h(n){this._internalRoot=n}_h.prototype.unstable_scheduleHydration=function(n){if(n){var i=Wu();n={blockedOn:null,target:n,priority:i};for(var o=0;o<si.length&&i!==0&&i<si[o].priority;o++);si.splice(o,0,n),o===0&&_0(n)}};var E0=e.version;if(E0!=="19.2.0")throw Error(s(527,E0,"19.2.0"));ue.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=p(i),n=n!==null?b(n):null,n=n===null?null:n.stateNode,n};var HA={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vh.isDisabled&&vh.supportsFiber)try{er=vh.inject(HA),Yt=vh}catch{}}return nu.createRoot=function(n,i){if(!a(n))throw Error(s(299));var o=!1,u="",d=I_,m=N_,v=O_;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=c0(n,1,!1,null,null,o,u,null,d,m,v,w0),n[Sr]=i.current,_m(n),new Vm(i)},nu.hydrateRoot=function(n,i,o){if(!a(n))throw Error(s(299));var u=!1,d="",m=I_,v=N_,T=O_,O=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.formState!==void 0&&(O=o.formState)),i=c0(n,1,!0,i,o??null,u,d,O,m,v,T,w0),i.context=h0(null),o=i.current,u=Dn(),u=ki(u),d=Hs(u),d.callback=null,$s(o,d,u),o=u,i.current.lanes=o,Ni(i,o),zr(i),n[Sr]=i.current,_m(n),new _h(i)},nu.version="19.2.0",nu}var k0;function nx(){if(k0)return zm.exports;k0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),zm.exports=tx(),zm.exports}var rx=nx();const sx=ep(rx);var dg=function(r,e){return dg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])},dg(r,e)};function zw(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");dg(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Gh=function(){return Gh=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++){t=arguments[s];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Gh.apply(this,arguments)};function qo(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(r);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(r,s[a])&&(t[s[a]]=r[s[a]]);return t}function Bw(r,e,t,s){var a=arguments.length,l=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(r,e,t,s);else for(var f=r.length-1;f>=0;f--)(c=r[f])&&(l=(a<3?c(l):a>3?c(e,t,l):c(e,t))||l);return a>3&&l&&Object.defineProperty(e,t,l),l}function qw(r,e){return function(t,s){e(t,s,r)}}function Hw(r,e,t,s,a,l){function c(G){if(G!==void 0&&typeof G!="function")throw new TypeError("Function expected");return G}for(var f=s.kind,g=f==="getter"?"get":f==="setter"?"set":"value",p=!e&&r?s.static?r:r.prototype:null,b=e||(p?Object.getOwnPropertyDescriptor(p,s.name):{}),E,A=!1,S=t.length-1;S>=0;S--){var k={};for(var j in s)k[j]=j==="access"?{}:s[j];for(var j in s.access)k.access[j]=s.access[j];k.addInitializer=function(G){if(A)throw new TypeError("Cannot add initializers after decoration has completed");l.push(c(G||null))};var P=(0,t[S])(f==="accessor"?{get:b.get,set:b.set}:b[g],k);if(f==="accessor"){if(P===void 0)continue;if(P===null||typeof P!="object")throw new TypeError("Object expected");(E=c(P.get))&&(b.get=E),(E=c(P.set))&&(b.set=E),(E=c(P.init))&&a.unshift(E)}else(E=c(P))&&(f==="field"?a.unshift(E):b[g]=E)}p&&Object.defineProperty(p,s.name,b),A=!0}function $w(r,e,t){for(var s=arguments.length>2,a=0;a<e.length;a++)t=s?e[a].call(r,t):e[a].call(r);return s?t:void 0}function Fw(r){return typeof r=="symbol"?r:"".concat(r)}function Gw(r,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function Kw(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function me(r,e,t,s){function a(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function f(b){try{p(s.next(b))}catch(E){c(E)}}function g(b){try{p(s.throw(b))}catch(E){c(E)}}function p(b){b.done?l(b.value):a(b.value).then(f,g)}p((s=s.apply(r,e||[])).next())})}function Qw(r,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,a,l,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=f(0),c.throw=f(1),c.return=f(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(p){return function(b){return g([p,b])}}function g(p){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(t=0)),t;)try{if(s=1,a&&(l=p[0]&2?a.return:p[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,p[1])).done)return l;switch(a=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,a=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){t.label=p[1];break}if(p[0]===6&&t.label<l[1]){t.label=l[1],l=p;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(p);break}l[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(r,t)}catch(b){p=[6,b],a=0}finally{s=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var pd=Object.create?(function(r,e,t,s){s===void 0&&(s=t);var a=Object.getOwnPropertyDescriptor(e,t);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(r,s,a)}):(function(r,e,t,s){s===void 0&&(s=t),r[s]=e[t]});function Yw(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&pd(e,r,t)}function Kh(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],s=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function np(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var s=t.call(r),a,l=[],c;try{for(;(e===void 0||e-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(c)throw c.error}}return l}function Xw(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(np(arguments[e]));return r}function Jw(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var s=Array(r),a=0,e=0;e<t;e++)for(var l=arguments[e],c=0,f=l.length;c<f;c++,a++)s[a]=l[c];return s}function Ww(r,e,t){if(t||arguments.length===2)for(var s=0,a=e.length,l;s<a;s++)(l||!(s in e))&&(l||(l=Array.prototype.slice.call(e,0,s)),l[s]=e[s]);return r.concat(l||Array.prototype.slice.call(e))}function Oo(r){return this instanceof Oo?(this.v=r,this):new Oo(r)}function Zw(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(r,e||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(S){return function(k){return Promise.resolve(k).then(S,E)}}function f(S,k){s[S]&&(a[S]=function(j){return new Promise(function(P,G){l.push([S,j,P,G])>1||g(S,j)})},k&&(a[S]=k(a[S])))}function g(S,k){try{p(s[S](k))}catch(j){A(l[0][3],j)}}function p(S){S.value instanceof Oo?Promise.resolve(S.value.v).then(b,E):A(l[0][2],S)}function b(S){g("next",S)}function E(S){g("throw",S)}function A(S,k){S(k),l.shift(),l.length&&g(l[0][0],l[0][1])}}function eE(r){var e,t;return e={},s("next"),s("throw",function(a){throw a}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(a,l){e[a]=r[a]?function(c){return(t=!t)?{value:Oo(r[a](c)),done:!1}:l?l(c):c}:l}}function tE(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof Kh=="function"?Kh(r):r[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=r[l]&&function(c){return new Promise(function(f,g){c=r[l](c),a(f,g,c.done,c.value)})}}function a(l,c,f,g){Promise.resolve(g).then(function(p){l({value:p,done:f})},c)}}function nE(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}var ix=Object.create?(function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}):function(r,e){r.default=e},fg=function(r){return fg=Object.getOwnPropertyNames||function(e){var t=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[t.length]=s);return t},fg(r)};function rE(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t=fg(r),s=0;s<t.length;s++)t[s]!=="default"&&pd(e,r,t[s]);return ix(e,r),e}function sE(r){return r&&r.__esModule?r:{default:r}}function iE(r,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(r):s?s.value:e.get(r)}function aE(r,e,t,s,a){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!a:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?a.call(r,t):a?a.value=t:e.set(r,t),t}function oE(r,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?e===r:r.has(e)}function lE(r,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,a;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose],t&&(a=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");a&&(s=function(){try{a.call(this)}catch(l){return Promise.reject(l)}}),r.stack.push({value:e,dispose:s,async:t})}else t&&r.stack.push({async:!0});return e}var ax=typeof SuppressedError=="function"?SuppressedError:function(r,e,t){var s=new Error(t);return s.name="SuppressedError",s.error=r,s.suppressed=e,s};function uE(r){function e(l){r.error=r.hasError?new ax(l,r.error,"An error was suppressed during disposal."):l,r.hasError=!0}var t,s=0;function a(){for(;t=r.stack.pop();)try{if(!t.async&&s===1)return s=0,r.stack.push(t),Promise.resolve().then(a);if(t.dispose){var l=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(l).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error}return a()}function cE(r,e){return typeof r=="string"&&/^\.\.?\//.test(r)?r.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,s,a,l,c){return s?e?".jsx":".js":a&&(!l||!c)?t:a+l+"."+c.toLowerCase()+"js"}):r}const ox={__extends:zw,__assign:Gh,__rest:qo,__decorate:Bw,__param:qw,__esDecorate:Hw,__runInitializers:$w,__propKey:Fw,__setFunctionName:Gw,__metadata:Kw,__awaiter:me,__generator:Qw,__createBinding:pd,__exportStar:Yw,__values:Kh,__read:np,__spread:Xw,__spreadArrays:Jw,__spreadArray:Ww,__await:Oo,__asyncGenerator:Zw,__asyncDelegator:eE,__asyncValues:tE,__makeTemplateObject:nE,__importStar:rE,__importDefault:sE,__classPrivateFieldGet:iE,__classPrivateFieldSet:aE,__classPrivateFieldIn:oE,__addDisposableResource:lE,__disposeResources:uE,__rewriteRelativeImportExtension:cE},lx=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:lE,get __assign(){return Gh},__asyncDelegator:eE,__asyncGenerator:Zw,__asyncValues:tE,__await:Oo,__awaiter:me,__classPrivateFieldGet:iE,__classPrivateFieldIn:oE,__classPrivateFieldSet:aE,__createBinding:pd,__decorate:Bw,__disposeResources:uE,__esDecorate:Hw,__exportStar:Yw,__extends:zw,__generator:Qw,__importDefault:sE,__importStar:rE,__makeTemplateObject:nE,__metadata:Kw,__param:qw,__propKey:Fw,__read:np,__rest:qo,__rewriteRelativeImportExtension:cE,__runInitializers:$w,__setFunctionName:Gw,__spread:Xw,__spreadArray:Ww,__spreadArrays:Jw,__values:Kh,default:ox},Symbol.toStringTag,{value:"Module"})),ux=r=>r?(...e)=>r(...e):(...e)=>fetch(...e);class rp extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class cx extends rp{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class j0 extends rp{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class D0 extends rp{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var mg;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(mg||(mg={}));class hx{constructor(e,{headers:t={},customFetch:s,region:a=mg.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=ux(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return me(this,arguments,void 0,function*(t,s={}){var a;let l,c;try{const{headers:f,method:g,body:p,signal:b,timeout:E}=s;let A={},{region:S}=s;S||(S=this.region);const k=new URL(`${this.url}/${t}`);S&&S!=="any"&&(A["x-region"]=S,k.searchParams.set("forceFunctionRegion",S));let j;p&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(A["Content-Type"]="application/octet-stream",j=p):typeof p=="string"?(A["Content-Type"]="text/plain",j=p):typeof FormData<"u"&&p instanceof FormData?j=p:(A["Content-Type"]="application/json",j=JSON.stringify(p)):j=p;let P=b;E&&(c=new AbortController,l=setTimeout(()=>c.abort(),E),b?(P=c.signal,b.addEventListener("abort",()=>c.abort())):P=c.signal);const G=yield this.fetch(k.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},A),this.headers),f),body:j,signal:P}).catch(Z=>{throw new cx(Z)}),J=G.headers.get("x-relay-error");if(J&&J==="true")throw new j0(G);if(!G.ok)throw new D0(G);let $=((a=G.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),se;return $==="application/json"?se=yield G.json():$==="application/octet-stream"||$==="application/pdf"?se=yield G.blob():$==="text/event-stream"?se=G:$==="multipart/form-data"?se=yield G.formData():se=yield G.text(),{data:se,error:null,response:G}}catch(f){return{data:null,error:f,response:f instanceof D0||f instanceof j0?f.context:void 0}}finally{l&&clearTimeout(l)}})}}var ln={};const Ho=GA(lx);var bh={},wh={},Eh={},Th={},Sh={},Ah={},P0;function hE(){if(P0)return Ah;P0=1,Object.defineProperty(Ah,"__esModule",{value:!0});class r extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Ah.default=r,Ah}var M0;function dE(){if(M0)return Sh;M0=1,Object.defineProperty(Sh,"__esModule",{value:!0});const e=Ho.__importDefault(hE());class t{constructor(a){var l,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(c=a.isMaybeSingle)!==null&&c!==void 0?c:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let f=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var p,b,E,A;let S=null,k=null,j=null,P=g.status,G=g.statusText;if(g.ok){if(this.method!=="HEAD"){const Z=await g.text();Z===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?k=Z:k=JSON.parse(Z))}const $=(b=this.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),se=(E=g.headers.get("content-range"))===null||E===void 0?void 0:E.split("/");$&&se&&se.length>1&&(j=parseInt(se[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(S={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,j=null,P=406,G="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const $=await g.text();try{S=JSON.parse($),Array.isArray(S)&&g.status===404&&(k=[],S=null,P=200,G="OK")}catch{g.status===404&&$===""?(P=204,G="No Content"):S={message:$}}if(S&&this.isMaybeSingle&&(!((A=S==null?void 0:S.details)===null||A===void 0)&&A.includes("0 rows"))&&(S=null,P=200,G="OK"),S&&this.shouldThrowOnError)throw new e.default(S)}return{error:S,data:k,count:j,status:P,statusText:G}});return this.shouldThrowOnError||(f=f.catch(g=>{var p,b,E,A,S,k;let j="";const P=g==null?void 0:g.cause;if(P){const G=(p=P==null?void 0:P.message)!==null&&p!==void 0?p:"",J=(b=P==null?void 0:P.code)!==null&&b!==void 0?b:"";j=`${(E=g==null?void 0:g.name)!==null&&E!==void 0?E:"FetchError"}: ${g==null?void 0:g.message}`,j+=`

Caused by: ${(A=P==null?void 0:P.name)!==null&&A!==void 0?A:"Error"}: ${G}`,J&&(j+=` (${J})`),P!=null&&P.stack&&(j+=`
${P.stack}`)}else j=(S=g==null?void 0:g.stack)!==null&&S!==void 0?S:"";return{error:{message:`${(k=g==null?void 0:g.name)!==null&&k!==void 0?k:"FetchError"}: ${g==null?void 0:g.message}`,details:j,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),f.then(a,l)}returns(){return this}overrideTypes(){return this}}return Sh.default=t,Sh}var V0;function fE(){if(V0)return Th;V0=1,Object.defineProperty(Th,"__esModule",{value:!0});const e=Ho.__importDefault(dE());class t extends e.default{select(a){let l=!1;const c=(a??"*").split("").map(f=>/\s/.test(f)&&!l?"":(f==='"'&&(l=!l),f)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:l=!0,nullsFirst:c,foreignTable:f,referencedTable:g=f}={}){const p=g?`${g}.order`:"order",b=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${b?`${b},`:""}${a}.${l?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:c=l}={}){const f=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(f,`${a}`),this}range(a,l,{foreignTable:c,referencedTable:f=c}={}){const g=typeof f>"u"?"offset":`${f}.offset`,p=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(g,`${a}`),this.url.searchParams.set(p,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:l=!1,settings:c=!1,buffers:f=!1,wal:g=!1,format:p="text"}={}){var b;const E=[a?"analyze":null,l?"verbose":null,c?"settings":null,f?"buffers":null,g?"wal":null].filter(Boolean).join("|"),A=(b=this.headers.get("Accept"))!==null&&b!==void 0?b:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${A}"; options=${E};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Th.default=t,Th}var U0;function sp(){if(U0)return Eh;U0=1,Object.defineProperty(Eh,"__esModule",{value:!0});const e=Ho.__importDefault(fE()),t=new RegExp("[,()]");class s extends e.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}regexMatch(l,c){return this.url.searchParams.append(l,`match.${c}`),this}regexIMatch(l,c){return this.url.searchParams.append(l,`imatch.${c}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}isDistinct(l,c){return this.url.searchParams.append(l,`isdistinct.${c}`),this}in(l,c){const f=Array.from(new Set(c)).map(g=>typeof g=="string"&&t.test(g)?`"${g}"`:`${g}`).join(",");return this.url.searchParams.append(l,`in.(${f})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:f,type:g}={}){let p="";g==="plain"?p="pl":g==="phrase"?p="ph":g==="websearch"&&(p="w");const b=f===void 0?"":`(${f})`;return this.url.searchParams.append(l,`${p}fts${b}.${c}`),this}match(l){return Object.entries(l).forEach(([c,f])=>{this.url.searchParams.append(c,`eq.${f}`)}),this}not(l,c,f){return this.url.searchParams.append(l,`not.${c}.${f}`),this}or(l,{foreignTable:c,referencedTable:f=c}={}){const g=f?`${f}.or`:"or";return this.url.searchParams.append(g,`(${l})`),this}filter(l,c,f){return this.url.searchParams.append(l,`${c}.${f}`),this}}return Eh.default=s,Eh}var L0;function mE(){if(L0)return wh;L0=1,Object.defineProperty(wh,"__esModule",{value:!0});const e=Ho.__importDefault(sp());class t{constructor(a,{headers:l={},schema:c,fetch:f}){this.url=a,this.headers=new Headers(l),this.schema=c,this.fetch=f}select(a,l){const{head:c=!1,count:f}=l??{},g=c?"HEAD":"GET";let p=!1;const b=(a??"*").split("").map(E=>/\s/.test(E)&&!p?"":(E==='"'&&(p=!p),E)).join("");return this.url.searchParams.set("select",b),f&&this.headers.append("Prefer",`count=${f}`),new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:l,defaultToNull:c=!0}={}){var f;const g="POST";if(l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const p=a.reduce((b,E)=>b.concat(Object.keys(E)),[]);if(p.length>0){const b=[...new Set(p)].map(E=>`"${E}"`);this.url.searchParams.set("columns",b.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(a,{onConflict:l,ignoreDuplicates:c=!1,count:f,defaultToNull:g=!0}={}){var p;const b="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),f&&this.headers.append("Prefer",`count=${f}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const E=a.reduce((A,S)=>A.concat(Object.keys(S)),[]);if(E.length>0){const A=[...new Set(E)].map(S=>`"${S}"`);this.url.searchParams.set("columns",A.join(","))}}return new e.default({method:b,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(a,{count:l}={}){var c;const f="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:a}={}){var l;const c="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return wh.default=t,wh}var z0;function dx(){if(z0)return bh;z0=1,Object.defineProperty(bh,"__esModule",{value:!0});const r=Ho,e=r.__importDefault(mE()),t=r.__importDefault(sp());class s{constructor(l,{headers:c={},schema:f,fetch:g}={}){this.url=l,this.headers=new Headers(c),this.schemaName=f,this.fetch=g}from(l){if(!l||typeof l!="string"||l.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const c=new URL(`${this.url}/${l}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new s(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,c={},{head:f=!1,get:g=!1,count:p}={}){var b;let E;const A=new URL(`${this.url}/rpc/${l}`);let S;f||g?(E=f?"HEAD":"GET",Object.entries(c).filter(([j,P])=>P!==void 0).map(([j,P])=>[j,Array.isArray(P)?`{${P.join(",")}}`:`${P}`]).forEach(([j,P])=>{A.searchParams.append(j,P)})):(E="POST",S=c);const k=new Headers(this.headers);return p&&k.set("Prefer",`count=${p}`),new t.default({method:E,url:A,headers:k,schema:this.schemaName,body:S,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}}return bh.default=s,bh}var B0;function fx(){if(B0)return ln;B0=1,Object.defineProperty(ln,"__esModule",{value:!0}),ln.PostgrestError=ln.PostgrestBuilder=ln.PostgrestTransformBuilder=ln.PostgrestFilterBuilder=ln.PostgrestQueryBuilder=ln.PostgrestClient=void 0;const r=Ho,e=r.__importDefault(dx());ln.PostgrestClient=e.default;const t=r.__importDefault(mE());ln.PostgrestQueryBuilder=t.default;const s=r.__importDefault(sp());ln.PostgrestFilterBuilder=s.default;const a=r.__importDefault(fE());ln.PostgrestTransformBuilder=a.default;const l=r.__importDefault(dE());ln.PostgrestBuilder=l.default;const c=r.__importDefault(hE());return ln.PostgrestError=c.default,ln.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:c.default},ln}var gE=fx();const pE=ep(gE),mx=FA({__proto__:null,default:pE},[gE]),{PostgrestClient:gx,PostgrestQueryBuilder:zD,PostgrestFilterBuilder:BD,PostgrestTransformBuilder:qD,PostgrestBuilder:HD,PostgrestError:$D}=pE||mx;class px{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const s=t.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const yx="2.86.0",_x=`realtime-js/${yx}`,yE="1.0.0",vx="2.0.0",q0=yE,gg=1e4,bx=1e3,wx=100;var oa;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(oa||(oa={}));var qt;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(qt||(qt={}));var mr;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(mr||(mr={}));var pg;(function(r){r.websocket="websocket"})(pg||(pg={}));var la;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(la||(la={}));class Ex{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,s;const a=(s=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var t,s;const a=(s=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&s!==void 0?s:{},c=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,t,s){var a,l;const c=e.topic,f=(a=e.ref)!==null&&a!==void 0?a:"",g=(l=e.join_ref)!==null&&l!==void 0?l:"",p=e.payload.event,b=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},E=Object.keys(b).length===0?"":JSON.stringify(b);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(E.length>255)throw new Error(`metadata length ${E.length} exceeds maximum of 255`);const A=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+f.length+c.length+p.length+E.length,S=new ArrayBuffer(this.HEADER_LENGTH+A);let k=new DataView(S),j=0;k.setUint8(j++,this.KINDS.userBroadcastPush),k.setUint8(j++,g.length),k.setUint8(j++,f.length),k.setUint8(j++,c.length),k.setUint8(j++,p.length),k.setUint8(j++,E.length),k.setUint8(j++,t),Array.from(g,G=>k.setUint8(j++,G.charCodeAt(0))),Array.from(f,G=>k.setUint8(j++,G.charCodeAt(0))),Array.from(c,G=>k.setUint8(j++,G.charCodeAt(0))),Array.from(p,G=>k.setUint8(j++,G.charCodeAt(0))),Array.from(E,G=>k.setUint8(j++,G.charCodeAt(0)));var P=new Uint8Array(S.byteLength+s.byteLength);return P.set(new Uint8Array(S),0),P.set(new Uint8Array(s),S.byteLength),P.buffer}decode(e,t){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return t(s)}if(typeof e=="string"){const s=JSON.parse(e),[a,l,c,f,g]=s;return t({join_ref:a,ref:l,topic:c,event:f,payload:g})}return t({})}_binaryDecode(e){const t=new DataView(e),s=t.getUint8(0),a=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,a)}}_decodeUserBroadcast(e,t,s){const a=t.getUint8(1),l=t.getUint8(2),c=t.getUint8(3),f=t.getUint8(4);let g=this.HEADER_LENGTH+4;const p=s.decode(e.slice(g,g+a));g=g+a;const b=s.decode(e.slice(g,g+l));g=g+l;const E=s.decode(e.slice(g,g+c));g=g+c;const A=e.slice(g,e.byteLength),S=f===this.JSON_ENCODING?JSON.parse(s.decode(A)):A,k={type:this.BROADCAST_EVENT,event:b,payload:S};return c>0&&(k.meta=JSON.parse(E)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:k}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>t.includes(s)))}}class _E{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var lt;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(lt||(lt={}));const H0=(r,e,t={})=>{var s;const a=(s=t.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((l,c)=>(l[c]=Tx(c,r,e,a),l),{}):{}},Tx=(r,e,t,s)=>{const a=e.find(f=>f.name===r),l=a==null?void 0:a.type,c=t[r];return l&&!s.includes(l)?vE(l,c):yg(c)},vE=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return Rx(e,t)}switch(r){case lt.bool:return Sx(e);case lt.float4:case lt.float8:case lt.int2:case lt.int4:case lt.int8:case lt.numeric:case lt.oid:return Ax(e);case lt.json:case lt.jsonb:return xx(e);case lt.timestamp:return Cx(e);case lt.abstime:case lt.date:case lt.daterange:case lt.int4range:case lt.int8range:case lt.money:case lt.reltime:case lt.text:case lt.time:case lt.timestamptz:case lt.timetz:case lt.tsrange:case lt.tstzrange:return yg(e);default:return yg(e)}},yg=r=>r,Sx=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Ax=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},xx=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Rx=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,s=r[t];if(r[0]==="{"&&s==="}"){let l;const c=r.slice(1,t);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(f=>vE(e,f))}return r},Cx=r=>typeof r=="string"?r.replace(" ","T"):r,bE=r=>{const e=new URL(r);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class $m{constructor(e,t,s={},a=gg){this.channel=e,this.event=t,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var $0;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})($0||($0={}));class hu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:l,onLeave:c,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=hu.syncState(this.state,a,l,c),this.pendingDiffs.forEach(g=>{this.state=hu.syncDiff(this.state,g,l,c)}),this.pendingDiffs=[],f()}),this.channel._on(s.diff,{},a=>{const{onJoin:l,onLeave:c,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=hu.syncDiff(this.state,a,l,c),f())}),this.onJoin((a,l,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:c})}),this.onLeave((a,l,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,a){const l=this.cloneDeep(e),c=this.transformState(t),f={},g={};return this.map(l,(p,b)=>{c[p]||(g[p]=b)}),this.map(c,(p,b)=>{const E=l[p];if(E){const A=b.map(P=>P.presence_ref),S=E.map(P=>P.presence_ref),k=b.filter(P=>S.indexOf(P.presence_ref)<0),j=E.filter(P=>A.indexOf(P.presence_ref)<0);k.length>0&&(f[p]=k),j.length>0&&(g[p]=j)}else f[p]=b}),this.syncDiff(l,{joins:f,leaves:g},s,a)}static syncDiff(e,t,s,a){const{joins:l,leaves:c}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(l,(f,g)=>{var p;const b=(p=e[f])!==null&&p!==void 0?p:[];if(e[f]=this.cloneDeep(g),b.length>0){const E=e[f].map(S=>S.presence_ref),A=b.filter(S=>E.indexOf(S.presence_ref)<0);e[f].unshift(...A)}s(f,b,g)}),this.map(c,(f,g)=>{let p=e[f];if(!p)return;const b=g.map(E=>E.presence_ref);p=p.filter(E=>b.indexOf(E.presence_ref)<0),e[f]=p,a(f,p,g),p.length===0&&delete e[f]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const a=e[s];return"metas"in a?t[s]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):t[s]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var F0;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(F0||(F0={}));var du;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(du||(du={}));var gs;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(gs||(gs={}));class ip{constructor(e,t={config:{}},s){var a,l;if(this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=qt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new $m(this,mr.join,this.params,this.timeout),this.rejoinTimer=new _E(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=qt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=qt.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=qt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=qt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=qt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(mr.reply,{},(c,f)=>{this._trigger(this._replyEventName(f),c)}),this.presence=new hu(this),this.broadcastEndpointURL=bE(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var s,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==qt.closed){const{config:{broadcast:c,presence:f,private:g}}=this.params,p=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(S=>S.filter))!==null&&a!==void 0?a:[],b=!!this.bindings[du.PRESENCE]&&this.bindings[du.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,E={},A={broadcast:c,presence:Object.assign(Object.assign({},f),{enabled:b}),postgres_changes:p,private:g};this.socket.accessTokenValue&&(E.access_token=this.socket.accessTokenValue),this._onError(S=>e==null?void 0:e(gs.CHANNEL_ERROR,S)),this._onClose(()=>e==null?void 0:e(gs.CLOSED)),this.updateJoinPayload(Object.assign({config:A},E)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:S})=>{var k;if(this.socket.setAuth(),S===void 0){e==null||e(gs.SUBSCRIBED);return}else{const j=this.bindings.postgres_changes,P=(k=j==null?void 0:j.length)!==null&&k!==void 0?k:0,G=[];for(let J=0;J<P;J++){const $=j[J],{filter:{event:se,schema:Z,table:ae,filter:C}}=$,R=S&&S[J];if(R&&R.event===se&&R.schema===Z&&R.table===ae&&R.filter===C)G.push(Object.assign(Object.assign({},$),{id:R.id}));else{this.unsubscribe(),this.state=qt.errored,e==null||e(gs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=G,e&&e(gs.SUBSCRIBED);return}}).receive("error",S=>{this.state=qt.errored,e==null||e(gs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(gs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===qt.joined&&e===du.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async httpSend(e,t,s={}){var a;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(f.status===202)return{success:!0};let g=f.statusText;try{const p=await f.json();g=p.error||p.message||g}catch{}return Promise.reject(new Error(g))}async send(e,t={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=e,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=p.body)===null||a===void 0?void 0:a.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,f,g;const p=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(f=(c=this.params)===null||c===void 0?void 0:c.config)===null||f===void 0?void 0:f.broadcast)===null||g===void 0)&&g.ack)&&l("ok"),p.receive("ok",()=>l("ok")),p.receive("error",()=>l("error")),p.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=qt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(mr.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new $m(this,mr.leave,{},e),s.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=qt.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const a=new AbortController,l=setTimeout(()=>a.abort(),s),c=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(l),c}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new $m(this,e,t,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>wx){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var a,l;const c=e.toLocaleLowerCase(),{close:f,error:g,leave:p,join:b}=mr;if(s&&[f,g,p,b].indexOf(c)>=0&&s!==this._joinRef())return;let A=this._onMessage(c,t,s);if(t&&!A)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(S=>{var k,j,P;return((k=S.filter)===null||k===void 0?void 0:k.event)==="*"||((P=(j=S.filter)===null||j===void 0?void 0:j.event)===null||P===void 0?void 0:P.toLocaleLowerCase())===c}).map(S=>S.callback(A,s)):(l=this.bindings[c])===null||l===void 0||l.filter(S=>{var k,j,P,G,J,$;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in S){const se=S.id,Z=(k=S.filter)===null||k===void 0?void 0:k.event;return se&&((j=t.ids)===null||j===void 0?void 0:j.includes(se))&&(Z==="*"||(Z==null?void 0:Z.toLocaleLowerCase())===((P=t.data)===null||P===void 0?void 0:P.type.toLocaleLowerCase()))}else{const se=(J=(G=S==null?void 0:S.filter)===null||G===void 0?void 0:G.event)===null||J===void 0?void 0:J.toLocaleLowerCase();return se==="*"||se===(($=t==null?void 0:t.event)===null||$===void 0?void 0:$.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===c}).map(S=>{if(typeof A=="object"&&"ids"in A){const k=A.data,{schema:j,table:P,commit_timestamp:G,type:J,errors:$}=k;A=Object.assign(Object.assign({},{schema:j,table:P,commit_timestamp:G,eventType:J,new:{},old:{},errors:$}),this._getPayloadRecords(k))}S.callback(A,s)})}_isClosed(){return this.state===qt.closed}_isJoined(){return this.state===qt.joined}_isJoining(){return this.state===qt.joining}_isLeaving(){return this.state===qt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const a=e.toLocaleLowerCase(),l={type:a,filter:t,callback:s};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===s&&ip.isEqual(a.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(mr.close,{},e)}_onError(e){this._on(mr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=qt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=H0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=H0(e.columns,e.old_record)),t}}const Fm=()=>{},xh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ix=[1e3,2e3,5e3,1e4],Nx=1e4,Ox=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class kx{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=gg,this.transport=null,this.heartbeatIntervalMs=xh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Fm,this.ref=0,this.reconnectTimer=null,this.vsn=q0,this.logger=Fm,this.conn=null,this.sendBuffer=[],this.serializer=new Ex,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((s=t==null?void 0:t.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${pg.websocket}`,this.httpEndpoint=bE(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=px.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case oa.connecting:return la.Connecting;case oa.open:return la.Open;case oa.closing:return la.Closing;default:return la.Closed}}isConnected(){return this.connectionState()===la.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(l=>l.topic===s);if(a)return a;{const l=new ip(`realtime:${e}`,t,this);return this.channels.push(l),l}}push(e){const{topic:t,event:s,payload:a,ref:l}=e,c=()=>{this.encode(e,f=>{var g;(g=this.conn)===null||g===void 0||g.send(f)})};this.log("push",`${t} ${s} (${l})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(bx,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},xh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:l,ref:c}=t,f=c?`(${c})`:"",g=l.status||"";this.log("receive",`${g} ${s} ${a} ${f}`.trim(),l),this.channels.filter(p=>p._isMember(s)).forEach(p=>p._trigger(a,l,c)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===oa.open||this.conn.readyState===oa.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(mr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${s}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([Ox],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const a={access_token:t,version:_x};t&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(mr.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new _E(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},xh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,a,l,c,f,g,p,b,E,A,S;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:gg,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:xh.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(f=e==null?void 0:e.heartbeatCallback)!==null&&f!==void 0?f:Fm,this.vsn=(g=e==null?void 0:e.vsn)!==null&&g!==void 0?g:q0,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:(k=>Ix[k-1]||Nx),this.vsn){case yE:this.encode=(b=e==null?void 0:e.encode)!==null&&b!==void 0?b:((k,j)=>j(JSON.stringify(k))),this.decode=(E=e==null?void 0:e.decode)!==null&&E!==void 0?E:((k,j)=>j(JSON.parse(k)));break;case vx:this.encode=(A=e==null?void 0:e.encode)!==null&&A!==void 0?A:this.serializer.encode.bind(this.serializer),this.decode=(S=e==null?void 0:e.decode)!==null&&S!==void 0?S:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class yd extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function yt(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class jx extends yd{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class _g extends yd{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const ap=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),Dx=()=>Response,vg=r=>{if(Array.isArray(r))return r.map(t=>vg(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,s])=>{const a=t.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[a]=vg(s)}),e},Px=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},Mx=r=>!r||typeof r!="string"||r.length===0||r.length>100||r.trim()!==r||r.includes("/")||r.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(r),Gm=r=>{var e;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(e=r.error)===null||e===void 0?void 0:e.message)||JSON.stringify(r)},Vx=(r,e,t)=>me(void 0,void 0,void 0,function*(){const s=yield Dx();r instanceof s&&!(t!=null&&t.noResolveJson)?r.json().then(a=>{const l=r.status||500,c=(a==null?void 0:a.statusCode)||l+"";e(new jx(Gm(a),l,c))}).catch(a=>{e(new _g(Gm(a),a))}):e(new _g(Gm(r),r))}),Ux=(r,e,t,s)=>{const a={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"||!s?a:(Px(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),t))};function Du(r,e,t,s,a,l){return me(this,void 0,void 0,function*(){return new Promise((c,f)=>{r(t,Ux(e,s,a,l)).then(g=>{if(!g.ok)throw g;return s!=null&&s.noResolveJson?g:g.json()}).then(g=>c(g)).catch(g=>Vx(g,f,s))})})}function vu(r,e,t,s){return me(this,void 0,void 0,function*(){return Du(r,"GET",e,t,s)})}function fr(r,e,t,s,a){return me(this,void 0,void 0,function*(){return Du(r,"POST",e,s,a,t)})}function bg(r,e,t,s,a){return me(this,void 0,void 0,function*(){return Du(r,"PUT",e,s,a,t)})}function Lx(r,e,t,s){return me(this,void 0,void 0,function*(){return Du(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function op(r,e,t,s,a){return me(this,void 0,void 0,function*(){return Du(r,"DELETE",e,s,a,t)})}class zx{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return me(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(yt(e))return{data:null,error:e};throw e}})}}var wE;class Bx{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[wE]="BlobDownloadBuilder",this.promise=null}asStream(){return new zx(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return me(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(yt(e))return{data:null,error:e};throw e}})}}wE=Symbol.toStringTag;const qx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},G0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Hx{constructor(e,t={},s,a){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=ap(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,s,a){return me(this,void 0,void 0,function*(){try{let l;const c=Object.assign(Object.assign({},G0),a);let f=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const g=c.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),g&&l.append("metadata",this.encodeMetadata(g)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),g&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(g))):(l=s,f["cache-control"]=`max-age=${c.cacheControl}`,f["content-type"]=c.contentType,g&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(g))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),a!=null&&a.headers&&(f=Object.assign(Object.assign({},f),a.headers));const p=this._removeEmptyFolders(t),b=this._getFinalPath(p),E=yield(e=="PUT"?bg:fr)(this.fetch,`${this.url}/object/${b}`,l,Object.assign({headers:f},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:p,id:E.Id,fullPath:E.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(yt(l))return{data:null,error:l};throw l}})}upload(e,t,s){return me(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,a){return me(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(e),c=this._getFinalPath(l),f=new URL(this.url+`/object/upload/sign/${c}`);f.searchParams.set("token",t);try{let g;const p=Object.assign({upsert:G0.upsert},a),b=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&s instanceof Blob?(g=new FormData,g.append("cacheControl",p.cacheControl),g.append("",s)):typeof FormData<"u"&&s instanceof FormData?(g=s,g.append("cacheControl",p.cacheControl)):(g=s,b["cache-control"]=`max-age=${p.cacheControl}`,b["content-type"]=p.contentType);const E=yield bg(this.fetch,f.toString(),g,{headers:b});return{data:{path:l,fullPath:E.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(yt(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(e,t){return me(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const l=yield fr(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),c=new URL(this.url+l.url),f=c.searchParams.get("token");if(!f)throw new yd("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:f},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yt(s))return{data:null,error:s};throw s}})}update(e,t,s){return me(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return me(this,void 0,void 0,function*(){try{return{data:yield fr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}copy(e,t,s){return me(this,void 0,void 0,function*(){try{return{data:{path:(yield fr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,s){return me(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),l=yield fr(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const c=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,s){return me(this,void 0,void 0,function*(){try{const a=yield fr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}download(e,t){const a=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),c=l?`?${l}`:"",f=this._getFinalPath(e),g=()=>vu(this.fetch,`${this.url}/${a}/${f}${c}`,{headers:this.headers,noResolveJson:!0});return new Bx(g,this.shouldThrowOnError)}info(e){return me(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield vu(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:vg(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yt(s))return{data:null,error:s};throw s}})}exists(e){return me(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Lx(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yt(s)&&s instanceof _g){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),a=[],l=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";l!==""&&a.push(l);const f=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",g=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});g!==""&&a.push(g);let p=a.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${s}${p}`)}}}remove(e){return me(this,void 0,void 0,function*(){try{return{data:yield op(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(yt(t))return{data:null,error:t};throw t}})}list(e,t,s){return me(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},qx),t),{prefix:e||""});return{data:yield fr(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}listV2(e,t){return me(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield fr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const EE="2.86.0",TE={"X-Client-Info":`storage-js/${EE}`};class $x{constructor(e,t={},s,a){this.shouldThrowOnError=!1;const l=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},TE),t),this.fetch=ap(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return me(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield vu(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(yt(t))return{data:null,error:t};throw t}})}getBucket(e){return me(this,void 0,void 0,function*(){try{return{data:yield vu(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(yt(t))return{data:null,error:t};throw t}})}createBucket(e){return me(this,arguments,void 0,function*(t,s={public:!1}){try{return{data:yield fr(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yt(a))return{data:null,error:a};throw a}})}updateBucket(e,t){return me(this,void 0,void 0,function*(){try{return{data:yield bg(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yt(s))return{data:null,error:s};throw s}})}emptyBucket(e){return me(this,void 0,void 0,function*(){try{return{data:yield fr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(yt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return me(this,void 0,void 0,function*(){try{return{data:yield op(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(yt(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}var bu=class extends Error{constructor(r,e){var t;super(r),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Fx(r,e,t){const s=new URL(e,r);if(t)for(const[a,l]of Object.entries(t))l!==void 0&&s.searchParams.set(a,l);return s.toString()}async function Gx(r){return!r||r.type==="none"?{}:r.type==="bearer"?{Authorization:`Bearer ${r.token}`}:r.type==="header"?{[r.name]:r.value}:r.type==="custom"?await r.getHeaders():{}}function Kx(r){const e=r.fetchImpl??globalThis.fetch;return{async request({method:t,path:s,query:a,body:l,headers:c}){const f=Fx(r.baseUrl,s,a),g=await Gx(r.auth),p=await e(f,{method:t,headers:{...l?{"Content-Type":"application/json"}:{},...g,...c},body:l?JSON.stringify(l):void 0}),b=await p.text(),E=(p.headers.get("content-type")||"").includes("application/json"),A=E&&b?JSON.parse(b):b;if(!p.ok){const S=E?A:void 0,k=S==null?void 0:S.error;throw new bu((k==null?void 0:k.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:k==null?void 0:k.type,icebergCode:k==null?void 0:k.code,details:S})}return{status:p.status,headers:p.headers,data:A}}}}function Rh(r){return r.join("")}var Qx=class{constructor(r,e=""){this.client=r,this.prefix=e}async listNamespaces(r){const e=r?{parent:Rh(r.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(r,e){const t={namespace:r.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Rh(r.namespace)}`})}async loadNamespaceMetadata(r){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Rh(r.namespace)}`})).data.properties}}async namespaceExists(r){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Rh(r.namespace)}`}),!0}catch(e){if(e instanceof bu&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(r,e){try{return await this.createNamespace(r,e)}catch(t){if(t instanceof bu&&t.status===409)return;throw t}}};function ho(r){return r.join("")}var Yx=class{constructor(r,e="",t){this.client=r,this.prefix=e,this.accessDelegation=t}async listTables(r){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ho(r.namespace)}/tables`})).data.identifiers}async createTable(r,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ho(r.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(r,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ho(r.namespace)}/tables/${r.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(r,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ho(r.namespace)}/tables/${r.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(r){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ho(r.namespace)}/tables/${r.name}`,headers:e})).data.metadata}async tableExists(r){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ho(r.namespace)}/tables/${r.name}`,headers:e}),!0}catch(t){if(t instanceof bu&&t.status===404)return!1;throw t}}async createTableIfNotExists(r,e){try{return await this.createTable(r,e)}catch(t){if(t instanceof bu&&t.status===409)return await this.loadTable({namespace:r.namespace,name:e.name});throw t}}},Xx=class{constructor(r){var s;let e="v1";r.catalogName&&(e+=`/${r.catalogName}`);const t=r.baseUrl.endsWith("/")?r.baseUrl:`${r.baseUrl}/`;this.client=Kx({baseUrl:t,auth:r.auth,fetchImpl:r.fetch}),this.accessDelegation=(s=r.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new Qx(this.client,e),this.tableOps=new Yx(this.client,e,this.accessDelegation)}async listNamespaces(r){return this.namespaceOps.listNamespaces(r)}async createNamespace(r,e){return this.namespaceOps.createNamespace(r,e)}async dropNamespace(r){await this.namespaceOps.dropNamespace(r)}async loadNamespaceMetadata(r){return this.namespaceOps.loadNamespaceMetadata(r)}async listTables(r){return this.tableOps.listTables(r)}async createTable(r,e){return this.tableOps.createTable(r,e)}async updateTable(r,e){return this.tableOps.updateTable(r,e)}async dropTable(r,e){await this.tableOps.dropTable(r,e)}async loadTable(r){return this.tableOps.loadTable(r)}async namespaceExists(r){return this.namespaceOps.namespaceExists(r)}async tableExists(r){return this.tableOps.tableExists(r)}async createNamespaceIfNotExists(r,e){return this.namespaceOps.createNamespaceIfNotExists(r,e)}async createTableIfNotExists(r,e){return this.tableOps.createTableIfNotExists(r,e)}};class Jx{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},TE),t),this.fetch=ap(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return me(this,void 0,void 0,function*(){try{return{data:yield fr(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(yt(t))return{data:null,error:t};throw t}})}listBuckets(e){return me(this,void 0,void 0,function*(){try{const t=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&t.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&t.set("sortOrder",e.sortOrder),e!=null&&e.search&&t.set("search",e.search);const s=t.toString(),a=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield vu(this.fetch,a,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(yt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return me(this,void 0,void 0,function*(){try{return{data:yield op(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(yt(t))return{data:null,error:t};throw t}})}from(e){if(!Mx(e))throw new yd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new Xx({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>me(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const lp={"X-Client-Info":`storage-js/${EE}`,"Content-Type":"application/json"};class SE extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Mn(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}class Km extends SE{constructor(e,t,s){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Wx extends SE{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var K0;(function(r){r.InternalError="InternalError",r.S3VectorConflictException="S3VectorConflictException",r.S3VectorNotFoundException="S3VectorNotFoundException",r.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",r.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",r.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(K0||(K0={}));const up=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),Zx=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},Q0=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),eR=(r,e,t)=>me(void 0,void 0,void 0,function*(){if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!(t!=null&&t.noResolveJson)){const a=r.status||500,l=r;if(typeof l.json=="function")l.json().then(c=>{const f=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||a+"";e(new Km(Q0(c),a,f))}).catch(()=>{const c=a+"",f=l.statusText||`HTTP ${a} error`;e(new Km(f,a,c))});else{const c=a+"",f=l.statusText||`HTTP ${a} error`;e(new Km(f,a,c))}}else e(new Wx(Q0(r),r))}),tR=(r,e,t,s)=>{const a={method:r,headers:(e==null?void 0:e.headers)||{}};return s?(Zx(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(s)):a.body=s,Object.assign(Object.assign({},a),t)):a};function nR(r,e,t,s,a,l){return me(this,void 0,void 0,function*(){return new Promise((c,f)=>{r(t,tR(e,s,a,l)).then(g=>{if(!g.ok)throw g;if(s!=null&&s.noResolveJson)return g;const p=g.headers.get("content-type");return!p||!p.includes("application/json")?{}:g.json()}).then(g=>c(g)).catch(g=>eR(g,f,s))})})}function Vn(r,e,t,s,a){return me(this,void 0,void 0,function*(){return nR(r,"POST",e,s,a,t)})}class rR{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},lp),t),this.fetch=up(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return me(this,void 0,void 0,function*(){try{return{data:(yield Vn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}})}getIndex(e,t){return me(this,void 0,void 0,function*(){try{return{data:yield Vn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mn(s))return{data:null,error:s};throw s}})}listIndexes(e){return me(this,void 0,void 0,function*(){try{return{data:yield Vn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return me(this,void 0,void 0,function*(){try{return{data:(yield Vn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Mn(s))return{data:null,error:s};throw s}})}}class sR{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},lp),t),this.fetch=up(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return me(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Vn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}})}getVectors(e){return me(this,void 0,void 0,function*(){try{return{data:yield Vn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}})}listVectors(e){return me(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Vn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}})}queryVectors(e){return me(this,void 0,void 0,function*(){try{return{data:yield Vn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}})}deleteVectors(e){return me(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Vn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}})}}class iR{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},lp),t),this.fetch=up(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return me(this,void 0,void 0,function*(){try{return{data:(yield Vn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}})}getBucket(e){return me(this,void 0,void 0,function*(){try{return{data:yield Vn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}})}listBuckets(){return me(this,arguments,void 0,function*(e={}){try{return{data:yield Vn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return me(this,void 0,void 0,function*(){try{return{data:(yield Vn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}})}}class aR extends iR{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new oR(this.url,this.headers,e,this.fetch)}createBucket(e){const t=Object.create(null,{createBucket:{get:()=>super.createBucket}});return me(this,void 0,void 0,function*(){return t.createBucket.call(this,e)})}getBucket(e){const t=Object.create(null,{getBucket:{get:()=>super.getBucket}});return me(this,void 0,void 0,function*(){return t.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return me(this,arguments,void 0,function*(t={}){return e.listBuckets.call(this,t)})}deleteBucket(e){const t=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return me(this,void 0,void 0,function*(){return t.deleteBucket.call(this,e)})}}class oR extends rR{constructor(e,t,s,a){super(e,t,a),this.vectorBucketName=s}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return me(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return me(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return me(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return me(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new lR(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class lR extends sR{constructor(e,t,s,a,l){super(e,t,l),this.vectorBucketName=s,this.indexName=a}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return me(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return me(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return me(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return me(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return me(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class uR extends $x{constructor(e,t={},s,a){super(e,t,s,a)}from(e){return new Hx(this.url,this.headers,e,this.fetch)}get vectors(){return new aR(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Jx(this.url+"/iceberg",this.headers,this.fetch)}}const cR="2.86.0";let su="";typeof Deno<"u"?su="deno":typeof document<"u"?su="web":typeof navigator<"u"&&navigator.product==="ReactNative"?su="react-native":su="node";const hR={"X-Client-Info":`supabase-js-${su}/${cR}`},dR={headers:hR},fR={schema:"public"},mR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},gR={},pR=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),yR=()=>Headers,_R=(r,e,t)=>{const s=pR(t),a=yR();return async(l,c)=>{var f;const g=(f=await e())!==null&&f!==void 0?f:r;let p=new a(c==null?void 0:c.headers);return p.has("apikey")||p.set("apikey",r),p.has("Authorization")||p.set("Authorization",`Bearer ${g}`),s(l,Object.assign(Object.assign({},c),{headers:p}))}};function vR(r){return r.endsWith("/")?r:r+"/"}function bR(r,e){var t,s;const{db:a,auth:l,realtime:c,global:f}=r,{db:g,auth:p,realtime:b,global:E}=e,A={db:Object.assign(Object.assign({},g),a),auth:Object.assign(Object.assign({},p),l),realtime:Object.assign(Object.assign({},b),c),storage:{},global:Object.assign(Object.assign(Object.assign({},E),f),{headers:Object.assign(Object.assign({},(t=E==null?void 0:E.headers)!==null&&t!==void 0?t:{}),(s=f==null?void 0:f.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return r.accessToken?A.accessToken=r.accessToken:delete A.accessToken,A}function wR(r){const e=r==null?void 0:r.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(vR(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const AE="2.86.0",_o=30*1e3,wg=3,Qm=wg*_o,ER="http://localhost:9999",TR="supabase.auth.token",SR={"X-Client-Info":`gotrue-js/${AE}`},Eg="X-Supabase-Api-Version",xE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},AR=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,xR=600*1e3;class wu extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}}function ye(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class RR extends wu{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}}function CR(r){return ye(r)&&r.name==="AuthApiError"}class ua extends wu{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class xi extends wu{constructor(e,t,s,a){super(e,s,a),this.name=t,this.status=s}}class Pn extends xi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function IR(r){return ye(r)&&r.name==="AuthSessionMissingError"}class fo extends xi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ch extends xi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ih extends xi{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function NR(r){return ye(r)&&r.name==="AuthImplicitGrantRedirectError"}class Y0 extends xi{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Tg extends xi{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ym(r){return ye(r)&&r.name==="AuthRetryableFetchError"}class X0 extends xi{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}}class Sg extends xi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Qh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),J0=` 	
\r=`.split(""),OR=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<J0.length;e+=1)r[J0[e].charCodeAt(0)]=-2;for(let e=0;e<Qh.length;e+=1)r[Qh[e].charCodeAt(0)]=e;return r})();function W0(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Qh[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Qh[s]),e.queuedBits-=6}}function RE(r,e,t){const s=OR[r];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Z0(r){const e=[],t=c=>{e.push(String.fromCodePoint(c))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=c=>{DR(c,s,t)};for(let c=0;c<r.length;c+=1)RE(r.charCodeAt(c),a,l);return e.join("")}function kR(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function jR(r,e){for(let t=0;t<r.length;t+=1){let s=r.charCodeAt(t);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(r.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}kR(s,e)}}function DR(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let s=1;s<6;s+=1)if((r>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Ao(r){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<r.length;a+=1)RE(r.charCodeAt(a),t,s);return new Uint8Array(e)}function PR(r){const e=[];return jR(r,t=>e.push(t)),new Uint8Array(e)}function ca(r){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};return r.forEach(a=>W0(a,t,s)),W0(null,t,s),e.join("")}function MR(r){return Math.round(Date.now()/1e3)+r}function VR(){return Symbol("auth-callback")}const tn=()=>typeof window<"u"&&typeof document<"u",ra={tested:!1,writable:!1},CE=()=>{if(!tn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ra.tested)return ra.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),ra.tested=!0,ra.writable=!0}catch{ra.tested=!0,ra.writable=!1}return ra.writable};function UR(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,l)=>{e[l]=a})}catch{}return t.searchParams.forEach((s,a)=>{e[a]=s}),e}const IE=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),LR=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",vo=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},sa=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ai=async(r,e)=>{await r.removeItem(e)};let NE=class OE{constructor(){this.promise=new OE.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}};NE.promiseConstructor=Promise;function Xm(r){const e=r.split(".");if(e.length!==3)throw new Sg("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!AR.test(e[s]))throw new Sg("JWT not in base64url format");return{header:JSON.parse(Z0(e[0])),payload:JSON.parse(Z0(e[1])),signature:Ao(e[2]),raw:{header:e[0],payload:e[1]}}}async function zR(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function BR(r,e){return new Promise((s,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await r(l);if(!e(l,null,c)){s(c);return}}catch(c){if(!e(l,c)){a(c);return}}})()})}function qR(r){return("0"+r.toString(16)).substr(-2)}function HR(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let a="";for(let l=0;l<56;l++)a+=t.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,qR).join("")}async function $R(r){const t=new TextEncoder().encode(r),s=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(s);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function FR(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await $R(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function mo(r,e,t=!1){const s=HR();let a=s;t&&(a+="/PASSWORD_RECOVERY"),await vo(r,`${e}-code-verifier`,a);const l=await FR(s);return[l,s===l?"plain":"s256"]}const GR=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function KR(r){const e=r.headers.get(Eg);if(!e||!e.match(GR))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function QR(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function YR(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const XR=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function go(r){if(!XR.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Jm(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function JR(r,e){return new Proxy(r,{get:(t,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const l=s.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,s,a)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,s,a)}})}function eb(r){return JSON.parse(JSON.stringify(r))}const ia=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),WR=[502,503,504];async function tb(r){var e;if(!LR(r))throw new Tg(ia(r),0);if(WR.includes(r.status))throw new Tg(ia(r),r.status);let t;try{t=await r.json()}catch(l){throw new ua(ia(l),l)}let s;const a=KR(r);if(a&&a.getTime()>=xE["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new X0(ia(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Pn}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new X0(ia(t),r.status,t.weak_password.reasons);throw new RR(ia(t),r.status||500,s)}const ZR=(r,e,t,s)=>{const a={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),t))};async function Te(r,e,t,s){var a;const l=Object.assign({},s==null?void 0:s.headers);l[Eg]||(l[Eg]=xE["2024-01-01"].name),s!=null&&s.jwt&&(l.Authorization=`Bearer ${s.jwt}`);const c=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(c.redirect_to=s.redirectTo);const f=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",g=await e2(r,e,t+f,{headers:l,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(g):{data:Object.assign({},g),error:null}}async function e2(r,e,t,s,a,l){const c=ZR(e,s,a,l);let f;try{f=await r(t,Object.assign({},c))}catch(g){throw console.error(g),new Tg(ia(g),0)}if(f.ok||await tb(f),s!=null&&s.noResolveJson)return f;try{return await f.json()}catch(g){await tb(g)}}function dr(r){var e;let t=null;r2(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=MR(r.expires_in)));const s=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:s},error:null}}function nb(r){const e=dr(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=r.weak_password),e}function li(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function t2(r){return{data:r,error:null}}function n2(r){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:l}=r,c=qo(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:l},g=Object.assign({},c);return{data:{properties:f,user:g},error:null}}function rb(r){return r}function r2(r){return r.access_token&&r.refresh_token&&r.expires_in}const Wm=["global","local","others"];class s2{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=IE(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Wm[0]){if(Wm.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Wm.join(", ")}`);try{return await Te(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(ye(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await Te(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:li})}catch(s){if(ye(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=qo(e,["options"]),a=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await Te(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:n2,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ye(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Te(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:li})}catch(t){if(ye(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,a,l,c,f,g;try{const p={nextPage:null,lastPage:0,total:0},b=await Te(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:rb});if(b.error)throw b.error;const E=await b.json(),A=(c=b.headers.get("x-total-count"))!==null&&c!==void 0?c:0,S=(g=(f=b.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&g!==void 0?g:[];return S.length>0&&(S.forEach(k=>{const j=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(k.split(";")[1].split("=")[1]);p[`${P}Page`]=j}),p.total=parseInt(A)),{data:Object.assign(Object.assign({},E),p),error:null}}catch(p){if(ye(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){go(e);try{return await Te(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:li})}catch(t){if(ye(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){go(e);try{return await Te(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:li})}catch(s){if(ye(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){go(e);try{return await Te(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:li})}catch(s){if(ye(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){go(e.userId);try{const{data:t,error:s}=await Te(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:s}}catch(t){if(ye(t))return{data:null,error:t};throw t}}async _deleteFactor(e){go(e.userId),go(e.id);try{return{data:await Te(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ye(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,s,a,l,c,f,g;try{const p={nextPage:null,lastPage:0,total:0},b=await Te(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(l=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:rb});if(b.error)throw b.error;const E=await b.json(),A=(c=b.headers.get("x-total-count"))!==null&&c!==void 0?c:0,S=(g=(f=b.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&g!==void 0?g:[];return S.length>0&&(S.forEach(k=>{const j=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(k.split(";")[1].split("=")[1]);p[`${P}Page`]=j}),p.total=parseInt(A)),{data:Object.assign(Object.assign({},E),p),error:null}}catch(p){if(ye(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await Te(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ye(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Te(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ye(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Te(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ye(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await Te(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(ye(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Te(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ye(t))return{data:null,error:t};throw t}}}function sb(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}const po={debug:!!(globalThis&&CE()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class kE extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class i2 extends kE{}async function a2(r,e,t){po.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),po.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){po.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,a.name);try{return await t()}finally{po.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,a.name)}}else{if(e===0)throw po.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new i2(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(po.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function o2(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function jE(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function l2(r){return parseInt(r,16)}function u2(r){const e=new TextEncoder().encode(r);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function c2(r){var e;const{chainId:t,domain:s,expirationTime:a,issuedAt:l=new Date,nonce:c,notBefore:f,requestId:g,resources:p,scheme:b,uri:E,version:A}=r;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!E)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(A!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${A}`);if(!((e=r.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const S=jE(r.address),k=b?`${b}://${s}`:s,j=r.statement?`${r.statement}
`:"",P=`${k} wants you to sign in with your Ethereum account:
${S}

${j}`;let G=`URI: ${E}
Version: ${A}
Chain ID: ${t}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(a&&(G+=`
Expiration Time: ${a.toISOString()}`),f&&(G+=`
Not Before: ${f.toISOString()}`),g&&(G+=`
Request ID: ${g}`),p){let J=`
Resources:`;for(const $ of p){if(!$||typeof $!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${$}`);J+=`
- ${$}`}G+=J}return`${P}
${G}`}class Ut extends Error{constructor({message:e,code:t,cause:s,name:a}){var l;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(l=a??(s instanceof Error?s.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=t}}class Yh extends Ut{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function h2({error:r,options:e}){var t,s,a;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ut({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((t=l.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Ut({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(e.mediation==="conditional"&&((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Ut({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Ut({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new Ut({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new Ut({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return l.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new Ut({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new Ut({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const c=window.location.hostname;if(DE(c)){if(l.rp.id!==c)return new Ut({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Ut({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Ut({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new Ut({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Ut({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function d2({error:r,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ut({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new Ut({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const s=window.location.hostname;if(DE(s)){if(t.rpId!==s)return new Ut({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Ut({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new Ut({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Ut({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class f2{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const m2=new f2;function g2(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:e,user:t,excludeCredentials:s}=r,a=qo(r,["challenge","user","excludeCredentials"]),l=Ao(e).buffer,c=Object.assign(Object.assign({},t),{id:Ao(t.id).buffer}),f=Object.assign(Object.assign({},a),{challenge:l,user:c});if(s&&s.length>0){f.excludeCredentials=new Array(s.length);for(let g=0;g<s.length;g++){const p=s[g];f.excludeCredentials[g]=Object.assign(Object.assign({},p),{id:Ao(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return f}function p2(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:e,allowCredentials:t}=r,s=qo(r,["challenge","allowCredentials"]),a=Ao(e).buffer,l=Object.assign(Object.assign({},s),{challenge:a});if(t&&t.length>0){l.allowCredentials=new Array(t.length);for(let c=0;c<t.length;c++){const f=t[c];l.allowCredentials[c]=Object.assign(Object.assign({},f),{id:Ao(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return l}function y2(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r;return{id:r.id,rawId:r.id,response:{attestationObject:ca(new Uint8Array(r.response.attestationObject)),clientDataJSON:ca(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function _2(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r,s=r.getClientExtensionResults(),a=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:ca(new Uint8Array(a.authenticatorData)),clientDataJSON:ca(new Uint8Array(a.clientDataJSON)),signature:ca(new Uint8Array(a.signature)),userHandle:a.userHandle?ca(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function DE(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function ib(){var r,e;return!!(tn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function v2(r){try{const e=await navigator.credentials.create(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Yh("Browser returned unexpected credential type",e)}:{data:null,error:new Yh("Empty credential response",e)}}catch(e){return{data:null,error:h2({error:e,options:r})}}}async function b2(r){try{const e=await navigator.credentials.get(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Yh("Browser returned unexpected credential type",e)}:{data:null,error:new Yh("Empty credential response",e)}}catch(e){return{data:null,error:d2({error:e,options:r})}}}const w2={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},E2={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Xh(...r){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),t=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of r)if(a)for(const l in a){const c=a[l];if(c!==void 0)if(Array.isArray(c))s[l]=c;else if(t(c))s[l]=c;else if(e(c)){const f=s[l];e(f)?s[l]=Xh(f,c):s[l]=Xh(c)}else s[l]=c}return s}function T2(r,e){return Xh(w2,r,e||{})}function S2(r,e){return Xh(E2,r,e||{})}class A2{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:s,signal:a},l){try{const{data:c,error:f}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!c)return{data:null,error:f};const g=a??m2.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:p}=c.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${s}`),p.displayName||(p.displayName=p.name)}switch(c.webauthn.type){case"create":{const p=T2(c.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:b,error:E}=await v2({publicKey:p,signal:g});return b?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:b}},error:null}:{data:null,error:E}}case"request":{const p=S2(c.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:b,error:E}=await b2(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:p,signal:g}));return b?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:b}},error:null}:{data:null,error:E}}}}catch(c){return ye(c)?{data:null,error:c}:{data:null,error:new ua("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:t,webauthn:s}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!t)return{data:null,error:new wu("rpId is required for WebAuthn authentication")};try{if(!ib())return{data:null,error:new ua("Browser does not support WebAuthn",null)};const{data:c,error:f}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:s},signal:a},{request:l});if(!c)return{data:null,error:f};const{webauthn:g}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:g.type,rpId:t,rpOrigins:s,credential_response:g.credential_response}})}catch(c){return ye(c)?{data:null,error:c}:{data:null,error:new ua("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!t)return{data:null,error:new wu("rpId is required for WebAuthn registration")};try{if(!ib())return{data:null,error:new ua("Browser does not support WebAuthn",null)};const{data:c,error:f}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(b=>{var E;return(E=b.data)===null||E===void 0?void 0:E.all.find(A=>A.factor_type==="webauthn"&&A.friendly_name===e&&A.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b==null?void 0:b.id}):void 0),{data:null,error:f};const{data:g,error:p}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:t,rpOrigins:s},signal:a},{create:l});return g?this._verify({factorId:c.id,challengeId:g.challengeId,webauthn:{rpId:t,rpOrigins:s,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:p}}catch(c){return ye(c)?{data:null,error:c}:{data:null,error:new ua("Unexpected error in register",c)}}}}o2();const x2={url:ER,storageKey:TR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:SR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function ab(r,e,t){return await t()}const yo={};class Eu{get jwks(){var e,t;return(t=(e=yo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){yo[this.storageKey]=Object.assign(Object.assign({},yo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=yo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){yo[this.storageKey]=Object.assign(Object.assign({},yo[this.storageKey]),{cachedAt:e})}constructor(e){var t,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},x2),e);if(this.storageKey=l.storageKey,this.instanceID=(t=Eu.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,Eu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&tn()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new s2({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=IE(l.fetch),this.lock=l.lock||ab,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:tn()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=a2:this.lock=ab,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new A2(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:CE()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=sb(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=sb(this.memoryStorage)),tn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${AE}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},s="none";if(tn()&&(t=UR(window.location.href),this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce")),tn()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:l}=await this._getSessionFromURL(t,s);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),NR(l)){const g=(e=l.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:f}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",f),await this._saveSession(c),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ye(t)?this._returnResult({error:t}):this._returnResult({error:new ua("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,a;try{const l=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:dr}),{data:c,error:f}=l;if(f||!c)return this._returnResult({data:{user:null,session:null},error:f});const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(l){if(ye(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var t,s,a;try{let l;if("email"in e){const{email:b,password:E,options:A}=e;let S=null,k=null;this.flowType==="pkce"&&([S,k]=await mo(this.storage,this.storageKey)),l=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:A==null?void 0:A.emailRedirectTo,body:{email:b,password:E,data:(t=A==null?void 0:A.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},code_challenge:S,code_challenge_method:k},xform:dr})}else if("phone"in e){const{phone:b,password:E,options:A}=e;l=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:b,password:E,data:(s=A==null?void 0:A.data)!==null&&s!==void 0?s:{},channel:(a=A==null?void 0:A.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken}},xform:dr})}else throw new Ch("You must provide either an email or phone number and a password");const{data:c,error:f}=l;if(f||!c)return this._returnResult({data:{user:null,session:null},error:f});const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(l){if(ye(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let t;if("email"in e){const{email:l,password:c,options:f}=e;t=await Te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:nb})}else if("phone"in e){const{phone:l,password:c,options:f}=e;t=await Te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:nb})}else throw new Ch("You must provide either an email or phone number and a password");const{data:s,error:a}=t;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const l=new fo;return this._returnResult({data:{user:null,session:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(t){if(ye(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,s,a,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,s,a,l,c,f,g,p,b,E,A;let S,k;if("message"in e)S=e.message,k=e.signature;else{const{chain:j,wallet:P,statement:G,options:J}=e;let $;if(tn())if(typeof P=="object")$=P;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")$=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof P!="object"||!(J!=null&&J.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");$=P}const se=new URL((t=J==null?void 0:J.url)!==null&&t!==void 0?t:window.location.href),Z=await $.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Z||Z.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const ae=jE(Z[0]);let C=(s=J==null?void 0:J.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!C){const I=await $.request({method:"eth_chainId"});C=l2(I)}const R={domain:se.host,address:ae,statement:G,uri:se.href,version:"1",chainId:C,nonce:(a=J==null?void 0:J.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(l=J==null?void 0:J.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(f=J==null?void 0:J.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(g=J==null?void 0:J.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(p=J==null?void 0:J.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(b=J==null?void 0:J.signInWithEthereum)===null||b===void 0?void 0:b.resources};S=c2(R),k=await $.request({method:"personal_sign",params:[u2(S),ae]})}try{const{data:j,error:P}=await Te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:k},!((E=e.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(A=e.options)===null||A===void 0?void 0:A.captchaToken}}:null),xform:dr});if(P)throw P;if(!j||!j.session||!j.user){const G=new fo;return this._returnResult({data:{user:null,session:null},error:G})}return j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),this._returnResult({data:Object.assign({},j),error:P})}catch(j){if(ye(j))return this._returnResult({data:{user:null,session:null},error:j});throw j}}async signInWithSolana(e){var t,s,a,l,c,f,g,p,b,E,A,S;let k,j;if("message"in e)k=e.message,j=e.signature;else{const{chain:P,wallet:G,statement:J,options:$}=e;let se;if(tn())if(typeof G=="object")se=G;else{const ae=window;if("solana"in ae&&typeof ae.solana=="object"&&("signIn"in ae.solana&&typeof ae.solana.signIn=="function"||"signMessage"in ae.solana&&typeof ae.solana.signMessage=="function"))se=ae.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof G!="object"||!($!=null&&$.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");se=G}const Z=new URL((t=$==null?void 0:$.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in se&&se.signIn){const ae=await se.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},$==null?void 0:$.signInWithSolana),{version:"1",domain:Z.host,uri:Z.href}),J?{statement:J}:null));let C;if(Array.isArray(ae)&&ae[0]&&typeof ae[0]=="object")C=ae[0];else if(ae&&typeof ae=="object"&&"signedMessage"in ae&&"signature"in ae)C=ae;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)k=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),j=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in se)||typeof se.signMessage!="function"||!("publicKey"in se)||typeof se!="object"||!se.publicKey||!("toBase58"in se.publicKey)||typeof se.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${Z.host} wants you to sign in with your Solana account:`,se.publicKey.toBase58(),...J?["",J,""]:[""],"Version: 1",`URI: ${Z.href}`,`Issued At: ${(a=(s=$==null?void 0:$.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=$==null?void 0:$.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${$.signInWithSolana.notBefore}`]:[],...!((c=$==null?void 0:$.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${$.signInWithSolana.expirationTime}`]:[],...!((f=$==null?void 0:$.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${$.signInWithSolana.chainId}`]:[],...!((g=$==null?void 0:$.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${$.signInWithSolana.nonce}`]:[],...!((p=$==null?void 0:$.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${$.signInWithSolana.requestId}`]:[],...!((E=(b=$==null?void 0:$.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||E===void 0)&&E.length?["Resources",...$.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const ae=await se.signMessage(new TextEncoder().encode(k),"utf8");if(!ae||!(ae instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=ae}}try{const{data:P,error:G}=await Te(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:ca(j)},!((A=e.options)===null||A===void 0)&&A.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:dr});if(G)throw G;if(!P||!P.session||!P.user){const J=new fo;return this._returnResult({data:{user:null,session:null},error:J})}return P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),this._returnResult({data:Object.assign({},P),error:G})}catch(P){if(ye(P))return this._returnResult({data:{user:null,session:null},error:P});throw P}}async _exchangeCodeForSession(e){const t=await sa(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(t??"").split("/");try{const{data:l,error:c}=await Te(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:dr});if(await ai(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const f=new fo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:c})}catch(l){if(ye(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:t,provider:s,token:a,access_token:l,nonce:c}=e,f=await Te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:dr}),{data:g,error:p}=f;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!g||!g.session||!g.user){const b=new fo;return this._returnResult({data:{user:null,session:null},error:b})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:p})}catch(t){if(ye(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,s,a,l,c;try{if("email"in e){const{email:f,options:g}=e;let p=null,b=null;this.flowType==="pkce"&&([p,b]=await mo(this.storage,this.storageKey));const{error:E}=await Te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(t=g==null?void 0:g.data)!==null&&t!==void 0?t:{},create_user:(s=g==null?void 0:g.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:p,code_challenge_method:b},redirectTo:g==null?void 0:g.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:E})}if("phone"in e){const{phone:f,options:g}=e,{data:p,error:b}=await Te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(a=g==null?void 0:g.data)!==null&&a!==void 0?a:{},create_user:(l=g==null?void 0:g.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(c=g==null?void 0:g.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:b})}throw new Ch("You must provide either an email or phone number.")}catch(f){if(ye(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(e){var t,s;try{let a,l;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,l=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:c,error:f}=await Te(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:dr});if(f)throw f;if(!c)throw new Error("An error occurred on token verification.");const g=c.session,p=c.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:p,session:g},error:null})}catch(a){if(ye(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var t,s,a,l,c;try{let f=null,g=null;this.flowType==="pkce"&&([f,g]=await mo(this.storage,this.storageKey));const p=await Te(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:g}),headers:this.headers,xform:t2});return!((l=p.data)===null||l===void 0)&&l.url&&tn()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(f){if(ye(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Pn;const{error:a}=await Te(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(ye(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:l}=e,{error:c}=await Te(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:s,type:a,options:l}=e,{data:c,error:f}=await Te(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:f})}throw new Ch("You must provide either an email or phone number and a type")}catch(t){if(ye(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await sa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Qm:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const c=await sa(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=Jm()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=JR(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:li}):await this._useSession(async t=>{var s,a,l;const{data:c,error:f}=t;if(f)throw f;return!(!((s=c.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Pn}:await Te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:li})})}catch(t){if(ye(t))return IR(t)&&(await this._removeSession(),await ai(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:a,error:l}=s;if(l)throw l;if(!a.session)throw new Pn;const c=a.session;let f=null,g=null;this.flowType==="pkce"&&e.email!=null&&([f,g]=await mo(this.storage,this.storageKey));const{data:p,error:b}=await Te(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:g}),jwt:c.access_token,xform:li});if(b)throw b;return c.user=p.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(s){if(ye(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Pn;const t=Date.now()/1e3;let s=t,a=!0,l=null;const{payload:c}=Xm(e.access_token);if(c.exp&&(s=c.exp,a=s<=t),a){const{data:f,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!f)return{data:{user:null,session:null},error:null};l=f}else{const{data:f,error:g}=await this._getUser(e.access_token);if(g)throw g;l={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(t){if(ye(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:c,error:f}=t;if(f)throw f;e=(s=c.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Pn;const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(ye(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!tn())throw new Ih("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ih(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Y0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ih("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Y0("No code detected.");const{data:J,error:$}=await this._exchangeCodeForSession(e.code);if($)throw $;const se=new URL(window.location.href);return se.searchParams.delete("code"),window.history.replaceState(window.history.state,"",se.toString()),{data:{session:J.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:l,refresh_token:c,expires_in:f,expires_at:g,token_type:p}=e;if(!l||!f||!c||!p)throw new Ih("No session defined in URL");const b=Math.round(Date.now()/1e3),E=parseInt(f);let A=b+E;g&&(A=parseInt(g));const S=A-b;S*1e3<=_o&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${E}s`);const k=A-E;b-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,A,b):b-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,A,b);const{data:j,error:P}=await this._getUser(l);if(P)throw P;const G={provider_token:s,provider_refresh_token:a,access_token:l,expires_in:E,expires_at:A,refresh_token:c,token_type:p,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:G,redirectType:e.type},error:null})}catch(s){if(ye(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await sa(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:a,error:l}=t;if(l)return this._returnResult({error:l});const c=(s=a.session)===null||s===void 0?void 0:s.access_token;if(c){const{error:f}=await this.admin.signOut(c,e);if(f&&!(CR(f)&&(f.status===404||f.status===401||f.status===403)))return this._returnResult({error:f})}return e!=="others"&&(await this._removeSession(),await ai(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=VR(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,a;try{const{data:{session:l},error:c}=t;if(c)throw c;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,t={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await mo(this.storage,this.storageKey,!0));try{return await Te(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(l){if(ye(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(ye(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:s,error:a}=await this._useSession(async l=>{var c,f,g,p,b;const{data:E,error:A}=l;if(A)throw A;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await Te(this.fetch,"GET",S,{headers:this.headers,jwt:(b=(p=E.session)===null||p===void 0?void 0:p.access_token)!==null&&b!==void 0?b:void 0})});if(a)throw a;return tn()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(ye(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var s;try{const{error:a,data:{session:l}}=t;if(a)throw a;const{options:c,provider:f,token:g,access_token:p,nonce:b}=e,E=await Te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=l==null?void 0:l.access_token)!==null&&s!==void 0?s:void 0,body:{provider:f,id_token:g,access_token:p,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:dr}),{data:A,error:S}=E;return S?this._returnResult({data:{user:null,session:null},error:S}):!A||!A.session||!A.user?this._returnResult({data:{user:null,session:null},error:new fo}):(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("USER_UPDATED",A.session)),this._returnResult({data:A,error:S}))}catch(a){if(ye(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,a;const{data:l,error:c}=t;if(c)throw c;return await Te(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(ye(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await BR(async a=>(a>0&&await zR(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await Te(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:dr})),(a,l)=>{const c=200*Math.pow(2,a);return l&&Ym(l)&&Date.now()+c-s<_o})}catch(s){if(this._debug(t,"error",s),ye(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),tn()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await sa(this.storage,this.storageKey);if(a&&this.userStorage){let c=await sa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await vo(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:Jm()}else if(a&&!a.user&&!a.user){const c=await sa(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(a.user=c.user,await ai(this.storage,this.storageKey+"-user"),await vo(this.storage,this.storageKey,a)):a.user=Jm()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const l=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Qm;if(this._debug(s,`session has${l?"":" not"} expired with margin of ${Qm}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),Ym(c)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:f}=await this._getUser(a.access_token);!f&&(c!=null&&c.user)?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(s,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Pn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new NE;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new Pn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const f={data:l.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(l){if(this._debug(a,"error",l),ye(l)){const c={data:null,error:l};return Ym(l)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(c),c}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,t)}catch(g){l.push(g)}});if(await Promise.all(c),l.length>0){for(let f=0;f<l.length;f+=1)console.error(l[f]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await vo(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const l=eb(a);await vo(this.storage,this.storageKey,l)}else{const a=eb(t);await vo(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await ai(this.storage,this.storageKey),await ai(this.storage,this.storageKey+"-code-verifier"),await ai(this.storage,this.storageKey+"-user"),this.userStorage&&await ai(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&tn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),_o);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/_o);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${_o}ms, refresh threshold is ${wg} ticks`),a<=wg&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof kE)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!tn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const a=[`provider=${encodeURIComponent(t)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[l,c]=await mo(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(f.toString())}if(s!=null&&s.queryParams){const l=new URLSearchParams(s.queryParams);a.push(l.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:a,error:l}=t;return l?this._returnResult({data:null,error:l}):await Te(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(ye(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,a;const{data:l,error:c}=t;if(c)return this._returnResult({data:null,error:c});const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:g,error:p}=await Te(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(s=l==null?void 0:l.session)===null||s===void 0?void 0:s.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&g.type==="totp"&&(!((a=g==null?void 0:g.totp)===null||a===void 0)&&a.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(t){if(ye(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?y2(e.webauthn.credential_response):_2(e.webauthn.credential_response)})}:{code:e.code}),{data:f,error:g}=await Te(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:g}))})}catch(t){if(ye(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=await Te(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});if(c.error)return c;const{data:f}=c;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:g2(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:p2(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(ye(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Xm(s.access_token);let c=null;l.aal&&(c=l.aal);let f=c;((t=(e=s.user.factors)===null||e===void 0?void 0:e.filter(b=>b.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(f="aal2");const p=l.amr||[];return{data:{currentLevel:c,nextLevel:f,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:s},error:a}=t;return a?this._returnResult({data:null,error:a}):s?await Te(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Pn})})}catch(t){if(ye(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:a},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Pn});const c=await Te(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return c.data&&c.data.redirect_url&&tn()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(s){if(ye(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:a},error:l}=s;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Pn});const c=await Te(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return c.data&&c.data.redirect_url&&tn()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(s){if(ye(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;return s?this._returnResult({data:null,error:s}):t?await Te(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Pn})})}catch(e){if(ye(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:s},error:a}=t;return a?this._returnResult({data:null,error:a}):s?(await Te(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Pn})})}catch(t){if(ye(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(f=>f.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(f=>f.kid===e),s&&this.jwks_cached_at+xR>a)return s;const{data:l,error:c}=await Te(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,s=l.keys.find(f=>f.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:S,error:k}=await this.getSession();if(k||!S.session)return this._returnResult({data:null,error:k});s=S.session.access_token}const{header:a,payload:l,signature:c,raw:{header:f,payload:g}}=Xm(s);t!=null&&t.allowExpired||QR(l.exp);const p=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!p){const{error:S}=await this.getUser(s);if(S)throw S;return{data:{claims:l,header:a,signature:c},error:null}}const b=YR(a.alg),E=await crypto.subtle.importKey("jwk",p,b,!0,["verify"]);if(!await crypto.subtle.verify(b,E,c,PR(`${f}.${g}`)))throw new Sg("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(s){if(ye(s))return this._returnResult({data:null,error:s});throw s}}}Eu.nextInstanceID={};const R2=Eu;class C2 extends R2{constructor(e){super(e)}}class I2{constructor(e,t,s){var a,l,c;this.supabaseUrl=e,this.supabaseKey=t;const f=wR(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",f),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",f),this.storageUrl=new URL("storage/v1",f),this.functionsUrl=new URL("functions/v1",f);const g=`sb-${f.hostname.split(".")[0]}-auth-token`,p={db:fR,realtime:gR,auth:Object.assign(Object.assign({},mR),{storageKey:g}),global:dR},b=bR(s??{},p);this.storageKey=(a=b.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=b.global.headers)!==null&&l!==void 0?l:{},b.accessToken?(this.accessToken=b.accessToken,this.auth=new Proxy({},{get:(E,A)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(A)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=b.auth)!==null&&c!==void 0?c:{},this.headers,b.global.fetch),this.fetch=_R(t,this._getAccessToken.bind(this),b.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},b.realtime)),this.accessToken&&this.accessToken().then(E=>this.realtime.setAuth(E)).catch(E=>console.warn("Failed to set initial Realtime auth token:",E)),this.rest=new gx(new URL("rest/v1",f).href,{headers:this.headers,schema:b.db.schema,fetch:this.fetch}),this.storage=new uR(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),b.accessToken||this._listenForAuthEvents()}get functions(){return new hx(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:s}=await this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,userStorage:l,storageKey:c,flowType:f,lock:g,debug:p,throwOnError:b},E,A){const S={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new C2({url:this.authUrl.href,headers:Object.assign(Object.assign({},S),E),storageKey:c,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:a,userStorage:l,flowType:f,lock:g,debug:p,throwOnError:b,fetch:A,hasCustomAuthorizationHeader:Object.keys(this.headers).some(k=>k.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new kx(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const N2=(r,e,t)=>new I2(r,e,t);function O2(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}O2()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const k2="https://hykypgxaegmufdothwbv.supabase.co",j2="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh5a3lwZ3hhZWdtdWZkb3Rod2J2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1NTE3NzMsImV4cCI6MjA3NzEyNzc3M30.Euzl2vfhHrxhgN-tfg2XftMaX9hEiJOorSJq16n2CRY",Ag=N2(k2,j2,{auth:{storageKey:"sb-hykypgxaegmufdothwbv-auth-token",persistSession:!0,autoRefreshToken:!0}}),D2=()=>{};var ob={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let a=r.charCodeAt(s);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},P2=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const a=r[t++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[t++];e[s++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[t++],c=r[t++],f=r[t++],g=((a&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],c=r[t++];e[s++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},ME={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<r.length;a+=3){const l=r[a],c=a+1<r.length,f=c?r[a+1]:0,g=a+2<r.length,p=g?r[a+2]:0,b=l>>2,E=(l&3)<<4|f>>4;let A=(f&15)<<2|p>>6,S=p&63;g||(S=64,c||(A=64)),s.push(t[b],t[E],t[A],t[S])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(PE(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):P2(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<r.length;){const l=t[r.charAt(a++)],f=a<r.length?t[r.charAt(a)]:0;++a;const p=a<r.length?t[r.charAt(a)]:64;++a;const E=a<r.length?t[r.charAt(a)]:64;if(++a,l==null||f==null||p==null||E==null)throw new M2;const A=l<<2|f>>4;if(s.push(A),p!==64){const S=f<<4&240|p>>2;if(s.push(S),E!==64){const k=p<<6&192|E;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class M2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const V2=function(r){const e=PE(r);return ME.encodeByteArray(e,!0)},Jh=function(r){return V2(r).replace(/\./g,"")},VE=function(r){try{return ME.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=()=>U2().__FIREBASE_DEFAULTS__,z2=()=>{if(typeof process>"u"||typeof ob>"u")return;const r=ob.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},B2=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&VE(r[1]);return e&&JSON.parse(e)},_d=()=>{try{return D2()||L2()||z2()||B2()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},UE=r=>{var e,t;return(t=(e=_d())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},q2=r=>{const e=UE(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},LE=()=>{var r;return(r=_d())==null?void 0:r.config},zE=r=>{var e;return(e=_d())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function BE(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",a=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Jh(JSON.stringify(t)),Jh(JSON.stringify(c)),""].join(".")}const fu={};function F2(){const r={prod:[],emulator:[]};for(const e of Object.keys(fu))fu[e]?r.emulator.push(e):r.prod.push(e);return r}function G2(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let lb=!1;function qE(r,e){if(typeof window>"u"||typeof document>"u"||!$o(window.location.host)||fu[r]===e||fu[r]||lb)return;fu[r]=e;function t(A){return`__firebase__banner__${A}`}const s="__firebase__banner",l=F2().prod.length>0;function c(){const A=document.getElementById(s);A&&A.remove()}function f(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,S){A.setAttribute("width","24"),A.setAttribute("id",S),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function p(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{lb=!0,c()},A}function b(A,S){A.setAttribute("id",S),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function E(){const A=G2(s),S=t("text"),k=document.getElementById(S)||document.createElement("span"),j=t("learnmore"),P=document.getElementById(j)||document.createElement("a"),G=t("preprendIcon"),J=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const $=A.element;f($),b(P,j);const se=p();g(J,G),$.append(J,k,P,se),document.body.appendChild($)}l?(k.innerText="Preview backend disconnected.",J.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(J.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function K2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function Q2(){var e;const r=(e=_d())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Y2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function X2(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function J2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function W2(){const r=dn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Z2(){return!Q2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eC(){try{return typeof indexedDB=="object"}catch{return!1}}function tC(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="FirebaseError";class Ss extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=nC,Object.setPrototypeOf(this,Ss.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pu.prototype.create)}}class Pu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?rC(l,s):"Error",f=`${this.serviceName}: ${c} (${a}).`;return new Ss(a,f,s)}}function rC(r,e){return r.replace(sC,(t,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const sC=/\{\$([^}]+)}/g;function iC(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function fa(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const a of t){if(!s.includes(a))return!1;const l=r[a],c=e[a];if(ub(l)&&ub(c)){if(!fa(l,c))return!1}else if(l!==c)return!1}for(const a of s)if(!t.includes(a))return!1;return!0}function ub(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function iu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[a,l]=s.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function au(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function aC(r,e){const t=new oC(r,e);return t.subscribe.bind(t)}class oC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let a;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");lC(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:s},a.next===void 0&&(a.next=Zm),a.error===void 0&&(a.error=Zm),a.complete===void 0&&(a.complete=Zm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lC(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Zm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(r){return r&&r._delegate?r._delegate:r}class ma{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new H2;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hC(e))try{this.getOrInitializeService({instanceIdentifier:aa})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});s.resolve(l)}catch{}}}}clearInstance(e=aa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=aa){return this.instances.has(e)}getOptions(e=aa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&c.resolve(a)}return a}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const a of s)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:cC(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=aa){return this.component?this.component.multipleInstances?e:aa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cC(r){return r===aa?void 0:r}function hC(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new uC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(ze||(ze={}));const fC={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},mC=ze.INFO,gC={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},pC=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),a=gC[e];if(a)console[a](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cp{constructor(e){this.name=e,this._logLevel=mC,this._logHandler=pC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const yC=(r,e)=>e.some(t=>r instanceof t);let cb,hb;function _C(){return cb||(cb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vC(){return hb||(hb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const HE=new WeakMap,xg=new WeakMap,$E=new WeakMap,eg=new WeakMap,hp=new WeakMap;function bC(r){const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",c)},l=()=>{t(mi(r.result)),a()},c=()=>{s(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&HE.set(t,r)}).catch(()=>{}),hp.set(e,r),e}function wC(r){if(xg.has(r))return;const e=new Promise((t,s)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",c),r.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{s(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",c),r.addEventListener("abort",c)});xg.set(r,e)}let Rg={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return xg.get(r);if(e==="objectStoreNames")return r.objectStoreNames||$E.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return mi(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function EC(r){Rg=r(Rg)}function TC(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(tg(this),e,...t);return $E.set(s,e.sort?e.sort():[e]),mi(s)}:vC().includes(r)?function(...e){return r.apply(tg(this),e),mi(HE.get(this))}:function(...e){return mi(r.apply(tg(this),e))}}function SC(r){return typeof r=="function"?TC(r):(r instanceof IDBTransaction&&wC(r),yC(r,_C())?new Proxy(r,Rg):r)}function mi(r){if(r instanceof IDBRequest)return bC(r);if(eg.has(r))return eg.get(r);const e=SC(r);return e!==r&&(eg.set(r,e),hp.set(e,r)),e}const tg=r=>hp.get(r);function AC(r,e,{blocked:t,upgrade:s,blocking:a,terminated:l}={}){const c=indexedDB.open(r,e),f=mi(c);return s&&c.addEventListener("upgradeneeded",g=>{s(mi(c.result),g.oldVersion,g.newVersion,mi(c.transaction),g)}),t&&c.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),a&&g.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const xC=["get","getKey","getAll","getAllKeys","count"],RC=["put","add","delete","clear"],ng=new Map;function db(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(ng.get(e))return ng.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,a=RC.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(a||xC.includes(t)))return;const l=async function(c,...f){const g=this.transaction(c,a?"readwrite":"readonly");let p=g.store;return s&&(p=p.index(f.shift())),(await Promise.all([p[t](...f),a&&g.done]))[0]};return ng.set(e,l),l}EC(r=>({...r,get:(e,t,s)=>db(e,t)||r.get(e,t,s),has:(e,t)=>!!db(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(IC(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function IC(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cg="@firebase/app",fb="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=new cp("@firebase/app"),NC="@firebase/app-compat",OC="@firebase/analytics-compat",kC="@firebase/analytics",jC="@firebase/app-check-compat",DC="@firebase/app-check",PC="@firebase/auth",MC="@firebase/auth-compat",VC="@firebase/database",UC="@firebase/data-connect",LC="@firebase/database-compat",zC="@firebase/functions",BC="@firebase/functions-compat",qC="@firebase/installations",HC="@firebase/installations-compat",$C="@firebase/messaging",FC="@firebase/messaging-compat",GC="@firebase/performance",KC="@firebase/performance-compat",QC="@firebase/remote-config",YC="@firebase/remote-config-compat",XC="@firebase/storage",JC="@firebase/storage-compat",WC="@firebase/firestore",ZC="@firebase/ai",eI="@firebase/firestore-compat",tI="firebase",nI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig="[DEFAULT]",rI={[Cg]:"fire-core",[NC]:"fire-core-compat",[kC]:"fire-analytics",[OC]:"fire-analytics-compat",[DC]:"fire-app-check",[jC]:"fire-app-check-compat",[PC]:"fire-auth",[MC]:"fire-auth-compat",[VC]:"fire-rtdb",[UC]:"fire-data-connect",[LC]:"fire-rtdb-compat",[zC]:"fire-fn",[BC]:"fire-fn-compat",[qC]:"fire-iid",[HC]:"fire-iid-compat",[$C]:"fire-fcm",[FC]:"fire-fcm-compat",[GC]:"fire-perf",[KC]:"fire-perf-compat",[QC]:"fire-rc",[YC]:"fire-rc-compat",[XC]:"fire-gcs",[JC]:"fire-gcs-compat",[WC]:"fire-fst",[eI]:"fire-fst-compat",[ZC]:"fire-vertex","fire-js":"fire-js",[tI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu=new Map,sI=new Map,Ng=new Map;function mb(r,e){try{r.container.addComponent(e)}catch(t){bs.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function ko(r){const e=r.name;if(Ng.has(e))return bs.debug(`There were multiple attempts to register component ${e}.`),!1;Ng.set(e,r);for(const t of Tu.values())mb(t,r);for(const t of sI.values())mb(t,r);return!0}function dp(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function gr(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gi=new Pu("app","Firebase",iI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ma("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo=nI;function FE(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Ig,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw gi.create("bad-app-name",{appName:String(a)});if(t||(t=LE()),!t)throw gi.create("no-options");const l=Tu.get(a);if(l){if(fa(t,l.options)&&fa(s,l.config))return l;throw gi.create("duplicate-app",{appName:a})}const c=new dC(a);for(const g of Ng.values())c.addComponent(g);const f=new aI(t,s,c);return Tu.set(a,f),f}function fp(r=Ig){const e=Tu.get(r);if(!e&&r===Ig&&LE())return FE();if(!e)throw gi.create("no-app",{appName:r});return e}function oI(){return Array.from(Tu.values())}function pi(r,e,t){let s=rI[r]??r;t&&(s+=`-${t}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${s}" with version "${e}":`];a&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bs.warn(c.join(" "));return}ko(new ma(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="firebase-heartbeat-database",uI=1,Su="firebase-heartbeat-store";let rg=null;function GE(){return rg||(rg=AC(lI,uI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Su)}catch(t){console.warn(t)}}}}).catch(r=>{throw gi.create("idb-open",{originalErrorMessage:r.message})})),rg}async function cI(r){try{const t=(await GE()).transaction(Su),s=await t.objectStore(Su).get(KE(r));return await t.done,s}catch(e){if(e instanceof Ss)bs.warn(e.message);else{const t=gi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bs.warn(t.message)}}}async function gb(r,e){try{const s=(await GE()).transaction(Su,"readwrite");await s.objectStore(Su).put(e,KE(r)),await s.done}catch(t){if(t instanceof Ss)bs.warn(t.message);else{const s=gi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});bs.warn(s.message)}}}function KE(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=1024,dI=30;class fI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new gI(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=pb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>dI){const c=pI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){bs.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=pb(),{heartbeatsToSend:s,unsentEntries:a}=mI(this._heartbeatsCache.heartbeats),l=Jh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return bs.warn(t),""}}}function pb(){return new Date().toISOString().substring(0,10)}function mI(r,e=hI){const t=[];let s=r.slice();for(const a of r){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),yb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),yb(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class gI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eC()?tC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await cI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return gb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return gb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function yb(r){return Jh(JSON.stringify({version:2,heartbeats:r})).length}function pI(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(r){ko(new ma("platform-logger",e=>new CC(e),"PRIVATE")),ko(new ma("heartbeat",e=>new fI(e),"PRIVATE")),pi(Cg,fb,r),pi(Cg,fb,"esm2020"),pi("fire-js","")}yI("");var _I="firebase",vI="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pi(_I,vI,"app");function QE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bI=QE,YE=new Pu("auth","Firebase",QE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh=new cp("@firebase/auth");function wI(r,...e){Wh.logLevel<=ze.WARN&&Wh.warn(`Auth (${Fo}): ${r}`,...e)}function Mh(r,...e){Wh.logLevel<=ze.ERROR&&Wh.error(`Auth (${Fo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(r,...e){throw mp(r,...e)}function qr(r,...e){return mp(r,...e)}function XE(r,e,t){const s={...bI(),[e]:t};return new Pu("auth","Firebase",s).create(e,{appName:r.name})}function yi(r){return XE(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mp(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return YE.create(r,...e)}function Se(r,e,...t){if(!r)throw mp(e,...t)}function ps(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Mh(e),new Error(e)}function ws(r,e){r||ps(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function EI(){return _b()==="http:"||_b()==="https:"}function _b(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(EI()||X2()||"connection"in navigator)?navigator.onLine:!0}function SI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,t){this.shortDelay=e,this.longDelay=t,ws(t>e,"Short delay should be less than long delay!"),this.isMobile=K2()||J2()}get(){return TI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(r,e){ws(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ps("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ps("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ps("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],RI=new Vu(3e4,6e4);function _a(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Ri(r,e,t,s,a={}){return WE(r,a,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const f=Mu({key:r.config.apiKey,...c}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const p={method:e,headers:g,...l};return Y2()||(p.referrerPolicy="no-referrer"),r.emulatorConfig&&$o(r.emulatorConfig.host)&&(p.credentials="include"),JE.fetch()(await ZE(r,r.config.apiHost,t,f),p)})}async function WE(r,e,t){r._canInitEmulator=!1;const s={...AI,...e};try{const a=new II(r),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Nh(r,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[g,p]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nh(r,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw Nh(r,"email-already-in-use",c);if(g==="USER_DISABLED")throw Nh(r,"user-disabled",c);const b=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw XE(r,b,p);_r(r,b)}}catch(a){if(a instanceof Ss)throw a;_r(r,"network-request-failed",{message:String(a)})}}async function vd(r,e,t,s,a={}){const l=await Ri(r,e,t,s,a);return"mfaPendingCredential"in l&&_r(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function ZE(r,e,t,s){const a=`${e}${t}?${s}`,l=r,c=l.config.emulator?gp(r.config,a):`${r.config.apiScheme}://${a}`;return xI.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function CI(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class II{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(qr(this.auth,"network-request-failed")),RI.get())})}}function Nh(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const a=qr(r,e,s);return a.customData._tokenResponse=t,a}function vb(r){return r!==void 0&&r.enterprise!==void 0}class NI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return CI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function OI(r,e){return Ri(r,"GET","/v2/recaptchaConfig",_a(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kI(r,e){return Ri(r,"POST","/v1/accounts:delete",e)}async function Zh(r,e){return Ri(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jI(r,e=!1){const t=An(r),s=await t.getIdToken(e),a=pp(s);Se(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:s,authTime:mu(sg(a.auth_time)),issuedAtTime:mu(sg(a.iat)),expirationTime:mu(sg(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function sg(r){return Number(r)*1e3}function pp(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Mh("JWT malformed, contained fewer than 3 sections"),null;try{const a=VE(t);return a?JSON.parse(a):(Mh("Failed to decode base64 JWT payload"),null)}catch(a){return Mh("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function bb(r){const e=pp(r);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Au(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Ss&&DI(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function DI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mu(this.lastLoginAt),this.creationTime=mu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ed(r){var E;const e=r.auth,t=await r.getIdToken(),s=await Au(r,Zh(e,{idToken:t}));Se(s==null?void 0:s.users.length,e,"internal-error");const a=s.users[0];r._notifyReloadListener(a);const l=(E=a.providerUserInfo)!=null&&E.length?eT(a.providerUserInfo):[],c=VI(r.providerData,l),f=r.isAnonymous,g=!(r.email&&a.passwordHash)&&!(c!=null&&c.length),p=f?g:!1,b={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new kg(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(r,b)}async function MI(r){const e=An(r);await ed(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function VI(r,e){return[...r.filter(s=>!e.some(a=>a.providerId===s.providerId)),...e]}function eT(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UI(r,e){const t=await WE(r,{},async()=>{const s=Mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=r.config,c=await ZE(r,a,"/v1/token",`key=${l}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:f,body:s};return r.emulatorConfig&&$o(r.emulatorConfig.host)&&(g.credentials="include"),JE.fetch()(c,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function LI(r,e){return Ri(r,"POST","/v2/accounts:revokeToken",_a(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):bb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=bb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:a,expiresIn:l}=await UI(e,t);this.updateTokensAndExpiration(s,a,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:a,expirationTime:l}=t,c=new xo;return s&&(Se(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),a&&(Se(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Se(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xo,this.toJSON())}_performRefresh(){return ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(r,e){Se(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class pr{constructor({uid:e,auth:t,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new PI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new kg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Au(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return jI(this,e)}reload(){return MI(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new pr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await ed(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gr(this.auth.app))return Promise.reject(yi(this.auth));const e=await this.getIdToken();return await Au(this,kI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,g=t._redirectEventId??void 0,p=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:E,emailVerified:A,isAnonymous:S,providerData:k,stsTokenManager:j}=t;Se(E&&j,e,"internal-error");const P=xo.fromJSON(this.name,j);Se(typeof E=="string",e,"internal-error"),oi(s,e.name),oi(a,e.name),Se(typeof A=="boolean",e,"internal-error"),Se(typeof S=="boolean",e,"internal-error"),oi(l,e.name),oi(c,e.name),oi(f,e.name),oi(g,e.name),oi(p,e.name),oi(b,e.name);const G=new pr({uid:E,auth:e,email:a,emailVerified:A,displayName:s,isAnonymous:S,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:P,createdAt:p,lastLoginAt:b});return k&&Array.isArray(k)&&(G.providerData=k.map(J=>({...J}))),g&&(G._redirectEventId=g),G}static async _fromIdTokenResponse(e,t,s=!1){const a=new xo;a.updateFromServerResponse(t);const l=new pr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:s});return await ed(l),l}static async _fromGetAccountInfoResponse(e,t,s){const a=t.users[0];Se(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?eT(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),f=new xo;f.updateFromIdToken(s);const g=new pr({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new kg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb=new Map;function ys(r){ws(r instanceof Function,"Expected a class definition");let e=wb.get(r);return e?(ws(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,wb.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}tT.type="NONE";const Eb=tT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(r,e,t){return`firebase:${r}:${e}:${t}`}class Ro{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:a,name:l}=this.auth;this.fullUserKey=Vh(this.userKey,a.apiKey,l),this.fullPersistenceKey=Vh("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Zh(this.auth,{idToken:e}).catch(()=>{});return t?pr._fromGetAccountInfoResponse(this.auth,t,e):null}return pr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Ro(ys(Eb),e,s);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||ys(Eb);const c=Vh(s,e.config.apiKey,e.name);let f=null;for(const p of t)try{const b=await p._get(c);if(b){let E;if(typeof b=="string"){const A=await Zh(e,{idToken:b}).catch(()=>{});if(!A)break;E=await pr._fromGetAccountInfoResponse(e,A,b)}else E=pr._fromJSON(e,b);p!==l&&(f=E),l=p;break}}catch{}const g=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Ro(l,e,s):(l=g[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new Ro(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oT(e))return"Blackberry";if(lT(e))return"Webos";if(rT(e))return"Safari";if((e.includes("chrome/")||sT(e))&&!e.includes("edge/"))return"Chrome";if(aT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function nT(r=dn()){return/firefox\//i.test(r)}function rT(r=dn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sT(r=dn()){return/crios\//i.test(r)}function iT(r=dn()){return/iemobile/i.test(r)}function aT(r=dn()){return/android/i.test(r)}function oT(r=dn()){return/blackberry/i.test(r)}function lT(r=dn()){return/webos/i.test(r)}function yp(r=dn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function zI(r=dn()){var e;return yp(r)&&!!((e=window.navigator)!=null&&e.standalone)}function BI(){return W2()&&document.documentMode===10}function uT(r=dn()){return yp(r)||aT(r)||lT(r)||oT(r)||/windows phone/i.test(r)||iT(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(r,e=[]){let t;switch(r){case"Browser":t=Tb(dn());break;case"Worker":t=`${Tb(dn())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Fo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,f)=>{try{const g=e(l);c(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HI(r,e={}){return Ri(r,"GET","/v2/passwordPolicy",_a(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=6;class FI{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??$I,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let a=0;a<e.length;a++)s=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,t,s,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sb(this),this.idTokenSubscription=new Sb(this),this.beforeStateQueue=new qI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ys(t)),this._initializationPromise=this.queue(async()=>{var s,a,l;if(!this._deleted&&(this.persistenceManager=await Ro.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Zh(this,{idToken:e}),s=await pr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(gr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=s==null?void 0:s._redirectEventId,g=await this.tryRedirectSignIn(e);(!c||c===f)&&(g!=null&&g.user)&&(s=g.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ed(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gr(this.app))return Promise.reject(yi(this));const t=e?An(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gr(this.app)?Promise.reject(yi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gr(this.app)?Promise.reject(yi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ys(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await HI(this),t=new FI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await LI(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ys(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Ro.create(this,[ys(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,a);return()=>{c=!0,g()}}else{const g=e.addObserver(t);return()=>{c=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(gr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&wI(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Go(r){return An(r)}class Sb{constructor(e){this.auth=e,this.observer=null,this.addObserver=aC(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KI(r){bd=r}function hT(r){return bd.loadJS(r)}function QI(){return bd.recaptchaEnterpriseScript}function YI(){return bd.gapiScript}function XI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class JI{constructor(){this.enterprise=new WI}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class WI{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const ZI="recaptcha-enterprise",dT="NO_RECAPTCHA";class eN{constructor(e){this.type=ZI,this.auth=Go(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,f)=>{OI(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const p=new NI(g);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,c(p.siteKey)}}).catch(g=>{f(g)})})}function a(l,c,f){const g=window.grecaptcha;vb(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(p=>{c(p)}).catch(()=>{c(dT)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new JI().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{s(this.auth).then(f=>{if(!t&&vb(window.grecaptcha))a(f,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let g=QI();g.length!==0&&(g+=f),hT(g).then(()=>{a(f,l,c)}).catch(p=>{c(p)})}}).catch(f=>{c(f)})})}}async function Ab(r,e,t,s=!1,a=!1){const l=new eN(r);let c;if(a)c=dT;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const g=f.phoneEnrollmentInfo.phoneNumber,p=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const g=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return s?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function xb(r,e,t,s,a){var l;if((l=r._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Ab(r,e,t,t==="getOobCode");return s(r,c)}else return s(r,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Ab(r,e,t,t==="getOobCode");return s(r,f)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(r,e){const t=dp(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(fa(l,e??{}))return a;_r(a,"already-initialized")}return t.initialize({options:e})}function nN(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(ys);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function rN(r,e,t){const s=Go(r);Se(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const a=!1,l=fT(e),{host:c,port:f}=sN(e),g=f===null?"":`:${f}`,p={url:`${l}//${c}${g}/`},b=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){Se(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Se(fa(p,s.config.emulator)&&fa(b,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=b,s.settings.appVerificationDisabledForTesting=!0,$o(c)?(BE(`${l}//${c}${g}`),qE("Auth",!0)):iN()}function fT(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function sN(r){const e=fT(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const l=a[1];return{host:l,port:Rb(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:Rb(c)}}}function Rb(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function iN(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ps("not implemented")}_getIdTokenResponse(e){return ps("not implemented")}_linkToIdToken(e,t){return ps("not implemented")}_getReauthenticationResolver(e){return ps("not implemented")}}async function aN(r,e){return Ri(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oN(r,e){return vd(r,"POST","/v1/accounts:signInWithPassword",_a(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lN(r,e){return vd(r,"POST","/v1/accounts:signInWithEmailLink",_a(r,e))}async function uN(r,e){return vd(r,"POST","/v1/accounts:signInWithEmailLink",_a(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu extends _p{constructor(e,t,s,a=null){super("password",s),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new xu(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new xu(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xb(e,t,"signInWithPassword",oN);case"emailLink":return lN(e,{email:this._email,oobCode:this._password});default:_r(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xb(e,s,"signUpPassword",aN);case"emailLink":return uN(e,{idToken:t,email:this._email,oobCode:this._password});default:_r(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Co(r,e){return vd(r,"POST","/v1/accounts:signInWithIdp",_a(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN="http://localhost";class ga extends _p{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ga(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_r("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:a,...l}=t;if(!s||!a)return null;const c=new ga(s,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Co(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Co(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Co(e,t)}buildRequest(){const e={requestUri:cN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Mu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dN(r){const e=iu(au(r)).link,t=e?iu(au(e)).deep_link_id:null,s=iu(au(r)).deep_link_id;return(s?iu(au(s)).link:null)||s||t||e||r}class vp{constructor(e){const t=iu(au(e)),s=t.apiKey??null,a=t.oobCode??null,l=hN(t.mode??null);Se(s&&a&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=dN(e);try{return new vp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.providerId=Ko.PROVIDER_ID}static credential(e,t){return xu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=vp.parseLink(t);return Se(s,"argument-error"),xu._fromEmailAndCode(e,s.code,s.tenantId)}}Ko.PROVIDER_ID="password";Ko.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ko.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu extends mT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends Uu{constructor(){super("facebook.com")}static credential(e){return ga._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ui.credential(e.oauthAccessToken)}catch{return null}}}ui.FACEBOOK_SIGN_IN_METHOD="facebook.com";ui.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends Uu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ga._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return ci.credential(t,s)}catch{return null}}}ci.GOOGLE_SIGN_IN_METHOD="google.com";ci.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends Uu{constructor(){super("github.com")}static credential(e){return ga._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hi.credential(e.oauthAccessToken)}catch{return null}}}hi.GITHUB_SIGN_IN_METHOD="github.com";hi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends Uu{constructor(){super("twitter.com")}static credential(e,t){return ga._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return di.credential(t,s)}catch{return null}}}di.TWITTER_SIGN_IN_METHOD="twitter.com";di.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,a=!1){const l=await pr._fromIdTokenResponse(e,s,a),c=Cb(s);return new jo({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const a=Cb(s);return new jo({user:e,providerId:a,_tokenResponse:s,operationType:t})}}function Cb(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td extends Ss{constructor(e,t,s,a){super(t.code,t.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,td.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,a){return new td(e,t,s,a)}}function gT(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?td._fromErrorAndOperation(r,l,e,s):l})}async function fN(r,e,t=!1){const s=await Au(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return jo._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mN(r,e,t=!1){const{auth:s}=r;if(gr(s.app))return Promise.reject(yi(s));const a="reauthenticate";try{const l=await Au(r,gT(s,a,e,r),t);Se(l.idToken,s,"internal-error");const c=pp(l.idToken);Se(c,s,"internal-error");const{sub:f}=c;return Se(r.uid===f,s,"user-mismatch"),jo._forOperation(r,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&_r(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pT(r,e,t=!1){if(gr(r.app))return Promise.reject(yi(r));const s="signIn",a=await gT(r,s,e),l=await jo._fromIdTokenResponse(r,s,a);return t||await r._updateCurrentUser(l.user),l}async function gN(r,e){return pT(Go(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pN(r){const e=Go(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function yN(r,e,t){return gr(r.app)?Promise.reject(yi(r)):gN(An(r),Ko.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&pN(r),s})}function _N(r,e,t,s){return An(r).onIdTokenChanged(e,t,s)}function vN(r,e,t){return An(r).beforeAuthStateChanged(e,t)}function bN(r,e,t,s){return An(r).onAuthStateChanged(e,t,s)}const nd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(nd,"1"),this.storage.removeItem(nd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN=1e3,EN=10;class _T extends yT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),a=this.localCache[t];s!==a&&e(t,a,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,g)=>{this.notifyListeners(c,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);BI()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,EN):a()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},wN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}_T.type="LOCAL";const TN=_T;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT extends yT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}vT.type="SESSION";const bT=vT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const s=new wd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const f=Array.from(c).map(async p=>p(t.origin,l)),g=await SN(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((f,g)=>{const p=bp("",20);a.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},s);c={messageChannel:a,onMessage(E){const A=E;if(A.data.eventId===p)switch(A.data.status){case"ack":clearTimeout(b),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(A.data.response);break;default:clearTimeout(b),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(){return window}function xN(r){Hr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(){return typeof Hr().WorkerGlobalScope<"u"&&typeof Hr().importScripts=="function"}async function RN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CN(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function IN(){return wT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="firebaseLocalStorageDb",NN=1,rd="firebaseLocalStorage",TT="fbase_key";class Lu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ed(r,e){return r.transaction([rd],e?"readwrite":"readonly").objectStore(rd)}function ON(){const r=indexedDB.deleteDatabase(ET);return new Lu(r).toPromise()}function jg(){const r=indexedDB.open(ET,NN);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(rd,{keyPath:TT})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(rd)?e(s):(s.close(),await ON(),e(await jg()))})})}async function Ib(r,e,t){const s=Ed(r,!0).put({[TT]:e,value:t});return new Lu(s).toPromise()}async function kN(r,e){const t=Ed(r,!1).get(e),s=await new Lu(t).toPromise();return s===void 0?null:s.value}function Nb(r,e){const t=Ed(r,!0).delete(e);return new Lu(t).toPromise()}const jN=800,DN=3;class ST{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>DN)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wd._getInstance(IN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await RN(),!this.activeServiceWorker)return;this.sender=new AN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jg();return await Ib(e,nd,"1"),await Nb(e,nd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>Ib(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>kN(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Nb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Ed(a,!1).getAll();return new Lu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const a of Array.from(s))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ST.type="LOCAL";const PN=ST;new Vu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(r,e){return e?ys(e):(Se(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp extends _p{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Co(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Co(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Co(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function VN(r){return pT(r.auth,new wp(r),r.bypassAuthState)}function UN(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),mN(t,new wp(r),r.bypassAuthState)}async function LN(r){const{auth:e,user:t}=r;return Se(t,e,"internal-error"),fN(t,new wp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,t,s,a,l=!1){this.auth=e,this.resolver=s,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:a,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(g))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VN;case"linkViaPopup":case"linkViaRedirect":return LN;case"reauthViaPopup":case"reauthViaRedirect":return UN;default:_r(this.auth,"internal-error")}}resolve(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=new Vu(2e3,1e4);class So extends AT{constructor(e,t,s,a,l){super(e,t,a,l),this.provider=s,this.authWindow=null,this.pollId=null,So.currentPopupAction&&So.currentPopupAction.cancel(),So.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){ws(this.filter.length===1,"Popup operations only handle one event");const e=bp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(qr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(qr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,So.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zN.get())};e()}}So.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN="pendingRedirect",Uh=new Map;class qN extends AT{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Uh.get(this.auth._key());if(!e){try{const s=await HN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Uh.set(this.auth._key(),e)}return this.bypassAuthState||Uh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HN(r,e){const t=GN(e),s=FN(r);if(!await s._isAvailable())return!1;const a=await s._get(t)==="true";return await s._remove(t),a}function $N(r,e){Uh.set(r._key(),e)}function FN(r){return ys(r._redirectPersistence)}function GN(r){return Vh(BN,r.config.apiKey,r.name)}async function KN(r,e,t=!1){if(gr(r.app))return Promise.reject(yi(r));const s=Go(r),a=MN(s,e),c=await new qN(s,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=600*1e3;class YN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!xT(e)){const a=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(qr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ob(e))}saveEventToCache(e){this.cachedEventUids.add(Ob(e)),this.lastProcessedEventTime=Date.now()}}function Ob(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function xT({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function XN(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xT(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(r,e={}){return Ri(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZN=/^https?/;async function eO(r){if(r.config.emulator)return;const{authorizedDomains:e}=await JN(r);for(const t of e)try{if(tO(t))return}catch{}_r(r,"unauthorized-domain")}function tO(r){const e=Og(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!ZN.test(t))return!1;if(WN.test(r))return s===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO=new Vu(3e4,6e4);function kb(){const r=Hr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function rO(r){return new Promise((e,t)=>{var a,l,c;function s(){kb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kb(),t(qr(r,"network-request-failed"))},timeout:nO.get()})}if((l=(a=Hr().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Hr().gapi)!=null&&c.load)s();else{const f=XI("iframefcb");return Hr()[f]=()=>{gapi.load?s():t(qr(r,"network-request-failed"))},hT(`${YI()}?onload=${f}`).catch(g=>t(g))}}).catch(e=>{throw Lh=null,e})}let Lh=null;function sO(r){return Lh=Lh||rO(r),Lh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO=new Vu(5e3,15e3),aO="__/auth/iframe",oO="emulator/auth/iframe",lO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cO(r){const e=r.config;Se(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?gp(e,oO):`https://${r.config.authDomain}/${aO}`,s={apiKey:e.apiKey,appName:r.name,v:Fo},a=uO.get(r.config.apiHost);a&&(s.eid=a);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Mu(s).slice(1)}`}async function hO(r){const e=await sO(r),t=Hr().gapi;return Se(t,r,"internal-error"),e.open({where:document.body,url:cO(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lO,dontclear:!0},s=>new Promise(async(a,l)=>{await s.restyle({setHideOnLeave:!1});const c=qr(r,"network-request-failed"),f=Hr().setTimeout(()=>{l(c)},iO.get());function g(){Hr().clearTimeout(f),a(s)}s.ping(g).then(g,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fO=500,mO=600,gO="_blank",pO="http://localhost";class jb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yO(r,e,t,s=fO,a=mO){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const g={...dO,width:s.toString(),height:a.toString(),top:l,left:c},p=dn().toLowerCase();t&&(f=sT(p)?gO:t),nT(p)&&(e=e||pO,g.scrollbars="yes");const b=Object.entries(g).reduce((A,[S,k])=>`${A}${S}=${k},`,"");if(zI(p)&&f!=="_self")return _O(e||"",f),new jb(null);const E=window.open(e||"",f,b);Se(E,r,"popup-blocked");try{E.focus()}catch{}return new jb(E)}function _O(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO="__/auth/handler",bO="emulator/auth/handler",wO=encodeURIComponent("fac");async function Db(r,e,t,s,a,l){Se(r.config.authDomain,r,"auth-domain-config-required"),Se(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:Fo,eventId:a};if(e instanceof mT){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",iC(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,E]of Object.entries({}))c[b]=E}if(e instanceof Uu){const b=e.getScopes().filter(E=>E!=="");b.length>0&&(c.scopes=b.join(","))}r.tenantId&&(c.tid=r.tenantId);const f=c;for(const b of Object.keys(f))f[b]===void 0&&delete f[b];const g=await r._getAppCheckToken(),p=g?`#${wO}=${encodeURIComponent(g)}`:"";return`${EO(r)}?${Mu(f).slice(1)}${p}`}function EO({config:r}){return r.emulator?gp(r,bO):`https://${r.authDomain}/${vO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig="webStorageSupport";class TO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bT,this._completeRedirectFn=KN,this._overrideRedirectResult=$N}async _openPopup(e,t,s,a){var c;ws((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await Db(e,t,s,Og(),a);return yO(e,l,bp())}async _openRedirect(e,t,s,a){await this._originValidation(e);const l=await Db(e,t,s,Og(),a);return xN(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(ws(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await hO(e),s=new YN(e);return t.register("authEvent",a=>(Se(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ig,{type:ig},a=>{var c;const l=(c=a==null?void 0:a[0])==null?void 0:c[ig];l!==void 0&&t(!!l),_r(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=eO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return uT()||rT()||yp()}}const SO=TO;var Pb="@firebase/auth",Mb="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RO(r){ko(new ma("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=s.options;Se(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:c,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cT(r)},p=new GI(s,a,l,g);return nN(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),ko(new ma("auth-internal",e=>{const t=Go(e.getProvider("auth").getImmediate());return(s=>new AO(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),pi(Pb,Mb,xO(r)),pi(Pb,Mb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=300,IO=zE("authIdTokenMaxAge")||CO;let Vb=null;const NO=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>IO)return;const a=t==null?void 0:t.token;Vb!==a&&(Vb=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function OO(r=fp()){const e=dp(r,"auth");if(e.isInitialized())return e.getImmediate();const t=tN(r,{popupRedirectResolver:SO,persistence:[PN,TN,bT]}),s=zE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=NO(l.toString());vN(t,c,()=>c(t.currentUser)),_N(t,f=>c(f))}}const a=UE("auth");return a&&rN(t,`http://${a}`),t}function kO(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}KI({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=a=>{const l=qr("internal-error");l.customData=a,t(l)},s.type="text/javascript",s.charset="UTF-8",kO().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RO("Browser");var Ub=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _i,RT;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,R){function I(){}I.prototype=R.prototype,C.F=R.prototype,C.prototype=new I,C.prototype.constructor=C,C.D=function(U,D,L){for(var N=Array(arguments.length-2),it=2;it<arguments.length;it++)N[it-2]=arguments[it];return R.prototype[D].apply(U,N)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,R,I){I||(I=0);const U=Array(16);if(typeof R=="string")for(var D=0;D<16;++D)U[D]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(D=0;D<16;++D)U[D]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=C.g[0],I=C.g[1],D=C.g[2];let L=C.g[3],N;N=R+(L^I&(D^L))+U[0]+3614090360&4294967295,R=I+(N<<7&4294967295|N>>>25),N=L+(D^R&(I^D))+U[1]+3905402710&4294967295,L=R+(N<<12&4294967295|N>>>20),N=D+(I^L&(R^I))+U[2]+606105819&4294967295,D=L+(N<<17&4294967295|N>>>15),N=I+(R^D&(L^R))+U[3]+3250441966&4294967295,I=D+(N<<22&4294967295|N>>>10),N=R+(L^I&(D^L))+U[4]+4118548399&4294967295,R=I+(N<<7&4294967295|N>>>25),N=L+(D^R&(I^D))+U[5]+1200080426&4294967295,L=R+(N<<12&4294967295|N>>>20),N=D+(I^L&(R^I))+U[6]+2821735955&4294967295,D=L+(N<<17&4294967295|N>>>15),N=I+(R^D&(L^R))+U[7]+4249261313&4294967295,I=D+(N<<22&4294967295|N>>>10),N=R+(L^I&(D^L))+U[8]+1770035416&4294967295,R=I+(N<<7&4294967295|N>>>25),N=L+(D^R&(I^D))+U[9]+2336552879&4294967295,L=R+(N<<12&4294967295|N>>>20),N=D+(I^L&(R^I))+U[10]+4294925233&4294967295,D=L+(N<<17&4294967295|N>>>15),N=I+(R^D&(L^R))+U[11]+2304563134&4294967295,I=D+(N<<22&4294967295|N>>>10),N=R+(L^I&(D^L))+U[12]+1804603682&4294967295,R=I+(N<<7&4294967295|N>>>25),N=L+(D^R&(I^D))+U[13]+4254626195&4294967295,L=R+(N<<12&4294967295|N>>>20),N=D+(I^L&(R^I))+U[14]+2792965006&4294967295,D=L+(N<<17&4294967295|N>>>15),N=I+(R^D&(L^R))+U[15]+1236535329&4294967295,I=D+(N<<22&4294967295|N>>>10),N=R+(D^L&(I^D))+U[1]+4129170786&4294967295,R=I+(N<<5&4294967295|N>>>27),N=L+(I^D&(R^I))+U[6]+3225465664&4294967295,L=R+(N<<9&4294967295|N>>>23),N=D+(R^I&(L^R))+U[11]+643717713&4294967295,D=L+(N<<14&4294967295|N>>>18),N=I+(L^R&(D^L))+U[0]+3921069994&4294967295,I=D+(N<<20&4294967295|N>>>12),N=R+(D^L&(I^D))+U[5]+3593408605&4294967295,R=I+(N<<5&4294967295|N>>>27),N=L+(I^D&(R^I))+U[10]+38016083&4294967295,L=R+(N<<9&4294967295|N>>>23),N=D+(R^I&(L^R))+U[15]+3634488961&4294967295,D=L+(N<<14&4294967295|N>>>18),N=I+(L^R&(D^L))+U[4]+3889429448&4294967295,I=D+(N<<20&4294967295|N>>>12),N=R+(D^L&(I^D))+U[9]+568446438&4294967295,R=I+(N<<5&4294967295|N>>>27),N=L+(I^D&(R^I))+U[14]+3275163606&4294967295,L=R+(N<<9&4294967295|N>>>23),N=D+(R^I&(L^R))+U[3]+4107603335&4294967295,D=L+(N<<14&4294967295|N>>>18),N=I+(L^R&(D^L))+U[8]+1163531501&4294967295,I=D+(N<<20&4294967295|N>>>12),N=R+(D^L&(I^D))+U[13]+2850285829&4294967295,R=I+(N<<5&4294967295|N>>>27),N=L+(I^D&(R^I))+U[2]+4243563512&4294967295,L=R+(N<<9&4294967295|N>>>23),N=D+(R^I&(L^R))+U[7]+1735328473&4294967295,D=L+(N<<14&4294967295|N>>>18),N=I+(L^R&(D^L))+U[12]+2368359562&4294967295,I=D+(N<<20&4294967295|N>>>12),N=R+(I^D^L)+U[5]+4294588738&4294967295,R=I+(N<<4&4294967295|N>>>28),N=L+(R^I^D)+U[8]+2272392833&4294967295,L=R+(N<<11&4294967295|N>>>21),N=D+(L^R^I)+U[11]+1839030562&4294967295,D=L+(N<<16&4294967295|N>>>16),N=I+(D^L^R)+U[14]+4259657740&4294967295,I=D+(N<<23&4294967295|N>>>9),N=R+(I^D^L)+U[1]+2763975236&4294967295,R=I+(N<<4&4294967295|N>>>28),N=L+(R^I^D)+U[4]+1272893353&4294967295,L=R+(N<<11&4294967295|N>>>21),N=D+(L^R^I)+U[7]+4139469664&4294967295,D=L+(N<<16&4294967295|N>>>16),N=I+(D^L^R)+U[10]+3200236656&4294967295,I=D+(N<<23&4294967295|N>>>9),N=R+(I^D^L)+U[13]+681279174&4294967295,R=I+(N<<4&4294967295|N>>>28),N=L+(R^I^D)+U[0]+3936430074&4294967295,L=R+(N<<11&4294967295|N>>>21),N=D+(L^R^I)+U[3]+3572445317&4294967295,D=L+(N<<16&4294967295|N>>>16),N=I+(D^L^R)+U[6]+76029189&4294967295,I=D+(N<<23&4294967295|N>>>9),N=R+(I^D^L)+U[9]+3654602809&4294967295,R=I+(N<<4&4294967295|N>>>28),N=L+(R^I^D)+U[12]+3873151461&4294967295,L=R+(N<<11&4294967295|N>>>21),N=D+(L^R^I)+U[15]+530742520&4294967295,D=L+(N<<16&4294967295|N>>>16),N=I+(D^L^R)+U[2]+3299628645&4294967295,I=D+(N<<23&4294967295|N>>>9),N=R+(D^(I|~L))+U[0]+4096336452&4294967295,R=I+(N<<6&4294967295|N>>>26),N=L+(I^(R|~D))+U[7]+1126891415&4294967295,L=R+(N<<10&4294967295|N>>>22),N=D+(R^(L|~I))+U[14]+2878612391&4294967295,D=L+(N<<15&4294967295|N>>>17),N=I+(L^(D|~R))+U[5]+4237533241&4294967295,I=D+(N<<21&4294967295|N>>>11),N=R+(D^(I|~L))+U[12]+1700485571&4294967295,R=I+(N<<6&4294967295|N>>>26),N=L+(I^(R|~D))+U[3]+2399980690&4294967295,L=R+(N<<10&4294967295|N>>>22),N=D+(R^(L|~I))+U[10]+4293915773&4294967295,D=L+(N<<15&4294967295|N>>>17),N=I+(L^(D|~R))+U[1]+2240044497&4294967295,I=D+(N<<21&4294967295|N>>>11),N=R+(D^(I|~L))+U[8]+1873313359&4294967295,R=I+(N<<6&4294967295|N>>>26),N=L+(I^(R|~D))+U[15]+4264355552&4294967295,L=R+(N<<10&4294967295|N>>>22),N=D+(R^(L|~I))+U[6]+2734768916&4294967295,D=L+(N<<15&4294967295|N>>>17),N=I+(L^(D|~R))+U[13]+1309151649&4294967295,I=D+(N<<21&4294967295|N>>>11),N=R+(D^(I|~L))+U[4]+4149444226&4294967295,R=I+(N<<6&4294967295|N>>>26),N=L+(I^(R|~D))+U[11]+3174756917&4294967295,L=R+(N<<10&4294967295|N>>>22),N=D+(R^(L|~I))+U[2]+718787259&4294967295,D=L+(N<<15&4294967295|N>>>17),N=I+(L^(D|~R))+U[9]+3951481745&4294967295,C.g[0]=C.g[0]+R&4294967295,C.g[1]=C.g[1]+(D+(N<<21&4294967295|N>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+L&4294967295}s.prototype.v=function(C,R){R===void 0&&(R=C.length);const I=R-this.blockSize,U=this.C;let D=this.h,L=0;for(;L<R;){if(D==0)for(;L<=I;)a(this,C,L),L+=this.blockSize;if(typeof C=="string"){for(;L<R;)if(U[D++]=C.charCodeAt(L++),D==this.blockSize){a(this,U),D=0;break}}else for(;L<R;)if(U[D++]=C[L++],D==this.blockSize){a(this,U),D=0;break}}this.h=D,this.o+=R},s.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var R=1;R<C.length-8;++R)C[R]=0;R=this.o*8;for(var I=C.length-8;I<C.length;++I)C[I]=R&255,R/=256;for(this.v(C),C=Array(16),R=0,I=0;I<4;++I)for(let U=0;U<32;U+=8)C[R++]=this.g[I]>>>U&255;return C};function l(C,R){var I=f;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=R(C)}function c(C,R){this.h=R;const I=[];let U=!0;for(let D=C.length-1;D>=0;D--){const L=C[D]|0;U&&L==R||(I[D]=L,U=!1)}this.g=I}var f={};function g(C){return-128<=C&&C<128?l(C,function(R){return new c([R|0],R<0?-1:0)}):new c([C|0],C<0?-1:0)}function p(C){if(isNaN(C)||!isFinite(C))return E;if(C<0)return P(p(-C));const R=[];let I=1;for(let U=0;C>=I;U++)R[U]=C/I|0,I*=4294967296;return new c(R,0)}function b(C,R){if(C.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(C.charAt(0)=="-")return P(b(C.substring(1),R));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=p(Math.pow(R,8));let U=E;for(let L=0;L<C.length;L+=8){var D=Math.min(8,C.length-L);const N=parseInt(C.substring(L,L+D),R);D<8?(D=p(Math.pow(R,D)),U=U.j(D).add(p(N))):(U=U.j(I),U=U.add(p(N)))}return U}var E=g(0),A=g(1),S=g(16777216);r=c.prototype,r.m=function(){if(j(this))return-P(this).m();let C=0,R=1;for(let I=0;I<this.g.length;I++){const U=this.i(I);C+=(U>=0?U:4294967296+U)*R,R*=4294967296}return C},r.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(k(this))return"0";if(j(this))return"-"+P(this).toString(C);const R=p(Math.pow(C,6));var I=this;let U="";for(;;){const D=se(I,R).g;I=G(I,D.j(R));let L=((I.g.length>0?I.g[0]:I.h)>>>0).toString(C);if(I=D,k(I))return L+U;for(;L.length<6;)L="0"+L;U=L+U}},r.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function k(C){if(C.h!=0)return!1;for(let R=0;R<C.g.length;R++)if(C.g[R]!=0)return!1;return!0}function j(C){return C.h==-1}r.l=function(C){return C=G(this,C),j(C)?-1:k(C)?0:1};function P(C){const R=C.g.length,I=[];for(let U=0;U<R;U++)I[U]=~C.g[U];return new c(I,~C.h).add(A)}r.abs=function(){return j(this)?P(this):this},r.add=function(C){const R=Math.max(this.g.length,C.g.length),I=[];let U=0;for(let D=0;D<=R;D++){let L=U+(this.i(D)&65535)+(C.i(D)&65535),N=(L>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);U=N>>>16,L&=65535,N&=65535,I[D]=N<<16|L}return new c(I,I[I.length-1]&-2147483648?-1:0)};function G(C,R){return C.add(P(R))}r.j=function(C){if(k(this)||k(C))return E;if(j(this))return j(C)?P(this).j(P(C)):P(P(this).j(C));if(j(C))return P(this.j(P(C)));if(this.l(S)<0&&C.l(S)<0)return p(this.m()*C.m());const R=this.g.length+C.g.length,I=[];for(var U=0;U<2*R;U++)I[U]=0;for(U=0;U<this.g.length;U++)for(let D=0;D<C.g.length;D++){const L=this.i(U)>>>16,N=this.i(U)&65535,it=C.i(D)>>>16,Tt=C.i(D)&65535;I[2*U+2*D]+=N*Tt,J(I,2*U+2*D),I[2*U+2*D+1]+=L*Tt,J(I,2*U+2*D+1),I[2*U+2*D+1]+=N*it,J(I,2*U+2*D+1),I[2*U+2*D+2]+=L*it,J(I,2*U+2*D+2)}for(C=0;C<R;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=R;C<2*R;C++)I[C]=0;return new c(I,0)};function J(C,R){for(;(C[R]&65535)!=C[R];)C[R+1]+=C[R]>>>16,C[R]&=65535,R++}function $(C,R){this.g=C,this.h=R}function se(C,R){if(k(R))throw Error("division by zero");if(k(C))return new $(E,E);if(j(C))return R=se(P(C),R),new $(P(R.g),P(R.h));if(j(R))return R=se(C,P(R)),new $(P(R.g),R.h);if(C.g.length>30){if(j(C)||j(R))throw Error("slowDivide_ only works with positive integers.");for(var I=A,U=R;U.l(C)<=0;)I=Z(I),U=Z(U);var D=ae(I,1),L=ae(U,1);for(U=ae(U,2),I=ae(I,2);!k(U);){var N=L.add(U);N.l(C)<=0&&(D=D.add(I),L=N),U=ae(U,1),I=ae(I,1)}return R=G(C,D.j(R)),new $(D,R)}for(D=E;C.l(R)>=0;){for(I=Math.max(1,Math.floor(C.m()/R.m())),U=Math.ceil(Math.log(I)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),L=p(I),N=L.j(R);j(N)||N.l(C)>0;)I-=U,L=p(I),N=L.j(R);k(L)&&(L=A),D=D.add(L),C=G(C,N)}return new $(D,C)}r.B=function(C){return se(this,C).h},r.and=function(C){const R=Math.max(this.g.length,C.g.length),I=[];for(let U=0;U<R;U++)I[U]=this.i(U)&C.i(U);return new c(I,this.h&C.h)},r.or=function(C){const R=Math.max(this.g.length,C.g.length),I=[];for(let U=0;U<R;U++)I[U]=this.i(U)|C.i(U);return new c(I,this.h|C.h)},r.xor=function(C){const R=Math.max(this.g.length,C.g.length),I=[];for(let U=0;U<R;U++)I[U]=this.i(U)^C.i(U);return new c(I,this.h^C.h)};function Z(C){const R=C.g.length+1,I=[];for(let U=0;U<R;U++)I[U]=C.i(U)<<1|C.i(U-1)>>>31;return new c(I,C.h)}function ae(C,R){const I=R>>5;R%=32;const U=C.g.length-I,D=[];for(let L=0;L<U;L++)D[L]=R>0?C.i(L+I)>>>R|C.i(L+I+1)<<32-R:C.i(L+I);return new c(D,C.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,RT=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=b,_i=c}).apply(typeof Ub<"u"?Ub:typeof self<"u"?self:typeof window<"u"?window:{});var Oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var CT,ou,IT,zh,Dg,NT,OT,kT;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oh=="object"&&Oh];for(var y=0;y<h.length;++y){var w=h[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var s=t(this);function a(h,y){if(y)e:{var w=s;h=h.split(".");for(var x=0;x<h.length-1;x++){var B=h[x];if(!(B in w))break e;w=w[B]}h=h[h.length-1],x=w[h],y=y(x),y!=x&&y!=null&&e(w,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var w=[],x;for(x in y)Object.prototype.hasOwnProperty.call(y,x)&&w.push([x,y[x]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,w){return h.call.apply(h.bind,arguments)}function p(h,y,w){return p=g,p.apply(null,arguments)}function b(h,y){var w=Array.prototype.slice.call(arguments,1);return function(){var x=w.slice();return x.push.apply(x,arguments),h.apply(this,x)}}function E(h,y){function w(){}w.prototype=y.prototype,h.Z=y.prototype,h.prototype=new w,h.prototype.constructor=h,h.Ob=function(x,B,K){for(var oe=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)oe[Ne-2]=arguments[Ne];return y.prototype[B].apply(x,oe)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function S(h){const y=h.length;if(y>0){const w=Array(y);for(let x=0;x<y;x++)w[x]=h[x];return w}return[]}function k(h,y){for(let x=1;x<arguments.length;x++){const B=arguments[x];var w=typeof B;if(w=w!="object"?w:B?Array.isArray(B)?"array":w:"null",w=="array"||w=="object"&&typeof B.length=="number"){w=h.length||0;const K=B.length||0;h.length=w+K;for(let oe=0;oe<K;oe++)h[w+oe]=B[oe]}else h.push(B)}}class j{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function P(h){c.setTimeout(()=>{throw h},0)}function G(){var h=C;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class J{constructor(){this.h=this.g=null}add(y,w){const x=$.get();x.set(y,w),this.h?this.h.next=x:this.g=x,this.h=x}}var $=new j(()=>new se,h=>h.reset());class se{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,ae=!1,C=new J,R=()=>{const h=Promise.resolve(void 0);Z=()=>{h.then(I)}};function I(){for(var h;h=G();){try{h.h.call(h.g)}catch(w){P(w)}var y=$;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}ae=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};c.addEventListener("test",w,y),c.removeEventListener("test",w,y)}catch{}return h})();function N(h){return/^[\s\xa0]*$/.test(h)}function it(h,y){D.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(it,D),it.prototype.init=function(h,y){const w=this.type=h.type,x=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(w=="mouseover"?y=h.fromElement:w=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&it.Z.h.call(this)},it.prototype.h=function(){it.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Tt="closure_listenable_"+(Math.random()*1e6|0),Y=0;function ue(h,y,w,x,B){this.listener=h,this.proxy=null,this.src=y,this.type=w,this.capture=!!x,this.ha=B,this.key=++Y,this.da=this.fa=!1}function _e(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function De(h,y,w){for(const x in h)y.call(w,h[x],x,h)}function $e(h,y){for(const w in h)y.call(void 0,h[w],w,h)}function V(h){const y={};for(const w in h)y[w]=h[w];return y}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(h,y){let w,x;for(let B=1;B<arguments.length;B++){x=arguments[B];for(w in x)h[w]=x[w];for(let K=0;K<ee.length;K++)w=ee[K],Object.prototype.hasOwnProperty.call(x,w)&&(h[w]=x[w])}}function ce(h){this.src=h,this.g={},this.h=0}ce.prototype.add=function(h,y,w,x,B){const K=h.toString();h=this.g[K],h||(h=this.g[K]=[],this.h++);const oe=Re(h,y,x,B);return oe>-1?(y=h[oe],w||(y.fa=!1)):(y=new ue(y,this.src,K,!!x,B),y.fa=w,h.push(y)),y};function Ee(h,y){const w=y.type;if(w in h.g){var x=h.g[w],B=Array.prototype.indexOf.call(x,y,void 0),K;(K=B>=0)&&Array.prototype.splice.call(x,B,1),K&&(_e(y),h.g[w].length==0&&(delete h.g[w],h.h--))}}function Re(h,y,w,x){for(let B=0;B<h.length;++B){const K=h[B];if(!K.da&&K.listener==y&&K.capture==!!w&&K.ha==x)return B}return-1}var Pe="closure_lm_"+(Math.random()*1e6|0),vt={};function at(h,y,w,x,B){if(Array.isArray(y)){for(let K=0;K<y.length;K++)at(h,y[K],w,x,B);return null}return w=Un(w),h&&h[Tt]?h.J(y,w,f(x)?!!x.capture:!1,B):Yr(h,y,w,!1,x,B)}function Yr(h,y,w,x,B,K){if(!y)throw Error("Invalid event type");const oe=f(B)?!!B.capture:!!B;let Ne=mt(h);if(Ne||(h[Pe]=Ne=new ce(h)),w=Ne.add(y,w,x,oe,K),w.proxy)return w;if(x=As(),w.proxy=x,x.src=h,x.listener=w,h.addEventListener)L||(B=oe),B===void 0&&(B=!1),h.addEventListener(y.toString(),x,B);else if(h.attachEvent)h.attachEvent(pe(y.toString()),x);else if(h.addListener&&h.removeListener)h.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return w}function As(){function h(w){return y.call(h.src,h.listener,w)}const y=bt;return h}function xs(h,y,w,x,B){if(Array.isArray(y))for(var K=0;K<y.length;K++)xs(h,y[K],w,x,B);else x=f(x)?!!x.capture:!!x,w=Un(w),h&&h[Tt]?(h=h.i,K=String(y).toString(),K in h.g&&(y=h.g[K],w=Re(y,w,x,B),w>-1&&(_e(y[w]),Array.prototype.splice.call(y,w,1),y.length==0&&(delete h.g[K],h.h--)))):h&&(h=mt(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Re(y,w,x,B)),(w=h>-1?y[h]:null)&&ke(w))}function ke(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Tt])Ee(y.i,h);else{var w=h.type,x=h.proxy;y.removeEventListener?y.removeEventListener(w,x,h.capture):y.detachEvent?y.detachEvent(pe(w),x):y.addListener&&y.removeListener&&y.removeListener(x),(w=mt(y))?(Ee(w,h),w.h==0&&(w.src=null,y[Pe]=null)):_e(h)}}}function pe(h){return h in vt?vt[h]:vt[h]="on"+h}function bt(h,y){if(h.da)h=!0;else{y=new it(y,this);const w=h.listener,x=h.ha||h.src;h.fa&&ke(h),h=w.call(x,y)}return h}function mt(h){return h=h[Pe],h instanceof ce?h:null}var fn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Un(h){return typeof h=="function"?h:(h[fn]||(h[fn]=function(y){return h.handleEvent(y)}),h[fn])}function ht(){U.call(this),this.i=new ce(this),this.M=this,this.G=null}E(ht,U),ht.prototype[Tt]=!0,ht.prototype.removeEventListener=function(h,y,w,x){xs(this,h,y,w,x)};function ot(h,y){var w,x=h.G;if(x)for(w=[];x;x=x.G)w.push(x);if(h=h.M,x=y.type||y,typeof y=="string")y=new D(y,h);else if(y instanceof D)y.target=y.target||h;else{var B=y;y=new D(x,h),le(y,B)}B=!0;let K,oe;if(w)for(oe=w.length-1;oe>=0;oe--)K=y.g=w[oe],B=Rs(K,x,!0,y)&&B;if(K=y.g=h,B=Rs(K,x,!0,y)&&B,B=Rs(K,x,!1,y)&&B,w)for(oe=0;oe<w.length;oe++)K=y.g=w[oe],B=Rs(K,x,!1,y)&&B}ht.prototype.N=function(){if(ht.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const w=h.g[y];for(let x=0;x<w.length;x++)_e(w[x]);delete h.g[y],h.h--}}this.G=null},ht.prototype.J=function(h,y,w,x){return this.i.add(String(h),y,!1,w,x)},ht.prototype.K=function(h,y,w,x){return this.i.add(String(h),y,!0,w,x)};function Rs(h,y,w,x){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let B=!0;for(let K=0;K<y.length;++K){const oe=y[K];if(oe&&!oe.da&&oe.capture==w){const Ne=oe.listener,At=oe.ha||oe.src;oe.fa&&Ee(h.i,oe),B=Ne.call(At,x)!==!1&&B}}return B&&!x.defaultPrevented}function Ld(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function Fu(h){h.g=Ld(()=>{h.g=null,h.i&&(h.i=!1,Fu(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class mn extends U{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Fu(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ci(h){U.call(this),this.h=h,this.g={}}E(Ci,U);var el=[];function tl(h){De(h.g,function(y,w){this.g.hasOwnProperty(w)&&ke(y)},h),h.g={}}Ci.prototype.N=function(){Ci.Z.N.call(this),tl(this)},Ci.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cs=c.JSON.stringify,zd=c.JSON.parse,Gu=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Ku(){}function Qu(){}var er={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Yt(){D.call(this,"d")}E(Yt,D);function Ln(){D.call(this,"c")}E(Ln,D);var St={},Yu=null;function Sa(){return Yu=Yu||new ht}St.Ia="serverreachability";function Xu(h){D.call(this,St.Ia,h)}E(Xu,D);function br(h){const y=Sa();ot(y,new Xu(y))}St.STAT_EVENT="statevent";function Ii(h,y){D.call(this,St.STAT_EVENT,h),this.stat=y}E(Ii,D);function It(h){const y=Sa();ot(y,new Ii(y,h))}St.Ja="timingevent";function wr(h,y){D.call(this,St.Ja,h),this.size=y}E(wr,D);function Er(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function tr(){this.g=!0}tr.prototype.ua=function(){this.g=!1};function Bd(h,y,w,x,B,K){h.info(function(){if(h.g)if(K){var oe="",Ne=K.split("&");for(let Qe=0;Qe<Ne.length;Qe++){var At=Ne[Qe].split("=");if(At.length>1){const gt=At[0];At=At[1];const Hn=gt.split("_");oe=Hn.length>=2&&Hn[1]=="type"?oe+(gt+"="+At+"&"):oe+(gt+"=redacted&")}}}else oe=null;else oe=K;return"XMLHTTP REQ ("+x+") [attempt "+B+"]: "+y+`
`+w+`
`+oe})}function Ju(h,y,w,x,B,K,oe){h.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+B+"]: "+y+`
`+w+`
`+K+" "+oe})}function Tr(h,y,w,x){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+qd(h,w)+(x?" "+x:"")})}function Ni(h,y){h.info(function(){return"TIMEOUT: "+y})}tr.prototype.info=function(){};function qd(h,y){if(!h.g)return y;if(!y)return null;try{const K=JSON.parse(y);if(K){for(h=0;h<K.length;h++)if(Array.isArray(K[h])){var w=K[h];if(!(w.length<2)){var x=w[1];if(Array.isArray(x)&&!(x.length<1)){var B=x[0];if(B!="noop"&&B!="stop"&&B!="close")for(let oe=1;oe<x.length;oe++)x[oe]=""}}}}return Cs(K)}catch{return y}}var Oi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},nl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},rl;function ki(){}E(ki,Ku),ki.prototype.g=function(){return new XMLHttpRequest},rl=new ki;function Xr(h){return encodeURIComponent(String(h))}function Wu(h){var y=1;h=h.split(":");const w=[];for(;y>0&&h.length;)w.push(h.shift()),y--;return h.length&&w.push(h.join(":")),w}function nr(h,y,w,x){this.j=h,this.i=y,this.l=w,this.S=x||1,this.V=new Ci(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new rr}function rr(){this.i=null,this.g="",this.h=!1}var Nt={},Ft={};function Sr(h,y,w){h.M=1,h.A=ji(kt(y)),h.u=w,h.R=!0,Aa(h,null)}function Aa(h,y){h.F=Date.now(),Ar(h),h.B=kt(h.A);var w=h.B,x=h.S;Array.isArray(x)||(x=[String(x)]),Ia(w.i,"t",x),h.C=0,w=h.j.L,h.h=new rr,h.g=fc(h.j,w?y:null,!h.u),h.P>0&&(h.O=new mn(p(h.Y,h,h.g),h.P)),y=h.V,w=h.g,x=h.ba;var B="readystatechange";Array.isArray(B)||(B&&(el[0]=B.toString()),B=el);for(let K=0;K<B.length;K++){const oe=at(w,B[K],x||y.handleEvent,!1,y.h||y);if(!oe)break;y.g[oe.key]=oe}y=h.J?V(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),br(),Bd(h.i,h.v,h.B,h.l,h.S,h.u)}nr.prototype.ba=function(h){h=h.target;const y=this.O;y&&ar(h)==3?y.j():this.Y(h)},nr.prototype.Y=function(h){try{if(h==this.g)e:{const Ne=ar(this.g),At=this.g.ya(),Qe=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||Xt(this.g)))){this.K||Ne!=4||At==7||(At==8||Qe<=0?br(3):br(2)),xr(this);var y=this.g.ca();this.X=y;var w=Hd(this);if(this.o=y==200,Ju(this.i,this.v,this.B,this.l,this.S,Ne,y),this.o){if(this.U&&!this.L){t:{if(this.g){var x,B=this.g;if((x=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(x)){var K=x;break t}}K=null}if(h=K)Tr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Rr(this,h);else{this.o=!1,this.m=3,It(12),xn(this),zn(this);break e}}if(this.R){h=!0;let gt;for(;!this.K&&this.C<w.length;)if(gt=ec(this,w),gt==Ft){Ne==4&&(this.m=4,It(14),h=!1),Tr(this.i,this.l,null,"[Incomplete Response]");break}else if(gt==Nt){this.m=4,It(15),Tr(this.i,this.l,w,"[Invalid Chunk]"),h=!1;break}else Tr(this.i,this.l,gt,null),Rr(this,gt);if(Zu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||w.length!=0||this.h.h||(this.m=1,It(16),h=!1),this.o=this.o&&h,!h)Tr(this.i,this.l,w,"[Invalid Chunked Response]"),xn(this),zn(this);else if(w.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),_l(oe),oe.P=!0,It(11))}}else Tr(this.i,this.l,w,null),Rr(this,w);Ne==4&&xn(this),this.o&&!this.K&&(Ne==4?uc(this.j,this):(this.o=!1,Ar(this)))}else Wr(this.g),y==400&&w.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),xn(this),zn(this)}}}catch{}finally{}};function Hd(h){if(!Zu(h))return h.g.la();const y=Xt(h.g);if(y==="")return"";let w="";const x=y.length,B=ar(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return xn(h),zn(h),"";h.h.i=new c.TextDecoder}for(let K=0;K<x;K++)h.h.h=!0,w+=h.h.i.decode(y[K],{stream:!(B&&K==x-1)});return y.length=0,h.h.g+=w,h.C=0,h.h.g}function Zu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function ec(h,y){var w=h.C,x=y.indexOf(`
`,w);return x==-1?Ft:(w=Number(y.substring(w,x)),isNaN(w)?Nt:(x+=1,x+w>y.length?Ft:(y=y.slice(x,x+w),h.C=x+w,y)))}nr.prototype.cancel=function(){this.K=!0,xn(this)};function Ar(h){h.T=Date.now()+h.H,xa(h,h.H)}function xa(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Er(p(h.aa,h),y)}function xr(h){h.D&&(c.clearTimeout(h.D),h.D=null)}nr.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ni(this.i,this.B),this.M!=2&&(br(),It(17)),xn(this),this.m=2,zn(this)):xa(this,this.T-h)};function zn(h){h.j.I==0||h.K||uc(h.j,h)}function xn(h){xr(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,tl(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Rr(h,y){try{var w=h.j;if(w.I!=0&&(w.g==h||Ir(w.h,h))){if(!h.L&&Ir(w.h,h)&&w.I==3){try{var x=w.Ba.g.parse(y)}catch{x=null}if(Array.isArray(x)&&x.length==3){var B=x;if(B[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<h.F)Da(w),Ms(w);else break e;zi(w),It(18)}}else w.xa=B[1],0<w.xa-w.K&&B[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Er(p(w.Va,w),6e3));Cr(w.h)<=1&&w.ta&&(w.ta=void 0)}else Pr(w,11)}else if((h.L||w.g==h)&&Da(w),!N(y))for(B=w.Ba.g.parse(y),y=0;y<B.length;y++){let Qe=B[y];const gt=Qe[0];if(!(gt<=w.K))if(w.K=gt,Qe=Qe[1],w.I==2)if(Qe[0]=="c"){w.M=Qe[1],w.ba=Qe[2];const Hn=Qe[3];Hn!=null&&(w.ka=Hn,w.j.info("VER="+w.ka));const Mr=Qe[4];Mr!=null&&(w.za=Mr,w.j.info("SVER="+w.za));const or=Qe[5];or!=null&&typeof or=="number"&&or>0&&(x=1.5*or,w.O=x,w.j.info("backChannelRequestTimeoutMs_="+x)),x=w;const lr=h.g;if(lr){const Bi=lr.g?lr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bi){var K=x.h;K.g||Bi.indexOf("spdy")==-1&&Bi.indexOf("quic")==-1&&Bi.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(al(K,K.h),K.h=null))}if(x.G){const Pa=lr.g?lr.g.getResponseHeader("X-HTTP-Session-Id"):null;Pa&&(x.wa=Pa,Je(x.J,x.G,Pa))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-h.F,w.j.info("Handshake RTT: "+w.T+"ms")),x=w;var oe=h;if(x.na=dc(x,x.L?x.ba:null,x.W),oe.L){ol(x.h,oe);var Ne=oe,At=x.O;At&&(Ne.H=At),Ne.D&&(xr(Ne),Ar(Ne)),x.g=oe}else oc(x);w.i.length>0&&Dr(w)}else Qe[0]!="stop"&&Qe[0]!="close"||Pr(w,7);else w.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Pr(w,7):pl(w):Qe[0]!="noop"&&w.l&&w.l.qa(Qe),w.A=0)}}br(4)}catch{}}var Ot=class{constructor(h,y){this.g=h,this.map=y}};function sl(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function il(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Cr(h){return h.h?1:h.g?h.g.size:0}function Ir(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function al(h,y){h.g?h.g.add(y):h.h=y}function ol(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}sl.prototype.cancel=function(){if(this.i=ll(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ll(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const w of h.g.values())y=y.concat(w.G);return y}return S(h.i)}var tc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ra(h,y){if(h){h=h.split("&");for(let w=0;w<h.length;w++){const x=h[w].indexOf("=");let B,K=null;x>=0?(B=h[w].substring(0,x),K=h[w].substring(x+1)):B=h[w],y(B,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Rn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Rn?(this.l=h.l,Gt(this,h.j),this.o=h.o,this.g=h.g,Is(this,h.u),this.h=h.h,ul(this,ic(h.i)),this.m=h.m):h&&(y=String(h).match(tc))?(this.l=!1,Gt(this,y[1]||"",!0),this.o=Nr(y[2]||""),this.g=Nr(y[3]||"",!0),Is(this,y[4]),this.h=Nr(y[5]||"",!0),ul(this,y[6]||"",!0),this.m=Nr(y[7]||"")):(this.l=!1,this.i=new Os(null,this.l))}Rn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Di(y,Ca,!0),":");var w=this.g;return(w||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Di(y,Ca,!0),"@"),h.push(Xr(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&h.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(Di(w,w.charAt(0)=="/"?cl:nc,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",Di(w,rc)),h.join("")},Rn.prototype.resolve=function(h){const y=kt(this);let w=!!h.j;w?Gt(y,h.j):w=!!h.o,w?y.o=h.o:w=!!h.g,w?y.g=h.g:w=h.u!=null;var x=h.h;if(w)Is(y,h.u);else if(w=!!h.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var B=y.h.lastIndexOf("/");B!=-1&&(x=y.h.slice(0,B+1)+x)}if(B=x,B==".."||B==".")x="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){x=B.lastIndexOf("/",0)==0,B=B.split("/");const K=[];for(let oe=0;oe<B.length;){const Ne=B[oe++];Ne=="."?x&&oe==B.length&&K.push(""):Ne==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),x&&oe==B.length&&K.push("")):(K.push(Ne),x=!0)}x=K.join("/")}else x=B}return w?y.h=x:w=h.i.toString()!=="",w?ul(y,ic(h.i)):w=!!h.m,w&&(y.m=h.m),y};function kt(h){return new Rn(h)}function Gt(h,y,w){h.j=w?Nr(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Is(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function ul(h,y,w){y instanceof Os?(h.i=y,Na(h.i,h.l)):(w||(y=Di(y,Ns)),h.i=new Os(y,h.l))}function Je(h,y,w){h.i.set(y,w)}function ji(h){return Je(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Nr(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Di(h,y,w){return typeof h=="string"?(h=encodeURI(h).replace(y,yn),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function yn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ca=/[#\/\?@]/g,nc=/[#\?:]/g,cl=/[#\?]/g,Ns=/[#\?@]/g,rc=/#/g;function Os(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function _n(h){h.g||(h.g=new Map,h.h=0,h.i&&Ra(h.i,function(y,w){h.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}r=Os.prototype,r.add=function(h,y){_n(this),this.i=null,h=ks(this,h);let w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(y),this.h+=1,this};function sc(h,y){_n(h),y=ks(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function hl(h,y){return _n(h),y=ks(h,y),h.g.has(y)}r.forEach=function(h,y){_n(this),this.g.forEach(function(w,x){w.forEach(function(B){h.call(y,B,x,this)},this)},this)};function dl(h,y){_n(h);let w=[];if(typeof y=="string")hl(h,y)&&(w=w.concat(h.g.get(ks(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)w=w.concat(h[y]);return w}r.set=function(h,y){return _n(this),this.i=null,h=ks(this,h),hl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=dl(this,h),h.length>0?String(h[0]):y):y};function Ia(h,y,w){sc(h,y),w.length>0&&(h.i=null,h.g.set(ks(h,y),S(w)),h.h+=w.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let x=0;x<y.length;x++){var w=y[x];const B=Xr(w);w=dl(this,w);for(let K=0;K<w.length;K++){let oe=B;w[K]!==""&&(oe+="="+Xr(w[K])),h.push(oe)}}return this.i=h.join("&")};function ic(h){const y=new Os;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function ks(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Na(h,y){y&&!h.j&&(_n(h),h.i=null,h.g.forEach(function(w,x){const B=x.toLowerCase();x!=B&&(sc(this,x),Ia(this,B,w))},h)),h.j=y}function sr(h,y){const w=new tr;if(c.Image){const x=new Image;x.onload=b(Bn,w,"TestLoadImage: loaded",!0,y,x),x.onerror=b(Bn,w,"TestLoadImage: error",!1,y,x),x.onabort=b(Bn,w,"TestLoadImage: abort",!1,y,x),x.ontimeout=b(Bn,w,"TestLoadImage: timeout",!1,y,x),c.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=h}else y(!1)}function fl(h,y){const w=new tr,x=new AbortController,B=setTimeout(()=>{x.abort(),Bn(w,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:x.signal}).then(K=>{clearTimeout(B),K.ok?Bn(w,"TestPingServer: ok",!0,y):Bn(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),Bn(w,"TestPingServer: error",!1,y)})}function Bn(h,y,w,x,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),x(w)}catch{}}function js(){this.g=new Gu}function Or(h){this.i=h.Sb||null,this.h=h.ab||!1}E(Or,Ku),Or.prototype.g=function(){return new Pi(this.i,this.h)};function Pi(h,y){ht.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Pi,ht),r=Pi.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,ir(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ds(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ir(this)),this.g&&(this.readyState=3,ir(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Oa(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Oa(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Ds(this):ir(this),this.readyState==3&&Oa(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,Ds(this))},r.Na=function(h){this.g&&(this.response=h,Ds(this))},r.ga=function(){this.g&&Ds(this)};function Ds(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ir(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=y.next();return h.join(`\r
`)};function ir(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Pi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function qn(h){let y="";return De(h,function(w,x){y+=x,y+=":",y+=w,y+=`\r
`}),y}function Mi(h,y,w){e:{for(x in w){var x=!1;break e}x=!0}x||(w=qn(w),typeof h=="string"?w!=null&&Xr(w):Je(h,y,w))}function et(h){ht.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(et,ht);var kr=/^https?$/i,ml=["POST","PUT"];r=et.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,w,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():rl.g(),this.g.onreadystatechange=A(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(K){Vi(this,K);return}if(h=w||"",w=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var B in x)w.set(B,x[B]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const K of x.keys())w.set(K,x.get(K));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(w.keys()).find(K=>K.toLowerCase()=="content-type"),B=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(ml,y,void 0)>=0)||x||B||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,oe]of w)this.g.setRequestHeader(K,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(K){Vi(this,K)}};function Vi(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,gl(h),Jr(h)}function gl(h){h.A||(h.A=!0,ot(h,"complete"),ot(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,ot(this,"complete"),ot(this,"abort"),Jr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jr(this,!0)),et.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Ui(this):this.Xa())},r.Xa=function(){Ui(this)};function Ui(h){if(h.h&&typeof l<"u"){if(h.v&&ar(h)==4)setTimeout(h.Ca.bind(h),0);else if(ot(h,"readystatechange"),ar(h)==4){h.h=!1;try{const K=h.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var x;if(x=K===0){let oe=String(h.D).match(tc)[1]||null;!oe&&c.self&&c.self.location&&(oe=c.self.location.protocol.slice(0,-1)),x=!kr.test(oe?oe.toLowerCase():"")}w=x}if(w)ot(h,"complete"),ot(h,"success");else{h.o=6;try{var B=ar(h)>2?h.g.statusText:""}catch{B=""}h.l=B+" ["+h.ca()+"]",gl(h)}}finally{Jr(h)}}}}function Jr(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const w=h.g;h.g=null,y||ot(h,"ready");try{w.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ar(h){return h.g?h.g.readyState:0}r.ca=function(){try{return ar(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),zd(y)}};function Xt(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Wr(h){const y={};h=(h.g&&ar(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<h.length;x++){if(N(h[x]))continue;var w=Wu(h[x]);const B=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const K=y[B]||[];y[B]=K,K.push(w)}$e(y,function(x){return x.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function jr(h,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||y}function Ps(h){this.za=0,this.i=[],this.j=new tr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=jr("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=jr("baseRetryDelayMs",5e3,h),this.Za=jr("retryDelaySeedMs",1e4,h),this.Ta=jr("forwardChannelMaxRetries",2,h),this.va=jr("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new sl(h&&h.concurrentRequestLimit),this.Ba=new js,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Ps.prototype,r.ka=8,r.I=1,r.connect=function(h,y,w,x){It(0),this.W=h,this.H=y||{},w&&x!==void 0&&(this.H.OSID=w,this.H.OAID=x),this.F=this.X,this.J=dc(this,null,this.W),Dr(this)};function pl(h){if(ka(h),h.I==3){var y=h.V++,w=kt(h.J);if(Je(w,"SID",h.M),Je(w,"RID",y),Je(w,"TYPE","terminate"),Li(h,w),y=new nr(h,h.j,y),y.M=2,y.A=ji(kt(w)),w=!1,c.navigator&&c.navigator.sendBeacon)try{w=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!w&&c.Image&&(new Image().src=y.A,w=!0),w||(y.g=fc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Ar(y)}hc(h)}function Ms(h){h.g&&(_l(h),h.g.cancel(),h.g=null)}function ka(h){Ms(h),h.v&&(c.clearTimeout(h.v),h.v=null),Da(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Dr(h){if(!il(h.h)&&!h.m){h.m=!0;var y=h.Ea;Z||R(),ae||(Z(),ae=!0),C.add(y,h),h.D=0}}function ja(h,y){return Cr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Er(p(h.Ea,h,y),cc(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const B=new nr(this,this.j,h);let K=this.o;if(this.U&&(K?(K=V(K),le(K,this.U)):K=this.U),this.u!==null||this.R||(B.J=K,K=null),this.S)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var x=this.i[w];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(y+=x,y>4096){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=ac(this,B,y),w=kt(this.J),Je(w,"RID",h),Je(w,"CVER",22),this.G&&Je(w,"X-HTTP-Session-Id",this.G),Li(this,w),K&&(this.R?y="headers="+Xr(qn(K))+"&"+y:this.u&&Mi(w,this.u,K)),al(this.h,B),this.Ra&&Je(w,"TYPE","init"),this.S?(Je(w,"$req",y),Je(w,"SID","null"),B.U=!0,Sr(B,w,null)):Sr(B,w,y),this.I=2}}else this.I==3&&(h?yl(this,h):this.i.length==0||il(this.h)||yl(this))};function yl(h,y){var w;y?w=y.l:w=h.V++;const x=kt(h.J);Je(x,"SID",h.M),Je(x,"RID",w),Je(x,"AID",h.K),Li(h,x),h.u&&h.o&&Mi(x,h.u,h.o),w=new nr(h,h.j,w,h.D+1),h.u===null&&(w.J=h.o),y&&(h.i=y.G.concat(h.i)),y=ac(h,w,1e3),w.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),al(h.h,w),Sr(w,x,y)}function Li(h,y){h.H&&De(h.H,function(w,x){Je(y,x,w)}),h.l&&De({},function(w,x){Je(y,x,w)})}function ac(h,y,w){w=Math.min(h.i.length,w);const x=h.l?p(h.l.Ka,h.l,h):null;e:{var B=h.i;let Ne=-1;for(;;){const At=["count="+w];Ne==-1?w>0?(Ne=B[0].g,At.push("ofs="+Ne)):Ne=0:At.push("ofs="+Ne);let Qe=!0;for(let gt=0;gt<w;gt++){var K=B[gt].g;const Hn=B[gt].map;if(K-=Ne,K<0)Ne=Math.max(0,B[gt].g-100),Qe=!1;else try{K="req"+K+"_"||"";try{var oe=Hn instanceof Map?Hn:Object.entries(Hn);for(const[Mr,or]of oe){let lr=or;f(or)&&(lr=Cs(or)),At.push(K+Mr+"="+encodeURIComponent(lr))}}catch(Mr){throw At.push(K+"type="+encodeURIComponent("_badmap")),Mr}}catch{x&&x(Hn)}}if(Qe){oe=At.join("&");break e}}oe=void 0}return h=h.i.splice(0,w),y.G=h,oe}function oc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;Z||R(),ae||(Z(),ae=!0),C.add(y,h),h.A=0}}function zi(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Er(p(h.Da,h),cc(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,lc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Er(p(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),Ms(this),lc(this))};function _l(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function lc(h){h.g=new nr(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=kt(h.na);Je(y,"RID","rpc"),Je(y,"SID",h.M),Je(y,"AID",h.K),Je(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Je(y,"TO",h.ia),Je(y,"TYPE","xmlhttp"),Li(h,y),h.u&&h.o&&Mi(y,h.u,h.o),h.O&&(h.g.H=h.O);var w=h.g;h=h.ba,w.M=1,w.A=ji(kt(y)),w.u=null,w.R=!0,Aa(w,h)}r.Va=function(){this.C!=null&&(this.C=null,Ms(this),zi(this),It(19))};function Da(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function uc(h,y){var w=null;if(h.g==y){Da(h),_l(h),h.g=null;var x=2}else if(Ir(h.h,y))w=y.G,ol(h.h,y),x=1;else return;if(h.I!=0){if(y.o)if(x==1){w=y.u?y.u.length:0,y=Date.now()-y.F;var B=h.D;x=Sa(),ot(x,new wr(x,w)),Dr(h)}else oc(h);else if(B=y.m,B==3||B==0&&y.X>0||!(x==1&&ja(h,y)||x==2&&zi(h)))switch(w&&w.length>0&&(y=h.h,y.i=y.i.concat(w)),B){case 1:Pr(h,5);break;case 4:Pr(h,10);break;case 3:Pr(h,6);break;default:Pr(h,2)}}}function cc(h,y){let w=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(w*=2),w*y}function Pr(h,y){if(h.j.info("Error code "+y),y==2){var w=p(h.bb,h),x=h.Ua;const B=!x;x=new Rn(x||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Gt(x,"https"),ji(x),B?sr(x.toString(),w):fl(x.toString(),w)}else It(2);h.I=0,h.l&&h.l.pa(y),hc(h),ka(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function hc(h){if(h.I=0,h.ja=[],h.l){const y=ll(h.h);(y.length!=0||h.i.length!=0)&&(k(h.ja,y),k(h.ja,h.i),h.h.i.length=0,S(h.i),h.i.length=0),h.l.oa()}}function dc(h,y,w){var x=w instanceof Rn?kt(w):new Rn(w);if(x.g!="")y&&(x.g=y+"."+x.g),Is(x,x.u);else{var B=c.location;x=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;const K=new Rn(null);x&&Gt(K,x),y&&(K.g=y),B&&Is(K,B),w&&(K.h=w),x=K}return w=h.G,y=h.wa,w&&y&&Je(x,w,y),Je(x,"VER",h.ka),Li(h,x),x}function fc(h,y,w){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new et(new Or({ab:w})):new et(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function mc(){}r=mc.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Vs(){}Vs.prototype.g=function(h,y){return new gn(h,y)};function gn(h,y){ht.call(this),this.g=new Ps(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!N(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!N(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Zr(this)}E(gn,ht),gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){pl(this.g)},gn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.v&&(w={},w.__data__=Cs(h),h=w);y.i.push(new Ot(y.Ya++,h)),y.I==3&&Dr(y)},gn.prototype.N=function(){this.g.l=null,delete this.j,pl(this.g),delete this.g,gn.Z.N.call(this)};function gc(h){Yt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const w in y){h=w;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(gc,Yt);function pc(){Ln.call(this),this.status=1}E(pc,Ln);function Zr(h){this.g=h}E(Zr,mc),Zr.prototype.ra=function(){ot(this.g,"a")},Zr.prototype.qa=function(h){ot(this.g,new gc(h))},Zr.prototype.pa=function(h){ot(this.g,new pc)},Zr.prototype.oa=function(){ot(this.g,"b")},Vs.prototype.createWebChannel=Vs.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,kT=function(){return new Vs},OT=function(){return Sa()},NT=St,Dg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Oi.NO_ERROR=0,Oi.TIMEOUT=8,Oi.HTTP_ERROR=6,zh=Oi,nl.COMPLETE="complete",IT=nl,Qu.EventType=er,er.OPEN="a",er.CLOSE="b",er.ERROR="c",er.MESSAGE="d",ht.prototype.listen=ht.prototype.J,ou=Qu,et.prototype.listenOnce=et.prototype.K,et.prototype.getLastError=et.prototype.Ha,et.prototype.getLastErrorCode=et.prototype.ya,et.prototype.getStatus=et.prototype.ca,et.prototype.getResponseJson=et.prototype.La,et.prototype.getResponseText=et.prototype.la,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Fa,CT=et}).apply(typeof Oh<"u"?Oh:typeof self<"u"?self:typeof window<"u"?window:{});const Lb="@firebase/firestore",zb="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa=new cp("@firebase/firestore");function bo(){return pa.logLevel}function de(r,...e){if(pa.logLevel<=ze.DEBUG){const t=e.map(Ep);pa.debug(`Firestore (${Qo}): ${r}`,...t)}}function Es(r,...e){if(pa.logLevel<=ze.ERROR){const t=e.map(Ep);pa.error(`Firestore (${Qo}): ${r}`,...t)}}function Do(r,...e){if(pa.logLevel<=ze.WARN){const t=e.map(Ep);pa.warn(`Firestore (${Qo}): ${r}`,...t)}}function Ep(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,jT(r,s,t)}function jT(r,e,t){let s=`FIRESTORE (${Qo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Es(s),new Error(s)}function Xe(r,e,t,s){let a="Unexpected state";typeof t=="string"?a=t:s=t,r||jT(e,a,s)}function Ie(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Ss{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(cn.UNAUTHENTICATED)))}shutdown(){}}class DO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class PO{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Xe(this.o===void 0,42304);let s=this.i;const a=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new _s;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new _s,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await a(this.currentUser)}))},f=g=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new _s)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Xe(typeof s.accessToken=="string",31837,{l:s}),new DT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new cn(e)}}class MO{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class VO{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new MO(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Bb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UO{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Xe(this.o===void 0,3512);const s=l=>{l.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,de("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const a=l=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Bb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Xe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Bb(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=LO(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%62))}return s}}function Be(r,e){return r<e?-1:r>e?1:0}function Pg(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const a=r.charAt(s),l=e.charAt(s);if(a!==l)return ag(a)===ag(l)?Be(a,l):ag(a)?1:-1}return Be(r.length,e.length)}const zO=55296,BO=57343;function ag(r){const e=r.charCodeAt(0);return e>=zO&&e<=BO}function Po(r,e,t){return r.length===e.length&&r.every(((s,a)=>t(s,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb="__name__";class Br{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ae(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Br.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Br?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=Br.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Be(e.length,t.length)}static compareSegments(e,t){const s=Br.isNumericId(e),a=Br.isNumericId(t);return s&&!a?-1:!s&&a?1:s&&a?Br.extractNumericId(e).compare(Br.extractNumericId(t)):Pg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _i.fromString(e.substring(4,e.length-2))}}class ut extends Br{construct(e,t,s){return new ut(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new he(te.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((a=>a.length>0)))}return new ut(t)}static emptyPath(){return new ut([])}}const qO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends Br{construct(e,t,s){return new rn(e,t,s)}static isValidIdentifier(e){return qO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qb}static keyField(){return new rn([qb])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(s.length===0)throw new he(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new he(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new he(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,a+=2}else f==="`"?(c=!c,a++):f!=="."||c?(s+=f,a++):(l(),a++)}if(l(),c)throw new he(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(t)}static emptyPath(){return new rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(ut.fromString(e))}static fromName(e){return new be(ut.fromString(e).popFirst(5))}static empty(){return new be(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new ut(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(r,e,t){if(!t)throw new he(te.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function HO(r,e,t,s){if(e===!0&&s===!0)throw new he(te.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Hb(r){if(!be.isDocumentKey(r))throw new he(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function $b(r){if(be.isDocumentKey(r))throw new he(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function MT(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Td(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ae(12329,{type:typeof r})}function Mo(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new he(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Td(r);throw new he(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(r,e){const t={typeString:r};return e&&(t.value=e),t}function zu(r,e){if(!MT(r))throw new he(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const a=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const c=r[s];if(a&&typeof c!==a){t=`JSON field '${s}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new he(te.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb=-62135596800,Gb=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Gb);return new ct(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Fb)throw new he(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Gb}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zu(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Fb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:zt("string",ct._jsonSchemaVersion),seconds:zt("number"),nanoseconds:zt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new ct(0,0))}static max(){return new xe(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru=-1;function $O(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,a=xe.fromTimestamp(s===1e9?new ct(t+1,0):new ct(t,s));return new bi(a,be.empty(),e)}function FO(r){return new bi(r.readTime,r.key,Ru)}class bi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new bi(xe.min(),be.empty(),Ru)}static max(){return new bi(xe.max(),be.empty(),Ru)}}function GO(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=be.comparator(r.documentKey,e.documentKey),t!==0?t:Be(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(r){if(r.code!==te.FAILED_PRECONDITION||r.message!==KO)throw r;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re(((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):re.reject(t)}static resolve(e){return new re(((t,s)=>{t(e)}))}static reject(e){return new re(((t,s)=>{s(e)}))}static waitFor(e){return new re(((t,s)=>{let a=0,l=0,c=!1;e.forEach((f=>{++a,f.next((()=>{++l,c&&l===a&&t()}),(g=>s(g)))})),c=!0,l===a&&t()}))}static or(e){let t=re.resolve(!1);for(const s of e)t=t.next((a=>a?re.resolve(a):s()));return t}static forEach(e,t){const s=[];return e.forEach(((a,l)=>{s.push(t.call(this,a,l))})),this.waitFor(s)}static mapArray(e,t){return new re(((s,a)=>{const l=e.length,c=new Array(l);let f=0;for(let g=0;g<l;g++){const p=g;t(e[p]).next((b=>{c[p]=b,++f,f===l&&s(c)}),(b=>a(b)))}}))}static doWhile(e,t){return new re(((s,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):s()};l()}))}}function YO(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Xo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Sd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp=-1;function Ad(r){return r==null}function sd(r){return r===0&&1/r==-1/0}function XO(r){return typeof r=="number"&&Number.isInteger(r)&&!sd(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="";function JO(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Kb(e)),e=WO(r.get(t),e);return Kb(e)}function WO(r,e){let t=e;const s=r.length;for(let a=0;a<s;a++){const l=r.charAt(a);switch(l){case"\0":t+="";break;case VT:t+="";break;default:t+=l}}return t}function Kb(r){return r+VT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function va(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function UT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,t){this.comparator=e,this.root=t||nn.EMPTY}insert(e,t){return new _t(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(e){return new _t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kh(this.root,e,this.comparator,!1)}getReverseIterator(){return new kh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kh(this.root,e,this.comparator,!0)}}class kh{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nn{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=s??nn.RED,this.left=a??nn.EMPTY,this.right=l??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new nn(e??this.key,t??this.value,s??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return nn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,s,a,l){return this}insert(e,t,s){return new nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.comparator=e,this.data=new _t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Yb(this.data.getIterator())}getIteratorFrom(e){return new Yb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof $t)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new $t(this.comparator);return t.data=e,t}}class Yb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new yr([])}unionWith(e){let t=new $t(rn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new yr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Po(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new LT("Invalid base64 string: "+l):l}})(e);return new sn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new sn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let a=0;a<t.length;a++)s[a]=t.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const ZO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wi(r){if(Xe(!!r,39018),typeof r=="string"){let e=0;const t=ZO.exec(r);if(Xe(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ct(r.seconds),nanos:Ct(r.nanos)}}function Ct(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ei(r){return typeof r=="string"?sn.fromBase64String(r):sn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="server_timestamp",BT="__type__",qT="__previous_value__",HT="__local_write_time__";function Ap(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[BT])==null?void 0:s.stringValue)===zT}function xd(r){const e=r.mapValue.fields[qT];return Ap(e)?xd(e):e}function Cu(r){const e=wi(r.mapValue.fields[HT].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,t,s,a,l,c,f,g,p,b){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=b}}const id="(default)";class Iu{constructor(e,t){this.projectId=e,this.database=t||id}static empty(){return new Iu("","")}get isDefaultDatabase(){return this.database===id}isEqual(e){return e instanceof Iu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="__type__",tk="__max__",jh={mapValue:{}},FT="__vector__",ad="value";function Ti(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Ap(r)?4:rk(r)?9007199254740991:nk(r)?10:11:Ae(28295,{value:r})}function Qr(r,e){if(r===e)return!0;const t=Ti(r);if(t!==Ti(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Cu(r).isEqual(Cu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=wi(a.timestampValue),f=wi(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(a,l){return Ei(a.bytesValue).isEqual(Ei(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(a,l){return Ct(a.geoPointValue.latitude)===Ct(l.geoPointValue.latitude)&&Ct(a.geoPointValue.longitude)===Ct(l.geoPointValue.longitude)})(r,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Ct(a.integerValue)===Ct(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Ct(a.doubleValue),f=Ct(l.doubleValue);return c===f?sd(c)===sd(f):isNaN(c)&&isNaN(f)}return!1})(r,e);case 9:return Po(r.arrayValue.values||[],e.arrayValue.values||[],Qr);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},f=l.mapValue.fields||{};if(Qb(c)!==Qb(f))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(f[g]===void 0||!Qr(c[g],f[g])))return!1;return!0})(r,e);default:return Ae(52216,{left:r})}}function Nu(r,e){return(r.values||[]).find((t=>Qr(t,e)))!==void 0}function Vo(r,e){if(r===e)return 0;const t=Ti(r),s=Ti(e);if(t!==s)return Be(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(r.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=Ct(l.integerValue||l.doubleValue),g=Ct(c.integerValue||c.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(r,e);case 3:return Xb(r.timestampValue,e.timestampValue);case 4:return Xb(Cu(r),Cu(e));case 5:return Pg(r.stringValue,e.stringValue);case 6:return(function(l,c){const f=Ei(l),g=Ei(c);return f.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),g=c.split("/");for(let p=0;p<f.length&&p<g.length;p++){const b=Be(f[p],g[p]);if(b!==0)return b}return Be(f.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=Be(Ct(l.latitude),Ct(c.latitude));return f!==0?f:Be(Ct(l.longitude),Ct(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Jb(r.arrayValue,e.arrayValue);case 10:return(function(l,c){var A,S,k,j;const f=l.fields||{},g=c.fields||{},p=(A=f[ad])==null?void 0:A.arrayValue,b=(S=g[ad])==null?void 0:S.arrayValue,E=Be(((k=p==null?void 0:p.values)==null?void 0:k.length)||0,((j=b==null?void 0:b.values)==null?void 0:j.length)||0);return E!==0?E:Jb(p,b)})(r.mapValue,e.mapValue);case 11:return(function(l,c){if(l===jh.mapValue&&c===jh.mapValue)return 0;if(l===jh.mapValue)return 1;if(c===jh.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),p=c.fields||{},b=Object.keys(p);g.sort(),b.sort();for(let E=0;E<g.length&&E<b.length;++E){const A=Pg(g[E],b[E]);if(A!==0)return A;const S=Vo(f[g[E]],p[b[E]]);if(S!==0)return S}return Be(g.length,b.length)})(r.mapValue,e.mapValue);default:throw Ae(23264,{he:t})}}function Xb(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Be(r,e);const t=wi(r),s=wi(e),a=Be(t.seconds,s.seconds);return a!==0?a:Be(t.nanos,s.nanos)}function Jb(r,e){const t=r.values||[],s=e.values||[];for(let a=0;a<t.length&&a<s.length;++a){const l=Vo(t[a],s[a]);if(l)return l}return Be(t.length,s.length)}function Uo(r){return Mg(r)}function Mg(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=wi(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Ei(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return be.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",a=!0;for(const l of t.values||[])a?a=!1:s+=",",s+=Mg(l);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of s)l?l=!1:a+=",",a+=`${c}:${Mg(t.fields[c])}`;return a+"}"})(r.mapValue):Ae(61005,{value:r})}function Bh(r){switch(Ti(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=xd(r);return e?16+Bh(e):16;case 5:return 2*r.stringValue.length;case 6:return Ei(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,l)=>a+Bh(l)),0)})(r.arrayValue);case 10:case 11:return(function(s){let a=0;return va(s.fields,((l,c)=>{a+=l.length+Bh(c)})),a})(r.mapValue);default:throw Ae(13486,{value:r})}}function Wb(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Vg(r){return!!r&&"integerValue"in r}function xp(r){return!!r&&"arrayValue"in r}function Zb(r){return!!r&&"nullValue"in r}function ew(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function qh(r){return!!r&&"mapValue"in r}function nk(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[$T])==null?void 0:s.stringValue)===FT}function gu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return va(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=gu(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gu(r.arrayValue.values[t]);return e}return{...r}}function rk(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===tk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.value=e}static empty(){return new Wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!qh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gu(t)}setAll(e){let t=rn.emptyPath(),s={},a=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,a),s={},a=[],t=f.popLast()}c?s[f.lastSegment()]=gu(c):a.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());qh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];qh(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){va(t,((a,l)=>e[a]=l));for(const a of s)delete e[a]}clone(){return new Wn(gu(this.value))}}function GT(r){const e=[];return va(r.fields,((t,s)=>{const a=new rn([t]);if(qh(s)){const l=GT(s.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new yr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,t,s,a,l,c,f){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new hn(e,0,xe.min(),xe.min(),xe.min(),Wn.empty(),0)}static newFoundDocument(e,t,s,a){return new hn(e,1,t,xe.min(),s,a,0)}static newNoDocument(e,t){return new hn(e,2,t,xe.min(),xe.min(),Wn.empty(),0)}static newUnknownDocument(e,t){return new hn(e,3,t,xe.min(),xe.min(),Wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t){this.position=e,this.inclusive=t}}function tw(r,e,t){let s=0;for(let a=0;a<r.position.length;a++){const l=e[a],c=r.position[a];if(l.field.isKeyField()?s=be.comparator(be.fromName(c.referenceValue),t.key):s=Vo(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function nw(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Qr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,t="asc"){this.field=e,this.dir=t}}function sk(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{}class Lt extends KT{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new ak(e,t,s):t==="array-contains"?new uk(e,s):t==="in"?new ck(e,s):t==="not-in"?new hk(e,s):t==="array-contains-any"?new dk(e,s):new Lt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new ok(e,s):new lk(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Vo(t,this.value)):t!==null&&Ti(this.value)===Ti(t)&&this.matchesComparison(Vo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vr extends KT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new vr(e,t)}matches(e){return QT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function QT(r){return r.op==="and"}function YT(r){return ik(r)&&QT(r)}function ik(r){for(const e of r.filters)if(e instanceof vr)return!1;return!0}function Ug(r){if(r instanceof Lt)return r.field.canonicalString()+r.op.toString()+Uo(r.value);if(YT(r))return r.filters.map((e=>Ug(e))).join(",");{const e=r.filters.map((t=>Ug(t))).join(",");return`${r.op}(${e})`}}function XT(r,e){return r instanceof Lt?(function(s,a){return a instanceof Lt&&s.op===a.op&&s.field.isEqual(a.field)&&Qr(s.value,a.value)})(r,e):r instanceof vr?(function(s,a){return a instanceof vr&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((l,c,f)=>l&&XT(c,a.filters[f])),!0):!1})(r,e):void Ae(19439)}function JT(r){return r instanceof Lt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Uo(t.value)}`})(r):r instanceof vr?(function(t){return t.op.toString()+" {"+t.getFilters().map(JT).join(" ,")+"}"})(r):"Filter"}class ak extends Lt{constructor(e,t,s){super(e,t,s),this.key=be.fromName(s.referenceValue)}matches(e){const t=be.comparator(e.key,this.key);return this.matchesComparison(t)}}class ok extends Lt{constructor(e,t){super(e,"in",t),this.keys=WT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class lk extends Lt{constructor(e,t){super(e,"not-in",t),this.keys=WT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function WT(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>be.fromName(s.referenceValue)))}class uk extends Lt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xp(t)&&Nu(t.arrayValue,this.value)}}class ck extends Lt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Nu(this.value.arrayValue,t)}}class hk extends Lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Nu(this.value.arrayValue,t)}}class dk extends Lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Nu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,t=null,s=[],a=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function rw(r,e=null,t=[],s=[],a=null,l=null,c=null){return new fk(r,e,t,s,a,l,c)}function Rp(r){const e=Ie(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Ug(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Ad(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Uo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Uo(s))).join(",")),e.Te=t}return e.Te}function Cp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!sk(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!XT(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!nw(r.startAt,e.startAt)&&nw(r.endAt,e.endAt)}function Lg(r){return be.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,t=null,s=[],a=[],l=null,c="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function mk(r,e,t,s,a,l,c,f){return new Jo(r,e,t,s,a,l,c,f)}function Ip(r){return new Jo(r)}function sw(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function ZT(r){return r.collectionGroup!==null}function pu(r){const e=Ie(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new $t(rn.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(f=f.add(p.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Ou(l,s))})),t.has(rn.keyField().canonicalString())||e.Ie.push(new Ou(rn.keyField(),s))}return e.Ie}function $r(r){const e=Ie(r);return e.Ee||(e.Ee=gk(e,pu(r))),e.Ee}function gk(r,e){if(r.limitType==="F")return rw(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Ou(a.field,l)}));const t=r.endAt?new od(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new od(r.startAt.position,r.startAt.inclusive):null;return rw(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function zg(r,e){const t=r.filters.concat([e]);return new Jo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Bg(r,e,t){return new Jo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Rd(r,e){return Cp($r(r),$r(e))&&r.limitType===e.limitType}function eS(r){return`${Rp($r(r))}|lt:${r.limitType}`}function wo(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((a=>JT(a))).join(", ")}]`),Ad(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((a=>Uo(a))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((a=>Uo(a))).join(",")),`Target(${s})`})($r(r))}; limitType=${r.limitType})`}function Cd(r,e){return e.isFoundDocument()&&(function(s,a){const l=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):be.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(r,e)&&(function(s,a){for(const l of pu(s))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(s,a){for(const l of s.filters)if(!l.matches(a))return!1;return!0})(r,e)&&(function(s,a){return!(s.startAt&&!(function(c,f,g){const p=tw(c,f,g);return c.inclusive?p<=0:p<0})(s.startAt,pu(s),a)||s.endAt&&!(function(c,f,g){const p=tw(c,f,g);return c.inclusive?p>=0:p>0})(s.endAt,pu(s),a))})(r,e)}function pk(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function tS(r){return(e,t)=>{let s=!1;for(const a of pu(r)){const l=yk(a,e,t);if(l!==0)return l;s=s||a.field.isKeyField()}return 0}}function yk(r,e,t){const s=r.field.isKeyField()?be.comparator(e.key,t.key):(function(l,c,f){const g=c.data.field(l),p=f.data.field(l);return g!==null&&p!==null?Vo(g,p):Ae(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[a,l]of s)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){va(this.inner,((t,s)=>{for(const[a,l]of s)e(a,l)}))}isEmpty(){return UT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k=new _t(be.comparator);function Ts(){return _k}const nS=new _t(be.comparator);function lu(...r){let e=nS;for(const t of r)e=e.insert(t.key,t);return e}function rS(r){let e=nS;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function ha(){return yu()}function sS(){return yu()}function yu(){return new ba((r=>r.toString()),((r,e)=>r.isEqual(e)))}const vk=new _t(be.comparator),bk=new $t(be.comparator);function qe(...r){let e=bk;for(const t of r)e=e.add(t);return e}const wk=new $t(Be);function Ek(){return wk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sd(e)?"-0":e}}function iS(r){return{integerValue:""+r}}function Tk(r,e){return XO(e)?iS(e):Np(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(){this._=void 0}}function Sk(r,e,t){return r instanceof ld?(function(a,l){const c={fields:{[BT]:{stringValue:zT},[HT]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Ap(l)&&(l=xd(l)),l&&(c.fields[qT]=l),{mapValue:c}})(t,e):r instanceof ku?oS(r,e):r instanceof ju?lS(r,e):(function(a,l){const c=aS(a,l),f=iw(c)+iw(a.Ae);return Vg(c)&&Vg(a.Ae)?iS(f):Np(a.serializer,f)})(r,e)}function Ak(r,e,t){return r instanceof ku?oS(r,e):r instanceof ju?lS(r,e):t}function aS(r,e){return r instanceof ud?(function(s){return Vg(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class ld extends Id{}class ku extends Id{constructor(e){super(),this.elements=e}}function oS(r,e){const t=uS(e);for(const s of r.elements)t.some((a=>Qr(a,s)))||t.push(s);return{arrayValue:{values:t}}}class ju extends Id{constructor(e){super(),this.elements=e}}function lS(r,e){let t=uS(e);for(const s of r.elements)t=t.filter((a=>!Qr(a,s)));return{arrayValue:{values:t}}}class ud extends Id{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function iw(r){return Ct(r.integerValue||r.doubleValue)}function uS(r){return xp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function xk(r,e){return r.field.isEqual(e.field)&&(function(s,a){return s instanceof ku&&a instanceof ku||s instanceof ju&&a instanceof ju?Po(s.elements,a.elements,Qr):s instanceof ud&&a instanceof ud?Qr(s.Ae,a.Ae):s instanceof ld&&a instanceof ld})(r.transform,e.transform)}class Rk{constructor(e,t){this.version=e,this.transformResults=t}}class vs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new vs}static exists(e){return new vs(void 0,e)}static updateTime(e){return new vs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Nd{}function cS(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new dS(r.key,vs.none()):new Bu(r.key,r.data,vs.none());{const t=r.data,s=Wn.empty();let a=new $t(rn.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),a=a.add(l)}return new wa(r.key,s,new yr(a.toArray()),vs.none())}}function Ck(r,e,t){r instanceof Bu?(function(a,l,c){const f=a.value.clone(),g=ow(a.fieldTransforms,l,c.transformResults);f.setAll(g),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(r,e,t):r instanceof wa?(function(a,l,c){if(!Hh(a.precondition,l))return void l.convertToUnknownDocument(c.version);const f=ow(a.fieldTransforms,l,c.transformResults),g=l.data;g.setAll(hS(a)),g.setAll(f),l.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(r,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function _u(r,e,t,s){return r instanceof Bu?(function(l,c,f,g){if(!Hh(l.precondition,c))return f;const p=l.value.clone(),b=lw(l.fieldTransforms,g,c);return p.setAll(b),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(r,e,t,s):r instanceof wa?(function(l,c,f,g){if(!Hh(l.precondition,c))return f;const p=lw(l.fieldTransforms,g,c),b=c.data;return b.setAll(hS(l)),b.setAll(p),c.convertToFoundDocument(c.version,b).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(r,e,t,s):(function(l,c,f){return Hh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(r,e,t)}function Ik(r,e){let t=null;for(const s of r.fieldTransforms){const a=e.data.field(s.field),l=aS(s.transform,a||null);l!=null&&(t===null&&(t=Wn.empty()),t.set(s.field,l))}return t||null}function aw(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Po(s,a,((l,c)=>xk(l,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Bu extends Nd{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class wa extends Nd{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function hS(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function ow(r,e,t){const s=new Map;Xe(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let a=0;a<t.length;a++){const l=r[a],c=l.transform,f=e.data.field(l.field);s.set(l.field,Ak(c,f,t[a]))}return s}function lw(r,e,t){const s=new Map;for(const a of r){const l=a.transform,c=t.data.field(a.field);s.set(a.field,Sk(l,c,e))}return s}class dS extends Nd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Nk extends Nd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&Ck(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=_u(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=_u(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=sS();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(a.key)?null:f;const g=cS(c,f);g!==null&&s.set(a.key,g),c.isValidDocument()||c.convertToNoDocument(xe.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),qe())}isEqual(e){return this.batchId===e.batchId&&Po(this.mutations,e.mutations,((t,s)=>aw(t,s)))&&Po(this.baseMutations,e.baseMutations,((t,s)=>aw(t,s)))}}class Op{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){Xe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=(function(){return vk})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,s[c].version);return new Op(e,t,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,Fe;function Dk(r){switch(r){case te.OK:return Ae(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Ae(15467,{code:r})}}function fS(r){if(r===void 0)return Es("GRPC error has no .code"),te.UNKNOWN;switch(r){case Vt.OK:return te.OK;case Vt.CANCELLED:return te.CANCELLED;case Vt.UNKNOWN:return te.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return te.INTERNAL;case Vt.UNAVAILABLE:return te.UNAVAILABLE;case Vt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Vt.NOT_FOUND:return te.NOT_FOUND;case Vt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Vt.ABORTED:return te.ABORTED;case Vt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Vt.DATA_LOSS:return te.DATA_LOSS;default:return Ae(39323,{code:r})}}(Fe=Vt||(Vt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=new _i([4294967295,4294967295],0);function uw(r){const e=Pk().encode(r),t=new RT;return t.update(e),new Uint8Array(t.digest())}function cw(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new _i([t,s],0),new _i([a,l],0)]}class kp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new uu(`Invalid padding: ${t}`);if(s<0)throw new uu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new uu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new uu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=_i.fromNumber(this.ge)}ye(e,t,s){let a=e.add(t.multiply(_i.fromNumber(s)));return a.compare(Mk)===1&&(a=new _i([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=uw(e),[s,a]=cw(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,a,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new kp(l,a,t);return s.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=uw(e),[s,a]=cw(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class uu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const a=new Map;return a.set(e,qu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Od(xe.min(),a,new _t(Be),Ts(),qe())}}class qu{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new qu(s,t,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,t,s,a){this.be=e,this.removedTargetIds=t,this.key=s,this.De=a}}class mS{constructor(e,t){this.targetId=e,this.Ce=t}}class gS{constructor(e,t,s=sn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class hw{constructor(){this.ve=0,this.Fe=dw(),this.Me=sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qe(),t=qe(),s=qe();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:Ae(38017,{changeType:l})}})),new qu(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=dw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Vk{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ts(),this.Je=Dh(),this.He=Dh(),this.Ye=new _t(Be)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,s=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Lg(l))if(s===0){const c=new be(l.path);this.et(t,c,hn.newNoDocument(c,xe.min()))}else Xe(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const f=this.ut(e),g=f?this.ct(f,e,c):1;if(g!==0){this.it(t);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:l=0}=t;let c,f;try{c=Ei(s).toUint8Array()}catch(g){if(g instanceof LT)return Do("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new kp(c,a,l)}catch(g){return Do(g instanceof uu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let a=0;return s.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&Lg(f.target)){const g=new be(f.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,hn.newNoDocument(g,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let s=qe();this.He.forEach(((l,c)=>{let f=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new Od(e,t,this.Ye,this.je,s);return this.je=Ts(),this.Je=Dh(),this.He=Dh(),this.Ye=new _t(Be),a}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new hw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new $t(Be),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new $t(Be),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new hw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Dh(){return new _t(be.comparator)}function dw(){return new _t(be.comparator)}const Uk={asc:"ASCENDING",desc:"DESCENDING"},Lk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zk={and:"AND",or:"OR"};class Bk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function qg(r,e){return r.useProto3Json||Ad(e)?e:{value:e}}function cd(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pS(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function qk(r,e){return cd(r,e.toTimestamp())}function Fr(r){return Xe(!!r,49232),xe.fromTimestamp((function(t){const s=wi(t);return new ct(s.seconds,s.nanos)})(r))}function jp(r,e){return Hg(r,e).canonicalString()}function Hg(r,e){const t=(function(a){return new ut(["projects",a.projectId,"databases",a.database])})(r).child("documents");return e===void 0?t:t.child(e)}function yS(r){const e=ut.fromString(r);return Xe(ES(e),10190,{key:e.toString()}),e}function $g(r,e){return jp(r.databaseId,e.path)}function og(r,e){const t=yS(e);if(t.get(1)!==r.databaseId.projectId)throw new he(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new he(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new be(vS(t))}function _S(r,e){return jp(r.databaseId,e)}function Hk(r){const e=yS(r);return e.length===4?ut.emptyPath():vS(e)}function Fg(r){return new ut(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function vS(r){return Xe(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function fw(r,e,t){return{name:$g(r,e),fields:t.value.mapValue.fields}}function $k(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ae(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,b){return p.useProto3Json?(Xe(b===void 0||typeof b=="string",58123),sn.fromBase64String(b||"")):(Xe(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),sn.fromUint8Array(b||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(p){const b=p.code===void 0?te.UNKNOWN:fS(p.code);return new he(b,p.message||"")})(c);t=new gS(s,a,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=og(r,s.document.name),l=Fr(s.document.updateTime),c=s.document.createTime?Fr(s.document.createTime):xe.min(),f=new Wn({mapValue:{fields:s.document.fields}}),g=hn.newFoundDocument(a,l,c,f),p=s.targetIds||[],b=s.removedTargetIds||[];t=new $h(p,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=og(r,s.document),l=s.readTime?Fr(s.readTime):xe.min(),c=hn.newNoDocument(a,l),f=s.removedTargetIds||[];t=new $h([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=og(r,s.document),l=s.removedTargetIds||[];t=new $h([],l,a,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:l}=s,c=new jk(a,l),f=s.targetId;t=new mS(f,c)}}return t}function Fk(r,e){let t;if(e instanceof Bu)t={update:fw(r,e.key,e.value)};else if(e instanceof dS)t={delete:$g(r,e.key)};else if(e instanceof wa)t={update:fw(r,e.key,e.data),updateMask:e5(e.fieldMask)};else{if(!(e instanceof Nk))return Ae(16599,{Vt:e.type});t={verify:$g(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const f=c.transform;if(f instanceof ld)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof ku)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof ju)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof ud)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw Ae(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:qk(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ae(27497)})(r,e.precondition)),t}function Gk(r,e){return r&&r.length>0?(Xe(e!==void 0,14353),r.map((t=>(function(a,l){let c=a.updateTime?Fr(a.updateTime):Fr(l);return c.isEqual(xe.min())&&(c=Fr(l)),new Rk(c,a.transformResults||[])})(t,e)))):[]}function Kk(r,e){return{documents:[_S(r,e.path)]}}function Qk(r,e){const t={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=_S(r,a);const l=(function(p){if(p.length!==0)return wS(vr.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((b=>(function(A){return{field:Eo(A.field),direction:Jk(A.dir)}})(b)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=qg(r,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:a}}function Yk(r){let e=Hk(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){Xe(s===1,65062);const b=t.from[0];b.allDescendants?a=b.collectionId:e=e.child(b.collectionId)}let l=[];t.where&&(l=(function(E){const A=bS(E);return A instanceof vr&&YT(A)?A.getFilters():[A]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((A=>(function(k){return new Ou(To(k.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(A)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let A;return A=typeof E=="object"?E.value:E,Ad(A)?null:A})(t.limit));let g=null;t.startAt&&(g=(function(E){const A=!!E.before,S=E.values||[];return new od(S,A)})(t.startAt));let p=null;return t.endAt&&(p=(function(E){const A=!E.before,S=E.values||[];return new od(S,A)})(t.endAt)),mk(e,a,c,l,f,"F",g,p)}function Xk(r,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function bS(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=To(t.unaryFilter.field);return Lt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=To(t.unaryFilter.field);return Lt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=To(t.unaryFilter.field);return Lt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=To(t.unaryFilter.field);return Lt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Lt.create(To(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return vr.create(t.compositeFilter.filters.map((s=>bS(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(t.compositeFilter.op))})(r):Ae(30097,{filter:r})}function Jk(r){return Uk[r]}function Wk(r){return Lk[r]}function Zk(r){return zk[r]}function Eo(r){return{fieldPath:r.canonicalString()}}function To(r){return rn.fromServerFormat(r.fieldPath)}function wS(r){return r instanceof Lt?(function(t){if(t.op==="=="){if(ew(t.value))return{unaryFilter:{field:Eo(t.field),op:"IS_NAN"}};if(Zb(t.value))return{unaryFilter:{field:Eo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ew(t.value))return{unaryFilter:{field:Eo(t.field),op:"IS_NOT_NAN"}};if(Zb(t.value))return{unaryFilter:{field:Eo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Eo(t.field),op:Wk(t.op),value:t.value}}})(r):r instanceof vr?(function(t){const s=t.getFilters().map((a=>wS(a)));return s.length===1?s[0]:{compositeFilter:{op:Zk(t.op),filters:s}}})(r):Ae(54877,{filter:r})}function e5(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function ES(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,t,s,a,l=xe.min(),c=xe.min(),f=sn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new fi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e){this.yt=e}}function n5(r){const e=Yk({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Bg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(){this.Cn=new s5}addToCollectionParentIndex(e,t){return this.Cn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(bi.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(bi.min())}updateCollectionGroup(e,t,s){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class s5{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new $t(ut.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new $t(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},TS=41943040;class Sn{static withCacheSize(e){return new Sn(e,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(TS,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Lo(0)}static cr(){return new Lo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw="LruGarbageCollector",i5=1048576;function pw([r,e],[t,s]){const a=Be(r,t);return a===0?Be(e,s):a}class a5{constructor(e){this.Ir=e,this.buffer=new $t(pw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();pw(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class o5{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(gw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Xo(t)?de(gw,"Ignoring IndexedDB error during garbage collection: ",t):await Yo(t)}await this.Vr(3e5)}))}}class l5{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return re.resolve(Sd.ce);const s=new a5(t);return this.mr.forEachTarget(e,(a=>s.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>s.Ar(a))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(mw)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mw):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,a,l,c,f,g,p;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,c=Date.now(),this.nthSequenceNumber(e,a)))).next((E=>(s=E,f=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(p=Date.now(),bo()<=ze.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-b}ms
	Determined least recently used ${a} in `+(f-c)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${E} documents in `+(p-g)+`ms
Total Duration: ${p-b}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:E}))))}}function u5(r,e){return new l5(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(){this.changes=new ba((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?re.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(s=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(s!==null&&_u(s.mutation,a,yr.empty(),ct.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,qe()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=qe()){const a=ha();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,s).next((l=>{let c=lu();return l.forEach(((f,g)=>{c=c.insert(f,g.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=ha();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,qe())))}populateOverlays(e,t,s){const a=[];return s.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,s,a){let l=Ts();const c=yu(),f=(function(){return yu()})();return t.forEach(((g,p)=>{const b=s.get(p.key);a.has(p.key)&&(b===void 0||b.mutation instanceof wa)?l=l.insert(p.key,p):b!==void 0?(c.set(p.key,b.mutation.getFieldMask()),_u(b.mutation,p,b.mutation.getFieldMask(),ct.now())):c.set(p.key,yr.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((p,b)=>c.set(p,b))),t.forEach(((p,b)=>f.set(p,new h5(b,c.get(p)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=yu();let a=new _t(((c,f)=>c-f)),l=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((g=>{const p=t.get(g);if(p===null)return;let b=s.get(g)||yr.empty();b=f.applyToLocalView(p,b),s.set(g,b);const E=(a.get(f.batchId)||qe()).add(g);a=a.insert(f.batchId,E)}))})).next((()=>{const c=[],f=a.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),p=g.key,b=g.value,E=sS();b.forEach((A=>{if(!l.has(A)){const S=cS(t.get(A),s.get(A));S!==null&&E.set(A,S),l=l.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,E))}return re.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,a){return(function(c){return be.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ZT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,a):this.getDocumentsMatchingCollectionQuery(e,t,s,a)}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):re.resolve(ha());let f=Ru,g=l;return c.next((p=>re.forEach(p,((b,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(b)?re.resolve():this.remoteDocumentCache.getEntry(e,b).next((A=>{g=g.insert(b,A)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,g,p,qe()))).next((b=>({batchId:f,changes:rS(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new be(t)).next((s=>{let a=lu();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,a){const l=t.collectionGroup;let c=lu();return this.indexManager.getCollectionParents(e,l).next((f=>re.forEach(f,(g=>{const p=(function(E,A){return new Jo(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,s,a).next((b=>{b.forEach(((E,A)=>{c=c.insert(E,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,a)))).next((c=>{l.forEach(((g,p)=>{const b=p.getKey();c.get(b)===null&&(c=c.insert(b,hn.newInvalidDocument(b)))}));let f=lu();return c.forEach(((g,p)=>{const b=l.get(g);b!==void 0&&_u(b.mutation,p,yr.empty(),ct.now()),Cd(t,p)&&(f=f.insert(g,p))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return re.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Fr(a.createTime)}})(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:n5(a.bundledQuery),readTime:Fr(a.readTime)}})(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(){this.overlays=new _t(be.comparator),this.qr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ha();return re.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&s.set(a,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((a,l)=>{this.St(e,t,l)})),re.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),re.resolve()}getOverlaysForCollection(e,t,s){const a=ha(),l=t.length+1,c=new be(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const g=f.getNext().value,p=g.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&g.largestBatchId>s&&a.set(g.getKey(),g)}return re.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new _t(((p,b)=>p-b));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>s){let b=l.get(p.largestBatchId);b===null&&(b=ha(),l=l.insert(p.largestBatchId,b)),b.set(p.getKey(),p)}}const f=ha(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,b)=>f.set(p,b))),!(f.size()>=a)););return re.resolve(f)}St(e,t,s){const a=this.overlays.get(s.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new kk(t,s));let l=this.qr.get(t);l===void 0&&(l=qe(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(){this.Qr=new $t(Qt.$r),this.Ur=new $t(Qt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Qt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Qt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new be(new ut([])),s=new Qt(t,e),a=new Qt(t,e+1),l=[];return this.Ur.forEachInRange([s,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new be(new ut([])),s=new Qt(t,e),a=new Qt(t,e+1);let l=qe();return this.Ur.forEachInRange([s,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Qt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Qt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return be.comparator(e.key,t.key)||Be(e.Yr,t.Yr)}static Kr(e,t){return Be(e.Yr,t.Yr)||be.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new $t(Qt.$r)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Ok(l,t,s,a);this.mutationQueue.push(c);for(const f of a)this.Zr=this.Zr.add(new Qt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return re.resolve(c)}lookupMutationBatch(e,t){return re.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=this.ei(s),l=a<0?0:a;return re.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Sp:this.tr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Qt(t,0),a=new Qt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,a],(c=>{const f=this.Xr(c.Yr);l.push(f)})),re.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new $t(Be);return t.forEach((a=>{const l=new Qt(a,0),c=new Qt(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(f=>{s=s.add(f.Yr)}))})),re.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;be.isDocumentKey(l)||(l=l.child(""));const c=new Qt(new be(l),0);let f=new $t(Be);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!s.isPrefixOf(p)&&(p.length===a&&(f=f.add(g.Yr)),!0)}),c),re.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const a=this.Xr(s);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Xe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return re.forEach(t.mutations,(a=>{const l=new Qt(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Qt(t,0),a=this.Zr.firstAfterOrEqual(s);return re.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{constructor(e){this.ri=e,this.docs=(function(){return new _t(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return re.resolve(s?s.document.mutableCopy():hn.newInvalidDocument(t))}getEntries(e,t){let s=Ts();return t.forEach((a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():hn.newInvalidDocument(a))})),re.resolve(s)}getDocumentsMatchingQuery(e,t,s,a){let l=Ts();const c=t.path,f=new be(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:p,value:{document:b}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||GO(FO(b),s)<=0||(a.has(b.key)||Cd(t,b))&&(l=l.insert(b.key,b.mutableCopy()))}return re.resolve(l)}getAllFromCollectionGroup(e,t,s,a){Ae(9500)}ii(e,t){return re.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new _5(this)}getSize(e){return re.resolve(this.size)}}class _5 extends c5{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)})),re.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(e){this.persistence=e,this.si=new ba((t=>Rp(t)),Cp),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.oi=0,this._i=new Dp,this.targetCount=0,this.ai=Lo.ur()}forEachTarget(e,t){return this.si.forEach(((s,a)=>t(a))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),re.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Lo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Pr(t),re.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.si.forEach(((c,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),re.waitFor(l).next((()=>a))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return re.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),re.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),re.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return re.resolve(s)}containsKey(e,t){return re.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,t){this.ui={},this.overlays={},this.ci=new Sd(0),this.li=!1,this.li=!0,this.hi=new g5,this.referenceDelegate=e(this),this.Pi=new v5(this),this.indexManager=new r5,this.remoteDocumentCache=(function(a){return new y5(a)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new t5(t),this.Ii=new f5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new m5,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new p5(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){de("MemoryPersistence","Starting transaction:",e);const a=new b5(this.ci.next());return this.referenceDelegate.Ei(),s(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return re.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class b5 extends QO{constructor(e){super(),this.currentSequenceNumber=e}}class Pp{constructor(e){this.persistence=e,this.Ri=new Dp,this.Vi=null}static mi(e){return new Pp(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),re.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),re.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.fi,(s=>{const a=be.fromPath(s);return this.gi(e,a).next((l=>{l||t.removeEntry(a,xe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return re.or([()=>re.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class hd{constructor(e,t){this.persistence=e,this.pi=new ba((s=>JO(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=u5(this,t)}static mi(e,t){return new hd(e,t)}Ei(){}di(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((a=>s+a))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return re.forEach(this.pi,((s,a)=>this.br(e,s,a).next((l=>l?re.resolve():t(a)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((f=>{f||(s++,l.removeEntry(c,xe.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),re.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Bh(e.data.value)),t}br(e,t,s){return re.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return re.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=a}static As(e,t){let s=qe(),a=qe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Mp(e,t.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Z2()?8:YO(dn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new w5;return this.Ss(e,t,c).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,c,f.size)}))})).next((()=>l.result))}bs(e,t,s,a){return s.documentReadCount<this.fs?(bo()<=ze.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",wo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),re.resolve()):(bo()<=ze.DEBUG&&de("QueryEngine","Query:",wo(t),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(bo()<=ze.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",wo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$r(t))):re.resolve())}ys(e,t){if(sw(t))return re.resolve(null);let s=$r(t);return this.indexManager.getIndexType(e,s).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Bg(t,null,"F"),s=$r(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=qe(...l);return this.ps.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const p=this.Ds(t,f);return this.Cs(t,p,c,g.readTime)?this.ys(e,Bg(t,null,"F")):this.vs(e,p,t,g)}))))})))))}ws(e,t,s,a){return sw(t)||a.isEqual(xe.min())?re.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,a)?re.resolve(null):(bo()<=ze.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),wo(t)),this.vs(e,c,t,$O(a,Ru)).next((f=>f)))}))}Ds(e,t){let s=new $t(tS(e));return t.forEach(((a,l)=>{Cd(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,a){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,s){return bo()<=ze.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",wo(t)),this.ps.getDocumentsMatchingQuery(e,t,bi.min(),s)}vs(e,t,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp="LocalStore",T5=3e8;class S5{constructor(e,t,s,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new _t(Be),this.xs=new ba((l=>Rp(l)),Cp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new d5(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function A5(r,e,t,s){return new S5(r,e,t,s)}async function AS(r,e){const t=Ie(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],f=[];let g=qe();for(const p of a){c.push(p.batchId);for(const b of p.mutations)g=g.add(b.key)}for(const p of l){f.push(p.batchId);for(const b of p.mutations)g=g.add(b.key)}return t.localDocuments.getDocuments(s,g).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:f})))}))}))}function x5(r,e){const t=Ie(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,p,b){const E=p.batch,A=E.keys();let S=re.resolve();return A.forEach((k=>{S=S.next((()=>b.getEntry(g,k))).next((j=>{const P=p.docVersions.get(k);Xe(P!==null,48541),j.version.compareTo(P)<0&&(E.applyToRemoteDocument(j,p),j.isValidDocument()&&(j.setReadTime(p.commitVersion),b.addEntry(j)))}))})),S.next((()=>f.mutationQueue.removeMutationBatch(g,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let g=qe();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(g=g.add(f.batch.mutations[p].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,a)))}))}function xS(r){const e=Ie(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function R5(r,e){const t=Ie(r),s=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const f=[];e.targetChanges.forEach(((b,E)=>{const A=a.get(E);if(!A)return;f.push(t.Pi.removeMatchingKeys(l,b.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,b.addedDocuments,E))));let S=A.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?S=S.withResumeToken(sn.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):b.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(b.resumeToken,s)),a=a.insert(E,S),(function(j,P,G){return j.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=T5?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0})(A,S,b)&&f.push(t.Pi.updateTargetData(l,S))}));let g=Ts(),p=qe();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,b))})),f.push(C5(l,c,e.documentUpdates).next((b=>{g=b.ks,p=b.qs}))),!s.isEqual(xe.min())){const b=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(b)}return re.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,p))).next((()=>g))})).then((l=>(t.Ms=a,l)))}function C5(r,e,t){let s=qe(),a=qe();return t.forEach((l=>s=s.add(l))),e.getEntries(r,s).next((l=>{let c=Ts();return t.forEach(((f,g)=>{const p=l.get(f);g.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(f)),g.isNoDocument()&&g.version.isEqual(xe.min())?(e.removeEntry(f,g.readTime),c=c.insert(f,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(g),c=c.insert(f,g)):de(Vp,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",g.version)})),{ks:c,qs:a}}))}function I5(r,e){const t=Ie(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Sp),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function N5(r,e){const t=Ie(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return t.Pi.getTargetData(s,e).next((l=>l?(a=l,re.resolve(a)):t.Pi.allocateTargetId(s).next((c=>(a=new fi(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=t.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Gg(r,e,t){const s=Ie(r),a=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Xo(c))throw c;de(Vp,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function yw(r,e,t){const s=Ie(r);let a=xe.min(),l=qe();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,b){const E=Ie(g),A=E.xs.get(b);return A!==void 0?re.resolve(E.Ms.get(A)):E.Pi.getTargetData(p,b)})(s,c,$r(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,f.targetId).next((g=>{l=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?a:xe.min(),t?l:qe()))).next((f=>(O5(s,pk(e),f),{documents:f,Qs:l})))))}function O5(r,e,t){let s=r.Os.get(e)||xe.min();t.forEach(((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),r.Os.set(e,s)}class _w{constructor(){this.activeTargetIds=Ek()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class k5{constructor(){this.Mo=new _w,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new _w,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw="ConnectivityMonitor";class bw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(vw,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(vw,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ph=null;function Kg(){return Ph===null?Ph=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ph++,"0x"+Ph.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="RestConnection",D5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class P5{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===id?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,t,s,a,l){const c=Kg(),f=this.zo(e,t.toUriEncodedString());de(lg,`Sending RPC '${e}' ${c}:`,f,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,a,l);const{host:p}=new URL(f),b=$o(p);return this.Jo(e,f,g,s,b).then((E=>(de(lg,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Do(lg,`RPC '${e}' ${c} failed with error: `,E,"url: ",f,"request:",s),E}))}Ho(e,t,s,a,l,c){return this.Go(e,t,s,a,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Qo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),s&&s.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const s=D5[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class V5 extends P5{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,a,l){const c=Kg();return new Promise(((f,g)=>{const p=new CT;p.setWithCredentials(!0),p.listenOnce(IT.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case zh.NO_ERROR:const E=p.getResponseJson();de(un,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),f(E);break;case zh.TIMEOUT:de(un,`RPC '${e}' ${c} timed out`),g(new he(te.DEADLINE_EXCEEDED,"Request time out"));break;case zh.HTTP_ERROR:const A=p.getStatus();if(de(un,`RPC '${e}' ${c} failed with status:`,A,"response text:",p.getResponseText()),A>0){let S=p.getResponseJson();Array.isArray(S)&&(S=S[0]);const k=S==null?void 0:S.error;if(k&&k.status&&k.message){const j=(function(G){const J=G.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(J)>=0?J:te.UNKNOWN})(k.status);g(new he(j,k.message))}else g(new he(te.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new he(te.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{de(un,`RPC '${e}' ${c} completed.`)}}));const b=JSON.stringify(a);de(un,`RPC '${e}' ${c} sending request:`,a),p.send(t,"POST",b,s,15)}))}T_(e,t,s){const a=Kg(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=kT(),f=OT(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const b=l.join("");de(un,`Creating RPC '${e}' stream ${a}: ${b}`,g);const E=c.createWebChannel(b,g);this.I_(E);let A=!1,S=!1;const k=new M5({Yo:P=>{S?de(un,`Not sending because RPC '${e}' stream ${a} is closed:`,P):(A||(de(un,`Opening RPC '${e}' stream ${a} transport.`),E.open(),A=!0),de(un,`RPC '${e}' stream ${a} sending:`,P),E.send(P))},Zo:()=>E.close()}),j=(P,G,J)=>{P.listen(G,($=>{try{J($)}catch(se){setTimeout((()=>{throw se}),0)}}))};return j(E,ou.EventType.OPEN,(()=>{S||(de(un,`RPC '${e}' stream ${a} transport opened.`),k.o_())})),j(E,ou.EventType.CLOSE,(()=>{S||(S=!0,de(un,`RPC '${e}' stream ${a} transport closed`),k.a_(),this.E_(E))})),j(E,ou.EventType.ERROR,(P=>{S||(S=!0,Do(un,`RPC '${e}' stream ${a} transport errored. Name:`,P.name,"Message:",P.message),k.a_(new he(te.UNAVAILABLE,"The operation could not be completed")))})),j(E,ou.EventType.MESSAGE,(P=>{var G;if(!S){const J=P.data[0];Xe(!!J,16349);const $=J,se=($==null?void 0:$.error)||((G=$[0])==null?void 0:G.error);if(se){de(un,`RPC '${e}' stream ${a} received error:`,se);const Z=se.status;let ae=(function(I){const U=Vt[I];if(U!==void 0)return fS(U)})(Z),C=se.message;ae===void 0&&(ae=te.INTERNAL,C="Unknown error status: "+Z+" with message "+se.message),S=!0,k.a_(new he(ae,C)),E.close()}else de(un,`RPC '${e}' stream ${a} received:`,J),k.u_(J)}})),j(f,NT.STAT_EVENT,(P=>{P.stat===Dg.PROXY?de(un,`RPC '${e}' stream ${a} detected buffering proxy`):P.stat===Dg.NOPROXY&&de(un,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function ug(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(r){return new Bk(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e,t,s=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-s);a>0&&de("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="PersistentStream";class CS{constructor(e,t,s,a,l,c,f,g){this.Mi=e,this.S_=s,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new RS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(Es(t.toString()),Es("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===t&&this.G_(s,a)}),(s=>{e((()=>{const a=new he(te.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(ww,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(de(ww,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class U5 extends CS{constructor(e,t,s,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=$k(this.serializer,e),s=(function(l){if(!("targetChange"in l))return xe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?xe.min():c.readTime?Fr(c.readTime):xe.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Fg(this.serializer),t.addTarget=(function(l,c){let f;const g=c.target;if(f=Lg(g)?{documents:Kk(l,g)}:{query:Qk(l,g).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=pS(l,c.resumeToken);const p=qg(l,c.expectedCount);p!==null&&(f.expectedCount=p)}else if(c.snapshotVersion.compareTo(xe.min())>0){f.readTime=cd(l,c.snapshotVersion.toTimestamp());const p=qg(l,c.expectedCount);p!==null&&(f.expectedCount=p)}return f})(this.serializer,e);const s=Xk(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Fg(this.serializer),t.removeTarget=e,this.q_(t)}}class L5 extends CS{constructor(e,t,s,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Gk(e.writeResults,e.commitTime),s=Fr(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Fg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>Fk(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{}class B5 extends z5{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new he(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Hg(t,s),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(te.UNKNOWN,l.toString())}))}Ho(e,t,s,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Ho(e,Hg(t,s),a,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(te.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class q5{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Es(t),this.aa=!1):de("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="RemoteStore";class H5{constructor(e,t,s,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{Ea(this)&&(de(ya,"Restarting streams for network reachability change."),await(async function(g){const p=Ie(g);p.Ea.add(4),await Hu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await jd(p)})(this))}))})),this.Ra=new q5(s,a)}}async function jd(r){if(Ea(r))for(const e of r.da)await e(!0)}async function Hu(r){for(const e of r.da)await e(!1)}function IS(r,e){const t=Ie(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Bp(t)?zp(t):Wo(t).O_()&&Lp(t,e))}function Up(r,e){const t=Ie(r),s=Wo(t);t.Ia.delete(e),s.O_()&&NS(t,e),t.Ia.size===0&&(s.O_()?s.L_():Ea(t)&&t.Ra.set("Unknown"))}function Lp(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wo(r).Y_(e)}function NS(r,e){r.Va.Ue(e),Wo(r).Z_(e)}function zp(r){r.Va=new Vk({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Wo(r).start(),r.Ra.ua()}function Bp(r){return Ea(r)&&!Wo(r).x_()&&r.Ia.size>0}function Ea(r){return Ie(r).Ea.size===0}function OS(r){r.Va=void 0}async function $5(r){r.Ra.set("Online")}async function F5(r){r.Ia.forEach(((e,t)=>{Lp(r,e)}))}async function G5(r,e){OS(r),Bp(r)?(r.Ra.ha(e),zp(r)):r.Ra.set("Unknown")}async function K5(r,e,t){if(r.Ra.set("Online"),e instanceof gS&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const f of l.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,c),a.Ia.delete(f),a.Va.removeTarget(f))})(r,e)}catch(s){de(ya,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await dd(r,s)}else if(e instanceof $h?r.Va.Ze(e):e instanceof mS?r.Va.st(e):r.Va.tt(e),!t.isEqual(xe.min()))try{const s=await xS(r.localStore);t.compareTo(s)>=0&&await(function(l,c){const f=l.Va.Tt(c);return f.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const b=l.Ia.get(p);b&&l.Ia.set(p,b.withResumeToken(g.resumeToken,c))}})),f.targetMismatches.forEach(((g,p)=>{const b=l.Ia.get(g);if(!b)return;l.Ia.set(g,b.withResumeToken(sn.EMPTY_BYTE_STRING,b.snapshotVersion)),NS(l,g);const E=new fi(b.target,g,p,b.sequenceNumber);Lp(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(r,t)}catch(s){de(ya,"Failed to raise snapshot:",s),await dd(r,s)}}async function dd(r,e,t){if(!Xo(e))throw e;r.Ea.add(1),await Hu(r),r.Ra.set("Offline"),t||(t=()=>xS(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{de(ya,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await jd(r)}))}function kS(r,e){return e().catch((t=>dd(r,t,e)))}async function Dd(r){const e=Ie(r),t=Si(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Sp;for(;Q5(e);)try{const a=await I5(e.localStore,s);if(a===null){e.Ta.length===0&&t.L_();break}s=a.batchId,Y5(e,a)}catch(a){await dd(e,a)}jS(e)&&DS(e)}function Q5(r){return Ea(r)&&r.Ta.length<10}function Y5(r,e){r.Ta.push(e);const t=Si(r);t.O_()&&t.X_&&t.ea(e.mutations)}function jS(r){return Ea(r)&&!Si(r).x_()&&r.Ta.length>0}function DS(r){Si(r).start()}async function X5(r){Si(r).ra()}async function J5(r){const e=Si(r);for(const t of r.Ta)e.ea(t.mutations)}async function W5(r,e,t){const s=r.Ta.shift(),a=Op.from(s,e,t);await kS(r,(()=>r.remoteSyncer.applySuccessfulWrite(a))),await Dd(r)}async function Z5(r,e){e&&Si(r).X_&&await(async function(s,a){if((function(c){return Dk(c)&&c!==te.ABORTED})(a.code)){const l=s.Ta.shift();Si(s).B_(),await kS(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Dd(s)}})(r,e),jS(r)&&DS(r)}async function Ew(r,e){const t=Ie(r);t.asyncQueue.verifyOperationInProgress(),de(ya,"RemoteStore received new credentials");const s=Ea(t);t.Ea.add(3),await Hu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await jd(t)}async function ej(r,e){const t=Ie(r);e?(t.Ea.delete(2),await jd(t)):e||(t.Ea.add(2),await Hu(t),t.Ra.set("Unknown"))}function Wo(r){return r.ma||(r.ma=(function(t,s,a){const l=Ie(t);return l.sa(),new U5(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Xo:$5.bind(null,r),t_:F5.bind(null,r),r_:G5.bind(null,r),H_:K5.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Bp(r)?zp(r):r.Ra.set("Unknown")):(await r.ma.stop(),OS(r))}))),r.ma}function Si(r){return r.fa||(r.fa=(function(t,s,a){const l=Ie(t);return l.sa(),new L5(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:X5.bind(null,r),r_:Z5.bind(null,r),ta:J5.bind(null,r),na:W5.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await Dd(r)):(await r.fa.stop(),r.Ta.length>0&&(de(ya,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new _s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,a,l){const c=Date.now()+s,f=new qp(e,t,c,a,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hp(r,e){if(Es("AsyncQueue",`${e}: ${r}`),Xo(r))return new he(te.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{static emptySet(e){return new Io(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||be.comparator(t.key,s.key):(t,s)=>be.comparator(t.key,s.key),this.keyedMap=lu(),this.sortedSet=new _t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Io)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Io;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(){this.ga=new _t(be.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class zo{constructor(e,t,s,a,l,c,f,g,p){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(e,t,s,a,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new zo(e,t,Io.emptySet(t),c,s,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class nj{constructor(){this.queries=Sw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const a=Ie(t),l=a.queries;a.queries=Sw(),l.forEach(((c,f)=>{for(const g of f.Sa)g.onError(s)}))})(this,new he(te.ABORTED,"Firestore shutting down"))}}function Sw(){return new ba((r=>eS(r)),Rd)}async function PS(r,e){const t=Ie(r);let s=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(s=2):(l=new tj,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const f=Hp(c,`Initialization of query '${wo(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&$p(t)}async function MS(r,e){const t=Ie(r),s=e.query;let a=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function rj(r,e){const t=Ie(r);let s=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const f of c.Sa)f.Fa(a)&&(s=!0);c.wa=a}}s&&$p(t)}function sj(r,e,t){const s=Ie(r),a=s.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);s.queries.delete(e)}function $p(r){r.Ca.forEach((e=>{e.next()}))}var Qg,Aw;(Aw=Qg||(Qg={})).Ma="default",Aw.Cache="cache";class VS{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new zo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e){this.key=e}}class LS{constructor(e){this.key=e}}class ij{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=qe(),this.mutatedKeys=qe(),this.eu=tS(e),this.tu=new Io(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new Tw,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,f=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((b,E)=>{const A=a.get(b),S=Cd(this.query,E)?E:null,k=!!A&&this.mutatedKeys.has(A.key),j=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let P=!1;A&&S?A.data.isEqual(S.data)?k!==j&&(s.track({type:3,doc:S}),P=!0):this.su(A,S)||(s.track({type:2,doc:S}),P=!0,(g&&this.eu(S,g)>0||p&&this.eu(S,p)<0)&&(f=!0)):!A&&S?(s.track({type:0,doc:S}),P=!0):A&&!S&&(s.track({type:1,doc:A}),P=!0,(g||p)&&(f=!0)),P&&(S?(c=c.add(S),l=j?l.add(b):l.delete(b)):(c=c.delete(b),l=l.delete(b)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const b=this.query.limitType==="F"?c.last():c.first();c=c.delete(b.key),l=l.delete(b.key),s.track({type:1,doc:b})}return{tu:c,iu:s,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((b,E)=>(function(S,k){const j=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:P})}};return j(S)-j(k)})(b.type,E.type)||this.eu(b.doc,E.doc))),this.ou(s),a=a??!1;const f=t&&!a?this._u():[],g=this.Xa.size===0&&this.current&&!a?1:0,p=g!==this.Za;return this.Za=g,c.length!==0||p?{snapshot:new zo(this.query,e.tu,l,c,e.mutatedKeys,g===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Tw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=qe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new LS(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new US(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=qe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return zo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Fp="SyncEngine";class aj{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class oj{constructor(e){this.key=e,this.hu=!1}}class lj{constructor(e,t,s,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ba((f=>eS(f)),Rd),this.Iu=new Map,this.Eu=new Set,this.du=new _t(be.comparator),this.Au=new Map,this.Ru=new Dp,this.Vu={},this.mu=new Map,this.fu=Lo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function uj(r,e,t=!0){const s=FS(r);let a;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await zS(s,e,t,!0),a}async function cj(r,e){const t=FS(r);await zS(t,e,!0,!1)}async function zS(r,e,t,s){const a=await N5(r.localStore,$r(e)),l=a.targetId,c=r.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await hj(r,e,l,c==="current",a.resumeToken)),r.isPrimaryClient&&t&&IS(r.remoteStore,a),f}async function hj(r,e,t,s,a){r.pu=(E,A,S)=>(async function(j,P,G,J){let $=P.view.ru(G);$.Cs&&($=await yw(j.localStore,P.query,!1).then((({documents:C})=>P.view.ru(C,$))));const se=J&&J.targetChanges.get(P.targetId),Z=J&&J.targetMismatches.get(P.targetId)!=null,ae=P.view.applyChanges($,j.isPrimaryClient,se,Z);return Rw(j,P.targetId,ae.au),ae.snapshot})(r,E,A,S);const l=await yw(r.localStore,e,!0),c=new ij(e,l.Qs),f=c.ru(l.documents),g=qu.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",a),p=c.applyChanges(f,r.isPrimaryClient,g);Rw(r,t,p.au);const b=new aj(e,t,c);return r.Tu.set(e,b),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),p.snapshot}async function dj(r,e,t){const s=Ie(r),a=s.Tu.get(e),l=s.Iu.get(a.targetId);if(l.length>1)return s.Iu.set(a.targetId,l.filter((c=>!Rd(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Gg(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),t&&Up(s.remoteStore,a.targetId),Yg(s,a.targetId)})).catch(Yo)):(Yg(s,a.targetId),await Gg(s.localStore,a.targetId,!0))}async function fj(r,e){const t=Ie(r),s=t.Tu.get(e),a=t.Iu.get(s.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Up(t.remoteStore,s.targetId))}async function mj(r,e,t){const s=wj(r);try{const a=await(function(c,f){const g=Ie(c),p=ct.now(),b=f.reduce(((S,k)=>S.add(k.key)),qe());let E,A;return g.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let k=Ts(),j=qe();return g.Ns.getEntries(S,b).next((P=>{k=P,k.forEach(((G,J)=>{J.isValidDocument()||(j=j.add(G))}))})).next((()=>g.localDocuments.getOverlayedDocuments(S,k))).next((P=>{E=P;const G=[];for(const J of f){const $=Ik(J,E.get(J.key).overlayedDocument);$!=null&&G.push(new wa(J.key,$,GT($.value.mapValue),vs.exists(!0)))}return g.mutationQueue.addMutationBatch(S,p,G,f)})).next((P=>{A=P;const G=P.applyToLocalDocumentSet(E,j);return g.documentOverlayCache.saveOverlays(S,P.batchId,G)}))})).then((()=>({batchId:A.batchId,changes:rS(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),(function(c,f,g){let p=c.Vu[c.currentUser.toKey()];p||(p=new _t(Be)),p=p.insert(f,g),c.Vu[c.currentUser.toKey()]=p})(s,a.batchId,t),await $u(s,a.changes),await Dd(s.remoteStore)}catch(a){const l=Hp(a,"Failed to persist write");t.reject(l)}}async function BS(r,e){const t=Ie(r);try{const s=await R5(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(Xe(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?Xe(c.hu,14607):a.removedDocuments.size>0&&(Xe(c.hu,42227),c.hu=!1))})),await $u(t,s,e)}catch(s){await Yo(s)}}function xw(r,e,t){const s=Ie(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const a=[];s.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(c,f){const g=Ie(c);g.onlineState=f;let p=!1;g.queries.forEach(((b,E)=>{for(const A of E.Sa)A.va(f)&&(p=!0)})),p&&$p(g)})(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function gj(r,e,t){const s=Ie(r);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.Au.get(e),l=a&&a.key;if(l){let c=new _t(be.comparator);c=c.insert(l,hn.newNoDocument(l,xe.min()));const f=qe().add(l),g=new Od(xe.min(),new Map,new _t(Be),c,f);await BS(s,g),s.du=s.du.remove(l),s.Au.delete(e),Gp(s)}else await Gg(s.localStore,e,!1).then((()=>Yg(s,e,t))).catch(Yo)}async function pj(r,e){const t=Ie(r),s=e.batch.batchId;try{const a=await x5(t.localStore,e);HS(t,s,null),qS(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await $u(t,a)}catch(a){await Yo(a)}}async function yj(r,e,t){const s=Ie(r);try{const a=await(function(c,f){const g=Ie(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let b;return g.mutationQueue.lookupMutationBatch(p,f).next((E=>(Xe(E!==null,37113),b=E.keys(),g.mutationQueue.removeMutationBatch(p,E)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,b,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,b))).next((()=>g.localDocuments.getDocuments(p,b)))}))})(s.localStore,e);HS(s,e,t),qS(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await $u(s,a)}catch(a){await Yo(a)}}function qS(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function HS(r,e,t){const s=Ie(r);let a=s.Vu[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function Yg(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||$S(r,s)}))}function $S(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Up(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Gp(r))}function Rw(r,e,t){for(const s of t)s instanceof US?(r.Ru.addReference(s.key,e),_j(r,s)):s instanceof LS?(de(Fp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||$S(r,s.key)):Ae(19791,{wu:s})}function _j(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(de(Fp,"New document in limbo: "+t),r.Eu.add(s),Gp(r))}function Gp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new be(ut.fromString(e)),s=r.fu.next();r.Au.set(s,new oj(t)),r.du=r.du.insert(t,s),IS(r.remoteStore,new fi($r(Ip(t.path)),s,"TargetPurposeLimboResolution",Sd.ce))}}async function $u(r,e,t){const s=Ie(r),a=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,g)=>{c.push(s.pu(g,e,t).then((p=>{var b;if((p||t)&&s.isPrimaryClient){const E=p?!p.fromCache:(b=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:b.current;s.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(p){a.push(p);const E=Mp.As(g.targetId,p);l.push(E)}})))})),await Promise.all(c),s.Pu.H_(a),await(async function(g,p){const b=Ie(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>re.forEach(p,(A=>re.forEach(A.Es,(S=>b.persistence.referenceDelegate.addReference(E,A.targetId,S))).next((()=>re.forEach(A.ds,(S=>b.persistence.referenceDelegate.removeReference(E,A.targetId,S)))))))))}catch(E){if(!Xo(E))throw E;de(Vp,"Failed to update sequence numbers: "+E)}for(const E of p){const A=E.targetId;if(!E.fromCache){const S=b.Ms.get(A),k=S.snapshotVersion,j=S.withLastLimboFreeSnapshotVersion(k);b.Ms=b.Ms.insert(A,j)}}})(s.localStore,l))}async function vj(r,e){const t=Ie(r);if(!t.currentUser.isEqual(e)){de(Fp,"User change. New user:",e.toKey());const s=await AS(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new he(te.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await $u(t,s.Ls)}}function bj(r,e){const t=Ie(r),s=t.Au.get(e);if(s&&s.hu)return qe().add(s.key);{let a=qe();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const f=t.Tu.get(c);a=a.unionWith(f.view.nu)}return a}}function FS(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=BS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gj.bind(null,e),e.Pu.H_=rj.bind(null,e.eventManager),e.Pu.yu=sj.bind(null,e.eventManager),e}function wj(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yj.bind(null,e),e}class fd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return A5(this.persistence,new E5,e.initialUser,this.serializer)}Cu(e){return new SS(Pp.mi,this.serializer)}Du(e){return new k5}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fd.provider={build:()=>new fd};class Ej extends fd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Xe(this.persistence.referenceDelegate instanceof hd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new o5(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new SS((s=>hd.mi(s,t)),this.serializer)}}class Xg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>xw(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=vj.bind(null,this.syncEngine),await ej(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new nj})()}createDatastore(e){const t=kd(e.databaseInfo.databaseId),s=(function(l){return new V5(l)})(e.databaseInfo);return(function(l,c,f,g){return new B5(l,c,f,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,a,l,c,f){return new H5(s,a,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>xw(this.syncEngine,t,0)),(function(){return bw.v()?new bw:new j5})())}createSyncEngine(e,t){return(function(a,l,c,f,g,p,b){const E=new lj(a,l,c,f,g,p);return b&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=Ie(a);de(ya,"RemoteStore shutting down."),l.Ea.add(5),await Hu(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Xg.provider={build:()=>new Xg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Es("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai="FirestoreClient";class Tj{constructor(e,t,s,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=cn.UNAUTHENTICATED,this.clientId=Tp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{de(Ai,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(de(Ai,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Hp(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function cg(r,e){r.asyncQueue.verifyOperationInProgress(),de(Ai,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async a=>{s.isEqual(a)||(await AS(e.localStore,a),s=a)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Cw(r,e){r.asyncQueue.verifyOperationInProgress();const t=await Sj(r);de(Ai,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>Ew(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,a)=>Ew(e.remoteStore,a))),r._onlineComponents=e}async function Sj(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){de(Ai,"Using user provided OfflineComponentProvider");try{await cg(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===te.FAILED_PRECONDITION||a.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Do("Error using user provided cache. Falling back to memory cache: "+t),await cg(r,new fd)}}else de(Ai,"Using default OfflineComponentProvider"),await cg(r,new Ej(void 0));return r._offlineComponents}async function KS(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(de(Ai,"Using user provided OnlineComponentProvider"),await Cw(r,r._uninitializedComponentsProvider._online)):(de(Ai,"Using default OnlineComponentProvider"),await Cw(r,new Xg))),r._onlineComponents}function Aj(r){return KS(r).then((e=>e.syncEngine))}async function QS(r){const e=await KS(r),t=e.eventManager;return t.onListen=uj.bind(null,e.syncEngine),t.onUnlisten=dj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=cj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=fj.bind(null,e.syncEngine),t}function xj(r,e,t={}){const s=new _s;return r.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,g,p){const b=new GS({next:A=>{b.Nu(),c.enqueueAndForget((()=>MS(l,E)));const S=A.docs.has(f);!S&&A.fromCache?p.reject(new he(te.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&A.fromCache&&g&&g.source==="server"?p.reject(new he(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(A)},error:A=>p.reject(A)}),E=new VS(Ip(f.path),b,{includeMetadataChanges:!0,qa:!0});return PS(l,E)})(await QS(r),r.asyncQueue,e,t,s))),s.promise}function Rj(r,e,t={}){const s=new _s;return r.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,g,p){const b=new GS({next:A=>{b.Nu(),c.enqueueAndForget((()=>MS(l,E))),A.fromCache&&g.source==="server"?p.reject(new he(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(A)},error:A=>p.reject(A)}),E=new VS(f,b,{includeMetadataChanges:!0,qa:!0});return PS(l,E)})(await QS(r),r.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="firestore.googleapis.com",Nw=!0;class Ow{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XS,this.ssl=Nw}else this.host=e.host,this.ssl=e.ssl??Nw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=TS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<i5)throw new he(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YS(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new he(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new he(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new he(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pd{constructor(e,t,s,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ow({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ow(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new jO;switch(s.type){case"firstParty":return new VO(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new he(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=Iw.get(t);s&&(de("ComponentProvider","Removing Datastore"),Iw.delete(t),s.terminate())})(this),Promise.resolve()}}function Cj(r,e,t,s={}){var p;r=Mo(r,Pd);const a=$o(e),l=r._getSettings(),c={...l,emulatorOptions:r._getEmulatorOptions()},f=`${e}:${t}`;a&&(BE(`https://${f}`),qE("Firestore",!0)),l.host!==XS&&l.host!==f&&Do("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:a,emulatorOptions:s};if(!fa(g,c)&&(r._setSettings(g),s.mockUserToken)){let b,E;if(typeof s.mockUserToken=="string")b=s.mockUserToken,E=cn.MOCK_USER;else{b=$2(s.mockUserToken,(p=r._app)==null?void 0:p.options.projectId);const A=s.mockUserToken.sub||s.mockUserToken.user_id;if(!A)throw new he(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new cn(A)}r._authCredentials=new DO(new DT(b,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ta(this.firestore,e,this._query)}}class Ht{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ht(this.firestore,e,this._key)}toJSON(){return{type:Ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(zu(t,Ht._jsonSchema))return new Ht(e,s||null,new be(ut.fromString(t.referencePath)))}}Ht._jsonSchemaVersion="firestore/documentReference/1.0",Ht._jsonSchema={type:zt("string",Ht._jsonSchemaVersion),referencePath:zt("string")};class vi extends Ta{constructor(e,t,s){super(e,t,Ip(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new be(e))}withConverter(e){return new vi(this.firestore,e,this._path)}}function JS(r,e,...t){if(r=An(r),PT("collection","path",e),r instanceof Pd){const s=ut.fromString(e,...t);return $b(s),new vi(r,null,s)}{if(!(r instanceof Ht||r instanceof vi))throw new he(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ut.fromString(e,...t));return $b(s),new vi(r.firestore,null,s)}}function WS(r,e,...t){if(r=An(r),arguments.length===1&&(e=Tp.newId()),PT("doc","path",e),r instanceof Pd){const s=ut.fromString(e,...t);return Hb(s),new Ht(r,null,new be(s))}{if(!(r instanceof Ht||r instanceof vi))throw new he(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ut.fromString(e,...t));return Hb(s),new Ht(r.firestore,r instanceof vi?r.converter:null,new be(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="AsyncQueue";class jw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new RS(this,"async_queue_retry"),this._c=()=>{const s=ug();s&&de(kw,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=ug();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ug();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new _s;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Xo(e))throw e;de(kw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Es("INTERNAL UNHANDLED ERROR: ",Dw(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=qp.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Ae(47125,{Pc:Dw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Dw(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Md extends Pd{constructor(e,t,s,a){super(e,t,s,a),this.type="firestore",this._queue=new jw,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jw(e),this._firestoreClient=void 0,await e}}}function Ij(r,e){const t=typeof r=="object"?r:fp(),s=typeof r=="string"?r:id,a=dp(t,"firestore").getImmediate({identifier:s});if(!a._initialized){const l=q2("firestore");l&&Cj(a,...l)}return a}function Kp(r){if(r._terminated)throw new he(te.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Nj(r),r._firestoreClient}function Nj(r){var s,a,l;const e=r._freezeSettings(),t=(function(f,g,p,b){return new ek(f,g,p,b.host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,YS(b.experimentalLongPollingOptions),b.useFetchStreams,b.isUsingEmulator)})(r._databaseId,((s=r._app)==null?void 0:s.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new Tj(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zn(sn.fromBase64String(e))}catch(t){throw new he(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Zn(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zu(e,Zn._jsonSchema))return Zn.fromBase64String(e.bytes)}}Zn._jsonSchemaVersion="firestore/bytes/1.0",Zn._jsonSchema={type:zt("string",Zn._jsonSchemaVersion),bytes:zt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gr._jsonSchemaVersion}}static fromJSON(e){if(zu(e,Gr._jsonSchema))return new Gr(e.latitude,e.longitude)}}Gr._jsonSchemaVersion="firestore/geoPoint/1.0",Gr._jsonSchema={type:zt("string",Gr._jsonSchemaVersion),latitude:zt("number"),longitude:zt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Kr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zu(e,Kr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Kr(e.vectorValues);throw new he(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Kr._jsonSchemaVersion="firestore/vectorValue/1.0",Kr._jsonSchema={type:zt("string",Kr._jsonSchemaVersion),vectorValues:zt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj=/^__.*__$/;class kj{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new wa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bu(e,this.data,t,this.fieldTransforms)}}function e1(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:r})}}class Yp{constructor(e,t,s,a,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Yp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return md(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(e1(this.Ac)&&Oj.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class jj{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||kd(e)}Cc(e,t,s,a=!1){return new Yp({Ac:e,methodName:t,Dc:s,path:rn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function t1(r){const e=r._freezeSettings(),t=kd(r._databaseId);return new jj(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Dj(r,e,t,s,a,l={}){const c=r.Cc(l.merge||l.mergeFields?2:0,e,t,a);s1("Data must be an object, but it was:",c,s);const f=n1(s,c);let g,p;if(l.merge)g=new yr(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const b=[];for(const E of l.mergeFields){const A=Mj(e,E,t);if(!c.contains(A))throw new he(te.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);Uj(b,A)||b.push(A)}g=new yr(b),p=c.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,p=c.fieldTransforms;return new kj(new Wn(f),g,p)}function Pj(r,e,t,s=!1){return Xp(t,r.Cc(s?4:3,e))}function Xp(r,e){if(r1(r=An(r)))return s1("Unsupported field value:",e,r),n1(r,e);if(r instanceof ZS)return(function(s,a){if(!e1(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,a){const l=[];let c=0;for(const f of s){let g=Xp(f,a.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),c++}return{arrayValue:{values:l}}})(r,e)}return(function(s,a){if((s=An(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Tk(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=ct.fromDate(s);return{timestampValue:cd(a.serializer,l)}}if(s instanceof ct){const l=new ct(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:cd(a.serializer,l)}}if(s instanceof Gr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Zn)return{bytesValue:pS(a.serializer,s._byteString)};if(s instanceof Ht){const l=a.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:jp(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof Kr)return(function(c,f){return{mapValue:{fields:{[$T]:{stringValue:FT},[ad]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw f.Sc("VectorValues must only contain numeric values.");return Np(f.serializer,p)}))}}}}}})(s,a);throw a.Sc(`Unsupported field value: ${Td(s)}`)})(r,e)}function n1(r,e){const t={};return UT(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):va(r,((s,a)=>{const l=Xp(a,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function r1(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ct||r instanceof Gr||r instanceof Zn||r instanceof Ht||r instanceof ZS||r instanceof Kr)}function s1(r,e,t){if(!r1(t)||!MT(t)){const s=Td(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function Mj(r,e,t){if((e=An(e))instanceof Qp)return e._internalPath;if(typeof e=="string")return i1(r,e);throw md("Field path arguments must be of type string or ",r,!1,void 0,t)}const Vj=new RegExp("[~\\*/\\[\\]]");function i1(r,e,t){if(e.search(Vj)>=0)throw md(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Qp(...e.split("."))._internalPath}catch{throw md(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function md(r,e,t,s,a){const l=s&&!s.isEmpty(),c=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||c)&&(g+=" (found",l&&(g+=` in field ${s}`),c&&(g+=` in document ${a}`),g+=")"),new he(te.INVALID_ARGUMENT,f+r+g)}function Uj(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Lj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Lj extends a1{data(){return super.data()}}function Vd(r,e){return typeof e=="string"?i1(r,e):e instanceof Qp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new he(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jp{}class o1 extends Jp{}function Bj(r,e,...t){let s=[];e instanceof Jp&&s.push(e),s=s.concat(t),(function(l){const c=l.filter((g=>g instanceof Wp)).length,f=l.filter((g=>g instanceof Ud)).length;if(c>1||c>0&&f>0)throw new he(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const a of s)r=a._apply(r);return r}class Ud extends o1{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Ud(e,t,s)}_apply(e){const t=this._parse(e);return l1(e._query,t),new Ta(e.firestore,e.converter,zg(e._query,t))}_parse(e){const t=t1(e.firestore);return(function(l,c,f,g,p,b,E){let A;if(p.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new he(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){Mw(E,b);const k=[];for(const j of E)k.push(Pw(g,l,j));A={arrayValue:{values:k}}}else A=Pw(g,l,E)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||Mw(E,b),A=Pj(f,c,E,b==="in"||b==="not-in");return Lt.create(p,b,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function qj(r,e,t){const s=e,a=Vd("where",r);return Ud._create(a,s,t)}class Wp extends Jp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Wp(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:vr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const f=l.getFlattenedFilters();for(const g of f)l1(c,g),c=zg(c,g)})(e._query,t),new Ta(e.firestore,e.converter,zg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Zp extends o1{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Zp(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new he(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new he(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ou(l,c)})(e._query,this._field,this._direction);return new Ta(e.firestore,e.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new Jo(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function Hj(r,e="asc"){const t=e,s=Vd("orderBy",r);return Zp._create(s,t)}function Pw(r,e,t){if(typeof(t=An(t))=="string"){if(t==="")throw new he(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ZT(e)&&t.indexOf("/")!==-1)throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(ut.fromString(t));if(!be.isDocumentKey(s))throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Wb(r,new be(s))}if(t instanceof Ht)return Wb(r,t._key);throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Td(t)}.`)}function Mw(r,e){if(!Array.isArray(r)||r.length===0)throw new he(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function l1(r,e){const t=(function(a,l){for(const c of a)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(r.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class $j{convertValue(e,t="none"){switch(Ti(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ei(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return va(e,((a,l)=>{s[a]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,a,l;const t=(l=(a=(s=e.fields)==null?void 0:s[ad].arrayValue)==null?void 0:a.values)==null?void 0:l.map((c=>Ct(c.doubleValue)));return new Kr(t)}convertGeoPoint(e){return new Gr(Ct(e.latitude),Ct(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=xd(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Cu(e));default:return null}}convertTimestamp(e){const t=wi(e);return new ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=ut.fromString(e);Xe(ES(s),9688,{name:e});const a=new Iu(s.get(1),s.get(3)),l=new be(s.popFirst(5));return a.isEqual(t)||Es(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(r,e,t){let s;return s=r?r.toFirestore(e):e,s}class cu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class da extends a1{constructor(e,t,s,a,l,c){super(e,t,s,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Fh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Vd("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=da._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}da._jsonSchemaVersion="firestore/documentSnapshot/1.0",da._jsonSchema={type:zt("string",da._jsonSchemaVersion),bundleSource:zt("string","DocumentSnapshot"),bundleName:zt("string"),bundle:zt("string")};class Fh extends da{data(e={}){return super.data(e)}}class No{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new cu(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Fh(this._firestore,this._userDataWriter,s.key,s,new cu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((f=>{const g=new Fh(a._firestore,a._userDataWriter,f.doc.key,f.doc,new cu(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new Fh(a._firestore,a._userDataWriter,f.doc.key,f.doc,new cu(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,b=-1;return f.type!==0&&(p=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),b=c.indexOf(f.doc.key)),{type:Gj(f.type),doc:g,oldIndex:p,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=No._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Tp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Gj(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kj(r){r=Mo(r,Ht);const e=Mo(r.firestore,Md);return xj(Kp(e),r._key).then((t=>Jj(e,r,t)))}No._jsonSchemaVersion="firestore/querySnapshot/1.0",No._jsonSchema={type:zt("string",No._jsonSchemaVersion),bundleSource:zt("string","QuerySnapshot"),bundleName:zt("string"),bundle:zt("string")};class u1 extends $j{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,t)}}function Qj(r){r=Mo(r,Ta);const e=Mo(r.firestore,Md),t=Kp(e),s=new u1(e);return zj(r._query),Rj(t,r._query).then((a=>new No(e,s,r,a)))}function Yj(r,e){const t=Mo(r.firestore,Md),s=WS(r),a=Fj(r.converter,e);return Xj(t,[Dj(t1(r.firestore),"addDoc",s._key,a,r.converter!==null,{}).toMutation(s._key,vs.exists(!1))]).then((()=>s))}function Xj(r,e){return(function(s,a){const l=new _s;return s.asyncQueue.enqueueAndForget((async()=>mj(await Aj(s),a,l))),l.promise})(Kp(r),e)}function Jj(r,e,t){const s=t.docs.get(e._key),a=new u1(r);return new da(r,a,e._key,s,new cu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){Qo=a})(Fo),ko(new ma("firestore",((s,{instanceIdentifier:a,options:l})=>{const c=s.getProvider("app").getImmediate(),f=new Md(new PO(s.getProvider("auth-internal")),new UO(c,s.getProvider("app-check-internal")),(function(p,b){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new he(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Iu(p.options.projectId,b)})(c,a),c);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),pi(Lb,zb,e),pi(Lb,zb,"esm2020")})();const Wj={apiKey:"AIzaSyDll7h-FpzCVml2vy8KeMPA6xExGUda_NE",authDomain:"thi-tnd.firebaseapp.com",projectId:"thi-tnd",storageBucket:"thi-tnd.firebasestorage.app",messagingSenderId:"107125875663",appId:"1:107125875663:web:0e1a632779f51340c828ba",databaseURL:"https://thi-tnd-default-rtdb.asia-southeast1.firebasedatabase.app"},c1=oI().length?fp():FE(Wj),Jg=OO(c1),ey=Ij(c1),h1=ie.createContext(void 0),Zj=({children:r})=>{const[e,t]=ie.useState("noel");ie.useEffect(()=>{const l=localStorage.getItem("app-theme")||"noel";t(l),document.documentElement.setAttribute("data-theme",l)},[]);const s=a=>{t(a),document.documentElement.setAttribute("data-theme",a),localStorage.setItem("app-theme",a)};return _.jsx(h1.Provider,{value:{theme:e,setTheme:s},children:r})},an=()=>{const r=ie.useContext(h1);if(r===void 0)throw new Error("useTheme must be used within a ThemeProvider");return r},eD=r=>{const{theme:e}=an();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/8PDn1wfM/favicon.png",alt:"Online Exam Icon",...r}):e==="noel"?_.jsx("img",{src:"/assets/img/gift3.png",alt:"Gift Icon",...r,className:"h-16 w-16 object-contain"}):_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:_.jsx("path",{fillRule:"evenodd",d:"M3.75 4.5a3 3 0 00-3 3v10.5a3 3 0 003 3h16.5a3 3 0 003-3V7.5a3 3 0 00-3-3H3.75zm.75 4.5a.75.75 0 01.75-.75h13.5a.75.75 0 010 1.5H5.25a.75.75 0 01-.75-.75zm0 3.75a.75.75 0 01.75-.75h6a.75.75 0 010 1.5h-6a.75.75 0 01-.75-.75zm0 2.25a.75.75 0 01.75-.75h3a.75.75 0 010 1.5h-3a.75.75 0 01-.75-.75z",clipRule:"evenodd"})})},tD=r=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...r,children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),nD=r=>_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:[_.jsx("path",{d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm.25 4.5a.75.75 0 00-1.5 0v5.337a2.25 2.25 0 00-1.5 2.063v.75a.75.75 0 001.5 0v-.75a.75.75 0 01.75-.75h.75a.75.75 0 01.75.75v.75a.75.75 0 001.5 0v-.75a2.25 2.25 0 00-1.5-2.063V6.75z"}),_.jsx("path",{d:"M6.163 15.25a.75.75 0 011.06-1.06l1.25 1.25a.75.75 0 01-1.06 1.06l-1.25-1.25zm10.617 0a.75.75 0 011.06 1.06l-1.25 1.25a.75.75 0 01-1.06 1.06l1.25-1.25z"})]}),ty=r=>{const{theme:e}=an();return e==="noel"?_.jsx("img",{src:"/assets/img/ball.png",alt:"Check",...r,className:`${r.className} object-contain`}):_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:_.jsx("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z",clipRule:"evenodd"})})},ny=r=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:_.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z",clipRule:"evenodd"})}),rD=r=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:_.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 6a.75.75 0 00-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 000-1.5h-3.75V6z",clipRule:"evenodd"})}),Zo=r=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:_.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-4.28 9.22a.75.75 0 000 1.06l3 3a.75.75 0 101.06-1.06L10.81 12l1.47-1.47a.75.75 0 10-1.06-1.06l-3 3z",clipRule:"evenodd"})}),sD=r=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:_.jsx("path",{fillRule:"evenodd",d:"M16.28 11.47a.75.75 0 010 1.06l-3 3a.75.75 0 01-1.06-1.06L14.44 12l-2.22-2.22a.75.75 0 011.06-1.06l3 3z",clipRule:"evenodd"})}),d1=r=>{const{theme:e}=an();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/J0JwWn5p/Mattahan-Buuf-One-of-those-ugly-pens-you-just-find-lying-around-128.png",alt:"Pen Icon",...r}):e==="noel"?_.jsx("img",{src:"/assets/img/celebrate.png",alt:"Santa",...r,className:`${r.className} object-contain`}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:[_.jsx("path",{d:"M12.75 12.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"}),_.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM9 12a3 3 0 116 0 3 3 0 01-6 0zm-2.121 4.212a.75.75 0 01.688-1.228 5.253 5.253 0 018.866 0 .75.75 0 11-.688 1.228 3.753 3.753 0 00-7.49 0z",clipRule:"evenodd"})]})},iD=r=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:_.jsx("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-4.5a.75.75 0 000 1.5h6a.75.75 0 00.75-.75V4.5a.75.75 0 00-1.5 0v2.253a9 9 0 00-15.06 4.042.75.75 0 00.75.75h1.5a.75.75 0 00.75-.75zM19.245 13.941a7.5 7.5 0 01-12.548 3.364l-1.903-1.903h4.5a.75.75 0 000-1.5h-6a.75.75 0 00-.75.75v6a.75.75 0 001.5 0v-2.253a9 9 0 0015.06-4.042.75.75 0 00-.75-.75h-1.5a.75.75 0 00-.75.75z",clipRule:"evenodd"})}),Bo=r=>{const{theme:e}=an();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/xjbVmxDW/Oxygen-Icons-org-Oxygen-Categories-applications-education-university-256.png",alt:"Graduation Cap Icon",...r}):e==="noel"?_.jsx("img",{src:"/assets/img/home.png",alt:"Home Icon",...r,className:`${r.className} object-contain`}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:[_.jsx("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm0 2a8 8 0 100 16 8 8 0 000-16zm0 3a5 5 0 110 10 5 5 0 010-10zm0 2a3 3 0 100 6 3 3 0 000-6z"}),_.jsx("path",{d:"M12 3v2m0 14v2M3 12h2m14 0h-2m-8-8L6.414 5.414m11.172 11.172L16.243 15.12m0-9.706l-1.121 1.121M5.414 17.586L6.536 16.464"})]})},Wg=r=>{const{theme:e}=an();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/66GxZjxN/school-114359.png",alt:"School Bag Icon",...r}):e==="noel"?_.jsx("img",{src:"/assets/img/bell.png",alt:"Bell Icon",...r,className:`${r.className} object-contain`}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:[_.jsx("path",{d:"M12 2a1 1 0 011 1v7.683a4.502 4.502 0 012.722 2.054 3 3 0 01-1.33 3.963 3.003 3.003 0 01-4.783-3.963A4.502 4.502 0 0111 10.683V3a1 1 0 011-1zm-3.5 10a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm7 0a1.5 1.5 0 100 3 1.5 1.5 0 000-3z"}),_.jsx("path",{d:"M12 22a8.956 8.956 0 01-6-2.583V18h12v1.417A8.956 8.956 0 0112 22z"})]})},aD=r=>{const{theme:e}=an();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/h47RmyWN/Mattahan-Buuf-They-reply-technosorcery-128.png",alt:"Wrench Icon",...r}):e==="noel"?_.jsx("img",{src:"/assets/img/gift4.png",alt:"Gift Icon",...r,className:`${r.className} object-contain`}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:[_.jsx("path",{fillRule:"evenodd",d:"M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.981A10.503 10.503 0 0112 21a10.5 10.5 0 01-10.5-10.5c0-4.368 2.667-8.162 6.43-9.742a.75.75 0 01.819.162z",clipRule:"evenodd"}),_.jsx("path",{d:"M12.75 9a.75.75 0 00-1.5 0v2.25H9a.75.75 0 000 1.5h2.25V15a.75.75 0 001.5 0v-2.25H15a.75.75 0 000-1.5h-2.25V9z"})]})},oD=r=>{const{theme:e}=an();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/zvWm1BFk/book-512x512-35977.png",alt:"Book Icon",...r}):e==="noel"?_.jsx("img",{src:"/assets/img/hat.png",alt:"Hat Icon",...r,className:`${r.className} object-contain`}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:[_.jsx("path",{d:"M12 2L3 8v2h18V8l-9-6zm-1.5 10a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm3 0a1.5 1.5 0 100 3 1.5 1.5 0 000-3z"}),_.jsx("path",{d:"M4 14v6h16v-6H4zm6 2h4v2h-4v-2z"})]})},Vw=r=>{const{theme:e}=an();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/2yvpf67d/Mattahan-Buuf-A-Proper-Journal-Icon-128.png",alt:"Journal Icon",...r}):e==="noel"?_.jsx("img",{src:"/assets/img/gift5.png",alt:"Gift Icon",...r,className:`${r.className} object-contain`}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:[_.jsx("path",{fillRule:"evenodd",d:"M12 2a10 10 0 100 20 10 10 0 000-20zM4 12a8 8 0 1116 0 8 8 0 01-16 0z",clipRule:"evenodd"}),_.jsx("path",{d:"M16.95 7.05l-1.414 1.414-2.122-2.122 1.414-1.414 2.122 2.122zm-9.9 9.9l1.414-1.414 2.122 2.122-1.414 1.414-2.122-2.122zm9.9 0l-1.414-1.414-2.122 2.122 1.414 1.414 2.122-2.122zm-9.9-9.9l1.414 1.414-2.122 2.122L5.636 9.172l2.122-2.122z"})]})},Uw=r=>{const{theme:e}=an();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/2yvpf67d/Mattahan-Buuf-A-Proper-Journal-Icon-128.png",alt:"Journal Icon",...r}):e==="noel"?_.jsx("img",{src:"/assets/img/star-gold.png",alt:"Star Icon",...r,className:`${r.className} object-contain`}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:[_.jsx("path",{fillRule:"evenodd",d:"M8.25 2.25A.75.75 0 019 3v.257a3.75 3.75 0 013 0V3a.75.75 0 011.5 0v.257a3.75 3.75 0 013 0V3a.75.75 0 01.75.75h-.008v.016c.361.32.622.754.74 1.232A23.953 23.953 0 0112 6c-2.305 0-4.52-.42-6.502-1.195a2.5 2.5 0 01.74-1.232H6a.75.75 0 01.75-.75h1.5zm-2.784 4.542a25.474 25.474 0 0013.068 0 .75.75 0 01.443.923 23.92 23.92 0 01-13.954 0 .75.75 0 01.443-.923zM8.25 10.5a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5a.75.75 0 01.75-.75zm3.75 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5a.75.75 0 01.75-.75zm3.75 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5a.75.75 0 01.75-.75z",clipRule:"evenodd"}),_.jsx("path",{d:"M4.145 9.421a.75.75 0 01.558-.923 25.483 25.483 0 0114.594 0 .75.75 0 01.558.923l-.36.99a25.01 25.01 0 01-14.832 0l-.36-.99z"}),_.jsx("path",{fillRule:"evenodd",d:"M3 15.75A2.25 2.25 0 015.25 13.5h13.5A2.25 2.25 0 0121 15.75v3A2.25 2.25 0 0118.75 21H5.25A2.25 2.25 0 013 18.75v-3z",clipRule:"evenodd"})]})},f1=r=>{const{theme:e}=an();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/xjbVmxDW/Oxygen-Icons-org-Oxygen-Categories-applications-education-university-256.png",alt:"Graduation Cap Icon",...r}):e==="noel"?_.jsx("img",{src:"/assets/img/star-gold.png",alt:"Gold Star Icon",...r,className:`${r.className} object-contain`}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:[_.jsx("path",{fillRule:"evenodd",d:"M11.25 4.5A.75.75 0 0112 5.25v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0111.25 4.5zM12.75 6a.75.75 0 00-1.5 0v1.5a.75.75 0 001.5 0V6zM11.25 7.5A.75.75 0 0112 8.25v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0111.25 7.5zM12.75 9a.75.75 0 00-1.5 0v1.5a.75.75 0 001.5 0V9z",clipRule:"evenodd"}),_.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM6.262 6.072a8.25 8.25 0 1011.476 11.476A8.25 8.25 0 006.262 6.072zM12 18.75a.75.75 0 01-.75-.75V15a.75.75 0 011.5 0v3a.75.75 0 01-.75.75z",clipRule:"evenodd"}),_.jsx("path",{d:"M14.25 12a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})]})},gd=r=>{const{theme:e}=an();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/FFJXSWXv/study-learning-knowledge-education-book-notebook-icon-256768.png",alt:"Book and Glasses Icon",...r}):e==="noel"?_.jsx("img",{src:"/assets/img/gift1.png",alt:"Gift Icon",...r,className:`${r.className} object-contain`}):_.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:[_.jsx("path",{d:"M11.25 4.533A9.708 9.708 0 006 3.75c-1.052 0-2.062.18-3 .512V17.25a8.987 8.987 0 013.75-.82V9.75a.75.75 0 011.5 0v7.5a.75.75 0 01-1.5 0V15a6.726 6.726 0 00-3-.585V18.75C3.393 18.932 3.69 19.1 4 19.29c2.023.784 4.18 1.093 6.364 1.294a.75.75 0 00.872-.725V4.534z"}),_.jsx("path",{d:"M12.75 4.533V19.86a.75.75 0 00.872.725 49.33 49.33 0 006.364-1.294c.31-.19.607-.358.914-.54V5.25c-1.084-.308-2.18-.46-3.25-.46-1.637 0-3.235.32-4.75.922V4.534z"})]})},Zg=r=>{const{theme:e}=an();return e==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/kG8rd4vv/Limpa-Curriculum-Vitae-Education-256.png",alt:"Blackboard Icon",...r}):e==="noel"?_.jsx("img",{src:"/assets/img/gift2.png",alt:"Gift Icon",...r,className:`${r.className} object-contain`}):_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...r,children:_.jsx("path",{fillRule:"evenodd",d:"M2.25 6a3 3 0 013-3h13.5a3 3 0 013 3v12a3 3 0 01-3-3H5.25a3 3 0 01-3-3V6zm3.75 3a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H7.5a.75.75 0 01-.75-.75zM7.5 12a.75.75 0 000 1.5h6a.75.75 0 000-1.5h-6z",clipRule:"evenodd"})})},lD=r=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...r,children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})}),uD=({onStart:r,onLoginClick:e})=>{const{theme:t}=an();return _.jsx("div",{className:"text-center p-4 animate-slide-in-right",children:_.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8 md:p-12 max-w-2xl mx-auto relative",children:[t==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/MH9hVp8S/happy-techers-day.jpg",alt:"Icon Chc mng Ngy Nh gio",className:"h-24 w-24 mx-auto mb-4 rounded-full object-cover"}):t==="noel"?_.jsx(Bo,{className:"h-24 w-24 mx-auto text-primary mb-4"}):_.jsx(Bo,{className:"h-24 w-24 mx-auto text-primary mb-4"}),_.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-foreground mb-2",children:"ng Dng n tp"}),t==="tri-an"&&_.jsx("p",{className:"text-xl font-semibold text-primary mb-4",children:"Phin bn c bit Tri n Thy C"}),t==="noel"&&_.jsx("p",{className:"text-xl font-semibold text-primary mb-4",children:"Cho n Ging Sinh An Lnh"}),_.jsx("p",{className:"text-lg text-muted-foreground mb-4",children:"Cho mng anh/ch  n vi ng dng n tp, n thi chng ch chuyn mn phng tin thy ni a."}),t==="tri-an"&&_.jsx("p",{className:"text-lg text-muted-foreground mb-8 italic",children:'"Nhn ngy Nh gio Vit Nam 20-11, knh chc qu thy c lun mnh khe, hnh phc v thnh cng trong s nghip trng ngi."'}),_.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[_.jsx("button",{onClick:r,className:"w-full sm:w-auto bg-primary text-primary-foreground font-bold text-lg py-4 px-10 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105",children:"Bt u"}),_.jsx("button",{onClick:e,className:"w-full sm:w-auto bg-secondary text-secondary-foreground font-bold text-lg py-4 px-10 rounded-lg hover:bg-secondary/80 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300",children:"ng nhp"})]})]})})},cD=(r,e)=>{const t="h-14 w-14 mx-auto text-primary mb-3 object-contain",s="h-14 w-14 mx-auto mb-3 object-cover rounded-full border-2 border-border/20 shadow-sm",a="h-14 w-14 mx-auto mb-3 object-contain drop-shadow-lg",l=r.name.toLowerCase();if(e==="noel")return l.includes("thuyn trng")?_.jsx("img",{src:"/assets/img/hat.png",alt:"Captain Hat",className:a}):l.includes("my trng")?_.jsx("img",{src:"/assets/img/gift4.png",alt:"Chief Engineer",className:a}):l.includes("thy th")?_.jsx("img",{src:"/assets/img/bell.png",alt:"Sailor",className:a}):l.includes("li phng tin")?_.jsx("img",{src:"/assets/img/tree.png",alt:"Helm",className:a}):l.includes("chng ch")?_.jsx("img",{src:"/assets/img/star-gold.png",alt:"Certificate",className:a}):_.jsx("img",{src:"/assets/img/gift5.png",alt:"Default",className:a});if(e==="tri-an")switch(r.id){case"thuyentruong-h1":return _.jsx("img",{src:"https://i.postimg.cc/Vs76y54F/8.jpg",alt:r.name,className:s});case"thuyentruong-h2":return _.jsx("img",{src:"https://i.postimg.cc/Pf6xGNK4/9.jpg",alt:r.name,className:s});case"thuyentruong-h3":return _.jsx("img",{src:"https://i.postimg.cc/Vs76y54W/7.jpg",alt:r.name,className:s});case"thuythu":return _.jsx(Wg,{className:t});case"lai-phuong-tien":return _.jsx(Bo,{className:t});case"maytruong-h1":return _.jsx("img",{src:"https://i.postimg.cc/zDpm90H6/undefined.jpg",alt:r.name,className:s});case"maytruong-h2":return _.jsx("img",{src:"https://i.postimg.cc/wMwSLjdc/Teachers-day-background-design-art-illustration.jpg",alt:r.name,className:s});case"maytruong-h3":return _.jsx("img",{src:"https://i.postimg.cc/NFdWmjwH/Hinh-thiep.jpg",alt:r.name,className:s});case"thomay":return _.jsx("img",{src:"https://i.postimg.cc/cJYy2WQN/hinh-nen-3.jpg",alt:r.name,className:s});case"caotoc":return _.jsx("img",{src:"https://i.postimg.cc/dQWMQybn/5.jpg",alt:r.name,className:s});case"ven-bien":return _.jsx("img",{src:"https://i.postimg.cc/zDdmDgs0/6.jpg",alt:r.name,className:s});case"antoan-ven-bien":return _.jsx("img",{src:"https://i.postimg.cc/ZYFWdtv0/BOARD.webp",alt:r.name,className:s});case"antoan-xang-dau":return _.jsx("img",{src:"https://i.postimg.cc/T2k82Dzc/4.jpg",alt:r.name,className:s});case"antoan-hoa-chat":return _.jsx("img",{src:"https://i.postimg.cc/mZVx08Ff/World-Teacher-s-Day-Flowers-Border-Pink.jpg",alt:r.name,className:s});default:return l.includes("chng ch")?_.jsx(Uw,{className:t}):_.jsx(Vw,{className:t})}return l.includes("thuyn trng")?_.jsx(oD,{className:t}):l.includes("my trng")?_.jsx(aD,{className:t}):l.includes("thy th")?_.jsx(Wg,{className:t}):l.includes("li phng tin")?_.jsx(Bo,{className:t}):l.includes("chng ch")?_.jsx(Uw,{className:t}):_.jsx(Vw,{className:t})},hD=({licenses:r,onSelect:e,onBack:t})=>{const{theme:s}=an();return _.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right",children:[_.jsxs("div",{className:"relative text-center mb-10",children:[_.jsx("button",{onClick:t,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:_.jsx(Zo,{className:"h-10 w-10 text-primary"})}),s==="noel"?_.jsx("img",{src:"/assets/img/tree.png",alt:"Tree",className:"h-20 w-20 mx-auto mb-4 object-contain drop-shadow-lg"}):_.jsx(Wg,{className:"h-20 w-20 mx-auto text-primary mb-4"}),_.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Chn Hng Bng"}),_.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Anh/ch vui lng chn hng bng mun n tp v thi th."})]}),_.jsx("div",{className:"bg-card p-6 rounded-2xl shadow-lg",children:_.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:r.map(a=>{const l=a.subjects.reduce((c,f)=>c+f.questions.length,0);return _.jsxs("button",{onClick:()=>e(a),className:"group w-full p-4 bg-background rounded-lg text-center hover:bg-primary/10 transition-all duration-300 transform hover:scale-105 focus:ring-4 focus:ring-ring focus:outline-none",children:[cD(a,s),_.jsx("h3",{className:"text-md font-bold text-primary",children:a.name}),_.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[a.subjects.length," mn - ",l," cu"]})]},a.id)})})})]})},dD=({onNameSubmit:r,onBack:e})=>{const[t,s]=ie.useState(""),a=l=>{l.preventDefault();const c=t.trim();r(c||"Hc vin")};return _.jsxs("div",{className:"w-full max-w-md mx-auto p-4 animate-slide-in-right",children:[_.jsxs("div",{className:"text-center mb-10",children:[_.jsx(d1,{className:"h-20 w-20 mx-auto text-primary mb-4"}),_.jsxs("div",{className:"relative flex justify-center items-center",children:[_.jsx("div",{className:"absolute left-0",children:_.jsx("button",{onClick:e,className:"bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:_.jsx(Zo,{className:"h-10 w-10 text-primary"})})}),_.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Thng tin ca anh/ch"})]}),_.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Nhp tn  ti c th lu li tin  hc tp cho anh/ch."})]}),_.jsx("div",{className:"bg-card p-8 rounded-2xl shadow-lg",children:_.jsxs("form",{onSubmit:a,children:[_.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-card-foreground mb-2",children:"Tn ca anh/ch"}),_.jsx("input",{id:"name",type:"text",value:t,onChange:l=>s(l.target.value),placeholder:"V d: Nguyn Vn A (c th b trng)",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-colors duration-300",autoFocus:!0}),_.jsx("button",{type:"submit",className:"mt-6 w-full bg-primary text-primary-foreground font-bold py-3 px-6 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300",children:"Xc nhn"})]})})]})},fD=({onModeSelect:r,licenseName:e,userName:t,onSwitchLicense:s})=>_.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right",children:[_.jsxs("div",{className:"relative text-center mb-10",children:[_.jsx("div",{className:"absolute right-0 top-0",children:_.jsxs("button",{onClick:s,className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground hover:text-primary transition-all duration-300 py-1 px-2 rounded-md hover:bg-secondary",title:"Chn li hng bng",children:[_.jsx(iD,{className:"h-4 w-4"}),_.jsx("span",{children:"Chn li hng bng"})]})}),_.jsxs("h1",{className:"text-4xl font-bold text-foreground",children:["Cho anh/ch ",t,"!"]}),_.jsxs("p",{className:"text-lg text-muted-foreground mt-2",children:["Anh/ch ang hc hng bng ",_.jsx("span",{className:"font-semibold text-primary",children:e}),"."]}),_.jsx("p",{className:"text-lg text-muted-foreground mt-1",children:"Hy chn mt ch   bt u."})]}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[_.jsxs("button",{onClick:()=>r("practice"),className:"group bg-card text-card-foreground p-8 rounded-2xl shadow-lg text-center hover:bg-primary/10 transition-all duration-300 transform hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-ring",children:[_.jsx(gd,{className:"h-16 w-16 mx-auto text-primary mb-4 transition-transform group-hover:scale-110"}),_.jsx("h2",{className:"text-2xl font-bold text-card-foreground",children:"n tp"}),_.jsx("p",{className:"text-muted-foreground mt-2",children:"Luyn tp tng mn  nm vng kin thc."})]}),_.jsxs("button",{onClick:()=>r("exam"),className:"group bg-card text-card-foreground p-8 rounded-2xl shadow-lg text-center hover:bg-destructive/10 transition-all duration-300 transform hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-ring",children:[_.jsx(Zg,{className:"h-16 w-16 mx-auto text-destructive mb-4 transition-transform group-hover:scale-110"}),_.jsx("h2",{className:"text-2xl font-bold text-card-foreground",children:"Thi th"}),_.jsx("p",{className:"text-muted-foreground mt-2",children:"Lm bi thi 30 cu ngu nhin trong 45 pht."})]}),_.jsxs("button",{onClick:()=>r("online_exam"),className:"group bg-card text-card-foreground p-8 rounded-2xl shadow-lg text-center hover:bg-green-500/10 transition-all duration-300 transform hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-ring",children:[_.jsx(eD,{className:"h-16 w-16 mx-auto text-green-500 mb-4 transition-transform group-hover:scale-110"}),_.jsx("h2",{className:"text-2xl font-bold text-card-foreground",children:"Thi th 2"}),_.jsx("p",{className:"text-muted-foreground mt-2",children:"Lm bi thi 30 cu ngu nhin trong 60 pht vi giao din m phng."})]})]})]}),Lw=r=>{if(!r)return"";const e=new Date(r),t=e.getDate().toString().padStart(2,"0"),s=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getHours().toString().padStart(2,"0"),l=e.getMinutes().toString().padStart(2,"0");return`(${t}/${s} ${a}:${l})`},mD=({subjects:r,progress:e,onSelect:t,onBack:s})=>_.jsxs("div",{className:"w-full max-w-2xl mx-auto p-4 animate-slide-in-right",children:[_.jsxs("div",{className:"relative text-center mb-10",children:[_.jsx("button",{onClick:s,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:_.jsx(Zo,{className:"h-10 w-10 text-primary"})}),_.jsx(gd,{className:"h-20 w-20 mx-auto text-primary mb-4"}),_.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Chn Mn hc"}),_.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Chn mt mn  bt u n tp."})]}),_.jsx("div",{className:"bg-card p-6 rounded-2xl shadow-lg",children:_.jsx("div",{className:"space-y-3",children:r.map(a=>{const l=e[a.id],c=l&&l.lastScore!==null;return _.jsxs("button",{onClick:()=>t(a),className:"w-full flex items-center justify-between p-5 bg-background rounded-lg text-left hover:bg-primary/10 transition-all duration-300 transform hover:scale-[1.02] focus:ring-4 focus:ring-ring focus:outline-none",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"text-lg font-bold text-primary",children:a.name}),_.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.questions.length," cu hi"]})]}),_.jsxs("div",{className:"flex items-center gap-4",children:[c&&_.jsxs("div",{className:"text-right text-sm",children:[_.jsxs("p",{className:"text-muted-foreground flex items-center justify-end",children:[_.jsx("span",{children:"Ln cui:"}),_.jsxs("span",{className:"font-semibold text-primary ml-1",children:[l.lastScore,"/",a.questions.length]}),l.lastScoreTimestamp&&_.jsx("span",{className:"ml-1.5 text-xs text-muted-foreground/80",children:Lw(l.lastScoreTimestamp)})]}),_.jsxs("p",{className:"text-muted-foreground flex items-center justify-end mt-0.5",children:[_.jsx("span",{children:"Cao nht:"}),_.jsxs("span",{className:"font-semibold text-success ml-1",children:[l.highScore,"/",a.questions.length]}),l.highScoreTimestamp&&_.jsx("span",{className:"ml-1.5 text-xs text-muted-foreground/80",children:Lw(l.highScoreTimestamp)})]})]}),_.jsx(sD,{className:"h-6 w-6 text-muted-foreground"})]})]},a.id)})})})]}),gD=({quiz:r,onFinish:e,onBack:t})=>{const[s,a]=ie.useState(0),[l,c]=ie.useState({}),f=ie.useMemo(()=>r.questions[s],[r.questions,s]),g=ie.useMemo(()=>l[f.id]!==void 0,[l,f.id]),p=ie.useMemo(()=>l[f.id]||null,[l,f.id]),b=()=>{e(l)},E=k=>{g||c(j=>({...j,[f.id]:k}))},A=()=>{s===r.questions.length-1?b():a(j=>j+1)},S=s/r.questions.length*100;return _.jsx("div",{className:"w-full max-w-3xl mx-auto p-4 md:p-6 animate-slide-in-right font-quiz-default",children:_.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-6 md:p-8",children:[_.jsxs("div",{className:"mb-6",children:[_.jsxs("div",{className:"flex justify-between items-center mb-4 relative",children:[_.jsx("button",{onClick:t,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-background/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-card transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:_.jsx(Zo,{className:"h-10 w-10"})}),_.jsx("h1",{className:"text-xl font-bold text-foreground text-center flex-grow",children:r.title}),_.jsx("button",{onClick:b,className:"bg-secondary text-secondary-foreground hover:bg-secondary/80 text-sm font-bold py-2 px-4 rounded-lg transition-colors duration-300",children:"Kt thc"})]}),_.jsx("div",{className:"w-full bg-secondary rounded-full h-2.5 mb-2",children:_.jsx("div",{className:"bg-primary h-2.5 rounded-full transition-all duration-500",style:{width:`${S}%`}})}),_.jsx("div",{className:"flex justify-between items-center text-sm text-muted-foreground",children:_.jsxs("span",{children:["Cu ",s+1," / ",r.questions.length]})})]}),_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-5 text-foreground",children:f.text}),f.image&&_.jsx("div",{className:"mb-6 rounded-lg overflow-hidden",children:_.jsx("img",{src:f.image,alt:"Cu hi",className:"w-full h-auto object-cover max-h-80"})}),_.jsx("div",{className:"space-y-3",children:f.answers.map(k=>{const j=p===k.id;let P="w-full text-left p-4 rounded-lg border-2 transition-all duration-300 flex items-center justify-between text-lg";const G=k.id===f.correctAnswerId;return g?G?P+=" bg-success/10 border-success text-success":j&&!G?P+=" bg-destructive/10 border-destructive text-destructive":P+=" border-border text-muted-foreground":j?P+=" bg-primary/10 border-primary ring-2 ring-primary text-primary-foreground":P+=" bg-background hover:bg-muted border-border text-foreground",_.jsxs("button",{onClick:()=>E(k.id),disabled:g,className:P,children:[_.jsx("span",{className:"flex-grow",children:k.text}),g&&_.jsxs(_.Fragment,{children:[G&&_.jsx(ty,{className:"h-6 w-6 text-success ml-3"}),j&&!G&&_.jsx(ny,{className:"h-6 w-6 text-destructive ml-3"})]})]},k.id)})}),_.jsx("div",{className:"mt-8",children:_.jsx("div",{className:"text-right",children:g?_.jsx("button",{onClick:A,className:"bg-success text-success-foreground font-bold py-3 px-8 rounded-lg hover:bg-success/90 transition-all duration-300 animate-slide-in-right",children:s===r.questions.length-1?"Hon thnh":"Cu tip theo"}):_.jsx("div",{className:"h-[48px]"})})})]})]})})},pD=({quiz:r,userAnswers:e,score:t,onRetry:s,onBack:a,userName:l})=>{const[c,f]=ie.useState("all"),[g]=ie.useState(()=>new Date),p=r.questions.length,b=p>0?Math.round(t/p*100):0,E=ie.useMemo(()=>new Intl.DateTimeFormat("vi-VN",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit",year:"numeric"}).format(g),[g]),A=ie.useMemo(()=>c==="incorrect"?r.questions.filter(S=>e[S.id]!==S.correctAnswerId):r.questions,[c,r.questions,e]);return _.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right font-quiz-default",children:[_.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8 text-center mb-8",children:[_.jsx(f1,{className:"h-24 w-24 mx-auto text-yellow-400 mb-4"}),_.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Kt qu n tp"}),_.jsxs("div",{className:"my-4 text-muted-foreground",children:[_.jsxs("p",{className:"text-lg",children:["Hc vin: ",_.jsx("span",{className:"font-bold text-primary",children:l})]}),_.jsxs("p",{className:"text-sm",children:["Hon thnh lc: ",E]})]}),_.jsxs("div",{className:"bg-primary/10 inline-block p-6 rounded-xl border border-primary/20 mt-4",children:[_.jsxs("p",{className:"text-5xl font-extrabold text-primary",children:[t," / ",p]}),_.jsxs("p",{className:"text-2xl font-semibold text-primary/80 mt-1",children:["(",b,"%)"]})]})]}),_.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8",children:[_.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6",children:[_.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Xem li bi lm"}),_.jsxs("div",{className:"flex items-center gap-2 mt-4 sm:mt-0",children:[_.jsx("button",{onClick:()=>f("all"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${c==="all"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:"Tt c"}),_.jsxs("button",{onClick:()=>f("incorrect"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${c==="incorrect"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:["Ch cu sai (",r.questions.length-t,")"]})]})]}),_.jsx("div",{className:"space-y-6 max-h-[50vh] overflow-y-auto pr-2",children:A.length>0?A.map((S,k)=>{const j=e[S.id],P=S.correctAnswerId;return _.jsxs("div",{className:"p-4 border-b border-border last:border-b-0",children:[_.jsxs("p",{className:"font-semibold text-lg mb-3 text-foreground",children:[_.jsxs("span",{className:"mr-2",children:["Cu ",r.questions.findIndex(G=>G.id===S.id)+1,":"]}),S.text]}),_.jsx("div",{className:"space-y-2",children:S.answers.map(G=>{const J=G.id===j,$=G.id===P;let se="flex items-center p-3 rounded-md text-sm ";return $?se+="bg-success/10 text-success":J?se+="bg-destructive/10 text-destructive":se+="bg-muted/50 text-muted-foreground",_.jsxs("div",{className:se,children:[$?_.jsx(ty,{className:"h-5 w-5 mr-3 text-success"}):J?_.jsx(ny,{className:"h-5 w-5 mr-3 text-destructive"}):_.jsx("div",{className:"w-5 h-5 mr-3"}),_.jsx("span",{children:G.text})]},G.id)})})]},S.id)}):_.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Tuyt vi! Anh/ch  tr li ng tt c cc cu hi."})})]}),_.jsxs("div",{className:"text-center mt-8 flex flex-col sm:flex-row justify-center items-center gap-4",children:[_.jsx("button",{onClick:a,className:"w-full sm:w-auto bg-primary text-primary-foreground font-bold py-3 px-8 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105",children:"Cc mn khc"}),_.jsx("button",{onClick:s,className:"w-full sm:w-auto bg-secondary text-secondary-foreground font-bold py-3 px-8 rounded-lg hover:bg-muted focus:outline-none focus:ring-4 focus:ring-ring transition-colors duration-300",children:"Lm li"})]})]})},yD=r=>{const e=Math.floor(r/60),t=r%60;return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},_D=({quiz:r,onFinish:e,onBack:t,initialAnswers:s={},onAnswerChange:a,startTime:l})=>{const[c,f]=ie.useState(0),[g,p]=ie.useState(s),b=()=>{if(!l||!r.timeLimit)return r.timeLimit;const $=Math.floor((Date.now()-l)/1e3);return Math.max(0,r.timeLimit-$)},[E,A]=ie.useState(b()),S=ie.useMemo(()=>r.questions[c],[r.questions,c]),k=ie.useRef(g);ie.useEffect(()=>{k.current=g,a&&a(g)},[g,a]);const j=ie.useCallback(()=>{const $=k.current,se=r.questions.length-Object.keys($).length,Z=se>0?`Anh/ch vn cn ${se} cu cha tr li. Anh/ch c chc chn mun np bi khng?`:"Anh/ch  hon thnh tt c cc cu hi. Anh/ch c mun np bi khng?";window.confirm(Z)&&e($)},[r.questions.length,e]);ie.useEffect(()=>{if(E===void 0)return;const $=setInterval(()=>{A(se=>se?se-1:0)},1e3);return()=>clearInterval($)},[]);const P=ie.useRef(e);ie.useEffect(()=>{P.current=e},[e]),ie.useEffect(()=>{E===0&&(alert(" ht gi lm bi! H thng s t ng np bi ca anh/ch."),P.current(k.current))},[E]);const G=$=>{p(se=>({...se,[S.id]:$}))},J=Object.keys(g).length/r.questions.length*100;return _.jsx("div",{className:"w-full max-w-3xl mx-auto p-4 md:p-6 animate-slide-in-right font-quiz-default",children:_.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-6 md:p-8",children:[_.jsxs("div",{className:"mb-6",children:[_.jsxs("div",{className:"flex justify-between items-center mb-4 relative",children:[_.jsx("button",{onClick:t,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-background/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-card transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:_.jsx(Zo,{className:"h-10 w-10"})}),_.jsx("h1",{className:"text-xl font-bold text-foreground text-center flex-grow",children:r.title}),_.jsx("button",{onClick:j,className:"bg-primary text-primary-foreground hover:bg-primary/90 text-sm font-bold py-2 px-4 rounded-lg transition-colors duration-300",children:"Np bi"})]}),_.jsx("div",{className:"w-full bg-secondary rounded-full h-2.5 mb-2",children:_.jsx("div",{className:"bg-primary h-2.5 rounded-full transition-all duration-500",style:{width:`${J}%`}})}),_.jsxs("div",{className:"flex justify-between items-center text-sm text-muted-foreground",children:[_.jsxs("span",{children:["Cu ",c+1," / ",r.questions.length]}),E!==void 0&&_.jsxs("div",{className:"flex items-center font-semibold text-destructive",children:[_.jsx(rD,{className:"h-5 w-5 mr-1"}),_.jsx("span",{children:yD(E)})]})]})]}),_.jsxs("div",{className:"mb-6 border-b border-border pb-6",children:[_.jsx("h3",{className:"text-sm font-semibold text-muted-foreground mb-3",children:"Danh sch cu hi:"}),_.jsx("div",{className:"flex flex-wrap gap-2",children:r.questions.map(($,se)=>{const Z=se===c,ae=g[$.id]!==void 0;let C="w-8 h-8 rounded-md flex items-center justify-center font-bold text-xs transition-all duration-200 ";return Z?C+="bg-primary text-primary-foreground scale-110 shadow-lg ring-2 ring-ring":ae?C+="bg-success text-success-foreground hover:bg-success/80":C+="bg-secondary text-secondary-foreground hover:bg-muted",_.jsx("button",{className:C,onClick:()=>f(se),children:se+1},$.id)})})]}),_.jsxs("div",{children:[_.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-5 text-foreground",children:S.text}),S.image&&_.jsx("div",{className:"mb-6 rounded-lg overflow-hidden",children:_.jsx("img",{src:S.image,alt:"Cu hi",className:"w-full h-auto object-cover max-h-80"})}),_.jsx("div",{className:"space-y-3",children:S.answers.map($=>{const se=g[S.id]===$.id;let Z="w-full text-left p-4 rounded-lg border-2 transition-all duration-300 flex items-center justify-between text-lg";return se?Z+=" bg-primary/10 border-primary ring-2 ring-primary text-foreground":Z+=" bg-background hover:bg-muted border-border text-foreground",_.jsx("button",{onClick:()=>G($.id),className:Z,children:_.jsx("span",{children:$.text})},$.id)})}),_.jsx("div",{className:"mt-8",children:_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("button",{onClick:()=>f($=>$-1),disabled:c===0,className:"bg-secondary text-secondary-foreground font-bold py-3 px-8 rounded-lg hover:bg-muted disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300",children:"Cu trc"}),_.jsx("button",{onClick:()=>f($=>$+1),disabled:c===r.questions.length-1,className:"bg-primary text-primary-foreground font-bold py-3 px-8 rounded-lg hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300",children:"Cu tip"})]})})]})]})})},vD=({quiz:r,userAnswers:e,score:t,onRetry:s,onBack:a,userName:l})=>{const[c,f]=ie.useState("all"),[g]=ie.useState(()=>new Date),p=r.questions.length,b=t>=25,E=ie.useMemo(()=>new Intl.DateTimeFormat("vi-VN",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit",year:"numeric"}).format(g),[g]),A=ie.useMemo(()=>c==="incorrect"?r.questions.filter(S=>e[S.id]!==S.correctAnswerId):r.questions,[c,r.questions,e]);return _.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right font-quiz-default",children:[_.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8 text-center mb-8",children:[_.jsx(f1,{className:"h-24 w-24 mx-auto text-yellow-400 mb-4"}),_.jsx("h1",{className:"text-4xl font-bold text-foreground mb-2",children:"Kt qu Thi th"}),_.jsxs("div",{className:"my-4 text-muted-foreground",children:[_.jsxs("p",{className:"text-lg",children:["Th sinh: ",_.jsx("span",{className:"font-bold text-primary",children:l})]}),_.jsxs("p",{className:"text-sm",children:["Hon thnh lc: ",E]})]}),_.jsx("p",{className:`text-2xl font-bold mb-6 ${b?"text-success":"text-destructive"}`,children:b?"Chc mng, anh/ch  T!":"Rt tic, anh/ch KHNG T."}),_.jsxs("div",{className:`inline-block p-6 rounded-xl border ${b?"bg-success/10 border-success/20":"bg-destructive/10 border-destructive/20"}`,children:[_.jsxs("p",{className:`text-5xl font-extrabold ${b?"text-success":"text-destructive"}`,children:[t," / ",p]}),_.jsx("p",{className:"text-lg text-muted-foreground mt-1",children:"S cu ng"})]})]}),_.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8",children:[_.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6",children:[_.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Xem li bi lm"}),_.jsxs("div",{className:"flex items-center gap-2 mt-4 sm:mt-0",children:[_.jsx("button",{onClick:()=>f("all"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${c==="all"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:"Tt c"}),_.jsxs("button",{onClick:()=>f("incorrect"),className:`px-4 py-2 text-sm font-semibold rounded-md transition-colors ${c==="incorrect"?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"}`,children:["Ch cu sai (",r.questions.length-t,")"]})]})]}),_.jsx("div",{className:"space-y-6 max-h-[50vh] overflow-y-auto pr-2",children:A.length>0?A.map((S,k)=>{const j=e[S.id],P=S.correctAnswerId;return _.jsxs("div",{className:"p-4 border-b border-border last:border-b-0",children:[_.jsxs("p",{className:"font-semibold text-lg mb-3 text-foreground",children:[_.jsxs("span",{className:"mr-2",children:["Cu ",r.questions.findIndex(G=>G.id===S.id)+1,":"]}),S.text]}),_.jsx("div",{className:"space-y-2",children:S.answers.map(G=>{const J=G.id===j,$=G.id===P;let se="flex items-center p-3 rounded-md text-sm ";return $?se+="bg-success/10 text-success":J?se+="bg-destructive/10 text-destructive":se+="bg-muted/50 text-muted-foreground",_.jsxs("div",{className:se,children:[$?_.jsx(ty,{className:"h-5 w-5 mr-3 text-success"}):J?_.jsx(ny,{className:"h-5 w-5 mr-3 text-destructive"}):_.jsx("div",{className:"w-5 h-5 mr-3"}),_.jsx("span",{children:G.text})]},G.id)})})]},S.id)}):_.jsx("p",{className:"text-center text-muted-foreground py-8",children:"Tuyt vi! Anh/ch  tr li ng tt c cc cu hi."})})]}),_.jsxs("div",{className:"text-center mt-8 flex flex-col sm:flex-row justify-center items-center gap-4",children:[_.jsx("button",{onClick:a,className:"w-full sm:w-auto bg-primary text-primary-foreground font-bold py-3 px-8 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 transform hover:scale-105",children:"Quay li"}),_.jsx("button",{onClick:s,className:"w-full sm:w-auto bg-secondary text-secondary-foreground font-bold py-3 px-8 rounded-lg hover:bg-muted focus:outline-none focus:ring-4 focus:ring-ring transition-colors duration-300",children:"Lm li bi thi"})]})]})},bD=r=>{const e=Math.floor(r/60),t=r%60;return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},hg=({id:r,name:e,checked:t,onChange:s})=>_.jsxs("div",{className:"relative flex items-center justify-center w-5 h-5 flex-shrink-0",children:[_.jsx("input",{type:"radio",id:r,name:e,checked:t,onChange:s,className:"appearance-none h-4 w-4 border-2 border-gray-400 rounded-full cursor-pointer"}),t&&_.jsx("div",{className:"absolute h-2 w-2 bg-blue-600 rounded-full"})]}),wD=({quiz:r,onFinish:e,onBack:t,userName:s,selectedLicense:a,initialAnswers:l={},onAnswerChange:c,startTime:f})=>{const[g,p]=ie.useState(0),[b,E]=ie.useState(l),A=()=>{if(!f||!r.timeLimit)return r.timeLimit??3600;const Z=Math.floor((Date.now()-f)/1e3);return Math.max(0,(r.timeLimit??3600)-Z)},[S,k]=ie.useState(A()),j=ie.useMemo(()=>r.questions[g],[r.questions,g]),P=ie.useRef(b);ie.useEffect(()=>{P.current=b,c&&c(b)},[b,c]);const G=()=>{window.confirm("Anh/ch c chc chn mun thot khi bi thi khng? Mi tin trnh s b mt.")&&t()},J=ie.useCallback(()=>{const Z=P.current,ae=r.questions.length-Object.keys(Z).length,C=ae>0?`Anh/ch vn cn ${ae} cu cha tr li. Anh/ch c chc chn mun np bi khng?`:"Anh/ch  hon thnh tt c cc cu hi. Anh/ch c mun np bi khng?";window.confirm(C)&&e(Z)},[r.questions.length,e]),$=ie.useRef(e);ie.useEffect(()=>{$.current=e},[e]),ie.useEffect(()=>{const Z=setInterval(()=>{k(ae=>ae>0?ae-1:0)},1e3);return()=>clearInterval(Z)},[]),ie.useEffect(()=>{S===0&&(alert(" ht gi lm bi! H thng s t ng np bi ca anh/ch."),$.current(P.current))},[S]);const se=(Z,ae)=>{E(C=>({...C,[Z]:ae}))};return _.jsxs("div",{className:"w-full max-w-7xl mx-auto font-sans text-black shadow-lg animate-slide-in-right rounded-md",children:[_.jsx("div",{className:"h-3 bg-yellow-700 rounded-t-md border-b-2 border-yellow-900"}),_.jsxs("div",{className:"bg-white p-4",children:[_.jsxs("div",{className:"flex justify-between items-start pb-4 border-b border-gray-300",children:[_.jsxs("div",{className:"flex gap-4 items-center",children:[_.jsx("img",{src:"https://i.postimg.cc/8PDn1wfM/favicon.png",alt:"Avatar",className:"w-20 h-[100px] border border-gray-300 object-contain p-1"}),_.jsxs("div",{className:"text-sm",children:[_.jsx("p",{children:"S bo danh:"}),_.jsx("p",{children:"Ngy sinh:"}),_.jsxs("p",{className:"mt-2",children:["H tn: ",_.jsx("span",{className:"font-bold text-blue-700",children:s||"Hc vin"})]}),_.jsxs("p",{children:["Hng bng: ",_.jsx("span",{className:"font-bold text-blue-700",children:(a==null?void 0:a.name)||"Thuyn trng hng ba - T3"})]})]})]}),_.jsxs("div",{className:"flex items-start gap-4",children:[_.jsxs("div",{className:"bg-[#f0ad4e] text-black p-2 rounded-md text-sm w-48",children:[_.jsx("p",{className:"font-bold",children:"ang thi"}),_.jsx("p",{children:"Thi gian: 45 pht"}),_.jsx("p",{children:"B gi: 0 pht"}),_.jsxs("p",{children:["Cn li: ",_.jsx("span",{className:"font-bold",children:bD(S)})]})]}),_.jsx("button",{onClick:G,className:"text-sm text-gray-600 hover:text-red-500 font-semibold",children:"Thot"})]})]}),_.jsxs("div",{className:"flex mt-4 gap-4",children:[_.jsxs("div",{className:"w-[60%] border border-gray-400 rounded-md p-4 flex flex-col justify-between min-h-[500px]",children:[_.jsxs("div",{children:[_.jsx("p",{className:"font-bold mb-4 border-b border-dashed border-gray-400 pb-2",children:"Ni dung cu hi"}),_.jsxs("p",{className:"font-bold text-red-600 mb-2",children:["Cu :",g+1]}),_.jsx("p",{className:"mb-4 font-semibold",children:j.text}),j.image&&_.jsx("div",{className:"mb-4 flex justify-start",children:_.jsx("img",{src:j.image,alt:"Hnh nh cu hi",className:"max-w-full h-auto max-h-60 object-contain border border-gray-300 rounded-md"})}),_.jsx("div",{className:"space-y-4",children:j.answers.map((Z,ae)=>_.jsxs("label",{htmlFor:`q_main_${Z.id}`,className:"flex items-center cursor-pointer",children:[_.jsx(hg,{id:`q_main_${Z.id}`,name:`q_main_${j.id}`,checked:b[j.id]===Z.id,onChange:()=>se(j.id,Z.id)}),_.jsxs("span",{className:"ml-3 flex",children:[_.jsxs("span",{className:"font-bold mr-1 text-gray-700",children:[String.fromCharCode(97+ae),"."]}),_.jsx("p",{children:Z.text})]})]},Z.id))})]}),_.jsxs("div",{className:"flex justify-center gap-4 mt-8",children:[_.jsxs("button",{onClick:()=>p(Z=>Math.max(0,Z-1)),disabled:g===0,className:"bg-[#f0ad4e] text-black px-4 py-2 rounded-md border border-gray-400 flex items-center font-semibold hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-5 h-5",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),"Tr li"]}),_.jsxs("button",{onClick:()=>p(Z=>Math.min(r.questions.length-1,Z+1)),disabled:g===r.questions.length-1,className:"bg-[#f0ad4e] text-black px-4 py-2 rounded-md border border-gray-400 flex items-center font-semibold hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Tip tc",_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2.5,stroke:"currentColor",className:"w-5 h-5",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})]})]})]}),_.jsx("div",{className:"w-[40%]",children:_.jsxs("div",{className:"flex gap-2",children:[_.jsxs("table",{className:"w-1/2 border-collapse text-xs",children:[_.jsx("thead",{children:_.jsxs("tr",{className:"bg-[#f0ad4e]",children:[_.jsx("th",{className:"border border-gray-400 p-1",children:"Cu"}),_.jsx("th",{className:"border border-gray-400 p-1",children:"a"}),_.jsx("th",{className:"border border-gray-400 p-1",children:"b"}),_.jsx("th",{className:"border border-gray-400 p-1",children:"c"}),_.jsx("th",{className:"border border-gray-400 p-1",children:"d"})]})}),_.jsx("tbody",{children:r.questions.slice(0,15).map((Z,ae)=>_.jsxs("tr",{className:g===ae?"bg-cyan-200":"",children:[_.jsx("td",{className:`border border-gray-400 p-1 font-bold text-center cursor-pointer ${g===ae?"text-black":"text-gray-500"}`,onClick:()=>p(ae),children:ae+1}),Z.answers.slice(0,4).map(C=>_.jsx("td",{className:"border border-gray-400 p-1 text-center",children:_.jsx(hg,{id:`grid_q_${Z.id}_${C.id}`,name:`grid_q_${Z.id}`,checked:b[Z.id]===C.id,onChange:()=>se(Z.id,C.id)})},C.id))]},Z.id))})]}),_.jsxs("div",{className:"w-1/2",children:[_.jsxs("table",{className:"w-full border-collapse text-xs",children:[_.jsx("thead",{children:_.jsxs("tr",{className:"bg-[#f0ad4e]",children:[_.jsx("th",{className:"border border-gray-400 p-1",children:"Cu"}),_.jsx("th",{className:"border border-gray-400 p-1",children:"a"}),_.jsx("th",{className:"border border-gray-400 p-1",children:"b"}),_.jsx("th",{className:"border border-gray-400 p-1",children:"c"}),_.jsx("th",{className:"border border-gray-400 p-1",children:"d"})]})}),_.jsx("tbody",{children:r.questions.slice(15,30).map((Z,ae)=>{const C=ae+15;return _.jsxs("tr",{className:g===C?"bg-cyan-200":"",children:[_.jsx("td",{className:`border border-gray-400 p-1 font-bold text-center cursor-pointer ${g===C?"text-black":"text-gray-500"}`,onClick:()=>p(C),children:C+1}),Z.answers.slice(0,4).map(R=>_.jsx("td",{className:"border border-gray-400 p-1 text-center",children:_.jsx(hg,{id:`grid_q_${Z.id}_${R.id}`,name:`grid_q_${Z.id}`,checked:b[Z.id]===R.id,onChange:()=>se(Z.id,R.id)})},R.id))]},Z.id)})})]}),_.jsx("div",{className:"text-center mt-4",children:_.jsx("button",{onClick:J,className:"bg-[#337ab7] text-white mt-4 px-8 py-2 rounded-md font-semibold hover:bg-blue-700 transition-colors",children:"Np bi"})})]})]})})]}),_.jsxs("div",{className:"mt-4 bg-[#005a9c] text-white p-4 rounded-b-md flex items-center gap-4 text-xs",children:[_.jsx("img",{src:"https://i.postimg.cc/8PDn1wfM/favicon.png",alt:"Logo",className:"h-16 w-16 object-contain"}),_.jsxs("div",{children:[_.jsx("p",{className:"font-bold",children:"CNG TY C PHN T VN V GIO DC NINH BNH"}),_.jsx("p",{children:"a ch: ng Triu Vit Vng, phng Hoa L, tnh Ninh Bnh "})]})]})]})]})},ED=[{name:"noel",label:"Ging Sinh",color:"bg-[#8B0000]"},{name:"modern",label:"Hin i",color:"bg-indigo-600"},{name:"classic",label:"C in",color:"bg-[#6F6049]"},{name:"sunrise",label:"Bnh Minh",color:"bg-orange-500"},{name:"tri-an",label:"Tri n",color:"bg-red-400"}],TD=()=>{const[r,e]=ie.useState(!1),{theme:t,setTheme:s}=an(),a=l=>{s(l),e(!1)};return _.jsxs("div",{className:"relative",children:[r&&_.jsx("div",{className:"absolute bottom-full right-0 mb-2 w-40 rounded-lg border border-border bg-card p-2 shadow-2xl flex flex-col gap-1 animate-slide-in-right",children:ED.map(l=>_.jsxs("button",{onClick:()=>a(l.name),className:`w-full text-left px-3 py-2 text-sm font-semibold rounded-md flex items-center gap-3 transition-colors ${t===l.name?"bg-primary/20 text-primary":"text-card-foreground hover:bg-secondary"}`,children:[_.jsx("span",{className:`w-4 h-4 rounded-full ${l.color} border border-white/20`}),l.label]},l.name))}),_.jsx("button",{onClick:()=>e(!r),className:"flex h-10 w-10 items-center justify-center rounded-lg bg-secondary text-secondary-foreground shadow-sm transition-colors hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring","aria-label":"Change theme",children:_.jsx(nD,{className:"h-6 w-6"})})]})},SD=({onVersionClick:r})=>{const{theme:e}=an();let t="Phin bn v3.4.0 - Chc anh/ch n thi hiu qu!";return e==="tri-an"?t="Phin bn v3.4.0 - Knh tng Qu Thy C!":e==="noel"&&(t="Phin bn v3.4.0 - Ging sinh an lnh, rn rng ting nhc!"),_.jsxs("footer",{className:"fixed bottom-0 left-0 right-0 z-40 flex h-14 w-full items-center justify-between border-t border-border bg-card/80 px-4 backdrop-blur-sm sm:px-6",children:[_.jsx("button",{onClick:r,className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:t}),_.jsx(TD,{})]})},AD=({onBack:r})=>{const[e,t]=ie.useState(""),[s,a]=ie.useState(""),[l,c]=ie.useState(!1),[f,g]=ie.useState(null),p=async b=>{b.preventDefault(),c(!0),g(null);let E=e.trim();E.toLowerCase()==="admin"&&(E="admin@onthihanghai.local");try{await yN(Jg,E,s)}catch(A){console.error("Login error:",A),g("Ti khon hoc mt khu khng chnh xc.")}c(!1)};return _.jsxs("div",{className:"w-full max-w-md mx-auto p-4 animate-slide-in-right",children:[_.jsxs("div",{className:"relative text-center mb-10",children:[_.jsx("button",{onClick:r,className:"absolute left-0 top-1/2 -translate-y-1/2 bg-card/50 p-3 rounded-full shadow-md hover:bg-muted focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-all duration-300 transform hover:scale-110","aria-label":"Quay li",children:_.jsx(Zo,{className:"h-10 w-10 text-primary"})}),_.jsx(Bo,{className:"h-20 w-20 mx-auto text-primary mb-4"}),_.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"ng nhp"}),_.jsx("p",{className:"text-lg text-muted-foreground mt-2",children:"Truy cp vo h thng qun l hc tp."})]}),_.jsx("div",{className:"bg-card p-8 rounded-2xl shadow-lg",children:_.jsxs("form",{onSubmit:p,children:[f&&_.jsx("p",{className:"bg-destructive/10 text-destructive p-3 rounded-md mb-4 text-center",children:f}),_.jsxs("div",{className:"mb-4",children:[_.jsx("label",{htmlFor:"account",className:"block text-sm font-medium text-card-foreground mb-2",children:"Ti khon"}),_.jsx("input",{id:"account",type:"text",value:e,onChange:b=>t(b.target.value),placeholder:"Nhp ti khon hoc email",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-colors duration-300",required:!0,autoFocus:!0})]}),_.jsxs("div",{className:"mb-6",children:[_.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-card-foreground mb-2",children:"Mt khu"}),_.jsx("input",{id:"password",type:"password",value:s,onChange:b=>a(b.target.value),placeholder:"",className:"w-full px-4 py-3 bg-background border border-border rounded-lg text-foreground focus:outline-none focus:ring-2 focus:ring-ring transition-colors duration-300",required:!0})]}),_.jsx("button",{type:"submit",disabled:l,className:"w-full bg-primary text-primary-foreground font-bold py-3 px-6 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-4 focus:ring-ring transition-all duration-300 disabled:opacity-50 disabled:cursor-wait",children:l?"ang x l...":"ng nhp"})]})})]})},xD=({userProfile:r,onHistoryClick:e})=>{const t=r.role==="admin",s=()=>{alert("Ti khon ca anh/ch khng c quyn truy cp chc nng ny.")};return _.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right",children:[_.jsxs("div",{className:"relative text-center mb-10",children:[_.jsx("h1",{className:"text-4xl font-bold text-foreground",children:"Bng iu khin"}),_.jsxs("p",{className:"text-lg text-muted-foreground mt-2",children:["Cho mng tr li, ",r.email,"!"]})]}),_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg://grid-cols-3 gap-6",children:[_.jsxs("button",{onClick:e,className:"group bg-card text-card-foreground p-8 rounded-2xl shadow-lg text-center hover:bg-primary/10 transition-all duration-300 transform hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-ring",children:[_.jsx(gd,{className:"h-16 w-16 mx-auto text-primary mb-4 transition-transform group-hover:scale-110"}),_.jsx("h2",{className:"text-xl font-bold text-card-foreground",children:"Lch s lm bi"}),_.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:"Xem li kt qu cc bi thi v n tp  lm."})]}),_.jsxs("button",{className:"group bg-card text-card-foreground p-8 rounded-2xl shadow-lg text-center hover:bg-primary/10 transition-all duration-300 transform hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-ring",children:[_.jsx(gd,{className:"h-16 w-16 mx-auto text-primary mb-4 transition-transform group-hover:scale-110"}),_.jsx("h2",{className:"text-xl font-bold text-card-foreground",children:"Qun l Lp hc"}),_.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:"To, xem v qun l cc lp hc ca anh/ch."})]}),_.jsxs("button",{className:"group bg-card text-card-foreground p-8 rounded-2xl shadow-lg text-center hover:bg-primary/10 transition-all duration-300 transform hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-ring",children:[_.jsx(Zg,{className:"h-16 w-16 mx-auto text-primary mb-4 transition-transform group-hover:scale-110"}),_.jsx("h2",{className:"text-xl font-bold text-card-foreground",children:"Qun l Hc vin"}),_.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:"Thm, xa v xem tin  ca hc vin trong lp."})]}),_.jsxs("button",{onClick:t?void 0:s,disabled:!t,className:`group bg-card text-card-foreground p-8 rounded-2xl shadow-lg text-center transition-all duration-300 focus:outline-none \r
                               disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none\r
                               hover:bg-primary/10 transform hover:-translate-y-2 focus:ring-4 focus:ring-ring`,children:[_.jsx(Zg,{className:"h-16 w-16 mx-auto text-primary mb-4 transition-transform group-hover:scale-110"}),_.jsx("h2",{className:"text-xl font-bold text-card-foreground",children:"Qun l Gio vin"}),_.jsx("p",{className:"text-muted-foreground mt-2 text-sm",children:"To v qun l ti khon cho cc gio vin khc (ch Admin)."})]})]})]})},RD={admin:"Qun tr vin",giao_vien:"Gio vin",hoc_vien:"Hc vin",quan_ly:"Qun l",lanh_dao:"Lnh o"},CD=({userProfile:r,onLogout:e,onManagementClick:t})=>_.jsx("header",{className:"w-full max-w-4xl mx-auto bg-card/80 backdrop-blur-sm p-4 rounded-xl shadow-md mb-8 sticky top-4 z-10",children:_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx(d1,{className:"h-10 w-10 text-primary"}),_.jsxs("div",{children:[_.jsx("p",{className:"font-bold text-foreground",children:r.email}),_.jsx("p",{className:"text-sm text-muted-foreground font-medium bg-secondary text-secondary-foreground px-2 py-0.5 rounded-full inline-block",children:RD[r.role]||r.role})]})]}),_.jsxs("div",{className:"flex gap-2",children:[_.jsxs("a",{href:"/",className:"bg-secondary text-secondary-foreground font-semibold text-sm py-2 px-4 rounded-lg hover:bg-secondary/80 transition-colors duration-300 flex items-center",children:[_.jsx("span",{className:"mr-1",children:""})," Trang ch"]}),_.jsxs("button",{onClick:t,className:"bg-secondary text-secondary-foreground font-semibold text-sm py-2 px-4 rounded-lg hover:bg-secondary/80 transition-colors duration-300 flex items-center",children:[_.jsx("span",{className:"mr-1",children:""})," Qun l"]}),_.jsx("button",{onClick:e,className:"bg-destructive text-destructive-foreground font-semibold text-sm py-2 px-4 rounded-lg hover:bg-destructive/90 focus:outline-none focus:ring-4 focus:ring-ring transition-colors duration-300",children:"ng xut"})]})]})}),ID=({onClose:r})=>_.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm",onClick:r,children:_.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-6 md:p-8 max-w-2xl w-full m-4 animate-slide-in-right",onClick:e=>e.stopPropagation(),children:[_.jsxs("div",{className:"flex justify-between items-center mb-4",children:[_.jsxs("h2",{className:"text-2xl font-bold text-foreground flex items-center gap-2",children:[_.jsx(lD,{className:"h-6 w-6"}),"Lch s cp nht"]}),_.jsx("button",{onClick:r,className:"p-2 rounded-full hover:bg-secondary transition-colors","aria-label":"ng",children:_.jsx(tD,{className:"h-6 w-6"})})]}),_.jsxs("div",{className:"text-sm text-left text-muted-foreground max-h-[70vh] overflow-y-auto pr-2 space-y-4",children:[_.jsxs("div",{children:[_.jsx("p",{className:"font-semibold text-foreground",children:_.jsx("strong",{children:"Phin bn v3.4.0 (Cp nht m nhc):"})}),_.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[_.jsxs("li",{children:[" ",_.jsx("strong",{children:"Nhc nn Jingle Bells:"})," T ng pht nhc Ging sinh vui nhn khi m ng dng (vi Theme Noel)."]}),_.jsxs("li",{children:[" ",_.jsx("strong",{children:"iu khin nhc:"})," Nt Bt/Tt nhc tin li  gc mn hnh."]}),_.jsxs("li",{children:[" ",_.jsx("strong",{children:"Hnh nn mi:"})," Cp nht hnh nn Ging sinh cht lng cao."]})]})]}),_.jsxs("div",{children:[_.jsx("p",{className:"font-semibold text-foreground",children:_.jsx("strong",{children:"Phin bn v3.3.1 (Cp nht giao din):"})}),_.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[_.jsxs("li",{children:[" ",_.jsx("strong",{children:"Theme Noel  Rc:"})," Chuyn i theme Ging Sinh sang tng mu  ch o (Red Tone) cho c nn v biu tng."]}),_.jsxs("li",{children:[" ",_.jsx("strong",{children:"Nn  ru vang:"})," S dng mu nn  m sang trng kt hp vi cc icon  ti to hiu ng ni bt."]})]})]}),_.jsxs("div",{children:[_.jsx("p",{className:"font-semibold text-foreground",children:_.jsx("strong",{children:"Phin bn v3.3.0 (Cp nht Ging Sinh):"})}),_.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[_.jsxs("li",{children:[" ",_.jsx("strong",{children:"Giao din mi:"}),' Ra mt ch  "Ging Sinh" (Noel) vi tng mu Xanh -  - Vng m p.']}),_.jsxs("li",{children:[" ",_.jsx("strong",{children:"Ch  mc nh:"})," ng dng t ng chuyn sang giao din Ging Sinh  cho n ma l hi."]}),_.jsxs("li",{children:[" ",_.jsx("strong",{children:"Ci tin UI:"})," Ti u ha  tng phn cho ch  nn ti (dark mode) ca theme mi."]})]})]})]})]})}),ND=()=>{const r=["gift1.png","bell.png","star-gold.png","ball.png","gift2.png","gift3.png","gift4.png","gift5.png"];return _.jsxs(_.Fragment,{children:[_.jsx("style",{dangerouslySetInnerHTML:{__html:`
        /* === PHN 5: HIU NG TUYT & QU RI === */
        .snowflakes {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 9999;
        }
        
        .snowflake {
            color: #fff;
            font-size: 1.2em;
            font-family: Arial, sans-serif;
            text-shadow: 0 0 3px rgba(255,255,255,0.8); /* Tuyt pht sng nh */
            position: fixed;
            top: -10%;
            z-index: 9999;
            user-select: none;
            cursor: default;
            animation-name: snowflakes-fall, snowflakes-shake;
            animation-timing-function: linear, ease-in-out;
            animation-iteration-count: infinite, infinite;
            animation-play-state: running, running;
        }

        .snowflake-img img {
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.3));
            width: 30px; 
            height: auto;
            opacity: 0.9;
        }

        @keyframes snowflakes-fall {
            0% { top: -10%; }
            100% { top: 100%; }
        }
        @keyframes snowflakes-shake {
            0% { transform: translateX(0px) rotate(0deg); }
            50% { transform: translateX(80px) rotate(180deg); }
            100% { transform: translateX(0px) rotate(360deg); }
        }

        /* Cu hnh ri ngu nhin */
        .snowflake:nth-of-type(1) { left: 1%; animation-duration: 12s, 4s; animation-delay: 0s, 0s; }
        .snowflake:nth-of-type(2) { left: 5%; animation-duration: 15s, 6s; animation-delay: 1s, 1s; }
        .snowflake:nth-of-type(3) { left: 10%; animation-duration: 10s, 3s; animation-delay: 2s, 0.5s; }
        .snowflake:nth-of-type(4) { left: 15%; animation-duration: 18s, 5s; animation-delay: 4s, 2s; }
        .snowflake:nth-of-type(5) { left: 20%; animation-duration: 11s, 4s; animation-delay: 2s, 2s; }
        .snowflake:nth-of-type(6) { left: 25%; animation-duration: 14s, 7s; animation-delay: 6s, 3s; }
        .snowflake:nth-of-type(7) { left: 30%; animation-duration: 16s, 5s; animation-delay: 3s, 2s; }
        .snowflake:nth-of-type(8) { left: 35%; animation-duration: 13s, 4s; animation-delay: 1s, 1s; }
        .snowflake:nth-of-type(9) { left: 40%; animation-duration: 17s, 6s; animation-delay: 0s, 0s; }
        .snowflake:nth-of-type(10) { left: 45%; animation-duration: 9s, 3s; animation-delay: 5s, 1.5s; }
        .snowflake:nth-of-type(11) { left: 50%; animation-duration: 14s, 5s; animation-delay: 2s, 3s; }
        .snowflake:nth-of-type(12) { left: 55%; animation-duration: 11s, 4s; animation-delay: 4s, 1s; }
        .snowflake:nth-of-type(13) { left: 60%; animation-duration: 19s, 7s; animation-delay: 1s, 2s; }
        .snowflake:nth-of-type(14) { left: 65%; animation-duration: 12s, 3s; animation-delay: 3s, 0s; }
        .snowflake:nth-of-type(15) { left: 70%; animation-duration: 15s, 6s; animation-delay: 5s, 4s; }
        .snowflake:nth-of-type(16) { left: 75%; animation-duration: 10s, 4s; animation-delay: 0s, 2s; }
        .snowflake:nth-of-type(17) { left: 80%; animation-duration: 16s, 5s; animation-delay: 2s, 1s; }
        .snowflake:nth-of-type(18) { left: 85%; animation-duration: 13s, 4s; animation-delay: 4s, 3s; }
        .snowflake:nth-of-type(19) { left: 90%; animation-duration: 18s, 6s; animation-delay: 1s, 2s; }
        .snowflake:nth-of-type(20) { left: 95%; animation-duration: 11s, 3s; animation-delay: 3s, 0s; }
        
        .snowflake:nth-of-type(21) { left: 2%; animation-duration: 13s, 5s; animation-delay: 5s, 1s; }
        .snowflake:nth-of-type(22) { left: 8%; animation-duration: 10s, 3s; animation-delay: 2s, 4s; }
        .snowflake:nth-of-type(23) { left: 12%; animation-duration: 16s, 6s; animation-delay: 1s, 2s; }
        .snowflake:nth-of-type(24) { left: 18%; animation-duration: 12s, 4s; animation-delay: 6s, 0s; }
        .snowflake:nth-of-type(25) { left: 22%; animation-duration: 14s, 5s; animation-delay: 0s, 3s; }
        .snowflake:nth-of-type(26) { left: 28%; animation-duration: 11s, 3s; animation-delay: 4s, 2s; }
        .snowflake:nth-of-type(27) { left: 32%; animation-duration: 19s, 7s; animation-delay: 2s, 1s; }
        .snowflake:nth-of-type(28) { left: 38%; animation-duration: 15s, 6s; animation-delay: 5s, 5s; }
        .snowflake:nth-of-type(29) { left: 42%; animation-duration: 12s, 4s; animation-delay: 1s, 0s; }
        .snowflake:nth-of-type(30) { left: 48%; animation-duration: 17s, 5s; animation-delay: 3s, 2s; }
        .snowflake:nth-of-type(31) { left: 52%; animation-duration: 9s, 3s; animation-delay: 0s, 3s; }
        .snowflake:nth-of-type(32) { left: 58%; animation-duration: 14s, 6s; animation-delay: 4s, 1s; }
        .snowflake:nth-of-type(33) { left: 62%; animation-duration: 11s, 4s; animation-delay: 2s, 4s; }
        .snowflake:nth-of-type(34) { left: 68%; animation-duration: 16s, 5s; animation-delay: 6s, 0s; }
        .snowflake:nth-of-type(35) { left: 72%; animation-duration: 13s, 3s; animation-delay: 1s, 2s; }
        .snowflake:nth-of-type(36) { left: 78%; animation-duration: 18s, 7s; animation-delay: 5s, 1s; }
        .snowflake:nth-of-type(37) { left: 82%; animation-duration: 10s, 4s; animation-delay: 2s, 3s; }
        .snowflake:nth-of-type(38) { left: 88%; animation-duration: 15s, 6s; animation-delay: 4s, 0s; }
        .snowflake:nth-of-type(39) { left: 92%; animation-duration: 12s, 5s; animation-delay: 0s, 2s; }
        .snowflake:nth-of-type(40) { left: 98%; animation-duration: 17s, 4s; animation-delay: 3s, 5s; }

        .snowflake:nth-child(odd) { animation-direction: normal; }
        .snowflake:nth-child(even) { animation-direction: alternate; }

        @media (max-width: 768px) {
            .snowflake { font-size: 1em; }
            .snowflake-img img { width: 20px; }
        }
      `}}),_.jsxs("div",{className:"snowflakes","aria-hidden":"true",children:[Array.from({length:100}).map((e,t)=>_.jsxs("div",{className:"snowflake",children:[["","",""][t%3]," "]},`snow-${t}`)),Array.from({length:8}).map((e,t)=>{const s=r[t%r.length];return _.jsx("div",{className:"snowflake snowflake-img",children:_.jsx("img",{src:`/assets/img/${s}`,alt:"",style:{width:"25px",height:"auto"}})},`img-${t}`)})]})]})},OD=()=>{const[r,e]=ie.useState(!1),t=ie.useRef(null);ie.useEffect(()=>{(async()=>{if(t.current)try{t.current.volume=.5,await t.current.play(),e(!0)}catch(l){console.log("Trnh duyt chn t ng pht nhc, ngi dng cn tng tc th cng:",l),e(!1)}})()},[]);const s=()=>{t.current&&(r?t.current.pause():t.current.play().catch(a=>console.error("Khng th pht nhc:",a)),e(!r))};return _.jsxs("div",{className:"fixed bottom-4 left-4 z-50 animate-bounce-slow",children:[_.jsx("audio",{ref:t,src:"/music/jingle-bells.mp3",loop:!0}),_.jsx("button",{onClick:s,className:`
          flex items-center justify-center w-12 h-12 rounded-full border-2 border-white shadow-lg transition-all duration-300 overflow-hidden
          ${r?"bg-red-600 hover:bg-red-700 animate-spin-slow":"bg-gray-600 hover:bg-gray-700"}
        `,title:r?"Tt nhc Ging sinh":"Bt nhc Ging sinh",children:r?_.jsx("img",{src:"/assets/img/bell.png",alt:"Playing",className:"w-8 h-8 object-contain"}):_.jsx("img",{src:"/assets/img/MusicPlayer.png",alt:"Muted",className:"w-8 h-8 object-contain opacity-50 grayscale"})})]})},kD=({user:r})=>_.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden mb-8 border border-slate-200 max-w-2xl mx-auto",children:[_.jsx("div",{className:"bg-blue-600 text-white p-4 text-center",children:_.jsx("h3",{className:"m-0 text-xl uppercase tracking-wider font-bold",children:"Th D Thi"})}),_.jsxs("div",{className:"p-6",children:[_.jsxs("div",{className:"flex justify-between mb-3 border-b border-dashed border-slate-200 pb-2 last:border-0 last:mb-0",children:[_.jsx("span",{className:"font-semibold text-slate-500",children:"H v tn:"}),_.jsx("span",{className:"font-bold text-slate-800 text-right",children:r.fullName||"---"})]}),_.jsxs("div",{className:"flex justify-between mb-3 border-b border-dashed border-slate-200 pb-2 last:border-0 last:mb-0",children:[_.jsx("span",{className:"font-semibold text-slate-500",children:"Ngy sinh:"}),_.jsx("span",{className:"font-bold text-slate-800 text-right",children:r.birthDate||"---"})]}),_.jsxs("div",{className:"flex justify-between mb-3 border-b border-dashed border-slate-200 pb-2 last:border-0 last:mb-0",children:[_.jsx("span",{className:"font-semibold text-slate-500",children:"a ch:"}),_.jsx("span",{className:"font-bold text-slate-800 text-right",children:r.address||"---"})]}),_.jsxs("div",{className:"flex justify-between mb-3 border-b border-dashed border-slate-200 pb-2 last:border-0 last:mb-0",children:[_.jsx("span",{className:"font-semibold text-slate-500",children:"Lp / Kha:"}),_.jsxs("span",{className:"font-bold text-slate-800 text-right",children:[r.class?`${r.class}`:"",r.class&&r.courseName?" - ":"",r.courseName?`${r.courseName}`:"Cha vo kha"]})]})]})]}),jD=async(r,e,t,s,a)=>{try{const l={userId:r,quizId:e.id,quizTitle:e.title,score:t,totalQuestions:e.questions.length,timeTaken:a,completedAt:new Date,answers:s};await Yj(JS(ey,"exam_results"),{...l,completedAt:ct.fromDate(l.completedAt)}),console.log("Exam result saved successfully")}catch(l){throw console.error("Error saving exam result:",l),l}},DD=async r=>{try{const e=Bj(JS(ey,"exam_results"),qj("userId","==",r),Hj("completedAt","desc"));return(await Qj(e)).docs.map(s=>{const a=s.data();return{id:s.id,...a,completedAt:a.completedAt.toDate()}})}catch(e){return console.error("Error fetching exam history:",e),[]}},PD=({userProfile:r,onBack:e})=>{const[t,s]=ie.useState([]),[a,l]=ie.useState(!0);ie.useEffect(()=>{(async()=>{const p=await DD(r.id);s(p),l(!1)})()},[r.id]);const c=g=>new Intl.DateTimeFormat("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(g),f=g=>{const p=Math.floor(g/60),b=g%60;return`${p} pht ${b} giy`};return _.jsxs("div",{className:"w-full max-w-4xl mx-auto p-4 animate-slide-in-right",children:[_.jsxs("div",{className:"flex justify-between items-center mb-6",children:[_.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Lch s lm bi"}),_.jsx("button",{onClick:e,className:"bg-secondary text-secondary-foreground px-4 py-2 rounded-lg hover:bg-secondary/80 transition-colors",children:"Quay li"})]}),a?_.jsx("div",{className:"text-center p-8",children:_.jsx("p",{className:"text-muted-foreground",children:"ang ti d liu..."})}):t.length===0?_.jsx("div",{className:"text-center p-8 bg-card rounded-xl shadow-sm",children:_.jsx("p",{className:"text-muted-foreground",children:"Cha c lch s lm bi no."})}):_.jsx("div",{className:"space-y-4",children:t.map(g=>_.jsx("div",{className:"bg-card text-card-foreground p-6 rounded-xl shadow-md border border-border",children:_.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"text-xl font-bold text-primary mb-1",children:g.quizTitle}),_.jsxs("p",{className:"text-sm text-muted-foreground",children:["Thi gian: ",c(g.completedAt)]})]}),_.jsxs("div",{className:"flex items-center gap-6",children:[_.jsxs("div",{className:"text-center",children:[_.jsx("p",{className:"text-xs text-muted-foreground uppercase font-bold",children:"im s"}),_.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[g.score,"/",g.totalQuestions]})]}),_.jsxs("div",{className:"text-center",children:[_.jsx("p",{className:"text-xs text-muted-foreground uppercase font-bold",children:"Thi gian lm"}),_.jsx("p",{className:"text-lg font-semibold",children:f(g.timeTaken)})]})]})]})},g.id))})]})},MD=(r,e)=>{const t=s=>{const a=s.match(/(\d+)$/);return a?parseInt(a[1],10):0};return t(r.id)-t(e.id)},VD=async()=>{const{data:r,error:e}=await Ag.from("licenses").select(`
      id,
      name,
      display_order,
      subjects (
        id,
        name,
        display_order,
        questions (
          *,
          answers (
            id,
            text
          )
        )
      )
    `).order("display_order",{ascending:!0}).order("display_order",{foreignTable:"subjects",ascending:!0});if(e)throw console.error("Error fetching data from Supabase:",e),e;return r.map(s=>({id:s.id,name:s.name,subjects:s.subjects.map(a=>({id:a.id,name:a.name,questions:a.questions.sort(MD).map(l=>({id:l.id,text:l.text,image:l.image,correctAnswerId:l.correct_answer_id,answers:l.answers.map(c=>({id:c.id,text:c.text}))}))}))}))},ru=r=>[...r].sort(()=>Math.random()-.5),UD=()=>{const[r,e]=ie.useState("welcome"),[t,s]=ie.useState([]),[a,l]=ie.useState(!0),[c,f]=ie.useState(null),[g,p]=ie.useState(!1),{theme:b}=an(),[E,A]=ie.useState(null),[S,k]=ie.useState(null),[j,P]=ie.useState(null),[G,J]=ie.useState(""),[$,se]=ie.useState({}),[Z,ae]=ie.useState(null),[C,R]=ie.useState({}),[I,U]=ie.useState(0),[D,L]=ie.useState(void 0);ie.useEffect(()=>{const ke=bN(Jg,async pe=>{if(pe){const bt=await pe.getIdToken(),{data:{session:mt},error:fn}=await Ag.auth.setSession({access_token:bt,refresh_token:pe.refreshToken||bt});fn?console.error("Supabase session sync error:",fn):A(mt);try{const Un=WS(ey,"users",pe.uid),ht=await Kj(Un);if(ht.exists()){const ot=ht.data();k({id:pe.uid,email:pe.email||"",role:ot.role||"hoc_vien",fullName:ot.fullName,birthDate:ot.birthDate,address:ot.address,class:ot.class,courseName:ot.courseName})}else k({id:pe.uid,email:pe.email||"",role:"hoc_vien",fullName:pe.displayName||"Hc vin"})}catch(Un){console.error("Error fetching profile:",Un)}}else A(null),k(null),await Ag.auth.signOut();l(!1)});return()=>ke()},[]),ie.useEffect(()=>{(async()=>{try{const pe=await VD();s(pe),f(null)}catch(pe){console.error(pe),f("Khng th ti c b  thi. Vui lng kim tra li kt ni mng v lm mi trang.")}finally{l(!1)}})()},[]),ie.useEffect(()=>{if(!E&&j&&G){const ke=`progress_${G}_${j.id}`,pe=localStorage.getItem(ke);se(pe?JSON.parse(pe):{})}},[E,j,G]),ie.useEffect(()=>{E&&S&&S.role==="hoc_vien"&&(r==="welcome"||r==="login")&&e("license_selection")},[E,S,r]),ie.useEffect(()=>{if(E!=null&&E.user&&S){const ke={appState:r,selectedLicense:j,currentQuiz:Z,userAnswers:C,score:I,quizStartTime:D,userName:G};localStorage.setItem(`ontap_state_${E.user.id}`,JSON.stringify(ke))}},[E,S,r,j,Z,C,I,D,G]),ie.useEffect(()=>{if(E!=null&&E.user){const ke=localStorage.getItem(`ontap_state_${E.user.id}`);if(ke)try{const pe=JSON.parse(ke);pe.selectedLicense&&P(pe.selectedLicense),pe.userName&&J(pe.userName),pe.currentQuiz&&ae(pe.currentQuiz),pe.userAnswers&&R(pe.userAnswers),pe.score&&U(pe.score),pe.quizStartTime&&L(pe.quizStartTime),pe.appState&&pe.appState!=="welcome"&&e(pe.appState)}catch(pe){console.error("Failed to restore state",pe)}}},[E]);const N=(ke,pe)=>{if(E)return;const bt=`progress_${G}_${j.id}`,mt={...$},fn=mt[ke]||{lastScore:null,lastScoreTimestamp:null,highScore:0,highScoreTimestamp:null},Un=Date.now();fn.lastScore=pe,fn.lastScoreTimestamp=Un;const ht=fn.highScore??0;pe>=ht&&(fn.highScore=pe,fn.highScoreTimestamp=Un),mt[ke]=fn,se(mt),localStorage.setItem(bt,JSON.stringify(mt))},it=ie.useCallback(()=>e("license_selection"),[]),Tt=ie.useCallback(()=>e("login"),[]),Y=ie.useCallback(ke=>{P(ke),e("name_input")},[]),ue=ie.useCallback(ke=>{J(ke),e("mode_selection")},[]),_e=async()=>{E!=null&&E.user&&localStorage.removeItem(`ontap_state_${E.user.id}`),await Jg.signOut(),e("welcome"),P(null),J(""),se({}),L(void 0)},De=ie.useCallback(()=>{if(!j)return;const ke=j.subjects.flatMap(mt=>mt.questions),pe=ru(ke).slice(0,30),bt={id:"exam-quiz",title:`Thi th hng ${j.name}`,questions:pe.map(mt=>({...mt,answers:ru(mt.answers)})),timeLimit:2700};ae(bt),R({}),U(0),L(Date.now()),e("in_quiz")},[j]),$e=ie.useCallback(()=>{if(!j)return;const ke=j.subjects.flatMap(mt=>mt.questions),pe=ru(ke).slice(0,30),bt={id:"online-exam-quiz",title:`Thi Online hng ${j.name}`,questions:pe.map(mt=>({...mt,answers:ru(mt.answers)})),timeLimit:2700};ae(bt),R({}),U(0),L(Date.now()),e("in_online_exam")},[j]),V=ie.useCallback(ke=>{ke==="practice"?e("subject_selection"):ke==="exam"?De():ke==="online_exam"&&$e()},[De,$e]),ee=ie.useCallback(ke=>{const pe={id:ke.id,title:`n tp: ${ke.name}`,questions:ke.questions.map(bt=>({...bt,answers:ru(bt.answers)}))};ae(pe),R({}),U(0),L(void 0),e("in_quiz")},[]),le=ie.useCallback(async ke=>{if(!Z)return;let pe=0;if(Z.questions.forEach(bt=>{ke[bt.id]===bt.correctAnswerId&&pe++}),R(ke),U(pe),E&&S){const bt=D?Math.floor((Date.now()-D)/1e3):0;await jD(S.id,Z,pe,ke,bt)}else Z.id!=="exam-quiz"&&Z.id!=="online-exam-quiz"&&N(Z.id,pe);e("results")},[Z,N,E,S,D]),ce=ie.useCallback(()=>{ae(null),R({}),U(0),L(void 0),e("mode_selection")},[]),Ee=ie.useCallback(()=>{ae(null),R({}),U(0),e("subject_selection")},[]),Re=ie.useCallback(()=>{Z&&Z.id!=="exam-quiz"&&Z.id!=="online-exam-quiz"?Ee():ce()},[Z,Ee,ce]),Pe=ie.useCallback(()=>{Z&&(R({}),U(0),Z.id==="exam-quiz"?De():Z.id==="online-exam-quiz"?$e():e("in_quiz"))},[Z,De,$e]),vt=ie.useCallback(()=>{P(null),J(""),se({}),e("welcome")},[]),at=ie.useCallback(()=>{J(""),se({}),e("license_selection")},[]),Yr=ie.useCallback(()=>{P(null),J(""),ae(null),R({}),U(0),se({}),L(void 0),e("license_selection")},[]),As=ie.useCallback(()=>{(S==null?void 0:S.role)==="hoc_vien"?e("history"):e("dashboard")},[S]),xs=()=>{if(a)return _.jsx("div",{className:"text-center p-4 animate-slide-in-right",children:_.jsxs("div",{className:"bg-card text-card-foreground rounded-2xl shadow-xl p-8 md:p-12 max-w-2xl mx-auto",children:[b==="tri-an"?_.jsx("img",{src:"https://i.postimg.cc/MH9hVp8S/happy-techers-day.jpg",alt:"Icon Chc mng Ngy Nh gio",className:"h-24 w-24 mx-auto mb-4 animate-pulse rounded-full object-cover"}):_.jsx(Bo,{className:"h-24 w-24 mx-auto text-primary mb-4 animate-pulse"}),_.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-foreground mb-2",children:"ng Dng n Tp"}),b==="tri-an"&&_.jsx("p",{className:"text-xl font-semibold text-primary mb-4",children:"Knh mng ngy Nh gio Vit Nam"}),_.jsx("p",{className:"text-lg text-muted-foreground",children:"H thng ang ti b  thi mi nht, vui lng ch trong giy lt..."})]})});if(c)return _.jsx("div",{className:"text-center p-4 animate-slide-in-right",children:_.jsxs("div",{className:"bg-destructive/20 border-2 border-destructive/50 rounded-2xl shadow-xl p-8 md:p-12 max-w-2xl mx-auto",children:[_.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-destructive-foreground mb-4",children:" xy ra li"}),_.jsx("p",{className:"text-lg text-destructive-foreground/80",children:c})]})});switch(r){case"welcome":return _.jsx(uD,{onStart:it,onLoginClick:Tt});case"login":return _.jsx(AD,{onBack:vt});case"license_selection":return _.jsx(hD,{licenses:t,onSelect:Y,onBack:vt});case"name_input":return E&&S?(J(S.fullName||S.email||"Hc vin"),e("mode_selection"),null):_.jsx(dD,{onNameSubmit:ue,onBack:at});case"mode_selection":return _.jsx(fD,{onModeSelect:V,licenseName:(j==null?void 0:j.name)||"",userName:G||((S==null?void 0:S.fullName)??""),onSwitchLicense:Yr});case"subject_selection":return _.jsx(mD,{subjects:(j==null?void 0:j.subjects)||[],progress:$,onSelect:ee,onBack:()=>e("mode_selection")});case"in_quiz":return Z?Z.timeLimit!==void 0?_.jsx(_D,{quiz:Z,onFinish:le,onBack:Re,initialAnswers:C,onAnswerChange:R,startTime:D}):_.jsx(gD,{quiz:Z,onFinish:le,onBack:Re}):null;case"in_online_exam":return Z?_.jsx(wD,{quiz:Z,onFinish:le,onBack:ce,userName:G||((S==null?void 0:S.fullName)??""),selectedLicense:j,initialAnswers:C,onAnswerChange:R,startTime:D}):null;case"results":return Z?Z.id==="exam-quiz"||Z.id==="online-exam-quiz"?_.jsx(vD,{quiz:Z,userAnswers:C,score:I,onRetry:Pe,onBack:ce,userName:G||((S==null?void 0:S.fullName)??"")}):_.jsx(pD,{quiz:Z,userAnswers:C,score:I,onRetry:Pe,onBack:Ee,userName:G||((S==null?void 0:S.fullName)??"")}):null;case"dashboard":return S&&S.role!=="hoc_vien"?_.jsx(xD,{userProfile:S,onHistoryClick:()=>e("history")}):null;case"history":return S?_.jsx(PD,{userProfile:S,onBack:()=>e("license_selection")}):null;default:return null}};return _.jsxs("div",{className:"min-h-screen flex flex-col items-center text-foreground p-4 pb-20 transition-colors duration-500",children:[b==="noel"&&_.jsx(ND,{}),b==="noel"&&_.jsx(OD,{})," ",E&&S&&_.jsx(CD,{userProfile:S,onLogout:_e,onManagementClick:As}),E&&S&&S.role==="hoc_vien"&&r!=="in_quiz"&&r!=="in_online_exam"&&_.jsx(kD,{user:S}),_.jsx("main",{className:"w-full max-w-7xl mx-auto flex-grow flex flex-col justify-center",children:xs()}),g&&_.jsx(ID,{onClose:()=>p(!1)}),_.jsx(SD,{onVersionClick:()=>p(!0)})]})},m1=document.getElementById("root");if(!m1)throw new Error("Could not find root element to mount to");const LD=sx.createRoot(m1);LD.render(_.jsx(XA.StrictMode,{children:_.jsx(Zj,{children:_.jsx(UD,{})})}));
